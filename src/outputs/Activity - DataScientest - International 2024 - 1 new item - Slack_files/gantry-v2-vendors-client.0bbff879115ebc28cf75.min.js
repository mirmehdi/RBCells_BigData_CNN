(()=>{var ev=Object.defineProperty;var s=(U,l)=>ev(U,"name",{value:l,configurable:!0});(globalThis.webpackChunkwebapp=globalThis.webpackChunkwebapp||[]).push([["gantry-v2-vendors-client","gantry-v2-vendors-workflow-builder"],{128904:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0})},758145:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0})},390304:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0})},839116:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0})},235660:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isMsWindow=void 0;var f=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function u(m){return"MSInputMethodContext"in m&&"msCrypto"in m}s(u,"quacksLikeAnMsWindow");function g(m){if(u(m)&&m.msCrypto.subtle!==void 0){var h=m.msCrypto,a=h.getRandomValues,r=h.subtle;return f.map(function(n){return r[n]}).concat(a).every(function(n){return typeof n=="function"})}return!1}s(g,"isMsWindow"),l.isMsWindow=g},918086:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var u=f(772779);u.__exportStar(f(128904),l),u.__exportStar(f(758145),l),u.__exportStar(f(390304),l),u.__exportStar(f(839116),l),u.__exportStar(f(235660),l)},772779:(U,l,f)=>{"use strict";f.r(l),f.d(l,{__assign:()=>m,__asyncDelegator:()=>I,__asyncGenerator:()=>E,__asyncValues:()=>A,__await:()=>y,__awaiter:()=>e,__classPrivateFieldGet:()=>w,__classPrivateFieldSet:()=>N,__createBinding:()=>i,__decorate:()=>a,__exportStar:()=>o,__extends:()=>g,__generator:()=>t,__importDefault:()=>k,__importStar:()=>M,__makeTemplateObject:()=>L,__metadata:()=>n,__param:()=>r,__read:()=>p,__rest:()=>h,__spread:()=>S,__spreadArrays:()=>d,__values:()=>c});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u=s(function(T,O){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,G){D.__proto__=G}||function(D,G){for(var K in G)G.hasOwnProperty(K)&&(D[K]=G[K])},u(T,O)},"extendStatics");function g(T,O){u(T,O);function D(){this.constructor=T}s(D,"__"),T.prototype=O===null?Object.create(O):(D.prototype=O.prototype,new D)}s(g,"__extends");var m=s(function(){return m=Object.assign||s(function(O){for(var D,G=1,K=arguments.length;G<K;G++){D=arguments[G];for(var H in D)Object.prototype.hasOwnProperty.call(D,H)&&(O[H]=D[H])}return O},"__assign"),m.apply(this,arguments)},"__assign");function h(T,O){var D={};for(var G in T)Object.prototype.hasOwnProperty.call(T,G)&&O.indexOf(G)<0&&(D[G]=T[G]);if(T!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,G=Object.getOwnPropertySymbols(T);K<G.length;K++)O.indexOf(G[K])<0&&Object.prototype.propertyIsEnumerable.call(T,G[K])&&(D[G[K]]=T[G[K]]);return D}s(h,"__rest");function a(T,O,D,G){var K=arguments.length,H=K<3?O:G===null?G=Object.getOwnPropertyDescriptor(O,D):G,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(T,O,D,G);else for(var me=T.length-1;me>=0;me--)(q=T[me])&&(H=(K<3?q(H):K>3?q(O,D,H):q(O,D))||H);return K>3&&H&&Object.defineProperty(O,D,H),H}s(a,"__decorate");function r(T,O){return function(D,G){O(D,G,T)}}s(r,"__param");function n(T,O){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(T,O)}s(n,"__metadata");function e(T,O,D,G){function K(H){return H instanceof D?H:new D(function(q){q(H)})}return s(K,"adopt"),new(D||(D=Promise))(function(H,q){function me(Pe){try{ue(G.next(Pe))}catch(Ye){q(Ye)}}s(me,"fulfilled");function we(Pe){try{ue(G.throw(Pe))}catch(Ye){q(Ye)}}s(we,"rejected");function ue(Pe){Pe.done?H(Pe.value):K(Pe.value).then(me,we)}s(ue,"step"),ue((G=G.apply(T,O||[])).next())})}s(e,"__awaiter");function t(T,O){var D={label:0,sent:function(){if(H[0]&1)throw H[1];return H[1]},trys:[],ops:[]},G,K,H,q;return q={next:me(0),throw:me(1),return:me(2)},typeof Symbol=="function"&&(q[Symbol.iterator]=function(){return this}),q;function me(ue){return function(Pe){return we([ue,Pe])}}function we(ue){if(G)throw new TypeError("Generator is already executing.");for(;D;)try{if(G=1,K&&(H=ue[0]&2?K.return:ue[0]?K.throw||((H=K.return)&&H.call(K),0):K.next)&&!(H=H.call(K,ue[1])).done)return H;switch(K=0,H&&(ue=[ue[0]&2,H.value]),ue[0]){case 0:case 1:H=ue;break;case 4:return D.label++,{value:ue[1],done:!1};case 5:D.label++,K=ue[1],ue=[0];continue;case 7:ue=D.ops.pop(),D.trys.pop();continue;default:if(H=D.trys,!(H=H.length>0&&H[H.length-1])&&(ue[0]===6||ue[0]===2)){D=0;continue}if(ue[0]===3&&(!H||ue[1]>H[0]&&ue[1]<H[3])){D.label=ue[1];break}if(ue[0]===6&&D.label<H[1]){D.label=H[1],H=ue;break}if(H&&D.label<H[2]){D.label=H[2],D.ops.push(ue);break}H[2]&&D.ops.pop(),D.trys.pop();continue}ue=O.call(T,D)}catch(Pe){ue=[6,Pe],K=0}finally{G=H=0}if(ue[0]&5)throw ue[1];return{value:ue[0]?ue[1]:void 0,done:!0}}}s(t,"__generator");function i(T,O,D,G){G===void 0&&(G=D),T[G]=O[D]}s(i,"__createBinding");function o(T,O){for(var D in T)D!=="default"&&!O.hasOwnProperty(D)&&(O[D]=T[D])}s(o,"__exportStar");function c(T){var O=typeof Symbol=="function"&&Symbol.iterator,D=O&&T[O],G=0;if(D)return D.call(T);if(T&&typeof T.length=="number")return{next:function(){return T&&G>=T.length&&(T=void 0),{value:T&&T[G++],done:!T}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}s(c,"__values");function p(T,O){var D=typeof Symbol=="function"&&T[Symbol.iterator];if(!D)return T;var G=D.call(T),K,H=[],q;try{for(;(O===void 0||O-- >0)&&!(K=G.next()).done;)H.push(K.value)}catch(me){q={error:me}}finally{try{K&&!K.done&&(D=G.return)&&D.call(G)}finally{if(q)throw q.error}}return H}s(p,"__read");function S(){for(var T=[],O=0;O<arguments.length;O++)T=T.concat(p(arguments[O]));return T}s(S,"__spread");function d(){for(var T=0,O=0,D=arguments.length;O<D;O++)T+=arguments[O].length;for(var G=Array(T),K=0,O=0;O<D;O++)for(var H=arguments[O],q=0,me=H.length;q<me;q++,K++)G[K]=H[q];return G}s(d,"__spreadArrays");function y(T){return this instanceof y?(this.v=T,this):new y(T)}s(y,"__await");function E(T,O,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=D.apply(T,O||[]),K,H=[];return K={},q("next"),q("throw"),q("return"),K[Symbol.asyncIterator]=function(){return this},K;function q(be){G[be]&&(K[be]=function(He){return new Promise(function(Ke,Ue){H.push([be,He,Ke,Ue])>1||me(be,He)})})}function me(be,He){try{we(G[be](He))}catch(Ke){Ye(H[0][3],Ke)}}function we(be){be.value instanceof y?Promise.resolve(be.value.v).then(ue,Pe):Ye(H[0][2],be)}function ue(be){me("next",be)}function Pe(be){me("throw",be)}function Ye(be,He){be(He),H.shift(),H.length&&me(H[0][0],H[0][1])}}s(E,"__asyncGenerator");function I(T){var O,D;return O={},G("next"),G("throw",function(K){throw K}),G("return"),O[Symbol.iterator]=function(){return this},O;function G(K,H){O[K]=T[K]?function(q){return(D=!D)?{value:y(T[K](q)),done:K==="return"}:H?H(q):q}:H}}s(I,"__asyncDelegator");function A(T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var O=T[Symbol.asyncIterator],D;return O?O.call(T):(T=typeof c=="function"?c(T):T[Symbol.iterator](),D={},G("next"),G("throw"),G("return"),D[Symbol.asyncIterator]=function(){return this},D);function G(H){D[H]=T[H]&&function(q){return new Promise(function(me,we){q=T[H](q),K(me,we,q.done,q.value)})}}function K(H,q,me,we){Promise.resolve(we).then(function(ue){H({value:ue,done:me})},q)}}s(A,"__asyncValues");function L(T,O){return Object.defineProperty?Object.defineProperty(T,"raw",{value:O}):T.raw=O,T}s(L,"__makeTemplateObject");function M(T){if(T&&T.__esModule)return T;var O={};if(T!=null)for(var D in T)Object.hasOwnProperty.call(T,D)&&(O[D]=T[D]);return O.default=T,O}s(M,"__importStar");function k(T){return T&&T.__esModule?T:{default:T}}s(k,"__importDefault");function w(T,O){if(!O.has(T))throw new TypeError("attempted to get private field on non-instance");return O.get(T)}s(w,"__classPrivateFieldGet");function N(T,O,D){if(!O.has(T))throw new TypeError("attempted to set private field on non-instance");return O.set(T,D),D}s(N,"__classPrivateFieldSet")},814955:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.EMPTY_DATA_SHA_256=l.SHA_256_HMAC_ALGO=l.SHA_256_HASH=void 0,l.SHA_256_HASH={name:"SHA-256"},l.SHA_256_HMAC_ALGO={name:"HMAC",hash:l.SHA_256_HASH},l.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},969258:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var u=f(471195),g=f(732038),m=f(333523),h=f(523469),a=f(918086),r=f(464423),n=f(265388),e=function(){function t(i){(0,h.supportsWebCrypto)((0,r.locateWindow)())?this.hash=new g.Sha256(i):(0,a.isMsWindow)((0,r.locateWindow)())?this.hash=new u.Sha256(i):this.hash=new m.Sha256(i)}return s(t,"Sha256"),t.prototype.update=function(i,o){this.hash.update((0,n.convertToBuffer)(i))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}();l.Sha256=e},471195:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var u=f(485787),g=f(814955),m=f(940612),h=f(464423),a=function(){function e(t){this.secret=t,this.reset()}return s(e,"Sha256"),e.prototype.update=function(t){var i=this;(0,u.isEmptyData)(t)||(this.operation=this.operation.then(function(o){return o.onerror=function(){i.operation=Promise.reject(new Error("Error encountered updating hash"))},o.process(n(t)),o}),this.operation.catch(function(){}))},e.prototype.digest=function(){return this.operation.then(function(t){return new Promise(function(i,o){t.onerror=function(){o(new Error("Error encountered finalizing hash"))},t.oncomplete=function(){t.result&&i(new Uint8Array(t.result)),o(new Error("Error encountered finalizing hash"))},t.finish()})})},e.prototype.reset=function(){this.secret?(this.operation=r(this.secret).then(function(t){return(0,h.locateWindow)().msCrypto.subtle.sign(g.SHA_256_HMAC_ALGO,t)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,h.locateWindow)().msCrypto.subtle.digest("SHA-256"))},e}();l.Sha256=a;function r(e){return new Promise(function(t,i){var o=(0,h.locateWindow)().msCrypto.subtle.importKey("raw",n(e),g.SHA_256_HMAC_ALGO,!1,["sign"]);o.oncomplete=function(){o.result&&t(o.result),i(new Error("ImportKey completed without importing key."))},o.onerror=function(){i(new Error("ImportKey failed to import key."))}})}s(r,"getKeyPromise");function n(e){return typeof e=="string"?(0,m.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}s(n,"toArrayBufferView")},236634:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WebCryptoSha256=l.Ie11Sha256=void 0;var u=f(19455);u.__exportStar(f(969258),l);var g=f(471195);Object.defineProperty(l,"Ie11Sha256",{enumerable:!0,get:function(){return g.Sha256}});var m=f(732038);Object.defineProperty(l,"WebCryptoSha256",{enumerable:!0,get:function(){return m.Sha256}})},485787:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function f(u){return typeof u=="string"?u.length===0:u.byteLength===0}s(f,"isEmptyData"),l.isEmptyData=f},732038:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var u=f(265388),g=f(814955),m=f(464423),h=function(){function a(r){this.toHash=new Uint8Array(0),this.secret=r,this.reset()}return s(a,"Sha256"),a.prototype.update=function(r){if(!(0,u.isEmptyData)(r)){var n=(0,u.convertToBuffer)(r),e=new Uint8Array(this.toHash.byteLength+n.byteLength);e.set(this.toHash,0),e.set(n,this.toHash.byteLength),this.toHash=e}},a.prototype.digest=function(){var r=this;return this.key?this.key.then(function(n){return(0,m.locateWindow)().crypto.subtle.sign(g.SHA_256_HMAC_ALGO,n,r.toHash).then(function(e){return new Uint8Array(e)})}):(0,u.isEmptyData)(this.toHash)?Promise.resolve(g.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,m.locateWindow)().crypto.subtle.digest(g.SHA_256_HASH,r.toHash)}).then(function(n){return Promise.resolve(new Uint8Array(n))})},a.prototype.reset=function(){var r=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(n,e){(0,m.locateWindow)().crypto.subtle.importKey("raw",(0,u.convertToBuffer)(r.secret),g.SHA_256_HMAC_ALGO,!1,["sign"]).then(n,e)}),this.key.catch(function(){}))},a}();l.Sha256=h},19455:(U,l,f)=>{"use strict";f.r(l),f.d(l,{__assign:()=>m,__asyncDelegator:()=>I,__asyncGenerator:()=>E,__asyncValues:()=>A,__await:()=>y,__awaiter:()=>e,__classPrivateFieldGet:()=>w,__classPrivateFieldSet:()=>N,__createBinding:()=>i,__decorate:()=>a,__exportStar:()=>o,__extends:()=>g,__generator:()=>t,__importDefault:()=>k,__importStar:()=>M,__makeTemplateObject:()=>L,__metadata:()=>n,__param:()=>r,__read:()=>p,__rest:()=>h,__spread:()=>S,__spreadArrays:()=>d,__values:()=>c});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u=s(function(T,O){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,G){D.__proto__=G}||function(D,G){for(var K in G)G.hasOwnProperty(K)&&(D[K]=G[K])},u(T,O)},"extendStatics");function g(T,O){u(T,O);function D(){this.constructor=T}s(D,"__"),T.prototype=O===null?Object.create(O):(D.prototype=O.prototype,new D)}s(g,"__extends");var m=s(function(){return m=Object.assign||s(function(O){for(var D,G=1,K=arguments.length;G<K;G++){D=arguments[G];for(var H in D)Object.prototype.hasOwnProperty.call(D,H)&&(O[H]=D[H])}return O},"__assign"),m.apply(this,arguments)},"__assign");function h(T,O){var D={};for(var G in T)Object.prototype.hasOwnProperty.call(T,G)&&O.indexOf(G)<0&&(D[G]=T[G]);if(T!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,G=Object.getOwnPropertySymbols(T);K<G.length;K++)O.indexOf(G[K])<0&&Object.prototype.propertyIsEnumerable.call(T,G[K])&&(D[G[K]]=T[G[K]]);return D}s(h,"__rest");function a(T,O,D,G){var K=arguments.length,H=K<3?O:G===null?G=Object.getOwnPropertyDescriptor(O,D):G,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(T,O,D,G);else for(var me=T.length-1;me>=0;me--)(q=T[me])&&(H=(K<3?q(H):K>3?q(O,D,H):q(O,D))||H);return K>3&&H&&Object.defineProperty(O,D,H),H}s(a,"__decorate");function r(T,O){return function(D,G){O(D,G,T)}}s(r,"__param");function n(T,O){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(T,O)}s(n,"__metadata");function e(T,O,D,G){function K(H){return H instanceof D?H:new D(function(q){q(H)})}return s(K,"adopt"),new(D||(D=Promise))(function(H,q){function me(Pe){try{ue(G.next(Pe))}catch(Ye){q(Ye)}}s(me,"fulfilled");function we(Pe){try{ue(G.throw(Pe))}catch(Ye){q(Ye)}}s(we,"rejected");function ue(Pe){Pe.done?H(Pe.value):K(Pe.value).then(me,we)}s(ue,"step"),ue((G=G.apply(T,O||[])).next())})}s(e,"__awaiter");function t(T,O){var D={label:0,sent:function(){if(H[0]&1)throw H[1];return H[1]},trys:[],ops:[]},G,K,H,q;return q={next:me(0),throw:me(1),return:me(2)},typeof Symbol=="function"&&(q[Symbol.iterator]=function(){return this}),q;function me(ue){return function(Pe){return we([ue,Pe])}}function we(ue){if(G)throw new TypeError("Generator is already executing.");for(;D;)try{if(G=1,K&&(H=ue[0]&2?K.return:ue[0]?K.throw||((H=K.return)&&H.call(K),0):K.next)&&!(H=H.call(K,ue[1])).done)return H;switch(K=0,H&&(ue=[ue[0]&2,H.value]),ue[0]){case 0:case 1:H=ue;break;case 4:return D.label++,{value:ue[1],done:!1};case 5:D.label++,K=ue[1],ue=[0];continue;case 7:ue=D.ops.pop(),D.trys.pop();continue;default:if(H=D.trys,!(H=H.length>0&&H[H.length-1])&&(ue[0]===6||ue[0]===2)){D=0;continue}if(ue[0]===3&&(!H||ue[1]>H[0]&&ue[1]<H[3])){D.label=ue[1];break}if(ue[0]===6&&D.label<H[1]){D.label=H[1],H=ue;break}if(H&&D.label<H[2]){D.label=H[2],D.ops.push(ue);break}H[2]&&D.ops.pop(),D.trys.pop();continue}ue=O.call(T,D)}catch(Pe){ue=[6,Pe],K=0}finally{G=H=0}if(ue[0]&5)throw ue[1];return{value:ue[0]?ue[1]:void 0,done:!0}}}s(t,"__generator");function i(T,O,D,G){G===void 0&&(G=D),T[G]=O[D]}s(i,"__createBinding");function o(T,O){for(var D in T)D!=="default"&&!O.hasOwnProperty(D)&&(O[D]=T[D])}s(o,"__exportStar");function c(T){var O=typeof Symbol=="function"&&Symbol.iterator,D=O&&T[O],G=0;if(D)return D.call(T);if(T&&typeof T.length=="number")return{next:function(){return T&&G>=T.length&&(T=void 0),{value:T&&T[G++],done:!T}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}s(c,"__values");function p(T,O){var D=typeof Symbol=="function"&&T[Symbol.iterator];if(!D)return T;var G=D.call(T),K,H=[],q;try{for(;(O===void 0||O-- >0)&&!(K=G.next()).done;)H.push(K.value)}catch(me){q={error:me}}finally{try{K&&!K.done&&(D=G.return)&&D.call(G)}finally{if(q)throw q.error}}return H}s(p,"__read");function S(){for(var T=[],O=0;O<arguments.length;O++)T=T.concat(p(arguments[O]));return T}s(S,"__spread");function d(){for(var T=0,O=0,D=arguments.length;O<D;O++)T+=arguments[O].length;for(var G=Array(T),K=0,O=0;O<D;O++)for(var H=arguments[O],q=0,me=H.length;q<me;q++,K++)G[K]=H[q];return G}s(d,"__spreadArrays");function y(T){return this instanceof y?(this.v=T,this):new y(T)}s(y,"__await");function E(T,O,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=D.apply(T,O||[]),K,H=[];return K={},q("next"),q("throw"),q("return"),K[Symbol.asyncIterator]=function(){return this},K;function q(be){G[be]&&(K[be]=function(He){return new Promise(function(Ke,Ue){H.push([be,He,Ke,Ue])>1||me(be,He)})})}function me(be,He){try{we(G[be](He))}catch(Ke){Ye(H[0][3],Ke)}}function we(be){be.value instanceof y?Promise.resolve(be.value.v).then(ue,Pe):Ye(H[0][2],be)}function ue(be){me("next",be)}function Pe(be){me("throw",be)}function Ye(be,He){be(He),H.shift(),H.length&&me(H[0][0],H[0][1])}}s(E,"__asyncGenerator");function I(T){var O,D;return O={},G("next"),G("throw",function(K){throw K}),G("return"),O[Symbol.iterator]=function(){return this},O;function G(K,H){O[K]=T[K]?function(q){return(D=!D)?{value:y(T[K](q)),done:K==="return"}:H?H(q):q}:H}}s(I,"__asyncDelegator");function A(T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var O=T[Symbol.asyncIterator],D;return O?O.call(T):(T=typeof c=="function"?c(T):T[Symbol.iterator](),D={},G("next"),G("throw"),G("return"),D[Symbol.asyncIterator]=function(){return this},D);function G(H){D[H]=T[H]&&function(q){return new Promise(function(me,we){q=T[H](q),K(me,we,q.done,q.value)})}}function K(H,q,me,we){Promise.resolve(we).then(function(ue){H({value:ue,done:me})},q)}}s(A,"__asyncValues");function L(T,O){return Object.defineProperty?Object.defineProperty(T,"raw",{value:O}):T.raw=O,T}s(L,"__makeTemplateObject");function M(T){if(T&&T.__esModule)return T;var O={};if(T!=null)for(var D in T)Object.hasOwnProperty.call(T,D)&&(O[D]=T[D]);return O.default=T,O}s(M,"__importStar");function k(T){return T&&T.__esModule?T:{default:T}}s(k,"__importDefault");function w(T,O){if(!O.has(T))throw new TypeError("attempted to get private field on non-instance");return O.get(T)}s(w,"__classPrivateFieldGet");function N(T,O,D){if(!O.has(T))throw new TypeError("attempted to set private field on non-instance");return O.set(T,D),D}s(N,"__classPrivateFieldSet")},934602:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.RawSha256=void 0;var u=f(765494),g=function(){function m(){this.state=Int32Array.from(u.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return s(m,"RawSha256"),m.prototype.update=function(h){if(this.finished)throw new Error("Attempted to update an already finished hash.");var a=0,r=h.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>u.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=h[a++],r--,this.bufferLength===u.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},m.prototype.digest=function(){if(!this.finished){var h=this.bytesHashed*8,a=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(a.setUint8(this.bufferLength++,128),r%u.BLOCK_SIZE>=u.BLOCK_SIZE-8){for(var n=this.bufferLength;n<u.BLOCK_SIZE;n++)a.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<u.BLOCK_SIZE-8;n++)a.setUint8(n,0);a.setUint32(u.BLOCK_SIZE-8,Math.floor(h/4294967296),!0),a.setUint32(u.BLOCK_SIZE-4,h),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(u.DIGEST_LENGTH),n=0;n<8;n++)e[n*4]=this.state[n]>>>24&255,e[n*4+1]=this.state[n]>>>16&255,e[n*4+2]=this.state[n]>>>8&255,e[n*4+3]=this.state[n]>>>0&255;return e},m.prototype.hashBuffer=function(){for(var h=this,a=h.buffer,r=h.state,n=r[0],e=r[1],t=r[2],i=r[3],o=r[4],c=r[5],p=r[6],S=r[7],d=0;d<u.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(a[d*4]&255)<<24|(a[d*4+1]&255)<<16|(a[d*4+2]&255)<<8|a[d*4+3]&255;else{var y=this.temp[d-2],E=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10;y=this.temp[d-15];var I=(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;this.temp[d]=(E+this.temp[d-7]|0)+(I+this.temp[d-16]|0)}var A=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&c^~o&p)|0)+(S+(u.KEY[d]+this.temp[d]|0)|0)|0,L=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&e^n&t^e&t)|0;S=p,p=c,c=o,o=i+A|0,i=t,t=e,e=n,n=A+L|0}r[0]+=n,r[1]+=e,r[2]+=t,r[3]+=i,r[4]+=o,r[5]+=c,r[6]+=p,r[7]+=S},m}();l.RawSha256=g},765494:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MAX_HASHABLE_LENGTH=l.INIT=l.KEY=l.DIGEST_LENGTH=l.BLOCK_SIZE=void 0,l.BLOCK_SIZE=64,l.DIGEST_LENGTH=32,l.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},333523:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var u=f(44520);u.__exportStar(f(20871),l)},20871:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var u=f(44520),g=f(765494),m=f(934602),h=f(265388),a=function(){function n(e){this.secret=e,this.hash=new m.RawSha256,this.reset()}return s(n,"Sha256"),n.prototype.update=function(e){if(!((0,h.isEmptyData)(e)||this.error))try{this.hash.update((0,h.convertToBuffer)(e))}catch(t){this.error=t}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){return[2,this.digestSync()]})})},n.prototype.reset=function(){if(this.hash=new m.RawSha256,this.secret){this.outer=new m.RawSha256;var e=r(this.secret),t=new Uint8Array(g.BLOCK_SIZE);t.set(e);for(var i=0;i<g.BLOCK_SIZE;i++)e[i]^=54,t[i]^=92;this.hash.update(e),this.outer.update(t);for(var i=0;i<e.byteLength;i++)e[i]=0}},n}();l.Sha256=a;function r(n){var e=(0,h.convertToBuffer)(n);if(e.byteLength>g.BLOCK_SIZE){var t=new m.RawSha256;t.update(e),e=t.digest()}var i=new Uint8Array(g.BLOCK_SIZE);return i.set(e),i}s(r,"bufferFromSecret")},44520:(U,l,f)=>{"use strict";f.r(l),f.d(l,{__assign:()=>m,__asyncDelegator:()=>I,__asyncGenerator:()=>E,__asyncValues:()=>A,__await:()=>y,__awaiter:()=>e,__classPrivateFieldGet:()=>w,__classPrivateFieldSet:()=>N,__createBinding:()=>i,__decorate:()=>a,__exportStar:()=>o,__extends:()=>g,__generator:()=>t,__importDefault:()=>k,__importStar:()=>M,__makeTemplateObject:()=>L,__metadata:()=>n,__param:()=>r,__read:()=>p,__rest:()=>h,__spread:()=>S,__spreadArrays:()=>d,__values:()=>c});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u=s(function(T,O){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,G){D.__proto__=G}||function(D,G){for(var K in G)G.hasOwnProperty(K)&&(D[K]=G[K])},u(T,O)},"extendStatics");function g(T,O){u(T,O);function D(){this.constructor=T}s(D,"__"),T.prototype=O===null?Object.create(O):(D.prototype=O.prototype,new D)}s(g,"__extends");var m=s(function(){return m=Object.assign||s(function(O){for(var D,G=1,K=arguments.length;G<K;G++){D=arguments[G];for(var H in D)Object.prototype.hasOwnProperty.call(D,H)&&(O[H]=D[H])}return O},"__assign"),m.apply(this,arguments)},"__assign");function h(T,O){var D={};for(var G in T)Object.prototype.hasOwnProperty.call(T,G)&&O.indexOf(G)<0&&(D[G]=T[G]);if(T!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,G=Object.getOwnPropertySymbols(T);K<G.length;K++)O.indexOf(G[K])<0&&Object.prototype.propertyIsEnumerable.call(T,G[K])&&(D[G[K]]=T[G[K]]);return D}s(h,"__rest");function a(T,O,D,G){var K=arguments.length,H=K<3?O:G===null?G=Object.getOwnPropertyDescriptor(O,D):G,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(T,O,D,G);else for(var me=T.length-1;me>=0;me--)(q=T[me])&&(H=(K<3?q(H):K>3?q(O,D,H):q(O,D))||H);return K>3&&H&&Object.defineProperty(O,D,H),H}s(a,"__decorate");function r(T,O){return function(D,G){O(D,G,T)}}s(r,"__param");function n(T,O){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(T,O)}s(n,"__metadata");function e(T,O,D,G){function K(H){return H instanceof D?H:new D(function(q){q(H)})}return s(K,"adopt"),new(D||(D=Promise))(function(H,q){function me(Pe){try{ue(G.next(Pe))}catch(Ye){q(Ye)}}s(me,"fulfilled");function we(Pe){try{ue(G.throw(Pe))}catch(Ye){q(Ye)}}s(we,"rejected");function ue(Pe){Pe.done?H(Pe.value):K(Pe.value).then(me,we)}s(ue,"step"),ue((G=G.apply(T,O||[])).next())})}s(e,"__awaiter");function t(T,O){var D={label:0,sent:function(){if(H[0]&1)throw H[1];return H[1]},trys:[],ops:[]},G,K,H,q;return q={next:me(0),throw:me(1),return:me(2)},typeof Symbol=="function"&&(q[Symbol.iterator]=function(){return this}),q;function me(ue){return function(Pe){return we([ue,Pe])}}function we(ue){if(G)throw new TypeError("Generator is already executing.");for(;D;)try{if(G=1,K&&(H=ue[0]&2?K.return:ue[0]?K.throw||((H=K.return)&&H.call(K),0):K.next)&&!(H=H.call(K,ue[1])).done)return H;switch(K=0,H&&(ue=[ue[0]&2,H.value]),ue[0]){case 0:case 1:H=ue;break;case 4:return D.label++,{value:ue[1],done:!1};case 5:D.label++,K=ue[1],ue=[0];continue;case 7:ue=D.ops.pop(),D.trys.pop();continue;default:if(H=D.trys,!(H=H.length>0&&H[H.length-1])&&(ue[0]===6||ue[0]===2)){D=0;continue}if(ue[0]===3&&(!H||ue[1]>H[0]&&ue[1]<H[3])){D.label=ue[1];break}if(ue[0]===6&&D.label<H[1]){D.label=H[1],H=ue;break}if(H&&D.label<H[2]){D.label=H[2],D.ops.push(ue);break}H[2]&&D.ops.pop(),D.trys.pop();continue}ue=O.call(T,D)}catch(Pe){ue=[6,Pe],K=0}finally{G=H=0}if(ue[0]&5)throw ue[1];return{value:ue[0]?ue[1]:void 0,done:!0}}}s(t,"__generator");function i(T,O,D,G){G===void 0&&(G=D),T[G]=O[D]}s(i,"__createBinding");function o(T,O){for(var D in T)D!=="default"&&!O.hasOwnProperty(D)&&(O[D]=T[D])}s(o,"__exportStar");function c(T){var O=typeof Symbol=="function"&&Symbol.iterator,D=O&&T[O],G=0;if(D)return D.call(T);if(T&&typeof T.length=="number")return{next:function(){return T&&G>=T.length&&(T=void 0),{value:T&&T[G++],done:!T}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}s(c,"__values");function p(T,O){var D=typeof Symbol=="function"&&T[Symbol.iterator];if(!D)return T;var G=D.call(T),K,H=[],q;try{for(;(O===void 0||O-- >0)&&!(K=G.next()).done;)H.push(K.value)}catch(me){q={error:me}}finally{try{K&&!K.done&&(D=G.return)&&D.call(G)}finally{if(q)throw q.error}}return H}s(p,"__read");function S(){for(var T=[],O=0;O<arguments.length;O++)T=T.concat(p(arguments[O]));return T}s(S,"__spread");function d(){for(var T=0,O=0,D=arguments.length;O<D;O++)T+=arguments[O].length;for(var G=Array(T),K=0,O=0;O<D;O++)for(var H=arguments[O],q=0,me=H.length;q<me;q++,K++)G[K]=H[q];return G}s(d,"__spreadArrays");function y(T){return this instanceof y?(this.v=T,this):new y(T)}s(y,"__await");function E(T,O,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=D.apply(T,O||[]),K,H=[];return K={},q("next"),q("throw"),q("return"),K[Symbol.asyncIterator]=function(){return this},K;function q(be){G[be]&&(K[be]=function(He){return new Promise(function(Ke,Ue){H.push([be,He,Ke,Ue])>1||me(be,He)})})}function me(be,He){try{we(G[be](He))}catch(Ke){Ye(H[0][3],Ke)}}function we(be){be.value instanceof y?Promise.resolve(be.value.v).then(ue,Pe):Ye(H[0][2],be)}function ue(be){me("next",be)}function Pe(be){me("throw",be)}function Ye(be,He){be(He),H.shift(),H.length&&me(H[0][0],H[0][1])}}s(E,"__asyncGenerator");function I(T){var O,D;return O={},G("next"),G("throw",function(K){throw K}),G("return"),O[Symbol.iterator]=function(){return this},O;function G(K,H){O[K]=T[K]?function(q){return(D=!D)?{value:y(T[K](q)),done:K==="return"}:H?H(q):q}:H}}s(I,"__asyncDelegator");function A(T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var O=T[Symbol.asyncIterator],D;return O?O.call(T):(T=typeof c=="function"?c(T):T[Symbol.iterator](),D={},G("next"),G("throw"),G("return"),D[Symbol.asyncIterator]=function(){return this},D);function G(H){D[H]=T[H]&&function(q){return new Promise(function(me,we){q=T[H](q),K(me,we,q.done,q.value)})}}function K(H,q,me,we){Promise.resolve(we).then(function(ue){H({value:ue,done:me})},q)}}s(A,"__asyncValues");function L(T,O){return Object.defineProperty?Object.defineProperty(T,"raw",{value:O}):T.raw=O,T}s(L,"__makeTemplateObject");function M(T){if(T&&T.__esModule)return T;var O={};if(T!=null)for(var D in T)Object.hasOwnProperty.call(T,D)&&(O[D]=T[D]);return O.default=T,O}s(M,"__importStar");function k(T){return T&&T.__esModule?T:{default:T}}s(k,"__importDefault");function w(T,O){if(!O.has(T))throw new TypeError("attempted to get private field on non-instance");return O.get(T)}s(w,"__classPrivateFieldGet");function N(T,O,D){if(!O.has(T))throw new TypeError("attempted to set private field on non-instance");return O.set(T,D),D}s(N,"__classPrivateFieldSet")},523469:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var u=f(930986);u.__exportStar(f(113526),l)},113526:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.supportsZeroByteGCM=l.supportsSubtleCrypto=l.supportsSecureRandom=l.supportsWebCrypto=void 0;var u=f(930986),g=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function m(n){if(h(n)&&typeof n.crypto.subtle=="object"){var e=n.crypto.subtle;return a(e)}return!1}s(m,"supportsWebCrypto"),l.supportsWebCrypto=m;function h(n){if(typeof n=="object"&&typeof n.crypto=="object"){var e=n.crypto.getRandomValues;return typeof e=="function"}return!1}s(h,"supportsSecureRandom"),l.supportsSecureRandom=h;function a(n){return n&&g.every(function(e){return typeof n[e]=="function"})}s(a,"supportsSubtleCrypto"),l.supportsSubtleCrypto=a;function r(n){return u.__awaiter(this,void 0,void 0,function(){var e,t,i;return u.__generator(this,function(o){switch(o.label){case 0:if(!a(n))return[2,!1];o.label=1;case 1:return o.trys.push([1,4,,5]),[4,n.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return e=o.sent(),[4,n.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},e,new Uint8Array(0))];case 3:return t=o.sent(),[2,t.byteLength===16];case 4:return i=o.sent(),[2,!1];case 5:return[2]}})})}s(r,"supportsZeroByteGCM"),l.supportsZeroByteGCM=r},930986:(U,l,f)=>{"use strict";f.r(l),f.d(l,{__assign:()=>m,__asyncDelegator:()=>I,__asyncGenerator:()=>E,__asyncValues:()=>A,__await:()=>y,__awaiter:()=>e,__classPrivateFieldGet:()=>w,__classPrivateFieldSet:()=>N,__createBinding:()=>i,__decorate:()=>a,__exportStar:()=>o,__extends:()=>g,__generator:()=>t,__importDefault:()=>k,__importStar:()=>M,__makeTemplateObject:()=>L,__metadata:()=>n,__param:()=>r,__read:()=>p,__rest:()=>h,__spread:()=>S,__spreadArrays:()=>d,__values:()=>c});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u=s(function(T,O){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,G){D.__proto__=G}||function(D,G){for(var K in G)G.hasOwnProperty(K)&&(D[K]=G[K])},u(T,O)},"extendStatics");function g(T,O){u(T,O);function D(){this.constructor=T}s(D,"__"),T.prototype=O===null?Object.create(O):(D.prototype=O.prototype,new D)}s(g,"__extends");var m=s(function(){return m=Object.assign||s(function(O){for(var D,G=1,K=arguments.length;G<K;G++){D=arguments[G];for(var H in D)Object.prototype.hasOwnProperty.call(D,H)&&(O[H]=D[H])}return O},"__assign"),m.apply(this,arguments)},"__assign");function h(T,O){var D={};for(var G in T)Object.prototype.hasOwnProperty.call(T,G)&&O.indexOf(G)<0&&(D[G]=T[G]);if(T!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,G=Object.getOwnPropertySymbols(T);K<G.length;K++)O.indexOf(G[K])<0&&Object.prototype.propertyIsEnumerable.call(T,G[K])&&(D[G[K]]=T[G[K]]);return D}s(h,"__rest");function a(T,O,D,G){var K=arguments.length,H=K<3?O:G===null?G=Object.getOwnPropertyDescriptor(O,D):G,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(T,O,D,G);else for(var me=T.length-1;me>=0;me--)(q=T[me])&&(H=(K<3?q(H):K>3?q(O,D,H):q(O,D))||H);return K>3&&H&&Object.defineProperty(O,D,H),H}s(a,"__decorate");function r(T,O){return function(D,G){O(D,G,T)}}s(r,"__param");function n(T,O){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(T,O)}s(n,"__metadata");function e(T,O,D,G){function K(H){return H instanceof D?H:new D(function(q){q(H)})}return s(K,"adopt"),new(D||(D=Promise))(function(H,q){function me(Pe){try{ue(G.next(Pe))}catch(Ye){q(Ye)}}s(me,"fulfilled");function we(Pe){try{ue(G.throw(Pe))}catch(Ye){q(Ye)}}s(we,"rejected");function ue(Pe){Pe.done?H(Pe.value):K(Pe.value).then(me,we)}s(ue,"step"),ue((G=G.apply(T,O||[])).next())})}s(e,"__awaiter");function t(T,O){var D={label:0,sent:function(){if(H[0]&1)throw H[1];return H[1]},trys:[],ops:[]},G,K,H,q;return q={next:me(0),throw:me(1),return:me(2)},typeof Symbol=="function"&&(q[Symbol.iterator]=function(){return this}),q;function me(ue){return function(Pe){return we([ue,Pe])}}function we(ue){if(G)throw new TypeError("Generator is already executing.");for(;D;)try{if(G=1,K&&(H=ue[0]&2?K.return:ue[0]?K.throw||((H=K.return)&&H.call(K),0):K.next)&&!(H=H.call(K,ue[1])).done)return H;switch(K=0,H&&(ue=[ue[0]&2,H.value]),ue[0]){case 0:case 1:H=ue;break;case 4:return D.label++,{value:ue[1],done:!1};case 5:D.label++,K=ue[1],ue=[0];continue;case 7:ue=D.ops.pop(),D.trys.pop();continue;default:if(H=D.trys,!(H=H.length>0&&H[H.length-1])&&(ue[0]===6||ue[0]===2)){D=0;continue}if(ue[0]===3&&(!H||ue[1]>H[0]&&ue[1]<H[3])){D.label=ue[1];break}if(ue[0]===6&&D.label<H[1]){D.label=H[1],H=ue;break}if(H&&D.label<H[2]){D.label=H[2],D.ops.push(ue);break}H[2]&&D.ops.pop(),D.trys.pop();continue}ue=O.call(T,D)}catch(Pe){ue=[6,Pe],K=0}finally{G=H=0}if(ue[0]&5)throw ue[1];return{value:ue[0]?ue[1]:void 0,done:!0}}}s(t,"__generator");function i(T,O,D,G){G===void 0&&(G=D),T[G]=O[D]}s(i,"__createBinding");function o(T,O){for(var D in T)D!=="default"&&!O.hasOwnProperty(D)&&(O[D]=T[D])}s(o,"__exportStar");function c(T){var O=typeof Symbol=="function"&&Symbol.iterator,D=O&&T[O],G=0;if(D)return D.call(T);if(T&&typeof T.length=="number")return{next:function(){return T&&G>=T.length&&(T=void 0),{value:T&&T[G++],done:!T}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}s(c,"__values");function p(T,O){var D=typeof Symbol=="function"&&T[Symbol.iterator];if(!D)return T;var G=D.call(T),K,H=[],q;try{for(;(O===void 0||O-- >0)&&!(K=G.next()).done;)H.push(K.value)}catch(me){q={error:me}}finally{try{K&&!K.done&&(D=G.return)&&D.call(G)}finally{if(q)throw q.error}}return H}s(p,"__read");function S(){for(var T=[],O=0;O<arguments.length;O++)T=T.concat(p(arguments[O]));return T}s(S,"__spread");function d(){for(var T=0,O=0,D=arguments.length;O<D;O++)T+=arguments[O].length;for(var G=Array(T),K=0,O=0;O<D;O++)for(var H=arguments[O],q=0,me=H.length;q<me;q++,K++)G[K]=H[q];return G}s(d,"__spreadArrays");function y(T){return this instanceof y?(this.v=T,this):new y(T)}s(y,"__await");function E(T,O,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=D.apply(T,O||[]),K,H=[];return K={},q("next"),q("throw"),q("return"),K[Symbol.asyncIterator]=function(){return this},K;function q(be){G[be]&&(K[be]=function(He){return new Promise(function(Ke,Ue){H.push([be,He,Ke,Ue])>1||me(be,He)})})}function me(be,He){try{we(G[be](He))}catch(Ke){Ye(H[0][3],Ke)}}function we(be){be.value instanceof y?Promise.resolve(be.value.v).then(ue,Pe):Ye(H[0][2],be)}function ue(be){me("next",be)}function Pe(be){me("throw",be)}function Ye(be,He){be(He),H.shift(),H.length&&me(H[0][0],H[0][1])}}s(E,"__asyncGenerator");function I(T){var O,D;return O={},G("next"),G("throw",function(K){throw K}),G("return"),O[Symbol.iterator]=function(){return this},O;function G(K,H){O[K]=T[K]?function(q){return(D=!D)?{value:y(T[K](q)),done:K==="return"}:H?H(q):q}:H}}s(I,"__asyncDelegator");function A(T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var O=T[Symbol.asyncIterator],D;return O?O.call(T):(T=typeof c=="function"?c(T):T[Symbol.iterator](),D={},G("next"),G("throw"),G("return"),D[Symbol.asyncIterator]=function(){return this},D);function G(H){D[H]=T[H]&&function(q){return new Promise(function(me,we){q=T[H](q),K(me,we,q.done,q.value)})}}function K(H,q,me,we){Promise.resolve(we).then(function(ue){H({value:ue,done:me})},q)}}s(A,"__asyncValues");function L(T,O){return Object.defineProperty?Object.defineProperty(T,"raw",{value:O}):T.raw=O,T}s(L,"__makeTemplateObject");function M(T){if(T&&T.__esModule)return T;var O={};if(T!=null)for(var D in T)Object.hasOwnProperty.call(T,D)&&(O[D]=T[D]);return O.default=T,O}s(M,"__importStar");function k(T){return T&&T.__esModule?T:{default:T}}s(k,"__importDefault");function w(T,O){if(!O.has(T))throw new TypeError("attempted to get private field on non-instance");return O.get(T)}s(w,"__classPrivateFieldGet");function N(T,O,D){if(!O.has(T))throw new TypeError("attempted to set private field on non-instance");return O.set(T,D),D}s(N,"__classPrivateFieldSet")},951024:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertToBuffer=void 0;var u=f(940612),g=typeof Buffer<"u"&&Buffer.from?function(h){return Buffer.from(h,"utf8")}:u.fromUtf8;function m(h){return h instanceof Uint8Array?h:typeof h=="string"?g(h):ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(h)}s(m,"convertToBuffer"),l.convertToBuffer=m},265388:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=l.numToUint8=l.isEmptyData=l.convertToBuffer=void 0;var u=f(951024);Object.defineProperty(l,"convertToBuffer",{enumerable:!0,get:function(){return u.convertToBuffer}});var g=f(470165);Object.defineProperty(l,"isEmptyData",{enumerable:!0,get:function(){return g.isEmptyData}});var m=f(115413);Object.defineProperty(l,"numToUint8",{enumerable:!0,get:function(){return m.numToUint8}});var h=f(82110);Object.defineProperty(l,"uint32ArrayFrom",{enumerable:!0,get:function(){return h.uint32ArrayFrom}})},470165:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function f(u){return typeof u=="string"?u.length===0:u.byteLength===0}s(f,"isEmptyData"),l.isEmptyData=f},115413:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.numToUint8=void 0;function f(u){return new Uint8Array([(u&4278190080)>>24,(u&16711680)>>16,(u&65280)>>8,u&255])}s(f,"numToUint8"),l.numToUint8=f},82110:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=void 0;function f(u){if(!Uint32Array.from){for(var g=new Uint32Array(u.length),m=0;m<u.length;)g[m]=u[m],m+=1;return g}return Uint32Array.from(u)}s(f,"uint32ArrayFrom"),l.uint32ArrayFrom=f},905480:(U,l,f)=>{"use strict";f.r(l),f.d(l,{AutocompleteActions:()=>pe,CollabApi:()=>pt,CollabPopoverDismissSource:()=>Le,CollabUrlType:()=>Nn,CommentFocusTarget:()=>Sn,CommentLevel:()=>sn,DialogContext:()=>Ie,DocBlockStyle:()=>z,DocInlineStyle:()=>Ce,EmbeddedMoveDirection:()=>Gt,EmbeddedObjectType:()=>ft,EmbeddedUIAttributes:()=>yn,EmbeddedUiAction:()=>Zt,EmbeddedUiContext:()=>On,ErrorSource:()=>Xt,Feature:()=>fe,FullTableModification:()=>Vt,GetSlackObjectFailureReason:()=>ae,GrafterUrls:()=>n,InlineFormattingType:()=>de,NavigationTypeMetric:()=>oe,PlaceholderInsertionType:()=>Ze,SectionInsertionType:()=>ct,ShortcutModifier:()=>ge,SlackListContentRenderType:()=>ke,SlackObjectActionType:()=>En,SlackObjectType:()=>R,SlackShortcutCommandType:()=>Se,SlackShortcutMetricSource:()=>X,SlackUnfurlContentRenderType:()=>ze,TablePart:()=>dt,TablePartModificationType:()=>Qn,TableSelectionAction:()=>Rn,TableSelectionModification:()=>Wn,TemplateControlAction:()=>xn,TemplateType:()=>bn,ToastMessageContext:()=>De,UnfurlType:()=>fi});class u{constructor(){this.o=!1,this._=[]}run(){this.o=!0;const re=this._;this._=[];for(let Ee=0;Ee<re.length;Ee++)re[Ee]()}add(re){this.o?re():this._.push(re)}}s(u,"t");var g,m;(function(B){var re;(re=B.Op||(B.Op={}))[re.DID_INITIALIZE=8]="DID_INITIALIZE",re[re.DID_FAIL_TO_INITIALIZE=9]="DID_FAIL_TO_INITIALIZE"})(g||(g={})),function(B){var re;(re=B.Op||(B.Op={}))[re.INIT=0]="INIT"}(m||(m={}));class h{constructor(re){this.l=new Map,this.u=null,this.destinationFn=re}setTransportHook(re){this.u=re}tearDown(){}addHandler(re,Ee){this.l.has(re)&&this.logError(`Already had handler for op ${re} will overwrite.`),this.l.set(re,Ee)}getHandler(re){const Ee=this.l.get(re);return Ee?this.u?(Me,qe)=>{var St;return(St=this.u)===null||St===void 0||St.call(this,re,Me,r.INCOMING),Ee(Me,At=>{var Et;return(Et=this.u)===null||Et===void 0||Et.call(this,re,At,r.OUTGOING_REPLY),qe(At)})}:Ee:null}invoke(re,Ee,Me){var qe;if((qe=this.u)===null||qe===void 0||qe.call(this,re,Ee,r.OUTGOING),this.u&&Me){const Et=Me;Me=s(gt=>{var Dt;(Dt=this.u)===null||Dt===void 0||Dt.call(this,re,gt,r.INCOMING_REPLY),Et(gt)},"i")}const St=this.destinationFn().getHandler(re);if(!St)return void this.logError(`Bridge transport doesn't have handler for op ${re}`);let At;try{At=St(Ee,Et=>{Me?Me(Et):this.logError(`Invoke response received without callback for op ${re}`)})}catch{a(re,Ee)}At instanceof Promise&&At.catch(Et=>a(re,Ee))}logError(re){}}s(h,"s");let a=s((B,re,Ee)=>{let Me="";try{Me=JSON.stringify(re)}catch{Me="(Unserializable message)"}},"n");var r,n,e;function t(B){return B?`${function(){var re;const Ee=(re=new URLSearchParams(location.search).get("quip_js_path"))!==null&&re!==void 0?re:void 0;return Ee&&/^remote-dev\d{4}$/.test(Ee)?`https://app.${Ee.split("-")[1]}.slack.com`:location.origin}()}${n.RDEVS_CONTROLLER_JS_PATH}`:n.CONTROLLER_JS}s(t,"_");function i(B){if(!B)return!1;const re=B.indexOf(location.origin+"/")!=0,Ee=B.includes("/canvas-rdev/collab/");return re&&Ee}s(i,"l"),function(B){B[B.INCOMING=1]="INCOMING",B[B.INCOMING_REPLY=2]="INCOMING_REPLY",B[B.OUTGOING=3]="OUTGOING",B[B.OUTGOING_REPLY=4]="OUTGOING_REPLY"}(r||(r={})),function(B){B.CONTROLLER_CSS="https://quip.codes/-/static/less/stylesheet/-?retina=True&mode=normal&less=collab%2Fcontroller.less",B.CONTROLLER_JS="https://slackdocs.codes:3000/ts/src/collab/controller/bundle.ts",B.EMBEDDED_JS="https://slackdocs.codes/-/static-script-files?grafted=True&resource_bundle_name=collab_embedded",B.RDEVS_EMBEDDED_JS_PATH="/canvas-rdev/collab/grafted/embedded?grafted=True&resource_bundle_name=collab_embedded",B.RDEVS_CONTROLLER_CSS_PATH="/canvas-rdev/collab/grafted/style?retina=True&mode=normal&less=collab%2Fcontroller.less",B.RDEVS_CONTROLLER_JS_PATH="/canvas-rdev/collab/canvas-remote-dev-vite?path=ts/src/collab/controller/bundle.ts"}(n||(n={})),function(B){B.BRIDGE_TRANSPORT_SET="bridge-transport-set",B.BRIDGE_TRANSPORT_READY="bridge-transport-ready",B.HANDLER_REGISTERED="handler-registered",B.HANDLER_REGISTRATION_FINISHED="handler_registration_finished",B.MESSAGE_SENT="message_sent",B.MESSAGE_HANDLED="message-handled",B.INIT_SENT="init_sent",B.INIT_RECEIVED="init_received",B.DID_INIT_SENT="did_init_sent",B.DID_INIT_RECEIVED="did_init_received",B.BRIDGE_OPEN="bridge-open",B.ERROR="error",B.SYSTEMJS_LOADED="systemjs-loaded",B.CONTROLLER_SYSTEMJS_MODULE_IMPORTED="controller-systemjs-imported",B.CONTROLLER_INIT_DATA_FETCHED="controller-init-data-fetched",B.CONTROLLER_RESOURCE_DATA_FETCHED="controller-resource-data-fetched",B.PROBE="probe",B.OTHER="misc"}(e||(e={}));class o{constructor(re){this.T=re,this.S=[],this.A=[],this.O=[],this.I=[],this.N=[],this.L=Date.now(),this.onlyBefore("Handler registered late",e.HANDLER_REGISTERED,[e.HANDLER_REGISTRATION_FINISHED]),this.onlyAfter("Message sent before bridge open",e.MESSAGE_SENT,[e.BRIDGE_OPEN]),this.onlyAfter("Message handled before bridge open",e.MESSAGE_HANDLED,[e.BRIDGE_OPEN])}getTimeoutForPromise(){return o.TIMEOUT_FOR_PROMISE}fireEvent(re,Ee=null){if(this.A.filter(qe=>qe.beforeEvent==re).forEach(qe=>{qe.afterEvents.some(St=>this.S.includes(St))&&qe.message&&this.C(`${this.T}: ${qe.message}`)}),this.O.filter(qe=>qe.afterEvent==re).forEach(qe=>{qe.beforeEvents.some(St=>!this.S.includes(St))&&qe.message&&this.C(`${this.T}: ${qe.message}`)}),re!=e.HANDLER_REGISTERED&&this.C(Ee?Promise.resolve(Ee).then(qe=>`${re}: ${qe}`):re),this.S.includes(re))return;this.S.push(re);const Me=[];this.I=this.I.filter(qe=>!qe.events.every(St=>this.S.includes(St))||(Me.push(qe),!1)),Me.forEach(qe=>{qe.description&&this.C(`${re} -> ${qe.description}`),qe.callback()})}after(re,Ee,Me=null){re.every(qe=>this.S.includes(qe))?Ee():(Me&&this.C(`${Me} deferred`),this.I.push({events:re,description:Me,callback:Ee}))}onlyBefore(re,Ee,Me){this.A.push({beforeEvent:Ee,afterEvents:Me,message:re})}onlyAfter(re,Ee,Me){this.O.push({beforeEvents:Me,afterEvent:Ee,message:re})}C(re){if(this.N.length>o.MAX_INIT_LOG)return;const Ee=Date.now()-this.L,Me=Promise.resolve(re);this.N.push({timestamp:Ee,message:Me}),Me.then(qe=>{console.debug(`${this.T}: ${qe}`)})}getInitLog(re){const Ee=(re?this.N.slice(0,re):this.N).map(async Me=>({t:Me.timestamp,e:await Me.message}));return Promise.all(Ee).then(Me=>({id:this.T,log:Me}))}}s(o,"c"),o.MAX_INIT_LOG=50,o.TIMEOUT_FOR_PROMISE=3e4;function c(B,{logCallback:re=s(()=>{},"e"),timeoutMillis:Ee=3e4,name:Me="Unnamed",context:qe=""}={}){return new Promise((St,At)=>{let Et=window.setTimeout(()=>{Et=null,re(`${Me} promise timed out: ${qe}`),At(new Error(`${Me} promise timed out`))},Ee);const gt=s(()=>{Et&&(clearTimeout(Et),Et=null)},"_");B.then(Dt=>{Et?(gt(),St(Dt)):re(`${Me} promise resolved after timeout: ${qe}`)}).catch(Dt=>{Et?(gt(),At(Dt)):re(`${Me} promise rejected after timeout: ${qe}`)})})}s(c,"a");function p(B,re,Ee,Me,qe){const{span:St,closeSpanFn:At}=Me.createBasicTraceSpan(qe,Ee,{[Ne.URL]:B}),{closeSpanFn:Et}=Me.createBasicTraceSpan(St,Oe.HTTP_FETCH_HEADER),gt=new AbortController,Dt=setTimeout(()=>{gt.abort()},Me.bridgeInit.getTimeoutForPromise());return fetch(B,Object.assign({signal:gt.signal},re)).catch(jt=>{throw Et(jt),Error(`${Ee} fetch failed: ${jt}`)}).then(jt=>{if(clearTimeout(Dt),!jt.ok)return Et(new Error(`returned ${jt.status}`)),d(Me,Ee,jt,St).then(_n=>{throw Error(_n)});Et();const{closeSpanFn:Cn}=Me.createBasicTraceSpan(St,Oe.HTTP_FETCH_CONTENT,{[Ne.URL]:B});return jt.text().catch(_n=>{throw Cn(_n),_n}).then(_n=>{Cn();const{closeSpanFn:Bn}=Me.createBasicTraceSpan(St,Oe.JSON_PARSE);try{const Gn=JSON.parse(_n);return Bn(),Gn}catch(Gn){throw Bn(new Error(`${Gn}`)),Me.bridgeInit.fireEvent(e.ERROR,d(Me,Ee,jt,null)),Gn}})}).finally(()=>{At()})}s(p,"h");function S(B,re,Ee,Me,qe=!1){const St=new AbortController,At=setTimeout(()=>{St.abort()},Ee.bridgeInit.getTimeoutForPromise());Ee.bridgeInit.fireEvent(e.OTHER,`${re} prefetch start`);const{span:Et,closeSpanFn:gt}=Ee.createBasicTraceSpan(Me,Oe.MODULE_PREFETCH,{[Ne.URL]:B}),{closeSpanFn:Dt}=Ee.createBasicTraceSpan(Et,Oe.HTTP_FETCH_HEADER),jt={method:"GET",mode:"cors",cache:"default",signal:St.signal};return qe&&(jt.credentials="include"),fetch(B,jt).catch(Cn=>{throw Dt(Cn),Error(`${re} fetch failed: ${Cn}`)}).then(Cn=>{if(!Cn.ok)return Dt(new Error(`Returned ${Cn.status}`)),d(Ee,re,Cn,Et).then(Bn=>{throw Error(Bn)});Dt();const{closeSpanFn:_n}=Ee.createBasicTraceSpan(Et,Oe.HTTP_FETCH_CONTENT);return Cn.text().then(()=>{_n(),Ee.bridgeInit.fireEvent(e.OTHER,`${re} prefetch ok`)}).catch(Bn=>{throw _n(Bn),Bn})}).finally(()=>{gt(),clearTimeout(At)})}s(S,"d");function d(B,re,Ee,Me){const{closeSpanFn:qe}=B.createBasicTraceSpan(Me,Oe.HTTP_FETCH_CONTENT);return Ee.text().then(St=>{const At=function(gt){if(!gt||gt.trim().length==0)return"response body empty";try{const Dt=new DOMParser().parseFromString(gt,"text/html").documentElement.textContent;if(Dt&&Dt.trim().length>0)return Dt.trim().replace(/\s+/g," ").slice(0,50)}catch{}return gt.trim().slice(0,50)}(St),Et=`${re} fetch returned ${Ee.status}: ${At}`;return qe(new Error(Et)),Et}).catch(St=>{const At=`${re} fetch returned ${Ee.status}: response body unavailable (${St})`;return qe(new Error(At)),At})}s(d,"u");function y(B,re,Ee){let Me=null;const{id:qe,promise:St}=function(gt){const Dt=Symbol(),jt=new Promise(Cn=>{G.push({id:Dt,callback:_n=>{gt(),Cn(_n)}})});return K||(K=!0,window._collabInit=Cn=>{var _n;(_n=G.shift())===null||_n===void 0||_n.callback(Cn)}),{promise:jt,id:Dt}}(()=>{var gt,Dt;(Dt=(gt=B==null?void 0:B.platformDelegate)===null||gt===void 0?void 0:gt.endTraceOrSpan)===null||Dt===void 0||Dt.call(gt,Me)}),At=St.then(gt=>(B.bridgeInit.fireEvent(e.OTHER,"_collabInit called"),gt));return function(gt,Dt,jt){return Dt.then(Cn=>{if(Cn.module_loader_url==null)throw Error("No module loader URL.  Server likely isn't in SystemJS mode.");const{span:_n,closeSpanFn:Bn}=gt.createBasicTraceSpan(jt,Oe.LOAD_CONTROLLER),Gn=gt.config.useGraftedMode?t(gt.config.isRemoteGraftingMode):Cn.controller_entry_module_url;return function(hi,Ei,Ci,pi){Ci&&(D=Ci);const mi=hi.bridgeInit;if(k){const Li=M;return mi.fireEvent(e.OTHER,`Collab ${Li} is loading systemjs, reusing the promise`),k.then(()=>{mi.fireEvent(e.OTHER,`Systemjs promise reused from collab ${Li} succeeded`)}).catch(gi=>{throw mi.fireEvent(e.ERROR,`Systemjs promise reused from collab ${Li} failed: ${gi}`),gi})}let Di,xi=null;if(w())mi.fireEvent(e.OTHER,"systemjs already loaded, running prepareImport"),xi="System.prepareImport() promise resolved",Di=c(System.prepareImport(!0),{name:"System.prepareImport",timeoutMillis:mi.getTimeoutForPromise()});else{mi.fireEvent(e.OTHER,"No SystemJS found, loading it");const{span:Li,closeSpanFn:gi}=hi.createBasicTraceSpan(pi,Oe.LOAD_SYSTEMJS,{[Ne.JS_PREFETCH_ENABLED]:"true",[Ne.URL]:Ei});xi="systemjs script tag onload fired",Di=function(Si,Ti,Hi){return S(Ti,"systemjs-module-loader",Si,Hi,i(Ti)).then(()=>{const kn=document.createElement("script");return new Promise((Xn,ti)=>{const{closeSpanFn:Bi}=Si.createBasicTraceSpan(Hi,Oe.SCRIPT_TAG);kn.src=Ti,kn.defer=!0,kn.crossOrigin="anonymous",kn.onload=()=>{Bi(),Xn()},kn.onerror=Ai=>{const vi=Error(`systemjs onerror called: ${Ai}`);Bi(vi),ti(vi)},document.body.appendChild(kn)}).then(()=>{if(!w())throw Error("SystemJS not found after it was loaded")}).catch(Xn=>{throw typeof System=="object"&&(delete window.System,Si.bridgeInit.fireEvent(e.OTHER,"Cleaned up systemjs global object")),kn.onload=null,kn.onerror=null,kn.parentNode&&(kn.parentNode.removeChild(kn),Si.bridgeInit.fireEvent(e.OTHER,"Cleaned up systemjs loader script tag")),Xn})})}(hi,Ei,Li).finally(()=>{gi()})}return M=hi.id,k=Di.then(()=>{mi.fireEvent(e.SYSTEMJS_LOADED,xi)}).finally(()=>{k=null,M=null}),k}(gt,Cn.module_loader_url,Cn.import_map,_n).then(()=>{var hi,Ei;return A(Gn,(Ei=(hi=Cn.import_map)===null||hi===void 0?void 0:hi.imports)!==null&&Ei!==void 0?Ei:{},gt,_n)}).finally(()=>{Bn()})})}(B,re,Ee).then(()=>{var gt,Dt,jt;return Me=(jt=(Dt=(gt=B==null?void 0:B.platformDelegate)===null||gt===void 0?void 0:gt.startSpan)===null||Dt===void 0?void 0:Dt.call(gt,Ee,Oe.AWAIT_CALLBACK))!==null&&jt!==void 0?jt:null,c(At,{name:"_collabInit callback",timeoutMillis:B.bridgeInit.getTimeoutForPromise()}).catch(Cn=>{var _n,Bn;throw(Bn=(_n=B==null?void 0:B.platformDelegate)===null||_n===void 0?void 0:_n.endTraceOrSpan)===null||Bn===void 0||Bn.call(_n,Me,{[Ne.ERROR]:`${Cn}`}),Cn})}).catch(gt=>{var Dt;throw Dt=qe,G=G.filter(jt=>jt.id!==Dt),gt})}s(y,"T");let E=null,I=null;function A(B,re,Ee,Me){var qe;const St=Ee.bridgeInit;if(I){const Dt=E;return St.fireEvent(e.OTHER,`Collab ${Dt} is loading the controller, waiting for it to finish...`),I.then(()=>(St.fireEvent(e.OTHER,`Collab ${Dt} module loading complete`),A(B,re,Ee,Me))).catch(jt=>(St.fireEvent(e.OTHER,`Collab ${Dt} module loading failed`),A(B,re,Ee,Me)))}if(St.fireEvent(e.OTHER,"Loading controller module"),System.fork===void 0)return Promise.reject(Error("SystemJS is missing the fork() method"));if(Ee.config.useSystemJsSharedFork&&!O){const Dt=((qe=Object.entries(re).find(([jt])=>jt.endsWith("-ancillary.js")))===null||qe===void 0?void 0:qe[1])||null;O=Dt?System.sharedFork([Dt]):null}const At=System.fork(re,O);St.fireEvent(e.OTHER,`controller module${System.isAlreadyLoaded(B)?" ":" not "}in systemjs cache`);const{span:Et,closeSpanFn:gt}=Ee.createBasicTraceSpan(Me,Oe.LOAD_CONTROLLER_MODULE,{[Ne.JS_PREFETCH_ENABLED]:"true",[Ne.URL]:B});return I=S(B,"controller-module",Ee,Et,i(B)).then(()=>{const{closeSpanFn:Dt}=Ee.createBasicTraceSpan(Et,Oe.SYSTEMJS_IMPORT_MODULE,{[Ne.URL]:B}),jt=[],Cn=new MutationObserver(_n=>{jt.push(...L(_n))});return Cn.observe(document.head,{childList:!0}),At.import(B).then(()=>{Dt(),St.fireEvent(e.CONTROLLER_SYSTEMJS_MODULE_IMPORTED)}).catch(_n=>{Dt(_n),jt.push(...L(Cn.takeRecords()));let Bn=0;throw jt.forEach(Gn=>{Gn.onload=null,Gn.onerror=null,Gn.parentNode&&(Gn.parentNode.removeChild(Gn),Bn++)}),Bn>0&&St.fireEvent(e.OTHER,`Cleaned up ${Bn} SystemJS script tags`),System.resetInstantiationCache()&&St.fireEvent(e.OTHER,"SystemJS cache cleared"),_n}).finally(()=>{Cn.disconnect()})}).finally(()=>{gt(),E=null,I=null}),E=Ee.id,I}s(A,"O");function L(B){const re=[];return B.forEach(Ee=>{Ee.addedNodes.forEach(Me=>{Me instanceof HTMLScriptElement&&Me.getAttribute("systemjs")==="1"&&re.push(Me)})}),re}s(L,"I");let M=null,k=null;function w(){return typeof System=="object"&&typeof System.register=="function"}s(w,"C");function N(){if(!D)return console.warn("No import map data found"),[];const B=D.imports;return!B||typeof B!="object"?(console.warn("Imports property missing from importMapsData"),[]):Object.values(B).filter(re=>typeof re=="string"||re instanceof String)}s(N,"R");const T={};let O,D,G=[],K=!1,H=null;class q extends h{constructor(re,Ee){super(Ee),this.R=re,this.m=re.bridgeInit,this.D()}tearDown(){super.tearDown()}p(re){var Ee,Me;console.error("EmbeddedSameOriginBridgeTransport did not load",re),re&&console.error(re.stack),this.m.fireEvent(e.ERROR,`Failure constructing EmbeddedSameOriginBridgeTransport: ${re}`),(Me=(Ee=this.R.config.delegate)===null||Ee===void 0?void 0:Ee.didFailToInitialize)===null||Me===void 0||Me.call(Ee,"exception",re)}D(){var re,Ee,Me;const qe=(Me=(Ee=(re=this.R.platformDelegate)===null||re===void 0?void 0:re.startTrace)===null||Ee===void 0?void 0:Ee.call(re,Oe.COLLAB_INIT,{[Ne.CONTROLLER_ID]:`${this.R.id}`}))!==null&&Me!==void 0?Me:null,St=function(Et,gt){const Dt=new FormData,{authToken:jt,userJwt:Cn,getSlackToken:_n,isGov:Bn}=Et.config;jt&&Dt.append("oauth_token",jt),Cn&&Dt.append("user_jwt",Cn),_n&&Dt.append("token",_n());const Gn=Et.config.xhrWithCredentials===!0?"include":void 0,hi=p(`${_e(Et)}/collab/controller-init?format=map`,{method:"POST",body:Dt,credentials:Gn},Oe.CONTROLLER_INIT,Et,gt).then(pi=>(Et.bridgeInit.fireEvent(e.CONTROLLER_INIT_DATA_FETCHED),pi)),Ei=window.QUIP_VERSION_NAME||"server",Ci=new URLSearchParams([["version-name",Ei]]);return Et.config.language&&Ci.append("language-code",Et.config.language),Ci.append("cdn_fallback",`${Et.getAttemptNumber()}`),Bn&&Ci.append("serve_gov","1"),H=p(`${_e(Et)}/collab/controller-resources?${Ci.toString()}`,{method:"GET",credentials:Gn},Oe.CONTROLLER_RESORCES,Et,gt).then(pi=>(Et.bridgeInit.fireEvent(e.CONTROLLER_RESOURCE_DATA_FETCHED),pi)).catch(pi=>(H=null,Et.bridgeInit.fireEvent(e.ERROR,`controller-resources request failed: ${pi}`),{module_loader_url:null,controller_entry_module_url:null,import_map:null})),Promise.all([hi,H]).then(pi=>{const[mi,Di]=pi;return Object.assign(Object.assign({},mi),Di)})}(this.R,qe),At=y(this.R,St,qe);Promise.all([At,St]).then(Et=>{var gt;const Dt=Et[0],jt=Et[1];Dt.main(jt.init_options,jt.preserialized,this.R.config.getSlackToken?null:jt.oauth_token,this.R.config.getSlackToken?null:jt.oauth_token_expiry,(gt=this.R.config.getSlackToken)!==null&&gt!==void 0?gt:null,_e(this.R),this.destinationFn(),jt.js_initializer,jt.user_id,this.R.config.xhrWithCredentials,this.R.config.enableWebCaching?jt.web_cache_key:void 0,this.R.config.enableWebCaching?jt.web_cache_key_version:void 0,this.R.config.requestsAreCors,jt.body_classes,jt.css_url,!!this.R.config.useGraftedMode,this.R.config.pathRewriteHook,!!this.R.config.isRemoteGraftingMode),this.m.fireEvent(e.BRIDGE_TRANSPORT_READY)}).catch(Et=>this.p(Et)).finally(()=>{var Et,gt;(gt=(Et=this.R.platformDelegate)===null||Et===void 0?void 0:Et.endTraceOrSpan)===null||gt===void 0||gt.call(Et,qe)})}logError(re){this.m.fireEvent(e.ERROR,re)}}s(q,"P");class me{constructor(re){this.embeddedSide=new q(re,()=>this.controllerSide),this.controllerSide=new h(()=>this.embeddedSide)}}s(me,"U");function we(B,re){let Ee=null;for(const Me of function(qe){const St=[];for(const At of Object.keys(qe))isNaN(Number(At))&&St.push(At);return St}(B))B[Me]===re&&(Ee=Me);return Ee||(Ee=String(re)),Ee+=` (${re})`,Ee}s(we,"w");const ue={[r.INCOMING]:"ToEmbedded",[r.OUTGOING]:"FromEmbedded",[r.INCOMING_REPLY]:"ReplyToEmbedded",[r.OUTGOING_REPLY]:"ReplyFromEmbedded"},Pe=[g.Op.DID_INITIALIZE,g.Op.DID_FAIL_TO_INITIALIZE],Ye=[];class be{constructor(re,Ee){this.M=re,this.v=Ee,this.N=[],this.P=[],this.U={[ue[r.INCOMING]]:{},[ue[r.OUTGOING_REPLY]]:{},[ue[r.OUTGOING]]:{},[ue[r.INCOMING_REPLY]]:{}}}getHook(){const re=this.N,Ee=this.P,Me=this.U;return(qe,St,At)=>{var Et,gt;const Dt={ts:Date.now(),op:qe,message:St,type:At},jt=Ke(At,qe);if((Et=(gt=Me[ue[At]])[jt])!==null&&Et!==void 0||(gt[jt]=0),Me[ue[At]][jt]+=1,re.length>=30)for(Ee.push(Dt);Ee.length>20;)Ee.shift();else re.push(Dt)}}getReport(re=!0){var Ee;return{collabInstanceId:this.M,collabInstanceTeamId:(Ee=this.v)!==null&&Ee!==void 0?Ee:"not_provided",reportTimestamp:Date.now(),messageCounts:this.U,startupLog:He(this.N,re),recentLog:He(this.P,re)}}}s(be,"G");function He(B,re=!0){return B.map(Ee=>{const Me={op:Ke(Ee.type,Ee.op),type:ue[Ee.type]};var qe,St;return re&&(qe=Ee.type,St=Ee.op,!([r.INCOMING,r.OUTGOING_REPLY].includes(qe)?Pe.includes(St):Ye.includes(St)))||(Me.message=Ee.message),re||(Me.ts=Ee.ts),Me})}s(He,"B");function Ke(B,re){return[r.INCOMING,r.OUTGOING_REPLY].includes(B)?we(g.Op,re):we(m.Op,re)}s(Ke,"H");class Ue{constructor(re){this.m=re.bridgeInit,this.F=function(Ee){return new me(Ee).embeddedSide}(re),this.G=new be(re.id,re.config.teamId),this.m.fireEvent(e.BRIDGE_TRANSPORT_SET),this.F.setTransportHook(this.G.getHook())}init(re){this.m.after([e.BRIDGE_TRANSPORT_SET,e.BRIDGE_TRANSPORT_READY,e.HANDLER_REGISTRATION_FINISHED],()=>{this.invoke(m.Op.INIT,re),this.m.fireEvent(e.INIT_SENT)})}tearDown(){this.F.tearDown()}invoke(re,Ee){const Me=re==m.Op.INIT,qe=s(()=>{this.F.invoke(re,Ee),Me||this.m.fireEvent(e.MESSAGE_SENT,`Op ${re}`)},"n");Me?qe():this.m.after([e.BRIDGE_OPEN],qe,`Send op ${re}`)}addHandler(re,Ee){this.F.addHandler(re,re===g.Op.DID_INITIALIZE?Ee:Me=>{this.m.after([e.BRIDGE_OPEN],()=>{Ee(Me),this.m.fireEvent(e.MESSAGE_HANDLED,`Op ${re}`)},`Handle op ${re}`)})}getDebugReport(re=!0){return this.G.getReport(re)}}s(Ue,"y");class ht{constructor(re,Ee){this.B=new WeakMap,this.H=re,this.V=Ee}get(){const re=this.H.get();return this.K(re)}getAsync(){return this.H.getAsync().then(re=>this.K(re))}listen(re){let Ee=this.B.get(re);Ee||(Ee=s((Me,qe)=>{re(this.K(Me),this.V(qe))},"e"),this.B.set(re,Ee)),this.H.listen(Ee)}once(re){let Ee=this.B.get(re);Ee||(Ee=s((Me,qe)=>{re(this.K(Me),this.V(qe))},"e"),this.B.set(re,Ee)),this.H.once(Ee)}unlisten(re){const Ee=this.B.get(re);Ee&&this.H.unlisten(Ee)}K(re){if(re!==void 0)return this.V(re)}}s(ht,"V");class Tt{constructor(re,Ee){this.H=re,this.$=Ee}get(){return this.H.get()}getAsync(){const re=this.H.getAsync();return new Promise((Ee,Me)=>{re.then(qe=>{qe?Ee(qe):this.H.once((St,At)=>{Ee(At??this.$)})}).catch(Me)})}listen(re){this.H.listen(re)}unlisten(re){this.H.unlisten(re)}once(re){this.H.once(re)}}s(Tt,"K");var st;(function(B){B[B.DOC_DISPLAY_TITLE=0]="DOC_DISPLAY_TITLE",B[B.DOC_UPDATED_USEC=1]="DOC_UPDATED_USEC",B[B.DOC_EMBED_SCROLL_POSITION=2]="DOC_EMBED_SCROLL_POSITION",B[B.DOC_BLOCK_KIT_THUMBNAIL=3]="DOC_BLOCK_KIT_THUMBNAIL",B[B.SECTION_SNIPPET=4]="SECTION_SNIPPET",B[B.CANNED_DOC_NAME=5]="CANNED_DOC_NAME",B[B.DOC_IS_EMPTY=6]="DOC_IS_EMPTY",B[B.DOC_LAST_UPDATED_USER_ID=8]="DOC_LAST_UPDATED_USER_ID",B[B.A11Y_READ_ONLY_MODE=9]="A11Y_READ_ONLY_MODE",B[B.DOC_EMBED_FOCUS_STATE=10]="DOC_EMBED_FOCUS_STATE",B[B.DOC_EMBED_SELECTION_STATE=11]="DOC_EMBED_SELECTION_STATE",B[B.TEXT_SECTION_OVERLAY_SHOWING=12]="TEXT_SECTION_OVERLAY_SHOWING",B[B.DOC_HAS_FILE_UNFURLS=13]="DOC_HAS_FILE_UNFURLS",B[B.TEMPLATE_CONTROLS_BE=14]="TEMPLATE_CONTROLS_BE",B[B.DOC_NEW_SECTION_USEC=15]="DOC_NEW_SECTION_USEC",B[B.TEMPLATE_CONTROLS_FE=16]="TEMPLATE_CONTROLS_FE",B[B.DOC_HAS_HEADER_IMAGE=17]="DOC_HAS_HEADER_IMAGE",B[B.PLACEHOLDERS_INFO=18]="PLACEHOLDERS_INFO"})(st||(st={}));const ut=new WeakMap;class We{constructor(re={}){this.W=new Set,this.Y=re}add(re,Ee){if(!this.W.has(re)&&(this.W.add(re),Ee&&ut.set(re,Ee),this.W.size===1)){const{didStartHavingListeners:Me}=this.Y;Me&&Me()}}addOneShot(re,Ee){const Me=s((...qe)=>{this.remove(Me),re.apply(window,qe)},"i");this.add(Me,Ee)}remove(re){if(this.W.delete(re)&&this.W.size===0){const{didStopHavingListeners:Ee}=this.Y;Ee&&Ee()}}removeAll(){this.W.forEach(re=>this.remove(re))}empty(){return this.W.size===0}notify(...re){if(this.W.size===0)return;const{notifyDecorator:Ee,catchError:Me}=this.Y;let qe;Ee&&(qe=Ee());const St=Array.from(this.W);for(let At=0;At<St.length;At++)if(Me)try{St[At].apply(window,re)}catch(Et){Me(Et)}else St[At].apply(window,re);qe&&qe.clear()}debugGetDescriptions(){return Array.from(this.W,(re,Ee)=>ut.get(re)||`<anonymous-${Ee}>`)}}s(We,"j");class _t{constructor(re,Ee,Me,qe=!1){this.X=re,this.J=Ee,this.Z=Me,this.q=qe;const St=s((At,Et)=>{this.W.notify(At,Et)},"n");this.W=new We({didStartHavingListeners:()=>this.Z.addListener(re,Ee,St),didStopHavingListeners:()=>{this.Z.removeListener(re,Ee,St),this.q||this.Z.cleanupStorage(re,Ee)}})}get(){return this.Z.getValue(this.X,this.J)}getAsync(){return this.Z.getValueAsync(this.X,this.J)}listen(re){this.W.add(re)}unlisten(re){this.W.remove(re)}unlistenAll(){this.W.removeAll()}once(re){this.W.addOneShot(re)}}s(_t,"W");class Rt{constructor(re){this.W=new We,this.tt=re}set(re){const Ee=this.tt;this.tt=re,this.W.notify(Ee,re)}get(){return this.tt}getAsync(){return Promise.resolve(this.get())}listen(re){this.W.add(re)}unlisten(re){this.W.remove(re)}once(re){this.W.addOneShot(re)}}s(Rt,"Y");class Ae{constructor(re){this.et=new Map,this.R=re}didCreateDoc(re,Ee){const Me=this.et.get(re);Me?(this.et.set(Ee,Me),Me.idInternal.set(Ee)):console.warn(`Could not find doc mapped to ID ${re}`)}didDeleteDoc(re){const Ee=this.et.get(re);Ee==null||Ee.deletedInternal.set(!0)}didTryToLoadWithTempId(re){const Ee=this.et.get(re);Ee==null||Ee.didTryToLoadWithTempIdInternal.set(!0)}create(re={}){const{title:Ee,cannedDoc:Me,context:qe,usesOnlyInlineTextComments:St,content:At}=re;return this.controllerAccess.docs.createDoc(Ee,Me,qe,St,At).then(Et=>this.get(Et))}get(re){let Ee=this.et.get(re);return Ee||(Ee=new $t(re,this.R),this.et.set(re,Ee)),Ee}get controllerAccess(){return this.R.controllerAccess}setEditsDisabled(re,Ee){for(const Me of Ft.values())Me.doc().id.get()===re&&Me.docEditor.setEditsDisabled(Ee);this.controllerAccess.docs.reloadThread(re)}getBlockKitThumbnail(re,Ee=!0,Me){const qe=xt(this.R),St=Me?`${re}/${Me}`:re;return new Tt(new _t(st.DOC_BLOCK_KIT_THUMBNAIL,St,qe,!0),'{"blocks": []}').getAsync().then(JSON.parse).then(At=>(Ee&&At.blocks.length>0&&At.blocks.shift(),At))}getCannedDocName(re){const Ee=xt(this.R);return new Tt(new _t(st.CANNED_DOC_NAME,re,Ee,!0),"").getAsync().then(Me=>Me.length===0?null:Me)}getSectionSnippet(re){const Ee=xt(this.R);return new Tt(new _t(st.SECTION_SNIPPET,re,Ee,!0),"").getAsync()}setDebugOption(re,Ee){this.controllerAccess.docs.setDebugOption(re,Ee)}findSlackObject(re,Ee,Me){return this.controllerAccess.docs.findSlackObject(re,Ee,Me)}insertSlackObject(re,Ee,Me,qe,St){return this.controllerAccess.docs.insertSlackObject(re,Ee,Me,qe,St)}editLink(re,Ee,Me){this.controllerAccess.docs.editLink(re,Ee,Me)}loadData(re,Ee){return this.controllerAccess.docs.loadData([re],Ee)}it(){return Qe(this.R)}}s(Ae,"X");class $t{constructor(re,Ee){this.st=null,this.id=this.idInternal=new Rt(re),this.R=Ee;const Me=xt(this.R);this.title=new _t(st.DOC_DISPLAY_TITLE,re,Me),this.lastUpdated=new ht(new _t(st.DOC_UPDATED_USEC,re,Me,!0),qe=>new Date(qe/1e3)),this.lastUpdatedUsec=new _t(st.DOC_UPDATED_USEC,re,Me,!0),this.lastUpdatedSlackUserId=new _t(st.DOC_LAST_UPDATED_USER_ID,re,Me,!0),this.deleted=this.deletedInternal=new Rt(!1),this.isEmpty=new _t(st.DOC_IS_EMPTY,re,Me,!0),this.hasPerformedEditingAction=new Rt(!1),this.hasFileUnfurls=new _t(st.DOC_HAS_FILE_UNFURLS,re,Me,!0),this.templateControlsInfo=new _t(st.TEMPLATE_CONTROLS_BE,re,Me,!0),this.lastNewSectionUpdated=new ht(new _t(st.DOC_NEW_SECTION_USEC,re,Me,!0),qe=>new Date(qe/1e3)),this.hasHeaderImage=new _t(st.DOC_HAS_HEADER_IMAGE,re,Me,!0),this.didTryToLoadWithTempIdInternal=new Rt(!1),this.placeholdersInfo=new _t(st.PLACEHOLDERS_INFO,re,Me,!0)}getBlockKitThumbnailValue(){if(!this.st&&this.isCreated()){const re=xt(this.R);this.st=new ht(new _t(st.DOC_BLOCK_KIT_THUMBNAIL,this.idInternal.get(),re,!0),JSON.parse)}return this.st}embed(re,Ee={mode:"editor"}){let Me=rt.get(re);return Me||(Me=new on(this,re,Ee,this.R),rt.set(re,Me),Me.mount()),Me.doc()!==this&&console.error("There was a different document embedded in the container",re),Me}isCreated(){return!this.idInternal.get().startsWith("temp:")}failedToCreate(){return!this.isCreated()&&this.deletedInternal.get()}triedToLoadTempId(){return this.didTryToLoadWithTempIdInternal.get()}}s($t,"J");const rt=new WeakMap,Ft=new Map,en={mode:"editor"};class on{constructor(re,Ee,Me,qe){this.rendered=new Rt(!1),this.incrementalRendered=new Rt(!1),this.failedToLoad=new Rt(!1),this.loadInfo=new Rt(void 0),this.editingActionPerformed=new Rt(!1),this.loadError=new Rt(void 0),this.editorContainer=new Rt(void 0),this.nt=!1,this.ot=!1,this.rt=[],this.Et=re,this._t=Ee,this.Y=Object.assign(Object.assign({},en),Me),this.R=qe,this.lt=`${Yt}-${this.R.id}-${zn++}`,this.ct=function(){const St=document.createElement("div");return St.classList.add("collab-root"),St}(),this.at(st.DOC_EMBED_SCROLL_POSITION),this.scrollPosition=this.at(st.DOC_EMBED_SCROLL_POSITION),this.focusState=this.at(st.DOC_EMBED_FOCUS_STATE),this.selectionState=this.at(st.DOC_EMBED_SELECTION_STATE),this.a11yReadOnlyMode=this.at(st.A11Y_READ_ONLY_MODE),this.textSectionOverlayShowing=this.at(st.TEXT_SECTION_OVERLAY_SHOWING),this.templateControls=this.ht(st.TEMPLATE_CONTROLS_FE,new Map),this.hasHeaderImage=this.at(st.DOC_HAS_HEADER_IMAGE),this.placeholdersInfo=this.at(st.PLACEHOLDERS_INFO),this.title=this.Et.title,this.controllerAccess.run(()=>{this.dt=this.controllerAccess.docs.getDocEditor(this.lt)})}get docEditor(){if(!this.dt)throw new Error("DocEditor object not set");return this.dt}get controllerAccess(){return this.R.controllerAccess}at(re){const Ee=xt(this.R),Me=new _t(re,this.lt,Ee,!1);return this.rt.push(Me),Me}ht(re,Ee){return new Tt(this.at(re),Ee)}onEditorLoadError(re){console.info("[QUIP] Editor load error",re),this.failedToLoad.set(!0),this.loadError.set(re),this.ut()}didLoadModel(re){this.loadInfo.set(re)}didRender(re){this.rendered.set(!0),this.failedToLoad.set(!1),this.loadError.set(void 0),this.editorContainer.set(re)}didFinishIncrementalRender(){this.incrementalRendered.set(!0)}didPerformEditingAction(){this.editingActionPerformed.set(!0)}doc(){return this.Et}docId(){return this.Et.id.get()}containerElement(){return this._t}frameName(){return this.lt}mount(){if(Ft.set(this.lt,this),!this.ot){const re=this.ct;re.style.visibility="hidden",this._t.appendChild(re);let Ee=re.ownerDocument.defaultView;Ee||(console.warn(`Mounting ${this.lt} into element with no window`),Ee=window),this.nt=!0,this.controllerAccess.run(()=>{this.docEditor.createdViewFrame(re)}),re.style.visibility="visible",this.ot&&this.Tt(),this.ot=!0}this.nt&&this.Tt()}unmount(){try{console.info(`[Quip] unmount doc with frame name ${this.lt}. Frame loaded ${this.nt}`),this.nt&&(this.ut(),this.rendered.set(!1),this.incrementalRendered.set(!1),this.failedToLoad.set(!1),this.loadError.set(void 0),this.nt=!1),this.ot&&(rt.delete(this._t),this.ct.remove(),this.ot=!1),this.rt.forEach(re=>re.unlistenAll()),Ft.delete(this.lt)}catch(re){console.warn("[Quip] Error thrown in unmount",re)}}it(){return Qe(this.R)}Tt(){this.controllerAccess.run(()=>{this.docEditor.renderDoc(this.Et.id.get(),this.Y)})}ut(){this.controllerAccess.run(()=>{this.docEditor.cleanupViewFrame()})}setCommentsUiProvider(re){this.commentsUiProvider=re,re==null||re.setDelegate(this.docEditor)}setAutocompleteUiProvider(re){this.autocompleteUiProvider=re,re==null||re.setDelegate(this.docEditor)}setPermalinkUiProvider(re){this.permalinkUiProvider=re}setEmbeddedUiProvider(re){this.embeddedUiProvider=re}setErrorUiProvider(re){this.errorUiProvider=re}setEditorUiConnector(re){this.editorUiConnector=re,re==null||re.setDelegate(this.docEditor)}}s(on,"Q");class Dn{constructor(re){this.St=re}getFrameByName(re){return this.St.get(re)}withFrame(re,Ee){const Me=this.getFrameByName(re);Me||console.warn(`Could not find a frame with name ${re}.`),Ee(Me)}}s(Dn,"z");const Yt=`collab-doc-${(1e3*Math.random()).toString(36)}`;let zn=0;class vn{constructor(){this.At=[],this.Ot=!1}get docs(){return this.It}get settings(){return this.Nt}get providers(){return this.Lt}run(re){this.Ot?re():this.At.push(re)}setObjects({docs:re,settings:Ee,providers:Me}){this.Ot=!0,this.It=re,this.Nt=Ee,this.Lt=Me;for(const qe of this.At)qe();this.At=[]}}s(vn,"it");let mt=0;class pt{constructor(re){this.id=mt++,this.o=!1,this.Ct=!1,this.config=re,this.platformDelegate=re.delegate,this.bridgeInit=pt.Rt(`embedded ${this.id}`);const Ee=new Ue(this);Ht.set(this,Ee),this.controllerAccess=new vn,this.docs=new Ae(this),this.failedToInitialize=new Rt(!1),this.initializationError=new Rt(void 0),this.Dt()}Dt(){if(this.o)return void this.bridgeInit.fireEvent(e.ERROR,"Collab instance initialized more than once");const{appearance:re,language:Ee,delegate:Me,commentsDataProvider:qe,bookmarksDataProvider:St,fileDataProvider:At,slackListDataProvider:Et,slackObjectProvider:gt,features:Dt,documentEventProvider:jt,underlineAllLinks:Cn,enableAnimations:_n,displayEmojiAsPlainText:Bn,spellcheckEnabled:Gn,embeddedConfigProvider:hi,embeddedUiProvider:Ei,topLevelTeamId:Ci,anchorLinkProvider:pi,slackObjectUIProvider:mi,slackTextyHtmlConversionProvider:Di,useSmartQuotesAndDashes:xi,atomStorageProvider:Li}=this.config,gi=this.it();gi.init({features:Dt,delegate:Me,anchorLinkProvider:pi,bookmarksDataProvider:St,commentsDataProvider:qe,documentEventProvider:jt,fileDataProvider:At,slackListDataProvider:Et,slackObjectProvider:gt,slackObjectUIProvider:mi,slackTextyHtmlConversionProvider:Di,mountedFrameProvider:new Dn(Ft),embeddedAccessDelegate:this.controllerAccess,docs:this.docs}),this.controllerAccess.run(()=>{this.atomClient=this.controllerAccess.providers.getAtomClient(Li)});const Si=new u;var Ti,Hi;Si.add(()=>{re&&this.ft(re),Ee&&this.Mt(Ee),Cn!==void 0&&this.setUnderlineAllLinks(Cn),_n!==void 0&&this.setEnableAnimations(_n),Bn!==void 0&&this.setDisplayEmojiAsPlainText(Bn),Gn!==void 0&&this.setSpellcheckEnabled(Gn),Ci&&this.vt(Ci),xi!==void 0&&this.setUseSmartQuotesAndDashes(xi)}),function(kn,Xn,ti){if(!ti)return;const Bi=ti.supportedAutocompleteTypes;Bi&&Xn.add(()=>{kn.providers.registerAutocompleteTypes(Bi)}),kn.run(()=>ti.setDelegate(kn.providers.getSlackObjectProviderDelegate()))}(this.controllerAccess,Si,gt),function(kn,Xn={},ti,Bi,Ai=vi=>{}){kn.addHandler(g.Op.DID_INITIALIZE,()=>{var vi;(vi=Xn.didInitialize)===null||vi===void 0||vi.call(Xn),ti.run(),Bi.fireEvent(e.DID_INIT_RECEIVED)}),kn.addHandler(g.Op.DID_FAIL_TO_INITIALIZE,({initError:vi})=>{var Ni;Ai(vi),(Ni=Xn.didFailToInitialize)===null||Ni===void 0||Ni.call(Xn,vi)})}(gi,Me,Si,this.bridgeInit,kn=>{this.Pt(!0,kn)}),Ti=this.controllerAccess,Hi=qe,Ti.run(()=>{Hi==null||Hi.setDelegate(Ti.providers.getCommentsDataProviderDelegate())}),function(kn,Xn){kn.run(()=>{Xn==null||Xn.setDelegate(kn.providers.getBookmarksDataProviderDelegate())})}(this.controllerAccess,St),function(kn,Xn){kn.run(()=>Xn==null?void 0:Xn.setDelegate(kn.providers.getDocumentEventProviderDelegate()))}(this.controllerAccess,jt),function(kn,Xn,ti){ti&&Xn.add(()=>{kn.providers.registerEmbeddedUiProvider(ti.config())})}(this.controllerAccess,Si,hi||Ei),this.o=!0,this.bridgeInit.fireEvent(e.HANDLER_REGISTRATION_FINISHED)}Pt(re,Ee){const Me=this.failedToInitialize,qe=this.initializationError;Me.set(re),qe.set(Ee)}static Rt(re){const Ee=new o(re);return Ee.after([e.BRIDGE_TRANSPORT_SET,e.BRIDGE_TRANSPORT_READY,e.INIT_SENT,e.DID_INIT_RECEIVED,e.HANDLER_REGISTRATION_FINISHED],()=>{Ee.fireEvent(e.BRIDGE_OPEN)}),Ee}controllerModuleUrls(){return N()}preload(){return!this.Ct&&(N().forEach(re=>{if(!T[re]){const Ee=document.createElement("link");Ee.rel="preload",Ee.as="script",Ee.href=re,Ee.crossOrigin="anonymous",T[re]=Ee,document.head.appendChild(Ee)}}),this.Ct=!0,!0)}tearDown(){this.it().tearDown(),Ht.delete(this),this.Pt(!1),this.o=!1}createBasicTraceSpan(re,Ee,Me){var qe,St,At;const Et=(At=(St=(qe=this.platformDelegate)===null||qe===void 0?void 0:qe.startSpan)===null||St===void 0?void 0:St.call(qe,re,Ee,Me))!==null&&At!==void 0?At:null;return Et?{span:Et,closeSpanFn:gt=>{var Dt,jt;(jt=(Dt=this.platformDelegate)===null||Dt===void 0?void 0:Dt.endTraceOrSpan)===null||jt===void 0||jt.call(Dt,Et,gt?{[Ne.ERROR]:`${gt}`}:{})}}:{span:null,closeSpanFn:()=>{}}}getAttemptNumber(){var re;return(re=this.config.attemptNumber)!==null&&re!==void 0?re:0}preloadThreads(re,Ee){this.controllerAccess.run(()=>this.controllerAccess.docs.preloadData(re,Ee))}setAppearance(re){this.config.appearance=re,this.ft(re)}setLanguage(re){this.config.language=re}setAppKeyboardFocusModeEnabled(re,Ee){this.Ut(re,Ee)}ft(re){this.controllerAccess.settings.setAppearance(re)}Mt(re){this.controllerAccess.settings.setLanguage(re)}Ut(re,Ee){this.controllerAccess.settings.setAppKeyboardFocusModeEnabled(re,Ee)}vt(re){this.controllerAccess.settings.setDefaultTeamId(re)}setUnderlineAllLinks(re){this.controllerAccess.settings.setUnderlineLinks(re)}setEnableAnimations(re){this.controllerAccess.settings.setEnableAnimations(re)}setDisplayEmojiAsPlainText(re){this.controllerAccess.settings.setDisplayEmojiAsPlainText(re)}setSpellcheckEnabled(re){this.controllerAccess.settings.setSpellcheckEnabled(re)}setUseSmartQuotesAndDashes(re){this.controllerAccess.settings.setUseSmartQuotesAndDashes(re)}async getInitLog(re){return Object.assign(Object.assign({},await this.bridgeInit.getInitLog(re)),{lm:"SYSTEMJS_SCRIPT_CONTROLLER",dr:!0})}async getInitLogStr(re){for(let Ee=o.MAX_INIT_LOG;Ee>=0;Ee--){const Me=JSON.stringify(await this.getInitLog(Ee));if(Me.length<=re)return Me}return"Failed to generate"}getDebugReport(re){return this.getBridgeDebugReport(re)}getBridgeDebugReport(re=!0){return this.it().getDebugReport(re)}it(){return Ht.get(this)}}s(pt,"nt");function Qe(B){return Ht.get(B)}s(Qe,"ot");const Ht=new Map;function xt(B){return B.atomClient}s(xt,"Et");const wn=document.querySelector("script[src*='/collab/embedded.js']"),kt=wn==null?void 0:wn.src,J=kt?new URL(kt).origin:"https://prod.slack.quip.systems";function _e(B){return B.config.origin||J}s(_e,"at");var Oe,Ne;(function(B){B.COLLAB_INIT="collab-init",B.CONTROLLER_INIT="controller-init",B.CONTROLLER_RESORCES="controller-resources",B.HTTP_FETCH_HEADER="http-fetch-header",B.HTTP_FETCH_CONTENT="http-fetch-content",B.JSON_PARSE="json-parse",B.LOAD_CONTROLLER="load-controller",B.AWAIT_CALLBACK="await-callback",B.LOAD_SYSTEMJS="load-systemjs",B.MODULE_PREFETCH="module-prefetch",B.SCRIPT_TAG="script-tag",B.LOAD_CONTROLLER_MODULE="load-controller-module",B.SYSTEMJS_IMPORT_MODULE="systemjs-import-module"})(Oe||(Oe={})),function(B){B.CONTROLLER_ID="controller-id",B.ERROR="error",B.JS_PREFETCH_ENABLED="js-prefetch-enabled",B.URL="url"}(Ne||(Ne={}));const $e=(()=>{if(typeof f.g=="object")return f.g;if(typeof window=="object")return window;if(typeof self=="object")return self;throw new Error("Cannot find global")})();function Fe(B,re,Ee){const Me=B.split(".");let qe=Ee||$e;for(let St=0;St<Me.length;St++){const At=Me[St];St===Me.length-1?qe[At]=re:(At in qe||(qe[At]={}),qe=qe[At])}}s(Fe,"Tt");var oe,Ce,z,Y,de,ce,De,Ie,Le,fe,ge,R,ae,pe,Se,X,ft,ke,ze,Gt,dt,Qn,Wn,Vt,yn,Zt,Rn,Nn,fi,ct,Ze,Xt,Ot,sn,En,On,Sn,bn,xn;(function(B){B[B.IN_APP_USER_INITIATED=0]="IN_APP_USER_INITIATED",B[B.PERMALINK=1]="PERMALINK",B[B.POPOUT=2]="POPOUT"})(oe||(oe={})),function(B){B.BOLD="bold",B.ITALIC="italic",B.UNDERLINE="underline",B.STRIKETHROUGH="strikethrough",B.CODE="code",B.SUBSCRIPT="subscript",B.SUPERSCRIPT="superscript",B.LINK="link"}(Ce||(Ce={})),function(B){B.PLAIN="plain",B.H1="h1",B.H2="h2",B.H3="h3",B.CODE="code",B.BLOCKQUOTE="blockquote",B.LIST_BULLET="list_bullet",B.LIST_NUMBERED="list_numbered",B.LIST_CHECKLIST="list_checklist"}(z||(z={})),function(B){B.CACHE="cache",B.MEMORY="memory",B.NETWORK="network"}(Y||(Y={})),function(B){B.LINK="link",B.COMMENT="comment"}(de||(de={})),function(B){B.NONE="none",B.SCROLL_TO_SECTION="scroll_to_section",B.FOCUS_SECTION="focus_section"}(ce||(ce={})),function(B){B[B.LINK_COPIED=0]="LINK_COPIED",B[B.LINK_FILE_SHARE_BLOCKED=1]="LINK_FILE_SHARE_BLOCKED",B[B.TABLE_SIZE_LIMIT_REACHED=2]="TABLE_SIZE_LIMIT_REACHED"}(De||(De={})),function(B){B[B.UNSUPPORTED_FILE_TYPE=0]="UNSUPPORTED_FILE_TYPE"}(Ie||(Ie={})),function(B){B[B.ANY=1]="ANY",B[B.ON_MOUSE_LEAVE=2]="ON_MOUSE_LEAVE"}(Le||(Le={})),function(B){B[B.COMMENTS=0]="COMMENTS",B[B.FILE_UPLOADS=1]="FILE_UPLOADS",B[B.DOCUMENT_EVENTS=2]="DOCUMENT_EVENTS",B[B.SPREADSHEETS=3]="SPREADSHEETS",B[B.HOVERCARDS=4]="HOVERCARDS",B[B.LINK_UNFURL=5]="LINK_UNFURL",B[B.UNREAD_COMMENTS=6]="UNREAD_COMMENTS",B[B.REMINDERS=7]="REMINDERS",B[B.DOCUMENT_UPDATE=8]="DOCUMENT_UPDATE",B[B.FLEXBOX_COLLAB=9]="FLEXBOX_COLLAB",B[B.SLACK_WORKFLOW_BUTTON_PROTOTYPE=10]="SLACK_WORKFLOW_BUTTON_PROTOTYPE",B[B.DOPE_TABLE=11]="DOPE_TABLE",B[B.UI_PARITY=12]="UI_PARITY",B[B.MOBILE_DOCUMENT_EDITING=13]="MOBILE_DOCUMENT_EDITING",B[B.MOBILE_IMAGE_LOADING=14]="MOBILE_IMAGE_LOADING",B[B.GALLERY_LAYOUT=15]="GALLERY_LAYOUT",B[B.ANCHOR_LINKS=16]="ANCHOR_LINKS",B[B.IMAGE_EMBEDS=17]="IMAGE_EMBEDS",B[B.IMAGE_CAPTION=18]="IMAGE_CAPTION",B[B.EMBEDS_DRAG_HANDLE=19]="EMBEDS_DRAG_HANDLE",B[B.SLACK_AUTOCOMPLETE=20]="SLACK_AUTOCOMPLETE",B[B.DOCUMENT_SLASH_COMMANDS=23]="DOCUMENT_SLASH_COMMANDS",B[B.DRAG_AND_DROP_MAX_DISTANCE=24]="DRAG_AND_DROP_MAX_DISTANCE",B[B.APP_UNFURL_NON_IFRAME_RENDERS=25]="APP_UNFURL_NON_IFRAME_RENDERS",B[B.A11Y_KEYBOARD_NAVIGATION=28]="A11Y_KEYBOARD_NAVIGATION",B[B.INSERT_TOOLBAR=29]="INSERT_TOOLBAR",B[B.MENTIONS_SHARE=30]="MENTIONS_SHARE",B[B.TEXT_IN_GALLERY_LAYOUT=31]="TEXT_IN_GALLERY_LAYOUT",B[B.AUTOSIZE_FLEXBOX=32]="AUTOSIZE_FLEXBOX",B[B.FORMATTING_TOOLBAR=33]="FORMATTING_TOOLBAR",B[B.UI_PARITY_SLACK_LINK_INSPECTOR=34]="UI_PARITY_SLACK_LINK_INSPECTOR",B[B.PREVENT_OBJECTS_IN_LISTS=35]="PREVENT_OBJECTS_IN_LISTS",B[B.DISALLOW_SECTION_COMMENTS=37]="DISALLOW_SECTION_COMMENTS",B[B.SECTION_TOOLBAR_ON_LEFT=38]="SECTION_TOOLBAR_ON_LEFT",B[B.MOBILE_WEBVIEW_UNFURLS=39]="MOBILE_WEBVIEW_UNFURLS",B[B.INLINE_COMMENTS=40]="INLINE_COMMENTS",B[B.UNIVERSAL_DRAG_PREVIEW=41]="UNIVERSAL_DRAG_PREVIEW",B[B.DISABLE_GLOBAL_SHORTCUTS=42]="DISABLE_GLOBAL_SHORTCUTS",B[B.NARROW_COLLAB_INDENTATION=43]="NARROW_COLLAB_INDENTATION",B[B.EXPANDED_FLEXBOX_MARGIN=44]="EXPANDED_FLEXBOX_MARGIN",B[B.ADD_COLUMN_FROM_SECTION_MENU=45]="ADD_COLUMN_FROM_SECTION_MENU",B[B.REQUEST_COMPLETION_HOOK=46]="REQUEST_COMPLETION_HOOK",B[B.A11Y_CARET=47]="A11Y_CARET",B[B.BOOKMARKS=48]="BOOKMARKS",B[B.GRIDLIKE_DRAG_AND_DROP_PLACEMENT=50]="GRIDLIKE_DRAG_AND_DROP_PLACEMENT",B[B.SLACK_MESSAGE_TITLE=51]="SLACK_MESSAGE_TITLE",B[B.LENIENT_STARTUP=52]="LENIENT_STARTUP",B[B.ALLOW_SELECTING_ARCHIVED_COMMENTS=53]="ALLOW_SELECTING_ARCHIVED_COMMENTS",B[B.ANIMATE_LAYOUT_DRAG=54]="ANIMATE_LAYOUT_DRAG",B[B.STATIC_TITLES=55]="STATIC_TITLES",B[B.PROFILE_UNFURLS=56]="PROFILE_UNFURLS",B[B.DISABLE_PERSISTING_CLIENT_USER_DOCUMENT_OVERLAY_UPDATES=57]="DISABLE_PERSISTING_CLIENT_USER_DOCUMENT_OVERLAY_UPDATES",B[B.MOBILE_NATIVE_UNFURLS=58]="MOBILE_NATIVE_UNFURLS",B[B.DEFAULT_UNFURLS_ON_PASTE=59]="DEFAULT_UNFURLS_ON_PASTE",B[B.SAVED_FOR_LATER=60]="SAVED_FOR_LATER",B[B.COMMENTS_REDESIGN=61]="COMMENTS_REDESIGN",B[B.SLACK_USER_CONTEXT_MENU=62]="SLACK_USER_CONTEXT_MENU",B[B.SLACK_OBJECT_CONTROL_CONTEXT_MENUS=63]="SLACK_OBJECT_CONTROL_CONTEXT_MENUS",B[B.JS_MODULE_PREFETCH=64]="JS_MODULE_PREFETCH",B[B.SLACK_SECTION_MENUS=65]="SLACK_SECTION_MENUS",B[B.PADDING_RESIZING=66]="PADDING_RESIZING",B[B.HOVERABLE_SECTION_MENU=68]="HOVERABLE_SECTION_MENU",B[B.SLACK_PRESENCE_UPDATES=69]="SLACK_PRESENCE_UPDATES",B[B.HIDE_INLINE_COMMENT_BUBBLES=70]="HIDE_INLINE_COMMENT_BUBBLES",B[B.HIDE_ADD_COMMENT_BUBBLE=71]="HIDE_ADD_COMMENT_BUBBLE",B[B.HYPERLINK_CONTEXT_MENU=72]="HYPERLINK_CONTEXT_MENU",B[B.UNIVERSAL_DRAG_PREVIEW_EMBEDDED_UI=73]="UNIVERSAL_DRAG_PREVIEW_EMBEDDED_UI",B[B.LOCK_SECTION_FOR_INLINE_ANNOTATION=74]="LOCK_SECTION_FOR_INLINE_ANNOTATION",B[B.EDITABLE_CONTROL=75]="EDITABLE_CONTROL",B[B.OPEN_ANNOTATION_TAB_IN_FOCUSED_SECTION=76]="OPEN_ANNOTATION_TAB_IN_FOCUSED_SECTION",B[B.MOVE_CARET_WHEN_OPENING_ANNOTATION=77]="MOVE_CARET_WHEN_OPENING_ANNOTATION",B[B.DISABLE_TITLE_UNFURL=79]="DISABLE_TITLE_UNFURL",B[B.HIDE_STUB_ANNOTATIONS=80]="HIDE_STUB_ANNOTATIONS",B[B.OBSERVE_CONTENT_OUTSIDE_SECTION_MUTATIONS=81]="OBSERVE_CONTENT_OUTSIDE_SECTION_MUTATIONS",B[B.USE_EXTERNAL_EDITOR_SAVE=82]="USE_EXTERNAL_EDITOR_SAVE",B[B.IMPROVED_WORD_WRAPPING=83]="IMPROVED_WORD_WRAPPING",B[B.HIGHLIGHT_TEXT_WITH_SECTION_LEVEL_COMMENTS=84]="HIGHLIGHT_TEXT_WITH_SECTION_LEVEL_COMMENTS",B[B.USE_NEW_FIND_MODAL=85]="USE_NEW_FIND_MODAL",B[B.DISPLAY_COMMENT_TOOLTIP=86]="DISPLAY_COMMENT_TOOLTIP",B[B.HIDE_SLACK_SECTION_HIGHLIGHT_FOR_OPEN_COMMENT=87]="HIDE_SLACK_SECTION_HIGHLIGHT_FOR_OPEN_COMMENT",B[B.SLACK_FILE_UNFURL_PLACEHOLDER=88]="SLACK_FILE_UNFURL_PLACEHOLDER",B[B.PRIORITIZE_OPENING_ANNOTATIONS_OVER_LINKS=89]="PRIORITIZE_OPENING_ANNOTATIONS_OVER_LINKS",B[B.CLEANUP_SENTINEL=90]="CLEANUP_SENTINEL",B[B.OPEN_COMMENTS_HIGHLIGHT_TEMPORARY=91]="OPEN_COMMENTS_HIGHLIGHT_TEMPORARY",B[B.UNFURL_PRIVATE_MESSAGES=92]="UNFURL_PRIVATE_MESSAGES",B[B.MOBILE_DISABLE_PRESENCE_MENU_POPOVER=93]="MOBILE_DISABLE_PRESENCE_MENU_POPOVER",B[B.CANVAS_GA_FAST_FOLLOW=95]="CANVAS_GA_FAST_FOLLOW",B[B.BRIDGE_REFACTORING=96]="BRIDGE_REFACTORING",B[B.SIMPLE_TABLES=97]="SIMPLE_TABLES",B[B.ALLOW_LARGE_SIZE_FILE_IMAGE_UPLOADS=98]="ALLOW_LARGE_SIZE_FILE_IMAGE_UPLOADS",B[B.ALLOW_SLACK_OBJECT_TITLE_UNFURL=99]="ALLOW_SLACK_OBJECT_TITLE_UNFURL",B[B.ALLOW_SLACK_WEB_OR_APP_LINKS_TITLE_UNFURL=100]="ALLOW_SLACK_WEB_OR_APP_LINKS_TITLE_UNFURL",B[B.CANVAS_GA_FAST_FOLLOW_2=101]="CANVAS_GA_FAST_FOLLOW_2",B[B.USE_LEFT_GUTTER_DISPLAY=102]="USE_LEFT_GUTTER_DISPLAY",B[B.USE_PRIVATE_MESSAGE_SPEEDBUMP_IN_CARD=103]="USE_PRIVATE_MESSAGE_SPEEDBUMP_IN_CARD",B[B.TITLE_BLOCK_KIT_FORMAT=104]="TITLE_BLOCK_KIT_FORMAT",B[B.USE_LIST_ITEM_MARKER_CONTAINER=105]="USE_LIST_ITEM_MARKER_CONTAINER",B[B.ALLOW_SLACK_TEMPLATE_PLACEHOLDER=106]="ALLOW_SLACK_TEMPLATE_PLACEHOLDER",B[B.USE_INLINE_TOOLBAR_PERF_IMPROVEMENTS=107]="USE_INLINE_TOOLBAR_PERF_IMPROVEMENTS",B[B.IMAGE_RESIZING=108]="IMAGE_RESIZING",B[B.PRIVATE_MESSAGE_SPEEDBUMP_MODAL=109]="PRIVATE_MESSAGE_SPEEDBUMP_MODAL",B[B.ALLOW_HEADER_IMAGE=110]="ALLOW_HEADER_IMAGE",B[B.PRIVATE_MESSAGE_SPEEDBUMP_FOR_TITLE_UNFURLS=111]="PRIVATE_MESSAGE_SPEEDBUMP_FOR_TITLE_UNFURLS",B[B.USE_NEW_SECTION_HIGHLIGHT=112]="USE_NEW_SECTION_HIGHLIGHT",B[B.MODEL_INTEGRITY_PROBE=113]="MODEL_INTEGRITY_PROBE",B[B.MODEL_INTEGRITY_CHANGES_CHECK=114]="MODEL_INTEGRITY_CHANGES_CHECK",B[B.MODEL_FSCK_PROBE=115]="MODEL_FSCK_PROBE",B[B.MODEL_UPDATES_PROBE=116]="MODEL_UPDATES_PROBE",B[B.SIMPLE_TABLES_FULL_BLEED=117]="SIMPLE_TABLES_FULL_BLEED",B[B.IMAGE_MIN_DIMENSIONS=118]="IMAGE_MIN_DIMENSIONS",B[B.SIMPLE_TABLES_MOBILE_DISPLAY_SCALE=119]="SIMPLE_TABLES_MOBILE_DISPLAY_SCALE",B[B.SLACK_TEXTY_CLIPBOARD=120]="SLACK_TEXTY_CLIPBOARD",B[B.ONLY_OPEN_ANNOTATION_WHEN_CARET_IS_INSIDE=121]="ONLY_OPEN_ANNOTATION_WHEN_CARET_IS_INSIDE",B[B.SINGLE_HOVERABLE_SECTION_MENU=122]="SINGLE_HOVERABLE_SECTION_MENU",B[B.SIMPLE_TABLES_FIT_TO_PAGE=123]="SIMPLE_TABLES_FIT_TO_PAGE",B[B.TRANSIENT_SECTION_HIGHLIGHTING=124]="TRANSIENT_SECTION_HIGHLIGHTING",B[B.OPTIMIZE_CONTROLS_RENDERING=125]="OPTIMIZE_CONTROLS_RENDERING",B[B.SIMPLE_TABLES_MOBILE_EDITING=126]="SIMPLE_TABLES_MOBILE_EDITING",B[B.OPTIMIZE_EMBEDS_RENDERING=127]="OPTIMIZE_EMBEDS_RENDERING",B[B.CONTENT_REACTION_BAR=128]="CONTENT_REACTION_BAR",B[B.GUTTER_REDESIGN=129]="GUTTER_REDESIGN",B[B.USE_NATIVE_LINK_INSPECTOR=131]="USE_NATIVE_LINK_INSPECTOR",B[B.SECTION_UPDATE_PILL_ENABLED=132]="SECTION_UPDATE_PILL_ENABLED",B[B.SIMPLE_TABLES_CELL_MERGING=133]="SIMPLE_TABLES_CELL_MERGING",B[B.HIGHLIGHT_IN_STANDALONE_CANVASES=134]="HIGHLIGHT_IN_STANDALONE_CANVASES",B[B.BLUE_GREY_MENTIONS=135]="BLUE_GREY_MENTIONS",B[B.SLASH_SHORTCUT_COMMANDS_NUX=136]="SLASH_SHORTCUT_COMMANDS_NUX",B[B.OPTIMIZE_SECTION_STATUS=137]="OPTIMIZE_SECTION_STATUS",B[B.UNFURL_EMBED=138]="UNFURL_EMBED",B[B.SLACK_REACT_17=139]="SLACK_REACT_17",B[B.ENABLE_REACT_18=140]="ENABLE_REACT_18",B[B.PAUSE_PRIVATE_MESSAGE_UNFURL_SNAPSHOTS=141]="PAUSE_PRIVATE_MESSAGE_UNFURL_SNAPSHOTS",B[B.DRAGGABLE_CONTROL=142]="DRAGGABLE_CONTROL",B[B.NEW_COLUMN_PLACEHOLDERS=143]="NEW_COLUMN_PLACEHOLDERS",B[B.CANVAS_LISTS_GA=144]="CANVAS_LISTS_GA",B[B.DOCUMENT_AUTOCOMPLETE=145]="DOCUMENT_AUTOCOMPLETE",B[B.CANVAS_DYNAMIC_LISTS=146]="CANVAS_DYNAMIC_LISTS",B[B.CANVAS_LISTS_CARDS=147]="CANVAS_LISTS_CARDS",B[B.MULTI_SECTION_DRAG=148]="MULTI_SECTION_DRAG",B[B.SMOOTHER_MARGIN_SELECTION=149]="SMOOTHER_MARGIN_SELECTION",B[B.WFB_BACK_TO_BASIC_APRIL_RELEASE=150]="WFB_BACK_TO_BASIC_APRIL_RELEASE",B[B.CANVAS_HEADER_IMAGE=151]="CANVAS_HEADER_IMAGE",B[B.AUTOSLUG_SLACK_CHANNELS=152]="AUTOSLUG_SLACK_CHANNELS",B[B.CANVAS_TITLE_UNFURL_DEFAULT=153]="CANVAS_TITLE_UNFURL_DEFAULT",B[B.CURSOR_AWARENESS=154]="CURSOR_AWARENESS",B[B.CANVAS_LISTS_EMBEDS=155]="CANVAS_LISTS_EMBEDS",B[B.CANVAS_DATE_MENTIONS=156]="CANVAS_DATE_MENTIONS",B[B.CANVAS_MOBILE_GENERIC_PLACEHOLDERS=157]="CANVAS_MOBILE_GENERIC_PLACEHOLDERS",B[B.SELECTION_AWARENESS=158]="SELECTION_AWARENESS",B[B.CANVAS_GROUP_MENTIONS=159]="CANVAS_GROUP_MENTIONS",B[B.CANVAS_SALES_TEMPLATES=160]="CANVAS_SALES_TEMPLATES",B[B.CALLOUTS=161]="CALLOUTS",B[B.CANVAS_LINK_HOVERCARD=162]="CANVAS_LINK_HOVERCARD"}(fe||(fe={})),function(B){B[B.NONE=0]="NONE",B[B.SHIFT=1]="SHIFT",B[B.ALT=2]="ALT",B[B.META=4]="META",B[B.CTRL=8]="CTRL",B[B.MOD=16]="MOD"}(ge||(ge={})),function(B){B[B.CHANNEL=0]="CHANNEL",B[B.USER=1]="USER",B[B.EMOJI=2]="EMOJI",B[B.FILE=4]="FILE",B[B.UNFURL=5]="UNFURL",B[B.DOCUMENT=6]="DOCUMENT",B[B.LINK=7]="LINK",B[B.DOCUMENT_USER_ACCESS=9]="DOCUMENT_USER_ACCESS",B[B.PENDING_URL=10]="PENDING_URL",B[B.GENERIC=11]="GENERIC",B[B.TEMPLATE=12]="TEMPLATE",B[B.BACKGROUND=13]="BACKGROUND",B[B.WIDGET=14]="WIDGET",B[B.LIST=15]="LIST",B[B.LIST_RECORD=16]="LIST_RECORD",B[B.HEADER_IMAGE=17]="HEADER_IMAGE",B[B.SALESFORCE_RECORD=18]="SALESFORCE_RECORD",B[B.GROUP_MEMBERSHIP=19]="GROUP_MEMBERSHIP"}(R||(R={})),function(B){B[B.NOT_FOUND=0]="NOT_FOUND"}(ae||(ae={})),function(B){B[B.CLOSE=0]="CLOSE",B[B.SELECT=1]="SELECT",B[B.MOVE_SELECTION_DOWN=2]="MOVE_SELECTION_DOWN",B[B.MOVE_SELECTION_UP=3]="MOVE_SELECTION_UP"}(pe||(pe={})),function(B){B.CANVAS="insert-canvas",B.AUDIO="insert-audio",B.VIDEO="insert-video",B.FILE="insert-file",B.WORKFLOW="insert-workflow",B.PROFILE="insert-profile",B.LIST="insert-list",B.CODE="inline-code",B.CHANNEL="ac-trigger-channel",B.CODEBLOCK="insert-codeblock",B.BLOCKQUOTE="insert-blockquote",B.PLAIN="insert-plain",B.H1="insert-h1",B.H2="insert-h2",B.H3="insert-h3",B.IMAGE="insert-image",B.TABLE="insert-table",B.CHECKLIST="insert-checklist",B.BULLET_LIST="insert-bullet-list",B.ORDERED_LIST="insert-ordered-list",B.DIVIDER="insert-divider",B.TWO_COLUMNS="layout-two-columns",B.THREE_COLUMNS="layout-three-columns",B.DATE_GENERIC="date-generic",B.DATE_TODAY="date-today",B.DATE_TOMORROW="date-tomorrow",B.DATE_YESTERDAY="date-yesterday"}(Se||(Se={})),function(B){B.DEFAULT_SOURCE="canvas-shortcut-command"}(X||(X={})),function(B){B[B.SLACK_OBJECT=0]="SLACK_OBJECT",B[B.LINK=1]="LINK",B[B.HEADER=2]="HEADER",B[B.TEXT=3]="TEXT",B[B.DIVIDER=4]="DIVIDER",B[B.HYPERLINK=5]="HYPERLINK",B[B.TITLE=6]="TITLE",B[B.TABLE=7]="TABLE",B[B.DRAG_OVERLAY=8]="DRAG_OVERLAY",B[B.COMMENT_METADATA=9]="COMMENT_METADATA",B[B.INVITED_USER=10]="INVITED_USER",B[B.DATE=11]="DATE"}(ft||(ft={})),function(B){B.STATIC="list-static",B.EMBED="list-embed"}(ke||(ke={})),function(B){B.STATIC="unfurl-static",B.EMBED="unfurl-embed",B.BUTTON="unfurl-button"}(ze||(ze={})),function(B){B[B.PREVIOUS=0]="PREVIOUS",B[B.NEXT=1]="NEXT"}(Gt||(Gt={})),function(B){B.ROW="row",B.COLUMN="column"}(dt||(dt={})),function(B){B.INSERT_BEFORE="insert_before",B.INSERT_AFTER="insert_after",B.DELETE="delete"}(Qn||(Qn={})),function(B){B.CLEAR_CONTENTS="clear_contents",B.MERGE_CELLS="merge_cells",B.UNMERGE_CELLS="unmerge_cells"}(Wn||(Wn={})),function(B){B.TOGGLE_HAS_HEADER_ROW="toggle_has_header_row",B.TOGGLE_HAS_HEADER_COLUMN="toggle_has_header_column",B.DISTRIBUTE_COLUMNS="distribute_columns",B.TOGGLE_FIT_TO_PAGE="toggle_fit_to_page"}(Vt||(Vt={})),function(B){B.NO_FOCUS_ON_CLICK="data-no-focus-section-on-click",B.NO_DRAG_ON_MOUSE_MOVE="data-no-drag-on-mouse-move",B.EMBEDDED_FILE_CARD_CLASSNAME="card-view__file_card",B.EMBEDDED_IMAGE_CARD_CLASSNAME="card-view__image_card"}(yn||(yn={})),function(B){B[B.DISMISS_POPOVER=0]="DISMISS_POPOVER",B[B.REMOVE_ASSOCIATED_CONTENT=1]="REMOVE_ASSOCIATED_CONTENT",B[B.COPY_OBJECT=2]="COPY_OBJECT",B[B.CREATE_OR_VIEW_COMMENT=3]="CREATE_OR_VIEW_COMMENT",B[B.REPLACE_FILE=4]="REPLACE_FILE",B[B.SWITCH_UNFURL_TYPE=5]="SWITCH_UNFURL_TYPE",B[B.PREVENT_POPOVER_DISMISS=6]="PREVENT_POPOVER_DISMISS",B[B.SYNC_METADATA=7]="SYNC_METADATA",B[B.COPY_SECTION_LINK=8]="COPY_SECTION_LINK",B[B.SET_BLOCK_STYLE=9]="SET_BLOCK_STYLE",B[B.ADD_COLUMN=10]="ADD_COLUMN",B[B.MOVE_LINE=11]="MOVE_LINE",B[B.TOGGLE_COLLAPSE=12]="TOGGLE_COLLAPSE",B[B.CHECK_ALL=13]="CHECK_ALL",B[B.UNCHECK_ALL=14]="UNCHECK_ALL",B[B.REMOVE_CHECKED=15]="REMOVE_CHECKED",B[B.MOVE_CHECKED_TO_BOTTOM=16]="MOVE_CHECKED_TO_BOTTOM",B[B.SORT_ALPHA=17]="SORT_ALPHA",B[B.TAKE_OVER_EDITING=18]="TAKE_OVER_EDITING",B[B.ADD_TEXT_BELOW=19]="ADD_TEXT_BELOW",B[B.UPDATE_INLINE_ENTITY_DISPLAY_INFO=20]="UPDATE_INLINE_ENTITY_DISPLAY_INFO",B[B.ON_LINK_INSPECTOR_INPUT_CHANGE=21]="ON_LINK_INSPECTOR_INPUT_CHANGE",B[B.FOCUS_ASSOCIATED_SECTION=22]="FOCUS_ASSOCIATED_SECTION",B[B.UNFURL_URL=23]="UNFURL_URL",B[B.MODIFY_TABLE=24]="MODIFY_TABLE",B[B.RESUME_SNAPSHOTS=25]="RESUME_SNAPSHOTS",B[B.OPEN_POPOVER=26]="OPEN_POPOVER",B[B.CANCEL_HEADER_IMAGE=27]="CANCEL_HEADER_IMAGE",B[B.PREVIEW_HEADER_IMAGE=28]="PREVIEW_HEADER_IMAGE",B[B.SAVE_HEADER_IMAGE=29]="SAVE_HEADER_IMAGE",B[B.MESSAGE_UNFURL_CONFIRMATION=30]="MESSAGE_UNFURL_CONFIRMATION",B[B.UNFURL_URLS=31]="UNFURL_URLS",B[B.ADD_INVITED_USER_CARDS=32]="ADD_INVITED_USER_CARDS",B[B.SYNC_CONTENT_WIDTH=33]="SYNC_CONTENT_WIDTH",B[B.SET_DATE_MS=34]="SET_DATE_MS",B[B.SWITCH_LIST_VIEW=35]="SWITCH_LIST_VIEW"}(Zt||(Zt={})),function(B){B.MERGE="merge",B.UNMERGE="unmerge",B.CLEAR_CONTENTS="clear_contents"}(Rn||(Rn={})),function(B){B[B.SLACK_MESSAGE=0]="SLACK_MESSAGE",B[B.SLACK_FILE=1]="SLACK_FILE",B[B.SLACK_IMAGE_FILE=8]="SLACK_IMAGE_FILE",B[B.SLACK_DOCUMENT=2]="SLACK_DOCUMENT",B[B.SLACK_DOCUMENT_SECTION=3]="SLACK_DOCUMENT_SECTION",B[B.SLACK_PUBLIC_LINK=4]="SLACK_PUBLIC_LINK",B[B.SLACK_USER=5]="SLACK_USER",B[B.SLACK_CHANNEL=6]="SLACK_CHANNEL",B[B.SLACK_WORKFLOW=7]="SLACK_WORKFLOW",B[B.SLACK_WIDGET=9]="SLACK_WIDGET",B[B.SLACK_EMBED=10]="SLACK_EMBED",B[B.SLACK_LIST=11]="SLACK_LIST",B[B.SLACK_LIST_RECORD=12]="SLACK_LIST_RECORD",B[B.SLACK_SALESFORCE_RECORD=13]="SLACK_SALESFORCE_RECORD"}(Nn||(Nn={})),function(B){B[B.CARD=0]="CARD",B[B.INLINE=1]="INLINE",B[B.LINK=2]="LINK",B[B.WIDGET=3]="WIDGET"}(fi||(fi={})),function(B){B.IMAGE="image",B.HORIZONTAL_RULE="horizontal-rule",B.CHECKLIST="checklist",B.NUMBERED_LIST="numbered-list",B.BULLETED_LIST="bullet-list",B.TABLE="table",B.CODE="code",B.TEXT_H1_STYLE="large-heading",B.TEXT_H2_STYLE="medium-heading",B.TEXT_H3_STYLE="small-heading",B.TEXT_PLAIN_STYLE="plain",B.BLOCKQUOTE="blockquote",B.LAYOUT="layout",B.EMOJI="emoji",B.DATE_MENTION="date-mention"}(ct||(ct={})),function(B){B.PROFILE="profile",B.WORKFLOW="workflow",B.LINK="link",B.IMAGE="image",B.CANVAS="canvas",B.VIDEO="video",B.AUDIO="audio",B.FILE="file",B.LIST="list",B.SALESFORCE_RECORD="sfrecord"}(Ze||(Ze={})),function(B){B[B.DOCUMENT_SAVING=1]="DOCUMENT_SAVING",B[B.IO=2]="IO",B[B.LISTENER=3]="LISTENER",B[B.ELEMENT=4]="ELEMENT"}(Xt||(Xt={})),function(B){B[B.NONE=0]="NONE",B[B.DOCUMENT_FAILED_TO_LOAD=1]="DOCUMENT_FAILED_TO_LOAD",B[B.DOCUMENT_SAVE_FAILED=2]="DOCUMENT_SAVE_FAILED",B[B.DOCUMENT_SAVE_FAILED_CONNECTION_OFFLINE=3]="DOCUMENT_SAVE_FAILED_CONNECTION_OFFLINE",B[B.DOCUMENT_SAVE_FAILED_SERVER_NOT_REACHABLE=4]="DOCUMENT_SAVE_FAILED_SERVER_NOT_REACHABLE",B[B.DOCUMENT_TOO_LARGE_TO_SAVE=5]="DOCUMENT_TOO_LARGE_TO_SAVE",B[B.SESSION_EXPIRED=6]="SESSION_EXPIRED",B[B.THREAD_CLOSED=7]="THREAD_CLOSED",B[B.DOCUMENT_SAVE_FAILED_TO_COMPLETE=8]="DOCUMENT_SAVE_FAILED_TO_COMPLETE",B[B.DOCUMENT_SAVE_FAILED_DUE_TO_PREVIOUS_FAILURES=9]="DOCUMENT_SAVE_FAILED_DUE_TO_PREVIOUS_FAILURES"}(Ot||(Ot={})),function(B){B[B.WRITE=0]="WRITE",B[B.READ=1]="READ",B[B.NONE=2]="NONE"}(sn||(sn={})),function(B){B.DOWNLOAD="download",B.EDIT_FILE="edit-file",B.OPEN_IN_NEW_WINDOW="open-in-new-window",B.PREVIEW_FILE="preview-file",B.VIEW_FULL_SCREEN="view-full-screen",B.SHARE="share"}(En||(En={})),function(B){B[B.HOVERCARD=0]="HOVERCARD",B[B.CARD=1]="CARD",B[B.HEADER=2]="HEADER",B[B.CONTROL_CONTEXT_MENU=3]="CONTROL_CONTEXT_MENU",B[B.SECTION_MENU=4]="SECTION_MENU",B[B.HYPERLINK_CONTEXT_MENU=5]="HYPERLINK_CONTEXT_MENU",B[B.HYPERLINK_INSPECTOR_TOOLBAR=6]="HYPERLINK_INSPECTOR_TOOLBAR",B[B.CONTROL_OBJECT_OBSERVER=7]="CONTROL_OBJECT_OBSERVER",B[B.TABLE_SELECTION_MENU=8]="TABLE_SELECTION_MENU",B[B.FILE_UPLOAD_BLOCKED_OVERLAY=9]="FILE_UPLOAD_BLOCKED_OVERLAY",B[B.EPHEMERAL_MESSAGE_MODAL_TRIGGER=10]="EPHEMERAL_MESSAGE_MODAL_TRIGGER",B[B.VARIABLE_EDIT_POPOVER=11]="VARIABLE_EDIT_POPOVER",B[B.CONTENT_REACTION_BAR=12]="CONTENT_REACTION_BAR",B[B.GUTTER_REACTION_ICON=13]="GUTTER_REACTION_ICON",B[B.HEADER_IMAGE_PICKER=14]="HEADER_IMAGE_PICKER",B[B.DATE_PICKER=15]="DATE_PICKER"}(On||(On={})),function(B){B.NONE="none",B.THREAD_ROOT="thread_root",B.THREAD_COMPOSER="thread_composer"}(Sn||(Sn={})),function(B){B.TEXT="text",B.USER="user",B.CHANNEL="channel",B.DATE="date"}(bn||(bn={})),function(B){B.INSERT="insert",B.EDIT="edit",B.REMOVE="remove",B.SHOW_CREATION_POPOVER="show_creation_popover",B.HIGHLIGHT="highlight"}(xn||(xn={})),Fe("Collab",pt),Fe("dumpCollabDebugReport",function(){Ht.forEach((B,re)=>{re.getInitLog().then(Ee=>{console.log(`Collab instance ${re.id} debug report:`,re.getBridgeDebugReport(!1),Ee)})})}),window.JS_CLIENT_HASH="BwbwFlhuiH17n8j0WylYYA",window.QUIP_VERSION_NAME="quipbuild_2024_06_25T17_33_859332c"},35113:(U,l,f)=>{var u,g,m;U.exports=function(W){var a={},r={exports:a},n=W.AbortController,e=W.AbortSignal,t=W.addEventListener,i=W.alert,o=W.AnalyserNode,c=W.Animation,p=W.AnimationEffectReadOnly,S=W.AnimationEffectTiming,d=W.AnimationEffectTimingReadOnly,y=W.AnimationEvent,E=W.AnimationPlaybackEvent,I=W.AnimationTimeline,A=W.applicationCache,L=W.ApplicationCache,M=W.ApplicationCacheErrorEvent,k=W.atob,w=W.Attr,N=W.Audio,T=W.AudioBuffer,O=W.AudioBufferSourceNode,D=W.AudioContext,G=W.AudioDestinationNode,K=W.AudioListener,H=W.AudioNode,q=W.AudioParam,me=W.AudioProcessingEvent,we=W.AudioScheduledSourceNode,ue=W.AudioWorkletGlobalScope,Pe=W.AudioWorkletNode,Ye=W.AudioWorkletProcessor,be=W.BarProp,He=W.BaseAudioContext,Ke=W.BatteryManager,Ue=W.BeforeUnloadEvent,ht=W.BiquadFilterNode,Tt=W.Blob,st=W.BlobEvent,ut=W.blur,We=W.BroadcastChannel,_t=W.btoa,Rt=W.BudgetService,Ae=W.ByteLengthQueuingStrategy,$t=W.Cache,rt=W.CacheStorage,Ft=W.cancelAnimationFrame,en=W.cancelIdleCallback,on=W.CanvasCaptureMediaStreamTrack,Dn=W.CanvasGradient,Yt=W.CanvasPattern,zn=W.CanvasRenderingContext2D,vn=W.ChannelMergerNode,mt=W.ChannelSplitterNode,pt=W.CharacterData,Qe=W.clearInterval,Ht=W.clearTimeout,xt=W.clientInformation,wn=W.ClipboardEvent,kt=W.close,J=W.closed,_e=W.CloseEvent,Oe=W.Comment,Ne=W.CompositionEvent,$e=W.confirm,Fe=W.console,oe=W.ConstantSourceNode,Ce=W.ConvolverNode,z=W.CountQueuingStrategy,Y=W.createImageBitmap,de=W.Credential,ce=W.CredentialsContainer,De=W.crypto,Ie=W.Crypto,Le=W.CryptoKey,fe=W.CSS,ge=W.CSSConditionRule,R=W.CSSFontFaceRule,ae=W.CSSGroupingRule,pe=W.CSSImportRule,Se=W.CSSKeyframeRule,X=W.CSSKeyframesRule,ft=W.CSSMatrixComponent,ke=W.CSSMediaRule,ze=W.CSSNamespaceRule,Gt=W.CSSPageRule,dt=W.CSSPerspective,Qn=W.CSSRotate,Wn=W.CSSRule,Vt=W.CSSRuleList,yn=W.CSSScale,Zt=W.CSSSkew,Rn=W.CSSSkewX,Nn=W.CSSSkewY,fi=W.CSSStyleDeclaration,ct=W.CSSStyleRule,Ze=W.CSSStyleSheet,Xt=W.CSSSupportsRule,Ot=W.CSSTransformValue,sn=W.CSSTranslate,En=W.CustomElementRegistry,On=W.customElements,Sn=W.CustomEvent,bn=W.DataTransfer,xn=W.DataTransferItem,B=W.DataTransferItemList,re=W.defaultstatus,Ee=W.defaultStatus,Me=W.DelayNode,qe=W.DeviceMotionEvent,St=W.DeviceOrientationEvent,At=W.devicePixelRatio,Et=W.dispatchEvent,gt=W.document,Dt=W.Document,jt=W.DocumentFragment,Cn=W.DocumentType,_n=W.DOMError,Bn=W.DOMException,Gn=W.DOMImplementation,hi=W.DOMMatrix,Ei=W.DOMMatrixReadOnly,Ci=W.DOMParser,pi=W.DOMPoint,mi=W.DOMPointReadOnly,Di=W.DOMQuad,xi=W.DOMRect,Li=W.DOMRectList,gi=W.DOMRectReadOnly,Si=W.DOMStringList,Ti=W.DOMStringMap,Hi=W.DOMTokenList,kn=W.DragEvent,Xn=W.DynamicsCompressorNode,ti=W.Element,Bi=W.ErrorEvent,Ai=W.event,vi=W.Event,Ni=W.EventSource,Ro=W.EventTarget,ko=W.external,jr=W.fetch,Do=W.File,Lo=W.FileList,$r=W.FileReader,Kr=W.find,Sa=W.focus,Jr=W.FocusEvent,Yr=W.FontFace,va=W.FontFaceSetLoadEvent,No=W.FormData,xo=W.frameElement,_r=W.frames,Bo=W.GainNode,ya=W.Gamepad,Fo=W.GamepadButton,Vo=W.GamepadEvent,Uo=W.getComputedStyle,ba=W.getSelection,Tr=W.HashChangeEvent,Ea=W.Headers,Ho=W.history,zo=W.History,Wo=W.HTMLAllCollection,Qr=W.HTMLAnchorElement,Go=W.HTMLAreaElement,Ji=W.HTMLAudioElement,fr=W.HTMLBaseElement,Ir=W.HTMLBodyElement,jo=W.HTMLBRElement,Ca=W.HTMLButtonElement,Xr=W.HTMLCanvasElement,Zr=W.HTMLCollection,zi=W.HTMLContentElement,$o=W.HTMLDataElement,Ko=W.HTMLDataListElement,Jo=W.HTMLDetailsElement,wr=W.HTMLDialogElement,Yo=W.HTMLDirectoryElement,_a=W.HTMLDivElement,Ta=W.HTMLDListElement,qr=W.HTMLDocument,Qo=W.HTMLElement,Xo=W.HTMLEmbedElement,eo=W.HTMLFieldSetElement,Zo=W.HTMLFontElement,qo=W.HTMLFormControlsCollection,Or=W.HTMLFormElement,hr=W.HTMLFrameElement,to=W.HTMLFrameSetElement,es=W.HTMLHeadElement,ts=W.HTMLHeadingElement,Ia=W.HTMLHRElement,no=W.HTMLHtmlElement,io=W.HTMLIFrameElement,ns=W.HTMLImageElement,ro=W.HTMLInputElement,is=W.HTMLLabelElement,Ar=W.HTMLLegendElement,oo=W.HTMLLIElement,rs=W.HTMLLinkElement,os=W.HTMLMapElement,wa=W.HTMLMarqueeElement,ss=W.HTMLMediaElement,as=W.HTMLMenuElement,so=W.HTMLMetaElement,ao=W.HTMLMeterElement,lo=W.HTMLModElement,ls=W.HTMLObjectElement,pr=W.HTMLOListElement,ds=W.HTMLOptGroupElement,co=W.HTMLOptionElement,Wi=W.HTMLOptionsCollection,Ii=W.HTMLOutputElement,_i=W.HTMLParagraphElement,el=W.HTMLParamElement,Mr=W.HTMLPictureElement,Fu=W.HTMLPreElement,tl=W.HTMLProgressElement,td=W.HTMLQuoteElement,Vu=W.HTMLScriptElement,Uu=W.HTMLSelectElement,Hu=W.HTMLShadowElement,nd=W.HTMLSlotElement,zu=W.HTMLSourceElement,Wu=W.HTMLSpanElement,id=W.HTMLStyleElement,rd=W.HTMLTableCaptionElement,cs=W.HTMLTableCellElement,od=W.HTMLTableColElement,nl=W.HTMLTableElement,Gu=W.HTMLTableRowElement,ju=W.HTMLTableSectionElement,$u=W.HTMLTemplateElement,Ku=W.HTMLTextAreaElement,sd=W.HTMLTimeElement,Ju=W.HTMLTitleElement,Oa=W.HTMLTrackElement,ad=W.HTMLUListElement,Yu=W.HTMLUnknownElement,il=W.HTMLVideoElement,Qu=W.IDBCursor,ld=W.IDBCursorWithValue,dd=W.IDBDatabase,Xu=W.IDBFactory,Zu=W.IDBIndex,qu=W.IDBKeyRange,ef=W.IDBObjectStore,cd=W.IDBOpenDBRequest,tf=W.IDBRequest,ud=W.IDBTransaction,rl=W.IDBVersionChangeEvent,fd=W.IdleDeadline,nf=W.IIRFilterNode,rf=W.Image,ol=W.ImageBitmap,of=W.ImageBitmapRenderingContext,sf=W.ImageCapture,hd=W.ImageData,Aa=W.indexedDB,pd=W.innerHeight,md=W.innerWidth,sl=W.InputEvent,tn=W.IntersectionObserver,Ut=W.IntersectionObserverEntry,af=W.Intl,MS=W.isSecureContext,gd=W.KeyboardEvent,ni=W.KeyframeEffect,lf=W.KeyframeEffectReadOnly,al=W.length,ll=W.localStorage,PS=W.location,Sd=W.Location,vd=W.locationbar,yd=W.matchMedia,dl=W.MediaDeviceInfo,df=W.MediaDevices,zt=W.MediaElementAudioSourceNode,Tn=W.MediaEncryptedEvent,vt=W.MediaError,RS=W.MediaKeyMessageEvent,cf=W.MediaKeySession,kS=W.MediaKeyStatusMap,DS=W.MediaKeySystemAccess,uf=W.MediaList,uo=W.MediaMetadata,LS=W.MediaQueryList,NS=W.MediaQueryListEvent,xS=W.MediaRecorder,BS=W.MediaSettingsRange,bd=W.MediaSource,FS=W.MediaStream,VS=W.MediaStreamAudioDestinationNode,US=W.MediaStreamAudioSourceNode,HS=W.MediaStreamEvent,zS=W.MediaStreamTrack,Ma=W.MediaStreamTrackEvent,Pa=W.menubar,ff=W.MessageChannel,cl=W.MessageEvent,WS=W.MessagePort,hf=W.MIDIAccess,GS=W.MIDIConnectionEvent,pf=W.MIDIInput,jS=W.MIDIInputMap,mf=W.MIDIMessageEvent,gf=W.MIDIOutput,Sf=W.MIDIOutputMap,$S=W.MIDIPort,yi=W.MimeType,us=W.MimeTypeArray,vf=W.MouseEvent,yf=W.moveBy,bf=W.moveTo,ul=W.MutationEvent,Ef=W.MutationObserver,Cf=W.MutationRecord,_f=W.name,Yi=W.NamedNodeMap,Tf=W.NavigationPreloadManager,If=W.navigator,fo=W.Navigator,Ra=W.NetworkInformation,Qi=W.Node,wf=W.NodeFilter,Of=W.NodeIterator,fl=W.NodeList,hl=W.Notification,Af=W.OfflineAudioCompletionEvent,Mf=W.OfflineAudioContext,pl=W.offscreenBuffering,fs=W.OffscreenCanvas,tt=W.OffscreenCanvasRenderingContext2D,KS=W.onabort,It=W.onafterprint,Pf=W.onanimationend,Ed=W.onanimationiteration,Rf=W.onanimationstart,kf=W.onappinstalled,Cd=W.onauxclick,nn=W.onbeforeinstallprompt,Qt=W.onbeforeprint,Df=W.onbeforeunload,Lf=W.onblur,Nf=W.oncancel,xf=W.oncanplay,Bf=W.oncanplaythrough,Ff=W.onchange,_d=W.onclick,mr=W.onclose,ho=W.oncontextmenu,po=W.oncuechange,hs=W.ondblclick,Vf=W.ondevicemotion,Td=W.ondeviceorientation,Uf=W.ondeviceorientationabsolute,Hf=W.ondrag,zf=W.ondragend,ml=W.ondragenter,Wf=W.ondragleave,gl=W.ondragover,Gf=W.ondragstart,jf=W.ondrop,$f=W.ondurationchange,Kf=W.onemptied,Id=W.onended,Jf=W.onerror,Yf=W.onfocus,wd=W.ongotpointercapture,rr=W.onhashchange,or=W.oninput,mo=W.oninvalid,Od=W.onkeydown,wi=W.onkeypress,go=W.onkeyup,ps=W.onlanguagechange,Sl=W.onload,Ad=W.onloadeddata,Md=W.onloadedmetadata,Pd=W.onloadstart,Rd=W.onlostpointercapture,kd=W.onmessage,Xi=W.onmessageerror,Dd=W.onmousedown,Ld=W.onmouseenter,Nd=W.onmouseleave,xd=W.onmousemove,Bd=W.onmouseout,JS=W.onmouseover,Qf=W.onmouseup,Xf=W.onmousewheel,vl=W.onoffline,yl=W.ononline,bl=W.onpagehide,El=W.onpageshow,Cl=W.onpause,_l=W.onplay,Tl=W.onplaying,Il=W.onpointercancel,wl=W.onpointerdown,Zf=W.onpointerenter,qf=W.onpointerleave,eh=W.onpointermove,th=W.onpointerout,nh=W.onpointerover,Mi=W.onpointerup,Fd=W.onpopstate,ih=W.onprogress,qt=W.onratechange,rh=W.onrejectionhandled,Pi=W.onreset,oh=W.onresize,sh=W.onscroll,ah=W.onsearch,ms=W.onseeked,gs=W.onseeking,Ss=W.onselect,vs=W.onstalled,ys=W.onstorage,bs=W.onsubmit,Es=W.onsuspend,Cs=W.ontimeupdate,_s=W.ontoggle,lh=W.ontransitionend,dh=W.onunhandledrejection,ch=W.onunload,uh=W.onvolumechange,fh=W.onwaiting,hh=W.onwheel,ph=W.open,mh=W.openDatabase,gh=W.opener,Sh=W.Option,vh=W.origin,yh=W.OscillatorNode,bh=W.outerHeight,oi=W.outerWidth,Vd=W.OverconstrainedError,Ud=W.PageTransitionEvent,Hd=W.pageXOffset,zd=W.pageYOffset,Wd=W.PannerNode,Gd=W.parent,Ts=W.Path2D,jd=W.PaymentAddress,Is=W.PaymentRequest,Ol=W.PaymentRequestUpdateEvent,$d=W.PaymentResponse,Kd=W.performance,Jd=W.Performance,Yd=W.PerformanceEntry,ws=W.PerformanceLongTaskTiming,Al=W.PerformanceMark,Qd=W.PerformanceMeasure,ka=W.PerformanceNavigation,Xd=W.PerformanceNavigationTiming,Zd=W.PerformanceObserver,qd=W.PerformanceObserverEntryList,Ml=W.PerformancePaintTiming,ec=W.PerformanceResourceTiming,tc=W.PerformanceTiming,Os=W.PeriodicWave,nc=W.Permissions,ic=W.PermissionStatus,rc=W.personalbar,oc=W.PhotoCapabilities,sc=W.Plugin,ac=W.PluginArray,lc=W.PointerEvent,dc=W.PopStateEvent,cc=W.postMessage,uc=W.Presentation,fc=W.PresentationAvailability,hc=W.PresentationConnection,pc=W.PresentationConnectionAvailableEvent,mc=W.PresentationConnectionCloseEvent,gc=W.PresentationConnectionList,Sc=W.PresentationReceiver,vc=W.PresentationRequest,yc=W.print,bc=W.ProcessingInstruction,Ec=W.ProgressEvent,Cc=W.PromiseRejectionEvent,_c=W.prompt,Tc=W.PushManager,Ic=W.PushSubscription,wc=W.PushSubscriptionOptions,Oc=W.queueMicrotask,Ac=W.RadioNodeList,Mc=W.Range,Pc=W.ReadableStream,Rc=W.registerProcessor,kc=W.RemotePlayback,Dc=W.removeEventListener,Lc=W.Request,Nc=W.requestAnimationFrame,xc=W.requestIdleCallback,Bc=W.resizeBy,Fc=W.ResizeObserver,Vc=W.ResizeObserverEntry,Uc=W.resizeTo,Hc=W.Response,zc=W.RTCCertificate,Wc=W.RTCDataChannel,Gc=W.RTCDataChannelEvent,jc=W.RTCDtlsTransport,$c=W.RTCIceCandidate,Eh=W.RTCIceGatherer,Ch=W.RTCIceTransport,_h=W.RTCPeerConnection,Th=W.RTCPeerConnectionIceEvent,Ih=W.RTCRtpContributingSource,wh=W.RTCRtpReceiver,Oh=W.RTCRtpSender,Ah=W.RTCSctpTransport,Mh=W.RTCSessionDescription,Ph=W.RTCStatsReport,Rh=W.RTCTrackEvent,kh=W.screen,Dh=W.Screen,Lh=W.screenLeft,Nh=W.ScreenOrientation,xh=W.screenTop,Bh=W.screenX,Fh=W.screenY,Vh=W.ScriptProcessorNode,Uh=W.scroll,Hh=W.scrollbars,zh=W.scrollBy,Wh=W.scrollTo,Gh=W.scrollX,jh=W.scrollY,$h=W.SecurityPolicyViolationEvent,Kh=W.Selection,As=W.self,Jh=W.ServiceWorker,Yh=W.ServiceWorkerContainer,Qh=W.ServiceWorkerRegistration,Xh=W.sessionStorage,Zh=W.setInterval,Kc=W.setTimeout,qh=W.ShadowRoot,ep=W.SharedWorker,tp=W.SourceBuffer,np=W.SourceBufferList,ip=W.speechSynthesis,rp=W.SpeechSynthesisEvent,op=W.SpeechSynthesisUtterance,sp=W.StaticRange,ap=W.status,lp=W.statusbar,dp=W.StereoPannerNode,cp=W.stop,up=W.Storage,fp=W.StorageEvent,hp=W.StorageManager,pp=W.styleMedia,mp=W.StyleSheet,gp=W.StyleSheetList,Sp=W.SubtleCrypto,vp=W.SVGAElement,yp=W.SVGAngle,bp=W.SVGAnimatedAngle,Ep=W.SVGAnimatedBoolean,Cp=W.SVGAnimatedEnumeration,_p=W.SVGAnimatedInteger,Tp=W.SVGAnimatedLength,Ip=W.SVGAnimatedLengthList,wp=W.SVGAnimatedNumber,Op=W.SVGAnimatedNumberList,Ap=W.SVGAnimatedPreserveAspectRatio,Mp=W.SVGAnimatedRect,Pp=W.SVGAnimatedString,Rp=W.SVGAnimatedTransformList,kp=W.SVGAnimateElement,Dp=W.SVGAnimateMotionElement,Lp=W.SVGAnimateTransformElement,Np=W.SVGAnimationElement,xp=W.SVGCircleElement,Bp=W.SVGClipPathElement,Fp=W.SVGComponentTransferFunctionElement,Vp=W.SVGDefsElement,Up=W.SVGDescElement,Hp=W.SVGDiscardElement,zp=W.SVGElement,Wp=W.SVGEllipseElement,Gp=W.SVGFEBlendElement,jp=W.SVGFEColorMatrixElement,$p=W.SVGFEComponentTransferElement,Kp=W.SVGFECompositeElement,Jp=W.SVGFEConvolveMatrixElement,Yp=W.SVGFEDiffuseLightingElement,Qp=W.SVGFEDisplacementMapElement,Xp=W.SVGFEDistantLightElement,Zp=W.SVGFEDropShadowElement,qp=W.SVGFEFloodElement,em=W.SVGFEFuncAElement,tm=W.SVGFEFuncBElement,nm=W.SVGFEFuncGElement,im=W.SVGFEFuncRElement,rm=W.SVGFEGaussianBlurElement,om=W.SVGFEImageElement,sm=W.SVGFEMergeElement,am=W.SVGFEMergeNodeElement,lm=W.SVGFEMorphologyElement,dm=W.SVGFEOffsetElement,cm=W.SVGFEPointLightElement,um=W.SVGFESpecularLightingElement,fm=W.SVGFESpotLightElement,hm=W.SVGFETileElement,pm=W.SVGFETurbulenceElement,mm=W.SVGFilterElement,gm=W.SVGForeignObjectElement,Sm=W.SVGGElement,vm=W.SVGGeometryElement,ym=W.SVGGradientElement,bm=W.SVGGraphicsElement,Em=W.SVGImageElement,Cm=W.SVGLength,_m=W.SVGLengthList,Tm=W.SVGLinearGradientElement,Im=W.SVGLineElement,wm=W.SVGMarkerElement,Om=W.SVGMaskElement,Am=W.SVGMatrix,Mm=W.SVGMetadataElement,Pm=W.SVGMPathElement,Rm=W.SVGNumber,km=W.SVGNumberList,Dm=W.SVGPathElement,Lm=W.SVGPatternElement,Nm=W.SVGPoint,xm=W.SVGPointList,Bm=W.SVGPolygonElement,Fm=W.SVGPolylineElement,Vm=W.SVGPreserveAspectRatio,Um=W.SVGRadialGradientElement,Hm=W.SVGRect,zm=W.SVGRectElement,Wm=W.SVGScriptElement,Gm=W.SVGSetElement,jm=W.SVGStopElement,$m=W.SVGStringList,Km=W.SVGStyleElement,Jm=W.SVGSVGElement,Ym=W.SVGSwitchElement,Qm=W.SVGSymbolElement,Xm=W.SVGTextContentElement,Zm=W.SVGTextElement,qm=W.SVGTextPathElement,eg=W.SVGTextPositioningElement,tg=W.SVGTitleElement,ng=W.SVGTransform,ig=W.SVGTransformList,rg=W.SVGTSpanElement,og=W.SVGUnitTypes,sg=W.SVGUseElement,ag=W.SVGViewElement,lg=W.TaskAttributionTiming,dg=W.Text,ln=W.TextDecoder,gn=W.TextEncoder,si=W.TextEvent,dn=W.TextMetrics,Zi=W.TextTrack,Pr=W.TextTrackCue,cn=W.TextTrackCueList,un=W.TextTrackList,fn=W.TimeRanges,hn=W.toolbar,cg=W.top,ug=W.Touch,fg=W.TouchEvent,hg=W.TouchList,pg=W.TrackEvent,Jc=W.TransitionEvent,mg=W.TreeWalker,Yc=W.trustedTypes,gg=W.UIEvent,Sg=W.URL,Qc=W.URLSearchParams,vg=W.ValidityState,yg=W.visualViewport,Pl=W.VisualViewport,Xc=W.VTTCue,Rl=W.WaveShaperNode,kl=W.WebAssembly,Jt=W.WebGL2RenderingContext,Fi=W.WebGLActiveInfo,bg=W.WebGLBuffer,Mn=W.WebGLContextEvent,In=W.WebGLFramebuffer,pn=W.WebGLProgram,mn=W.WebGLQuery,Ms=W.WebGLRenderbuffer,Ps=W.WebGLRenderingContext,Rs=W.WebGLSampler,ks=W.WebGLShader,Ds=W.WebGLShaderPrecisionFormat,Ls=W.WebGLSync,Ns=W.WebGLTexture,xs=W.WebGLTransformFeedback,Bs=W.WebGLUniformLocation,Fs=W.WebGLVertexArrayObject,Vs=W.WebSocket,Us=W.WheelEvent,W=W.window,Hs=W.Window,zs=W.Worker,Ws=W.WritableStream,Gs=W.XMLDocument,js=W.XMLHttpRequest,$s=W.XMLHttpRequestEventTarget,Ks=W.XMLHttpRequestUpload,Js=W.XMLSerializer,Ys=W.XPathEvaluator,Qs=W.XPathExpression,Xs=W.XPathResult,Zs=W.XSLTProcessor;return function(Ln,Kt){typeof a=="object"&&typeof r<"u"?Kt(a,f(296540),f(487335)):(g=[a,f(296540),f(487335)],u=Kt,m=typeof u=="function"?u.apply(a,g):u,m!==void 0&&(r.exports=m))}(this,function(Ln,Kt,gr){"use strict";var Sr=s(()=>'<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',"resizeTriggersHtml");function jn(Q,P){if(!(Q instanceof P))throw new TypeError("Cannot call a class as a function")}s(jn,"_classCallCheck");function vr(Q,P){for(var x=0;x<P.length;x++){var $=P[x];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(Q,$.key,$)}}s(vr,"_defineProperties");function $n(Q,P,x){return P&&vr(Q.prototype,P),x&&vr(Q,x),Q}s($n,"_createClass");function xe(Q,P,x){return P in Q?Object.defineProperty(Q,P,{value:x,enumerable:!0,configurable:!0,writable:!0}):Q[P]=x,Q}s(xe,"_defineProperty");function bi(){return(bi=Object.assign||function(Q){for(var P=1;P<arguments.length;P++){var x=arguments[P];for(var $ in x)Object.prototype.hasOwnProperty.call(x,$)&&(Q[$]=x[$])}return Q}).apply(this,arguments)}s(bi,"_extends");function yr(Q,P){var x=Object.keys(Q);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(Q);P&&($=$.filter(function(ee){return Object.getOwnPropertyDescriptor(Q,ee).enumerable})),x.push.apply(x,$)}return x}s(yr,"ownKeys");function An(Q){for(var P=1;P<arguments.length;P++){var x=arguments[P]!=null?arguments[P]:{};P%2?yr(x,!0).forEach(function($){xe(Q,$,x[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(x)):yr(x).forEach(function($){Object.defineProperty(Q,$,Object.getOwnPropertyDescriptor(x,$))})}return Q}s(An,"_objectSpread2");function ii(Q,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");Q.prototype=Object.create(P&&P.prototype,{constructor:{value:Q,writable:!0,configurable:!0}}),P&&Rr(Q,P)}s(ii,"_inherits");function Zn(Q){return(Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)})(Q)}s(Zn,"_getPrototypeOf");function Rr(Q,P){return(Rr=Object.setPrototypeOf||function(x,$){return x.__proto__=$,x})(Q,P)}s(Rr,"_setPrototypeOf");function qi(Q,P){if(Q==null)return{};var x,$,ee=function(te,he){if(te==null)return{};var ye,ve,Te={},Re=Object.keys(te);for(ve=0;ve<Re.length;ve++)ye=Re[ve],0<=he.indexOf(ye)||(Te[ye]=te[ye]);return Te}(Q,P);if(Object.getOwnPropertySymbols){var se=Object.getOwnPropertySymbols(Q);for($=0;$<se.length;$++)x=se[$],0<=P.indexOf(x)||Object.prototype.propertyIsEnumerable.call(Q,x)&&(ee[x]=Q[x])}return ee}s(qi,"_objectWithoutProperties");function nt(Q){if(Q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q}s(nt,"_assertThisInitialized");function ai(Q,P){return!P||typeof P!="object"&&typeof P!="function"?nt(Q):P}s(ai,"_possibleConstructorReturn");function So(Q,P){return function(x){if(Array.isArray(x))return x}(Q)||function(x,$){if(Symbol.iterator in Object(x)||Object.prototype.toString.call(x)==="[object Arguments]"){var ee=[],se=!0,te=!1,he=void 0;try{for(var ye,ve=x[Symbol.iterator]();!(se=(ye=ve.next()).done)&&(ee.push(ye.value),!$||ee.length!==$);se=!0);}catch(Te){te=!0,he=Te}finally{try{se||ve.return==null||ve.return()}finally{if(te)throw he}}return ee}}(Q,P)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}s(So,"_slicedToArray");function kr(Q){return function(P){if(Array.isArray(P)){for(var x=0,$=new Array(P.length);x<P.length;x++)$[x]=P[x];return $}}(Q)||function(P){if(Symbol.iterator in Object(P)||Object.prototype.toString.call(P)==="[object Arguments]")return Array.from(P)}(Q)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}s(kr,"_toConsumableArray");function Dr(){var Q=this.constructor.getDerivedStateFromProps(this.props,this.state);Q!=null&&this.setState(Q)}s(Dr,"componentWillMount");function Lr(Q){this.setState(function(P){var x=this.constructor.getDerivedStateFromProps(Q,P);return x??null}.bind(this))}s(Lr,"componentWillReceiveProps");function Nr(Q,P){try{var x=this.props,$=this.state;this.props=Q,this.state=P,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(x,$)}finally{this.props=x,this.state=$}}s(Nr,"componentWillUpdate");function er(Q){var P=Q.prototype;if(!P||!P.isReactComponent)throw new Error("Can only polyfill class components");if(typeof Q.getDerivedStateFromProps!="function"&&typeof P.getSnapshotBeforeUpdate!="function")return Q;var x=null,$=null,ee=null;if(typeof P.componentWillMount=="function"?x="componentWillMount":typeof P.UNSAFE_componentWillMount=="function"&&(x="UNSAFE_componentWillMount"),typeof P.componentWillReceiveProps=="function"?$="componentWillReceiveProps":typeof P.UNSAFE_componentWillReceiveProps=="function"&&($="UNSAFE_componentWillReceiveProps"),typeof P.componentWillUpdate=="function"?ee="componentWillUpdate":typeof P.UNSAFE_componentWillUpdate=="function"&&(ee="UNSAFE_componentWillUpdate"),x!==null||$!==null||ee!==null){var se=Q.displayName||Q.name,te=typeof Q.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+se+" uses "+te+" but also contains the following legacy lifecycles:"+(x!==null?`
  `+x:"")+($!==null?`
  `+$:"")+(ee!==null?`
  `+ee:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof Q.getDerivedStateFromProps=="function"&&(P.componentWillMount=Dr,P.componentWillReceiveProps=Lr),typeof P.getSnapshotBeforeUpdate=="function"){if(typeof P.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");P.componentWillUpdate=Nr;var he=P.componentDidUpdate;P.componentDidUpdate=function(ye,ve,Te){var Re=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:Te;he.call(this,ye,ve,Re)}}return Q}s(er,"polyfill"),Nr.__suppressDeprecationWarning=Lr.__suppressDeprecationWarning=Dr.__suppressDeprecationWarning=!0;var br=function(){function Q(){var P,x;jn(this,Q);for(var $=arguments.length,ee=new Array($),se=0;se<$;se++)ee[se]=arguments[se];return xe(nt(x=ai(this,(P=Zn(Q)).call.apply(P,[this].concat(ee)))),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),xe(nt(x),"_columnStartIndex",0),xe(nt(x),"_columnStopIndex",0),xe(nt(x),"_rowStartIndex",0),xe(nt(x),"_rowStopIndex",0),xe(nt(x),"_onKeyDown",function(te){var he=x.props,ye=he.columnCount,ve=he.disabled,Te=he.mode,Re=he.rowCount;if(!ve){var Be=x._getScrollState(),it=Be.scrollToColumn,Ve=Be.scrollToRow,je=x._getScrollState(),ot=je.scrollToColumn,at=je.scrollToRow;switch(te.key){case"ArrowDown":at=Math.min(Te==="cells"?at+1:x._rowStopIndex+1,Re-1);break;case"ArrowLeft":ot=Math.max(Te==="cells"?ot-1:x._columnStartIndex-1,0);break;case"ArrowRight":ot=Math.min(Te==="cells"?ot+1:x._columnStopIndex+1,ye-1);break;case"ArrowUp":at=Math.max(Te==="cells"?at-1:x._rowStartIndex-1,0)}ot===it&&at===Ve||(te.preventDefault(),x._updateScrollState({scrollToColumn:ot,scrollToRow:at}))}}),xe(nt(x),"_onSectionRendered",function(te){var he=te.columnStartIndex,ye=te.columnStopIndex,ve=te.rowStartIndex,Te=te.rowStopIndex;x._columnStartIndex=he,x._columnStopIndex=ye,x._rowStartIndex=ve,x._rowStopIndex=Te}),x}return s(Q,"ArrowKeyStepper"),ii(Q,Kt.PureComponent),$n(Q,[{key:"setScrollIndexes",value:function(P){var x=P.scrollToColumn,$=P.scrollToRow;this.setState({scrollToRow:$,scrollToColumn:x})}},{key:"render",value:function(){var P=this.props,x=P.className,$=P.children,ee=this._getScrollState(),se=ee.scrollToColumn,te=ee.scrollToRow;return Kt.createElement("div",{className:x,onKeyDown:this._onKeyDown},$({onSectionRendered:this._onSectionRendered,scrollToColumn:se,scrollToRow:te}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(P){var x=P.scrollToColumn,$=P.scrollToRow,ee=this.props,se=ee.isControlled,te=ee.onScrollToChange;typeof te=="function"&&te({scrollToColumn:x,scrollToRow:$}),se||this.setState({scrollToColumn:x,scrollToRow:$})}}],[{key:"getDerivedStateFromProps",value:function(P,x){return P.isControlled?{}:P.scrollToColumn!==x.instanceProps.prevScrollToColumn||P.scrollToRow!==x.instanceProps.prevScrollToRow?An({},x,{scrollToColumn:P.scrollToColumn,scrollToRow:P.scrollToRow,instanceProps:{prevScrollToColumn:P.scrollToColumn,prevScrollToRow:P.scrollToRow}}):{}}}]),Q}();function xr(Q,P){var x,$,ee,se=(x=P!==void 0?P:typeof W<"u"?W:typeof As<"u"?As:f.g).document!==void 0&&x.document.attachEvent;if(!se){var te=(ee=x.requestAnimationFrame||x.mozRequestAnimationFrame||x.webkitRequestAnimationFrame||function(Je){return x.setTimeout(Je,20)},function(Je){return ee(Je)}),he=($=x.cancelAnimationFrame||x.mozCancelAnimationFrame||x.webkitCancelAnimationFrame||x.clearTimeout,function(Je){return $(Je)}),ye=s(function(Je){var lt=Je.__resizeTriggers__,Ge=lt.firstElementChild,Bt=lt.lastElementChild,an=Ge.firstElementChild;Bt.scrollLeft=Bt.scrollWidth,Bt.scrollTop=Bt.scrollHeight,an.style.width=Ge.offsetWidth+1+"px",an.style.height=Ge.offsetHeight+1+"px",Ge.scrollLeft=Ge.scrollWidth,Ge.scrollTop=Ge.scrollHeight},"resetTriggers"),ve=s(function(Je){if(!(Je.target.className&&typeof Je.target.className.indexOf=="function"&&Je.target.className.indexOf("contract-trigger")<0&&Je.target.className.indexOf("expand-trigger")<0)){var lt=this;ye(this),this.__resizeRAF__&&he(this.__resizeRAF__),this.__resizeRAF__=te(function(){!function(Ge){return Ge.offsetWidth!=Ge.__resizeLast__.width||Ge.offsetHeight!=Ge.__resizeLast__.height}(lt)||(lt.__resizeLast__.width=lt.offsetWidth,lt.__resizeLast__.height=lt.offsetHeight,lt.__resizeListeners__.forEach(function(Ge){Ge.call(lt,Je)}))})}},"scrollListener"),Te=!1,Re="",Be="animationstart",it="Webkit Moz O ms".split(" "),Ve="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),je=x.document.createElement("fakeelement");if(je.style.animationName!==void 0&&(Te=!0),Te===!1){for(var ot=0;ot<it.length;ot++)if(je.style[it[ot]+"AnimationName"]!==void 0){Re="-"+it[ot].toLowerCase()+"-",Be=Ve[ot],Te=!0;break}}var at="resizeanim",yt="@"+Re+"keyframes "+at+" { from { opacity: 0; } to { opacity: 0; } } ",wt=Re+"animation: 1ms "+at+"; "}return{addResizeListener:function(Je,lt){if(se)Je.attachEvent("onresize",lt);else{if(!Je.__resizeTriggers__){var Ge=Je.ownerDocument,Bt=x.getComputedStyle(Je);if(Bt&&Bt.position=="static"&&(Je.style.position="relative"),function(Pn){if(!Pn.getElementById("detectElementResize")){var Kn=(yt||"")+".resize-triggers { "+(wt||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',Jn=Pn.head||Pn.getElementsByTagName("head")[0],Yn=Pn.createElement("style");Yn.id="detectElementResize",Yn.type="text/css",Q!=null&&Yn.setAttribute("nonce",Q),Yn.styleSheet?Yn.styleSheet.cssText=Kn:Yn.appendChild(Pn.createTextNode(Kn)),Jn.appendChild(Yn)}}(Ge),Je.__resizeLast__={},Je.__resizeListeners__=[],(Je.__resizeTriggers__=Ge.createElement("div")).className="resize-triggers",W.trustedTypes){var an=Yc.createPolicy("react-virtualized-auto-sizer",{createHTML:Sr});Je.__resizeTriggers__.innerHTML=an.createHTML("")}else Je.__resizeTriggers__.innerHTML=Sr();Je.appendChild(Je.__resizeTriggers__),ye(Je),Je.addEventListener("scroll",ve,!0),Be&&(Je.__resizeTriggers__.__animationListener__=function(Pn){Pn.animationName==at&&ye(Je)},Je.__resizeTriggers__.addEventListener(Be,Je.__resizeTriggers__.__animationListener__))}Je.__resizeListeners__.push(lt)}},removeResizeListener:function(Je,lt){if(se)Je.detachEvent("onresize",lt);else if(Je.__resizeListeners__.splice(Je.__resizeListeners__.indexOf(lt),1),!Je.__resizeListeners__.length){Je.removeEventListener("scroll",ve,!0),Je.__resizeTriggers__.__animationListener__&&(Je.__resizeTriggers__.removeEventListener(Be,Je.__resizeTriggers__.__animationListener__),Je.__resizeTriggers__.__animationListener__=null);try{Je.__resizeTriggers__=!Je.removeChild(Je.__resizeTriggers__)}catch{}}}}}s(xr,"createDetectElementResize"),xe(br,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0}),er(br);var Br=function(){function Q(){var P,x;jn(this,Q);for(var $=arguments.length,ee=new Array($),se=0;se<$;se++)ee[se]=arguments[se];return xe(nt(x=ai(this,(P=Zn(Q)).call.apply(P,[this].concat(ee)))),"state",{height:x.props.defaultHeight||0,width:x.props.defaultWidth||0}),xe(nt(x),"_parentNode",void 0),xe(nt(x),"_autoSizer",void 0),xe(nt(x),"_window",void 0),xe(nt(x),"_detectElementResize",void 0),xe(nt(x),"_onResize",function(){var te=x.props,he=te.disableHeight,ye=te.disableWidth,ve=te.onResize;if(x._parentNode){var Te=x._parentNode.offsetHeight||0,Re=x._parentNode.offsetWidth||0,Be=(x._window||W).getComputedStyle(x._parentNode)||{},it=parseInt(Be.paddingLeft,10)||0,Ve=parseInt(Be.paddingRight,10)||0,je=parseInt(Be.paddingTop,10)||0,ot=parseInt(Be.paddingBottom,10)||0,at=Te-je-ot,yt=Re-it-Ve;(!he&&x.state.height!==at||!ye&&x.state.width!==yt)&&(x.setState({height:Te-je-ot,width:Re-it-Ve}),ve({height:Te,width:Re}))}}),xe(nt(x),"_setRef",function(te){x._autoSizer=te}),x}return s(Q,"AutoSizer"),ii(Q,Kt.Component),$n(Q,[{key:"componentDidMount",value:function(){var P=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=xr(P,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var P=this.props,x=P.children,$=P.className,ee=P.disableHeight,se=P.disableWidth,te=P.style,he=this.state,ye=he.height,ve=he.width,Te={overflow:"visible"},Re={};return ee||(Te.height=0,Re.height=ye),se||(Te.width=0,Re.width=ve),Kt.createElement("div",{className:$,ref:this._setRef,style:An({},Te,{},te)},x(Re))}}]),Q}();xe(Br,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var Da=function(){function Q(){var P,x;jn(this,Q);for(var $=arguments.length,ee=new Array($),se=0;se<$;se++)ee[se]=arguments[se];return xe(nt(x=ai(this,(P=Zn(Q)).call.apply(P,[this].concat(ee)))),"_child",void 0),xe(nt(x),"_measure",function(){var te=x.props,he=te.cache,ye=te.columnIndex,ve=ye===void 0?0:ye,Te=te.parent,Re=te.rowIndex,Be=Re===void 0?x.props.index||0:Re,it=x._getCellMeasurements(),Ve=it.height,je=it.width;Ve===he.getHeight(Be,ve)&&je===he.getWidth(Be,ve)||(he.set(Be,ve,je,Ve),Te&&typeof Te.recomputeGridSize=="function"&&Te.recomputeGridSize({columnIndex:ve,rowIndex:Be}))}),xe(nt(x),"_registerChild",function(te){!te||te instanceof ti||Fe.warn("CellMeasurer registerChild expects to be passed Element or null"),(x._child=te)&&x._maybeMeasureCell()}),x}return s(Q,"CellMeasurer"),ii(Q,Kt.PureComponent),$n(Q,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var P=this.props.children;return typeof P=="function"?P({measure:this._measure,registerChild:this._registerChild}):P}},{key:"_getCellMeasurements",value:function(){var P=this.props.cache,x=this._child||gr.findDOMNode(this);if(x&&x.ownerDocument&&x.ownerDocument.defaultView&&x instanceof x.ownerDocument.defaultView.HTMLElement){var $=x.style.width,ee=x.style.height;P.hasFixedWidth()||(x.style.width="auto"),P.hasFixedHeight()||(x.style.height="auto");var se=Math.ceil(x.offsetHeight),te=Math.ceil(x.offsetWidth);return $&&(x.style.width=$),ee&&(x.style.height=ee),{height:se,width:te}}return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var P=this.props,x=P.cache,$=P.columnIndex,ee=$===void 0?0:$,se=P.parent,te=P.rowIndex,he=te===void 0?this.props.index||0:te;if(!x.has(he,ee)){var ye=this._getCellMeasurements(),ve=ye.height,Te=ye.width;x.set(he,ee,Te,ve),se&&typeof se.invalidateCellSizeAfterRender=="function"&&se.invalidateCellSizeAfterRender({columnIndex:ee,rowIndex:he})}}}]),Q}();xe(Da,"__internalCellMeasurerFlag",!1),Da.__internalCellMeasurerFlag=!0;var La=function(){function Q(){var P=this,x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};jn(this,Q),xe(this,"_cellHeightCache",{}),xe(this,"_cellWidthCache",{}),xe(this,"_columnWidthCache",{}),xe(this,"_rowHeightCache",{}),xe(this,"_defaultHeight",void 0),xe(this,"_defaultWidth",void 0),xe(this,"_minHeight",void 0),xe(this,"_minWidth",void 0),xe(this,"_keyMapper",void 0),xe(this,"_hasFixedHeight",void 0),xe(this,"_hasFixedWidth",void 0),xe(this,"_columnCount",0),xe(this,"_rowCount",0),xe(this,"columnWidth",function(Te){var Re=Te.index,Be=P._keyMapper(0,Re);return P._columnWidthCache[Be]!==void 0?P._columnWidthCache[Be]:P._defaultWidth}),xe(this,"rowHeight",function(Te){var Re=Te.index,Be=P._keyMapper(Re,0);return P._rowHeightCache[Be]!==void 0?P._rowHeightCache[Be]:P._defaultHeight});var $=x.defaultHeight,ee=x.defaultWidth,se=x.fixedHeight,te=x.fixedWidth,he=x.keyMapper,ye=x.minHeight,ve=x.minWidth;this._hasFixedHeight=se===!0,this._hasFixedWidth=te===!0,this._minHeight=ye||0,this._minWidth=ve||0,this._keyMapper=he||Zc,this._defaultHeight=Math.max(this._minHeight,typeof $=="number"?$:30),this._defaultWidth=Math.max(this._minWidth,typeof ee=="number"?ee:100),this._hasFixedHeight===!1&&this._hasFixedWidth===!1&&Fe.warn("CellMeasurerCache should only measure a cell's width or height. You have configured CellMeasurerCache to measure both. This will result in poor performance."),this._hasFixedHeight===!1&&this._defaultHeight===0&&Fe.warn("Fixed height CellMeasurerCache should specify a :defaultHeight greater than 0. Failing to do so will lead to unnecessary layout and poor performance."),this._hasFixedWidth===!1&&this._defaultWidth===0&&Fe.warn("Fixed width CellMeasurerCache should specify a :defaultWidth greater than 0. Failing to do so will lead to unnecessary layout and poor performance.")}return s(Q,"CellMeasurerCache"),$n(Q,[{key:"clear",value:function(P,x){var $=1<arguments.length&&x!==void 0?x:0,ee=this._keyMapper(P,$);delete this._cellHeightCache[ee],delete this._cellWidthCache[ee],this._updateCachedColumnAndRowSizes(P,$)}},{key:"clearAll",value:function(){this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._rowCount=0,this._columnCount=0}},{key:"hasFixedHeight",value:function(){return this._hasFixedHeight}},{key:"hasFixedWidth",value:function(){return this._hasFixedWidth}},{key:"getHeight",value:function(P,x){var $=1<arguments.length&&x!==void 0?x:0;if(this._hasFixedHeight)return this._defaultHeight;var ee=this._keyMapper(P,$);return this._cellHeightCache[ee]!==void 0?Math.max(this._minHeight,this._cellHeightCache[ee]):this._defaultHeight}},{key:"getWidth",value:function(P,x){var $=1<arguments.length&&x!==void 0?x:0;if(this._hasFixedWidth)return this._defaultWidth;var ee=this._keyMapper(P,$);return this._cellWidthCache[ee]!==void 0?Math.max(this._minWidth,this._cellWidthCache[ee]):this._defaultWidth}},{key:"has",value:function(P,x){var $=1<arguments.length&&x!==void 0?x:0,ee=this._keyMapper(P,$);return this._cellHeightCache[ee]!==void 0}},{key:"set",value:function(P,x,$,ee){var se=this._keyMapper(P,x);x>=this._columnCount&&(this._columnCount=x+1),P>=this._rowCount&&(this._rowCount=P+1),this._cellHeightCache[se]=ee,this._cellWidthCache[se]=$,this._updateCachedColumnAndRowSizes(P,x)}},{key:"_updateCachedColumnAndRowSizes",value:function(P,x){if(!this._hasFixedWidth){for(var $=0,ee=0;ee<this._rowCount;ee++)$=Math.max($,this.getWidth(ee,x));var se=this._keyMapper(0,x);this._columnWidthCache[se]=$}if(!this._hasFixedHeight){for(var te=0,he=0;he<this._columnCount;he++)te=Math.max(te,this.getHeight(P,he));var ye=this._keyMapper(P,0);this._rowHeightCache[ye]=te}}},{key:"defaultHeight",get:function(){return this._defaultHeight}},{key:"defaultWidth",get:function(){return this._defaultWidth}}]),Q}();function Zc(Q,P){return"".concat(Q,"-").concat(P)}s(Zc,"defaultKeyMapper");function Dl(Q){return Q&&Q.__esModule&&Object.prototype.hasOwnProperty.call(Q,"default")?Q.default:Q}s(Dl,"unwrapExports");function Fr(Q,P){return Q(P={exports:{}},P.exports),P.exports}s(Fr,"createCommonjsModule");var Vn=Fr(function(Q,P){Object.defineProperty(P,"__esModule",{value:!0});var x=typeof Symbol=="function"&&Symbol.for,$=x?Symbol.for("react.element"):60103,ee=x?Symbol.for("react.portal"):60106,se=x?Symbol.for("react.fragment"):60107,te=x?Symbol.for("react.strict_mode"):60108,he=x?Symbol.for("react.profiler"):60114,ye=x?Symbol.for("react.provider"):60109,ve=x?Symbol.for("react.context"):60110,Te=x?Symbol.for("react.async_mode"):60111,Re=x?Symbol.for("react.concurrent_mode"):60111,Be=x?Symbol.for("react.forward_ref"):60112,it=x?Symbol.for("react.suspense"):60113,Ve=x?Symbol.for("react.suspense_list"):60120,je=x?Symbol.for("react.memo"):60115,ot=x?Symbol.for("react.lazy"):60116,at=x?Symbol.for("react.fundamental"):60117,yt=x?Symbol.for("react.responder"):60118,wt=x?Symbol.for("react.scope"):60119;function Je(Ge){if(typeof Ge=="object"&&Ge!==null){var Bt=Ge.$$typeof;switch(Bt){case $:switch(Ge=Ge.type){case Te:case Re:case se:case he:case te:case it:return Ge;default:switch(Ge=Ge&&Ge.$$typeof){case ve:case Be:case ye:return Ge;default:return Bt}}case ot:case je:case ee:return Bt}}}s(Je,"y");function lt(Ge){return Je(Ge)===Re}s(lt,"z"),P.typeOf=Je,P.AsyncMode=Te,P.ConcurrentMode=Re,P.ContextConsumer=ve,P.ContextProvider=ye,P.Element=$,P.ForwardRef=Be,P.Fragment=se,P.Lazy=ot,P.Memo=je,P.Portal=ee,P.Profiler=he,P.StrictMode=te,P.Suspense=it,P.isValidElementType=function(Ge){return typeof Ge=="string"||typeof Ge=="function"||Ge===se||Ge===Re||Ge===he||Ge===te||Ge===it||Ge===Ve||typeof Ge=="object"&&Ge!==null&&(Ge.$$typeof===ot||Ge.$$typeof===je||Ge.$$typeof===ye||Ge.$$typeof===ve||Ge.$$typeof===Be||Ge.$$typeof===at||Ge.$$typeof===yt||Ge.$$typeof===wt)},P.isAsyncMode=function(Ge){return lt(Ge)||Je(Ge)===Te},P.isConcurrentMode=lt,P.isContextConsumer=function(Ge){return Je(Ge)===ve},P.isContextProvider=function(Ge){return Je(Ge)===ye},P.isElement=function(Ge){return typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===$},P.isForwardRef=function(Ge){return Je(Ge)===Be},P.isFragment=function(Ge){return Je(Ge)===se},P.isLazy=function(Ge){return Je(Ge)===ot},P.isMemo=function(Ge){return Je(Ge)===je},P.isPortal=function(Ge){return Je(Ge)===ee},P.isProfiler=function(Ge){return Je(Ge)===he},P.isStrictMode=function(Ge){return Je(Ge)===te},P.isSuspense=function(Ge){return Je(Ge)===it}});Dl(Vn),Vn.typeOf,Vn.AsyncMode,Vn.ConcurrentMode,Vn.ContextConsumer,Vn.ContextProvider,Vn.Element,Vn.ForwardRef,Vn.Fragment,Vn.Lazy,Vn.Memo,Vn.Portal,Vn.Profiler,Vn.StrictMode,Vn.Suspense,Vn.isValidElementType,Vn.isAsyncMode,Vn.isConcurrentMode,Vn.isContextConsumer,Vn.isContextProvider,Vn.isElement,Vn.isForwardRef,Vn.isFragment,Vn.isLazy,Vn.isMemo,Vn.isPortal,Vn.isProfiler,Vn.isStrictMode,Vn.isSuspense;var Fn=Fr(function(Q,P){(function(){Object.defineProperty(P,"__esModule",{value:!0});var x=typeof Symbol=="function"&&Symbol.for,$=x?Symbol.for("react.element"):60103,ee=x?Symbol.for("react.portal"):60106,se=x?Symbol.for("react.fragment"):60107,te=x?Symbol.for("react.strict_mode"):60108,he=x?Symbol.for("react.profiler"):60114,ye=x?Symbol.for("react.provider"):60109,ve=x?Symbol.for("react.context"):60110,Te=x?Symbol.for("react.async_mode"):60111,Re=x?Symbol.for("react.concurrent_mode"):60111,Be=x?Symbol.for("react.forward_ref"):60112,it=x?Symbol.for("react.suspense"):60113,Ve=x?Symbol.for("react.suspense_list"):60120,je=x?Symbol.for("react.memo"):60115,ot=x?Symbol.for("react.lazy"):60116,at=x?Symbol.for("react.fundamental"):60117,yt=x?Symbol.for("react.responder"):60118,wt=x?Symbol.for("react.scope"):60119,Je=s(function(rn,sa){if(sa===void 0)throw new Error("`lowPriorityWarningWithoutStack(condition, format, ...args)` requires a warning message argument");if(!rn){for(var Ur=arguments.length,Ka=new Array(2<Ur?Ur-2:0),Vl=2;Vl<Ur;Vl++)Ka[Vl-2]=arguments[Vl];(function(ZS){for(var yu=arguments.length,jg=new Array(1<yu?yu-1:0),Ul=1;Ul<yu;Ul++)jg[Ul-1]=arguments[Ul];var qS=0,$g="Warning: "+ZS.replace(/%s/g,function(){return jg[qS++]});typeof Fe<"u"&&Fe.warn($g);try{throw new Error($g)}catch{}}).apply(void 0,[sa].concat(Ka))}},"lowPriorityWarningWithoutStack$1");function lt(rn){if(typeof rn=="object"&&rn!==null){var sa=rn.$$typeof;switch(sa){case $:var Ur=rn.type;switch(Ur){case Te:case Re:case se:case he:case te:case it:return Ur;default:var Ka=Ur&&Ur.$$typeof;switch(Ka){case ve:case Be:case ye:return Ka;default:return sa}}case ot:case je:case ee:return sa}}}s(lt,"typeOf");var Ge=Te,Bt=Re,an=ve,Pn=ye,Kn=$,Jn=Be,Yn=se,Oi=ot,ki=je,Ui=ee,ja=he,$a=te,XS=it,Wg=!1;function Gg(rn){return lt(rn)===Re}s(Gg,"isConcurrentMode"),P.typeOf=lt,P.AsyncMode=Ge,P.ConcurrentMode=Bt,P.ContextConsumer=an,P.ContextProvider=Pn,P.Element=Kn,P.ForwardRef=Jn,P.Fragment=Yn,P.Lazy=Oi,P.Memo=ki,P.Portal=Ui,P.Profiler=ja,P.StrictMode=$a,P.Suspense=XS,P.isValidElementType=function(rn){return typeof rn=="string"||typeof rn=="function"||rn===se||rn===Re||rn===he||rn===te||rn===it||rn===Ve||typeof rn=="object"&&rn!==null&&(rn.$$typeof===ot||rn.$$typeof===je||rn.$$typeof===ye||rn.$$typeof===ve||rn.$$typeof===Be||rn.$$typeof===at||rn.$$typeof===yt||rn.$$typeof===wt)},P.isAsyncMode=function(rn){return Wg||Je(!(Wg=!0),"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API."),Gg(rn)||lt(rn)===Te},P.isConcurrentMode=Gg,P.isContextConsumer=function(rn){return lt(rn)===ve},P.isContextProvider=function(rn){return lt(rn)===ye},P.isElement=function(rn){return typeof rn=="object"&&rn!==null&&rn.$$typeof===$},P.isForwardRef=function(rn){return lt(rn)===Be},P.isFragment=function(rn){return lt(rn)===se},P.isLazy=function(rn){return lt(rn)===ot},P.isMemo=function(rn){return lt(rn)===je},P.isPortal=function(rn){return lt(rn)===ee},P.isProfiler=function(rn){return lt(rn)===he},P.isStrictMode=function(rn){return lt(rn)===te},P.isSuspense=function(rn){return lt(rn)===it}})()});Dl(Fn),Fn.typeOf,Fn.AsyncMode,Fn.ConcurrentMode,Fn.ContextConsumer,Fn.ContextProvider,Fn.Element,Fn.ForwardRef,Fn.Fragment,Fn.Lazy,Fn.Memo,Fn.Portal,Fn.Profiler,Fn.StrictMode,Fn.Suspense,Fn.isValidElementType,Fn.isAsyncMode,Fn.isConcurrentMode,Fn.isContextConsumer,Fn.isContextProvider,Fn.isElement,Fn.isForwardRef,Fn.isFragment,Fn.isLazy,Fn.isMemo,Fn.isPortal,Fn.isProfiler,Fn.isStrictMode,Fn.isSuspense;var qs=Fr(function(Q){Q.exports=Fn}),Ll=Object.getOwnPropertySymbols,qc=Object.prototype.hasOwnProperty,Na=Object.prototype.propertyIsEnumerable,xa,eu=function(){try{if(!Object.assign)return!1;var Q=new String("abc");if(Q[5]="de",Object.getOwnPropertyNames(Q)[0]==="5")return!1;for(var P={},x=0;x<10;x++)P["_"+String.fromCharCode(x)]=x;if(Object.getOwnPropertyNames(P).map(function(ee){return P[ee]}).join("")!=="0123456789")return!1;var $={};return"abcdefghijklmnopqrst".split("").forEach(function(ee){$[ee]=ee}),Object.keys(Object.assign({},$)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(Q,P){for(var x,$,ee=function(ye){if(ye==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(ye)}(Q),se=1;se<arguments.length;se++){for(var te in x=Object(arguments[se]))qc.call(x,te)&&(ee[te]=x[te]);if(Ll){$=Ll(x);for(var he=0;he<$.length;he++)Na.call(x,$[he])&&(ee[$[he]]=x[$[he]])}}return ee},sr="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ba={},tu=Function.call.bind(Object.prototype.hasOwnProperty);function ea(Q,P,x,$,ee){for(var se in Q)if(tu(Q,se)){var te;try{if(typeof Q[se]!="function"){var he=Error(($||"React class")+": "+x+" type `"+se+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof Q[se]+"`.");throw he.name="Invariant Violation",he}te=Q[se](P,se,$,x,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ve){te=ve}if(!te||te instanceof Error||xa(($||"React class")+": type specification of "+x+" `"+se+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof te+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),te instanceof Error&&!(te.message in Ba)){Ba[te.message]=!0;var ye=ee?ee():"";xa("Failed "+x+" type: "+te.message+(ye??""))}}}s(ea,"checkPropTypes"),xa=s(function(Q){var P="Warning: "+Q;typeof Fe<"u"&&Fe.error(P);try{throw new Error(P)}catch{}},"printWarning"),ea.resetWarningCache=function(){Ba={}};var vo,Nl=ea,Fa=Function.call.bind(Object.prototype.hasOwnProperty);function ta(){return null}s(ta,"emptyFunctionThatReturnsNull"),vo=s(function(Q){var P="Warning: "+Q;typeof Fe<"u"&&Fe.error(P);try{throw new Error(P)}catch{}},"printWarning$1");function nu(Q,P){var x=typeof Symbol=="function"&&Symbol.iterator,$="@@iterator",ee="<<anonymous>>",se={array:ve("array"),bool:ve("boolean"),func:ve("function"),number:ve("number"),object:ve("object"),string:ve("string"),symbol:ve("symbol"),any:ye(ta),arrayOf:function(Ve){return ye(function(je,ot,at,yt,wt){if(typeof Ve!="function")return new he("Property `"+wt+"` of component `"+at+"` has invalid PropType notation inside arrayOf.");var Je=je[ot];if(!Array.isArray(Je))return new he("Invalid "+yt+" `"+wt+"` of type `"+Re(Je)+"` supplied to `"+at+"`, expected an array.");for(var lt=0;lt<Je.length;lt++){var Ge=Ve(Je,lt,at,yt,wt+"["+lt+"]",sr);if(Ge instanceof Error)return Ge}return null})},element:ye(function(Ve,je,ot,at,yt){var wt=Ve[je];return Q(wt)?null:new he("Invalid "+at+" `"+yt+"` of type `"+Re(wt)+"` supplied to `"+ot+"`, expected a single ReactElement.")}),elementType:ye(function(Ve,je,ot,at,yt){var wt=Ve[je];return qs.isValidElementType(wt)?null:new he("Invalid "+at+" `"+yt+"` of type `"+Re(wt)+"` supplied to `"+ot+"`, expected a single ReactElement type.")}),instanceOf:function(Ve){return ye(function(je,ot,at,yt,wt){if(je[ot]instanceof Ve)return null;var Je=Ve.name||ee;return new he("Invalid "+yt+" `"+wt+"` of type `"+function(lt){return lt.constructor&&lt.constructor.name?lt.constructor.name:ee}(je[ot])+"` supplied to `"+at+"`, expected instance of `"+Je+"`.")})},node:ye(function(Ve,je,ot,at,yt){return Te(Ve[je])?null:new he("Invalid "+at+" `"+yt+"` supplied to `"+ot+"`, expected a ReactNode.")}),objectOf:function(Ve){return ye(function(je,ot,at,yt,wt){if(typeof Ve!="function")return new he("Property `"+wt+"` of component `"+at+"` has invalid PropType notation inside objectOf.");var Je=je[ot],lt=Re(Je);if(lt!=="object")return new he("Invalid "+yt+" `"+wt+"` of type `"+lt+"` supplied to `"+at+"`, expected an object.");for(var Ge in Je)if(Fa(Je,Ge)){var Bt=Ve(Je,Ge,at,yt,wt+"."+Ge,sr);if(Bt instanceof Error)return Bt}return null})},oneOf:function(Ve){return Array.isArray(Ve)?ye(function(je,ot,at,yt,wt){for(var Je=je[ot],lt=0;lt<Ve.length;lt++)if(te(Je,Ve[lt]))return null;var Ge=JSON.stringify(Ve,function(Bt,an){return Be(an)==="symbol"?String(an):an});return new he("Invalid "+yt+" `"+wt+"` of value `"+String(Je)+"` supplied to `"+at+"`, expected one of "+Ge+".")}):(vo(1<arguments.length?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),ta)},oneOfType:function(Ve){if(!Array.isArray(Ve))return vo("Invalid argument supplied to oneOfType, expected an instance of array."),ta;for(var je=0;je<Ve.length;je++){var ot=Ve[je];if(typeof ot!="function")return vo("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+it(ot)+" at index "+je+"."),ta}return ye(function(at,yt,wt,Je,lt){for(var Ge=0;Ge<Ve.length;Ge++)if((0,Ve[Ge])(at,yt,wt,Je,lt,sr)==null)return null;return new he("Invalid "+Je+" `"+lt+"` supplied to `"+wt+"`.")})},shape:function(Ve){return ye(function(je,ot,at,yt,wt){var Je=je[ot],lt=Re(Je);if(lt!=="object")return new he("Invalid "+yt+" `"+wt+"` of type `"+lt+"` supplied to `"+at+"`, expected `object`.");for(var Ge in Ve){var Bt=Ve[Ge];if(Bt){var an=Bt(Je,Ge,at,yt,wt+"."+Ge,sr);if(an)return an}}return null})},exact:function(Ve){return ye(function(je,ot,at,yt,wt){var Je=je[ot],lt=Re(Je);if(lt!=="object")return new he("Invalid "+yt+" `"+wt+"` of type `"+lt+"` supplied to `"+at+"`, expected `object`.");var Ge=eu({},je[ot],Ve);for(var Bt in Ge){var an=Ve[Bt];if(!an)return new he("Invalid "+yt+" `"+wt+"` key `"+Bt+"` supplied to `"+at+"`.\nBad object: "+JSON.stringify(je[ot],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(Ve),null,"  "));var Pn=an(Je,Bt,at,yt,wt+"."+Bt,sr);if(Pn)return Pn}return null})}};function te(Ve,je){return Ve===je?Ve!==0||1/Ve==1/je:Ve!=Ve&&je!=je}s(te,"is");function he(Ve){this.message=Ve,this.stack=""}s(he,"PropTypeError");function ye(Ve){var je={},ot=0;function at(wt,Je,lt,Ge,Bt,an,Pn){if(Ge=Ge||ee,an=an||lt,Pn!==sr){if(P){var Kn=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw Kn.name="Invariant Violation",Kn}if(typeof Fe<"u"){var Jn=Ge+":"+lt;!je[Jn]&&ot<3&&(vo("You are manually calling a React.PropTypes validation function for the `"+an+"` prop on `"+Ge+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),je[Jn]=!0,ot++)}}return Je[lt]==null?wt?Je[lt]===null?new he("The "+Bt+" `"+an+"` is marked as required in `"+Ge+"`, but its value is `null`."):new he("The "+Bt+" `"+an+"` is marked as required in `"+Ge+"`, but its value is `undefined`."):null:Ve(Je,lt,Ge,Bt,an)}s(at,"checkType");var yt=at.bind(null,!1);return yt.isRequired=at.bind(null,!0),yt}s(ye,"createChainableTypeChecker");function ve(Ve){return ye(function(je,ot,at,yt,wt,Je){var lt=je[ot];return Re(lt)===Ve?null:new he("Invalid "+yt+" `"+wt+"` of type `"+Be(lt)+"` supplied to `"+at+"`, expected `"+Ve+"`.")})}s(ve,"createPrimitiveTypeChecker");function Te(Ve){switch(typeof Ve){case"number":case"string":case"undefined":return!0;case"boolean":return!Ve;case"object":if(Array.isArray(Ve))return Ve.every(Te);if(Ve===null||Q(Ve))return!0;var je=function(wt){var Je=wt&&(x&&wt[x]||wt[$]);if(typeof Je=="function")return Je}(Ve);if(!je)return!1;var ot,at=je.call(Ve);if(je!==Ve.entries){for(;!(ot=at.next()).done;)if(!Te(ot.value))return!1}else for(;!(ot=at.next()).done;){var yt=ot.value;if(yt&&!Te(yt[1]))return!1}return!0;default:return!1}}s(Te,"isNode");function Re(Ve){var je=typeof Ve;return Array.isArray(Ve)?"array":Ve instanceof RegExp?"object":function(ot,at){return ot==="symbol"||!!at&&(at["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&at instanceof Symbol)}(je,Ve)?"symbol":je}s(Re,"getPropType");function Be(Ve){if(Ve==null)return""+Ve;var je=Re(Ve);if(je==="object"){if(Ve instanceof Date)return"date";if(Ve instanceof RegExp)return"regexp"}return je}s(Be,"getPreciseType");function it(Ve){var je=Be(Ve);switch(je){case"array":case"object":return"an "+je;case"boolean":case"date":case"regexp":return"a "+je;default:return je}}return s(it,"getPostfixForTypeWarning"),he.prototype=Error.prototype,se.checkPropTypes=Nl,se.resetWarningCache=Nl.resetWarningCache,se.PropTypes=se}s(nu,"factoryWithTypeCheckers");var et=Fr(function(Q){var P=qs;Q.exports=nu(P.isElement,!0)});function Va(Q){var P,x,$="";if(Q)if(typeof Q=="object")if(Q.push)for(P=0;P<Q.length;P++)Q[P]&&(x=Va(Q[P]))&&($&&($+=" "),$+=x);else for(P in Q)Q[P]&&(x=Va(P))&&($&&($+=" "),$+=x);else typeof Q=="boolean"||Q.call||($&&($+=" "),$+=Q);return $}s(Va,"toVal");function Vi(){for(var Q,P=0,x="";P<arguments.length;)(Q=Va(arguments[P++]))&&(x&&(x+=" "),x+=Q);return x}s(Vi,"clsx");function ar(Q){var P=!(0<arguments.length&&Q!==void 0)||Q,x={};return function($){var ee=$.callback,se=$.indices,te=Object.keys(se),he=!P||te.every(function(ve){var Te=se[ve];return Array.isArray(Te)?0<Te.length:0<=Te}),ye=te.length!==Object.keys(x).length||te.some(function(ve){var Te=x[ve],Re=se[ve];return Array.isArray(Re)?Te.join(",")!==Re.join(","):Te!==Re});x=se,he&&ye&&ee(se)}}s(ar,"createCallbackMemoizer");var na,iu=!(typeof W>"u"||!W.document||!W.document.createElement);function yo(Q){if((!na&&na!==0||Q)&&iu){var P=gt.createElement("div");P.style.position="absolute",P.style.top="-9999px",P.style.width="50px",P.style.height="50px",P.style.overflow="scroll",gt.body.appendChild(P),na=P.offsetWidth-P.clientWidth,gt.body.removeChild(P)}return na}s(yo,"scrollbarSize");var ru="observed",bo="requested",Vr=function(){function Q(){var P,x;jn(this,Q);for(var $=arguments.length,ee=new Array($),se=0;se<$;se++)ee[se]=arguments[se];return xe(nt(x=ai(this,(P=Zn(Q)).call.apply(P,[this].concat(ee)))),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),xe(nt(x),"_calculateSizeAndPositionDataOnNextUpdate",!1),xe(nt(x),"_onSectionRenderedMemoizer",ar()),xe(nt(x),"_onScrollMemoizer",ar(!1)),xe(nt(x),"_invokeOnSectionRenderedHelper",function(){var te=x.props,he=te.cellLayoutManager,ye=te.onSectionRendered;x._onSectionRenderedMemoizer({callback:ye,indices:{indices:he.getLastRenderedIndices()}})}),xe(nt(x),"_setScrollingContainerRef",function(te){x._scrollingContainer=te}),xe(nt(x),"_updateScrollPositionForScrollToCell",function(){var te=x.props,he=te.cellLayoutManager,ye=te.height,ve=te.scrollToAlignment,Te=te.scrollToCell,Re=te.width,Be=x.state,it=Be.scrollLeft,Ve=Be.scrollTop;if(0<=Te){var je=he.getScrollPositionForCell({align:ve,cellIndex:Te,height:ye,scrollLeft:it,scrollTop:Ve,width:Re});je.scrollLeft===it&&je.scrollTop===Ve||x._setScrollPosition(je)}}),xe(nt(x),"_onScroll",function(te){if(te.target===x._scrollingContainer){x._enablePointerEventsAfterDelay();var he=x.props,ye=he.cellLayoutManager,ve=he.height,Te=he.isScrollingChange,Re=he.width,Be=x._scrollbarSize,it=ye.getTotalSize(),Ve=it.height,je=it.width,ot=Math.max(0,Math.min(je-Re+Be,te.target.scrollLeft)),at=Math.max(0,Math.min(Ve-ve+Be,te.target.scrollTop));if(x.state.scrollLeft!==ot||x.state.scrollTop!==at){var yt=te.cancelable?ru:bo;x.state.isScrolling||Te(!0),x.setState({isScrolling:!0,scrollLeft:ot,scrollPositionChangeReason:yt,scrollTop:at})}x._invokeOnScrollMemoizer({scrollLeft:ot,scrollTop:at,totalWidth:je,totalHeight:Ve})}}),x._scrollbarSize=yo(),x._scrollbarSize===void 0?(x._scrollbarSizeMeasured=!1,x._scrollbarSize=0):x._scrollbarSizeMeasured=!0,x}return s(Q,"CollectionView"),ii(Q,Kt.PureComponent),$n(Q,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var P=this.props,x=P.cellLayoutManager,$=P.scrollLeft,ee=P.scrollToCell,se=P.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=yo(),this._scrollbarSizeMeasured=!0,this.setState({})),0<=ee?this._updateScrollPositionForScrollToCell():(0<=$||0<=se)&&this._setScrollPosition({scrollLeft:$,scrollTop:se}),this._invokeOnSectionRenderedHelper();var te=x.getTotalSize(),he=te.height,ye=te.width;this._invokeOnScrollMemoizer({scrollLeft:$||0,scrollTop:se||0,totalHeight:he,totalWidth:ye})}},{key:"componentDidUpdate",value:function(P,x){var $=this.props,ee=$.height,se=$.scrollToAlignment,te=$.scrollToCell,he=$.width,ye=this.state,ve=ye.scrollLeft,Te=ye.scrollPositionChangeReason,Re=ye.scrollTop;Te===bo&&(0<=ve&&ve!==x.scrollLeft&&ve!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=ve),0<=Re&&Re!==x.scrollTop&&Re!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=Re)),ee===P.height&&se===P.scrollToAlignment&&te===P.scrollToCell&&he===P.width||this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&Ht(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var P=this.props,x=P.autoHeight,$=P.cellCount,ee=P.cellLayoutManager,se=P.className,te=P.height,he=P.horizontalOverscanSize,ye=P.id,ve=P.noContentRenderer,Te=P.style,Re=P.verticalOverscanSize,Be=P.width,it=this.state,Ve=it.isScrolling,je=it.scrollLeft,ot=it.scrollTop;this._lastRenderedCellCount===$&&this._lastRenderedCellLayoutManager===ee&&!this._calculateSizeAndPositionDataOnNextUpdate||(this._lastRenderedCellCount=$,this._lastRenderedCellLayoutManager=ee,this._calculateSizeAndPositionDataOnNextUpdate=!1,ee.calculateSizeAndPositionData());var at=ee.getTotalSize(),yt=at.height,wt=at.width,Je=Math.max(0,je-he),lt=Math.max(0,ot-Re),Ge=Math.min(wt,je+Be+he),Bt=Math.min(yt,ot+te+Re),an=0<te&&0<Be?ee.cellRenderers({height:Bt-lt,isScrolling:Ve,width:Ge-Je,x:Je,y:lt}):[],Pn={boxSizing:"border-box",direction:"ltr",height:x?"auto":te,position:"relative",WebkitOverflowScrolling:"touch",width:Be,willChange:"transform"},Kn=te<yt?this._scrollbarSize:0,Jn=Be<wt?this._scrollbarSize:0;return Pn.overflowX=wt+Kn<=Be?"hidden":"auto",Pn.overflowY=yt+Jn<=te?"hidden":"auto",Kt.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Vi("ReactVirtualized__Collection",se),id:ye,onScroll:this._onScroll,role:"grid",style:An({},Pn,{},Te),tabIndex:0},0<$&&Kt.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:yt,maxHeight:yt,maxWidth:wt,overflow:"hidden",pointerEvents:Ve?"none":"",width:wt}},an),$===0&&ve())}},{key:"_enablePointerEventsAfterDelay",value:function(){var P=this;this._disablePointerEventsTimeoutId&&Ht(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=Kc(function(){(0,P.props.isScrollingChange)(!1),P._disablePointerEventsTimeoutId=null,P.setState({isScrolling:!1})},150)}},{key:"_invokeOnScrollMemoizer",value:function(P){var x=this,$=P.scrollLeft,ee=P.scrollTop,se=P.totalHeight,te=P.totalWidth;this._onScrollMemoizer({callback:function(he){var ye=he.scrollLeft,ve=he.scrollTop,Te=x.props,Re=Te.height;(0,Te.onScroll)({clientHeight:Re,clientWidth:Te.width,scrollHeight:se,scrollLeft:ye,scrollTop:ve,scrollWidth:te})},indices:{scrollLeft:$,scrollTop:ee}})}},{key:"_setScrollPosition",value:function(P){var x=P.scrollLeft,$=P.scrollTop,ee={scrollPositionChangeReason:bo};0<=x&&(ee.scrollLeft=x),0<=$&&(ee.scrollTop=$),(0<=x&&x!==this.state.scrollLeft||0<=$&&$!==this.state.scrollTop)&&this.setState(ee)}}],[{key:"getDerivedStateFromProps",value:function(P,x){return P.cellCount!==0||x.scrollLeft===0&&x.scrollTop===0?P.scrollLeft!==x.scrollLeft||P.scrollTop!==x.scrollTop?{scrollLeft:P.scrollLeft!=null?P.scrollLeft:x.scrollLeft,scrollTop:P.scrollTop!=null?P.scrollTop:x.scrollTop,scrollPositionChangeReason:bo}:null:{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:bo}}}]),Q}();xe(Vr,"propTypes",{"aria-label":et.string,autoHeight:et.bool,cellCount:et.number.isRequired,cellLayoutManager:et.object.isRequired,className:et.string,height:et.number.isRequired,id:et.string,horizontalOverscanSize:et.number.isRequired,isScrollingChange:et.func,noContentRenderer:et.func.isRequired,onScroll:et.func.isRequired,onSectionRendered:et.func.isRequired,scrollLeft:et.number,scrollToAlignment:et.oneOf(["auto","end","start","center"]).isRequired,scrollToCell:et.number.isRequired,scrollTop:et.number,style:et.object,verticalOverscanSize:et.number.isRequired,width:et.number.isRequired}),xe(Vr,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0}),er(Vr);var ou=function(){function Q(P){var x=P.height,$=P.width,ee=P.x,se=P.y;jn(this,Q),this.height=x,this.width=$,this.x=ee,this.y=se,this._indexMap={},this._indices=[]}return s(Q,"Section"),$n(Q,[{key:"addCellIndex",value:function(P){var x=P.index;this._indexMap[x]||(this._indexMap[x]=!0,this._indices.push(x))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),Q}(),su=function(){function Q(){var P=0<arguments.length&&arguments[0]!==void 0?arguments[0]:100;jn(this,Q),this._sectionSize=P,this._cellMetadata=[],this._sections={}}return s(Q,"SectionManager"),$n(Q,[{key:"getCellIndices",value:function(P){var x=P.height,$=P.width,ee=P.x,se=P.y,te={};return this.getSections({height:x,width:$,x:ee,y:se}).forEach(function(he){return he.getCellIndices().forEach(function(ye){te[ye]=ye})}),Object.keys(te).map(function(he){return te[he]})}},{key:"getCellMetadata",value:function(P){var x=P.index;return this._cellMetadata[x]}},{key:"getSections",value:function(P){for(var x=P.height,$=P.width,ee=P.x,se=P.y,te=Math.floor(ee/this._sectionSize),he=Math.floor((ee+$-1)/this._sectionSize),ye=Math.floor(se/this._sectionSize),ve=Math.floor((se+x-1)/this._sectionSize),Te=[],Re=te;Re<=he;Re++)for(var Be=ye;Be<=ve;Be++){var it="".concat(Re,".").concat(Be);this._sections[it]||(this._sections[it]=new ou({height:this._sectionSize,width:this._sectionSize,x:Re*this._sectionSize,y:Be*this._sectionSize})),Te.push(this._sections[it])}return Te}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var P=this;return Object.keys(this._sections).map(function(x){return P._sections[x].toString()})}},{key:"registerCell",value:function(P){var x=P.cellMetadatum,$=P.index;this._cellMetadata[$]=x,this.getSections(x).forEach(function(ee){return ee.addCellIndex({index:$})})}}]),Q}();function ia(Q){var P=Q.align,x=P===void 0?"auto":P,$=Q.cellOffset,ee=Q.cellSize,se=Q.containerSize,te=Q.currentOffset,he=$,ye=he-se+ee;switch(x){case"start":return he;case"end":return ye;case"center":return he-(se-ee)/2;default:return Math.max(ye,Math.min(he,te))}}s(ia,"getUpdatedOffsetForIndex");var C=function(){function Q(P,x){var $;return jn(this,Q),($=ai(this,Zn(Q).call(this,P,x)))._cellMetadata=[],$._lastRenderedCellIndices=[],$._cellCache=[],$._isScrollingChange=$._isScrollingChange.bind(nt($)),$._setCollectionViewRef=$._setCollectionViewRef.bind(nt($)),$}return s(Q,"Collection"),ii(Q,Kt.PureComponent),$n(Q,[{key:"forceUpdate",value:function(){this._collectionView!==void 0&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var P=bi({},this.props);return Kt.createElement(Vr,bi({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},P))}},{key:"calculateSizeAndPositionData",value:function(){var P=this.props,x=function($){for(var ee=$.cellCount,se=$.cellSizeAndPositionGetter,te=$.sectionSize,he=[],ye=new su(te),ve=0,Te=0,Re=0;Re<ee;Re++){var Be=se({index:Re});if(Be.height==null||isNaN(Be.height)||Be.width==null||isNaN(Be.width)||Be.x==null||isNaN(Be.x)||Be.y==null||isNaN(Be.y))throw Error("Invalid metadata returned for cell ".concat(Re,`:
        x:`).concat(Be.x,", y:").concat(Be.y,", width:").concat(Be.width,", height:").concat(Be.height));ve=Math.max(ve,Be.y+Be.height),Te=Math.max(Te,Be.x+Be.width),he[Re]=Be,ye.registerCell({cellMetadatum:Be,index:Re})}return{cellMetadata:he,height:ve,sectionManager:ye,width:Te}}({cellCount:P.cellCount,cellSizeAndPositionGetter:P.cellSizeAndPositionGetter,sectionSize:P.sectionSize});this._cellMetadata=x.cellMetadata,this._sectionManager=x.sectionManager,this._height=x.height,this._width=x.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(P){var x=P.align,$=P.cellIndex,ee=P.height,se=P.scrollLeft,te=P.scrollTop,he=P.width,ye=this.props.cellCount;if(0<=$&&$<ye){var ve=this._cellMetadata[$];se=ia({align:x,cellOffset:ve.x,cellSize:ve.width,containerSize:he,currentOffset:se,targetIndex:$}),te=ia({align:x,cellOffset:ve.y,cellSize:ve.height,containerSize:ee,currentOffset:te,targetIndex:$})}return{scrollLeft:se,scrollTop:te}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(P){var x=this,$=P.height,ee=P.isScrolling,se=P.width,te=P.x,he=P.y,ye=this.props,ve=ye.cellGroupRenderer,Te=ye.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:$,width:se,x:te,y:he}),ve({cellCache:this._cellCache,cellRenderer:Te,cellSizeAndPositionGetter:function(Re){var Be=Re.index;return x._sectionManager.getCellMetadata({index:Be})},indices:this._lastRenderedCellIndices,isScrolling:ee})}},{key:"_isScrollingChange",value:function(P){P||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(P){this._collectionView=P}}]),Q}();xe(C,"propTypes",{"aria-label":et.string,cellCount:et.number.isRequired,cellGroupRenderer:et.func.isRequired,cellRenderer:et.func.isRequired,cellSizeAndPositionGetter:et.func.isRequired,sectionSize:et.number}),xe(C,"defaultProps",{"aria-label":"grid",cellGroupRenderer:function(Q){var P=Q.cellCache,x=Q.cellRenderer,$=Q.cellSizeAndPositionGetter,ee=Q.indices,se=Q.isScrolling;return ee.map(function(te){var he=$({index:te}),ye={index:te,isScrolling:se,key:te,style:{height:he.height,left:he.x,position:"absolute",top:he.y,width:he.width}};return se?(te in P||(P[te]=x(ye)),P[te]):x(ye)}).filter(function(te){return!!te})}});var v=function(){function Q(P,x){var $;return jn(this,Q),($=ai(this,Zn(Q).call(this,P,x)))._registerChild=$._registerChild.bind(nt($)),$}return s(Q,"ColumnSizer"),ii(Q,Kt.PureComponent),$n(Q,[{key:"componentDidUpdate",value:function(P){var x=this.props,$=x.columnMaxWidth,ee=x.columnMinWidth,se=x.columnCount,te=x.width;$===P.columnMaxWidth&&ee===P.columnMinWidth&&se===P.columnCount&&te===P.width||this._registeredChild&&this._registeredChild.recomputeGridSize()}},{key:"render",value:function(){var P=this.props,x=P.children,$=P.columnMaxWidth,ee=P.columnMinWidth,se=P.columnCount,te=P.width,he=ee||1,ye=$?Math.min($,te):te,ve=te/se;return ve=Math.max(he,ve),ve=Math.min(ye,ve),ve=Math.floor(ve),x({adjustedWidth:Math.min(te,ve*se),columnWidth:ve,getColumnWidth:function(){return ve},registerChild:this._registerChild})}},{key:"_registerChild",value:function(P){if(P&&typeof P.recomputeGridSize!="function")throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=P,this._registeredChild&&this._registeredChild.recomputeGridSize()}}]),Q}();function b(Q){var P=Q.cellCount,x=Q.cellSize,$=Q.computeMetadataCallback,ee=Q.computeMetadataCallbackProps,se=Q.nextCellsCount,te=Q.nextCellSize,he=Q.nextScrollToIndex,ye=Q.scrollToIndex,ve=Q.updateScrollOffsetForScrollToIndex;P===se&&(typeof x!="number"&&typeof te!="number"||x===te)||($(ee),0<=ye&&ye===he&&ve())}s(b,"calculateSizeAndPositionDataAndUpdateScrollOffset"),xe(v,"propTypes",{children:et.func.isRequired,columnMaxWidth:et.number,columnMinWidth:et.number,columnCount:et.number.isRequired,width:et.number.isRequired});var _,F=function(){function Q(P){var x=P.cellCount,$=P.cellSizeGetter,ee=P.estimatedCellSize;jn(this,Q),xe(this,"_cellSizeAndPositionData",{}),xe(this,"_lastMeasuredIndex",-1),xe(this,"_lastBatchedIndex",-1),xe(this,"_cellCount",void 0),xe(this,"_cellSizeGetter",void 0),xe(this,"_estimatedCellSize",void 0),this._cellSizeGetter=$,this._cellCount=x,this._estimatedCellSize=ee}return s(Q,"CellSizeAndPositionManager"),$n(Q,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(P){var x=P.cellCount,$=P.estimatedCellSize,ee=P.cellSizeGetter;this._cellCount=x,this._estimatedCellSize=$,this._cellSizeGetter=ee}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(P){if(P<0||P>=this._cellCount)throw Error("Requested index ".concat(P," is outside of range 0..").concat(this._cellCount));if(P>this._lastMeasuredIndex)for(var x=this.getSizeAndPositionOfLastMeasuredCell(),$=x.offset+x.size,ee=this._lastMeasuredIndex+1;ee<=P;ee++){var se=this._cellSizeGetter({index:ee});if(se===void 0||isNaN(se))throw Error("Invalid size returned for cell ".concat(ee," of value ").concat(se));se===null?(this._cellSizeAndPositionData[ee]={offset:$,size:0},this._lastBatchedIndex=P):(this._cellSizeAndPositionData[ee]={offset:$,size:se},$+=se,this._lastMeasuredIndex=P)}return this._cellSizeAndPositionData[P]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return 0<=this._lastMeasuredIndex?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var P=this.getSizeAndPositionOfLastMeasuredCell();return P.offset+P.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(P){var x=P.align,$=x===void 0?"auto":x,ee=P.containerSize,se=P.currentOffset,te=P.targetIndex;if(ee<=0)return 0;var he,ye=this.getSizeAndPositionOfCell(te),ve=ye.offset,Te=ve-ee+ye.size;switch($){case"start":he=ve;break;case"end":he=Te;break;case"center":he=ve-(ee-ye.size)/2;break;default:he=Math.max(Te,Math.min(ve,se))}var Re=this.getTotalSize();return Math.max(0,Math.min(Re-ee,he))}},{key:"getVisibleCellRange",value:function(P){var x=P.containerSize,$=P.offset;if(this.getTotalSize()===0)return{};var ee=$+x,se=this._findNearestCell($),te=this.getSizeAndPositionOfCell(se);$=te.offset+te.size;for(var he=se;$<ee&&he<this._cellCount-1;)he++,$+=this.getSizeAndPositionOfCell(he).size;return{start:se,stop:he}}},{key:"resetCell",value:function(P){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,P-1)}},{key:"_binarySearch",value:function(P,x,$){for(;x<=P;){var ee=x+Math.floor((P-x)/2),se=this.getSizeAndPositionOfCell(ee).offset;if(se===$)return ee;se<$?x=ee+1:$<se&&(P=ee-1)}return 0<x?x-1:0}},{key:"_exponentialSearch",value:function(P,x){for(var $=1;P<this._cellCount&&this.getSizeAndPositionOfCell(P).offset<x;)P+=$,$*=2;return this._binarySearch(Math.min(P,this._cellCount-1),Math.floor(P/2),x)}},{key:"_findNearestCell",value:function(P){if(isNaN(P))throw Error("Invalid offset ".concat(P," specified"));P=Math.max(0,P);var x=this.getSizeAndPositionOfLastMeasuredCell(),$=Math.max(0,this._lastMeasuredIndex);return x.offset>=P?this._binarySearch($,0,P):this._exponentialSearch($,P)}}]),Q}(),V=s(function(){return typeof W<"u"&&W.chrome?16777100:15e5},"getMaxElementSize"),j=function(){function Q(P){var x=P.maxScrollSize,$=x===void 0?V():x,ee=qi(P,["maxScrollSize"]);jn(this,Q),xe(this,"_cellSizeAndPositionManager",void 0),xe(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new F(ee),this._maxScrollSize=$}return s(Q,"ScalingCellSizeAndPositionManager"),$n(Q,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(P){this._cellSizeAndPositionManager.configure(P)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(P){var x=P.containerSize,$=P.offset,ee=this._cellSizeAndPositionManager.getTotalSize(),se=this.getTotalSize(),te=this._getOffsetPercentage({containerSize:x,offset:$,totalSize:se});return Math.round(te*(se-ee))}},{key:"getSizeAndPositionOfCell",value:function(P){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(P)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(P){var x=P.align,$=x===void 0?"auto":x,ee=P.containerSize,se=P.currentOffset,te=P.targetIndex;se=this._safeOffsetToOffset({containerSize:ee,offset:se});var he=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:$,containerSize:ee,currentOffset:se,targetIndex:te});return this._offsetToSafeOffset({containerSize:ee,offset:he})}},{key:"getVisibleCellRange",value:function(P){var x=P.containerSize,$=P.offset;return $=this._safeOffsetToOffset({containerSize:x,offset:$}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:x,offset:$})}},{key:"resetCell",value:function(P){this._cellSizeAndPositionManager.resetCell(P)}},{key:"_getOffsetPercentage",value:function(P){var x=P.containerSize,$=P.offset,ee=P.totalSize;return ee<=x?0:$/(ee-x)}},{key:"_offsetToSafeOffset",value:function(P){var x=P.containerSize,$=P.offset,ee=this._cellSizeAndPositionManager.getTotalSize(),se=this.getTotalSize();if(ee===se)return $;var te=this._getOffsetPercentage({containerSize:x,offset:$,totalSize:ee});return Math.round(te*(se-x))}},{key:"_safeOffsetToOffset",value:function(P){var x=P.containerSize,$=P.offset,ee=this._cellSizeAndPositionManager.getTotalSize(),se=this.getTotalSize();if(ee===se)return $;var te=this._getOffsetPercentage({containerSize:x,offset:$,totalSize:se});return Math.round(te*(ee-x))}}]),Q}();function ie(Q){var P=Q.cellCount,x=Q.overscanCellsCount,$=Q.scrollDirection,ee=Q.startIndex,se=Q.stopIndex;return $===1?{overscanStartIndex:Math.max(0,ee),overscanStopIndex:Math.min(P-1,se+x)}:{overscanStartIndex:Math.max(0,ee-x),overscanStopIndex:Math.min(P-1,se)}}s(ie,"defaultOverscanIndicesGetter");function Z(Q){var P=Q.cellSize,x=Q.cellSizeAndPositionManager,$=Q.previousCellsCount,ee=Q.previousCellSize,se=Q.previousScrollToAlignment,te=Q.previousScrollToIndex,he=Q.previousSize,ye=Q.scrollOffset,ve=Q.scrollToAlignment,Te=Q.scrollToIndex,Re=Q.size,Be=Q.sizeJustIncreasedFromZero,it=Q.updateScrollIndexCallback,Ve=x.getCellCount(),je=0<=Te&&Te<Ve;je&&(Re!==he||Be||!ee||typeof P=="number"&&P!==ee||ve!==se||Te!==te)?it(Te):!je&&0<Ve&&(Re<he||Ve<$)&&ye>x.getTotalSize()-Re&&it(Ve-1)}s(Z,"updateScrollIndexHelper");function le(Q){for(var P=Q.cellCache,x=Q.cellRenderer,$=Q.columnSizeAndPositionManager,ee=Q.columnStartIndex,se=Q.columnStopIndex,te=Q.deferredMeasurementCache,he=Q.horizontalOffsetAdjustment,ye=Q.isScrolling,ve=Q.isScrollingOptOut,Te=Q.parent,Re=Q.rowSizeAndPositionManager,Be=Q.rowStartIndex,it=Q.rowStopIndex,Ve=Q.styleCache,je=Q.verticalOffsetAdjustment,ot=Q.visibleColumnIndices,at=Q.visibleRowIndices,yt=[],wt=$.areOffsetsAdjusted()||Re.areOffsetsAdjusted(),Je=!ye&&!wt,lt=Be;lt<=it;lt++)for(var Ge=Re.getSizeAndPositionOfCell(lt),Bt=ee;Bt<=se;Bt++){var an=$.getSizeAndPositionOfCell(Bt),Pn=Bt>=ot.start&&Bt<=ot.stop&&lt>=at.start&&lt<=at.stop,Kn="".concat(lt,"-").concat(Bt),Jn=void 0;Je&&Ve[Kn]?Jn=Ve[Kn]:te&&!te.has(lt,Bt)?Jn={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(Jn={height:Ge.size,left:an.offset+he,position:"absolute",top:Ge.offset+je,width:an.size},Ve[Kn]=Jn);var Yn={columnIndex:Bt,isScrolling:ye,isVisible:Pn,key:Kn,parent:Te,rowIndex:lt,style:Jn},Oi=void 0;(Oi=!ve&&!ye||he||je?x(Yn):(P[Kn]||(P[Kn]=x(Yn)),P[Kn]))!=null&&Oi!==!1&&(ne(Te,Oi),yt.push(Oi))}return yt}s(le,"defaultCellRangeRenderer");function ne(Q,P){P&&(P.type&&P.type.__internalCellMeasurerFlag&&(P=P.props.children),P&&P.props&&P.props.style===void 0&&Q.__warnedAboutMissingStyle!==!0&&(Q.__warnedAboutMissingStyle=!0,Fe.warn("Rendered cell should include style property for positioning.")))}s(ne,"warnAboutMissingStyle");var Xe=(_=typeof W<"u"?W:typeof As<"u"?As:{}).requestAnimationFrame||_.webkitRequestAnimationFrame||_.mozRequestAnimationFrame||_.oRequestAnimationFrame||_.msRequestAnimationFrame||function(Q){return _.setTimeout(Q,1e3/60)},bt=_.cancelAnimationFrame||_.webkitCancelAnimationFrame||_.mozCancelAnimationFrame||_.oCancelAnimationFrame||_.msCancelAnimationFrame||function(Q){_.clearTimeout(Q)},Lt=Xe,Nt=bt,Ct=s(function(Q){return Nt(Q.id)},"cancelAnimationTimeout"),Wt=s(function(Q,P){var x;Promise.resolve().then(function(){x=Date.now()});var $={id:Lt(s(function ee(){Date.now()-x>=P?Q.call():$.id=Lt(ee)},"timeout"))};return $},"requestAnimationTimeout"),ri="observed",xl="requested",tr=function(){function Q(P){var x;jn(this,Q),xe(nt(x=ai(this,Zn(Q).call(this,P))),"_onGridRenderedMemoizer",ar()),xe(nt(x),"_onScrollMemoizer",ar(!1)),xe(nt(x),"_deferredInvalidateColumnIndex",null),xe(nt(x),"_deferredInvalidateRowIndex",null),xe(nt(x),"_recomputeScrollLeftFlag",!1),xe(nt(x),"_recomputeScrollTopFlag",!1),xe(nt(x),"_horizontalScrollBarSize",0),xe(nt(x),"_verticalScrollBarSize",0),xe(nt(x),"_scrollbarPresenceChanged",!1),xe(nt(x),"_scrollingContainer",void 0),xe(nt(x),"_childrenToDisplay",void 0),xe(nt(x),"_columnStartIndex",void 0),xe(nt(x),"_columnStopIndex",void 0),xe(nt(x),"_rowStartIndex",void 0),xe(nt(x),"_rowStopIndex",void 0),xe(nt(x),"_renderedColumnStartIndex",0),xe(nt(x),"_renderedColumnStopIndex",0),xe(nt(x),"_renderedRowStartIndex",0),xe(nt(x),"_renderedRowStopIndex",0),xe(nt(x),"_initialScrollTop",void 0),xe(nt(x),"_initialScrollLeft",void 0),xe(nt(x),"_disablePointerEventsTimeoutId",void 0),xe(nt(x),"_styleCache",{}),xe(nt(x),"_cellCache",{}),xe(nt(x),"_debounceScrollEndedCallback",function(){x._disablePointerEventsTimeoutId=null,x.setState({isScrolling:!1,needToResetStyleCache:!1})}),xe(nt(x),"_invokeOnGridRenderedHelper",function(){var se=x.props.onSectionRendered;x._onGridRenderedMemoizer({callback:se,indices:{columnOverscanStartIndex:x._columnStartIndex,columnOverscanStopIndex:x._columnStopIndex,columnStartIndex:x._renderedColumnStartIndex,columnStopIndex:x._renderedColumnStopIndex,rowOverscanStartIndex:x._rowStartIndex,rowOverscanStopIndex:x._rowStopIndex,rowStartIndex:x._renderedRowStartIndex,rowStopIndex:x._renderedRowStopIndex}})}),xe(nt(x),"_setScrollingContainerRef",function(se){x._scrollingContainer=se}),xe(nt(x),"_onScroll",function(se){se.target===x._scrollingContainer&&x.handleScrollEvent(se.target)});var $=new j({cellCount:P.columnCount,cellSizeGetter:function(se){return Q._wrapSizeGetter(P.columnWidth)(se)},estimatedCellSize:Q._getEstimatedColumnSize(P)}),ee=new j({cellCount:P.rowCount,cellSizeGetter:function(se){return Q._wrapSizeGetter(P.rowHeight)(se)},estimatedCellSize:Q._getEstimatedRowSize(P)});return x.state={instanceProps:{columnSizeAndPositionManager:$,rowSizeAndPositionManager:ee,prevColumnWidth:P.columnWidth,prevRowHeight:P.rowHeight,prevColumnCount:P.columnCount,prevRowCount:P.rowCount,prevIsScrolling:P.isScrolling===!0,prevScrollToColumn:P.scrollToColumn,prevScrollToRow:P.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},0<P.scrollToRow&&(x._initialScrollTop=x._getCalculatedScrollTop(P,x.state)),0<P.scrollToColumn&&(x._initialScrollLeft=x._getCalculatedScrollLeft(P,x.state)),x}return s(Q,"Grid"),ii(Q,Kt.PureComponent),$n(Q,[{key:"getOffsetForCell",value:function(P){var x=0<arguments.length&&P!==void 0?P:{},$=x.alignment,ee=$===void 0?this.props.scrollToAlignment:$,se=x.columnIndex,te=se===void 0?this.props.scrollToColumn:se,he=x.rowIndex,ye=he===void 0?this.props.scrollToRow:he,ve=An({},this.props,{scrollToAlignment:ee,scrollToColumn:te,scrollToRow:ye});return{scrollLeft:this._getCalculatedScrollLeft(ve),scrollTop:this._getCalculatedScrollTop(ve)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(P){var x=P.scrollLeft,$=x===void 0?0:x,ee=P.scrollTop,se=ee===void 0?0:ee;if(!(se<0)){this._debounceScrollEnded();var te=this.props,he=te.autoHeight,ye=te.autoWidth,ve=te.height,Te=te.width,Re=this.state.instanceProps,Be=Re.scrollbarSize,it=Re.rowSizeAndPositionManager.getTotalSize(),Ve=Re.columnSizeAndPositionManager.getTotalSize(),je=Math.min(Math.max(0,Ve-Te+Be),$),ot=Math.min(Math.max(0,it-ve+Be),se);if(this.state.scrollLeft!==je||this.state.scrollTop!==ot){var at={isScrolling:!0,scrollDirectionHorizontal:je!==this.state.scrollLeft?je>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:ot!==this.state.scrollTop?ot>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:ri};he||(at.scrollTop=ot),ye||(at.scrollLeft=je),at.needToResetStyleCache=!1,this.setState(at)}this._invokeOnScrollMemoizer({scrollLeft:je,scrollTop:ot,totalColumnsWidth:Ve,totalRowsHeight:it})}}},{key:"invalidateCellSizeAfterRender",value:function(P){var x=P.columnIndex,$=P.rowIndex;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,x):x,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,$):$}},{key:"measureAllCells",value:function(){var P=this.props,x=P.columnCount,$=P.rowCount,ee=this.state.instanceProps;ee.columnSizeAndPositionManager.getSizeAndPositionOfCell(x-1),ee.rowSizeAndPositionManager.getSizeAndPositionOfCell($-1)}},{key:"recomputeGridSize",value:function(P){var x=0<arguments.length&&P!==void 0?P:{},$=x.columnIndex,ee=$===void 0?0:$,se=x.rowIndex,te=se===void 0?0:se,he=this.props,ye=he.scrollToColumn,ve=he.scrollToRow,Te=this.state.instanceProps;Te.columnSizeAndPositionManager.resetCell(ee),Te.rowSizeAndPositionManager.resetCell(te),this._recomputeScrollLeftFlag=0<=ye&&(this.state.scrollDirectionHorizontal===1?ee<=ye:ye<=ee),this._recomputeScrollTopFlag=0<=ve&&(this.state.scrollDirectionVertical===1?te<=ve:ve<=te),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(P){var x=P.columnIndex,$=P.rowIndex,ee=this.props.columnCount,se=this.props;1<ee&&x!==void 0&&this._updateScrollLeftForScrollToColumn(An({},se,{scrollToColumn:x})),$!==void 0&&this._updateScrollTopForScrollToRow(An({},se,{scrollToRow:$}))}},{key:"componentDidMount",value:function(){var P=this.props,x=P.getScrollbarSize,$=P.height,ee=P.scrollLeft,se=P.scrollToColumn,te=P.scrollTop,he=P.scrollToRow,ye=P.width,ve=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),ve.scrollbarSizeMeasured||this.setState(function(Be){var it=An({},Be,{needToResetStyleCache:!1});return it.instanceProps.scrollbarSize=x(),it.instanceProps.scrollbarSizeMeasured=!0,it}),typeof ee=="number"&&0<=ee||typeof te=="number"&&0<=te){var Te=Q._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:ee,scrollTop:te});Te&&(Te.needToResetStyleCache=!1,this.setState(Te))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var Re=0<$&&0<ye;0<=se&&Re&&this._updateScrollLeftForScrollToColumn(),0<=he&&Re&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:ee||0,scrollTop:te||0,totalColumnsWidth:ve.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:ve.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(P,x){var $=this,ee=this.props,se=ee.autoHeight,te=ee.autoWidth,he=ee.columnCount,ye=ee.height,ve=ee.rowCount,Te=ee.scrollToAlignment,Re=ee.scrollToColumn,Be=ee.scrollToRow,it=ee.width,Ve=this.state,je=Ve.scrollLeft,ot=Ve.scrollPositionChangeReason,at=Ve.scrollTop,yt=Ve.instanceProps;this._handleInvalidatedGridSize();var wt=0<he&&P.columnCount===0||0<ve&&P.rowCount===0;ot===xl&&(!te&&0<=je&&(je!==this._scrollingContainer.scrollLeft||wt)&&(this._scrollingContainer.scrollLeft=je),!se&&0<=at&&(at!==this._scrollingContainer.scrollTop||wt)&&(this._scrollingContainer.scrollTop=at));var Je=(P.width===0||P.height===0)&&0<ye&&0<it;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):Z({cellSizeAndPositionManager:yt.columnSizeAndPositionManager,previousCellsCount:P.columnCount,previousCellSize:P.columnWidth,previousScrollToAlignment:P.scrollToAlignment,previousScrollToIndex:P.scrollToColumn,previousSize:P.width,scrollOffset:je,scrollToAlignment:Te,scrollToIndex:Re,size:it,sizeJustIncreasedFromZero:Je,updateScrollIndexCallback:function(){return $._updateScrollLeftForScrollToColumn($.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):Z({cellSizeAndPositionManager:yt.rowSizeAndPositionManager,previousCellsCount:P.rowCount,previousCellSize:P.rowHeight,previousScrollToAlignment:P.scrollToAlignment,previousScrollToIndex:P.scrollToRow,previousSize:P.height,scrollOffset:at,scrollToAlignment:Te,scrollToIndex:Be,size:ye,sizeJustIncreasedFromZero:Je,updateScrollIndexCallback:function(){return $._updateScrollTopForScrollToRow($.props)}}),this._invokeOnGridRenderedHelper(),je!==x.scrollLeft||at!==x.scrollTop){var lt=yt.rowSizeAndPositionManager.getTotalSize(),Ge=yt.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:je,scrollTop:at,totalColumnsWidth:Ge,totalRowsHeight:lt})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&Ct(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var P=this.props,x=P.autoContainerWidth,$=P.autoHeight,ee=P.autoWidth,se=P.className,te=P.containerProps,he=P.containerRole,ye=P.containerStyle,ve=P.height,Te=P.id,Re=P.noContentRenderer,Be=P.role,it=P.style,Ve=P.tabIndex,je=P.width,ot=this.state,at=ot.instanceProps,yt=ot.needToResetStyleCache,wt=this._isScrolling(),Je={boxSizing:"border-box",direction:"ltr",height:$?"auto":ve,position:"relative",width:ee?"auto":je,WebkitOverflowScrolling:"touch",willChange:"transform"};yt&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var lt=at.columnSizeAndPositionManager.getTotalSize(),Ge=at.rowSizeAndPositionManager.getTotalSize(),Bt=ve<Ge?at.scrollbarSize:0,an=je<lt?at.scrollbarSize:0;an===this._horizontalScrollBarSize&&Bt===this._verticalScrollBarSize||(this._horizontalScrollBarSize=an,this._verticalScrollBarSize=Bt,this._scrollbarPresenceChanged=!0),Je.overflowX=lt+Bt<=je?"hidden":"auto",Je.overflowY=Ge+an<=ve?"hidden":"auto";var Pn=this._childrenToDisplay,Kn=Pn.length===0&&0<ve&&0<je;return Kt.createElement("div",bi({ref:this._setScrollingContainerRef},te,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:Vi("ReactVirtualized__Grid",se),id:Te,onScroll:this._onScroll,role:Be,style:An({},Je,{},it),tabIndex:Ve}),0<Pn.length&&Kt.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:he,style:An({width:x?"auto":lt,height:Ge,maxWidth:lt,maxHeight:Ge,overflow:"hidden",pointerEvents:wt?"none":"",position:"relative"},ye)},Pn),Kn&&Re())}},{key:"_calculateChildrenToRender",value:function(P,x){var $=0<arguments.length&&P!==void 0?P:this.props,ee=1<arguments.length&&x!==void 0?x:this.state,se=$.cellRenderer,te=$.cellRangeRenderer,he=$.columnCount,ye=$.deferredMeasurementCache,ve=$.height,Te=$.overscanColumnCount,Re=$.overscanIndicesGetter,Be=$.overscanRowCount,it=$.rowCount,Ve=$.width,je=$.isScrollingOptOut,ot=ee.scrollDirectionHorizontal,at=ee.scrollDirectionVertical,yt=ee.instanceProps,wt=0<this._initialScrollTop?this._initialScrollTop:ee.scrollTop,Je=0<this._initialScrollLeft?this._initialScrollLeft:ee.scrollLeft,lt=this._isScrolling($,ee);if(this._childrenToDisplay=[],0<ve&&0<Ve){var Ge=yt.columnSizeAndPositionManager.getVisibleCellRange({containerSize:Ve,offset:Je}),Bt=yt.rowSizeAndPositionManager.getVisibleCellRange({containerSize:ve,offset:wt}),an=yt.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:Ve,offset:Je}),Pn=yt.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:ve,offset:wt});this._renderedColumnStartIndex=Ge.start,this._renderedColumnStopIndex=Ge.stop,this._renderedRowStartIndex=Bt.start,this._renderedRowStopIndex=Bt.stop;var Kn=Re({direction:"horizontal",cellCount:he,overscanCellsCount:Te,scrollDirection:ot,startIndex:typeof Ge.start=="number"?Ge.start:0,stopIndex:typeof Ge.stop=="number"?Ge.stop:-1}),Jn=Re({direction:"vertical",cellCount:it,overscanCellsCount:Be,scrollDirection:at,startIndex:typeof Bt.start=="number"?Bt.start:0,stopIndex:typeof Bt.stop=="number"?Bt.stop:-1}),Yn=Kn.overscanStartIndex,Oi=Kn.overscanStopIndex,ki=Jn.overscanStartIndex,Ui=Jn.overscanStopIndex;if(ye){if(!ye.hasFixedHeight()){for(var ja=ki;ja<=Ui;ja++)if(!ye.has(ja,0)){Yn=0,Oi=he-1;break}}if(!ye.hasFixedWidth()){for(var $a=Yn;$a<=Oi;$a++)if(!ye.has(0,$a)){ki=0,Ui=it-1;break}}}this._childrenToDisplay=te({cellCache:this._cellCache,cellRenderer:se,columnSizeAndPositionManager:yt.columnSizeAndPositionManager,columnStartIndex:Yn,columnStopIndex:Oi,deferredMeasurementCache:ye,horizontalOffsetAdjustment:an,isScrolling:lt,isScrollingOptOut:je,parent:this,rowSizeAndPositionManager:yt.rowSizeAndPositionManager,rowStartIndex:ki,rowStopIndex:Ui,scrollLeft:Je,scrollTop:wt,styleCache:this._styleCache,verticalOffsetAdjustment:Pn,visibleColumnIndices:Ge,visibleRowIndices:Bt}),this._columnStartIndex=Yn,this._columnStopIndex=Oi,this._rowStartIndex=ki,this._rowStopIndex=Ui}}},{key:"_debounceScrollEnded",value:function(){var P=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&Ct(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=Wt(this._debounceScrollEndedCallback,P)}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"&&typeof this._deferredInvalidateRowIndex=="number"){var P=this._deferredInvalidateColumnIndex,x=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:P,rowIndex:x})}}},{key:"_invokeOnScrollMemoizer",value:function(P){var x=this,$=P.scrollLeft,ee=P.scrollTop,se=P.totalColumnsWidth,te=P.totalRowsHeight;this._onScrollMemoizer({callback:function(he){var ye=he.scrollLeft,ve=he.scrollTop,Te=x.props,Re=Te.height;(0,Te.onScroll)({clientHeight:Re,clientWidth:Te.width,scrollHeight:te,scrollLeft:ye,scrollTop:ve,scrollWidth:se})},indices:{scrollLeft:$,scrollTop:ee}})}},{key:"_isScrolling",value:function(P,x){var $=0<arguments.length&&P!==void 0?P:this.props,ee=1<arguments.length&&x!==void 0?x:this.state;return Object.hasOwnProperty.call($,"isScrolling")?Boolean($.isScrolling):Boolean(ee.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var P=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,P({horizontal:0<this._horizontalScrollBarSize,size:this.state.instanceProps.scrollbarSize,vertical:0<this._verticalScrollBarSize})}}},{key:"scrollToPosition",value:function(P){var x=P.scrollLeft,$=P.scrollTop,ee=Q._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:x,scrollTop:$});ee&&(ee.needToResetStyleCache=!1,this.setState(ee))}},{key:"_getCalculatedScrollLeft",value:function(P,x){var $=0<arguments.length&&P!==void 0?P:this.props,ee=1<arguments.length&&x!==void 0?x:this.state;return Q._getCalculatedScrollLeft($,ee)}},{key:"_updateScrollLeftForScrollToColumn",value:function(P,x){var $=0<arguments.length&&P!==void 0?P:this.props,ee=1<arguments.length&&x!==void 0?x:this.state,se=Q._getScrollLeftForScrollToColumnStateUpdate($,ee);se&&(se.needToResetStyleCache=!1,this.setState(se))}},{key:"_getCalculatedScrollTop",value:function(P,x){var $=0<arguments.length&&P!==void 0?P:this.props,ee=1<arguments.length&&x!==void 0?x:this.state;return Q._getCalculatedScrollTop($,ee)}},{key:"_resetStyleCache",value:function(){var P=this._styleCache,x=this._cellCache,$=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var ee=this._rowStartIndex;ee<=this._rowStopIndex;ee++)for(var se=this._columnStartIndex;se<=this._columnStopIndex;se++){var te="".concat(ee,"-").concat(se);this._styleCache[te]=P[te],$&&(this._cellCache[te]=x[te])}}},{key:"_updateScrollTopForScrollToRow",value:function(P,x){var $=0<arguments.length&&P!==void 0?P:this.props,ee=1<arguments.length&&x!==void 0?x:this.state,se=Q._getScrollTopForScrollToRowStateUpdate($,ee);se&&(se.needToResetStyleCache=!1,this.setState(se))}}],[{key:"getDerivedStateFromProps",value:function(P,x){var $={};P.columnCount===0&&x.scrollLeft!==0||P.rowCount===0&&x.scrollTop!==0?($.scrollLeft=0,$.scrollTop=0):(P.scrollLeft!==x.scrollLeft&&P.scrollToColumn<0||P.scrollTop!==x.scrollTop&&P.scrollToRow<0)&&Object.assign($,Q._getScrollToPositionStateUpdate({prevState:x,scrollLeft:P.scrollLeft,scrollTop:P.scrollTop}));var ee,se,te=x.instanceProps;return $.needToResetStyleCache=!1,P.columnWidth===te.prevColumnWidth&&P.rowHeight===te.prevRowHeight||($.needToResetStyleCache=!0),te.columnSizeAndPositionManager.configure({cellCount:P.columnCount,estimatedCellSize:Q._getEstimatedColumnSize(P),cellSizeGetter:Q._wrapSizeGetter(P.columnWidth)}),te.rowSizeAndPositionManager.configure({cellCount:P.rowCount,estimatedCellSize:Q._getEstimatedRowSize(P),cellSizeGetter:Q._wrapSizeGetter(P.rowHeight)}),te.prevColumnCount!==0&&te.prevRowCount!==0||(te.prevColumnCount=0,te.prevRowCount=0),P.autoHeight&&P.isScrolling===!1&&te.prevIsScrolling===!0&&Object.assign($,{isScrolling:!1}),b({cellCount:te.prevColumnCount,cellSize:typeof te.prevColumnWidth=="number"?te.prevColumnWidth:null,computeMetadataCallback:function(){return te.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:P,nextCellsCount:P.columnCount,nextCellSize:typeof P.columnWidth=="number"?P.columnWidth:null,nextScrollToIndex:P.scrollToColumn,scrollToIndex:te.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){ee=Q._getScrollLeftForScrollToColumnStateUpdate(P,x)}}),b({cellCount:te.prevRowCount,cellSize:typeof te.prevRowHeight=="number"?te.prevRowHeight:null,computeMetadataCallback:function(){return te.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:P,nextCellsCount:P.rowCount,nextCellSize:typeof P.rowHeight=="number"?P.rowHeight:null,nextScrollToIndex:P.scrollToRow,scrollToIndex:te.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){se=Q._getScrollTopForScrollToRowStateUpdate(P,x)}}),te.prevColumnCount=P.columnCount,te.prevColumnWidth=P.columnWidth,te.prevIsScrolling=P.isScrolling===!0,te.prevRowCount=P.rowCount,te.prevRowHeight=P.rowHeight,te.prevScrollToColumn=P.scrollToColumn,te.prevScrollToRow=P.scrollToRow,te.scrollbarSize=P.getScrollbarSize(),te.scrollbarSize===void 0?(te.scrollbarSizeMeasured=!1,te.scrollbarSize=0):te.scrollbarSizeMeasured=!0,$.instanceProps=te,An({},$,{},ee,{},se)}},{key:"_getEstimatedColumnSize",value:function(P){return typeof P.columnWidth=="number"?P.columnWidth:P.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(P){return typeof P.rowHeight=="number"?P.rowHeight:P.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(P){var x=P.prevState,$=P.scrollLeft,ee=P.scrollTop,se={scrollPositionChangeReason:xl};return typeof $=="number"&&0<=$&&(se.scrollDirectionHorizontal=$>x.scrollLeft?1:-1,se.scrollLeft=$),typeof ee=="number"&&0<=ee&&(se.scrollDirectionVertical=ee>x.scrollTop?1:-1,se.scrollTop=ee),typeof $=="number"&&0<=$&&$!==x.scrollLeft||typeof ee=="number"&&0<=ee&&ee!==x.scrollTop?se:{}}},{key:"_wrapSizeGetter",value:function(P){return typeof P=="function"?P:function(){return P}}},{key:"_getCalculatedScrollLeft",value:function(P,x){var $=P.columnCount,ee=P.height,se=P.scrollToAlignment,te=P.scrollToColumn,he=P.width,ye=x.scrollLeft,ve=x.instanceProps;if(0<$){var Te=$-1,Re=te<0?Te:Math.min(Te,te),Be=ve.rowSizeAndPositionManager.getTotalSize(),it=ve.scrollbarSizeMeasured&&ee<Be?ve.scrollbarSize:0;return ve.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:se,containerSize:he-it,currentOffset:ye,targetIndex:Re})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(P,x){var $=x.scrollLeft,ee=Q._getCalculatedScrollLeft(P,x);return typeof ee=="number"&&0<=ee&&$!==ee?Q._getScrollToPositionStateUpdate({prevState:x,scrollLeft:ee,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(P,x){var $=P.height,ee=P.rowCount,se=P.scrollToAlignment,te=P.scrollToRow,he=P.width,ye=x.scrollTop,ve=x.instanceProps;if(0<ee){var Te=ee-1,Re=te<0?Te:Math.min(Te,te),Be=ve.columnSizeAndPositionManager.getTotalSize(),it=ve.scrollbarSizeMeasured&&he<Be?ve.scrollbarSize:0;return ve.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:se,containerSize:$-it,currentOffset:ye,targetIndex:Re})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(P,x){var $=x.scrollTop,ee=Q._getCalculatedScrollTop(P,x);return typeof ee=="number"&&0<=ee&&$!==ee?Q._getScrollToPositionStateUpdate({prevState:x,scrollLeft:-1,scrollTop:ee}):{}}}]),Q}();xe(tr,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:le,containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:yo,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:ie,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),er(tr);function Ua(Q){var P=Q.cellCount,x=Q.overscanCellsCount,$=Q.scrollDirection,ee=Q.startIndex,se=Q.stopIndex;return x=Math.max(1,x),$===1?{overscanStartIndex:Math.max(0,ee-1),overscanStopIndex:Math.min(P-1,se+x)}:{overscanStartIndex:Math.max(0,ee-x),overscanStopIndex:Math.min(P-1,se+1)}}s(Ua,"defaultOverscanIndicesGetter$1");var au=function(){function Q(P,x){var $;return jn(this,Q),($=ai(this,Zn(Q).call(this,P,x)))._loadMoreRowsMemoizer=ar(),$._onRowsRendered=$._onRowsRendered.bind(nt($)),$._registerChild=$._registerChild.bind(nt($)),$}return s(Q,"InfiniteLoader"),ii(Q,Kt.PureComponent),$n(Q,[{key:"resetLoadMoreRowsCache",value:function(P){this._loadMoreRowsMemoizer=ar(),P&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(P){var x=this,$=this.props.loadMoreRows;P.forEach(function(ee){var se=$(ee);se&&se.then(function(){(function(te){var he=te.lastRenderedStartIndex,ye=te.lastRenderedStopIndex,ve=te.startIndex,Te=te.stopIndex;return!(ye<ve||Te<he)})({lastRenderedStartIndex:x._lastRenderedStartIndex,lastRenderedStopIndex:x._lastRenderedStopIndex,startIndex:ee.startIndex,stopIndex:ee.stopIndex})&&x._registeredChild&&function(te){var he=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,ye=typeof te.recomputeGridSize=="function"?te.recomputeGridSize:te.recomputeRowHeights;ye?ye.call(te,he):te.forceUpdate()}(x._registeredChild,x._lastRenderedStartIndex)})})}},{key:"_onRowsRendered",value:function(P){var x=P.startIndex,$=P.stopIndex;this._lastRenderedStartIndex=x,this._lastRenderedStopIndex=$,this._doStuff(x,$)}},{key:"_doStuff",value:function(P,x){var $,ee=this,se=this.props,te=se.isRowLoaded,he=se.minimumBatchSize,ye=se.rowCount,ve=se.threshold,Te=function(Be){for(var it=Be.isRowLoaded,Ve=Be.minimumBatchSize,je=Be.rowCount,ot=Be.startIndex,at=Be.stopIndex,yt=[],wt=null,Je=null,lt=ot;lt<=at;lt++)it({index:lt})?Je!==null&&(yt.push({startIndex:wt,stopIndex:Je}),wt=Je=null):(Je=lt,wt===null&&(wt=lt));if(Je!==null){for(var Ge=Math.min(Math.max(Je,wt+Ve-1),je-1),Bt=Je+1;Bt<=Ge&&!it({index:Bt});Bt++)Je=Bt;yt.push({startIndex:wt,stopIndex:Je})}if(yt.length)for(var an=yt[0];an.stopIndex-an.startIndex+1<Ve&&0<an.startIndex;){var Pn=an.startIndex-1;if(it({index:Pn}))break;an.startIndex=Pn}return yt}({isRowLoaded:te,minimumBatchSize:he,rowCount:ye,startIndex:Math.max(0,P-ve),stopIndex:Math.min(ye-1,x+ve)}),Re=($=[]).concat.apply($,kr(Te.map(function(Be){return[Be.startIndex,Be.stopIndex]})));this._loadMoreRowsMemoizer({callback:function(){ee._loadUnloadedRanges(Te)},indices:{squashedUnloadedRanges:Re}})}},{key:"_registerChild",value:function(P){this._registeredChild=P}}]),Q}();xe(au,"propTypes",{children:et.func.isRequired,isRowLoaded:et.func.isRequired,loadMoreRows:et.func.isRequired,minimumBatchSize:et.number.isRequired,rowCount:et.number.isRequired,threshold:et.number.isRequired}),xe(au,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15});var Eg=function(){function Q(){var P,x;jn(this,Q);for(var $=arguments.length,ee=new Array($),se=0;se<$;se++)ee[se]=arguments[se];return xe(nt(x=ai(this,(P=Zn(Q)).call.apply(P,[this].concat(ee)))),"Grid",void 0),xe(nt(x),"_cellRenderer",function(te){var he=te.parent,ye=te.rowIndex,ve=te.style,Te=te.isScrolling,Re=te.isVisible,Be=te.key,it=x.props.rowRenderer,Ve=Object.getOwnPropertyDescriptor(ve,"width");return Ve&&Ve.writable&&(ve.width="100%"),it({index:ye,style:ve,isScrolling:Te,isVisible:Re,key:Be,parent:he})}),xe(nt(x),"_setRef",function(te){x.Grid=te}),xe(nt(x),"_onScroll",function(te){var he=te.clientHeight,ye=te.scrollHeight,ve=te.scrollTop;(0,x.props.onScroll)({clientHeight:he,scrollHeight:ye,scrollTop:ve})}),xe(nt(x),"_onSectionRendered",function(te){var he=te.rowOverscanStartIndex,ye=te.rowOverscanStopIndex,ve=te.rowStartIndex,Te=te.rowStopIndex;(0,x.props.onRowsRendered)({overscanStartIndex:he,overscanStopIndex:ye,startIndex:ve,stopIndex:Te})}),x}return s(Q,"List"),ii(Q,Kt.PureComponent),$n(Q,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(P){var x=P.alignment,$=P.index;return this.Grid?this.Grid.getOffsetForCell({alignment:x,rowIndex:$,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(P){var x=P.columnIndex,$=P.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:$,columnIndex:x})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(P){var x=0<arguments.length&&P!==void 0?P:{},$=x.columnIndex,ee=$===void 0?0:$,se=x.rowIndex,te=se===void 0?0:se;this.Grid&&this.Grid.recomputeGridSize({rowIndex:te,columnIndex:ee})}},{key:"recomputeRowHeights",value:function(P){var x=0<arguments.length&&P!==void 0?P:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:x,columnIndex:0})}},{key:"scrollToPosition",value:function(P){var x=0<arguments.length&&P!==void 0?P:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:x})}},{key:"scrollToRow",value:function(P){var x=0<arguments.length&&P!==void 0?P:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:x})}},{key:"render",value:function(){var P=this.props,x=P.className,$=P.noRowsRenderer,ee=P.scrollToIndex,se=P.width,te=Vi("ReactVirtualized__List",x);return Kt.createElement(tr,bi({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:te,columnWidth:se,columnCount:1,noContentRenderer:$,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:ee}))}}]),Q}();xe(Eg,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:Ua,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var Bl={ge:function(Q,P,x,$,ee){return typeof x=="function"?function(se,te,he,ye,ve){for(var Te=he+1;te<=he;){var Re=te+he>>>1;0<=ve(se[Re],ye)?he=(Te=Re)-1:te=1+Re}return Te}(Q,$===void 0?0:0|$,ee===void 0?Q.length-1:0|ee,P,x):function(se,te,he,ye){for(var ve=he+1;te<=he;){var Te=te+he>>>1;ye<=se[Te]?he=(ve=Te)-1:te=1+Te}return ve}(Q,x===void 0?0:0|x,$===void 0?Q.length-1:0|$,P)},gt:function(Q,P,x,$,ee){return typeof x=="function"?function(se,te,he,ye,ve){for(var Te=he+1;te<=he;){var Re=te+he>>>1;0<ve(se[Re],ye)?he=(Te=Re)-1:te=1+Re}return Te}(Q,$===void 0?0:0|$,ee===void 0?Q.length-1:0|ee,P,x):function(se,te,he,ye){for(var ve=he+1;te<=he;){var Te=te+he>>>1;ye<se[Te]?he=(ve=Te)-1:te=1+Te}return ve}(Q,x===void 0?0:0|x,$===void 0?Q.length-1:0|$,P)},lt:function(Q,P,x,$,ee){return typeof x=="function"?function(se,te,he,ye,ve){for(var Te=te-1;te<=he;){var Re=te+he>>>1;ve(se[Re],ye)<0?te=1+(Te=Re):he=Re-1}return Te}(Q,$===void 0?0:0|$,ee===void 0?Q.length-1:0|ee,P,x):function(se,te,he,ye){for(var ve=te-1;te<=he;){var Te=te+he>>>1;se[Te]<ye?te=1+(ve=Te):he=Te-1}return ve}(Q,x===void 0?0:0|x,$===void 0?Q.length-1:0|$,P)},le:function(Q,P,x,$,ee){return typeof x=="function"?function(se,te,he,ye,ve){for(var Te=te-1;te<=he;){var Re=te+he>>>1;ve(se[Re],ye)<=0?te=1+(Te=Re):he=Re-1}return Te}(Q,$===void 0?0:0|$,ee===void 0?Q.length-1:0|ee,P,x):function(se,te,he,ye){for(var ve=te-1;te<=he;){var Te=te+he>>>1;se[Te]<=ye?te=1+(ve=Te):he=Te-1}return ve}(Q,x===void 0?0:0|x,$===void 0?Q.length-1:0|$,P)},eq:function(Q,P,x,$,ee){return typeof x=="function"?function(se,te,he,ye,ve){for(;te<=he;){var Te=te+he>>>1,Re=ve(se[Te],ye);if(Re===0)return Te;Re<=0?te=1+Te:he=Te-1}return-1}(Q,$===void 0?0:0|$,ee===void 0?Q.length-1:0|ee,P,x):function(se,te,he,ye){for(;te<=he;){var ve=te+he>>>1,Te=se[ve];if(Te===ye)return ve;Te<=ye?te=1+ve:he=ve-1}return-1}(Q,x===void 0?0:0|x,$===void 0?Q.length-1:0|$,P)}};function lu(Q,P,x,$,ee){this.mid=Q,this.left=P,this.right=x,this.leftPoints=$,this.rightPoints=ee,this.count=(P?P.count:0)+(x?x.count:0)+$.length}s(lu,"IntervalTreeNode");var Ha=lu.prototype;function du(Q,P){Q.mid=P.mid,Q.left=P.left,Q.right=P.right,Q.leftPoints=P.leftPoints,Q.rightPoints=P.rightPoints,Q.count=P.count}s(du,"copy");function Cg(Q,P){var x=ra(P);Q.mid=x.mid,Q.left=x.left,Q.right=x.right,Q.leftPoints=x.leftPoints,Q.rightPoints=x.rightPoints,Q.count=x.count}s(Cg,"rebuild");function _g(Q,P){var x=Q.intervals([]);x.push(P),Cg(Q,x)}s(_g,"rebuildWithInterval");function Tg(Q,P){var x=Q.intervals([]),$=x.indexOf(P);return $<0?0:(x.splice($,1),Cg(Q,x),1)}s(Tg,"rebuildWithoutInterval");function Ig(Q,P,x){for(var $=0;$<Q.length&&Q[$][0]<=P;++$){var ee=x(Q[$]);if(ee)return ee}}s(Ig,"reportLeftRange");function wg(Q,P,x){for(var $=Q.length-1;0<=$&&Q[$][1]>=P;--$){var ee=x(Q[$]);if(ee)return ee}}s(wg,"reportRightRange");function Og(Q,P){for(var x=0;x<Q.length;++x){var $=P(Q[x]);if($)return $}}s(Og,"reportRange");function YS(Q,P){return Q-P}s(YS,"compareNumbers");function cu(Q,P){var x=Q[0]-P[0];return x||Q[1]-P[1]}s(cu,"compareBegin");function uu(Q,P){var x=Q[1]-P[1];return x||Q[0]-P[0]}s(uu,"compareEnd");function ra(Q){if(Q.length===0)return null;for(var P=[],x=0;x<Q.length;++x)P.push(Q[x][0],Q[x][1]);P.sort(YS);var $=P[P.length>>1],ee=[],se=[],te=[];for(x=0;x<Q.length;++x){var he=Q[x];he[1]<$?ee.push(he):$<he[0]?se.push(he):te.push(he)}var ye=te,ve=te.slice();return ye.sort(cu),ve.sort(uu),new lu($,ra(ee),ra(se),ye,ve)}s(ra,"createIntervalTree");function fu(Q){this.root=Q}s(fu,"IntervalTree"),Ha.intervals=function(Q){return Q.push.apply(Q,this.leftPoints),this.left&&this.left.intervals(Q),this.right&&this.right.intervals(Q),Q},Ha.insert=function(Q){var P=this.count-this.leftPoints.length;if(this.count+=1,Q[1]<this.mid)this.left?4*(this.left.count+1)>3*(1+P)?_g(this,Q):this.left.insert(Q):this.left=ra([Q]);else if(Q[0]>this.mid)this.right?4*(this.right.count+1)>3*(1+P)?_g(this,Q):this.right.insert(Q):this.right=ra([Q]);else{var x=Bl.ge(this.leftPoints,Q,cu),$=Bl.ge(this.rightPoints,Q,uu);this.leftPoints.splice(x,0,Q),this.rightPoints.splice($,0,Q)}},Ha.remove=function(Q){var P=this.count-this.leftPoints;if(Q[1]<this.mid)return this.left?3*(P-1)<4*(this.right?this.right.count:0)?Tg(this,Q):(se=this.left.remove(Q))===2?(this.left=null,this.count-=1,1):(se===1&&(this.count-=1),se):0;if(Q[0]>this.mid)return this.right?3*(P-1)<4*(this.left?this.left.count:0)?Tg(this,Q):(se=this.right.remove(Q))===2?(this.right=null,this.count-=1,1):(se===1&&(this.count-=1),se):0;if(this.count===1)return this.leftPoints[0]===Q?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===Q){if(this.left&&this.right){for(var x=this,$=this.left;$.right;)$=(x=$).right;if(x===this)$.right=this.right;else{var ee=this.left;se=this.right,x.count-=$.count,x.right=$.left,$.left=ee,$.right=se}du(this,$),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?du(this,this.left):du(this,this.right);return 1}for(ee=Bl.ge(this.leftPoints,Q,cu);ee<this.leftPoints.length&&this.leftPoints[ee][0]===Q[0];++ee)if(this.leftPoints[ee]===Q){for(this.count-=1,this.leftPoints.splice(ee,1),se=Bl.ge(this.rightPoints,Q,uu);se<this.rightPoints.length&&this.rightPoints[se][1]===Q[1];++se)if(this.rightPoints[se]===Q)return this.rightPoints.splice(se,1),1}return 0;var se},Ha.queryPoint=function(Q,P){if(Q<this.mid)return this.left&&(x=this.left.queryPoint(Q,P))?x:Ig(this.leftPoints,Q,P);if(Q>this.mid){var x;return this.right&&(x=this.right.queryPoint(Q,P))?x:wg(this.rightPoints,Q,P)}return Og(this.leftPoints,P)},Ha.queryInterval=function(Q,P,x){var $;return Q<this.mid&&this.left&&($=this.left.queryInterval(Q,P,x))||P>this.mid&&this.right&&($=this.right.queryInterval(Q,P,x))?$:P<this.mid?Ig(this.leftPoints,P,x):Q>this.mid?wg(this.rightPoints,Q,x):Og(this.leftPoints,x)};var oa=fu.prototype;oa.insert=function(Q){this.root?this.root.insert(Q):this.root=new lu(Q[0],null,null,[Q],[Q])},oa.remove=function(Q){if(this.root){var P=this.root.remove(Q);return P===2&&(this.root=null),P!==0}return!1},oa.queryPoint=function(Q,P){if(this.root)return this.root.queryPoint(Q,P)},oa.queryInterval=function(Q,P,x){if(Q<=P&&this.root)return this.root.queryInterval(Q,P,x)},Object.defineProperty(oa,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(oa,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var hu=function(){function Q(){jn(this,Q),xe(this,"_columnSizeMap",{}),xe(this,"_intervalTree",function(P){return P&&P.length!==0?new fu(ra(P)):new fu(null)}()),xe(this,"_leftMap",{})}return s(Q,"PositionCache"),$n(Q,[{key:"estimateTotalHeight",value:function(P,x,$){var ee=P-this.count;return this.tallestColumnSize+Math.ceil(ee/x)*$}},{key:"range",value:function(P,x,$){var ee=this;this._intervalTree.queryInterval(P,P+x,function(se){var te=So(se,3),he=te[0],ye=(te[1],te[2]);return $(ye,ee._leftMap[ye],he)})}},{key:"setPosition",value:function(P,x,$,ee){this._intervalTree.insert([$,$+ee,P]),this._leftMap[P]=x;var se=this._columnSizeMap,te=se[x];se[x]=te===void 0?$+ee:Math.max(te,$+ee)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var P=this._columnSizeMap,x=0;for(var $ in P){var ee=P[$];x=x===0?ee:Math.min(x,ee)}return x}},{key:"tallestColumnSize",get:function(){var P=this._columnSizeMap,x=0;for(var $ in P){var ee=P[$];x=Math.max(x,ee)}return x}}]),Q}(),pu=function(){function Q(){var P,x;jn(this,Q);for(var $=arguments.length,ee=new Array($),se=0;se<$;se++)ee[se]=arguments[se];return xe(nt(x=ai(this,(P=Zn(Q)).call.apply(P,[this].concat(ee)))),"state",{isScrolling:!1,scrollTop:0}),xe(nt(x),"_debounceResetIsScrollingId",void 0),xe(nt(x),"_invalidateOnUpdateStartIndex",null),xe(nt(x),"_invalidateOnUpdateStopIndex",null),xe(nt(x),"_positionCache",new hu),xe(nt(x),"_startIndex",null),xe(nt(x),"_startIndexMemoized",null),xe(nt(x),"_stopIndex",null),xe(nt(x),"_stopIndexMemoized",null),xe(nt(x),"_debounceResetIsScrollingCallback",function(){x.setState({isScrolling:!1})}),xe(nt(x),"_setScrollingContainerRef",function(te){x._scrollingContainer=te}),xe(nt(x),"_onScroll",function(te){var he=x.props.height,ye=te.currentTarget.scrollTop,ve=Math.min(Math.max(0,x._getEstimatedTotalHeight()-he),ye);ye===ve&&(x._debounceResetIsScrolling(),x.state.scrollTop!==ve&&x.setState({isScrolling:!0,scrollTop:ve}))}),x}return s(Q,"Masonry"),ii(Q,Kt.PureComponent),$n(Q,[{key:"clearCellPositions",value:function(){this._positionCache=new hu,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(P){var x=P.rowIndex;this._invalidateOnUpdateStartIndex===null?(this._invalidateOnUpdateStartIndex=x,this._invalidateOnUpdateStopIndex=x):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,x),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,x))}},{key:"recomputeCellPositions",value:function(){var P=this._positionCache.count-1;this._positionCache=new hu,this._populatePositionCache(0,P),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(P){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==P.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&Ct(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var P,x=this,$=this.props,ee=$.autoHeight,se=$.cellCount,te=$.cellMeasurerCache,he=$.cellRenderer,ye=$.className,ve=$.height,Te=$.id,Re=$.keyMapper,Be=$.overscanByPixels,it=$.role,Ve=$.style,je=$.tabIndex,ot=$.width,at=$.rowDirection,yt=this.state,wt=yt.isScrolling,Je=yt.scrollTop,lt=[],Ge=this._getEstimatedTotalHeight(),Bt=this._positionCache.shortestColumnSize,an=this._positionCache.count,Pn=0;if(this._positionCache.range(Math.max(0,Je-Be),ve+2*Be,function(Yn,Oi,ki){var Ui;P=P===void 0?Pn=Yn:(Pn=Math.min(Pn,Yn),Math.max(P,Yn)),lt.push(he({index:Yn,isScrolling:wt,key:Re(Yn),parent:x,style:(Ui={height:te.getHeight(Yn)},xe(Ui,at==="ltr"?"left":"right",Oi),xe(Ui,"position","absolute"),xe(Ui,"top",ki),xe(Ui,"width",te.getWidth(Yn)),Ui)}))}),Bt<Je+ve+Be&&an<se)for(var Kn=Math.min(se-an,Math.ceil((Je+ve+Be-Bt)/te.defaultHeight*ot/te.defaultWidth)),Jn=an;Jn<an+Kn;Jn++)P=Jn,lt.push(he({index:Jn,isScrolling:wt,key:Re(Jn),parent:this,style:{width:te.getWidth(Jn)}}));return this._startIndex=Pn,this._stopIndex=P,Kt.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Vi("ReactVirtualized__Masonry",ye),id:Te,onScroll:this._onScroll,role:it,style:An({boxSizing:"border-box",direction:"ltr",height:ee?"auto":ve,overflowX:"hidden",overflowY:Ge<ve?"hidden":"auto",position:"relative",width:ot,WebkitOverflowScrolling:"touch",willChange:"transform"},Ve),tabIndex:je},Kt.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:Ge,maxWidth:"100%",maxHeight:Ge,overflow:"hidden",pointerEvents:wt?"none":"",position:"relative"}},lt))}},{key:"_checkInvalidateOnUpdate",value:function(){if(typeof this._invalidateOnUpdateStartIndex=="number"){var P=this._invalidateOnUpdateStartIndex,x=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(P,x),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var P=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&Ct(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=Wt(this._debounceResetIsScrollingCallback,P)}},{key:"_getEstimatedTotalHeight",value:function(){var P=this.props,x=P.cellCount,$=P.cellMeasurerCache,ee=P.width,se=Math.max(1,Math.floor(ee/$.defaultWidth));return this._positionCache.estimateTotalHeight(x,se,$.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var P=this.props,x=P.height,$=P.onScroll,ee=this.state.scrollTop;this._onScrollMemoized!==ee&&($({clientHeight:x,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:ee}),this._onScrollMemoized=ee)}},{key:"_invokeOnCellsRenderedCallback",value:function(){this._startIndexMemoized===this._startIndex&&this._stopIndexMemoized===this._stopIndex||((0,this.props.onCellsRendered)({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex)}},{key:"_populatePositionCache",value:function(P,x){for(var $=this.props,ee=$.cellMeasurerCache,se=$.cellPositioner,te=P;te<=x;te++){var he=se(te),ye=he.left,ve=he.top;this._positionCache.setPosition(te,ye,ve,ee.getHeight(te))}}}],[{key:"getDerivedStateFromProps",value:function(P,x){return P.scrollTop!==void 0&&x.scrollTop!==P.scrollTop?{isScrolling:!0,scrollTop:P.scrollTop}:null}}]),Q}();function Ag(){}s(Ag,"noop"),xe(pu,"defaultProps",{autoHeight:!1,keyMapper:function(Q){return Q},onCellsRendered:Ag,onScroll:Ag,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:150,style:{},tabIndex:0,rowDirection:"ltr"}),er(pu);var mu=function(){function Q(){var P=this,x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};jn(this,Q),xe(this,"_cellMeasurerCache",void 0),xe(this,"_columnIndexOffset",void 0),xe(this,"_rowIndexOffset",void 0),xe(this,"columnWidth",function(ye){var ve=ye.index;P._cellMeasurerCache.columnWidth({index:ve+P._columnIndexOffset})}),xe(this,"rowHeight",function(ye){var ve=ye.index;P._cellMeasurerCache.rowHeight({index:ve+P._rowIndexOffset})});var $=x.cellMeasurerCache,ee=x.columnIndexOffset,se=ee===void 0?0:ee,te=x.rowIndexOffset,he=te===void 0?0:te;this._cellMeasurerCache=$,this._columnIndexOffset=se,this._rowIndexOffset=he}return s(Q,"CellMeasurerCacheDecorator"),$n(Q,[{key:"clear",value:function(P,x){this._cellMeasurerCache.clear(P+this._rowIndexOffset,x+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(P,x){var $=1<arguments.length&&x!==void 0?x:0;return this._cellMeasurerCache.getHeight(P+this._rowIndexOffset,$+this._columnIndexOffset)}},{key:"getWidth",value:function(P,x){var $=1<arguments.length&&x!==void 0?x:0;return this._cellMeasurerCache.getWidth(P+this._rowIndexOffset,$+this._columnIndexOffset)}},{key:"has",value:function(P,x){var $=1<arguments.length&&x!==void 0?x:0;return this._cellMeasurerCache.has(P+this._rowIndexOffset,$+this._columnIndexOffset)}},{key:"set",value:function(P,x,$,ee){this._cellMeasurerCache.set(P+this._rowIndexOffset,x+this._columnIndexOffset,$,ee)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),Q}(),Fl=function(){function Q(P,x){var $;jn(this,Q),xe(nt($=ai(this,Zn(Q).call(this,P,x))),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),xe(nt($),"_deferredInvalidateColumnIndex",null),xe(nt($),"_deferredInvalidateRowIndex",null),xe(nt($),"_bottomLeftGridRef",function(he){$._bottomLeftGrid=he}),xe(nt($),"_bottomRightGridRef",function(he){$._bottomRightGrid=he}),xe(nt($),"_cellRendererBottomLeftGrid",function(he){var ye=he.rowIndex,ve=qi(he,["rowIndex"]),Te=$.props,Re=Te.cellRenderer,Be=Te.fixedRowCount;return ye===Te.rowCount-Be?Kt.createElement("div",{key:ve.key,style:An({},ve.style,{height:20})}):Re(An({},ve,{parent:nt($),rowIndex:ye+Be}))}),xe(nt($),"_cellRendererBottomRightGrid",function(he){var ye=he.columnIndex,ve=he.rowIndex,Te=qi(he,["columnIndex","rowIndex"]),Re=$.props,Be=Re.cellRenderer,it=Re.fixedColumnCount,Ve=Re.fixedRowCount;return Be(An({},Te,{columnIndex:ye+it,parent:nt($),rowIndex:ve+Ve}))}),xe(nt($),"_cellRendererTopRightGrid",function(he){var ye=he.columnIndex,ve=qi(he,["columnIndex"]),Te=$.props,Re=Te.cellRenderer,Be=Te.columnCount,it=Te.fixedColumnCount;return ye===Be-it?Kt.createElement("div",{key:ve.key,style:An({},ve.style,{width:20})}):Re(An({},ve,{columnIndex:ye+it,parent:nt($)}))}),xe(nt($),"_columnWidthRightGrid",function(he){var ye=he.index,ve=$.props,Te=ve.columnCount,Re=ve.fixedColumnCount,Be=ve.columnWidth,it=$.state,Ve=it.scrollbarSize;return it.showHorizontalScrollbar&&ye===Te-Re?Ve:typeof Be=="function"?Be({index:ye+Re}):Be}),xe(nt($),"_onScroll",function(he){var ye=he.scrollLeft,ve=he.scrollTop;$.setState({scrollLeft:ye,scrollTop:ve});var Te=$.props.onScroll;Te&&Te(he)}),xe(nt($),"_onScrollbarPresenceChange",function(he){var ye=he.horizontal,ve=he.size,Te=he.vertical,Re=$.state,Be=Re.showHorizontalScrollbar,it=Re.showVerticalScrollbar;if(ye!==Be||Te!==it){$.setState({scrollbarSize:ve,showHorizontalScrollbar:ye,showVerticalScrollbar:Te});var Ve=$.props.onScrollbarPresenceChange;typeof Ve=="function"&&Ve({horizontal:ye,size:ve,vertical:Te})}}),xe(nt($),"_onScrollLeft",function(he){var ye=he.scrollLeft;$._onScroll({scrollLeft:ye,scrollTop:$.state.scrollTop})}),xe(nt($),"_onScrollTop",function(he){var ye=he.scrollTop;$._onScroll({scrollTop:ye,scrollLeft:$.state.scrollLeft})}),xe(nt($),"_rowHeightBottomGrid",function(he){var ye=he.index,ve=$.props,Te=ve.fixedRowCount,Re=ve.rowCount,Be=ve.rowHeight,it=$.state,Ve=it.scrollbarSize;return it.showVerticalScrollbar&&ye===Re-Te?Ve:typeof Be=="function"?Be({index:ye+Te}):Be}),xe(nt($),"_topLeftGridRef",function(he){$._topLeftGrid=he}),xe(nt($),"_topRightGridRef",function(he){$._topRightGrid=he});var ee=P.deferredMeasurementCache,se=P.fixedColumnCount,te=P.fixedRowCount;return $._maybeCalculateCachedStyles(!0),ee&&($._deferredMeasurementCacheBottomLeftGrid=0<te?new mu({cellMeasurerCache:ee,columnIndexOffset:0,rowIndexOffset:te}):ee,$._deferredMeasurementCacheBottomRightGrid=0<se||0<te?new mu({cellMeasurerCache:ee,columnIndexOffset:se,rowIndexOffset:te}):ee,$._deferredMeasurementCacheTopRightGrid=0<se?new mu({cellMeasurerCache:ee,columnIndexOffset:se,rowIndexOffset:0}):ee),$}return s(Q,"MultiGrid"),ii(Q,Kt.PureComponent),$n(Q,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(P){var x=0<arguments.length&&P!==void 0?P:{},$=x.columnIndex,ee=$===void 0?0:$,se=x.rowIndex,te=se===void 0?0:se;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,ee):ee,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,te):te}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(P){var x=0<arguments.length&&P!==void 0?P:{},$=x.columnIndex,ee=$===void 0?0:$,se=x.rowIndex,te=se===void 0?0:se,he=this.props,ye=he.fixedColumnCount,ve=he.fixedRowCount,Te=Math.max(0,ee-ye),Re=Math.max(0,te-ve);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:ee,rowIndex:Re}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:Te,rowIndex:Re}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:ee,rowIndex:te}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:Te,rowIndex:te}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var P=this.props,x=P.scrollLeft,$=P.scrollTop;if(0<x||0<$){var ee={};0<x&&(ee.scrollLeft=x),0<$&&(ee.scrollTop=$),this.setState(ee)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var P=this.props,x=P.onScroll,$=P.onSectionRendered,ee=(P.onScrollbarPresenceChange,P.scrollLeft,P.scrollToColumn),se=(P.scrollTop,P.scrollToRow),te=qi(P,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),this.props.width===0||this.props.height===0)return null;var he=this.state,ye=he.scrollLeft,ve=he.scrollTop;return Kt.createElement("div",{style:this._containerOuterStyle},Kt.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(te),this._renderTopRightGrid(An({},te,{onScroll:x,scrollLeft:ye}))),Kt.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(An({},te,{onScroll:x,scrollTop:ve})),this._renderBottomRightGrid(An({},te,{onScroll:x,onSectionRendered:$,scrollLeft:ye,scrollToColumn:ee,scrollToRow:se,scrollTop:ve}))))}},{key:"_getBottomGridHeight",value:function(P){return P.height-this._getTopGridHeight(P)}},{key:"_getLeftGridWidth",value:function(P){var x=P.fixedColumnCount,$=P.columnWidth;if(this._leftGridWidth==null)if(typeof $=="function"){for(var ee=0,se=0;se<x;se++)ee+=$({index:se});this._leftGridWidth=ee}else this._leftGridWidth=$*x;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(P){return P.width-this._getLeftGridWidth(P)}},{key:"_getTopGridHeight",value:function(P){var x=P.fixedRowCount,$=P.rowHeight;if(this._topGridHeight==null)if(typeof $=="function"){for(var ee=0,se=0;se<x;se++)ee+=$({index:se});this._topGridHeight=ee}else this._topGridHeight=$*x;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"){var P=this._deferredInvalidateColumnIndex,x=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:P,rowIndex:x}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(P){var x=this.props,$=x.columnWidth,ee=x.enableFixedColumnScroll,se=x.enableFixedRowScroll,te=x.height,he=x.fixedColumnCount,ye=x.fixedRowCount,ve=x.rowHeight,Te=x.style,Re=x.styleBottomLeftGrid,Be=x.styleBottomRightGrid,it=x.styleTopLeftGrid,Ve=x.styleTopRightGrid,je=x.width,ot=P||te!==this._lastRenderedHeight||je!==this._lastRenderedWidth,at=P||$!==this._lastRenderedColumnWidth||he!==this._lastRenderedFixedColumnCount,yt=P||ye!==this._lastRenderedFixedRowCount||ve!==this._lastRenderedRowHeight;(P||ot||Te!==this._lastRenderedStyle)&&(this._containerOuterStyle=An({height:te,overflow:"visible",width:je},Te)),(P||ot||yt)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:je},this._containerBottomStyle={height:te-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:je}),!P&&Re===this._lastRenderedStyleBottomLeftGrid||(this._bottomLeftGridStyle=An({left:0,overflowX:"hidden",overflowY:ee?"auto":"hidden",position:"absolute"},Re)),(P||at||Be!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=An({left:this._getLeftGridWidth(this.props),position:"absolute"},Be)),!P&&it===this._lastRenderedStyleTopLeftGrid||(this._topLeftGridStyle=An({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},it)),(P||at||Ve!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=An({left:this._getLeftGridWidth(this.props),overflowX:se?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},Ve)),this._lastRenderedColumnWidth=$,this._lastRenderedFixedColumnCount=he,this._lastRenderedFixedRowCount=ye,this._lastRenderedHeight=te,this._lastRenderedRowHeight=ve,this._lastRenderedStyle=Te,this._lastRenderedStyleBottomLeftGrid=Re,this._lastRenderedStyleBottomRightGrid=Be,this._lastRenderedStyleTopLeftGrid=it,this._lastRenderedStyleTopRightGrid=Ve,this._lastRenderedWidth=je}},{key:"_prepareForRender",value:function(){this._lastRenderedColumnWidth===this.props.columnWidth&&this._lastRenderedFixedColumnCount===this.props.fixedColumnCount||(this._leftGridWidth=null),this._lastRenderedFixedRowCount===this.props.fixedRowCount&&this._lastRenderedRowHeight===this.props.rowHeight||(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(P){var x=P.enableFixedColumnScroll,$=P.fixedColumnCount,ee=P.fixedRowCount,se=P.rowCount,te=P.hideBottomLeftGridScrollbar,he=this.state.showVerticalScrollbar;if(!$)return null;var ye=he?1:0,ve=this._getBottomGridHeight(P),Te=this._getLeftGridWidth(P),Re=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,Be=te?Te+Re:Te,it=Kt.createElement(tr,bi({},P,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:$,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:ve,onScroll:x?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,se-ee)+ye,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:Be}));return te?Kt.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:An({},this._bottomLeftGridStyle,{height:ve,width:Te,overflowY:"hidden"})},it):it}},{key:"_renderBottomRightGrid",value:function(P){var x=P.columnCount,$=P.fixedColumnCount,ee=P.fixedRowCount,se=P.rowCount,te=P.scrollToColumn,he=P.scrollToRow;return Kt.createElement(tr,bi({},P,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,x-$),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(P),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,se-ee),rowHeight:this._rowHeightBottomGrid,scrollToColumn:te-$,scrollToRow:he-ee,style:this._bottomRightGridStyle,width:this._getRightGridWidth(P)}))}},{key:"_renderTopLeftGrid",value:function(P){var x=P.fixedColumnCount,$=P.fixedRowCount;return x&&$?Kt.createElement(tr,bi({},P,{className:this.props.classNameTopLeftGrid,columnCount:x,height:this._getTopGridHeight(P),ref:this._topLeftGridRef,rowCount:$,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(P)})):null}},{key:"_renderTopRightGrid",value:function(P){var x=P.columnCount,$=P.enableFixedRowScroll,ee=P.fixedColumnCount,se=P.fixedRowCount,te=P.scrollLeft,he=P.hideTopRightGridScrollbar,ye=this.state,ve=ye.showHorizontalScrollbar,Te=ye.scrollbarSize;if(!se)return null;var Re=ve?1:0,Be=this._getTopGridHeight(P),it=this._getRightGridWidth(P),Ve=ve?Te:0,je=Be,ot=this._topRightGridStyle;he&&(je=Be+Ve,ot=An({},this._topRightGridStyle,{left:0}));var at=Kt.createElement(tr,bi({},P,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,x-ee)+Re,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:je,onScroll:$?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:se,scrollLeft:te,style:ot,tabIndex:null,width:it}));return he?Kt.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:An({},this._topRightGridStyle,{height:Be,width:it,overflowX:"hidden"})},at):at}}],[{key:"getDerivedStateFromProps",value:function(P,x){return P.scrollLeft!==x.scrollLeft||P.scrollTop!==x.scrollTop?{scrollLeft:P.scrollLeft!=null&&0<=P.scrollLeft?P.scrollLeft:x.scrollLeft,scrollTop:P.scrollTop!=null&&0<=P.scrollTop?P.scrollTop:x.scrollTop}:null}}]),Q}();xe(Fl,"propTypes",{classNameBottomLeftGrid:et.string.isRequired,classNameBottomRightGrid:et.string.isRequired,classNameTopLeftGrid:et.string.isRequired,classNameTopRightGrid:et.string.isRequired,enableFixedColumnScroll:et.bool.isRequired,enableFixedRowScroll:et.bool.isRequired,fixedColumnCount:et.number.isRequired,fixedRowCount:et.number.isRequired,onScrollbarPresenceChange:et.func,style:et.object.isRequired,styleBottomLeftGrid:et.object.isRequired,styleBottomRightGrid:et.object.isRequired,styleTopLeftGrid:et.object.isRequired,styleTopRightGrid:et.object.isRequired,hideTopRightGridScrollbar:et.bool,hideBottomLeftGridScrollbar:et.bool}),xe(Fl,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1}),er(Fl);var Mg=function(){function Q(P,x){var $;return jn(this,Q),($=ai(this,Zn(Q).call(this,P,x))).state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},$._onScroll=$._onScroll.bind(nt($)),$}return s(Q,"ScrollSync"),ii(Q,Kt.PureComponent),$n(Q,[{key:"render",value:function(){var P=this.props.children,x=this.state,$=x.clientHeight,ee=x.clientWidth,se=x.scrollHeight,te=x.scrollLeft,he=x.scrollTop,ye=x.scrollWidth;return P({clientHeight:$,clientWidth:ee,onScroll:this._onScroll,scrollHeight:se,scrollLeft:te,scrollTop:he,scrollWidth:ye})}},{key:"_onScroll",value:function(P){var x=P.clientHeight,$=P.clientWidth,ee=P.scrollHeight,se=P.scrollLeft,te=P.scrollTop,he=P.scrollWidth;this.setState({clientHeight:x,clientWidth:$,scrollHeight:ee,scrollLeft:se,scrollTop:te,scrollWidth:he})}}]),Q}();function Pg(Q){var P=Q.dataKey,x=Q.rowData;return typeof x.get=="function"?x.get(P):x[P]}s(Pg,"defaultCellDataGetter");function Rg(Q){var P=Q.cellData;return P==null?"":String(P)}s(Rg,"defaultCellRenderer");function kg(Q){var P=Q.className,x=Q.columns,$=Q.style;return Kt.createElement("div",{className:P,role:"row",style:$},x)}s(kg,"defaultHeaderRowRenderer"),xe(Mg,"propTypes",{children:et.func.isRequired});var Ri={ASC:"ASC",DESC:"DESC"};function gu(Q){var P=Q.sortDirection,x=Vi("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":P===Ri.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":P===Ri.DESC});return Kt.createElement("svg",{className:x,width:18,height:18,viewBox:"0 0 24 24"},P===Ri.ASC?Kt.createElement("path",{d:"M7 14l5-5 5 5z"}):Kt.createElement("path",{d:"M7 10l5 5 5-5z"}),Kt.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}s(gu,"SortIndicator");function Dg(Q){var P=Q.dataKey,x=Q.label,$=Q.sortBy,ee=Q.sortDirection,se=$===P,te=[Kt.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:typeof x=="string"?x:null},x)];return se&&te.push(Kt.createElement(gu,{key:"SortIndicator",sortDirection:ee})),te}s(Dg,"defaultHeaderRenderer");function Lg(Q){var P=Q.className,x=Q.columns,$=Q.index,ee=Q.key,se=Q.onRowClick,te=Q.onRowDoubleClick,he=Q.onRowMouseOut,ye=Q.onRowMouseOver,ve=Q.onRowRightClick,Te=Q.rowData,Re=Q.style,Be={"aria-rowindex":$+1};return(se||te||he||ye||ve)&&(Be["aria-label"]="row",Be.tabIndex=0,se&&(Be.onClick=function(it){return se({event:it,index:$,rowData:Te})}),te&&(Be.onDoubleClick=function(it){return te({event:it,index:$,rowData:Te})}),he&&(Be.onMouseOut=function(it){return he({event:it,index:$,rowData:Te})}),ye&&(Be.onMouseOver=function(it){return ye({event:it,index:$,rowData:Te})}),ve&&(Be.onContextMenu=function(it){return ve({event:it,index:$,rowData:Te})})),Kt.createElement("div",bi({},Be,{className:P,key:ee,role:"row",style:Re}),x)}s(Lg,"defaultRowRenderer"),gu.propTypes={sortDirection:et.oneOf([Ri.ASC,Ri.DESC])};var za=function(){function Q(){return jn(this,Q),ai(this,Zn(Q).apply(this,arguments))}return s(Q,"Column"),ii(Q,Kt.Component),Q}();xe(za,"propTypes",{"aria-label":et.string,cellDataGetter:et.func,cellRenderer:et.func,className:et.string,columnData:et.object,dataKey:et.any.isRequired,defaultSortDirection:et.oneOf([Ri.ASC,Ri.DESC]),disableSort:et.bool,flexGrow:et.number,flexShrink:et.number,headerClassName:et.string,headerRenderer:et.func.isRequired,headerStyle:et.object,id:et.string,label:et.node,maxWidth:et.number,minWidth:et.number,style:et.object,width:et.number.isRequired}),xe(za,"defaultProps",{cellDataGetter:Pg,cellRenderer:Rg,defaultSortDirection:Ri.ASC,flexGrow:0,flexShrink:1,headerRenderer:Dg,style:{}});var Su=function(){function Q(P){var x;return jn(this,Q),(x=ai(this,Zn(Q).call(this,P))).state={scrollbarWidth:0},x._createColumn=x._createColumn.bind(nt(x)),x._createRow=x._createRow.bind(nt(x)),x._onScroll=x._onScroll.bind(nt(x)),x._onSectionRendered=x._onSectionRendered.bind(nt(x)),x._setRef=x._setRef.bind(nt(x)),x}return s(Q,"Table"),ii(Q,Kt.PureComponent),$n(Q,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(P){var x=P.alignment,$=P.index;return this.Grid?this.Grid.getOffsetForCell({alignment:x,rowIndex:$}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(P){var x=P.columnIndex,$=P.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:$,columnIndex:x})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(P){var x=0<arguments.length&&P!==void 0?P:{},$=x.columnIndex,ee=$===void 0?0:$,se=x.rowIndex,te=se===void 0?0:se;this.Grid&&this.Grid.recomputeGridSize({rowIndex:te,columnIndex:ee})}},{key:"recomputeRowHeights",value:function(P){var x=0<arguments.length&&P!==void 0?P:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:x})}},{key:"scrollToPosition",value:function(P){var x=0<arguments.length&&P!==void 0?P:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:x})}},{key:"scrollToRow",value:function(P){var x=0<arguments.length&&P!==void 0?P:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:x})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var P=gr.findDOMNode(this.Grid),x=P.clientWidth||0;return(P.offsetWidth||0)-x}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var P=this,x=this.props,$=x.children,ee=x.className,se=x.disableHeader,te=x.gridClassName,he=x.gridStyle,ye=x.headerHeight,ve=x.headerRowRenderer,Te=x.height,Re=x.id,Be=x.noRowsRenderer,it=x.rowClassName,Ve=x.rowStyle,je=x.scrollToIndex,ot=x.style,at=x.width,yt=this.state.scrollbarWidth,wt=se?Te:Te-ye,Je=typeof it=="function"?it({index:-1}):it,lt=typeof Ve=="function"?Ve({index:-1}):Ve;return this._cachedColumnStyles=[],Kt.Children.toArray($).forEach(function(Ge,Bt){var an=P._getFlexStyleForColumn(Ge,Ge.props.style);P._cachedColumnStyles[Bt]=An({overflow:"hidden"},an)}),Kt.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":Kt.Children.toArray($).length,"aria-rowcount":this.props.rowCount,className:Vi("ReactVirtualized__Table",ee),id:Re,role:"grid",style:ot},!se&&ve({className:Vi("ReactVirtualized__Table__headerRow",Je),columns:this._getHeaderColumns(),style:An({height:ye,overflow:"hidden",paddingRight:yt,width:at},lt)}),Kt.createElement(tr,bi({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:Vi("ReactVirtualized__Table__Grid",te),cellRenderer:this._createRow,columnWidth:at,columnCount:1,height:wt,id:void 0,noContentRenderer:Be,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:yt,scrollToRow:je,style:An({},he,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(P){var x=P.column,$=P.columnIndex,ee=P.isScrolling,se=P.parent,te=P.rowData,he=P.rowIndex,ye=this.props.onColumnClick,ve=x.props,Te=ve.cellDataGetter,Re=ve.cellRenderer,Be=ve.className,it=ve.columnData,Ve=ve.dataKey,je=ve.id,ot=Re({cellData:Te({columnData:it,dataKey:Ve,rowData:te}),columnData:it,columnIndex:$,dataKey:Ve,isScrolling:ee,parent:se,rowData:te,rowIndex:he}),at=this._cachedColumnStyles[$],yt=typeof ot=="string"?ot:null;return Kt.createElement("div",{"aria-colindex":$+1,"aria-describedby":je,className:Vi("ReactVirtualized__Table__rowColumn",Be),key:"Row"+he+"-Col"+$,onClick:function(wt){ye&&ye({columnData:it,dataKey:Ve,event:wt})},role:"gridcell",style:at,title:yt},ot)}},{key:"_createHeader",value:function(P){var x,$,ee,se,te,he=P.column,ye=P.index,ve=this.props,Te=ve.headerClassName,Re=ve.headerStyle,Be=ve.onHeaderClick,it=ve.sort,Ve=ve.sortBy,je=ve.sortDirection,ot=he.props,at=ot.columnData,yt=ot.dataKey,wt=ot.defaultSortDirection,Je=ot.disableSort,lt=ot.headerRenderer,Ge=ot.id,Bt=ot.label,an=!Je&&it,Pn=Vi("ReactVirtualized__Table__headerColumn",Te,he.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:an}),Kn=this._getFlexStyleForColumn(he,An({},Re,{},he.props.headerStyle)),Jn=lt({columnData:at,dataKey:yt,disableSort:Je,label:Bt,sortBy:Ve,sortDirection:je});if(an||Be){var Yn=Ve!==yt?wt:je===Ri.DESC?Ri.ASC:Ri.DESC,Oi=s(function(ki){an&&it({defaultSortDirection:wt,event:ki,sortBy:yt,sortDirection:Yn}),Be&&Be({columnData:at,dataKey:yt,event:ki})},"onClick");te=he.props["aria-label"]||Bt||yt,se="none",ee=0,x=Oi,$=s(function(ki){ki.key!=="Enter"&&ki.key!==" "||Oi(ki)},"headerOnKeyDown")}return Ve===yt&&(se=je===Ri.ASC?"ascending":"descending"),Kt.createElement("div",{"aria-label":te,"aria-sort":se,className:Pn,id:Ge,key:"Header-Col"+ye,onClick:x,onKeyDown:$,role:"columnheader",style:Kn,tabIndex:ee},Jn)}},{key:"_createRow",value:function(P){var x=this,$=P.rowIndex,ee=P.isScrolling,se=P.key,te=P.parent,he=P.style,ye=this.props,ve=ye.children,Te=ye.onRowClick,Re=ye.onRowDoubleClick,Be=ye.onRowRightClick,it=ye.onRowMouseOver,Ve=ye.onRowMouseOut,je=ye.rowClassName,ot=ye.rowGetter,at=ye.rowRenderer,yt=ye.rowStyle,wt=this.state.scrollbarWidth,Je=typeof je=="function"?je({index:$}):je,lt=typeof yt=="function"?yt({index:$}):yt,Ge=ot({index:$}),Bt=Kt.Children.toArray(ve).map(function(Kn,Jn){return x._createColumn({column:Kn,columnIndex:Jn,isScrolling:ee,parent:te,rowData:Ge,rowIndex:$,scrollbarWidth:wt})}),an=Vi("ReactVirtualized__Table__row",Je),Pn=An({},he,{height:this._getRowHeight($),overflow:"hidden",paddingRight:wt},lt);return at({className:an,columns:Bt,index:$,isScrolling:ee,key:se,onRowClick:Te,onRowDoubleClick:Re,onRowRightClick:Be,onRowMouseOver:it,onRowMouseOut:Ve,rowData:Ge,style:Pn})}},{key:"_getFlexStyleForColumn",value:function(P,x){var $=1<arguments.length&&x!==void 0?x:{},ee="".concat(P.props.flexGrow," ").concat(P.props.flexShrink," ").concat(P.props.width,"px"),se=An({},$,{flex:ee,msFlex:ee,WebkitFlex:ee});return P.props.maxWidth&&(se.maxWidth=P.props.maxWidth),P.props.minWidth&&(se.minWidth=P.props.minWidth),se}},{key:"_getHeaderColumns",value:function(){var P=this,x=this.props,$=x.children;return(x.disableHeader?[]:Kt.Children.toArray($)).map(function(ee,se){return P._createHeader({column:ee,index:se})})}},{key:"_getRowHeight",value:function(P){var x=this.props.rowHeight;return typeof x=="function"?x({index:P}):x}},{key:"_onScroll",value:function(P){var x=P.clientHeight,$=P.scrollHeight,ee=P.scrollTop;(0,this.props.onScroll)({clientHeight:x,scrollHeight:$,scrollTop:ee})}},{key:"_onSectionRendered",value:function(P){var x=P.rowOverscanStartIndex,$=P.rowOverscanStopIndex,ee=P.rowStartIndex,se=P.rowStopIndex;(0,this.props.onRowsRendered)({overscanStartIndex:x,overscanStopIndex:$,startIndex:ee,stopIndex:se})}},{key:"_setRef",value:function(P){this.Grid=P}},{key:"_setScrollbarWidth",value:function(){var P=this.getScrollbarWidth();this.setState({scrollbarWidth:P})}}]),Q}();xe(Su,"propTypes",{"aria-label":et.string,"aria-labelledby":et.string,autoHeight:et.bool,children:function(Q){for(var P=Kt.Children.toArray(Q.children),x=0;x<P.length;x++){var $=P[x].type;if($!==za&&!($.prototype instanceof za))return new Error("Table only accepts children of type Column")}},className:et.string,disableHeader:et.bool,estimatedRowSize:et.number.isRequired,gridClassName:et.string,gridStyle:et.object,headerClassName:et.string,headerHeight:et.number.isRequired,headerRowRenderer:et.func,headerStyle:et.object,height:et.number.isRequired,id:et.string,noRowsRenderer:et.func,onColumnClick:et.func,onHeaderClick:et.func,onRowClick:et.func,onRowDoubleClick:et.func,onRowMouseOut:et.func,onRowMouseOver:et.func,onRowRightClick:et.func,onRowsRendered:et.func,onScroll:et.func.isRequired,overscanIndicesGetter:et.func.isRequired,overscanRowCount:et.number.isRequired,rowClassName:et.oneOfType([et.string,et.func]),rowGetter:et.func.isRequired,rowHeight:et.oneOfType([et.number,et.func]).isRequired,rowCount:et.number.isRequired,rowRenderer:et.func,rowStyle:et.oneOfType([et.object,et.func]).isRequired,scrollToAlignment:et.oneOf(["auto","end","start","center"]).isRequired,scrollToIndex:et.number.isRequired,scrollTop:et.number,sort:et.func,sortBy:et.string,sortDirection:et.oneOf([Ri.ASC,Ri.DESC]),style:et.object,tabIndex:et.number,width:et.number.isRequired}),xe(Su,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:Ua,overscanRowCount:10,rowRenderer:Lg,headerRowRenderer:kg,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var Eo=[],Wa=null,Co=null;function Ng(){Co&&(Co=null,gt.body&&Wa!=null&&(gt.body.style.pointerEvents=Wa),Wa=null)}s(Ng,"enablePointerEventsIfDisabled");function QS(){Ng(),Eo.forEach(function(Q){return Q.__resetIsScrolling()})}s(QS,"enablePointerEventsAfterDelayCallback");function xg(Q){Q.currentTarget===W&&Wa==null&&gt.body&&(Wa=gt.body.style.pointerEvents,gt.body.style.pointerEvents="none"),function(){Co&&Ct(Co);var P=0;Eo.forEach(function(x){P=Math.max(P,x.props.scrollingResetTimeInterval)}),Co=Wt(QS,P)}(),Eo.forEach(function(P){P.props.scrollElement===Q.currentTarget&&P.__handleWindowScrollEvent()})}s(xg,"onScrollWindow");function Bg(Q,P){Eo.some(function(x){return x.props.scrollElement===P})||P.addEventListener("scroll",xg),Eo.push(Q)}s(Bg,"registerScrollListener");function Fg(Q,P){(Eo=Eo.filter(function(x){return x!==Q})).length||(P.removeEventListener("scroll",xg),Co&&(Ct(Co),Ng()))}s(Fg,"unregisterScrollListener");var vu=s(function(Q){return Q===W},"isWindow"),Ga=s(function(Q){return Q.getBoundingClientRect()},"getBoundingBox");function Vg(Q,P){if(Q){if(vu(Q)){var x=W,$=x.innerHeight,ee=x.innerWidth;return{height:typeof $=="number"?$:0,width:typeof ee=="number"?ee:0}}return Ga(Q)}return{height:P.serverHeight,width:P.serverWidth}}s(Vg,"getDimensions");function Ug(Q){return vu(Q)&&gt.documentElement?{top:"scrollY"in W?W.scrollY:gt.documentElement.scrollTop,left:"scrollX"in W?W.scrollX:gt.documentElement.scrollLeft}:{top:Q.scrollTop,left:Q.scrollLeft}}s(Ug,"getScrollOffset");var Hg=s(function(){return typeof W<"u"?W:void 0},"getWindow"),zg=function(){function Q(){var P,x;jn(this,Q);for(var $=arguments.length,ee=new Array($),se=0;se<$;se++)ee[se]=arguments[se];return xe(nt(x=ai(this,(P=Zn(Q)).call.apply(P,[this].concat(ee)))),"_window",Hg()),xe(nt(x),"_isMounted",!1),xe(nt(x),"_positionFromTop",0),xe(nt(x),"_positionFromLeft",0),xe(nt(x),"_detectElementResize",void 0),xe(nt(x),"_child",void 0),xe(nt(x),"state",An({},Vg(x.props.scrollElement,x.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),xe(nt(x),"_registerChild",function(te){!te||te instanceof ti||Fe.warn("WindowScroller registerChild expects to be passed Element or null"),x._child=te,x.updatePosition()}),xe(nt(x),"_onChildScroll",function(te){var he=te.scrollTop;if(x.state.scrollTop!==he){var ye=x.props.scrollElement;ye&&(typeof ye.scrollTo=="function"?ye.scrollTo(0,he+x._positionFromTop):ye.scrollTop=he+x._positionFromTop)}}),xe(nt(x),"_registerResizeListener",function(te){te===W?W.addEventListener("resize",x._onResize,!1):x._detectElementResize.addResizeListener(te,x._onResize)}),xe(nt(x),"_unregisterResizeListener",function(te){te===W?W.removeEventListener("resize",x._onResize,!1):te&&x._detectElementResize.removeResizeListener(te,x._onResize)}),xe(nt(x),"_onResize",function(){x.updatePosition()}),xe(nt(x),"__handleWindowScrollEvent",function(){if(x._isMounted){var te=x.props.onScroll,he=x.props.scrollElement;if(he){var ye=Ug(he),ve=Math.max(0,ye.left-x._positionFromLeft),Te=Math.max(0,ye.top-x._positionFromTop);x.setState({isScrolling:!0,scrollLeft:ve,scrollTop:Te}),te({scrollLeft:ve,scrollTop:Te})}}}),xe(nt(x),"__resetIsScrolling",function(){x.setState({isScrolling:!1})}),x}return s(Q,"WindowScroller"),ii(Q,Kt.PureComponent),$n(Q,[{key:"updatePosition",value:function(P){var x=0<arguments.length&&P!==void 0?P:this.props.scrollElement,$=this.props.onResize,ee=this.state,se=ee.height,te=ee.width,he=this._child||gr.findDOMNode(this);if(he instanceof ti&&x){var ye=function(Te,Re){if(vu(Re)&&gt.documentElement){var Be=gt.documentElement,it=Ga(Te),Ve=Ga(Be);return{top:it.top-Ve.top,left:it.left-Ve.left}}var je=Ug(Re),ot=Ga(Te),at=Ga(Re);return{top:ot.top+je.top-at.top,left:ot.left+je.left-at.left}}(he,x);this._positionFromTop=ye.top,this._positionFromLeft=ye.left}var ve=Vg(x,this.props);se===ve.height&&te===ve.width||(this.setState({height:ve.height,width:ve.width}),$({height:ve.height,width:ve.width}))}},{key:"componentDidMount",value:function(){var P=this.props.scrollElement;this._detectElementResize=xr(),this.updatePosition(P),P&&(Bg(this,P),this._registerResizeListener(P)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(P){var x=this.props.scrollElement,$=P.scrollElement;$!==x&&$!=null&&x!=null&&(this.updatePosition(x),Fg(this,$),Bg(this,x),this._unregisterResizeListener($),this._registerResizeListener(x))}},{key:"componentWillUnmount",value:function(){var P=this.props.scrollElement;P&&(Fg(this,P),this._unregisterResizeListener(P)),this._isMounted=!1}},{key:"render",value:function(){var P=this.props.children,x=this.state,$=x.isScrolling,ee=x.scrollTop,se=x.scrollLeft,te=x.height,he=x.width;return P({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:te,isScrolling:$,scrollLeft:se,scrollTop:ee,width:he})}}]),Q}();xe(zg,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:150,scrollElement:Hg(),serverHeight:0,serverWidth:0}),Ln.ArrowKeyStepper=br,Ln.AutoSizer=Br,Ln.CellMeasurer=Da,Ln.CellMeasurerCache=La,Ln.Collection=C,Ln.Column=za,Ln.ColumnSizer=v,Ln.Grid=tr,Ln.InfiniteLoader=au,Ln.List=Eg,Ln.Masonry=pu,Ln.MultiGrid=Fl,Ln.ScrollSync=Mg,Ln.SortDirection=Ri,Ln.SortIndicator=gu,Ln.Table=Su,Ln.WindowScroller=zg,Ln.accessibilityOverscanIndicesGetter=Ua,Ln.createMasonryCellPositioner=function(Q){var P,x=Q.cellMeasurerCache,$=Q.columnCount,ee=Q.columnWidth,se=Q.spacer,te=se===void 0?0:se;function he(ve){for(var Te=0,Re=1;Re<P.length;Re++)P[Re]<P[Te]&&(Te=Re);var Be=Te*(ee+te),it=P[Te]||0;return P[Te]=it+x.getHeight(ve)+te,{left:Be,top:it}}s(he,"cellPositioner");function ye(){P=[];for(var ve=0;ve<$;ve++)P[ve]=0}return s(ye,"initOrResetDerivedValues"),ye(),he.reset=function(ve){$=ve.columnCount,ee=ve.columnWidth,te=ve.spacer,ye()},he},Ln.createTableMultiSort=function(Q){var P=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},x=P.defaultSortBy,$=P.defaultSortDirection,ee=$===void 0?{}:$;if(!Q)throw Error('Required parameter "sortCallback" not specified');var se=x||[],te={};return se.forEach(function(he){te[he]=ee[he]!==void 0?ee[he]:"ASC"}),{sort:function(he){var ye=he.defaultSortDirection,ve=he.event,Te=he.sortBy;if(ve.shiftKey)te[Te]!==void 0?te[Te]=te[Te]==="ASC"?"DESC":"ASC":(te[Te]=ye,se.push(Te));else if(ve.ctrlKey||ve.metaKey){var Re=se.indexOf(Te);0<=Re&&(se.splice(Re,1),delete te[Te])}else se.length=0,se.push(Te),Object.keys(te).forEach(function(Be){Be!==Te&&delete te[Be]}),te[Te]!==void 0?te[Te]=te[Te]==="ASC"?"DESC":"ASC":te[Te]=ye;Q({sortBy:se,sortDirection:te})},sortBy:se,sortDirection:te}},Ln.defaultCellRangeRenderer=le,Ln.defaultOverscanIndicesGetter=ie,Ln.defaultTableCellDataGetter=Pg,Ln.defaultTableCellRenderer=Rg,Ln.defaultTableHeaderRenderer=Dg,Ln.defaultTableHeaderRowRenderer=kg,Ln.defaultTableRowRenderer=Lg,Object.defineProperty(Ln,"__esModule",{value:!0})}),r.exports}},146880:function(U){(function(l,f){U.exports=f()})(this,function(){return function(l){var f={};function u(g){if(f[g])return f[g].exports;var m=f[g]={i:g,l:!1,exports:{}};return l[g].call(m.exports,m,m.exports,u),m.l=!0,m.exports}return s(u,"r"),u.m=l,u.c=f,u.d=function(g,m,h){u.o(g,m)||Object.defineProperty(g,m,{enumerable:!0,get:h})},u.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},u.t=function(g,m){if(1&m&&(g=u(g)),8&m||4&m&&typeof g=="object"&&g&&g.__esModule)return g;var h=Object.create(null);if(u.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:g}),2&m&&typeof g!="string")for(var a in g)u.d(h,a,function(r){return g[r]}.bind(null,a));return h},u.n=function(g){var m=g&&g.__esModule?function(){return g.default}:function(){return g};return u.d(m,"a",m),m},u.o=function(g,m){return Object.prototype.hasOwnProperty.call(g,m)},u.p="",u(u.s=90)}({17:function(l,f,u){"use strict";f.__esModule=!0,f.default=void 0;var g=u(18),m=function(){function h(){}return s(h,"e"),h.getFirstMatch=function(a,r){var n=r.match(a);return n&&n.length>0&&n[1]||""},h.getSecondMatch=function(a,r){var n=r.match(a);return n&&n.length>1&&n[2]||""},h.matchAndReturnConst=function(a,r,n){if(a.test(r))return n},h.getWindowsVersionName=function(a){switch(a){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},h.getMacOSVersionName=function(a){var r=a.split(".").splice(0,2).map(function(n){return parseInt(n,10)||0});if(r.push(0),r[0]===10)switch(r[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},h.getAndroidVersionName=function(a){var r=a.split(".").splice(0,2).map(function(n){return parseInt(n,10)||0});if(r.push(0),!(r[0]===1&&r[1]<5))return r[0]===1&&r[1]<6?"Cupcake":r[0]===1&&r[1]>=6?"Donut":r[0]===2&&r[1]<2?"Eclair":r[0]===2&&r[1]===2?"Froyo":r[0]===2&&r[1]>2?"Gingerbread":r[0]===3?"Honeycomb":r[0]===4&&r[1]<1?"Ice Cream Sandwich":r[0]===4&&r[1]<4?"Jelly Bean":r[0]===4&&r[1]>=4?"KitKat":r[0]===5?"Lollipop":r[0]===6?"Marshmallow":r[0]===7?"Nougat":r[0]===8?"Oreo":r[0]===9?"Pie":void 0},h.getVersionPrecision=function(a){return a.split(".").length},h.compareVersions=function(a,r,n){n===void 0&&(n=!1);var e=h.getVersionPrecision(a),t=h.getVersionPrecision(r),i=Math.max(e,t),o=0,c=h.map([a,r],function(p){var S=i-h.getVersionPrecision(p),d=p+new Array(S+1).join(".0");return h.map(d.split("."),function(y){return new Array(20-y.length).join("0")+y}).reverse()});for(n&&(o=i-Math.min(e,t)),i-=1;i>=o;){if(c[0][i]>c[1][i])return 1;if(c[0][i]===c[1][i]){if(i===o)return 0;i-=1}else if(c[0][i]<c[1][i])return-1}},h.map=function(a,r){var n,e=[];if(Array.prototype.map)return Array.prototype.map.call(a,r);for(n=0;n<a.length;n+=1)e.push(r(a[n]));return e},h.find=function(a,r){var n,e;if(Array.prototype.find)return Array.prototype.find.call(a,r);for(n=0,e=a.length;n<e;n+=1){var t=a[n];if(r(t,n))return t}},h.assign=function(a){for(var r,n,e=a,t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[a].concat(i));var c=s(function(){var p=i[r];typeof p=="object"&&p!==null&&Object.keys(p).forEach(function(S){e[S]=p[S]})},"o");for(r=0,n=i.length;r<n;r+=1)c();return a},h.getBrowserAlias=function(a){return g.BROWSER_ALIASES_MAP[a]},h.getBrowserTypeByAlias=function(a){return g.BROWSER_MAP[a]||""},h}();f.default=m,l.exports=f.default},18:function(l,f,u){"use strict";f.__esModule=!0,f.ENGINE_MAP=f.OS_MAP=f.PLATFORMS_MAP=f.BROWSER_MAP=f.BROWSER_ALIASES_MAP=void 0,f.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},f.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},f.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},f.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},f.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(l,f,u){"use strict";f.__esModule=!0,f.default=void 0;var g,m=(g=u(91))&&g.__esModule?g:{default:g},h=u(18);function a(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}s(a,"a");var r=function(){function n(){}s(n,"e");var e,t,i;return n.getParser=function(o,c){if(c===void 0&&(c=!1),typeof o!="string")throw new Error("UserAgent should be a string");return new m.default(o,c)},n.parse=function(o){return new m.default(o).getResult()},e=n,i=[{key:"BROWSER_MAP",get:function(){return h.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return h.ENGINE_MAP}},{key:"OS_MAP",get:function(){return h.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return h.PLATFORMS_MAP}}],(t=null)&&a(e.prototype,t),i&&a(e,i),n}();f.default=r,l.exports=f.default},91:function(l,f,u){"use strict";f.__esModule=!0,f.default=void 0;var g=n(u(92)),m=n(u(93)),h=n(u(94)),a=n(u(95)),r=n(u(17));function n(t){return t&&t.__esModule?t:{default:t}}s(n,"u");var e=function(){function t(o,c){if(c===void 0&&(c=!1),o==null||o==="")throw new Error("UserAgent parameter can't be empty");this._ua=o,this.parsedResult={},c!==!0&&this.parse()}s(t,"e");var i=t.prototype;return i.getUA=function(){return this._ua},i.test=function(o){return o.test(this._ua)},i.parseBrowser=function(){var o=this;this.parsedResult.browser={};var c=r.default.find(g.default,function(p){if(typeof p.test=="function")return p.test(o);if(p.test instanceof Array)return p.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return c&&(this.parsedResult.browser=c.describe(this.getUA())),this.parsedResult.browser},i.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},i.getBrowserName=function(o){return o?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},i.getBrowserVersion=function(){return this.getBrowser().version},i.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},i.parseOS=function(){var o=this;this.parsedResult.os={};var c=r.default.find(m.default,function(p){if(typeof p.test=="function")return p.test(o);if(p.test instanceof Array)return p.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return c&&(this.parsedResult.os=c.describe(this.getUA())),this.parsedResult.os},i.getOSName=function(o){var c=this.getOS().name;return o?String(c).toLowerCase()||"":c||""},i.getOSVersion=function(){return this.getOS().version},i.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},i.getPlatformType=function(o){o===void 0&&(o=!1);var c=this.getPlatform().type;return o?String(c).toLowerCase()||"":c||""},i.parsePlatform=function(){var o=this;this.parsedResult.platform={};var c=r.default.find(h.default,function(p){if(typeof p.test=="function")return p.test(o);if(p.test instanceof Array)return p.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return c&&(this.parsedResult.platform=c.describe(this.getUA())),this.parsedResult.platform},i.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},i.getEngineName=function(o){return o?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},i.parseEngine=function(){var o=this;this.parsedResult.engine={};var c=r.default.find(a.default,function(p){if(typeof p.test=="function")return p.test(o);if(p.test instanceof Array)return p.test.some(function(S){return o.test(S)});throw new Error("Browser's test function is not valid")});return c&&(this.parsedResult.engine=c.describe(this.getUA())),this.parsedResult.engine},i.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},i.getResult=function(){return r.default.assign({},this.parsedResult)},i.satisfies=function(o){var c=this,p={},S=0,d={},y=0;if(Object.keys(o).forEach(function(N){var T=o[N];typeof T=="string"?(d[N]=T,y+=1):typeof T=="object"&&(p[N]=T,S+=1)}),S>0){var E=Object.keys(p),I=r.default.find(E,function(N){return c.isOS(N)});if(I){var A=this.satisfies(p[I]);if(A!==void 0)return A}var L=r.default.find(E,function(N){return c.isPlatform(N)});if(L){var M=this.satisfies(p[L]);if(M!==void 0)return M}}if(y>0){var k=Object.keys(d),w=r.default.find(k,function(N){return c.isBrowser(N,!0)});if(w!==void 0)return this.compareVersion(d[w])}},i.isBrowser=function(o,c){c===void 0&&(c=!1);var p=this.getBrowserName().toLowerCase(),S=o.toLowerCase(),d=r.default.getBrowserTypeByAlias(S);return c&&d&&(S=d.toLowerCase()),S===p},i.compareVersion=function(o){var c=[0],p=o,S=!1,d=this.getBrowserVersion();if(typeof d=="string")return o[0]===">"||o[0]==="<"?(p=o.substr(1),o[1]==="="?(S=!0,p=o.substr(2)):c=[],o[0]===">"?c.push(1):c.push(-1)):o[0]==="="?p=o.substr(1):o[0]==="~"&&(S=!0,p=o.substr(1)),c.indexOf(r.default.compareVersions(d,p,S))>-1},i.isOS=function(o){return this.getOSName(!0)===String(o).toLowerCase()},i.isPlatform=function(o){return this.getPlatformType(!0)===String(o).toLowerCase()},i.isEngine=function(o){return this.getEngineName(!0)===String(o).toLowerCase()},i.is=function(o,c){return c===void 0&&(c=!1),this.isBrowser(o,c)||this.isOS(o)||this.isPlatform(o)},i.some=function(o){var c=this;return o===void 0&&(o=[]),o.some(function(p){return c.is(p)})},t}();f.default=e,l.exports=f.default},92:function(l,f,u){"use strict";f.__esModule=!0,f.default=void 0;var g,m=(g=u(17))&&g.__esModule?g:{default:g},h=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(r){var n={name:"Googlebot"},e=m.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,r)||m.default.getFirstMatch(h,r);return e&&(n.version=e),n}},{test:[/opera/i],describe:function(r){var n={name:"Opera"},e=m.default.getFirstMatch(h,r)||m.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/opr\/|opios/i],describe:function(r){var n={name:"Opera"},e=m.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,r)||m.default.getFirstMatch(h,r);return e&&(n.version=e),n}},{test:[/SamsungBrowser/i],describe:function(r){var n={name:"Samsung Internet for Android"},e=m.default.getFirstMatch(h,r)||m.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/Whale/i],describe:function(r){var n={name:"NAVER Whale Browser"},e=m.default.getFirstMatch(h,r)||m.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/MZBrowser/i],describe:function(r){var n={name:"MZ Browser"},e=m.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,r)||m.default.getFirstMatch(h,r);return e&&(n.version=e),n}},{test:[/focus/i],describe:function(r){var n={name:"Focus"},e=m.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,r)||m.default.getFirstMatch(h,r);return e&&(n.version=e),n}},{test:[/swing/i],describe:function(r){var n={name:"Swing"},e=m.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,r)||m.default.getFirstMatch(h,r);return e&&(n.version=e),n}},{test:[/coast/i],describe:function(r){var n={name:"Opera Coast"},e=m.default.getFirstMatch(h,r)||m.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(r){var n={name:"Opera Touch"},e=m.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(h,r);return e&&(n.version=e),n}},{test:[/yabrowser/i],describe:function(r){var n={name:"Yandex Browser"},e=m.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(h,r);return e&&(n.version=e),n}},{test:[/ucbrowser/i],describe:function(r){var n={name:"UC Browser"},e=m.default.getFirstMatch(h,r)||m.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/Maxthon|mxios/i],describe:function(r){var n={name:"Maxthon"},e=m.default.getFirstMatch(h,r)||m.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/epiphany/i],describe:function(r){var n={name:"Epiphany"},e=m.default.getFirstMatch(h,r)||m.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/puffin/i],describe:function(r){var n={name:"Puffin"},e=m.default.getFirstMatch(h,r)||m.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/sleipnir/i],describe:function(r){var n={name:"Sleipnir"},e=m.default.getFirstMatch(h,r)||m.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/k-meleon/i],describe:function(r){var n={name:"K-Meleon"},e=m.default.getFirstMatch(h,r)||m.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/micromessenger/i],describe:function(r){var n={name:"WeChat"},e=m.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(h,r);return e&&(n.version=e),n}},{test:[/qqbrowser/i],describe:function(r){var n={name:/qqbrowserlite/i.test(r)?"QQ Browser Lite":"QQ Browser"},e=m.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(h,r);return e&&(n.version=e),n}},{test:[/msie|trident/i],describe:function(r){var n={name:"Internet Explorer"},e=m.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/\sedg\//i],describe:function(r){var n={name:"Microsoft Edge"},e=m.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/edg([ea]|ios)/i],describe:function(r){var n={name:"Microsoft Edge"},e=m.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/vivaldi/i],describe:function(r){var n={name:"Vivaldi"},e=m.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/seamonkey/i],describe:function(r){var n={name:"SeaMonkey"},e=m.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/sailfish/i],describe:function(r){var n={name:"Sailfish"},e=m.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,r);return e&&(n.version=e),n}},{test:[/silk/i],describe:function(r){var n={name:"Amazon Silk"},e=m.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/phantom/i],describe:function(r){var n={name:"PhantomJS"},e=m.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/slimerjs/i],describe:function(r){var n={name:"SlimerJS"},e=m.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(r){var n={name:"BlackBerry"},e=m.default.getFirstMatch(h,r)||m.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/(web|hpw)[o0]s/i],describe:function(r){var n={name:"WebOS Browser"},e=m.default.getFirstMatch(h,r)||m.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/bada/i],describe:function(r){var n={name:"Bada"},e=m.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/tizen/i],describe:function(r){var n={name:"Tizen"},e=m.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(h,r);return e&&(n.version=e),n}},{test:[/qupzilla/i],describe:function(r){var n={name:"QupZilla"},e=m.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(h,r);return e&&(n.version=e),n}},{test:[/firefox|iceweasel|fxios/i],describe:function(r){var n={name:"Firefox"},e=m.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/electron/i],describe:function(r){var n={name:"Electron"},e=m.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/MiuiBrowser/i],describe:function(r){var n={name:"Miui"},e=m.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/chromium/i],describe:function(r){var n={name:"Chromium"},e=m.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,r)||m.default.getFirstMatch(h,r);return e&&(n.version=e),n}},{test:[/chrome|crios|crmo/i],describe:function(r){var n={name:"Chrome"},e=m.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/GSA/i],describe:function(r){var n={name:"Google Search"},e=m.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:function(r){var n=!r.test(/like android/i),e=r.test(/android/i);return n&&e},describe:function(r){var n={name:"Android Browser"},e=m.default.getFirstMatch(h,r);return e&&(n.version=e),n}},{test:[/playstation 4/i],describe:function(r){var n={name:"PlayStation 4"},e=m.default.getFirstMatch(h,r);return e&&(n.version=e),n}},{test:[/safari|applewebkit/i],describe:function(r){var n={name:"Safari"},e=m.default.getFirstMatch(h,r);return e&&(n.version=e),n}},{test:[/.*/i],describe:function(r){var n=r.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:m.default.getFirstMatch(n,r),version:m.default.getSecondMatch(n,r)}}}];f.default=a,l.exports=f.default},93:function(l,f,u){"use strict";f.__esModule=!0,f.default=void 0;var g,m=(g=u(17))&&g.__esModule?g:{default:g},h=u(18),a=[{test:[/Roku\/DVP/],describe:function(r){var n=m.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,r);return{name:h.OS_MAP.Roku,version:n}}},{test:[/windows phone/i],describe:function(r){var n=m.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,r);return{name:h.OS_MAP.WindowsPhone,version:n}}},{test:[/windows /i],describe:function(r){var n=m.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,r),e=m.default.getWindowsVersionName(n);return{name:h.OS_MAP.Windows,version:n,versionName:e}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(r){var n={name:h.OS_MAP.iOS},e=m.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,r);return e&&(n.version=e),n}},{test:[/macintosh/i],describe:function(r){var n=m.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,r).replace(/[_\s]/g,"."),e=m.default.getMacOSVersionName(n),t={name:h.OS_MAP.MacOS,version:n};return e&&(t.versionName=e),t}},{test:[/(ipod|iphone|ipad)/i],describe:function(r){var n=m.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,r).replace(/[_\s]/g,".");return{name:h.OS_MAP.iOS,version:n}}},{test:function(r){var n=!r.test(/like android/i),e=r.test(/android/i);return n&&e},describe:function(r){var n=m.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,r),e=m.default.getAndroidVersionName(n),t={name:h.OS_MAP.Android,version:n};return e&&(t.versionName=e),t}},{test:[/(web|hpw)[o0]s/i],describe:function(r){var n=m.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,r),e={name:h.OS_MAP.WebOS};return n&&n.length&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(r){var n=m.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,r)||m.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,r)||m.default.getFirstMatch(/\bbb(\d+)/i,r);return{name:h.OS_MAP.BlackBerry,version:n}}},{test:[/bada/i],describe:function(r){var n=m.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,r);return{name:h.OS_MAP.Bada,version:n}}},{test:[/tizen/i],describe:function(r){var n=m.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,r);return{name:h.OS_MAP.Tizen,version:n}}},{test:[/linux/i],describe:function(){return{name:h.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:h.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(r){var n=m.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,r);return{name:h.OS_MAP.PlayStation4,version:n}}}];f.default=a,l.exports=f.default},94:function(l,f,u){"use strict";f.__esModule=!0,f.default=void 0;var g,m=(g=u(17))&&g.__esModule?g:{default:g},h=u(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(r){var n=m.default.getFirstMatch(/(can-l01)/i,r)&&"Nova",e={type:h.PLATFORMS_MAP.mobile,vendor:"Huawei"};return n&&(e.model=n),e}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:h.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:h.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:h.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:h.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:h.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:h.PLATFORMS_MAP.tablet}}},{test:function(r){var n=r.test(/ipod|iphone/i),e=r.test(/like (ipod|iphone)/i);return n&&!e},describe:function(r){var n=m.default.getFirstMatch(/(ipod|iphone)/i,r);return{type:h.PLATFORMS_MAP.mobile,vendor:"Apple",model:n}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:h.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:h.PLATFORMS_MAP.mobile}}},{test:function(r){return r.getBrowserName(!0)==="blackberry"},describe:function(){return{type:h.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(r){return r.getBrowserName(!0)==="bada"},describe:function(){return{type:h.PLATFORMS_MAP.mobile}}},{test:function(r){return r.getBrowserName()==="windows phone"},describe:function(){return{type:h.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(r){var n=Number(String(r.getOSVersion()).split(".")[0]);return r.getOSName(!0)==="android"&&n>=3},describe:function(){return{type:h.PLATFORMS_MAP.tablet}}},{test:function(r){return r.getOSName(!0)==="android"},describe:function(){return{type:h.PLATFORMS_MAP.mobile}}},{test:function(r){return r.getOSName(!0)==="macos"},describe:function(){return{type:h.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(r){return r.getOSName(!0)==="windows"},describe:function(){return{type:h.PLATFORMS_MAP.desktop}}},{test:function(r){return r.getOSName(!0)==="linux"},describe:function(){return{type:h.PLATFORMS_MAP.desktop}}},{test:function(r){return r.getOSName(!0)==="playstation 4"},describe:function(){return{type:h.PLATFORMS_MAP.tv}}},{test:function(r){return r.getOSName(!0)==="roku"},describe:function(){return{type:h.PLATFORMS_MAP.tv}}}];f.default=a,l.exports=f.default},95:function(l,f,u){"use strict";f.__esModule=!0,f.default=void 0;var g,m=(g=u(17))&&g.__esModule?g:{default:g},h=u(18),a=[{test:function(r){return r.getBrowserName(!0)==="microsoft edge"},describe:function(r){if(/\sedg\//i.test(r))return{name:h.ENGINE_MAP.Blink};var n=m.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,r);return{name:h.ENGINE_MAP.EdgeHTML,version:n}}},{test:[/trident/i],describe:function(r){var n={name:h.ENGINE_MAP.Trident},e=m.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:function(r){return r.test(/presto/i)},describe:function(r){var n={name:h.ENGINE_MAP.Presto},e=m.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:function(r){var n=r.test(/gecko/i),e=r.test(/like gecko/i);return n&&!e},describe:function(r){var n={name:h.ENGINE_MAP.Gecko},e=m.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:h.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(r){var n={name:h.ENGINE_MAP.WebKit},e=m.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,r);return e&&(n.version=e),n}}];f.default=a,l.exports=f.default}})})},248468:(U,l,f)=>{"use strict";f.r(l),f.d(l,{BotInfo:()=>a,BrowserInfo:()=>g,NodeInfo:()=>m,ReactNativeInfo:()=>r,SearchBotDeviceInfo:()=>h,browserName:()=>S,detect:()=>c,detectOS:()=>y,getNodeVersion:()=>E,parseUserAgent:()=>d});var u=function(A,L,M){if(M||arguments.length===2)for(var k=0,w=L.length,N;k<w;k++)(N||!(k in L))&&(N||(N=Array.prototype.slice.call(L,0,k)),N[k]=L[k]);return A.concat(N||Array.prototype.slice.call(L))},g=function(){function A(L,M,k){this.name=L,this.version=M,this.os=k,this.type="browser"}return s(A,"BrowserInfo"),A}(),m=function(){function A(L){this.version=L,this.type="node",this.name="node",this.os=(void 0).platform}return s(A,"NodeInfo"),A}(),h=function(){function A(L,M,k,w){this.name=L,this.version=M,this.os=k,this.bot=w,this.type="bot-device"}return s(A,"SearchBotDeviceInfo"),A}(),a=function(){function A(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return s(A,"BotInfo"),A}(),r=function(){function A(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return s(A,"ReactNativeInfo"),A}(),n=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,e=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,t=3,i=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",n]],o=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function c(A){return A?d(A):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new r:typeof navigator<"u"?d(navigator.userAgent):E()}s(c,"detect");function p(A){return A!==""&&i.reduce(function(L,M){var k=M[0],w=M[1];if(L)return L;var N=w.exec(A);return!!N&&[k,N]},!1)}s(p,"matchUserAgent");function S(A){var L=p(A);return L?L[0]:null}s(S,"browserName");function d(A){var L=p(A);if(!L)return null;var M=L[0],k=L[1];if(M==="searchbot")return new a;var w=k[1]&&k[1].split(".").join("_").split("_").slice(0,3);w?w.length<t&&(w=u(u([],w,!0),I(t-w.length),!0)):w=[];var N=w.join("."),T=y(A),O=e.exec(A);return O&&O[1]?new h(M,N,T,O[1]):new g(M,N,T)}s(d,"parseUserAgent");function y(A){for(var L=0,M=o.length;L<M;L++){var k=o[L],w=k[0],N=k[1],T=N.exec(A);if(T)return w}return null}s(y,"detectOS");function E(){var A=!1;return A?new m((void 0).version.slice(1)):null}s(E,"getNodeVersion");function I(A){for(var L=[],M=0;M<A;M++)L.push("0");return L}s(I,"createVersionParts")},920825:(U,l,f)=>{"use strict";f.d(l,{P:()=>g});function u(h){return s(({dispatch:r,getState:n})=>e=>t=>typeof t=="function"?t(r,n,h):e(t),"middleware")}s(u,"createThunkMiddleware");var g=u(),m=null},906308:()=>{(function(){var U=["user-blocking","user-visible","background"];class l{constructor(){this.channel_=new MessageChannel,this.sendPort_=this.channel_.port2,this.messages_={},this.nextMessageHandle_=1,this.channel_.port1.onmessage=n=>this.onMessageReceived_(n)}queueCallback(n){var e=this.nextMessageHandle_++;return this.messages_[e]=n,this.sendPort_.postMessage(e),e}cancelCallback(n){delete this.messages_[n]}onMessageReceived_(n){var e=n.data;if(e in this.messages_){var t=this.messages_[e];delete this.messages_[e],t()}}}s(l,"t");function f(){return f.instance_||(f.instance_=new l),f.instance_}s(f,"i");class u{constructor(n,e,t){t===void 0&&(t=0),this.callback_=n,this.callbackType_=null,this.handle_=null,this.canceled_=!1,this.schedule_(e,t)}isIdleCallback(){return this.callbackType_===0}isMessageChannelCallback(){return this.callbackType_===2}cancel(){if(!this.canceled_)switch(this.canceled_=!0,this.callbackType_){case 0:cancelIdleCallback(this.handle_);break;case 1:clearTimeout(this.handle_);break;case 2:f().cancelCallback(this.handle_);break;default:throw new TypeError("Unknown CallbackType")}}schedule_(n,e){if(e&&e>0)return this.callbackType_=1,void(this.handle_=setTimeout(()=>{this.runCallback_()},e));if(!U.includes(n))throw new TypeError("Invalid task priority : "+n);return n==="background"&&typeof requestIdleCallback=="function"?(this.callbackType_=0,void(this.handle_=requestIdleCallback(()=>{this.runCallback_()}))):typeof MessageChannel=="function"?(this.callbackType_=2,void(this.handle_=f().queueCallback(()=>{this.runCallback_()}))):(this.callbackType_=1,void(this.handle_=setTimeout(()=>{this.runCallback_()})))}runCallback_(){this.canceled_||this.callback_()}}s(u,"s");var g=0;class m{constructor(){this.head_=null,this.tail_=null}isEmpty(){return this.head_==null}push(n){if(typeof n!="object")throw new TypeError("Task must be an Object");n.tq_sequence_=g++,this.isEmpty()?(n.tq_prev_=null,this.head_=n):(n.tq_prev_=this.tail_,this.tail_.tq_next_=n),n.tq_next_=null,this.tail_=n}takeNextTask(){if(this.isEmpty())return null;var n=this.head_;return this.remove_(n),n}merge(n,e){if(typeof e!="function")throw new TypeError("Must provide a selector function.");if(n==null)throw new Error("sourceQueue cannot be null");for(var t=this.head_,i=null,o=n.head_;o;){var c=o;if(o=o.tq_next_,e(c)){for(n.remove_(c);t&&t.tq_sequence_<c.tq_sequence_;)i=t,t=t.tq_next_;this.insert_(c,i),i=c}}}toArray(){for(var n=this.head_,e=[];n!==null;)e.push(n),n=n.tq_next_;return e}insert_(n,e){if(e!=this.tail_){var t=e?e.tq_next_:this.head_;n.tq_next_=t,t.tq_prev_=n,n.tq_prev_=e,e!=null?e.tq_next_=n:this.head_=n}else this.push(n)}remove_(n){if(n==null)throw new Error("Expected task to be non-null");n===this.head_&&(this.head_=n.tq_next_),n===this.tail_&&(this.tail_=this.tail_.tq_prev_),n.tq_next_&&(n.tq_next_.tq_prev_=n.tq_prev_),n.tq_prev_&&(n.tq_prev_.tq_next_=n.tq_next_)}}s(m,"a");class h extends Event{constructor(n,e){if(!e||!U.includes(e.previousPriority))throw new TypeError("Invalid task priority: '"+e.previousPriority+"'");super(n),this.previousPriority=e.previousPriority}}s(h,"n");class a extends AbortController{constructor(n){if(n===void 0&&(n={}),super(),n==null&&(n={}),typeof n!="object")throw new TypeError("'init' is not an object");var e,t,i=n.priority===void 0?"user-visible":n.priority;if(!U.includes(i))throw new TypeError("Invalid task priority: '"+i+"'");this.priority_=i,this.isPriorityChanging_=!1,t=(e=this).signal,Object.defineProperties(t,{priority:{get:function(){return e.priority_},enumerable:!0},onprioritychange:{value:null,writable:!0,enumerable:!0}}),t.addEventListener("prioritychange",o=>{t.onprioritychange&&t.onprioritychange(o)})}setPriority(n){if(!U.includes(n))throw new TypeError("Invalid task priority: "+n);if(this.isPriorityChanging_)throw new DOMException("","NotAllowedError");if(this.signal.priority!==n){this.isPriorityChanging_=!0;var e=this.priority_;this.priority_=n;var t=new h("prioritychange",{previousPriority:e});this.signal.dispatchEvent(t),this.isPriorityChanging_=!1}}}s(a,"l"),self.scheduler===void 0&&(self.scheduler=new class{constructor(){this.queues_={},U.forEach(r=>{this.queues_[r]=new m}),this.pendingHostCallback_=null,this.signals_=new WeakMap}postTask(r,n){if((n=Object.assign({},n)).signal!==void 0){if(n.signal===null||!("aborted"in n.signal)||typeof n.signal.addEventListener!="function")return Promise.reject(new TypeError("'signal' is not a valid 'AbortSignal'"));if(n.signal&&n.signal.priority&&!U.includes(n.signal.priority))return Promise.reject(new TypeError("Invalid task priority: '"+n.signal.priority+"'"))}if(n.priority!==void 0&&(n.priority===null||!U.includes(n.priority)))return Promise.reject(new TypeError("Invalid task priority: '"+n.priority+"'"));if(n.delay===void 0&&(n.delay=0),n.delay=Number(n.delay),n.delay<0)return Promise.reject(new TypeError("'delay' must be a positive number."));var e={callback:r,options:n,resolve:null,reject:null,hostCallback:null,abortCallback:null,onTaskCompleted:function(){this.options.signal&&this.abortCallback&&(this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null)},onTaskAborted:function(){this.hostCallback&&(this.hostCallback.cancel(),this.hostCallback=null),this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null,this.reject(this.options.signal.reason)},isAborted:function(){return this.options.signal&&this.options.signal.aborted}},t=new Promise((i,o)=>{e.resolve=i,e.reject=o});return this.schedule_(e),t}schedule_(r){var n=r.options.signal;if(n){if(n.aborted)return void r.reject(n.reason);r.abortCallback=()=>{r.onTaskAborted()},n.addEventListener("abort",r.abortCallback)}r.options.delay>0?r.hostCallback=new u(()=>{r.hostCallback=null,this.onTaskDelayExpired_(r)},null,r.options.delay):(this.pushTask_(r),this.scheduleHostCallbackIfNeeded_())}onTaskDelayExpired_(r){this.pushTask_(r),this.pendingHostCallback_&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.schedulerEntryCallback_()}onPriorityChange_(r){var n=this.signals_.get(r);if(n===void 0)throw new Error("Attempting to change priority on an unregistered signal");n!==r.priority&&(this.queues_[r.priority].merge(this.queues_[n],e=>e.options.signal===r),this.signals_.set(r,r.priority))}schedulerEntryCallback_(){this.pendingHostCallback_=null,this.runNextTask_(),this.scheduleHostCallbackIfNeeded_()}scheduleHostCallbackIfNeeded_(){var r=this.nextTaskPriority_();r!=null&&(r!=="background"&&this.pendingHostCallback_&&this.pendingHostCallback_.isIdleCallback()&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.pendingHostCallback_||(this.pendingHostCallback_=new u(()=>{this.schedulerEntryCallback_()},r,0)))}pushTask_(r){var n;if(!U.includes(n=r.options.priority?r.options.priority:r.options.signal&&r.options.signal.priority?r.options.signal.priority:"user-visible"))throw new TypeError("Invalid task priority: "+n);if(r.options.signal&&r.options.signal.priority){var e=r.options.signal;this.signals_.has(e)||(e.addEventListener("prioritychange",()=>{this.onPriorityChange_(e)}),this.signals_.set(e,e.priority))}this.queues_[n].push(r)}runNextTask_(){var r=null;do{var n=this.nextTaskPriority_();if(n==null)return;r=this.queues_[n].takeNextTask()}while(r.isAborted());try{var e=r.callback();r.resolve(e)}catch(t){r.reject(t)}finally{r.onTaskCompleted()}}nextTaskPriority_(){for(var r=0;r<U.length;r++){var n=U[r];if(!this.queues_[n].isEmpty())return n}return null}},self.TaskController=a,self.TaskPriorityChangeEvent=h)})()},477262:(U,l,f)=>{"use strict";f.d(l,{Q:()=>u,c:()=>g});var u;(function(m){m[m.ID=25]="ID",m[m.FRECENCY=0]="FRECENCY",m[m.RAW_FRECENCY=65]="RAW_FRECENCY",m[m.FRECENCY_BONUS=76]="FRECENCY_BONUS",m[m.FRECENCY_WEIGHT_HIT_VISITS=91]="FRECENCY_WEIGHT_HIT_VISITS",m[m.FRECENCY_HIT_COUNT=92]="FRECENCY_HIT_COUNT",m[m.FRECENCY_WEIGHT_ITEM_VISITS=93]="FRECENCY_WEIGHT_ITEM_VISITS",m[m.FRECENCY_ITEM_COUNT=94]="FRECENCY_ITEM_COUNT",m[m.FRECENCY_LOG_HIT_COUNT=105]="FRECENCY_LOG_HIT_COUNT",m[m.FRECENCY_LOG_HIT_COUNT_SCALED=106]="FRECENCY_LOG_HIT_COUNT_SCALED",m[m.FRECENCY_LOG_ITEM_COUNT=159]="FRECENCY_LOG_ITEM_COUNT",m[m.FRECENCY_LOG_ITEM_COUNT_SCALED=160]="FRECENCY_LOG_ITEM_COUNT_SCALED",m[m.FRECENCY_HIT_VISIT_DECAY_2H=162]="FRECENCY_HIT_VISIT_DECAY_2H",m[m.FRECENCY_HIT_VISIT_DECAY_7D=163]="FRECENCY_HIT_VISIT_DECAY_7D",m[m.FRECENCY_ITEM_VISIT_DECAY_2H=164]="FRECENCY_ITEM_VISIT_DECAY_2H",m[m.FRECENCY_ITEM_VISIT_DECAY_7D=165]="FRECENCY_ITEM_VISIT_DECAY_7D",m[m.FRECENCY_HIT_VISITS_4H=242]="FRECENCY_HIT_VISITS_4H",m[m.FRECENCY_HIT_VISITS_1D=243]="FRECENCY_HIT_VISITS_1D",m[m.FRECENCY_HIT_VISITS_3D=244]="FRECENCY_HIT_VISITS_3D",m[m.FRECENCY_HIT_VISITS_1W=245]="FRECENCY_HIT_VISITS_1W",m[m.FRECENCY_HIT_VISITS_1M=246]="FRECENCY_HIT_VISITS_1M",m[m.FRECENCY_HIT_VISITS_90D=247]="FRECENCY_HIT_VISITS_90D",m[m.FRECENCY_ITEM_VISITS_4H=248]="FRECENCY_ITEM_VISITS_4H",m[m.FRECENCY_ITEM_VISITS_1D=249]="FRECENCY_ITEM_VISITS_1D",m[m.FRECENCY_ITEM_VISITS_3D=250]="FRECENCY_ITEM_VISITS_3D",m[m.FRECENCY_ITEM_VISITS_1W=251]="FRECENCY_ITEM_VISITS_1W",m[m.FRECENCY_ITEM_VISITS_1M=252]="FRECENCY_ITEM_VISITS_1M",m[m.FRECENCY_ITEM_VISITS_90D=253]="FRECENCY_ITEM_VISITS_90D",m[m.TYPE_NAVIGATION_CHANNEL=2]="TYPE_NAVIGATION_CHANNEL",m[m.TYPE_NAVIGATION_LINK=172]="TYPE_NAVIGATION_LINK",m[m.TYPE_NAVIGATION_MPIM=4]="TYPE_NAVIGATION_MPIM",m[m.TYPE_NAVIGATION_MODAL=177]="TYPE_NAVIGATION_MODAL",m[m.TYPE_NAVIGATION_USER=5]="TYPE_NAVIGATION_USER",m[m.TYPE_QUERY=6]="TYPE_QUERY",m[m.TYPE_QUERY_HISTORY=7]="TYPE_QUERY_HISTORY",m[m.TYPE_EMOJI=178]="TYPE_EMOJI",m[m.ACTIVE_TOKEN_FILTER_IN=8]="ACTIVE_TOKEN_FILTER_IN",m[m.ACTIVE_TOKEN_FILTER_FROM=9]="ACTIVE_TOKEN_FILTER_FROM",m[m.ACTIVE_TOKEN_FILTER_TO=10]="ACTIVE_TOKEN_FILTER_TO",m[m.ACTIVE_TOKEN_FILTER_BEFORE=11]="ACTIVE_TOKEN_FILTER_BEFORE",m[m.ACTIVE_TOKEN_FILTER_DURING=12]="ACTIVE_TOKEN_FILTER_DURING",m[m.ACTIVE_TOKEN_FILTER_ON=13]="ACTIVE_TOKEN_FILTER_ON",m[m.ACTIVE_TOKEN_FILTER_AFTER=14]="ACTIVE_TOKEN_FILTER_AFTER",m[m.ACTIVE_TOKEN_FILTER_HAS=15]="ACTIVE_TOKEN_FILTER_HAS",m[m.ACTIVE_TOKEN_FILTER_IS=155]="ACTIVE_TOKEN_FILTER_IS",m[m.ACTIVE_TOKEN_FILTER_WITH=233]="ACTIVE_TOKEN_FILTER_WITH",m[m.ACTIVE_TOKEN_MEMBER=16]="ACTIVE_TOKEN_MEMBER",m[m.ACTIVE_TOKEN_STRING=17]="ACTIVE_TOKEN_STRING",m[m.ACTIVE_TOKEN_PHRASE=18]="ACTIVE_TOKEN_PHRASE",m[m.STRING_EXACT_MATCH=19]="STRING_EXACT_MATCH",m[m.STRING_EXACT_PREFIX_MATCH=20]="STRING_EXACT_PREFIX_MATCH",m[m.STRING_NORMAL_MATCH=21]="STRING_NORMAL_MATCH",m[m.STRING_NORMAL_PREFIX_MATCH=22]="STRING_NORMAL_PREFIX_MATCH",m[m.STRING_SAME_NUMBER_WORDS=23]="STRING_SAME_NUMBER_WORDS",m[m.EXCESS_STRING_LENGTH=24]="EXCESS_STRING_LENGTH",m[m.EXACT_MATCH_LOG_RESULTS=229]="EXACT_MATCH_LOG_RESULTS",m[m.FILE_SUGGESTION_SCORE=26]="FILE_SUGGESTION_SCORE",m[m.ACTIVE_TOKEN_QUERY_SUGGESTION=27]="ACTIVE_TOKEN_QUERY_SUGGESTION",m[m.QUERY_SUGGESTION_SCORE_V2=28]="QUERY_SUGGESTION_SCORE_V2",m[m.TYPE_NAVIGATION_TEAM=31]="TYPE_NAVIGATION_TEAM",m[m.TYPE_NAVIGATION_VIEW=32]="TYPE_NAVIGATION_VIEW",m[m.TYPE_USER_QUERY=33]="TYPE_USER_QUERY",m[m.NAV_EXACT_MATCH=35]="NAV_EXACT_MATCH",m[m.NAV_EXACT_PREFIX_MATCH=36]="NAV_EXACT_PREFIX_MATCH",m[m.NAV_NORMAL_MATCH=37]="NAV_NORMAL_MATCH",m[m.NAV_NORMAL_PREFIX_MATCH=75]="NAV_NORMAL_PREFIX_MATCH",m[m.CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH=38]="CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH",m[m.CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH=39]="CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH",m[m.CHANNEL_IS_ARCHIVED=40]="CHANNEL_IS_ARCHIVED",m[m.CHANNEL_IS_MEMBER=41]="CHANNEL_IS_MEMBER",m[m.CHANNEL_IS_STARRED=42]="CHANNEL_IS_STARRED",m[m.MPIM_IS_STARRED=43]="MPIM_IS_STARRED",m[m.CHANNEL_IS_UNREAD=44]="CHANNEL_IS_UNREAD",m[m.MPIM_IS_UNREAD=45]="MPIM_IS_UNREAD",m[m.CHANNEL_IS_OTHER_TEAM=46]="CHANNEL_IS_OTHER_TEAM",m[m.USER_IS_ACTIVE=47]="USER_IS_ACTIVE",m[m.USER_IS_CURRENT_USER=48]="USER_IS_CURRENT_USER",m[m.USER_DM_IS_STARRED=49]="USER_DM_IS_STARRED",m[m.USER_DM_IS_UNREAD=50]="USER_DM_IS_UNREAD",m[m.CHANNEL_PRIORITY=51]="CHANNEL_PRIORITY",m[m.CHANNEL_READ_AGE_DECAY_7D=52]="CHANNEL_READ_AGE_DECAY_7D",m[m.CHANNEL_READ_AGE_DECAY_2H=53]="CHANNEL_READ_AGE_DECAY_2H",m[m.MPIM_READ_AGE_DECAY_2H=54]="MPIM_READ_AGE_DECAY_2H",m[m.MPIM_READ_AGE_DECAY_7D=55]="MPIM_READ_AGE_DECAY_7D",m[m.USER_DM_READ_AGE_DECAY_7D=56]="USER_DM_READ_AGE_DECAY_7D",m[m.USER_DM_READ_AGE_DECAY_2H=57]="USER_DM_READ_AGE_DECAY_2H",m[m.USER_DM_READ_AGE_DECAY_7D_V2=274]="USER_DM_READ_AGE_DECAY_7D_V2",m[m.USER_DM_READ_AGE_DECAY_2H_V2=275]="USER_DM_READ_AGE_DECAY_2H_V2",m[m.QUERY_LENGTH=61]="QUERY_LENGTH",m[m.NAV_QUERY_LENGTH=62]="NAV_QUERY_LENGTH",m[m.SUGGESTION_TEXT_LENGTH=63]="SUGGESTION_TEXT_LENGTH",m[m.NAV_TEXT_LENGTH=64]="NAV_TEXT_LENGTH",m[m.MPIM_PRIORITY=66]="MPIM_PRIORITY",m[m.QUERY_RATIO_LENGTH_STRING=68]="QUERY_RATIO_LENGTH_STRING",m[m.NAV_QUERY_RATIO_LENGTH_STRING=69]="NAV_QUERY_RATIO_LENGTH_STRING",m[m.USER_QUERY_RATIO_LENGTH_STRING=70]="USER_QUERY_RATIO_LENGTH_STRING",m[m.CHANNEL_QUERY_RATIO_LENGTH_STRING=71]="CHANNEL_QUERY_RATIO_LENGTH_STRING",m[m.MPIM_QUERY_RATIO_LENGTH_STRING=72]="MPIM_QUERY_RATIO_LENGTH_STRING",m[m.FUZZY_SCORE=73]="FUZZY_SCORE",m[m.MPIM_WITH_DEACTIVATED_USER=74]="MPIM_WITH_DEACTIVATED_USER",m[m.USER_FIRST_NAME_EXACT_MATCH=81]="USER_FIRST_NAME_EXACT_MATCH",m[m.USER_FIRST_NAME_EXACT_PREFIX_MATCH=82]="USER_FIRST_NAME_EXACT_PREFIX_MATCH",m[m.USER_FIRST_NAME_NORMAL_MATCH=83]="USER_FIRST_NAME_NORMAL_MATCH",m[m.USER_FIRST_NAME_NORMAL_PREFIX_MATCH=84]="USER_FIRST_NAME_NORMAL_PREFIX_MATCH",m[m.USER_LAST_NAME_EXACT_MATCH=85]="USER_LAST_NAME_EXACT_MATCH",m[m.USER_LAST_NAME_EXACT_PREFIX_MATCH=86]="USER_LAST_NAME_EXACT_PREFIX_MATCH",m[m.USER_LAST_NAME_NORMAL_MATCH=87]="USER_LAST_NAME_NORMAL_MATCH",m[m.USER_LAST_NAME_NORMAL_PREFIX_MATCH=88]="USER_LAST_NAME_NORMAL_PREFIX_MATCH",m[m.USER_PRIORITY=89]="USER_PRIORITY",m[m.ONLY_MATCHES_PREVIOUS_NAME=90]="ONLY_MATCHES_PREVIOUS_NAME",m[m.NAV_NORMAL_MATCH_USER=95]="NAV_NORMAL_MATCH_USER",m[m.NAV_NORMAL_PREFIX_MATCH_USER=96]="NAV_NORMAL_PREFIX_MATCH_USER",m[m.NAV_NORMAL_MATCH_NO_USER=97]="NAV_NORMAL_MATCH_NO_USER",m[m.NAV_NORMAL_PREFIX_MATCH_NO_USER=98]="NAV_NORMAL_PREFIX_MATCH_NO_USER",m[m.CHANNEL_LATEST_MSG_AGE_DECAY_7D=99]="CHANNEL_LATEST_MSG_AGE_DECAY_7D",m[m.CHANNEL_LATEST_MSG_AGE_DECAY_2H=100]="CHANNEL_LATEST_MSG_AGE_DECAY_2H",m[m.MPIM_LATEST_MSG_AGE_DECAY_2H=101]="MPIM_LATEST_MSG_AGE_DECAY_2H",m[m.MPIM_LATEST_MSG_AGE_DECAY_7D=102]="MPIM_LATEST_MSG_AGE_DECAY_7D",m[m.USER_DM_LATEST_MSG_AGE_DECAY_7D=103]="USER_DM_LATEST_MSG_AGE_DECAY_7D",m[m.USER_DM_LATEST_MSG_AGE_DECAY_2H=104]="USER_DM_LATEST_MSG_AGE_DECAY_2H",m[m.USER_DM_LATEST_MSG_AGE_DECAY_7D_V2=260]="USER_DM_LATEST_MSG_AGE_DECAY_7D_V2",m[m.USER_DM_LATEST_MSG_AGE_DECAY_2H_V2=261]="USER_DM_LATEST_MSG_AGE_DECAY_2H_V2",m[m.FUZZY_SCORE_50=127]="FUZZY_SCORE_50",m[m.FUZZY_SCORE_25=128]="FUZZY_SCORE_25",m[m.FUZZY_SCORE_ALL=129]="FUZZY_SCORE_ALL",m[m.FUZZY_SCORE_SCALED_EXP=291]="FUZZY_SCORE_SCALED_EXP",m[m.FUZZY_SCORE_SCALED_FLIPPED=292]="FUZZY_SCORE_SCALED_FLIPPED",m[m.FUZZY_SCORE_SCALED_SUBTRACT=293]="FUZZY_SCORE_SCALED_SUBTRACT",m[m.HERE_KEYWORD=131]="HERE_KEYWORD",m[m.HERE_KEYWORD_EXACT_MATCH=132]="HERE_KEYWORD_EXACT_MATCH",m[m.IS_BROADCAST_KEYWORD=133]="IS_BROADCAST_KEYWORD",m[m.BROADCAST_KEYWORD_NORMAL_MATCH=134]="BROADCAST_KEYWORD_NORMAL_MATCH",m[m.MEMBER_OF_CURRENT_CHANNEL=153]="MEMBER_OF_CURRENT_CHANNEL",m[m.QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL=154]="QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL",m[m.USER_EMAIL_MATCH=170]="USER_EMAIL_MATCH",m[m.USER_EMAIL_ONLY_MATCH=171]="USER_EMAIL_ONLY_MATCH",m[m.QUERY_IS_SELF=193]="QUERY_IS_SELF",m[m.CURRENT_USER_TEXTY=194]="CURRENT_USER_TEXTY",m[m.USER_IS_EXTERNAL=234]="USER_IS_EXTERNAL",m[m.USER_SAME_TEAM=235]="USER_SAME_TEAM",m[m.USER_IS_BOT=254]="USER_IS_BOT",m[m.CHANNEL_TEAM_CTR_90DD=189]="CHANNEL_TEAM_CTR_90DD",m[m.CHANNEL_USER_CTR_30DD=190]="CHANNEL_USER_CTR_30DD",m[m.NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS=199]="NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS",m[m.HISTORY_AGE_DECAY_2H=230]="HISTORY_AGE_DECAY_2H",m[m.HISTORY_AGE_DECAY_7D=231]="HISTORY_AGE_DECAY_7D",m[m.HISTORY_POSITION=232]="HISTORY_POSITION",m[m.USER_DM_NULL=179]="USER_DM_NULL",m[m.USER_DM_EMPTY=180]="USER_DM_EMPTY",m[m.USER_DM_NOT_OPEN=181]="USER_DM_NOT_OPEN",m[m.USER_DM_OPEN=182]="USER_DM_OPEN",m[m.USER_DM_LATEST_OLDER_30D=183]="USER_DM_LATEST_OLDER_30D",m[m.USER_DM_LATEST_OLDER_90D=184]="USER_DM_LATEST_OLDER_90D",m[m.USER_DM_EMPTY_V2=257]="USER_DM_EMPTY_V2",m[m.USER_DM_LATEST_OLDER_30D_V2=258]="USER_DM_LATEST_OLDER_30D_V2",m[m.USER_DM_LATEST_OLDER_90D_V2=259]="USER_DM_LATEST_OLDER_90D_V2",m[m.USER_HAS_DMED=284]="USER_HAS_DMED",m[m.USER_DM_READ_AGE_DECAY_2H_V3=285]="USER_DM_READ_AGE_DECAY_2H_V3",m[m.USER_DM_READ_AGE_DECAY_7D_V3=286]="USER_DM_READ_AGE_DECAY_7D_V3",m[m.USER_DM_READ_OLDER_7D=287]="USER_DM_READ_OLDER_7D",m[m.USER_DM_READ_OLDER_30D=288]="USER_DM_READ_OLDER_30D",m[m.USER_DM_READ_OLDER_90D=289]="USER_DM_READ_OLDER_90D",m[m.USER_MPIM_READ_AGE_DECAY_7D=236]="USER_MPIM_READ_AGE_DECAY_7D",m[m.USER_MPIM_READ_AGE_DECAY_2H=237]="USER_MPIM_READ_AGE_DECAY_2H",m[m.USER_MPIM_LATEST_MSG_AGE_DECAY_7D=238]="USER_MPIM_LATEST_MSG_AGE_DECAY_7D",m[m.USER_MPIM_LATEST_MSG_AGE_DECAY_2H=239]="USER_MPIM_LATEST_MSG_AGE_DECAY_2H",m[m.USER_MPIM_FRECENCY_LOG_HIT_COUNT=240]="USER_MPIM_FRECENCY_LOG_HIT_COUNT",m[m.USER_MPIM_FRECENCY_LOG_ITEM_COUNT=241]="USER_MPIM_FRECENCY_LOG_ITEM_COUNT",m[m.MPIM_MEMBERS=166]="MPIM_MEMBERS",m[m.MPIM_MEMBER_NAME_MATCHES=167]="MPIM_MEMBER_NAME_MATCHES",m[m.MPIM_MEMBER_ALL_MATCHES=168]="MPIM_MEMBER_ALL_MATCHES",m[m.MPIM_MATCHER_SCORE=169]="MPIM_MATCHER_SCORE",m[m.MPIM_MATCHER_SCORE_0=173]="MPIM_MATCHER_SCORE_0",m[m.MPIM_MATCHER_SCORE_1=174]="MPIM_MATCHER_SCORE_1",m[m.MPIM_MATCHER_SCORE_2=175]="MPIM_MATCHER_SCORE_2",m[m.MPIM_MATCHER_SCORE_3=176]="MPIM_MATCHER_SCORE_3",m[m.MPIM_TEAM_CTR_90DD=187]="MPIM_TEAM_CTR_90DD",m[m.MPIM_USER_CTR_30DD=188]="MPIM_USER_CTR_30DD",m[m.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H=262]="MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H",m[m.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D=263]="MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D",m[m.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H=264]="MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H",m[m.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D=265]="MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D",m[m.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H=266]="MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H",m[m.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D=267]="MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D",m[m.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H=268]="MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H",m[m.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D=269]="MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D",m[m.MPIM_USERS_PCT_NON_EMPTY_DMS=270]="MPIM_USERS_PCT_NON_EMPTY_DMS",m[m.MPIM_USERS_PCT_NON_NULL_DMS=271]="MPIM_USERS_PCT_NON_NULL_DMS",m[m.MPIM_USERS_ALL_INTERNAL=272]="MPIM_USERS_ALL_INTERNAL",m[m.EMOJI_EXACT_MATCH=136]="EMOJI_EXACT_MATCH",m[m.EMOJI_QUERY_LENGTH_RATIO=150]="EMOJI_QUERY_LENGTH_RATIO",m[m.EMOJI_TOTAL_COMBO_BREAKS=151]="EMOJI_TOTAL_COMBO_BREAKS",m[m.EMOJI_COMBO_BREAK_0=161]="EMOJI_COMBO_BREAK_0",m[m.EMOJI_COMBO_BREAK_1=156]="EMOJI_COMBO_BREAK_1",m[m.EMOJI_COMBO_BREAK_2=157]="EMOJI_COMBO_BREAK_2",m[m.EMOJI_COMBO_BREAK_3=158]="EMOJI_COMBO_BREAK_3",m[m.EMOJI_TEAM_CTR_90DD=185]="EMOJI_TEAM_CTR_90DD",m[m.EMOJI_USER_CTR_30DD=186]="EMOJI_USER_CTR_30DD",m[m.CHANNEL_IS_FROZEN=146]="CHANNEL_IS_FROZEN",m[m.USER_DM_IS_FROZEN=147]="USER_DM_IS_FROZEN",m[m.CHANNEL_HAS_DRAFT=148]="CHANNEL_HAS_DRAFT",m[m.USER_DM_HAS_DRAFT=149]="USER_DM_HAS_DRAFT",m[m.QUERY_FRECENCY_RAW=107]="QUERY_FRECENCY_RAW",m[m.QUERY_FRECENCY_WEIGHT_HIT_VISITS=108]="QUERY_FRECENCY_WEIGHT_HIT_VISITS",m[m.QUERY_FRECENCY_HIT_COUNT=109]="QUERY_FRECENCY_HIT_COUNT",m[m.QUERY_FRECENCY_WEIGHT_ITEM_VISITS=110]="QUERY_FRECENCY_WEIGHT_ITEM_VISITS",m[m.QUERY_FRECENCY_ITEM_COUNT=111]="QUERY_FRECENCY_ITEM_COUNT",m[m.QUERY_FUZZY_SCORE=112]="QUERY_FUZZY_SCORE",m[m.QUERY_FRECENCY_BONUS=113]="QUERY_FRECENCY_BONUS",m[m.QUERY_LOG_HIT_COUNT=130]="QUERY_LOG_HIT_COUNT",m[m.QUERY_TOKEN_NORMAL_MATCH=137]="QUERY_TOKEN_NORMAL_MATCH",m[m.QUERY_TOKEN_NORMAL_PREFIX_MATCH=138]="QUERY_TOKEN_NORMAL_PREFIX_MATCH",m[m.QUERY_HISTORY_AGE_DECAY_30D=282]="QUERY_HISTORY_AGE_DECAY_30D",m[m.QUERY_HISTORY_LOG_INDEX=283]="QUERY_HISTORY_LOG_INDEX",m[m.FILTER_USER_IS_ACTIVE=114]="FILTER_USER_IS_ACTIVE",m[m.FILTER_USER_IS_CURRENT_USER=115]="FILTER_USER_IS_CURRENT_USER",m[m.FILTER_USER_DM_IS_STARRED=116]="FILTER_USER_DM_IS_STARRED",m[m.FILTER_USER_DM_IS_UNREAD=117]="FILTER_USER_DM_IS_UNREAD",m[m.FILTER_USER_DM_READ_AGE_DECAY_7D=118]="FILTER_USER_DM_READ_AGE_DECAY_7D",m[m.FILTER_USER_DM_READ_AGE_DECAY_2H=119]="FILTER_USER_DM_READ_AGE_DECAY_2H",m[m.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D=120]="FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D",m[m.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H=121]="FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H",m[m.FILTER_USER_FIRST_NAME_NORMAL_MATCH=122]="FILTER_USER_FIRST_NAME_NORMAL_MATCH",m[m.FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH=123]="FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH",m[m.FILTER_USER_LAST_NAME_NORMAL_MATCH=124]="FILTER_USER_LAST_NAME_NORMAL_MATCH",m[m.FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH=125]="FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH",m[m.FILTER_USER_PRIORITY=126]="FILTER_USER_PRIORITY",m[m.FILTER_CHANNEL_IS_ARCHIVED=139]="FILTER_CHANNEL_IS_ARCHIVED",m[m.FILTER_CHANNEL_IS_MEMBER=140]="FILTER_CHANNEL_IS_MEMBER",m[m.FILTER_CHANNEL_IS_STARRED=141]="FILTER_CHANNEL_IS_STARRED",m[m.FILTER_CHANNEL_IS_UNREAD=142]="FILTER_CHANNEL_IS_UNREAD",m[m.FILTER_CHANNEL_READ_AGE_DECAY_7D=143]="FILTER_CHANNEL_READ_AGE_DECAY_7D",m[m.FILTER_CHANNEL_READ_AGE_DECAY_2H=144]="FILTER_CHANNEL_READ_AGE_DECAY_2H",m[m.FILTER_CHANNEL_PRIORITY=145]="FILTER_CHANNEL_PRIORITY",m[m.USER_ENTITY_TYPE_CTR_30DD=191]="USER_ENTITY_TYPE_CTR_30DD",m[m.NUM_RESULTS=192]="NUM_RESULTS",m[m.TYPE_NAVIGATION_FILE=3]="TYPE_NAVIGATION_FILE",m[m.FILE_AGE_DECAY_7D=195]="FILE_AGE_DECAY_7D",m[m.FILE_AGE_DECAY_28D=196]="FILE_AGE_DECAY_28D",m[m.FILE_AGE_DECAY_90D=197]="FILE_AGE_DECAY_90D",m[m.FILE_FROM_CURRENT_USER=198]="FILE_FROM_CURRENT_USER",m[m.FILE_LOG_PRIVATE_SHARES=200]="FILE_LOG_PRIVATE_SHARES",m[m.FILE_LOG_PUBLIC_SHARES=201]="FILE_LOG_PUBLIC_SHARES",m[m.FILE_LOG_ACTIONS=202]="FILE_LOG_ACTIONS",m[m.FILE_LATEST_ACTION_AGE_DECAY_2H=203]="FILE_LATEST_ACTION_AGE_DECAY_2H",m[m.FILE_LATEST_ACTION_AGE_DECAY_7D=204]="FILE_LATEST_ACTION_AGE_DECAY_7D",m[m.FILE_LATEST_ACTION_AGE_DECAY_90D=205]="FILE_LATEST_ACTION_AGE_DECAY_90D",m[m.FILE_LATEST_SHARE_AGE_DECAY_2H=206]="FILE_LATEST_SHARE_AGE_DECAY_2H",m[m.FILE_LATEST_SHARE_AGE_DECAY_7D=207]="FILE_LATEST_SHARE_AGE_DECAY_7D",m[m.FILE_LATEST_SHARE_AGE_DECAY_90D=208]="FILE_LATEST_SHARE_AGE_DECAY_90D",m[m.FILE_CHANNEL_CTR=209]="FILE_CHANNEL_CTR",m[m.FILE_SUGGESTIONS_SEARCHER=210]="FILE_SUGGESTIONS_SEARCHER",m[m.FILE_USER_CTR=211]="FILE_USER_CTR",m[m.FILE_NAME_CONTAINS_QUERY_NORMALIZED=273]="FILE_NAME_CONTAINS_QUERY_NORMALIZED",m[m.FILE_IS_CANVAS=276]="FILE_IS_CANVAS",m[m.FILE_HAS_DMS_WITH_CREATOR=277]="FILE_HAS_DMS_WITH_CREATOR",m[m.FILE_LATEST_VIEW_BY_USER_OLDER_90D=278]="FILE_LATEST_VIEW_BY_USER_OLDER_90D",m[m.FILE_HAS_DMS_WITH_CREATOR_V2=290]="FILE_HAS_DMS_WITH_CREATOR_V2",m[m.APP_NAME_PREFIX_MATCH=215]="APP_NAME_PREFIX_MATCH",m[m.BEST_NAME_MATCH_LOG_RESULTS=218]="BEST_NAME_MATCH_LOG_RESULTS",m[m.SHORTCUT_ENTITY_TYPE_CTR=226]="SHORTCUT_ENTITY_TYPE_CTR",m[m.TYPE_SLASH_COMMAND=212]="TYPE_SLASH_COMMAND",m[m.SLASH_COMMAND_TEAM_CTR=227]="SLASH_COMMAND_TEAM_CTR",m[m.SLASH_COMMAND_USER_CTR=219]="SLASH_COMMAND_USER_CTR",m[m.TYPE_GLOBAL_ACTION=213]="TYPE_GLOBAL_ACTION",m[m.IS_INVITE_WORKSPACE=217]="IS_INVITE_WORKSPACE",m[m.GLOBAL_ACTION_TEAM_CTR=220]="GLOBAL_ACTION_TEAM_CTR",m[m.GLOBAL_ACTION_USER_CTR=221]="GLOBAL_ACTION_USER_CTR",m[m.TYPE_CHANNEL_ACTION=214]="TYPE_CHANNEL_ACTION",m[m.CHANNEL_ACTION_TEAM_CTR=222]="CHANNEL_ACTION_TEAM_CTR",m[m.CHANNEL_ACTION_USER_CTR=223]="CHANNEL_ACTION_USER_CTR",m[m.TYPE_APP_ACTION=152]="TYPE_APP_ACTION",m[m.APP_ACTION_TEAM_CTR=224]="APP_ACTION_TEAM_CTR",m[m.APP_ACTION_USER_CTR=225]="APP_ACTION_USER_CTR",m[m.OS_APP_ACTION=228]="OS_APP_ACTION",m[m.TYPE_APP=216]="TYPE_APP",m[m.TYPE_NAVIGATION_MESSAGE=255]="TYPE_NAVIGATION_MESSAGE",m[m.TYPE_WORKFLOW_TRIGGER=256]="TYPE_WORKFLOW_TRIGGER",m[m.WORKFLOW_TRIGGER_TEAM_CTR=279]="WORKFLOW_TRIGGER_TEAM_CTR",m[m.WORKFLOW_TRIGGER_USER_CTR=280]="WORKFLOW_TRIGGER_USER_CTR",m[m.HAS_CHANNEL_ASSOCIATION=281]="HAS_CHANNEL_ASSOCIATION",m[m.DEPRECATED_QUERY_SUGGESTION_SCORE=1]="DEPRECATED_QUERY_SUGGESTION_SCORE",m[m.DEPRECATED_TYPE_NAVIGATION_EXPERT_CHANNEL=29]="DEPRECATED_TYPE_NAVIGATION_EXPERT_CHANNEL",m[m.DEPRECATED_BM25_SCORE=30]="DEPRECATED_BM25_SCORE",m[m.DEPRECATED_NAV_EXCESS_STRING_LENGTH=34]="DEPRECATED_NAV_EXCESS_STRING_LENGTH",m[m.DEPRECATED_CHANNEL_EXCESS_STRING_LENGTH=58]="DEPRECATED_CHANNEL_EXCESS_STRING_LENGTH",m[m.DEPRECATED_USER_EXCESS_STRING_LENGTH=59]="DEPRECATED_USER_EXCESS_STRING_LENGTH",m[m.DEPRECATED_MPIM_EXCESS_STRING_LENGTH=60]="DEPRECATED_MPIM_EXCESS_STRING_LENGTH",m[m.DEPRECATED_LOG_FRECENCY=67]="DEPRECATED_LOG_FRECENCY",m[m.DEPRECATED_LOG_FRECENCY_BONUS=77]="DEPRECATED_LOG_FRECENCY_BONUS",m[m.DEPRECATED_LOG_FRECENCY_CHANNEL=78]="DEPRECATED_LOG_FRECENCY_CHANNEL",m[m.DEPRECATED_LOG_FRECENCY_USER=79]="DEPRECATED_LOG_FRECENCY_USER",m[m.DEPRECATED_LOG_FRECENCY_MPIM=80]="DEPRECATED_LOG_FRECENCY_MPIM",m[m.DEPRECATED_EMOJI_SCORE_BONUS=135]="DEPRECATED_EMOJI_SCORE_BONUS",m[m.TEST_FEATURE_1=1e3]="TEST_FEATURE_1",m[m.TEST_FEATURE_2=1001]="TEST_FEATURE_2",m[m.TEST_FEATURE_3=1002]="TEST_FEATURE_3",m[m.TEST_FEATURE_4=1003]="TEST_FEATURE_4",m[m.TEST_FEATURE_5=1004]="TEST_FEATURE_5",m[m.TEST_FEATURE_6=1005]="TEST_FEATURE_6",m[m.TEST_FEATURE_7=1006]="TEST_FEATURE_7",m[m.TEST_FEATURE_8=1007]="TEST_FEATURE_8",m[m.TEST_FEATURE_9=1008]="TEST_FEATURE_9",m[m.TEST_FEATURE_10=1009]="TEST_FEATURE_10"})(u||(u={}));var g;(function(m){m[m.NUMERICAL=1]="NUMERICAL",m[m.BINARY=2]="BINARY",m[m.TEXT=3]="TEXT"})(g||(g={}))},926017:(U,l,f)=>{"use strict";f.d(l,{$:()=>n});var u=f(326946),g=f.n(u);const m=u.Reader,h=u.Writer,a=u.util,r=u.roots.default||(u.roots.default={}),n=r.slack=(()=>{const e={};return e.calls=function(){const t={};return t.analytics=function(){const i={};return i.RecvMedia=function(){function o(p){if(p)for(let S=Object.keys(p),d=0;d<S.length;++d)p[S[d]]!=null&&(this[S[d]]=p[S[d]])}s(o,"RecvMedia"),o.prototype.peerId=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.bytesReceived=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.packetsReceived=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.fractionLost=0,o.prototype.jitter=0,o.prototype.packetsLost=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.codec=0,o.prototype.userId="",o.prototype.peerIdString="",o.prototype.audioStats=null,o.prototype.videoStats=null;let c;return Object.defineProperty(o.prototype,"mediaType",{get:a.oneOfGetter(c=["audioStats","videoStats"]),set:a.oneOfSetter(c)}),o.create=s(function(S){return new o(S)},"create"),o.encode=s(function(S,d){return d||(d=h.create()),S.peerId!=null&&Object.hasOwnProperty.call(S,"peerId")&&d.uint32(8).uint64(S.peerId),S.bytesReceived!=null&&Object.hasOwnProperty.call(S,"bytesReceived")&&d.uint32(16).uint64(S.bytesReceived),S.packetsReceived!=null&&Object.hasOwnProperty.call(S,"packetsReceived")&&d.uint32(24).uint64(S.packetsReceived),S.fractionLost!=null&&Object.hasOwnProperty.call(S,"fractionLost")&&d.uint32(33).double(S.fractionLost),S.jitter!=null&&Object.hasOwnProperty.call(S,"jitter")&&d.uint32(41).double(S.jitter),S.packetsLost!=null&&Object.hasOwnProperty.call(S,"packetsLost")&&d.uint32(48).uint64(S.packetsLost),S.codec!=null&&Object.hasOwnProperty.call(S,"codec")&&d.uint32(56).int32(S.codec),S.audioStats!=null&&Object.hasOwnProperty.call(S,"audioStats")&&r.slack.calls.analytics.RecvMedia.Audio.encode(S.audioStats,d.uint32(66).fork()).ldelim(),S.videoStats!=null&&Object.hasOwnProperty.call(S,"videoStats")&&r.slack.calls.analytics.RecvMedia.Video.encode(S.videoStats,d.uint32(74).fork()).ldelim(),S.userId!=null&&Object.hasOwnProperty.call(S,"userId")&&d.uint32(82).string(S.userId),S.peerIdString!=null&&Object.hasOwnProperty.call(S,"peerIdString")&&d.uint32(90).string(S.peerIdString),d},"encode"),o.encodeDelimited=s(function(S,d){return this.encode(S,d).ldelim()},"encodeDelimited"),o.decode=s(function(S,d){S instanceof m||(S=m.create(S));let y=d===void 0?S.len:S.pos+d,E=new r.slack.calls.analytics.RecvMedia;for(;S.pos<y;){let I=S.uint32();switch(I>>>3){case 1:{E.peerId=S.uint64();break}case 2:{E.bytesReceived=S.uint64();break}case 3:{E.packetsReceived=S.uint64();break}case 4:{E.fractionLost=S.double();break}case 5:{E.jitter=S.double();break}case 6:{E.packetsLost=S.uint64();break}case 7:{E.codec=S.int32();break}case 10:{E.userId=S.string();break}case 11:{E.peerIdString=S.string();break}case 8:{E.audioStats=r.slack.calls.analytics.RecvMedia.Audio.decode(S,S.uint32());break}case 9:{E.videoStats=r.slack.calls.analytics.RecvMedia.Video.decode(S,S.uint32());break}default:S.skipType(I&7);break}}return E},"decode"),o.decodeDelimited=s(function(S){return S instanceof m||(S=new m(S)),this.decode(S,S.uint32())},"decodeDelimited"),o.verify=s(function(S){if(typeof S!="object"||S===null)return"object expected";let d={};if(S.peerId!=null&&S.hasOwnProperty("peerId")&&!a.isInteger(S.peerId)&&!(S.peerId&&a.isInteger(S.peerId.low)&&a.isInteger(S.peerId.high)))return"peerId: integer|Long expected";if(S.bytesReceived!=null&&S.hasOwnProperty("bytesReceived")&&!a.isInteger(S.bytesReceived)&&!(S.bytesReceived&&a.isInteger(S.bytesReceived.low)&&a.isInteger(S.bytesReceived.high)))return"bytesReceived: integer|Long expected";if(S.packetsReceived!=null&&S.hasOwnProperty("packetsReceived")&&!a.isInteger(S.packetsReceived)&&!(S.packetsReceived&&a.isInteger(S.packetsReceived.low)&&a.isInteger(S.packetsReceived.high)))return"packetsReceived: integer|Long expected";if(S.fractionLost!=null&&S.hasOwnProperty("fractionLost")&&typeof S.fractionLost!="number")return"fractionLost: number expected";if(S.jitter!=null&&S.hasOwnProperty("jitter")&&typeof S.jitter!="number")return"jitter: number expected";if(S.packetsLost!=null&&S.hasOwnProperty("packetsLost")&&!a.isInteger(S.packetsLost)&&!(S.packetsLost&&a.isInteger(S.packetsLost.low)&&a.isInteger(S.packetsLost.high)))return"packetsLost: integer|Long expected";if(S.codec!=null&&S.hasOwnProperty("codec"))switch(S.codec){default:return"codec: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(S.userId!=null&&S.hasOwnProperty("userId")&&!a.isString(S.userId))return"userId: string expected";if(S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&!a.isString(S.peerIdString))return"peerIdString: string expected";if(S.audioStats!=null&&S.hasOwnProperty("audioStats")){d.mediaType=1;{let y=r.slack.calls.analytics.RecvMedia.Audio.verify(S.audioStats);if(y)return"audioStats."+y}}if(S.videoStats!=null&&S.hasOwnProperty("videoStats")){if(d.mediaType===1)return"mediaType: multiple values";d.mediaType=1;{let y=r.slack.calls.analytics.RecvMedia.Video.verify(S.videoStats);if(y)return"videoStats."+y}}return null},"verify"),o.fromObject=s(function(S){if(S instanceof r.slack.calls.analytics.RecvMedia)return S;let d=new r.slack.calls.analytics.RecvMedia;switch(S.peerId!=null&&(a.Long?(d.peerId=a.Long.fromValue(S.peerId)).unsigned=!0:typeof S.peerId=="string"?d.peerId=parseInt(S.peerId,10):typeof S.peerId=="number"?d.peerId=S.peerId:typeof S.peerId=="object"&&(d.peerId=new a.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0))),S.bytesReceived!=null&&(a.Long?(d.bytesReceived=a.Long.fromValue(S.bytesReceived)).unsigned=!0:typeof S.bytesReceived=="string"?d.bytesReceived=parseInt(S.bytesReceived,10):typeof S.bytesReceived=="number"?d.bytesReceived=S.bytesReceived:typeof S.bytesReceived=="object"&&(d.bytesReceived=new a.LongBits(S.bytesReceived.low>>>0,S.bytesReceived.high>>>0).toNumber(!0))),S.packetsReceived!=null&&(a.Long?(d.packetsReceived=a.Long.fromValue(S.packetsReceived)).unsigned=!0:typeof S.packetsReceived=="string"?d.packetsReceived=parseInt(S.packetsReceived,10):typeof S.packetsReceived=="number"?d.packetsReceived=S.packetsReceived:typeof S.packetsReceived=="object"&&(d.packetsReceived=new a.LongBits(S.packetsReceived.low>>>0,S.packetsReceived.high>>>0).toNumber(!0))),S.fractionLost!=null&&(d.fractionLost=Number(S.fractionLost)),S.jitter!=null&&(d.jitter=Number(S.jitter)),S.packetsLost!=null&&(a.Long?(d.packetsLost=a.Long.fromValue(S.packetsLost)).unsigned=!0:typeof S.packetsLost=="string"?d.packetsLost=parseInt(S.packetsLost,10):typeof S.packetsLost=="number"?d.packetsLost=S.packetsLost:typeof S.packetsLost=="object"&&(d.packetsLost=new a.LongBits(S.packetsLost.low>>>0,S.packetsLost.high>>>0).toNumber(!0))),S.codec){default:if(typeof S.codec=="number"){d.codec=S.codec;break}break;case"UNKNOWN":case 0:d.codec=0;break;case"OPUS":case 1:d.codec=1;break;case"VP8":case 2:d.codec=2;break;case"VP9":case 3:d.codec=3;break;case"H264":case 4:d.codec=4;break}if(S.userId!=null&&(d.userId=String(S.userId)),S.peerIdString!=null&&(d.peerIdString=String(S.peerIdString)),S.audioStats!=null){if(typeof S.audioStats!="object")throw TypeError(".slack.calls.analytics.RecvMedia.audioStats: object expected");d.audioStats=r.slack.calls.analytics.RecvMedia.Audio.fromObject(S.audioStats)}if(S.videoStats!=null){if(typeof S.videoStats!="object")throw TypeError(".slack.calls.analytics.RecvMedia.videoStats: object expected");d.videoStats=r.slack.calls.analytics.RecvMedia.Video.fromObject(S.videoStats)}return d},"fromObject"),o.toObject=s(function(S,d){d||(d={});let y={};if(d.defaults){if(a.Long){let E=new a.Long(0,0,!0);y.peerId=d.longs===String?E.toString():d.longs===Number?E.toNumber():E}else y.peerId=d.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);y.bytesReceived=d.longs===String?E.toString():d.longs===Number?E.toNumber():E}else y.bytesReceived=d.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);y.packetsReceived=d.longs===String?E.toString():d.longs===Number?E.toNumber():E}else y.packetsReceived=d.longs===String?"0":0;if(y.fractionLost=0,y.jitter=0,a.Long){let E=new a.Long(0,0,!0);y.packetsLost=d.longs===String?E.toString():d.longs===Number?E.toNumber():E}else y.packetsLost=d.longs===String?"0":0;y.codec=d.enums===String?"UNKNOWN":0,y.userId="",y.peerIdString=""}return S.peerId!=null&&S.hasOwnProperty("peerId")&&(typeof S.peerId=="number"?y.peerId=d.longs===String?String(S.peerId):S.peerId:y.peerId=d.longs===String?a.Long.prototype.toString.call(S.peerId):d.longs===Number?new a.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0):S.peerId),S.bytesReceived!=null&&S.hasOwnProperty("bytesReceived")&&(typeof S.bytesReceived=="number"?y.bytesReceived=d.longs===String?String(S.bytesReceived):S.bytesReceived:y.bytesReceived=d.longs===String?a.Long.prototype.toString.call(S.bytesReceived):d.longs===Number?new a.LongBits(S.bytesReceived.low>>>0,S.bytesReceived.high>>>0).toNumber(!0):S.bytesReceived),S.packetsReceived!=null&&S.hasOwnProperty("packetsReceived")&&(typeof S.packetsReceived=="number"?y.packetsReceived=d.longs===String?String(S.packetsReceived):S.packetsReceived:y.packetsReceived=d.longs===String?a.Long.prototype.toString.call(S.packetsReceived):d.longs===Number?new a.LongBits(S.packetsReceived.low>>>0,S.packetsReceived.high>>>0).toNumber(!0):S.packetsReceived),S.fractionLost!=null&&S.hasOwnProperty("fractionLost")&&(y.fractionLost=d.json&&!isFinite(S.fractionLost)?String(S.fractionLost):S.fractionLost),S.jitter!=null&&S.hasOwnProperty("jitter")&&(y.jitter=d.json&&!isFinite(S.jitter)?String(S.jitter):S.jitter),S.packetsLost!=null&&S.hasOwnProperty("packetsLost")&&(typeof S.packetsLost=="number"?y.packetsLost=d.longs===String?String(S.packetsLost):S.packetsLost:y.packetsLost=d.longs===String?a.Long.prototype.toString.call(S.packetsLost):d.longs===Number?new a.LongBits(S.packetsLost.low>>>0,S.packetsLost.high>>>0).toNumber(!0):S.packetsLost),S.codec!=null&&S.hasOwnProperty("codec")&&(y.codec=d.enums===String?r.slack.calls.analytics.Codec[S.codec]===void 0?S.codec:r.slack.calls.analytics.Codec[S.codec]:S.codec),S.audioStats!=null&&S.hasOwnProperty("audioStats")&&(y.audioStats=r.slack.calls.analytics.RecvMedia.Audio.toObject(S.audioStats,d),d.oneofs&&(y.mediaType="audioStats")),S.videoStats!=null&&S.hasOwnProperty("videoStats")&&(y.videoStats=r.slack.calls.analytics.RecvMedia.Video.toObject(S.videoStats,d),d.oneofs&&(y.mediaType="videoStats")),S.userId!=null&&S.hasOwnProperty("userId")&&(y.userId=S.userId),S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&(y.peerIdString=S.peerIdString),y},"toObject"),o.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),o.getTypeUrl=s(function(S){return S===void 0&&(S="type.googleapis.com"),S+"/slack.calls.analytics.RecvMedia"},"getTypeUrl"),o.Audio=function(){function p(S){if(S)for(let d=Object.keys(S),y=0;y<d.length;++y)S[d[y]]!=null&&(this[d[y]]=S[d[y]])}return s(p,"Audio"),p.prototype.audioLevel=0,p.prototype.jitterBufferDelay=0,p.prototype.concealmentEvents=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.concealedSamples=a.Long?a.Long.fromBits(0,0,!0):0,p.create=s(function(d){return new p(d)},"create"),p.encode=s(function(d,y){return y||(y=h.create()),d.audioLevel!=null&&Object.hasOwnProperty.call(d,"audioLevel")&&y.uint32(9).double(d.audioLevel),d.jitterBufferDelay!=null&&Object.hasOwnProperty.call(d,"jitterBufferDelay")&&y.uint32(17).double(d.jitterBufferDelay),d.concealmentEvents!=null&&Object.hasOwnProperty.call(d,"concealmentEvents")&&y.uint32(24).uint64(d.concealmentEvents),d.concealedSamples!=null&&Object.hasOwnProperty.call(d,"concealedSamples")&&y.uint32(32).uint64(d.concealedSamples),y},"encode"),p.encodeDelimited=s(function(d,y){return this.encode(d,y).ldelim()},"encodeDelimited"),p.decode=s(function(d,y){d instanceof m||(d=m.create(d));let E=y===void 0?d.len:d.pos+y,I=new r.slack.calls.analytics.RecvMedia.Audio;for(;d.pos<E;){let A=d.uint32();switch(A>>>3){case 1:{I.audioLevel=d.double();break}case 2:{I.jitterBufferDelay=d.double();break}case 3:{I.concealmentEvents=d.uint64();break}case 4:{I.concealedSamples=d.uint64();break}default:d.skipType(A&7);break}}return I},"decode"),p.decodeDelimited=s(function(d){return d instanceof m||(d=new m(d)),this.decode(d,d.uint32())},"decodeDelimited"),p.verify=s(function(d){return typeof d!="object"||d===null?"object expected":d.audioLevel!=null&&d.hasOwnProperty("audioLevel")&&typeof d.audioLevel!="number"?"audioLevel: number expected":d.jitterBufferDelay!=null&&d.hasOwnProperty("jitterBufferDelay")&&typeof d.jitterBufferDelay!="number"?"jitterBufferDelay: number expected":d.concealmentEvents!=null&&d.hasOwnProperty("concealmentEvents")&&!a.isInteger(d.concealmentEvents)&&!(d.concealmentEvents&&a.isInteger(d.concealmentEvents.low)&&a.isInteger(d.concealmentEvents.high))?"concealmentEvents: integer|Long expected":d.concealedSamples!=null&&d.hasOwnProperty("concealedSamples")&&!a.isInteger(d.concealedSamples)&&!(d.concealedSamples&&a.isInteger(d.concealedSamples.low)&&a.isInteger(d.concealedSamples.high))?"concealedSamples: integer|Long expected":null},"verify"),p.fromObject=s(function(d){if(d instanceof r.slack.calls.analytics.RecvMedia.Audio)return d;let y=new r.slack.calls.analytics.RecvMedia.Audio;return d.audioLevel!=null&&(y.audioLevel=Number(d.audioLevel)),d.jitterBufferDelay!=null&&(y.jitterBufferDelay=Number(d.jitterBufferDelay)),d.concealmentEvents!=null&&(a.Long?(y.concealmentEvents=a.Long.fromValue(d.concealmentEvents)).unsigned=!0:typeof d.concealmentEvents=="string"?y.concealmentEvents=parseInt(d.concealmentEvents,10):typeof d.concealmentEvents=="number"?y.concealmentEvents=d.concealmentEvents:typeof d.concealmentEvents=="object"&&(y.concealmentEvents=new a.LongBits(d.concealmentEvents.low>>>0,d.concealmentEvents.high>>>0).toNumber(!0))),d.concealedSamples!=null&&(a.Long?(y.concealedSamples=a.Long.fromValue(d.concealedSamples)).unsigned=!0:typeof d.concealedSamples=="string"?y.concealedSamples=parseInt(d.concealedSamples,10):typeof d.concealedSamples=="number"?y.concealedSamples=d.concealedSamples:typeof d.concealedSamples=="object"&&(y.concealedSamples=new a.LongBits(d.concealedSamples.low>>>0,d.concealedSamples.high>>>0).toNumber(!0))),y},"fromObject"),p.toObject=s(function(d,y){y||(y={});let E={};if(y.defaults){if(E.audioLevel=0,E.jitterBufferDelay=0,a.Long){let I=new a.Long(0,0,!0);E.concealmentEvents=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.concealmentEvents=y.longs===String?"0":0;if(a.Long){let I=new a.Long(0,0,!0);E.concealedSamples=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.concealedSamples=y.longs===String?"0":0}return d.audioLevel!=null&&d.hasOwnProperty("audioLevel")&&(E.audioLevel=y.json&&!isFinite(d.audioLevel)?String(d.audioLevel):d.audioLevel),d.jitterBufferDelay!=null&&d.hasOwnProperty("jitterBufferDelay")&&(E.jitterBufferDelay=y.json&&!isFinite(d.jitterBufferDelay)?String(d.jitterBufferDelay):d.jitterBufferDelay),d.concealmentEvents!=null&&d.hasOwnProperty("concealmentEvents")&&(typeof d.concealmentEvents=="number"?E.concealmentEvents=y.longs===String?String(d.concealmentEvents):d.concealmentEvents:E.concealmentEvents=y.longs===String?a.Long.prototype.toString.call(d.concealmentEvents):y.longs===Number?new a.LongBits(d.concealmentEvents.low>>>0,d.concealmentEvents.high>>>0).toNumber(!0):d.concealmentEvents),d.concealedSamples!=null&&d.hasOwnProperty("concealedSamples")&&(typeof d.concealedSamples=="number"?E.concealedSamples=y.longs===String?String(d.concealedSamples):d.concealedSamples:E.concealedSamples=y.longs===String?a.Long.prototype.toString.call(d.concealedSamples):y.longs===Number?new a.LongBits(d.concealedSamples.low>>>0,d.concealedSamples.high>>>0).toNumber(!0):d.concealedSamples),E},"toObject"),p.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),p.getTypeUrl=s(function(d){return d===void 0&&(d="type.googleapis.com"),d+"/slack.calls.analytics.RecvMedia.Audio"},"getTypeUrl"),p}(),o.Video=function(){function p(S){if(S)for(let d=Object.keys(S),y=0;y<d.length;++y)S[d[y]]!=null&&(this[d[y]]=S[d[y]])}return s(p,"Video"),p.prototype.firCount=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.nackCount=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.pliCount=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.sliCount=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.frameHeight=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.frameWidth=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.framesPerSecond=0,p.prototype.framesCorrupted=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.framesDecoded=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.framesDropped=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.framesReceived=a.Long?a.Long.fromBits(0,0,!0):0,p.create=s(function(d){return new p(d)},"create"),p.encode=s(function(d,y){return y||(y=h.create()),d.firCount!=null&&Object.hasOwnProperty.call(d,"firCount")&&y.uint32(8).uint64(d.firCount),d.nackCount!=null&&Object.hasOwnProperty.call(d,"nackCount")&&y.uint32(16).uint64(d.nackCount),d.pliCount!=null&&Object.hasOwnProperty.call(d,"pliCount")&&y.uint32(24).uint64(d.pliCount),d.sliCount!=null&&Object.hasOwnProperty.call(d,"sliCount")&&y.uint32(32).uint64(d.sliCount),d.frameHeight!=null&&Object.hasOwnProperty.call(d,"frameHeight")&&y.uint32(40).uint64(d.frameHeight),d.frameWidth!=null&&Object.hasOwnProperty.call(d,"frameWidth")&&y.uint32(48).uint64(d.frameWidth),d.framesPerSecond!=null&&Object.hasOwnProperty.call(d,"framesPerSecond")&&y.uint32(57).double(d.framesPerSecond),d.framesCorrupted!=null&&Object.hasOwnProperty.call(d,"framesCorrupted")&&y.uint32(64).uint64(d.framesCorrupted),d.framesDecoded!=null&&Object.hasOwnProperty.call(d,"framesDecoded")&&y.uint32(72).uint64(d.framesDecoded),d.framesDropped!=null&&Object.hasOwnProperty.call(d,"framesDropped")&&y.uint32(80).uint64(d.framesDropped),d.framesReceived!=null&&Object.hasOwnProperty.call(d,"framesReceived")&&y.uint32(88).uint64(d.framesReceived),y},"encode"),p.encodeDelimited=s(function(d,y){return this.encode(d,y).ldelim()},"encodeDelimited"),p.decode=s(function(d,y){d instanceof m||(d=m.create(d));let E=y===void 0?d.len:d.pos+y,I=new r.slack.calls.analytics.RecvMedia.Video;for(;d.pos<E;){let A=d.uint32();switch(A>>>3){case 1:{I.firCount=d.uint64();break}case 2:{I.nackCount=d.uint64();break}case 3:{I.pliCount=d.uint64();break}case 4:{I.sliCount=d.uint64();break}case 5:{I.frameHeight=d.uint64();break}case 6:{I.frameWidth=d.uint64();break}case 7:{I.framesPerSecond=d.double();break}case 8:{I.framesCorrupted=d.uint64();break}case 9:{I.framesDecoded=d.uint64();break}case 10:{I.framesDropped=d.uint64();break}case 11:{I.framesReceived=d.uint64();break}default:d.skipType(A&7);break}}return I},"decode"),p.decodeDelimited=s(function(d){return d instanceof m||(d=new m(d)),this.decode(d,d.uint32())},"decodeDelimited"),p.verify=s(function(d){return typeof d!="object"||d===null?"object expected":d.firCount!=null&&d.hasOwnProperty("firCount")&&!a.isInteger(d.firCount)&&!(d.firCount&&a.isInteger(d.firCount.low)&&a.isInteger(d.firCount.high))?"firCount: integer|Long expected":d.nackCount!=null&&d.hasOwnProperty("nackCount")&&!a.isInteger(d.nackCount)&&!(d.nackCount&&a.isInteger(d.nackCount.low)&&a.isInteger(d.nackCount.high))?"nackCount: integer|Long expected":d.pliCount!=null&&d.hasOwnProperty("pliCount")&&!a.isInteger(d.pliCount)&&!(d.pliCount&&a.isInteger(d.pliCount.low)&&a.isInteger(d.pliCount.high))?"pliCount: integer|Long expected":d.sliCount!=null&&d.hasOwnProperty("sliCount")&&!a.isInteger(d.sliCount)&&!(d.sliCount&&a.isInteger(d.sliCount.low)&&a.isInteger(d.sliCount.high))?"sliCount: integer|Long expected":d.frameHeight!=null&&d.hasOwnProperty("frameHeight")&&!a.isInteger(d.frameHeight)&&!(d.frameHeight&&a.isInteger(d.frameHeight.low)&&a.isInteger(d.frameHeight.high))?"frameHeight: integer|Long expected":d.frameWidth!=null&&d.hasOwnProperty("frameWidth")&&!a.isInteger(d.frameWidth)&&!(d.frameWidth&&a.isInteger(d.frameWidth.low)&&a.isInteger(d.frameWidth.high))?"frameWidth: integer|Long expected":d.framesPerSecond!=null&&d.hasOwnProperty("framesPerSecond")&&typeof d.framesPerSecond!="number"?"framesPerSecond: number expected":d.framesCorrupted!=null&&d.hasOwnProperty("framesCorrupted")&&!a.isInteger(d.framesCorrupted)&&!(d.framesCorrupted&&a.isInteger(d.framesCorrupted.low)&&a.isInteger(d.framesCorrupted.high))?"framesCorrupted: integer|Long expected":d.framesDecoded!=null&&d.hasOwnProperty("framesDecoded")&&!a.isInteger(d.framesDecoded)&&!(d.framesDecoded&&a.isInteger(d.framesDecoded.low)&&a.isInteger(d.framesDecoded.high))?"framesDecoded: integer|Long expected":d.framesDropped!=null&&d.hasOwnProperty("framesDropped")&&!a.isInteger(d.framesDropped)&&!(d.framesDropped&&a.isInteger(d.framesDropped.low)&&a.isInteger(d.framesDropped.high))?"framesDropped: integer|Long expected":d.framesReceived!=null&&d.hasOwnProperty("framesReceived")&&!a.isInteger(d.framesReceived)&&!(d.framesReceived&&a.isInteger(d.framesReceived.low)&&a.isInteger(d.framesReceived.high))?"framesReceived: integer|Long expected":null},"verify"),p.fromObject=s(function(d){if(d instanceof r.slack.calls.analytics.RecvMedia.Video)return d;let y=new r.slack.calls.analytics.RecvMedia.Video;return d.firCount!=null&&(a.Long?(y.firCount=a.Long.fromValue(d.firCount)).unsigned=!0:typeof d.firCount=="string"?y.firCount=parseInt(d.firCount,10):typeof d.firCount=="number"?y.firCount=d.firCount:typeof d.firCount=="object"&&(y.firCount=new a.LongBits(d.firCount.low>>>0,d.firCount.high>>>0).toNumber(!0))),d.nackCount!=null&&(a.Long?(y.nackCount=a.Long.fromValue(d.nackCount)).unsigned=!0:typeof d.nackCount=="string"?y.nackCount=parseInt(d.nackCount,10):typeof d.nackCount=="number"?y.nackCount=d.nackCount:typeof d.nackCount=="object"&&(y.nackCount=new a.LongBits(d.nackCount.low>>>0,d.nackCount.high>>>0).toNumber(!0))),d.pliCount!=null&&(a.Long?(y.pliCount=a.Long.fromValue(d.pliCount)).unsigned=!0:typeof d.pliCount=="string"?y.pliCount=parseInt(d.pliCount,10):typeof d.pliCount=="number"?y.pliCount=d.pliCount:typeof d.pliCount=="object"&&(y.pliCount=new a.LongBits(d.pliCount.low>>>0,d.pliCount.high>>>0).toNumber(!0))),d.sliCount!=null&&(a.Long?(y.sliCount=a.Long.fromValue(d.sliCount)).unsigned=!0:typeof d.sliCount=="string"?y.sliCount=parseInt(d.sliCount,10):typeof d.sliCount=="number"?y.sliCount=d.sliCount:typeof d.sliCount=="object"&&(y.sliCount=new a.LongBits(d.sliCount.low>>>0,d.sliCount.high>>>0).toNumber(!0))),d.frameHeight!=null&&(a.Long?(y.frameHeight=a.Long.fromValue(d.frameHeight)).unsigned=!0:typeof d.frameHeight=="string"?y.frameHeight=parseInt(d.frameHeight,10):typeof d.frameHeight=="number"?y.frameHeight=d.frameHeight:typeof d.frameHeight=="object"&&(y.frameHeight=new a.LongBits(d.frameHeight.low>>>0,d.frameHeight.high>>>0).toNumber(!0))),d.frameWidth!=null&&(a.Long?(y.frameWidth=a.Long.fromValue(d.frameWidth)).unsigned=!0:typeof d.frameWidth=="string"?y.frameWidth=parseInt(d.frameWidth,10):typeof d.frameWidth=="number"?y.frameWidth=d.frameWidth:typeof d.frameWidth=="object"&&(y.frameWidth=new a.LongBits(d.frameWidth.low>>>0,d.frameWidth.high>>>0).toNumber(!0))),d.framesPerSecond!=null&&(y.framesPerSecond=Number(d.framesPerSecond)),d.framesCorrupted!=null&&(a.Long?(y.framesCorrupted=a.Long.fromValue(d.framesCorrupted)).unsigned=!0:typeof d.framesCorrupted=="string"?y.framesCorrupted=parseInt(d.framesCorrupted,10):typeof d.framesCorrupted=="number"?y.framesCorrupted=d.framesCorrupted:typeof d.framesCorrupted=="object"&&(y.framesCorrupted=new a.LongBits(d.framesCorrupted.low>>>0,d.framesCorrupted.high>>>0).toNumber(!0))),d.framesDecoded!=null&&(a.Long?(y.framesDecoded=a.Long.fromValue(d.framesDecoded)).unsigned=!0:typeof d.framesDecoded=="string"?y.framesDecoded=parseInt(d.framesDecoded,10):typeof d.framesDecoded=="number"?y.framesDecoded=d.framesDecoded:typeof d.framesDecoded=="object"&&(y.framesDecoded=new a.LongBits(d.framesDecoded.low>>>0,d.framesDecoded.high>>>0).toNumber(!0))),d.framesDropped!=null&&(a.Long?(y.framesDropped=a.Long.fromValue(d.framesDropped)).unsigned=!0:typeof d.framesDropped=="string"?y.framesDropped=parseInt(d.framesDropped,10):typeof d.framesDropped=="number"?y.framesDropped=d.framesDropped:typeof d.framesDropped=="object"&&(y.framesDropped=new a.LongBits(d.framesDropped.low>>>0,d.framesDropped.high>>>0).toNumber(!0))),d.framesReceived!=null&&(a.Long?(y.framesReceived=a.Long.fromValue(d.framesReceived)).unsigned=!0:typeof d.framesReceived=="string"?y.framesReceived=parseInt(d.framesReceived,10):typeof d.framesReceived=="number"?y.framesReceived=d.framesReceived:typeof d.framesReceived=="object"&&(y.framesReceived=new a.LongBits(d.framesReceived.low>>>0,d.framesReceived.high>>>0).toNumber(!0))),y},"fromObject"),p.toObject=s(function(d,y){y||(y={});let E={};if(y.defaults){if(a.Long){let I=new a.Long(0,0,!0);E.firCount=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.firCount=y.longs===String?"0":0;if(a.Long){let I=new a.Long(0,0,!0);E.nackCount=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.nackCount=y.longs===String?"0":0;if(a.Long){let I=new a.Long(0,0,!0);E.pliCount=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.pliCount=y.longs===String?"0":0;if(a.Long){let I=new a.Long(0,0,!0);E.sliCount=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.sliCount=y.longs===String?"0":0;if(a.Long){let I=new a.Long(0,0,!0);E.frameHeight=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.frameHeight=y.longs===String?"0":0;if(a.Long){let I=new a.Long(0,0,!0);E.frameWidth=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.frameWidth=y.longs===String?"0":0;if(E.framesPerSecond=0,a.Long){let I=new a.Long(0,0,!0);E.framesCorrupted=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.framesCorrupted=y.longs===String?"0":0;if(a.Long){let I=new a.Long(0,0,!0);E.framesDecoded=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.framesDecoded=y.longs===String?"0":0;if(a.Long){let I=new a.Long(0,0,!0);E.framesDropped=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.framesDropped=y.longs===String?"0":0;if(a.Long){let I=new a.Long(0,0,!0);E.framesReceived=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.framesReceived=y.longs===String?"0":0}return d.firCount!=null&&d.hasOwnProperty("firCount")&&(typeof d.firCount=="number"?E.firCount=y.longs===String?String(d.firCount):d.firCount:E.firCount=y.longs===String?a.Long.prototype.toString.call(d.firCount):y.longs===Number?new a.LongBits(d.firCount.low>>>0,d.firCount.high>>>0).toNumber(!0):d.firCount),d.nackCount!=null&&d.hasOwnProperty("nackCount")&&(typeof d.nackCount=="number"?E.nackCount=y.longs===String?String(d.nackCount):d.nackCount:E.nackCount=y.longs===String?a.Long.prototype.toString.call(d.nackCount):y.longs===Number?new a.LongBits(d.nackCount.low>>>0,d.nackCount.high>>>0).toNumber(!0):d.nackCount),d.pliCount!=null&&d.hasOwnProperty("pliCount")&&(typeof d.pliCount=="number"?E.pliCount=y.longs===String?String(d.pliCount):d.pliCount:E.pliCount=y.longs===String?a.Long.prototype.toString.call(d.pliCount):y.longs===Number?new a.LongBits(d.pliCount.low>>>0,d.pliCount.high>>>0).toNumber(!0):d.pliCount),d.sliCount!=null&&d.hasOwnProperty("sliCount")&&(typeof d.sliCount=="number"?E.sliCount=y.longs===String?String(d.sliCount):d.sliCount:E.sliCount=y.longs===String?a.Long.prototype.toString.call(d.sliCount):y.longs===Number?new a.LongBits(d.sliCount.low>>>0,d.sliCount.high>>>0).toNumber(!0):d.sliCount),d.frameHeight!=null&&d.hasOwnProperty("frameHeight")&&(typeof d.frameHeight=="number"?E.frameHeight=y.longs===String?String(d.frameHeight):d.frameHeight:E.frameHeight=y.longs===String?a.Long.prototype.toString.call(d.frameHeight):y.longs===Number?new a.LongBits(d.frameHeight.low>>>0,d.frameHeight.high>>>0).toNumber(!0):d.frameHeight),d.frameWidth!=null&&d.hasOwnProperty("frameWidth")&&(typeof d.frameWidth=="number"?E.frameWidth=y.longs===String?String(d.frameWidth):d.frameWidth:E.frameWidth=y.longs===String?a.Long.prototype.toString.call(d.frameWidth):y.longs===Number?new a.LongBits(d.frameWidth.low>>>0,d.frameWidth.high>>>0).toNumber(!0):d.frameWidth),d.framesPerSecond!=null&&d.hasOwnProperty("framesPerSecond")&&(E.framesPerSecond=y.json&&!isFinite(d.framesPerSecond)?String(d.framesPerSecond):d.framesPerSecond),d.framesCorrupted!=null&&d.hasOwnProperty("framesCorrupted")&&(typeof d.framesCorrupted=="number"?E.framesCorrupted=y.longs===String?String(d.framesCorrupted):d.framesCorrupted:E.framesCorrupted=y.longs===String?a.Long.prototype.toString.call(d.framesCorrupted):y.longs===Number?new a.LongBits(d.framesCorrupted.low>>>0,d.framesCorrupted.high>>>0).toNumber(!0):d.framesCorrupted),d.framesDecoded!=null&&d.hasOwnProperty("framesDecoded")&&(typeof d.framesDecoded=="number"?E.framesDecoded=y.longs===String?String(d.framesDecoded):d.framesDecoded:E.framesDecoded=y.longs===String?a.Long.prototype.toString.call(d.framesDecoded):y.longs===Number?new a.LongBits(d.framesDecoded.low>>>0,d.framesDecoded.high>>>0).toNumber(!0):d.framesDecoded),d.framesDropped!=null&&d.hasOwnProperty("framesDropped")&&(typeof d.framesDropped=="number"?E.framesDropped=y.longs===String?String(d.framesDropped):d.framesDropped:E.framesDropped=y.longs===String?a.Long.prototype.toString.call(d.framesDropped):y.longs===Number?new a.LongBits(d.framesDropped.low>>>0,d.framesDropped.high>>>0).toNumber(!0):d.framesDropped),d.framesReceived!=null&&d.hasOwnProperty("framesReceived")&&(typeof d.framesReceived=="number"?E.framesReceived=y.longs===String?String(d.framesReceived):d.framesReceived:E.framesReceived=y.longs===String?a.Long.prototype.toString.call(d.framesReceived):y.longs===Number?new a.LongBits(d.framesReceived.low>>>0,d.framesReceived.high>>>0).toNumber(!0):d.framesReceived),E},"toObject"),p.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),p.getTypeUrl=s(function(d){return d===void 0&&(d="type.googleapis.com"),d+"/slack.calls.analytics.RecvMedia.Video"},"getTypeUrl"),p}(),o}(),i.SendMedia=function(){function o(p){if(p)for(let S=Object.keys(p),d=0;d<S.length;++d)p[S[d]]!=null&&(this[S[d]]=p[S[d]])}s(o,"SendMedia"),o.prototype.peerId=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.bytesSent=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.packetsSent=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.codec=0,o.prototype.peerIdString="",o.prototype.audioStats=null,o.prototype.videoStats=null;let c;return Object.defineProperty(o.prototype,"mediaType",{get:a.oneOfGetter(c=["audioStats","videoStats"]),set:a.oneOfSetter(c)}),o.create=s(function(S){return new o(S)},"create"),o.encode=s(function(S,d){return d||(d=h.create()),S.peerId!=null&&Object.hasOwnProperty.call(S,"peerId")&&d.uint32(8).uint64(S.peerId),S.bytesSent!=null&&Object.hasOwnProperty.call(S,"bytesSent")&&d.uint32(16).uint64(S.bytesSent),S.packetsSent!=null&&Object.hasOwnProperty.call(S,"packetsSent")&&d.uint32(24).uint64(S.packetsSent),S.codec!=null&&Object.hasOwnProperty.call(S,"codec")&&d.uint32(32).int32(S.codec),S.audioStats!=null&&Object.hasOwnProperty.call(S,"audioStats")&&r.slack.calls.analytics.SendMedia.Audio.encode(S.audioStats,d.uint32(42).fork()).ldelim(),S.videoStats!=null&&Object.hasOwnProperty.call(S,"videoStats")&&r.slack.calls.analytics.SendMedia.Video.encode(S.videoStats,d.uint32(50).fork()).ldelim(),S.peerIdString!=null&&Object.hasOwnProperty.call(S,"peerIdString")&&d.uint32(58).string(S.peerIdString),d},"encode"),o.encodeDelimited=s(function(S,d){return this.encode(S,d).ldelim()},"encodeDelimited"),o.decode=s(function(S,d){S instanceof m||(S=m.create(S));let y=d===void 0?S.len:S.pos+d,E=new r.slack.calls.analytics.SendMedia;for(;S.pos<y;){let I=S.uint32();switch(I>>>3){case 1:{E.peerId=S.uint64();break}case 2:{E.bytesSent=S.uint64();break}case 3:{E.packetsSent=S.uint64();break}case 4:{E.codec=S.int32();break}case 7:{E.peerIdString=S.string();break}case 5:{E.audioStats=r.slack.calls.analytics.SendMedia.Audio.decode(S,S.uint32());break}case 6:{E.videoStats=r.slack.calls.analytics.SendMedia.Video.decode(S,S.uint32());break}default:S.skipType(I&7);break}}return E},"decode"),o.decodeDelimited=s(function(S){return S instanceof m||(S=new m(S)),this.decode(S,S.uint32())},"decodeDelimited"),o.verify=s(function(S){if(typeof S!="object"||S===null)return"object expected";let d={};if(S.peerId!=null&&S.hasOwnProperty("peerId")&&!a.isInteger(S.peerId)&&!(S.peerId&&a.isInteger(S.peerId.low)&&a.isInteger(S.peerId.high)))return"peerId: integer|Long expected";if(S.bytesSent!=null&&S.hasOwnProperty("bytesSent")&&!a.isInteger(S.bytesSent)&&!(S.bytesSent&&a.isInteger(S.bytesSent.low)&&a.isInteger(S.bytesSent.high)))return"bytesSent: integer|Long expected";if(S.packetsSent!=null&&S.hasOwnProperty("packetsSent")&&!a.isInteger(S.packetsSent)&&!(S.packetsSent&&a.isInteger(S.packetsSent.low)&&a.isInteger(S.packetsSent.high)))return"packetsSent: integer|Long expected";if(S.codec!=null&&S.hasOwnProperty("codec"))switch(S.codec){default:return"codec: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&!a.isString(S.peerIdString))return"peerIdString: string expected";if(S.audioStats!=null&&S.hasOwnProperty("audioStats")){d.mediaType=1;{let y=r.slack.calls.analytics.SendMedia.Audio.verify(S.audioStats);if(y)return"audioStats."+y}}if(S.videoStats!=null&&S.hasOwnProperty("videoStats")){if(d.mediaType===1)return"mediaType: multiple values";d.mediaType=1;{let y=r.slack.calls.analytics.SendMedia.Video.verify(S.videoStats);if(y)return"videoStats."+y}}return null},"verify"),o.fromObject=s(function(S){if(S instanceof r.slack.calls.analytics.SendMedia)return S;let d=new r.slack.calls.analytics.SendMedia;switch(S.peerId!=null&&(a.Long?(d.peerId=a.Long.fromValue(S.peerId)).unsigned=!0:typeof S.peerId=="string"?d.peerId=parseInt(S.peerId,10):typeof S.peerId=="number"?d.peerId=S.peerId:typeof S.peerId=="object"&&(d.peerId=new a.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0))),S.bytesSent!=null&&(a.Long?(d.bytesSent=a.Long.fromValue(S.bytesSent)).unsigned=!0:typeof S.bytesSent=="string"?d.bytesSent=parseInt(S.bytesSent,10):typeof S.bytesSent=="number"?d.bytesSent=S.bytesSent:typeof S.bytesSent=="object"&&(d.bytesSent=new a.LongBits(S.bytesSent.low>>>0,S.bytesSent.high>>>0).toNumber(!0))),S.packetsSent!=null&&(a.Long?(d.packetsSent=a.Long.fromValue(S.packetsSent)).unsigned=!0:typeof S.packetsSent=="string"?d.packetsSent=parseInt(S.packetsSent,10):typeof S.packetsSent=="number"?d.packetsSent=S.packetsSent:typeof S.packetsSent=="object"&&(d.packetsSent=new a.LongBits(S.packetsSent.low>>>0,S.packetsSent.high>>>0).toNumber(!0))),S.codec){default:if(typeof S.codec=="number"){d.codec=S.codec;break}break;case"UNKNOWN":case 0:d.codec=0;break;case"OPUS":case 1:d.codec=1;break;case"VP8":case 2:d.codec=2;break;case"VP9":case 3:d.codec=3;break;case"H264":case 4:d.codec=4;break}if(S.peerIdString!=null&&(d.peerIdString=String(S.peerIdString)),S.audioStats!=null){if(typeof S.audioStats!="object")throw TypeError(".slack.calls.analytics.SendMedia.audioStats: object expected");d.audioStats=r.slack.calls.analytics.SendMedia.Audio.fromObject(S.audioStats)}if(S.videoStats!=null){if(typeof S.videoStats!="object")throw TypeError(".slack.calls.analytics.SendMedia.videoStats: object expected");d.videoStats=r.slack.calls.analytics.SendMedia.Video.fromObject(S.videoStats)}return d},"fromObject"),o.toObject=s(function(S,d){d||(d={});let y={};if(d.defaults){if(a.Long){let E=new a.Long(0,0,!0);y.peerId=d.longs===String?E.toString():d.longs===Number?E.toNumber():E}else y.peerId=d.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);y.bytesSent=d.longs===String?E.toString():d.longs===Number?E.toNumber():E}else y.bytesSent=d.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);y.packetsSent=d.longs===String?E.toString():d.longs===Number?E.toNumber():E}else y.packetsSent=d.longs===String?"0":0;y.codec=d.enums===String?"UNKNOWN":0,y.peerIdString=""}return S.peerId!=null&&S.hasOwnProperty("peerId")&&(typeof S.peerId=="number"?y.peerId=d.longs===String?String(S.peerId):S.peerId:y.peerId=d.longs===String?a.Long.prototype.toString.call(S.peerId):d.longs===Number?new a.LongBits(S.peerId.low>>>0,S.peerId.high>>>0).toNumber(!0):S.peerId),S.bytesSent!=null&&S.hasOwnProperty("bytesSent")&&(typeof S.bytesSent=="number"?y.bytesSent=d.longs===String?String(S.bytesSent):S.bytesSent:y.bytesSent=d.longs===String?a.Long.prototype.toString.call(S.bytesSent):d.longs===Number?new a.LongBits(S.bytesSent.low>>>0,S.bytesSent.high>>>0).toNumber(!0):S.bytesSent),S.packetsSent!=null&&S.hasOwnProperty("packetsSent")&&(typeof S.packetsSent=="number"?y.packetsSent=d.longs===String?String(S.packetsSent):S.packetsSent:y.packetsSent=d.longs===String?a.Long.prototype.toString.call(S.packetsSent):d.longs===Number?new a.LongBits(S.packetsSent.low>>>0,S.packetsSent.high>>>0).toNumber(!0):S.packetsSent),S.codec!=null&&S.hasOwnProperty("codec")&&(y.codec=d.enums===String?r.slack.calls.analytics.Codec[S.codec]===void 0?S.codec:r.slack.calls.analytics.Codec[S.codec]:S.codec),S.audioStats!=null&&S.hasOwnProperty("audioStats")&&(y.audioStats=r.slack.calls.analytics.SendMedia.Audio.toObject(S.audioStats,d),d.oneofs&&(y.mediaType="audioStats")),S.videoStats!=null&&S.hasOwnProperty("videoStats")&&(y.videoStats=r.slack.calls.analytics.SendMedia.Video.toObject(S.videoStats,d),d.oneofs&&(y.mediaType="videoStats")),S.peerIdString!=null&&S.hasOwnProperty("peerIdString")&&(y.peerIdString=S.peerIdString),y},"toObject"),o.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),o.getTypeUrl=s(function(S){return S===void 0&&(S="type.googleapis.com"),S+"/slack.calls.analytics.SendMedia"},"getTypeUrl"),o.Audio=function(){function p(S){if(S)for(let d=Object.keys(S),y=0;y<d.length;++y)S[d[y]]!=null&&(this[d[y]]=S[d[y]])}return s(p,"Audio"),p.prototype.audioLevel=0,p.prototype.echoReturnLoss=0,p.prototype.echoReturnLossEnhancement=0,p.prototype.totalAudioEnergy=0,p.prototype.totalSamplesDuration=0,p.create=s(function(d){return new p(d)},"create"),p.encode=s(function(d,y){return y||(y=h.create()),d.audioLevel!=null&&Object.hasOwnProperty.call(d,"audioLevel")&&y.uint32(9).double(d.audioLevel),d.echoReturnLoss!=null&&Object.hasOwnProperty.call(d,"echoReturnLoss")&&y.uint32(17).double(d.echoReturnLoss),d.echoReturnLossEnhancement!=null&&Object.hasOwnProperty.call(d,"echoReturnLossEnhancement")&&y.uint32(25).double(d.echoReturnLossEnhancement),d.totalAudioEnergy!=null&&Object.hasOwnProperty.call(d,"totalAudioEnergy")&&y.uint32(33).double(d.totalAudioEnergy),d.totalSamplesDuration!=null&&Object.hasOwnProperty.call(d,"totalSamplesDuration")&&y.uint32(41).double(d.totalSamplesDuration),y},"encode"),p.encodeDelimited=s(function(d,y){return this.encode(d,y).ldelim()},"encodeDelimited"),p.decode=s(function(d,y){d instanceof m||(d=m.create(d));let E=y===void 0?d.len:d.pos+y,I=new r.slack.calls.analytics.SendMedia.Audio;for(;d.pos<E;){let A=d.uint32();switch(A>>>3){case 1:{I.audioLevel=d.double();break}case 2:{I.echoReturnLoss=d.double();break}case 3:{I.echoReturnLossEnhancement=d.double();break}case 4:{I.totalAudioEnergy=d.double();break}case 5:{I.totalSamplesDuration=d.double();break}default:d.skipType(A&7);break}}return I},"decode"),p.decodeDelimited=s(function(d){return d instanceof m||(d=new m(d)),this.decode(d,d.uint32())},"decodeDelimited"),p.verify=s(function(d){return typeof d!="object"||d===null?"object expected":d.audioLevel!=null&&d.hasOwnProperty("audioLevel")&&typeof d.audioLevel!="number"?"audioLevel: number expected":d.echoReturnLoss!=null&&d.hasOwnProperty("echoReturnLoss")&&typeof d.echoReturnLoss!="number"?"echoReturnLoss: number expected":d.echoReturnLossEnhancement!=null&&d.hasOwnProperty("echoReturnLossEnhancement")&&typeof d.echoReturnLossEnhancement!="number"?"echoReturnLossEnhancement: number expected":d.totalAudioEnergy!=null&&d.hasOwnProperty("totalAudioEnergy")&&typeof d.totalAudioEnergy!="number"?"totalAudioEnergy: number expected":d.totalSamplesDuration!=null&&d.hasOwnProperty("totalSamplesDuration")&&typeof d.totalSamplesDuration!="number"?"totalSamplesDuration: number expected":null},"verify"),p.fromObject=s(function(d){if(d instanceof r.slack.calls.analytics.SendMedia.Audio)return d;let y=new r.slack.calls.analytics.SendMedia.Audio;return d.audioLevel!=null&&(y.audioLevel=Number(d.audioLevel)),d.echoReturnLoss!=null&&(y.echoReturnLoss=Number(d.echoReturnLoss)),d.echoReturnLossEnhancement!=null&&(y.echoReturnLossEnhancement=Number(d.echoReturnLossEnhancement)),d.totalAudioEnergy!=null&&(y.totalAudioEnergy=Number(d.totalAudioEnergy)),d.totalSamplesDuration!=null&&(y.totalSamplesDuration=Number(d.totalSamplesDuration)),y},"fromObject"),p.toObject=s(function(d,y){y||(y={});let E={};return y.defaults&&(E.audioLevel=0,E.echoReturnLoss=0,E.echoReturnLossEnhancement=0,E.totalAudioEnergy=0,E.totalSamplesDuration=0),d.audioLevel!=null&&d.hasOwnProperty("audioLevel")&&(E.audioLevel=y.json&&!isFinite(d.audioLevel)?String(d.audioLevel):d.audioLevel),d.echoReturnLoss!=null&&d.hasOwnProperty("echoReturnLoss")&&(E.echoReturnLoss=y.json&&!isFinite(d.echoReturnLoss)?String(d.echoReturnLoss):d.echoReturnLoss),d.echoReturnLossEnhancement!=null&&d.hasOwnProperty("echoReturnLossEnhancement")&&(E.echoReturnLossEnhancement=y.json&&!isFinite(d.echoReturnLossEnhancement)?String(d.echoReturnLossEnhancement):d.echoReturnLossEnhancement),d.totalAudioEnergy!=null&&d.hasOwnProperty("totalAudioEnergy")&&(E.totalAudioEnergy=y.json&&!isFinite(d.totalAudioEnergy)?String(d.totalAudioEnergy):d.totalAudioEnergy),d.totalSamplesDuration!=null&&d.hasOwnProperty("totalSamplesDuration")&&(E.totalSamplesDuration=y.json&&!isFinite(d.totalSamplesDuration)?String(d.totalSamplesDuration):d.totalSamplesDuration),E},"toObject"),p.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),p.getTypeUrl=s(function(d){return d===void 0&&(d="type.googleapis.com"),d+"/slack.calls.analytics.SendMedia.Audio"},"getTypeUrl"),p}(),o.Video=function(){function p(S){if(S)for(let d=Object.keys(S),y=0;y<d.length;++y)S[d[y]]!=null&&(this[d[y]]=S[d[y]])}return s(p,"Video"),p.prototype.frameHeight=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.frameWidth=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.framesPerSecond=0,p.prototype.framesSent=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.framesEncoded=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.hugeFramesSent=a.Long?a.Long.fromBits(0,0,!0):0,p.create=s(function(d){return new p(d)},"create"),p.encode=s(function(d,y){return y||(y=h.create()),d.frameHeight!=null&&Object.hasOwnProperty.call(d,"frameHeight")&&y.uint32(8).uint64(d.frameHeight),d.frameWidth!=null&&Object.hasOwnProperty.call(d,"frameWidth")&&y.uint32(16).uint64(d.frameWidth),d.framesPerSecond!=null&&Object.hasOwnProperty.call(d,"framesPerSecond")&&y.uint32(25).double(d.framesPerSecond),d.framesSent!=null&&Object.hasOwnProperty.call(d,"framesSent")&&y.uint32(32).uint64(d.framesSent),d.framesEncoded!=null&&Object.hasOwnProperty.call(d,"framesEncoded")&&y.uint32(40).uint64(d.framesEncoded),d.hugeFramesSent!=null&&Object.hasOwnProperty.call(d,"hugeFramesSent")&&y.uint32(48).uint64(d.hugeFramesSent),y},"encode"),p.encodeDelimited=s(function(d,y){return this.encode(d,y).ldelim()},"encodeDelimited"),p.decode=s(function(d,y){d instanceof m||(d=m.create(d));let E=y===void 0?d.len:d.pos+y,I=new r.slack.calls.analytics.SendMedia.Video;for(;d.pos<E;){let A=d.uint32();switch(A>>>3){case 1:{I.frameHeight=d.uint64();break}case 2:{I.frameWidth=d.uint64();break}case 3:{I.framesPerSecond=d.double();break}case 4:{I.framesSent=d.uint64();break}case 5:{I.framesEncoded=d.uint64();break}case 6:{I.hugeFramesSent=d.uint64();break}default:d.skipType(A&7);break}}return I},"decode"),p.decodeDelimited=s(function(d){return d instanceof m||(d=new m(d)),this.decode(d,d.uint32())},"decodeDelimited"),p.verify=s(function(d){return typeof d!="object"||d===null?"object expected":d.frameHeight!=null&&d.hasOwnProperty("frameHeight")&&!a.isInteger(d.frameHeight)&&!(d.frameHeight&&a.isInteger(d.frameHeight.low)&&a.isInteger(d.frameHeight.high))?"frameHeight: integer|Long expected":d.frameWidth!=null&&d.hasOwnProperty("frameWidth")&&!a.isInteger(d.frameWidth)&&!(d.frameWidth&&a.isInteger(d.frameWidth.low)&&a.isInteger(d.frameWidth.high))?"frameWidth: integer|Long expected":d.framesPerSecond!=null&&d.hasOwnProperty("framesPerSecond")&&typeof d.framesPerSecond!="number"?"framesPerSecond: number expected":d.framesSent!=null&&d.hasOwnProperty("framesSent")&&!a.isInteger(d.framesSent)&&!(d.framesSent&&a.isInteger(d.framesSent.low)&&a.isInteger(d.framesSent.high))?"framesSent: integer|Long expected":d.framesEncoded!=null&&d.hasOwnProperty("framesEncoded")&&!a.isInteger(d.framesEncoded)&&!(d.framesEncoded&&a.isInteger(d.framesEncoded.low)&&a.isInteger(d.framesEncoded.high))?"framesEncoded: integer|Long expected":d.hugeFramesSent!=null&&d.hasOwnProperty("hugeFramesSent")&&!a.isInteger(d.hugeFramesSent)&&!(d.hugeFramesSent&&a.isInteger(d.hugeFramesSent.low)&&a.isInteger(d.hugeFramesSent.high))?"hugeFramesSent: integer|Long expected":null},"verify"),p.fromObject=s(function(d){if(d instanceof r.slack.calls.analytics.SendMedia.Video)return d;let y=new r.slack.calls.analytics.SendMedia.Video;return d.frameHeight!=null&&(a.Long?(y.frameHeight=a.Long.fromValue(d.frameHeight)).unsigned=!0:typeof d.frameHeight=="string"?y.frameHeight=parseInt(d.frameHeight,10):typeof d.frameHeight=="number"?y.frameHeight=d.frameHeight:typeof d.frameHeight=="object"&&(y.frameHeight=new a.LongBits(d.frameHeight.low>>>0,d.frameHeight.high>>>0).toNumber(!0))),d.frameWidth!=null&&(a.Long?(y.frameWidth=a.Long.fromValue(d.frameWidth)).unsigned=!0:typeof d.frameWidth=="string"?y.frameWidth=parseInt(d.frameWidth,10):typeof d.frameWidth=="number"?y.frameWidth=d.frameWidth:typeof d.frameWidth=="object"&&(y.frameWidth=new a.LongBits(d.frameWidth.low>>>0,d.frameWidth.high>>>0).toNumber(!0))),d.framesPerSecond!=null&&(y.framesPerSecond=Number(d.framesPerSecond)),d.framesSent!=null&&(a.Long?(y.framesSent=a.Long.fromValue(d.framesSent)).unsigned=!0:typeof d.framesSent=="string"?y.framesSent=parseInt(d.framesSent,10):typeof d.framesSent=="number"?y.framesSent=d.framesSent:typeof d.framesSent=="object"&&(y.framesSent=new a.LongBits(d.framesSent.low>>>0,d.framesSent.high>>>0).toNumber(!0))),d.framesEncoded!=null&&(a.Long?(y.framesEncoded=a.Long.fromValue(d.framesEncoded)).unsigned=!0:typeof d.framesEncoded=="string"?y.framesEncoded=parseInt(d.framesEncoded,10):typeof d.framesEncoded=="number"?y.framesEncoded=d.framesEncoded:typeof d.framesEncoded=="object"&&(y.framesEncoded=new a.LongBits(d.framesEncoded.low>>>0,d.framesEncoded.high>>>0).toNumber(!0))),d.hugeFramesSent!=null&&(a.Long?(y.hugeFramesSent=a.Long.fromValue(d.hugeFramesSent)).unsigned=!0:typeof d.hugeFramesSent=="string"?y.hugeFramesSent=parseInt(d.hugeFramesSent,10):typeof d.hugeFramesSent=="number"?y.hugeFramesSent=d.hugeFramesSent:typeof d.hugeFramesSent=="object"&&(y.hugeFramesSent=new a.LongBits(d.hugeFramesSent.low>>>0,d.hugeFramesSent.high>>>0).toNumber(!0))),y},"fromObject"),p.toObject=s(function(d,y){y||(y={});let E={};if(y.defaults){if(a.Long){let I=new a.Long(0,0,!0);E.frameHeight=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.frameHeight=y.longs===String?"0":0;if(a.Long){let I=new a.Long(0,0,!0);E.frameWidth=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.frameWidth=y.longs===String?"0":0;if(E.framesPerSecond=0,a.Long){let I=new a.Long(0,0,!0);E.framesSent=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.framesSent=y.longs===String?"0":0;if(a.Long){let I=new a.Long(0,0,!0);E.framesEncoded=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.framesEncoded=y.longs===String?"0":0;if(a.Long){let I=new a.Long(0,0,!0);E.hugeFramesSent=y.longs===String?I.toString():y.longs===Number?I.toNumber():I}else E.hugeFramesSent=y.longs===String?"0":0}return d.frameHeight!=null&&d.hasOwnProperty("frameHeight")&&(typeof d.frameHeight=="number"?E.frameHeight=y.longs===String?String(d.frameHeight):d.frameHeight:E.frameHeight=y.longs===String?a.Long.prototype.toString.call(d.frameHeight):y.longs===Number?new a.LongBits(d.frameHeight.low>>>0,d.frameHeight.high>>>0).toNumber(!0):d.frameHeight),d.frameWidth!=null&&d.hasOwnProperty("frameWidth")&&(typeof d.frameWidth=="number"?E.frameWidth=y.longs===String?String(d.frameWidth):d.frameWidth:E.frameWidth=y.longs===String?a.Long.prototype.toString.call(d.frameWidth):y.longs===Number?new a.LongBits(d.frameWidth.low>>>0,d.frameWidth.high>>>0).toNumber(!0):d.frameWidth),d.framesPerSecond!=null&&d.hasOwnProperty("framesPerSecond")&&(E.framesPerSecond=y.json&&!isFinite(d.framesPerSecond)?String(d.framesPerSecond):d.framesPerSecond),d.framesSent!=null&&d.hasOwnProperty("framesSent")&&(typeof d.framesSent=="number"?E.framesSent=y.longs===String?String(d.framesSent):d.framesSent:E.framesSent=y.longs===String?a.Long.prototype.toString.call(d.framesSent):y.longs===Number?new a.LongBits(d.framesSent.low>>>0,d.framesSent.high>>>0).toNumber(!0):d.framesSent),d.framesEncoded!=null&&d.hasOwnProperty("framesEncoded")&&(typeof d.framesEncoded=="number"?E.framesEncoded=y.longs===String?String(d.framesEncoded):d.framesEncoded:E.framesEncoded=y.longs===String?a.Long.prototype.toString.call(d.framesEncoded):y.longs===Number?new a.LongBits(d.framesEncoded.low>>>0,d.framesEncoded.high>>>0).toNumber(!0):d.framesEncoded),d.hugeFramesSent!=null&&d.hasOwnProperty("hugeFramesSent")&&(typeof d.hugeFramesSent=="number"?E.hugeFramesSent=y.longs===String?String(d.hugeFramesSent):d.hugeFramesSent:E.hugeFramesSent=y.longs===String?a.Long.prototype.toString.call(d.hugeFramesSent):y.longs===Number?new a.LongBits(d.hugeFramesSent.low>>>0,d.hugeFramesSent.high>>>0).toNumber(!0):d.hugeFramesSent),E},"toObject"),p.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),p.getTypeUrl=s(function(d){return d===void 0&&(d="type.googleapis.com"),d+"/slack.calls.analytics.SendMedia.Video"},"getTypeUrl"),p}(),o}(),i.MemoryInfo=function(){function o(c){if(c)for(let p=Object.keys(c),S=0;S<p.length;++S)c[p[S]]!=null&&(this[p[S]]=c[p[S]])}return s(o,"MemoryInfo"),o.prototype.workingSetSize=0,o.prototype.peakWorkingSetSize=0,o.create=s(function(p){return new o(p)},"create"),o.encode=s(function(p,S){return S||(S=h.create()),p.workingSetSize!=null&&Object.hasOwnProperty.call(p,"workingSetSize")&&S.uint32(9).double(p.workingSetSize),p.peakWorkingSetSize!=null&&Object.hasOwnProperty.call(p,"peakWorkingSetSize")&&S.uint32(17).double(p.peakWorkingSetSize),S},"encode"),o.encodeDelimited=s(function(p,S){return this.encode(p,S).ldelim()},"encodeDelimited"),o.decode=s(function(p,S){p instanceof m||(p=m.create(p));let d=S===void 0?p.len:p.pos+S,y=new r.slack.calls.analytics.MemoryInfo;for(;p.pos<d;){let E=p.uint32();switch(E>>>3){case 1:{y.workingSetSize=p.double();break}case 2:{y.peakWorkingSetSize=p.double();break}default:p.skipType(E&7);break}}return y},"decode"),o.decodeDelimited=s(function(p){return p instanceof m||(p=new m(p)),this.decode(p,p.uint32())},"decodeDelimited"),o.verify=s(function(p){return typeof p!="object"||p===null?"object expected":p.workingSetSize!=null&&p.hasOwnProperty("workingSetSize")&&typeof p.workingSetSize!="number"?"workingSetSize: number expected":p.peakWorkingSetSize!=null&&p.hasOwnProperty("peakWorkingSetSize")&&typeof p.peakWorkingSetSize!="number"?"peakWorkingSetSize: number expected":null},"verify"),o.fromObject=s(function(p){if(p instanceof r.slack.calls.analytics.MemoryInfo)return p;let S=new r.slack.calls.analytics.MemoryInfo;return p.workingSetSize!=null&&(S.workingSetSize=Number(p.workingSetSize)),p.peakWorkingSetSize!=null&&(S.peakWorkingSetSize=Number(p.peakWorkingSetSize)),S},"fromObject"),o.toObject=s(function(p,S){S||(S={});let d={};return S.defaults&&(d.workingSetSize=0,d.peakWorkingSetSize=0),p.workingSetSize!=null&&p.hasOwnProperty("workingSetSize")&&(d.workingSetSize=S.json&&!isFinite(p.workingSetSize)?String(p.workingSetSize):p.workingSetSize),p.peakWorkingSetSize!=null&&p.hasOwnProperty("peakWorkingSetSize")&&(d.peakWorkingSetSize=S.json&&!isFinite(p.peakWorkingSetSize)?String(p.peakWorkingSetSize):p.peakWorkingSetSize),d},"toObject"),o.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),o.getTypeUrl=s(function(p){return p===void 0&&(p="type.googleapis.com"),p+"/slack.calls.analytics.MemoryInfo"},"getTypeUrl"),o}(),i.AppMetrics=function(){function o(c){if(c)for(let p=Object.keys(c),S=0;S<p.length;++S)c[p[S]]!=null&&(this[p[S]]=c[p[S]])}return s(o,"AppMetrics"),o.prototype.cpu=0,o.prototype.memory=null,o.create=s(function(p){return new o(p)},"create"),o.encode=s(function(p,S){return S||(S=h.create()),p.cpu!=null&&Object.hasOwnProperty.call(p,"cpu")&&S.uint32(9).double(p.cpu),p.memory!=null&&Object.hasOwnProperty.call(p,"memory")&&r.slack.calls.analytics.MemoryInfo.encode(p.memory,S.uint32(18).fork()).ldelim(),S},"encode"),o.encodeDelimited=s(function(p,S){return this.encode(p,S).ldelim()},"encodeDelimited"),o.decode=s(function(p,S){p instanceof m||(p=m.create(p));let d=S===void 0?p.len:p.pos+S,y=new r.slack.calls.analytics.AppMetrics;for(;p.pos<d;){let E=p.uint32();switch(E>>>3){case 1:{y.cpu=p.double();break}case 2:{y.memory=r.slack.calls.analytics.MemoryInfo.decode(p,p.uint32());break}default:p.skipType(E&7);break}}return y},"decode"),o.decodeDelimited=s(function(p){return p instanceof m||(p=new m(p)),this.decode(p,p.uint32())},"decodeDelimited"),o.verify=s(function(p){if(typeof p!="object"||p===null)return"object expected";if(p.cpu!=null&&p.hasOwnProperty("cpu")&&typeof p.cpu!="number")return"cpu: number expected";if(p.memory!=null&&p.hasOwnProperty("memory")){let S=r.slack.calls.analytics.MemoryInfo.verify(p.memory);if(S)return"memory."+S}return null},"verify"),o.fromObject=s(function(p){if(p instanceof r.slack.calls.analytics.AppMetrics)return p;let S=new r.slack.calls.analytics.AppMetrics;if(p.cpu!=null&&(S.cpu=Number(p.cpu)),p.memory!=null){if(typeof p.memory!="object")throw TypeError(".slack.calls.analytics.AppMetrics.memory: object expected");S.memory=r.slack.calls.analytics.MemoryInfo.fromObject(p.memory)}return S},"fromObject"),o.toObject=s(function(p,S){S||(S={});let d={};return S.defaults&&(d.cpu=0,d.memory=null),p.cpu!=null&&p.hasOwnProperty("cpu")&&(d.cpu=S.json&&!isFinite(p.cpu)?String(p.cpu):p.cpu),p.memory!=null&&p.hasOwnProperty("memory")&&(d.memory=r.slack.calls.analytics.MemoryInfo.toObject(p.memory,S)),d},"toObject"),o.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),o.getTypeUrl=s(function(p){return p===void 0&&(p="type.googleapis.com"),p+"/slack.calls.analytics.AppMetrics"},"getTypeUrl"),o}(),i.Codec=function(){const o={},c=Object.create(o);return c[o[0]="UNKNOWN"]=0,c[o[1]="OPUS"]=1,c[o[2]="VP8"]=2,c[o[3]="VP9"]=3,c[o[4]="H264"]=4,c}(),i.Protocol=function(){const o={},c=Object.create(o);return c[o[0]="UDP"]=0,c[o[1]="TCP"]=1,c}(),i.PathType=function(){const o={},c=Object.create(o);return c[o[0]="DIRECT"]=0,c[o[1]="RELAY"]=1,c}(),i.Report=function(){function o(c){if(this.recv=[],this.send=[],c)for(let p=Object.keys(c),S=0;S<p.length;++S)c[p[S]]!=null&&(this[p[S]]=c[p[S]])}return s(o,"Report"),o.prototype.totalBytesSent=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.totalBytesReceived=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.totalRoundTripTime=0,o.prototype.currentRoundTripTime=0,o.prototype.availableOutgoingBitrate=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.protocol=0,o.prototype.pathType=0,o.prototype.recv=a.emptyArray,o.prototype.send=a.emptyArray,o.prototype.clientTime=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.availableIncomingBitrate=a.Long?a.Long.fromBits(0,0,!0):0,o.prototype.appMetrics=null,o.create=s(function(p){return new o(p)},"create"),o.encode=s(function(p,S){if(S||(S=h.create()),p.totalBytesSent!=null&&Object.hasOwnProperty.call(p,"totalBytesSent")&&S.uint32(8).uint64(p.totalBytesSent),p.totalBytesReceived!=null&&Object.hasOwnProperty.call(p,"totalBytesReceived")&&S.uint32(16).uint64(p.totalBytesReceived),p.totalRoundTripTime!=null&&Object.hasOwnProperty.call(p,"totalRoundTripTime")&&S.uint32(25).double(p.totalRoundTripTime),p.currentRoundTripTime!=null&&Object.hasOwnProperty.call(p,"currentRoundTripTime")&&S.uint32(33).double(p.currentRoundTripTime),p.availableOutgoingBitrate!=null&&Object.hasOwnProperty.call(p,"availableOutgoingBitrate")&&S.uint32(40).uint64(p.availableOutgoingBitrate),p.protocol!=null&&Object.hasOwnProperty.call(p,"protocol")&&S.uint32(48).int32(p.protocol),p.pathType!=null&&Object.hasOwnProperty.call(p,"pathType")&&S.uint32(56).int32(p.pathType),p.recv!=null&&p.recv.length)for(let d=0;d<p.recv.length;++d)r.slack.calls.analytics.RecvMedia.encode(p.recv[d],S.uint32(66).fork()).ldelim();if(p.send!=null&&p.send.length)for(let d=0;d<p.send.length;++d)r.slack.calls.analytics.SendMedia.encode(p.send[d],S.uint32(74).fork()).ldelim();return p.clientTime!=null&&Object.hasOwnProperty.call(p,"clientTime")&&S.uint32(80).uint64(p.clientTime),p.availableIncomingBitrate!=null&&Object.hasOwnProperty.call(p,"availableIncomingBitrate")&&S.uint32(88).uint64(p.availableIncomingBitrate),p.appMetrics!=null&&Object.hasOwnProperty.call(p,"appMetrics")&&r.slack.calls.analytics.AppMetrics.encode(p.appMetrics,S.uint32(98).fork()).ldelim(),S},"encode"),o.encodeDelimited=s(function(p,S){return this.encode(p,S).ldelim()},"encodeDelimited"),o.decode=s(function(p,S){p instanceof m||(p=m.create(p));let d=S===void 0?p.len:p.pos+S,y=new r.slack.calls.analytics.Report;for(;p.pos<d;){let E=p.uint32();switch(E>>>3){case 1:{y.totalBytesSent=p.uint64();break}case 2:{y.totalBytesReceived=p.uint64();break}case 3:{y.totalRoundTripTime=p.double();break}case 4:{y.currentRoundTripTime=p.double();break}case 5:{y.availableOutgoingBitrate=p.uint64();break}case 6:{y.protocol=p.int32();break}case 7:{y.pathType=p.int32();break}case 8:{y.recv&&y.recv.length||(y.recv=[]),y.recv.push(r.slack.calls.analytics.RecvMedia.decode(p,p.uint32()));break}case 9:{y.send&&y.send.length||(y.send=[]),y.send.push(r.slack.calls.analytics.SendMedia.decode(p,p.uint32()));break}case 10:{y.clientTime=p.uint64();break}case 11:{y.availableIncomingBitrate=p.uint64();break}case 12:{y.appMetrics=r.slack.calls.analytics.AppMetrics.decode(p,p.uint32());break}default:p.skipType(E&7);break}}return y},"decode"),o.decodeDelimited=s(function(p){return p instanceof m||(p=new m(p)),this.decode(p,p.uint32())},"decodeDelimited"),o.verify=s(function(p){if(typeof p!="object"||p===null)return"object expected";if(p.totalBytesSent!=null&&p.hasOwnProperty("totalBytesSent")&&!a.isInteger(p.totalBytesSent)&&!(p.totalBytesSent&&a.isInteger(p.totalBytesSent.low)&&a.isInteger(p.totalBytesSent.high)))return"totalBytesSent: integer|Long expected";if(p.totalBytesReceived!=null&&p.hasOwnProperty("totalBytesReceived")&&!a.isInteger(p.totalBytesReceived)&&!(p.totalBytesReceived&&a.isInteger(p.totalBytesReceived.low)&&a.isInteger(p.totalBytesReceived.high)))return"totalBytesReceived: integer|Long expected";if(p.totalRoundTripTime!=null&&p.hasOwnProperty("totalRoundTripTime")&&typeof p.totalRoundTripTime!="number")return"totalRoundTripTime: number expected";if(p.currentRoundTripTime!=null&&p.hasOwnProperty("currentRoundTripTime")&&typeof p.currentRoundTripTime!="number")return"currentRoundTripTime: number expected";if(p.availableOutgoingBitrate!=null&&p.hasOwnProperty("availableOutgoingBitrate")&&!a.isInteger(p.availableOutgoingBitrate)&&!(p.availableOutgoingBitrate&&a.isInteger(p.availableOutgoingBitrate.low)&&a.isInteger(p.availableOutgoingBitrate.high)))return"availableOutgoingBitrate: integer|Long expected";if(p.protocol!=null&&p.hasOwnProperty("protocol"))switch(p.protocol){default:return"protocol: enum value expected";case 0:case 1:break}if(p.pathType!=null&&p.hasOwnProperty("pathType"))switch(p.pathType){default:return"pathType: enum value expected";case 0:case 1:break}if(p.recv!=null&&p.hasOwnProperty("recv")){if(!Array.isArray(p.recv))return"recv: array expected";for(let S=0;S<p.recv.length;++S){let d=r.slack.calls.analytics.RecvMedia.verify(p.recv[S]);if(d)return"recv."+d}}if(p.send!=null&&p.hasOwnProperty("send")){if(!Array.isArray(p.send))return"send: array expected";for(let S=0;S<p.send.length;++S){let d=r.slack.calls.analytics.SendMedia.verify(p.send[S]);if(d)return"send."+d}}if(p.clientTime!=null&&p.hasOwnProperty("clientTime")&&!a.isInteger(p.clientTime)&&!(p.clientTime&&a.isInteger(p.clientTime.low)&&a.isInteger(p.clientTime.high)))return"clientTime: integer|Long expected";if(p.availableIncomingBitrate!=null&&p.hasOwnProperty("availableIncomingBitrate")&&!a.isInteger(p.availableIncomingBitrate)&&!(p.availableIncomingBitrate&&a.isInteger(p.availableIncomingBitrate.low)&&a.isInteger(p.availableIncomingBitrate.high)))return"availableIncomingBitrate: integer|Long expected";if(p.appMetrics!=null&&p.hasOwnProperty("appMetrics")){let S=r.slack.calls.analytics.AppMetrics.verify(p.appMetrics);if(S)return"appMetrics."+S}return null},"verify"),o.fromObject=s(function(p){if(p instanceof r.slack.calls.analytics.Report)return p;let S=new r.slack.calls.analytics.Report;switch(p.totalBytesSent!=null&&(a.Long?(S.totalBytesSent=a.Long.fromValue(p.totalBytesSent)).unsigned=!0:typeof p.totalBytesSent=="string"?S.totalBytesSent=parseInt(p.totalBytesSent,10):typeof p.totalBytesSent=="number"?S.totalBytesSent=p.totalBytesSent:typeof p.totalBytesSent=="object"&&(S.totalBytesSent=new a.LongBits(p.totalBytesSent.low>>>0,p.totalBytesSent.high>>>0).toNumber(!0))),p.totalBytesReceived!=null&&(a.Long?(S.totalBytesReceived=a.Long.fromValue(p.totalBytesReceived)).unsigned=!0:typeof p.totalBytesReceived=="string"?S.totalBytesReceived=parseInt(p.totalBytesReceived,10):typeof p.totalBytesReceived=="number"?S.totalBytesReceived=p.totalBytesReceived:typeof p.totalBytesReceived=="object"&&(S.totalBytesReceived=new a.LongBits(p.totalBytesReceived.low>>>0,p.totalBytesReceived.high>>>0).toNumber(!0))),p.totalRoundTripTime!=null&&(S.totalRoundTripTime=Number(p.totalRoundTripTime)),p.currentRoundTripTime!=null&&(S.currentRoundTripTime=Number(p.currentRoundTripTime)),p.availableOutgoingBitrate!=null&&(a.Long?(S.availableOutgoingBitrate=a.Long.fromValue(p.availableOutgoingBitrate)).unsigned=!0:typeof p.availableOutgoingBitrate=="string"?S.availableOutgoingBitrate=parseInt(p.availableOutgoingBitrate,10):typeof p.availableOutgoingBitrate=="number"?S.availableOutgoingBitrate=p.availableOutgoingBitrate:typeof p.availableOutgoingBitrate=="object"&&(S.availableOutgoingBitrate=new a.LongBits(p.availableOutgoingBitrate.low>>>0,p.availableOutgoingBitrate.high>>>0).toNumber(!0))),p.protocol){default:if(typeof p.protocol=="number"){S.protocol=p.protocol;break}break;case"UDP":case 0:S.protocol=0;break;case"TCP":case 1:S.protocol=1;break}switch(p.pathType){default:if(typeof p.pathType=="number"){S.pathType=p.pathType;break}break;case"DIRECT":case 0:S.pathType=0;break;case"RELAY":case 1:S.pathType=1;break}if(p.recv){if(!Array.isArray(p.recv))throw TypeError(".slack.calls.analytics.Report.recv: array expected");S.recv=[];for(let d=0;d<p.recv.length;++d){if(typeof p.recv[d]!="object")throw TypeError(".slack.calls.analytics.Report.recv: object expected");S.recv[d]=r.slack.calls.analytics.RecvMedia.fromObject(p.recv[d])}}if(p.send){if(!Array.isArray(p.send))throw TypeError(".slack.calls.analytics.Report.send: array expected");S.send=[];for(let d=0;d<p.send.length;++d){if(typeof p.send[d]!="object")throw TypeError(".slack.calls.analytics.Report.send: object expected");S.send[d]=r.slack.calls.analytics.SendMedia.fromObject(p.send[d])}}if(p.clientTime!=null&&(a.Long?(S.clientTime=a.Long.fromValue(p.clientTime)).unsigned=!0:typeof p.clientTime=="string"?S.clientTime=parseInt(p.clientTime,10):typeof p.clientTime=="number"?S.clientTime=p.clientTime:typeof p.clientTime=="object"&&(S.clientTime=new a.LongBits(p.clientTime.low>>>0,p.clientTime.high>>>0).toNumber(!0))),p.availableIncomingBitrate!=null&&(a.Long?(S.availableIncomingBitrate=a.Long.fromValue(p.availableIncomingBitrate)).unsigned=!0:typeof p.availableIncomingBitrate=="string"?S.availableIncomingBitrate=parseInt(p.availableIncomingBitrate,10):typeof p.availableIncomingBitrate=="number"?S.availableIncomingBitrate=p.availableIncomingBitrate:typeof p.availableIncomingBitrate=="object"&&(S.availableIncomingBitrate=new a.LongBits(p.availableIncomingBitrate.low>>>0,p.availableIncomingBitrate.high>>>0).toNumber(!0))),p.appMetrics!=null){if(typeof p.appMetrics!="object")throw TypeError(".slack.calls.analytics.Report.appMetrics: object expected");S.appMetrics=r.slack.calls.analytics.AppMetrics.fromObject(p.appMetrics)}return S},"fromObject"),o.toObject=s(function(p,S){S||(S={});let d={};if((S.arrays||S.defaults)&&(d.recv=[],d.send=[]),S.defaults){if(a.Long){let y=new a.Long(0,0,!0);d.totalBytesSent=S.longs===String?y.toString():S.longs===Number?y.toNumber():y}else d.totalBytesSent=S.longs===String?"0":0;if(a.Long){let y=new a.Long(0,0,!0);d.totalBytesReceived=S.longs===String?y.toString():S.longs===Number?y.toNumber():y}else d.totalBytesReceived=S.longs===String?"0":0;if(d.totalRoundTripTime=0,d.currentRoundTripTime=0,a.Long){let y=new a.Long(0,0,!0);d.availableOutgoingBitrate=S.longs===String?y.toString():S.longs===Number?y.toNumber():y}else d.availableOutgoingBitrate=S.longs===String?"0":0;if(d.protocol=S.enums===String?"UDP":0,d.pathType=S.enums===String?"DIRECT":0,a.Long){let y=new a.Long(0,0,!0);d.clientTime=S.longs===String?y.toString():S.longs===Number?y.toNumber():y}else d.clientTime=S.longs===String?"0":0;if(a.Long){let y=new a.Long(0,0,!0);d.availableIncomingBitrate=S.longs===String?y.toString():S.longs===Number?y.toNumber():y}else d.availableIncomingBitrate=S.longs===String?"0":0;d.appMetrics=null}if(p.totalBytesSent!=null&&p.hasOwnProperty("totalBytesSent")&&(typeof p.totalBytesSent=="number"?d.totalBytesSent=S.longs===String?String(p.totalBytesSent):p.totalBytesSent:d.totalBytesSent=S.longs===String?a.Long.prototype.toString.call(p.totalBytesSent):S.longs===Number?new a.LongBits(p.totalBytesSent.low>>>0,p.totalBytesSent.high>>>0).toNumber(!0):p.totalBytesSent),p.totalBytesReceived!=null&&p.hasOwnProperty("totalBytesReceived")&&(typeof p.totalBytesReceived=="number"?d.totalBytesReceived=S.longs===String?String(p.totalBytesReceived):p.totalBytesReceived:d.totalBytesReceived=S.longs===String?a.Long.prototype.toString.call(p.totalBytesReceived):S.longs===Number?new a.LongBits(p.totalBytesReceived.low>>>0,p.totalBytesReceived.high>>>0).toNumber(!0):p.totalBytesReceived),p.totalRoundTripTime!=null&&p.hasOwnProperty("totalRoundTripTime")&&(d.totalRoundTripTime=S.json&&!isFinite(p.totalRoundTripTime)?String(p.totalRoundTripTime):p.totalRoundTripTime),p.currentRoundTripTime!=null&&p.hasOwnProperty("currentRoundTripTime")&&(d.currentRoundTripTime=S.json&&!isFinite(p.currentRoundTripTime)?String(p.currentRoundTripTime):p.currentRoundTripTime),p.availableOutgoingBitrate!=null&&p.hasOwnProperty("availableOutgoingBitrate")&&(typeof p.availableOutgoingBitrate=="number"?d.availableOutgoingBitrate=S.longs===String?String(p.availableOutgoingBitrate):p.availableOutgoingBitrate:d.availableOutgoingBitrate=S.longs===String?a.Long.prototype.toString.call(p.availableOutgoingBitrate):S.longs===Number?new a.LongBits(p.availableOutgoingBitrate.low>>>0,p.availableOutgoingBitrate.high>>>0).toNumber(!0):p.availableOutgoingBitrate),p.protocol!=null&&p.hasOwnProperty("protocol")&&(d.protocol=S.enums===String?r.slack.calls.analytics.Protocol[p.protocol]===void 0?p.protocol:r.slack.calls.analytics.Protocol[p.protocol]:p.protocol),p.pathType!=null&&p.hasOwnProperty("pathType")&&(d.pathType=S.enums===String?r.slack.calls.analytics.PathType[p.pathType]===void 0?p.pathType:r.slack.calls.analytics.PathType[p.pathType]:p.pathType),p.recv&&p.recv.length){d.recv=[];for(let y=0;y<p.recv.length;++y)d.recv[y]=r.slack.calls.analytics.RecvMedia.toObject(p.recv[y],S)}if(p.send&&p.send.length){d.send=[];for(let y=0;y<p.send.length;++y)d.send[y]=r.slack.calls.analytics.SendMedia.toObject(p.send[y],S)}return p.clientTime!=null&&p.hasOwnProperty("clientTime")&&(typeof p.clientTime=="number"?d.clientTime=S.longs===String?String(p.clientTime):p.clientTime:d.clientTime=S.longs===String?a.Long.prototype.toString.call(p.clientTime):S.longs===Number?new a.LongBits(p.clientTime.low>>>0,p.clientTime.high>>>0).toNumber(!0):p.clientTime),p.availableIncomingBitrate!=null&&p.hasOwnProperty("availableIncomingBitrate")&&(typeof p.availableIncomingBitrate=="number"?d.availableIncomingBitrate=S.longs===String?String(p.availableIncomingBitrate):p.availableIncomingBitrate:d.availableIncomingBitrate=S.longs===String?a.Long.prototype.toString.call(p.availableIncomingBitrate):S.longs===Number?new a.LongBits(p.availableIncomingBitrate.low>>>0,p.availableIncomingBitrate.high>>>0).toNumber(!0):p.availableIncomingBitrate),p.appMetrics!=null&&p.hasOwnProperty("appMetrics")&&(d.appMetrics=r.slack.calls.analytics.AppMetrics.toObject(p.appMetrics,S)),d},"toObject"),o.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),o.getTypeUrl=s(function(p){return p===void 0&&(p="type.googleapis.com"),p+"/slack.calls.analytics.Report"},"getTypeUrl"),o}(),i}(),t}(),e})()},643407:(U,l,f)=>{"use strict";f.d(l,{Y:()=>n});var u=f(326946),g=f.n(u);const m=u.Reader,h=u.Writer,a=u.util,r=u.roots.default||(u.roots.default={}),n=r.PeerMessage=(()=>{function e(t){if(t)for(let i=Object.keys(t),o=0;o<i.length;++o)t[i[o]]!=null&&(this[i[o]]=t[i[o]])}return s(e,"PeerMessage1"),e.prototype.reacji=null,e.prototype.draw=null,e.prototype.fromPeerId=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.fromPeerIdString="",e.prototype.capabilities=null,e.prototype.background=null,e.prototype.muteRequest=null,e.prototype.awarenessBroadcast=null,e.prototype.awarenessQuery=null,e.prototype.awarenessClose=null,e.prototype.jukeboxRequest=null,e.prototype.contentShareDetails=null,e.prototype.recordingStartNotification=null,e.create=s(function(i){return new e(i)},"create"),e.encode=s(function(i,o){return o||(o=h.create()),i.reacji!=null&&Object.hasOwnProperty.call(i,"reacji")&&r.PeerMessage.Reacji.encode(i.reacji,o.uint32(10).fork()).ldelim(),i.draw!=null&&Object.hasOwnProperty.call(i,"draw")&&r.PeerMessage.Draw.encode(i.draw,o.uint32(18).fork()).ldelim(),i.fromPeerId!=null&&Object.hasOwnProperty.call(i,"fromPeerId")&&o.uint32(24).uint64(i.fromPeerId),i.fromPeerIdString!=null&&Object.hasOwnProperty.call(i,"fromPeerIdString")&&o.uint32(34).string(i.fromPeerIdString),i.capabilities!=null&&Object.hasOwnProperty.call(i,"capabilities")&&r.PeerMessage.Capabilities.encode(i.capabilities,o.uint32(42).fork()).ldelim(),i.background!=null&&Object.hasOwnProperty.call(i,"background")&&r.PeerMessage.Background.encode(i.background,o.uint32(50).fork()).ldelim(),i.muteRequest!=null&&Object.hasOwnProperty.call(i,"muteRequest")&&r.PeerMessage.MuteRequest.encode(i.muteRequest,o.uint32(82).fork()).ldelim(),i.awarenessBroadcast!=null&&Object.hasOwnProperty.call(i,"awarenessBroadcast")&&r.PeerMessage.AwarenessBroadcast.encode(i.awarenessBroadcast,o.uint32(90).fork()).ldelim(),i.awarenessQuery!=null&&Object.hasOwnProperty.call(i,"awarenessQuery")&&r.PeerMessage.AwarenessQuery.encode(i.awarenessQuery,o.uint32(98).fork()).ldelim(),i.awarenessClose!=null&&Object.hasOwnProperty.call(i,"awarenessClose")&&r.PeerMessage.AwarenessClose.encode(i.awarenessClose,o.uint32(106).fork()).ldelim(),i.jukeboxRequest!=null&&Object.hasOwnProperty.call(i,"jukeboxRequest")&&r.PeerMessage.JukeboxRequest.encode(i.jukeboxRequest,o.uint32(114).fork()).ldelim(),i.contentShareDetails!=null&&Object.hasOwnProperty.call(i,"contentShareDetails")&&r.PeerMessage.ContentShareDetails.encode(i.contentShareDetails,o.uint32(122).fork()).ldelim(),i.recordingStartNotification!=null&&Object.hasOwnProperty.call(i,"recordingStartNotification")&&r.PeerMessage.RecordingStartNotification.encode(i.recordingStartNotification,o.uint32(130).fork()).ldelim(),o},"encode"),e.encodeDelimited=s(function(i,o){return this.encode(i,o).ldelim()},"encodeDelimited"),e.decode=s(function(i,o){i instanceof m||(i=m.create(i));let c=o===void 0?i.len:i.pos+o,p=new r.PeerMessage;for(;i.pos<c;){let S=i.uint32();switch(S>>>3){case 1:{p.reacji=r.PeerMessage.Reacji.decode(i,i.uint32());break}case 2:{p.draw=r.PeerMessage.Draw.decode(i,i.uint32());break}case 3:{p.fromPeerId=i.uint64();break}case 4:{p.fromPeerIdString=i.string();break}case 5:{p.capabilities=r.PeerMessage.Capabilities.decode(i,i.uint32());break}case 6:{p.background=r.PeerMessage.Background.decode(i,i.uint32());break}case 10:{p.muteRequest=r.PeerMessage.MuteRequest.decode(i,i.uint32());break}case 11:{p.awarenessBroadcast=r.PeerMessage.AwarenessBroadcast.decode(i,i.uint32());break}case 12:{p.awarenessQuery=r.PeerMessage.AwarenessQuery.decode(i,i.uint32());break}case 13:{p.awarenessClose=r.PeerMessage.AwarenessClose.decode(i,i.uint32());break}case 14:{p.jukeboxRequest=r.PeerMessage.JukeboxRequest.decode(i,i.uint32());break}case 15:{p.contentShareDetails=r.PeerMessage.ContentShareDetails.decode(i,i.uint32());break}case 16:{p.recordingStartNotification=r.PeerMessage.RecordingStartNotification.decode(i,i.uint32());break}default:i.skipType(S&7);break}}return p},"decode"),e.decodeDelimited=s(function(i){return i instanceof m||(i=new m(i)),this.decode(i,i.uint32())},"decodeDelimited"),e.verify=s(function(i){if(typeof i!="object"||i===null)return"object expected";if(i.reacji!=null&&i.hasOwnProperty("reacji")){let o=r.PeerMessage.Reacji.verify(i.reacji);if(o)return"reacji."+o}if(i.draw!=null&&i.hasOwnProperty("draw")){let o=r.PeerMessage.Draw.verify(i.draw);if(o)return"draw."+o}if(i.fromPeerId!=null&&i.hasOwnProperty("fromPeerId")&&!a.isInteger(i.fromPeerId)&&!(i.fromPeerId&&a.isInteger(i.fromPeerId.low)&&a.isInteger(i.fromPeerId.high)))return"fromPeerId: integer|Long expected";if(i.fromPeerIdString!=null&&i.hasOwnProperty("fromPeerIdString")&&!a.isString(i.fromPeerIdString))return"fromPeerIdString: string expected";if(i.capabilities!=null&&i.hasOwnProperty("capabilities")){let o=r.PeerMessage.Capabilities.verify(i.capabilities);if(o)return"capabilities."+o}if(i.background!=null&&i.hasOwnProperty("background")){let o=r.PeerMessage.Background.verify(i.background);if(o)return"background."+o}if(i.muteRequest!=null&&i.hasOwnProperty("muteRequest")){let o=r.PeerMessage.MuteRequest.verify(i.muteRequest);if(o)return"muteRequest."+o}if(i.awarenessBroadcast!=null&&i.hasOwnProperty("awarenessBroadcast")){let o=r.PeerMessage.AwarenessBroadcast.verify(i.awarenessBroadcast);if(o)return"awarenessBroadcast."+o}if(i.awarenessQuery!=null&&i.hasOwnProperty("awarenessQuery")){let o=r.PeerMessage.AwarenessQuery.verify(i.awarenessQuery);if(o)return"awarenessQuery."+o}if(i.awarenessClose!=null&&i.hasOwnProperty("awarenessClose")){let o=r.PeerMessage.AwarenessClose.verify(i.awarenessClose);if(o)return"awarenessClose."+o}if(i.jukeboxRequest!=null&&i.hasOwnProperty("jukeboxRequest")){let o=r.PeerMessage.JukeboxRequest.verify(i.jukeboxRequest);if(o)return"jukeboxRequest."+o}if(i.contentShareDetails!=null&&i.hasOwnProperty("contentShareDetails")){let o=r.PeerMessage.ContentShareDetails.verify(i.contentShareDetails);if(o)return"contentShareDetails."+o}if(i.recordingStartNotification!=null&&i.hasOwnProperty("recordingStartNotification")){let o=r.PeerMessage.RecordingStartNotification.verify(i.recordingStartNotification);if(o)return"recordingStartNotification."+o}return null},"verify"),e.fromObject=s(function(i){if(i instanceof r.PeerMessage)return i;let o=new r.PeerMessage;if(i.reacji!=null){if(typeof i.reacji!="object")throw TypeError(".PeerMessage.reacji: object expected");o.reacji=r.PeerMessage.Reacji.fromObject(i.reacji)}if(i.draw!=null){if(typeof i.draw!="object")throw TypeError(".PeerMessage.draw: object expected");o.draw=r.PeerMessage.Draw.fromObject(i.draw)}if(i.fromPeerId!=null&&(a.Long?(o.fromPeerId=a.Long.fromValue(i.fromPeerId)).unsigned=!0:typeof i.fromPeerId=="string"?o.fromPeerId=parseInt(i.fromPeerId,10):typeof i.fromPeerId=="number"?o.fromPeerId=i.fromPeerId:typeof i.fromPeerId=="object"&&(o.fromPeerId=new a.LongBits(i.fromPeerId.low>>>0,i.fromPeerId.high>>>0).toNumber(!0))),i.fromPeerIdString!=null&&(o.fromPeerIdString=String(i.fromPeerIdString)),i.capabilities!=null){if(typeof i.capabilities!="object")throw TypeError(".PeerMessage.capabilities: object expected");o.capabilities=r.PeerMessage.Capabilities.fromObject(i.capabilities)}if(i.background!=null){if(typeof i.background!="object")throw TypeError(".PeerMessage.background: object expected");o.background=r.PeerMessage.Background.fromObject(i.background)}if(i.muteRequest!=null){if(typeof i.muteRequest!="object")throw TypeError(".PeerMessage.muteRequest: object expected");o.muteRequest=r.PeerMessage.MuteRequest.fromObject(i.muteRequest)}if(i.awarenessBroadcast!=null){if(typeof i.awarenessBroadcast!="object")throw TypeError(".PeerMessage.awarenessBroadcast: object expected");o.awarenessBroadcast=r.PeerMessage.AwarenessBroadcast.fromObject(i.awarenessBroadcast)}if(i.awarenessQuery!=null){if(typeof i.awarenessQuery!="object")throw TypeError(".PeerMessage.awarenessQuery: object expected");o.awarenessQuery=r.PeerMessage.AwarenessQuery.fromObject(i.awarenessQuery)}if(i.awarenessClose!=null){if(typeof i.awarenessClose!="object")throw TypeError(".PeerMessage.awarenessClose: object expected");o.awarenessClose=r.PeerMessage.AwarenessClose.fromObject(i.awarenessClose)}if(i.jukeboxRequest!=null){if(typeof i.jukeboxRequest!="object")throw TypeError(".PeerMessage.jukeboxRequest: object expected");o.jukeboxRequest=r.PeerMessage.JukeboxRequest.fromObject(i.jukeboxRequest)}if(i.contentShareDetails!=null){if(typeof i.contentShareDetails!="object")throw TypeError(".PeerMessage.contentShareDetails: object expected");o.contentShareDetails=r.PeerMessage.ContentShareDetails.fromObject(i.contentShareDetails)}if(i.recordingStartNotification!=null){if(typeof i.recordingStartNotification!="object")throw TypeError(".PeerMessage.recordingStartNotification: object expected");o.recordingStartNotification=r.PeerMessage.RecordingStartNotification.fromObject(i.recordingStartNotification)}return o},"fromObject"),e.toObject=s(function(i,o){o||(o={});let c={};if(o.defaults){if(c.reacji=null,c.draw=null,a.Long){let p=new a.Long(0,0,!0);c.fromPeerId=o.longs===String?p.toString():o.longs===Number?p.toNumber():p}else c.fromPeerId=o.longs===String?"0":0;c.fromPeerIdString="",c.capabilities=null,c.background=null,c.muteRequest=null,c.awarenessBroadcast=null,c.awarenessQuery=null,c.awarenessClose=null,c.jukeboxRequest=null,c.contentShareDetails=null,c.recordingStartNotification=null}return i.reacji!=null&&i.hasOwnProperty("reacji")&&(c.reacji=r.PeerMessage.Reacji.toObject(i.reacji,o)),i.draw!=null&&i.hasOwnProperty("draw")&&(c.draw=r.PeerMessage.Draw.toObject(i.draw,o)),i.fromPeerId!=null&&i.hasOwnProperty("fromPeerId")&&(typeof i.fromPeerId=="number"?c.fromPeerId=o.longs===String?String(i.fromPeerId):i.fromPeerId:c.fromPeerId=o.longs===String?a.Long.prototype.toString.call(i.fromPeerId):o.longs===Number?new a.LongBits(i.fromPeerId.low>>>0,i.fromPeerId.high>>>0).toNumber(!0):i.fromPeerId),i.fromPeerIdString!=null&&i.hasOwnProperty("fromPeerIdString")&&(c.fromPeerIdString=i.fromPeerIdString),i.capabilities!=null&&i.hasOwnProperty("capabilities")&&(c.capabilities=r.PeerMessage.Capabilities.toObject(i.capabilities,o)),i.background!=null&&i.hasOwnProperty("background")&&(c.background=r.PeerMessage.Background.toObject(i.background,o)),i.muteRequest!=null&&i.hasOwnProperty("muteRequest")&&(c.muteRequest=r.PeerMessage.MuteRequest.toObject(i.muteRequest,o)),i.awarenessBroadcast!=null&&i.hasOwnProperty("awarenessBroadcast")&&(c.awarenessBroadcast=r.PeerMessage.AwarenessBroadcast.toObject(i.awarenessBroadcast,o)),i.awarenessQuery!=null&&i.hasOwnProperty("awarenessQuery")&&(c.awarenessQuery=r.PeerMessage.AwarenessQuery.toObject(i.awarenessQuery,o)),i.awarenessClose!=null&&i.hasOwnProperty("awarenessClose")&&(c.awarenessClose=r.PeerMessage.AwarenessClose.toObject(i.awarenessClose,o)),i.jukeboxRequest!=null&&i.hasOwnProperty("jukeboxRequest")&&(c.jukeboxRequest=r.PeerMessage.JukeboxRequest.toObject(i.jukeboxRequest,o)),i.contentShareDetails!=null&&i.hasOwnProperty("contentShareDetails")&&(c.contentShareDetails=r.PeerMessage.ContentShareDetails.toObject(i.contentShareDetails,o)),i.recordingStartNotification!=null&&i.hasOwnProperty("recordingStartNotification")&&(c.recordingStartNotification=r.PeerMessage.RecordingStartNotification.toObject(i.recordingStartNotification,o)),c},"toObject"),e.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),e.getTypeUrl=s(function(i){return i===void 0&&(i="type.googleapis.com"),i+"/PeerMessage"},"getTypeUrl"),e.Reacji=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return s(t,"Reacji"),t.prototype.emoji="",t.prototype.type=0,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,c){return c||(c=h.create()),o.emoji!=null&&Object.hasOwnProperty.call(o,"emoji")&&c.uint32(10).string(o.emoji),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&c.uint32(16).int32(o.type),c},"encode"),t.encodeDelimited=s(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=s(function(o,c){o instanceof m||(o=m.create(o));let p=c===void 0?o.len:o.pos+c,S=new r.PeerMessage.Reacji;for(;o.pos<p;){let d=o.uint32();switch(d>>>3){case 1:{S.emoji=o.string();break}case 2:{S.type=o.int32();break}default:o.skipType(d&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.emoji!=null&&o.hasOwnProperty("emoji")&&!a.isString(o.emoji))return"emoji: string expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:break}return null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Reacji)return o;let c=new r.PeerMessage.Reacji;switch(o.emoji!=null&&(c.emoji=String(o.emoji)),o.type){default:if(typeof o.type=="number"){c.type=o.type;break}break;case"Unknown_reaction_type":case 0:c.type=0;break;case"Effect":case 1:c.type=1;break;case"Standard":case 2:c.type=2;break;case"Gif":case 3:c.type=3;break}return c},"fromObject"),t.toObject=s(function(o,c){c||(c={});let p={};return c.defaults&&(p.emoji="",p.type=c.enums===String?"Unknown_reaction_type":0),o.emoji!=null&&o.hasOwnProperty("emoji")&&(p.emoji=o.emoji),o.type!=null&&o.hasOwnProperty("type")&&(p.type=c.enums===String?r.PeerMessage.Reacji.Type[o.type]===void 0?o.type:r.PeerMessage.Reacji.Type[o.type]:o.type),p},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Reacji"},"getTypeUrl"),t.Type=function(){const i={},o=Object.create(i);return o[i[0]="Unknown_reaction_type"]=0,o[i[1]="Effect"]=1,o[i[2]="Standard"]=2,o[i[3]="Gif"]=3,o}(),t}(),e.Point=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return s(t,"Point"),t.prototype.x=0,t.prototype.y=0,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,c){return c||(c=h.create()),o.x!=null&&Object.hasOwnProperty.call(o,"x")&&c.uint32(9).double(o.x),o.y!=null&&Object.hasOwnProperty.call(o,"y")&&c.uint32(17).double(o.y),c},"encode"),t.encodeDelimited=s(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=s(function(o,c){o instanceof m||(o=m.create(o));let p=c===void 0?o.len:o.pos+c,S=new r.PeerMessage.Point;for(;o.pos<p;){let d=o.uint32();switch(d>>>3){case 1:{S.x=o.double();break}case 2:{S.y=o.double();break}default:o.skipType(d&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.x!=null&&o.hasOwnProperty("x")&&typeof o.x!="number"?"x: number expected":o.y!=null&&o.hasOwnProperty("y")&&typeof o.y!="number"?"y: number expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Point)return o;let c=new r.PeerMessage.Point;return o.x!=null&&(c.x=Number(o.x)),o.y!=null&&(c.y=Number(o.y)),c},"fromObject"),t.toObject=s(function(o,c){c||(c={});let p={};return c.defaults&&(p.x=0,p.y=0),o.x!=null&&o.hasOwnProperty("x")&&(p.x=c.json&&!isFinite(o.x)?String(o.x):o.x),o.y!=null&&o.hasOwnProperty("y")&&(p.y=c.json&&!isFinite(o.y)?String(o.y):o.y),p},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Point"},"getTypeUrl"),t}(),e.Segment=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return s(t,"Segment"),t.prototype.a=null,t.prototype.b=null,t.prototype.c=null,t.prototype.d=null,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,c){return c||(c=h.create()),o.a!=null&&Object.hasOwnProperty.call(o,"a")&&r.PeerMessage.Point.encode(o.a,c.uint32(10).fork()).ldelim(),o.b!=null&&Object.hasOwnProperty.call(o,"b")&&r.PeerMessage.Point.encode(o.b,c.uint32(18).fork()).ldelim(),o.c!=null&&Object.hasOwnProperty.call(o,"c")&&r.PeerMessage.Point.encode(o.c,c.uint32(26).fork()).ldelim(),o.d!=null&&Object.hasOwnProperty.call(o,"d")&&r.PeerMessage.Point.encode(o.d,c.uint32(34).fork()).ldelim(),c},"encode"),t.encodeDelimited=s(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=s(function(o,c){o instanceof m||(o=m.create(o));let p=c===void 0?o.len:o.pos+c,S=new r.PeerMessage.Segment;for(;o.pos<p;){let d=o.uint32();switch(d>>>3){case 1:{S.a=r.PeerMessage.Point.decode(o,o.uint32());break}case 2:{S.b=r.PeerMessage.Point.decode(o,o.uint32());break}case 3:{S.c=r.PeerMessage.Point.decode(o,o.uint32());break}case 4:{S.d=r.PeerMessage.Point.decode(o,o.uint32());break}default:o.skipType(d&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.a!=null&&o.hasOwnProperty("a")){let c=r.PeerMessage.Point.verify(o.a);if(c)return"a."+c}if(o.b!=null&&o.hasOwnProperty("b")){let c=r.PeerMessage.Point.verify(o.b);if(c)return"b."+c}if(o.c!=null&&o.hasOwnProperty("c")){let c=r.PeerMessage.Point.verify(o.c);if(c)return"c."+c}if(o.d!=null&&o.hasOwnProperty("d")){let c=r.PeerMessage.Point.verify(o.d);if(c)return"d."+c}return null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Segment)return o;let c=new r.PeerMessage.Segment;if(o.a!=null){if(typeof o.a!="object")throw TypeError(".PeerMessage.Segment.a: object expected");c.a=r.PeerMessage.Point.fromObject(o.a)}if(o.b!=null){if(typeof o.b!="object")throw TypeError(".PeerMessage.Segment.b: object expected");c.b=r.PeerMessage.Point.fromObject(o.b)}if(o.c!=null){if(typeof o.c!="object")throw TypeError(".PeerMessage.Segment.c: object expected");c.c=r.PeerMessage.Point.fromObject(o.c)}if(o.d!=null){if(typeof o.d!="object")throw TypeError(".PeerMessage.Segment.d: object expected");c.d=r.PeerMessage.Point.fromObject(o.d)}return c},"fromObject"),t.toObject=s(function(o,c){c||(c={});let p={};return c.defaults&&(p.a=null,p.b=null,p.c=null,p.d=null),o.a!=null&&o.hasOwnProperty("a")&&(p.a=r.PeerMessage.Point.toObject(o.a,c)),o.b!=null&&o.hasOwnProperty("b")&&(p.b=r.PeerMessage.Point.toObject(o.b,c)),o.c!=null&&o.hasOwnProperty("c")&&(p.c=r.PeerMessage.Point.toObject(o.c,c)),o.d!=null&&o.hasOwnProperty("d")&&(p.d=r.PeerMessage.Point.toObject(o.d,c)),p},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Segment"},"getTypeUrl"),t}(),e.Draw=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return s(t,"Draw"),t.prototype.type=0,t.prototype.segment=null,t.prototype.hue=0,t.prototype.itemId="",t.prototype.x=0,t.prototype.y=0,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,c){return c||(c=h.create()),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&c.uint32(8).int32(o.type),o.segment!=null&&Object.hasOwnProperty.call(o,"segment")&&r.PeerMessage.Segment.encode(o.segment,c.uint32(18).fork()).ldelim(),o.hue!=null&&Object.hasOwnProperty.call(o,"hue")&&c.uint32(24).int32(o.hue),o.itemId!=null&&Object.hasOwnProperty.call(o,"itemId")&&c.uint32(34).string(o.itemId),o.x!=null&&Object.hasOwnProperty.call(o,"x")&&c.uint32(41).double(o.x),o.y!=null&&Object.hasOwnProperty.call(o,"y")&&c.uint32(49).double(o.y),c},"encode"),t.encodeDelimited=s(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=s(function(o,c){o instanceof m||(o=m.create(o));let p=c===void 0?o.len:o.pos+c,S=new r.PeerMessage.Draw;for(;o.pos<p;){let d=o.uint32();switch(d>>>3){case 1:{S.type=o.int32();break}case 2:{S.segment=r.PeerMessage.Segment.decode(o,o.uint32());break}case 3:{S.hue=o.int32();break}case 4:{S.itemId=o.string();break}case 5:{S.x=o.double();break}case 6:{S.y=o.double();break}default:o.skipType(d&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:break}if(o.segment!=null&&o.hasOwnProperty("segment")){let c=r.PeerMessage.Segment.verify(o.segment);if(c)return"segment."+c}return o.hue!=null&&o.hasOwnProperty("hue")&&!a.isInteger(o.hue)?"hue: integer expected":o.itemId!=null&&o.hasOwnProperty("itemId")&&!a.isString(o.itemId)?"itemId: string expected":o.x!=null&&o.hasOwnProperty("x")&&typeof o.x!="number"?"x: number expected":o.y!=null&&o.hasOwnProperty("y")&&typeof o.y!="number"?"y: number expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Draw)return o;let c=new r.PeerMessage.Draw;switch(o.type){default:if(typeof o.type=="number"){c.type=o.type;break}break;case"UNKNOWN_DRAW_TYPE":case 0:c.type=0;break;case"NEW":case 1:c.type=1;break;case"EDIT":case 2:c.type=2;break;case"END":case 3:c.type=3;break;case"CHANGE_HUE":case 4:c.type=4;break;case"POSITION":case 5:c.type=5;break}if(o.segment!=null){if(typeof o.segment!="object")throw TypeError(".PeerMessage.Draw.segment: object expected");c.segment=r.PeerMessage.Segment.fromObject(o.segment)}return o.hue!=null&&(c.hue=o.hue|0),o.itemId!=null&&(c.itemId=String(o.itemId)),o.x!=null&&(c.x=Number(o.x)),o.y!=null&&(c.y=Number(o.y)),c},"fromObject"),t.toObject=s(function(o,c){c||(c={});let p={};return c.defaults&&(p.type=c.enums===String?"UNKNOWN_DRAW_TYPE":0,p.segment=null,p.hue=0,p.itemId="",p.x=0,p.y=0),o.type!=null&&o.hasOwnProperty("type")&&(p.type=c.enums===String?r.PeerMessage.Draw.Type[o.type]===void 0?o.type:r.PeerMessage.Draw.Type[o.type]:o.type),o.segment!=null&&o.hasOwnProperty("segment")&&(p.segment=r.PeerMessage.Segment.toObject(o.segment,c)),o.hue!=null&&o.hasOwnProperty("hue")&&(p.hue=o.hue),o.itemId!=null&&o.hasOwnProperty("itemId")&&(p.itemId=o.itemId),o.x!=null&&o.hasOwnProperty("x")&&(p.x=c.json&&!isFinite(o.x)?String(o.x):o.x),o.y!=null&&o.hasOwnProperty("y")&&(p.y=c.json&&!isFinite(o.y)?String(o.y):o.y),p},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Draw"},"getTypeUrl"),t.Type=function(){const i={},o=Object.create(i);return o[i[0]="UNKNOWN_DRAW_TYPE"]=0,o[i[1]="NEW"]=1,o[i[2]="EDIT"]=2,o[i[3]="END"]=3,o[i[4]="CHANGE_HUE"]=4,o[i[5]="POSITION"]=5,o}(),t}(),e.Capabilities=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return s(t,"Capabilities"),t.prototype.isDrawEnabled=!1,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,c){return c||(c=h.create()),o.isDrawEnabled!=null&&Object.hasOwnProperty.call(o,"isDrawEnabled")&&c.uint32(8).bool(o.isDrawEnabled),c},"encode"),t.encodeDelimited=s(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=s(function(o,c){o instanceof m||(o=m.create(o));let p=c===void 0?o.len:o.pos+c,S=new r.PeerMessage.Capabilities;for(;o.pos<p;){let d=o.uint32();switch(d>>>3){case 1:{S.isDrawEnabled=o.bool();break}default:o.skipType(d&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.isDrawEnabled!=null&&o.hasOwnProperty("isDrawEnabled")&&typeof o.isDrawEnabled!="boolean"?"isDrawEnabled: boolean expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Capabilities)return o;let c=new r.PeerMessage.Capabilities;return o.isDrawEnabled!=null&&(c.isDrawEnabled=Boolean(o.isDrawEnabled)),c},"fromObject"),t.toObject=s(function(o,c){c||(c={});let p={};return c.defaults&&(p.isDrawEnabled=!1),o.isDrawEnabled!=null&&o.hasOwnProperty("isDrawEnabled")&&(p.isDrawEnabled=o.isDrawEnabled),p},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Capabilities"},"getTypeUrl"),t}(),e.ContentShareDetails=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return s(t,"ContentShareDetails"),t.prototype.sourceType="",t.prototype.itemId="",t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,c){return c||(c=h.create()),o.sourceType!=null&&Object.hasOwnProperty.call(o,"sourceType")&&c.uint32(10).string(o.sourceType),o.itemId!=null&&Object.hasOwnProperty.call(o,"itemId")&&c.uint32(18).string(o.itemId),c},"encode"),t.encodeDelimited=s(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=s(function(o,c){o instanceof m||(o=m.create(o));let p=c===void 0?o.len:o.pos+c,S=new r.PeerMessage.ContentShareDetails;for(;o.pos<p;){let d=o.uint32();switch(d>>>3){case 1:{S.sourceType=o.string();break}case 2:{S.itemId=o.string();break}default:o.skipType(d&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.sourceType!=null&&o.hasOwnProperty("sourceType")&&!a.isString(o.sourceType)?"sourceType: string expected":o.itemId!=null&&o.hasOwnProperty("itemId")&&!a.isString(o.itemId)?"itemId: string expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.ContentShareDetails)return o;let c=new r.PeerMessage.ContentShareDetails;return o.sourceType!=null&&(c.sourceType=String(o.sourceType)),o.itemId!=null&&(c.itemId=String(o.itemId)),c},"fromObject"),t.toObject=s(function(o,c){c||(c={});let p={};return c.defaults&&(p.sourceType="",p.itemId=""),o.sourceType!=null&&o.hasOwnProperty("sourceType")&&(p.sourceType=o.sourceType),o.itemId!=null&&o.hasOwnProperty("itemId")&&(p.itemId=o.itemId),p},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.ContentShareDetails"},"getTypeUrl"),t}(),e.Background=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return s(t,"Background"),t.prototype.url="",t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,c){return c||(c=h.create()),o.url!=null&&Object.hasOwnProperty.call(o,"url")&&c.uint32(10).string(o.url),c},"encode"),t.encodeDelimited=s(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=s(function(o,c){o instanceof m||(o=m.create(o));let p=c===void 0?o.len:o.pos+c,S=new r.PeerMessage.Background;for(;o.pos<p;){let d=o.uint32();switch(d>>>3){case 1:{S.url=o.string();break}default:o.skipType(d&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.url!=null&&o.hasOwnProperty("url")&&!a.isString(o.url)?"url: string expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.Background)return o;let c=new r.PeerMessage.Background;return o.url!=null&&(c.url=String(o.url)),c},"fromObject"),t.toObject=s(function(o,c){c||(c={});let p={};return c.defaults&&(p.url=""),o.url!=null&&o.hasOwnProperty("url")&&(p.url=o.url),p},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.Background"},"getTypeUrl"),t}(),e.MuteRequest=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return s(t,"MuteRequest"),t.prototype.peerId="",t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,c){return c||(c=h.create()),o.peerId!=null&&Object.hasOwnProperty.call(o,"peerId")&&c.uint32(10).string(o.peerId),c},"encode"),t.encodeDelimited=s(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=s(function(o,c){o instanceof m||(o=m.create(o));let p=c===void 0?o.len:o.pos+c,S=new r.PeerMessage.MuteRequest;for(;o.pos<p;){let d=o.uint32();switch(d>>>3){case 1:{S.peerId=o.string();break}default:o.skipType(d&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.peerId!=null&&o.hasOwnProperty("peerId")&&!a.isString(o.peerId)?"peerId: string expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.MuteRequest)return o;let c=new r.PeerMessage.MuteRequest;return o.peerId!=null&&(c.peerId=String(o.peerId)),c},"fromObject"),t.toObject=s(function(o,c){c||(c={});let p={};return c.defaults&&(p.peerId=""),o.peerId!=null&&o.hasOwnProperty("peerId")&&(p.peerId=o.peerId),p},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.MuteRequest"},"getTypeUrl"),t}(),e.JukeboxRequest=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return s(t,"JukeboxRequest"),t.prototype.songKey="",t.prototype.stop=!1,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,c){return c||(c=h.create()),o.songKey!=null&&Object.hasOwnProperty.call(o,"songKey")&&c.uint32(10).string(o.songKey),o.stop!=null&&Object.hasOwnProperty.call(o,"stop")&&c.uint32(16).bool(o.stop),c},"encode"),t.encodeDelimited=s(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=s(function(o,c){o instanceof m||(o=m.create(o));let p=c===void 0?o.len:o.pos+c,S=new r.PeerMessage.JukeboxRequest;for(;o.pos<p;){let d=o.uint32();switch(d>>>3){case 1:{S.songKey=o.string();break}case 2:{S.stop=o.bool();break}default:o.skipType(d&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.songKey!=null&&o.hasOwnProperty("songKey")&&!a.isString(o.songKey)?"songKey: string expected":o.stop!=null&&o.hasOwnProperty("stop")&&typeof o.stop!="boolean"?"stop: boolean expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.JukeboxRequest)return o;let c=new r.PeerMessage.JukeboxRequest;return o.songKey!=null&&(c.songKey=String(o.songKey)),o.stop!=null&&(c.stop=Boolean(o.stop)),c},"fromObject"),t.toObject=s(function(o,c){c||(c={});let p={};return c.defaults&&(p.songKey="",p.stop=!1),o.songKey!=null&&o.hasOwnProperty("songKey")&&(p.songKey=o.songKey),o.stop!=null&&o.hasOwnProperty("stop")&&(p.stop=o.stop),p},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.JukeboxRequest"},"getTypeUrl"),t}(),e.RecordingStartNotification=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return s(t,"RecordingStartNotification"),t.prototype.type=0,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,c){return c||(c=h.create()),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&c.uint32(8).int32(o.type),c},"encode"),t.encodeDelimited=s(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=s(function(o,c){o instanceof m||(o=m.create(o));let p=c===void 0?o.len:o.pos+c,S=new r.PeerMessage.RecordingStartNotification;for(;o.pos<p;){let d=o.uint32();switch(d>>>3){case 1:{S.type=o.int32();break}default:o.skipType(d&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:break}return null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.RecordingStartNotification)return o;let c=new r.PeerMessage.RecordingStartNotification;switch(o.type){default:if(typeof o.type=="number"){c.type=o.type;break}break;case"UNKNOWN_TYPE":case 0:c.type=0;break;case"SUMMARY":case 1:c.type=1;break}return c},"fromObject"),t.toObject=s(function(o,c){c||(c={});let p={};return c.defaults&&(p.type=c.enums===String?"UNKNOWN_TYPE":0),o.type!=null&&o.hasOwnProperty("type")&&(p.type=c.enums===String?r.PeerMessage.RecordingStartNotification.Type[o.type]===void 0?o.type:r.PeerMessage.RecordingStartNotification.Type[o.type]:o.type),p},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.RecordingStartNotification"},"getTypeUrl"),t.Type=function(){const i={},o=Object.create(i);return o[i[0]="UNKNOWN_TYPE"]=0,o[i[1]="SUMMARY"]=1,o}(),t}(),e.AwarenessPayload=function(){function t(o){if(o)for(let c=Object.keys(o),p=0;p<c.length;++p)o[c[p]]!=null&&(this[c[p]]=o[c[p]])}s(t,"AwarenessPayload"),t.prototype.fieldName="",t.prototype.fieldValue="",t.prototype.fieldTimestampMs=null;let i;return Object.defineProperty(t.prototype,"_fieldTimestampMs",{get:a.oneOfGetter(i=["fieldTimestampMs"]),set:a.oneOfSetter(i)}),t.create=s(function(c){return new t(c)},"create"),t.encode=s(function(c,p){return p||(p=h.create()),c.fieldName!=null&&Object.hasOwnProperty.call(c,"fieldName")&&p.uint32(10).string(c.fieldName),c.fieldValue!=null&&Object.hasOwnProperty.call(c,"fieldValue")&&p.uint32(18).string(c.fieldValue),c.fieldTimestampMs!=null&&Object.hasOwnProperty.call(c,"fieldTimestampMs")&&p.uint32(24).int64(c.fieldTimestampMs),p},"encode"),t.encodeDelimited=s(function(c,p){return this.encode(c,p).ldelim()},"encodeDelimited"),t.decode=s(function(c,p){c instanceof m||(c=m.create(c));let S=p===void 0?c.len:c.pos+p,d=new r.PeerMessage.AwarenessPayload;for(;c.pos<S;){let y=c.uint32();switch(y>>>3){case 1:{d.fieldName=c.string();break}case 2:{d.fieldValue=c.string();break}case 3:{d.fieldTimestampMs=c.int64();break}default:c.skipType(y&7);break}}return d},"decode"),t.decodeDelimited=s(function(c){return c instanceof m||(c=new m(c)),this.decode(c,c.uint32())},"decodeDelimited"),t.verify=s(function(c){if(typeof c!="object"||c===null)return"object expected";let p={};return c.fieldName!=null&&c.hasOwnProperty("fieldName")&&!a.isString(c.fieldName)?"fieldName: string expected":c.fieldValue!=null&&c.hasOwnProperty("fieldValue")&&!a.isString(c.fieldValue)?"fieldValue: string expected":c.fieldTimestampMs!=null&&c.hasOwnProperty("fieldTimestampMs")&&(p._fieldTimestampMs=1,!a.isInteger(c.fieldTimestampMs)&&!(c.fieldTimestampMs&&a.isInteger(c.fieldTimestampMs.low)&&a.isInteger(c.fieldTimestampMs.high)))?"fieldTimestampMs: integer|Long expected":null},"verify"),t.fromObject=s(function(c){if(c instanceof r.PeerMessage.AwarenessPayload)return c;let p=new r.PeerMessage.AwarenessPayload;return c.fieldName!=null&&(p.fieldName=String(c.fieldName)),c.fieldValue!=null&&(p.fieldValue=String(c.fieldValue)),c.fieldTimestampMs!=null&&(a.Long?(p.fieldTimestampMs=a.Long.fromValue(c.fieldTimestampMs)).unsigned=!1:typeof c.fieldTimestampMs=="string"?p.fieldTimestampMs=parseInt(c.fieldTimestampMs,10):typeof c.fieldTimestampMs=="number"?p.fieldTimestampMs=c.fieldTimestampMs:typeof c.fieldTimestampMs=="object"&&(p.fieldTimestampMs=new a.LongBits(c.fieldTimestampMs.low>>>0,c.fieldTimestampMs.high>>>0).toNumber())),p},"fromObject"),t.toObject=s(function(c,p){p||(p={});let S={};return p.defaults&&(S.fieldName="",S.fieldValue=""),c.fieldName!=null&&c.hasOwnProperty("fieldName")&&(S.fieldName=c.fieldName),c.fieldValue!=null&&c.hasOwnProperty("fieldValue")&&(S.fieldValue=c.fieldValue),c.fieldTimestampMs!=null&&c.hasOwnProperty("fieldTimestampMs")&&(typeof c.fieldTimestampMs=="number"?S.fieldTimestampMs=p.longs===String?String(c.fieldTimestampMs):c.fieldTimestampMs:S.fieldTimestampMs=p.longs===String?a.Long.prototype.toString.call(c.fieldTimestampMs):p.longs===Number?new a.LongBits(c.fieldTimestampMs.low>>>0,c.fieldTimestampMs.high>>>0).toNumber():c.fieldTimestampMs,p.oneofs&&(S._fieldTimestampMs="fieldTimestampMs")),S},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(c){return c===void 0&&(c="type.googleapis.com"),c+"/PeerMessage.AwarenessPayload"},"getTypeUrl"),t}(),e.AwarenessBroadcast=function(){function t(i){if(this.awarenessState=[],i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return s(t,"AwarenessBroadcast"),t.prototype.channel="",t.prototype.user="",t.prototype.awarenessState=a.emptyArray,t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,c){if(c||(c=h.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&c.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&c.uint32(18).string(o.user),o.awarenessState!=null&&o.awarenessState.length)for(let p=0;p<o.awarenessState.length;++p)r.PeerMessage.AwarenessPayload.encode(o.awarenessState[p],c.uint32(26).fork()).ldelim();return c},"encode"),t.encodeDelimited=s(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=s(function(o,c){o instanceof m||(o=m.create(o));let p=c===void 0?o.len:o.pos+c,S=new r.PeerMessage.AwarenessBroadcast;for(;o.pos<p;){let d=o.uint32();switch(d>>>3){case 1:{S.channel=o.string();break}case 2:{S.user=o.string();break}case 3:{S.awarenessState&&S.awarenessState.length||(S.awarenessState=[]),S.awarenessState.push(r.PeerMessage.AwarenessPayload.decode(o,o.uint32()));break}default:o.skipType(d&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){if(typeof o!="object"||o===null)return"object expected";if(o.channel!=null&&o.hasOwnProperty("channel")&&!a.isString(o.channel))return"channel: string expected";if(o.user!=null&&o.hasOwnProperty("user")&&!a.isString(o.user))return"user: string expected";if(o.awarenessState!=null&&o.hasOwnProperty("awarenessState")){if(!Array.isArray(o.awarenessState))return"awarenessState: array expected";for(let c=0;c<o.awarenessState.length;++c){let p=r.PeerMessage.AwarenessPayload.verify(o.awarenessState[c]);if(p)return"awarenessState."+p}}return null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.AwarenessBroadcast)return o;let c=new r.PeerMessage.AwarenessBroadcast;if(o.channel!=null&&(c.channel=String(o.channel)),o.user!=null&&(c.user=String(o.user)),o.awarenessState){if(!Array.isArray(o.awarenessState))throw TypeError(".PeerMessage.AwarenessBroadcast.awarenessState: array expected");c.awarenessState=[];for(let p=0;p<o.awarenessState.length;++p){if(typeof o.awarenessState[p]!="object")throw TypeError(".PeerMessage.AwarenessBroadcast.awarenessState: object expected");c.awarenessState[p]=r.PeerMessage.AwarenessPayload.fromObject(o.awarenessState[p])}}return c},"fromObject"),t.toObject=s(function(o,c){c||(c={});let p={};if((c.arrays||c.defaults)&&(p.awarenessState=[]),c.defaults&&(p.channel="",p.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(p.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(p.user=o.user),o.awarenessState&&o.awarenessState.length){p.awarenessState=[];for(let S=0;S<o.awarenessState.length;++S)p.awarenessState[S]=r.PeerMessage.AwarenessPayload.toObject(o.awarenessState[S],c)}return p},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessBroadcast"},"getTypeUrl"),t}(),e.AwarenessQuery=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return s(t,"AwarenessQuery"),t.prototype.channel="",t.prototype.user="",t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,c){return c||(c=h.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&c.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&c.uint32(18).string(o.user),c},"encode"),t.encodeDelimited=s(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=s(function(o,c){o instanceof m||(o=m.create(o));let p=c===void 0?o.len:o.pos+c,S=new r.PeerMessage.AwarenessQuery;for(;o.pos<p;){let d=o.uint32();switch(d>>>3){case 1:{S.channel=o.string();break}case 2:{S.user=o.string();break}default:o.skipType(d&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.channel!=null&&o.hasOwnProperty("channel")&&!a.isString(o.channel)?"channel: string expected":o.user!=null&&o.hasOwnProperty("user")&&!a.isString(o.user)?"user: string expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.AwarenessQuery)return o;let c=new r.PeerMessage.AwarenessQuery;return o.channel!=null&&(c.channel=String(o.channel)),o.user!=null&&(c.user=String(o.user)),c},"fromObject"),t.toObject=s(function(o,c){c||(c={});let p={};return c.defaults&&(p.channel="",p.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(p.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(p.user=o.user),p},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessQuery"},"getTypeUrl"),t}(),e.AwarenessClose=function(){function t(i){if(i)for(let o=Object.keys(i),c=0;c<o.length;++c)i[o[c]]!=null&&(this[o[c]]=i[o[c]])}return s(t,"AwarenessClose"),t.prototype.channel="",t.prototype.user="",t.create=s(function(o){return new t(o)},"create"),t.encode=s(function(o,c){return c||(c=h.create()),o.channel!=null&&Object.hasOwnProperty.call(o,"channel")&&c.uint32(10).string(o.channel),o.user!=null&&Object.hasOwnProperty.call(o,"user")&&c.uint32(18).string(o.user),c},"encode"),t.encodeDelimited=s(function(o,c){return this.encode(o,c).ldelim()},"encodeDelimited"),t.decode=s(function(o,c){o instanceof m||(o=m.create(o));let p=c===void 0?o.len:o.pos+c,S=new r.PeerMessage.AwarenessClose;for(;o.pos<p;){let d=o.uint32();switch(d>>>3){case 1:{S.channel=o.string();break}case 2:{S.user=o.string();break}default:o.skipType(d&7);break}}return S},"decode"),t.decodeDelimited=s(function(o){return o instanceof m||(o=new m(o)),this.decode(o,o.uint32())},"decodeDelimited"),t.verify=s(function(o){return typeof o!="object"||o===null?"object expected":o.channel!=null&&o.hasOwnProperty("channel")&&!a.isString(o.channel)?"channel: string expected":o.user!=null&&o.hasOwnProperty("user")&&!a.isString(o.user)?"user: string expected":null},"verify"),t.fromObject=s(function(o){if(o instanceof r.PeerMessage.AwarenessClose)return o;let c=new r.PeerMessage.AwarenessClose;return o.channel!=null&&(c.channel=String(o.channel)),o.user!=null&&(c.user=String(o.user)),c},"fromObject"),t.toObject=s(function(o,c){c||(c={});let p={};return c.defaults&&(p.channel="",p.user=""),o.channel!=null&&o.hasOwnProperty("channel")&&(p.channel=o.channel),o.user!=null&&o.hasOwnProperty("user")&&(p.user=o.user),p},"toObject"),t.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),t.getTypeUrl=s(function(o){return o===void 0&&(o="type.googleapis.com"),o+"/PeerMessage.AwarenessClose"},"getTypeUrl"),t}(),e})()},27304:(U,l,f)=>{"use strict";f.d(l,{X:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={InvalidCursor:"invalid_cursor",InvalidArguments:"invalid_arguments"},t=(0,a.A)("activity.feed generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"activity.feed",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to activity.feed
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcheractivityFeedFetcher",description:"activity.feed generated fetcher"}},968277:(U,l,f)=>{"use strict";f.d(l,{B:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={UserNotFound:"user_not_found",InvalidInviteType:"invalid_invite_type",Ratelimited:"ratelimited"},t=(0,a.A)("connectInvites.listPending generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"connectInvites.listPending",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to connectInvites.listPending
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconnectInvitesListPendingFetcher",description:"connectInvites.listPending generated fetcher"}},744875:(U,l,f)=>{"use strict";f.d(l,{O:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={UserNotFound:"user_not_found",InvalidInviteType:"invalid_invite_type",Ratelimited:"ratelimited",OnlyCanUseParamInviteOrInviteIds:"only_can_use_param_invite_or_invite_ids"},t=(0,a.A)("connectInvites.list generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"connectInvites.list",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to connectInvites.list
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconnectInvitesListFetcher",description:"connectInvites.list generated fetcher"}},534357:(U,l,f)=>{"use strict";f.d(l,{T:()=>e,W:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={ChannelConversionInProgress:"channel_conversion_in_progress",ConnectionLimitExceeded:"connection_limit_exceeded",EmailDoesNotMatch:"email_does_not_match",FailedToStartTrial:"failed_to_start_trial",HasAlreadyConnectedToOrg:"has_already_connected_to_org",InvalidArguments:"invalid_arguments",InvalidEmojiNotAllowed:"invalid_emoji_not_allowed",InvalidHostTeam:"invalid_host_team",InvalidLink:"invalid_link",InvalidName:"invalid_name",InvalidNameMaxlength:"invalid_name_maxlength",InvalidNamePunctuation:"invalid_name_punctuation",InvalidNameRequired:"invalid_name_required",InvalidNameSpecials:"invalid_name_specials",InviteFromSameOrg:"invite_from_same_org",InviteNotFound:"invite_not_found",InvalidPrivacy:"invalid_privacy",InvalidRecipientTeam:"invalid_recipient_team",InvalidTargetTeam:"invalid_target_team",InviteUsed:"invite_used",IsPendingConnectedToOrg:"is_pending_connected_to_org",LegacyConnectionInvalidOrg:"legacy_connection_invalid_org",LegacyConnectionLimitExceeded:"legacy_connection_limit_exceeded",NameTaken:"name_taken",NotAllowedForGridWorkspace:"not_allowed_for_grid_workspace",NotPaid:"not_paid",RestrictedAction:"restricted_action",TeamNotFound:"team_not_found",UserCannotCreateChannel:"user_cannot_create_channel",UserIsRestricted:"user_is_restricted",UserNotFound:"user_not_found",UserRequiredToAcceptAsPrivateButCannot:"user_required_to_accept_as_private_but_cannot"},t=(0,a.A)("conversations.acceptSharedInvite generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"conversations.acceptSharedInvite",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to conversations.acceptSharedInvite
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsAcceptSharedInviteFetcher",description:"conversations.acceptSharedInvite generated fetcher"}},1162:(U,l,f)=>{"use strict";f.d(l,{Sv:()=>e,a0:()=>i,jB:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={Unknown:"unknown",UserCannotCreateChannel:"user_cannot_create_channel",IsPendingConnectedToOrg:"is_pending_connected_to_org",HasAlreadyConnectedToOrg:"has_already_connected_to_org",EmailDoesNotMatch:"email_does_not_match",InviteFromSameOrg:"invite_from_same_org",UserIsRestricted:"user_is_restricted",NotAllowedForGridWorkspace:"not_allowed_for_grid_workspace",GridWorkspaceRequired:"grid_workspace_required",RestrictedAction:"restricted_action",ConnectionLimitExceeded:"connection_limit_exceeded",LegacyConnectionLimitExceeded:"legacy_connection_limit_exceeded",LegacyConnectionInvalidOrg:"legacy_connection_invalid_org",UserRequiredToAcceptAsPrivateButCannot:"user_required_to_accept_as_private_but_cannot",NotPaid:"not_paid",UpgradeRequiredButUserCannot:"upgrade_required_but_user_cannot",InvalidRecipientTeam:"invalid_recipient_team"},t={InvalidArguments:"invalid_arguments",InviteNotFound:"invite_not_found",TeamNotFound:"team_not_found",UserNotFound:"user_not_found",DomainClaimed:"domain_claimed"},i=(0,a.A)("conversations.sharedInviteAcceptanceEligibility generated fetcher",function(){var o=(0,u.coroutine)(function*(c,p,S){try{const d=["reason"],y=(0,m.A)(S,d),E=(0,n.VA)(y);return yield c((0,h.apiCall)({method:"conversations.sharedInviteAcceptanceEligibility",args:E,reason:S.reason}))}catch(d){throw(0,r.Ay)({getState:p}).error(`API call to conversations.sharedInviteAcceptanceEligibility
				with reason ${S.reason} failed, initiated by generated fetcher`),d}});return function(c,p,S){return o.apply(this,arguments)}}());i.meta={name:"createFetcher",key:"createFetcherconversationsSharedInviteAcceptanceEligibilityFetcher",description:"conversations.sharedInviteAcceptanceEligibility generated fetcher"}},14524:(U,l,f)=>{"use strict";f.d(l,{I:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={ChannelNotFound:"channel_not_found",InvalidChannelId:"invalid_channel_id"},t=(0,a.A)("conversations.teamConnections generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"conversations.teamConnections",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to conversations.teamConnections
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsTeamConnectionsFetcher",description:"conversations.teamConnections generated fetcher"}},202116:(U,l,f)=>{"use strict";f.d(l,{W:()=>e,l:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={NoAliasSelected:"no_alias_selected",RateLimited:"rate_limited",NoImageUploaded:"no_image_uploaded",InvalidMode:"invalid_mode",ErrorBadNameI18N:"error_bad_name_i18n",ErrorNameTaken:"error_name_taken",ErrorNameTakenI18N:"error_name_taken_i18n",ErrorInvalidAlias:"error_invalid_alias",ErrorBadUpload:"error_bad_upload",ErrorTooBig:"error_too_big",ErrorBadWide:"error_bad_wide",ErrorMissingName:"error_missing_name",ErrorNoImage:"error_no_image",ErrorBadFormat:"error_bad_format",ResizedButStillTooLarge:"resized_but_still_too_large",UnableToEnqueue:"unable_to_enqueue",TooManyFrames:"too_many_frames",UnknownMethod:"unknown_method",NoPermission:"no_permission",UnableToFetchEmoji:"unable_to_fetch_emoji",EmojiLimitReached:"emoji_limit_reached",NoUrlProvided:"no_url_provided",NoUrlImage:"no_url_image"},t=(0,a.A)("emoji.add generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"emoji.add",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to emoji.add
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcheremojiAddFetcher",description:"emoji.add generated fetcher"}},33568:(U,l,f)=>{"use strict";f.d(l,{D:()=>t,G:()=>e});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={FeatureNotEnabled:"feature_not_enabled",InviteNotFound:"invite_not_found",WorkspaceNotFound:"workspace_not_found",OperationNotAllowed:"operation_not_allowed",ExternalWorkspaceLimitReached:"external_workspace_limit_reached",FailedToFetchTermsOfService:"failed_to_fetch_terms_of_service",TermsOfServiceNotAccepted:"terms_of_service_not_accepted",GuestUserNotAllowed:"guest_user_not_allowed"},t=(0,a.A)("externalWorkspaces.invites.accept generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"externalWorkspaces.invites.accept",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to externalWorkspaces.invites.accept
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherexternalWorkspacesInvitesAcceptFetcher",description:"externalWorkspaces.invites.accept generated fetcher"}},70460:(U,l,f)=>{"use strict";f.d(l,{I:()=>e,l:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={InviteNotFound:"invite_not_found",InviteInvalid:"invite_invalid",RateLimited:"rate_limited",InviteUsed:"invite_used",FailedGeneratingInviteOutput:"failed_generating_invite_output"},t=(0,a.A)("externalWorkspaces.invites.info generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason","token"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"externalWorkspaces.invites.info",args:y,reason:p.reason,computeToken:!1}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to externalWorkspaces.invites.info
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherexternalWorkspacesInvitesInfoFetcher",description:"externalWorkspaces.invites.info generated fetcher"}},507998:(U,l,f)=>{"use strict";f.d(l,{M:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={FeatureNotEnabled:"feature_not_enabled",OperationNotAllowed:"operation_not_allowed"},t=(0,a.A)("externalWorkspaces.invites.listReceived generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"externalWorkspaces.invites.listReceived",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to externalWorkspaces.invites.listReceived
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherexternalWorkspacesInvitesListReceivedFetcher",description:"externalWorkspaces.invites.listReceived generated fetcher"}},751875:(U,l,f)=>{"use strict";f.d(l,{N:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={FeatureNotEnabled:"feature_not_enabled",OperationNotAllowed:"operation_not_allowed"},t=(0,a.A)("externalWorkspaces.invites.listSent generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"externalWorkspaces.invites.listSent",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to externalWorkspaces.invites.listSent
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherexternalWorkspacesInvitesListSentFetcher",description:"externalWorkspaces.invites.listSent generated fetcher"}},470470:(U,l,f)=>{"use strict";f.d(l,{I:()=>e});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e=(0,a.A)("help.issues.ticketStats generated fetcher",function(){var t=(0,u.coroutine)(function*(i,o,c){try{const p=["reason"],S=(0,m.A)(c,p),d=(0,n.VA)(S);return yield i((0,h.apiCall)({method:"help.issues.ticketStats",args:d,reason:c.reason}))}catch(p){throw(0,r.Ay)({getState:o}).error(`API call to help.issues.ticketStats
				with reason ${c.reason} failed, initiated by generated fetcher`),p}});return function(i,o,c){return t.apply(this,arguments)}}());e.meta={name:"createFetcher",key:"createFetcherhelpIssuesTicketStatsFetcher",description:"help.issues.ticketStats generated fetcher"}},795514:(U,l,f)=>{"use strict";f.d(l,{l:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={},t=(0,a.A)("help.productHelpCard.list generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"help.productHelpCard.list",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to help.productHelpCard.list
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpProductHelpCardListFetcher",description:"help.productHelpCard.list generated fetcher"}},665124:(U,l,f)=>{"use strict";f.d(l,{H:()=>e});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e=(0,a.A)("help.getRecommendedArticles generated fetcher",function(){var t=(0,u.coroutine)(function*(i,o,c){try{const p=["reason"],S=(0,m.A)(c,p),d=(0,n.VA)(S);return yield i((0,h.apiCall)({method:"help.getRecommendedArticles",args:d,reason:c.reason}))}catch(p){throw(0,r.Ay)({getState:o}).error(`API call to help.getRecommendedArticles
				with reason ${c.reason} failed, initiated by generated fetcher`),p}});return function(i,o,c){return t.apply(this,arguments)}}());e.meta={name:"createFetcher",key:"createFetcherhelpGetRecommendedArticlesFetcher",description:"help.getRecommendedArticles generated fetcher"}},508625:(U,l,f)=>{"use strict";f.d(l,{G:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={InvalidAuth:"invalid_auth",MissingArgument:"missing_argument",Shrug:"shrug"},t=(0,a.A)("helpdesk.categories generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason","token"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"helpdesk.categories",args:y,reason:p.reason,computeToken:!1}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to helpdesk.categories
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskCategoriesFetcher",description:"helpdesk.categories generated fetcher"}},436838:(U,l,f)=>{"use strict";f.d(l,{w:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={CouldNotFindArticle:"could_not_find_article"},t=(0,a.A)("helpdesk.getArticle generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"helpdesk.getArticle",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to helpdesk.getArticle
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskGetArticleFetcher",description:"helpdesk.getArticle generated fetcher"}},449173:(U,l,f)=>{"use strict";f.d(l,{h:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={CouldNotFetchSections:"could_not_fetch_sections"},t=(0,a.A)("helpdesk.getSectionsAndArticlesByCategory generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason","token"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"helpdesk.getSectionsAndArticlesByCategory",args:y,reason:p.reason,computeToken:!1}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to helpdesk.getSectionsAndArticlesByCategory
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskGetSectionsAndArticlesByCategoryFetcher",description:"helpdesk.getSectionsAndArticlesByCategory generated fetcher"}},372425:(U,l,f)=>{"use strict";f.d(l,{a:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={MissingArgument:"missing_argument",InvalidAuth:"invalid_auth",UnknownError:"unknown_error"},t=(0,a.A)("helpdesk.get generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason","token"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"helpdesk.get",args:y,reason:p.reason,computeToken:!1}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to helpdesk.get
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskGetFetcher",description:"helpdesk.get generated fetcher"}},725238:(U,l,f)=>{"use strict";f.d(l,{z:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={ListNotFound:"list_not_found",TeamNotFound:"team_not_found",UserNotFound:"user_not_found",InvalidCursor:"invalid_cursor"},t=(0,a.A)("lists.records.list generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"lists.records.list",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to lists.records.list
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherlistsRecordsListFetcher",description:"lists.records.list generated fetcher"}},957018:(U,l,f)=>{"use strict";f.d(l,{a:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={NotificationNotFound:"notification_not_found",InvalidAction:"invalid_action",ErrorPersistingImpression:"error_persisting_impression",ChannelNotFound:"channel_not_found",InvalidNotificationParams:"invalid_notification_params",CannotProvideChannelAndEntityId:"cannot_provide_channel_and_entity_id",MissingEntityType:"missing_entity_type",InvalidEntityType:"invalid_entity_type"},t=(0,a.A)("megaphone.setNotificationAsSeen generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"megaphone.setNotificationAsSeen",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to megaphone.setNotificationAsSeen
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchermegaphoneSetNotificationAsSeenFetcher",description:"megaphone.setNotificationAsSeen generated fetcher"}},831127:(U,l,f)=>{"use strict";f.d(l,{V:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={InvalidCampaign:"invalid_campaign"},t=(0,a.A)("promo.campaigns.eligibilityInfo generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d),E=yield o((0,h.apiCall)({method:"promo.campaigns.eligibilityInfo",args:y,reason:p.reason}));return(0,n.XK)(E)}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to promo.campaigns.eligibilityInfo
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherpromoCampaignsEligibilityInfoFetcher",description:"promo.campaigns.eligibilityInfo generated fetcher"}},776987:(U,l,f)=>{"use strict";f.d(l,{a:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={TeamIneligible:"team_ineligible",TeamOnPaidPlan:"team_on_paid_plan",InvalidCampaign:"invalid_campaign",InsufficientPermissions:"insufficient_permissions",CodeTypeRedeemed:"code_type_redeemed",CodeSubtypeRedeemed:"code_subtype_redeemed",NotInExperiment:"not_in_experiment",TeamDoesntSatisfyDaysAfterReachedMessageLimitCriteria:"team_doesnt_satisfy_days_after_reached_message_limit_criteria"},t=(0,a.A)("promo.campaigns.redeem generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"promo.campaigns.redeem",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to promo.campaigns.redeem
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherpromoCampaignsRedeemFetcher",description:"promo.campaigns.redeem generated fetcher"}},431031:(U,l,f)=>{"use strict";f.d(l,{C:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={OrganizationNotConfigured:"organization_not_configured"},t=(0,a.A)("records.search generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"records.search",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to records.search
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherrecordsSearchFetcher",description:"records.search generated fetcher"}},978742:(U,l,f)=>{"use strict";f.d(l,{Q:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={UserNotFound:"user_not_found",AlreadyInCall:"already_in_call",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",InvalidResponse:"invalid_response",InviteNotFound:"invite_not_found",PermissionDenied:"permission_denied",TeamNotFound:"team_not_found"},t=(0,a.A)("rooms.inviteResponse generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"rooms.inviteResponse",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to rooms.inviteResponse
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsInviteResponseFetcher",description:"rooms.inviteResponse generated fetcher"}},963275:(U,l,f)=>{"use strict";f.d(l,{g:()=>e});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={InvalidUser:"invalid_user",ChannelNotFound:"channel_not_found",InvalidChannelId:"invalid_channel_id",PermissionDenied:"permission_denied",CannotInviteExternal:"cannot_invite_external",InviteFailed:"invite_failed",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",MaxPotentialParticipants:"max_potential_participants",RecipientHuddlesDisabled:"recipient_huddles_disabled",FreemiumMaxParticipants:"freemium_max_participants"},t=(0,a.A)("rooms.notifyMember generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"rooms.notifyMember",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to rooms.notifyMember
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsNotifyMemberFetcher",description:"rooms.notifyMember generated fetcher"}},68080:(U,l,f)=>{"use strict";f.d(l,{i:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={InvalidCallId:"invalid_call_id",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",InvalidHuddle:"invalid_huddle",ExternalApiFailed:"external_api_failed",PermissionDenied:"permission_denied"},t=(0,a.A)("rooms.startTranscription generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"rooms.startTranscription",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to rooms.startTranscription
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsStartTranscriptionFetcher",description:"rooms.startTranscription generated fetcher"}},100100:(U,l,f)=>{"use strict";f.d(l,{W:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={InvalidCallId:"invalid_call_id",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",InvalidHuddle:"invalid_huddle",InvalidTranscriptionCache:"invalid_transcription_cache",ExternalApiFailed:"external_api_failed",PermissionDenied:"permission_denied"},t=(0,a.A)("rooms.stopTranscription generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"rooms.stopTranscription",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to rooms.stopTranscription
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsStopTranscriptionFetcher",description:"rooms.stopTranscription generated fetcher"}},408422:(U,l,f)=>{"use strict";f.d(l,{v:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={AuthError:"auth_error"},t=(0,a.A)("search.autocomplete.triggers generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"search.autocomplete.triggers",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to search.autocomplete.triggers
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersearchAutocompleteTriggersFetcher",description:"search.autocomplete.triggers generated fetcher"}},915047:(U,l,f)=>{"use strict";f.d(l,{H:()=>t,c:()=>e});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={InsufficientRecordAccess:"insufficient_record_access",RecordNotFound:"record_not_found",SalesHomeUserConfigNotFound:"sales_home_user_config_not_found",TokenNotFound:"token_not_found"},t=(0,a.A)("sfdc.getRecordLayoutDetails generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"sfdc.getRecordLayoutDetails",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to sfdc.getRecordLayoutDetails
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersfdcGetRecordLayoutDetailsFetcher",description:"sfdc.getRecordLayoutDetails generated fetcher"}},122498:(U,l,f)=>{"use strict";f.d(l,{k:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={},t=(0,a.A)("sfdc.orgInfo generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"sfdc.orgInfo",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to sfdc.orgInfo
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersfdcOrgInfoFetcher",description:"sfdc.orgInfo generated fetcher"}},512706:(U,l,f)=>{"use strict";f.d(l,{K:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={InvalidAccess:"invalid_access",EmptyQueryNotSupported:"empty_query_not_supported",InvalidSobjectApiName:"invalid_sobject_api_name",QueryTooShort:"query_too_short",AccessTokenExchangeFailed:"access_token_exchange_failed",TokenNotFound:"token_not_found",SalesforceOrgIdRequired:"salesforce_org_id_required"},t=(0,a.A)("sfdc.searchObjects generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"sfdc.searchObjects",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to sfdc.searchObjects
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersfdcSearchObjectsFetcher",description:"sfdc.searchObjects generated fetcher"}},163570:(U,l,f)=>{"use strict";f.d(l,{Z:()=>t,q:()=>e});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={MissingArgument:"missing_argument",NotPaid:"not_paid",InvalidLink:"invalid_link",InviteInactive:"invite_inactive",InviteAlreadyUsed:"invite_already_used",InviteNotAllowed:"invite_not_allowed",AcceptNotAllowed:"accept_not_allowed",FeatureDisabled:"feature_disabled",OrgsSevered:"orgs_severed",InternalError:"internal_error",CustomInvitesNotSupported:"custom_invites_not_supported",InvalidRecipientTeam:"invalid_recipient_team",EmailDoesNotMatch:"email_does_not_match"},t=(0,a.A)("sharedInvites.accept generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"sharedInvites.accept",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to sharedInvites.accept
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersharedInvitesAcceptFetcher",description:"sharedInvites.accept generated fetcher"}},383150:(U,l,f)=>{"use strict";f.d(l,{l:()=>e});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e=(0,a.A)("users.interactions.list generated fetcher",function(){var t=(0,u.coroutine)(function*(i,o,c){try{const p=["reason"],S=(0,m.A)(c,p),d=(0,n.VA)(S),y=yield i((0,h.apiCall)({method:"users.interactions.list",args:d,reason:c.reason}));return(0,n.XK)(y)}catch(p){throw(0,r.Ay)({getState:o}).error(`API call to users.interactions.list
				with reason ${c.reason} failed, initiated by generated fetcher`),p}});return function(i,o,c){return t.apply(this,arguments)}}());e.meta={name:"createFetcher",key:"createFetcherusersInteractionsListFetcher",description:"users.interactions.list generated fetcher"}},70156:(U,l,f)=>{"use strict";f.d(l,{H:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={FailedToRecordInteraction:"failed_to_record_interaction",InvalidComponent:"invalid_component",InvalidType:"invalid_type"},t=(0,a.A)("users.interactions.set generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d),E=yield o((0,h.apiCall)({method:"users.interactions.set",args:y,reason:p.reason}));return(0,n.XK)(E)}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to users.interactions.set
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherusersInteractionsSetFetcher",description:"users.interactions.set generated fetcher"}},320770:(U,l,f)=>{"use strict";f.d(l,{k:()=>e,n:()=>t});var u=f(612104),g=f.n(u),m=f(54930),h=f(349799),a=f(789123),r=f(682520),n=f(547651);const e={BadUsername:"bad_username",CannotUpdateAdminUser:"cannot_update_admin_user",EmailBad:"email_bad",EmailTaken:"email_taken",DisplayNameNotAllowed:"display_name_not_allowed",InvalidNamePunctuation:"invalid_name_punctuation",InvalidNameRequired:"invalid_name_required",InvalidNameSpecials:"invalid_name_specials",InvalidProfile:"invalid_profile",InvalidReservedWord:"invalid_reserved_word",InvalidUser:"invalid_user",LongUsername:"long_username",MustClearBothStatusTextAndStatusEmoji:"must_clear_both_status_text_and_status_emoji",NameNotAllowed:"name_not_allowed",NotAdmin:"not_admin",NotAppAdmin:"not_app_admin",PartialProfileSetFailed:"partial_profile_set_failed",ProfileSetFailed:"profile_set_failed",ProfileStatusSetFailedNotEmojiSyntax:"profile_status_set_failed_not_emoji_syntax",ProfileStatusSetFailedNotValidEmoji:"profile_status_set_failed_not_valid_emoji",ProfileStatusSetFailedWritingExpiration:"profile_status_set_failed_writing_expiration",ReadOnlyProfileField:"read_only_profile_field",ReservedName:"reserved_name",SudoRequired:"sudo_required",TooLong:"too_long",UserNotFound:"user_not_found",UserNotSpecified:"user_not_specified",UserRemovedFromTeam:"user_removed_from_team",UsernameEmpty:"username_empty",UsernameTaken:"username_taken"},t=(0,a.A)("users.profile.set generated fetcher",function(){var i=(0,u.coroutine)(function*(o,c,p){try{const S=["reason"],d=(0,m.A)(p,S),y=(0,n.VA)(d);return yield o((0,h.apiCall)({method:"users.profile.set",args:y,reason:p.reason}))}catch(S){throw(0,r.Ay)({getState:c}).error(`API call to users.profile.set
				with reason ${p.reason} failed, initiated by generated fetcher`),S}});return function(o,c,p){return i.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherusersProfileSetFetcher",description:"users.profile.set generated fetcher"}},389703:(U,l,f)=>{"use strict";f.d(l,{t:()=>g});const u={Equal:"equal",NotEqual:"not_equal",GreaterThan:"greater_than",LessThan:"less_than",GreaterThanOrEqual:"greater_than_or_equal",LessThanOrEqual:"less_than_or_equal",Contains:"contains",DoesNotContain:"does_not_contain",IsEmpty:"is_empty",IsNotEmpty:"is_not_empty",IsMe:"is_me",IsNotMe:"is_not_me"},g={Equal:"equal",NotEqual:"not_equal",GreaterThan:"greater_than",LessThan:"less_than",GreaterThanOrEqual:"greater_than_or_equal",LessThanOrEqual:"less_than_or_equal",Contains:"contains",DoesNotContain:"does_not_contain",IsEmpty:"is_empty",IsNotEmpty:"is_not_empty",IsMe:"is_me",IsNotMe:"is_not_me"}},686189:(U,l,f)=>{"use strict";f.d(l,{k:()=>u});const u={NotPaid:"not_paid",InvalidLink:"invalid_link",InviteInactive:"invite_inactive",InviteAlreadyUsed:"invite_already_used",InviteNotAllowed:"invite_not_allowed",AcceptNotAllowed:"accept_not_allowed",OrgsSevered:"orgs_severed",OrgNotVerified:"org_not_verified",UserIsRestricted:"user_is_restricted",InvalidRecipientTeam:"invalid_recipient_team",EmailDoesNotMatch:"email_does_not_match",Generic:"generic"}},868384:(U,l,f)=>{"use strict";f.d(l,{a:()=>g,k:()=>u});const u={Channel:"channel",Im:"im",Workspace:"workspace"},g={Channel:"channel",Im:"im",Workspace:"workspace"}},888603:(U,l,f)=>{"use strict";f.r(l),f.d(l,{$Command:()=>tn,AllowNotifications:()=>oh,AssociateChannelFlowCommand:()=>Ms,BadRequestException:()=>ms,BatchChannelMembershipsFilterSensitiveLog:()=>Vd,BatchCreateChannelMembershipCommand:()=>Ps,BatchCreateChannelMembershipResponseFilterSensitiveLog:()=>Ud,ChannelAssociatedWithFlowSummaryFilterSensitiveLog:()=>zd,ChannelBanFilterSensitiveLog:()=>Wd,ChannelBanSummaryFilterSensitiveLog:()=>Gd,ChannelFilterSensitiveLog:()=>Hd,ChannelFlowCallbackCommand:()=>Rs,ChannelFlowCallbackRequestFilterSensitiveLog:()=>Kd,ChannelFlowFilterSensitiveLog:()=>jd,ChannelFlowSummaryFilterSensitiveLog:()=>Jd,ChannelMembershipFilterSensitiveLog:()=>Yd,ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog:()=>Al,ChannelMembershipPreferencesFilterSensitiveLog:()=>ka,ChannelMembershipSummaryFilterSensitiveLog:()=>Xd,ChannelMembershipType:()=>sh,ChannelMessageCallbackFilterSensitiveLog:()=>$d,ChannelMessageFilterSensitiveLog:()=>Zd,ChannelMessagePersistenceType:()=>ph,ChannelMessageStatus:()=>mh,ChannelMessageSummaryFilterSensitiveLog:()=>qd,ChannelMessageType:()=>gh,ChannelMode:()=>dh,ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog:()=>Ml,ChannelModeratorFilterSensitiveLog:()=>ec,ChannelModeratorSummaryFilterSensitiveLog:()=>tc,ChannelPrivacy:()=>ch,ChannelSummaryFilterSensitiveLog:()=>ws,ChimeSDKMessaging:()=>La,ChimeSDKMessagingClient:()=>Mi,ChimeSDKMessagingServiceException:()=>Pi,ConflictException:()=>gs,CreateChannelBanCommand:()=>ks,CreateChannelBanResponseFilterSensitiveLog:()=>ic,CreateChannelCommand:()=>Ds,CreateChannelFlowCommand:()=>Ls,CreateChannelFlowRequestFilterSensitiveLog:()=>rc,CreateChannelMembershipCommand:()=>Ns,CreateChannelMembershipResponseFilterSensitiveLog:()=>oc,CreateChannelModeratorCommand:()=>xs,CreateChannelModeratorResponseFilterSensitiveLog:()=>sc,CreateChannelRequestFilterSensitiveLog:()=>nc,DeleteChannelBanCommand:()=>Bs,DeleteChannelCommand:()=>Fs,DeleteChannelFlowCommand:()=>Vs,DeleteChannelMembershipCommand:()=>Us,DeleteChannelMessageCommand:()=>W,DeleteChannelModeratorCommand:()=>Hs,DeleteMessagingStreamingConfigurationsCommand:()=>zs,DescribeChannelBanCommand:()=>Ws,DescribeChannelBanResponseFilterSensitiveLog:()=>lc,DescribeChannelCommand:()=>Gs,DescribeChannelFlowCommand:()=>js,DescribeChannelFlowResponseFilterSensitiveLog:()=>dc,DescribeChannelMembershipCommand:()=>$s,DescribeChannelMembershipForAppInstanceUserCommand:()=>Ks,DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog:()=>uc,DescribeChannelMembershipResponseFilterSensitiveLog:()=>cc,DescribeChannelModeratedByAppInstanceUserCommand:()=>Js,DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog:()=>fc,DescribeChannelModeratorCommand:()=>Ys,DescribeChannelModeratorResponseFilterSensitiveLog:()=>hc,DescribeChannelResponseFilterSensitiveLog:()=>ac,DisassociateChannelFlowCommand:()=>Qs,ErrorCode:()=>ah,ExpirationCriterion:()=>lh,FallbackAction:()=>fh,ForbiddenException:()=>Ss,GetChannelMembershipPreferencesCommand:()=>Xs,GetChannelMembershipPreferencesResponseFilterSensitiveLog:()=>pc,GetChannelMessageCommand:()=>Zs,GetChannelMessageResponseFilterSensitiveLog:()=>mc,GetChannelMessageStatusCommand:()=>Ln,GetMessagingSessionEndpointCommand:()=>Kt,GetMessagingStreamingConfigurationsCommand:()=>gr,IdentityFilterSensitiveLog:()=>oi,InvocationType:()=>uh,ListChannelBansCommand:()=>Sr,ListChannelBansRequestFilterSensitiveLog:()=>gc,ListChannelBansResponseFilterSensitiveLog:()=>Sc,ListChannelFlowsCommand:()=>jn,ListChannelFlowsRequestFilterSensitiveLog:()=>vc,ListChannelFlowsResponseFilterSensitiveLog:()=>yc,ListChannelMembershipsCommand:()=>vr,ListChannelMembershipsForAppInstanceUserCommand:()=>$n,ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog:()=>Cc,ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog:()=>_c,ListChannelMembershipsRequestFilterSensitiveLog:()=>bc,ListChannelMembershipsResponseFilterSensitiveLog:()=>Ec,ListChannelMessagesCommand:()=>xe,ListChannelMessagesRequestFilterSensitiveLog:()=>Tc,ListChannelMessagesResponseFilterSensitiveLog:()=>Ic,ListChannelModeratorsCommand:()=>bi,ListChannelModeratorsRequestFilterSensitiveLog:()=>wc,ListChannelModeratorsResponseFilterSensitiveLog:()=>Oc,ListChannelsAssociatedWithChannelFlowCommand:()=>yr,ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog:()=>Pc,ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog:()=>Rc,ListChannelsCommand:()=>An,ListChannelsModeratedByAppInstanceUserCommand:()=>ii,ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog:()=>kc,ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog:()=>Dc,ListChannelsRequestFilterSensitiveLog:()=>Ac,ListChannelsResponseFilterSensitiveLog:()=>Mc,ListSubChannelsCommand:()=>Zn,ListSubChannelsRequestFilterSensitiveLog:()=>Lc,ListSubChannelsResponseFilterSensitiveLog:()=>Nc,ListTagsForResourceCommand:()=>Rr,ListTagsForResourceResponseFilterSensitiveLog:()=>xc,MessageAttributeValueFilterSensitiveLog:()=>Is,MessagingDataType:()=>Sh,NotFoundException:()=>vs,ProcessorFilterSensitiveLog:()=>Ts,PushNotificationConfigurationFilterSensitiveLog:()=>Ol,PushNotificationPreferencesFilterSensitiveLog:()=>Qd,PushNotificationType:()=>hh,PutChannelExpirationSettingsCommand:()=>qi,PutChannelMembershipPreferencesCommand:()=>nt,PutChannelMembershipPreferencesRequestFilterSensitiveLog:()=>Bc,PutChannelMembershipPreferencesResponseFilterSensitiveLog:()=>Fc,PutMessagingStreamingConfigurationsCommand:()=>ai,RedactChannelMessageCommand:()=>So,ResourceLimitExceededException:()=>_s,SearchChannelsCommand:()=>kr,SearchChannelsRequestFilterSensitiveLog:()=>Vc,SearchChannelsResponseFilterSensitiveLog:()=>Uc,SearchFieldKey:()=>yh,SearchFieldOperator:()=>bh,SendChannelMessageCommand:()=>Dr,SendChannelMessageRequestFilterSensitiveLog:()=>Hc,ServiceFailureException:()=>ys,ServiceUnavailableException:()=>bs,SortOrder:()=>vh,TagFilterSensitiveLog:()=>Os,TagResourceCommand:()=>Lr,TagResourceRequestFilterSensitiveLog:()=>zc,ThrottledClientException:()=>Es,UnauthorizedClientException:()=>Cs,UntagResourceCommand:()=>Nr,UntagResourceRequestFilterSensitiveLog:()=>Wc,UpdateChannelCommand:()=>er,UpdateChannelFlowCommand:()=>br,UpdateChannelFlowRequestFilterSensitiveLog:()=>jc,UpdateChannelMessageCommand:()=>xr,UpdateChannelMessageRequestFilterSensitiveLog:()=>$c,UpdateChannelReadMarkerCommand:()=>Br,UpdateChannelRequestFilterSensitiveLog:()=>Gc,__Client:()=>sl,paginateListChannelBans:()=>Dl,paginateListChannelFlows:()=>Fn,paginateListChannelMemberships:()=>eu,paginateListChannelMembershipsForAppInstanceUser:()=>qc,paginateListChannelMessages:()=>tu,paginateListChannelModerators:()=>Nl,paginateListChannels:()=>iu,paginateListChannelsAssociatedWithChannelFlow:()=>nu,paginateListChannelsModeratedByAppInstanceUser:()=>Vi,paginateListSubChannels:()=>bo,paginateSearchChannels:()=>su});var u={};f.r(u),f.d(u,{getUserAgentPrefix:()=>co,isVirtualHostableS3Bucket:()=>td,parseArn:()=>Vu,partition:()=>ls,setPartitionInfo:()=>pr,useDefaultPartitionInfo:()=>ds});var g={};f.r(g),f.d(g,{aws:()=>u,booleanEquals:()=>Uu,getAttr:()=>nd,isSet:()=>zu,isValidHostLabel:()=>tl,not:()=>Wu,parseURL:()=>Gu,stringEquals:()=>ju,substring:()=>$u,uriEncode:()=>Ku});var m;(function(C){C.ENV="env",C.CONFIG="shared config entry"})(m||(m={}));const h=s((C,v,b)=>{if(v in C){if(C[v]==="true")return!0;if(C[v]==="false")return!1;throw new Error(`Cannot load ${b} "${v}". Expected "true" or "false", got ${C[v]}.`)}},"booleanSelector"),a="AWS_USE_DUALSTACK_ENDPOINT",r="use_dualstack_endpoint",n=!1,e={environmentVariableSelector:C=>h(C,a,m.ENV),configFileSelector:C=>h(C,r,m.CONFIG),default:!1},t="AWS_USE_FIPS_ENDPOINT",i="use_fips_endpoint",o=!1,c={environmentVariableSelector:C=>h(C,t,m.ENV),configFileSelector:C=>h(C,i,m.CONFIG),default:!1};var p=f(612104);const S=function(){var C=(0,p.coroutine)(function*(v){const{tls:b=!0}=v,_=yield v.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(_))throw new Error("Invalid region in client config");const V=yield v.useDualstackEndpoint(),j=yield v.useFipsEndpoint();var ie;const{hostname:Z}=(ie=yield v.regionInfoProvider(_,{useDualstackEndpoint:V,useFipsEndpoint:j}))!==null&&ie!==void 0?ie:{};if(!Z)throw new Error("Cannot resolve hostname from client config");return v.urlParser(`${b?"https:":"http:"}//${Z}`)});return s(function(b){return C.apply(this,arguments)},"getEndpointFromRegion")}(),d=s(C=>{var v;const b=normalizeProvider((v=C.useDualstackEndpoint)!==null&&v!==void 0?v:!1),{endpoint:_,useFipsEndpoint:F,urlParser:V}=C;var j;return{...C,tls:(j=C.tls)!==null&&j!==void 0?j:!0,endpoint:_?normalizeProvider(typeof _=="string"?V(_):_):()=>getEndpointFromRegion({...C,useDualstackEndpoint:b,useFipsEndpoint:F}),isCustomEndpoint:!!_,useDualstackEndpoint:b}},"resolveEndpointsConfig"),y="AWS_REGION",E="region",I={environmentVariableSelector:C=>C[y],configFileSelector:C=>C[E],default:()=>{throw new Error("Region is missing")}},A={preferredFile:"credentials"},L=s(C=>typeof C=="string"&&(C.startsWith("fips-")||C.endsWith("-fips")),"isFipsRegion"),M=s(C=>L(C)?["fips-aws-global","aws-fips"].includes(C)?"us-east-1":C.replace(/fips-(dkr-|prod-)?|-fips/,""):C,"getRealRegion"),k=s(C=>{const{region:v,useFipsEndpoint:b}=C;if(!v)throw new Error("Region is missing");return{...C,region:(0,p.coroutine)(function*(){if(typeof v=="string")return M(v);const _=yield v();return M(_)}),useFipsEndpoint:(0,p.coroutine)(function*(){const _=typeof v=="string"?v:yield v();return L(_)?!0:typeof b!="function"?Promise.resolve(!!b):b()})}},"resolveRegionConfig");var w;(function(C){C[C.HEADER=0]="HEADER",C[C.TRAILER=1]="TRAILER"})(w||(w={}));class N{add(v){this.values.push(v)}set(v){this.values=v}remove(v){this.values=this.values.filter(b=>b!==v)}toString(){return this.values.map(v=>v.includes(",")||v.includes(" ")?`"${v}"`:v).join(", ")}get(){return this.values}constructor({name:v,kind:b=FieldPosition.HEADER,values:_=[]}){this.name=v,this.kind=b,this.values=_}}s(N,"Field");class T{static isInstance(v){if(!v)return!1;const b=v;return"method"in b&&"protocol"in b&&"hostname"in b&&"path"in b&&typeof b.query=="object"&&typeof b.headers=="object"}clone(){const v=new T({...this,headers:{...this.headers}});return v.query&&(v.query=O(v.query)),v}constructor(v){this.method=v.method||"GET",this.hostname=v.hostname||"localhost",this.port=v.port,this.query=v.query||{},this.headers=v.headers||{},this.body=v.body,this.protocol=v.protocol?v.protocol.slice(-1)!==":"?`${v.protocol}:`:v.protocol:"https:",this.path=v.path?v.path.charAt(0)!=="/"?`/${v.path}`:v.path:"/"}}s(T,"httpRequest_HttpRequest");function O(C){return Object.keys(C).reduce((v,b)=>{const _=C[b];return{...v,[b]:Array.isArray(_)?[..._]:_}},{})}s(O,"cloneQuery");class D{static isInstance(v){if(!v)return!1;const b=v;return typeof b.statusCode=="number"&&typeof b.headers=="object"}constructor(v){this.statusCode=v.statusCode,this.headers=v.headers||{},this.body=v.body}}s(D,"HttpResponse");const G="content-length";function K(C){return v=>function(){var b=(0,p.coroutine)(function*(_){const F=_.request;if(T.isInstance(F)){const{body:V,headers:j}=F;if(V&&Object.keys(j).map(ie=>ie.toLowerCase()).indexOf(G)===-1)try{const ie=C(V);F.headers={...F.headers,[G]:String(ie)}}catch{}}return v({..._,request:F})});return function(_){return b.apply(this,arguments)}}()}s(K,"contentLengthMiddleware");const H={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},q=s(C=>({applyToStack:v=>{v.add(K(C.bodyLengthChecker),H)}}),"getContentLengthPlugin"),me=function(){var C=(0,p.coroutine)(function*(v){const b=(v==null?void 0:v.Bucket)||"";if(typeof v.Bucket=="string"&&(v.Bucket=b.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Ke(b)){if(v.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!He(b)||b.indexOf(".")!==-1&&!String(v.Endpoint).startsWith("http:")||b.toLowerCase()!==b||b.length<3)&&(v.ForcePathStyle=!0);return v.DisableMultiRegionAccessPoints&&(v.disableMultiRegionAccessPoints=!0,v.DisableMRAP=!0),v});return s(function(b){return C.apply(this,arguments)},"resolveParamsForS3")}(),we=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,ue=/(\d+\.){3}\d+/,Pe=/\.\./,Ye=/\./,be=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,He=s(C=>we.test(C)&&!ue.test(C)&&!Pe.test(C),"isDnsCompatibleBucketName"),Ke=s(C=>{const[v,b,_,F,V,j]=C.split(":"),ie=v==="arn"&&C.split(":").length>=6,Z=[v,b,_,V,j].filter(Boolean).length===5;if(ie&&!Z)throw new Error(`Invalid ARN: ${C} was an invalid ARN.`);return v==="arn"&&!!b&&!!_&&!!V&&!!j},"isArnBucketName"),Ue=s((C,v,b)=>{const _=function(){var F=(0,p.coroutine)(function*(){var V;const j=(V=b[C])!==null&&V!==void 0?V:b[v];return typeof j=="function"?j():j});return s(function(){return F.apply(this,arguments)},"configProvider")}();return C==="endpoint"||v==="endpoint"?(0,p.coroutine)(function*(){const F=yield _();if(F&&typeof F=="object"){if("url"in F)return F.url.href;if("hostname"in F){const{protocol:V,hostname:j,port:ie,path:Z}=F;return`${V}//${j}${ie?":"+ie:""}${Z}`}}return F}):_},"createConfigValueProvider"),ht=function(){var C=(0,p.coroutine)(function*(v,b,_,F){const V=yield Tt(v,b,_);if(typeof _.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return _.endpointProvider(V,F)});return s(function(b,_,F,V){return C.apply(this,arguments)},"getEndpointFromInstructions")}(),Tt=function(){var C=(0,p.coroutine)(function*(v,b,_){var F;const V={},j=(b==null||(F=b.getEndpointParameterInstructions)===null||F===void 0?void 0:F.call(b))||{};for(const[ie,Z]of Object.entries(j))switch(Z.type){case"staticContextParams":V[ie]=Z.value;break;case"contextParams":V[ie]=v[Z.name];break;case"clientContextParams":case"builtInParams":V[ie]=yield Ue(Z.name,ie,_)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(Z))}return Object.keys(j).length===0&&Object.assign(V,_),String(_.serviceId).toLowerCase()==="s3"&&(yield me(V)),V});return s(function(b,_,F){return C.apply(this,arguments)},"resolveParams")}(),st=s(C=>{let{config:v,instructions:b}=C;return(_,F)=>function(){var V=(0,p.coroutine)(function*(j){var ie,Z;const le=yield ht(j.input,{getEndpointParameterInstructions(){return b}},{...v},F);F.endpointV2=le,F.authSchemes=(ie=le.properties)===null||ie===void 0?void 0:ie.authSchemes;const ne=(Z=F.authSchemes)===null||Z===void 0?void 0:Z[0];return ne&&(F.signing_region=ne.signingRegion,F.signing_service=ne.signingName),_({...j})});return function(j){return V.apply(this,arguments)}}()},"endpointMiddleware"),ut=s((C,v)=>(b,_)=>function(){var F=(0,p.coroutine)(function*(V){const{response:j}=yield b(V);try{const ie=yield v(j,C);return{response:j,output:ie}}catch(ie){if(Object.defineProperty(ie,"$response",{value:j}),!("$metadata"in ie)){const Z="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";ie.message+=`
  `+Z}throw ie}});return function(V){return F.apply(this,arguments)}}(),"deserializerMiddleware"),We=s((C,v)=>(b,_)=>function(){var F=(0,p.coroutine)(function*(V){var j;const ie=!((j=_.endpointV2)===null||j===void 0)&&j.url&&C.urlParser?(0,p.coroutine)(function*(){return C.urlParser(_.endpointV2.url)}):C.endpoint;if(!ie)throw new Error("No valid endpoint provider available.");const Z=yield v(V.input,{...C,endpoint:ie});return b({...V,request:Z})});return function(V){return F.apply(this,arguments)}}(),"serializerMiddleware"),_t={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Rt={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Ae(C,v,b){return{applyToStack:_=>{_.add(ut(C,b),_t),_.add(We(C,v),Rt)}}}s(Ae,"getSerdePlugin");const $t={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Rt.name},rt=s((C,v)=>({applyToStack:b=>{b.addRelativeTo(st({config:C,instructions:v}),$t)}}),"getEndpointPlugin"),Ft=s(C=>{if(typeof C=="function")return C;const v=Promise.resolve(C);return()=>v},"normalizeProvider_normalizeProvider");function en(C){const v={};if(C=C.replace(/^\?/,""),C)for(const b of C.split("&")){let[_,F=null]=b.split("=");_=decodeURIComponent(_),F&&(F=decodeURIComponent(F)),_ in v?Array.isArray(v[_])?v[_].push(F):v[_]=[v[_],F]:v[_]=F}return v}s(en,"parseQueryString");const on=s(C=>{if(typeof C=="string")return on(new URL(C));const{hostname:v,pathname:b,port:_,protocol:F,search:V}=C;let j;return V&&(j=en(V)),{hostname:v,port:_?parseInt(_):void 0,protocol:F,path:b,query:j}},"parseUrl"),Dn=s(C=>typeof C=="object"?"url"in C?on(C.url):C:on(C),"toEndpointV1"),Yt=s(C=>{var v;const b=(v=C.tls)!==null&&v!==void 0?v:!0,{endpoint:_}=C,F=_!=null?(0,p.coroutine)(function*(){return Dn(yield Ft(_)())}):void 0,V=!!_;var j,ie;return{...C,endpoint:F,tls:b,isCustomEndpoint:V,useDualstackEndpoint:Ft((j=C.useDualstackEndpoint)!==null&&j!==void 0?j:!1),useFipsEndpoint:Ft((ie=C.useFipsEndpoint)!==null&&ie!==void 0?ie:!1)}},"resolveEndpointConfig");function zn(C){return C}s(zn,"resolveHostHeaderConfig");const vn=s(C=>v=>function(){var b=(0,p.coroutine)(function*(_){if(!T.isInstance(_.request))return v(_);const{request:F}=_,{handlerProtocol:V=""}=C.requestHandler.metadata||{};if(V.indexOf("h2")>=0&&!F.headers[":authority"])delete F.headers.host,F.headers[":authority"]="";else if(!F.headers.host){let j=F.hostname;F.port!=null&&(j+=`:${F.port}`),F.headers.host=j}return v(_)});return function(_){return b.apply(this,arguments)}}(),"hostHeaderMiddleware"),mt={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},pt=s(C=>({applyToStack:v=>{v.add(vn(C),mt)}}),"getHostHeaderPlugin"),Qe=s(()=>(C,v)=>function(){var b=(0,p.coroutine)(function*(_){try{var F;const j=yield C(_),{clientName:ie,commandName:Z,logger:le,dynamoDbDocumentClientOptions:ne={}}=v,{overrideInputFilterSensitiveLog:Xe,overrideOutputFilterSensitiveLog:bt}=ne,Lt=Xe??v.inputFilterSensitiveLog,Nt=bt??v.outputFilterSensitiveLog,{$metadata:Ct,...Wt}=j.output;return le==null||(F=le.info)===null||F===void 0||F.call(le,{clientName:ie,commandName:Z,input:Lt(_.input),output:Nt(Wt),metadata:Ct}),j}catch(j){var V;const{clientName:ie,commandName:Z,logger:le,dynamoDbDocumentClientOptions:ne={}}=v,{overrideInputFilterSensitiveLog:Xe}=ne,bt=Xe??v.inputFilterSensitiveLog;throw le==null||(V=le.error)===null||V===void 0||V.call(le,{clientName:ie,commandName:Z,input:bt(_.input),error:j,metadata:j.$metadata}),j}});return function(_){return b.apply(this,arguments)}}(),"loggerMiddleware"),Ht={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},xt=s(C=>({applyToStack:v=>{v.add(Qe(),Ht)}}),"getLoggerPlugin"),wn="X-Amzn-Trace-Id",kt="AWS_LAMBDA_FUNCTION_NAME",J="_X_AMZN_TRACE_ID",_e=s(C=>v=>function(){var b=(0,p.coroutine)(function*(_){const{request:F}=_;if(!T.isInstance(F)||C.runtime!=="node"||F.headers.hasOwnProperty(wn))return v(_);const V={NODE_ENV:"production"}[kt],j={NODE_ENV:"production"}[J],ie=s(Z=>typeof Z=="string"&&Z.length>0,"nonEmptyString");return ie(V)&&ie(j)&&(F.headers[wn]=j),v({..._,request:F})});return function(_){return b.apply(this,arguments)}}(),"recursionDetectionMiddleware"),Oe={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Ne=s(C=>({applyToStack:v=>{v.add(_e(C),Oe)}}),"getRecursionDetectionPlugin");var $e;(function(C){C.STANDARD="standard",C.ADAPTIVE="adaptive"})($e||($e={}));const Fe=3,oe=$e.STANDARD,Ce=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],z=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Y=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],de=[500,502,503,504],ce=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],De=s(C=>C.$retryable!==void 0,"isRetryableByTrait"),Ie=s(C=>Ce.includes(C.name),"isClockSkewError"),Le=s(C=>{var v,b;return((v=C.$metadata)===null||v===void 0?void 0:v.httpStatusCode)===429||z.includes(C.name)||((b=C.$retryable)===null||b===void 0?void 0:b.throttling)==!0},"isThrottlingError"),fe=s(C=>{var v;return Y.includes(C.name)||ce.includes((C==null?void 0:C.code)||"")||de.includes(((v=C.$metadata)===null||v===void 0?void 0:v.httpStatusCode)||0)},"isTransientError"),ge=s(C=>{var v;if(((v=C.$metadata)===null||v===void 0?void 0:v.httpStatusCode)!==void 0){const b=C.$metadata.httpStatusCode;return 500<=b&&b<=599&&!fe(C)}return!1},"isServerError");class R{getCurrentTimeInSeconds(){return Date.now()/1e3}getSendToken(){var v=this;return(0,p.coroutine)(function*(){return v.acquireTokenBucket(1)})()}acquireTokenBucket(v){var b=this;return(0,p.coroutine)(function*(){if(b.enabled){if(b.refillTokenBucket(),v>b.currentCapacity){const _=(v-b.currentCapacity)/b.fillRate*1e3;yield new Promise(F=>setTimeout(F,_))}b.currentCapacity=b.currentCapacity-v}})()}refillTokenBucket(){const v=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=v;return}const b=(v-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+b),this.lastTimestamp=v}updateClientSendingRate(v){let b;if(this.updateMeasuredRate(),Le(v)){const F=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=F,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),b=this.cubicThrottle(F),this.enableTokenBucket()}else this.calculateTimeWindow(),b=this.cubicSuccess(this.getCurrentTimeInSeconds());const _=Math.min(b,2*this.measuredTxRate);this.updateTokenBucketRate(_)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(v){return this.getPrecise(v*this.beta)}cubicSuccess(v){return this.getPrecise(this.scaleConstant*Math.pow(v-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(v){this.refillTokenBucket(),this.fillRate=Math.max(v,this.minFillRate),this.maxCapacity=Math.max(v,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const v=this.getCurrentTimeInSeconds(),b=Math.floor(v*2)/2;if(this.requestCount++,b>this.lastTxRateBucket){const _=this.requestCount/(b-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(_*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=b}}getPrecise(v){return parseFloat(v.toFixed(8))}constructor(v){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0;var b;this.beta=(b=v==null?void 0:v.beta)!==null&&b!==void 0?b:.7;var _;this.minCapacity=(_=v==null?void 0:v.minCapacity)!==null&&_!==void 0?_:1;var F;this.minFillRate=(F=v==null?void 0:v.minFillRate)!==null&&F!==void 0?F:.5;var V;this.scaleConstant=(V=v==null?void 0:v.scaleConstant)!==null&&V!==void 0?V:.4;var j;this.smooth=(j=v==null?void 0:v.smooth)!==null&&j!==void 0?j:.8;const ie=this.getCurrentTimeInSeconds();this.lastThrottleTime=ie,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}}s(R,"DefaultRateLimiter");const ae=100,pe=20*1e3,Se=500,X=500,ft=5,ke=10,ze=1,Gt="amz-sdk-invocation-id",dt="amz-sdk-request",Qn=s(()=>{let C=ae;return{computeNextBackoffDelay:s(_=>Math.floor(Math.min(pe,Math.random()*2**_*C)),"computeNextBackoffDelay"),setDelayBase:s(_=>{C=_},"setDelayBase")}},"getDefaultRetryBackoffStrategy"),Wn=s(C=>{let{retryDelay:v,retryCount:b,retryCost:_}=C;return{getRetryCount:s(()=>b,"getRetryCount"),getRetryDelay:s(()=>Math.min(pe,v),"getRetryDelay"),getRetryCost:s(()=>_,"getRetryCost")}},"createDefaultRetryToken");class Vt{acquireInitialRetryToken(v){return(0,p.coroutine)(function*(){return Wn({retryDelay:ae,retryCount:0})})()}refreshRetryTokenForRetry(v,b){var _=this;return(0,p.coroutine)(function*(){const F=yield _.getMaxAttempts();if(_.shouldRetry(v,b,F)){const V=b.errorType;_.retryBackoffStrategy.setDelayBase(V==="THROTTLING"?Se:ae);const j=_.retryBackoffStrategy.computeNextBackoffDelay(v.getRetryCount()),ie=b.retryAfterHint?Math.max(b.retryAfterHint.getTime()-Date.now()||0,j):j,Z=_.getCapacityCost(V);return _.capacity-=Z,Wn({retryDelay:ie,retryCount:v.getRetryCount()+1,retryCost:Z})}throw new Error("No retry token available")})()}recordSuccess(v){var b;this.capacity=Math.max(X,this.capacity+((b=v.getRetryCost())!==null&&b!==void 0?b:ze))}getCapacity(){return this.capacity}getMaxAttempts(){var v=this;return(0,p.coroutine)(function*(){try{return yield v.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Fe}`),Fe}})()}shouldRetry(v,b,_){return v.getRetryCount()<_&&this.capacity>=this.getCapacityCost(b.errorType)&&this.isRetryableError(b.errorType)}getCapacityCost(v){return v==="TRANSIENT"?ke:ft}isRetryableError(v){return v==="THROTTLING"||v==="TRANSIENT"}constructor(v){this.maxAttempts=v,this.mode=$e.STANDARD,this.capacity=X,this.retryBackoffStrategy=Qn(),this.maxAttemptsProvider=typeof v=="function"?v:(0,p.coroutine)(function*(){return v})}}s(Vt,"StandardRetryStrategy");class yn{acquireInitialRetryToken(v){var b=this;return(0,p.coroutine)(function*(){return yield b.rateLimiter.getSendToken(),b.standardRetryStrategy.acquireInitialRetryToken(v)})()}refreshRetryTokenForRetry(v,b){var _=this;return(0,p.coroutine)(function*(){return _.rateLimiter.updateClientSendingRate(b),_.standardRetryStrategy.refreshRetryTokenForRetry(v,b)})()}recordSuccess(v){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(v)}constructor(v,b){this.maxAttemptsProvider=v,this.mode=$e.ADAPTIVE;const{rateLimiter:_}=b??{};this.rateLimiter=_??new R,this.standardRetryStrategy=new Vt(v)}}s(yn,"AdaptiveRetryStrategy");class Zt extends Vt{refreshRetryTokenForRetry(v,b){var _=this,F=s(()=>super.refreshRetryTokenForRetry,"_superprop_get_refreshRetryTokenForRetry");return(0,p.coroutine)(function*(){const V=yield F().call(_,v,b);return V.getRetryDelay=()=>_.computeNextBackoffDelay(V.getRetryCount()),V})()}constructor(v,b=ae){super(typeof v=="function"?v:(0,p.coroutine)(function*(){return v})),typeof b=="number"?this.computeNextBackoffDelay=()=>b:this.computeNextBackoffDelay=b}}s(Zt,"ConfiguredRetryStrategy");var Rn,Nn=new Uint8Array(16);function fi(){if(!Rn&&(Rn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Rn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Rn(Nn)}s(fi,"rng");const ct=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ze(C){return typeof C=="string"&&ct.test(C)}s(Ze,"validate");const Xt=Ze;for(var Ot=[],sn=0;sn<256;++sn)Ot.push((sn+256).toString(16).substr(1));function En(C){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=(Ot[C[v+0]]+Ot[C[v+1]]+Ot[C[v+2]]+Ot[C[v+3]]+"-"+Ot[C[v+4]]+Ot[C[v+5]]+"-"+Ot[C[v+6]]+Ot[C[v+7]]+"-"+Ot[C[v+8]]+Ot[C[v+9]]+"-"+Ot[C[v+10]]+Ot[C[v+11]]+Ot[C[v+12]]+Ot[C[v+13]]+Ot[C[v+14]]+Ot[C[v+15]]).toLowerCase();if(!Xt(b))throw TypeError("Stringified UUID is invalid");return b}s(En,"stringify");const On=En;function Sn(C,v,b){C=C||{};var _=C.random||(C.rng||fi)();if(_[6]=_[6]&15|64,_[8]=_[8]&63|128,v){b=b||0;for(var F=0;F<16;++F)v[b+F]=_[F];return v}return On(_)}s(Sn,"v4");const bn=Sn,xn=s((C,v)=>{const b=C;var _;const F=(_=v==null?void 0:v.noRetryIncrement)!==null&&_!==void 0?_:ze;var V;const j=(V=v==null?void 0:v.retryCost)!==null&&V!==void 0?V:ft;var ie;const Z=(ie=v==null?void 0:v.timeoutRetryCost)!==null&&ie!==void 0?ie:ke;let le=C;const ne=s(Nt=>Nt.name==="TimeoutError"?Z:j,"getCapacityAmount"),Xe=s(Nt=>ne(Nt)<=le,"hasRetryTokens");return Object.freeze({hasRetryTokens:Xe,retrieveRetryTokens:s(Nt=>{if(!Xe(Nt))throw new Error("No retry token available");const Ct=ne(Nt);return le-=Ct,Ct},"retrieveRetryTokens"),releaseRetryTokens:s(Nt=>{le+=Nt??F,le=Math.min(le,b)},"releaseRetryTokens")})},"getDefaultRetryQuota"),B=s((C,v)=>Math.floor(Math.min(pe,Math.random()*2**v*C)),"defaultDelayDecider"),re=s(C=>C?De(C)||Ie(C)||Le(C)||fe(C):!1,"defaultRetryDecider"),Ee=s(C=>C instanceof Error?C:C instanceof Object?Object.assign(new Error,C):typeof C=="string"?new Error(C):new Error(`AWS SDK error wrapper for ${C}`),"asSdkError");class Me{shouldRetry(v,b,_){return b<_&&this.retryDecider(v)&&this.retryQuota.hasRetryTokens(v)}getMaxAttempts(){var v=this;return(0,p.coroutine)(function*(){let b;try{b=yield v.maxAttemptsProvider()}catch{b=Fe}return b})()}retry(v,b,_){var F=this;return(0,p.coroutine)(function*(){let V,j=0,ie=0;const Z=yield F.getMaxAttempts(),{request:le}=b;for(T.isInstance(le)&&(le.headers[Gt]=bn());;)try{T.isInstance(le)&&(le.headers[dt]=`attempt=${j+1}; max=${Z}`),_!=null&&_.beforeRequest&&(yield _.beforeRequest());const{response:ne,output:Xe}=yield v(b);return _!=null&&_.afterRequest&&_.afterRequest(ne),F.retryQuota.releaseRetryTokens(V),Xe.$metadata.attempts=j+1,Xe.$metadata.totalRetryDelay=ie,{response:ne,output:Xe}}catch(ne){const Xe=Ee(ne);if(j++,F.shouldRetry(Xe,j,Z)){V=F.retryQuota.retrieveRetryTokens(Xe);const bt=F.delayDecider(Le(Xe)?Se:ae,j),Lt=qe(Xe.$response),Nt=Math.max(Lt||0,bt);ie+=Nt,yield new Promise(Ct=>setTimeout(Ct,Nt));continue}throw Xe.$metadata||(Xe.$metadata={}),Xe.$metadata.attempts=j,Xe.$metadata.totalRetryDelay=ie,Xe}})()}constructor(v,b){this.maxAttemptsProvider=v,this.mode=$e.STANDARD;var _;this.retryDecider=(_=b==null?void 0:b.retryDecider)!==null&&_!==void 0?_:re;var F;this.delayDecider=(F=b==null?void 0:b.delayDecider)!==null&&F!==void 0?F:B;var V;this.retryQuota=(V=b==null?void 0:b.retryQuota)!==null&&V!==void 0?V:xn(X)}}s(Me,"StandardRetryStrategy_StandardRetryStrategy");const qe=s(C=>{if(!D.isInstance(C))return;const v=Object.keys(C.headers).find(V=>V.toLowerCase()==="retry-after");if(!v)return;const b=C.headers[v],_=Number(b);return Number.isNaN(_)?new Date(b).getTime()-Date.now():_*1e3},"getDelayFromRetryAfterHeader");class St extends Me{retry(v,b){var _=this,F=s(()=>super.retry,"_superprop_get_retry");return(0,p.coroutine)(function*(){return F().call(_,v,b,{beforeRequest:(0,p.coroutine)(function*(){return _.rateLimiter.getSendToken()}),afterRequest:V=>{_.rateLimiter.updateClientSendingRate(V)}})})()}constructor(v,b){const{rateLimiter:_,...F}=b??{};super(v,F),this.rateLimiter=_??new R,this.mode=$e.ADAPTIVE}}s(St,"AdaptiveRetryStrategy_AdaptiveRetryStrategy");const At="AWS_MAX_ATTEMPTS",Et="max_attempts",gt={environmentVariableSelector:C=>{const v=C[At];if(!v)return;const b=parseInt(v);if(Number.isNaN(b))throw new Error(`Environment variable ${At} mast be a number, got "${v}"`);return b},configFileSelector:C=>{const v=C[Et];if(!v)return;const b=parseInt(v);if(Number.isNaN(b))throw new Error(`Shared config file entry ${Et} mast be a number, got "${v}"`);return b},default:Fe},Dt=s(C=>{const{retryStrategy:v}=C;var b;const _=Ft((b=C.maxAttempts)!==null&&b!==void 0?b:Fe);return{...C,maxAttempts:_,retryStrategy:(0,p.coroutine)(function*(){return v||((yield Ft(C.retryMode)())===$e.ADAPTIVE?new yn(_):new Vt(_))})}},"resolveRetryConfig"),jt="AWS_RETRY_MODE",Cn="retry_mode",_n={environmentVariableSelector:C=>C[jt],configFileSelector:C=>C[Cn],default:oe},Bn=s(()=>C=>function(){var v=_bluebirdCoroutine(function*(b){const{request:_}=b;return HttpRequest.isInstance(_)&&(delete _.headers[INVOCATION_ID_HEADER],delete _.headers[REQUEST_HEADER]),C(b)});return function(b){return v.apply(this,arguments)}}(),"omitRetryHeadersMiddleware"),Gn={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},hi=s(C=>({applyToStack:v=>{v.addRelativeTo(Bn(),Gn)}}),"getOmitRetryHeadersPlugin"),Ei=s(C=>(v,b)=>function(){var _=(0,p.coroutine)(function*(F){let V=yield C.retryStrategy();const j=yield C.maxAttempts();if(Ci(V)){V=V;let ie=yield V.acquireInitialRetryToken(b.partition_id),Z=new Error,le=0,ne=0;const{request:Xe}=F;for(T.isInstance(Xe)&&(Xe.headers[Gt]=bn());;)try{T.isInstance(Xe)&&(Xe.headers[dt]=`attempt=${le+1}; max=${j}`);const{response:bt,output:Lt}=yield v(F);return V.recordSuccess(ie),Lt.$metadata.attempts=le+1,Lt.$metadata.totalRetryDelay=ne,{response:bt,output:Lt}}catch(bt){const Lt=pi(bt);Z=Ee(bt);try{ie=yield V.refreshRetryTokenForRetry(ie,Lt)}catch{throw Z.$metadata||(Z.$metadata={}),Z.$metadata.attempts=le+1,Z.$metadata.totalRetryDelay=ne,Z}le=ie.getRetryCount();const Nt=ie.getRetryDelay();ne+=Nt,yield new Promise(Ct=>setTimeout(Ct,Nt))}}else return V=V,V!=null&&V.mode&&(b.userAgent=[...b.userAgent||[],["cfg/retry-mode",V.mode]]),V.retry(v,F)});return function(F){return _.apply(this,arguments)}}(),"retryMiddleware"),Ci=s(C=>typeof C.acquireInitialRetryToken<"u"&&typeof C.refreshRetryTokenForRetry<"u"&&typeof C.recordSuccess<"u","isRetryStrategyV2"),pi=s(C=>{const v={errorType:mi(C)},b=Li(C.$response);return b&&(v.retryAfterHint=b),v},"getRetryErrorInfo"),mi=s(C=>Le(C)?"THROTTLING":fe(C)?"TRANSIENT":ge(C)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType"),Di={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},xi=s(C=>({applyToStack:v=>{v.add(Ei(C),Di)}}),"getRetryPlugin"),Li=s(C=>{if(!D.isInstance(C))return;const v=Object.keys(C.headers).find(V=>V.toLowerCase()==="retry-after");if(!v)return;const b=C.headers[v],_=Number(b);return Number.isNaN(_)?new Date(b):new Date(_*1e3)},"getRetryAfterHint");class gi extends Error{static from(v){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Object.assign(new this(v.message,b),v)}constructor(v,b=!0){super(v),this.tryNextLink=b,this.name="ProviderError",Object.setPrototypeOf(this,gi.prototype)}}s(gi,"ProviderError_ProviderError");class Si extends gi{constructor(v,b=!0){super(v,b),this.tryNextLink=b,this.name="CredentialsProviderError",Object.setPrototypeOf(this,Si.prototype)}}s(Si,"CredentialsProviderError");class Ti extends gi{constructor(v,b=!0){super(v,b),this.tryNextLink=b,this.name="TokenProviderError",Object.setPrototypeOf(this,Ti.prototype)}}s(Ti,"TokenProviderError");function Hi(){for(var C=arguments.length,v=new Array(C),b=0;b<C;b++)v[b]=arguments[b];return()=>{let _=Promise.reject(new ProviderError("No providers in chain"));for(const F of v)_=_.catch(V=>{if(V!=null&&V.tryNextLink)return F();throw V});return _}}s(Hi,"chain");const kn=s((C,v,b)=>{let _,F,V,j=!1;const ie=function(){var Z=(0,p.coroutine)(function*(){F||(F=C());try{_=yield F,V=!0,j=!1}finally{F=void 0}return _});return s(function(){return Z.apply(this,arguments)},"coalesceProvider")}();return v===void 0?function(){var Z=(0,p.coroutine)(function*(le){return(!V||le!=null&&le.forceRefresh)&&(_=yield ie()),_});return function(le){return Z.apply(this,arguments)}}():function(){var Z=(0,p.coroutine)(function*(le){return(!V||le!=null&&le.forceRefresh)&&(_=yield ie()),j?_:b&&!b(_)?(j=!0,_):(v(_)&&(yield ie()),_)});return function(le){return Z.apply(this,arguments)}}()},"memoize"),Xn={},ti={};for(let C=0;C<256;C++){let v=C.toString(16).toLowerCase();v.length===1&&(v=`0${v}`),Xn[C]=v,ti[v]=C}function Bi(C){if(C.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const v=new Uint8Array(C.length/2);for(let b=0;b<C.length;b+=2){const _=C.slice(b,b+2).toLowerCase();if(_ in ti)v[b/2]=ti[_];else throw new Error(`Cannot decode unrecognized sequence ${_} as hexadecimal`)}return v}s(Bi,"fromHex");function Ai(C){let v="";for(let b=0;b<C.byteLength;b++)v+=Xn[C[b]];return v}s(Ai,"toHex");const vi=s(C=>new TextEncoder().encode(C),"fromUtf8"),Ni=s(C=>typeof C=="string"?vi(C):ArrayBuffer.isView(C)?new Uint8Array(C.buffer,C.byteOffset,C.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(C),"toUint8Array"),Ro="X-Amz-Algorithm",ko="X-Amz-Credential",jr="X-Amz-Date",Do="X-Amz-SignedHeaders",Lo="X-Amz-Expires",$r="X-Amz-Signature",Kr="X-Amz-Security-Token",Sa="X-Amz-Region-Set",Jr="authorization",Yr=jr.toLowerCase(),No=[Jr,Yr,"date"],xo=$r.toLowerCase(),_r="x-amz-content-sha256",Bo=Kr.toLowerCase(),ya="host",Fo={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Vo=/^proxy-/,Uo=/^sec-/,ba=null,Tr="AWS4-HMAC-SHA256",Ea="AWS4-ECDSA-P256-SHA256",Ho="AWS4-HMAC-SHA256-PAYLOAD",zo="UNSIGNED-PAYLOAD",Wo=50,Qr="aws4_request",Go=60*60*24*7,Ji={},fr=[],Ir=s((C,v,b)=>`${C}/${v}/${b}/${Qr}`,"createScope"),jo=function(){var C=(0,p.coroutine)(function*(v,b,_,F,V){const j=yield Xr(v,b.secretAccessKey,b.accessKeyId),ie=`${_}:${F}:${V}:${Ai(j)}:${b.sessionToken}`;if(ie in Ji)return Ji[ie];for(fr.push(ie);fr.length>Wo;)delete Ji[fr.shift()];let Z=`AWS4${b.secretAccessKey}`;for(const le of[_,F,V,Qr])Z=yield Xr(v,Z,le);return Ji[ie]=Z});return s(function(b,_,F,V,j){return C.apply(this,arguments)},"getSigningKey")}(),Ca=s(()=>{fr.length=0,Object.keys(Ji).forEach(C=>{delete Ji[C]})},"clearCredentialCache"),Xr=s((C,v,b)=>{const _=new C(v);return _.update(Ni(b)),_.digest()},"hmac"),Zr=s((C,v,b)=>{let{headers:_}=C;const F={};for(const V of Object.keys(_).sort()){if(_[V]==null)continue;const j=V.toLowerCase();(j in Fo||v!=null&&v.has(j)||Vo.test(j)||Uo.test(j))&&(!b||b&&!b.has(j))||(F[j]=_[V].trim().replace(/\s+/g," "))}return F},"getCanonicalHeaders"),zi=s(C=>encodeURIComponent(C).replace(/[!'()*]/g,$o),"escapeUri"),$o=s(C=>`%${C.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode"),Ko=s(C=>{let{query:v={}}=C;const b=[],_={};for(const F of Object.keys(v).sort()){if(F.toLowerCase()===xo)continue;b.push(F);const V=v[F];typeof V=="string"?_[F]=`${zi(F)}=${zi(V)}`:Array.isArray(V)&&(_[F]=V.slice(0).sort().reduce((j,ie)=>j.concat([`${zi(F)}=${zi(ie)}`]),[]).join("&"))}return b.map(F=>_[F]).filter(F=>F).join("&")},"getCanonicalQuery"),Jo=s(C=>typeof ArrayBuffer=="function"&&C instanceof ArrayBuffer||Object.prototype.toString.call(C)==="[object ArrayBuffer]","isArrayBuffer"),wr=function(){var C=(0,p.coroutine)(function*(v,b){let{headers:_,body:F}=v;for(const V of Object.keys(_))if(V.toLowerCase()===_r)return _[V];if(F==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof F=="string"||ArrayBuffer.isView(F)||Jo(F)){const V=new b;return V.update(Ni(F)),Ai(yield V.digest())}return zo});return s(function(b,_){return C.apply(this,arguments)},"getPayloadHash")}(),Yo=s((C,v)=>{C=C.toLowerCase();for(const b of Object.keys(v))if(C===b.toLowerCase())return!0;return!1},"hasHeader"),_a=s((C,v)=>{C=C.toLowerCase();for(const b of Object.keys(v))if(C===b.toLowerCase())return v[b]},"getHeaderValue"),Ta=s((C,v)=>{C=C.toLowerCase();for(const b of Object.keys(v))C===b.toLowerCase()&&delete v[b]},"deleteHeader"),qr=s(C=>{let{headers:v,query:b,..._}=C;return{..._,headers:{...v},query:b?Qo(b):void 0}},"cloneRequest"),Qo=s(C=>Object.keys(C).reduce((v,b)=>{const _=C[b];return{...v,[b]:Array.isArray(_)?[..._]:_}},{}),"cloneRequest_cloneQuery"),Xo=s(function(C){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{headers:b,query:_={}}=typeof C.clone=="function"?C.clone():qr(C);for(const V of Object.keys(b)){var F;const j=V.toLowerCase();j.slice(0,6)==="x-amz-"&&!(!((F=v.unhoistableHeaders)===null||F===void 0)&&F.has(j))&&(_[V]=b[V],delete b[V])}return{...C,headers:b,query:_}},"moveHeadersToQuery"),eo=s(C=>{C=typeof C.clone=="function"?C.clone():qr(C);for(const v of Object.keys(C.headers))No.indexOf(v.toLowerCase())>-1&&delete C.headers[v];return C},"prepareRequest"),Zo=s(C=>qo(C).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601"),qo=s(C=>typeof C=="number"?new Date(C*1e3):typeof C=="string"?Number(C)?new Date(Number(C)*1e3):new Date(C):C,"toDate");class Or{presign(v){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var _=this;return(0,p.coroutine)(function*(){const{signingDate:F=new Date,expiresIn:V=3600,unsignableHeaders:j,unhoistableHeaders:ie,signableHeaders:Z,signingRegion:le,signingService:ne}=b,Xe=yield _.credentialProvider();_.validateResolvedCredentials(Xe);const bt=le??(yield _.regionProvider()),{longDate:Lt,shortDate:Nt}=hr(F);if(V>Go)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const Ct=Ir(Nt,bt,ne??_.service),Wt=Xo(eo(v),{unhoistableHeaders:ie});Xe.sessionToken&&(Wt.query[Kr]=Xe.sessionToken),Wt.query[Ro]=Tr,Wt.query[ko]=`${Xe.accessKeyId}/${Ct}`,Wt.query[jr]=Lt,Wt.query[Lo]=V.toString(10);const ri=Zr(Wt,j,Z);return Wt.query[Do]=to(ri),Wt.query[$r]=yield _.getSignature(Lt,Ct,_.getSigningKey(Xe,bt,Nt,ne),_.createCanonicalRequest(Wt,ri,yield wr(v,_.sha256))),Wt})()}sign(v,b){var _=this;return(0,p.coroutine)(function*(){return typeof v=="string"?_.signString(v,b):v.headers&&v.payload?_.signEvent(v,b):_.signRequest(v,b)})()}signEvent(v,b){let{headers:_,payload:F}=v,{signingDate:V=new Date,priorSignature:j,signingRegion:ie,signingService:Z}=b;var le=this;return(0,p.coroutine)(function*(){const ne=ie??(yield le.regionProvider()),{shortDate:Xe,longDate:bt}=hr(V),Lt=Ir(Xe,ne,Z??le.service),Nt=yield wr({headers:{},body:F},le.sha256),Ct=new le.sha256;Ct.update(_);const Wt=Ai(yield Ct.digest()),ri=[Ho,bt,Lt,j,Wt,Nt].join(`
`);return le.signString(ri,{signingDate:V,signingRegion:ne,signingService:Z})})()}signString(v){let{signingDate:b=new Date,signingRegion:_,signingService:F}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var V=this;return(0,p.coroutine)(function*(){const j=yield V.credentialProvider();V.validateResolvedCredentials(j);const ie=_??(yield V.regionProvider()),{shortDate:Z}=hr(b),le=new V.sha256(yield V.getSigningKey(j,ie,Z,F));return le.update(Ni(v)),Ai(yield le.digest())})()}signRequest(v){let{signingDate:b=new Date,signableHeaders:_,unsignableHeaders:F,signingRegion:V,signingService:j}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var ie=this;return(0,p.coroutine)(function*(){const Z=yield ie.credentialProvider();ie.validateResolvedCredentials(Z);const le=V??(yield ie.regionProvider()),ne=eo(v),{longDate:Xe,shortDate:bt}=hr(b),Lt=Ir(bt,le,j??ie.service);ne.headers[Yr]=Xe,Z.sessionToken&&(ne.headers[Bo]=Z.sessionToken);const Nt=yield wr(ne,ie.sha256);!Yo(_r,ne.headers)&&ie.applyChecksum&&(ne.headers[_r]=Nt);const Ct=Zr(ne,F,_),Wt=yield ie.getSignature(Xe,Lt,ie.getSigningKey(Z,le,bt,j),ie.createCanonicalRequest(ne,Ct,Nt));return ne.headers[Jr]=`${Tr} Credential=${Z.accessKeyId}/${Lt}, SignedHeaders=${to(Ct)}, Signature=${Wt}`,ne})()}createCanonicalRequest(v,b,_){const F=Object.keys(b).sort();return`${v.method}
${this.getCanonicalPath(v)}
${Ko(v)}
${F.map(V=>`${V}:${b[V]}`).join(`
`)}

${F.join(";")}
${_}`}createStringToSign(v,b,_){var F=this;return(0,p.coroutine)(function*(){const V=new F.sha256;V.update(Ni(_));const j=yield V.digest();return`${Tr}
${v}
${b}
${Ai(j)}`})()}getCanonicalPath(v){let{path:b}=v;if(this.uriEscapePath){const _=[];for(const j of b.split("/"))(j==null?void 0:j.length)!==0&&j!=="."&&(j===".."?_.pop():_.push(j));const F=`${b!=null&&b.startsWith("/")?"/":""}${_.join("/")}${_.length>0&&(b!=null&&b.endsWith("/"))?"/":""}`;return encodeURIComponent(F).replace(/%2F/g,"/")}return b}getSignature(v,b,_,F){var V=this;return(0,p.coroutine)(function*(){const j=yield V.createStringToSign(v,b,F),ie=new V.sha256(yield _);return ie.update(Ni(j)),Ai(yield ie.digest())})()}getSigningKey(v,b,_,F){return jo(this.sha256,v,_,b,F||this.service)}validateResolvedCredentials(v){if(typeof v!="object"||typeof v.accessKeyId!="string"||typeof v.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}constructor({applyChecksum:v,credentials:b,region:_,service:F,sha256:V,uriEscapePath:j=!0}){this.service=F,this.sha256=V,this.uriEscapePath=j,this.applyChecksum=typeof v=="boolean"?v:!0,this.regionProvider=Ft(_),this.credentialProvider=Ft(b)}}s(Or,"SignatureV4_SignatureV4");const hr=s(C=>{const v=Zo(C).replace(/[\-:]/g,"");return{longDate:v,shortDate:v.slice(0,8)}},"formatDate"),to=s(C=>Object.keys(C).sort().join(";"),"getCanonicalHeaderList"),es=3e5,ts=s(C=>{const v=C.credentials?no(C.credentials):C.credentialDefaultProvider(C),{signingEscapePath:b=!0,systemClockOffset:_=C.systemClockOffset||0,sha256:F}=C;let V;return C.signer?V=Ft(C.signer):C.regionInfoProvider?V=s(()=>Ft(C.region)().then(function(){var j=(0,p.coroutine)(function*(ie){return[(yield C.regionInfoProvider(ie,{useFipsEndpoint:yield C.useFipsEndpoint(),useDualstackEndpoint:yield C.useDualstackEndpoint()}))||{},ie]});return function(ie){return j.apply(this,arguments)}}()).then(j=>{let[ie,Z]=j;const{signingRegion:le,signingService:ne}=ie;C.signingRegion=C.signingRegion||le||Z,C.signingName=C.signingName||ne||C.serviceId;const Xe={...C,credentials:v,region:C.signingRegion,service:C.signingName,sha256:F,uriEscapePath:b},bt=C.signerConstructor||Or;return new bt(Xe)}),"signer"):V=function(){var j=(0,p.coroutine)(function*(ie){ie=Object.assign({},{name:"sigv4",signingName:C.signingName||C.defaultSigningName,signingRegion:yield Ft(C.region)(),properties:{}},ie);const Z=ie.signingRegion,le=ie.signingName;C.signingRegion=C.signingRegion||Z,C.signingName=C.signingName||le||C.serviceId;const ne={...C,credentials:v,region:C.signingRegion,service:C.signingName,sha256:F,uriEscapePath:b},Xe=C.signerConstructor||Or;return new Xe(ne)});return function(ie){return j.apply(this,arguments)}}(),{...C,systemClockOffset:_,signingEscapePath:b,credentials:v,signer:V}},"resolveAwsAuthConfig"),Ia=s(C=>{const v=C.credentials?no(C.credentials):C.credentialDefaultProvider(C),{signingEscapePath:b=!0,systemClockOffset:_=C.systemClockOffset||0,sha256:F}=C;let V;return C.signer?V=normalizeProvider(C.signer):V=normalizeProvider(new SignatureV4({credentials:v,region:C.region,service:C.signingName,sha256:F,uriEscapePath:b})),{...C,systemClockOffset:_,signingEscapePath:b,credentials:v,signer:V}},"resolveSigV4AuthConfig"),no=s(C=>typeof C=="function"?kn(C,v=>v.expiration!==void 0&&v.expiration.getTime()-Date.now()<es,v=>v.expiration!==void 0):Ft(C),"normalizeCredentialProvider"),io=s(C=>new Date(Date.now()+C),"getSkewCorrectedDate"),ns=s((C,v)=>Math.abs(io(v).getTime()-C)>=3e5,"isClockSkewed"),ro=s((C,v)=>{const b=Date.parse(C);return ns(b,v)?b-Date.now():v},"getUpdatedSystemClockOffset"),is=s(C=>(v,b)=>function(){var _=(0,p.coroutine)(function*(F){var V,j,ie,Z;if(!T.isInstance(F.request))return v(F);const le=(V=b.endpointV2)===null||V===void 0||(j=V.properties)===null||j===void 0||(ie=j.authSchemes)===null||ie===void 0?void 0:ie[0],ne=(le==null?void 0:le.name)==="sigv4a"?le==null||(Z=le.signingRegionSet)===null||Z===void 0?void 0:Z.join(","):void 0,Xe=yield C.signer(le),bt=yield v({...F,request:yield Xe.sign(F.request,{signingDate:io(C.systemClockOffset),signingRegion:ne||b.signing_region,signingService:b.signing_service})}).catch(Nt=>{var Ct;const Wt=(Ct=Nt.ServerTime)!==null&&Ct!==void 0?Ct:oo(Nt.$response);throw Wt&&(C.systemClockOffset=ro(Wt,C.systemClockOffset)),Nt}),Lt=oo(bt.response);return Lt&&(C.systemClockOffset=ro(Lt,C.systemClockOffset)),bt});return function(F){return _.apply(this,arguments)}}(),"awsAuthMiddleware");var Ar;const oo=s(C=>{var v,b;return D.isInstance(C)?(Ar=(v=C.headers)===null||v===void 0?void 0:v.date)!==null&&Ar!==void 0?Ar:(b=C.headers)===null||b===void 0?void 0:b.Date:void 0},"getDateHeader"),rs={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},os=s(C=>({applyToStack:v=>{v.addRelativeTo(is(C),rs)}}),"getAwsAuthPlugin"),wa=null;function ss(C){return{...C,customUserAgent:typeof C.customUserAgent=="string"?[[C.customUserAgent]]:C.customUserAgent}}s(ss,"resolveUserAgentConfig");var as=f(983393),so=f.n(as);let ao=so(),lo="";const ls=s(C=>{const{partitions:v}=ao;for(const _ of v){const{regions:F,outputs:V}=_;for(const[j,ie]of Object.entries(F))if(j===C)return{...V,...ie}}for(const _ of v){const{regionRegex:F,outputs:V}=_;if(new RegExp(F).test(C))return{...V}}const b=v.find(_=>_.id==="aws");if(!b)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...b.outputs}},"partition"),pr=s(function(C){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";ao=C,lo=v},"setPartitionInfo"),ds=s(()=>{pr(so(),"")},"useDefaultPartitionInfo"),co=s(()=>lo,"getUserAgentPrefix"),Wi="endpoints";function Ii(C){return typeof C!="object"||C==null?C:"ref"in C?`$${Ii(C.ref)}`:"fn"in C?`${C.fn}(${(C.argv||[]).map(Ii).join(", ")})`:JSON.stringify(C,null,2)}s(Ii,"toDebugString");class _i extends Error{constructor(v){super(v),this.name="EndpointError"}}s(_i,"EndpointError");const el=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Mr=s(C=>el.test(C)||C.startsWith("[")&&C.endsWith("]"),"isIpAddress"),Fu=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),tl=s(function(C){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1))return Fu.test(C);const b=C.split(".");for(const _ of b)if(!tl(_))return!1;return!0},"isValidHostLabel"),td=s(function(C){if(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1){for(const b of C.split("."))if(!td(b))return!1;return!0}return!(!tl(C)||C.length<3||C.length>63||C!==C.toLowerCase()||Mr(C))},"isVirtualHostableS3Bucket"),Vu=s(C=>{const v=C.split(":");if(v.length<6)return null;const[b,_,F,V,j,...ie]=v;return b!=="arn"||_===""||F===""||ie[0]===""?null:{partition:_,service:F,region:V,accountId:j,resourceId:ie[0].includes("/")?ie[0].split("/"):ie}},"parseArn"),Uu=s((C,v)=>C===v,"booleanEquals"),Hu=s(C=>{const v=C.split("."),b=[];for(const _ of v){const F=_.indexOf("[");if(F!==-1){if(_.indexOf("]")!==_.length-1)throw new _i(`Path: '${C}' does not end with ']'`);const V=_.slice(F+1,-1);if(Number.isNaN(parseInt(V)))throw new _i(`Invalid array index: '${V}' in path: '${C}'`);F!==0&&b.push(_.slice(0,F)),b.push(V)}else b.push(_)}return b},"getAttrPathList"),nd=s((C,v)=>Hu(v).reduce((b,_)=>{if(typeof b!="object")throw new _i(`Index '${_}' in '${v}' not found in '${JSON.stringify(C)}'`);return Array.isArray(b)?b[parseInt(_)]:b[_]},C),"getAttr"),zu=s(C=>C!=null,"isSet"),Wu=s(C=>!C,"not");var id;(function(C){C.HEADER="header",C.QUERY="query"})(id||(id={}));var rd;(function(C){C.AAAA="AAAA",C.A="A"})(rd||(rd={}));var cs;(function(C){C.HTTP="http",C.HTTPS="https"})(cs||(cs={}));var od;(function(C){C.HTTP_0_9="http/0.9",C.HTTP_1_0="http/1.0",C.TDS_8_0="tds/8.0"})(od||(od={}));const nl={[cs.HTTP]:80,[cs.HTTPS]:443},Gu=s(C=>{const v=(()=>{try{if(C instanceof URL)return C;if(typeof C=="object"&&"hostname"in C){const{hostname:bt,port:Lt,protocol:Nt="",path:Ct="",query:Wt={}}=C,ri=new URL(`${Nt}//${bt}${Lt?`:${Lt}`:""}${Ct}`);return ri.search=Object.entries(Wt).map(xl=>{let[tr,Ua]=xl;return`${tr}=${Ua}`}).join("&"),ri}return new URL(C)}catch{return null}})();if(!v)return console.error(`Unable to parse ${JSON.stringify(C)} as a whatwg URL.`),null;const b=v.href,{host:_,hostname:F,pathname:V,protocol:j,search:ie}=v;if(ie)return null;const Z=j.slice(0,-1);if(!Object.values(cs).includes(Z))return null;const le=Mr(F),ne=b.includes(`${_}:${nl[Z]}`)||typeof C=="string"&&C.includes(`${_}:${nl[Z]}`),Xe=`${_}${ne?`:${nl[Z]}`:""}`;return{scheme:Z,authority:Xe,path:V,normalizedPath:V.endsWith("/")?V:`${V}/`,isIp:le}},"parseURL"),ju=s((C,v)=>C===v,"stringEquals"),$u=s((C,v,b,_)=>v>=b||C.length<b?null:_?C.substring(C.length-b,C.length-v):C.substring(v,b),"substring"),Ku=s(C=>encodeURIComponent(C).replace(/[!*'()]/g,v=>`%${v.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode"),sd=s((C,v)=>{const b=[],_={...v.endpointParams,...v.referenceRecord};let F=0;for(;F<C.length;){const V=C.indexOf("{",F);if(V===-1){b.push(C.slice(F));break}b.push(C.slice(F,V));const j=C.indexOf("}",V);if(j===-1){b.push(C.slice(V));break}C[V+1]==="{"&&C[j+1]==="}"&&(b.push(C.slice(V+1,j)),F=j+2);const ie=C.substring(V+1,j);if(ie.includes("#")){const[Z,le]=ie.split("#");b.push(nd(_[Z],le))}else b.push(_[ie]);F=j+1}return b.join("")},"evaluateTemplate"),Ju=s((C,v)=>{let{ref:b}=C;return{...v.endpointParams,...v.referenceRecord}[b]},"getReferenceValue"),Oa=s((C,v,b)=>{if(typeof C=="string")return sd(C,b);if(C.fn)return ad(C,b);if(C.ref)return Ju(C,b);throw new _i(`'${v}': ${String(C)} is not a string, function or reference.`)},"evaluateExpression"),ad=s((C,v)=>{let{fn:b,argv:_}=C;const F=_.map(V=>["boolean","number"].includes(typeof V)?V:Oa(V,"arg",v));return b.split(".").reduce((V,j)=>V[j],g)(...F)},"callFunction"),Yu=s((C,v)=>{let{assign:b,..._}=C;var F,V;if(b&&b in v.referenceRecord)throw new _i(`'${b}' is already defined in Reference Record.`);const j=ad(_,v);return(F=v.logger)===null||F===void 0||(V=F.debug)===null||V===void 0||V.call(F,Wi,`evaluateCondition: ${Ii(_)} = ${Ii(j)}`),{result:j===""?!0:!!j,...b!=null&&{toAssign:{name:b,value:j}}}},"evaluateCondition"),il=s(function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],v=arguments.length>1?arguments[1]:void 0;const b={};for(const V of C){const{result:j,toAssign:ie}=Yu(V,{...v,referenceRecord:{...v.referenceRecord,...b}});if(!j)return{result:j};if(ie){var _,F;b[ie.name]=ie.value,(_=v.logger)===null||_===void 0||(F=_.debug)===null||F===void 0||F.call(_,Wi,`assign: ${ie.name} := ${Ii(ie.value)}`)}}return{result:!0,referenceRecord:b}},"evaluateConditions"),Qu=s((C,v)=>Object.entries(C).reduce((b,_)=>{let[F,V]=_;return{...b,[F]:V.map(j=>{const ie=Oa(j,"Header value entry",v);if(typeof ie!="string")throw new _i(`Header '${F}' value '${ie}' is not a string`);return ie})}},{}),"getEndpointHeaders"),ld=s((C,v)=>{if(Array.isArray(C))return C.map(b=>ld(b,v));switch(typeof C){case"string":return sd(C,v);case"object":if(C===null)throw new _i(`Unexpected endpoint property: ${C}`);return dd(C,v);case"boolean":return C;default:throw new _i(`Unexpected endpoint property type: ${typeof C}`)}},"getEndpointProperty"),dd=s((C,v)=>Object.entries(C).reduce((b,_)=>{let[F,V]=_;return{...b,[F]:ld(V,v)}},{}),"getEndpointProperties"),Xu=s((C,v)=>{const b=Oa(C,"Endpoint URL",v);if(typeof b=="string")try{return new URL(b)}catch(_){throw console.error(`Failed to construct URL with ${b}`,_),_}throw new _i(`Endpoint URL must be a string, got ${typeof b}`)},"getEndpointUrl"),Zu=s((C,v)=>{var b,_;const{conditions:F,endpoint:V}=C,{result:j,referenceRecord:ie}=il(F,v);if(!j)return;const Z={...v,referenceRecord:{...v.referenceRecord,...ie}},{url:le,properties:ne,headers:Xe}=V;return(b=v.logger)===null||b===void 0||(_=b.debug)===null||_===void 0||_.call(b,Wi,`Resolving endpoint from template: ${Ii(V)}`),{...Xe!=null&&{headers:Qu(Xe,Z)},...ne!=null&&{properties:dd(ne,Z)},url:Xu(le,Z)}},"evaluateEndpointRule"),qu=s((C,v)=>{const{conditions:b,error:_}=C,{result:F,referenceRecord:V}=il(b,v);if(F)throw new _i(Oa(_,"Error",{...v,referenceRecord:{...v.referenceRecord,...V}}))},"evaluateErrorRule"),ef=s((C,v)=>{const{conditions:b,rules:_}=C,{result:F,referenceRecord:V}=il(b,v);if(F)return cd(_,{...v,referenceRecord:{...v.referenceRecord,...V}})},"evaluateTreeRule"),cd=s((C,v)=>{for(const b of C)if(b.type==="endpoint"){const _=Zu(b,v);if(_)return _}else if(b.type==="error")qu(b,v);else if(b.type==="tree"){const _=ef(b,v);if(_)return _}else throw new _i(`Unknown endpoint rule: ${b}`);throw new _i("Rules evaluation failed")},"evaluateRules"),tf=s((C,v)=>{var b,_,F,V,j;const{endpointParams:ie,logger:Z}=v,{parameters:le,rules:ne}=C;(b=v.logger)===null||b===void 0||(_=b.debug)===null||_===void 0||_.call(b,`${Wi} Initial EndpointParams: ${Ii(ie)}`);const Xe=Object.entries(le).filter(Ct=>{let[,Wt]=Ct;return Wt.default!=null}).map(Ct=>{let[Wt,ri]=Ct;return[Wt,ri.default]});if(Xe.length>0)for(const[Ct,Wt]of Xe){var bt;ie[Ct]=(bt=ie[Ct])!==null&&bt!==void 0?bt:Wt}const Lt=Object.entries(le).filter(Ct=>{let[,Wt]=Ct;return Wt.required}).map(Ct=>{let[Wt]=Ct;return Wt});for(const Ct of Lt)if(ie[Ct]==null)throw new _i(`Missing required parameter: '${Ct}'`);const Nt=cd(ne,{endpointParams:ie,logger:Z,referenceRecord:{}});if(!((F=v.endpointParams)===null||F===void 0)&&F.Endpoint)try{const Ct=new URL(v.endpointParams.Endpoint),{protocol:Wt,port:ri}=Ct;Nt.url.protocol=Wt,Nt.url.port=ri}catch{}return(V=v.logger)===null||V===void 0||(j=V.debug)===null||j===void 0||j.call(V,`${Wi} Resolved endpoint: ${Ii(Nt)}`),Nt},"resolveEndpoint"),ud="user-agent",rl="x-amz-user-agent",fd=" ",nf=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,rf=s(C=>(v,b)=>function(){var _=(0,p.coroutine)(function*(F){var V,j;const{request:ie}=F;if(!T.isInstance(ie))return v(F);const{headers:Z}=ie,le=(b==null||(V=b.userAgent)===null||V===void 0?void 0:V.map(ol))||[],ne=(yield C.defaultUserAgentProvider()).map(ol),Xe=(C==null||(j=C.customUserAgent)===null||j===void 0?void 0:j.map(ol))||[],bt=co(),Lt=(bt?[bt]:[]).concat([...ne,...le,...Xe]).join(fd),Nt=[...ne.filter(Ct=>Ct.startsWith("aws-sdk-")),...Xe].join(fd);return C.runtime!=="browser"?(Nt&&(Z[rl]=Z[rl]?`${Z[ud]} ${Nt}`:Nt),Z[ud]=Lt):Z[rl]=Lt,v({...F,request:ie})});return function(F){return _.apply(this,arguments)}}(),"userAgentMiddleware"),ol=s(C=>{let[v,b]=C;const _=v.indexOf("/"),F=v.substring(0,_);let V=v.substring(_+1);return F==="api"&&(V=V.toLowerCase()),[F,V,b].filter(j=>j&&j.length>0).map(j=>j==null?void 0:j.replace(nf,"_")).join("/")},"escapeUserAgent"),of={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},sf=s(C=>({applyToStack:v=>{v.add(rf(C),of)}}),"getUserAgentPlugin");class hd{trace(){}debug(){}info(){}warn(){}error(){}}s(hd,"NoOpLogger");const Aa=s(()=>{let C=[],v=[];const b=new Set,_=s(ne=>ne.sort((Xe,bt)=>pd[bt.step]-pd[Xe.step]||md[bt.priority||"normal"]-md[Xe.priority||"normal"]),"sort"),F=s(ne=>{let Xe=!1;const bt=s(Lt=>Lt.name&&Lt.name===ne?(Xe=!0,b.delete(ne),!1):!0,"filterCb");return C=C.filter(bt),v=v.filter(bt),Xe},"removeByName"),V=s(ne=>{let Xe=!1;const bt=s(Lt=>Lt.middleware===ne?(Xe=!0,Lt.name&&b.delete(Lt.name),!1):!0,"filterCb");return C=C.filter(bt),v=v.filter(bt),Xe},"removeByReference"),j=s(ne=>(C.forEach(Xe=>{ne.add(Xe.middleware,{...Xe})}),v.forEach(Xe=>{ne.addRelativeTo(Xe.middleware,{...Xe})}),ne),"cloneTo"),ie=s(ne=>{const Xe=[];return ne.before.forEach(bt=>{bt.before.length===0&&bt.after.length===0?Xe.push(bt):Xe.push(...ie(bt))}),Xe.push(ne),ne.after.reverse().forEach(bt=>{bt.before.length===0&&bt.after.length===0?Xe.push(bt):Xe.push(...ie(bt))}),Xe},"expandRelativeMiddlewareList"),Z=s(function(){let ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const Xe=[],bt=[],Lt={};return C.forEach(Ct=>{const Wt={...Ct,before:[],after:[]};Wt.name&&(Lt[Wt.name]=Wt),Xe.push(Wt)}),v.forEach(Ct=>{const Wt={...Ct,before:[],after:[]};Wt.name&&(Lt[Wt.name]=Wt),bt.push(Wt)}),bt.forEach(Ct=>{if(Ct.toMiddleware){const Wt=Lt[Ct.toMiddleware];if(Wt===void 0){if(ne)return;throw new Error(`${Ct.toMiddleware} is not found when adding ${Ct.name||"anonymous"} middleware ${Ct.relation} ${Ct.toMiddleware}`)}Ct.relation==="after"&&Wt.after.push(Ct),Ct.relation==="before"&&Wt.before.push(Ct)}}),_(Xe).map(ie).reduce((Ct,Wt)=>(Ct.push(...Wt),Ct),[])},"getMiddlewareList"),le={add:function(ne){let Xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{name:bt,override:Lt}=Xe,Nt={step:"initialize",priority:"normal",middleware:ne,...Xe};if(bt){if(b.has(bt)){if(!Lt)throw new Error(`Duplicate middleware name '${bt}'`);const Ct=C.findIndex(ri=>ri.name===bt),Wt=C[Ct];if(Wt.step!==Nt.step||Wt.priority!==Nt.priority)throw new Error(`"${bt}" middleware with ${Wt.priority} priority in ${Wt.step} step cannot be overridden by same-name middleware with ${Nt.priority} priority in ${Nt.step} step.`);C.splice(Ct,1)}b.add(bt)}C.push(Nt)},addRelativeTo:(ne,Xe)=>{const{name:bt,override:Lt}=Xe,Nt={middleware:ne,...Xe};if(bt){if(b.has(bt)){if(!Lt)throw new Error(`Duplicate middleware name '${bt}'`);const Ct=v.findIndex(ri=>ri.name===bt),Wt=v[Ct];if(Wt.toMiddleware!==Nt.toMiddleware||Wt.relation!==Nt.relation)throw new Error(`"${bt}" middleware ${Wt.relation} "${Wt.toMiddleware}" middleware cannot be overridden by same-name middleware ${Nt.relation} "${Nt.toMiddleware}" middleware.`);v.splice(Ct,1)}b.add(bt)}v.push(Nt)},clone:()=>j(Aa()),use:ne=>{ne.applyToStack(le)},remove:ne=>typeof ne=="string"?F(ne):V(ne),removeByTag:ne=>{let Xe=!1;const bt=s(Lt=>{const{tags:Nt,name:Ct}=Lt;return Nt&&Nt.includes(ne)?(Ct&&b.delete(Ct),Xe=!0,!1):!0},"filterCb");return C=C.filter(bt),v=v.filter(bt),Xe},concat:ne=>{const Xe=j(Aa());return Xe.use(ne),Xe},applyToStack:j,identify:()=>Z(!0).map(ne=>ne.name+": "+(ne.tags||[]).join(",")),resolve:(ne,Xe)=>{for(const bt of Z().map(Lt=>Lt.middleware).reverse())ne=bt(ne,Xe);return ne}};return le},"constructStack"),pd={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},md={high:3,normal:2,low:1};class sl{send(v,b,_){const F=typeof b!="function"?b:void 0,V=typeof b=="function"?b:_,j=v.resolveMiddleware(this.middlewareStack,this.config,F);if(V)j(v).then(ie=>V(null,ie.output),ie=>V(ie)).catch(()=>{});else return j(v).then(ie=>ie.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}constructor(v){this.middlewareStack=Aa(),this.config=v}}s(sl,"Client");class tn{constructor(){this.middlewareStack=Aa()}}s(tn,"Command");const Ut="***SensitiveInformation***",af=s((C,v)=>{for(const b of Object.keys(C)){const _=C[b],F=function(){var j=(0,p.coroutine)(function*(ie,Z,le){const ne=new _(ie);if(typeof Z=="function")this.send(ne,Z);else if(typeof le=="function"){if(typeof Z!="object")throw new Error(`Expected http options but got ${typeof Z}`);this.send(ne,Z||{},le)}else return this.send(ne,Z)});return s(function(Z,le,ne){return j.apply(this,arguments)},"methodImpl")}(),V=(b[0].toLowerCase()+b.slice(1)).replace(/Command$/,"");v.prototype[V]=F}},"createAggregatedClient"),MS=s(C=>{switch(C){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${C}"`)}},"parseBoolean"),gd=s(C=>{if(C!=null){if(typeof C=="number"){if((C===0||C===1)&&Pa.warn(Ma(`Expected boolean, got ${typeof C}: ${C}`)),C===0)return!1;if(C===1)return!0}if(typeof C=="string"){const v=C.toLowerCase();if((v==="false"||v==="true")&&Pa.warn(Ma(`Expected boolean, got ${typeof C}: ${C}`)),v==="false")return!1;if(v==="true")return!0}if(typeof C=="boolean")return C;throw new TypeError(`Expected boolean, got ${typeof C}: ${C}`)}},"expectBoolean"),ni=s(C=>{if(C!=null){if(typeof C=="string"){const v=parseFloat(C);if(!Number.isNaN(v))return String(v)!==String(C)&&Pa.warn(Ma(`Expected number but observed string: ${C}`)),v}if(typeof C=="number")return C;throw new TypeError(`Expected number, got ${typeof C}: ${C}`)}},"expectNumber"),lf=Math.ceil(2**127*(2-2**-23)),al=s(C=>{const v=ni(C);if(v!==void 0&&!Number.isNaN(v)&&v!==1/0&&v!==-1/0&&Math.abs(v)>lf)throw new TypeError(`Expected 32-bit float, got ${C}`);return v},"expectFloat32"),ll=s(C=>{if(C!=null){if(Number.isInteger(C)&&!Number.isNaN(C))return C;throw new TypeError(`Expected integer, got ${typeof C}: ${C}`)}},"expectLong"),PS=null,Sd=s(C=>dl(C,32),"expectInt32"),vd=s(C=>dl(C,16),"expectShort"),yd=s(C=>dl(C,8),"expectByte"),dl=s((C,v)=>{const b=ll(C);if(b!==void 0&&df(b,v)!==b)throw new TypeError(`Expected ${v}-bit integer, got ${C}`);return b},"expectSizedInt"),df=s((C,v)=>{switch(v){case 32:return Int32Array.of(C)[0];case 16:return Int16Array.of(C)[0];case 8:return Int8Array.of(C)[0]}},"castInt"),zt=s((C,v)=>{if(C==null)throw v?new TypeError(`Expected a non-null value for ${v}`):new TypeError("Expected a non-null value");return C},"expectNonNull"),Tn=s(C=>{if(C==null)return;if(typeof C=="object"&&!Array.isArray(C))return C;const v=Array.isArray(C)?"array":typeof C;throw new TypeError(`Expected object, got ${v}: ${C}`)},"expectObject"),vt=s(C=>{if(C!=null){if(typeof C=="string")return C;if(["boolean","number","bigint"].includes(typeof C))return Pa.warn(Ma(`Expected string, got ${typeof C}: ${C}`)),String(C);throw new TypeError(`Expected string, got ${typeof C}: ${C}`)}},"expectString"),RS=s(C=>{if(C==null)return;const v=Tn(C),b=Object.entries(v).filter(_=>{let[,F]=_;return F!=null}).map(_=>{let[F]=_;return F});if(b.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(b.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${b} were not null.`);return v},"expectUnion"),cf=s(C=>ni(typeof C=="string"?uo(C):C),"strictParseDouble"),kS=null,DS=s(C=>al(typeof C=="string"?uo(C):C),"parse_utils_strictParseFloat32"),uf=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,uo=s(C=>{const v=C.match(uf);if(v===null||v[0].length!==C.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(C)},"parseNumber"),LS=s(C=>typeof C=="string"?bd(C):ni(C),"limitedParseDouble"),NS=null,xS=null,BS=s(C=>typeof C=="string"?bd(C):al(C),"limitedParseFloat32"),bd=s(C=>{switch(C){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${C}`)}},"parseFloatString"),FS=s(C=>ll(typeof C=="string"?uo(C):C),"strictParseLong"),VS=null,US=s(C=>Sd(typeof C=="string"?uo(C):C),"strictParseInt32"),HS=s(C=>vd(typeof C=="string"?uo(C):C),"parse_utils_strictParseShort"),zS=s(C=>yd(typeof C=="string"?uo(C):C),"parse_utils_strictParseByte"),Ma=s(C=>String(new TypeError(C).stack||C).split(`
`).slice(0,5).filter(v=>!v.includes("stackTraceWarning")).join(`
`),"stackTraceWarning"),Pa={warn:console.warn},ff=null,cl=null;function WS(C){const v=C.getUTCFullYear(),b=C.getUTCMonth(),_=C.getUTCDay(),F=C.getUTCDate(),V=C.getUTCHours(),j=C.getUTCMinutes(),ie=C.getUTCSeconds(),Z=F<10?`0${F}`:`${F}`,le=V<10?`0${V}`:`${V}`,ne=j<10?`0${j}`:`${j}`,Xe=ie<10?`0${ie}`:`${ie}`;return`${ff[_]}, ${Z} ${cl[b]} ${v} ${le}:${ne}:${Xe} GMT`}s(WS,"dateToUtcString");const hf=null,GS=s(C=>{if(C==null)return;if(typeof C!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const v=hf.exec(C);if(!v)throw new TypeError("Invalid RFC-3339 date-time value");const[b,_,F,V,j,ie,Z,le]=v,ne=strictParseShort(fo(_)),Xe=Yi(F,"month",1,12),bt=Yi(V,"day",1,31);return us(ne,Xe,bt,{hours:j,minutes:ie,seconds:Z,fractionalMilliseconds:le})},"parseRfc3339DateTime"),pf=null,jS=s(C=>{if(C==null)return;if(typeof C!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const v=pf.exec(C);if(!v)throw new TypeError("Invalid RFC-3339 date-time value");const[b,_,F,V,j,ie,Z,le,ne]=v,Xe=strictParseShort(fo(_)),bt=Yi(F,"month",1,12),Lt=Yi(V,"day",1,31),Nt=us(Xe,bt,Lt,{hours:j,minutes:ie,seconds:Z,fractionalMilliseconds:le});return ne.toUpperCase()!="Z"&&Nt.setTime(Nt.getTime()-If(ne)),Nt},"parseRfc3339DateTimeWithOffset"),mf=null,gf=null,Sf=null,$S=s(C=>{if(C==null)return;if(typeof C!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let v=mf.exec(C);if(v){const[b,_,F,V,j,ie,Z,le]=v;return us(strictParseShort(fo(V)),ul(F),Yi(_,"day",1,31),{hours:j,minutes:ie,seconds:Z,fractionalMilliseconds:le})}if(v=gf.exec(C),v){const[b,_,F,V,j,ie,Z,le]=v;return bf(us(vf(V),ul(F),Yi(_,"day",1,31),{hours:j,minutes:ie,seconds:Z,fractionalMilliseconds:le}))}if(v=Sf.exec(C),v){const[b,_,F,V,j,ie,Z,le]=v;return us(strictParseShort(fo(le)),ul(_),Yi(F.trimLeft(),"day",1,31),{hours:V,minutes:j,seconds:ie,fractionalMilliseconds:Z})}throw new TypeError("Invalid RFC-7231 date-time value")},"parseRfc7231DateTime"),yi=s(C=>{if(C==null)return;let v;if(typeof C=="number")v=C;else if(typeof C=="string")v=cf(C);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(v)||v===1/0||v===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(v*1e3))},"parseEpochTimestamp"),us=s((C,v,b,_)=>{const F=v-1;return Cf(C,F,b),new Date(Date.UTC(C,F,b,Yi(_.hours,"hour",0,23),Yi(_.minutes,"minute",0,59),Yi(_.seconds,"seconds",0,60),Tf(_.fractionalMilliseconds)))},"buildDate"),vf=s(C=>{const v=new Date().getUTCFullYear(),b=Math.floor(v/100)*100+strictParseShort(fo(C));return b<v?b+100:b},"parseTwoDigitYear"),yf=null,bf=s(C=>C.getTime()-new Date().getTime()>yf?new Date(Date.UTC(C.getUTCFullYear()-100,C.getUTCMonth(),C.getUTCDate(),C.getUTCHours(),C.getUTCMinutes(),C.getUTCSeconds(),C.getUTCMilliseconds())):C,"adjustRfc850Year"),ul=s(C=>{const v=cl.indexOf(C);if(v<0)throw new TypeError(`Invalid month: ${C}`);return v+1},"parseMonthByShortName"),Ef=null,Cf=s((C,v,b)=>{let _=Ef[v];if(v===1&&_f(C)&&(_=29),b>_)throw new TypeError(`Invalid day for ${cl[v]} in ${C}: ${b}`)},"validateDayOfMonth"),_f=s(C=>C%4===0&&(C%100!==0||C%400===0),"isLeapYear"),Yi=s((C,v,b,_)=>{const F=strictParseByte(fo(C));if(F<b||F>_)throw new TypeError(`${v} must be between ${b} and ${_}, inclusive`);return F},"parseDateValue"),Tf=s(C=>C==null?0:strictParseFloat32("0."+C)*1e3,"parseMilliseconds"),If=s(C=>{const v=C[0];let b=1;if(v=="+")b=1;else if(v=="-")b=-1;else throw new TypeError(`Offset direction, ${v}, must be "+" or "-"`);const _=Number(C.substring(1,3)),F=Number(C.substring(4,6));return b*(_*60+F)*60*1e3},"parseOffsetToMilliseconds"),fo=s(C=>{let v=0;for(;v<C.length-1&&C.charAt(v)==="0";)v++;return v===0?C:C.slice(v)},"stripLeadingZeroes");class Ra extends Error{constructor(v){super(v.message),Object.setPrototypeOf(this,Ra.prototype),this.name=v.name,this.$fault=v.$fault,this.$metadata=v.$metadata}}s(Ra,"ServiceException");const Qi=s(function(C){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Object.entries(v).filter(_=>{let[,F]=_;return F!==void 0}).forEach(_=>{let[F,V]=_;(C[F]==null||C[F]==="")&&(C[F]=V)});const b=C.message||C.Message||"UnknownError";return C.message=b,delete C.Message,C},"decorateServiceException"),wf=s(C=>{let{output:v,parsedBody:b,exceptionCtor:_,errorCode:F}=C;const V=Af(v),j=V.httpStatusCode?V.httpStatusCode+"":void 0,ie=new _({name:(b==null?void 0:b.code)||(b==null?void 0:b.Code)||F||j||"UnknownError",$fault:"client",$metadata:V});throw Qi(ie,b)},"throwDefaultError"),Of=s(C=>v=>{let{output:b,parsedBody:_,errorCode:F}=v;wf({output:b,parsedBody:_,exceptionCtor:C,errorCode:F})},"withBaseException");var fl,hl;const Af=s(C=>({httpStatusCode:C.statusCode,requestId:(hl=(fl=C.headers["x-amzn-requestid"])!==null&&fl!==void 0?fl:C.headers["x-amzn-request-id"])!==null&&hl!==void 0?hl:C.headers["x-amz-request-id"],extendedRequestId:C.headers["x-amz-id-2"],cfId:C.headers["x-amz-cf-id"]}),"deserializeMetadata"),Mf=s(C=>{switch(C){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode"),pl=s(function(){const C=Object.getPrototypeOf(this).constructor,v=Function.bind.apply(String,[null,...arguments]),b=new v;return Object.setPrototypeOf(b,C.prototype),b},"StringWrapper");pl.prototype=Object.create(String.prototype,{constructor:{value:pl,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(pl,String);class fs extends null{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(v){return v instanceof fs?v:v instanceof String||typeof v=="string"?new fs(v):new fs(JSON.stringify(v))}}s(fs,"LazyJsonString");function tt(C,v,b){let _,F,V;if(typeof v>"u"&&typeof b>"u")_={},V=C;else{if(_=C,typeof v=="function")return F=v,V=b,Pf(_,F,V);V=v}for(const j of Object.keys(V)){if(!Array.isArray(V[j])){_[j]=V[j];continue}Ed(_,null,V,j)}return _}s(tt,"map");const KS=s(C=>{const v={};for(const[b,_]of Object.entries(C||{}))v[b]=[,_];return v},"convertMap"),It=s((C,v)=>{const b={};for(const _ in v)Ed(b,C,v,_);return b},"take"),Pf=s((C,v,b)=>tt(C,Object.entries(b).reduce((_,F)=>{let[V,j]=F;return Array.isArray(j)?_[V]=j:typeof j=="function"?_[V]=[v,j()]:_[V]=[v,j],_},{})),"mapWithFilter"),Ed=s((C,v,b,_)=>{if(v!==null){let j=b[_];typeof j=="function"&&(j=[,j]);const[ie=Rf,Z=kf,le=_]=j;(typeof ie=="function"&&ie(v[le])||typeof ie!="function"&&ie)&&(C[_]=Z(v[le]));return}let[F,V]=b[_];if(typeof V=="function"){let j;const ie=F===void 0&&(j=V())!=null,Z=typeof F=="function"&&!!F(void 0)||typeof F!="function"&&!!F;ie?C[_]=j:Z&&(C[_]=V())}else{const j=F===void 0&&V!=null,ie=typeof F=="function"&&!!F(V)||typeof F!="function"&&!!F;(j||ie)&&(C[_]=V)}},"applyInstruction"),Rf=s(C=>C!=null,"nonNullish"),kf=s(C=>C,"pass");function Cd(C){return encodeURIComponent(C).replace(/[!'()*]/g,function(v){return"%"+v.charCodeAt(0).toString(16).toUpperCase()})}s(Cd,"extendedEncodeURIComponent");const nn=s((C,v,b,_,F,V)=>{if(v!=null&&v[b]!==void 0){const j=_();if(j.length<=0)throw new Error("Empty value provided for input HTTP label: "+b+".");C=C.replace(F,V?j.split("/").map(ie=>Cd(ie)).join("/"):Cd(j))}else throw new Error("No value provided for input HTTP label: "+b+".");return C},"resolve_path_resolvedPath"),Qt=s(C=>{if(C==null)return{};if(Array.isArray(C))return C.filter(v=>v!=null);if(typeof C=="object"){const v={};for(const b of Object.keys(C))C[b]!=null&&(v[b]=Qt(C[b]));return v}return C},"_json"),Df=s(C=>{var v,b;return{...C,useDualstackEndpoint:(v=C.useDualstackEndpoint)!==null&&v!==void 0?v:!1,useFipsEndpoint:(b=C.useFipsEndpoint)!==null&&b!==void 0?b:!1,defaultSigningName:"chime"}},"resolveClientEndpointParameters");var Lf=f(555633),Nf=f.n(Lf),xf=f(236634);function Bf(C){const v=[];for(let b of Object.keys(C).sort()){const _=C[b];if(b=zi(b),Array.isArray(_))for(let F=0,V=_.length;F<V;F++)v.push(`${b}=${zi(_[F])}`);else{let F=b;(_||typeof _=="string")&&(F+=`=${zi(_)}`),v.push(F)}}return v.join("&")}s(Bf,"buildQueryString");function Ff(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise((v,b)=>{C&&setTimeout(()=>{const _=new Error(`Request did not complete within ${C} ms`);_.name="TimeoutError",b(_)},C)})}s(Ff,"requestTimeout");class _d{destroy(){}handle(v){let{abortSignal:b}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var _=this;return(0,p.coroutine)(function*(){_.config||(_.config=yield _.configProvider);const F=_.config.requestTimeout;if(b!=null&&b.aborted){const Lt=new Error("Request aborted");return Lt.name="AbortError",Promise.reject(Lt)}let V=v.path;if(v.query){const Lt=Bf(v.query);Lt&&(V+=`?${Lt}`)}const{port:j,method:ie}=v,Z=`${v.protocol}//${v.hostname}${j?`:${j}`:""}${V}`,ne={body:ie==="GET"||ie==="HEAD"?void 0:v.body,headers:new Headers(v.headers),method:ie};typeof AbortController<"u"&&(ne.signal=b);const Xe=new Request(Z,ne),bt=[fetch(Xe).then(Lt=>{const Nt=Lt.headers,Ct={};for(const ri of Nt.entries())Ct[ri[0]]=ri[1];return Lt.body!=null?{response:new D({headers:Ct,statusCode:Lt.status,body:Lt.body})}:Lt.blob().then(ri=>({response:new D({headers:Ct,statusCode:Lt.status,body:ri})}))}),Ff(F)];return b&&bt.push(new Promise((Lt,Nt)=>{b.onabort=()=>{const Ct=new Error("Request aborted");Ct.name="AbortError",Nt(Ct)}})),Promise.race(bt)})()}constructor(v){typeof v=="function"?this.configProvider=v().then(b=>b||{}):(this.config=v??{},this.configProvider=Promise.resolve(this.config))}}s(_d,"FetchHttpHandler");const mr={},ho=new Array(64);for(let C=0,v="A".charCodeAt(0),b="Z".charCodeAt(0);C+v<=b;C++){const _=String.fromCharCode(C+v);mr[_]=C,ho[C]=_}for(let C=0,v="a".charCodeAt(0),b="z".charCodeAt(0);C+v<=b;C++){const _=String.fromCharCode(C+v),F=C+26;mr[_]=F,ho[F]=_}for(let C=0;C<10;C++){mr[C.toString(10)]=C+52;const v=C.toString(10),b=C+52;mr[v]=b,ho[b]=v}mr["+"]=62,ho[62]="+",mr["/"]=63,ho[63]="/";const po=6,hs=8,Vf=63,Td=s(C=>{let v=C.length/4*3;C.slice(-2)==="=="?v-=2:C.slice(-1)==="="&&v--;const b=new ArrayBuffer(v),_=new DataView(b);for(let F=0;F<C.length;F+=4){let V=0,j=0;for(let le=F,ne=F+3;le<=ne;le++)if(C[le]!=="="){if(!(C[le]in mr))throw new TypeError(`Invalid character ${C[le]} in base64 string.`);V|=mr[C[le]]<<(ne-le)*po,j+=po}else V>>=po;const ie=F/4*3;V>>=j%hs;const Z=Math.floor(j/hs);for(let le=0;le<Z;le++){const ne=(Z-le-1)*hs;_.setUint8(ie+le,(V&255<<ne)>>ne)}}return new Uint8Array(b)},"fromBase64");function Uf(C){let v="";for(let b=0;b<C.length;b+=3){let _=0,F=0;for(let j=b,ie=Math.min(b+3,C.length);j<ie;j++)_|=C[j]<<(ie-j-1)*hs,F+=hs;const V=Math.ceil(F/po);_<<=V*po-F;for(let j=1;j<=V;j++){const ie=(V-j)*po;v+=ho[(_&Vf<<ie)>>ie]}v+="==".slice(0,4-V)}return v}s(Uf,"toBase64");const Hf=s(C=>typeof Blob=="function"&&C instanceof Blob?zf(C):Wf(C),"streamCollector");function zf(C){return ml.apply(this,arguments)}s(zf,"collectBlob");function ml(){return ml=(0,p.coroutine)(function*(C){const v=yield Gf(C),b=Td(v);return new Uint8Array(b)}),ml.apply(this,arguments)}s(ml,"_collectBlob");function Wf(C){return gl.apply(this,arguments)}s(Wf,"collectStream");function gl(){return gl=(0,p.coroutine)(function*(C){let v=new Uint8Array(0);const b=C.getReader();let _=!1;for(;!_;){const{done:F,value:V}=yield b.read();if(V){const j=v;v=new Uint8Array(j.length+V.length),v.set(j),v.set(V,j.length)}_=F}return v}),gl.apply(this,arguments)}s(gl,"_collectStream");function Gf(C){return new Promise((v,b)=>{const _=new FileReader;_.onloadend=()=>{if(_.readyState!==2)return b(new Error("Reader aborted too early"));var F;const V=(F=_.result)!==null&&F!==void 0?F:"",j=V.indexOf(","),ie=j>-1?j+1:V.length;v(V.substring(ie))},_.onabort=()=>b(new Error("Read aborted")),_.onerror=()=>b(_.error),_.readAsDataURL(C)})}s(Gf,"readToBase64");const jf=s(C=>()=>Promise.reject(C),"invalidProvider"),$f=s(C=>{if(typeof C=="string"){let v=C.length;for(let b=v-1;b>=0;b--){const _=C.charCodeAt(b);_>127&&_<=2047?v++:_>2047&&_<=65535&&(v+=2),_>=56320&&_<=57343&&b--}return v}else{if(typeof C.byteLength=="number")return C.byteLength;if(typeof C.size=="number")return C.size}throw new Error(`Body Length computation failed for ${C}`)},"calculateBodyLength");var Kf=f(146880),Id=f.n(Kf);const Jf=s(C=>{let{serviceId:v,clientVersion:b}=C;return(0,p.coroutine)(function*(){var _,F,V,j,ie;const Z=typeof window<"u"&&(!(window==null||(_=window.navigator)===null||_===void 0)&&_.userAgent)?Id().parse(window.navigator.userAgent):void 0;var le,ne;const Xe=[["aws-sdk-js",b],[`os/${(Z==null||(F=Z.os)===null||F===void 0?void 0:F.name)||"other"}`,Z==null||(V=Z.os)===null||V===void 0?void 0:V.version],["lang/js"],["md/browser",`${(le=Z==null||(j=Z.browser)===null||j===void 0?void 0:j.name)!==null&&le!==void 0?le:"unknown"}_${(ne=Z==null||(ie=Z.browser)===null||ie===void 0?void 0:ie.version)!==null&&ne!==void 0?ne:"unknown"}`]];return v&&Xe.push([`api/${v}`,b]),Xe})},"defaultUserAgent"),Yf=s(C=>new TextDecoder("utf-8").decode(C),"toUtf8"),wd="required",rr="fn",or="argv",mo="ref",Od="isSet",wi="tree",go="error",ps="endpoint",Sl="PartitionResult",Ad={[wd]:!1,type:"String"},Md={[wd]:!0,default:!1,type:"Boolean"},Pd={[mo]:"Endpoint"},Rd={[rr]:"booleanEquals",[or]:[{[mo]:"UseFIPS"},!0]},kd={[rr]:"booleanEquals",[or]:[{[mo]:"UseDualStack"},!0]},Xi={},Dd={[rr]:"booleanEquals",[or]:[!0,{[rr]:"getAttr",[or]:[{[mo]:Sl},"supportsFIPS"]}]},Ld={[rr]:"booleanEquals",[or]:[!0,{[rr]:"getAttr",[or]:[{[mo]:Sl},"supportsDualStack"]}]},Nd=[Rd],xd=[kd],Bd=[{[mo]:"Region"}],Qf={version:"1.0",parameters:{Region:Ad,UseDualStack:Md,UseFIPS:Md,Endpoint:Ad},rules:[{conditions:[{[rr]:Od,[or]:[Pd]}],type:wi,rules:[{conditions:Nd,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:go},{type:wi,rules:[{conditions:xd,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:go},{endpoint:{url:Pd,properties:Xi,headers:Xi},type:ps}]}]},{type:wi,rules:[{conditions:[{[rr]:Od,[or]:Bd}],type:wi,rules:[{conditions:[{[rr]:"aws.partition",[or]:Bd,assign:Sl}],type:wi,rules:[{conditions:[Rd,kd],type:wi,rules:[{conditions:[Dd,Ld],type:wi,rules:[{type:wi,rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Xi,headers:Xi},type:ps}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:go}]},{conditions:Nd,type:wi,rules:[{conditions:[Dd],type:wi,rules:[{type:wi,rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Xi,headers:Xi},type:ps}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:go}]},{conditions:xd,type:wi,rules:[{conditions:[Ld],type:wi,rules:[{type:wi,rules:[{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Xi,headers:Xi},type:ps}]}]},{error:"DualStack is enabled but this partition does not support DualStack",type:go}]},{type:wi,rules:[{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dnsSuffix}",properties:Xi,headers:Xi},type:ps}]}]}]},{error:"Invalid Configuration: Missing Region",type:go}]}]},Xf=s(function(C){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return tf(Qf,{endpointParams:C,logger:v.logger})},"defaultEndpointResolver");var vl,yl,bl,El,Cl,_l,Tl,Il,wl;const Zf=s(C=>({apiVersion:"2021-05-15",base64Decoder:(vl=C==null?void 0:C.base64Decoder)!==null&&vl!==void 0?vl:Td,base64Encoder:(yl=C==null?void 0:C.base64Encoder)!==null&&yl!==void 0?yl:Uf,disableHostPrefix:(bl=C==null?void 0:C.disableHostPrefix)!==null&&bl!==void 0?bl:!1,endpointProvider:(El=C==null?void 0:C.endpointProvider)!==null&&El!==void 0?El:Xf,logger:(Cl=C==null?void 0:C.logger)!==null&&Cl!==void 0?Cl:new hd,serviceId:(_l=C==null?void 0:C.serviceId)!==null&&_l!==void 0?_l:"Chime SDK Messaging",urlParser:(Tl=C==null?void 0:C.urlParser)!==null&&Tl!==void 0?Tl:on,utf8Decoder:(Il=C==null?void 0:C.utf8Decoder)!==null&&Il!==void 0?Il:vi,utf8Encoder:(wl=C==null?void 0:C.utf8Encoder)!==null&&wl!==void 0?wl:Yf}),"getRuntimeConfig"),qf=["in-region","cross-region","mobile","standard","legacy"],eh=s(function(){let{defaultsMode:C}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return kn((0,p.coroutine)(function*(){const v=typeof C=="function"?yield C():C;switch(v==null?void 0:v.toLowerCase()){case"auto":return Promise.resolve(th()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(v==null?void 0:v.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${qf.join(", ")}, got ${v}`)}}))},"resolveDefaultsModeConfig"),th=s(()=>{var C,v;const b=typeof window<"u"&&(!(window==null||(C=window.navigator)===null||C===void 0)&&C.userAgent)?Id().parse(window.navigator.userAgent):void 0,_=b==null||(v=b.platform)===null||v===void 0?void 0:v.type;return _==="tablet"||_==="mobile"},"isMobileBrowser"),nh=s(C=>{const v=eh(C),b=s(()=>v().then(Mf),"defaultConfigProvider"),_=Zf(C);var F,V,j,ie,Z,le,ne,Xe,bt,Lt,Nt;return{..._,...C,runtime:"browser",defaultsMode:v,bodyLengthChecker:(F=C==null?void 0:C.bodyLengthChecker)!==null&&F!==void 0?F:$f,credentialDefaultProvider:(V=C==null?void 0:C.credentialDefaultProvider)!==null&&V!==void 0?V:Ct=>()=>Promise.reject(new Error("Credential is missing")),defaultUserAgentProvider:(j=C==null?void 0:C.defaultUserAgentProvider)!==null&&j!==void 0?j:Jf({serviceId:_.serviceId,clientVersion:Nf().version}),maxAttempts:(ie=C==null?void 0:C.maxAttempts)!==null&&ie!==void 0?ie:Fe,region:(Z=C==null?void 0:C.region)!==null&&Z!==void 0?Z:jf("Region is missing"),requestHandler:(le=C==null?void 0:C.requestHandler)!==null&&le!==void 0?le:new _d(b),retryMode:(ne=C==null?void 0:C.retryMode)!==null&&ne!==void 0?ne:(0,p.coroutine)(function*(){return(yield b()).retryMode||oe}),sha256:(Xe=C==null?void 0:C.sha256)!==null&&Xe!==void 0?Xe:xf.Sha256,streamCollector:(bt=C==null?void 0:C.streamCollector)!==null&&bt!==void 0?bt:Hf,useDualstackEndpoint:(Lt=C==null?void 0:C.useDualstackEndpoint)!==null&&Lt!==void 0?Lt:()=>Promise.resolve(n),useFipsEndpoint:(Nt=C==null?void 0:C.useFipsEndpoint)!==null&&Nt!==void 0?Nt:()=>Promise.resolve(o)}},"runtimeConfig_browser_getRuntimeConfig");class Mi extends sl{destroy(){super.destroy()}constructor(v){const b=nh(v),_=Df(b),F=k(_),V=Yt(F),j=Dt(V),ie=j,Z=ts(ie),le=ss(Z);super(le),this.config=le,this.middlewareStack.use(xi(this.config)),this.middlewareStack.use(q(this.config)),this.middlewareStack.use(pt(this.config)),this.middlewareStack.use(xt(this.config)),this.middlewareStack.use(Ne(this.config)),this.middlewareStack.use(os(this.config)),this.middlewareStack.use(sf(this.config))}}s(Mi,"ChimeSDKMessagingClient");var Fd;(function(C){C[C.HEADER=0]="HEADER",C[C.TRAILER=1]="TRAILER"})(Fd||(Fd={}));class ih{constructor({name:v,kind:b=FieldPosition.HEADER,values:_=[]}){this.name=v,this.kind=b,this.values=_}add(v){this.values.push(v)}set(v){this.values=v}remove(v){this.values=this.values.filter(b=>b!==v)}toString(){return this.values.map(v=>v.includes(",")||v.includes(" ")?`"${v}"`:v).join(", ")}get(){return this.values}}s(ih,"Field_Field");class qt{constructor(v){this.method=v.method||"GET",this.hostname=v.hostname||"localhost",this.port=v.port,this.query=v.query||{},this.headers=v.headers||{},this.body=v.body,this.protocol=v.protocol?v.protocol.slice(-1)!==":"?`${v.protocol}:`:v.protocol:"https:",this.path=v.path?v.path.charAt(0)!=="/"?`/${v.path}`:v.path:"/"}static isInstance(v){if(!v)return!1;const b=v;return"method"in b&&"protocol"in b&&"hostname"in b&&"path"in b&&typeof b.query=="object"&&typeof b.headers=="object"}clone(){const v=new qt({...this,headers:{...this.headers}});return v.query&&(v.query=rh(v.query)),v}}s(qt,"dist_es_httpRequest_HttpRequest");function rh(C){return Object.keys(C).reduce((v,b)=>{const _=C[b];return{...v,[b]:Array.isArray(_)?[..._]:_}},{})}s(rh,"httpRequest_cloneQuery");class Pi extends Ra{constructor(v){super(v),Object.setPrototypeOf(this,Pi.prototype)}}s(Pi,"ChimeSDKMessagingServiceException");const oh={ALL:"ALL",FILTERED:"FILTERED",NONE:"NONE"},sh={DEFAULT:"DEFAULT",HIDDEN:"HIDDEN"},ah={AccessDenied:"AccessDenied",BadRequest:"BadRequest",Conflict:"Conflict",Forbidden:"Forbidden",NotFound:"NotFound",PhoneNumberAssociationsExist:"PhoneNumberAssociationsExist",PreconditionFailed:"PreconditionFailed",ResourceLimitExceeded:"ResourceLimitExceeded",ServiceFailure:"ServiceFailure",ServiceUnavailable:"ServiceUnavailable",Throttled:"Throttled",Throttling:"Throttling",Unauthorized:"Unauthorized",Unprocessable:"Unprocessable",VoiceConnectorGroupAssociationsExist:"VoiceConnectorGroupAssociationsExist"};class ms extends Pi{constructor(v){super({name:"BadRequestException",$fault:"client",...v}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,ms.prototype),this.Code=v.Code,this.Message=v.Message}}s(ms,"BadRequestException");class gs extends Pi{constructor(v){super({name:"ConflictException",$fault:"client",...v}),this.name="ConflictException",this.$fault="client",Object.setPrototypeOf(this,gs.prototype),this.Code=v.Code,this.Message=v.Message}}s(gs,"ConflictException");class Ss extends Pi{constructor(v){super({name:"ForbiddenException",$fault:"client",...v}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,Ss.prototype),this.Code=v.Code,this.Message=v.Message}}s(Ss,"ForbiddenException");class vs extends Pi{constructor(v){super({name:"NotFoundException",$fault:"client",...v}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,vs.prototype),this.Code=v.Code,this.Message=v.Message}}s(vs,"NotFoundException");class ys extends Pi{constructor(v){super({name:"ServiceFailureException",$fault:"server",...v}),this.name="ServiceFailureException",this.$fault="server",Object.setPrototypeOf(this,ys.prototype),this.Code=v.Code,this.Message=v.Message}}s(ys,"ServiceFailureException");class bs extends Pi{constructor(v){super({name:"ServiceUnavailableException",$fault:"server",...v}),this.name="ServiceUnavailableException",this.$fault="server",Object.setPrototypeOf(this,bs.prototype),this.Code=v.Code,this.Message=v.Message}}s(bs,"ServiceUnavailableException");class Es extends Pi{constructor(v){super({name:"ThrottledClientException",$fault:"client",...v}),this.name="ThrottledClientException",this.$fault="client",Object.setPrototypeOf(this,Es.prototype),this.Code=v.Code,this.Message=v.Message}}s(Es,"ThrottledClientException");class Cs extends Pi{constructor(v){super({name:"UnauthorizedClientException",$fault:"client",...v}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Cs.prototype),this.Code=v.Code,this.Message=v.Message}}s(Cs,"UnauthorizedClientException");class _s extends Pi{constructor(v){super({name:"ResourceLimitExceededException",$fault:"client",...v}),this.name="ResourceLimitExceededException",this.$fault="client",Object.setPrototypeOf(this,_s.prototype),this.Code=v.Code,this.Message=v.Message}}s(_s,"ResourceLimitExceededException");const lh={CREATED_TIMESTAMP:"CREATED_TIMESTAMP",LAST_MESSAGE_TIMESTAMP:"LAST_MESSAGE_TIMESTAMP"},dh={RESTRICTED:"RESTRICTED",UNRESTRICTED:"UNRESTRICTED"},ch={PRIVATE:"PRIVATE",PUBLIC:"PUBLIC"},uh={ASYNC:"ASYNC"},fh={ABORT:"ABORT",CONTINUE:"CONTINUE"},hh={DEFAULT:"DEFAULT",VOIP:"VOIP"},ph={NON_PERSISTENT:"NON_PERSISTENT",PERSISTENT:"PERSISTENT"},mh={DENIED:"DENIED",FAILED:"FAILED",PENDING:"PENDING",SENT:"SENT"},gh={CONTROL:"CONTROL",STANDARD:"STANDARD"},Sh={Channel:"Channel",ChannelMessage:"ChannelMessage"},vh={ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"},yh={MEMBERS:"MEMBERS"},bh={EQUALS:"EQUALS",INCLUDES:"INCLUDES"},oi=s(C=>({...C,...C.Name&&{Name:Ut}}),"IdentityFilterSensitiveLog"),Vd=s(C=>({...C,...C.InvitedBy&&{InvitedBy:oi(C.InvitedBy)},...C.Members&&{Members:C.Members.map(v=>oi(v))}}),"BatchChannelMembershipsFilterSensitiveLog"),Ud=s(C=>({...C,...C.BatchChannelMemberships&&{BatchChannelMemberships:Vd(C.BatchChannelMemberships)}}),"BatchCreateChannelMembershipResponseFilterSensitiveLog"),Hd=s(C=>({...C,...C.Name&&{Name:Ut},...C.Metadata&&{Metadata:Ut},...C.CreatedBy&&{CreatedBy:oi(C.CreatedBy)}}),"ChannelFilterSensitiveLog"),zd=s(C=>({...C,...C.Name&&{Name:Ut},...C.Metadata&&{Metadata:Ut}}),"ChannelAssociatedWithFlowSummaryFilterSensitiveLog"),Wd=s(C=>({...C,...C.Member&&{Member:oi(C.Member)},...C.CreatedBy&&{CreatedBy:oi(C.CreatedBy)}}),"ChannelBanFilterSensitiveLog"),Gd=s(C=>({...C,...C.Member&&{Member:oi(C.Member)}}),"ChannelBanSummaryFilterSensitiveLog"),Ts=s(C=>({...C,...C.Name&&{Name:Ut}}),"ProcessorFilterSensitiveLog"),jd=s(C=>({...C,...C.Processors&&{Processors:C.Processors.map(v=>Ts(v))},...C.Name&&{Name:Ut}}),"ChannelFlowFilterSensitiveLog"),Is=s(C=>({...C,...C.StringValues&&{StringValues:Ut}}),"MessageAttributeValueFilterSensitiveLog"),Ol=s(C=>({...C,...C.Title&&{Title:Ut},...C.Body&&{Body:Ut}}),"PushNotificationConfigurationFilterSensitiveLog"),$d=s(C=>({...C,...C.Content&&{Content:Ut},...C.Metadata&&{Metadata:Ut},...C.PushNotification&&{PushNotification:Ol(C.PushNotification)},...C.MessageAttributes&&{MessageAttributes:Object.entries(C.MessageAttributes).reduce((v,b)=>{let[_,F]=b;return v[_]=Is(F),v},{})},...C.ContentType&&{ContentType:Ut}}),"ChannelMessageCallbackFilterSensitiveLog"),Kd=s(C=>({...C,...C.ChannelMessage&&{ChannelMessage:$d(C.ChannelMessage)}}),"ChannelFlowCallbackRequestFilterSensitiveLog"),Jd=s(C=>({...C,...C.Name&&{Name:Ut},...C.Processors&&{Processors:C.Processors.map(v=>Ts(v))}}),"ChannelFlowSummaryFilterSensitiveLog"),Yd=s(C=>({...C,...C.InvitedBy&&{InvitedBy:oi(C.InvitedBy)},...C.Member&&{Member:oi(C.Member)}}),"ChannelMembershipFilterSensitiveLog"),ws=s(C=>({...C,...C.Name&&{Name:Ut},...C.Metadata&&{Metadata:Ut}}),"ChannelSummaryFilterSensitiveLog"),Al=s(C=>({...C,...C.ChannelSummary&&{ChannelSummary:ws(C.ChannelSummary)}}),"ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog"),Qd=s(C=>({...C,...C.FilterRule&&{FilterRule:Ut}}),"PushNotificationPreferencesFilterSensitiveLog"),ka=s(C=>({...C,...C.PushNotifications&&{PushNotifications:Qd(C.PushNotifications)}}),"ChannelMembershipPreferencesFilterSensitiveLog"),Xd=s(C=>({...C,...C.Member&&{Member:oi(C.Member)}}),"ChannelMembershipSummaryFilterSensitiveLog"),Zd=s(C=>({...C,...C.Content&&{Content:Ut},...C.Metadata&&{Metadata:Ut},...C.Sender&&{Sender:oi(C.Sender)},...C.MessageAttributes&&{MessageAttributes:Object.entries(C.MessageAttributes).reduce((v,b)=>{let[_,F]=b;return v[_]=Is(F),v},{})},...C.ContentType&&{ContentType:Ut}}),"ChannelMessageFilterSensitiveLog"),qd=s(C=>({...C,...C.Content&&{Content:Ut},...C.Metadata&&{Metadata:Ut},...C.Sender&&{Sender:oi(C.Sender)},...C.MessageAttributes&&{MessageAttributes:Object.entries(C.MessageAttributes).reduce((v,b)=>{let[_,F]=b;return v[_]=Is(F),v},{})},...C.ContentType&&{ContentType:Ut}}),"ChannelMessageSummaryFilterSensitiveLog"),Ml=s(C=>({...C,...C.ChannelSummary&&{ChannelSummary:ws(C.ChannelSummary)}}),"ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog"),ec=s(C=>({...C,...C.Moderator&&{Moderator:oi(C.Moderator)},...C.CreatedBy&&{CreatedBy:oi(C.CreatedBy)}}),"ChannelModeratorFilterSensitiveLog"),tc=s(C=>({...C,...C.Moderator&&{Moderator:oi(C.Moderator)}}),"ChannelModeratorSummaryFilterSensitiveLog"),Os=s(C=>({...C,...C.Key&&{Key:Ut},...C.Value&&{Value:Ut}}),"TagFilterSensitiveLog"),nc=s(C=>({...C,...C.Name&&{Name:Ut},...C.Metadata&&{Metadata:Ut},...C.ClientRequestToken&&{ClientRequestToken:Ut},...C.Tags&&{Tags:C.Tags.map(v=>Os(v))},...C.ChannelId&&{ChannelId:Ut}}),"CreateChannelRequestFilterSensitiveLog"),ic=s(C=>({...C,...C.Member&&{Member:oi(C.Member)}}),"CreateChannelBanResponseFilterSensitiveLog"),rc=s(C=>({...C,...C.Processors&&{Processors:C.Processors.map(v=>Ts(v))},...C.Name&&{Name:Ut},...C.Tags&&{Tags:C.Tags.map(v=>Os(v))},...C.ClientRequestToken&&{ClientRequestToken:Ut}}),"CreateChannelFlowRequestFilterSensitiveLog"),oc=s(C=>({...C,...C.Member&&{Member:oi(C.Member)}}),"CreateChannelMembershipResponseFilterSensitiveLog"),sc=s(C=>({...C,...C.ChannelModerator&&{ChannelModerator:oi(C.ChannelModerator)}}),"CreateChannelModeratorResponseFilterSensitiveLog"),ac=s(C=>({...C,...C.Channel&&{Channel:Hd(C.Channel)}}),"DescribeChannelResponseFilterSensitiveLog"),lc=s(C=>({...C,...C.ChannelBan&&{ChannelBan:Wd(C.ChannelBan)}}),"DescribeChannelBanResponseFilterSensitiveLog"),dc=s(C=>({...C,...C.ChannelFlow&&{ChannelFlow:jd(C.ChannelFlow)}}),"DescribeChannelFlowResponseFilterSensitiveLog"),cc=s(C=>({...C,...C.ChannelMembership&&{ChannelMembership:Yd(C.ChannelMembership)}}),"DescribeChannelMembershipResponseFilterSensitiveLog"),uc=s(C=>({...C,...C.ChannelMembership&&{ChannelMembership:Al(C.ChannelMembership)}}),"DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog"),fc=s(C=>({...C,...C.Channel&&{Channel:Ml(C.Channel)}}),"DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog"),hc=s(C=>({...C,...C.ChannelModerator&&{ChannelModerator:ec(C.ChannelModerator)}}),"DescribeChannelModeratorResponseFilterSensitiveLog"),pc=s(C=>({...C,...C.Member&&{Member:oi(C.Member)},...C.Preferences&&{Preferences:ka(C.Preferences)}}),"GetChannelMembershipPreferencesResponseFilterSensitiveLog"),mc=s(C=>({...C,...C.ChannelMessage&&{ChannelMessage:Zd(C.ChannelMessage)}}),"GetChannelMessageResponseFilterSensitiveLog"),gc=s(C=>({...C,...C.NextToken&&{NextToken:Ut}}),"ListChannelBansRequestFilterSensitiveLog"),Sc=s(C=>({...C,...C.NextToken&&{NextToken:Ut},...C.ChannelBans&&{ChannelBans:C.ChannelBans.map(v=>Gd(v))}}),"ListChannelBansResponseFilterSensitiveLog"),vc=s(C=>({...C,...C.NextToken&&{NextToken:Ut}}),"ListChannelFlowsRequestFilterSensitiveLog"),yc=s(C=>({...C,...C.ChannelFlows&&{ChannelFlows:C.ChannelFlows.map(v=>Jd(v))},...C.NextToken&&{NextToken:Ut}}),"ListChannelFlowsResponseFilterSensitiveLog"),bc=s(C=>({...C,...C.NextToken&&{NextToken:Ut}}),"ListChannelMembershipsRequestFilterSensitiveLog"),Ec=s(C=>({...C,...C.ChannelMemberships&&{ChannelMemberships:C.ChannelMemberships.map(v=>Xd(v))},...C.NextToken&&{NextToken:Ut}}),"ListChannelMembershipsResponseFilterSensitiveLog"),Cc=s(C=>({...C,...C.NextToken&&{NextToken:Ut}}),"ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog"),_c=s(C=>({...C,...C.ChannelMemberships&&{ChannelMemberships:C.ChannelMemberships.map(v=>Al(v))},...C.NextToken&&{NextToken:Ut}}),"ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog"),Tc=s(C=>({...C,...C.NextToken&&{NextToken:Ut}}),"ListChannelMessagesRequestFilterSensitiveLog"),Ic=s(C=>({...C,...C.NextToken&&{NextToken:Ut},...C.ChannelMessages&&{ChannelMessages:C.ChannelMessages.map(v=>qd(v))}}),"ListChannelMessagesResponseFilterSensitiveLog"),wc=s(C=>({...C,...C.NextToken&&{NextToken:Ut}}),"ListChannelModeratorsRequestFilterSensitiveLog"),Oc=s(C=>({...C,...C.NextToken&&{NextToken:Ut},...C.ChannelModerators&&{ChannelModerators:C.ChannelModerators.map(v=>tc(v))}}),"ListChannelModeratorsResponseFilterSensitiveLog"),Ac=s(C=>({...C,...C.NextToken&&{NextToken:Ut}}),"ListChannelsRequestFilterSensitiveLog"),Mc=s(C=>({...C,...C.Channels&&{Channels:C.Channels.map(v=>ws(v))},...C.NextToken&&{NextToken:Ut}}),"ListChannelsResponseFilterSensitiveLog"),Pc=s(C=>({...C,...C.NextToken&&{NextToken:Ut}}),"ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog"),Rc=s(C=>({...C,...C.Channels&&{Channels:C.Channels.map(v=>zd(v))},...C.NextToken&&{NextToken:Ut}}),"ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog"),kc=s(C=>({...C,...C.NextToken&&{NextToken:Ut}}),"ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog"),Dc=s(C=>({...C,...C.Channels&&{Channels:C.Channels.map(v=>Ml(v))},...C.NextToken&&{NextToken:Ut}}),"ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog"),Lc=s(C=>({...C,...C.NextToken&&{NextToken:Ut}}),"ListSubChannelsRequestFilterSensitiveLog"),Nc=s(C=>({...C,...C.NextToken&&{NextToken:Ut}}),"ListSubChannelsResponseFilterSensitiveLog"),xc=s(C=>({...C,...C.Tags&&{Tags:C.Tags.map(v=>Os(v))}}),"ListTagsForResourceResponseFilterSensitiveLog"),Bc=s(C=>({...C,...C.Preferences&&{Preferences:ka(C.Preferences)}}),"PutChannelMembershipPreferencesRequestFilterSensitiveLog"),Fc=s(C=>({...C,...C.Member&&{Member:oi(C.Member)},...C.Preferences&&{Preferences:ka(C.Preferences)}}),"PutChannelMembershipPreferencesResponseFilterSensitiveLog"),Vc=s(C=>({...C,...C.NextToken&&{NextToken:Ut}}),"SearchChannelsRequestFilterSensitiveLog"),Uc=s(C=>({...C,...C.Channels&&{Channels:C.Channels.map(v=>ws(v))},...C.NextToken&&{NextToken:Ut}}),"SearchChannelsResponseFilterSensitiveLog"),Hc=s(C=>({...C,...C.Content&&{Content:Ut},...C.Metadata&&{Metadata:Ut},...C.ClientRequestToken&&{ClientRequestToken:Ut},...C.PushNotification&&{PushNotification:Ol(C.PushNotification)},...C.MessageAttributes&&{MessageAttributes:Object.entries(C.MessageAttributes).reduce((v,b)=>{let[_,F]=b;return v[_]=Is(F),v},{})},...C.ContentType&&{ContentType:Ut}}),"SendChannelMessageRequestFilterSensitiveLog"),zc=s(C=>({...C,...C.Tags&&{Tags:C.Tags.map(v=>Os(v))}}),"TagResourceRequestFilterSensitiveLog"),Wc=s(C=>({...C,...C.TagKeys&&{TagKeys:Ut}}),"UntagResourceRequestFilterSensitiveLog"),Gc=s(C=>({...C,...C.Name&&{Name:Ut},...C.Metadata&&{Metadata:Ut}}),"UpdateChannelRequestFilterSensitiveLog"),jc=s(C=>({...C,...C.Processors&&{Processors:C.Processors.map(v=>Ts(v))},...C.Name&&{Name:Ut}}),"UpdateChannelFlowRequestFilterSensitiveLog"),$c=s(C=>({...C,...C.Content&&{Content:Ut},...C.Metadata&&{Metadata:Ut},...C.ContentType&&{ContentType:Ut}}),"UpdateChannelMessageRequestFilterSensitiveLog"),Eh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/channel-flow`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let le;return le=JSON.stringify(It(v,{ChannelFlowArn:[]})),new qt({protocol:F,hostname:_,port:V,method:"PUT",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_AssociateChannelFlowCommand")}(),Ch=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/memberships`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const le=tt({operation:[,"batch-create"]});let ne;return ne=JSON.stringify(It(v,{MemberArns:Xe=>Qt(Xe),SubChannelId:[],Type:[]})),new qt({protocol:F,hostname:_,port:V,method:"POST",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_BatchCreateChannelMembershipCommand")}(),_h=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie={"content-type":"application/json"};let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const le=tt({operation:[,"channel-flow-callback"]});let ne;return ne=JSON.stringify(It(v,{CallbackId:[!0,Xe=>Xe??bn()],ChannelMessage:Xe=>Qt(Xe),DeleteResource:[]})),new qt({protocol:F,hostname:_,port:V,method:"POST",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_ChannelFlowCallbackCommand")}(),Th=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer}),Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels`;let le;return le=JSON.stringify(It(v,{AppInstanceArn:[],ChannelId:[],ClientRequestToken:[!0,ne=>ne??bn()],ElasticChannelConfiguration:ne=>Qt(ne),ExpirationSettings:ne=>Qt(ne),MemberArns:ne=>Qt(ne),Metadata:[],Mode:[],ModeratorArns:ne=>Qt(ne),Name:[],Privacy:[],Tags:ne=>Qt(ne)})),new qt({protocol:F,hostname:_,port:V,method:"POST",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_CreateChannelCommand")}(),Ih=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/bans`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let le;return le=JSON.stringify(It(v,{MemberArn:[]})),new qt({protocol:F,hostname:_,port:V,method:"POST",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_CreateChannelBanCommand")}(),wh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie={"content-type":"application/json"},Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channel-flows`;let le;return le=JSON.stringify(It(v,{AppInstanceArn:[],ClientRequestToken:[!0,ne=>ne??bn()],Name:[],Processors:ne=>Qt(ne),Tags:ne=>Qt(ne)})),new qt({protocol:F,hostname:_,port:V,method:"POST",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_CreateChannelFlowCommand")}(),Oh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/memberships`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let le;return le=JSON.stringify(It(v,{MemberArn:[],SubChannelId:[],Type:[]})),new qt({protocol:F,hostname:_,port:V,method:"POST",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_CreateChannelMembershipCommand")}(),Ah=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/moderators`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let le;return le=JSON.stringify(It(v,{ChannelModeratorArn:[]})),new qt({protocol:F,hostname:_,port:V,method:"POST",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_CreateChannelModeratorCommand")}(),Mh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let le;return new qt({protocol:F,hostname:_,port:V,method:"DELETE",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_DeleteChannelCommand")}(),Ph=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/bans/{MemberArn}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),Z=nn(Z,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);let le;return new qt({protocol:F,hostname:_,port:V,method:"DELETE",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_DeleteChannelBanCommand")}(),Rh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie={};let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channel-flows/{ChannelFlowArn}`;Z=nn(Z,v,"ChannelFlowArn",()=>v.ChannelFlowArn,"{ChannelFlowArn}",!1);let le;return new qt({protocol:F,hostname:_,port:V,method:"DELETE",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_DeleteChannelFlowCommand")}(),kh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/memberships/{MemberArn}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),Z=nn(Z,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);const le=tt({"sub-channel-id":[,v.SubChannelId]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"DELETE",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_DeleteChannelMembershipCommand")}(),Dh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/messages/{MessageId}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),Z=nn(Z,v,"MessageId",()=>v.MessageId,"{MessageId}",!1);const le=tt({"sub-channel-id":[,v.SubChannelId]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"DELETE",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_DeleteChannelMessageCommand")}(),Lh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/moderators/{ChannelModeratorArn}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),Z=nn(Z,v,"ChannelModeratorArn",()=>v.ChannelModeratorArn,"{ChannelModeratorArn}",!1);let le;return new qt({protocol:F,hostname:_,port:V,method:"DELETE",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_DeleteChannelModeratorCommand")}(),Nh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie={};let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/app-instances/{AppInstanceArn}/streaming-configurations`;Z=nn(Z,v,"AppInstanceArn",()=>v.AppInstanceArn,"{AppInstanceArn}",!1);let le;return new qt({protocol:F,hostname:_,port:V,method:"DELETE",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_DeleteMessagingStreamingConfigurationsCommand")}(),xh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let le;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_DescribeChannelCommand")}(),Bh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/bans/{MemberArn}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),Z=nn(Z,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);let le;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_DescribeChannelBanCommand")}(),Fh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie={};let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channel-flows/{ChannelFlowArn}`;Z=nn(Z,v,"ChannelFlowArn",()=>v.ChannelFlowArn,"{ChannelFlowArn}",!1);let le;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_DescribeChannelFlowCommand")}(),Vh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/memberships/{MemberArn}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),Z=nn(Z,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);const le=tt({"sub-channel-id":[,v.SubChannelId]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_DescribeChannelMembershipCommand")}(),Uh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const le=tt({scope:[,"app-instance-user-membership"],"app-instance-user-arn":[,zt(v.AppInstanceUserArn,"AppInstanceUserArn")]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_DescribeChannelMembershipForAppInstanceUserCommand")}(),Hh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const le=tt({scope:[,"app-instance-user-moderated-channel"],"app-instance-user-arn":[,zt(v.AppInstanceUserArn,"AppInstanceUserArn")]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_DescribeChannelModeratedByAppInstanceUserCommand")}(),zh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/moderators/{ChannelModeratorArn}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),Z=nn(Z,v,"ChannelModeratorArn",()=>v.ChannelModeratorArn,"{ChannelModeratorArn}",!1);let le;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_DescribeChannelModeratorCommand")}(),Wh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/channel-flow/{ChannelFlowArn}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),Z=nn(Z,v,"ChannelFlowArn",()=>v.ChannelFlowArn,"{ChannelFlowArn}",!1);let le;return new qt({protocol:F,hostname:_,port:V,method:"DELETE",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_DisassociateChannelFlowCommand")}(),Gh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/memberships/{MemberArn}/preferences`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),Z=nn(Z,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);let le;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_GetChannelMembershipPreferencesCommand")}(),jh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/messages/{MessageId}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),Z=nn(Z,v,"MessageId",()=>v.MessageId,"{MessageId}",!1);const le=tt({"sub-channel-id":[,v.SubChannelId]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_GetChannelMessageCommand")}(),$h=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/messages/{MessageId}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),Z=nn(Z,v,"MessageId",()=>v.MessageId,"{MessageId}",!1);const le=tt({scope:[,"message-status"],"sub-channel-id":[,v.SubChannelId]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_GetChannelMessageStatusCommand")}(),Kh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie={"content-type":"application/json"},Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/endpoints/messaging-session`;let le;return le="",new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_GetMessagingSessionEndpointCommand")}(),As=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie={};let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/app-instances/{AppInstanceArn}/streaming-configurations`;Z=nn(Z,v,"AppInstanceArn",()=>v.AppInstanceArn,"{AppInstanceArn}",!1);let le;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_GetMessagingStreamingConfigurationsCommand")}(),Jh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/bans`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const le=tt({"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_ListChannelBansCommand")}(),Yh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie={},Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channel-flows`,le=tt({"app-instance-arn":[,zt(v.AppInstanceArn,"AppInstanceArn")],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_ListChannelFlowsCommand")}(),Qh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/memberships`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const le=tt({type:[,v.Type],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken],"sub-channel-id":[,v.SubChannelId]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_ListChannelMembershipsCommand")}(),Xh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer}),Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels`,le=tt({scope:[,"app-instance-user-memberships"],"app-instance-user-arn":[,v.AppInstanceUserArn],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_ListChannelMembershipsForAppInstanceUserCommand")}(),Zh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/messages`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const le=tt({"sort-order":[,v.SortOrder],"not-before":[()=>v.NotBefore!==void 0,()=>(v.NotBefore.toISOString().split(".")[0]+"Z").toString()],"not-after":[()=>v.NotAfter!==void 0,()=>(v.NotAfter.toISOString().split(".")[0]+"Z").toString()],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken],"sub-channel-id":[,v.SubChannelId]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_ListChannelMessagesCommand")}(),Kc=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/moderators`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const le=tt({"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_ListChannelModeratorsCommand")}(),qh=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer}),Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels`,le=tt({"app-instance-arn":[,zt(v.AppInstanceArn,"AppInstanceArn")],privacy:[,v.Privacy],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_ListChannelsCommand")}(),ep=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie={},Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels`,le=tt({scope:[,"channel-flow-associations"],"channel-flow-arn":[,zt(v.ChannelFlowArn,"ChannelFlowArn")],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_ListChannelsAssociatedWithChannelFlowCommand")}(),tp=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer}),Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels`,le=tt({scope:[,"app-instance-user-moderated-channels"],"app-instance-user-arn":[,v.AppInstanceUserArn],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_ListChannelsModeratedByAppInstanceUserCommand")}(),np=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/subchannels`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const le=tt({"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_ListSubChannelsCommand")}(),ip=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie={},Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/tags`,le=tt({arn:[,zt(v.ResourceARN,"ResourceARN")]});let ne;return new qt({protocol:F,hostname:_,port:V,method:"GET",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_ListTagsForResourceCommand")}(),rp=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/expiration-settings`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let le;return le=JSON.stringify(It(v,{ExpirationSettings:ne=>Qt(ne)})),new qt({protocol:F,hostname:_,port:V,method:"PUT",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_PutChannelExpirationSettingsCommand")}(),op=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/memberships/{MemberArn}/preferences`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),Z=nn(Z,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);let le;return le=JSON.stringify(It(v,{Preferences:ne=>Qt(ne)})),new qt({protocol:F,hostname:_,port:V,method:"PUT",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_PutChannelMembershipPreferencesCommand")}(),sp=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie={"content-type":"application/json"};let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/app-instances/{AppInstanceArn}/streaming-configurations`;Z=nn(Z,v,"AppInstanceArn",()=>v.AppInstanceArn,"{AppInstanceArn}",!1);let le;return le=JSON.stringify(It(v,{StreamingConfigurations:ne=>Qt(ne)})),new qt({protocol:F,hostname:_,port:V,method:"PUT",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_PutMessagingStreamingConfigurationsCommand")}(),ap=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/messages/{MessageId}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),Z=nn(Z,v,"MessageId",()=>v.MessageId,"{MessageId}",!1);const le=tt({operation:[,"redact"]});let ne;return ne=JSON.stringify(It(v,{SubChannelId:[]})),new qt({protocol:F,hostname:_,port:V,method:"POST",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_RedactChannelMessageCommand")}(),lp=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer}),Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels`,le=tt({operation:[,"search"],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let ne;return ne=JSON.stringify(It(v,{Fields:Xe=>Qt(Xe)})),new qt({protocol:F,hostname:_,port:V,method:"POST",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_SearchChannelsCommand")}(),dp=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/messages`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let le;return le=JSON.stringify(It(v,{ClientRequestToken:[!0,ne=>ne??bn()],Content:[],ContentType:[],MessageAttributes:ne=>Qt(ne),Metadata:[],Persistence:[],PushNotification:ne=>Qt(ne),SubChannelId:[],Type:[]})),new qt({protocol:F,hostname:_,port:V,method:"POST",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_SendChannelMessageCommand")}(),cp=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie={"content-type":"application/json"},Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/tags`,le=tt({operation:[,"tag-resource"]});let ne;return ne=JSON.stringify(It(v,{ResourceARN:[],Tags:Xe=>Qt(Xe)})),new qt({protocol:F,hostname:_,port:V,method:"POST",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_TagResourceCommand")}(),up=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie={"content-type":"application/json"},Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/tags`,le=tt({operation:[,"untag-resource"]});let ne;return ne=JSON.stringify(It(v,{ResourceARN:[],TagKeys:Xe=>Qt(Xe)})),new qt({protocol:F,hostname:_,port:V,method:"POST",headers:ie,path:Z,query:le,body:ne})});return s(function(b,_){return C.apply(this,arguments)},"se_UntagResourceCommand")}(),fp=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let le;return le=JSON.stringify(It(v,{Metadata:[],Mode:[],Name:[]})),new qt({protocol:F,hostname:_,port:V,method:"PUT",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_UpdateChannelCommand")}(),hp=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie={"content-type":"application/json"};let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channel-flows/{ChannelFlowArn}`;Z=nn(Z,v,"ChannelFlowArn",()=>v.ChannelFlowArn,"{ChannelFlowArn}",!1);let le;return le=JSON.stringify(It(v,{Name:[],Processors:ne=>Qt(ne)})),new qt({protocol:F,hostname:_,port:V,method:"PUT",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_UpdateChannelFlowCommand")}(),pp=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/messages/{MessageId}`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),Z=nn(Z,v,"MessageId",()=>v.MessageId,"{MessageId}",!1);let le;return le=JSON.stringify(It(v,{Content:[],ContentType:[],Metadata:[],SubChannelId:[]})),new qt({protocol:F,hostname:_,port:V,method:"PUT",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_UpdateChannelMessageCommand")}(),mp=function(){var C=(0,p.coroutine)(function*(v,b){const{hostname:_,protocol:F="https",port:V,path:j}=yield b.endpoint(),ie=tt({},Mn,{"x-amz-chime-bearer":v.ChimeBearer});let Z=`${j!=null&&j.endsWith("/")?j.slice(0,-1):j||""}/channels/{ChannelArn}/readMarker`;Z=nn(Z,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let le;return new qt({protocol:F,hostname:_,port:V,method:"PUT",headers:ie,path:Z,body:le})});return s(function(b,_){return C.apply(this,arguments)},"se_UpdateChannelReadMarkerCommand")}(),gp=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Sp(v,b);const _=tt({$metadata:Jt(v)});return yield Fi(v.body,b),_});return s(function(b,_){return C.apply(this,arguments)},"de_AssociateChannelFlowCommand")}(),Sp=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Zi(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_AssociateChannelFlowCommandError")}(),vp=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return yp(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{BatchChannelMemberships:Qt,Errors:Qt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_BatchCreateChannelMembershipCommand")}(),yp=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Zi(_,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Pr(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_BatchCreateChannelMembershipCommandError")}(),bp=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Ep(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{CallbackId:vt,ChannelArn:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_ChannelFlowCallbackCommand")}(),Ep=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_ChannelFlowCallbackCommandError")}(),Cp=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return _p(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_CreateChannelCommand")}(),_p=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Pr(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_CreateChannelCommandError")}(),Tp=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return Ip(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt,Member:Qt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_CreateChannelBanCommand")}(),Ip=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Pr(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_CreateChannelBanCommandError")}(),wp=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return Op(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelFlowArn:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_CreateChannelFlowCommand")}(),Op=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Pr(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_CreateChannelFlowCommandError")}(),Ap=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return Mp(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt,Member:Qt,SubChannelId:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_CreateChannelMembershipCommand")}(),Mp=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Zi(_,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Pr(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_CreateChannelMembershipCommandError")}(),Pp=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return Rp(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt,ChannelModerator:Qt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_CreateChannelModeratorCommand")}(),Rp=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Pr(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_CreateChannelModeratorCommandError")}(),kp=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return Dp(v,b);const _=tt({$metadata:Jt(v)});return yield Fi(v.body,b),_});return s(function(b,_){return C.apply(this,arguments)},"de_DeleteChannelCommand")}(),Dp=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_DeleteChannelCommandError")}(),Lp=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return Np(v,b);const _=tt({$metadata:Jt(v)});return yield Fi(v.body,b),_});return s(function(b,_){return C.apply(this,arguments)},"de_DeleteChannelBanCommand")}(),Np=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_DeleteChannelBanCommandError")}(),xp=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return Bp(v,b);const _=tt({$metadata:Jt(v)});return yield Fi(v.body,b),_});return s(function(b,_){return C.apply(this,arguments)},"de_DeleteChannelFlowCommand")}(),Bp=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_DeleteChannelFlowCommandError")}(),Fp=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return Vp(v,b);const _=tt({$metadata:Jt(v)});return yield Fi(v.body,b),_});return s(function(b,_){return C.apply(this,arguments)},"de_DeleteChannelMembershipCommand")}(),Vp=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_DeleteChannelMembershipCommandError")}(),Up=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return Hp(v,b);const _=tt({$metadata:Jt(v)});return yield Fi(v.body,b),_});return s(function(b,_){return C.apply(this,arguments)},"de_DeleteChannelMessageCommand")}(),Hp=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_DeleteChannelMessageCommandError")}(),zp=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return Wp(v,b);const _=tt({$metadata:Jt(v)});return yield Fi(v.body,b),_});return s(function(b,_){return C.apply(this,arguments)},"de_DeleteChannelModeratorCommand")}(),Wp=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_DeleteChannelModeratorCommandError")}(),Gp=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return jp(v,b);const _=tt({$metadata:Jt(v)});return yield Fi(v.body,b),_});return s(function(b,_){return C.apply(this,arguments)},"de_DeleteMessagingStreamingConfigurationsCommand")}(),jp=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_DeleteMessagingStreamingConfigurationsCommandError")}(),$p=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Kp(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{Channel:j=>ug(j,b)});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_DescribeChannelCommand")}(),Kp=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_DescribeChannelCommandError")}(),Jp=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Yp(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelBan:j=>fg(j,b)});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_DescribeChannelBanCommand")}(),Yp=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Zi(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_DescribeChannelBanCommandError")}(),Qp=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Xp(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelFlow:j=>hg(j,b)});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_DescribeChannelFlowCommand")}(),Xp=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_DescribeChannelFlowCommandError")}(),Zp=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return qp(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelMembership:j=>pg(j,b)});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_DescribeChannelMembershipCommand")}(),qp=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Zi(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_DescribeChannelMembershipCommandError")}(),em=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return tm(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelMembership:j=>Jc(j,b)});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_DescribeChannelMembershipForAppInstanceUserCommand")}(),tm=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_DescribeChannelMembershipForAppInstanceUserCommandError")}(),nm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return im(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{Channel:j=>Qc(j,b)});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_DescribeChannelModeratedByAppInstanceUserCommand")}(),im=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_DescribeChannelModeratedByAppInstanceUserCommandError")}(),rm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return om(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelModerator:j=>yg(j,b)});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_DescribeChannelModeratorCommand")}(),om=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Zi(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_DescribeChannelModeratorCommandError")}(),sm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return am(v,b);const _=tt({$metadata:Jt(v)});return yield Fi(v.body,b),_});return s(function(b,_){return C.apply(this,arguments)},"de_DisassociateChannelFlowCommand")}(),am=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Zi(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_DisassociateChannelFlowCommandError")}(),lm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return dm(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt,Member:Qt,Preferences:Qt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_GetChannelMembershipPreferencesCommand")}(),dm=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_GetChannelMembershipPreferencesCommandError")}(),cm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return um(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelMessage:j=>Yc(j,b)});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_GetChannelMessageCommand")}(),um=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Zi(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_GetChannelMessageCommandError")}(),fm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return hm(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{Status:Qt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_GetChannelMessageStatusCommand")}(),hm=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_GetChannelMessageStatusCommandError")}(),pm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return mm(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{Endpoint:Qt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_GetMessagingSessionEndpointCommand")}(),mm=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_GetMessagingSessionEndpointCommandError")}(),gm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Sm(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{StreamingConfigurations:Qt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_GetMessagingStreamingConfigurationsCommand")}(),Sm=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Zi(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_GetMessagingStreamingConfigurationsCommandError")}(),vm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return ym(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt,ChannelBans:Qt,NextToken:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelBansCommand")}(),ym=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelBansCommandError")}(),bm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Em(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelFlows:Qt,NextToken:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelFlowsCommand")}(),Em=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelFlowsCommandError")}(),Cm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return _m(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt,ChannelMemberships:Qt,NextToken:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelMembershipsCommand")}(),_m=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelMembershipsCommandError")}(),Tm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Im(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelMemberships:j=>mg(j,b),NextToken:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelMembershipsForAppInstanceUserCommand")}(),Im=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelMembershipsForAppInstanceUserCommandError")}(),wm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Om(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt,ChannelMessages:j=>Sg(j,b),NextToken:vt,SubChannelId:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelMessagesCommand")}(),Om=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelMessagesCommandError")}(),Am=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Mm(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt,ChannelModerators:Qt,NextToken:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelModeratorsCommand")}(),Mm=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelModeratorsCommandError")}(),Pm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Rm(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{Channels:j=>Xc(j,b),NextToken:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelsCommand")}(),Rm=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelsCommandError")}(),km=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Dm(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{Channels:Qt,NextToken:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelsAssociatedWithChannelFlowCommand")}(),Dm=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelsAssociatedWithChannelFlowCommandError")}(),Lm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Nm(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{Channels:j=>vg(j,b),NextToken:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelsModeratedByAppInstanceUserCommand")}(),Nm=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_ListChannelsModeratedByAppInstanceUserCommandError")}(),xm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Bm(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt,NextToken:vt,SubChannels:Qt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_ListSubChannelsCommand")}(),Bm=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_ListSubChannelsCommandError")}(),Fm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Vm(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{Tags:Qt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_ListTagsForResourceCommand")}(),Vm=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_ListTagsForResourceCommandError")}(),Um=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Hm(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt,ExpirationSettings:Qt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_PutChannelExpirationSettingsCommand")}(),Hm=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_PutChannelExpirationSettingsCommandError")}(),zm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Wm(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt,Member:Qt,Preferences:Qt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_PutChannelMembershipPreferencesCommand")}(),Wm=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_PutChannelMembershipPreferencesCommandError")}(),Gm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return jm(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{StreamingConfigurations:Qt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_PutMessagingStreamingConfigurationsCommand")}(),jm=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield Zi(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_PutMessagingStreamingConfigurationsCommandError")}(),$m=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Km(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt,MessageId:vt,SubChannelId:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_RedactChannelMessageCommand")}(),Km=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_RedactChannelMessageCommandError")}(),Jm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Ym(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{Channels:j=>Xc(j,b),NextToken:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_SearchChannelsCommand")}(),Ym=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_SearchChannelsCommandError")}(),Qm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return Xm(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt,MessageId:vt,Status:Qt,SubChannelId:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_SendChannelMessageCommand")}(),Xm=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_SendChannelMessageCommandError")}(),Zm=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return qm(v,b);const _=tt({$metadata:Jt(v)});return yield Fi(v.body,b),_});return s(function(b,_){return C.apply(this,arguments)},"de_TagResourceCommand")}(),qm=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Pr(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_TagResourceCommandError")}(),eg=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return tg(v,b);const _=tt({$metadata:Jt(v)});return yield Fi(v.body,b),_});return s(function(b,_){return C.apply(this,arguments)},"de_UntagResourceCommand")}(),tg=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_UntagResourceCommandError")}(),ng=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return ig(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_UpdateChannelCommand")}(),ig=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_UpdateChannelCommandError")}(),rg=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return og(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelFlowArn:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_UpdateChannelFlowCommand")}(),og=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_UpdateChannelFlowCommandError")}(),sg=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return ag(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt,MessageId:vt,Status:Qt,SubChannelId:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_UpdateChannelMessageCommand")}(),ag=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_UpdateChannelMessageCommandError")}(),lg=function(){var C=(0,p.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return dg(v,b);const _=tt({$metadata:Jt(v)}),F=zt(Tn(yield In(v.body,b)),"body"),V=It(F,{ChannelArn:vt});return Object.assign(_,V),_});return s(function(b,_){return C.apply(this,arguments)},"de_UpdateChannelReadMarkerCommand")}(),dg=function(){var C=(0,p.coroutine)(function*(v,b){const _={...v,body:yield pn(v.body,b)},F=mn(v,_.body);switch(F){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield gn(_,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield si(_,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield dn(_,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield cn(_,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield un(_,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield fn(_,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield hn(_,b);default:const V=_.body;return ln({output:v,parsedBody:V,errorCode:F})}});return s(function(b,_){return C.apply(this,arguments)},"de_UpdateChannelReadMarkerCommandError")}(),ln=Of(Pi),gn=function(){var C=(0,p.coroutine)(function*(v,b){const _=tt({}),F=v.body,V=It(F,{Code:vt,Message:vt});Object.assign(_,V);const j=new ms({$metadata:Jt(v),..._});return Qi(j,v.body)});return s(function(b,_){return C.apply(this,arguments)},"de_BadRequestExceptionRes")}(),si=function(){var C=(0,p.coroutine)(function*(v,b){const _=tt({}),F=v.body,V=It(F,{Code:vt,Message:vt});Object.assign(_,V);const j=new gs({$metadata:Jt(v),..._});return Qi(j,v.body)});return s(function(b,_){return C.apply(this,arguments)},"de_ConflictExceptionRes")}(),dn=function(){var C=(0,p.coroutine)(function*(v,b){const _=tt({}),F=v.body,V=It(F,{Code:vt,Message:vt});Object.assign(_,V);const j=new Ss({$metadata:Jt(v),..._});return Qi(j,v.body)});return s(function(b,_){return C.apply(this,arguments)},"de_ForbiddenExceptionRes")}(),Zi=function(){var C=(0,p.coroutine)(function*(v,b){const _=tt({}),F=v.body,V=It(F,{Code:vt,Message:vt});Object.assign(_,V);const j=new vs({$metadata:Jt(v),..._});return Qi(j,v.body)});return s(function(b,_){return C.apply(this,arguments)},"de_NotFoundExceptionRes")}(),Pr=function(){var C=(0,p.coroutine)(function*(v,b){const _=tt({}),F=v.body,V=It(F,{Code:vt,Message:vt});Object.assign(_,V);const j=new _s({$metadata:Jt(v),..._});return Qi(j,v.body)});return s(function(b,_){return C.apply(this,arguments)},"de_ResourceLimitExceededExceptionRes")}(),cn=function(){var C=(0,p.coroutine)(function*(v,b){const _=tt({}),F=v.body,V=It(F,{Code:vt,Message:vt});Object.assign(_,V);const j=new ys({$metadata:Jt(v),..._});return Qi(j,v.body)});return s(function(b,_){return C.apply(this,arguments)},"de_ServiceFailureExceptionRes")}(),un=function(){var C=(0,p.coroutine)(function*(v,b){const _=tt({}),F=v.body,V=It(F,{Code:vt,Message:vt});Object.assign(_,V);const j=new bs({$metadata:Jt(v),..._});return Qi(j,v.body)});return s(function(b,_){return C.apply(this,arguments)},"de_ServiceUnavailableExceptionRes")}(),fn=function(){var C=(0,p.coroutine)(function*(v,b){const _=tt({}),F=v.body,V=It(F,{Code:vt,Message:vt});Object.assign(_,V);const j=new Es({$metadata:Jt(v),..._});return Qi(j,v.body)});return s(function(b,_){return C.apply(this,arguments)},"de_ThrottledClientExceptionRes")}(),hn=function(){var C=(0,p.coroutine)(function*(v,b){const _=tt({}),F=v.body,V=It(F,{Code:vt,Message:vt});Object.assign(_,V);const j=new Cs({$metadata:Jt(v),..._});return Qi(j,v.body)});return s(function(b,_){return C.apply(this,arguments)},"de_UnauthorizedClientExceptionRes")}(),cg=s((C,v)=>It(C,{ReadMarkerTimestamp:b=>zt(yi(ni(b))),SubChannelId:vt,Type:vt}),"de_AppInstanceUserMembershipSummary"),ug=s((C,v)=>It(C,{ChannelArn:vt,ChannelFlowArn:vt,CreatedBy:Qt,CreatedTimestamp:b=>zt(yi(ni(b))),ElasticChannelConfiguration:Qt,ExpirationSettings:Qt,LastMessageTimestamp:b=>zt(yi(ni(b))),LastUpdatedTimestamp:b=>zt(yi(ni(b))),Metadata:vt,Mode:vt,Name:vt,Privacy:vt}),"de_Channel"),fg=s((C,v)=>It(C,{ChannelArn:vt,CreatedBy:Qt,CreatedTimestamp:b=>zt(yi(ni(b))),Member:Qt}),"de_ChannelBan"),hg=s((C,v)=>It(C,{ChannelFlowArn:vt,CreatedTimestamp:b=>zt(yi(ni(b))),LastUpdatedTimestamp:b=>zt(yi(ni(b))),Name:vt,Processors:Qt}),"de_ChannelFlow"),pg=s((C,v)=>It(C,{ChannelArn:vt,CreatedTimestamp:b=>zt(yi(ni(b))),InvitedBy:Qt,LastUpdatedTimestamp:b=>zt(yi(ni(b))),Member:Qt,SubChannelId:vt,Type:vt}),"de_ChannelMembership"),Jc=s((C,v)=>It(C,{AppInstanceUserMembershipSummary:b=>cg(b,v),ChannelSummary:b=>Pl(b,v)}),"de_ChannelMembershipForAppInstanceUserSummary"),mg=s((C,v)=>(C||[]).filter(_=>_!=null).map(_=>Jc(_,v)),"de_ChannelMembershipForAppInstanceUserSummaryList"),Yc=s((C,v)=>It(C,{ChannelArn:vt,Content:vt,ContentType:vt,CreatedTimestamp:b=>zt(yi(ni(b))),LastEditedTimestamp:b=>zt(yi(ni(b))),LastUpdatedTimestamp:b=>zt(yi(ni(b))),MessageAttributes:Qt,MessageId:vt,Metadata:vt,Persistence:vt,Redacted:gd,Sender:Qt,Status:Qt,SubChannelId:vt,Type:vt}),"de_ChannelMessage"),gg=s((C,v)=>It(C,{Content:vt,ContentType:vt,CreatedTimestamp:b=>zt(yi(ni(b))),LastEditedTimestamp:b=>zt(yi(ni(b))),LastUpdatedTimestamp:b=>zt(yi(ni(b))),MessageAttributes:Qt,MessageId:vt,Metadata:vt,Redacted:gd,Sender:Qt,Status:Qt,Type:vt}),"de_ChannelMessageSummary"),Sg=s((C,v)=>(C||[]).filter(_=>_!=null).map(_=>gg(_,v)),"de_ChannelMessageSummaryList"),Qc=s((C,v)=>It(C,{ChannelSummary:b=>Pl(b,v)}),"de_ChannelModeratedByAppInstanceUserSummary"),vg=s((C,v)=>(C||[]).filter(_=>_!=null).map(_=>Qc(_,v)),"de_ChannelModeratedByAppInstanceUserSummaryList"),yg=s((C,v)=>It(C,{ChannelArn:vt,CreatedBy:Qt,CreatedTimestamp:b=>zt(yi(ni(b))),Moderator:Qt}),"de_ChannelModerator"),Pl=s((C,v)=>It(C,{ChannelArn:vt,LastMessageTimestamp:b=>zt(yi(ni(b))),Metadata:vt,Mode:vt,Name:vt,Privacy:vt}),"de_ChannelSummary"),Xc=s((C,v)=>(C||[]).filter(_=>_!=null).map(_=>Pl(_,v)),"de_ChannelSummaryList");var Rl,kl;const Jt=s(C=>({httpStatusCode:C.statusCode,requestId:(kl=(Rl=C.headers["x-amzn-requestid"])!==null&&Rl!==void 0?Rl:C.headers["x-amzn-request-id"])!==null&&kl!==void 0?kl:C.headers["x-amz-request-id"],extendedRequestId:C.headers["x-amz-id-2"],cfId:C.headers["x-amz-cf-id"]}),"Aws_restJson1_deserializeMetadata"),Fi=s(function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Uint8Array,v=arguments.length>1?arguments[1]:void 0;return C instanceof Uint8Array?Promise.resolve(C):v.streamCollector(C)||Promise.resolve(new Uint8Array)},"collectBody"),bg=s((C,v)=>Fi(C,v).then(b=>v.utf8Encoder(b)),"collectBodyString"),Mn=s(C=>C!=null&&C!==""&&(!Object.getOwnPropertyNames(C).includes("length")||C.length!=0)&&(!Object.getOwnPropertyNames(C).includes("size")||C.size!=0),"isSerializableHeaderValue"),In=s((C,v)=>bg(C,v).then(b=>b.length?JSON.parse(b):{}),"parseBody"),pn=function(){var C=(0,p.coroutine)(function*(v,b){const _=yield In(v,b);var F;return _.message=(F=_.message)!==null&&F!==void 0?F:_.Message,_});return s(function(b,_){return C.apply(this,arguments)},"parseErrorBody")}(),mn=s((C,v)=>{const b=s((V,j)=>Object.keys(V).find(ie=>ie.toLowerCase()===j.toLowerCase()),"findKey"),_=s(V=>{let j=V;return typeof j=="number"&&(j=j.toString()),j.indexOf(",")>=0&&(j=j.split(",")[0]),j.indexOf(":")>=0&&(j=j.split(":")[0]),j.indexOf("#")>=0&&(j=j.split("#")[1]),j},"sanitizeErrorCode"),F=b(C.headers,"x-amzn-errortype");if(F!==void 0)return _(C.headers[F]);if(v.code!==void 0)return _(v.code);if(v.__type!==void 0)return _(v.__type)},"loadRestJsonErrorCode");class Ms extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ms.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"AssociateChannelFlowCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Eh(v,b)}deserialize(v,b){return gp(v,b)}constructor(v){super(),this.input=v}}s(Ms,"AssociateChannelFlowCommand");class Ps extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ps.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"BatchCreateChannelMembershipCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:Ud},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Ch(v,b)}deserialize(v,b){return vp(v,b)}constructor(v){super(),this.input=v}}s(Ps,"BatchCreateChannelMembershipCommand");class Rs extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Rs.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"ChannelFlowCallbackCommand",inputFilterSensitiveLog:Kd,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return _h(v,b)}deserialize(v,b){return bp(v,b)}constructor(v){super(),this.input=v}}s(Rs,"ChannelFlowCallbackCommand");class ks extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,ks.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelBanCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ic},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Ih(v,b)}deserialize(v,b){return Tp(v,b)}constructor(v){super(),this.input=v}}s(ks,"CreateChannelBanCommand");class Ds extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ds.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelCommand",inputFilterSensitiveLog:nc,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Th(v,b)}deserialize(v,b){return Cp(v,b)}constructor(v){super(),this.input=v}}s(Ds,"CreateChannelCommand");class Ls extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ls.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelFlowCommand",inputFilterSensitiveLog:rc,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return wh(v,b)}deserialize(v,b){return wp(v,b)}constructor(v){super(),this.input=v}}s(Ls,"CreateChannelFlowCommand");class Ns extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ns.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelMembershipCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:oc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Oh(v,b)}deserialize(v,b){return Ap(v,b)}constructor(v){super(),this.input=v}}s(Ns,"CreateChannelMembershipCommand");class xs extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,xs.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelModeratorCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:sc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Ah(v,b)}deserialize(v,b){return Pp(v,b)}constructor(v){super(),this.input=v}}s(xs,"CreateChannelModeratorCommand");class Bs extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Bs.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelBanCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Ph(v,b)}deserialize(v,b){return Lp(v,b)}constructor(v){super(),this.input=v}}s(Bs,"DeleteChannelBanCommand");class Fs extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Fs.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Mh(v,b)}deserialize(v,b){return kp(v,b)}constructor(v){super(),this.input=v}}s(Fs,"DeleteChannelCommand");class Vs extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Vs.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelFlowCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Rh(v,b)}deserialize(v,b){return xp(v,b)}constructor(v){super(),this.input=v}}s(Vs,"DeleteChannelFlowCommand");class Us extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Us.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelMembershipCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return kh(v,b)}deserialize(v,b){return Fp(v,b)}constructor(v){super(),this.input=v}}s(Us,"DeleteChannelMembershipCommand");class W extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,W.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelMessageCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Dh(v,b)}deserialize(v,b){return Up(v,b)}constructor(v){super(),this.input=v}}s(W,"DeleteChannelMessageCommand");class Hs extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Hs.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelModeratorCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Lh(v,b)}deserialize(v,b){return zp(v,b)}constructor(v){super(),this.input=v}}s(Hs,"DeleteChannelModeratorCommand");class zs extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,zs.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"DeleteMessagingStreamingConfigurationsCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Nh(v,b)}deserialize(v,b){return Gp(v,b)}constructor(v){super(),this.input=v}}s(zs,"DeleteMessagingStreamingConfigurationsCommand");class Ws extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ws.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelBanCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:lc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Bh(v,b)}deserialize(v,b){return Jp(v,b)}constructor(v){super(),this.input=v}}s(Ws,"DescribeChannelBanCommand");class Gs extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Gs.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ac},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return xh(v,b)}deserialize(v,b){return $p(v,b)}constructor(v){super(),this.input=v}}s(Gs,"DescribeChannelCommand");class js extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,js.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelFlowCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:dc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Fh(v,b)}deserialize(v,b){return Qp(v,b)}constructor(v){super(),this.input=v}}s(js,"DescribeChannelFlowCommand");class $s extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,$s.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelMembershipCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:cc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Vh(v,b)}deserialize(v,b){return Zp(v,b)}constructor(v){super(),this.input=v}}s($s,"DescribeChannelMembershipCommand");class Ks extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ks.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelMembershipForAppInstanceUserCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:uc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Uh(v,b)}deserialize(v,b){return em(v,b)}constructor(v){super(),this.input=v}}s(Ks,"DescribeChannelMembershipForAppInstanceUserCommand");class Js extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Js.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelModeratedByAppInstanceUserCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:fc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Hh(v,b)}deserialize(v,b){return nm(v,b)}constructor(v){super(),this.input=v}}s(Js,"DescribeChannelModeratedByAppInstanceUserCommand");class Ys extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ys.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelModeratorCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:hc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return zh(v,b)}deserialize(v,b){return rm(v,b)}constructor(v){super(),this.input=v}}s(Ys,"DescribeChannelModeratorCommand");class Qs extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Qs.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"DisassociateChannelFlowCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Wh(v,b)}deserialize(v,b){return sm(v,b)}constructor(v){super(),this.input=v}}s(Qs,"DisassociateChannelFlowCommand");class Xs extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Xs.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"GetChannelMembershipPreferencesCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:pc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Gh(v,b)}deserialize(v,b){return lm(v,b)}constructor(v){super(),this.input=v}}s(Xs,"GetChannelMembershipPreferencesCommand");class Zs extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Zs.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"GetChannelMessageCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:mc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return jh(v,b)}deserialize(v,b){return cm(v,b)}constructor(v){super(),this.input=v}}s(Zs,"GetChannelMessageCommand");class Ln extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Ln.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"GetChannelMessageStatusCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return $h(v,b)}deserialize(v,b){return fm(v,b)}constructor(v){super(),this.input=v}}s(Ln,"GetChannelMessageStatusCommand");class Kt extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Kt.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"GetMessagingSessionEndpointCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Kh(v,b)}deserialize(v,b){return pm(v,b)}constructor(v){super(),this.input=v}}s(Kt,"GetMessagingSessionEndpointCommand");class gr extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,gr.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"GetMessagingStreamingConfigurationsCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return As(v,b)}deserialize(v,b){return gm(v,b)}constructor(v){super(),this.input=v}}s(gr,"GetMessagingStreamingConfigurationsCommand");class Sr extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Sr.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelBansCommand",inputFilterSensitiveLog:gc,outputFilterSensitiveLog:Sc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Jh(v,b)}deserialize(v,b){return vm(v,b)}constructor(v){super(),this.input=v}}s(Sr,"ListChannelBansCommand");class jn extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,jn.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelFlowsCommand",inputFilterSensitiveLog:vc,outputFilterSensitiveLog:yc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Yh(v,b)}deserialize(v,b){return bm(v,b)}constructor(v){super(),this.input=v}}s(jn,"ListChannelFlowsCommand");class vr extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,vr.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelMembershipsCommand",inputFilterSensitiveLog:bc,outputFilterSensitiveLog:Ec},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Qh(v,b)}deserialize(v,b){return Cm(v,b)}constructor(v){super(),this.input=v}}s(vr,"ListChannelMembershipsCommand");class $n extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,$n.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelMembershipsForAppInstanceUserCommand",inputFilterSensitiveLog:Cc,outputFilterSensitiveLog:_c},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Xh(v,b)}deserialize(v,b){return Tm(v,b)}constructor(v){super(),this.input=v}}s($n,"ListChannelMembershipsForAppInstanceUserCommand");class xe extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,xe.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelMessagesCommand",inputFilterSensitiveLog:Tc,outputFilterSensitiveLog:Ic},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Zh(v,b)}deserialize(v,b){return wm(v,b)}constructor(v){super(),this.input=v}}s(xe,"ListChannelMessagesCommand");class bi extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,bi.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelModeratorsCommand",inputFilterSensitiveLog:wc,outputFilterSensitiveLog:Oc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return Kc(v,b)}deserialize(v,b){return Am(v,b)}constructor(v){super(),this.input=v}}s(bi,"ListChannelModeratorsCommand");class yr extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,yr.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelsAssociatedWithChannelFlowCommand",inputFilterSensitiveLog:Pc,outputFilterSensitiveLog:Rc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return ep(v,b)}deserialize(v,b){return km(v,b)}constructor(v){super(),this.input=v}}s(yr,"ListChannelsAssociatedWithChannelFlowCommand");class An extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,An.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelsCommand",inputFilterSensitiveLog:Ac,outputFilterSensitiveLog:Mc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return qh(v,b)}deserialize(v,b){return Pm(v,b)}constructor(v){super(),this.input=v}}s(An,"ListChannelsCommand");class ii extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,ii.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelsModeratedByAppInstanceUserCommand",inputFilterSensitiveLog:kc,outputFilterSensitiveLog:Dc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return tp(v,b)}deserialize(v,b){return Lm(v,b)}constructor(v){super(),this.input=v}}s(ii,"ListChannelsModeratedByAppInstanceUserCommand");class Zn extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Zn.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"ListSubChannelsCommand",inputFilterSensitiveLog:Lc,outputFilterSensitiveLog:Nc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return np(v,b)}deserialize(v,b){return xm(v,b)}constructor(v){super(),this.input=v}}s(Zn,"ListSubChannelsCommand");class Rr extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Rr.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"ListTagsForResourceCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:xc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return ip(v,b)}deserialize(v,b){return Fm(v,b)}constructor(v){super(),this.input=v}}s(Rr,"ListTagsForResourceCommand");class qi extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,qi.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"PutChannelExpirationSettingsCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return rp(v,b)}deserialize(v,b){return Um(v,b)}constructor(v){super(),this.input=v}}s(qi,"PutChannelExpirationSettingsCommand");class nt extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,nt.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"PutChannelMembershipPreferencesCommand",inputFilterSensitiveLog:Bc,outputFilterSensitiveLog:Fc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return op(v,b)}deserialize(v,b){return zm(v,b)}constructor(v){super(),this.input=v}}s(nt,"PutChannelMembershipPreferencesCommand");class ai extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,ai.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"PutMessagingStreamingConfigurationsCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return sp(v,b)}deserialize(v,b){return Gm(v,b)}constructor(v){super(),this.input=v}}s(ai,"PutMessagingStreamingConfigurationsCommand");class So extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,So.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"RedactChannelMessageCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return ap(v,b)}deserialize(v,b){return $m(v,b)}constructor(v){super(),this.input=v}}s(So,"RedactChannelMessageCommand");class kr extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,kr.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"SearchChannelsCommand",inputFilterSensitiveLog:Vc,outputFilterSensitiveLog:Uc},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return lp(v,b)}deserialize(v,b){return Jm(v,b)}constructor(v){super(),this.input=v}}s(kr,"SearchChannelsCommand");class Dr extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Dr.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"SendChannelMessageCommand",inputFilterSensitiveLog:Hc,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return dp(v,b)}deserialize(v,b){return Qm(v,b)}constructor(v){super(),this.input=v}}s(Dr,"SendChannelMessageCommand");class Lr extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Lr.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"TagResourceCommand",inputFilterSensitiveLog:zc,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return cp(v,b)}deserialize(v,b){return Zm(v,b)}constructor(v){super(),this.input=v}}s(Lr,"TagResourceCommand");class Nr extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Nr.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"UntagResourceCommand",inputFilterSensitiveLog:Wc,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return up(v,b)}deserialize(v,b){return eg(v,b)}constructor(v){super(),this.input=v}}s(Nr,"UntagResourceCommand");class er extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,er.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelCommand",inputFilterSensitiveLog:Gc,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return fp(v,b)}deserialize(v,b){return ng(v,b)}constructor(v){super(),this.input=v}}s(er,"UpdateChannelCommand");class br extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,br.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelFlowCommand",inputFilterSensitiveLog:jc,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return hp(v,b)}deserialize(v,b){return rg(v,b)}constructor(v){super(),this.input=v}}s(br,"UpdateChannelFlowCommand");class xr extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,xr.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelMessageCommand",inputFilterSensitiveLog:$c,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return pp(v,b)}deserialize(v,b){return sg(v,b)}constructor(v){super(),this.input=v}}s(xr,"UpdateChannelMessageCommand");class Br extends tn{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,_){this.middlewareStack.use(Ae(b,this.serialize,this.deserialize)),this.middlewareStack.use(rt(b,Br.getEndpointParameterInstructions()));const F=v.concat(this.middlewareStack),{logger:V}=b,Z={logger:V,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelReadMarkerCommand",inputFilterSensitiveLog:ne=>ne,outputFilterSensitiveLog:ne=>ne},{requestHandler:le}=b;return F.resolve(ne=>le.handle(ne.request,_||{}),Z)}serialize(v,b){return mp(v,b)}deserialize(v,b){return lg(v,b)}constructor(v){super(),this.input=v}}s(Br,"UpdateChannelReadMarkerCommand");const Da={AssociateChannelFlowCommand:Ms,BatchCreateChannelMembershipCommand:Ps,ChannelFlowCallbackCommand:Rs,CreateChannelCommand:Ds,CreateChannelBanCommand:ks,CreateChannelFlowCommand:Ls,CreateChannelMembershipCommand:Ns,CreateChannelModeratorCommand:xs,DeleteChannelCommand:Fs,DeleteChannelBanCommand:Bs,DeleteChannelFlowCommand:Vs,DeleteChannelMembershipCommand:Us,DeleteChannelMessageCommand:W,DeleteChannelModeratorCommand:Hs,DeleteMessagingStreamingConfigurationsCommand:zs,DescribeChannelCommand:Gs,DescribeChannelBanCommand:Ws,DescribeChannelFlowCommand:js,DescribeChannelMembershipCommand:$s,DescribeChannelMembershipForAppInstanceUserCommand:Ks,DescribeChannelModeratedByAppInstanceUserCommand:Js,DescribeChannelModeratorCommand:Ys,DisassociateChannelFlowCommand:Qs,GetChannelMembershipPreferencesCommand:Xs,GetChannelMessageCommand:Zs,GetChannelMessageStatusCommand:Ln,GetMessagingSessionEndpointCommand:Kt,GetMessagingStreamingConfigurationsCommand:gr,ListChannelBansCommand:Sr,ListChannelFlowsCommand:jn,ListChannelMembershipsCommand:vr,ListChannelMembershipsForAppInstanceUserCommand:$n,ListChannelMessagesCommand:xe,ListChannelModeratorsCommand:bi,ListChannelsCommand:An,ListChannelsAssociatedWithChannelFlowCommand:yr,ListChannelsModeratedByAppInstanceUserCommand:ii,ListSubChannelsCommand:Zn,ListTagsForResourceCommand:Rr,PutChannelExpirationSettingsCommand:qi,PutChannelMembershipPreferencesCommand:nt,PutMessagingStreamingConfigurationsCommand:ai,RedactChannelMessageCommand:So,SearchChannelsCommand:kr,SendChannelMessageCommand:Dr,TagResourceCommand:Lr,UntagResourceCommand:Nr,UpdateChannelCommand:er,UpdateChannelFlowCommand:br,UpdateChannelMessageCommand:xr,UpdateChannelReadMarkerCommand:Br};class La extends Mi{}s(La,"ChimeSDKMessaging"),af(Da,La);const Zc=function(){var C=(0,p.coroutine)(function*(v,b){for(var _=arguments.length,F=new Array(_>2?_-2:0),V=2;V<_;V++)F[V-2]=arguments[V];return yield v.send(new Sr(b),...F)});return s(function(b,_){return C.apply(this,arguments)},"makePagedClientRequest")}();function Dl(C,v){return Fr.apply(this,arguments)}s(Dl,"paginateListChannelBans");function Fr(){return Fr=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,_=new Array(b>2?b-2:0),F=2;F<b;F++)_[F-2]=arguments[F];let V=C.startingToken||void 0,j=!0,ie;for(;j;){if(v.NextToken=V,v.MaxResults=C.pageSize,C.client instanceof Mi)ie=yield _awaitAsyncGenerator(Zc(C.client,v,..._));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ie;const Z=V;V=ie.NextToken,j=!!(V&&(!C.stopOnSameToken||V!==Z))}}),Fr.apply(this,arguments)}s(Fr,"_paginateListChannelBans");const Vn=function(){var C=(0,p.coroutine)(function*(v,b){for(var _=arguments.length,F=new Array(_>2?_-2:0),V=2;V<_;V++)F[V-2]=arguments[V];return yield v.send(new jn(b),...F)});return s(function(b,_){return C.apply(this,arguments)},"makePagedClientRequest")}();function Fn(C,v){return qs.apply(this,arguments)}s(Fn,"paginateListChannelFlows");function qs(){return qs=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,_=new Array(b>2?b-2:0),F=2;F<b;F++)_[F-2]=arguments[F];let V=C.startingToken||void 0,j=!0,ie;for(;j;){if(v.NextToken=V,v.MaxResults=C.pageSize,C.client instanceof Mi)ie=yield _awaitAsyncGenerator(Vn(C.client,v,..._));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ie;const Z=V;V=ie.NextToken,j=!!(V&&(!C.stopOnSameToken||V!==Z))}}),qs.apply(this,arguments)}s(qs,"_paginateListChannelFlows");const Ll=function(){var C=(0,p.coroutine)(function*(v,b){for(var _=arguments.length,F=new Array(_>2?_-2:0),V=2;V<_;V++)F[V-2]=arguments[V];return yield v.send(new $n(b),...F)});return s(function(b,_){return C.apply(this,arguments)},"makePagedClientRequest")}();function qc(C,v){return Na.apply(this,arguments)}s(qc,"paginateListChannelMembershipsForAppInstanceUser");function Na(){return Na=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,_=new Array(b>2?b-2:0),F=2;F<b;F++)_[F-2]=arguments[F];let V=C.startingToken||void 0,j=!0,ie;for(;j;){if(v.NextToken=V,v.MaxResults=C.pageSize,C.client instanceof Mi)ie=yield _awaitAsyncGenerator(Ll(C.client,v,..._));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ie;const Z=V;V=ie.NextToken,j=!!(V&&(!C.stopOnSameToken||V!==Z))}}),Na.apply(this,arguments)}s(Na,"_paginateListChannelMembershipsForAppInstanceUser");const xa=function(){var C=(0,p.coroutine)(function*(v,b){for(var _=arguments.length,F=new Array(_>2?_-2:0),V=2;V<_;V++)F[V-2]=arguments[V];return yield v.send(new vr(b),...F)});return s(function(b,_){return C.apply(this,arguments)},"makePagedClientRequest")}();function eu(C,v){return sr.apply(this,arguments)}s(eu,"paginateListChannelMemberships");function sr(){return sr=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,_=new Array(b>2?b-2:0),F=2;F<b;F++)_[F-2]=arguments[F];let V=C.startingToken||void 0,j=!0,ie;for(;j;){if(v.NextToken=V,v.MaxResults=C.pageSize,C.client instanceof Mi)ie=yield _awaitAsyncGenerator(xa(C.client,v,..._));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ie;const Z=V;V=ie.NextToken,j=!!(V&&(!C.stopOnSameToken||V!==Z))}}),sr.apply(this,arguments)}s(sr,"_paginateListChannelMemberships");const Ba=function(){var C=(0,p.coroutine)(function*(v,b){for(var _=arguments.length,F=new Array(_>2?_-2:0),V=2;V<_;V++)F[V-2]=arguments[V];return yield v.send(new xe(b),...F)});return s(function(b,_){return C.apply(this,arguments)},"makePagedClientRequest")}();function tu(C,v){return ea.apply(this,arguments)}s(tu,"paginateListChannelMessages");function ea(){return ea=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,_=new Array(b>2?b-2:0),F=2;F<b;F++)_[F-2]=arguments[F];let V=C.startingToken||void 0,j=!0,ie;for(;j;){if(v.NextToken=V,v.MaxResults=C.pageSize,C.client instanceof Mi)ie=yield _awaitAsyncGenerator(Ba(C.client,v,..._));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ie;const Z=V;V=ie.NextToken,j=!!(V&&(!C.stopOnSameToken||V!==Z))}}),ea.apply(this,arguments)}s(ea,"_paginateListChannelMessages");const vo=function(){var C=(0,p.coroutine)(function*(v,b){for(var _=arguments.length,F=new Array(_>2?_-2:0),V=2;V<_;V++)F[V-2]=arguments[V];return yield v.send(new bi(b),...F)});return s(function(b,_){return C.apply(this,arguments)},"makePagedClientRequest")}();function Nl(C,v){return Fa.apply(this,arguments)}s(Nl,"paginateListChannelModerators");function Fa(){return Fa=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,_=new Array(b>2?b-2:0),F=2;F<b;F++)_[F-2]=arguments[F];let V=C.startingToken||void 0,j=!0,ie;for(;j;){if(v.NextToken=V,v.MaxResults=C.pageSize,C.client instanceof Mi)ie=yield _awaitAsyncGenerator(vo(C.client,v,..._));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ie;const Z=V;V=ie.NextToken,j=!!(V&&(!C.stopOnSameToken||V!==Z))}}),Fa.apply(this,arguments)}s(Fa,"_paginateListChannelModerators");const ta=function(){var C=(0,p.coroutine)(function*(v,b){for(var _=arguments.length,F=new Array(_>2?_-2:0),V=2;V<_;V++)F[V-2]=arguments[V];return yield v.send(new yr(b),...F)});return s(function(b,_){return C.apply(this,arguments)},"makePagedClientRequest")}();function nu(C,v){return et.apply(this,arguments)}s(nu,"paginateListChannelsAssociatedWithChannelFlow");function et(){return et=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,_=new Array(b>2?b-2:0),F=2;F<b;F++)_[F-2]=arguments[F];let V=C.startingToken||void 0,j=!0,ie;for(;j;){if(v.NextToken=V,v.MaxResults=C.pageSize,C.client instanceof Mi)ie=yield _awaitAsyncGenerator(ta(C.client,v,..._));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ie;const Z=V;V=ie.NextToken,j=!!(V&&(!C.stopOnSameToken||V!==Z))}}),et.apply(this,arguments)}s(et,"_paginateListChannelsAssociatedWithChannelFlow");const Va=function(){var C=(0,p.coroutine)(function*(v,b){for(var _=arguments.length,F=new Array(_>2?_-2:0),V=2;V<_;V++)F[V-2]=arguments[V];return yield v.send(new ii(b),...F)});return s(function(b,_){return C.apply(this,arguments)},"makePagedClientRequest")}();function Vi(C,v){return ar.apply(this,arguments)}s(Vi,"paginateListChannelsModeratedByAppInstanceUser");function ar(){return ar=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,_=new Array(b>2?b-2:0),F=2;F<b;F++)_[F-2]=arguments[F];let V=C.startingToken||void 0,j=!0,ie;for(;j;){if(v.NextToken=V,v.MaxResults=C.pageSize,C.client instanceof Mi)ie=yield _awaitAsyncGenerator(Va(C.client,v,..._));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ie;const Z=V;V=ie.NextToken,j=!!(V&&(!C.stopOnSameToken||V!==Z))}}),ar.apply(this,arguments)}s(ar,"_paginateListChannelsModeratedByAppInstanceUser");const na=function(){var C=(0,p.coroutine)(function*(v,b){for(var _=arguments.length,F=new Array(_>2?_-2:0),V=2;V<_;V++)F[V-2]=arguments[V];return yield v.send(new An(b),...F)});return s(function(b,_){return C.apply(this,arguments)},"makePagedClientRequest")}();function iu(C,v){return yo.apply(this,arguments)}s(iu,"paginateListChannels");function yo(){return yo=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,_=new Array(b>2?b-2:0),F=2;F<b;F++)_[F-2]=arguments[F];let V=C.startingToken||void 0,j=!0,ie;for(;j;){if(v.NextToken=V,v.MaxResults=C.pageSize,C.client instanceof Mi)ie=yield _awaitAsyncGenerator(na(C.client,v,..._));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ie;const Z=V;V=ie.NextToken,j=!!(V&&(!C.stopOnSameToken||V!==Z))}}),yo.apply(this,arguments)}s(yo,"_paginateListChannels");const ru=function(){var C=(0,p.coroutine)(function*(v,b){for(var _=arguments.length,F=new Array(_>2?_-2:0),V=2;V<_;V++)F[V-2]=arguments[V];return yield v.send(new Zn(b),...F)});return s(function(b,_){return C.apply(this,arguments)},"makePagedClientRequest")}();function bo(C,v){return Vr.apply(this,arguments)}s(bo,"paginateListSubChannels");function Vr(){return Vr=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,_=new Array(b>2?b-2:0),F=2;F<b;F++)_[F-2]=arguments[F];let V=C.startingToken||void 0,j=!0,ie;for(;j;){if(v.NextToken=V,v.MaxResults=C.pageSize,C.client instanceof Mi)ie=yield _awaitAsyncGenerator(ru(C.client,v,..._));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ie;const Z=V;V=ie.NextToken,j=!!(V&&(!C.stopOnSameToken||V!==Z))}}),Vr.apply(this,arguments)}s(Vr,"_paginateListSubChannels");const ou=function(){var C=(0,p.coroutine)(function*(v,b){for(var _=arguments.length,F=new Array(_>2?_-2:0),V=2;V<_;V++)F[V-2]=arguments[V];return yield v.send(new kr(b),...F)});return s(function(b,_){return C.apply(this,arguments)},"makePagedClientRequest")}();function su(C,v){return ia.apply(this,arguments)}s(su,"paginateSearchChannels");function ia(){return ia=_wrapAsyncGenerator(function*(C,v){for(var b=arguments.length,_=new Array(b>2?b-2:0),F=2;F<b;F++)_[F-2]=arguments[F];let V=C.startingToken||void 0,j=!0,ie;for(;j;){if(v.NextToken=V,v.MaxResults=C.pageSize,C.client instanceof Mi)ie=yield _awaitAsyncGenerator(ou(C.client,v,..._));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield ie;const Z=V;V=ie.NextToken,j=!!(V&&(!C.stopOnSameToken||V!==Z))}}),ia.apply(this,arguments)}s(ia,"_paginateSearchChannels")},940999:(U,l,f)=>{"use strict";f.r(l),f.d(l,{fromHex:()=>m,toHex:()=>h});const u={},g={};for(let a=0;a<256;a++){let r=a.toString(16).toLowerCase();r.length===1&&(r=`0${r}`),u[a]=r,g[r]=a}function m(a){if(a.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const r=new Uint8Array(a.length/2);for(let n=0;n<a.length;n+=2){const e=a.slice(n,n+2).toLowerCase();if(e in g)r[n/2]=g[e];else throw new Error(`Cannot decode unrecognized sequence ${e} as hexadecimal`)}return r}s(m,"fromHex");function h(a){let r="";for(let n=0;n<a.byteLength;n++)r+=u[a[n]];return r}s(h,"toHex")},464423:(U,l,f)=>{"use strict";f.r(l),f.d(l,{locateWindow:()=>g});const u={};function g(){return typeof window<"u"?window:typeof self<"u"?self:u}s(g,"locateWindow")},940612:(U,l,f)=>{"use strict";f.r(l),f.d(l,{fromUtf8:()=>a,toUtf8:()=>r});const u=s(n=>{const e=[];for(let t=0,i=n.length;t<i;t++){const o=n.charCodeAt(t);if(o<128)e.push(o);else if(o<2048)e.push(o>>6|192,o&63|128);else if(t+1<n.length&&(o&64512)===55296&&(n.charCodeAt(t+1)&64512)===56320){const c=65536+((o&1023)<<10)+(n.charCodeAt(++t)&1023);e.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else e.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(e)},"fromUtf8"),g=s(n=>{let e="";for(let t=0,i=n.length;t<i;t++){const o=n[t];if(o<128)e+=String.fromCharCode(o);else if(192<=o&&o<224){const c=n[++t];e+=String.fromCharCode((o&31)<<6|c&63)}else if(240<=o&&o<365){const p="%"+[o,n[++t],n[++t],n[++t]].map(S=>S.toString(16)).join("%");e+=decodeURIComponent(p)}else e+=String.fromCharCode((o&15)<<12|(n[++t]&63)<<6|n[++t]&63)}return e},"toUtf8");function m(n){return new TextEncoder().encode(n)}s(m,"whatwgEncodingApi_fromUtf8");function h(n){return new TextDecoder("utf-8").decode(n)}s(h,"whatwgEncodingApi_toUtf8");const a=s(n=>typeof TextEncoder=="function"?m(n):u(n),"dist_es_fromUtf8"),r=s(n=>typeof TextDecoder=="function"?h(n):g(n),"dist_es_toUtf8")},266947:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(264323));let h=s(class{needUpdate(r){return this.activeSpeakers?this.speakerScores[r]===0&&this.activeSpeakers.includes(r)||this.speakerScores[r]>0&&!this.activeSpeakers.includes(r):!0}updateActiveSpeakers(r,n,e){if(!this.needUpdate(e))return;const t=[],i=Object.keys(this.speakerScores);for(let d=0;d<i.length;d++){const y=i[d];t.push({attendeeId:y,activeScore:this.speakerScores[y]})}const o=t.sort((d,y)=>y.activeScore-d.activeScore).filter(function(d){return d.activeScore>0}).map(function(d){return d.attendeeId});this.activeSpeakers=o,n(o);const p=o.length>0&&o[0]===this.selfAttendeeId&&r.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==p&&(this.hasBandwidthPriority=p,this.hasBandwidthPriorityCallback(p))}updateScore(r,n,e,t,i){const o=r.calculateScore(e,t,i);this.speakerScores[e]!==o&&(this.speakerScores[e]=o,this.mostRecentUpdateTimestamp[e]=Date.now(),this.updateActiveSpeakers(r,n,e))}subscribe(r,n,e,t){const i=s((c,p)=>{if(!p){this.speakerScores[c]=0,this.mostRecentUpdateTimestamp[c]=Date.now(),this.updateActiveSpeakers(r,n,c);return}this.realtimeController.realtimeSubscribeToVolumeIndicator(c,(S,d,y,E)=>{this.mostRecentUpdateTimestamp[S]=Date.now(),y!==null&&(this.speakerMuteState[S]=y),this.updateScore(r,n,S,d,y)})},"handler");this.detectorCallbackToHandler.set(n,i);const o=new m.default(this.updateIntervalMs);if(o.start(()=>{for(const c in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[c]>this.waitIntervalMs&&this.updateScore(r,n,c,0,this.speakerMuteState[c])}),this.detectorCallbackToActivityTimer.set(n,o),e&&t){const c=new m.default(t);c.start(()=>{e(this.speakerScores)}),this.detectorCallbackToScoresTimer.set(n,c)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)}unsubscribe(r){const n=this.detectorCallbackToHandler.get(r);this.detectorCallbackToHandler.delete(r),n&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n);const e=this.detectorCallbackToActivityTimer.get(r);e&&(e.stop(),this.detectorCallbackToActivityTimer.delete(r));const t=this.detectorCallbackToScoresTimer.get(r);t&&(t.stop(),this.detectorCallbackToHandler.delete(r))}destroy(){return u(this,void 0,void 0,function*(){for(const r of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(r);for(const r of this.detectorCallbackToActivityTimer.values())r.stop();for(const r of this.detectorCallbackToScoresTimer.values())r.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()})}constructor(r,n,e,t=1e3,i=200){this.realtimeController=r,this.selfAttendeeId=n,this.hasBandwidthPriorityCallback=e,this.waitIntervalMs=t,this.updateIntervalMs=i,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}},"DefaultActiveSpeakerDetector");l.default=h},925343:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{calculateScore(g,m,h){(h||m===null)&&(m=0),this.volumes.hasOwnProperty(g)||(this.volumes[g]=0),m>this.silenceThreshold?m=1:m=0;const a=this.volumes[g]*this.speakerWeight+m*(1-this.speakerWeight);this.volumes[g]=a;for(const r in this.volumes)r!==g&&(this.volumes[r]=Math.max(this.volumes[r]-this.takeoverRate*m,0));return a<this.cutoffThreshold?0:a}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}constructor(g=.9,m=.01,h=.2,a=.2){this.speakerWeight=g,this.cutoffThreshold=m,this.silenceThreshold=h,this.takeoverRate=a,this.volumes={}}},"DefaultActiveSpeakerPolicy");l.default=f},623504:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class Kg{static create(g,m){const h=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!g||g.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!h.test(g))throw new Error(`appName must satisfy ${h} regular expression`);const a=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!m||m.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!a.test(m))throw new Error("appVersion must satisfy Semantic Versioning format");return new Kg(g,m)}constructor(g,m){this.appName=g,this.appVersion=m}},"ApplicationMetadata");l.default=f},690:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"Attendee");l.default=f},678521:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(421537)),h=g(f(509936));let a=s(class{bindAudioElement(n){return u(this,void 0,void 0,function*(){if(!n)throw new Error(`Cannot bind audio element: ${n}`);return this.audioElement=n,this.audioElement.autoplay=!0,this.bindAudioMix()})}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver(n=>{this.audioStream&&n.meetingAudioStreamBecameInactive(this.audioStream)}))}bindAudioStream(n){return u(this,void 0,void 0,function*(){if(n){this.audioStream=n;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}})}bindAudioDevice(n){return u(this,void 0,void 0,function*(){if(n&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=n,this.bindAudioMix()})}forEachObserver(n){for(const e of this.observers)h.default.nextTick(()=>{n(e)})}bindAudioMix(){var n,e;return u(this,void 0,void 0,function*(){if(!this.audioElement)return;const t=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),t!==this.audioStream&&this.forEachObserver(d=>{t&&d.meetingAudioStreamBecameInactive(t),this.audioStream&&d.meetingAudioStreamBecameActive(this.audioStream)});const i=((n=this.audioDevice)===null||n===void 0?void 0:n.deviceId)!==this.audioElement.sinkId;if(i&&typeof this.audioElement.sinkId>"u")throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const o=this.audioDevice?this.audioDevice.deviceId:"",c=this.audioElement.sinkId;if(o===c)return;const p=this.audioElement,S=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(p.srcObject=null),i)try{yield p.setSinkId(o)}catch(d){throw(e=this.logger)===null||e===void 0||e.error(`Failed to set sinkId for audio element: ${d}`),d}this.browserBehavior.hasChromiumWebRTC()&&(p.srcObject=S)})}getCurrentMeetingAudioStream(){return u(this,void 0,void 0,function*(){return this.audioStream})}addAudioMixObserver(n){return u(this,void 0,void 0,function*(){this.observers.add(n)})}removeAudioMixObserver(n){return u(this,void 0,void 0,function*(){this.observers.delete(n)})}audioOutputDidChange(n){return u(this,void 0,void 0,function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(n)})}constructor(n){this.logger=n,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new m.default,this.observers=new Set}},"DefaultAudioMixController");l.default=a},506664:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(421537));let m=s(class Hl{static fullbandSpeechMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Hl(4e4,a)}static fullbandMusicMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Hl(64e3,a)}static fullbandMusicStereo(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Hl(128e3,a)}isStereo(){return this.audioBitrateBps===128e3}hasRedundancyEnabled(){return this.enableAudioRedundancy}constructor(a=null,r=!0){this.audioBitrateBps=a,this.enableAudioRedundancy=new g.default().supportsAudioRedundancy()&&r}},"AudioProfile");l.default=m},205427:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;let f=s(class{resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.transceiverController!==void 0&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null}constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.prioritizedSendVideoCodecCapabilities=[],this.degradedVideoSendCodecs=[],this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null}},"AudioVideoControllerState");l.default=f},604697:function(U,l,f){"use strict";var u=this&&this.__createBinding||(Object.create?function(z,Y,de,ce){ce===void 0&&(ce=de),Object.defineProperty(z,ce,{enumerable:!0,get:function(){return Y[de]}})}:function(z,Y,de,ce){ce===void 0&&(ce=de),z[ce]=Y[de]}),g=this&&this.__setModuleDefault||(Object.create?function(z,Y){Object.defineProperty(z,"default",{enumerable:!0,value:Y})}:function(z,Y){z.default=Y}),m=this&&this.__importStar||function(z){if(z&&z.__esModule)return z;var Y={};if(z!=null)for(var de in z)de!=="default"&&Object.prototype.hasOwnProperty.call(z,de)&&u(Y,z,de);return g(Y,z),Y},h=this&&this.__awaiter||function(z,Y,de,ce){function De(Ie){return Ie instanceof de?Ie:new de(function(Le){Le(Ie)})}return s(De,"adopt"),new(de||(de=Promise))(function(Ie,Le){function fe(ae){try{R(ce.next(ae))}catch(pe){Le(pe)}}s(fe,"fulfilled");function ge(ae){try{R(ce.throw(ae))}catch(pe){Le(pe)}}s(ge,"rejected");function R(ae){ae.done?Ie(ae.value):De(ae.value).then(fe,ge)}s(R,"step"),R((ce=ce.apply(z,Y||[])).next())})},a=this&&this.__importDefault||function(z){return z&&z.__esModule?z:{default:z}};Object.defineProperty(l,"__esModule",{value:!0});const r=a(f(266947)),n=a(f(678521)),e=a(f(506664)),t=a(f(421537)),i=a(f(844812)),o=a(f(109412)),c=a(f(577849)),p=a(f(499726)),S=a(f(935451)),d=a(f(122818)),y=a(f(641501)),E=a(f(690561)),I=a(f(420841)),A=a(f(509936)),L=a(f(266661)),M=a(f(308334)),k=a(f(773215)),w=a(f(598410)),N=a(f(790095)),T=m(f(849539)),O=a(f(576442)),D=a(f(838552)),G=f(50380),K=a(f(562562)),H=a(f(579437)),q=a(f(369511)),me=a(f(155870)),we=a(f(780676)),ue=a(f(749365)),Pe=a(f(755069)),Ye=a(f(703766)),be=a(f(103569)),He=a(f(141946)),Ke=a(f(956034)),Ue=a(f(123460)),ht=a(f(718754)),Tt=a(f(874674)),st=a(f(278559)),ut=a(f(115383)),We=a(f(579824)),_t=a(f(252528)),Rt=a(f(173636)),Ae=a(f(124207)),$t=a(f(857995)),rt=a(f(638212)),Ft=a(f(737155)),en=a(f(208803)),on=a(f(386367)),Dn=a(f(254537)),Yt=a(f(935385)),zn=a(f(660937)),vn=a(f(395181)),mt=f(823880),pt=a(f(589417)),Qe=a(f(419507)),Ht=a(f(438507)),xt=f(586283),wn=a(f(333041)),kt=a(f(668077)),J=a(f(473461)),_e=a(f(368695)),Oe=a(f(881497)),Ne=a(f(452188)),$e=a(f(820732)),Fe=a(f(943145)),oe=a(f(205427));let Ce=s(class zl{destroy(){return h(this,void 0,void 0,function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0})}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new r.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(Y){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(Y):null}setAudioProfile(Y){this._audioProfile=Y}addObserver(Y){this.logger.info("adding meeting observer"),this.observerQueue.add(Y)}removeObserver(Y){this.logger.info("removing meeting observer"),this.observerQueue.delete(Y)}forEachObserver(Y){for(const de of this.observerQueue)A.default.nextTick(()=>{this.observerQueue.has(de)&&Y(de)})}initSignalingClient(){this.connectionHealthData.reset(),!this.meetingSessionContext.signalingClient&&(this.meetingSessionContext=new oe.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new t.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new N.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then(()=>{const Y=s(()=>h(this,void 0,void 0,function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}),"handleClosed");this.preStartObserver={handleSignalingClientEvent(de){de.type===O.default.WebSocketClosed&&Y()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)}).catch(Y=>{this.logger.error(`Signaling task pre-start failed: ${Y}`),this.signalingTask=void 0})}start(Y){this.startReturningPromise(Y).then(()=>{this.logger.info("start completed")}).catch(de=>{this.logger.error(`start failed: ${de}`)})}startReturningPromise(Y){return(Y==null?void 0:Y.signalingOnly)===!0?this.prestart():(this.activeSpeakerDetector,new Promise((de,ce)=>{this.sessionStateController.perform(M.default.Connect,()=>{this.actionConnect(!1).then(de).catch(ce)})}))}connectWithPromises(Y){const de=this.meetingSessionContext,ce=s((ft,ke)=>new en.default(this.logger,ke,ft),"timeout");this.monitorTask=new Ke.default(de,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const De=this.monitorTask.once(),Ie=new st.default(de).once();this.receiveIndexTask=new _t.default(de),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const Le=new Ae.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new He.default(de),new Rt.default(de),new Ye.default(de),this.receiveIndexTask]).once(),fe=new we.default(de).once(Le),ge=new H.default(de).once(fe,Ie),R=new ue.default(de).once(ge),ae=new $t.default(de).once(R),pe=new Pe.default(de).once(ae),Se=new Ft.default(de).once(pe),X=new ut.default(de).once(Se);return new Ae.default(this.logger,this.wrapTaskName("AudioVideoStart"),[De,ce(this.configuration.connectionTimeoutMs,new Ae.default(this.logger,"Peer",[Se,X,Y?new en.default(this.logger,new ht.default(this.logger,"FinalizeConnection",[new on.default(de),new rt.default(de)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new rt.default(de)]))])}actionConnect(Y){var de;return h(this,void 0,void 0,function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&new t.default().hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&new t.default().supportsScalableVideoCoding();const ce=!!this.configuration.urls.audioHostURL;if(ce?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new y.default(this.configuration.credentials.attendeeId).hasModality(y.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new Yt.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new zn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new Dn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new vn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new Fe.default(this.logger,this._realtimeController,zl.MIN_VOLUME_DECIBELS,zl.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let Le=this.meetingSessionContext.videoUplinkBandwidthPolicy;Le||(Le=new Ne.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=Le),Le.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Ht.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new J.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new kt.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new $e.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Qe.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new y.default(this.configuration.credentials.attendeeId).hasModality(y.default.MODALITY_CONTENT)){const Le=this.configuration.meetingFeatures.contentMaxResolution===c.default.VideoResolutionUHD;Le&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Le)}else{const Le=this.configuration.meetingFeatures.videoMaxResolution===c.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Le)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver(()=>this.update({needsRenegotiation:!1})),this.meetingSessionContext.lastKnownVideoAvailability=new d.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new pt.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new wn.default,this.meetingSessionContext.videosPaused=new wn.default,this.meetingSessionContext.statsCollector=new K.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new o.default(this,this._realtimeController,this.connectionHealthData,new E.default(this.meetingSessionContext.signalingClient,zl.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},Y||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver(Le=>{mt.Maybe.of(Le.audioVideoDidStartConnecting).map(fe=>fe.bind(Le)(!1))}),(de=this.eventController)===null||de===void 0||de.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const De=ce&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+De);const Ie=this.connectWithPromises(De);try{yield Ie.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(M.default.FinishConnecting,()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()})}catch(Le){this.signalingTask=void 0;const fe=new p.default(this.getMeetingStatusCode(Le)||S.default.TaskFailed);if(this.logger.info(`Start failed: ${fe} due to error ${Le}.`),this.sessionStateController.state()===k.default.NotConnected){this.logger.info("Start failed and not connected. Not cleaning up.");return}this.sessionStateController.perform(M.default.Fail,()=>h(this,void 0,void 0,function*(){yield this.actionDisconnect(fe,!0,Le),this.handleMeetingSessionStatus(fe,Le)||this.notifyStop(fe,Le)}))}})}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new en.default(this.logger,new Ue.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=G.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.forEachObserver(Y=>{mt.Maybe.of(Y.audioVideoDidStart).map(de=>de.bind(Y)())}),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var Y;return this.sessionStateController.state()===k.default.NotConnected?((Y=this.meetingSessionContext.signalingClient)===null||Y===void 0||Y.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise((de,ce)=>{this.sessionStateController.perform(M.default.Disconnect,()=>{this._reconnectController.disableReconnect(),this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new p.default(S.default.Left),!1,null).then(de).catch(ce)})})}stop(){this.stopReturningPromise()}actionDisconnect(Y,de,ce){return h(this,void 0,void 0,function*(){try{yield new Ae.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new en.default(this.logger,new be.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch{this.logger.info("fail to stop")}try{const De=[new en.default(this.logger,new me.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new Ae.default(this.logger,this.wrapTaskName("AudioVideoClean"),De).run()}catch{this.logger.info("fail to clean")}this.sessionStateController.perform(M.default.FinishDisconnecting,()=>{de||this.notifyStop(Y,ce)})})}update(){let de=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{needsRenegotiation:!0}).needsRenegotiation;if(de||(de=this.meetingSessionContext.peer===void 0),de||(de=!this.updateRemoteVideosFromPolicy()),de||(de=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!de)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const ce=this.sessionStateController.perform(M.default.Update,()=>{this.actionUpdateWithRenegotiation(!0)});return ce===w.default.Transitioned||ce===w.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!T.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===T.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const Y=this.detectChangesInVideosToReceive();if(Y===void 0)return!1;const de=Y.added,ce=Y.simulcastStreamUpdates,De=Y.removed,Ie=this.meetingSessionContext,Le=[];for(const[fe,ge]of ce.entries()){const R=new D.default;if(R.streamId=ge,R.attendeeId=Ie.videoStreamIndex.attendeeIdForStreamId(ge),R.mid=Ie.transceiverController.getMidForStreamId(fe),R.mid===void 0)return this.logger.info(`No MID found for stream ID ${fe}, cannot update stream without renegotiation`),!1;if(Le.push(R),Ie.transceiverController.setStreamIdForMid(R.mid,ge),Ie.videoStreamIndex.overrideStreamIdMappings(fe,ge),Ie.videoTileController.haveVideoTileForAttendeeId(R.attendeeId)){const ae=Ie.videoTileController.getVideoTileForAttendeeId(R.attendeeId);if(!ae.setStreamId)return!1;ae.setStreamId(ge)}}return Le.length!==0&&Ie.signalingClient.remoteVideoUpdate(Le,[]),de.length!==0||De.length!==0?!1:(Ie.videoStreamIndex.subscribeFrameSent(),!0)}detectChangesInVideosToReceive(){const Y=this.meetingSessionContext;if(Y.videosToReceive===null||!Y.transceiverController||!Y.transceiverController.getMidForStreamId||!Y.transceiverController.setStreamIdForMid||!Y.videosToReceive.forEach||!Y.signalingClient.remoteVideoUpdate||!Y.videoStreamIndex.overrideStreamIdMappings)return;let de=[];const ce=new Map;let De=[];if(Y.lastVideosToReceive===null)de=Y.videosToReceive.array();else{const Ie=Y.videoStreamIndex;Y.videosToReceive.forEach(Le=>{if(Y.lastVideosToReceive.contain(Le))return;let fe=!1;Y.lastVideosToReceive.forEach(ge=>{fe||Ie.StreamIdsInSameGroup(ge,Le)&&(ce.set(ge,Le),fe=!0)}),fe||de.push(Le)}),De=Y.lastVideosToReceive.array().filter(Le=>{const fe=Y.videosToReceive.contain(Le),ge=ce.has(Le);return!fe&&!ge})}return this.logger.info(`Request to update remote videos with added: [${de}], updated: [${Array.from(ce.entries()).map(Ie=>{let[Le,fe]=Ie;return`${Le}->${fe}`}).join(",")}], removed: [${De}]`),{added:de,removed:De,simulcastStreamUpdates:ce}}isNotAddingOrRemovingStreams(){const Y=this.detectChangesInVideosToReceive();if(Y===void 0)return!1;const de=Y.added,ce=Y.removed;return de.length!==0||ce.length!==0?!1:(this.meetingSessionContext.videoStreamIndex.subscribeFrameSent(),!0)}sendRemoteVideoUpdate(){const Y=this.meetingSessionContext;if(Y.videosToReceive===null)return!1;const de=Y.videosToReceive.array().map(fe=>Y.videoStreamIndex.groupIdForStreamId(fe)),ce=xt.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(Y,de,Y.videoDownlinkBandwidthPolicy.getVideoPreferences()),De=new Map,Ie=[];for(const fe of ce){let ge=!1;if(!Y.lastVideoSubscriptionConfiguration.has(fe.groupId))ge=!0;else{const R=Y.lastVideoSubscriptionConfiguration.get(fe.groupId);fe.equals(R)||(this.logger.debug(`${JSON.stringify(fe)} does not equal ${JSON.stringify(R)}, sending update`),ge=!0)}De.set(fe.groupId,fe),ge&&Ie.push(fe)}Y.lastVideoSubscriptionConfiguration=De;const Le=[];if(Y.lastVideosToReceive!==null){const fe=new Set(de);for(const ge of Y.lastVideosToReceive.array()){const R=Y.videoStreamIndex.groupIdForStreamId(ge);if(!fe.has(R)){const ae=Y.transceiverController.getMidForGroupId(R);if(ae===void 0){Y.logger.warn(`Could not find MID for group ID to remove: ${R}`);continue}Le.push(ae)}}}return(Ie.length!==0||Le.length!==0)&&Y.signalingClient.remoteVideoUpdate(Ie,Le),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const Y=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&this.meetingSessionContext.transceiverController.hasVideoInput()&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(Y)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const Y=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!Y||!Y.headerExtensions?!1:Y.headerExtensions.some(de=>de.uri==="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00")}restartLocalVideo(Y){const de=s(()=>h(this,void 0,void 0,function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),Y()}),"restartVideo"),ce=this.sessionStateController.perform(M.default.Update,()=>{de()});return ce===w.default.Transitioned||ce===w.default.DeferredTransition}replaceLocalVideo(Y){return h(this,void 0,void 0,function*(){if(!Y||Y.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const de=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(de){const ce=de.state(),De=Y.getVideoTracks()[0].getSettings();de.bindVideoStream(ce.boundAttendeeId,!0,Y,De.width,De.height,ce.streamId,ce.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(Y.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=Y,this.logger.info("Local video input is updated")})}replaceLocalAudio(Y){return h(this,void 0,void 0,function*(){if(!Y||Y.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime(),!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(Y.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=Y,this.logger.info("Local audio input is updated")})}actionUpdateWithRenegotiation(Y){return h(this,void 0,void 0,function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new Ae.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new We.default(this.meetingSessionContext),new en.default(this.logger,new Ae.default(this.logger,"UpdateSession",[new H.default(this.meetingSessionContext),new ue.default(this.meetingSessionContext),new $t.default(this.meetingSessionContext),new Pe.default(this.meetingSessionContext),new Ft.default(this.meetingSessionContext),new rt.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),Y&&this.sessionStateController.perform(M.default.FinishUpdating,()=>{this.actionFinishUpdating()})}catch(de){this.sessionStateController.perform(M.default.FinishUpdating,()=>{const ce=new p.default(this.getMeetingStatusCode(de)||S.default.TaskFailed);ce.statusCode()!==S.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(ce,de)})}})}notifyStop(Y,de){var ce;if(this.forEachObserver(De=>{mt.Maybe.of(De.audioVideoDidStop).map(Ie=>Ie.bind(De)(Y))}),this.eventController){const{signalingOpenDurationMs:De,poorConnectionCount:Ie,startTimeMs:Le,iceGatheringDurationMs:fe,attendeePresenceDurationMs:ge,meetingStartDurationMs:R}=this.meetingSessionContext,ae={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Le===null?0:Math.round(Date.now()-Le),meetingStatus:S.default[Y.statusCode()],signalingOpenDurationMs:De,iceGatheringDurationMs:fe,attendeePresenceDurationMs:ge,poorConnectionCount:Ie,meetingStartDurationMs:R,retryCount:this.totalRetryCount},pe=de&&de.message||((ce=Y.toString)===null||ce===void 0?void 0:ce.call(Y))||"";ae.meetingDurationMs===0?(ae.meetingErrorMessage=pe,delete ae.meetingDurationMs,delete ae.attendeePresenceDurationMs,delete ae.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",ae)):Y.isFailure()||Y.isAudioConnectionFailure()?(ae.meetingErrorMessage=pe,this.eventController.publishEvent("meetingFailed",ae)):this.eventController.publishEvent("meetingEnded",ae)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const Y=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(Y)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(Y,de){this.promotedToPrimaryMeeting&&(this.promotedToPrimaryMeeting=!1,this.forEachObserver(De=>{mt.Maybe.of(De.audioVideoWasDemotedFromPrimaryMeeting).map(Ie=>Ie.bind(De)(new p.default(S.default.AudioVideoDisconnectedWhilePromoted)))}));const ce=this._reconnectController.retryWithBackoff(()=>h(this,void 0,void 0,function*(){this.sessionStateController.state()===k.default.NotConnected?this.sessionStateController.perform(M.default.Connect,()=>{this.actionConnect(!0)}):this.sessionStateController.perform(M.default.Reconnect,()=>{this.actionReconnect(Y)}),this.totalRetryCount+=1}),()=>{this.logger.info("canceled retry")});return ce||this.sessionStateController.perform(M.default.Fail,()=>{this.actionDisconnect(Y,!1,de)}),ce}actionReconnect(Y){return h(this,void 0,void 0,function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver(de=>{mt.Maybe.of(de.audioVideoDidStartConnecting).map(ce=>ce.bind(de)(!0))})),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset();try{yield new Ae.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new en.default(this.logger,new Ae.default(this.logger,"Media",[new q.default(this.meetingSessionContext),new Ae.default(this.logger,"Signaling",[new Ue.default(this.meetingSessionContext),new Ye.default(this.meetingSessionContext)]),new we.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new We.default(this.meetingSessionContext),new en.default(this.logger,new Ae.default(this.logger,"UpdateSession",[new H.default(this.meetingSessionContext),new ue.default(this.meetingSessionContext),new $t.default(this.meetingSessionContext),new Pe.default(this.meetingSessionContext),new Ft.default(this.meetingSessionContext),new rt.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(M.default.FinishConnecting,()=>{if(this.eventController){const{signalingOpenDurationMs:de,poorConnectionCount:ce,startTimeMs:De,iceGatheringDurationMs:Ie,attendeePresenceDurationMs:Le,meetingStartDurationMs:fe}=this.meetingSessionContext,ge={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-De),meetingStatus:S.default[Y.statusCode()],signalingOpenDurationMs:de,iceGatheringDurationMs:Ie,attendeePresenceDurationMs:Le,poorConnectionCount:ce,meetingStartDurationMs:fe,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",ge)}this.actionFinishConnecting()})}catch(de){this.sessionStateController.perform(M.default.FinishConnecting,()=>{this.logger.info("failed to reconnect audio-video session");const ce=new p.default(this.getMeetingStatusCode(de)||S.default.TaskFailed);this.handleMeetingSessionStatus(ce,de)})}this.connectionHealthData.setConnectionStartTime()})}wrapTaskName(Y){return`${Y}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(Y){const de=/the meeting status code: (\d+)/.exec(Y&&Y.message);return de&&de.length>1?Number.parseInt(de[1],10):null}enforceBandwidthLimitationForSender(Y){return h(this,void 0,void 0,function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(Y)})}handleMeetingSessionStatus(Y,de){if(this.logger.info(`handling status: ${S.default[Y.statusCode()]}`),Y.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(Y),Y.statusCode()===S.default.IncompatibleSDP)return this.restartLocalVideo(()=>{this.logger.info("handled incompatible SDP by attempting to restart video")}),!0;if(Y.statusCode()===S.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver(ce=>{mt.Maybe.of(ce.videoSendDidBecomeUnavailable).map(De=>De.bind(ce)())}),!1;if(Y.statusCode()===S.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver(ce=>{mt.Maybe.of(ce.audioVideoWasDemotedFromPrimaryMeeting).map(De=>De.bind(ce)(Y))}),!1;if(Y.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(Y.isFailure()||Y.isTerminal())&&this.meetingSessionContext.reconnectController){const ce=this.reconnect(Y,de);return ce?this.logger.warn(`will retry due to status code ${S.default[Y.statusCode()]}${de?` and error: ${de.message}`:""}`):this.logger.error(`failed with status code ${S.default[Y.statusCode()]}${de?` and error: ${de.message}`:""}`),ce}return!1}setVideoMaxBandwidthKbps(Y){if(Y<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${Y} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(Y)),this.maxUplinkBandwidthKbps=Y}handleHasBandwidthPriority(Y){return h(this,void 0,void 0,function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink){this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(Y),yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();return}const de=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(Y);const ce=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();de!==ce&&(this.logger.info(`video send bandwidth priority ${Y} max has changed from ${de} kbps to ${ce} kbps`),yield this.enforceBandwidthLimitationForSender(ce))}})}pauseReceivingStream(Y){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([Y])}resumeReceivingStream(Y){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([Y])}setVideoCodecSendPreferences(Y){this.videoSendCodecPreferences=Y,this.meetingSessionContext.videoSendCodecPreferences=Y,this.sessionStateController.state()!==k.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:Y}=this.meetingSessionContext;if(!Y)return this.logger.info("meeting has not started"),[];const de=this.configuration.credentials.attendeeId;return Y.allVideoSendingSourcesExcludingSelf(de)}encodingSimulcastLayersDidChange(Y){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver(de=>{mt.Maybe.of(de.encodingSimulcastLayersDidChange).map(ce=>ce.bind(de)(Y))})}promoteToPrimaryMeeting(Y){return this.actionPromoteToPrimaryMeeting(Y)}actionPromoteToPrimaryMeeting(Y){return h(this,void 0,void 0,function*(){let de=new p.default(S.default.SignalingRequestFailed);return yield new Ae.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new en.default(this.logger,new Tt.default(this.meetingSessionContext,Y,ce=>{de=ce}),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=de.statusCode()===S.default.OK,de})}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver(Y=>{mt.Maybe.of(Y.audioVideoWasDemotedFromPrimaryMeeting).map(de=>de.bind(Y)(new p.default(S.default.OK)))})}videoInputDidChange(Y){return h(this,void 0,void 0,function*(){if(this.logger.info("Receive a video input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating video input because there is no active meeting and peer connection");return}this._videoTileController.hasStartedLocalVideoTile()&&(Y?yield this.replaceLocalVideo(Y):this._videoTileController.stopLocalVideoTile())})}audioInputDidChange(Y){return h(this,void 0,void 0,function*(){if(this.logger.info("Receive an audio input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating audio input because there is no active meeting and peer connection");return}if(!Y)try{Y=yield this.mediaStreamBroker.acquireAudioInputStream()}catch{this.logger.error("Could not acquire audio track from mediaStreamBroker");return}yield this.replaceLocalAudio(Y)})}constructor(Y,de,ce,De,Ie,Le){this._audioProfile=new e.default,this.connectionHealthData=new i.default,this.observerQueue=new Set,this.meetingSessionContext=new oe.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.destroyed=!1,this._logger=de,this.sessionStateController=new L.default(this._logger),this._configuration=Y,this._webSocketAdapter=ce,this._realtimeController=new I.default(De),this._realtimeController.realtimeSetLocalAttendeeId(Y.credentials.attendeeId,Y.credentials.externalUserId),this._mediaStreamBroker=De,this._reconnectController=Ie,this._videoTileController=new _e.default(new Oe.default,this,this._logger),this._audioMixController=new n.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=Le}},"DefaultAudioVideoController");l.default=Ce,Ce.MIN_VOLUME_DECIBELS=-42,Ce.MAX_VOLUME_DECIBELS=-14,Ce.PING_PONG_INTERVAL_MS=1e4},351884:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(222325)),m=u(f(336921)),h=u(f(199267)),a=u(f(740880)),r=u(f(750952)),n=u(f(678280)),e=u(f(499726)),t=u(f(935451)),i=u(f(379414)),o=u(f(554791)),c=u(f(709345)),p=u(f(604697));let S=s(class extends p.default{setAudioProfile(y){}start(){}stop(){}promoteToPrimaryMeeting(y){return Promise.resolve(new e.default(t.default.OK))}demoteFromPrimaryMeeting(){}constructor(y){const E=new r.default;E.meetingId="",E.externalMeetingId="",E.credentials=new n.default,E.credentials.attendeeId="",E.credentials.joinToken="",E.urls=new i.default,E.urls.turnControlURL="",E.urls.audioHostURL="",E.urls.signalingURL="wss://localhost/";const I=new h.default;super(y||E,I,new c.default(new h.default),new a.default,new o.default(0,new g.default(0,0,0)),new m.default(y||E,I))}},"NoOpAudioVideoController");l.default=S},575289:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(h,a,r,n){function e(t){return t instanceof r?t:new r(function(i){i(t)})}return s(e,"adopt"),new(r||(r=Promise))(function(t,i){function o(S){try{p(n.next(S))}catch(d){i(d)}}s(o,"fulfilled");function c(S){try{p(n.throw(S))}catch(d){i(d)}}s(c,"rejected");function p(S){S.done?t(S.value):e(S.value).then(o,c)}s(p,"step"),p((n=n.apply(h,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const g=f(924519);let m=s(class{addObserver(a){this.audioVideoController.addObserver(a),this.trace("addObserver")}removeObserver(a){this.audioVideoController.removeObserver(a),this.trace("removeObserver")}setAudioProfile(a){this.trace("setAudioProfile",a),this.audioVideoController.setAudioProfile(a)}start(a){this.audioVideoController.start(a),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(a){return this.trace("getRTCPeerConnectionStats",a?a.id:null),this.audioVideoController.getRTCPeerConnectionStats(a)}bindAudioElement(a){const r=this.audioMixController.bindAudioElement(a);return this.trace("bindAudioElement",a.id,r),r}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(a){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(a)}removeAudioMixObserver(a){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(a)}bindVideoElement(a,r){this.videoTileController.bindVideoElement(a,r),this.trace("bindVideoElement",{tileId:a,videoElementId:r.id})}unbindVideoElement(a){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.videoTileController.unbindVideoElement(a,r),this.trace("unbindVideoElement",{tileId:a,cleanUpVideoElement:r})}startLocalVideoTile(){const a=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,a),a}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const a=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,a),a}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const a=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),a}pauseVideoTile(a){this.videoTileController.pauseVideoTile(a),this.trace("pauseVideoTile",a)}unpauseVideoTile(a){this.videoTileController.unpauseVideoTile(a),this.trace("unpauseVideoTile",a)}getVideoTile(a){const r=this.videoTileController.getVideoTile(a);return this.trace("getVideoTile",a),r}getAllRemoteVideoTiles(){const a=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),a}getAllVideoTiles(){const a=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),a}addVideoTile(){const a=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,a.state()),a}removeVideoTile(a){this.videoTileController.removeVideoTile(a),this.trace("removeVideoTile",a)}removeVideoTilesByAttendeeId(a){const r=this.videoTileController.removeVideoTilesByAttendeeId(a);return this.trace("removeVideoTilesByAttendeeId",a,r),r}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(a){const r=this.videoTileController.captureVideoTile(a);return this.trace("captureVideoTile",a),r}realtimeSubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(a),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(a),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSetCanUnmuteLocalAudio(a),this.trace("realtimeSetCanUnmuteLocalAudio",a)}realtimeSubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const a=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,a),a}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const a=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),a}realtimeSubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const a=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),a}realtimeSubscribeToVolumeIndicator(a,r){this.realtimeController.realtimeSubscribeToVolumeIndicator(a,r),this.trace("realtimeSubscribeToVolumeIndicator",a)}realtimeUnsubscribeFromVolumeIndicator(a,r){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(a,r),this.trace("realtimeUnsubscribeFromVolumeIndicator",a,r)}realtimeSubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(a),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(a),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(a,r,n){this.realtimeController.realtimeSendDataMessage(a,r,n),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(a,r){this.realtimeController.realtimeSubscribeToReceiveDataMessage(a,r),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(a){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(a),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(a){this.realtimeController.realtimeSubscribeToFatalError(a),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(a){this.realtimeController.realtimeUnsubscribeToFatalError(a),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(a,r,n,e){this.audioVideoController.activeSpeakerDetector.subscribe(a,r,n,e),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(a){this.audioVideoController.activeSpeakerDetector.unsubscribe(a),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const r=yield this.deviceController.listAudioInputDevices(a);return this.trace("listAudioInputDevices",a,r),r})}listVideoInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const r=yield this.deviceController.listVideoInputDevices(a);return this.trace("listVideoInputDevices",a,r),r})}listAudioOutputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const r=yield this.deviceController.listAudioOutputDevices(a);return this.trace("listAudioOutputDevices",a,r),r})}startAudioInput(a){return u(this,void 0,void 0,function*(){return this.trace("startAudioInput",a),this.deviceController.startAudioInput(a)})}stopAudioInput(){return u(this,void 0,void 0,function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()})}startVideoInput(a){return u(this,void 0,void 0,function*(){return g.isVideoTransformDevice(a)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",a),this.deviceController.startVideoInput(a)})}stopVideoInput(){return u(this,void 0,void 0,function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()})}chooseAudioOutput(a){const r=this.deviceController.chooseAudioOutput(a);return this.trace("chooseAudioOutput",a),r}addDeviceChangeObserver(a){this.deviceController.addDeviceChangeObserver(a),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(a){this.deviceController.removeDeviceChangeObserver(a),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const a=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),a}startVideoPreviewForVideoInput(a){this.deviceController.startVideoPreviewForVideoInput(a),this.trace("startVideoPreviewForVideoInput",a.id)}stopVideoPreviewForVideoInput(a){this.deviceController.stopVideoPreviewForVideoInput(a),this.trace("stopVideoPreviewForVideoInput",a.id)}setDeviceLabelTrigger(a){this.deviceController.setDeviceLabelTrigger(a),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(a){const r=this.deviceController.mixIntoAudioInput(a);return this.trace("mixIntoAudioInput",a.id),r}chooseVideoInputQuality(a,r,n){this.deviceController.chooseVideoInputQuality(a,r,n),this.trace("chooseVideoInputQuality",{width:a,height:r,frameRate:n})}setVideoMaxBandwidthKbps(a){this.audioVideoController.setVideoMaxBandwidthKbps(a),this.trace("setVideoMaxBandwidthKbps",a)}setVideoCodecSendPreferences(a){this.audioVideoController.setVideoCodecSendPreferences(a),this.trace("setVideoCodecSendPreferences",a)}getVideoInputQualitySettings(){const a=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),a}setContentAudioProfile(a){this.trace("setContentAudioProfile",a),this.contentShareController.setContentAudioProfile(a)}enableSimulcastForContentShare(a,r){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(a,r)}enableSVCForContentShare(a){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(a)}startContentShare(a){const r=this.contentShareController.startContentShare(a);return this.trace("startContentShare"),r}startContentShareFromScreenCapture(a,r){const n=this.contentShareController.startContentShareFromScreenCapture(a,r);return this.trace("startContentShareFromScreenCapture"),n}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(a){this.contentShareController.addContentShareObserver(a),this.trace("addContentShareObserver")}removeContentShareObserver(a){this.contentShareController.removeContentShareObserver(a),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(a){this.contentShareController.setContentShareVideoCodecPreferences(a),this.trace("setContentShareVideoCodecPreferences")}trace(a,r,n){const e=this.audioVideoController.configuration.meetingId,t=this.audioVideoController.configuration.credentials.attendeeId;let i=`API/DefaultAudioVideoFacade/${e}/${t}/${a}`;typeof r<"u"&&(i+=` ${JSON.stringify(r)}`),typeof n<"u"&&(i+=` -> ${JSON.stringify(n)}`),this.audioVideoController.logger.info(i)}getRemoteVideoSources(){const a=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,a),a}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(a){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const r=this.audioVideoController.promoteToPrimaryMeeting(a);return this.trace("promoteToPrimaryMeeting",null,r),r}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(a){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}constructor(a,r,n,e,t,i){this.audioVideoController=a,this.videoTileController=r,this.realtimeController=n,this.audioMixController=e,this.deviceController=t,this.contentShareController=i}},"DefaultAudioVideoFacade");l.default=m},333525:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(218391)),h=f(676243);let a=s(class extends m.default{drawImageWithMask(n,e){const t=this.blurredImage,{canvasCtx:i,targetCanvas:o}=this,{width:c,height:p}=o;if(!e||!t){i.clearRect(0,0,c,p);return}this.scaledCanvas.getContext("2d").putImageData(e,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),i.save(),i.clearRect(0,0,c,p),i.drawImage(this.scaledCanvas,0,0,c,p),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,c,p),i.globalCompositeOperation="destination-over",i.drawImage(this.blurCanvas,0,0,c,p),i.restore()}setBlurStrength(n){if(super.setBlurStrength(n),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=h.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(n){if(this.logger.info(`received initialize message: ${this.stringify(n)}`),!n.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(n){this.blurredImage=n.payload.blurOutput,super.handlePredict(n)}destroy(){const n=Object.create(null,{destroy:{get:()=>super.destroy}});var e;return u(this,void 0,void 0,function*(){n.destroy.call(this),(e=this.blurCanvas)===null||e===void 0||e.remove(),this.blurCanvas=void 0})}constructor(n,e){super(n,e),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}},"BackgroundBlurProcessorBuiltIn");l.default=a},218391:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(327252)),h=f(676243),a=g(f(810407));let r=s(class extends m.default{validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(t,0,0);const{canvasCtx:o,targetCanvas:c}=this,{width:p,height:S}=c;o.save(),o.clearRect(0,0,p,S),o.drawImage(this.scaledCanvas,0,0,p,S),o.globalCompositeOperation="source-in",o.drawImage(e,0,0,p,S),o.globalCompositeOperation="destination-over",o.filter=`blur(${this.blurAmount}px)`,o.drawImage(e,0,0,c.width,c.height),o.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=h.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return u(this,void 0,void 0,function*(){const e=document.createElement("canvas"),t=e.getContext("2d").filter!==void 0;return e.remove(),t})}setEventController(e){this.eventController?this.eventController=e:(this.eventController=e,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const e={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",e)}constructor(e,t){super("background blur",e,t,new a.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: ${this.stringify(t)}`)}},"BackgroundBlurProcessorProvided");l.default=r},676243:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.BlurStrengthMapper=void 0;const f={LOW:7,MEDIUM:15,HIGH:30};let u=s(class{static getBlurAmount(m,h){if(m<=0)throw new Error(`invalid value for blur strength: ${m}`);return Math.round(m*h.height/this.BLUR_STRENGTH_DIVISOR)}},"BlurStrengthMapper");l.BlurStrengthMapper=u,u.BLUR_STRENGTH_DIVISOR=540,l.default=f},595284:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(c,p,S,d){function y(E){return E instanceof S?E:new S(function(I){I(E)})}return s(y,"adopt"),new(S||(S=Promise))(function(E,I){function A(k){try{M(d.next(k))}catch(w){I(w)}}s(A,"fulfilled");function L(k){try{M(d.throw(k))}catch(w){I(w)}}s(L,"rejected");function M(k){k.done?E(k.value):y(k.value).then(A,L)}s(M,"step"),M((d=d.apply(c,p||[])).next())})},g=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(424392)),h=g(f(63145)),a=g(f(938402)),r=g(f(739864)),n=g(f(333525)),e=g(f(218391)),t=g(f(676243));let i=s(class extends r.default{setBlurStrength(){}loadAssets(){return u(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}},"NoOpBackgroundBlurProcessor"),o=s(class aa extends m.default{static create(p,S){return u(this,void 0,void 0,function*(){p=aa.resolveSpec(p),S=aa.resolveOptions(S);const{logger:d}=S,y=yield aa.isSupported(p,S);if(d.info(`processor is ${y?"":"not"} supported`),!y)return d.warn("Using no-op processor because background blur is not supported"),new i;let E;return(yield e.default.isSupported())?(d.info("Using browser-provided background blur"),E=new e.default(p,S)):(d.info("Using built-in background blur"),E=new n.default(p,S)),yield E.loadAssets(),E})}static resolveOptions(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=Object.assign({},p);return S.blurStrength||(S.blurStrength=t.default.MEDIUM),S.logger||(S.logger=new h.default("BackgroundBlurProcessor",a.default.INFO)),S=super.resolveOptions(S),S}static isSupported(p,S){return p=aa.resolveSpec(p),S=aa.resolveOptions(S),super.isSupported(p,S)}},"BackgroundBlurVideoFrameProcessor");l.default=o},810407:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(755859));let m=s(class extends g.default{},"BackgroundBlurVideoFrameProcessorDelegate");l.default=m},100510:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class Jg{static builder(){return new Jg}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const g={height:144,width:256,range:[0,1],channels:3},m={height:144,width:256,range:[0,1],channels:1},h="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=h,this.input=g,this.output=m,this}withPath(g){return this.path=g,this}withInput(g){return this.input=g,this}withOutput(g){return this.output=g,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}constructor(){this.path=null,this.input=null,this.output=null}},"ModelSpecBuilder");l.default=f},307841:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=.8;let u=s(class{reportEvent(m){const h=m-this.lastReportedEventTimestamp;if(h>=this.reportingPeriodMillis){const a=this.filterCount,r=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=m,this.framerate===0||a===0)return;const n=Math.round(r/a),e=Math.round(this.framerate*(h/1e3))-a,t=Math.round(100*r/h);n>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:e,avgFilterDurationMillis:n,framerate:this.framerate,periodMillis:h}),t>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:t,filterMillis:r,periodMillis:h})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*f)}frameReceived(m){m!==this.framerate&&(this.framerate=m,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const h=Date.now();this.reportEvent(h)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}constructor(m,h,a,r){this.delegate=m,this.reportingPeriodMillis=h,this.filterCPUUtilization=a,this.logger=r,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}},"BackgroundFilterFrameCounter");l.default=u},327252:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(t,i,o,c){function p(S){return S instanceof o?S:new o(function(d){d(S)})}return s(p,"adopt"),new(o||(o=Promise))(function(S,d){function y(A){try{I(c.next(A))}catch(L){d(L)}}s(y,"fulfilled");function E(A){try{I(c.throw(A))}catch(L){d(L)}}s(E,"rejected");function I(A){A.done?S(A.value):p(A.value).then(y,E)}s(I,"step"),I((c=c.apply(t,i||[])).next())})},g=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.BackgroundFilterMonitor=void 0;const m=f(120165),h=g(f(895296)),a=g(f(307841));let r=s(class{whenNext(){return this.promise||(this.promise=new Promise(i=>this.resolve=i)),this.promise}next(i){this.value=i,this.resolve(i),delete this.promise}constructor(){this.value=void 0,this.resolve=null}},"DeferredObservable"),n=s(class bu{static createWorkerPromise(){const i={resolve:null,reject:null,promise:null};return i.promise=new Promise((o,c)=>{i.resolve=o,i.reject=c}),i}validateSpec(i){if(!i)throw new Error("processor has null spec");if(!i.model)throw new Error("processor spec has null model");if(!i.paths)throw new Error("processor spec has null paths")}validateOptions(i){if(!i)throw new Error("processor has null options");if(!i.logger)throw new Error("processor has null options - logger");if(!i.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!i.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(i){this.videoFramesPerFilterUpdate=1,this.frameCounter=new a.default(this.delegate,i.reportingPeriodMillis,i.filterCPUUtilization,this.logger),this.cpuMonitor=new e(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(i){return JSON.stringify(i,null,2)}handleInitialize(i){if(this.logger.info(`received initialize message: ${this.stringify(i)}`),!i.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const o=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:o.path,inputHeight:o.input.height,inputWidth:o.input.width,inputChannels:4,modelRangeMin:o.input.range[0],modelRangeMax:o.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(i){if(this.logger.info(`received load model message: ${this.stringify(i)}`),i.payload!==2){this.logger.error("failed to load model! status: "+i.payload),this.loadModelPromise.reject(new Error("failed to load model! status: "+i.payload));return}this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(i){this.mask$.next(i.payload.output)}handleWorkerEvent(i){const o=i.data;switch(o.msg){case"initialize":this.handleInitialize(o);break;case"loadModel":this.handleLoadModel(o);break;case"predict":this.handlePredict(o);break;default:this.logger.info(`unexpected event msg: ${this.stringify(o)}`);break}}loadAssets(){return u(this,void 0,void 0,function*(){this.logger.info("start initializing the processor");try{this.worker=yield m.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",i=>this.handleWorkerEvent(i)),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(i){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${i.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)})}process(i){return u(this,void 0,void 0,function*(){if(this.destroyed)return i;this.frameCounter.frameReceived(i[0].framerate),this.cpuMonitor.frameReceived();const o=i[0].asCanvasElement();if(!o)return i;if(!this.modelInitialized)return i[0]=this.canvasVideoFrameBuffer,i;const c=o.width,p=o.height;if(c===0||p===0)return i;this.sourceWidth===0&&(this.sourceWidth=c,this.sourceHeight=p,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),(this.sourceWidth!==c||this.sourceHeight!==p)&&(this.sourceWidth=c,this.sourceHeight=p,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let S=this.mask$.value;const d=this.spec.model.input.width/o.width,y=this.spec.model.input.height/o.height;this.scaledCanvas===void 0&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const E=this.scaledCanvas.getContext("2d");E.save(),E.scale(d,y),E.drawImage(o,0,0),E.restore();const I=E.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const A=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:I},[I.data.buffer]),S=yield A}this.destroyed||this.drawImageWithMask(o,S)}catch(S){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${S}`),i}finally{this.frameCounter.filterComplete(),this.frameNumber++}return i[0]=this.canvasVideoFrameBuffer,i})}updateVideoFramesPerFilterUpdate(i){i!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=i,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var i,o,c,p;return u(this,void 0,void 0,function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),(i=this.worker)===null||i===void 0||i.postMessage({msg:"destroy"}),(o=this.worker)===null||o===void 0||o.postMessage({msg:"stop"}),(c=this.targetCanvas)===null||c===void 0||c.remove(),this.targetCanvas=void 0,(p=this.scaledCanvas)===null||p===void 0||p.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)})}constructor(i,o,c,p,S){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new h.default(this.targetCanvas),this.mask$=new r,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=bu.createWorkerPromise(),this.loadModelPromise=bu.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=i,this.validateSpec(o),this.validateOptions(c),this.spec=o,this.logger=c.logger,this.delegate=p,this.initCPUMonitor(c),this.eventController=S}},"BackgroundFilterProcessor");l.default=n;let e=s(class{filterCPUUtilizationHigh(){const i=Date.now();i-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=i,this.observer.reduceCPUUtilization())}frameReceived(){const i=Date.now();i-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis*2&&(this.lastCPUChangeTimestamp=i,this.observer.increaseCPUUtilization())}constructor(i,o){this.monitoringPeriodMillis=i,this.observer=o,this.lastCPUChangeTimestamp=0}},"BackgroundFilterMonitor");l.BackgroundFilterMonitor=e},424392:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(c,p,S,d){function y(E){return E instanceof S?E:new S(function(I){I(E)})}return s(y,"adopt"),new(S||(S=Promise))(function(E,I){function A(k){try{M(d.next(k))}catch(w){I(w)}}s(A,"fulfilled");function L(k){try{M(d.throw(k))}catch(w){I(w)}}s(L,"rejected");function M(k){k.done?E(k.value):y(k.value).then(A,L)}s(M,"step"),M((d=d.apply(c,p||[])).next())})},g=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const m=f(120165),h=f(966951),a=g(f(100510)),r=g(f(421537)),n=g(f(508338)),e=s(()=>a.default.builder().withSelfieSegmentationDefaults().build(),"CREATE_DEFAULT_MODEL_SPEC"),t="https://static.sdkassets.chime.aws",i={worker:`${t}/bgblur/workers/worker.js`,wasm:`${t}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${t}/bgblur/wasm/_cwt-wasm-simd.wasm`};let o=s(class{static defaultAssetSpec(){const p=n.default.sdkVersionSemVer;return{assetGroup:`sdk-${p.major}.${p.minor}`}}static createUrlWithParams(p,S){const d=new URL(p),y=Object.keys(S);for(const E of y)S[E]!==void 0&&d.searchParams.set(E,S[E]);return d.toString()}static resolveSpec(p){const{paths:S=i,model:d=e(),assetGroup:y=this.defaultAssetSpec().assetGroup,revisionID:E=this.defaultAssetSpec().revisionID}=p||{},I={assetGroup:y,revisionID:E,sdk:encodeURIComponent(n.default.sdkVersion),ua:encodeURIComponent(n.default.sdkUserAgentLowResolution)};return S.worker=this.createUrlWithParams(S.worker,I),S.wasm=this.createUrlWithParams(S.wasm,I),S.simd=this.createUrlWithParams(S.simd,I),d.path=this.createUrlWithParams(d.path,I),{paths:S,model:d,assetGroup:y,revisionID:E}}static resolveOptions(p){p.reportingPeriodMillis||(p.reportingPeriodMillis=1e3);const S=30;return p.filterCPUUtilization?(p.filterCPUUtilization<0||p.filterCPUUtilization>100)&&(p.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${S} percent`),p.filterCPUUtilization=S):p.filterCPUUtilization=S,p}static isSupported(p,S){const{logger:d}=S;return typeof globalThis>"u"?(d.info("Browser does not have globalThis."),Promise.resolve(!1)):new r.default().supportsBackgroundFilter()?h.supportsWASM(globalThis,d)?this.supportsBackgroundFilter(globalThis,p,d):(d.info("Browser does not support WASM."),Promise.resolve(!1)):(d.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,S=arguments.length>1?arguments[1]:void 0,d=arguments.length>2?arguments[2]:void 0;return u(this,void 0,void 0,function*(){if(!h.supportsWorker(p,d))return d.info("Browser does not support web workers."),!1;const y=S.paths.worker;try{const E=yield m.loadWorker(y,"BackgroundFilterWorker",{},null);try{E.terminate()}catch(I){d.info(`Failed to terminate worker. ${I.message}`)}return!0}catch(E){return d.info(`Failed to fetch and instantiate test worker ${E.message}`),!1}})}},"BackgroundFilterVideoFrameProcessor");l.default=o},755859:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{addObserver(g){this.observers.add(g)}removeObserver(g){this.observers.delete(g)}filterFrameDurationHigh(g){var m;for(const h of this.observers)(m=h.filterFrameDurationHigh)===null||m===void 0||m.call(h,g)}filterCPUUtilizationHigh(g){var m;for(const h of this.observers)(m=h.filterCPUUtilizationHigh)===null||m===void 0||m.call(h,g)}constructor(){this.observers=new Set}},"BackgroundFilterVideoFrameProcessorDelegate");l.default=f},759794:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(327252)),h=g(f(83997));let a=s(class Eu extends m.default{setImageBlob(n){return u(this,void 0,void 0,function*(){this.replacementBlob=n,this.replacementImage=yield Eu.loadImage(this.createReplacementObjectUrl())})}initOnFirstExecution(){}drawImageWithMask(n,e){e||(e=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(e,0,0);const{canvasCtx:i,targetCanvas:o}=this,{width:c,height:p}=o;i.save(),i.clearRect(0,0,c,p),i.drawImage(this.scaledCanvas,0,0,c,p),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,c,p),i.globalCompositeOperation="destination-over",i.drawImage(this.replacementImage,0,0,o.width,o.height),i.restore()}static loadImageExecutor(n,e,t){const i=new Image;i.crossOrigin="Anonymous",i.addEventListener("load",()=>{n(i)},!1),i.addEventListener("error",o=>{e(new Error(`Could not load replacement image ${i.src}: ${o.message}`))},!1),i.src=t}static loadImage(n){return u(this,void 0,void 0,function*(){return new Promise((e,t)=>this.loadImageExecutor(e,t,n))})}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const n=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return u(this,void 0,void 0,function*(){this.replacementImage=yield Eu.loadImage(this.createReplacementObjectUrl()),n.loadAssets.call(this)})}addObserver(n){this.delegate.addObserver(n)}removeObserver(n){this.delegate.removeObserver(n)}destroy(){const n=Object.create(null,{destroy:{get:()=>super.destroy}});return u(this,void 0,void 0,function*(){n.destroy.call(this),this.revokeReplacementObjectUrl()})}setEventController(n){this.eventController?this.eventController=n:(this.eventController=n,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const n={backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",n)}constructor(n,e){super("background replacement",n,e,new h.default),this.replacementBlob=e.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: ${this.stringify(e)}`)}},"BackgroundReplacementFilter");l.default=a},402494:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(i,o,c,p){function S(d){return d instanceof c?d:new c(function(y){y(d)})}return s(S,"adopt"),new(c||(c=Promise))(function(d,y){function E(L){try{A(p.next(L))}catch(M){y(M)}}s(E,"fulfilled");function I(L){try{A(p.throw(L))}catch(M){y(M)}}s(I,"rejected");function A(L){L.done?d(L.value):S(L.value).then(E,I)}s(A,"step"),A((p=p.apply(i,o||[])).next())})},g=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(424392)),h=g(f(63145)),a=g(f(938402)),r=g(f(739864)),n=g(f(759794));let e=s(class extends r.default{loadAssets(){return u(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}setImageBlob(){return u(this,void 0,void 0,function*(){})}},"NoOpBackgroundReplacementProcessor"),t=s(class Yg extends m.default{static create(o,c){return u(this,void 0,void 0,function*(){o=this.resolveSpec(o),c=this.resolveOptions(c),yield this.resolveOptionsAsync(c);const{logger:p}=c;if(!(yield Yg.isSupported(o,c)))return p.warn("Using no-op processor because background replacement is not supported"),new e;p.info("Using background replacement filter");const d=new n.default(o,c);return yield d.loadAssets(),d})}static resolveOptions(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const c=Object.assign({},o);return c.logger||(c.logger=new h.default("BackgroundReplacementProcessor",a.default.INFO)),super.resolveOptions(c)}static resolveOptionsAsync(o){return u(this,void 0,void 0,function*(){if(!o.imageBlob){const c=document.createElement("canvas");c.width=100,c.height=100;const p=c.getContext("2d");p.fillStyle="blue",p.fillRect(0,0,100,100);const S=yield new Promise(d=>{c.toBlob(d)});o.imageBlob=S}})}static isSupported(o,c){const p=Object.create(null,{isSupported:{get:()=>super.isSupported}});return u(this,void 0,void 0,function*(){o=this.resolveSpec(o),c=this.resolveOptions(c),yield this.resolveOptionsAsync(c);const S=c.imageBlob,d=URL.createObjectURL(S);try{yield n.default.loadImage(d)}catch(y){return c.logger.info(`Failed to fetch load replacement image ${y.message}`),!1}finally{URL.revokeObjectURL(d)}return p.isSupported.call(this,o,c)})}},"BackgroundReplacementVideoFrameProcessor");l.default=t},83997:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(755859));let m=s(class extends g.default{},"BackgroundReplacementVideoFrameProcessorDelegate");l.default=m},222325:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{reset(){this.currentRetry=0}nextBackoffAmountMs(){const g=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,g}constructor(g,m,h){this.fixedWaitMs=g,this.shortBackoffMs=m,this.longBackoffMs=h,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}},"FullJitterBackoff");l.default=f},674747:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(222325)),m=u(f(892355));let h=s(class{create(){return new g.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(r){return new m.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,r)}constructor(r,n,e){this.fixedWaitMs=r,this.shortBackoffMs=n,this.longBackoffMs=e}},"FullJitterBackoffFactory");l.default=h},892355:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(222325));let m=s(class extends g.default{nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}constructor(a,r,n,e){super(a,r,n),this.limit=e,this.attempts=0}},"FullJitterLimitedBackoff");l.default=m},421537:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const g=f(248468),m=f(877232);let h=s(class Cu{version(){return this.browser.version}majorVersion(){return this.version()!==null?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const r of this.chromeLike)if(r===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const r of this.webkitBrowsers)if(r===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return navigator.userAgent.indexOf("Windows")!==-1}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=Cu.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=Cu.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return!(this.name()==="safari"&&this.majorVersion()===15||!this.supportsCanvasCapturedStreamPlayback())}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&this.engine()==="Blink"&&this.engineMajorVersion()>=111}supportsAudioRedundancy(){return this.hasChromiumWebRTC()?this.engineMajorVersion()>=107:!this.hasFirefoxWebRTC()}requiresResolutionAlignment(r,n){return this.isAndroid()&&this.isPixel3()?[Math.ceil(r/64)*64,Math.ceil(n/64)*64]:[r,n]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return this.browser.name==="chromium-webview"}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||this.browser.name==="firefox"&&this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const r=[];for(const n in this.browserSupport)r.push(`${this.browserName[n]} ${this.browserSupport[n]}+`);return r.join(", ")}supportedVideoCodecs(){return u(this,void 0,void 0,function*(){const r=new RTCPeerConnection;return r.addTransceiver("video",{direction:"inactive",streams:[]}),(yield r.createOffer({offerToReceiveVideo:!0})).sdp.split(`\r
`).filter(n=>n.includes("a=rtpmap:")).map(n=>n.replace(/.* /,"").replace(/\/.*/,"")).filter((n,e,t)=>t.indexOf(n)===e).filter(n=>n!=="rtx"&&n!=="red"&&n!=="ulpfec")})}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return(this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox())&&(this.version()==="15.1.0"||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return this.browser.name==="ios"||this.browser.name==="ios-webview"||this.browser.name==="safari"&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return this.browser.name==="safari"||this.isIOSSafari()}isFirefox(){return this.browser.name==="firefox"}isIOSFirefox(){return this.browser.name==="fxios"}isIOSChrome(){return this.browser.name==="crios"}isChrome(){return this.browser.name==="chrome"}isEdge(){return this.browser.name==="edge-chromium"}isIOSEdge(){return this.browser.name==="edge-ios"}isSamsungInternet(){return this.browser.name==="samsung"}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=g.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new m.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}},"DefaultBrowserBehavior");l.default=h,h.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,h.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},434040:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const g=f(50380),m=u(f(369475)),h=u(f(982782)),a=u(f(806860));let r=s(class Qg{getMetricMap(e,t){switch(e){case h.default.AUDIO:switch(t){case m.default.UPSTREAM:return this.audioUpstreamMetricMap;case m.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case h.default.VIDEO:switch(t){case m.default.UPSTREAM:return this.videoUpstreamMetricMap;case m.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){if(this.overriddenObservableMetrics.has(e))return this.overriddenObservableMetrics.get(e);const t=this.observableMetricSpec[e],o=this.getMetricMap(t.media,t.dir)[t.source],{transform:c,source:p}=o;if(t.hasOwnProperty("media"))for(const S in this.streamMetricReports){const d=this.streamMetricReports[S];if(d.direction===t.dir&&d.mediaType===t.media)return c(p||t.source,Number(S))}else return c(p||t.source);return 0}getObservableVideoMetricValue(e,t){const i=this.observableVideoMetricSpec[e],c=this.getMetricMap(i.media,i.dir)[i.source],{transform:p,source:S}=c;return p(S||i.source,t)}getVideoUpstreamSsrc(){for(const e in this.streamMetricReports)if(this.streamMetricReports[e].mediaType===h.default.VIDEO&&this.streamMetricReports[e].direction===m.default.UPSTREAM)return Number(e);return null}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===h.default.VIDEO){const i={};for(const S in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[S].dir===this.streamMetricReports[t].direction){const d=this.getObservableVideoMetricValue(S,Number(t));isNaN(d)||(i[S]=d)}const o=this.streamMetricReports[t].groupId,c=this.streamMetricReports[t].streamId;let p="";this.videoStreamIndex.attendeeIdForGroupId!==void 0?p=o?this.videoStreamIndex.attendeeIdForGroupId(o):this.selfAttendeeId:p=c?this.videoStreamIndex.attendeeIdForStreamId(c):this.selfAttendeeId,e[p]=e[p]?e[p]:{},e[p][t]=i}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new Qg(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.customStatsReports=this.customStatsReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e.overriddenObservableMetrics=this.overriddenObservableMetrics,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug(()=>`Client Metric Report: ${JSON.stringify(e)}`)}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}overrideObservableMetric(e,t){this.overriddenObservableMetrics.set(e,t)}constructor(e,t,i){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=i,this.globalMetricReport=new a.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(o,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;return Number(p.currentMetrics[o])},this.decoderLossPercent=(o,c)=>{const p=this.streamMetricReports[c],S=p.currentMetrics.concealedSamples-(p.previousMetrics.concealedSamples||0),d=p.currentMetrics.totalSamplesReceived-(p.previousMetrics.totalSamplesReceived||0);return d<=0||d-S<=0?0:S/d*100},this.packetLossPercent=(o,c)=>{const p=this.streamMetricReports[c],S=p.currentMetrics[o]-(p.previousMetrics[o]||0),d=p.currentMetrics.packetsLost-(p.previousMetrics.packetsLost||0),y=S+d;return y<=0||d<=0?0:d*100/y},this.jitterBufferMs=(o,c)=>{const p=this.streamMetricReports[c],S=p.currentMetrics.jitterBufferDelay-(p.previousMetrics.jitterBufferDelay||0),d=p.currentMetrics.jitterBufferEmittedCount-(p.previousMetrics.jitterBufferEmittedCount||0);return S<=0||d<=0?0:S/d*1e3},this.countPerSecond=(o,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const d=p.currentMetrics[o]-(p.previousMetrics[o]||0);return d<=0?0:Math.trunc(d/S)},this.bitsPerSecond=(o,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const d=(p.currentMetrics[o]-(p.previousMetrics[o]||0))*8;return d<=0?0:Math.trunc(d/S)},this.secondsToMilliseconds=(o,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;return Number(p.currentMetrics[o]*1e3)},this.averageTimeSpentPerSecondInMilliseconds=(o,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const d=p.currentMetrics[o]-(p.previousMetrics[o]||0);return d<=0?0:d*1e3/S},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(o,c)=>{const p=this.streamMetricReports[c];if(p.previousObjectMetrics[o]===void 0||p.currentObjectMetrics[o]===void 0)return NaN;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);let d=0,y=0;for(const[I,A]of Object.entries(p.previousObjectMetrics[o]))I==="cpu"&&(d=A);for(const[I,A]of Object.entries(p.currentObjectMetrics[o]))I==="cpu"&&(y=A);const E=y-d;return E<=0?0:E*1e3/S},this.isHardwareImplementation=(o,c)=>{const p=this.streamMetricReports[c];if(p.currentStringMetrics[o]===void 0)return NaN;const S=String(p.currentStringMetrics[o]),d=S.includes("ExternalDecoder")||S.includes("ExternalEncoder")||S.includes("EncodeAccelerator")||S.includes("DecodeAccelerator"),y=S.includes("fallback from");return d&&!y?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:g.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:g.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:g.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:g.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:g.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:g.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:g.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:g.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:g.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:g.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:g.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:g.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:g.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:g.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:g.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:g.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:g.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:g.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:g.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:g.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:g.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:g.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:g.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:g.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:g.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU},videoCodecDegradationHighEncodeCpu:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU},videoCodecDegradationEncodeFailure:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:g.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:g.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:g.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:g.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:g.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:g.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:g.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:g.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_DROPPED_FPS}},this.streamDimensionMap={encoderImplementation:g.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:g.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFramesInputPerSecond:{source:"framesPerSecond",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamEncoderImplementation:{source:"encoderImplementation",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamTotalEncodeTimePerSecond:{source:"totalEncodeTime",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamCpuQualityLimitationDurationPerSecond:{source:"qualityLimitationDurations",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:h.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:h.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:h.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:h.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:h.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:h.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:h.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:h.default.VIDEO,dir:m.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:h.default.AUDIO,dir:m.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:h.default.AUDIO,dir:m.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:h.default.AUDIO,dir:m.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:h.default.AUDIO,dir:m.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:h.default.AUDIO,dir:m.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:h.default.AUDIO,dir:m.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:h.default.VIDEO,dir:m.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:h.default.AUDIO,dir:m.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:h.default.AUDIO,dir:m.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:h.default.AUDIO,dir:m.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:h.default.VIDEO,dir:m.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:h.default.AUDIO,dir:m.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}},"ClientMetricReport");l.default=r},369475:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportDirection=void 0;var f;(function(u){u[u.UPSTREAM=0]="UPSTREAM",u[u.DOWNSTREAM=1]="DOWNSTREAM"})(f=l.ClientMetricReportDirection||(l.ClientMetricReportDirection={})),l.default=f},982782:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportMediaType=void 0;var f;(function(u){u[u.AUDIO=0]="AUDIO",u[u.VIDEO=1]="VIDEO"})(f=l.ClientMetricReportMediaType||(l.ClientMetricReportMediaType={})),l.default=f},505243:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"ClientVideoStreamReceivingReport");l.default=f},806860:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"GlobalMetricReport");l.default=f},793497:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}},"RedundantAudioRecoveryMetricReport");l.default=f},564979:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"StreamMetricReport");l.default=f},881563:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(g){this.currentData=g}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const g=this.health();return g!==this.currentHealth?(this.currentHealth=g,g):null}constructor(g,m,h){this.minHealth=g.minHealth,this.maxHealth=g.maxHealth,this.currentHealth=g.initialHealth,this.currentData=m.clone(),this.name=h}},"BaseConnectionHealthPolicy");l.default=f},844812:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class _o{static isTimestampRecent(g,m){return Date.now()<g+m}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now(),this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0}isConnectionStartRecent(g){return _o.isTimestampRecent(this.connectionStartTimestampMs,g)}isLastPacketLossRecent(g){return _o.isTimestampRecent(this.lastPacketLossInboundTimestampMs,g)}isGoodSignalRecent(g){return _o.isTimestampRecent(this.lastGoodSignalTimestampMs,g)}isWeakSignalRecent(g){return _o.isTimestampRecent(this.lastWeakSignalTimestampMs,g)}isNoSignalRecent(g){return _o.isTimestampRecent(this.lastNoSignalTimestampMs,g)}clone(){const g=new _o;return g.connectionStartTimestampMs=this.connectionStartTimestampMs,g.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,g.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,g.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,g.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,g.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,g.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,g.consecutiveMissedPongs=this.consecutiveMissedPongs,g.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),g.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),g.audioSpeakerDelayMs=this.audioSpeakerDelayMs,g.isVideoEncoderHardware=this.isVideoEncoderHardware,g.videoEncodingTimeInMs=this.videoEncodingTimeInMs,g.cpuLimitationDuration=this.cpuLimitationDuration,g.videoInputFps=this.videoInputFps,g.videoEncodeFps=this.videoEncodeFps,g}setConsecutiveMissedPongs(g){this.consecutiveMissedPongs=g}setConsecutiveStatsWithNoPackets(g){this.consecutiveStatsWithNoPackets=g}setConsecutiveStatsWithNoAudioPacketsSent(g){this.consecutiveStatsWithNoAudioPacketsSent=g}setLastPacketLossInboundTimestampMs(g){this.lastPacketLossInboundTimestampMs=g}setLastNoSignalTimestampMs(g){this.lastNoSignalTimestampMs=g}setLastWeakSignalTimestampMs(g){this.lastWeakSignalTimestampMs=g}setLastGoodSignalTimestampMs(g){this.lastGoodSignalTimestampMs=g}setAudioSpeakerDelayMs(g){this.audioSpeakerDelayMs=g}setIsVideoEncoderHardware(g){this.isVideoEncoderHardware=g}setVideoEncodingTimeInMs(g){this.videoEncodingTimeInMs=g}setCpuLimitationDuration(g){this.cpuLimitationDuration=g}setVideoInputFps(g){this.videoInputFps=g}setVideoEncodeFps(g){this.videoEncodeFps=g}constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}},"ConnectionHealthData");l.default=f},627070:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(641594)),m=u(f(797995));let h=s(class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3,this.videoEncodingHealthPolicies=[g.default,m.default],this.consecutiveHighEncodeCpuThreshold=10,this.highEncodeCpuMsThreshold=500,this.consecutiveVideoEncodingFailureThreshold=5}},"ConnectionHealthPolicyConfiguration");l.default=h},24227:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(881563));let m=s(class nr extends g.default{health(){if(this.currentData.isConnectionStartRecent(nr.CONNECTION_WAIT_TIME_MS))return 1;const r=this.currentData.consecutiveStatsWithNoPackets>=nr.CONNECTION_UNHEALTHY_THRESHOLD,n=this.currentData.consecutiveMissedPongs>=nr.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>nr.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const e=this.audioDelayPointsOverMaximum>nr.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return e&&(this.audioDelayPointsOverMaximum=0),r||n||e?(this.logger.warn(`reconnection recommended due to: no packets received: ${r}, missed pongs: ${n}, bad audio delay: ${e}`),0):1}constructor(a,r,n){super(r,n,"Reconnection Health"),this.logger=a,this.audioDelayPointsOverMaximum=0,nr.CONNECTION_UNHEALTHY_THRESHOLD=r.connectionUnhealthyThreshold,nr.CONNECTION_WAIT_TIME_MS=r.connectionWaitTimeMs,nr.MISSED_PONGS_THRESHOLD=r.missedPongsUpperThreshold,nr.MAXIMUM_AUDIO_DELAY_MS=r.maximumAudioDelayMs,nr.MAXIMUM_AUDIO_DELAY_DATA_POINTS=r.maximumAudioDelayDataPoints}},"ReconnectionHealthPolicy");l.default=m},542814:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(881563));let m=s(class extends g.default{isSendingAudioUnhealthy(){const a=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),r=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return a&&r}health(){if(this.isSendingAudioUnhealthy()){const a=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!a?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}constructor(a,r,n){super(r,n,"Sending Audio Health"),this.logger=a,this.sendingAudioFailureSamplesToConsider=r.sendingAudioFailureSamplesToConsider>0?r.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=r.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=r.maximumTimesToWarn,this.coolDownTimeMs=r.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}},"SendingAudioFailureConnectionHealthPolicy");l.default=m},770479:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(881563));let m=s(class extends g.default{calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const a=this.pastSamplesToConsider,r=a*this.packetsExpected;let n=0;for(let e=0;e<a;e++)n+=this.currentData.packetsReceivedInLastMinute[e];return Math.min(Math.max(1-n/r,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?this.currentHealth!==0&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}constructor(a,r){super(a,r,"Unusable Audio Warning"),this.coolDownTimeMs=a.cooldownTimeMs,this.pastSamplesToConsider=a.pastSamplesToConsider,this.fractionalLoss=a.fractionalLoss,this.packetsExpected=a.packetsExpected,this.maximumTimesToWarn=a.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}},"UnusableAudioWarningConnectionHealthPolicy");l.default=m},619473:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoEncodingConnectionHealthPolicyName=void 0;var f;(function(u){u.VideoEncodingCpuHealth="Video Encoding CPU Health",u.VideoEncodingFramerateHealth="Video Encoding framerate Health"})(f=l.VideoEncodingConnectionHealthPolicyName||(l.VideoEncodingConnectionHealthPolicyName={})),l.default=f},641594:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(881563)),m=u(f(619473));let h=s(class extends g.default{health(){if(!this.currentData.isVideoEncoderHardware&&(this.currentData.videoEncodingTimeInMs>=this.highEncodeCpuMsThreshold||this.currentData.cpuLimitationDuration>0)){if(this.consecutiveHighEncodeCpuCnt++,this.consecutiveHighEncodeCpuCnt>this.consecutiveHighEncodeCpuThreshold)return this.consecutiveHighEncodeCpuCnt=0,this.minimumHealth()}else this.consecutiveHighEncodeCpuCnt=0;return this.maximumHealth()}constructor(r,n){super(r,n,m.default.VideoEncodingCpuHealth),this.consecutiveHighEncodeCpuCnt=0,this.consecutiveHighEncodeCpuThreshold=r.consecutiveHighEncodeCpuThreshold,this.highEncodeCpuMsThreshold=r.highEncodeCpuMsThreshold}},"VideoEncodingCpuConnectionHealthPolicy");l.default=h},797995:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(881563)),m=u(f(619473));let h=s(class extends g.default{health(){if(this.currentData.videoEncodeFps===0&&this.currentData.videoInputFps>0){if(this.consecutiveEncodeFailureCnt++,this.consecutiveEncodeFailureCnt>this.consecutiveVideoEncodingFailureThreshold)return this.consecutiveEncodeFailureCnt=0,this.minimumHealth()}else this.consecutiveEncodeFailureCnt=0;return this.maximumHealth()}constructor(r,n){super(r,n,m.default.VideoEncodingFramerateHealth),this.consecutiveEncodeFailureCnt=0,this.consecutiveVideoEncodingFailureThreshold=r.consecutiveVideoEncodingFailureThreshold}},"VideoEncodingFramerateConnectionHealthPolicy");l.default=h},109412:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=f(823880);let g=s(class{start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(h){h===0?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):h<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(h,a,r){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",a),this.statsCollector.logLatency("ping_pong_clock_skew",r),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(h){let a=0,r=0;const n=h.getObservableMetrics(),e=n.audioPacketsReceived,t=n.audioPacketsReceivedFractionLoss,i=n.audioSpeakerDelayMs;typeof i=="number"&&!isNaN(i)&&this.connectionHealthData.setAudioSpeakerDelayMs(i);const o=h.getRTCStatsReport();let c=0;o.forEach(S=>{S.type==="candidate-pair"&&S.bytesReceived&&(c+=S.bytesReceived)});const p=c-this.lastTotalBytesReceived;if(this.lastTotalBytesReceived=c,typeof e=="number"&&typeof t=="number"){if(a=e,r=t,a<0||r<0||p<0)return}else return;this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,a),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,r),p>0?(this.hasSeenValidCandidatePairMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidCandidatePairMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(a===0||r>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),typeof n.audioPacketsSent=="number"&&this.updateAudioPacketsSentInConnectionHealth(n.audioPacketsSent),this.updateVideoEncodingHealth(h),this.updateConnectionHealth()}updateAudioPacketsSentInConnectionHealth(h){h>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}updateVideoEncodingHealth(h){const a=this.audioVideoController.videoTileController.hasStartedLocalVideoTile(),r=h.getVideoUpstreamSsrc();if(!a||r===null){this.connectionHealthData.setIsVideoEncoderHardware(!1),this.connectionHealthData.setVideoEncodingTimeInMs(0),this.connectionHealthData.setCpuLimitationDuration(0),this.connectionHealthData.setVideoInputFps(0),this.connectionHealthData.setVideoEncodeFps(0);return}const n=h.getObservableVideoMetricValue("videoUpstreamEncoderImplementation",r),e=h.getObservableVideoMetricValue("videoUpstreamTotalEncodeTimePerSecond",r),t=h.getObservableVideoMetricValue("videoUpstreamCpuQualityLimitationDurationPerSecond",r),i=h.getObservableVideoMetricValue("videoUpstreamFramesInputPerSecond",r),o=h.getObservableVideoMetricValue("videoUpstreamFramesEncodedPerSecond",r);this.connectionHealthData.setIsVideoEncoderHardware(Boolean(n)),this.connectionHealthData.setVideoEncodingTimeInMs(e),this.connectionHealthData.setCpuLimitationDuration(t),this.connectionHealthData.setVideoInputFps(i),this.connectionHealthData.setVideoEncodeFps(o)}addToMinuteWindow(h,a){h.unshift(a),h.length>60&&h.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver(h=>{u.Maybe.of(h.connectionHealthDidChange).map(a=>a.bind(h)(this.connectionHealthData.clone()))})}constructor(h,a,r,n,e){this.audioVideoController=h,this.realtimeController=a,this.connectionHealthData=r,this.pingPong=n,this.statsCollector=e,this.isActive=!1,this.hasSeenValidCandidatePairMetricsBefore=!1,this.lastTotalBytesReceived=0,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(t=>{this.isActive&&this.receiveSignalStrengthChange(t)})}},"SignalingAndMetricsConnectionMonitor");l.default=g},203621:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var f;(function(u){u.Modality="#content"})(f||(f={})),l.default=f},555961:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(421537)),h=g(f(111425));let a=s(class _u{get mediaStream(){return this._mediaStream}set mediaStream(n){this._mediaStream=n}acquireAudioInputStream(){return u(this,void 0,void 0,function*(){return this._mediaStream.getAudioTracks().length===0?(this.logger.info("No audio stream available. Synthesizing an audio stream."),h.default.synthesizeAudioDevice(0)):this._mediaStream})}acquireVideoInputStream(){return u(this,void 0,void 0,function*(){return this._mediaStream})}acquireDisplayInputStream(n){return u(this,void 0,void 0,function*(){return n&&n.video&&n.video.mandatory&&n.video.mandatory.chromeMediaSource&&n.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(n):navigator.mediaDevices.getDisplayMedia(n)})}acquireScreenCaptureDisplayInputStream(n,e){return u(this,void 0,void 0,function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(n,e))})}screenCaptureDisplayMediaConstraints(n,e){return{audio:!!(!n&&new m.default().getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!n&&{frameRate:{max:e||_u.defaultFrameRate}}),n&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxFrameRate:e||_u.defaultFrameRate}})}}toggleMediaStream(n){let e=!1;if(this.mediaStream)for(let t=0;t<this.mediaStream.getTracks().length;t++)this.mediaStream.getTracks()[t].enabled!==n&&(this.mediaStream.getTracks()[t].enabled=n,e=!0);return e}cleanup(){if(this.mediaStream)for(let n=0;n<this.mediaStream.getTracks().length;n++)this.mediaStream.getTracks()[n].stop();this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(n){}removeMediaStreamBrokerObserver(n){}constructor(n){this.logger=n}},"ContentShareMediaStreamBroker");l.default=a,a.defaultFrameRate=15},267589:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(p,S,d,y){function E(I){return I instanceof d?I:new d(function(A){A(I)})}return s(E,"adopt"),new(d||(d=Promise))(function(I,A){function L(w){try{k(y.next(w))}catch(N){A(N)}}s(L,"fulfilled");function M(w){try{k(y.throw(w))}catch(N){A(N)}}s(M,"rejected");function k(w){w.done?I(w.value):E(w.value).then(L,M)}s(k,"step"),k((y=y.apply(p,S||[])).next())})},g=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(577849)),h=g(f(750952)),a=g(f(678280)),r=g(f(641501)),n=g(f(509936)),e=f(823880),t=g(f(297405)),i=g(f(400493)),o=g(f(203621));let c=s(class{static createContentShareMeetingSessionConfigure(S){const d=new h.default;return d.meetingId=S.meetingId,d.externalMeetingId=S.externalMeetingId,d.urls=S.urls,d.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,d.credentials=new a.default,d.credentials.attendeeId=S.credentials.attendeeId+o.default.Modality,d.credentials.externalUserId=S.credentials.externalUserId,d.credentials.joinToken=S.credentials.joinToken+o.default.Modality,d.meetingFeatures=S.meetingFeatures.clone(),d.videoDownlinkBandwidthPolicy=new t.default,d}setContentAudioProfile(S){this.contentAudioVideo.setAudioProfile(S)}enableSimulcastForContentShare(S,d){S?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new i.default(this.contentAudioVideo.logger,d)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(S){S?this.contentAudioVideo.configuration.enableSVC=!0:this.contentAudioVideo.configuration.enableSVC=!1}startContentShare(S){return u(this,void 0,void 0,function*(){if(S){if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution===m.default.VideoDisabled){this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None");return}this.mediaStreamBroker.mediaStream=S;for(let d=0;d<this.mediaStreamBroker.mediaStream.getTracks().length;d++)this.mediaStreamBroker.mediaStream.getTracks()[d].addEventListener("ended",()=>{this.stopContentShare()});this.contentAudioVideo.start()}})}startContentShareFromScreenCapture(S,d){return u(this,void 0,void 0,function*(){const y=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(S,d);return yield this.startContentShare(y),y})}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidPause).map(d=>d.call(S))})}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidUnpause).map(d=>d.call(S))})}setContentShareVideoCodecPreferences(S){this.contentAudioVideo.setVideoCodecSendPreferences(S)}destroy(){return u(this,void 0,void 0,function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)})}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(S){this.observerQueue.add(S)}removeContentShareObserver(S){this.observerQueue.delete(S)}forEachContentShareObserver(S){for(const d of this.observerQueue)n.default.nextTick(()=>{this.observerQueue.has(d)&&S(d)})}audioVideoDidStart(){var S;((S=this.mediaStreamBroker.mediaStream)===null||S===void 0?void 0:S.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(S){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver(d=>{e.Maybe.of(d.contentShareDidStop).map(y=>y.call(d))})}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence((S,d,y,E)=>{const I=new r.default(S).hasModality(r.default.MODALITY_CONTENT),A=new r.default(S).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!I||!A||!d||this.contentShareTile)return;const L=this.mediaStreamBroker.mediaStream;if(L!=null&&L.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const M=L.getVideoTracks()[0];let k,w;if(M.getSettings){const N=M.getSettings();k=N.width,w=N.height}else{const N=M.getCapabilities();k=N.width,w=N.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,L,k,w,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver(M=>{e.Maybe.of(M.contentShareDidStart).map(k=>k.call(M))})})}constructor(S,d,y){this.mediaStreamBroker=S,this.contentAudioVideo=d,this.attendeeAudioVideo=y,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}},"DefaultContentShareController");l.default=c},573886:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let u=s(class Gi{static register(){!("document"in f.g)||!document.addEventListener||Gi.shouldRegisterCSPMonitor&&(Gi.added||(document.addEventListener("securitypolicyviolation",Gi.listener),Gi.added=!0))}static unregister(){!("document"in f.g)||!document.removeEventListener||(document.removeEventListener("securitypolicyviolation",Gi.listener),Gi.loggers=new Set,Gi.added=!1)}static disable(){Gi.shouldRegisterCSPMonitor=!1,Gi.unregister()}static addLogger(m){m&&Gi.loggers.add(m)}static removeLogger(m){m&&Gi.loggers.delete(m)}},"CSPMonitor");l.default=u,u.loggers=new Set,u.shouldRegisterCSPMonitor=!0,u.added=!1,u.listener=g=>{const m=`Security Policy Violation
Blocked URI: ${g.blockedURI}
Violated Directive: ${g.violatedDirective}
Original Policy: ${g.originalPolicy}
Document URI: ${g.documentURI}
Source File: ${g.sourceFile}
Line No.: ${g.lineNumber}
`;for(const h of u.loggers)h.error(m);u.loggers.size===0&&console.error(m)}},535624:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{text(){return new TextDecoder().decode(this.data)}json(){return JSON.parse(new TextDecoder().decode(this.data))}constructor(g,m,h,a,r,n){this.timestampMs=g,this.topic=m,this.data=h,this.senderAttendeeId=a,this.senderExternalUserId=r,this.throttled=!!n}},"DataMessage");l.default=f},262656:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isDestroyable=void 0;function f(u){return u&&"destroy"in u}s(f,"isDestroyable"),l.isDestroyable=f},296132:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isAudioTransformDevice=void 0;function f(u){return!!u&&typeof u=="object"&&"mute"in u&&"stop"in u&&"intrinsicDevice"in u}s(f,"isAudioTransformDevice"),l.isAudioTransformDevice=f},111425:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(k,w,N,T){function O(D){return D instanceof N?D:new N(function(G){G(D)})}return s(O,"adopt"),new(N||(N=Promise))(function(D,G){function K(me){try{q(T.next(me))}catch(we){G(we)}}s(K,"fulfilled");function H(me){try{q(T.throw(me))}catch(we){G(we)}}s(H,"rejected");function q(me){me.done?D(me.value):O(me.value).then(K,H)}s(q,"step"),q((T=T.apply(k,w||[])).next())})},g=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(421537)),h=g(f(282381)),a=g(f(509936)),r=g(f(574613)),n=f(823880),e=g(f(153922)),t=g(f(639907)),i=f(296132),o=g(f(762762)),c=g(f(95507)),p=g(f(22377)),S=g(f(323025)),d=g(f(461020)),y=g(f(329572)),E=g(f(777032)),I=g(f(577849)),A=f(924519);let L=s(class Un{isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var w;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},(w=this.mediaDeviceWrapper)===null||w===void 0||w.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var w;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),(w=this.mediaDeviceWrapper)===null||w===void 0||w.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return this.deviceChangeObservers.size?!0:this.activeDevices.audio&&this.activeDevices.audio.constraints!==null||this.activeDevices.video&&this.activeDevices.video.constraints!==null||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return u(this,void 0,void 0,function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()})}listAudioInputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const N=yield this.listDevicesOfKind("audioinput",w);return this.trace("listAudioInputDevices",w,N),N})}listVideoInputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const N=yield this.listDevicesOfKind("videoinput",w);return this.trace("listVideoInputDevices",w,N),N})}listAudioOutputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const N=yield this.listDevicesOfKind("audiooutput",w);return this.trace("listAudioOutputDevices",w,N),N})}pushAudioMeetingStateForPermissions(w){var N;(N=this.eventController)===null||N===void 0||N.publishEvent(w===void 0?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(w){var N;(N=this.eventController)===null||N===void 0||N.publishEvent(w===void 0?"videoInputUnselected":"videoInputSelected")}startAudioInput(w){return u(this,void 0,void 0,function*(){return yield this.audioInputTaskQueue.add(()=>this.startAudioInputTask(w))})}startAudioInputTask(w){var N;return u(this,void 0,void 0,function*(){if(w===void 0){this.logger.error("Audio input device cannot be undefined");return}try{return i.isAudioTransformDevice(w)?(this.logger.info(`Choosing transform input device ${w}`),yield this.chooseAudioTransformInputDevice(w)):(this.logger.info(`Choosing intrinsic audio input device ${w}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",w)),this.trace("startAudioInputDevice",w,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield(N=this.transform)===null||N===void 0?void 0:N.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(T){throw T}})}stopAudioInput(){return u(this,void 0,void 0,function*(){return this.audioInputTaskQueue.add(()=>this.stopAudioInputTask())})}stopAudioInputTask(){return u(this,void 0,void 0,function*(){try{if(this.useWebAudio){this.releaseAudioTransformStream();return}this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}})}chooseAudioTransformInputDevice(w){var N;return u(this,void 0,void 0,function*(){if(((N=this.transform)===null||N===void 0?void 0:N.device)===w)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const T=Un.getAudioContext();if(!(T instanceof OfflineAudioContext))switch(T.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield T.resume()}let O;try{O=yield w.createAudioNode(T)}catch(G){throw this.logger.error(`Unable to create transform device node: ${G}.`),G}const D=yield w.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",D),this.logger.debug(`Got inner stream: ${D}.`),this.setTransform(w,O)})}chooseVideoTransformInputDevice(w){var N;return u(this,void 0,void 0,function*(){if(this.eventController&&w instanceof e.default&&w.passEventControllerToProcessors(this.eventController),w===this.chosenVideoTransformDevice){this.logger.info("Reselecting same VideoTransformDevice");return}const T=this.chosenVideoTransformDevice;T&&this.logger.info("Switched from previous VideoTransformDevice");const O=!!T,D=yield w.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId((N=this.activeDevices.video)===null||N===void 0?void 0:N.stream,D)){this.logger.info("video transform device needs new intrinsic device"),O&&T.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=w,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",D),this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream);return}this.chosenVideoTransformDevice=w,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield w.transformStream(this.activeDevices.video.stream)})}startVideoInput(w){return u(this,void 0,void 0,function*(){return yield this.videoInputTaskQueue.add(()=>this.startVideoInputTask(w))})}startVideoInputTask(w){return u(this,void 0,void 0,function*(){if(!w){this.logger.error("Invalid video input device");return}try{return A.isVideoTransformDevice(w)?(this.logger.info(`Choosing video transform device ${w}`),yield this.chooseVideoTransformInputDevice(w),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",w),this.trace("startVideoInputDevice",w),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(N){throw N}})}stopVideoInput(){return u(this,void 0,void 0,function*(){return this.videoInputTaskQueue.add(()=>this.stopVideoInputTask())})}stopVideoInputTask(){return u(this,void 0,void 0,function*(){try{if(this.chosenVideoInputIsTransformDevice()){this.releaseVideoTransformStream();return}this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}})}chooseAudioOutput(w){return u(this,void 0,void 0,function*(){this.audioOutputDeviceId=w,this.watchForDeviceChangesIfNecessary();const N=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(N),this.trace("chooseAudioOutput",w,null)})}addDeviceChangeObserver(w){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(w),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(w){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(w),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var w,N;if(!this.activeDevices.audio)return null;const T=(N=(w=this.transform)===null||w===void 0?void 0:w.nodes)===null||N===void 0?void 0:N.end;if(T){const O=T.context.createAnalyser();return O.removeOriginalInputs=()=>{try{T.disconnect(O)}catch{}},T.connect(O),O}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(w){const N=Un.getAudioContext(),T=N.createAnalyser(),O=N.createMediaStreamSource(w);return O.connect(T),this.trace("createAnalyserNodeForAudioInput"),T.removeOriginalInputs=()=>{try{O.disconnect(T)}catch{}},T}startVideoPreviewForVideoInput(w){if(!this.activeDevices.video){this.logger.warn("cannot bind video preview since video input device has not been chosen"),this.trace("startVideoPreviewForVideoInput",w.id);return}t.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,w,!0),this.trace("startVideoPreviewForVideoInput",w.id)}stopVideoPreviewForVideoInput(w){t.default.disconnectVideoStreamFromVideoElement(w,!1),this.trace("stopVideoPreviewForVideoInput",w.id)}setDeviceLabelTrigger(w){if(this.deviceInfoCache){for(const N of this.deviceInfoCache)if(!N.label){this.deviceInfoCache=null;break}}this.deviceLabelTrigger=w,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(w){let N=null;return this.useWebAudio?(N=Un.getAudioContext().createMediaStreamSource(w),N.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",w.id),N}chooseVideoInputQuality(w,N,T){const O=this.browserBehavior.requiresResolutionAlignment(w,N);this.videoInputQualitySettings=new I.default(O[0],O[1],T)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return u(this,void 0,void 0,function*(){return this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio?this.getMediaStreamDestinationNode().stream:this.activeDevices.audio.stream})}acquireVideoInputStream(){return u(this,void 0,void 0,function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream})}acquireDisplayInputStream(w){return u(this,void 0,void 0,function*(){throw new Error("unsupported")})}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(w){const N=this.activeDevices[w];if(!N)return;const T=N.endedCallback,O=N.trackMuteCallback,D=N.trackUnmuteCallback;for(const G of N.stream.getTracks())G.stop(),T&&G.removeEventListener("ended",T),O&&G.removeEventListener("mute",O),D&&G.removeEventListener("unmute",D),delete N.endedCallback,delete N.trackMuteCallback,delete N.trackUnmuteCallback,delete this.activeDevices[w]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(w){var N;let T=this.activeDevices.audio;if(this.useWebAudio&&(T=this.getMediaStreamDestinationNode()),!!T){for(const O of T.stream.getTracks())O.enabled!==w&&(O.enabled=w);this.muted!==!w&&(this.muted=!w,(N=this.transform)===null||N===void 0||N.device.mute(this.muted))}}static getIntrinsicDeviceId(w){if(!w)return;if(typeof w=="string")return w;if(w.id)return w.id;const T=w.deviceId;if(!T)return;if(typeof T=="string"||Array.isArray(T))return T;const O=T;if(typeof O.exact=="string"||Array.isArray(O.exact))return O.exact}static createEmptyAudioDevice(){return Un.synthesizeAudioDevice(0)}static synthesizeAudioDevice(w){const N=Un.getAudioContext(),T=N.createMediaStreamDestination();if(w){const O=N.createGain();O.gain.value=.1,O.connect(T);const D=N.createOscillator();D.frequency.value=w,D.connect(O),D.start()}else{const O=N.createBufferSource();try{O.buffer=N.createBuffer(1,N.sampleRate*5,N.sampleRate)}catch(D){if(D&&D.name==="NotSupportedError")O.buffer=N.createBuffer(1,Un.defaultSampleRate*5,Un.defaultSampleRate);else throw D}O.buffer.getChannelData(0)[0]=3e-4,O.loop=!0,O.connect(T),O.start()}return T.stream}listDevicesOfKind(w,N){return u(this,void 0,void 0,function*(){return(N||this.deviceInfoCache===null||!this.isWatchingForDeviceChanges())&&(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(w)})}updateDeviceInfoCacheFromBrowser(){var w;return u(this,void 0,void 0,function*(){if(typeof MediaDeviceInfo>"u"){this.deviceInfoCache=[];return}let T=yield navigator.mediaDevices.enumerateDevices(),O=!0;for(const D of T)if(!D.label){O=!1;break}if(!O)try{this.logger.info("attempting to trigger media device labels since they are hidden");const D=yield this.deviceLabelTrigger();T=yield navigator.mediaDevices.enumerateDevices();for(const G of D.getTracks())G.stop()}catch(D){this.logger.info("unable to get media device labels"),(w=this.eventController)===null||w===void 0||w.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(D)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(T)}`),this.deviceInfoCache=T})}listCachedDevicesOfKind(w){const N=[];if(this.deviceInfoCache)for(const T of this.deviceInfoCache)T.kind===w&&N.push(T);return N}handleDeviceChange(){return u(this,void 0,void 0,function*(){if(this.deviceInfoCache===null)return;if(this.alreadyHandlingDeviceChange){a.default.nextTick(()=>{this.handleDeviceChange()});return}this.alreadyHandlingDeviceChange=!0;const w=this.listCachedDevicesOfKind("audioinput"),N=this.listCachedDevicesOfKind("videoinput"),T=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const O=this.listCachedDevicesOfKind("audioinput"),D=this.listCachedDevicesOfKind("videoinput"),G=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver(K=>{this.areDeviceListsEqual(w,O)||n.Maybe.of(K.audioInputsChanged).map(H=>H.bind(K)(O)),this.areDeviceListsEqual(N,D)||n.Maybe.of(K.videoInputsChanged).map(H=>H.bind(K)(D)),this.areDeviceListsEqual(T,G)||n.Maybe.of(K.audioOutputsChanged).map(H=>H.bind(K)(G))}),this.alreadyHandlingDeviceChange=!1})}handleDeviceStreamEnded(w,N){return u(this,void 0,void 0,function*(){try{w==="audio"?(this.logger.warn("Audio input device which was active is no longer available, resetting to null device"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch{this.logger.error("Failed to choose null device after stream ended.")}w==="audio"?this.forEachObserver(T=>{n.Maybe.of(T.audioInputStreamEnded).map(O=>O.bind(T)(N))}):this.forEachObserver(T=>{n.Maybe.of(T.videoInputStreamEnded).map(O=>O.bind(T)(N))})})}forEachObserver(w){for(const N of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(N)&&w(N)})}forEachMediaStreamBrokerObserver(w){for(const N of this.mediaStreamBrokerObservers)a.default.nextTick(()=>{this.mediaStreamBrokerObservers.has(N)&&w(N)})}areDeviceListsEqual(w,N){return JSON.stringify(w.map(T=>JSON.stringify(T)).sort())===JSON.stringify(N.map(T=>JSON.stringify(T)).sort())}intrinsicDeviceAsMediaStream(w){return w&&w.id?w:null}hasSameMediaStreamId(w,N,T){var O,D,G,K;let H;return w==="audio"?(H=T==null?void 0:T.audio.streamId,!!H&&H===((D=(O=N.constraints)===null||O===void 0?void 0:O.audio)===null||D===void 0?void 0:D.streamId)):(H=T==null?void 0:T.video.streamId,!!H&&H===((K=(G=N==null?void 0:N.constraints)===null||G===void 0?void 0:G.video)===null||K===void 0?void 0:K.streamId))}hasSameGroupId(w,N,T){if(w==="")return!0;const O=Un.getIntrinsicDeviceId(T);return this.logger.debug(`Checking deviceIds ${O} of type ${typeof O} with groupId ${w}`),typeof O=="string"&&w===this.getGroupIdFromDeviceId(N,O)}getGroupIdFromDeviceId(w,N){if(this.deviceInfoCache!==null){const T=this.listCachedDevicesOfKind(`${w}input`).find(O=>O.deviceId===N);if(T&&T.groupId)return this.logger.debug(`GroupId of deviceId ${N} found in cache is ${T.groupId}`),T.groupId}return this.logger.debug(`GroupId of deviceId ${N} found in cache is empty`),""}handleGetUserMediaError(w,N){if(!w)throw new c.default(w);switch(w.name){case"NotReadableError":case"TrackStartError":throw new S.default(w);case"NotFoundError":case"DevicesNotFoundError":throw new p.default(w);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw N&&N<Un.permissionDeniedOriginDetectionThresholdMs?new y.default(w,"Permission denied by browser"):new y.default(w,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new d.default(w);case"TypeError":throw new E.default(w);case"AbortError":default:throw new c.default(w)}}matchesDeviceSelection(w,N,T,O){return T&&T.stream.active&&(this.hasSameMediaStreamId(w,T,O)||T.groupId!==null&&this.hasSameGroupId(T.groupId,w,N))?(this.logger.debug(`Compare current device constraint ${JSON.stringify(T.constraints)} to proposed constraints ${JSON.stringify(O)}`),T.matchesConstraints(O)):!1}chooseInputIntrinsicDevice(w,N){var T,O;return u(this,void 0,void 0,function*(){const D=this.getMediaStreamConstraints(w,N);if(this.matchesDeviceSelection(w,N,this.activeDevices[w],D)){this.logger.info(`reusing existing ${w} input device`);return}this.activeDevices[w]&&this.activeDevices[w].stream&&this.stopTracksAndRemoveCallbacks(w);const G=Date.now(),K=new o.default;try{this.logger.info(`requesting new ${w} device with constraint ${JSON.stringify(D)}`);const H=this.intrinsicDeviceAsMediaStream(N);w==="audio"&&N===null?(K.stream=Un.createEmptyAudioDevice(),K.constraints=null):H?(this.logger.info(`using media stream ${H.id} for ${w} device`),K.stream=H,K.constraints=D):(K.stream=yield navigator.mediaDevices.getUserMedia(D),K.constraints=D),yield this.handleNewInputDevice(w,K)}catch(H){const q=this.getErrorMessage(H);w==="audio"?(T=this.eventController)===null||T===void 0||T.publishEvent("audioInputFailed",{audioInputErrorMessage:q}):(O=this.eventController)===null||O===void 0||O.publishEvent("videoInputFailed",{videoInputErrorMessage:q}),this.logger.error(`failed to get ${w} device for constraints ${JSON.stringify(D)}: ${q}`);let me=!0;if(H&&"constraint"in H&&(this.logger.error(`Over-constrained by constraint: ${H.constraint}`),this.useMediaConstraintsFallback)){const we=this.getMediaStreamConstraints(w,N,!0),ue=JSON.stringify(we);if(ue!==JSON.stringify(D)){this.logger.info(`retry requesting new ${w} device with minimal constraint ${ue}`);try{K.stream=yield navigator.mediaDevices.getUserMedia(we),K.constraints=we,yield this.handleNewInputDevice(w,K),me=!1}catch(Pe){this.logger.error(`failed to get ${w} device for constraints ${ue}: ${this.getErrorMessage(Pe)}`)}}}if(me){if(w==="audio"){this.logger.info(`choosing null ${w} device instead`);try{K.stream=Un.createEmptyAudioDevice(),K.constraints=null,yield this.handleNewInputDevice(w,K)}catch(we){this.logger.error(`failed to choose null ${w} device. ${we.name}: ${we.message}`)}}this.handleGetUserMediaError(H,Date.now()-G)}}finally{this.watchForDeviceChangesIfNecessary()}})}getErrorMessage(w){return w?w.name&&w.message?`${w.name}: ${w.message}`:w.name?w.name:w.message?w.message:"UnknownError":"UnknownError"}handleNewInputDevice(w,N){var T;return u(this,void 0,void 0,function*(){this.logger.info(`got ${w} device for constraints ${JSON.stringify(N.constraints)}`);const O=(T=this.getMediaTrackSettings(N.stream))===null||T===void 0?void 0:T.deviceId;N.groupId=O?this.getGroupIdFromDeviceId(w,O):"",this.activeDevices[w]=N,this.logger.debug(`Set activeDevice to ${JSON.stringify(N)}`),this.watchForDeviceChangesIfNecessary();const D=N.stream.getTracks()[0];if(D&&(N.endedCallback=()=>{this.activeDevices[w]&&this.activeDevices[w].stream===N.stream&&(this.handleDeviceStreamEnded(w,O),delete N.endedCallback)},D.addEventListener("ended",N.endedCallback,{once:!0})),w==="audio"){const G=N.stream.getAudioTracks()[0];if(G){const K=G.getSettings().deviceId||N.stream;N.trackMuteCallback=()=>{this.mediaStreamMuteObserver(K,!0)},N.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(K,!1)},G.addEventListener("mute",N.trackMuteCallback,{once:!1}),G.addEventListener("unmute",N.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),G.muted?N.trackMuteCallback():N.trackUnmuteCallback()}}})}calculateMediaStreamConstraints(w,N,T,O){if(O&&this.listCachedDevicesOfKind(`${w}input`).length===1)return!0;const D={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?D.deviceId=N:D.deviceId={exact:N},T&&(D.groupId=T),O?D:w==="video"?(D.width={ideal:this.videoInputQualitySettings.videoWidth},D.height={ideal:this.videoInputQualitySettings.videoHeight},D.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},D):(this.supportSampleRateConstraint()&&(D.sampleRate={ideal:Un.defaultSampleRate}),this.supportSampleSizeConstraint()&&(D.sampleSize={ideal:Un.defaultSampleSize}),this.supportChannelCountConstraint()&&(D.channelCount={ideal:Un.defaultChannelCount}),Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},D))}getMediaStreamConstraintsFromTrackConstraints(w,N){return w==="audio"?{audio:N}:{video:N}}getMediaStreamConstraints(w,N){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,O={};if(!N)return null;const D=this.intrinsicDeviceAsMediaStream(N);if(D)return O.streamId=D.id,this.getMediaStreamConstraintsFromTrackConstraints(w,O);if(typeof N=="string"){let G="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(this.deviceInfoCache!==null?G=this.getGroupIdFromDeviceId(w,N):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),O=this.calculateMediaStreamConstraints(w,N,G,T),this.getMediaStreamConstraintsFromTrackConstraints(w,O)}return M(N)?(O=this.calculateMediaStreamConstraints(w,N.deviceId,N.groupId,T),this.getMediaStreamConstraintsFromTrackConstraints(w,O)):(O=N,this.getMediaStreamConstraintsFromTrackConstraints(w,O))}deviceInfoFromDeviceId(w,N){if(this.deviceInfoCache===null)return null;for(const T of this.deviceInfoCache)if(T.kind===w&&T.deviceId===N)return T;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(w,N){if(!w||!w.active||!N)return!1;if(N.id)return w.id===N.id;const T=this.getMediaTrackSettings(w);if(!T.deviceId)return!1;const O=Un.getIntrinsicDeviceId(N);return typeof O=="string"?T.deviceId===O:!1}getMediaTrackSettings(w){var N;return(N=w.getTracks()[0])===null||N===void 0?void 0:N.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const w=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(w)}setTransform(w,N){var T,O;(O=(T=this.transform)===null||T===void 0?void 0:T.nodes)===null||O===void 0||O.end.disconnect(),this.transform={nodes:N,device:w};const D=N==null?void 0:N.end,G=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${D} to destination ${G}.`),D==null||D.connect(G),this.reconnectAudioInputs()}removeTransform(){var w;const N=this.transform;if(N)return(w=this.transform.nodes)===null||w===void 0||w.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),N}attachAudioInputStreamToAudioContext(w){var N;(N=this.audioInputSourceNode)===null||N===void 0||N.disconnect(),this.audioInputSourceNode=Un.getAudioContext().createMediaStreamSource(w);const T=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(T)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=Un.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var w,N;return((N=(w=this.transform)===null||w===void 0?void 0:w.nodes)===null||N===void 0?void 0:N.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(w){Un.defaultLatencyHint=w}static getAudioContext(){if(!Un.audioContext){const w={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(w.sampleRate=Un.defaultSampleRate),new m.default().requiresPlaybackLatencyHintForAudioContext()&&(w.latencyHint="playback"),Un.defaultLatencyHint&&(w.latencyHint=Un.defaultLatencyHint),Un.audioContext=new(window.AudioContext||window.webkitAudioContext)(w)}return Un.audioContext}static closeAudioContext(){if(Un.audioContext)try{Un.audioContext.close()}catch{}Un.audioContext=null}addMediaStreamBrokerObserver(w){this.mediaStreamBrokerObservers.add(w)}removeMediaStreamBrokerObserver(w){this.mediaStreamBrokerObservers.delete(w)}publishVideoInputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(N=>{N.videoInputDidChange&&N.videoInputDidChange(w)}),this.pushVideoMeetingStateForPermissions(w)}publishAudioInputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(N=>{N.audioInputDidChange&&N.audioInputDidChange(w)}),this.pushAudioMeetingStateForPermissions(w)}publishAudioOutputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(N=>{N.audioOutputDidChange&&N.audioOutputDidChange(w)})}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(w,N,T){let O=`API/DefaultDeviceController/${w}`;typeof N<"u"&&(O+=` ${JSON.stringify(N)}`),typeof T<"u"&&(O+=` -> ${JSON.stringify(T)}`),this.logger.info(O)}constructor(w,N,T=new m.default,O){this.logger=w,this.browserBehavior=T,this.eventController=O,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new r.default,this.videoInputTaskQueue=new r.default,this.muted=!1,this.mediaStreamMuteObserver=(H,q)=>{for(const me of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(me)&&me.audioInputMuteStateChanged&&me.audioInputMuteStateChanged(H,q)})},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:D=!1,useMediaConstraintsFallback:G=!0}=N||{};this.useWebAudio=D,this.useMediaConstraintsFallback=G,this.videoInputQualitySettings=new I.default(Un.defaultVideoWidth,Un.defaultVideoHeight,Un.defaultVideoFrameRate);const K=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=K[0],this.videoInputQualitySettings.videoHeight=K[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=new h.default().create();const H=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(H)}`)}catch(H){w.error(H.message)}}},"DefaultDeviceController");l.default=L,L.permissionDeniedOriginDetectionThresholdMs=500,L.defaultVideoWidth=960,L.defaultVideoHeight=540,L.defaultVideoFrameRate=15,L.defaultSampleRate=48e3,L.defaultSampleSize=16,L.defaultChannelCount=1,L.audioContext=null;function M(k){return typeof k=="object"&&"deviceId"in k&&"groupId"in k&&"kind"in k&&"label"in k}s(M,"isMediaDeviceInfo")},762762:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{matchesConstraints(g){return JSON.stringify(this.constraints)===JSON.stringify(g)}constructor(){this.groupId=""}},"DeviceSelection");l.default=f},95507:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class extends Error{constructor(g,m){super(m||"Error fetching device."),this.cause=g,this.name="GetUserMediaError"}},"GetUserMediaError");l.default=f},688418:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0}),l.NoOpDeviceControllerWithEventController=void 0;const m=g(f(740880)),h=g(f(577849));let a=s(class extends m.default{destroy(){return u(this,void 0,void 0,function*(){this.destroyed=!0})}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,i){}getVideoInputQualitySettings(){return h.default.VideoDisabled}constructor(e){super(),this.destroyed=!1}},"NoOpDeviceController");l.default=a;let r=s(class extends a{constructor(e){super(),this.eventController=e}},"NoOpDeviceControllerWithEventController");l.NoOpDeviceControllerWithEventController=r},22377:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(95507));let m=s(class extends g.default{constructor(a){super(a),this.name="NotFoundError"}},"NotFoundError");l.default=m},323025:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(95507));let m=s(class extends g.default{constructor(a){super(a),this.name="NotReadableError"}},"NotReadableError");l.default=m},461020:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(95507));let m=s(class extends g.default{constructor(a,r){super(a),this.constraint=r,this.name="OverconstrainedError"}},"OverconstrainedError");l.default=m},329572:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(95507));let m=s(class extends g.default{constructor(a,r){super(a,r),this.name="PermissionDeniedError"}},"PermissionDeniedError");l.default=m},174444:function(U,l){"use strict";var f=this&&this.__awaiter||function(g,m,h,a){function r(n){return n instanceof h?n:new h(function(e){e(n)})}return s(r,"adopt"),new(h||(h=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(p){e(p)}}s(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(p){e(p)}}s(i,"rejected");function o(c){c.done?n(c.value):r(c.value).then(t,i)}s(o,"step"),o((a=a.apply(g,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=s(class{mute(m){return f(this,void 0,void 0,function*(){})}stop(){var m;return f(this,void 0,void 0,function*(){(m=this.node)===null||m===void 0||m.disconnect()})}intrinsicDevice(){return f(this,void 0,void 0,function*(){return this.inner})}createAudioNode(m){var h;return f(this,void 0,void 0,function*(){return(h=this.node)===null||h===void 0||h.disconnect(),this.node=yield this.createSingleAudioNode(m),{start:this.node,end:this.node}})}constructor(m){this.inner=m}},"SingleNodeAudioTransformDevice");l.default=u},777032:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(95507));let m=s(class extends g.default{constructor(a){super(a),this.name="TypeError"}},"TypeError");l.default=m},577849:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{equals(g){return this.videoWidth===g.videoWidth&&this.videoHeight===g.videoHeight&&this.videoFrameRate===g.videoFrameRate}constructor(g,m,h){this.videoWidth=g,this.videoHeight=m,this.videoFrameRate=h}},"VideoQualitySettings");l.default=f,f.VideoDisabled=new f(0,0,0),f.VideoResolutionHD=new f(1280,720,30),f.VideoResolutionFHD=new f(1920,1080,30),f.VideoResolutionUHD=new f(3840,2160,30)},924519:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isVideoTransformDevice=void 0;function f(u){return!!u&&typeof u=="object"&&"transformStream"in u&&"stop"in u&&"intrinsicDevice"in u}s(f,"isVideoTransformDevice"),l.isVideoTransformDevice=f},691015:function(U,l){"use strict";var f=this&&this.__awaiter||function(g,m,h,a){function r(n){return n instanceof h?n:new h(function(e){e(n)})}return s(r,"adopt"),new(h||(h=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(p){e(p)}}s(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(p){e(p)}}s(i,"rejected");function o(c){c.done?n(c.value):r(c.value).then(t,i)}s(o,"step"),o((a=a.apply(g,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=s(class{destroy(){return f(this,void 0,void 0,function*(){this.mediaQueryList&&(typeof this.mediaQueryList.addEventListener=="function"?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()})}registerObserver(m){this.observerQueue.add(m),m.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(m){this.observerQueue.delete(m)}constructor(m,h){if(this.devicePixelRatioSource=m,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach(r=>{r.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())})},typeof window>"u")return;const a=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);typeof a.addEventListener=="function"?(a.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=a):typeof a.addListener=="function"?(a.addListener(this.mediaQueryListener),this.mediaQueryList=a):h.warn("ignoring DefaultDevicePixelRatioMonitor")}},"DefaultDevicePixelRatioMonitor");l.default=u},890150:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{devicePixelRatio(){return typeof window>"u"||!window||!window.devicePixelRatio?1:window.devicePixelRatio}},"DevicePixelRatioWindowSource");l.default=f},221450:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(t,i,o,c){function p(S){return S instanceof o?S:new o(function(d){d(S)})}return s(p,"adopt"),new(o||(o=Promise))(function(S,d){function y(A){try{I(c.next(A))}catch(L){d(L)}}s(y,"fulfilled");function E(A){try{I(c.throw(A))}catch(L){d(L)}}s(E,"rejected");function I(A){A.done?S(A.value):p(A.value).then(y,E)}s(I,"step"),I((c=c.apply(t,i||[])).next())})},g=this&&this.__rest||function(t,i){var o={};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&i.indexOf(c)<0&&(o[c]=t[c]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,c=Object.getOwnPropertySymbols(t);p<c.length;p++)i.indexOf(c[p])<0&&Object.prototype.propertyIsEnumerable.call(t,c[p])&&(o[c[p]]=t[c[p]]);return o},m=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const h=m(f(222325)),a=m(f(264323)),r=m(f(820355)),n=f(450804);let e=s(class Hr{addEventListeners(){!this.beaconEventListener||!("window"in f.g)||!window.addEventListener||!("document"in f.g)||!document.addEventListener||(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(i){(i.type==="visibilitychange"&&document.visibilityState==="hidden"||i.type==="pagehide")&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){!this.beaconEventListener||!("window"in f.g)||!window.removeEventListener||!("document"in f.g)||!document.removeEventListener||(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var i;this.removeEventListeners(),this.addEventListeners(),(i=this.intervalScheduler)===null||i===void 0||i.stop(),this.intervalScheduler=new a.default(this.flushIntervalMs),this.intervalScheduler.start(()=>this.sendEvents())}stop(){var i;(i=this.intervalScheduler)===null||i===void 0||i.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(i){return u(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(i)}`);const{name:o,ts:c,attributes:p}=i,S=p&&this.filterAttributes(p,this.attributesToFilter),d=Object.assign({name:o,ts:c},S);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(d)}`);const y=this.getSize(d);if(y>Hr.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${y} bytes. Item cannot exceed max item size allowed of ${Hr.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(o)){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(d)}`),this.sendEventImmediately({name:o,ts:c,attributes:S});return}if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(d),this.ingestionEventSize+=y,this.bufferItemThresholdReached(y)){const E=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(E),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}})}filterAttributes(i,o){const c=new Set(o);return Object.keys(i).filter(S=>c.has(S)).forEach(S=>delete i[S]),i}initializeAndGetCurrentIngestionEvent(){const i={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(i),i}bufferItemThresholdReached(i){return i+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===Hr.MAX_PAYLOAD_ITEMS}getSize(i){let o=0;if(typeof i=="object")for(const[c,p]of Object.entries(i))o+=this.getPrimitiveSize(c),o+=this.getSize(p);else o+=this.getPrimitiveSize(i);return o}getPrimitiveSize(i){let o=0;return typeof i=="string"?o+=i.length*2:typeof i=="number"&&(o+=8),o}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return this.buffer.length===0||this.bufferSize===0}getItems(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.isEmpty()?[]:(i=Math.min(this.buffer.length,i+1),this.buffer.splice(o,i))}makeBeaconRequestBody(i){const o={metadata:this.metadata,events:i,authorization:this.authenticationToken};return JSON.stringify(o)}makeRequestBody(i){const o={metadata:this.metadata,events:i};return JSON.stringify(o)}sendEventImmediately(i){return u(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(i)}`);const{name:o,ts:c,attributes:p}=i,S={type:this.type,v:this.v,payloads:[Object.assign({name:o,ts:c},p)]};let d=!1,y=null;const E=this.makeRequestBody([S]);try{if(y=yield this.send(E),y.ok){try{const I=yield y.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${E}, message: ${JSON.stringify(I)}`)}catch(I){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${I} for event ${E}`)}return}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${E} with response status ${y.status}`),d=!0}catch(I){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${E} to the ingestion endpoint ${I}.`),d=!0;try{if(this.metadata.browserName.toLowerCase()==="firefox"){const A=this.makeBeaconRequestBody([S]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${A}`),navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,A)?d=!1:d=!0}}catch{this.logger.warn(`Event Reporting - Error sending beacon for an important event ${E}`),d=!0}}d&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${E}`),this.failedIngestionEvents.push(S))})}send(i){return u(this,void 0,void 0,function*(){const o=new h.default(Hr.RETRY_FIXED_BACKOFF_WAIT_MS,Hr.RETRY_SHORT_BACKOFF_MS,Hr.RETRY_LONG_BACKOFF_MS);try{let c=0;for(;c<this.retryCountLimit;){const p=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:i});if(p.ok||!Hr.SENDING_FAILURE_CODES.has(p.status))return p;if(this.logger.warn(`Will retry sending failure for ${i} due to status code ${p.status}.`),c++,c<this.retryCountLimit){const S=o.nextBackoffAmountMs();yield n.wait(S)}}if(c===this.retryCountLimit)throw new Error(`Retry count limit reached for ${i}`)}catch(c){throw c}})}sendBeacon(){return u(this,void 0,void 0,function*(){const i=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(i)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const c=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);i.push(c),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(c)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const c=this.failedIngestionEvents.map(p=>this.deepCopyCurrentIngestionEvent(p));i.push(...c),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(c)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach(c=>{i.push(...c),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(c)}`)}),this.cancellableEvents.clear()),i.length===0)return;const o=this.makeBeaconRequestBody(i);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${o}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,o)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${o}`)}catch(c){this.logger.warn(`Event Reporting - Sending beacon data ${o} failed with error ${c}`)}})}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return u(this,void 0,void 0,function*(){this.stop(),this.reset()})}constructor(i,o,c,p,S){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=D=>({type:D.type,v:D.v,payloads:[...D.payloads]}),this.sendEvents=()=>u(this,void 0,void 0,function*(){if(this.lock)return;const D=this.getItems(this.flushSize);if(D.length===0)return;this.lock=!0;const G=this.makeRequestBody(D);let K=!1;const H=Date.now();this.metadata.browserName.toLowerCase()==="firefox"&&this.cancellableEvents.set(H,D);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${G}`);const q=yield this.send(G);if(this.cancellableEvents.delete(H),!q.ok)this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${G} with response status ${q.status}`),K=!0;else try{const me=yield q.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${G} message: ${JSON.stringify(me)}`)}catch(me){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${me} for events ${G}`)}}catch(q){K=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${G} to the ingestion endpoint ${q}`)}finally{this.lock=!1}K&&(this.cancellableEvents.delete(H),this.failedIngestionEvents.push(...D))});const d=new r.default(S).getParserResult(),{browserMajorVersion:y}=d,E=g(d,["browserMajorVersion"]),I=o.toJSON(),{type:A,v:L}=I,M=g(I,["type","v"]);this.authenticationToken=o.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},E),M),Object.keys(this.metadata).forEach(D=>this.attributesToFilter.push(D)),this.type=A,this.v=L,this.ingestionURL=c,this.logger=S,this.importantEvents=new Set(p);const{maxBufferCapacityKb:k,totalBufferItems:w,flushSize:N,flushIntervalMs:T,retryCountLimit:O}=i;this.maxBufferCapacityBytes=k*1024,this.totalBufferItems=w,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/w),this.flushIntervalMs=T,this.flushSize=N,this.retryCountLimit=O,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=D=>this.beaconEventHandler(D),this.addEventListeners()}},"InMemoryJSONEventBuffer");l.default=e,e.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),e.RETRY_FIXED_BACKOFF_WAIT_MS=0,e.RETRY_SHORT_BACKOFF_MS=1e3,e.RETRY_LONG_BACKOFF_MS=15e3,e.MAX_PAYLOAD_ITEMS=2,e.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3},552774:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(g=5e3,m=2,h=64,a=100,r=15){this.flushIntervalMs=g,this.flushSize=m,this.maxBufferCapacityKb=h,this.totalBufferItems=a,this.retryCountLimit=r}},"EventBufferConfiguration");l.default=f},336921:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(c,p,S,d){function y(E){return E instanceof S?E:new S(function(I){I(E)})}return s(y,"adopt"),new(S||(S=Promise))(function(E,I){function A(k){try{M(d.next(k))}catch(w){I(w)}}s(A,"fulfilled");function L(k){try{M(d.throw(k))}catch(w){I(w)}}s(L,"rejected");function M(k){k.done?E(k.value):y(k.value).then(A,L)}s(M,"step"),M((d=d.apply(c,p||[])).next())})},g=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const m=f(877232),h=f(262656),a=g(f(411132)),r=g(f(753710)),n=g(f(797361)),e=g(f(509936)),t=g(f(508338)),i=g(f(779373));let o=s(class To{addObserver(p){this.observerSet.add(p)}removeObserver(p){this.observerSet.delete(p)}forEachObserver(p){for(const S of this.observerSet)e.default.nextTick(()=>{this.observerSet.has(S)&&p(S)})}publishEvent(p,S){return u(this,void 0,void 0,function*(){const d=Date.now();this.meetingHistoryStates.push({name:p,timestampMs:d});const y=Object.freeze(Object.assign(this.getAttributes(d),S));this.forEachObserver(E=>{E.eventDidReceive(p,y)}),this.reportEvent(p,d,S)})}reportEvent(p,S,d){var y;return u(this,void 0,void 0,function*(){let E;try{d&&(E=i.default(d)),yield(y=this.eventReporter)===null||y===void 0?void 0:y.reportEvent(S,p,E)}catch(I){this.logger.error(`Error reporting event ${I}`)}})}setupEventReporter(p,S,d){if(d)this._eventReporter=d;else if(p.urls){const y=p.urls.eventIngestionURL;if(y){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:E,credentials:{attendeeId:I,joinToken:A}}=p,L=new n.default(E,I,A),M=new a.default(L,y);this._eventReporter=new r.default(M,S)}}}getAttributes(p){var S,d;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:typeof this.configuration.externalMeetingId=="string"?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:((S=this.parserResult)===null||S===void 0?void 0:S.os.name)||To.UNAVAILABLE,osVersion:((d=this.parserResult)===null||d===void 0?void 0:d.os.version)||To.UNAVAILABLE,sdkVersion:t.default.sdkVersion,sdkName:t.default.sdkName,timestampMs:p}}get eventReporter(){return this._eventReporter}destroy(){return u(this,void 0,void 0,function*(){h.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0})}constructor(p,S,d){var y,E,I,A,L,M,k;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=S,this.configuration=p,this.setupEventReporter(p,S,d);try{this.parserResult=navigator&&navigator.userAgent?new m.UAParser(navigator.userAgent).getResult():null}catch(w){this.logger.error(w.message)}this.browserMajorVersion=((I=(E=(y=this.parserResult)===null||y===void 0?void 0:y.browser)===null||E===void 0?void 0:E.version)===null||I===void 0?void 0:I.split(".")[0])||To.UNAVAILABLE,this.browserName=((A=this.parserResult)===null||A===void 0?void 0:A.browser.name)||To.UNAVAILABLE,this.browserVersion=((L=this.parserResult)===null||L===void 0?void 0:L.browser.version)||To.UNAVAILABLE,this.deviceName=[((M=this.parserResult)===null||M===void 0?void 0:M.device.vendor)||"",((k=this.parserResult)===null||k===void 0?void 0:k.device.model)||""].join(" ").trim()||To.UNAVAILABLE}},"DefaultEventController");l.default=o,o.UNAVAILABLE="Unavailable"},779373:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=s(u=>{const g={};for(const[m,h]of Object.entries(u))if(!(h==null||h===""))if(typeof h=="number"||typeof h=="string")g[m]=h;else throw new TypeError("Unhandled type received while flattening attributes.");return g},"flattenEventAttributes");l.default=f},411132:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(552774));let m=s(class{constructor(a,r,n=new g.default){this.eventsClientConfiguration=a,this.ingestionURL=r,this.eventBufferConfiguration=n}},"EventIngestionConfiguration");l.default=m},753710:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=f(262656),h=g(f(221450));let a=s(class{start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(n){this.logger.error(`Event Reporting - Error starting the event buffer ${n}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(n){this.logger.error(`Event Reporting - Error stopping the event buffer ${n}`)}}reportEvent(n,e,t){return u(this,void 0,void 0,function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${n}, ${e}, ${JSON.stringify(t)}`),this.eventsToIgnore.includes(e)){this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${e} event will be ignored as it is in events to ignore`);return}try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:n,name:e,attributes:t})}catch(i){this.logger.error(`Event Reporting - Error adding event to buffer ${i}`)}})}destroy(){return u(this,void 0,void 0,function*(){this.destroyed=!0,this.stop(),m.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0})}constructor(n,e){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration:t,ingestionURL:i,eventBufferConfiguration:o}=n,{eventsToIgnore:c}=t;this.eventBuffer=new h.default(o,t,i,this.importantEvents,e),this.logger=e,this.eventsToIgnore=c,this.start()}},"DefaultMeetingEventReporter");l.default=a},805932:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{reportEvent(g,m,h){}start(){}stop(){}constructor(){}},"NoOpEventReporter");l.default=f},797361:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{getAuthenticationToken(){return this.authenticationToken}toJSON(){const g={};return g.type=this.type,g.v=this.v,g.meetingId=this.meetingId,g.attendeeId=this.attendeeId,g}constructor(g,m,h,a=[]){this.type="Meet",this.v=1,this.meetingId=g,this.attendeeId=m,this.eventsToIgnore=a,this.authenticationToken=h}},"MeetingEventsClientConfiguration");l.default=f},719007:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(Mr){return Mr&&Mr.__esModule?Mr:{default:Mr}};Object.defineProperty(l,"__esModule",{value:!0}),l.DefaultEventController=l.DefaultDevicePixelRatioMonitor=l.DefaultDeviceController=l.DefaultContentShareController=l.DefaultBrowserBehavior=l.DefaultAudioVideoFacade=l.DefaultAudioVideoController=l.DefaultAudioMixController=l.DefaultActiveSpeakerPolicy=l.DefaultActiveSpeakerDetector=l.DataMessage=l.CreateSDPTask=l.CreatePeerConnectionTask=l.ContentShareMediaStreamBroker=l.ContentShareConstants=l.ConsoleLogger=l.ConnectionHealthPolicyConfiguration=l.ConnectionHealthData=l.ClientVideoStreamReceivingReport=l.ClientMetricReportMediaType=l.ClientMetricReportDirection=l.ClientMetricReport=l.CleanStoppedSessionTask=l.CleanRestartedSessionTask=l.CheckVideoInputFeedback=l.CheckVideoConnectivityFeedback=l.CheckNetworkUDPConnectivityFeedback=l.CheckNetworkTCPConnectivityFeedback=l.CheckContentShareConnectivityFeedback=l.CheckCameraResolutionFeedback=l.CheckAudioOutputFeedback=l.CheckAudioInputFeedback=l.CheckAudioConnectivityFeedback=l.CanvasVideoFrameBuffer=l.CSPMonitor=l.BitrateParameters=l.BaseTask=l.BaseConnectionHealthPolicy=l.BackgroundReplacementVideoFrameProcessor=l.BackgroundFilterVideoFrameProcessor=l.BackgroundBlurVideoFrameProcessor=l.BackgroundBlurStrength=l.AudioVideoControllerState=l.AudioProfile=l.AudioLogEvent=l.Attendee=l.AttachMediaInputTask=l.AsyncScheduler=l.ApplicationMetadata=l.AllHighestVideoBandwidthPolicy=void 0,l.MeetingReadinessCheckerConfiguration=l.MeetingFeatures=l.MeetingEventsClientConfiguration=l.MediaDeviceProxyHandler=l.Maybe=l.LogLevel=l.Log=l.ListenForVolumeIndicatorsTask=l.LeaveAndReceiveLeaveAckTask=l.JoinAndReceiveIndexTask=l.IntervalScheduler=l.InMemoryJSONEventBuffer=l.GlobalMetricReport=l.GetUserMediaError=l.FullJitterLimitedBackoff=l.FullJitterBackoffFactory=l.FullJitterBackoff=l.FinishGatheringICECandidatesTask=l.EventIngestionConfiguration=l.EventBufferConfiguration=l.DeviceSelection=l.DevicePixelRatioWindowSource=l.DefaultWebSocketAdapter=l.DefaultVolumeIndicatorAdapter=l.DefaultVideoTransformDevice=l.DefaultVideoTileFactory=l.DefaultVideoTileController=l.DefaultVideoTile=l.DefaultVideoStreamIndex=l.DefaultVideoStreamIdSet=l.DefaultVideoFrameProcessorTimer=l.DefaultVideoFrameProcessorPipeline=l.DefaultVideoCaptureAndEncodeParameter=l.DefaultUserAgentParser=l.DefaultTranscriptionController=l.DefaultTransceiverController=l.DefaultSimulcastUplinkPolicyForContentShare=l.DefaultSimulcastUplinkPolicy=l.DefaultSignalingClient=l.DefaultSigV4=l.DefaultSessionStateController=l.DefaultReconnectController=l.DefaultRealtimeController=l.DefaultPingPong=l.DefaultModality=l.DefaultMessagingSession=l.DefaultMeetingSession=l.DefaultMeetingReadinessChecker=l.DefaultMeetingEventReporter=l.DefaultMediaDeviceFactory=void 0,l.RedundantAudioEncoderWorkerCode=l.RedundantAudioEncoder=l.ReconnectionHealthPolicy=l.ReceiveVideoStreamIndexTask=l.ReceiveVideoInputTask=l.ReceiveRemoteVideoPauseResumeTask=l.ReceiveAudioInputTask=l.RealtimeVolumeIndicator=l.RealtimeState=l.RealtimeAttendeePositionInFrame=l.PromoteToPrimaryMeetingTask=l.PromiseQueue=l.PrefetchSortBy=l.PrefetchOn=l.PermissionDeniedError=l.ParallelGroupTask=l.POSTLogger=l.OverconstrainedError=l.OpenSignalingConnectionTask=l.OnceTask=l.NotReadableError=l.NotFoundError=l.None=l.NoVideoUplinkBandwidthPolicy=l.NoVideoDownlinkBandwidthPolicy=l.NoOpVideoFrameProcessor=l.NoOpVideoElementFactory=l.NoOpTask=l.NoOpMediaStreamBroker=l.NoOpLogger=l.NoOpEventReporter=l.NoOpDeviceController=l.NoOpDebugLogger=l.NoOpAudioVideoController=l.NScaleVideoUplinkBandwidthPolicy=l.MutableVideoPreferences=l.MultiLogger=l.MonitorTask=l.ModelSpecBuilder=l.MessagingSessionConfiguration=l.Message=l.MeetingSessionVideoAvailability=l.MeetingSessionURLs=l.MeetingSessionTURNCredentials=l.MeetingSessionStatusCode=l.MeetingSessionStatus=l.MeetingSessionLifecycleEventCondition=l.MeetingSessionLifecycleEvent=l.MeetingSessionCredentials=l.MeetingSessionConfiguration=void 0,l.VideoEncodingCpuConnectionHealthPolicy=l.VideoEncodingConnectionHealthPolicyName=l.VideoCodecCapability=l.VideoAdaptiveProbePolicy=l.Versioning=l.UnusableAudioWarningConnectionHealthPolicy=l.TypeError=l.TranscriptionStatusType=l.TranscriptionStatus=l.TranscriptResult=l.TranscriptLanguageWithScore=l.TranscriptItemType=l.TranscriptItem=l.TranscriptEntity=l.TranscriptAlternative=l.Transcript=l.TimeoutTask=l.TimeoutScheduler=l.TaskStatus=l.TargetDisplaySize=l.SubscribeAndReceiveSubscribeAckTask=l.StreamMetricReport=l.Some=l.SingleNodeAudioTransformDevice=l.SimulcastVideoStreamIndex=l.SimulcastTransceiverController=l.SimulcastLayers=l.SimulcastContentShareTransceiverController=l.SignalingClientVideoSubscriptionConfiguration=l.SignalingClientSubscribe=l.SignalingClientJoin=l.SignalingClientEventType=l.SignalingClientEvent=l.SignalingClientConnectionRequest=l.SignalingAndMetricsConnectionMonitor=l.SetRemoteDescriptionTask=l.SetLocalDescriptionTask=l.SessionStateControllerTransitionResult=l.SessionStateControllerState=l.SessionStateControllerDeferPriority=l.SessionStateControllerAction=l.ServerSideNetworkAdaption=l.SerialGroupTask=l.SendingAudioFailureConnectionHealthPolicy=l.SendAndReceiveDataMessagesTask=l.SDPMediaSection=l.SDPCandidateType=l.SDP=l.RunnableTask=l.RedundantAudioRecoveryMetricReport=void 0,l.isVideoTransformDevice=l.isDestroyable=l.isAudioTransformDevice=l.ZLIBTextCompressor=l.WebSocketReadyState=l.WaitForAttendeePresenceTask=l.VoiceFocusTransformDevice=l.VoiceFocusDeviceTransformer=l.VideoTileState=l.VideoStreamDescription=l.VideoSource=l.VideoQualitySettings=l.VideoQualityAdaptationPreference=l.VideoPriorityBasedPolicyConfig=l.VideoPriorityBasedPolicy=l.VideoPreferences=l.VideoPreference=l.VideoOnlyTransceiverController=l.VideoLogEvent=l.VideoFxProcessor=l.VideoEncodingFramerateConnectionHealthPolicy=void 0;const g=u(f(419507));l.AllHighestVideoBandwidthPolicy=g.default;const m=u(f(623504));l.ApplicationMetadata=m.default;const h=u(f(509936));l.AsyncScheduler=h.default;const a=u(f(579437));l.AttachMediaInputTask=a.default;const r=u(f(690));l.Attendee=r.default;const n=u(f(228978));l.AudioLogEvent=n.default;const e=u(f(506664));l.AudioProfile=e.default;const t=u(f(205427));l.AudioVideoControllerState=t.default;const i=u(f(676243));l.BackgroundBlurStrength=i.default;const o=u(f(595284));l.BackgroundBlurVideoFrameProcessor=o.default;const c=u(f(424392));l.BackgroundFilterVideoFrameProcessor=c.default;const p=u(f(402494));l.BackgroundReplacementVideoFrameProcessor=p.default;const S=u(f(881563));l.BaseConnectionHealthPolicy=S.default;const d=u(f(997265));l.BaseTask=d.default;const y=u(f(608744));l.BitrateParameters=y.default;const E=u(f(573886));l.CSPMonitor=E.default;const I=u(f(895296));l.CanvasVideoFrameBuffer=I.default;const A=u(f(430762));l.CheckAudioConnectivityFeedback=A.default;const L=u(f(659663));l.CheckAudioInputFeedback=L.default;const M=u(f(451976));l.CheckAudioOutputFeedback=M.default;const k=u(f(745468));l.CheckCameraResolutionFeedback=k.default;const w=u(f(582266));l.CheckContentShareConnectivityFeedback=w.default;const N=u(f(22791));l.CheckNetworkTCPConnectivityFeedback=N.default;const T=u(f(583051));l.CheckNetworkUDPConnectivityFeedback=T.default;const O=u(f(791171));l.CheckVideoConnectivityFeedback=O.default;const D=u(f(880952));l.CheckVideoInputFeedback=D.default;const G=u(f(369511));l.CleanRestartedSessionTask=G.default;const K=u(f(155870));l.CleanStoppedSessionTask=K.default;const H=u(f(434040));l.ClientMetricReport=H.default;const q=u(f(369475));l.ClientMetricReportDirection=q.default;const me=u(f(982782));l.ClientMetricReportMediaType=me.default;const we=u(f(505243));l.ClientVideoStreamReceivingReport=we.default;const ue=u(f(844812));l.ConnectionHealthData=ue.default;const Pe=u(f(627070));l.ConnectionHealthPolicyConfiguration=Pe.default;const Ye=u(f(63145));l.ConsoleLogger=Ye.default;const be=u(f(203621));l.ContentShareConstants=be.default;const He=u(f(555961));l.ContentShareMediaStreamBroker=He.default;const Ke=u(f(780676));l.CreatePeerConnectionTask=Ke.default;const Ue=u(f(749365));l.CreateSDPTask=Ue.default;const ht=u(f(535624));l.DataMessage=ht.default;const Tt=u(f(266947));l.DefaultActiveSpeakerDetector=Tt.default;const st=u(f(925343));l.DefaultActiveSpeakerPolicy=st.default;const ut=u(f(678521));l.DefaultAudioMixController=ut.default;const We=u(f(604697));l.DefaultAudioVideoController=We.default;const _t=u(f(575289));l.DefaultAudioVideoFacade=_t.default;const Rt=u(f(421537));l.DefaultBrowserBehavior=Rt.default;const Ae=u(f(267589));l.DefaultContentShareController=Ae.default;const $t=u(f(111425));l.DefaultDeviceController=$t.default;const rt=u(f(691015));l.DefaultDevicePixelRatioMonitor=rt.default;const Ft=u(f(336921));l.DefaultEventController=Ft.default;const en=u(f(282381));l.DefaultMediaDeviceFactory=en.default;const on=u(f(753710));l.DefaultMeetingEventReporter=on.default;const Dn=u(f(94313));l.DefaultMeetingReadinessChecker=Dn.default;const Yt=u(f(938649));l.DefaultMeetingSession=Yt.default;const zn=u(f(326477));l.DefaultMessagingSession=zn.default;const vn=u(f(641501));l.DefaultModality=vn.default;const mt=u(f(690561));l.DefaultPingPong=mt.default;const pt=u(f(420841));l.DefaultRealtimeController=pt.default;const Qe=u(f(554791));l.DefaultReconnectController=Qe.default;const Ht=u(f(266661));l.DefaultSessionStateController=Ht.default;const xt=u(f(133523));l.DefaultSigV4=xt.default;const wn=u(f(790095));l.DefaultSignalingClient=wn.default;const kt=u(f(452188));l.DefaultSimulcastUplinkPolicy=kt.default;const J=u(f(400493));l.DefaultSimulcastUplinkPolicyForContentShare=J.default;const _e=u(f(254537));l.DefaultTransceiverController=_e.default;const Oe=u(f(974511));l.DefaultTranscriptionController=Oe.default;const Ne=u(f(820355));l.DefaultUserAgentParser=Ne.default;const $e=u(f(589417));l.DefaultVideoCaptureAndEncodeParameter=$e.default;const Fe=u(f(186227));l.DefaultVideoFrameProcessorPipeline=Fe.default;const oe=u(f(577400));l.DefaultVideoFrameProcessorTimer=oe.default;const Ce=u(f(333041));l.DefaultVideoStreamIdSet=Ce.default;const z=u(f(668077));l.DefaultVideoStreamIndex=z.default;const Y=u(f(639907));l.DefaultVideoTile=Y.default;const de=u(f(368695));l.DefaultVideoTileController=de.default;const ce=u(f(881497));l.DefaultVideoTileFactory=ce.default;const De=u(f(153922));l.DefaultVideoTransformDevice=De.default;const Ie=u(f(943145));l.DefaultVolumeIndicatorAdapter=Ie.default;const Le=u(f(709345));l.DefaultWebSocketAdapter=Le.default;const fe=u(f(890150));l.DevicePixelRatioWindowSource=fe.default;const ge=u(f(762762));l.DeviceSelection=ge.default;const R=u(f(552774));l.EventBufferConfiguration=R.default;const ae=u(f(411132));l.EventIngestionConfiguration=ae.default;const pe=u(f(755069));l.FinishGatheringICECandidatesTask=pe.default;const Se=u(f(222325));l.FullJitterBackoff=Se.default;const X=u(f(674747));l.FullJitterBackoffFactory=X.default;const ft=u(f(892355));l.FullJitterLimitedBackoff=ft.default;const ke=u(f(95507));l.GetUserMediaError=ke.default;const ze=u(f(806860));l.GlobalMetricReport=ze.default;const Gt=u(f(221450));l.InMemoryJSONEventBuffer=Gt.default;const dt=u(f(264323));l.IntervalScheduler=dt.default;const Qn=u(f(703766));l.JoinAndReceiveIndexTask=Qn.default;const Wn=u(f(103569));l.LeaveAndReceiveLeaveAckTask=Wn.default;const Vt=u(f(141946));l.ListenForVolumeIndicatorsTask=Vt.default;const yn=u(f(301786));l.Log=yn.default;const Zt=u(f(938402));l.LogLevel=Zt.default;const Rn=u(f(630486));l.MediaDeviceProxyHandler=Rn.default;const Nn=u(f(797361));l.MeetingEventsClientConfiguration=Nn.default;const fi=u(f(326721));l.MeetingFeatures=fi.default;const ct=u(f(410988));l.MeetingReadinessCheckerConfiguration=ct.default;const Ze=u(f(750952));l.MeetingSessionConfiguration=Ze.default;const Xt=u(f(678280));l.MeetingSessionCredentials=Xt.default;const Ot=u(f(807612));l.MeetingSessionLifecycleEvent=Ot.default;const sn=u(f(471327));l.MeetingSessionLifecycleEventCondition=sn.default;const En=u(f(499726));l.MeetingSessionStatus=En.default;const On=u(f(935451));l.MeetingSessionStatusCode=On.default;const Sn=u(f(302329));l.MeetingSessionTURNCredentials=Sn.default;const bn=u(f(379414));l.MeetingSessionURLs=bn.default;const xn=u(f(122818));l.MeetingSessionVideoAvailability=xn.default;const B=u(f(900184));l.Message=B.default;const re=u(f(470078));l.MessagingSessionConfiguration=re.default;const Ee=u(f(100510));l.ModelSpecBuilder=Ee.default;const Me=u(f(956034));l.MonitorTask=Me.default;const qe=u(f(346249));l.MultiLogger=qe.default;const St=u(f(820732));l.NScaleVideoUplinkBandwidthPolicy=St.default;const At=u(f(351884));l.NoOpAudioVideoController=At.default;const Et=u(f(199267));l.NoOpDebugLogger=Et.default;const gt=u(f(688418));l.NoOpDeviceController=gt.default;const Dt=u(f(805932));l.NoOpEventReporter=Dt.default;const jt=u(f(860702));l.NoOpLogger=jt.default;const Cn=u(f(740880));l.NoOpMediaStreamBroker=Cn.default;const _n=u(f(385080));l.NoOpTask=_n.default;const Bn=u(f(67368));l.NoOpVideoElementFactory=Bn.default;const Gn=u(f(739864));l.NoOpVideoFrameProcessor=Gn.default;const hi=u(f(297405));l.NoVideoDownlinkBandwidthPolicy=hi.default;const Ei=u(f(337075));l.NoVideoUplinkBandwidthPolicy=Ei.default;const Ci=u(f(22377));l.NotFoundError=Ci.default;const pi=u(f(323025));l.NotReadableError=pi.default;const mi=u(f(343833));l.OnceTask=mi.default;const Di=u(f(123460));l.OpenSignalingConnectionTask=Di.default;const xi=u(f(461020));l.OverconstrainedError=xi.default;const Li=u(f(325628));l.POSTLogger=Li.default;const gi=u(f(718754));l.ParallelGroupTask=gi.default;const Si=u(f(329572));l.PermissionDeniedError=Si.default;const Ti=u(f(145424));l.PrefetchOn=Ti.default;const Hi=u(f(104352));l.PrefetchSortBy=Hi.default;const kn=u(f(574613));l.PromiseQueue=kn.default;const Xn=u(f(874674));l.PromoteToPrimaryMeetingTask=Xn.default;const ti=u(f(40461));l.RealtimeAttendeePositionInFrame=ti.default;const Bi=u(f(446551));l.RealtimeState=Bi.default;const Ai=u(f(456333));l.RealtimeVolumeIndicator=Ai.default;const vi=u(f(278559));l.ReceiveAudioInputTask=vi.default;const Ni=u(f(115383));l.ReceiveRemoteVideoPauseResumeTask=Ni.default;const Ro=u(f(579824));l.ReceiveVideoInputTask=Ro.default;const ko=u(f(252528));l.ReceiveVideoStreamIndexTask=ko.default;const jr=u(f(24227));l.ReconnectionHealthPolicy=jr.default;const Do=u(f(671024));l.RedundantAudioEncoder=Do.default;const Lo=u(f(152480));l.RedundantAudioEncoderWorkerCode=Lo.default;const $r=u(f(793497));l.RedundantAudioRecoveryMetricReport=$r.default;const Kr=u(f(155109));l.RunnableTask=Kr.default;const Sa=u(f(941900));l.SDP=Sa.default;const Jr=u(f(153223));l.SDPCandidateType=Jr.default;const Yr=u(f(765479));l.SDPMediaSection=Yr.default;const va=u(f(173636));l.SendAndReceiveDataMessagesTask=va.default;const No=u(f(542814));l.SendingAudioFailureConnectionHealthPolicy=No.default;const xo=u(f(124207));l.SerialGroupTask=xo.default;const _r=u(f(849539));l.ServerSideNetworkAdaption=_r.default;const Bo=u(f(308334));l.SessionStateControllerAction=Bo.default;const ya=u(f(626566));l.SessionStateControllerDeferPriority=ya.default;const Fo=u(f(773215));l.SessionStateControllerState=Fo.default;const Vo=u(f(598410));l.SessionStateControllerTransitionResult=Vo.default;const Uo=u(f(857995));l.SetLocalDescriptionTask=Uo.default;const ba=u(f(638212));l.SetRemoteDescriptionTask=ba.default;const Tr=u(f(109412));l.SignalingAndMetricsConnectionMonitor=Tr.default;const Ea=u(f(112059));l.SignalingClientConnectionRequest=Ea.default;const Ho=u(f(409586));l.SignalingClientEvent=Ho.default;const zo=u(f(576442));l.SignalingClientEventType=zo.default;const Wo=u(f(228784));l.SignalingClientJoin=Wo.default;const Qr=u(f(935214));l.SignalingClientSubscribe=Qr.default;const Go=u(f(838552));l.SignalingClientVideoSubscriptionConfiguration=Go.default;const Ji=u(f(935385));l.SimulcastContentShareTransceiverController=Ji.default;const fr=u(f(418760));l.SimulcastLayers=fr.default;const Ir=u(f(660937));l.SimulcastTransceiverController=Ir.default;const jo=u(f(473461));l.SimulcastVideoStreamIndex=jo.default;const Ca=u(f(174444));l.SingleNodeAudioTransformDevice=Ca.default;const Xr=u(f(564979));l.StreamMetricReport=Xr.default;const Zr=u(f(737155));l.SubscribeAndReceiveSubscribeAckTask=Zr.default;const zi=u(f(56478));l.TargetDisplaySize=zi.default;const $o=u(f(591778));l.TaskStatus=$o.default;const Ko=u(f(20202));l.TimeoutScheduler=Ko.default;const Jo=u(f(208803));l.TimeoutTask=Jo.default;const wr=u(f(113382));l.Transcript=wr.default;const Yo=u(f(5127));l.TranscriptAlternative=Yo.default;const _a=u(f(586749));l.TranscriptEntity=_a.default;const Ta=u(f(364809));l.TranscriptItem=Ta.default;const qr=u(f(773033));l.TranscriptItemType=qr.default;const Qo=u(f(550356));l.TranscriptLanguageWithScore=Qo.default;const Xo=u(f(896907));l.TranscriptResult=Xo.default;const eo=u(f(937252));l.TranscriptionStatus=eo.default;const Zo=u(f(596028));l.TranscriptionStatusType=Zo.default;const qo=u(f(777032));l.TypeError=qo.default;const Or=u(f(770479));l.UnusableAudioWarningConnectionHealthPolicy=Or.default;const hr=u(f(508338));l.Versioning=hr.default;const to=u(f(438507));l.VideoAdaptiveProbePolicy=to.default;const es=u(f(924520));l.VideoCodecCapability=es.default;const ts=u(f(619473));l.VideoEncodingConnectionHealthPolicyName=ts.default;const Ia=u(f(641594));l.VideoEncodingCpuConnectionHealthPolicy=Ia.default;const no=u(f(797995));l.VideoEncodingFramerateConnectionHealthPolicy=no.default;const io=u(f(67242));l.VideoFxProcessor=io.default;const ns=u(f(244839));l.VideoLogEvent=ns.default;const ro=u(f(395181));l.VideoOnlyTransceiverController=ro.default;const is=u(f(941924));l.VideoPreference=is.default;const Ar=u(f(586283));l.VideoPreferences=Ar.default;const oo=u(f(926448));l.VideoPriorityBasedPolicy=oo.default;const rs=u(f(177426));l.VideoPriorityBasedPolicyConfig=rs.default;const os=u(f(716696));l.VideoQualityAdaptationPreference=os.default;const wa=u(f(577849));l.VideoQualitySettings=wa.default;const ss=u(f(403868));l.VideoSource=ss.default;const as=u(f(984650));l.VideoStreamDescription=as.default;const so=u(f(622283));l.VideoTileState=so.default;const ao=u(f(591025));l.VoiceFocusDeviceTransformer=ao.default;const lo=u(f(326866));l.VoiceFocusTransformDevice=lo.default;const ls=u(f(386367));l.WaitForAttendeePresenceTask=ls.default;const pr=u(f(804417));l.WebSocketReadyState=pr.default;const ds=u(f(307210));l.ZLIBTextCompressor=ds.default;const co=f(586283);Object.defineProperty(l,"MutableVideoPreferences",{enumerable:!0,get:function(){return co.MutableVideoPreferences}});const Wi=f(823880);Object.defineProperty(l,"Some",{enumerable:!0,get:function(){return Wi.Some}}),Object.defineProperty(l,"None",{enumerable:!0,get:function(){return Wi.None}}),Object.defineProperty(l,"Maybe",{enumerable:!0,get:function(){return Wi.Maybe}});const Ii=f(296132);Object.defineProperty(l,"isAudioTransformDevice",{enumerable:!0,get:function(){return Ii.isAudioTransformDevice}});const _i=f(262656);Object.defineProperty(l,"isDestroyable",{enumerable:!0,get:function(){return _i.isDestroyable}});const el=f(924519);Object.defineProperty(l,"isVideoTransformDevice",{enumerable:!0,get:function(){return el.isVideoTransformDevice}})},63145:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(938402));let m=s(class{info(a){this.log(g.default.INFO,a)}warn(a){this.log(g.default.WARN,a)}error(a){this.log(g.default.ERROR,a)}debug(a){g.default.DEBUG<this.level||(typeof a=="string"?this.log(g.default.DEBUG,a):a?this.log(g.default.DEBUG,a()):this.log(g.default.DEBUG,""+a))}setLogLevel(a){this.level=a}getLogLevel(){return this.level}log(a,r){if(a<this.level)return;const e=`${new Date().toISOString()} [${g.default[a]}] ${this.name} - ${r}`;switch(a){case g.default.ERROR:console.error(e);break;case g.default.WARN:console.warn(e);break;case g.default.DEBUG:console.debug(e.replace(/\\r\\n/g,`
`));break;case g.default.INFO:console.info(e);break}}constructor(a,r=g.default.WARN){this.name=a,this.level=r}},"ConsoleLogger");l.default=m},301786:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(g,m,h,a){this.sequenceNumber=g,this.message=m,this.timestampMs=h,this.logLevel=a}},"Log");l.default=f},938402:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.LogLevel=void 0;var f;(function(u){u[u.DEBUG=0]="DEBUG",u[u.INFO=1]="INFO",u[u.WARN=2]="WARN",u[u.ERROR=3]="ERROR",u[u.OFF=4]="OFF"})(f=l.LogLevel||(l.LogLevel={})),l.default=f},346249:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(938402));let m=s(class{info(a){for(const r of this._loggers)r.info(a)}warn(a){for(const r of this._loggers)r.warn(a)}error(a){for(const r of this._loggers)r.error(a)}debug(a){let r,n;typeof a=="string"?n=a:a?n=s(()=>(r||(r=a()),r),"memoized"):n=""+a;for(const e of this._loggers)e.debug(n)}setLogLevel(a){for(const r of this._loggers)r.setLogLevel(a)}getLogLevel(){for(const a of this._loggers)return a.getLogLevel();return g.default.OFF}constructor(...a){this._loggers=a}},"MultiLogger");l.default=m},199267:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(938402)),m=u(f(860702));let h=s(class extends m.default{constructor(){super(g.default.DEBUG)}},"NoOpDebugLogger");l.default=h},860702:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(938402));let m=s(class{info(a){}warn(a){}error(a){}debug(a){g.default.DEBUG<this.level||typeof a!="string"&&a()}setLogLevel(a){this.level=a}getLogLevel(){return this.level}constructor(a=g.default.OFF){this.level=a}},"NoOpLogger");l.default=m},325628:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(264323)),h=g(f(301786)),a=g(f(938402));let r=s(class Tu{addEventListener(){!this.eventListener||!("window"in f.g)||!window.addEventListener||window.addEventListener("unload",this.eventListener)}removeEventListener(){!this.eventListener||!("window"in f.g)||!window.removeEventListener||window.removeEventListener("unload",this.eventListener)}debug(e){a.default.DEBUG<this.logLevel||(typeof e=="string"?this.log(a.default.DEBUG,e):e?this.log(a.default.DEBUG,e()):this.log(a.default.DEBUG,""+e))}info(e){this.log(a.default.INFO,e)}warn(e){this.log(a.default.WARN,e)}error(e){this.log(a.default.ERROR,e)}setLogLevel(e){this.logLevel=e}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new m.default(this.intervalMs),this.intervalScheduler.start(()=>u(this,void 0,void 0,function*(){if(this.lock===!0||this.getLogCaptureSize()===0)return;this.lock=!0;const e=this.logCapture.slice(0,this.batchSize),t=this.makeRequestBody(e);try{(yield fetch(this.url,Object.assign({method:"POST",body:t},this.headers?{headers:this.headers}:{}))).status===200&&(this.logCapture=this.logCapture.slice(e.length))}catch(i){console.warn("[POSTLogger] "+i.message)}finally{this.lock=!1}}))}stop(){var e;(e=this.intervalScheduler)===null||e===void 0||e.stop(),this.intervalScheduler=void 0,this.removeEventListener();const t=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,t)}destroy(){return u(this,void 0,void 0,function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0})}makeRequestBody(e){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:e}))}log(e,t){if(e<this.logLevel)return;const i=Date.now();this.logCapture.push(new h.default(this.sequenceNumber,t,i,a.default[e])),this.sequenceNumber+=1}constructor(e){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:t,batchSize:i=Tu.BATCH_SIZE,intervalMs:o=Tu.INTERVAL_MS,logLevel:c=a.default.WARN,metadata:p,headers:S}=e;this.url=t,this.batchSize=i,this.intervalMs=o,this.logLevel=c,this.metadata=p,this.headers=S,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}},"POSTLogger");l.default=r,r.BATCH_SIZE=85,r.INTERVAL_MS=2e3},282381:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(630486));let m=s(class{create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new g.default);throw new Error("navigator.mediaDevices is not supported")}constructor(){this.isMediaDevicesSupported=typeof navigator<"u"&&!!navigator.mediaDevices}},"DefaultMediaDeviceFactory");l.default=m},630486:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(509936)),h=g(f(264323));let a=s(class Xg{sortedDeviceList(){return u(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0)})}handleDeviceChangeEvent(){for(const n of this.deviceChangeListeners)m.default.nextTick(()=>{if(this.deviceChangeListeners.has(n)){const e=new Event("devicechange");typeof n=="function"?n(e):n.handleEvent(e)}})}constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(n,e,t)=>{if(!Reflect.has(n,e))return;if(!("ondevicechange"in navigator.mediaDevices)){if(e==="addEventListener")return this.patchAddEventListener(n,e,t);if(e==="removeEventListener")return this.patchRemoveEventListener(n,e,t)}const i=Reflect.get(n,e,t);return typeof i=="function"?i.bind(n):i},this.patchAddEventListener=(n,e,t)=>{const i=Reflect.get(n,e,t);return(o,c,p)=>{if(o==="devicechange")this.deviceChangeListeners.add(c),this.scheduler||(this.scheduler=new h.default(Xg.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists));else return Reflect.apply(i,n,[o,c,p])}},this.patchRemoveEventListener=(n,e,t)=>{const i=Reflect.get(n,e,t);return(o,c,p)=>{if(o==="devicechange")this.deviceChangeListeners.delete(c),this.deviceChangeListeners.size===0&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null);else return Reflect.apply(i,n,[o,c,p])}},this.pollDeviceLists=()=>u(this,void 0,void 0,function*(){const n=yield this.sortedDeviceList();this.devices&&(n.length!==this.devices.length||n.some((t,i)=>t.deviceId!==this.devices[i].deviceId))&&this.handleDeviceChangeEvent(),this.devices=n})}},"MediaDeviceProxyHandler");l.default=a,a.INTERVAL_MS=1e3},740880:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(g){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(g){}removeMediaStreamBrokerObserver(g){}},"NoOpMediaStreamBroker");l.default=f},430762:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioConnectivityFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.AudioInputRequestFailed=1]="AudioInputRequestFailed",u[u.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",u[u.ConnectionFailed=3]="ConnectionFailed",u[u.AudioNotReceived=4]="AudioNotReceived"})(f=l.CheckAudioConnectivityFeedback||(l.CheckAudioConnectivityFeedback={})),l.default=f},659663:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioInputFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied"})(f=l.CheckAudioInputFeedback||(l.CheckAudioInputFeedback={})),l.default=f},451976:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioOutputFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed"})(f=l.CheckAudioOutputFeedback||(l.CheckAudioOutputFeedback={})),l.default=f},745468:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckCameraResolutionFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.ResolutionNotSupported=2]="ResolutionNotSupported",u[u.PermissionDenied=3]="PermissionDenied"})(f=l.CheckCameraResolutionFeedback||(l.CheckCameraResolutionFeedback={})),l.default=f},582266:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckContentShareConnectivityFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied",u[u.TimedOut=3]="TimedOut",u[u.ConnectionFailed=4]="ConnectionFailed"})(f=l.CheckContentShareConnectivityFeedback||(l.CheckContentShareConnectivityFeedback={})),l.default=f},22791:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkTCPConnectivityFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",u[u.ConnectionFailed=2]="ConnectionFailed",u[u.ICENegotiationFailed=3]="ICENegotiationFailed"})(f=l.CheckNetworkTCPConnectivityFeedback||(l.CheckNetworkTCPConnectivityFeedback={})),l.default=f},583051:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkUDPConnectivityFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",u[u.ConnectionFailed=2]="ConnectionFailed",u[u.ICENegotiationFailed=3]="ICENegotiationFailed"})(f=l.CheckNetworkUDPConnectivityFeedback||(l.CheckNetworkUDPConnectivityFeedback={})),l.default=f},791171:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoConnectivityFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.VideoInputRequestFailed=1]="VideoInputRequestFailed",u[u.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",u[u.ConnectionFailed=3]="ConnectionFailed",u[u.VideoNotSent=4]="VideoNotSent"})(f=l.CheckVideoConnectivityFeedback||(l.CheckVideoConnectivityFeedback={})),l.default=f},880952:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoInputFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied"})(f=l.CheckVideoInputFeedback||(l.CheckVideoInputFeedback={})),l.default=f},94313:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(L,M,k,w){function N(T){return T instanceof k?T:new k(function(O){O(T)})}return s(N,"adopt"),new(k||(k=Promise))(function(T,O){function D(H){try{K(w.next(H))}catch(q){O(q)}}s(D,"fulfilled");function G(H){try{K(w.throw(H))}catch(q){O(q)}}s(G,"rejected");function K(H){H.done?T(H.value):N(H.value).then(D,G)}s(K,"step"),K((w=w.apply(L,M||[])).next())})},g=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(678521)),h=g(f(421537)),a=g(f(111425)),r=g(f(329572)),n=g(f(997265)),e=g(f(208803)),t=g(f(430762)),i=g(f(659663)),o=g(f(451976)),c=g(f(745468)),p=g(f(582266)),S=g(f(22791)),d=g(f(583051)),y=g(f(791171)),E=g(f(880952)),I=g(f(410988));let A=s(class Zg{static delay(M){return u(this,void 0,void 0,function*(){return new Promise(k=>setTimeout(k,M))})}checkAudioInput(M){return u(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(M),yield this.meetingSession.audioVideo.stopAudioInput(),i.default.Succeeded}catch(k){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${k}`),k instanceof r.default?i.default.PermissionDenied:i.default.Failed}})}checkAudioOutput(M,k){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return u(this,void 0,void 0,function*(){try{const N=M?a.default.getIntrinsicDeviceId(M):"";return yield this.playTone(N,this.configuration.audioOutputFrequency,w),(yield k())?o.default.Succeeded:o.default.Failed}catch(N){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${N}`),o.default.Failed}finally{this.stopTone()}})}playTone(M,k,w){return u(this,void 0,void 0,function*(){const T=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=a.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=k,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const D=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,D),this.gainNode.gain.linearRampToValueAtTime(T,D+.1),this.oscillatorNode.start();const G=new m.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield G.bindAudioDevice({deviceId:M}))}catch(K){this.logger.error(`Failed to bind audio device: ${K}`)}try{yield G.bindAudioElement(w||new Audio)}catch(K){this.logger.error(`Failed to bind audio element: ${K}`)}yield G.bindAudioStream(this.destinationStream.stream)})}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const M=1,k=.1,w=this.configuration.audioOutputGain,N=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(w,N+k+M),this.gainNode.gain.linearRampToValueAtTime(0,N+k*2+M),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(M){return u(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(M),yield this.meetingSession.audioVideo.stopVideoInput(),E.default.Succeeded}catch(k){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${k}`),k instanceof r.default?E.default.PermissionDenied:E.default.Failed}})}checkCameraResolution(M,k,w){return u(this,void 0,void 0,function*(){let N;try{const T=a.default.getIntrinsicDeviceId(M),O={video:this.calculateVideoConstraint(T,k,w)};N=yield navigator.mediaDevices.getUserMedia(O)}catch(T){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${k} height ${w} failed with error ${T}`),T&&T.name==="OverconstrainedError"?c.default.ResolutionNotSupported:T&&T.name==="NotAllowedError"?c.default.PermissionDenied:c.default.Failed}finally{N&&N.getTracks().forEach(function(T){T.stop()})}return c.default.Succeeded})}calculateVideoConstraint(M,k,w){const N=this.browserBehavior.requiresResolutionAlignment(k,w),T={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(T.deviceId=M,T.width=k,T.height=w):(T.deviceId={exact:M},T.width={exact:N[0]},T.height={exact:N[1]}),T}checkContentShareConnectivity(M){return u(this,void 0,void 0,function*(){let k=!1,w=!1;const N={contentShareDidStart:()=>{k=!0}},T={audioVideoDidStart:()=>{w=!0}};try{return this.meetingSession.audioVideo.addObserver(T),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(N),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(M),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return w&&k})),w?(yield this.stopMeeting(),k?p.default.Succeeded:p.default.TimedOut):p.default.ConnectionFailed}catch(O){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${O}`),O.name==="NotAllowedError"?p.default.PermissionDenied:p.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(T),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(N)}})}checkAudioConnectivity(M){return u(this,void 0,void 0,function*(){let k=!1;const w={packetsReceived:0},N=this.meetingSession.audioVideo,T={metricsDidReceive(D){D.getRTCStatsReport().forEach(G=>{G.type==="inbound-rtp"&&(G.mediaType==="audio"||G.kind==="audio")&&(w.packetsReceived=G.packetsReceived)})}},O=s((D,G,K,H)=>{D===this.meetingSession.configuration.credentials.attendeeId&&G&&(k=!0)},"attendeePresenceHandler");try{yield N.startAudioInput(M)}catch(D){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${D}`),D instanceof r.default?t.default.AudioInputPermissionDenied:t.default.AudioInputRequestFailed}return N.realtimeSubscribeToAttendeeIdPresence(O),N.addObserver(T),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return this.isAudioConnectionSuccessful(k,w)})),N.removeObserver(T),N.realtimeUnsubscribeToAttendeeIdPresence(O),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(k,w)?t.default.Succeeded:t.default.AudioNotReceived):(N.removeObserver(T),N.realtimeUnsubscribeToAttendeeIdPresence(O),yield this.meetingSession.audioVideo.stopAudioInput(),t.default.ConnectionFailed)})}checkVideoConnectivity(M){return u(this,void 0,void 0,function*(){const k=this.meetingSession.audioVideo;let w=0;const N={metricsDidReceive(T){T.getRTCStatsReport().forEach(D=>{D.type==="outbound-rtp"&&(D.mediaType==="video"||D.kind==="video")&&(w=D.packetsSent)})}};try{yield k.startVideoInput(M)}catch(T){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${T}`),T instanceof r.default?y.default.VideoInputPermissionDenied:y.default.VideoInputRequestFailed}return k.addObserver(N),(yield this.startMeeting())?(k.startLocalVideoTile(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return w>0})),yield k.stopVideoInput(),yield this.stopMeeting(),k.removeObserver(N),w<=0?y.default.VideoNotSent:y.default.Succeeded):y.default.ConnectionFailed})}checkNetworkUDPConnectivity(){return u(this,void 0,void 0,function*(){let M=!1;const k={metricsDidReceive(N){N.getRTCStatsReport().forEach(O=>{O.type==="candidate-pair"&&O.state==="succeeded"&&(M=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(N){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${N}`),d.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=N=>{const T=this.originalURLRewriter(N);return T.includes("transport=tcp")?"":T};const w=this.meetingSession.audioVideo;return w.addObserver(k),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return M})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),w.removeObserver(k),M?d.default.Succeeded:d.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,d.default.ConnectionFailed)})}checkNetworkTCPConnectivity(){return u(this,void 0,void 0,function*(){let M=!1;const k={metricsDidReceive(N){N.getRTCStatsReport().forEach(O=>{O.type==="candidate-pair"&&O.state==="succeeded"&&(M=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(N){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${N}`),S.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=N=>{const T=this.originalURLRewriter(N);return T.includes("transport=udp")?"":T};const w=this.meetingSession.audioVideo;return w.addObserver(k),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return M})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),w.removeObserver(k),M?S.default.Succeeded:S.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,S.default.ConnectionFailed)})}startMeeting(){return u(this,void 0,void 0,function*(){let M=!1;const k={audioVideoDidStart:()=>{M=!0}};return this.meetingSession.audioVideo.addObserver(k),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return M})),this.meetingSession.audioVideo.removeObserver(k),M})}stopMeeting(){return u(this,void 0,void 0,function*(){let M=!1;const k={audioVideoDidStop:w=>{M=!0}};return this.meetingSession.audioVideo.addObserver(k),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return M})),this.meetingSession.audioVideo.removeObserver(k),M})}executeTimeoutTask(M){return u(this,void 0,void 0,function*(){let k=!1,w=s(class extends n.default{cancel(){this.isCancelled=!0}run(){return u(this,void 0,void 0,function*(){for(;!this.isCancelled;){if(yield M()){k=!0;break}yield Zg.delay(this.waitDurationMs)}})}constructor(O,D){super(O),this.waitDurationMs=D,this.isCancelled=!1}},"CheckForConditionTask");return yield new e.default(this.logger,new w(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs).run(),k})}isAudioConnectionSuccessful(M,k){return M&&k.packetsReceived>0}constructor(M,k,w=new I.default){this.logger=M,this.meetingSession=k,this.configuration=w,this.browserBehavior=new h.default}},"DefaultMeetingReadinessChecker");l.default=A},410988:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}},"MeetingReadinessCheckerConfiguration");l.default=f},938649:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(d,y,E,I){function A(L){return L instanceof E?L:new E(function(M){M(L)})}return s(A,"adopt"),new(E||(E=Promise))(function(L,M){function k(T){try{N(I.next(T))}catch(O){M(O)}}s(k,"fulfilled");function w(T){try{N(I.throw(T))}catch(O){M(O)}}s(w,"rejected");function N(T){T.done?L(T.value):A(T.value).then(k,w)}s(N,"step"),N((I=I.apply(d,y||[])).next())})},g=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(604697)),h=g(f(575289)),a=g(f(222325)),r=g(f(421537)),n=g(f(555961)),e=g(f(267589)),t=g(f(573886)),i=f(262656),o=g(f(336921)),c=g(f(554791)),p=g(f(709345));let S=s(class{get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return u(this,void 0,void 0,function*(){i.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),i.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),i.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),t.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0})}checkBrowserSupportAndFeatureConfiguration(){const y=new r.default,E=`${y.name()} ${y.majorVersion()} (${y.version()})`;if(this.logger.info(`browser is ${E}`),y.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${y.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!y.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(y.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${y.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!y.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(y){return!!(y&&y.addObserver)}constructor(y,E,I,A){this._eventController=A,this._configuration=y,this._logger=E,this.checkBrowserSupportAndFeatureConfiguration(),t.default.addLogger(this._logger),t.default.register(),this._eventController||(this._eventController=new o.default(y,E)),I.eventController||(I.eventController=this.eventController),this.audioVideoController=new m.default(this._configuration,this._logger,new p.default(this._logger),I,new c.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=I,this.logger.info(`MeetingFeatures: ${JSON.stringify(y.meetingFeatures)}`);const L=new n.default(this._logger);this.contentShareController=new e.default(L,new m.default(e.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new p.default(this._logger),L,new c.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new h.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}},"DefaultMeetingSession");l.default=S},326721:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(577849));let m=s(class qg{clone(){return new qg(this.videoMaxResolution,this.contentMaxResolution)}constructor(a=g.default.VideoResolutionHD,r=g.default.VideoResolutionFHD){this.videoMaxResolution=a,this.contentMaxResolution=r}},"MeetingFeatures");l.default=m},750952:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(627070)),m=u(f(577849)),h=f(450804),a=u(f(326721)),r=u(f(678280)),n=u(f(379414));let e=s(class{constructor(i,o){var c,p;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new g.default,this.reconnectTimeoutMs=120*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1*1e3,this.reconnectLongBackOffMs=5*1e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new a.default,i){i=h.toLowerCasePropertyNames(i),i.meeting&&(i=i.meeting),this.meetingId=i.meetingid,this.externalMeetingId=i.externalmeetingid,this.urls=new n.default,this.urls.audioHostURL=i.mediaplacement.audiohosturl,this.urls.signalingURL=i.mediaplacement.signalingurl,this.urls.turnControlURL=i.mediaplacement.turncontrolurl,i.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=i.mediaplacement.eventingestionurl);const S=s((d,y)=>{switch(d){case"None":return m.default.VideoDisabled;case"HD":return m.default.VideoResolutionHD;case"FHD":return m.default.VideoResolutionFHD;case"UHD":return m.default.VideoResolutionUHD;default:return y}},"parseVideoResolution");if(((c=i.meetingfeatures)===null||c===void 0?void 0:c.video)!==void 0||((p=i.meetingfeatures)===null||p===void 0?void 0:p.content)!==void 0){const d=i.meetingfeatures.video===void 0?"HD":i.meetingfeatures.video.maxresolution,y=i.meetingfeatures.content===void 0?"FHD":i.meetingfeatures.content.maxresolution;this.meetingFeatures=new a.default(S(d,m.default.VideoResolutionHD),S(y,m.default.VideoResolutionFHD))}}o&&(o=h.toLowerCasePropertyNames(o),o.attendee&&(o=o.attendee),this.credentials=new r.default,this.credentials.attendeeId=o.attendeeid,this.credentials.externalUserId=o.externaluserid,this.credentials.joinToken=o.jointoken)}},"MeetingSessionConfiguration");l.default=e},678280:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{toJSON(){return{attendeeId:this.attendeeId,joinToken:this.joinToken===null?null:"<redacted>"}}constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}},"MeetingSessionCredentials");l.default=f},807612:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEvent=void 0;var f;(function(u){u[u.Connecting=0]="Connecting",u[u.Started=1]="Started",u[u.Stopped=2]="Stopped"})(f=l.MeetingSessionLifecycleEvent||(l.MeetingSessionLifecycleEvent={})),l.default=f},471327:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEventCondition=void 0;var f;(function(u){u[u.ConnectingNew=0]="ConnectingNew",u[u.ReconnectingExisting=1]="ReconnectingExisting",u[u.StartedNew=2]="StartedNew",u[u.StartedExisting=3]="StartedExisting",u[u.StartedAfterReconnect=4]="StartedAfterReconnect",u[u.StoppedCleanly=5]="StoppedCleanly",u[u.StoppedWithFailure=6]="StoppedWithFailure"})(f=l.MeetingSessionLifecycleEventCondition||(l.MeetingSessionLifecycleEventCondition={})),l.default=f},499726:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=f(50380),m=u(f(935451));let h=s(class qn{statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case m.default.AudioAuthenticationRejected:case m.default.AudioCallAtCapacity:case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.AudioDisconnected:case m.default.VideoCallAtSourceCapacity:case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:case m.default.ICEGatheringTimeoutWorkaround:case m.default.ConnectionHealthReconnect:case m.default.RealtimeApiFailed:case m.default.TaskFailed:case m.default.NoAttendeePresent:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case m.default.Left:case m.default.AudioJoinedFromAnotherDevice:case m.default.AudioAuthenticationRejected:case m.default.AudioCallAtCapacity:case m.default.MeetingEnded:case m.default.AudioDisconnected:case m.default.TURNCredentialsForbidden:case m.default.SignalingBadRequest:case m.default.SignalingRequestFailed:case m.default.VideoCallAtSourceCapacity:case m.default.RealtimeApiFailed:case m.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case m.default.AudioAuthenticationRejected:case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.ICEGatheringTimeoutWorkaround:case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:case m.default.RealtimeApiFailed:case m.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case m.default.OK:return"Everything is OK so far.";case m.default.Left:return"The attendee left the meeting.";case m.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case m.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case m.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case m.default.MeetingEnded:return"The meeting ended.";case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.AudioDisconnected:return"The audio connection failed.";case m.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case m.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:return"The signaling connection failed.";case m.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case m.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case m.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case m.default.TaskFailed:return"The connection failed. See the error message for more details.";case m.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case m.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case m.default.NoAttendeePresent:return"The attendee was not present.";case m.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case m.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case m.default.AudioVideoDisconnectedWhilePromoted:return"The client disconnected while promoted, which will automatically demote. The attendee must promote again to participate.";case m.default.AudioDisconnectAudio:return"The audio connection failed.";default:{const r=this._statusCode;throw new Error(`Unhandled case: ${r}`)}}}static fromSignalFrame(r){return r.error&&r.error.status?this.fromSignalingStatus(r.error.status):r.type===g.SdkSignalFrame.Type.AUDIO_STATUS?r.audioStatus?this.fromAudioStatus(r.audioStatus.audioStatus):new qn(m.default.SignalingRequestFailed):r.type===g.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new qn(m.default.AudioVideoWasRemovedFromPrimaryMeeting):new qn(m.default.OK)}static fromAudioStatus(r){switch(r){case 200:return new qn(m.default.OK);case 301:return new qn(m.default.AudioJoinedFromAnotherDevice);case 302:return new qn(m.default.AudioDisconnectAudio);case 403:return new qn(m.default.AudioAuthenticationRejected);case 409:return new qn(m.default.AudioCallAtCapacity);case 410:return new qn(m.default.MeetingEnded);case 411:return new qn(m.default.AudioAttendeeRemoved);case 500:return new qn(m.default.AudioInternalServerError);case 503:return new qn(m.default.AudioServiceUnavailable);default:switch(Math.floor(r/100)){case 2:return new qn(m.default.OK);default:return new qn(m.default.AudioDisconnected)}}}static fromSignalingStatus(r){switch(r){case 206:return new qn(m.default.VideoCallSwitchToViewOnly);case 509:return new qn(m.default.VideoCallAtSourceCapacity);case 403:return new qn(m.default.AudioAuthenticationRejected);case 409:return new qn(m.default.AudioCallAtCapacity);default:switch(Math.floor(r/100)){case 2:return new qn(m.default.OK);case 4:return new qn(m.default.SignalingBadRequest);case 5:return new qn(m.default.SignalingInternalServerError);default:return new qn(m.default.SignalingRequestFailed)}}}constructor(r){this._statusCode=r}},"MeetingSessionStatus");l.default=h},935451:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionStatusCode=void 0;var f;(function(u){u[u.OK=0]="OK",u[u.Left=1]="Left",u[u.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",u[u.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",u[u.AudioCallAtCapacity=4]="AudioCallAtCapacity",u[u.MeetingEnded=5]="MeetingEnded",u[u.AudioInternalServerError=6]="AudioInternalServerError",u[u.AudioServiceUnavailable=7]="AudioServiceUnavailable",u[u.AudioDisconnected=8]="AudioDisconnected",u[u.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",u[u.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",u[u.SignalingBadRequest=11]="SignalingBadRequest",u[u.SignalingInternalServerError=12]="SignalingInternalServerError",u[u.SignalingRequestFailed=13]="SignalingRequestFailed",u[u.ICEGatheringTimeoutWorkaround=14]="ICEGatheringTimeoutWorkaround",u[u.ConnectionHealthReconnect=15]="ConnectionHealthReconnect",u[u.RealtimeApiFailed=16]="RealtimeApiFailed",u[u.TaskFailed=17]="TaskFailed",u[u.IncompatibleSDP=18]="IncompatibleSDP",u[u.TURNCredentialsForbidden=19]="TURNCredentialsForbidden",u[u.NoAttendeePresent=20]="NoAttendeePresent",u[u.AudioAttendeeRemoved=21]="AudioAttendeeRemoved",u[u.AudioVideoWasRemovedFromPrimaryMeeting=22]="AudioVideoWasRemovedFromPrimaryMeeting",u[u.AudioVideoDisconnectedWhilePromoted=23]="AudioVideoDisconnectedWhilePromoted",u[u.AudioDisconnectAudio=24]="AudioDisconnectAudio"})(f=l.MeetingSessionStatusCode||(l.MeetingSessionStatusCode={})),l.default=f},302329:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}},"MeetingSessionTURNCredentials");l.default=f},379414:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(g){this._audioHostURL=g}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(g){this._signalingURL=g}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(g){this._turnControlURL=g}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(g){this._eventIngestionURL=g}constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=g=>g}},"MeetingSessionURLs");l.default=f},122818:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class eS{equal(g){return this.remoteVideoAvailable===g.remoteVideoAvailable&&this.canStartLocalVideo===g.canStartLocalVideo}clone(){const g=new eS;return g.remoteVideoAvailable=this.remoteVideoAvailable,g.canStartLocalVideo=this.canStartLocalVideo,g}constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}},"MeetingSessionVideoAvailability");l.default=f},900184:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(g,m,h){this.type=g,this.headers=m,this.payload=h}},"Message");l.default=f},326477:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(S,d,y,E){function I(A){return A instanceof y?A:new y(function(L){L(A)})}return s(I,"adopt"),new(y||(y=Promise))(function(A,L){function M(N){try{w(E.next(N))}catch(T){L(T)}}s(M,"fulfilled");function k(N){try{w(E.throw(N))}catch(T){L(T)}}s(k,"rejected");function w(N){N.done?A(N.value):I(N.value).then(M,k)}s(w,"step"),w((E=E.apply(S,d||[])).next())})},g=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});const m=f(888603),h=g(f(222325)),a=g(f(573886)),r=g(f(900184)),n=g(f(554791)),e=g(f(509936)),t=g(f(133523)),i=g(f(709345)),o=g(f(804417)),c=g(f(145424));let p=s(class{addObserver(d){this.logger.info("adding messaging observer"),this.observerQueue.add(d)}removeObserver(d){this.logger.info("removing messaging observer"),this.observerQueue.delete(d)}start(){return u(this,void 0,void 0,function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")})}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),a.default.removeLogger(this.logger))}forEachObserver(d){for(const y of this.observerQueue)e.default.nextTick(()=>{this.observerQueue.has(y)&&d(y)})}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.openEventHandler()}),this.webSocket.addEventListener("message",d=>{this.receiveMessageHandler(d.data)}),this.webSocket.addEventListener("close",d=>{this.closeEventHandler(d)}),this.webSocket.addEventListener("error",()=>{this.logger.error("WebSocket error")})}startConnecting(d){return u(this,void 0,void 0,function*(){return yield this.startConnectingInternal(d),yield new Promise((y,E)=>{this.bootstrapResolved=y,this.bootstrapRejected=E})})}startConnectingInternal(d){var y;return u(this,void 0,void 0,function*(){let E=this.configuration.endpointUrl;if(d||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),d||E===void 0)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const A=yield this.configuration.chimeClient.getMessagingSessionEndpoint();!((y=A.Endpoint)===null||y===void 0)&&y.Url?E=A.Endpoint.Url:E=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}else E=(yield this.configuration.chimeClient.send(new m.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${E}`)}catch(A){this.logger.error(`Messaging Session failed to resolve endpoint: ${A}`);const L=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});this.closeEventHandler(L);return}const I=yield this.prepareWebSocketUrl(E);this.logger.info(`opening connection to ${I}`),d||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(I,[],!0),this.forEachObserver(A=>{A.messagingSessionDidStartConnecting&&A.messagingSessionDidStartConnecting(d)}),this.setUpEventListeners()})}prepareWebSocketUrl(d){return u(this,void 0,void 0,function*(){const y=new Map;return y.set("userArn",[this.configuration.userArn]),y.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===c.default.Connect&&y.set("prefetch-on",[c.default.Connect]),this.configuration.prefetchSortBy&&y.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",d,"/connect","",y)})}isClosed(){return this.webSocket.readyState()===o.default.None||this.webSocket.readyState()===o.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(d){try{const y=JSON.parse(d),E=y.Headers["x-amz-chime-event-type"],I=new r.default(E,y.Headers,y.Payload||null);if(!this.isSessionEstablished&&E==="SESSION_ESTABLISHED"){this.forEachObserver(L=>{L.messagingSessionDidStart&&L.messagingSessionDidStart()}),this.bootstrapResolved(),this.isSessionEstablished=!0;const A=this.preBootstrapMessages.length;for(let L=0;L<A;L++){const M=this.preBootstrapMessages.shift();this.forEachObserver(k=>{this.sendMessageToObserver(k,M)})}}else if(!this.isSessionEstablished){this.preBootstrapMessages.push(I);return}this.forEachObserver(A=>{this.sendMessageToObserver(A,I)})}catch(y){this.logger.error(`Messaging parsing failed: ${y}`)}}sendMessageToObserver(d,y){d.messagingSessionDidReceiveMessage&&d.messagingSessionDidReceiveMessage(y)}retryConnection(){return this.reconnectController.retryWithBackoff(()=>u(this,void 0,void 0,function*(){yield this.startConnecting(!0)}),null)}closeEventHandler(d){this.logger.info(`WebSocket close: ${d.code} ${d.reason}`),d.code!==4999&&this.webSocket.destroy(),!(!this.isClosing&&this.canReconnect(d.code)&&this.retryConnection())&&(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver(y=>{y.messagingSessionDidStop&&y.messagingSessionDidStop(d)}):this.bootstrapRejected(d))}canReconnect(d){return d===1001||d===1006||d>=1011&&d<=1014||d>4e3&&d!==4002&&d!==4003&&d!==4401}constructor(d,y,E,I,A){this.configuration=d,this.logger=y,this.webSocket=E,this.reconnectController=I,this.sigV4=A,this.observerQueue=new Set,this.webSocket||(this.webSocket=new i.default(this.logger)),this.reconnectController||(this.reconnectController=new n.default(d.reconnectTimeoutMs,new h.default(d.reconnectFixedWaitMs,d.reconnectShortBackoffMs,d.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new t.default(this.configuration.chimeClient)),a.default.addLogger(this.logger),a.default.register(),this.preBootstrapMessages=[]}},"DefaultMessagingSession");l.default=p},470078:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=f(450804);let g=s(class{generateSessionId(){const h=new Uint32Array(1);return u.getRandomValues(h),h[0].toString()}constructor(h,a,r,n){this.userArn=h,this.messagingSessionId=a,this.endpointUrl=r,this.chimeClient=n,this.reconnectTimeoutMs=10*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1*1e3,this.reconnectLongBackoffMs=5*1e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}},"MessagingSessionConfiguration");l.default=g},145424:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var f;(function(u){u.Connect="connect"})(f||(f={})),l.default=f},104352:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var f;(function(u){u.Unread="unread",u.LastMessageTimestamp="last-message-timestamp"})(f||(f={})),l.default=f},641501:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(203621));let m=s(class Io{id(){return this._id}base(){return this._id?this._id.split(Io.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const a=this._id.split(Io.MODALITY_SEPARATOR);return a.length===2?a[1]:""}hasModality(a){return a!==""&&this.modality()===a}withModality(a){const r=new Io(this.base()+Io.MODALITY_SEPARATOR+a);return a===""||this.base()===""||new Io(r._id).modality()!==a?new Io(this.base()):r}constructor(a){this._id=a}},"DefaultModality");l.default=m,m.MODALITY_SEPARATOR=g.default.Modality[0],m.MODALITY_CONTENT=g.default.Modality.substr(1)},690561:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(509936)),m=u(f(264323)),h=u(f(576442)),a=f(50380),r=f(823880);let n=s(class{addObserver(t){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const i of this.observerQueue)g.default.nextTick(()=>{this.observerQueue.has(i)&&t(i)})}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start(()=>{this.ping()}),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver(i=>{r.Maybe.of(i.didMissPongs).map(o=>o.bind(i)(this.consecutivePongsUnaccountedFor))})),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const t=a.SdkPingPongFrame.create();t.pingId=this.pingId,t.type=a.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(t),this.logger.debug(()=>`sent ping ${this.pingId}`)}pong(t){const i=a.SdkPingPongFrame.create();i.pingId=t,i.type=a.SdkPingPongType.PONG,this.signalingClient.pingPong(i)}handleSignalingClientEvent(t){switch(t.type){case h.default.WebSocketOpen:this.startPingInterval();break;case h.default.WebSocketFailed:case h.default.WebSocketError:this.logger.warn(`stopped pinging (${h.default[t.type]})`),this.stopPingInterval();break;case h.default.WebSocketClosing:case h.default.WebSocketClosed:this.logger.info(`stopped pinging (${h.default[t.type]})`),this.stopPingInterval();break;case h.default.ReceivedSignalFrame:if(t.message.type!==a.SdkSignalFrame.Type.PING_PONG)break;if(t.message.pingPong.type===a.SdkPingPongType.PONG){const i=t.message.pingPong.pingId;if(i!==this.pingId){this.logger.warn(`unexpected ping id ${i} (expected ${this.pingId})`);break}this.consecutivePongsUnaccountedFor=0;let o;if(typeof t.message.timestampMs=="number")o=t.message.timestampMs;else break;this.logger.debug(()=>`received pong ${i} with timestamp ${o}`);const p=t.timestampMs-this.pingTimestampLocalMs,S=Math.round(o-p/2),d=this.pingTimestampLocalMs-S;this.logger.info(`local clock skew estimate=${d}ms from ping-pong time=${p}ms`),this.forEachObserver(y=>{r.Maybe.of(y.didReceivePong).map(E=>E.bind(y)(i,d,p))})}else this.pong(t.message.pingPong.pingId);break}}constructor(t,i,o){this.signalingClient=t,this.intervalMs=i,this.logger=o,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new m.default(this.intervalMs),this.pingId=0}},"DefaultPingPong");l.default=n},420841:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(974511)),m=u(f(446551)),h=u(f(456333));let a=s(class{realtimeSetLocalAttendeeId(n,e){this.state.localAttendeeId=n,this.state.localExternalUserId=e}realtimeSetAttendeeIdPresence(n,e,t,i,o){try{e&&(this.state.attendeeIdToExternalUserId[n]=t);for(const c of this.state.attendeeIdChangesCallbacks)c(n,e,t,i,o)}catch(c){this.onError(c)}}realtimeSubscribeToAttendeeIdPresence(n){try{this.state.attendeeIdChangesCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToAttendeeIdPresence(n){try{const e=this.state.attendeeIdChangesCallbacks.indexOf(n);e!==-1&&this.state.attendeeIdChangesCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSetCanUnmuteLocalAudio(n){try{if(this.state.canUnmute===n)return;this.state.canUnmute=n;for(const e of this.state.setCanUnmuteLocalAudioCallbacks)e(n)}catch(e){this.onError(e)}}realtimeSubscribeToSetCanUnmuteLocalAudio(n){try{this.state.setCanUnmuteLocalAudioCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(n){try{const e=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(n);e!==-1&&this.state.setCanUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const n of this.state.muteAndUnmuteLocalAudioCallbacks)n(!0)}catch(n){this.onError(n)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const n of this.state.muteAndUnmuteLocalAudioCallbacks)n(!1);return!0}catch(n){return this.onError(n),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(n){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(n){try{const e=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(n);e!==-1&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(n,e){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(n)||(this.state.volumeIndicatorCallbacks[n]=[]),this.state.volumeIndicatorCallbacks[n].push(e),this.sendVolumeIndicatorChange(n,!0,!0,!0,this.state.attendeeIdToExternalUserId[n])}catch(t){this.onError(t)}}realtimeUnsubscribeFromVolumeIndicator(n,e){if(this.state.volumeIndicatorCallbacks[n])if(e){const i=this.state.volumeIndicatorCallbacks[n].indexOf(e);i>=0&&this.state.volumeIndicatorCallbacks[n].splice(i,1)}else delete this.state.volumeIndicatorCallbacks[n]}realtimeUpdateVolumeIndicator(n,e,t,i,o){try{t=this.applyLocalMuteOverride(n,t);const c=this.getVolumeIndicatorState(n);let p=!1,S=!1,d=!1;t!==null&&c.muted!==t&&(c.muted=t,S=!0,c.muted&&c.volume!==0&&(c.volume=0,p=!0)),!c.muted&&e!==null&&(c.volume!==e&&(c.volume=e,p=!0),c.muted===null&&(c.muted=!1,S=!0)),i!==null&&c.signalStrength!==i&&(c.signalStrength=i,d=!0),this.sendVolumeIndicatorChange(n,p,S,d,o)}catch(c){this.onError(c)}}realtimeSubscribeToLocalSignalStrengthChange(n){try{if(this.state.localSignalStrengthChangeCallbacks.push(n),this.state.localAttendeeId===null)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(e){this.onError(e)}}realtimeUnsubscribeToLocalSignalStrengthChange(n){try{const e=this.state.localSignalStrengthChangeCallbacks.indexOf(n);e!==-1&&this.state.localSignalStrengthChangeCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSubscribeToSendDataMessage(n){try{this.state.sendDataMessageCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeFromSendDataMessage(n){try{const e=this.state.sendDataMessageCallbacks.indexOf(n);e!==-1&&this.state.sendDataMessageCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSendDataMessage(n,e,t){try{for(const i of this.state.sendDataMessageCallbacks)i(n,e,t)}catch(i){this.onError(i)}}realtimeSubscribeToReceiveDataMessage(n,e){try{this.state.receiveDataMessageCallbacks.has(n)?this.state.receiveDataMessageCallbacks.get(n).push(e):this.state.receiveDataMessageCallbacks.set(n,[e])}catch(t){this.onError(t)}}realtimeUnsubscribeFromReceiveDataMessage(n){try{this.state.receiveDataMessageCallbacks.delete(n)}catch(e){this.onError(e)}}realtimeReceiveDataMessage(n){try{if(this.state.receiveDataMessageCallbacks.has(n.topic))for(const e of this.state.receiveDataMessageCallbacks.get(n.topic))e(n)}catch(e){this.onError(e)}}realtimeSubscribeToFatalError(n){try{this.state.fatalErrorCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToFatalError(n){try{const e=this.state.fatalErrorCallbacks.indexOf(n);e!==-1&&this.state.fatalErrorCallbacks.splice(e,1)}catch(e){this.onError(e)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(n){n?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(n,e){const t=this.state.localAttendeeId,i=this.state.muted;return n!==t||!("activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio)?e:i}sendVolumeIndicatorChange(n,e,t,i,o){if(this.sendLocalSignalStrengthChange(n,i),!this.state.volumeIndicatorCallbacks.hasOwnProperty(n))return;const c=this.getVolumeIndicatorState(n),p=new h.default;if(e&&(p.volume=c.volume),t&&(p.muted=c.muted),i&&(p.signalStrength=c.signalStrength),!this.stateIsEmpty(p))for(const S of this.state.volumeIndicatorCallbacks[n])S(n,p.volume,p.muted,p.signalStrength,o)}sendLocalSignalStrengthChange(n,e){if(!e||n!==this.state.localAttendeeId)return;const i=this.getVolumeIndicatorState(n).signalStrength;if(i!==null)for(const o of this.state.localSignalStrengthChangeCallbacks)o(i)}getVolumeIndicatorState(n){return this.state.volumeIndicatorState.hasOwnProperty(n)||(this.state.volumeIndicatorState[n]=new h.default),this.state.volumeIndicatorState[n]}stateIsEmpty(n){return n.volume===null&&n.muted===null&&n.signalStrength===null}onError(n){try{for(const e of this.state.fatalErrorCallbacks)e(n)}catch(e){try{console.error(n),console.error(e)}catch{}}}constructor(n,e){this.mediaStreamBroker=n,this.state=new m.default,this._transcriptionController=e||new g.default(this)}},"DefaultRealtimeController");l.default=a},40461:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}},"RealtimeAttendeePositionInFrame");l.default=f},446551:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}},"RealtimeState");l.default=f},456333:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}},"RealtimeVolumeIndicator");l.default=f},554791:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(20202));let m=s(class tS{timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs?!0:this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(a){this._isFirstConnection=a,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(a,r){const n=this.shouldReconnect&&!this.hasPastReconnectDeadline();return n&&(this.backoffCancel=r,this.backoffTimer=new g.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start(()=>{this.backoffCancel=null,a()})),n}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new tS(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(a){this.lastActiveTimestampMs=a}constructor(a,r){this.reconnectTimeoutMs=a,this.backoffPolicy=r,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}},"DefaultReconnectController");l.default=m},671024:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class ji{static initializeWorker(){ji.log("Initializing RedundantAudioEncoder");const g=new ji;self.RTCRtpScriptTransformer&&(self.onrtctransform=m=>{m.transformer.options.type==="SenderTransform"?g.setupSenderTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="ReceiverTransform"?g.setupReceiverTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="PassthroughTransform"&&g.setupPassthroughTransform(m.transformer.readable,m.transformer.writable)}),self.onmessage=m=>{m.data.msgType==="StartRedWorker"?(g.setupSenderTransform(m.data.send.readable,m.data.send.writable),g.setupReceiverTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="PassthroughTransform"?(g.setupPassthroughTransform(m.data.send.readable,m.data.send.writable),g.setupPassthroughTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="RedPayloadType"?g.setRedPayloadType(m.data.payloadType):m.data.msgType==="OpusPayloadType"?g.setOpusPayloadType(m.data.payloadType):m.data.msgType==="UpdateNumRedundantEncodings"?g.setNumRedundantEncodings(m.data.numRedundantEncodings):m.data.msgType==="Enable"?g.setRedundancyEnabled(!0):m.data.msgType==="Disable"&&g.setRedundancyEnabled(!1)}}static log(g){ji.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${g}`})}static getNumRedundantEncodingsForPacketLoss(g){let m=0,h=!1;return g<=8?m=0:g<=18?m=1:g<=75?m=2:(m=0,h=!0),[m,h]}setupPassthroughTransform(g,m){ji.log("Setting up passthrough transform"),g.pipeTo(m)}setupSenderTransform(g,m){ji.log("Setting up sender RED transform");const h=new TransformStream({transform:this.senderTransform.bind(this)});g.pipeThrough(h).pipeTo(m)}setupReceiverTransform(g,m){ji.log("Setting up receiver RED transform");const h=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});g.pipeThrough(h).pipeTo(m)}setRedPayloadType(g){this.redPayloadType=g,ji.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(g){this.opusPayloadType=g,ji.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(g){this.numRedundantEncodings=g,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),ji.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(g){this.redundancyEnabled=g,ji.log(`redundancy ${this.redundancyEnabled?"enabled":"disabled"}`)}enqueueAudioFrameIfPayloadSizeIsValid(g,m){g.data.byteLength>this.maxAudioPayloadSizeBytes||m.enqueue(g)}senderTransform(g,m){if(g.getMetadata().payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(g,m);return}const a=this.getPrimaryPayload(g.timestamp,g.data);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(g,m);return}const r=this.encode(g.timestamp,a);if(!r){this.enqueueAudioFrameIfPayloadSizeIsValid(g,m);return}g.data=r,this.enqueueAudioFrameIfPayloadSizeIsValid(g,m)}getPrimaryPayload(g,m){const h=this.splitEncodings(g,m);return!h||h.length<1?null:h[h.length-1].payload}splitEncodings(g,m){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;const r=new DataView(m);let n=r.byteLength,e=0,t=0,i=0,o=0,c=!1;const p=new Array,S=new Array,d=new Array;for(;n>0;)if(c=(r.getUint8(o)&128)===0,c){if((r.getUint8(o)&127)!==this.opusPayloadType||(e+=this.redLastHeaderSizeBytes,t+=this.redLastHeaderSizeBytes,e>=r.byteLength))return null;i=r.byteLength-e;break}else{if(n<this.redHeaderSizeBytes)return null;const M=((r.getUint8(o+2)&3)<<8)+r.getUint8(o+3);S.push(M);const k=r.getUint16(o+1)>>2,w=g-k;d.push(w),e+=M+this.redHeaderSizeBytes,t+=this.redHeaderSizeBytes,o+=this.redHeaderSizeBytes,n-=this.redHeaderSizeBytes}if(!c)return null;let y=t;for(let M=0;M<d.length;M++){const k=new ArrayBuffer(S[M]);new Uint8Array(k).set(new Uint8Array(r.buffer,y,S[M]),0);const N={timestamp:d[M],payload:k,isRedundant:!0};h&&(N.hasFec=this.opusPacketHasFec(new DataView(k),k.byteLength)),p.push(N),y+=S[M]}const E=r.byteLength-i,I=new ArrayBuffer(i);new Uint8Array(I).set(new Uint8Array(r.buffer,E,i),0);const L={timestamp:g,payload:I,isRedundant:!1,seq:a};return h&&(L.hasFec=this.opusPacketHasFec(new DataView(I),I.byteLength)),p.push(L),p}encode(g,m){const h=m.byteLength;if(h===0||h>=this.maxRedPacketSizeBytes||h>=this.maxAudioPayloadSizeBytes)return null;const a=this.numRedundantEncodings;let r=this.redLastHeaderSizeBytes,n=h,e=this.maxAudioPayloadSizeBytes-h-r;const t=new Array,i=new Array;if(this.redundancyEnabled){let d=this.uint32WrapAround(g-this.redPacketizationTime*this.redPacketDistance);for(let y=0;y<a&&!(this.uint32WrapAround(g-d)>=this.maxRedTimestampOffset);y++){let E=d,I=this.encodingHistory.find(A=>A.timestamp===E);if(I||(E=this.uint32WrapAround(d-this.redPacketizationTime),I=this.encodingHistory.find(A=>A.timestamp===E)),I){const A=I.payload.byteLength;if(e<this.redHeaderSizeBytes+A)break;e-=this.redHeaderSizeBytes+A,r+=this.redHeaderSizeBytes,n+=A,t.unshift(I.timestamp),i.unshift(I.payload)}d-=this.redPacketizationTime*this.redPacketDistance,d=this.uint32WrapAround(d)}}const o=new ArrayBuffer(r+n),c=new DataView(o);let p=0;for(let d=0;d<t.length;d++){const y=g-t[d];c.setUint8(p,this.opusPayloadType|128),c.setUint16(p+1,y<<2|i[d].byteLength>>8),c.setUint8(p+3,i[d].byteLength&255),p+=this.redHeaderSizeBytes}c.setUint8(p,this.opusPayloadType),p+=this.redLastHeaderSizeBytes;const S=new Uint8Array(o);for(let d=0;d<i.length;d++)S.set(new Uint8Array(i[d]),p),p+=i[d].byteLength;return S.set(new Uint8Array(m),p),p+=m.byteLength,p!==r+n?null:(this.updateEncodingHistory(g,m),o)}updateEncodingHistory(g,m){for(const a of this.encodingHistory){const r=this.redPacketizationTime*this.redMaxRecoveryDistance;if(g-a.timestamp>=r)this.encodingHistory.shift();else break}const h=new DataView(m);(this.opusPacketIsCeltOnly(h)||this.opusPacketHasVoiceActivity(h,h.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:g,payload:m}))}initializePacketLogs(){const g=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(g),index:0,windowSize:g},this.redRecoveryLog={window:new Array(g),index:0,windowSize:g},this.fecRecoveryLog={window:new Array(g),index:0,windowSize:g},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(g,m){const h=g.getMetadata();if(h.payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(g,m);return}const a=this.splitEncodings(g.timestamp,g.data,!0,h.sequenceNumber);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(g,m);return}for(let r=a.length-1;r>=0;r--)this.updateLossStats(a[r])&&(this.updateRedStats(a[r]),this.updateFecStats(a[r]));this.maybeReportLossStats(a[a.length-1].timestamp,h.synchronizationSource),this.enqueueAudioFrameIfPayloadSizeIsValid(g,m)}updateLossStats(g){if(g.isRedundant)return!0;const m=g.timestamp,h=g.seq;if(this.totalAudioPacketsExpected===0)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=h,this.addTimestamp(this.primaryPacketLog,m),!0;const a=this.int16(h-this.newestSequenceNumber);return a<-this.maxOutOfOrderPacketDistance?!1:(a<0?this.hasTimestamp(this.primaryPacketLog,m)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,m),this.removeFromRecoveryWindows(m)):a>1&&(this.totalAudioPacketsLost+=a-1),a>0&&(this.totalAudioPacketsExpected+=a,this.newestSequenceNumber=g.seq,this.addTimestamp(this.primaryPacketLog,m)),!0)}updateRedStats(g){if(!g.isRedundant||this.totalAudioPacketsLost===0)return;const m=g.timestamp;this.hasTimestamp(this.primaryPacketLog,m)||(this.hasTimestamp(this.redRecoveryLog,m)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,m)),this.removeTimestamp(this.fecRecoveryLog,m)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(g){if(!g.hasFec||this.totalAudioPacketsLost===0)return;const m=g.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,m)||this.hasTimestamp(this.redRecoveryLog,m)||this.hasTimestamp(this.fecRecoveryLog,m)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,m))}maybeReportLossStats(g,m){g-this.lastLossReportTimestamp<this.lossReportInterval||(ji.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc:m,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=g)}addTimestamp(g,m){g.window[g.index]=m,g.index=(g.index+1)%g.windowSize}hasTimestamp(g,m){return!!g.window.find(a=>a===m)}removeTimestamp(g,m){const h=g.window.indexOf(m);return h>=0?(g.window[h]=void 0,!0):!1}removeFromRecoveryWindows(g){let m=this.removeTimestamp(this.redRecoveryLog,g);m&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,m=this.removeTimestamp(this.fecRecoveryLog,g),m&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(g){let h=g;return g>=4294967296?h=g-4294967296:g<0&&(h=4294967296+g),h}int16(g){return g<<16>>16}opusPacketIsCeltOnly(g){return!!(g.getUint8(0)&128)}opusPacketGetSamplesPerFrame(g,m){m=Math.round(m),m=Math.min(Math.max(m,-Math.pow(2,32)),Math.pow(2,32)-1);let h,a;return this.opusPacketIsCeltOnly(g)?(a=g.getUint8(0)>>3&3,h=(m<<a)/400):(g.getUint8(0)&96)===96?h=g.getUint8(0)&8?m/50:m/100:(a=g.getUint8(0)>>3&3,a===3?h=m*60/1e3:h=(m<<a)/100),h}opusNumSilkFrames(g){let m=this.opusPacketGetSamplesPerFrame(g,48e3)/48;switch(m<10&&(m=10),m){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(g){return g.getUint8(0)&4?2:1}opusParseSize(g,m,h,a){return h<1?(a[0]=-1,-1):g.getUint8(m)<252?(a[0]=g.getUint8(m),1):h<2?(a[0]=-1,-1):(a[0]=4*g.getUint8(m+1)+g.getUint8(m),2)}opusPacketParseImpl(g,m,h,a,r,n,e,t){if(!n||m<0)return this.OPUS_BAD_ARG;if(m===0)return this.OPUS_INVALID_PACKET;let i,o,c=0,p=!1;const S=g.getUint8(0);a&&(a[0]=S);let d=m-1,y=1,E=d;switch(S&3){case 0:i=1;break;case 1:if(i=2,p=!0,!h){if(d&1)return this.OPUS_INVALID_PACKET;E=d/2,n[0][0]=E}break;case 2:if(i=2,o=this.opusParseSize(g,y,d,n[0]),d-=o,n[0][0]<0||n[0][0]>d)return this.OPUS_INVALID_PACKET;y+=o,E=d-n[0][0];break;default:if(d<1)return this.OPUS_INVALID_PACKET;const I=g.getUint8(y++);if(--d,i=I&63,i<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(g,48e3)*i>5760)return this.OPUS_INVALID_PACKET;if(I&64){let L,M;do{if(d<=0)return this.OPUS_INVALID_PACKET;L=g.getUint8(y++),--d,M=L===255?254:L,d-=M,c+=M}while(L===255)}if(d<0)return this.OPUS_INVALID_PACKET;if(p=!(I&128),p){if(!h){if(E=Math.trunc(d/i),E*i!==d)return this.OPUS_INVALID_PACKET;for(let L=0;L<i-1;++L)n[L][0]=E}}else{E=d;for(let L=0;L<i-1;++L){if(o=this.opusParseSize(g,y,d,n[L]),d-=o,n[L][0]<0||n[L][0]>d)return this.OPUS_INVALID_PACKET;y+=o,E-=o+n[L][0]}if(E<0)return this.OPUS_INVALID_PACKET}}if(h){if(o=this.opusParseSize(g,y,d,n[i-1]),d-=o,n[i-1][0]<0||n[i-1][0]>d)return this.OPUS_INVALID_PACKET;if(y+=o,p){if(n[i-1][0]*i>d)return this.OPUS_INVALID_PACKET;for(let I=0;I<i-1;++I)n[I][0]=n[i-1][0]}else if(!(o+n[i-1][0]<=E))return this.OPUS_INVALID_PACKET}else{if(E>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;n[i-1][0]=E}e&&(e[0]=y);for(let I=0;I<i;++I)r&&(r[I][0]=y),y+=n[I][0];return t&&(t[0]=y+c),i}opusPacketParse(g,m,h,a,r,n){return this.opusPacketParseImpl(g,m,!1,h,a,r,n,null)}opusPacketHasVoiceActivity(g,m){if(!g||m<=0)return 0;if(this.opusPacketIsCeltOnly(g))return-1;const h=this.opusNumSilkFrames(g);if(h===0)return-1;const a=new Array(this.OPUS_MAX_OPUS_FRAMES),r=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let e=0;e<this.OPUS_MAX_OPUS_FRAMES;++e)a[e]=[void 0],r[e]=[void 0];const n=this.opusPacketParse(g,m,null,a,r,null);if(n<0)return-1;for(let e=0;e<n;++e){if(r[e][0]<1)continue;if(g.getUint8(a[e][0])>>8-h||this.opusPacketGetNumChannels(g)===2&&g.getUint8(a[e][0])<<h+1>>8-h)return 1}return 0}opusPacketHasFec(g,m){if(!g||m<=0||this.opusPacketIsCeltOnly(g))return!1;const h=new Array(this.OPUS_MAX_OPUS_FRAMES),a=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let t=0;t<this.OPUS_MAX_OPUS_FRAMES;++t)h[t]=[void 0],a[t]=[void 0];if(this.opusPacketParse(g,m,null,h,a,null)<0||a[0][0]<=1)return!1;const n=this.opusNumSilkFrames(g);if(n===0)return!1;const e=this.opusPacketGetNumChannels(g);if(e!==1&&e!==2)return!1;for(let t=0;t<e;t++)if(g.getUint8(h[0][0])&128>>(t+1)*(n+1)-1)return!0;return!1}constructor(){this.maxRedPacketSizeBytes=1<<10,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=1<<14,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=48e3*5,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}},"RedundantAudioEncoder");l.default=f,f.shouldLog=!1,f.shouldReportStats=!1},152480:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=`class RedundantAudioEncoder {
    constructor() {
        // Each payload must be less than 1024 bytes to fit the 10 bit block length
        this.maxRedPacketSizeBytes = 1 << 10;
        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio
        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio
        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See
        // https://crbug.com/1248479.
        this.maxAudioPayloadSizeBytes = 1000;
        // Each payload can encode a timestamp delta of 14 bits
        this.maxRedTimestampOffset = 1 << 14;
        // 4 byte RED header
        this.redHeaderSizeBytes = 4;
        // reduced size for last RED header
        this.redLastHeaderSizeBytes = 1;
        // P-Time for Opus 20 msec packets
        // We do not support other p-times or clock rates
        this.redPacketizationTime = 960;
        // distance between redundant payloads, Opus FEC handles a distance of 1
        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):
        // Consider making this dynamic
        this.redPacketDistance = 2;
        // maximum number of redundant payloads per RTP packet
        this.maxRedEncodings = 2;
        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant
        // payloads have FEC.
        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;
        // maximum history of prior payloads to keep
        // generally we will expire old entries based on timestamp
        // this limit is in place just to make sure the history does not
        // grow too large in the case of erroneous timestamp inputs
        this.maxEncodingHistorySize = 10;
        // Current number of encodings we want to send
        // to the remote end. This will be dynamically
        // updated through the setNumEncodingsFromPacketloss API
        this.numRedundantEncodings = 0;
        // Used to enable or disable redundancy
        // in response to very high packet loss events
        this.redundancyEnabled = true;
        // Loss stats are reported to the main thread every 5 seconds.
        // Since timestamp differences between 2 consecutive packets
        // give us the number of samples in each channel, 1 second
        // is equivalent to 48000 samples:
        // P-time * (1000ms/1s)
        // = (960 samples/20ms) * (1000ms/1s)
        // = 48000 samples/s
        this.lossReportInterval = 48000 * 5;
        // Maximum distance of a packet from the most recent packet timestamp
        // that we will consider for recovery.
        this.maxOutOfOrderPacketDistance = 16;
        /**
         * Below are Opus helper methods and constants.
         */
        this.OPUS_BAD_ARG = -1;
        this.OPUS_INVALID_PACKET = -4;
        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).
        this.OPUS_MAX_OPUS_FRAMES = 48;
        // Max number of bytes that any individual Opus frame can have.
        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;
        this.encodingHistory = new Array();
        this.opusPayloadType = 0;
        this.redPayloadType = 0;
        this.initializePacketLogs();
    }
    /**
     * Creates an instance of RedundantAudioEncoder and sets up callbacks.
     */
    static initializeWorker() {
        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');
        const encoder = new RedundantAudioEncoder();
        // RED encoding is done using WebRTC Encoded Transform
        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md
        // Check the DedicatedWorkerGlobalScope for existence of
        // RTCRtpScriptTransformer interface. If exists, then
        // RTCRtpScriptTransform is supported by this browser.
        // @ts-ignore
        if (self.RTCRtpScriptTransformer) {
            // @ts-ignore
            self.onrtctransform = (event) => {
                if (event.transformer.options.type === 'SenderTransform') {
                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'ReceiverTransform') {
                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'PassthroughTransform') {
                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);
                }
            };
        }
        self.onmessage = (event) => {
            if (event.data.msgType === 'StartRedWorker') {
                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'PassthroughTransform') {
                encoder.setupPassthroughTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupPassthroughTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'RedPayloadType') {
                encoder.setRedPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'OpusPayloadType') {
                encoder.setOpusPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {
                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);
            }
            else if (event.data.msgType === 'Enable') {
                encoder.setRedundancyEnabled(true);
            }
            else if (event.data.msgType === 'Disable') {
                encoder.setRedundancyEnabled(false);
            }
        };
    }
    /**
     * Post logs to the main thread
     */
    static log(msg) {
        if (RedundantAudioEncoder.shouldLog) {
            // @ts-ignore
            self.postMessage({
                type: 'REDWorkerLog',
                log: \`[AudioRed] \${msg}\`,
            });
        }
    }
    /**
     * Returns the number of encodings based on packetLoss value. This is used by \`DefaultTransceiverController\` to
     * determine when to alert the encoder to update the number of encodings. It also determines if we need to
     * turn off red in cases of very high packet loss to avoid congestion collapse.
     */
    static getNumRedundantEncodingsForPacketLoss(packetLoss) {
        let recommendedRedundantEncodings = 0;
        let shouldTurnOffRed = false;
        if (packetLoss <= 8) {
            recommendedRedundantEncodings = 0;
        }
        else if (packetLoss <= 18) {
            recommendedRedundantEncodings = 1;
        }
        else if (packetLoss <= 75) {
            recommendedRedundantEncodings = 2;
        }
        else {
            recommendedRedundantEncodings = 0;
            shouldTurnOffRed = true;
        }
        return [recommendedRedundantEncodings, shouldTurnOffRed];
    }
    /**
     * Sets up a passthrough (no-op) transform for the given streams.
     */
    setupPassthroughTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up passthrough transform');
        readable.pipeTo(writable);
    }
    /**
     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.
     */
    setupSenderTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up sender RED transform');
        const transformStream = new TransformStream({
            transform: this.senderTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.
     */
    setupReceiverTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up receiver RED transform');
        const transformStream = new TransformStream({
            transform: this.receivePacketLogTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Set the RED payload type ideally obtained from local offer.
     */
    setRedPayloadType(payloadType) {
        this.redPayloadType = payloadType;
        RedundantAudioEncoder.log(\`red payload type set to \${this.redPayloadType}\`);
    }
    /**
     * Set the opus payload type ideally obtained from local offer.
     */
    setOpusPayloadType(payloadType) {
        this.opusPayloadType = payloadType;
        RedundantAudioEncoder.log(\`opus payload type set to \${this.opusPayloadType}\`);
    }
    /**
     * Set the number of redundant encodings
     */
    setNumRedundantEncodings(numRedundantEncodings) {
        this.numRedundantEncodings = numRedundantEncodings;
        if (this.numRedundantEncodings > this.maxRedEncodings) {
            this.numRedundantEncodings = this.maxRedEncodings;
        }
        RedundantAudioEncoder.log(\`Updated numRedundantEncodings to \${this.numRedundantEncodings}\`);
    }
    /**
     * Enable or disable redundancy in response to
     * high packet loss event.
     */
    setRedundancyEnabled(enabled) {
        this.redundancyEnabled = enabled;
        RedundantAudioEncoder.log(\`redundancy \${this.redundancyEnabled ? 'enabled' : 'disabled'}\`);
    }
    /**
     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by
     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than
     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will
     * encounter this error and will permanently stop sending or receiving audio.
     */
    enqueueAudioFrameIfPayloadSizeIsValid(
    // @ts-ignore
    frame, controller) {
        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)
            return;
        controller.enqueue(frame);
    }
    /**
     * Receives encoded frames and modifies as needed before sending to transport.
     */
    senderTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);
        if (!primaryPayloadBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);
        /* istanbul ignore next */
        if (!encodedBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        frame.data = encodedBuffer;
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
        return;
    }
    /**
     * Get the primary payload from encoding
     */
    getPrimaryPayload(primaryTimestamp, frame) {
        const encodings = this.splitEncodings(primaryTimestamp, frame);
        if (!encodings || encodings.length < 1)
            return null;
        return encodings[encodings.length - 1].payload;
    }
    /**
     * Split up the encoding received into primary and redundant encodings
     * These will be ordered oldest to newest which is the same ordering
     * in the RTP red payload.
     */
    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {
        // process RED headers (according to RFC 2198)
        //   0                   1                   2                   3
        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //  |F|   block PT  |  timestamp offset         |   block length    |
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //
        // last header
        //   0 1 2 3 4 5 6 7
        //  +-+-+-+-+-+-+-+-+
        //  |0|   Block PT  |
        //  +-+-+-+-+-+-+-+-+
        const payload = new DataView(frame);
        let payloadSizeBytes = payload.byteLength;
        let totalPayloadSizeBytes = 0;
        let totalHeaderSizeBytes = 0;
        let primaryPayloadSizeBytes = 0;
        let payloadOffset = 0;
        let gotLastBlock = false;
        const encodings = new Array();
        const redundantEncodingBlockLengths = new Array();
        const redundantEncodingTimestamps = new Array();
        while (payloadSizeBytes > 0) {
            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;
            if (gotLastBlock) {
                // Bits 1 through 7 are payload type
                const payloadType = payload.getUint8(payloadOffset) & 0x7f;
                // Unexpected payload type. This is a bad packet.
                if (payloadType !== this.opusPayloadType) {
                    return null;
                }
                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;
                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;
                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This
                // is a bad packet.
                if (totalPayloadSizeBytes >= payload.byteLength) {
                    return null;
                }
                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;
                break;
            }
            else {
                if (payloadSizeBytes < this.redHeaderSizeBytes) {
                    return null;
                }
                // Bits 22 through 31 are payload length
                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);
                redundantEncodingBlockLengths.push(blockLength);
                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;
                const timestamp = primaryTimestamp - timestampOffset;
                redundantEncodingTimestamps.push(timestamp);
                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;
                totalHeaderSizeBytes += this.redHeaderSizeBytes;
                payloadOffset += this.redHeaderSizeBytes;
                payloadSizeBytes -= this.redHeaderSizeBytes;
            }
        }
        // The last block was never found. This is a bad packet.
        if (!gotLastBlock) {
            return null;
        }
        let redundantPayloadOffset = totalHeaderSizeBytes;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);
            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);
            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);
            const encoding = {
                timestamp: redundantEncodingTimestamps[i],
                payload: redundantPayloadBuffer,
                isRedundant: true,
            };
            if (getFecInfo) {
                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);
            }
            encodings.push(encoding);
            redundantPayloadOffset += redundantEncodingBlockLengths[i];
        }
        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;
        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);
        const primaryArray = new Uint8Array(primaryPayloadBuffer);
        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);
        const encoding = {
            timestamp: primaryTimestamp,
            payload: primaryPayloadBuffer,
            isRedundant: false,
            seq: primarySequenceNumber,
        };
        if (getFecInfo) {
            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);
        }
        encodings.push(encoding);
        return encodings;
    }
    /**
     * Create a new encoding with current primary payload and the older payloads of choice.
     */
    encode(primaryTimestamp, primaryPayload) {
        const primaryPayloadSize = primaryPayload.byteLength;
        // Payload size needs to be valid.
        if (primaryPayloadSize === 0 ||
            primaryPayloadSize >= this.maxRedPacketSizeBytes ||
            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {
            return null;
        }
        const numRedundantEncodings = this.numRedundantEncodings;
        let headerSizeBytes = this.redLastHeaderSizeBytes;
        let payloadSizeBytes = primaryPayloadSize;
        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;
        const redundantEncodingTimestamps = new Array();
        const redundantEncodingPayloads = new Array();
        // If redundancy is disabled then only send the primary payload
        if (this.redundancyEnabled) {
            // Determine how much redundancy we can fit into our packet
            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);
            for (let i = 0; i < numRedundantEncodings; i++) {
                // Do not add redundant encodings that are beyond the maximum timestamp offset.
                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {
                    break;
                }
                let findTimestamp = redundantTimestamp;
                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                if (!encoding) {
                    // If not found or not important then look for the previous packet.
                    // The current packet may have included FEC for the previous, so just
                    // use the previous packet instead provided that it has voice activity.
                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);
                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                }
                if (encoding) {
                    const redundantEncodingSizeBytes = encoding.payload.byteLength;
                    // Only add redundancy if there are enough bytes available.
                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)
                        break;
                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;
                    headerSizeBytes += this.redHeaderSizeBytes;
                    payloadSizeBytes += redundantEncodingSizeBytes;
                    redundantEncodingTimestamps.unshift(encoding.timestamp);
                    redundantEncodingPayloads.unshift(encoding.payload);
                }
                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;
                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);
            }
        }
        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);
        const redPayloadView = new DataView(redPayloadBuffer);
        // Add redundant encoding header(s) to new buffer
        let redPayloadOffset = 0;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];
            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);
            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));
            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);
            redPayloadOffset += this.redHeaderSizeBytes;
        }
        // Add primary encoding header to new buffer
        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);
        redPayloadOffset += this.redLastHeaderSizeBytes;
        // Add redundant payload(s) to new buffer
        const redPayloadArray = new Uint8Array(redPayloadBuffer);
        for (let i = 0; i < redundantEncodingPayloads.length; i++) {
            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);
            redPayloadOffset += redundantEncodingPayloads[i].byteLength;
        }
        // Add primary payload to new buffer
        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);
        redPayloadOffset += primaryPayload.byteLength;
        /* istanbul ignore next */
        // Sanity check that we got the expected total payload size.
        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)
            return null;
        this.updateEncodingHistory(primaryTimestamp, primaryPayload);
        return redPayloadBuffer;
    }
    /**
     * Update the encoding history with the latest primary encoding
     */
    updateEncodingHistory(primaryTimestamp, primaryPayload) {
        // Remove encodings from the history if they are too old.
        for (const encoding of this.encodingHistory) {
            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;
            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {
                this.encodingHistory.shift();
            }
            else {
                break;
            }
        }
        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is
        // a CELT-only packet or contains voice activity.
        const packet = new DataView(primaryPayload);
        if (this.opusPacketIsCeltOnly(packet) ||
            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {
            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.
            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory
            // usage is bounded. In this case, just clear the history and start over from empty.
            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)
                this.encodingHistory.length = 0;
            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });
        }
    }
    /**
     * Initialize packet logs and metric values.
     */
    initializePacketLogs() {
        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for
        // packets that have already been received but are outside of the max out-of-order distance.
        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;
        this.primaryPacketLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.redRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.fecRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.totalAudioPacketsExpected = 0;
        this.totalAudioPacketsLost = 0;
        this.totalAudioPacketsRecoveredRed = 0;
        this.totalAudioPacketsRecoveredFec = 0;
    }
    /**
     * Receives encoded frames from the server
     * and adds the timestamps to a packet log
     * to calculate an approximate recovery metric.
     */
    receivePacketLogTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        // @ts-ignore
        const encodings = this.splitEncodings(frame.timestamp, frame.data, 
        /*getFecInfo*/ true, frameMetadata.sequenceNumber);
        if (!encodings) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        for (let i = encodings.length - 1; i >= 0; i--) {
            if (this.updateLossStats(encodings[i])) {
                this.updateRedStats(encodings[i]);
                this.updateFecStats(encodings[i]);
            }
        }
        this.maybeReportLossStats(encodings[encodings.length - 1].timestamp, frameMetadata.synchronizationSource);
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
    }
    /**
     * Adds a timestamp to the primary packet log.
     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking
     * at the difference between timestamps.
     *
     * @param encoding : The encoding to be analyzed
     * @returns false if sequence number was greater than max out of order distance
     *          true otherwise
     */
    updateLossStats(encoding) {
        if (encoding.isRedundant)
            return true;
        const timestamp = encoding.timestamp;
        const seq = encoding.seq;
        if (this.totalAudioPacketsExpected === 0) {
            this.totalAudioPacketsExpected = 1;
            this.newestSequenceNumber = seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
            return true;
        }
        const diff = this.int16(seq - this.newestSequenceNumber);
        if (diff < -this.maxOutOfOrderPacketDistance)
            return false;
        if (diff < 0) {
            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
                if (this.totalAudioPacketsLost > 0)
                    this.totalAudioPacketsLost--;
                this.addTimestamp(this.primaryPacketLog, timestamp);
                this.removeFromRecoveryWindows(timestamp);
            }
        }
        else if (diff > 1) {
            this.totalAudioPacketsLost += diff - 1;
        }
        if (diff > 0) {
            this.totalAudioPacketsExpected += diff;
            this.newestSequenceNumber = encoding.seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
        }
        return true;
    }
    /**
     * Adds a timestamp to the red recovery log if it is not present in
     * the primary packet log and if it's not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateRedStats(encoding) {
        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)
            return;
        const timestamp = encoding.timestamp;
        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {
                this.totalAudioPacketsRecoveredRed++;
                this.addTimestamp(this.redRecoveryLog, timestamp);
            }
            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {
                /* istanbul ignore else */
                if (this.totalAudioPacketsRecoveredFec > 0)
                    this.totalAudioPacketsRecoveredFec--;
            }
        }
    }
    /**
     * Adds a timestamp to the fec recovery log if it is not present in
     * the primary packet log and red recovery log and if it is not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateFecStats(encoding) {
        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)
            return;
        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;
        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||
            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||
            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {
            return;
        }
        this.totalAudioPacketsRecoveredFec++;
        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);
    }
    /**
     * Reports loss metrics to DefaultTransceiverController
     *
     * @param timestamp : Timestamp of most recent primary packet
     */
    maybeReportLossStats(timestamp, ssrc) {
        if (timestamp - this.lastLossReportTimestamp < this.lossReportInterval)
            return;
        /* istanbul ignore next */
        if (RedundantAudioEncoder.shouldReportStats) {
            // @ts-ignore
            self.postMessage({
                type: 'RedundantAudioEncoderStats',
                ssrc,
                totalAudioPacketsLost: this.totalAudioPacketsLost,
                totalAudioPacketsExpected: this.totalAudioPacketsExpected,
                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,
                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,
            });
        }
        this.lastLossReportTimestamp = timestamp;
    }
    /**
     * Adds a timestamp to a packet log
     *
     * @param packetLog : The packetlog to add the timestamp to
     * @param timestamp : The timestamp that should be added
     */
    addTimestamp(packetLog, timestamp) {
        packetLog.window[packetLog.index] = timestamp;
        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;
    }
    /**
     * Checks if a timestamp is in a packetlog
     *
     * @param packetLog : The packetlog to search
     * @param timestamp : The timestamp to search for
     * @returns true if timestamp is present, false otherwise
     */
    hasTimestamp(packetLog, timestamp) {
        const element = packetLog.window.find(t => t === timestamp);
        return !!element;
    }
    /**
     * Removes a timestamp from a packet log
     *
     * @param packetLog : The packetlog from which the timestamp should be removed
     * @param timestamp : The timestamp to be removed
     * @returns true if timestamp was present in the log and removed, false otherwise
     */
    removeTimestamp(packetLog, timestamp) {
        const index = packetLog.window.indexOf(timestamp);
        if (index >= 0) {
            packetLog.window[index] = undefined;
            return true;
        }
        return false;
    }
    /**
     * Removes a timestamp from red and fec recovery windows.
     *
     * @param timestamp : The timestamp to be removed
     */
    removeFromRecoveryWindows(timestamp) {
        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredRed > 0)
                this.totalAudioPacketsRecoveredRed--;
        }
        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredFec > 0)
                this.totalAudioPacketsRecoveredFec--;
        }
    }
    /**
     * Converts the supplied argument to 32-bit unsigned integer
     */
    uint32WrapAround(num) {
        const mod = 4294967296; // 2^32
        let res = num;
        if (num >= mod) {
            res = num - mod;
        }
        else if (num < 0) {
            res = mod + num;
        }
        return res;
    }
    /**
     * Converts the supplied argument to 16-bit signed integer
     */
    int16(num) {
        return (num << 16) >> 16;
    }
    /**
     * Determines if an Opus packet is in CELT-only mode.
     *
     * @param packet Opus packet.
     * @returns \`true\` if the packet is in CELT-only mode.
     */
    opusPacketIsCeltOnly(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1
        // for CELT-only packets.
        return !!(packet.getUint8(0) & 0x80);
    }
    /**
     * Gets the number of samples per frame from an Opus packet.
     *
     * @param packet Opus packet. This must contain at least one byte of data.
     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will
     *                     be returned.
     * @returns Number of samples per frame.
     */
    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {
        // Sample rate must be a 32-bit integer.
        sampleRateHz = Math.round(sampleRateHz);
        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        let numSamples;
        let frameSizeOption;
        // Case for CELT-only packet.
        if (this.opusPacketIsCeltOnly(packet)) {
            // The lower 3 'config' bits indicate the frame size option.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes
            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be
            // calculated as follows:
            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)
            // = (sample/s) * (1s/400) * 2^(frameSizeOption)
            // = (sample/s) * 2^(frameSizeOption) * (1s/400)
            numSamples = (sampleRateHz << frameSizeOption) / 400;
        }
        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the
        // above TOC byte diagram will both be 1.
        else if ((packet.getUint8(0) & 0x60) === 0x60) {
            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15
            // correspond to a 20ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (20ms)
            // = (sample/s) * (1s/50)
            //
            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14
            // correspond to a 10ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (10ms)
            // = (sample/s) * (1s/100)
            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;
        }
        // Case for SILK-only packet.
        else {
            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            if (frameSizeOption === 3) {
                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:
                // (sample/s) * (1s/1000ms) * (60ms)
                // = (sample/s) * (60ms) * (1s/1000ms)
                numSamples = (sampleRateHz * 60) / 1000;
            }
            else {
                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be
                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:
                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)
                // = (sample/s) * (1s/100) * 2^(frameSizeOption)
                // = (sample/s) * 2^(frameSizeOption) * (1s/100)
                numSamples = (sampleRateHz << frameSizeOption) / 100;
            }
        }
        return numSamples;
    }
    /**
     * Gets the number of SILK frames per Opus frame.
     *
     * @param packet Opus packet.
     * @returns Number of SILK frames per Opus frame.
     */
    opusNumSilkFrames(packet) {
        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but
        // any valid sample rate would work.
        //
        // To calculate the length of a frame (with a 48kHz sample rate) in ms:
        // (samples/frame) * (1s/48000 samples) * (1000ms/s)
        // = (samples/frame) * (1000ms/48000 samples)
        // = (samples/frame) * (1ms/48 samples)
        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;
        if (frameLengthMs < 10)
            frameLengthMs = 10;
        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.
        switch (frameLengthMs) {
            case 10:
            case 20:
                return 1;
            case 40:
                return 2;
            case 60:
                return 3;
            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,
            // or 60 ms, so we ignore the default case for test coverage.
            /* istanbul ignore next */
            default:
                return 0;
        }
    }
    /**
     * Gets the number of channels from an Opus packet.
     *
     * @param packet Opus packet.
     * @returns Number of channels.
     */
    opusPacketGetNumChannels(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.
        return packet.getUint8(0) & 0x4 ? 2 : 1;
    }
    /**
     * Determine the size (in bytes) of an Opus frame.
     *
     * @param packet Opus packet.
     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.
     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.
     * @param sizeBytes Variable to store the parsed frame size (in bytes).
     * @returns Number of bytes that were parsed to determine the frame size.
     */
    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {
        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.
        // If there are no remaining bytes to parse the size from, then the size cannot be determined.
        if (remainingBytes < 1) {
            sizeBytes[0] = -1;
            return -1;
        }
        // If the first byte is in the range 0...251, then this value is the size of the frame.
        else if (packet.getUint8(byteOffset) < 252) {
            sizeBytes[0] = packet.getUint8(byteOffset);
            return 1;
        }
        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size
        // cannot be determined.
        else if (remainingBytes < 2) {
            sizeBytes[0] = -1;
            return -1;
        }
        // The total size of the frame given two size bytes is:
        // (4 * secondSizeByte) + firstSizeByte
        else {
            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);
            return 2;
        }
    }
    /**
     * Parse binary data containing an Opus packet into one or more Opus frames.
     *
     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the
     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the
     *             contained Opus packet.
     * @param lenBytes Size of the data (in bytes).
     * @param selfDelimited Indicates if the Opus packet is self-delimiting
     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each
     *                     Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the
     *                      payload.
     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).
     * @returns Number of Opus frames.
     */
    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {
        if (!frameSizes || lenBytes < 0)
            return this.OPUS_BAD_ARG;
        if (lenBytes === 0)
            return this.OPUS_INVALID_PACKET;
        // The number of Opus frames in the packet.
        let numFrames;
        // Intermediate storage for the number of bytes parsed to determine the size of a frame.
        let numBytesParsed;
        // The number of the padding bytes (excluding the padding count bytes) in the packet.
        let paddingBytes = 0;
        // Indicates whether CBR (constant bitrate) framing is used.
        let cbr = false;
        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).
        const toc = data.getUint8(0);
        // Store the TOC byte.
        if (tocByte)
            tocByte[0] = toc;
        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the
        // minus 1.
        let remainingBytes = lenBytes - 1;
        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.
        let byteOffset = 1;
        // The size of the last Opus frame in bytes.
        let lastSizeBytes = remainingBytes;
        // Read the \`c\` bits (i.e. code bits) from the TOC byte.
        switch (toc & 0x3) {
            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.
            case 0:
                numFrames = 1;
                break;
            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.
            case 1:
                numFrames = 2;
                cbr = true;
                if (!selfDelimited) {
                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.
                    if (remainingBytes & 0x1)
                        return this.OPUS_INVALID_PACKET;
                    // The sizes of both frames are equal (i.e. half of the number of data bytes).
                    lastSizeBytes = remainingBytes / 2;
                    // If \`lastSizeBytes\` is too large, we will catch it later.
                    frameSizes[0][0] = lastSizeBytes;
                }
                break;
            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.
            case 2:
                numFrames = 2;
                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);
                remainingBytes -= numBytesParsed;
                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.
                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                byteOffset += numBytesParsed;
                // The size of the second frame is the remaining number of bytes after the first frame.
                lastSizeBytes = remainingBytes - frameSizes[0][0];
                break;
            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to
            // 120 ms).
            default:
                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).
                if (remainingBytes < 1)
                    return this.OPUS_INVALID_PACKET;
                // Frame count byte format:
                //  0
                //  0 1 2 3 4 5 6 7
                // +-+-+-+-+-+-+-+-+
                // |v|p|     M     |
                // +-+-+-+-+-+-+-+-+
                //
                // Read the frame count byte, which immediately follows the TOC byte.
                const frameCountByte = data.getUint8(byteOffset++);
                --remainingBytes;
                // Read the 'M' bits of the frame count byte, which encode the number of frames.
                numFrames = frameCountByte & 0x3f;
                // The number of frames in a code 3 packet must not be 0.
                if (numFrames <= 0)
                    return this.OPUS_INVALID_PACKET;
                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);
                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded
                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot
                // exceed 2880 * 2 = 5760.
                if (samplesPerFrame * numFrames > 5760)
                    return this.OPUS_INVALID_PACKET;
                // Parse padding bytes if the 'p' bit is 1.
                if (frameCountByte & 0x40) {
                    let paddingCountByte;
                    let numPaddingBytes;
                    // Remove padding bytes (including padding count bytes) from the remaining byte count.
                    do {
                        // Sanity check that there are enough bytes to parse and remove the padding.
                        if (remainingBytes <= 0)
                            return this.OPUS_INVALID_PACKET;
                        // Get the next padding count byte.
                        paddingCountByte = data.getUint8(byteOffset++);
                        --remainingBytes;
                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the
                        // value in the padding count byte.
                        //
                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the
                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.
                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;
                        remainingBytes -= numPaddingBytes;
                        paddingBytes += numPaddingBytes;
                    } while (paddingCountByte === 255);
                }
                // Sanity check that the remaining number of bytes is not negative after removing the padding.
                if (remainingBytes < 0)
                    return this.OPUS_INVALID_PACKET;
                // Read the 'v' bit (i.e. VBR bit).
                cbr = !(frameCountByte & 0x80);
                // VBR case
                if (!cbr) {
                    lastSizeBytes = remainingBytes;
                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)
                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the
                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);
                        remainingBytes -= numBytesParsed;
                        // The remaining number of data bytes must be enough to contain each frame.
                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {
                            return this.OPUS_INVALID_PACKET;
                        }
                        byteOffset += numBytesParsed;
                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];
                    }
                    // Sanity check that the size of the last frame is not negative.
                    if (lastSizeBytes < 0)
                        return this.OPUS_INVALID_PACKET;
                }
                // CBR case
                else if (!selfDelimited) {
                    // The size of each frame is the number of data bytes divided by the number of frames.
                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);
                    // The number of data bytes must be a non-negative integer multiple of the number of frames.
                    if (lastSizeBytes * numFrames !== remainingBytes)
                        return this.OPUS_INVALID_PACKET;
                    // All frames have equal size in the undelimited CBR case.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        frameSizes[i][0] = lastSizeBytes;
                    }
                }
        }
        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the
        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and
        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.
        if (selfDelimited) {
            // The extra frame size byte(s) will always indicate the size of the last frame.
            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);
            remainingBytes -= numBytesParsed;
            // There must be enough data bytes for the last frame.
            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {
                return this.OPUS_INVALID_PACKET;
            }
            byteOffset += numBytesParsed;
            // For CBR packets, the sizes of all the frames are equal.
            if (cbr) {
                // There must be enough data bytes for all the frames.
                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                for (let i = 0; i < numFrames - 1; ++i) {
                    frameSizes[i][0] = frameSizes[numFrames - 1][0];
                }
            }
            // At this point, \`lastSizeBytes\` contains the size of the last frame plus the size of the extra frame size
            // byte(s), so sanity check that \`lastSizeBytes\` is the upper bound for the size of the last frame.
            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {
                return this.OPUS_INVALID_PACKET;
            }
        }
        // Undelimited case
        else {
            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet
            // (or of all the packets, for the CBR case) is larger than maximum frame size.
            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)
                return this.OPUS_INVALID_PACKET;
            frameSizes[numFrames - 1][0] = lastSizeBytes;
        }
        // Store the offset to the start of the payload.
        if (payloadOffset)
            payloadOffset[0] = byteOffset;
        // Store the offsets to the start of each frame.
        for (let i = 0; i < numFrames; ++i) {
            if (frameOffsets)
                frameOffsets[i][0] = byteOffset;
            byteOffset += frameSizes[i][0];
        }
        // Store the length of the Opus packet.
        if (packetLenBytes)
            packetLenBytes[0] = byteOffset + paddingBytes;
        return numFrames;
    }
    /**
     * Parse a single undelimited Opus packet into one or more Opus frames.
     *
     * @param packet Opus packet to be parsed.
     * @param lenBytes Size of the packet (in bytes).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of
     *                     each Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the
     *                      payload.
     * @returns Number of Opus frames.
     */
    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {
        return this.opusPacketParseImpl(packet, lenBytes, 
        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);
    }
    /**
     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only
     * packets that do not have VAD information, it returns -1.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  0: no frame had the VAD flag set.
     *           1: at least one frame had the VAD flag set.
     *          -1: VAD status could not be determined.
     */
    opusPacketHasVoiceActivity(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return 0;
        // In CELT-only mode, we can not determine whether there is VAD.
        if (this.opusPacketIsCeltOnly(packet))
            return -1;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        // It is not possible for \`opusNumSilkFrames()\` to return 0, so we ignore the next sanity check for test coverage.
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return -1;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        // VAD status cannot be determined for invalid packets.
        if (numOpusFrames < 0)
            return -1;
        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.
        for (let i = 0; i < numOpusFrames; ++i) {
            if (opusFrameSizes[i][0] < 1)
                continue;
            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):
            //
            // Mono case:
            // +-----------------+----------+
            // | 1 to 3 VAD bits | LBRR bit |
            // +-----------------+----------+
            //
            // Stereo case:
            // +---------------------+--------------+----------------------+---------------+
            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |
            // +---------------------+--------------+----------------------+---------------+
            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of
            // these VAD bits are 1, then voice activity is present.
            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))
                return 1;
            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.
            const channels = this.opusPacketGetNumChannels(packet);
            if (channels === 2 &&
                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {
                return 1;
            }
        }
        // No voice activity was detected.
        return 0;
    }
    /**
     * This method is based on Definition of the Opus Audio Codec
     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on
     * parsing the LP layer of an Opus packet, particularly the LBRR flag.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  true: packet has fec encoding about previous packet.
     *           false: no fec encoding present.
     */
    opusPacketHasFec(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return false;
        // In CELT-only mode, packets should not have FEC.
        if (this.opusPacketIsCeltOnly(packet))
            return false;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        if (numOpusFrames < 0)
            return false;
        /* istanbul ignore next */
        if (opusFrameSizes[0][0] <= 1)
            return false;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return false;
        const channels = this.opusPacketGetNumChannels(packet);
        /* istanbul ignore next */
        if (channels !== 1 && channels !== 2)
            return false;
        // A frame starts with the LP layer. The LP layer begins with two to eight
        // header bits.These consist of one VAD bit per SILK frame (up to 3),
        // followed by a single flag indicating the presence of LBRR frames.
        // For a stereo packet, these first flags correspond to the mid channel, and
        // a second set of flags is included for the side channel. Because these are
        // the first symbols decoded by the range coder and because they are coded
        // as binary values with uniform probability, they can be extracted directly
        // from the most significant bits of the first byte of compressed data.
        for (let i = 0; i < channels; i++) {
            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))
                return true;
        }
        return false;
    }
}
RedundantAudioEncoder.shouldLog = true;
RedundantAudioEncoder.shouldReportStats = true;
RedundantAudioEncoder.initializeWorker();
`;l.default=f},509936:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(20202));let m=s(class extends g.default{static nextTick(a){setTimeout(a,0)}constructor(){super(0)}},"AsyncScheduler");l.default=m},264323:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{start(g){this.stop(),this.timer=setInterval(g,this.intervalMs)}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}running(){return this.timer!==void 0}constructor(g){this.intervalMs=g}},"IntervalScheduler");l.default=f},20202:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{start(g){this.stop(),this.timer=setTimeout(()=>{clearTimeout(this.timer),g()},this.timeoutMs)}stop(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}constructor(g){this.timeoutMs=g,this.timer=null}},"TimeoutScheduler");l.default=f},941900:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(153223)),m=u(f(765479)),h=u(f(924520));let a=s(class Mt{clone(){return new Mt(this.sdp)}static isRTPCandidate(n){const e=/candidate[:](\S+) (\d+)/g.exec(n);return!(e===null||e[2]!=="1")}static linesToSDP(n){return new Mt(n.join(Mt.CRLF))}static candidateTypeFromString(n){switch(n){case g.default.Host:return g.default.Host;case g.default.ServerReflexive:return g.default.ServerReflexive;case g.default.PeerReflexive:return g.default.PeerReflexive;case g.default.Relay:return g.default.Relay}return null}static candidateType(n){const e=/a[=]candidate[:].* typ ([a-z]+) /g.exec(n);return e===null?null:Mt.candidateTypeFromString(e[1])}static mediaType(n){const e=/m=(audio|video)/g.exec(n);if(e!==null)return e[1]}static mid(n){if(n.includes("a=mid:"))return n.replace(/^(a=mid:)/,"")}static direction(n){const e=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(n);if(e!==null)return e[1]}static splitLines(n){return n.trim().split(`
`).map(e=>e.trim())}static splitSections(n){return n.split(`
m=`).map((t,i)=>(i>0?"m="+t:t).trim()+Mt.CRLF)}static findActiveCameraSection(n){let e=0,t=!1;for(const i of n){if(/^m=video/.test(i)&&(i.indexOf("sendrecv")>-1||i.indexOf("sendonly")===-1&&i.indexOf("recvonly")===-1&&i.indexOf("inactive")===-1)){t=!0;break}e++}return t===!1&&(e=-1),e}static extractSSRCsFromFIDGroupLine(n){return/^a=ssrc-group:FID\s(.+)/.exec(n)[1]}static matchPrefix(n,e){return Mt.splitLines(n).filter(t=>t.indexOf(e)===0)}lines(){return this.sdp.split(Mt.CRLF)}hasVideo(){return/^m=video/gm.exec(this.sdp)!==null}hasCandidates(){return/a[=]candidate[:]/g.exec(this.sdp)!==null}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(n){return Mt.linesToSDP(this.lines().filter(e=>Mt.candidateType(e)!==n))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(g.default.ServerReflexive)}withAudioMaxAverageBitrate(n){if(!n)return this.clone();n=Math.trunc(Math.min(Math.max(n,Mt.rfc7587LowestBitrate),Mt.rfc7587HighestBitrate));const e=this.lines(),t=Mt.findOpusFmtpAttributes(e),i=Mt.updateOpusFmtpAttributes(e,t,[`maxaveragebitrate=${n}`]);return Mt.linesToSDP(i)}withStereoAudio(){const n=this.lines(),e=Mt.findOpusFmtpAttributes(n),t=Mt.updateOpusFmtpAttributes(n,e,["stereo=1","sprop-stereo=1"]);return Mt.linesToSDP(t)}static findOpusFmtpAttributes(n){const e=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let t=!1;const i=[];for(const o of n)if(o.startsWith("m=audio")&&(i.push(null),t=!0),o.startsWith("m=video")&&(t=!1),t){const c=e.exec(o);c!==null&&(i[i.length-1]=`a=fmtp:${c[1]} `)}return i}static updateOpusFmtpAttributes(n,e,t){const i=[];let o=0,c=null;for(const p of n)if(p.startsWith("m=audio")&&(c=e[o],o++),p.startsWith("m=video")&&(c=null),c&&p.startsWith(c)){const S=p.slice(c.length).split(";"),d=[];for(const y of S)t.findIndex(I=>I.startsWith(y.split("=")[0]))<0&&d.push(y);for(const y of t)d.push(y);i.push(c+d.join(";"))}else i.push(p);return i}withUnifiedPlanFormat(){let n=this.sdp;return n.includes("mozilla")?this.clone():(n=n.replace("o=-","o=mozilla-chrome"),new Mt(n))}getUniqueRtpHeaderExtensionId(n){const e=[];for(const i of n)if(/^a=extmap:/.test(i.trim())){const c=+i.split("a=extmap:")[1].split(" ")[0];e.includes(c)||e.push(c)}e.sort((i,o)=>i-o);let t=0;for(const i of e){if(i-t>1)return t+1;t=i}return t===14?-1:t+1}withVideoLayersAllocationRtpHeaderExtension(n){return this.withRtpHeaderExtension(n,Mt.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(n){return this.withRtpHeaderExtension(n,Mt.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const n=Mt.splitLines(this.sdp).filter(e=>!e.includes(Mt.dependencyDescriptorRtpHeaderExtensionUrl));return new Mt(n.join(Mt.CRLF)+Mt.CRLF)}withRtpHeaderExtension(n,e){const t=n?n.getRtpHeaderExtensionId(e):-1,i=t===-1?this.getUniqueRtpHeaderExtensionId(Mt.splitLines(this.sdp)):t,o=Mt.splitSections(this.sdp),c=[];for(let S of o){if(/^m=video/.test(S)&&Mt.getRtpHeaderExtensionIdInSection(S,e)===-1){const d=Mt.splitLines(S),y=[];if(i===-1||this.hasRtpHeaderExtensionId(i)){c.push(S);continue}for(const E of d)if(y.push(E),/^a=sendrecv/.test(E.trim())){const I="a=extmap:"+i+" "+e;y.push(I)}S=y.join(Mt.CRLF)+Mt.CRLF}else if(t!==-1&&/^m=video/.test(S)&&Mt.getRtpHeaderExtensionIdInSection(S,e)!==t){const d=Mt.splitLines(S),y=[];for(const E of d){if(/^a=extmap:/.test(E.trim())&&E.split("a=extmap:")[1].split(" ")[1]===e){if(!this.hasRtpHeaderExtensionId(t)){const A="a=extmap:"+t+" "+e;y.push(A)}continue}y.push(E)}S=y.join(Mt.CRLF)+Mt.CRLF}c.push(S)}const p=c.join("");return new Mt(p)}ssrcForVideoSendingSection(){const n=this.sdp,e=Mt.splitSections(n);if(e.length<2)return"";const t=Mt.findActiveCameraSection(e);if(t===-1)return"";const i=Mt.matchPrefix(e[t],"a=ssrc-group:FID ");if(i.length<1)return"";const o=Mt.extractSSRCsFromFIDGroupLine(i[0]),[c]=o.split(" ").map(p=>parseInt(p,10));return c.toString()}videoSendSectionHasDifferentSSRC(n){const e=this.ssrcForVideoSendingSection(),t=n.ssrcForVideoSendingSection();if(e===""||t==="")return!1;const i=parseInt(e,10),o=parseInt(t,10);return i!==o}removeH264SupportFromSendSection(){const n=this.sdp,e=Mt.splitSections(n),t=Mt.findActiveCameraSection(e);if(t===-1)return new Mt(this.sdp);const i=e[t],o=Mt.splitLines(i),c=[],p=new Map;o.forEach(E=>{if(/^a=rtpmap:/.test(E)){const I=/^a=rtpmap:([0-9]+)\s/.exec(E);I&&E.toLowerCase().includes("h264")&&c.push(parseInt(I[1],10))}if(/^a=fmtp:/.test(E)){const I=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(E);if(I&&I.length===3){const A=parseInt(I[1],10),L=parseInt(I[2],10);p.has(L)?p.get(L).push(A):p.set(L,[A])}}});const S=new Set;for(const E of c){S.add(E);const I=p.get(E);if(I)for(const A of I)S.add(A)}if(c.length>0){const E=o[0].split(" ");o[0]=E.filter(I=>!S.has(parseInt(I))).join(" ")}const d=o.filter(E=>{if(!E.includes("rtpmap")&&!E.includes("rtcp-fb")&&!E.includes("fmtp"))return!0;for(const I of S)if(E.includes(I.toString()))return!1;return!0});e[t]=d.join(Mt.CRLF)+Mt.CRLF;const y=e.join("");return new Mt(y)}mediaSections(){const n=Mt.splitSections(this.sdp);if(n.length<2)return[];const e=[];for(let t=1;t<n.length;t++){const i=new m.default,o=Mt.splitLines(n[t]);for(const c of o){const p=Mt.mediaType(c);if(p!==void 0){i.mediaType=p;continue}const S=Mt.direction(c);if(S!==void 0){i.direction=S;continue}const d=Mt.mid(c);if(d!==void 0){i.mid=d;continue}}e.push(i)}return e}static getRtpHeaderExtensionIdInSection(n,e){const t=Mt.splitLines(n);for(const i of t)if(/^a=extmap:/.test(i.trim())){const o=i.split("a=extmap:")[1].split(" "),c=+o[0];if(o[1]===e)return c}return-1}getRtpHeaderExtensionId(n){const e=Mt.splitSections(this.sdp);for(const t of e)if(/^m=video/.test(t)){const i=Mt.getRtpHeaderExtensionIdInSection(t,n);if(i!==-1)return i}return-1}hasRtpHeaderExtensionId(n){const e=Mt.splitLines(this.sdp);for(const t of e)if(/^a=extmap:/.test(t.trim())&&+t.split("a=extmap:")[1].split(" ")[0]===n)return!0;return!1}withVideoSendCodecPreferences(n){const e=this.sdp,t=Mt.splitSections(e),i=Mt.findActiveCameraSection(t);if(i===-1)return new Mt(this.sdp);t[i]=this.sectionWithCodecPreferences(t[i],n);const o=t.join("");return new Mt(o)}sectionWithCodecPreferences(n,e){const t=new Map,i=Mt.splitLines(n);i.forEach(S=>{if(!S.startsWith("a=rtpmap:"))return;const d=/^a=rtpmap:(\d+)\s/.exec(S);if(!d)return;const y=d[1];for(const E of e){if(!S.includes(`${E.codecName}/${E.codecCapability.clockRate}`))continue;let I=!1;if(E.codecCapability.sdpFmtpLine!==void 0){let A=!1;for(const L of i){if(E.fmtpLineMatches(L,parseInt(y))){I=!0;break}A||(A=L.startsWith(`a=fmtp:${y} profile-id=`))}E.equals(h.default.vp9Profile0())&&!A&&(I=!0)}else I=!0;if(I){t.set(y,E);break}}});const o=new Set(t.keys()),c=i[0].split(" ").filter(S=>!o.has(S)),p=Array.from(t.entries()).sort((S,d)=>{let[y,E]=S,[I,A]=d;const L=e.indexOf(E),M=e.indexOf(A);return L-M}).map(S=>{let[d,y]=S;return d});return c.splice(3,0,...p),i[0]=c.join(" "),i.join(Mt.CRLF)+Mt.CRLF}highestPriorityVideoSendCodec(){const n=this.prioritizedSendVideoCodecCapabilities();return n.length>0?n[0]:void 0}prioritizedSendVideoCodecCapabilities(){const n=this.sdp,e=Mt.splitSections(n),t=Mt.findActiveCameraSection(e);if(t===-1)return[];const i=Mt.splitLines(e[t]),o=i[0].split(" ");return o.length<4?[]:o.slice(3).map(S=>this.videoCodecCapabilityForPayloadType(i,S)).filter(S=>S!==void 0&&["VP8","H264","VP9","AV1"].includes(S.codecName))}videoCodecCapabilityForPayloadType(n,e){let t,i,o;for(const c of n){const p=/^a=rtpmap:([0-9]+)\s/.exec(c);if(p&&p[1]===e){const d=c.split(" ")[1].split("/");d.length>=2&&(t=d[0],i=d[1])}c.startsWith(`a=fmtp:${e} `)&&(o=c.split(" ")[1])}if(t!==void 0)return new h.default(t,{clockRate:parseInt(i),mimeType:`video/${t}`,sdpFmtpLine:o})}getAudioPayloadTypes(){const n=new Map,e=this.sdp,t=Mt.splitSections(e);return n.set("opus",Mt.findAudioPayloadType("opus",t)),n.set("red",Mt.findAudioPayloadType("red",t)),n}static findAudioPayloadType(n,e){const t=`a=rtpmap:\\s*(\\d+)\\s+${n}\\/48000`,i=new RegExp(t);for(const o of e)if(/^m=audio/.test(o)){const c=i.exec(o);if(c!==null)return Number(c[1])}return 0}withStartingVideoSendBitrate(n){const e=Mt.splitSections(this.sdp),t=Mt.findActiveCameraSection(e);if(t===-1)return this;const i=Mt.splitLines(e[t]),o=[];for(const p of i)if(/^a=fmtp:\d*/.test(p)){const S=p+`;x-google-start-bitrate=${n*1e3}`;o.push(S)}else o.push(p);e[t]=o.join(Mt.CRLF)+Mt.CRLF;const c=e.join("");return new Mt(c)}constructor(n){this.sdp=n}},"SDP");l.default=a,a.CRLF=`\r
`,a.rfc7587LowestBitrate=6e3,a.rfc7587HighestBitrate=51e4,a.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",a.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},153223:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SDPCandidateType=void 0;var f;(function(u){u.Host="host",u.ServerReflexive="srflx",u.PeerReflexive="prflx",u.Relay="relay"})(f=l.SDPCandidateType||(l.SDPCandidateType={})),l.default=f},765479:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"SDPMediaSection");l.default=f},924520:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=f(50380);let g=s(class ci{equals(h){return h!==void 0&&this.codecName===h.codecName&&this.codecCapability.mimeType===h.codecCapability.mimeType&&this.codecCapability.clockRate===h.codecCapability.clockRate&&this.codecCapability.sdpFmtpLine===h.codecCapability.sdpFmtpLine}fmtpLineMatches(h,a){const r=this.codecCapability.sdpFmtpLine;if(!r)return!1;if(this.codecName==="H264"){const n=/profile-level-id=([0-9a-f]{4})[0-9a-f]{2}/i,e=r.replace(n,"profile-level-id=$1");return h.replace(n,"profile-level-id=$1").startsWith(`a=fmtp:${a} ${e}`)}return h.startsWith(`a=fmtp:${a} ${r}`)}static vp8(){return new ci("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264BaselineProfile(){return new ci("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"})}static h264ConstrainedBaselineProfile(){return new ci("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264MainProfile(){return new ci("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d001f"})}static h264HighProfile(){return new ci("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=64001f"})}static h264ConstrainedHighProfile(){return new ci("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640c1f"})}static h264(){return ci.h264ConstrainedBaselineProfile()}static vp9Profile0(){return new ci("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static vp9(){return ci.vp9Profile0()}static av1Main(){return new ci("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static av1(){return ci.av1Main()}static fromSignaled(h){switch(h){case u.SdkVideoCodecCapability.VP8:return ci.vp8();case u.SdkVideoCodecCapability.H264_BASELINE_PROFILE:return ci.h264BaselineProfile();case u.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return ci.h264ConstrainedBaselineProfile();case u.SdkVideoCodecCapability.H264_MAIN_PROFILE:return ci.h264MainProfile();case u.SdkVideoCodecCapability.H264_HIGH_PROFILE:return ci.h264HighProfile();case u.SdkVideoCodecCapability.H264_CONSTRAINED_HIGH_PROFILE:return ci.h264ConstrainedHighProfile();case u.SdkVideoCodecCapability.VP9_PROFILE_0:return ci.vp9Profile0();case u.SdkVideoCodecCapability.AV1_MAIN_PROFILE:return ci.av1Main();default:return}}constructor(h,a){this.codecName=h,this.codecCapability=a}},"VideoCodecCapability");l.default=g},307210:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=f(396169);let g=s(class Wl{compress(h,a){if(a.length>0){const e=Math.min(a.length,Wl.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const r={memLevel:Wl.Z_MEM_LEVEL,dictionary:a};return u.deflateRaw(h,r)}decompress(h,a){if(a.length>0){const e=Math.min(a.length,Wl.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const r={to:"string",dictionary:a,chunkSize:4096};let n="";try{n=u.inflateRaw(h,r)}catch(e){this.logger.error(`failed to decompress the string with error: [${e}]`)}return n}constructor(h){this.logger=h}},"ZLIBTextCompressor");l.default=g,g.Z_MEM_LEVEL=9,g.MAX_DICTIONARY_SIZE=31744},266661:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=f(308334),g=f(626566),m=f(773215),h=f(598410);let a=s(class{perform(n,e){const t=this.currentState;if(t===m.SessionStateControllerState.NotConnected&&n===u.SessionStateControllerAction.Connect)this.transition(m.SessionStateControllerState.Connecting,n);else if(t===m.SessionStateControllerState.Connecting&&n===u.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connecting&&n===u.SessionStateControllerAction.FinishConnecting)this.transition(m.SessionStateControllerState.Connected,n);else if(t===m.SessionStateControllerState.Connected&&n===u.SessionStateControllerAction.Disconnect)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connected&&n===u.SessionStateControllerAction.Reconnect)this.transition(m.SessionStateControllerState.Connecting,n);else if(t===m.SessionStateControllerState.Connected&&n===u.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connected&&n===u.SessionStateControllerAction.Update)this.transition(m.SessionStateControllerState.Updating,n);else if(t===m.SessionStateControllerState.Updating&&n===u.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Updating&&n===u.SessionStateControllerAction.FinishUpdating)this.transition(m.SessionStateControllerState.Connected,n);else if(t===m.SessionStateControllerState.Disconnecting&&n===u.SessionStateControllerAction.FinishDisconnecting)this.transition(m.SessionStateControllerState.NotConnected,n);else return this.canDefer(n)?(this.logger.info(`deferring transition from ${m.SessionStateControllerState[this.currentState]} with ${u.SessionStateControllerAction[n]}`),this.deferAction(n,e),h.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${m.SessionStateControllerState[this.currentState]} with ${u.SessionStateControllerAction[n]}`),h.SessionStateControllerTransitionResult.NoTransitionAvailable);try{e()}catch(i){return this.logger.error(`error during state ${m.SessionStateControllerState[this.currentState]} with action ${u.SessionStateControllerAction[n]}: ${i}`),this.logger.info(`rolling back transition to ${m.SessionStateControllerState[t]}`),this.currentState=t,h.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),h.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(n,e){this.logger.info(`transitioning from ${m.SessionStateControllerState[this.currentState]} to ${m.SessionStateControllerState[n]} with ${u.SessionStateControllerAction[e]}`),this.currentState=n}deferPriority(n){switch(n){case u.SessionStateControllerAction.Disconnect:return g.SessionStateControllerDeferPriority.VeryHigh;case u.SessionStateControllerAction.Fail:return g.SessionStateControllerDeferPriority.High;case u.SessionStateControllerAction.Reconnect:return g.SessionStateControllerDeferPriority.Medium;case u.SessionStateControllerAction.Update:return g.SessionStateControllerDeferPriority.Low;default:return g.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(n,e){this.deferredAction!==null&&this.deferPriority(this.deferredAction)>this.deferPriority(n)||(this.deferredAction=n,this.deferredWork=e)}canDefer(n){return this.deferPriority(n)!==g.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===m.SessionStateControllerState.Connecting||this.currentState===m.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const n=this.deferredAction,e=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${u.SessionStateControllerAction[n]}`),this.perform(n,e)!==h.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${u.SessionStateControllerAction[n]} in state ${m.SessionStateControllerState[this.currentState]}`)}constructor(n){this.logger=n,this.currentState=m.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}},"DefaultSessionStateController");l.default=a},308334:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerAction=void 0;var f;(function(u){u[u.Connect=0]="Connect",u[u.FinishConnecting=1]="FinishConnecting",u[u.Update=2]="Update",u[u.FinishUpdating=3]="FinishUpdating",u[u.Reconnect=4]="Reconnect",u[u.Disconnect=5]="Disconnect",u[u.Fail=6]="Fail",u[u.FinishDisconnecting=7]="FinishDisconnecting"})(f=l.SessionStateControllerAction||(l.SessionStateControllerAction={})),l.default=f},626566:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerDeferPriority=void 0;var f;(function(u){u[u.DoNotDefer=0]="DoNotDefer",u[u.Low=1]="Low",u[u.Medium=2]="Medium",u[u.High=3]="High",u[u.VeryHigh=4]="VeryHigh"})(f=l.SessionStateControllerDeferPriority||(l.SessionStateControllerDeferPriority={})),l.default=f},773215:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerState=void 0;var f;(function(u){u[u.NotConnected=0]="NotConnected",u[u.Connecting=1]="Connecting",u[u.Connected=2]="Connected",u[u.Updating=3]="Updating",u[u.Disconnecting=4]="Disconnecting"})(f=l.SessionStateControllerState||(l.SessionStateControllerState={})),l.default=f},598410:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerTransitionResult=void 0;var f;(function(u){u[u.Transitioned=0]="Transitioned",u[u.NoTransitionAvailable=1]="NoTransitionAvailable",u[u.DeferredTransition=2]="DeferredTransition",u[u.TransitionFailed=3]="TransitionFailed"})(f=l.SessionStateControllerTransitionResult||(l.SessionStateControllerTransitionResult={})),l.default=f},790095:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(421537)),m=u(f(20202)),h=f(50380),a=f(450804),r=u(f(508338)),n=u(f(716696)),e=u(f(804417)),t=f(849539),i=u(f(409586)),o=u(f(576442));let c=s(class Ja{registerObserver(S){this.logger.debug(()=>"registering signaling client observer"),this.observerQueue.add(S)}removeObserver(S){this.logger.debug(()=>"removing signaling client observer"),this.observerQueue.delete(S)}openConnection(S){this.logger.info("adding connection request to queue: "+S.url()),this.connectionRequestQueue.push(S),this.closeConnection()}pingPong(S){this.logger.debug(()=>"sending ping");const d=h.SdkSignalFrame.create();return d.type=h.SdkSignalFrame.Type.PING_PONG,d.pingPong=S,this.sendMessage(d),d.timestampMs}join(S){this.logger.info("sending join");const d=h.SdkJoinFrame.create();d.protocolVersion=2,d.flags=h.SdkJoinFlags.HAS_STREAM_UPDATE;const y=new g.default,E={platformName:y.name(),platformVersion:y.version(),clientSource:r.default.sdkName,chimeSdkVersion:r.default.sdkVersion,clientUtcOffset:a.getFormattedOffset(new Date().getTimezoneOffset())};if(S.applicationMetadata){const{appName:A,appVersion:L}=S.applicationMetadata;E.appName=A,E.appVersion=L}d.clientDetails=h.SdkClientDetails.create(E),d.audioSessionId=this.audioSessionId,d.wantsCompressedSdp=Ja.CLIENT_SUPPORTS_COMPRESSION,d.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,d.serverSideNetworkAdaption=t.convertServerSideNetworkAdaptionEnumToSignaled(S.serverSideNetworkAdaption),d.supportedServerSideNetworkAdaptions=S.supportedServerSideNetworkAdaptions.map(t.convertServerSideNetworkAdaptionEnumToSignaled),d.wantsAllTemporalLayersInIndex=S.wantsAllTemporalLayersInIndex;const I=h.SdkSignalFrame.create();I.type=h.SdkSignalFrame.Type.JOIN,I.join=d,this.sendMessage(I)}subscribe(S){const d=h.SdkSubscribeFrame.create();if(d.sendStreams=[],d.sdpOffer=S.sdpOffer,S.connectionTypeHasVideo&&(d.receiveStreamIds=S.receiveStreamIds),S.audioHost&&(d.audioCheckin=S.audioCheckin,d.audioHost=S.audioHost,d.audioMuted=S.audioMuted,!S.audioCheckin)){const E=h.SdkStreamDescriptor.create();E.mediaType=h.SdkStreamMediaType.AUDIO,E.trackLabel="AmazonChimeExpressAudio",E.attendeeId=S.attendeeId,E.streamId=1,E.groupId=1,E.framerate=15,E.maxBitrateKbps=600,E.avgBitrateBps=4e5,d.sendStreams.push(E)}if(d.compressedSdpOffer=S.compressedSdpOffer,d.duplex=h.SdkStreamServiceType.RX,S.localVideoEnabled){d.duplex=h.SdkStreamServiceType.DUPLEX;for(let E=0;E<S.videoStreamDescriptions.length;E++){const I=S.videoStreamDescriptions[E].clone();I.attendeeId=S.attendeeId,d.sendStreams.push(I.toStreamDescriptor())}}S.videoSubscriptionConfiguration.length>0&&(d.videoSubscriptionConfiguration=S.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const y=h.SdkSignalFrame.create();y.type=h.SdkSignalFrame.Type.SUBSCRIBE,y.sub=d,this.sendMessage(y)}remoteVideoUpdate(S,d){const y=h.SdkRemoteVideoUpdateFrame.create();y.addedOrUpdatedVideoSubscriptions=S.map(this.convertSignalingClientVideoSubscriptionConfiguration),y.removedVideoSubscriptionMids=d;const E=h.SdkSignalFrame.create();E.type=h.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,E.remoteVideoUpdate=y,this.sendMessage(E)}convertSignalingClientVideoSubscriptionConfiguration(S){const d=new h.SdkVideoSubscriptionConfiguration;switch(d.mid=S.mid,d.attendeeId=S.attendeeId,d.streamId=S.streamId,d.groupId=S.groupId,d.priority=S.priority,d.targetBitrateKbps=S.targetBitrateKbps,S.qualityAdaptationPreference){case n.default.Balanced:d.qualityAdaptationPreference=h.SdkVideoQualityAdaptationPreference.BALANCED;break;case n.default.MaintainFramerate:d.qualityAdaptationPreference=h.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case n.default.MaintainResolution:d.qualityAdaptationPreference=h.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:d.qualityAdaptationPreference=h.SdkVideoQualityAdaptationPreference.BALANCED}return d}leave(){const S=h.SdkSignalFrame.create();S.type=h.SdkSignalFrame.Type.LEAVE,S.leave=h.SdkLeaveFrame.create(),this.sendMessage(S),this.logger.debug(()=>"sent leave")}sendClientMetrics(S){const d=h.SdkSignalFrame.create();d.type=h.SdkSignalFrame.Type.CLIENT_METRIC,d.clientMetric=S,this.sendMessage(d)}sendDataMessage(S){const d=h.SdkSignalFrame.create();d.type=h.SdkSignalFrame.Type.DATA_MESSAGE,d.dataMessage=S,this.sendMessage(d)}closeConnection(){var S,d;if(this.webSocket.readyState()!==e.default.None&&this.webSocket.readyState()!==e.default.Closed){this.isClosing=!0,this.sendEvent(new i.default(this,o.default.WebSocketClosing,null));const y=new m.default(Ja.CLOSE_EVENT_TIMEOUT_MS),E=s(I=>{var A,L;(L=(A=this.webSocket).removeEventListener)===null||L===void 0||L.call(A,"close",E),y.stop(),this.closeEventHandler(I)},"handler");(d=(S=this.webSocket).removeEventListener)===null||d===void 0||d.call(S,"close",this.closeEventHandler),this.webSocket.addEventListener("close",E),y.start(()=>{E(new CloseEvent("close",{wasClean:!1,code:1006,reason:"",bubbles:!1}))}),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===e.default.Open&&!this.isClosing&&this.wasOpened}mute(S){const d=h.SdkSignalFrame.create();d.type=h.SdkSignalFrame.Type.AUDIO_CONTROL;const y=h.SdkAudioControlFrame.create();y.muted=S,d.audioControl=y,this.sendMessage(d)}pause(S){const d=h.SdkSignalFrame.create();d.type=h.SdkSignalFrame.Type.PAUSE,d.pause=h.SdkPauseResumeFrame.create(),d.pause.streamIds=S,this.sendMessage(d)}resume(S){const d=h.SdkSignalFrame.create();d.type=h.SdkSignalFrame.Type.RESUME,d.pause=h.SdkPauseResumeFrame.create(),d.pause.streamIds=S,this.sendMessage(d)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(S){S.timestampMs=Date.now(),this.logger.debug(()=>`sending: ${JSON.stringify(S)}`);const d=this.prependWithFrameTypeRTC(h.SdkSignalFrame.encode(S).finish());if(this.ready()){if(!this.webSocket.send(d)){this.sendEvent(new i.default(this,o.default.WebSocketSendMessageFailure,null));return}this.sendEvent(new i.default(this,o.default.WebSocketSentMessage,null))}else this.sendEvent(new i.default(this,o.default.WebSocketSkippedMessage,null))}receiveMessage(S){let d;try{d=h.SdkSignalFrame.decode(S)}catch{this.logger.info(`failed to decode: ${S}`),this.sendEvent(new i.default(this,o.default.ProtocolDecodeFailure,null));return}this.logger.debug(()=>`received: ${JSON.stringify(d)}`),this.webSocket.readyState()===e.default.Open?this.sendEvent(new i.default(this,o.default.ReceivedSignalFrame,d)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(d)}`)}stripFrameTypeRTC(S){const d=S[0];return d!==Ja.FRAME_TYPE_RTC&&d!==2&&this.logger.warn(`expected FrameTypeRTC for message but got ${d}`),S.slice(1)}prependWithFrameTypeRTC(S){const d=new Uint8Array(S.length+1);return d[0]=Ja.FRAME_TYPE_RTC,d.set(S,1),d}serviceConnectionRequestQueue(){if(this.connectionRequestQueue.length===0){this.logger.info("no connection requests to service");return}const S=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${S.url()}`),this.isClosing=!1,this.webSocket.create(S.url(),S.protocols()),this.setUpEventListeners(),this.sendEvent(new i.default(this,o.default.WebSocketConnecting,null))}sendEvent(S){switch(S.type){case o.default.WebSocketMessage:case o.default.ReceivedSignalFrame:case o.default.WebSocketSentMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}`);break;case o.default.WebSocketSkippedMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}, websocket state=${e.default[this.webSocket.readyState()]}`);break;default:this.logger.info(`notifying event: ${o.default[S.type]}`);break}for(const d of this.observerQueue)d.handleSignalingClientEvent(S)}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new i.default(this,o.default.WebSocketOpen,null))}),this.webSocket.addEventListener("message",S=>{this.sendEvent(new i.default(this,o.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(S.data)))}),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",()=>{if(this.isClosing&&!this.wasOpened){this.logger.info("ignoring error closing signaling while connecting");return}this.wasOpened?(this.logger.error("received error while connected"),this.sendEvent(new i.default(this,o.default.WebSocketError,null))):(this.logger.error("failed to connect"),this.sendEvent(new i.default(this,o.default.WebSocketFailed,null)))})}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const S=f.g;S.window&&S.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const S=f.g;S.window&&S.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const S=new Uint32Array(1);return a.getRandomValues(S),S[0]}promoteToPrimaryMeeting(S){const d=h.SdkMeetingSessionCredentials.create();d.attendeeId=S.attendeeId,d.externalUserId=S.externalUserId,d.joinToken=S.joinToken;const y=h.SdkPrimaryMeetingJoinFrame.create();y.credentials=d;const E=h.SdkSignalFrame.create();E.type=h.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,E.primaryMeetingJoin=y,this.sendMessage(E)}demoteFromPrimaryMeeting(){const S=h.SdkPrimaryMeetingLeaveFrame.create(),d=h.SdkSignalFrame.create();d.type=h.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,d.primaryMeetingLeave=S,this.sendMessage(d)}constructor(S,d){this.webSocket=S,this.logger=d,this.unloadHandler=null,this.closeEventHandler=y=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new i.default(this,o.default.WebSocketClosed,null,y.code,y.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug(()=>"signaling client init"),this.audioSessionId=this.generateNewAudioSessionId()}},"DefaultSignalingClient");l.default=c,c.FRAME_TYPE_RTC=5,c.CLOSE_EVENT_TIMEOUT_MS=2e3,c.CLIENT_SUPPORTS_COMPRESSION=!0},849539:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertServerSideNetworkAdaptionEnumToSignaled=l.convertServerSideNetworkAdaptionEnumFromSignaled=l.serverSideNetworkAdaptionIsNoneOrDefault=l.ServerSideNetworkAdaption=void 0;const u=f(50380);var g;(function(r){r[r.Default=0]="Default",r[r.None=1]="None",r[r.BandwidthProbing=2]="BandwidthProbing",r[r.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"})(g=l.ServerSideNetworkAdaption||(l.ServerSideNetworkAdaption={})),l.default=g;function m(r){return r===g.None||r===g.Default}s(m,"serverSideNetworkAdaptionIsNoneOrDefault"),l.serverSideNetworkAdaptionIsNoneOrDefault=m;function h(r){switch(r){case u.SdkServerSideNetworkAdaption.DEFAULT:return g.Default;case u.SdkServerSideNetworkAdaption.NONE:return g.None;case u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return g.BandwidthProbing;case u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return g.BandwidthProbingAndRemoteVideoQualityAdaption}}s(h,"convertServerSideNetworkAdaptionEnumFromSignaled"),l.convertServerSideNetworkAdaptionEnumFromSignaled=h;function a(r){switch(r){case g.Default:return u.SdkServerSideNetworkAdaption.DEFAULT;case g.None:return u.SdkServerSideNetworkAdaption.NONE;case g.BandwidthProbing:return u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case g.BandwidthProbingAndRemoteVideoQualityAdaption:return u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}s(a,"convertServerSideNetworkAdaptionEnumToSignaled"),l.convertServerSideNetworkAdaptionEnumToSignaled=a},112059:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}constructor(g,m){this.signalingURL=g,this.joinToken=m}},"SignalingClientConnectionRequest");l.default=f},409586:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(576442));let m=s(class{isConnectionTerminated(){switch(this.type){case g.default.WebSocketFailed:case g.default.WebSocketError:case g.default.WebSocketClosing:case g.default.WebSocketClosed:return!0;default:return!1}}constructor(a,r,n,e,t){this.client=a,this.type=r,this.message=n,this.closeCode=e,this.closeReason=t,this.timestampMs=Date.now()}},"SignalingClientEvent");l.default=m},576442:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SignalingClientEventType=void 0;var f;(function(u){u[u.WebSocketConnecting=0]="WebSocketConnecting",u[u.WebSocketOpen=1]="WebSocketOpen",u[u.WebSocketError=2]="WebSocketError",u[u.WebSocketClosing=3]="WebSocketClosing",u[u.WebSocketClosed=4]="WebSocketClosed",u[u.WebSocketFailed=5]="WebSocketFailed",u[u.WebSocketMessage=6]="WebSocketMessage",u[u.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",u[u.WebSocketSentMessage=8]="WebSocketSentMessage",u[u.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",u[u.ReceivedSignalFrame=10]="ReceivedSignalFrame",u[u.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"})(f=l.SignalingClientEventType||(l.SignalingClientEventType={})),l.default=f},228784:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(849539));let m=s(class{constructor(a){this.applicationMetadata=a,this.serverSideNetworkAdaption=g.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}},"SignalingClientJoin");l.default=m},935214:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(g,m,h,a,r,n,e,t,i,o){this.attendeeId=g,this.sdpOffer=m,this.audioHost=h,this.audioMuted=a,this.audioCheckin=r,this.receiveStreamIds=n,this.localVideoEnabled=e,this.videoStreamDescriptions=t,this.connectionTypeHasVideo=i,this.compressedSdpOffer=o,this.videoSubscriptionConfiguration=[]}},"SignalingClientSubscribe");l.default=f},838552:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{equals(g){return g!==void 0&&this.mid===g.mid&&this.attendeeId===g.attendeeId&&this.streamId===g.streamId&&this.groupId===g.groupId&&this.priority===g.priority&&this.targetBitrateKbps===g.targetBitrateKbps&&this.qualityAdaptationPreference===g.qualityAdaptationPreference}},"SignalingClientVideoSubscriptionConfiguration");l.default=f},50380:(U,l,f)=>{"use strict";var u=f(413863),g=u.Reader,m=u.Writer,h=u.util,a=u.roots.default||(u.roots.default={});a.SdkSignalFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSignalFrame"),r.prototype.timestampMs=h.Long?h.Long.fromBits(0,0,!0):0,r.prototype.type=1,r.prototype.error=null,r.prototype.join=null,r.prototype.joinack=null,r.prototype.sub=null,r.prototype.suback=null,r.prototype.index=null,r.prototype.pause=null,r.prototype.leave=null,r.prototype.leaveAck=null,r.prototype.bitrates=null,r.prototype.audioControl=null,r.prototype.audioMetadata=null,r.prototype.audioStreamIdInfo=null,r.prototype.pingPong=null,r.prototype.audioStatus=null,r.prototype.clientMetric=null,r.prototype.dataMessage=null,r.prototype.remoteVideoUpdate=null,r.prototype.primaryMeetingJoin=null,r.prototype.primaryMeetingJoinAck=null,r.prototype.primaryMeetingLeave=null,r.prototype.notification=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&a.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),e.join!=null&&Object.hasOwnProperty.call(e,"join")&&a.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),e.joinack!=null&&Object.hasOwnProperty.call(e,"joinack")&&a.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),e.sub!=null&&Object.hasOwnProperty.call(e,"sub")&&a.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),e.suback!=null&&Object.hasOwnProperty.call(e,"suback")&&a.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&a.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),e.pause!=null&&Object.hasOwnProperty.call(e,"pause")&&a.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),e.leave!=null&&Object.hasOwnProperty.call(e,"leave")&&a.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),e.leaveAck!=null&&Object.hasOwnProperty.call(e,"leaveAck")&&a.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),e.bitrates!=null&&Object.hasOwnProperty.call(e,"bitrates")&&a.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),e.audioControl!=null&&Object.hasOwnProperty.call(e,"audioControl")&&a.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),e.audioMetadata!=null&&Object.hasOwnProperty.call(e,"audioMetadata")&&a.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),e.audioStreamIdInfo!=null&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&a.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),e.pingPong!=null&&Object.hasOwnProperty.call(e,"pingPong")&&a.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&a.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),e.clientMetric!=null&&Object.hasOwnProperty.call(e,"clientMetric")&&a.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),e.dataMessage!=null&&Object.hasOwnProperty.call(e,"dataMessage")&&a.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),e.remoteVideoUpdate!=null&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&a.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),e.primaryMeetingJoin!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&a.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),e.primaryMeetingJoinAck!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&a.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),e.primaryMeetingLeave!=null&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&a.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),e.notification!=null&&Object.hasOwnProperty.call(e,"notification")&&a.SdkNotificationFrame.encode(e.notification,t.uint32(282).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSignalFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.timestampMs=e.uint64();break}case 2:{o.type=e.int32();break}case 3:{o.error=a.SdkErrorFrame.decode(e,e.uint32());break}case 4:{o.join=a.SdkJoinFrame.decode(e,e.uint32());break}case 5:{o.joinack=a.SdkJoinAckFrame.decode(e,e.uint32());break}case 6:{o.sub=a.SdkSubscribeFrame.decode(e,e.uint32());break}case 7:{o.suback=a.SdkSubscribeAckFrame.decode(e,e.uint32());break}case 8:{o.index=a.SdkIndexFrame.decode(e,e.uint32());break}case 10:{o.pause=a.SdkPauseResumeFrame.decode(e,e.uint32());break}case 11:{o.leave=a.SdkLeaveFrame.decode(e,e.uint32());break}case 12:{o.leaveAck=a.SdkLeaveAckFrame.decode(e,e.uint32());break}case 14:{o.bitrates=a.SdkBitrateFrame.decode(e,e.uint32());break}case 17:{o.audioControl=a.SdkAudioControlFrame.decode(e,e.uint32());break}case 18:{o.audioMetadata=a.SdkAudioMetadataFrame.decode(e,e.uint32());break}case 19:{o.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break}case 20:{o.pingPong=a.SdkPingPongFrame.decode(e,e.uint32());break}case 21:{o.audioStatus=a.SdkAudioStatusFrame.decode(e,e.uint32());break}case 22:{o.clientMetric=a.SdkClientMetricFrame.decode(e,e.uint32());break}case 23:{o.dataMessage=a.SdkDataMessageFrame.decode(e,e.uint32());break}case 25:{o.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break}case 26:{o.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break}case 27:{o.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break}case 28:{o.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break}case 35:{o.notification=a.SdkNotificationFrame.decode(e,e.uint32());break}default:e.skipType(c&7);break}}if(!o.hasOwnProperty("timestampMs"))throw h.ProtocolError("missing required 'timestampMs'",{instance:o});if(!o.hasOwnProperty("type"))throw h.ProtocolError("missing required 'type'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(!h.isInteger(e.timestampMs)&&!(e.timestampMs&&h.isInteger(e.timestampMs.low)&&h.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:break}if(e.error!=null&&e.hasOwnProperty("error")){var t=a.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(e.join!=null&&e.hasOwnProperty("join")){var t=a.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(e.joinack!=null&&e.hasOwnProperty("joinack")){var t=a.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(e.sub!=null&&e.hasOwnProperty("sub")){var t=a.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(e.suback!=null&&e.hasOwnProperty("suback")){var t=a.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(e.index!=null&&e.hasOwnProperty("index")){var t=a.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(e.pause!=null&&e.hasOwnProperty("pause")){var t=a.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(e.leave!=null&&e.hasOwnProperty("leave")){var t=a.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(e.leaveAck!=null&&e.hasOwnProperty("leaveAck")){var t=a.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){var t=a.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(e.audioControl!=null&&e.hasOwnProperty("audioControl")){var t=a.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")){var t=a.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")){var t=a.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(e.pingPong!=null&&e.hasOwnProperty("pingPong")){var t=a.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(e.audioStatus!=null&&e.hasOwnProperty("audioStatus")){var t=a.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(e.clientMetric!=null&&e.hasOwnProperty("clientMetric")){var t=a.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(e.dataMessage!=null&&e.hasOwnProperty("dataMessage")){var t=a.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")){var t=a.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")){var t=a.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")){var t=a.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")){var t=a.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}if(e.notification!=null&&e.hasOwnProperty("notification")){var t=a.SdkNotificationFrame.verify(e.notification);if(t)return"notification."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkSignalFrame)return e;var t=new a.SdkSignalFrame;switch(e.timestampMs!=null&&(h.Long?(t.timestampMs=h.Long.fromValue(e.timestampMs)).unsigned=!0:typeof e.timestampMs=="string"?t.timestampMs=parseInt(e.timestampMs,10):typeof e.timestampMs=="number"?t.timestampMs=e.timestampMs:typeof e.timestampMs=="object"&&(t.timestampMs=new h.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break;case"NOTIFICATION":case 34:t.type=34;break}if(e.error!=null){if(typeof e.error!="object")throw TypeError(".SdkSignalFrame.error: object expected");t.error=a.SdkErrorFrame.fromObject(e.error)}if(e.join!=null){if(typeof e.join!="object")throw TypeError(".SdkSignalFrame.join: object expected");t.join=a.SdkJoinFrame.fromObject(e.join)}if(e.joinack!=null){if(typeof e.joinack!="object")throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=a.SdkJoinAckFrame.fromObject(e.joinack)}if(e.sub!=null){if(typeof e.sub!="object")throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=a.SdkSubscribeFrame.fromObject(e.sub)}if(e.suback!=null){if(typeof e.suback!="object")throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=a.SdkSubscribeAckFrame.fromObject(e.suback)}if(e.index!=null){if(typeof e.index!="object")throw TypeError(".SdkSignalFrame.index: object expected");t.index=a.SdkIndexFrame.fromObject(e.index)}if(e.pause!=null){if(typeof e.pause!="object")throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=a.SdkPauseResumeFrame.fromObject(e.pause)}if(e.leave!=null){if(typeof e.leave!="object")throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=a.SdkLeaveFrame.fromObject(e.leave)}if(e.leaveAck!=null){if(typeof e.leaveAck!="object")throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=a.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(e.bitrates!=null){if(typeof e.bitrates!="object")throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=a.SdkBitrateFrame.fromObject(e.bitrates)}if(e.audioControl!=null){if(typeof e.audioControl!="object")throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=a.SdkAudioControlFrame.fromObject(e.audioControl)}if(e.audioMetadata!=null){if(typeof e.audioMetadata!="object")throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=a.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(e.audioStreamIdInfo!=null){if(typeof e.audioStreamIdInfo!="object")throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(e.pingPong!=null){if(typeof e.pingPong!="object")throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=a.SdkPingPongFrame.fromObject(e.pingPong)}if(e.audioStatus!=null){if(typeof e.audioStatus!="object")throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=a.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(e.clientMetric!=null){if(typeof e.clientMetric!="object")throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=a.SdkClientMetricFrame.fromObject(e.clientMetric)}if(e.dataMessage!=null){if(typeof e.dataMessage!="object")throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=a.SdkDataMessageFrame.fromObject(e.dataMessage)}if(e.remoteVideoUpdate!=null){if(typeof e.remoteVideoUpdate!="object")throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(e.primaryMeetingJoin!=null){if(typeof e.primaryMeetingJoin!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(e.primaryMeetingJoinAck!=null){if(typeof e.primaryMeetingJoinAck!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(e.primaryMeetingLeave!=null){if(typeof e.primaryMeetingLeave!="object")throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}if(e.notification!=null){if(typeof e.notification!="object")throw TypeError(".SdkSignalFrame.notification: object expected");t.notification=a.SdkNotificationFrame.fromObject(e.notification)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(h.Long){var o=new h.Long(0,0,!0);i.timestampMs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.timestampMs=t.longs===String?"0":0;i.type=t.enums===String?"JOIN":1,i.error=null,i.join=null,i.joinack=null,i.sub=null,i.suback=null,i.index=null,i.pause=null,i.leave=null,i.leaveAck=null,i.bitrates=null,i.audioControl=null,i.audioMetadata=null,i.audioStreamIdInfo=null,i.pingPong=null,i.audioStatus=null,i.clientMetric=null,i.dataMessage=null,i.remoteVideoUpdate=null,i.primaryMeetingJoin=null,i.primaryMeetingJoinAck=null,i.primaryMeetingLeave=null,i.notification=null}return e.timestampMs!=null&&e.hasOwnProperty("timestampMs")&&(typeof e.timestampMs=="number"?i.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:i.timestampMs=t.longs===String?h.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new h.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkSignalFrame.Type[e.type]===void 0?e.type:a.SdkSignalFrame.Type[e.type]:e.type),e.error!=null&&e.hasOwnProperty("error")&&(i.error=a.SdkErrorFrame.toObject(e.error,t)),e.join!=null&&e.hasOwnProperty("join")&&(i.join=a.SdkJoinFrame.toObject(e.join,t)),e.joinack!=null&&e.hasOwnProperty("joinack")&&(i.joinack=a.SdkJoinAckFrame.toObject(e.joinack,t)),e.sub!=null&&e.hasOwnProperty("sub")&&(i.sub=a.SdkSubscribeFrame.toObject(e.sub,t)),e.suback!=null&&e.hasOwnProperty("suback")&&(i.suback=a.SdkSubscribeAckFrame.toObject(e.suback,t)),e.index!=null&&e.hasOwnProperty("index")&&(i.index=a.SdkIndexFrame.toObject(e.index,t)),e.pause!=null&&e.hasOwnProperty("pause")&&(i.pause=a.SdkPauseResumeFrame.toObject(e.pause,t)),e.leave!=null&&e.hasOwnProperty("leave")&&(i.leave=a.SdkLeaveFrame.toObject(e.leave,t)),e.leaveAck!=null&&e.hasOwnProperty("leaveAck")&&(i.leaveAck=a.SdkLeaveAckFrame.toObject(e.leaveAck,t)),e.bitrates!=null&&e.hasOwnProperty("bitrates")&&(i.bitrates=a.SdkBitrateFrame.toObject(e.bitrates,t)),e.audioControl!=null&&e.hasOwnProperty("audioControl")&&(i.audioControl=a.SdkAudioControlFrame.toObject(e.audioControl,t)),e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")&&(i.audioMetadata=a.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")&&(i.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),e.pingPong!=null&&e.hasOwnProperty("pingPong")&&(i.pingPong=a.SdkPingPongFrame.toObject(e.pingPong,t)),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=a.SdkAudioStatusFrame.toObject(e.audioStatus,t)),e.clientMetric!=null&&e.hasOwnProperty("clientMetric")&&(i.clientMetric=a.SdkClientMetricFrame.toObject(e.clientMetric,t)),e.dataMessage!=null&&e.hasOwnProperty("dataMessage")&&(i.dataMessage=a.SdkDataMessageFrame.toObject(e.dataMessage,t)),e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")&&(i.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")&&(i.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")&&(i.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")&&(i.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),e.notification!=null&&e.hasOwnProperty("notification")&&(i.notification=a.SdkNotificationFrame.toObject(e.notification,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSignalFrame"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="JOIN"]=1,e[n[2]="JOIN_ACK"]=2,e[n[3]="SUBSCRIBE"]=3,e[n[4]="SUBSCRIBE_ACK"]=4,e[n[5]="INDEX"]=5,e[n[7]="PAUSE"]=7,e[n[8]="RESUME"]=8,e[n[9]="LEAVE"]=9,e[n[10]="LEAVE_ACK"]=10,e[n[13]="BITRATES"]=13,e[n[16]="AUDIO_CONTROL"]=16,e[n[17]="AUDIO_METADATA"]=17,e[n[18]="AUDIO_STREAM_ID_INFO"]=18,e[n[19]="PING_PONG"]=19,e[n[20]="AUDIO_STATUS"]=20,e[n[21]="CLIENT_METRIC"]=21,e[n[22]="DATA_MESSAGE"]=22,e[n[24]="REMOTE_VIDEO_UPDATE"]=24,e[n[25]="PRIMARY_MEETING_JOIN"]=25,e[n[26]="PRIMARY_MEETING_JOIN_ACK"]=26,e[n[27]="PRIMARY_MEETING_LEAVE"]=27,e[n[34]="NOTIFICATION"]=34,e}(),r}(),a.SdkErrorFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkErrorFrame"),r.prototype.status=0,r.prototype.description="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.status!=null&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),e.description!=null&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkErrorFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.status=e.uint32();break}case 2:{o.description=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.status!=null&&e.hasOwnProperty("status")&&!h.isInteger(e.status)?"status: integer expected":e.description!=null&&e.hasOwnProperty("description")&&!h.isString(e.description)?"description: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkErrorFrame)return e;var t=new a.SdkErrorFrame;return e.status!=null&&(t.status=e.status>>>0),e.description!=null&&(t.description=String(e.description)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.status=0,i.description=""),e.status!=null&&e.hasOwnProperty("status")&&(i.status=e.status),e.description!=null&&e.hasOwnProperty("description")&&(i.description=e.description),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkErrorFrame"},"getTypeUrl"),r}(),a.SdkJoinFlags=function(){var r={},n=Object.create(r);return n[r[2]="HAS_STREAM_UPDATE"]=2,n[r[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,n[r[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,n}(),a.SdkClientDetails=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkClientDetails"),r.prototype.appName="",r.prototype.appVersion="",r.prototype.deviceModel="",r.prototype.deviceMake="",r.prototype.platformName="",r.prototype.platformVersion="",r.prototype.clientSource="",r.prototype.chimeSdkVersion="",r.prototype.clientUtcOffset="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.appName!=null&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),e.appVersion!=null&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),e.deviceModel!=null&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),e.deviceMake!=null&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),e.platformName!=null&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),e.platformVersion!=null&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),e.clientSource!=null&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),e.chimeSdkVersion!=null&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),e.clientUtcOffset!=null&&Object.hasOwnProperty.call(e,"clientUtcOffset")&&t.uint32(74).string(e.clientUtcOffset),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkClientDetails;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.appName=e.string();break}case 2:{o.appVersion=e.string();break}case 3:{o.deviceModel=e.string();break}case 4:{o.deviceMake=e.string();break}case 5:{o.platformName=e.string();break}case 6:{o.platformVersion=e.string();break}case 7:{o.clientSource=e.string();break}case 8:{o.chimeSdkVersion=e.string();break}case 9:{o.clientUtcOffset=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.appName!=null&&e.hasOwnProperty("appName")&&!h.isString(e.appName)?"appName: string expected":e.appVersion!=null&&e.hasOwnProperty("appVersion")&&!h.isString(e.appVersion)?"appVersion: string expected":e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&!h.isString(e.deviceModel)?"deviceModel: string expected":e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&!h.isString(e.deviceMake)?"deviceMake: string expected":e.platformName!=null&&e.hasOwnProperty("platformName")&&!h.isString(e.platformName)?"platformName: string expected":e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&!h.isString(e.platformVersion)?"platformVersion: string expected":e.clientSource!=null&&e.hasOwnProperty("clientSource")&&!h.isString(e.clientSource)?"clientSource: string expected":e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&!h.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&!h.isString(e.clientUtcOffset)?"clientUtcOffset: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkClientDetails)return e;var t=new a.SdkClientDetails;return e.appName!=null&&(t.appName=String(e.appName)),e.appVersion!=null&&(t.appVersion=String(e.appVersion)),e.deviceModel!=null&&(t.deviceModel=String(e.deviceModel)),e.deviceMake!=null&&(t.deviceMake=String(e.deviceMake)),e.platformName!=null&&(t.platformName=String(e.platformName)),e.platformVersion!=null&&(t.platformVersion=String(e.platformVersion)),e.clientSource!=null&&(t.clientSource=String(e.clientSource)),e.chimeSdkVersion!=null&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),e.clientUtcOffset!=null&&(t.clientUtcOffset=String(e.clientUtcOffset)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.appName="",i.appVersion="",i.deviceModel="",i.deviceMake="",i.platformName="",i.platformVersion="",i.clientSource="",i.chimeSdkVersion="",i.clientUtcOffset=""),e.appName!=null&&e.hasOwnProperty("appName")&&(i.appName=e.appName),e.appVersion!=null&&e.hasOwnProperty("appVersion")&&(i.appVersion=e.appVersion),e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&(i.deviceModel=e.deviceModel),e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&(i.deviceMake=e.deviceMake),e.platformName!=null&&e.hasOwnProperty("platformName")&&(i.platformName=e.platformName),e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&(i.platformVersion=e.platformVersion),e.clientSource!=null&&e.hasOwnProperty("clientSource")&&(i.clientSource=e.clientSource),e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&(i.chimeSdkVersion=e.chimeSdkVersion),e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&(i.clientUtcOffset=e.clientUtcOffset),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientDetails"},"getTypeUrl"),r}(),a.SdkServerSideNetworkAdaption=function(){var r={},n=Object.create(r);return n[r[1]="DEFAULT"]=1,n[r[2]="NONE"]=2,n[r[3]="BANDWIDTH_PROBING"]=3,n[r[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,n}(),a.SdkJoinFrame=function(){function r(n){if(this.supportedServerSideNetworkAdaptions=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkJoinFrame"),r.prototype.protocolVersion=2,r.prototype.maxNumOfVideos=0,r.prototype.flags=0,r.prototype.clientDetails=null,r.prototype.audioSessionId=h.Long?h.Long.fromBits(0,0,!0):0,r.prototype.wantsCompressedSdp=!1,r.prototype.serverSideNetworkAdaption=1,r.prototype.supportedServerSideNetworkAdaptions=h.emptyArray,r.prototype.wantsAllTemporalLayersInIndex=!1,r.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.protocolVersion!=null&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),e.maxNumOfVideos!=null&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),e.flags!=null&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),e.clientDetails!=null&&Object.hasOwnProperty.call(e,"clientDetails")&&a.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),e.audioSessionId!=null&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions!=null&&e.supportedServerSideNetworkAdaptions.length)for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[i]);return e.wantsAllTemporalLayersInIndex!=null&&Object.hasOwnProperty.call(e,"wantsAllTemporalLayersInIndex")&&t.uint32(96).bool(e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&Object.hasOwnProperty.call(e,"disablePeriodicKeyframeRequestOnContentSender")&&t.uint32(104).bool(e.disablePeriodicKeyframeRequestOnContentSender),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkJoinFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.protocolVersion=e.uint32();break}case 2:{o.maxNumOfVideos=e.uint32();break}case 3:{o.flags=e.uint32();break}case 4:{o.clientDetails=a.SdkClientDetails.decode(e,e.uint32());break}case 6:{o.audioSessionId=e.uint64();break}case 7:{o.wantsCompressedSdp=e.bool();break}case 10:{o.serverSideNetworkAdaption=e.int32();break}case 11:{if(o.supportedServerSideNetworkAdaptions&&o.supportedServerSideNetworkAdaptions.length||(o.supportedServerSideNetworkAdaptions=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)o.supportedServerSideNetworkAdaptions.push(e.int32());else o.supportedServerSideNetworkAdaptions.push(e.int32());break}case 12:{o.wantsAllTemporalLayersInIndex=e.bool();break}case 13:{o.disablePeriodicKeyframeRequestOnContentSender=e.bool();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&!h.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&!h.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(e.flags!=null&&e.hasOwnProperty("flags")&&!h.isInteger(e.flags))return"flags: integer expected";if(e.clientDetails!=null&&e.hasOwnProperty("clientDetails")){var t=a.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&!h.isInteger(e.audioSessionId)&&!(e.audioSessionId&&h.isInteger(e.audioSessionId.low)&&h.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}if(e.supportedServerSideNetworkAdaptions!=null&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)switch(e.supportedServerSideNetworkAdaptions[i]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:break}}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&typeof e.wantsAllTemporalLayersInIndex!="boolean"?"wantsAllTemporalLayersInIndex: boolean expected":e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&typeof e.disablePeriodicKeyframeRequestOnContentSender!="boolean"?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkJoinFrame)return e;var t=new a.SdkJoinFrame;if(e.protocolVersion!=null&&(t.protocolVersion=e.protocolVersion>>>0),e.maxNumOfVideos!=null&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),e.flags!=null&&(t.flags=e.flags>>>0),e.clientDetails!=null){if(typeof e.clientDetails!="object")throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=a.SdkClientDetails.fromObject(e.clientDetails)}switch(e.audioSessionId!=null&&(h.Long?(t.audioSessionId=h.Long.fromValue(e.audioSessionId)).unsigned=!0:typeof e.audioSessionId=="string"?t.audioSessionId=parseInt(e.audioSessionId,10):typeof e.audioSessionId=="number"?t.audioSessionId=e.audioSessionId:typeof e.audioSessionId=="object"&&(t.audioSessionId=new h.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.serverSideNetworkAdaption){default:if(typeof e.serverSideNetworkAdaption=="number"){t.serverSideNetworkAdaption=e.serverSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.serverSideNetworkAdaption=4;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)switch(e.supportedServerSideNetworkAdaptions[i]){default:if(typeof e.supportedServerSideNetworkAdaptions[i]=="number"){t.supportedServerSideNetworkAdaptions[i]=e.supportedServerSideNetworkAdaptions[i];break}case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[i]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[i]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[i]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.supportedServerSideNetworkAdaptions[i]=4;break}}return e.wantsAllTemporalLayersInIndex!=null&&(t.wantsAllTemporalLayersInIndex=Boolean(e.wantsAllTemporalLayersInIndex)),e.disablePeriodicKeyframeRequestOnContentSender!=null&&(t.disablePeriodicKeyframeRequestOnContentSender=Boolean(e.disablePeriodicKeyframeRequestOnContentSender)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.supportedServerSideNetworkAdaptions=[]),t.defaults){if(i.protocolVersion=2,i.maxNumOfVideos=0,i.flags=0,i.clientDetails=null,h.Long){var o=new h.Long(0,0,!0);i.audioSessionId=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.audioSessionId=t.longs===String?"0":0;i.wantsCompressedSdp=!1,i.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1,i.wantsAllTemporalLayersInIndex=!1,i.disablePeriodicKeyframeRequestOnContentSender=!1}if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&(i.protocolVersion=e.protocolVersion),e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&(i.maxNumOfVideos=e.maxNumOfVideos),e.flags!=null&&e.hasOwnProperty("flags")&&(i.flags=e.flags),e.clientDetails!=null&&e.hasOwnProperty("clientDetails")&&(i.clientDetails=a.SdkClientDetails.toObject(e.clientDetails,t)),e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&(typeof e.audioSessionId=="number"?i.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:i.audioSessionId=t.longs===String?h.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new h.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(i.wantsCompressedSdp=e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption")&&(i.serverSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]===void 0?e.serverSideNetworkAdaption:a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){i.supportedServerSideNetworkAdaptions=[];for(var c=0;c<e.supportedServerSideNetworkAdaptions.length;++c)i.supportedServerSideNetworkAdaptions[c]=t.enums===String?a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[c]]===void 0?e.supportedServerSideNetworkAdaptions[c]:a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[c]]:e.supportedServerSideNetworkAdaptions[c]}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&(i.wantsAllTemporalLayersInIndex=e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(i.disablePeriodicKeyframeRequestOnContentSender=e.disablePeriodicKeyframeRequestOnContentSender),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinFrame"},"getTypeUrl"),r}(),a.SdkJoinAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkJoinAckFrame"),r.prototype.turnCredentials=null,r.prototype.videoSubscriptionLimit=0,r.prototype.wantsCompressedSdp=!1,r.prototype.defaultServerSideNetworkAdaption=1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.turnCredentials!=null&&Object.hasOwnProperty.call(e,"turnCredentials")&&a.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),e.videoSubscriptionLimit!=null&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkJoinAckFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.turnCredentials=a.SdkTurnCredentials.decode(e,e.uint32());break}case 2:{o.videoSubscriptionLimit=e.uint32();break}case 3:{o.wantsCompressedSdp=e.bool();break}case 4:{o.defaultServerSideNetworkAdaption=e.int32();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")){var t=a.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&!h.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkJoinAckFrame)return e;var t=new a.SdkJoinAckFrame;if(e.turnCredentials!=null){if(typeof e.turnCredentials!="object")throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=a.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(e.videoSubscriptionLimit!=null&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){default:if(typeof e.defaultServerSideNetworkAdaption=="number"){t.defaultServerSideNetworkAdaption=e.defaultServerSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.defaultServerSideNetworkAdaption=4;break}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.turnCredentials=null,i.videoSubscriptionLimit=0,i.wantsCompressedSdp=!1,i.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")&&(i.turnCredentials=a.SdkTurnCredentials.toObject(e.turnCredentials,t)),e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&(i.videoSubscriptionLimit=e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(i.wantsCompressedSdp=e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(i.defaultServerSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]===void 0?e.defaultServerSideNetworkAdaption:a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinAckFrame"},"getTypeUrl"),r}(),a.SdkLeaveFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkLeaveFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkLeaveFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof a.SdkLeaveFrame?e:new a.SdkLeaveFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveFrame"},"getTypeUrl"),r}(),a.SdkLeaveAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkLeaveAckFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkLeaveAckFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof a.SdkLeaveAckFrame?e:new a.SdkLeaveAckFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveAckFrame"},"getTypeUrl"),r}(),a.SdkStreamServiceType=function(){var r={},n=Object.create(r);return n[r[1]="RX"]=1,n[r[2]="TX"]=2,n[r[3]="DUPLEX"]=3,n}(),a.SdkStreamMediaType=function(){var r={},n=Object.create(r);return n[r[1]="AUDIO"]=1,n[r[2]="VIDEO"]=2,n}(),a.SdkSubscribeFrame=function(){function r(n){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSubscribeFrame"),r.prototype.duplex=1,r.prototype.sendStreams=h.emptyArray,r.prototype.receiveStreamIds=h.emptyArray,r.prototype.sdpOffer="",r.prototype.audioHost="",r.prototype.audioCheckin=!1,r.prototype.audioMuted=!1,r.prototype.compressedSdpOffer=h.newBuffer([]),r.prototype.videoSubscriptionConfiguration=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.sendStreams!=null&&e.sendStreams.length)for(var i=0;i<e.sendStreams.length;++i)a.SdkStreamDescriptor.encode(e.sendStreams[i],t.uint32(18).fork()).ldelim();if(e.receiveStreamIds!=null&&e.receiveStreamIds.length)for(var i=0;i<e.receiveStreamIds.length;++i)t.uint32(24).uint32(e.receiveStreamIds[i]);if(e.sdpOffer!=null&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),e.audioHost!=null&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),e.audioCheckin!=null&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),e.audioMuted!=null&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),e.compressedSdpOffer!=null&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),e.videoSubscriptionConfiguration!=null&&e.videoSubscriptionConfiguration.length)for(var i=0;i<e.videoSubscriptionConfiguration.length;++i)a.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[i],t.uint32(74).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSubscribeFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.sendStreams&&o.sendStreams.length||(o.sendStreams=[]),o.sendStreams.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.receiveStreamIds&&o.receiveStreamIds.length||(o.receiveStreamIds=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)o.receiveStreamIds.push(e.uint32());else o.receiveStreamIds.push(e.uint32());break}case 4:{o.sdpOffer=e.string();break}case 5:{o.audioHost=e.string();break}case 6:{o.audioCheckin=e.bool();break}case 7:{o.audioMuted=e.bool();break}case 8:{o.compressedSdpOffer=e.bytes();break}case 9:{o.videoSubscriptionConfiguration&&o.videoSubscriptionConfiguration.length||(o.videoSubscriptionConfiguration=[]),o.videoSubscriptionConfiguration.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.sendStreams!=null&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var i=a.SdkStreamDescriptor.verify(e.sendStreams[t]);if(i)return"sendStreams."+i}}if(e.receiveStreamIds!=null&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(var t=0;t<e.receiveStreamIds.length;++t)if(!h.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&!h.isString(e.sdpOffer))return"sdpOffer: string expected";if(e.audioHost!=null&&e.hasOwnProperty("audioHost")&&!h.isString(e.audioHost))return"audioHost: string expected";if(e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&typeof e.audioCheckin!="boolean")return"audioCheckin: boolean expected";if(e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&typeof e.audioMuted!="boolean")return"audioMuted: boolean expected";if(e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&typeof e.compressedSdpOffer.length=="number"||h.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(e.videoSubscriptionConfiguration!=null&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(var t=0;t<e.videoSubscriptionConfiguration.length;++t){var i=a.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(i)return"videoSubscriptionConfiguration."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkSubscribeFrame)return e;var t=new a.SdkSubscribeFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var i=0;i<e.sendStreams.length;++i){if(typeof e.sendStreams[i]!="object")throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[i]=a.SdkStreamDescriptor.fromObject(e.sendStreams[i])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(var i=0;i<e.receiveStreamIds.length;++i)t.receiveStreamIds[i]=e.receiveStreamIds[i]>>>0}if(e.sdpOffer!=null&&(t.sdpOffer=String(e.sdpOffer)),e.audioHost!=null&&(t.audioHost=String(e.audioHost)),e.audioCheckin!=null&&(t.audioCheckin=Boolean(e.audioCheckin)),e.audioMuted!=null&&(t.audioMuted=Boolean(e.audioMuted)),e.compressedSdpOffer!=null&&(typeof e.compressedSdpOffer=="string"?h.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=h.newBuffer(h.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length>=0&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(var i=0;i<e.videoSubscriptionConfiguration.length;++i){if(typeof e.videoSubscriptionConfiguration[i]!="object")throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[i]=a.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sendStreams=[],i.receiveStreamIds=[],i.videoSubscriptionConfiguration=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpOffer="",i.audioHost="",i.audioCheckin=!1,i.audioMuted=!1,t.bytes===String?i.compressedSdpOffer="":(i.compressedSdpOffer=[],t.bytes!==Array&&(i.compressedSdpOffer=h.newBuffer(i.compressedSdpOffer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]===void 0?e.duplex:a.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){i.sendStreams=[];for(var o=0;o<e.sendStreams.length;++o)i.sendStreams[o]=a.SdkStreamDescriptor.toObject(e.sendStreams[o],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){i.receiveStreamIds=[];for(var o=0;o<e.receiveStreamIds.length;++o)i.receiveStreamIds[o]=e.receiveStreamIds[o]}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&(i.sdpOffer=e.sdpOffer),e.audioHost!=null&&e.hasOwnProperty("audioHost")&&(i.audioHost=e.audioHost),e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&(i.audioCheckin=e.audioCheckin),e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&(i.audioMuted=e.audioMuted),e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&(i.compressedSdpOffer=t.bytes===String?h.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){i.videoSubscriptionConfiguration=[];for(var o=0;o<e.videoSubscriptionConfiguration.length;++o)i.videoSubscriptionConfiguration[o]=a.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeFrame"},"getTypeUrl"),r}(),a.SdkSubscribeAckFrame=function(){function r(n){if(this.allocations=[],this.tracks=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSubscribeAckFrame"),r.prototype.duplex=1,r.prototype.allocations=h.emptyArray,r.prototype.sdpAnswer="",r.prototype.tracks=h.emptyArray,r.prototype.compressedSdpAnswer=h.newBuffer([]),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.allocations!=null&&e.allocations.length)for(var i=0;i<e.allocations.length;++i)a.SdkStreamAllocation.encode(e.allocations[i],t.uint32(18).fork()).ldelim();if(e.sdpAnswer!=null&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),e.tracks!=null&&e.tracks.length)for(var i=0;i<e.tracks.length;++i)a.SdkTrackMapping.encode(e.tracks[i],t.uint32(34).fork()).ldelim();return e.compressedSdpAnswer!=null&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSubscribeAckFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.allocations&&o.allocations.length||(o.allocations=[]),o.allocations.push(a.SdkStreamAllocation.decode(e,e.uint32()));break}case 3:{o.sdpAnswer=e.string();break}case 4:{o.tracks&&o.tracks.length||(o.tracks=[]),o.tracks.push(a.SdkTrackMapping.decode(e,e.uint32()));break}case 5:{o.compressedSdpAnswer=e.bytes();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.allocations!=null&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var i=a.SdkStreamAllocation.verify(e.allocations[t]);if(i)return"allocations."+i}}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&!h.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(e.tracks!=null&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var i=a.SdkTrackMapping.verify(e.tracks[t]);if(i)return"tracks."+i}}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&typeof e.compressedSdpAnswer.length=="number"||h.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkSubscribeAckFrame)return e;var t=new a.SdkSubscribeAckFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var i=0;i<e.allocations.length;++i){if(typeof e.allocations[i]!="object")throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[i]=a.SdkStreamAllocation.fromObject(e.allocations[i])}}if(e.sdpAnswer!=null&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(var i=0;i<e.tracks.length;++i){if(typeof e.tracks[i]!="object")throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[i]=a.SdkTrackMapping.fromObject(e.tracks[i])}}return e.compressedSdpAnswer!=null&&(typeof e.compressedSdpAnswer=="string"?h.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=h.newBuffer(h.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length>=0&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.allocations=[],i.tracks=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpAnswer="",t.bytes===String?i.compressedSdpAnswer="":(i.compressedSdpAnswer=[],t.bytes!==Array&&(i.compressedSdpAnswer=h.newBuffer(i.compressedSdpAnswer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]===void 0?e.duplex:a.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){i.allocations=[];for(var o=0;o<e.allocations.length;++o)i.allocations[o]=a.SdkStreamAllocation.toObject(e.allocations[o],t)}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&(i.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){i.tracks=[];for(var o=0;o<e.tracks.length;++o)i.tracks[o]=a.SdkTrackMapping.toObject(e.tracks[o],t)}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&(i.compressedSdpAnswer=t.bytes===String?h.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeAckFrame"},"getTypeUrl"),r}(),a.SdkIndexFrame=function(){function r(n){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkIndexFrame"),r.prototype.atCapacity=!1,r.prototype.sources=h.emptyArray,r.prototype.pausedAtSourceIds=h.emptyArray,r.prototype.numParticipants=0,r.prototype.supportedReceiveCodecIntersection=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.atCapacity!=null&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),e.sources!=null&&e.sources.length)for(var i=0;i<e.sources.length;++i)a.SdkStreamDescriptor.encode(e.sources[i],t.uint32(18).fork()).ldelim();if(e.pausedAtSourceIds!=null&&e.pausedAtSourceIds.length)for(var i=0;i<e.pausedAtSourceIds.length;++i)t.uint32(24).uint32(e.pausedAtSourceIds[i]);if(e.numParticipants!=null&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),e.supportedReceiveCodecIntersection!=null&&e.supportedReceiveCodecIntersection.length)for(var i=0;i<e.supportedReceiveCodecIntersection.length;++i)t.uint32(40).int32(e.supportedReceiveCodecIntersection[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkIndexFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.atCapacity=e.bool();break}case 2:{o.sources&&o.sources.length||(o.sources=[]),o.sources.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.pausedAtSourceIds&&o.pausedAtSourceIds.length||(o.pausedAtSourceIds=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)o.pausedAtSourceIds.push(e.uint32());else o.pausedAtSourceIds.push(e.uint32());break}case 4:{o.numParticipants=e.uint32();break}case 5:{if(o.supportedReceiveCodecIntersection&&o.supportedReceiveCodecIntersection.length||(o.supportedReceiveCodecIntersection=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)o.supportedReceiveCodecIntersection.push(e.int32());else o.supportedReceiveCodecIntersection.push(e.int32());break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&typeof e.atCapacity!="boolean")return"atCapacity: boolean expected";if(e.sources!=null&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var i=a.SdkStreamDescriptor.verify(e.sources[t]);if(i)return"sources."+i}}if(e.pausedAtSourceIds!=null&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(var t=0;t<e.pausedAtSourceIds.length;++t)if(!h.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&!h.isInteger(e.numParticipants))return"numParticipants: integer expected";if(e.supportedReceiveCodecIntersection!=null&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(var t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 11:break}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkIndexFrame)return e;var t=new a.SdkIndexFrame;if(e.atCapacity!=null&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var i=0;i<e.sources.length;++i){if(typeof e.sources[i]!="object")throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[i]=a.SdkStreamDescriptor.fromObject(e.sources[i])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(var i=0;i<e.pausedAtSourceIds.length;++i)t.pausedAtSourceIds[i]=e.pausedAtSourceIds[i]>>>0}if(e.numParticipants!=null&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(var i=0;i<e.supportedReceiveCodecIntersection.length;++i)switch(e.supportedReceiveCodecIntersection[i]){default:if(typeof e.supportedReceiveCodecIntersection[i]=="number"){t.supportedReceiveCodecIntersection[i]=e.supportedReceiveCodecIntersection[i];break}case"VP8":case 1:t.supportedReceiveCodecIntersection[i]=1;break;case"H264_BASELINE_PROFILE":case 2:t.supportedReceiveCodecIntersection[i]=2;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[i]=3;break;case"H264_MAIN_PROFILE":case 4:t.supportedReceiveCodecIntersection[i]=4;break;case"H264_HIGH_PROFILE":case 5:t.supportedReceiveCodecIntersection[i]=5;break;case"H264_CONSTRAINED_HIGH_PROFILE":case 6:t.supportedReceiveCodecIntersection[i]=6;break;case"VP9_PROFILE_0":case 8:t.supportedReceiveCodecIntersection[i]=8;break;case"AV1_MAIN_PROFILE":case 11:t.supportedReceiveCodecIntersection[i]=11;break}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sources=[],i.pausedAtSourceIds=[],i.supportedReceiveCodecIntersection=[]),t.defaults&&(i.atCapacity=!1,i.numParticipants=0),e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&(i.atCapacity=e.atCapacity),e.sources&&e.sources.length){i.sources=[];for(var o=0;o<e.sources.length;++o)i.sources[o]=a.SdkStreamDescriptor.toObject(e.sources[o],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){i.pausedAtSourceIds=[];for(var o=0;o<e.pausedAtSourceIds.length;++o)i.pausedAtSourceIds[o]=e.pausedAtSourceIds[o]}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&(i.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){i.supportedReceiveCodecIntersection=[];for(var o=0;o<e.supportedReceiveCodecIntersection.length;++o)i.supportedReceiveCodecIntersection[o]=t.enums===String?a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]===void 0?e.supportedReceiveCodecIntersection[o]:a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]:e.supportedReceiveCodecIntersection[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkIndexFrame"},"getTypeUrl"),r}(),a.SdkPauseResumeFrame=function(){function r(n){if(this.streamIds=[],this.groupIds=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPauseResumeFrame"),r.prototype.streamIds=h.emptyArray,r.prototype.groupIds=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streamIds!=null&&e.streamIds.length)for(var i=0;i<e.streamIds.length;++i)t.uint32(8).uint32(e.streamIds[i]);if(e.groupIds!=null&&e.groupIds.length)for(var i=0;i<e.groupIds.length;++i)t.uint32(16).uint32(e.groupIds[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPauseResumeFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{if(o.streamIds&&o.streamIds.length||(o.streamIds=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)o.streamIds.push(e.uint32());else o.streamIds.push(e.uint32());break}case 2:{if(o.groupIds&&o.groupIds.length||(o.groupIds=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)o.groupIds.push(e.uint32());else o.groupIds.push(e.uint32());break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamIds!=null&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!h.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(e.groupIds!=null&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(var t=0;t<e.groupIds.length;++t)if(!h.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkPauseResumeFrame)return e;var t=new a.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var i=0;i<e.streamIds.length;++i)t.streamIds[i]=e.streamIds[i]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(var i=0;i<e.groupIds.length;++i)t.groupIds[i]=e.groupIds[i]>>>0}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streamIds=[],i.groupIds=[]),e.streamIds&&e.streamIds.length){i.streamIds=[];for(var o=0;o<e.streamIds.length;++o)i.streamIds[o]=e.streamIds[o]}if(e.groupIds&&e.groupIds.length){i.groupIds=[];for(var o=0;o<e.groupIds.length;++o)i.groupIds[o]=e.groupIds[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPauseResumeFrame"},"getTypeUrl"),r}(),a.SdkBitrateFrame=function(){function r(n){if(this.bitrates=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkBitrateFrame"),r.prototype.bitrates=h.emptyArray,r.prototype.serverAvailableOutgoingBitrate=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.bitrates!=null&&e.bitrates.length)for(var i=0;i<e.bitrates.length;++i)a.SdkBitrate.encode(e.bitrates[i],t.uint32(10).fork()).ldelim();return e.serverAvailableOutgoingBitrate!=null&&Object.hasOwnProperty.call(e,"serverAvailableOutgoingBitrate")&&t.uint32(16).uint32(e.serverAvailableOutgoingBitrate),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkBitrateFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.bitrates&&o.bitrates.length||(o.bitrates=[]),o.bitrates.push(a.SdkBitrate.decode(e,e.uint32()));break}case 2:{o.serverAvailableOutgoingBitrate=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var i=a.SdkBitrate.verify(e.bitrates[t]);if(i)return"bitrates."+i}}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&!h.isInteger(e.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkBitrateFrame)return e;var t=new a.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var i=0;i<e.bitrates.length;++i){if(typeof e.bitrates[i]!="object")throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[i]=a.SdkBitrate.fromObject(e.bitrates[i])}}return e.serverAvailableOutgoingBitrate!=null&&(t.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.bitrates=[]),t.defaults&&(i.serverAvailableOutgoingBitrate=0),e.bitrates&&e.bitrates.length){i.bitrates=[];for(var o=0;o<e.bitrates.length;++o)i.bitrates[o]=a.SdkBitrate.toObject(e.bitrates[o],t)}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&(i.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrateFrame"},"getTypeUrl"),r}(),a.SdkStreamDescriptor=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamDescriptor"),r.prototype.streamId=0,r.prototype.framerate=0,r.prototype.maxBitrateKbps=0,r.prototype.trackLabel="",r.prototype.groupId=0,r.prototype.avgBitrateBps=0,r.prototype.attendeeId="",r.prototype.mediaType=1,r.prototype.externalUserId="",r.prototype.width=0,r.prototype.height=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.framerate!=null&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),e.maxBitrateKbps!=null&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),e.width!=null&&Object.hasOwnProperty.call(e,"width")&&t.uint32(88).uint32(e.width),e.height!=null&&Object.hasOwnProperty.call(e,"height")&&t.uint32(96).uint32(e.height),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamDescriptor;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.framerate=e.uint32();break}case 3:{o.maxBitrateKbps=e.uint32();break}case 4:{o.trackLabel=e.string();break}case 6:{o.groupId=e.uint32();break}case 7:{o.avgBitrateBps=e.uint32();break}case 8:{o.attendeeId=e.string();break}case 9:{o.mediaType=e.int32();break}case 10:{o.externalUserId=e.string();break}case 11:{o.width=e.uint32();break}case 12:{o.height=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!h.isInteger(e.streamId))return"streamId: integer expected";if(e.framerate!=null&&e.hasOwnProperty("framerate")&&!h.isInteger(e.framerate))return"framerate: integer expected";if(e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&!h.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!h.isString(e.trackLabel))return"trackLabel: string expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!h.isInteger(e.groupId))return"groupId: integer expected";if(e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!h.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!h.isString(e.attendeeId))return"attendeeId: string expected";if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!h.isString(e.externalUserId)?"externalUserId: string expected":e.width!=null&&e.hasOwnProperty("width")&&!h.isInteger(e.width)?"width: integer expected":e.height!=null&&e.hasOwnProperty("height")&&!h.isInteger(e.height)?"height: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkStreamDescriptor)return e;var t=new a.SdkStreamDescriptor;switch(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.framerate!=null&&(t.framerate=e.framerate>>>0),e.maxBitrateKbps!=null&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.width!=null&&(t.width=e.width>>>0),e.height!=null&&(t.height=e.height>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.framerate=0,i.maxBitrateKbps=0,i.trackLabel="",i.groupId=0,i.avgBitrateBps=0,i.attendeeId="",i.mediaType=t.enums===String?"AUDIO":1,i.externalUserId="",i.width=0,i.height=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.framerate!=null&&e.hasOwnProperty("framerate")&&(i.framerate=e.framerate),e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&(i.maxBitrateKbps=e.maxBitrateKbps),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(i.mediaType=t.enums===String?a.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:a.SdkStreamMediaType[e.mediaType]:e.mediaType),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.width!=null&&e.hasOwnProperty("width")&&(i.width=e.width),e.height!=null&&e.hasOwnProperty("height")&&(i.height=e.height),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDescriptor"},"getTypeUrl"),r}(),a.SdkStreamAllocation=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamAllocation"),r.prototype.trackLabel="",r.prototype.streamId=0,r.prototype.groupId=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamAllocation;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.trackLabel=e.string();break}case 2:{o.streamId=e.uint32();break}case 3:{o.groupId=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!h.isString(e.trackLabel)?"trackLabel: string expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!h.isInteger(e.streamId)?"streamId: integer expected":e.groupId!=null&&e.hasOwnProperty("groupId")&&!h.isInteger(e.groupId)?"groupId: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkStreamAllocation)return e;var t=new a.SdkStreamAllocation;return e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.trackLabel="",i.streamId=0,i.groupId=0),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamAllocation"},"getTypeUrl"),r}(),a.SdkTrackMapping=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTrackMapping"),r.prototype.streamId=0,r.prototype.ssrc=0,r.prototype.trackLabel="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.ssrc!=null&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTrackMapping;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.ssrc=e.uint32();break}case 3:{o.trackLabel=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!h.isInteger(e.streamId)?"streamId: integer expected":e.ssrc!=null&&e.hasOwnProperty("ssrc")&&!h.isInteger(e.ssrc)?"ssrc: integer expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!h.isString(e.trackLabel)?"trackLabel: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTrackMapping)return e;var t=new a.SdkTrackMapping;return e.streamId!=null&&(t.streamId=e.streamId>>>0),e.ssrc!=null&&(t.ssrc=e.ssrc>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.ssrc=0,i.trackLabel=""),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.ssrc!=null&&e.hasOwnProperty("ssrc")&&(i.ssrc=e.ssrc),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTrackMapping"},"getTypeUrl"),r}(),a.SdkBitrate=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkBitrate"),r.prototype.sourceStreamId=0,r.prototype.avgBitrateBps=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.sourceStreamId!=null&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkBitrate;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.sourceStreamId=e.uint32();break}case 2:{o.avgBitrateBps=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&!h.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!h.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkBitrate)return e;var t=new a.SdkBitrate;return e.sourceStreamId!=null&&(t.sourceStreamId=e.sourceStreamId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.sourceStreamId=0,i.avgBitrateBps=0),e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&(i.sourceStreamId=e.sourceStreamId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrate"},"getTypeUrl"),r}(),a.SdkAudioControlFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioControlFrame"),r.prototype.muted=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioControlFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.muted=e.bool();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioControlFrame)return e;var t=new a.SdkAudioControlFrame;return e.muted!=null&&(t.muted=Boolean(e.muted)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.muted=!1),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioControlFrame"},"getTypeUrl"),r}(),a.SdkAudioMetadataFrame=function(){function r(n){if(this.attendeeStates=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioMetadataFrame"),r.prototype.attendeeStates=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.attendeeStates!=null&&e.attendeeStates.length)for(var i=0;i<e.attendeeStates.length;++i)a.SdkAudioAttendeeState.encode(e.attendeeStates[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioMetadataFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.attendeeStates&&o.attendeeStates.length||(o.attendeeStates=[]),o.attendeeStates.push(a.SdkAudioAttendeeState.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.attendeeStates!=null&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var i=a.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(i)return"attendeeStates."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioMetadataFrame)return e;var t=new a.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var i=0;i<e.attendeeStates.length;++i){if(typeof e.attendeeStates[i]!="object")throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[i]=a.SdkAudioAttendeeState.fromObject(e.attendeeStates[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){i.attendeeStates=[];for(var o=0;o<e.attendeeStates.length;++o)i.attendeeStates[o]=a.SdkAudioAttendeeState.toObject(e.attendeeStates[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioMetadataFrame"},"getTypeUrl"),r}(),a.SdkAudioAttendeeState=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioAttendeeState"),r.prototype.audioStreamId=0,r.prototype.volume=0,r.prototype.muted=!1,r.prototype.signalStrength=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.volume!=null&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.signalStrength!=null&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioAttendeeState;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.volume=e.uint32();break}case 3:{o.muted=e.bool();break}case 4:{o.signalStrength=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!h.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.volume!=null&&e.hasOwnProperty("volume")&&!h.isInteger(e.volume)?"volume: integer expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&!h.isInteger(e.signalStrength)?"signalStrength: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioAttendeeState)return e;var t=new a.SdkAudioAttendeeState;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.volume!=null&&(t.volume=e.volume>>>0),e.muted!=null&&(t.muted=Boolean(e.muted)),e.signalStrength!=null&&(t.signalStrength=e.signalStrength>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.volume=0,i.muted=!1,i.signalStrength=0),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),e.volume!=null&&e.hasOwnProperty("volume")&&(i.volume=e.volume),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&(i.signalStrength=e.signalStrength),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioAttendeeState"},"getTypeUrl"),r}(),a.SdkAudioStreamIdInfoFrame=function(){function r(n){if(this.streams=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStreamIdInfoFrame"),r.prototype.streams=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streams!=null&&e.streams.length)for(var i=0;i<e.streams.length;++i)a.SdkAudioStreamIdInfo.encode(e.streams[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStreamIdInfoFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.streams&&o.streams.length||(o.streams=[]),o.streams.push(a.SdkAudioStreamIdInfo.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streams!=null&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var i=a.SdkAudioStreamIdInfo.verify(e.streams[t]);if(i)return"streams."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioStreamIdInfoFrame)return e;var t=new a.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var i=0;i<e.streams.length;++i){if(typeof e.streams[i]!="object")throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[i]=a.SdkAudioStreamIdInfo.fromObject(e.streams[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streams=[]),e.streams&&e.streams.length){i.streams=[];for(var o=0;o<e.streams.length;++o)i.streams[o]=a.SdkAudioStreamIdInfo.toObject(e.streams[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfoFrame"},"getTypeUrl"),r}(),a.SdkAudioStreamIdInfo=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStreamIdInfo"),r.prototype.audioStreamId=0,r.prototype.attendeeId="",r.prototype.muted=!1,r.prototype.externalUserId="",r.prototype.dropped=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),e.dropped!=null&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStreamIdInfo;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.attendeeId=e.string();break}case 3:{o.muted=e.bool();break}case 4:{o.externalUserId=e.string();break}case 5:{o.dropped=e.bool();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!h.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!h.isString(e.attendeeId)?"attendeeId: string expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!h.isString(e.externalUserId)?"externalUserId: string expected":e.dropped!=null&&e.hasOwnProperty("dropped")&&typeof e.dropped!="boolean"?"dropped: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioStreamIdInfo)return e;var t=new a.SdkAudioStreamIdInfo;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.muted!=null&&(t.muted=Boolean(e.muted)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.dropped!=null&&(t.dropped=Boolean(e.dropped)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.attendeeId="",i.muted=!1,i.externalUserId="",i.dropped=!1),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.dropped!=null&&e.hasOwnProperty("dropped")&&(i.dropped=e.dropped),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfo"},"getTypeUrl"),r}(),a.SdkPingPongType=function(){var r={},n=Object.create(r);return n[r[1]="PING"]=1,n[r[2]="PONG"]=2,n}(),a.SdkPingPongFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPingPongFrame"),r.prototype.type=1,r.prototype.pingId=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPingPongFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.type=e.int32();break}case 2:{o.pingId=e.uint32();break}default:e.skipType(c&7);break}}if(!o.hasOwnProperty("type"))throw h.ProtocolError("missing required 'type'",{instance:o});if(!o.hasOwnProperty("pingId"))throw h.ProtocolError("missing required 'pingId'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return h.isInteger(e.pingId)?null:"pingId: integer expected"},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkPingPongFrame)return e;var t=new a.SdkPingPongFrame;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return e.pingId!=null&&(t.pingId=e.pingId>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"PING":1,i.pingId=0),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkPingPongType[e.type]===void 0?e.type:a.SdkPingPongType[e.type]:e.type),e.pingId!=null&&e.hasOwnProperty("pingId")&&(i.pingId=e.pingId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPingPongFrame"},"getTypeUrl"),r}(),a.SdkAudioStatusFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStatusFrame"),r.prototype.audioStatus=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStatusFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.audioStatus=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&!h.isInteger(e.audioStatus)?"audioStatus: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioStatusFrame)return e;var t=new a.SdkAudioStatusFrame;return e.audioStatus!=null&&(t.audioStatus=e.audioStatus>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStatus=0),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=e.audioStatus),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStatusFrame"},"getTypeUrl"),r}(),a.SdkMetric=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkMetric"),r.prototype.type=1,r.prototype.value=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkMetric;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=e.double();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:break}return e.value!=null&&e.hasOwnProperty("value")&&typeof e.value!="number"?"value: number expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkMetric)return e;var t=new a.SdkMetric;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break;case"VIDEO_FREEZE_COUNT":case 90:t.type=90;break;case"VIDEO_FREEZE_DURATION":case 91:t.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:t.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:t.type=93;break;case"VIDEO_QUALITY_REASON":case 94:t.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:t.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:t.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:t.type=97;break;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:t.type=102;break;case"VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU":case 103:t.type=103;break;case"VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE":case 104:t.type=104;break}return e.value!=null&&(t.value=Number(e.value)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,i.value=0),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkMetric.Type[e.type]===void 0?e.type:a.SdkMetric.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(i.value=t.json&&!isFinite(e.value)?String(e.value):e.value),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMetric"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,e[n[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,e[n[3]="VIDEO_RETRANSMIT_BITRATE"]=3,e[n[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,e[n[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,e[n[6]="VIDEO_BUCKET_DELAY_MS"]=6,e[n[7]="STUN_RTT_MS"]=7,e[n[8]="SOCKET_DISCARDED_PPS"]=8,e[n[9]="RTC_MIC_JITTER_MS"]=9,e[n[10]="RTC_MIC_PPS"]=10,e[n[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,e[n[12]="RTC_MIC_BITRATE"]=12,e[n[13]="RTC_MIC_RTT_MS"]=13,e[n[14]="RTC_SPK_PPS"]=14,e[n[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,e[n[16]="RTC_SPK_JITTER_MS"]=16,e[n[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,e[n[18]="RTC_SPK_BITRATE"]=18,e[n[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,e[n[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,e[n[21]="VIDEO_SENT_RTT_MS"]=21,e[n[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,e[n[23]="VIDEO_NACKS_RECEIVED"]=23,e[n[24]="VIDEO_PLIS_RECEIVED"]=24,e[n[25]="VIDEO_ENCODE_MS"]=25,e[n[26]="VIDEO_INPUT_FPS"]=26,e[n[27]="VIDEO_ENCODE_FPS"]=27,e[n[28]="VIDEO_SENT_FPS"]=28,e[n[29]="VIDEO_FIRS_RECEIVED"]=29,e[n[30]="VIDEO_SENT_PPS"]=30,e[n[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,e[n[32]="VIDEO_SENT_BITRATE"]=32,e[n[33]="VIDEO_DROPPED_FPS"]=33,e[n[34]="VIDEO_TARGET_DELAY_MS"]=34,e[n[35]="VIDEO_DECODE_MS"]=35,e[n[36]="VIDEO_OUTPUT_FPS"]=36,e[n[37]="VIDEO_RECEIVED_PPS"]=37,e[n[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,e[n[39]="VIDEO_RENDER_DELAY_MS"]=39,e[n[40]="VIDEO_RECEIVED_FPS"]=40,e[n[41]="VIDEO_DECODE_FPS"]=41,e[n[42]="VIDEO_NACKS_SENT"]=42,e[n[43]="VIDEO_FIRS_SENT"]=43,e[n[44]="VIDEO_RECEIVED_BITRATE"]=44,e[n[45]="VIDEO_CURRENT_DELAY_MS"]=45,e[n[46]="VIDEO_JITTER_BUFFER_MS"]=46,e[n[47]="VIDEO_DISCARDED_PPS"]=47,e[n[48]="VIDEO_PLIS_SENT"]=48,e[n[49]="VIDEO_RECEIVED_JITTER_MS"]=49,e[n[64]="VIDEO_ENCODE_HEIGHT"]=64,e[n[66]="VIDEO_SENT_QP_SUM"]=66,e[n[69]="VIDEO_DECODE_HEIGHT"]=69,e[n[72]="VIDEO_RECEIVED_QP_SUM"]=72,e[n[86]="VIDEO_ENCODE_WIDTH"]=86,e[n[87]="VIDEO_DECODE_WIDTH"]=87,e[n[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,e[n[89]="VIDEO_DECODER_IS_HARDWARE"]=89,e[n[90]="VIDEO_FREEZE_COUNT"]=90,e[n[91]="VIDEO_FREEZE_DURATION"]=91,e[n[92]="VIDEO_PAUSE_COUNT"]=92,e[n[93]="VIDEO_PAUSE_DURATION"]=93,e[n[94]="VIDEO_QUALITY_REASON"]=94,e[n[95]="VIDEO_PROCESSING_TIME"]=95,e[n[96]="RTC_SPK_AUDIO_LEVEL"]=96,e[n[97]="RTC_MIC_AUDIO_LEVEL"]=97,e[n[98]="RTC_SPK_TOTAL_LOST"]=98,e[n[99]="RTC_SPK_TOTAL_EXPECTED"]=99,e[n[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,e[n[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,e[n[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,e[n[103]="VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU"]=103,e[n[104]="VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE"]=104,e}(),r}(),a.SdkStreamMetricFrame=function(){function r(n){if(this.metrics=[],this.dimensions=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamMetricFrame"),r.prototype.streamId=0,r.prototype.groupId=0,r.prototype.metrics=h.emptyArray,r.prototype.dimensions=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),e.metrics!=null&&e.metrics.length)for(var i=0;i<e.metrics.length;++i)a.SdkMetric.encode(e.metrics[i],t.uint32(42).fork()).ldelim();if(e.dimensions!=null&&e.dimensions.length)for(var i=0;i<e.dimensions.length;++i)a.SdkStreamDimension.encode(e.dimensions[i],t.uint32(50).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamMetricFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 3:{o.streamId=e.uint32();break}case 4:{o.groupId=e.uint32();break}case 5:{o.metrics&&o.metrics.length||(o.metrics=[]),o.metrics.push(a.SdkMetric.decode(e,e.uint32()));break}case 6:{o.dimensions&&o.dimensions.length||(o.dimensions=[]),o.dimensions.push(a.SdkStreamDimension.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!h.isInteger(e.streamId))return"streamId: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!h.isInteger(e.groupId))return"groupId: integer expected";if(e.metrics!=null&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var i=a.SdkMetric.verify(e.metrics[t]);if(i)return"metrics."+i}}if(e.dimensions!=null&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(var t=0;t<e.dimensions.length;++t){var i=a.SdkStreamDimension.verify(e.dimensions[t]);if(i)return"dimensions."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkStreamMetricFrame)return e;var t=new a.SdkStreamMetricFrame;if(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var i=0;i<e.metrics.length;++i){if(typeof e.metrics[i]!="object")throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[i]=a.SdkMetric.fromObject(e.metrics[i])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(var i=0;i<e.dimensions.length;++i){if(typeof e.dimensions[i]!="object")throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[i]=a.SdkStreamDimension.fromObject(e.dimensions[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.metrics=[],i.dimensions=[]),t.defaults&&(i.streamId=0,i.groupId=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.metrics&&e.metrics.length){i.metrics=[];for(var o=0;o<e.metrics.length;++o)i.metrics[o]=a.SdkMetric.toObject(e.metrics[o],t)}if(e.dimensions&&e.dimensions.length){i.dimensions=[];for(var o=0;o<e.dimensions.length;++o)i.dimensions[o]=a.SdkStreamDimension.toObject(e.dimensions[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamMetricFrame"},"getTypeUrl"),r}(),a.SdkClientMetricFrame=function(){function r(n){if(this.globalMetrics=[],this.streamMetricFrames=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkClientMetricFrame"),r.prototype.globalMetrics=h.emptyArray,r.prototype.streamMetricFrames=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.globalMetrics!=null&&e.globalMetrics.length)for(var i=0;i<e.globalMetrics.length;++i)a.SdkMetric.encode(e.globalMetrics[i],t.uint32(10).fork()).ldelim();if(e.streamMetricFrames!=null&&e.streamMetricFrames.length)for(var i=0;i<e.streamMetricFrames.length;++i)a.SdkStreamMetricFrame.encode(e.streamMetricFrames[i],t.uint32(18).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkClientMetricFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.globalMetrics&&o.globalMetrics.length||(o.globalMetrics=[]),o.globalMetrics.push(a.SdkMetric.decode(e,e.uint32()));break}case 2:{o.streamMetricFrames&&o.streamMetricFrames.length||(o.streamMetricFrames=[]),o.streamMetricFrames.push(a.SdkStreamMetricFrame.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.globalMetrics!=null&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var i=a.SdkMetric.verify(e.globalMetrics[t]);if(i)return"globalMetrics."+i}}if(e.streamMetricFrames!=null&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(var t=0;t<e.streamMetricFrames.length;++t){var i=a.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(i)return"streamMetricFrames."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkClientMetricFrame)return e;var t=new a.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var i=0;i<e.globalMetrics.length;++i){if(typeof e.globalMetrics[i]!="object")throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[i]=a.SdkMetric.fromObject(e.globalMetrics[i])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(var i=0;i<e.streamMetricFrames.length;++i){if(typeof e.streamMetricFrames[i]!="object")throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[i]=a.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.globalMetrics=[],i.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){i.globalMetrics=[];for(var o=0;o<e.globalMetrics.length;++o)i.globalMetrics[o]=a.SdkMetric.toObject(e.globalMetrics[o],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){i.streamMetricFrames=[];for(var o=0;o<e.streamMetricFrames.length;++o)i.streamMetricFrames[o]=a.SdkStreamMetricFrame.toObject(e.streamMetricFrames[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientMetricFrame"},"getTypeUrl"),r}(),a.SdkStreamDimension=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamDimension"),r.prototype.type=1,r.prototype.value=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&a.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamDimension;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=a.SdkDimensionValue.decode(e,e.uint32());break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(e.value!=null&&e.hasOwnProperty("value")){var t=a.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkStreamDimension)return e;var t=new a.SdkStreamDimension;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(e.value!=null){if(typeof e.value!="object")throw TypeError(".SdkStreamDimension.value: object expected");t.value=a.SdkDimensionValue.fromObject(e.value)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ENCODER_NAME":1,i.value=null),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkStreamDimension.Type[e.type]===void 0?e.type:a.SdkStreamDimension.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(i.value=a.SdkDimensionValue.toObject(e.value,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDimension"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="VIDEO_ENCODER_NAME"]=1,e[n[2]="VIDEO_DECODER_NAME"]=2,e}(),r}(),a.SdkDimensionValue=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDimensionValue"),r.prototype.stringValue="",r.prototype.boolValue=!1,r.prototype.uintValue=h.Long?h.Long.fromBits(0,0,!0):0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),e.boolValue!=null&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),e.uintValue!=null&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDimensionValue;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.stringValue=e.string();break}case 2:{o.boolValue=e.bool();break}case 3:{o.uintValue=e.uint64();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.stringValue!=null&&e.hasOwnProperty("stringValue")&&!h.isString(e.stringValue)?"stringValue: string expected":e.boolValue!=null&&e.hasOwnProperty("boolValue")&&typeof e.boolValue!="boolean"?"boolValue: boolean expected":e.uintValue!=null&&e.hasOwnProperty("uintValue")&&!h.isInteger(e.uintValue)&&!(e.uintValue&&h.isInteger(e.uintValue.low)&&h.isInteger(e.uintValue.high))?"uintValue: integer|Long expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkDimensionValue)return e;var t=new a.SdkDimensionValue;return e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.boolValue!=null&&(t.boolValue=Boolean(e.boolValue)),e.uintValue!=null&&(h.Long?(t.uintValue=h.Long.fromValue(e.uintValue)).unsigned=!0:typeof e.uintValue=="string"?t.uintValue=parseInt(e.uintValue,10):typeof e.uintValue=="number"?t.uintValue=e.uintValue:typeof e.uintValue=="object"&&(t.uintValue=new h.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults)if(i.stringValue="",i.boolValue=!1,h.Long){var o=new h.Long(0,0,!0);i.uintValue=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.uintValue=t.longs===String?"0":0;return e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(i.stringValue=e.stringValue),e.boolValue!=null&&e.hasOwnProperty("boolValue")&&(i.boolValue=e.boolValue),e.uintValue!=null&&e.hasOwnProperty("uintValue")&&(typeof e.uintValue=="number"?i.uintValue=t.longs===String?String(e.uintValue):e.uintValue:i.uintValue=t.longs===String?h.Long.prototype.toString.call(e.uintValue):t.longs===Number?new h.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDimensionValue"},"getTypeUrl"),r}(),a.SdkDataMessageFrame=function(){function r(n){if(this.messages=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDataMessageFrame"),r.prototype.messages=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.messages!=null&&e.messages.length)for(var i=0;i<e.messages.length;++i)a.SdkDataMessagePayload.encode(e.messages[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDataMessageFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.messages&&o.messages.length||(o.messages=[]),o.messages.push(a.SdkDataMessagePayload.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.messages!=null&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var i=a.SdkDataMessagePayload.verify(e.messages[t]);if(i)return"messages."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkDataMessageFrame)return e;var t=new a.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var i=0;i<e.messages.length;++i){if(typeof e.messages[i]!="object")throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[i]=a.SdkDataMessagePayload.fromObject(e.messages[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.messages=[]),e.messages&&e.messages.length){i.messages=[];for(var o=0;o<e.messages.length;++o)i.messages[o]=a.SdkDataMessagePayload.toObject(e.messages[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessageFrame"},"getTypeUrl"),r}(),a.SdkDataMessagePayload=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDataMessagePayload"),r.prototype.topic="",r.prototype.data=h.newBuffer([]),r.prototype.lifetimeMs=0,r.prototype.senderAttendeeId="",r.prototype.ingestTimeNs=h.Long?h.Long.fromBits(0,0,!1):0,r.prototype.senderExternalUserId="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.topic!=null&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),e.lifetimeMs!=null&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),e.senderAttendeeId!=null&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),e.ingestTimeNs!=null&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),e.senderExternalUserId!=null&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDataMessagePayload;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.topic=e.string();break}case 2:{o.data=e.bytes();break}case 3:{o.lifetimeMs=e.uint32();break}case 4:{o.senderAttendeeId=e.string();break}case 5:{o.ingestTimeNs=e.int64();break}case 6:{o.senderExternalUserId=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.topic!=null&&e.hasOwnProperty("topic")&&!h.isString(e.topic)?"topic: string expected":e.data!=null&&e.hasOwnProperty("data")&&!(e.data&&typeof e.data.length=="number"||h.isString(e.data))?"data: buffer expected":e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&!h.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&!h.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&!h.isInteger(e.ingestTimeNs)&&!(e.ingestTimeNs&&h.isInteger(e.ingestTimeNs.low)&&h.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&!h.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkDataMessagePayload)return e;var t=new a.SdkDataMessagePayload;return e.topic!=null&&(t.topic=String(e.topic)),e.data!=null&&(typeof e.data=="string"?h.base64.decode(e.data,t.data=h.newBuffer(h.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),e.lifetimeMs!=null&&(t.lifetimeMs=e.lifetimeMs>>>0),e.senderAttendeeId!=null&&(t.senderAttendeeId=String(e.senderAttendeeId)),e.ingestTimeNs!=null&&(h.Long?(t.ingestTimeNs=h.Long.fromValue(e.ingestTimeNs)).unsigned=!1:typeof e.ingestTimeNs=="string"?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):typeof e.ingestTimeNs=="number"?t.ingestTimeNs=e.ingestTimeNs:typeof e.ingestTimeNs=="object"&&(t.ingestTimeNs=new h.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),e.senderExternalUserId!=null&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.topic="",t.bytes===String?i.data="":(i.data=[],t.bytes!==Array&&(i.data=h.newBuffer(i.data))),i.lifetimeMs=0,i.senderAttendeeId="",h.Long){var o=new h.Long(0,0,!1);i.ingestTimeNs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.ingestTimeNs=t.longs===String?"0":0;i.senderExternalUserId=""}return e.topic!=null&&e.hasOwnProperty("topic")&&(i.topic=e.topic),e.data!=null&&e.hasOwnProperty("data")&&(i.data=t.bytes===String?h.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&(i.lifetimeMs=e.lifetimeMs),e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&(i.senderAttendeeId=e.senderAttendeeId),e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&(typeof e.ingestTimeNs=="number"?i.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:i.ingestTimeNs=t.longs===String?h.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new h.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&(i.senderExternalUserId=e.senderExternalUserId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessagePayload"},"getTypeUrl"),r}(),a.SdkTurnCredentials=function(){function r(n){if(this.uris=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTurnCredentials"),r.prototype.username="",r.prototype.password="",r.prototype.ttl=0,r.prototype.uris=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.username!=null&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),e.password!=null&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),e.uris!=null&&e.uris.length)for(var i=0;i<e.uris.length;++i)t.uint32(34).string(e.uris[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTurnCredentials;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.username=e.string();break}case 2:{o.password=e.string();break}case 3:{o.ttl=e.uint32();break}case 4:{o.uris&&o.uris.length||(o.uris=[]),o.uris.push(e.string());break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.username!=null&&e.hasOwnProperty("username")&&!h.isString(e.username))return"username: string expected";if(e.password!=null&&e.hasOwnProperty("password")&&!h.isString(e.password))return"password: string expected";if(e.ttl!=null&&e.hasOwnProperty("ttl")&&!h.isInteger(e.ttl))return"ttl: integer expected";if(e.uris!=null&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!h.isString(e.uris[t]))return"uris: string[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTurnCredentials)return e;var t=new a.SdkTurnCredentials;if(e.username!=null&&(t.username=String(e.username)),e.password!=null&&(t.password=String(e.password)),e.ttl!=null&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var i=0;i<e.uris.length;++i)t.uris[i]=String(e.uris[i])}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.uris=[]),t.defaults&&(i.username="",i.password="",i.ttl=0),e.username!=null&&e.hasOwnProperty("username")&&(i.username=e.username),e.password!=null&&e.hasOwnProperty("password")&&(i.password=e.password),e.ttl!=null&&e.hasOwnProperty("ttl")&&(i.ttl=e.ttl),e.uris&&e.uris.length){i.uris=[];for(var o=0;o<e.uris.length;++o)i.uris[o]=e.uris[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTurnCredentials"},"getTypeUrl"),r}(),a.SdkTranscriptItem=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptItem"),r.prototype.content="",r.prototype.endTime=h.Long?h.Long.fromBits(0,0,!1):0,r.prototype.speakerAttendeeId="",r.prototype.speakerExternalUserId="",r.prototype.startTime=h.Long?h.Long.fromBits(0,0,!1):0,r.prototype.type=1,r.prototype.vocabularyFilterMatch=!1,r.prototype.confidence=0,r.prototype.stable=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),e.speakerAttendeeId!=null&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),e.speakerExternalUserId!=null&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),e.vocabularyFilterMatch!=null&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),e.stable!=null&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptItem;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.content=e.string();break}case 2:{o.endTime=e.int64();break}case 3:{o.speakerAttendeeId=e.string();break}case 4:{o.speakerExternalUserId=e.string();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.int32();break}case 7:{o.vocabularyFilterMatch=e.bool();break}case 8:{o.confidence=e.double();break}case 9:{o.stable=e.bool();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.content!=null&&e.hasOwnProperty("content")&&!h.isString(e.content))return"content: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!h.isInteger(e.endTime)&&!(e.endTime&&h.isInteger(e.endTime.low)&&h.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&!h.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&!h.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!h.isInteger(e.startTime)&&!(e.startTime&&h.isInteger(e.startTime.low)&&h.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&typeof e.vocabularyFilterMatch!="boolean"?"vocabularyFilterMatch: boolean expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.stable!=null&&e.hasOwnProperty("stable")&&typeof e.stable!="boolean"?"stable: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptItem)return e;var t=new a.SdkTranscriptItem;switch(e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(h.Long?(t.endTime=h.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new h.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.speakerAttendeeId!=null&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),e.speakerExternalUserId!=null&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),e.startTime!=null&&(h.Long?(t.startTime=h.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new h.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return e.vocabularyFilterMatch!=null&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.stable!=null&&(t.stable=Boolean(e.stable)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.content="",h.Long){var o=new h.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(i.speakerAttendeeId="",i.speakerExternalUserId="",h.Long){var o=new h.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.type=t.enums===String?"PRONUNCIATION":1,i.vocabularyFilterMatch=!1,i.confidence=0,i.stable=!1}return e.content!=null&&e.hasOwnProperty("content")&&(i.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?h.Long.prototype.toString.call(e.endTime):t.longs===Number?new h.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&(i.speakerAttendeeId=e.speakerAttendeeId),e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&(i.speakerExternalUserId=e.speakerExternalUserId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?h.Long.prototype.toString.call(e.startTime):t.longs===Number?new h.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkTranscriptItem.Type[e.type]===void 0?e.type:a.SdkTranscriptItem.Type[e.type]:e.type),e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&(i.vocabularyFilterMatch=e.vocabularyFilterMatch),e.confidence!=null&&e.hasOwnProperty("confidence")&&(i.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.stable!=null&&e.hasOwnProperty("stable")&&(i.stable=e.stable),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptItem"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="PRONUNCIATION"]=1,e[n[2]="PUNCTUATION"]=2,e}(),r}(),a.SdkTranscriptEntity=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptEntity"),r.prototype.category="",r.prototype.confidence=0,r.prototype.content="",r.prototype.endTime=h.Long?h.Long.fromBits(0,0,!1):0,r.prototype.startTime=h.Long?h.Long.fromBits(0,0,!1):0,r.prototype.type="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.category!=null&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptEntity;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.category=e.string();break}case 2:{o.confidence=e.double();break}case 3:{o.content=e.string();break}case 4:{o.endTime=e.int64();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.category!=null&&e.hasOwnProperty("category")&&!h.isString(e.category)?"category: string expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.content!=null&&e.hasOwnProperty("content")&&!h.isString(e.content)?"content: string expected":e.endTime!=null&&e.hasOwnProperty("endTime")&&!h.isInteger(e.endTime)&&!(e.endTime&&h.isInteger(e.endTime.low)&&h.isInteger(e.endTime.high))?"endTime: integer|Long expected":e.startTime!=null&&e.hasOwnProperty("startTime")&&!h.isInteger(e.startTime)&&!(e.startTime&&h.isInteger(e.startTime.low)&&h.isInteger(e.startTime.high))?"startTime: integer|Long expected":e.type!=null&&e.hasOwnProperty("type")&&!h.isString(e.type)?"type: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptEntity)return e;var t=new a.SdkTranscriptEntity;return e.category!=null&&(t.category=String(e.category)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(h.Long?(t.endTime=h.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new h.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.startTime!=null&&(h.Long?(t.startTime=h.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new h.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type!=null&&(t.type=String(e.type)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.category="",i.confidence=0,i.content="",h.Long){var o=new h.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(h.Long){var o=new h.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.type=""}return e.category!=null&&e.hasOwnProperty("category")&&(i.category=e.category),e.confidence!=null&&e.hasOwnProperty("confidence")&&(i.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.content!=null&&e.hasOwnProperty("content")&&(i.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?h.Long.prototype.toString.call(e.endTime):t.longs===Number?new h.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?h.Long.prototype.toString.call(e.startTime):t.longs===Number?new h.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(i.type=e.type),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptEntity"},"getTypeUrl"),r}(),a.SdkTranscriptAlternative=function(){function r(n){if(this.items=[],this.entities=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptAlternative"),r.prototype.items=h.emptyArray,r.prototype.transcript="",r.prototype.entities=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.items!=null&&e.items.length)for(var i=0;i<e.items.length;++i)a.SdkTranscriptItem.encode(e.items[i],t.uint32(10).fork()).ldelim();if(e.transcript!=null&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),e.entities!=null&&e.entities.length)for(var i=0;i<e.entities.length;++i)a.SdkTranscriptEntity.encode(e.entities[i],t.uint32(26).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptAlternative;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.items&&o.items.length||(o.items=[]),o.items.push(a.SdkTranscriptItem.decode(e,e.uint32()));break}case 2:{o.transcript=e.string();break}case 3:{o.entities&&o.entities.length||(o.entities=[]),o.entities.push(a.SdkTranscriptEntity.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.items!=null&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var i=a.SdkTranscriptItem.verify(e.items[t]);if(i)return"items."+i}}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&!h.isString(e.transcript))return"transcript: string expected";if(e.entities!=null&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(var t=0;t<e.entities.length;++t){var i=a.SdkTranscriptEntity.verify(e.entities[t]);if(i)return"entities."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptAlternative)return e;var t=new a.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var i=0;i<e.items.length;++i){if(typeof e.items[i]!="object")throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[i]=a.SdkTranscriptItem.fromObject(e.items[i])}}if(e.transcript!=null&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(var i=0;i<e.entities.length;++i){if(typeof e.entities[i]!="object")throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[i]=a.SdkTranscriptEntity.fromObject(e.entities[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.items=[],i.entities=[]),t.defaults&&(i.transcript=""),e.items&&e.items.length){i.items=[];for(var o=0;o<e.items.length;++o)i.items[o]=a.SdkTranscriptItem.toObject(e.items[o],t)}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&(i.transcript=e.transcript),e.entities&&e.entities.length){i.entities=[];for(var o=0;o<e.entities.length;++o)i.entities[o]=a.SdkTranscriptEntity.toObject(e.entities[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptAlternative"},"getTypeUrl"),r}(),a.SdkTranscriptLanguageWithScore=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptLanguageWithScore"),r.prototype.languageCode="",r.prototype.score=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),e.score!=null&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptLanguageWithScore;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.languageCode=e.string();break}case 2:{o.score=e.double();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!h.isString(e.languageCode)?"languageCode: string expected":e.score!=null&&e.hasOwnProperty("score")&&typeof e.score!="number"?"score: number expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptLanguageWithScore)return e;var t=new a.SdkTranscriptLanguageWithScore;return e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.score!=null&&(t.score=Number(e.score)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.languageCode="",i.score=0),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(i.languageCode=e.languageCode),e.score!=null&&e.hasOwnProperty("score")&&(i.score=t.json&&!isFinite(e.score)?String(e.score):e.score),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptLanguageWithScore"},"getTypeUrl"),r}(),a.SdkTranscriptResult=function(){function r(n){if(this.alternatives=[],this.languageIdentification=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptResult"),r.prototype.alternatives=h.emptyArray,r.prototype.channelId="",r.prototype.endTime=h.Long?h.Long.fromBits(0,0,!1):0,r.prototype.isPartial=!1,r.prototype.resultId="",r.prototype.startTime=h.Long?h.Long.fromBits(0,0,!1):0,r.prototype.languageCode="",r.prototype.languageIdentification=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.alternatives!=null&&e.alternatives.length)for(var i=0;i<e.alternatives.length;++i)a.SdkTranscriptAlternative.encode(e.alternatives[i],t.uint32(10).fork()).ldelim();if(e.channelId!=null&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),e.isPartial!=null&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),e.resultId!=null&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),e.languageIdentification!=null&&e.languageIdentification.length)for(var i=0;i<e.languageIdentification.length;++i)a.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[i],t.uint32(66).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptResult;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.alternatives&&o.alternatives.length||(o.alternatives=[]),o.alternatives.push(a.SdkTranscriptAlternative.decode(e,e.uint32()));break}case 2:{o.channelId=e.string();break}case 3:{o.endTime=e.int64();break}case 4:{o.isPartial=e.bool();break}case 5:{o.resultId=e.string();break}case 6:{o.startTime=e.int64();break}case 7:{o.languageCode=e.string();break}case 8:{o.languageIdentification&&o.languageIdentification.length||(o.languageIdentification=[]),o.languageIdentification.push(a.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.alternatives!=null&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var i=a.SdkTranscriptAlternative.verify(e.alternatives[t]);if(i)return"alternatives."+i}}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&!h.isString(e.channelId))return"channelId: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!h.isInteger(e.endTime)&&!(e.endTime&&h.isInteger(e.endTime.low)&&h.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.isPartial!=null&&e.hasOwnProperty("isPartial")&&typeof e.isPartial!="boolean")return"isPartial: boolean expected";if(e.resultId!=null&&e.hasOwnProperty("resultId")&&!h.isString(e.resultId))return"resultId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!h.isInteger(e.startTime)&&!(e.startTime&&h.isInteger(e.startTime.low)&&h.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!h.isString(e.languageCode))return"languageCode: string expected";if(e.languageIdentification!=null&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(var t=0;t<e.languageIdentification.length;++t){var i=a.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(i)return"languageIdentification."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptResult)return e;var t=new a.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var i=0;i<e.alternatives.length;++i){if(typeof e.alternatives[i]!="object")throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[i]=a.SdkTranscriptAlternative.fromObject(e.alternatives[i])}}if(e.channelId!=null&&(t.channelId=String(e.channelId)),e.endTime!=null&&(h.Long?(t.endTime=h.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new h.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.isPartial!=null&&(t.isPartial=Boolean(e.isPartial)),e.resultId!=null&&(t.resultId=String(e.resultId)),e.startTime!=null&&(h.Long?(t.startTime=h.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new h.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(var i=0;i<e.languageIdentification.length;++i){if(typeof e.languageIdentification[i]!="object")throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[i]=a.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.alternatives=[],i.languageIdentification=[]),t.defaults){if(i.channelId="",h.Long){var o=new h.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(i.isPartial=!1,i.resultId="",h.Long){var o=new h.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.languageCode=""}if(e.alternatives&&e.alternatives.length){i.alternatives=[];for(var c=0;c<e.alternatives.length;++c)i.alternatives[c]=a.SdkTranscriptAlternative.toObject(e.alternatives[c],t)}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&(i.channelId=e.channelId),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?h.Long.prototype.toString.call(e.endTime):t.longs===Number?new h.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.isPartial!=null&&e.hasOwnProperty("isPartial")&&(i.isPartial=e.isPartial),e.resultId!=null&&e.hasOwnProperty("resultId")&&(i.resultId=e.resultId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?h.Long.prototype.toString.call(e.startTime):t.longs===Number?new h.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(i.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){i.languageIdentification=[];for(var c=0;c<e.languageIdentification.length;++c)i.languageIdentification[c]=a.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[c],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptResult"},"getTypeUrl"),r}(),a.SdkTranscript=function(){function r(n){if(this.results=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscript"),r.prototype.results=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.results!=null&&e.results.length)for(var i=0;i<e.results.length;++i)a.SdkTranscriptResult.encode(e.results[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscript;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.results&&o.results.length||(o.results=[]),o.results.push(a.SdkTranscriptResult.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.results!=null&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var i=a.SdkTranscriptResult.verify(e.results[t]);if(i)return"results."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscript)return e;var t=new a.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var i=0;i<e.results.length;++i){if(typeof e.results[i]!="object")throw TypeError(".SdkTranscript.results: object expected");t.results[i]=a.SdkTranscriptResult.fromObject(e.results[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.results=[]),e.results&&e.results.length){i.results=[];for(var o=0;o<e.results.length;++o)i.results[o]=a.SdkTranscriptResult.toObject(e.results[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscript"},"getTypeUrl"),r}(),a.SdkTranscriptionStatus=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptionStatus"),r.prototype.type=1,r.prototype.eventTime=h.Long?h.Long.fromBits(0,0,!1):0,r.prototype.transcriptionRegion="",r.prototype.transcriptionConfiguration="",r.prototype.message="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.eventTime!=null&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),e.transcriptionRegion!=null&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),e.transcriptionConfiguration!=null&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptionStatus;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.type=e.int32();break}case 2:{o.eventTime=e.int64();break}case 3:{o.transcriptionRegion=e.string();break}case 4:{o.transcriptionConfiguration=e.string();break}case 5:{o.message=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return e.eventTime!=null&&e.hasOwnProperty("eventTime")&&!h.isInteger(e.eventTime)&&!(e.eventTime&&h.isInteger(e.eventTime.low)&&h.isInteger(e.eventTime.high))?"eventTime: integer|Long expected":e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&!h.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&!h.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":e.message!=null&&e.hasOwnProperty("message")&&!h.isString(e.message)?"message: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptionStatus)return e;var t=new a.SdkTranscriptionStatus;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return e.eventTime!=null&&(h.Long?(t.eventTime=h.Long.fromValue(e.eventTime)).unsigned=!1:typeof e.eventTime=="string"?t.eventTime=parseInt(e.eventTime,10):typeof e.eventTime=="number"?t.eventTime=e.eventTime:typeof e.eventTime=="object"&&(t.eventTime=new h.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),e.transcriptionRegion!=null&&(t.transcriptionRegion=String(e.transcriptionRegion)),e.transcriptionConfiguration!=null&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),e.message!=null&&(t.message=String(e.message)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.type=t.enums===String?"STARTED":1,h.Long){var o=new h.Long(0,0,!1);i.eventTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.eventTime=t.longs===String?"0":0;i.transcriptionRegion="",i.transcriptionConfiguration="",i.message=""}return e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkTranscriptionStatus.Type[e.type]===void 0?e.type:a.SdkTranscriptionStatus.Type[e.type]:e.type),e.eventTime!=null&&e.hasOwnProperty("eventTime")&&(typeof e.eventTime=="number"?i.eventTime=t.longs===String?String(e.eventTime):e.eventTime:i.eventTime=t.longs===String?h.Long.prototype.toString.call(e.eventTime):t.longs===Number?new h.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&(i.transcriptionRegion=e.transcriptionRegion),e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&(i.transcriptionConfiguration=e.transcriptionConfiguration),e.message!=null&&e.hasOwnProperty("message")&&(i.message=e.message),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptionStatus"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="STARTED"]=1,e[n[2]="INTERRUPTED"]=2,e[n[3]="RESUMED"]=3,e[n[4]="STOPPED"]=4,e[n[5]="FAILED"]=5,e}(),r}(),a.SdkTranscriptEvent=function(){function r(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)e[t[i]]!=null&&(this[t[i]]=e[t[i]])}s(r,"SdkTranscriptEvent"),r.prototype.status=null,r.prototype.transcript=null;var n;return Object.defineProperty(r.prototype,"Event",{get:h.oneOfGetter(n=["status","transcript"]),set:h.oneOfSetter(n)}),r.create=s(function(t){return new r(t)},"create"),r.encode=s(function(t,i){return i||(i=m.create()),t.status!=null&&Object.hasOwnProperty.call(t,"status")&&a.SdkTranscriptionStatus.encode(t.status,i.uint32(10).fork()).ldelim(),t.transcript!=null&&Object.hasOwnProperty.call(t,"transcript")&&a.SdkTranscript.encode(t.transcript,i.uint32(18).fork()).ldelim(),i},"encode"),r.encodeDelimited=s(function(t,i){return this.encode(t,i).ldelim()},"encodeDelimited"),r.decode=s(function(t,i){t instanceof g||(t=g.create(t));for(var o=i===void 0?t.len:t.pos+i,c=new a.SdkTranscriptEvent;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:{c.status=a.SdkTranscriptionStatus.decode(t,t.uint32());break}case 2:{c.transcript=a.SdkTranscript.decode(t,t.uint32());break}default:t.skipType(p&7);break}}return c},"decode"),r.decodeDelimited=s(function(t){return t instanceof g||(t=new g(t)),this.decode(t,t.uint32())},"decodeDelimited"),r.verify=s(function(t){if(typeof t!="object"||t===null)return"object expected";var i={};if(t.status!=null&&t.hasOwnProperty("status")){i.Event=1;{var o=a.SdkTranscriptionStatus.verify(t.status);if(o)return"status."+o}}if(t.transcript!=null&&t.hasOwnProperty("transcript")){if(i.Event===1)return"Event: multiple values";i.Event=1;{var o=a.SdkTranscript.verify(t.transcript);if(o)return"transcript."+o}}return null},"verify"),r.fromObject=s(function(t){if(t instanceof a.SdkTranscriptEvent)return t;var i=new a.SdkTranscriptEvent;if(t.status!=null){if(typeof t.status!="object")throw TypeError(".SdkTranscriptEvent.status: object expected");i.status=a.SdkTranscriptionStatus.fromObject(t.status)}if(t.transcript!=null){if(typeof t.transcript!="object")throw TypeError(".SdkTranscriptEvent.transcript: object expected");i.transcript=a.SdkTranscript.fromObject(t.transcript)}return i},"fromObject"),r.toObject=s(function(t,i){i||(i={});var o={};return t.status!=null&&t.hasOwnProperty("status")&&(o.status=a.SdkTranscriptionStatus.toObject(t.status,i),i.oneofs&&(o.Event="status")),t.transcript!=null&&t.hasOwnProperty("transcript")&&(o.transcript=a.SdkTranscript.toObject(t.transcript,i),i.oneofs&&(o.Event="transcript")),o},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(t){return t===void 0&&(t="type.googleapis.com"),t+"/SdkTranscriptEvent"},"getTypeUrl"),r}(),a.SdkTranscriptFrame=function(){function r(n){if(this.events=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptFrame"),r.prototype.events=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.events!=null&&e.events.length)for(var i=0;i<e.events.length;++i)a.SdkTranscriptEvent.encode(e.events[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.events&&o.events.length||(o.events=[]),o.events.push(a.SdkTranscriptEvent.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.events!=null&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var i=a.SdkTranscriptEvent.verify(e.events[t]);if(i)return"events."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptFrame)return e;var t=new a.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var i=0;i<e.events.length;++i){if(typeof e.events[i]!="object")throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[i]=a.SdkTranscriptEvent.fromObject(e.events[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.events=[]),e.events&&e.events.length){i.events=[];for(var o=0;o<e.events.length;++o)i.events[o]=a.SdkTranscriptEvent.toObject(e.events[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptFrame"},"getTypeUrl"),r}(),a.SdkRemoteVideoUpdateFrame=function(){function r(n){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkRemoteVideoUpdateFrame"),r.prototype.addedOrUpdatedVideoSubscriptions=h.emptyArray,r.prototype.removedVideoSubscriptionMids=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.addedOrUpdatedVideoSubscriptions!=null&&e.addedOrUpdatedVideoSubscriptions.length)for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i)a.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[i],t.uint32(10).fork()).ldelim();if(e.removedVideoSubscriptionMids!=null&&e.removedVideoSubscriptionMids.length)for(var i=0;i<e.removedVideoSubscriptionMids.length;++i)t.uint32(18).string(e.removedVideoSubscriptionMids[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkRemoteVideoUpdateFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.addedOrUpdatedVideoSubscriptions&&o.addedOrUpdatedVideoSubscriptions.length||(o.addedOrUpdatedVideoSubscriptions=[]),o.addedOrUpdatedVideoSubscriptions.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}case 2:{o.removedVideoSubscriptionMids&&o.removedVideoSubscriptionMids.length||(o.removedVideoSubscriptionMids=[]),o.removedVideoSubscriptionMids.push(e.string());break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.addedOrUpdatedVideoSubscriptions!=null&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var i=a.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(i)return"addedOrUpdatedVideoSubscriptions."+i}}if(e.removedVideoSubscriptionMids!=null&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(var t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!h.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkRemoteVideoUpdateFrame)return e;var t=new a.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i){if(typeof e.addedOrUpdatedVideoSubscriptions[i]!="object")throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[i]=a.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[i])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(var i=0;i<e.removedVideoSubscriptionMids.length;++i)t.removedVideoSubscriptionMids[i]=String(e.removedVideoSubscriptionMids[i])}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.addedOrUpdatedVideoSubscriptions=[],i.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){i.addedOrUpdatedVideoSubscriptions=[];for(var o=0;o<e.addedOrUpdatedVideoSubscriptions.length;++o)i.addedOrUpdatedVideoSubscriptions[o]=a.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[o],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){i.removedVideoSubscriptionMids=[];for(var o=0;o<e.removedVideoSubscriptionMids.length;++o)i.removedVideoSubscriptionMids[o]=e.removedVideoSubscriptionMids[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkRemoteVideoUpdateFrame"},"getTypeUrl"),r}(),a.SdkVideoQualityAdaptationPreference=function(){var r={},n=Object.create(r);return n[r[1]="BALANCED"]=1,n[r[2]="MAINTAIN_FRAMERATE"]=2,n[r[3]="MAINTAIN_RESOLUTION"]=3,n}(),a.SdkVideoSubscriptionConfiguration=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkVideoSubscriptionConfiguration"),r.prototype.mid="",r.prototype.attendeeId="",r.prototype.streamId=0,r.prototype.priority=0,r.prototype.targetBitrateKbps=0,r.prototype.groupId=0,r.prototype.qualityAdaptationPreference=1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(10).string(e.mid),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.priority!=null&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),e.targetBitrateKbps!=null&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.qualityAdaptationPreference!=null&&Object.hasOwnProperty.call(e,"qualityAdaptationPreference")&&t.uint32(56).int32(e.qualityAdaptationPreference),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkVideoSubscriptionConfiguration;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.mid=e.string();break}case 2:{o.attendeeId=e.string();break}case 3:{o.streamId=e.uint32();break}case 4:{o.priority=e.uint32();break}case 5:{o.targetBitrateKbps=e.uint32();break}case 6:{o.groupId=e.uint32();break}case 7:{o.qualityAdaptationPreference=e.int32();break}default:e.skipType(c&7);break}}if(!o.hasOwnProperty("mid"))throw h.ProtocolError("missing required 'mid'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(!h.isString(e.mid))return"mid: string expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!h.isString(e.attendeeId))return"attendeeId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!h.isInteger(e.streamId))return"streamId: integer expected";if(e.priority!=null&&e.hasOwnProperty("priority")&&!h.isInteger(e.priority))return"priority: integer expected";if(e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&!h.isInteger(e.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!h.isInteger(e.groupId))return"groupId: integer expected";if(e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference"))switch(e.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:break}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkVideoSubscriptionConfiguration)return e;var t=new a.SdkVideoSubscriptionConfiguration;switch(e.mid!=null&&(t.mid=String(e.mid)),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.priority!=null&&(t.priority=e.priority>>>0),e.targetBitrateKbps!=null&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.qualityAdaptationPreference){default:if(typeof e.qualityAdaptationPreference=="number"){t.qualityAdaptationPreference=e.qualityAdaptationPreference;break}break;case"BALANCED":case 1:t.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:t.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:t.qualityAdaptationPreference=3;break}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.mid="",i.attendeeId="",i.streamId=0,i.priority=0,i.targetBitrateKbps=0,i.groupId=0,i.qualityAdaptationPreference=t.enums===String?"BALANCED":1),e.mid!=null&&e.hasOwnProperty("mid")&&(i.mid=e.mid),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.priority!=null&&e.hasOwnProperty("priority")&&(i.priority=e.priority),e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&(i.targetBitrateKbps=e.targetBitrateKbps),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference")&&(i.qualityAdaptationPreference=t.enums===String?a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]===void 0?e.qualityAdaptationPreference:a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]:e.qualityAdaptationPreference),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkVideoSubscriptionConfiguration"},"getTypeUrl"),r}(),a.SdkNotificationFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkNotificationFrame"),r.prototype.level=3,r.prototype.message="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.level!=null&&Object.hasOwnProperty.call(e,"level")&&t.uint32(8).int32(e.level),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkNotificationFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.level=e.int32();break}case 2:{o.message=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.level!=null&&e.hasOwnProperty("level"))switch(e.level){default:return"level: enum value expected";case 1:case 2:case 3:break}return e.message!=null&&e.hasOwnProperty("message")&&!h.isString(e.message)?"message: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkNotificationFrame)return e;var t=new a.SdkNotificationFrame;switch(e.level){case"INFO":case 1:t.level=1;break;case"WARNING":case 2:t.level=2;break;default:if(typeof e.level=="number"){t.level=e.level;break}break;case"ERROR":case 3:t.level=3;break}return e.message!=null&&(t.message=String(e.message)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.level=t.enums===String?"ERROR":3,i.message=""),e.level!=null&&e.hasOwnProperty("level")&&(i.level=t.enums===String?a.SdkNotificationFrame.NotificationLevel[e.level]===void 0?e.level:a.SdkNotificationFrame.NotificationLevel[e.level]:e.level),e.message!=null&&e.hasOwnProperty("message")&&(i.message=e.message),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkNotificationFrame"},"getTypeUrl"),r.NotificationLevel=function(){var n={},e=Object.create(n);return e[n[1]="INFO"]=1,e[n[2]="WARNING"]=2,e[n[3]="ERROR"]=3,e}(),r}(),a.SdkPrimaryMeetingJoinFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingJoinFrame"),r.prototype.credentials=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.credentials!=null&&Object.hasOwnProperty.call(e,"credentials")&&a.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingJoinFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.credentials=a.SdkMeetingSessionCredentials.decode(e,e.uint32());break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.credentials!=null&&e.hasOwnProperty("credentials")){var t=a.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkPrimaryMeetingJoinFrame)return e;var t=new a.SdkPrimaryMeetingJoinFrame;if(e.credentials!=null){if(typeof e.credentials!="object")throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=a.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.credentials=null),e.credentials!=null&&e.hasOwnProperty("credentials")&&(i.credentials=a.SdkMeetingSessionCredentials.toObject(e.credentials,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinFrame"},"getTypeUrl"),r}(),a.SdkPrimaryMeetingJoinAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingJoinAckFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingJoinAckFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof a.SdkPrimaryMeetingJoinAckFrame?e:new a.SdkPrimaryMeetingJoinAckFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinAckFrame"},"getTypeUrl"),r}(),a.SdkPrimaryMeetingLeaveFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingLeaveFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingLeaveFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof a.SdkPrimaryMeetingLeaveFrame?e:new a.SdkPrimaryMeetingLeaveFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingLeaveFrame"},"getTypeUrl"),r}(),a.SdkMeetingSessionCredentials=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkMeetingSessionCredentials"),r.prototype.attendeeId="",r.prototype.externalUserId="",r.prototype.joinToken="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),e.joinToken!=null&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkMeetingSessionCredentials;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.attendeeId=e.string();break}case 2:{o.externalUserId=e.string();break}case 3:{o.joinToken=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!h.isString(e.attendeeId)?"attendeeId: string expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!h.isString(e.externalUserId)?"externalUserId: string expected":e.joinToken!=null&&e.hasOwnProperty("joinToken")&&!h.isString(e.joinToken)?"joinToken: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkMeetingSessionCredentials)return e;var t=new a.SdkMeetingSessionCredentials;return e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.joinToken!=null&&(t.joinToken=String(e.joinToken)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.attendeeId="",i.externalUserId="",i.joinToken=""),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.joinToken!=null&&e.hasOwnProperty("joinToken")&&(i.joinToken=e.joinToken),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMeetingSessionCredentials"},"getTypeUrl"),r}(),a.SdkVideoCodecCapability=function(){var r={},n=Object.create(r);return n[r[1]="VP8"]=1,n[r[2]="H264_BASELINE_PROFILE"]=2,n[r[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,n[r[4]="H264_MAIN_PROFILE"]=4,n[r[5]="H264_HIGH_PROFILE"]=5,n[r[6]="H264_CONSTRAINED_HIGH_PROFILE"]=6,n[r[8]="VP9_PROFILE_0"]=8,n[r[11]="AV1_MAIN_PROFILE"]=11,n}(),U.exports=a,h.Long=void 0,u.configure()},133523:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=f(112380),h=f(940999),a=g(f(508338));let r=s(class{makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const i=new m.Sha256(t);return i.update(e),i.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,i,o){return u(this,void 0,void 0,function*(){const c=yield this.hmac(t,"AWS4"+e),p=yield this.hmac(i,c),S=yield this.hmac(o,p);return yield this.hmac("aws4_request",S)})}signURL(e,t,i,o,c,p,S){return u(this,void 0,void 0,function*(){const d=this.getDateTimeString(),y=this.getDateString(d),E="AWS4-HMAC-SHA256";let I="";this.chimeClient.config.region instanceof Function?I=yield this.chimeClient.config.region():I=this.chimeClient.config.region;const A="host",L="host:"+o.toLowerCase()+`
`,M=y+"/"+I+"/"+i+"/aws4_request";let k;this.chimeClient.config.credentials instanceof Function?k=yield this.chimeClient.config.credentials():k=this.chimeClient.config.credentials;let w=new Map;w.set("X-Amz-Algorithm",[E]),w.set("X-Amz-Credential",[encodeURIComponent(k.accessKeyId+"/"+M)]),w.set("X-Amz-Date",[d]),w.set("X-Amz-Expires",["10"]),w.set("X-Amz-SignedHeaders",["host"]),k.sessionToken&&w.set("X-Amz-Security-Token",[encodeURIComponent(k.sessionToken)]),w.set(a.default.X_AMZN_VERSION,[encodeURIComponent(a.default.sdkVersion)]),w.set(a.default.X_AMZN_USER_AGENT,[encodeURIComponent(a.default.sdkUserAgentLowResolution)]),S==null||S.forEach((q,me)=>{const we=encodeURIComponent(me);q.sort().forEach(ue=>{w.has(we)||w.set(we,[]),w.get(we).push(encodeURIComponent(ue))})});let N="";w=new Map([...w.entries()].sort()),w.forEach((q,me)=>{q.forEach(we=>{N.length&&(N+="&"),N+=me+"="+we})});const T=e+`
`+c+`
`+N+`
`+L+`
`+A+`
`+h.toHex(yield this.hmac(p)),O=h.toHex(yield this.hmac(T)),D=`AWS4-HMAC-SHA256
`+d+`
`+y+"/"+I+"/"+i+`/aws4_request
`+O,G=yield this.getSignatureKey(k.secretAccessKey,y,I,i),K=h.toHex(yield this.hmac(D,G)),H=N+"&X-Amz-Signature="+K;return t+"://"+o+c+"?"+H})}constructor(e){this.chimeClient=e}},"DefaultSigV4");l.default=r},418760:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SimulcastLayers=void 0;var f;(function(u){u[u.Low=0]="Low",u[u.LowAndMedium=1]="LowAndMedium",u[u.LowAndHigh=2]="LowAndHigh",u[u.Medium=3]="Medium",u[u.MediumAndHigh=4]="MediumAndHigh",u[u.High=5]="High"})(f=l.SimulcastLayers||(l.SimulcastLayers={})),l.default=f},228978:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.AudioLogEvent=void 0;var f;(function(u){u[u.DeviceChanged=0]="DeviceChanged",u[u.MutedLocal=1]="MutedLocal",u[u.UnmutedLocal=2]="UnmutedLocal",u[u.Connected=3]="Connected",u[u.ConnectFailed=4]="ConnectFailed",u[u.RedmicStartLoss=5]="RedmicStartLoss",u[u.RedmicEndLoss=6]="RedmicEndLoss"})(f=l.AudioLogEvent||(l.AudioLogEvent={})),l.default=f},562562:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(y,E,I,A){function L(M){return M instanceof I?M:new I(function(k){k(M)})}return s(L,"adopt"),new(I||(I=Promise))(function(M,k){function w(O){try{T(A.next(O))}catch(D){k(D)}}s(w,"fulfilled");function N(O){try{T(A.throw(O))}catch(D){k(D)}}s(N,"rejected");function T(O){O.done?M(O.value):L(O.value).then(w,N)}s(T,"step"),T((A=A.apply(y,E||[])).next())})},g=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(434040)),h=g(f(369475)),a=g(f(982782)),r=g(f(793497)),n=g(f(564979)),e=g(f(807612)),t=g(f(471327)),i=g(f(264323)),o=f(50380),c=f(823880),p=g(f(228978)),S=g(f(244839));let d=s(class Gl{toAttribute(E){return this.toSuffix(E).substring(1)}toSuffix(E){return E.toLowerCase()===E?`_${E}`:E.toUpperCase()===E?`_${E.toLowerCase()}`:E.replace(/([A-Z][a-z]+)/g,function(I){return`_${I}`}).replace(/([A-Z][A-Z]+)/g,function(I){return`_${I}`}).toLowerCase()}logLatency(E,I,A){const L=this.toSuffix(E);this.logEventTime("meeting"+L,I,A)}logStateTimeout(E,I){const A=this.toSuffix(E);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},I),{state:`state${A}`}))}logAudioEvent(E,I){const A="audio"+this.toSuffix(p.default[E]);this.logEvent(A,I)}logVideoEvent(E,I){const A="video"+this.toSuffix(S.default[E]);this.logEvent(A,I)}logEventTime(E,I){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const L=Object.assign(Object.assign({},A),{call_id:this.audioVideoController.configuration.meetingId,client_type:Gl.CLIENT_TYPE,metric_type:"latency"});this.logger.debug(()=>`[StatsCollector] ${E}: ${JSON.stringify(L)}`),this.metricsAddTime(E,I,L)}logMeetingSessionStatus(E){const I=`${E.statusCode()}`;this.logEvent(I);const A={status:I,status_code:`${E.statusCode()}`};this.logEvent("meeting_session_status",A),E.isTerminal()&&this.logEvent("meeting_session_stopped",A),E.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",A),E.isFailure()&&this.logEvent("meeting_session_failed",A)}logLifecycleEvent(E,I){const A={lifecycle_event:`lifecycle${this.toSuffix(e.default[E])}`,lifecycle_event_code:`${E}`,lifecycle_event_condition:`condition${this.toSuffix(t.default[I])}`,lifecycle_event_condition_code:`${I}`};this.logEvent("meeting_session_lifecycle",A)}logEvent(E){let I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const A=Object.assign(Object.assign({},I),{call_id:this.audioVideoController.configuration.meetingId,client_type:Gl.CLIENT_TYPE});this.logger.debug(()=>`[StatsCollector] ${E}: ${JSON.stringify(A)}`),this.metricsLogEvent(E,A)}start(E,I){return this.intervalScheduler?!1:(this.logger.info("Starting StatsCollector"),this.signalingClient=E,this.videoStreamIndex=I,this.clientMetricReport=new m.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new i.default(this.interval),this.intervalScheduler.start(()=>u(this,void 0,void 0,function*(){yield this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}updateMetricValues(E,I){const A=I?this.clientMetricReport.streamMetricReports[Number(E.ssrc)]:this.clientMetricReport.globalMetricReport;let L;I?L=this.clientMetricReport.getMetricMap(A.mediaType,A.direction):L=this.clientMetricReport.getMetricMap();for(const M in E)M in L&&(typeof E[M]=="number"?(A.previousMetrics[M]=A.currentMetrics[M],A.currentMetrics[M]=E[M]):typeof E[M]=="string"?A.currentStringMetrics[M]=E[M]:typeof E[M]=="object"?(A.previousObjectMetrics[M]=A.currentObjectMetrics[M]===void 0?E[M]:A.currentObjectMetrics[M],A.currentObjectMetrics[M]=E[M]):this.logger.error(`Unknown metric value type ${typeof E[M]} for metric ${M}`))}processRawMetricReports(E){this.clientMetricReport.currentSsrcs={};const I=Date.now();for(const A of E){const L=this.isStreamRawMetricReport(A.type);if(L){const M=this.clientMetricReport.streamMetricReports[Number(A.ssrc)];if(M)M.mediaType===a.default.VIDEO&&M.direction===h.default.UPSTREAM?M.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(A.rid):M.streamId=this.videoStreamIndex.streamIdForSSRC(Number(A.ssrc));else{const k=new n.default;k.mediaType=this.getMediaType(A),k.direction=this.getDirectionType(A),k.mediaType===a.default.VIDEO&&k.direction===h.default.UPSTREAM?k.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(A.rid):this.videoStreamIndex.allStreams().empty()||(k.streamId=this.videoStreamIndex.streamIdForSSRC(Number(A.ssrc)),this.videoStreamIndex.groupIdForSSRC!==void 0&&(k.groupId=this.videoStreamIndex.groupIdForSSRC(Number(A.ssrc)))),this.clientMetricReport.streamMetricReports[Number(A.ssrc)]=k}this.clientMetricReport.currentSsrcs[Number(A.ssrc)]=1}this.updateMetricValues(A,L)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=I,this.clientMetricReport.print()}addStreamMetricDimensionFrames(E,I){const A=this.clientMetricReport.getStreamDimensionMap();for(const L in I.currentStringMetrics)if(L in A){const M=o.SdkStreamDimension.create();M.type=A[L];const k=o.SdkDimensionValue.create();k.stringValue=I.currentStringMetrics[L],M.value=k,E.dimensions.push(M)}}addMetricFrame(E,I,A,L){const M=A.type,k=A.transform,w=A.source,N=I.streamMetricFrames.length,T=I.streamMetricFrames[N-1];if(M){const O=o.SdkMetric.create();O.type=M,O.value=k(w||E,L),L?T.metrics.push(O):I.globalMetrics.push(O)}}addGlobalMetricsToProtobuf(E){const I=this.clientMetricReport.getMetricMap();for(const A in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(A,E,I[A])}addStreamMetricsToProtobuf(E){for(const I in this.clientMetricReport.streamMetricReports){const A=this.clientMetricReport.streamMetricReports[I],L=o.SdkStreamMetricFrame.create();L.streamId=A.streamId,L.metrics=[],this.addStreamMetricDimensionFrames(L,A),E.streamMetricFrames.push(L);const M=this.clientMetricReport.getMetricMap(A.mediaType,A.direction);for(const k in A.currentMetrics)this.addMetricFrame(k,E,M[k],Number(I));for(const k in A.currentStringMetrics)this.addMetricFrame(k,E,M[k],Number(I));for(const k in A.currentObjectMetrics)this.addMetricFrame(k,E,M[k],Number(I))}}makeClientMetricProtobuf(){const E=o.SdkClientMetricFrame.create();return E.globalMetrics=[],E.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(E),this.addStreamMetricsToProtobuf(E),E}sendClientMetricProtobuf(E){this.signalingClient.sendClientMetrics(E)}isStreamRawMetricReport(E){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(E)}getMediaType(E){return E.kind==="audio"?a.default.AUDIO:a.default.VIDEO}getDirectionType(E){const{type:I}=E;return I==="inbound-rtp"||I==="remote-outbound-rtp"||I==="inbound-rtp-red"?h.default.DOWNSTREAM:h.default.UPSTREAM}isValidStandardRawMetric(E){return E.type==="inbound-rtp"||E.type==="inbound-rtp-red"||E.type==="outbound-rtp"||E.type==="remote-inbound-rtp"||E.type==="remote-outbound-rtp"||E.type==="candidate-pair"&&E.state==="succeeded"||E.type==="media-source"&&E.kind==="audio"}isValidSsrc(E){let I=!0;return this.isStreamRawMetricReport(E.type)&&this.getDirectionType(E)===h.default.DOWNSTREAM&&this.getMediaType(E)===a.default.VIDEO&&(I=this.videoStreamIndex.streamIdForSSRC(Number(E.ssrc))>0),I}isValidRawMetricReport(E){return this.isValidStandardRawMetric(E)&&this.isValidSsrc(E)}filterRawMetricReports(E){const I=[];for(const A of E)this.isValidRawMetricReport(A)&&I.push(A);return I}handleRawMetricReports(E){const I=this.filterRawMetricReports(E);this.logger.debug(()=>`Filtered raw metrics : ${JSON.stringify(I)}`);const A=[];this.maybeAddRedRecoveryMetrics(A),this.addVideoCodecDegradationMetrics(A),this.clientMetricReport.customStatsReports=A,I.push(...A),this.processRawMetricReports(I);const L=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(L),this.audioVideoController.forEachObserver(M=>{c.Maybe.of(M.metricsDidReceive).map(k=>k.bind(M)(this.clientMetricReport.clone()))})}getStatsWrapper(){return u(this,void 0,void 0,function*(){if(!this.audioVideoController.rtcPeerConnection)return;const E=[];try{const I=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=I,I.forEach(A=>{E.push(A)}),this.handleRawMetricReports(E)}catch(I){this.logger.error(I.message)}})}overrideObservableMetric(E,I){this.clientMetricReport.overrideObservableMetric(E,I)}recoveryMetricsDidReceive(E){this.redRecoveryMetricReport=E}maybeAddRedRecoveryMetrics(E){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(E.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}videoCodecDegradationHighEncodeCpuDidReceive(){this.videoCodecDegradationHighEncodeCpuCount+=1}videoCodecDegradationEncodeFailureDidReceive(){this.videoCodecDegradationEncodeFailureCount+=1}addVideoCodecDegradationMetrics(E){const I=this.clientMetricReport.getVideoUpstreamSsrc();I!==null&&E.push({kind:"video",type:"outbound-rtp",ssrc:I,timestamp:Date.now(),videoCodecDegradationHighEncodeCpu:this.videoCodecDegradationHighEncodeCpuCount,videoCodecDegradationEncodeFailure:this.videoCodecDegradationEncodeFailureCount}),this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0}constructor(E,I,A=Gl.INTERVAL_MS){this.audioVideoController=E,this.logger=I,this.interval=A,this.intervalScheduler=null,this.redRecoveryMetricReport=new r.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0,this.metricsAddTime=(L,M,k)=>{},this.metricsLogEvent=(L,M)=>{}}},"StatsCollector");l.default=d,d.INTERVAL_MS=1e3,d.CLIENT_TYPE="amazon-chime-sdk-js"},244839:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoLogEvent=void 0;var f;(function(u){u[u.InputAttached=0]="InputAttached",u[u.SendingFailed=1]="SendingFailed",u[u.SendingSuccess=2]="SendingSuccess"})(f=l.VideoLogEvent||(l.VideoLogEvent={})),l.default=f},579437:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(244839)),h=g(f(997265));let a=s(class extends h.default{run(){return u(this,void 0,void 0,function*(){const n=this.context.transceiverController;n.setPeer(this.context.peer),n.setupLocalTransceivers();const e=this.context.activeAudioInput;if(e){const i=e.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield n.setAudioInput(i.length?i[0]:null)}else yield n.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const t=this.context.activeVideoInput;if(t){const i=t.getVideoTracks(),o=i.length?i[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield n.setVideoInput(o),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const c=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();n.setEncodingParameters(c)}o&&this.context.statsCollector.logVideoEvent(m.default.InputAttached,this.context.videoDeviceInformation)}else yield n.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=n.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive)})}setAudioCodecPreferences(){const n=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,e=this.context.audioProfile.hasRedundancyEnabled();if(!n){this.context.logger.warn("Setting codec preferences not supported");return}const t=this.context.transceiverController.localAudioTransceiver(),{codecs:i}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(i,null,4)}`);const o=i.findIndex(c=>c.mimeType==="audio/red");if(!t){this.context.logger.error("audio transceiver is null");return}if(o>=0){const c=i[o];i.splice(o,1),e?(i.unshift(c),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),t.setCodecPreferences(i);return}this.context.logger.info("audio/red codec not supported")}constructor(n){super(n.logger),this.context=n,this.taskName="AttachMediaInputTask"}},"AttachMediaInputTask");l.default=a},997265:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(343833)),h=g(f(591778));let a=s(class{once(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return new m.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(n){this.parentTask=n}getStatus(){return this.status}logAndThrow(n){throw this.logger.info(n),new Error(n)}baseRun(n){return u(this,void 0,void 0,function*(){try{const e=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case h.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case h.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case h.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=h.default.RUNNING,yield n.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-e)} ms`)}catch(e){throw e}finally{this.status!==h.default.CANCELED&&(this.status=h.default.FINISHED)}})}baseCancel(n){if(this.status===h.default.CANCELED||this.status===h.default.FINISHED){this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`);return}this.logger.info(`canceling task ${this.name()}`),this.status=h.default.CANCELED,n.call(this)}constructor(n){this.logger=n,this.taskName="BaseTask",this.parentTask=null,this.status=h.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}},"BaseTask");l.default=a},369511:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(997265));let h=s(class extends m.default{run(){return u(this,void 0,void 0,function*(){this.context.resetConnectionSpecificState()})}constructor(r){super(r.logger),this.context=r,this.taskName="CleanRestartedSessionTask"}},"CleanRestartedSessionTask");l.default=h},155870:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(576442)),h=g(f(997265));let a=s(class extends h.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(n){throw n}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const n=this.context.videoTileController.getLocalVideoTile();n&&n.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}})}receiveWebSocketClosedEvent(){return new Promise((n,e)=>{let t=s(class{cancel(){this.signalingClient.removeObserver(this),e(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(c){c.type===m.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),n())}constructor(c){this.signalingClient=c}},"Interceptor");const i=new t(this.context.signalingClient);this.taskCanceler=i,this.context.signalingClient.registerObserver(i)})}constructor(n){super(n.logger),this.context=n,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}},"CleanStoppedSessionTask");l.default=a},780676:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(997265));let h=s(class extends m.default{removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const r in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[r]()}addPeerConnectionEventLogger(){const r=this.context.peer;r.addEventListener("connectionstatechange",()=>{this.context.logger.info(`peer connection state changed: ${r.connectionState}`)}),r.addEventListener("negotiationneeded",()=>{this.context.logger.info("peer connection negotiation is needed")}),r.addEventListener("icegatheringstatechange",()=>{this.context.logger.info(`peer connection ice gathering state changed: ${r.iceGatheringState}`)}),r.addEventListener("icecandidate",n=>{this.context.logger.info(`peer connection ice candidate: ${n.candidate?n.candidate.candidate:"(null)"}`)}),r.addEventListener("iceconnectionstatechange",()=>{this.context.logger.info(`peer connection ice connection state changed: ${r.iceConnectionState}`)})}run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this);const n=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};n.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),n.sdpSemantics="unified-plan",n.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(n),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)})}trackIsVideoInput(r){return this.context.transceiverController.useTransceivers()?(this.logger.debug(()=>"getting video track type"),this.context.transceiverController.trackIsVideoInput(r)):!1}addRemoteVideoTrack(r,n){var e;const t=n.id,i=this.context.videoStreamIndex.attendeeIdForTrack(t);let o,c;if(this.context.videoTileController.getVideoTileForAttendeeId?(c=this.context.videoTileController.getVideoTileForAttendeeId(i),o=!!(!((e=c==null?void 0:c.state())===null||e===void 0)&&e.boundVideoStream)):o=this.context.videoTileController.haveVideoTileForAttendeeId(i),o){this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${i}`);return}c||(c=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${c.id()}`));let p=this.context.videoStreamIndex.streamIdForTrack(t);typeof p>"u"&&(this.logger.warn(`stream not found for tile=${c.id()} track=${t}`),p=null);let S=this.context.videoStreamIndex.groupIdForStreamId(p);S===void 0&&(S=null);for(let M=0;M<this.trackEvents.length;M++){const k=this.trackEvents[M],w=n.getVideoTracks();if(w&&w.length){const N=w[0],T=s(()=>{this.context.logger.info(`received the ${k} event for tile=${c.id()} id=${r.id} streamId=${p}`),k==="ended"&&this.removeRemoteVideoTrack(r,c.state())},"callback");N.addEventListener(k,T),this.removeVideoTrackEventListeners[r.id]||(this.removeVideoTrackEventListeners[r.id]=[]),this.removeVideoTrackEventListeners[r.id].push(()=>{N.removeEventListener(k,T)})}}let d,y;if(r.getSettings){const M=r.getSettings();d=M.width,y=M.height}else{const M=r.getCapabilities();d=M.width,y=M.height}const E=this.context.videoStreamIndex.externalUserIdForTrack(t);c.bindVideoStream(i,!1,n,d,y,p,E,S),this.logger.info(`video track added, use tile=${c.id()} track=${t} streamId=${p} groupId=${S}`);const I="removetrack",A=n,L=s(()=>this.removeRemoteVideoTrack(r,c.state()),"trackRemovedHandler");this.removeTrackRemovedEventListeners[r.id]=()=>{A.removeEventListener(I,L),delete this.removeTrackRemovedEventListeners[r.id]},A.addEventListener(I,L)}removeRemoteVideoTrack(r,n){if(this.removeTrackRemovedEventListeners.hasOwnProperty(r.id)){this.removeTrackRemovedEventListeners[r.id]();for(const e of this.removeVideoTrackEventListeners[r.id])e();delete this.removeVideoTrackEventListeners[r.id]}this.logger.info(`video track ended, removing tile=${n.tileId} id=${r.id} stream=${n.streamId}`),n.streamId?this.context.videosPaused.remove(n.streamId):this.logger.warn(`no stream found for tile=${n.tileId}`),this.context.videoTileController.removeVideoTile(n.tileId)}constructor(r){super(r.logger),this.context=r,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=n=>{const e=n.track;if(this.context.logger.info(`received track event: kind=${e.kind} id=${e.id} label=${e.label}`),n.transceiver&&n.transceiver.currentDirection==="inactive")return;if(n.streams.length===0){this.context.logger.warn("Track event but no stream");return}const t=n.streams[0];e.kind==="audio"?this.context.audioMixController.bindAudioStream(t):e.kind==="video"&&!this.trackIsVideoInput(e)&&this.addRemoteVideoTrack(e,t)}}},"CreatePeerConnectionTask");l.default=h,h.REMOVE_HANDLER_INTERVAL_MS=1e4},749365:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(935451)),h=g(f(941900)),a=g(f(997265));let r=s(class extends a.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(!((t=(e=this.context.meetingSessionConfiguration)===null||e===void 0?void 0:e.urls)===null||t===void 0)&&t.audioHostURL)}sessionUsesVideo(){let t;this.context.transceiverController.useTransceivers()?t=this.context.transceiverController.hasVideoInput():t=this.context.videoTileController.hasStartedLocalVideoTile();const i=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),o=t||i;return this.context.logger.info(`uses video: ${o} (enabled: ${!0}, sending: ${t}, receiving: ${i})`),o}run(){return u(this,void 0,void 0,function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise((t,i)=>u(this,void 0,void 0,function*(){this.cancelPromise=o=>{i(o)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new h.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const o=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.IncompatibleSDP}`);this.context.previousSdpOffer=null,i(o);return}t()}catch(o){i(o)}finally{delete this.cancelPromise}}))})}constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}},"CreateSDPTask");l.default=r},755069:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(935451)),h=g(f(941900)),a=g(f(997265));let r=s(class nS extends a.default{removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return u(this,void 0,void 0,function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new h.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()){this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`);return}}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if((this.context.browserBehavior.hasFirefoxWebRTC()||this.context.peer.iceGatheringState==="complete")&&new h.default(this.context.peer.localDescription.sdp).hasCandidates()){this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering");return}try{yield new Promise((e,t)=>{this.cancelPromise=i=>{this.removeEventListener(),t(i)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if(this.context.peer.iceGatheringState==="complete"){this.removeEventListener(),e(),delete this.cancelPromise;return}},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=i=>{if(this.context.logger.info(`ice candidate: ${i.candidate?i.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),i.candidate&&(h.default.isRTPCandidate(i.candidate.candidate)&&this.context.iceCandidates.push(i.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1)){this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),delete this.cancelPromise;return}this.context.peer.iceGatheringState==="complete"&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),!new h.default(this.context.peer.localDescription.sdp).hasCandidates()||this.context.iceCandidates.length===0?(t(new Error("no ice candidates were gathered")),delete this.cancelPromise):(e(),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()})}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}})}constructor(e,t=nS.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}},"FinishGatheringICECandidatesTask");l.default=r,r.CHROME_VPN_TIMEOUT_MS=5e3},703766:function(U,l,f){"use strict";var u=this&&this.__createBinding||(Object.create?function(d,y,E,I){I===void 0&&(I=E),Object.defineProperty(d,I,{enumerable:!0,get:function(){return y[E]}})}:function(d,y,E,I){I===void 0&&(I=E),d[I]=y[E]}),g=this&&this.__setModuleDefault||(Object.create?function(d,y){Object.defineProperty(d,"default",{enumerable:!0,value:y})}:function(d,y){d.default=y}),m=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var y={};if(d!=null)for(var E in d)E!=="default"&&Object.prototype.hasOwnProperty.call(d,E)&&u(y,d,E);return g(y,d),y},h=this&&this.__awaiter||function(d,y,E,I){function A(L){return L instanceof E?L:new E(function(M){M(L)})}return s(A,"adopt"),new(E||(E=Promise))(function(L,M){function k(T){try{N(I.next(T))}catch(O){M(O)}}s(k,"fulfilled");function w(T){try{N(I.throw(T))}catch(O){M(O)}}s(w,"rejected");function N(T){T.done?L(T.value):A(T.value).then(k,w)}s(N,"step"),N((I=I.apply(d,y||[])).next())})},a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const r=a(f(499726)),n=a(f(935451)),e=a(f(302329)),t=m(f(849539)),i=a(f(576442)),o=a(f(228784)),c=f(50380),p=a(f(997265));let S=s(class extends p.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return h(this,void 0,void 0,function*(){const y=yield new Promise((E,I)=>{const A=this.context;A.turnCredentials=null;let L=s(class{cancel(){this.signalingClient.removeObserver(this),I(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(N){if(N.type===i.default.WebSocketClosed){let O=`The signaling connection was closed with code ${N.closeCode} and reason: ${N.closeReason}`;A.logger.warn(O);let D=n.default.SignalingBadRequest;N.closeCode===4410?(O="The meeting already ended.",A.logger.warn(O),D=n.default.MeetingEnded):N.closeCode>=4500&&N.closeCode<4600&&(D=n.default.SignalingInternalServerError),A.audioVideoController.handleMeetingSessionStatus(new r.default(D),new Error(O));return}if(N.type!==i.default.ReceivedSignalFrame)return;if(N.message.type===c.SdkSignalFrame.Type.JOIN_ACK){const O=N.message.joinack;if(!O){A.audioVideoController.handleMeetingSessionStatus(new r.default(n.default.SignalingRequestFailed),new Error("Join ACK message did not include expected frame"));return}if(O.videoSubscriptionLimit&&(A.videoSubscriptionLimit=O.videoSubscriptionLimit),A.serverSupportsCompression=O.wantsCompressedSdp,O.defaultServerSideNetworkAdaption!==void 0&&O.defaultServerSideNetworkAdaption!==t.default.Default&&A.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption!==void 0){const D=O.defaultServerSideNetworkAdaption;A.logger.info(`Overriding server side network adaption value to ${D}`),A.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(t.convertServerSideNetworkAdaptionEnumFromSignaled(D))}O&&O.turnCredentials?(A.turnCredentials=new e.default,A.turnCredentials.username=O.turnCredentials.username,A.turnCredentials.password=O.turnCredentials.password,A.turnCredentials.ttl=O.turnCredentials.ttl,A.turnCredentials.uris=O.turnCredentials.uris.map(D=>A.meetingSessionConfiguration.urls.urlRewriter(D)).filter(D=>!!D)):A.logger.error("missing TURN credentials in JoinAckFrame");return}if(N.message.type!==c.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const T=N.message.index;E(T)}constructor(N){this.signalingClient=N}},"IndexFrameInterceptor");const M=new L(this.context.signalingClient);this.context.signalingClient.registerObserver(M),this.taskCanceler=M,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const k=new o.default(this.context.meetingSessionConfiguration.applicationMetadata);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions!==void 0&&(k.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),k.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex!==void 0&&(k.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),k.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(k)});this.context.logger.info(`received first index ${JSON.stringify(y)}`),this.context.indexFrame=y})}constructor(y){super(y.logger),this.context=y,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}},"JoinAndReceiveIndexTask");l.default=S},103569:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(576442)),h=f(50380),a=g(f(997265));let r=s(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())})}receiveLeaveAck(){return new Promise((e,t)=>{let i=s(class{cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(p){if(p.isConnectionTerminated()){this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),e();return}p.type===m.default.ReceivedSignalFrame&&p.message.type===h.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}constructor(p,S){this.signalingClient=p,this.logger=S}},"Interceptor");const o=new i(this.context.signalingClient,this.context.logger);this.taskCanceler=o,this.context.signalingClient.registerObserver(o)})}constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}},"LeaveAndReceiveLeaveAckTask");l.default=r},141946:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(576442)),h=f(50380),a=g(f(997265));let r=s(class extends a.default{run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===m.default.ReceivedSignalFrame){if(e.message.type===h.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===h.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=t=>{this.context.signalingClient.mute(t)}}},"ListenForVolumeIndicatorsTask");l.default=r},956034:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(I,A,L,M){function k(w){return w instanceof L?w:new L(function(N){N(w)})}return s(k,"adopt"),new(L||(L=Promise))(function(w,N){function T(G){try{D(M.next(G))}catch(K){N(K)}}s(T,"fulfilled");function O(G){try{D(M.throw(G))}catch(K){N(K)}}s(O,"rejected");function D(G){G.done?w(G.value):k(G.value).then(T,O)}s(D,"step"),D((M=M.apply(I,A||[])).next())})},g=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(369475)),h=g(f(982782)),a=g(f(24227)),r=g(f(542814)),n=g(f(770479)),e=g(f(619473)),t=g(f(499726)),i=g(f(935451)),o=g(f(924520)),c=g(f(576442)),p=f(50380),S=g(f(228978)),d=f(823880),y=g(f(997265));let E=s(class extends y.default{removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)})}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(A){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(A){if(this.isResubscribeCheckPaused){this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),this.pendingMetricsReport=A;return}else this.pendingMetricsReport=void 0;const L=A.getObservableMetrics(),M=L.availableOutgoingBitrate,k=L.nackCountReceivedPerSecond;let w=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(A);const N=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(w=w||N,N){const T=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=T.truncate(this.context.videoSubscriptionLimit),T.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${N}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:M/1e3,nackCountPerSecond:k});const T=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();w=w||T,T&&(this.logger.info(`trigger resubscribe for up=${T}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters())}return w}metricsDidReceive(A){if(this.checkResubscribe(A)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const L=A.streamMetricReports,M=new Map;for(const k in L)L[k].mediaType===h.default.VIDEO&&L[k].direction===m.default.DOWNSTREAM&&M.set(L[k].streamId,L[k])}connectionHealthDidChange(A){A.consecutiveMissedPongs===0&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,A,()=>{this.context.audioVideoController.handleMeetingSessionStatus(new t.default(i.default.ConnectionHealthReconnect),null)}),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,A,()=>{var L;this.context.poorConnectionCount+=1;const M=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(L=this.context.eventController)===null||L===void 0||L.publishEvent("receivingAudioDropped",M),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver(k=>{d.Maybe.of(k.connectionDidSuggestStopVideo).map(w=>w.bind(k)())}):this.context.audioVideoController.forEachObserver(k=>{d.Maybe.of(k.connectionDidBecomePoor).map(w=>w.bind(k)())})},()=>{this.context.audioVideoController.forEachObserver(L=>{d.Maybe.of(L.connectionDidBecomeGood).map(M=>M.bind(L)())})});for(const L of this.videoEncodingHealthPolicies)this.applyHealthPolicy(L,A,()=>{switch(this.degradeVideoCodec(L.name),L.name){case e.default.VideoEncodingCpuHealth:this.context.statsCollector.videoCodecDegradationHighEncodeCpuDidReceive();break;case e.default.VideoEncodingFramerateHealth:this.context.statsCollector.videoCodecDegradationEncodeFailureDidReceive();break}});this.isMeetingConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,A,()=>{var L;const M=this.generateBaseAudioVideoEventAttributes();(L=this.context.eventController)===null||L===void 0||L.publishEvent("sendingAudioFailed",M)},()=>{var L;const M=this.generateBaseAudioVideoEventAttributes();(L=this.context.eventController)===null||L===void 0||L.publishEvent("sendingAudioRecovered",M)})}audioVideoDidStart(){this.isMeetingConnected=!0}audioVideoDidStartConnecting(A){this.isMeetingConnected=!1}audioVideoDidStop(A){this.isMeetingConnected=!1}applyHealthPolicy(A,L,M,k){A.update(L);const w=A.healthIfChanged();w!==null&&(this.logger.info(`${A.name} value is now ${w}`),w<=A.minimumHealth()?d.Maybe.of(M).map(N=>N.bind(this)()):d.Maybe.of(k).map(N=>N.bind(this)()))}handleBitrateFrame(A){this.currentAvailableStreamAvgBitrates=A,A.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${A.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",A.serverAvailableOutgoingBitrate*1e3))}handleSignalingClientEvent(A){var L;if(A.type===c.default.WebSocketClosed&&(A.closeCode===4410||A.closeCode>=4500&&A.closeCode<4600)||A.type===c.default.WebSocketError||A.type===c.default.WebSocketFailed){if(!this.hasSignalingError){const M=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(L=this.context.eventController)===null||L===void 0||L.publishEvent("signalingDropped",M),this.hasSignalingError=!0}}else A.type===c.default.WebSocketOpen&&(this.hasSignalingError=!1);if(A.type===c.default.ReceivedSignalFrame){if(A.message.type===p.SdkSignalFrame.Type.NOTIFICATION){switch(A.message.notification.level){case p.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${A.message.notification.message}`);break;case p.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${A.message.notification.message}`);break;case p.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${A.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${A.message.notification.level}: ${A.message.notification.message}`);break}return}if(A.message.bitrates){const k=A.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(k),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(A.message.bitrates)}const M=t.default.fromSignalFrame(A.message);A.message.type!==p.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&M.statusCode()!==i.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(M,null)}}degradeVideoCodec(A){if(this.context.meetingSupportedVideoSendCodecPreferences!==void 0&&this.context.meetingSupportedVideoSendCodecPreferences.length>1&&!(this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.h264ConstrainedBaselineProfile())||this.context.meetingSupportedVideoSendCodecPreferences[0].equals(o.default.vp8()))){const L=[];for(const M of this.context.videoSendCodecPreferences)M.equals(this.context.meetingSupportedVideoSendCodecPreferences[0])||L.push(M);L.length>0?(this.context.logger.info(`Downgrading codec from ${this.context.meetingSupportedVideoSendCodecPreferences[0].codecName} to ${L[0].codecName} due to ${A}`),this.context.degradedVideoSendCodecs.push(this.context.meetingSupportedVideoSendCodecPreferences[0]),this.context.meetingSupportedVideoSendCodecPreferences=L,this.context.audioVideoController.update({needsRenegotiation:!0})):this.context.logger.warn(`Degrading video codec failed since there is no alternative codec to select. Currently degraded codecs: ${this.context.degradedVideoSendCodecs.map(M=>M.codecName).join(",")}`)}}constructor(A,L,M){super(A.logger),this.context=A,this.initialConnectionHealthData=M,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.isMeetingConnected=!1,this.videoEncodingHealthPolicies=[],this.checkAndSendWeakSignalEvent=k=>{const w=k<1,N=this.prevSignalStrength<1,T=w?N?null:S.default.RedmicStartLoss:N?S.default.RedmicEndLoss:null;T&&this.context.statsCollector.logAudioEvent(T),this.prevSignalStrength=k},this.realtimeFatalErrorCallback=k=>{this.logger.error(`realtime error: ${k}: ${k.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new t.default(i.default.RealtimeApiFailed),k)},this.realtimeAttendeeIdPresenceHandler=(k,w)=>{var N;const T=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${T}`),T===k&&w&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,(N=this.context.eventController)===null||N===void 0||N.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:k,startTimeMs:w,iceGatheringDurationMs:N,attendeePresenceDurationMs:T,meetingStartDurationMs:O}=this.context;return{meetingDurationMs:w===null?0:Math.round(Date.now()-w),signalingOpenDurationMs:k,iceGatheringDurationMs:N,attendeePresenceDurationMs:T,meetingStartDurationMs:O}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const k=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},k),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new a.default(A.logger,Object.assign({},L),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new n.default(Object.assign({},L),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new r.default(A.logger,Object.assign({},L),this.initialConnectionHealthData.clone());for(const k of L.videoEncodingHealthPolicies)this.videoEncodingHealthPolicies.push(new k(Object.assign({},L),this.initialConnectionHealthData.clone()))}},"MonitorTask");l.default=E},385080:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(g){}},"NoOpTask");l.default=f},343833:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(938402)),m=u(f(509936));let h=s(class{name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const r of this.dependencies)r.cancel();this.logger.info(`Canceling ${this.name()}`),m.default.nextTick(()=>this.task.cancel()),this.canceled=!0,this.cancelPromise&&m.default.nextTick(()=>this.cancelPromise(new Error(`canceling ${this.name()}`)))}}logDependencies(){if(this.logger.getLogLevel()>g.default.INFO||!this.dependencies)return;const r=this.dependencies.filter(n=>n).map(n=>n.name()).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${r}`)}run(){if(this.promise)return this.promise;const r=this.dependencies?Promise.all(this.dependencies.map(n=>n==null?void 0:n.run())):Promise.resolve();return this.logDependencies(),this.ongoing=r.then(()=>this.task.run()),this.promise=new Promise((n,e)=>{this.cancelPromise=e,this.ongoing.then(n).catch(e)})}setParent(r){this.task.setParent(r)}constructor(r,n,e){this.logger=r,this.task=n,this.dependencies=e,this.canceled=!1}},"OnceTask");l.default=h},123460:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(112059)),h=g(f(576442)),a=g(f(997265));let r=s(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new m.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise((i,o)=>{let c=s(class{cancel(){this.signalingClient.removeObserver(this),o(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(d){switch(d.type){case h.default.WebSocketOpen:this.signalingClient.removeObserver(this),i();break;case h.default.WebSocketFailed:this.signalingClient.removeObserver(this),o(new Error("WebSocket connection failed"));break}}constructor(d){this.signalingClient=d}},"WebSocketOpenInterceptor");const p=new c(this.context.signalingClient);this.context.signalingClient.registerObserver(p),this.taskCanceler=p})}catch(i){throw i}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}})}constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}},"OpenSignalingConnectionTask");l.default=r},718754:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(997265));let h=s(class extends m.default{cancel(){for(const r of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${r.name()}`),r.cancel()}run(){return u(this,void 0,void 0,function*(){const r=[];for(const e of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${e.name()}`),r.push(e.run());const n=[];for(let e=0;e<r.length;e++){try{yield r[e]}catch(t){n.push(`task ${this.tasksToRunParallel[e].name()} failed: ${t.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[e].name()}`)}if(n.length>0){const e=n.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)})}constructor(r,n,e){super(r),this.taskName=n,this.tasksToRunParallel=e;for(const t of e)t.setParent(this)}},"ParallelGroupTask");l.default=h},874674:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(e,t,i,o){function c(p){return p instanceof i?p:new i(function(S){S(p)})}return s(c,"adopt"),new(i||(i=Promise))(function(p,S){function d(I){try{E(o.next(I))}catch(A){S(A)}}s(d,"fulfilled");function y(I){try{E(o.throw(I))}catch(A){S(A)}}s(y,"rejected");function E(I){I.done?p(I.value):c(I.value).then(d,y)}s(E,"step"),E((o=o.apply(e,t||[])).next())})},g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=f(719007),h=g(f(576442)),a=f(50380),r=g(f(997265));let n=s(class extends r.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed))})}receivePrimaryMeetingJoinAck(){return new Promise((t,i)=>{let o=s(class{cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed)),t()}handleSignalingClientEvent(S){S.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed)),t()),S.type===h.default.ReceivedSignalFrame&&S.message.type===a.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(m.MeetingSessionStatus.fromSignalFrame(S.message)),t())}constructor(S,d,y){this.signalingClient=S,this.completionCallback=d,this.logger=y}},"Interceptor");const c=new o(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=c,this.context.signalingClient.registerObserver(c)})}constructor(t,i,o){super(t.logger),this.context=t,this.credentials=i,this.completionCallback=o,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}},"PromoteToPrimaryMeetingTask");l.default=n},278559:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(997265));let h=s(class extends m.default{run(){var r,n;return u(this,void 0,void 0,function*(){if(!(!((n=(r=this.context.meetingSessionConfiguration)===null||r===void 0?void 0:r.urls)===null||n===void 0)&&n.audioHostURL)){this.context.logger.info("No audio connection: not acquiring audio input");return}if(this.context.activeAudioInput){this.context.logger.info("an active audio input exists");return}let e;try{e=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch{this.context.logger.warn("could not acquire audio input from current device")}e?this.context.activeAudioInput=e:this.context.logger.warn("an audio input is not available")})}constructor(r){super(r.logger),this.context=r,this.taskName="ReceiveAudioInputTask"}},"ReceiveAudioInputTask");l.default=h},115383:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(576442)),h=f(50380),a=g(f(997265));let r=s(class extends a.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(e){if(e.type!==m.default.ReceivedSignalFrame||e.message.type!==h.SdkSignalFrame.Type.PAUSE&&e.message.type!==h.SdkSignalFrame.Type.RESUME)return;const t=e.message.pause,i=e.message.type;if(this.context.logger.info(`received new ${i===h.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(t)}`),!t||this.context.videoTileController.getVideoTileForAttendeeId===void 0||this.context.videoDownlinkBandwidthPolicy.forEachObserver===void 0||this.context.videoStreamIndex.attendeeIdForGroupId===void 0)return;const o=t.groupIds.map(c=>{const p=this.context.videoStreamIndex.attendeeIdForGroupId(c);return this.context.videoTileController.getVideoTileForAttendeeId(p)});for(const c of o)c!==void 0&&(i===h.SdkSignalFrame.Type.PAUSE?c.state().paused||(this.serverPausedVideoTileIds.add(c.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(p=>{p.tileWillBePausedByDownlinkPolicy(c.id())}),c.pause()):c.state().paused&&this.serverPausedVideoTileIds.has(c.id())&&(this.serverPausedVideoTileIds.delete(c.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(p=>{p.tileWillBeUnpausedByDownlinkPolicy(c.id())}),c.unpause()))}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}},"ReceiveRemoteVideoPauseResume");l.default=r},579824:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(641501)),h=f(50380),a=g(f(997265));let r=s(class extends a.default{checkAndApplyVideoConstraint(e,t,i,o,c){return u(this,void 0,void 0,function*(){const p=t.getSettings();let S;if(e?S=this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:S=this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution,i>S.videoWidth||o>S.videoHeight||c>S.videoFrameRate){const d={width:{ideal:S.videoWidth},height:{ideal:S.videoHeight},frameRate:{ideal:S.videoFrameRate}};this.context.logger.warn(`Video track (content = ${e}) will be constrained to: ${JSON.stringify(d)} to remain below configured video quality settings, trackSettings: ${JSON.stringify(p)}`);try{yield t.applyConstraints(d)}catch{this.context.logger.info(`Could not apply constraint for video track (content = ${e})`)}}})}run(){return u(this,void 0,void 0,function*(){const e=this.context.videoDuplexMode===h.SdkStreamServiceType.RX||this.context.videoDuplexMode===h.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?h.SdkStreamServiceType.DUPLEX:h.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?h.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile()){this.context.logger.info("has not started local video tile"),this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([]));return}const t=this.context.videoTileController.getLocalVideoTile();let i;try{i=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch{this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const o=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(o.values()))}if(this.context.activeVideoInput=i,i){const o=i.getVideoTracks();if(!o||o.length===0)return;const c=this.context.meetingSessionConfiguration.credentials.attendeeId,p=new m.default(c).hasModality(m.default.MODALITY_CONTENT),S=o[0].getSettings();this.checkAndApplyVideoConstraint(p,o[0],S.width,S.height,S.frameRate);const d=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(c,!0,i,S.width,S.height,null,d);for(const y of o)this.logger.info(`Using video device label=${y.label} id=${y.id}`),this.context.videoDeviceInformation.current_camera_name=y.label,this.context.videoDeviceInformation.current_camera_id=y.id}})}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}},"ReceiveVideoInputTask");l.default=r},252528:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(o,c,p,S){function d(y){return y instanceof p?y:new p(function(E){E(y)})}return s(d,"adopt"),new(p||(p=Promise))(function(y,E){function I(M){try{L(S.next(M))}catch(k){E(k)}}s(I,"fulfilled");function A(M){try{L(S.throw(M))}catch(k){E(k)}}s(A,"rejected");function L(M){M.done?y(M.value):d(M.value).then(I,A)}s(L,"step"),L((S=S.apply(o,c||[])).next())})},g=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(122818)),h=g(f(641501)),a=g(f(924520)),r=g(f(576442)),n=f(50380),e=f(823880),t=g(f(997265));let i=s(class extends t.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(c){if(c.type!==r.default.ReceivedSignalFrame||c.message.type!==n.SdkSignalFrame.Type.INDEX)return;const p=c.message.index;this.context.logger.info(`received new index ${JSON.stringify(p)}`),this.handleIndexFrame(p)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(c){if(!c)return;if(this.isIngestionPaused){this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),this.pendingIndex=c;return}else this.pendingIndex=null;const p=this.context.audioVideoController.configuration.credentials.attendeeId;c.sources=c.sources.filter(A=>{const L=new h.default(A.attendeeId);return!(L.base()===p&&L.hasModality(h.default.MODALITY_CONTENT))});const{videoStreamIndex:S,videoDownlinkBandwidthPolicy:d,videoUplinkBandwidthPolicy:y}=this.context,E=S.allVideoSendingSourcesExcludingSelf(p);S.integrateIndexFrame(c),d.updateIndex(S),y.updateIndex(S),this.resubscribe(d,y),this.updateVideoAvailability(c),this.handleIndexVideosPausedAtSource(),c.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(c);const I=S.allVideoSendingSourcesExcludingSelf(p);this.areVideoSourcesEqual(E,I)||this.context.audioVideoController.forEachObserver(A=>{e.Maybe.of(A.remoteVideoSourcesDidChange).map(L=>L.bind(A)(I))})}areVideoSourcesEqual(c,p){if(c.length!==p.length)return!1;const S=s((E,I)=>E.attendee.attendeeId.localeCompare(I.attendee.attendeeId),"compare"),d=[...c].sort(S),y=[...p].sort(S);for(let E=0;E<d.length;E++)if(d[E].attendee.attendeeId!==y[E].attendee.attendeeId)return!1;return!0}resubscribe(c,p){const S=c.wantsResubscribe(),d=(this.context.videoDuplexMode===n.SdkStreamServiceType.TX||this.context.videoDuplexMode===n.SdkStreamServiceType.DUPLEX)&&p.wantsResubscribe(),y=S||d;if(this.logger.info(`should resubscribe: ${y} (downlink: ${S} uplink: ${d})`),!y)return;const E=c.chooseSubscriptions();this.context.videosToReceive=E.truncate(this.context.videoSubscriptionLimit),E.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=p.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${d} down=${S}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(c){if(!this.context.videosToReceive){this.logger.error("videosToReceive must be set in the meeting context.");return}const p=new m.default;p.remoteVideoAvailable=!this.context.videosToReceive.empty(),p.canStartLocalVideo=!c.atCapacity,(!this.context.lastKnownVideoAvailability||!this.context.lastKnownVideoAvailability.equal(p))&&(this.context.lastKnownVideoAvailability=p.clone(),this.context.audioVideoController.forEachObserver(S=>{e.Maybe.of(S.videoAvailabilityDidChange).map(d=>d.bind(S)(p.clone()))}))}handleSupportedVideoReceiveCodecIntersection(c){if(this.context.videoSendCodecPreferences===void 0)return;const p=[];let S=!1;for(const d of this.context.videoSendCodecPreferences){if(this.context.degradedVideoSendCodecs.some(y=>d.equals(y))){this.logger.info(`Skipping ${d.codecName} since the codec has been identfied as degraded`);continue}for(const y of c.supportedReceiveCodecIntersection)if(d.equals(a.default.fromSignaled(y))){p.push(d);break}}if(p.length>0){const d=p.find(y=>this.context.prioritizedSendVideoCodecCapabilities.some(E=>y.equals(E)));this.context.currentVideoSendCodec!==void 0&&(d===void 0||!this.context.currentVideoSendCodec.equals(d))&&(S=!0),this.context.meetingSupportedVideoSendCodecPreferences=p}else this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0;this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),S&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const c=this.context.videoStreamIndex.streamsPausedAtSource();for(const p of this.context.videoTileController.getAllVideoTiles()){const S=p.state();c.contain(S.streamId)?p.markPoorConnection()&&this.logger.info(`marks the tile ${S.tileId} as having a poor connection`):p.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${S.tileId} as having a poor connection`)}}constructor(c){super(c.logger),this.context=c,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}},"ReceiveVideoStreamIndexTask");l.default=i},155109:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(997265));let m=s(class extends g.default{run(){return this.fn().then(()=>{})}constructor(a,r,n="RunnableTask"){super(a),this.fn=r,this.taskName=n}},"RunnableTask");l.default=m},173636:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(e,t,i,o){function c(p){return p instanceof i?p:new i(function(S){S(p)})}return s(c,"adopt"),new(i||(i=Promise))(function(p,S){function d(I){try{E(o.next(I))}catch(A){S(A)}}s(d,"fulfilled");function y(I){try{E(o.throw(I))}catch(A){S(A)}}s(y,"rejected");function E(I){I.done?p(I.value):c(I.value).then(d,y)}s(E,"step"),E((o=o.apply(e,t||[])).next())})},g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(535624)),h=g(f(576442)),a=f(50380),r=g(f(997265));let n=s(class Iu extends r.default{run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(t){if(t.type===h.default.ReceivedSignalFrame&&t.message.type===a.SdkSignalFrame.Type.DATA_MESSAGE)for(const i of t.message.dataMessage.messages){const o=new m.default(i.ingestTimeNs/1e6,i.topic,i.data,i.senderAttendeeId,i.senderExternalUserId,i.ingestTimeNs===0);this.context.realtimeController.realtimeReceiveDataMessage(o)}}validateDataMessage(t,i,o){if(!Iu.TOPIC_REGEX.test(t))throw new Error("Invalid topic");if(i.length>Iu.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(o&&o<0)throw new Error("The life time of the message has to be non negative")}constructor(t){super(t.logger),this.context=t,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(i,o,c)=>{if(this.context.signalingClient.ready()){let p;o instanceof Uint8Array?p=o:typeof o=="string"?p=new TextEncoder().encode(o):p=new TextEncoder().encode(JSON.stringify(o)),this.validateDataMessage(i,p,c);const S=a.SdkDataMessagePayload.create();S.topic=i,S.lifetimeMs=c,S.data=p;const d=a.SdkDataMessageFrame.create();d.messages=[S],this.context.signalingClient.sendDataMessage(d)}else this.context.logger.error("Signaling client is not ready")}}},"SendAndReceiveDataMessagesTask");l.default=n,n.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),n.DATA_SIZE=2048},124207:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(997265)),h=g(f(591778));let a=s(class extends m.default{cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return u(this,void 0,void 0,function*(){for(const n of this.tasksToRunSerially){this.getStatus()===h.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${n.name()}`),this.currentTask=n,yield n.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${n.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)})}constructor(n,e,t){super(n),this.taskName=e,this.tasksToRunSerially=t,this.currentTask=null;for(const i of t)i.setParent(this)}},"SerialGroupTask");l.default=a},857995:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(e,t,i,o){function c(p){return p instanceof i?p:new i(function(S){S(p)})}return s(c,"adopt"),new(i||(i=Promise))(function(p,S){function d(I){try{E(o.next(I))}catch(A){S(A)}}s(d,"fulfilled");function y(I){try{E(o.throw(I))}catch(A){S(A)}}s(y,"rejected");function E(I){I.done?p(I.value):c(I.value).then(d,y)}s(E,"step"),E((o=o.apply(e,t||[])).next())})},g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(421537)),h=g(f(641501)),a=g(f(941900)),r=g(f(997265));let n=s(class extends r.default{cancel(){if(this.cancelPromise){const t=new Error(`canceling ${this.name()}`);this.cancelPromise(t),delete this.cancelPromise}}run(){return u(this,void 0,void 0,function*(){const t=this.context.peer;let o=this.context.sdpOfferInit.sdp;this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(o=new a.default(o).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension!==void 0&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(o=new a.default(o).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),new m.default().requiresDisablingH264Encoding()&&(o=new a.default(o).removeH264SupportFromSendSection().sdp);const c=this.context.audioVideoController.configuration.credentials.attendeeId;if(new h.default(c).hasModality(h.default.MODALITY_CONTENT)&&this.context.audioVideoController.configuration.enableSVC&&(o=new a.default(o).withStartingVideoSendBitrate(100).sdp),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new a.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(o=new a.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new a.default(o).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const d=new a.default(o).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(d)}this.logger.debug(()=>`local description is >>>${o}<<<`);const S={type:"offer",sdp:o,toJSON:null};yield new Promise((d,y)=>u(this,void 0,void 0,function*(){this.cancelPromise=E=>{y(E)};try{yield t.setLocalDescription(S),d()}catch(E){y(E)}finally{delete this.cancelPromise}})),this.context.logger.info("set local description")})}constructor(t){super(t.logger),this.context=t,this.taskName="SetLocalDescriptionTask"}},"SetLocalDescriptionTask");l.default=n},638212:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(e,t,i,o){function c(p){return p instanceof i?p:new i(function(S){S(p)})}return s(c,"adopt"),new(i||(i=Promise))(function(p,S){function d(I){try{E(o.next(I))}catch(A){S(A)}}s(d,"fulfilled");function y(I){try{E(o.throw(I))}catch(A){S(A)}}s(y,"rejected");function E(I){I.done?p(I.value):c(I.value).then(d,y)}s(E,"step"),E((o=o.apply(e,t||[])).next())})},g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(641501)),h=g(f(941900)),a=g(f(924520)),r=g(f(997265));let n=s(class extends r.default{cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var t;return u(this,void 0,void 0,function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let o=this.context.sdpAnswer;o=new h.default(o).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(o=new h.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new h.default(o).withStereoAudio().sdp)),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new h.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.prioritizedSendVideoCodecCapabilities=new h.default(o).prioritizedSendVideoCodecCapabilities(),this.context.currentVideoSendCodec=this.context.prioritizedSendVideoCodecCapabilities.length>0?this.context.prioritizedSendVideoCodecCapabilities[0]:void 0;const c=this.context.activeVideoInput;if(c!==void 0){const S=this.context.audioVideoController.configuration.credentials.attendeeId,d=new m.default(S).hasModality(m.default.MODALITY_CONTENT),y=c.getVideoTracks()[0];d&&(((t=this.context.currentVideoSendCodec)===null||t===void 0?void 0:t.codecName)===a.default.av1Main().codecName?(y.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${S}`)):this.context.audioVideoController.configuration.enableSVC&&(y.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${S}`)))}this.logger.info(`processed remote description is >>>${o}<<<`);const p={type:"answer",sdp:o,toJSON:null};try{yield this.createICEConnectionCompletedPromise(p)}catch(S){throw S}})}createICEConnectionCompletedPromise(t){return new Promise((i,o)=>u(this,void 0,void 0,function*(){const c=s(()=>{(this.context.peer.iceConnectionState==="connected"||this.context.peer.iceConnectionState==="completed")&&(this.context.peer.removeEventListener("iceconnectionstatechange",c),i())},"checkConnectionCompleted");this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",c),o(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",c);try{yield this.context.peer.setRemoteDescription(t),this.logger.info("set remote description, waiting for ICE connection"),c()}catch(p){o(p)}}))}constructor(t){super(t.logger),this.context=t,this.taskName="SetRemoteDescriptionTask"}},"SetRemoteDescriptionTask");l.default=n},737155:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(S,d,y,E){function I(A){return A instanceof y?A:new y(function(L){L(A)})}return s(I,"adopt"),new(y||(y=Promise))(function(A,L){function M(N){try{w(E.next(N))}catch(T){L(T)}}s(M,"fulfilled");function k(N){try{w(E.throw(N))}catch(T){L(T)}}s(k,"rejected");function w(N){N.done?A(N.value):I(N.value).then(M,k)}s(w,"step"),w((E=E.apply(S,d||[])).next())})},g=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(499726)),h=g(f(935451)),a=g(f(941900)),r=g(f(307210)),n=f(849539),e=g(f(576442)),t=g(f(935214)),i=f(50380),o=f(586283),c=g(f(997265));let p=s(class extends c.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){let d="";if(this.context.peer&&this.context.peer.localDescription&&(d=new a.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let w=0,N=0;this.context.videoCaptureAndEncodeParameter&&(w=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),N=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const T={rid:"hi",maxBitrate:N*1e3,maxFramerate:w,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([T])}this.context.videoStreamIndex.subscribeFrameSent();const y=this.fixUpSubscriptionOrder(d,this.context.videoSubscriptions),E=this.context.videoDuplexMode===i.SdkStreamServiceType.TX||this.context.videoDuplexMode===i.SdkStreamServiceType.DUPLEX;let I,A=d;if((this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension===void 0||!this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension())&&(A=new a.default(A).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const w=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";I=this.textCompressor.compress(A,w),this.context.logger.info(`Compressed the SDP message from ${A.length} to ${I.length} bytes.`),d=""}this.context.previousSdpOffer=new a.default(d);const L=new t.default(this.context.meetingSessionConfiguration.credentials.attendeeId,d,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,y,E,this.context.videoStreamIndex.localStreamDescriptions(),!0,I);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!n.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())&&this.context.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&(L.videoSubscriptionConfiguration=o.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,y.map(w=>w===0?0:this.context.videoStreamIndex.groupIdForStreamId(w)),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(L)}`),this.context.signalingClient.subscribe(L);const M=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(M)}`);let k="";M.compressedSdpAnswer&&M.compressedSdpAnswer.length?(k=this.textCompressor.decompress(M.compressedSdpAnswer,this.context.previousSdpAnswerAsString),k.length===0&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${M.compressedSdpAnswer.length} to ${k.length} bytes.`),this.context.sdpAnswer=k):this.context.sdpAnswer=M.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(M)})}fixUpSubscriptionOrder(d,y){if(this.context.transceiverController.getMidForStreamId===void 0)return y;const E=new Map;for(const L of y){const M=this.context.transceiverController.getMidForStreamId(L);if(M===void 0){L!==0&&this.logger.warn(`Could not find MID for stream ID: ${L}`);continue}E.set(M,L)}const I=new a.default(d).mediaSections(),A=[];for(const L of I)if(L.mediaType==="video")if(L.direction==="recvonly"){const M=E.get(L.mid);if(M===void 0){this.logger.warn(`Could not find stream ID for MID: ${L.mid}`);continue}A.push(M)}else A.push(0);return this.logger.info(`Fixed up ${JSON.stringify(y)} to ${JSON.stringify(A)} (may be same))}`),A}receiveSubscribeAck(){return new Promise((d,y)=>{const E=this.context;let I=s(class{cancel(){this.signalingClient.removeObserver(this),y(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(M){if(M.isConnectionTerminated()){const w=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${M.closeCode} and reason: ${M.closeReason}`;E.logger.warn(w);let N=h.default.TaskFailed;M.closeCode>=4500&&M.closeCode<4600&&(N=h.default.SignalingInternalServerError),E.audioVideoController.handleMeetingSessionStatus(new m.default(N),new Error(w));return}if(M.type!==e.default.ReceivedSignalFrame||M.message.type!==i.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const k=M.message.suback;d(k)}constructor(M){this.signalingClient=M}},"Interceptor");const A=new I(this.context.signalingClient);this.context.signalingClient.registerObserver(A),this.taskCanceler=A})}constructor(d){super(d.logger),this.context=d,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new r.default(d.logger)}},"SubscribeAndReceiveSubscribeAckTask");l.default=p},591778:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var f;(function(u){u.IDLE="IDLE",u.RUNNING="RUNNING",u.CANCELED="CANCELED",u.FINISHED="FINISHED"})(f||(f={})),l.default=f},208803:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(20202)),h=g(f(997265));let a=s(class extends h.default{cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return u(this,void 0,void 0,function*(){const n=new m.default(this.timeoutMs);n.start(()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()});try{yield this.taskToRunBeforeTimeout.run()}finally{n.stop()}this.logger.info(`timeout task ${this.name()} completed`)})}constructor(n,e,t){super(n),this.taskToRunBeforeTimeout=e,this.timeoutMs=t,this.taskName=`Timeout${this.timeoutMs}ms`,e.setParent(this)}},"TimeoutTask");l.default=a},386367:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(935451)),h=g(f(997265));let a=s(class extends h.default{cancel(){if(this.cancelPromise){const n=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.NoAttendeePresent}`);this.cancelPromise(n),delete this.cancelPromise}}run(){return u(this,void 0,void 0,function*(){const n=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise((e,t)=>{const i=s((o,c,p,S,d)=>{n===o&&c&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),e(),delete this.cancelPromise)},"handler");this.cancelPromise=o=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),t(o)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)})})}constructor(n){super(n.logger),this.context=n,this.taskName="WaitForAttendeePresenceTask"}},"WaitForAttendeePresenceTask");l.default=a},254537:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(t,i,o,c){function p(S){return S instanceof o?S:new o(function(d){d(S)})}return s(p,"adopt"),new(o||(o=Promise))(function(S,d){function y(A){try{I(c.next(A))}catch(L){d(L)}}s(y,"fulfilled");function E(A){try{I(c.throw(A))}catch(L){d(L)}}s(E,"rejected");function I(A){A.done?S(A.value):p(A.value).then(y,E)}s(I,"step"),I((c=c.apply(t,i||[])).next())})},g=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(506664)),h=g(f(793497)),a=g(f(671024)),r=g(f(152480)),n=g(f(509936));let e=s(class{setEncodingParameters(i){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!i||i.size===0)return;const c=Array.from(i.values()),p=o.getParameters();if(!p.encodings||p.encodings.length===0)p.encodings=c;else for(const S of p.encodings)for(const d of c){if((S.rid||d.rid)&&S.rid!==d.rid)continue;let y;for(y in d)y==="rid"||y==="codecPayloadType"||d.hasOwnProperty(y)&&(S[y]=d[y])}yield o.setParameters(p)})}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(i){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!o||i<=0)return;const c=o.getParameters();c.encodings||(c.encodings=[{}]);for(const p of c.encodings)p.maxBitrate=i*1e3;yield o.setParameters(c)})}setPeer(i){this.peer=i}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&typeof this.peer.getTransceivers<"u"}hasVideoInput(){return!(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")}trackIsVideoInput(i){return this._localCameraTransceiver?i===this._localCameraTransceiver.sender.track||i===this._localCameraTransceiver.receiver.track:!1}setupLocalTransceivers(){var i,o;this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((o=(i=this.meetingSessionContext)===null||i===void 0?void 0:i.audioProfile)===null||o===void 0)&&o.hasRedundancyEnabled()&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(i){return u(this,void 0,void 0,function*(){return!this._localAudioTransceiver||this._localAudioTransceiver.direction!=="sendrecv"?(this.logger.info("audio transceiver direction is not set up or not activated"),!1):(yield this._localAudioTransceiver.sender.replaceTrack(i),!0)})}setAudioInput(i){return u(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localAudioTransceiver,i)})}setVideoInput(i){return u(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localCameraTransceiver,i)})}updateVideoTransceivers(i,o){if(!this.useTransceivers())return o.array();const c=this.peer.getTransceivers();return this.videoSubscriptions=[0],o=o.clone(),this.updateTransceivers(c,i,o),this.logger.debug(()=>this.debugDumpTransceivers()),this.videoSubscriptions}updateTransceivers(i,o,c){const p=c.array();i.length!==0&&!i[0].stop?(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(i,o,p)):i.length!==0&&this.updateTransceiverWithStop(i,o,p);for(const S of p){const d=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(S,d),this.groupIdToTransceiver.set(o.groupIdForStreamId(S),d),this.videoSubscriptions.push(S),this.logger.info(`adding transceiver mid: ${d.mid} subscription: ${S} direction: recvonly`)}}updateTransceiverWithStop(i,o,c){let p=1;this.videoSubscriptions=[0];for(const S of i){if(S===this._localCameraTransceiver||!this.transceiverIsVideo(S)||!S.mid)continue;let d=!1;const y=o.streamIdForTrack("v_"+S.mid);if(S.direction!=="inactive"&&y!==void 0){for(const[E,I]of c.entries())if(o.StreamIdsInSameGroup(y,I)){S.direction="recvonly",this.videoSubscriptions[p]=I,d=!0,this.streamIdToTransceiver.delete(y),this.streamIdToTransceiver.set(I,S),c.splice(E,1);break}}if(!d){this.videoSubscriptions[p]=0,this.logger.info(`Stopping MID: ${S.mid}, direction: ${S.direction}, current direction: ${S.currentDirection}`),S.stop();for(const[E,I]of this.streamIdToTransceiver.entries())S.mid===I.mid&&(this.streamIdToTransceiver.delete(E),this.groupIdToTransceiver.delete(o.groupIdForStreamId(E)))}p+=1}}updateTransceiverWithoutStop(i,o,c){let p=1;for(const S of i)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(this.videoSubscriptions[p]=0,S.direction!=="inactive"){const d=o.streamIdForTrack("v_"+S.mid);if(d!==void 0){for(const[y,E]of c.entries())if(o.StreamIdsInSameGroup(d,E)){S.direction="recvonly",this.videoSubscriptions[p]=E,this.streamIdToTransceiver.delete(d),this.streamIdToTransceiver.set(E,S),c.splice(y,1);break}}}p+=1}p=1;for(const S of i)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(S.direction==="inactive"&&c.length>0){S.direction="recvonly";const d=c.shift();this.videoSubscriptions[p]=d,this.streamIdToTransceiver.set(d,S),this.groupIdToTransceiver.set(o.groupIdForStreamId(d),S)}else if(this.videoSubscriptions[p]===0){S.direction="inactive";for(const[d,y]of this.streamIdToTransceiver.entries())S===y&&(this.streamIdToTransceiver.delete(d),this.groupIdToTransceiver.delete(o.groupIdForStreamId(d)))}p+=1}}getMidForStreamId(i){var o;return(o=this.streamIdToTransceiver.get(i))===null||o===void 0?void 0:o.mid}setStreamIdForMid(i,o){for(const[c,p]of this.streamIdToTransceiver.entries())if(p.mid===i){this.streamIdToTransceiver.delete(c),this.streamIdToTransceiver.set(o,p);return}}getMidForGroupId(i){var o,c;return(c=(o=this.groupIdToTransceiver.get(i))===null||o===void 0?void 0:o.mid)!==null&&c!==void 0?c:void 0}transceiverIsVideo(i){return i.receiver&&i.receiver.track&&i.receiver.track.kind==="video"||i.sender&&i.sender.track&&i.sender.track.kind==="video"}debugDumpTransceivers(){let i="",o=0;for(const c of this.peer.getTransceivers())this.transceiverIsVideo(c)&&(i+=`transceiver index=${o} mid=${c.mid} subscription=${this.videoSubscriptions[o]} direction=${c.direction}
`,o+=1);return i}setTransceiverInput(i,o){return u(this,void 0,void 0,function*(){i&&(o?i.direction="sendrecv":i.direction="inactive",yield i.sender.replaceTrack(o))})}forEachRedMetricsObserver(i){for(const o of this.redMetricsObservers)n.default.nextTick(()=>{this.redMetricsObservers.has(o)&&o.recoveryMetricsDidReceive(i)})}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new m.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var i,o;const c=!!window.RTCRtpScriptTransform,p=!!RTCRtpSender.prototype.createEncodedStreams;if(c)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else if(p)this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream");else throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([r.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(S){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${S}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),S}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=S=>{if(S.data.type==="REDWorkerLog")this.logger.info(S.data.log);else if(S.data.type==="RedundantAudioEncoderStats"){const d=new h.default;d.currentTimestampMs=Date.now(),d.ssrc=S.data.ssrc,d.totalAudioPacketsLost=S.data.totalAudioPacketsLost,d.totalAudioPacketsExpected=S.data.totalAudioPacketsExpected,d.totalAudioPacketsRecoveredRed=S.data.totalAudioPacketsRecoveredRed,d.totalAudioPacketsRecoveredFec=S.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(d)}},c)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(p){const S=this._localAudioTransceiver.sender.createEncodedStreams(),d=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:S,receive:d},[S.readable,S.writable,d.readable,d.writable])}(i=this.meetingSessionContext)===null||i===void 0||i.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector)}addTransceiver(i,o){var c;const p=this.peer.addTransceiver(i,o);if(!(!((c=this.peer.getConfiguration())===null||c===void 0)&&c.encodedInsertableStreams)||!this.audioRedWorker)return p;const S=!!window.RTCRtpScriptTransform,d=!!RTCRtpSender.prototype.createEncodedStreams;if(S)p.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),p.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(d){const y=p.sender.createEncodedStreams(),E=p.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"PassthroughTransform",send:y,receive:E},[y.readable,y.writable,E.readable,E.writable])}return p}destroyAudioRedWorkerAndStates(){var i,o;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,(i=this.meetingSessionContext)===null||i===void 0||i.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector))}setAudioPayloadTypes(i){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:i.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:i.get("opus")}))}metricsDidReceive(i){const{currentTimestampMs:o}=i,c=i.getRTCStatsReport();let p=0,S=0,d=0;c.forEach(M=>{M.kind==="audio"&&(M.type==="outbound-rtp"?S=M.packetsSent:M.type==="remote-inbound-rtp"&&(p=M.timestamp,d=M.packetsLost))}),(this.audioMetricsHistory.length===0||p>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&S>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:p,totalPacketsSent:S,totalPacketsLost:d}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const y=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),E=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),I=Math.max(y,E),[A,L]=a.default.getNumRedundantEncodingsForPacketLoss(I);if(L){this.lastHighPacketLossEventTimestampMs=o,this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=o);return}else if(!this.audioRedEnabled){const M=o-this.lastAudioRedTurnOffTimestampMs,k=o-this.lastHighPacketLossEventTimestampMs;if(M>=this.audioRedPacketLossLongEvalPeriodMs&&k<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(o)}this.shouldUpdateAudioRedWorkerEncodings(o,A)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:A})}maybeResetHoldDownTimer(i){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=i)}lossPercent(i){if(this.audioMetricsHistory.length<2)return 0;const o=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,c=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,p=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let S=this.audioMetricsHistory.length-2;S>=0;S--)if(o-this.audioMetricsHistory[S].timestampMs>=i){const d=p-this.audioMetricsHistory[S].totalPacketsLost,y=c-this.audioMetricsHistory[S].totalPacketsSent,E=100*(d/y);return Math.max(0,Math.min(E,100))}return 0}shouldUpdateAudioRedWorkerEncodings(i,o){return this.currentNumRedundantEncodings===o?(this.maybeResetHoldDownTimer(i),!1):o<this.currentNumRedundantEncodings&&i-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs?!1:(this.currentNumRedundantEncodings=o,this.maybeResetHoldDownTimer(i),!0)}addRedundantAudioRecoveryMetricsObserver(i){this.redMetricsObservers.add(i)}removeRedundantAudioRecoveryMetricsObserver(i){this.redMetricsObservers.delete(i)}constructor(i,o,c){this.logger=i,this.browserBehavior=o,this.meetingSessionContext=c,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5*1e3,this.audioRedPacketLossLongEvalPeriodMs=15*1e3,this.audioRedHoldDownTimeMs=5*60*1e3,this.redRecoveryTimeMs=1*60*1e3}},"DefaultTransceiverController");l.default=e},935385:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(660937));let h=s(class jl extends m.default{setEncodingParameters(r){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const n=this._localCameraTransceiver.sender,e=Array.from(r.values());if(e.length<=0)return;const t=n.getParameters();if(!t.encodings)t.encodings=e;else for(let i=0;i<t.encodings.length;i++)t.encodings[i].rid===m.default.LOW_LEVEL_NAME&&this.copyEncodingParams(r.get(m.default.LOW_LEVEL_NAME),t.encodings[i]),t.encodings[i].rid===m.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(r.get(m.default.HIGH_LEVEL_NAME),t.encodings[i]);yield n.setParameters(t),this.logVideoTransceiverParameters()})}constructor(r,n,e){super(r,n,e);let t=2;this.videoQualityControlParameterMap=new Map;for(let i=0;i<jl.NAME_ARR_ASCENDING.length;i++){const o=jl.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:jl.BITRATE_ARR_ASCENDING[i]*1e3}),t=t/2}}},"SimulcastContentShareTransceiverController");l.default=h,h.NAME_ARR_ASCENDING=["low","hi"],h.BITRATE_ARR_ASCENDING=[300,1200]},660937:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(254537));let h=s(class lr extends m.default{setEncodingParameters(r){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const n=this._localCameraTransceiver.sender,e=Array.from(r.values());if(e.length<=0)return;const t=n.getParameters();if(!t.encodings)t.encodings=e;else for(const i of t.encodings)i.rid===lr.LOW_LEVEL_NAME&&this.copyEncodingParams(r.get(lr.LOW_LEVEL_NAME),i),i.rid===lr.MID_LEVEL_NAME&&this.copyEncodingParams(r.get(lr.MID_LEVEL_NAME),i),i.rid===lr.HIGH_LEVEL_NAME&&this.copyEncodingParams(r.get(lr.HIGH_LEVEL_NAME),i);yield n.setParameters(t),this.logVideoTransceiverParameters()})}setVideoSendingBitrateKbps(r){return u(this,void 0,void 0,function*(){})}setupLocalTransceivers(){var r,n;if(this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((n=(r=this.meetingSessionContext)===null||r===void 0?void 0:r.audioProfile)===null||n===void 0)&&n.hasRedundancyEnabled()&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const n=this._localCameraTransceiver.sender.getParameters().encodings;let e=`simulcast: current encoding parameters 
`;for(const t of n)e+=`rid=${t.rid} maxBitrate=${t.maxBitrate} active=${t.active} scaleDownBy=${t.scaleResolutionDownBy} maxFrameRate = ${t.maxFramerate} 
`;this.logger.info(e)}copyEncodingParams(r,n){n.active=r.active,n.maxBitrate=r.maxBitrate,n.scaleResolutionDownBy=r.scaleResolutionDownBy,n.maxFramerate=r.maxFramerate}constructor(r,n,e){super(r,n,e),this.videoQualityControlParameterMap=new Map;let t=4;for(let i=0;i<lr.NAME_ARR_ASCENDING.length;i++){const o=lr.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:lr.BITRATE_ARR_ASCENDING[i]*1e3}),t=t/2}}},"SimulcastTransceiverController");l.default=h,h.LOW_LEVEL_NAME="low",h.MID_LEVEL_NAME="mid",h.HIGH_LEVEL_NAME="hi",h.NAME_ARR_ASCENDING=["low","mid","hi"],h.BITRATE_ARR_ASCENDING=[200,400,1100]},395181:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(254537));let m=s(class extends g.default{setupLocalTransceivers(){this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}constructor(a,r,n){super(a,r,n)}},"VideoOnlyTransceiverController");l.default=m},974511:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const u=f(50236);l.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";let g=s(class{subscribeToTranscriptEvent(h){this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC,a=>{for(const r of u.TranscriptEventConverter.from(a))for(const n of this.transcriptEventCallbacks)n(r)}),this.transcriptEventCallbacks.add(h)}unsubscribeFromTranscriptEvent(h){this.transcriptEventCallbacks.delete(h),this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}constructor(h){this.realtimeController=h,this.transcriptEventCallbacks=new Set}},"DefaultTranscriptionController");l.default=g},113382:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"Transcript");l.default=f},5127:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"TranscriptAlternative");l.default=f},586749:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"TranscriptEntity");l.default=f},50236:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.TranscriptEventConverter=void 0;const g=f(50380),m=u(f(113382)),h=u(f(937252)),a=u(f(596028)),r=u(f(773033)),n={[g.SdkTranscriptionStatus.Type.STARTED]:a.default.STARTED,[g.SdkTranscriptionStatus.Type.INTERRUPTED]:a.default.INTERRUPTED,[g.SdkTranscriptionStatus.Type.RESUMED]:a.default.RESUMED,[g.SdkTranscriptionStatus.Type.STOPPED]:a.default.STOPPED,[g.SdkTranscriptionStatus.Type.FAILED]:a.default.FAILED};let e=s(class{static from(i){let o;try{o=g.SdkTranscriptFrame.decode(i.data)}catch(p){throw new Error("Cannot decode transcript data message: "+p)}const c=[];for(const p of o.events)if(p.status){const S=n[p.status.type];if(!S)continue;const d=new h.default;d.type=S,d.eventTimeMs=p.status.eventTime,d.transcriptionRegion=p.status.transcriptionRegion,d.transcriptionConfiguration=p.status.transcriptionConfiguration,p.status.message&&(d.message=p.status.message),c.push(d)}else if(p.transcript){const S=new m.default;S.results=[];for(const d of p.transcript.results){const y={channelId:d.channelId,isPartial:d.isPartial,resultId:d.resultId,startTimeMs:d.startTime,endTimeMs:d.endTime,alternatives:[]};if(d.languageCode&&(y.languageCode=d.languageCode),d.languageIdentification&&d.languageIdentification.length>0){y.languageIdentification=[];for(const E of d.languageIdentification){const I={languageCode:E.languageCode,score:E.score};y.languageIdentification.push(I)}}for(const E of d.alternatives){const I={items:[],transcript:E.transcript};for(const A of E.items){const L={content:A.content,attendee:{attendeeId:A.speakerAttendeeId,externalUserId:A.speakerExternalUserId},startTimeMs:A.startTime,endTimeMs:A.endTime,type:null};switch(A.vocabularyFilterMatch&&(L.vocabularyFilterMatch=A.vocabularyFilterMatch),A.hasOwnProperty("stable")&&(L.stable=A.stable),A.hasOwnProperty("confidence")&&(L.confidence=A.confidence),A.type){case g.SdkTranscriptItem.Type.PRONUNCIATION:L.type=r.default.PRONUNCIATION;break;case g.SdkTranscriptItem.Type.PUNCTUATION:L.type=r.default.PUNCTUATION;break}I.items.push(L)}for(const A of E.entities){I.entities||(I.entities=[]);const L={category:A.category,confidence:A.confidence,content:A.content,startTimeMs:A.startTime,endTimeMs:A.endTime};A.type&&(L.type=A.type),I.entities.push(L)}y.alternatives.push(I)}S.results.push(y)}c.push(S)}return c}},"TranscriptEventConverter");l.TranscriptEventConverter=e},364809:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"TranscriptItem");l.default=f},773033:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var f;(function(u){u.PRONUNCIATION="pronunciation",u.PUNCTUATION="punctuation"})(f||(f={})),l.default=f},550356:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"TranscriptLanguageWithScore");l.default=f},896907:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"TranscriptResult");l.default=f},937252:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"TranscriptionStatus");l.default=f},596028:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var f;(function(u){u.STARTED="started",u.INTERRUPTED="interrupted",u.RESUMED="resumed",u.STOPPED="stopped",u.FAILED="failed"})(f||(f={})),l.default=f},820355:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=f(877232),m=u(f(508338));let h=s(class wo{getParserResult(){var r,n;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:((r=this.parserResult)===null||r===void 0?void 0:r.os.name)||wo.UNAVAILABLE,osVersion:((n=this.parserResult)===null||n===void 0?void 0:n.os.version)||wo.UNAVAILABLE,sdkVersion:m.default.sdkVersion,sdkName:m.default.sdkName}}constructor(r){var n,e,t,i,o,c,p;try{this.parserResult=navigator&&navigator.userAgent?new g.UAParser(navigator.userAgent).getResult():void 0}catch(S){r.error(S.message)}this.browserMajorVersion=((t=(e=(n=this.parserResult)===null||n===void 0?void 0:n.browser)===null||e===void 0?void 0:e.version)===null||t===void 0?void 0:t.split(".")[0])||wo.UNAVAILABLE,this.browserName=((i=this.parserResult)===null||i===void 0?void 0:i.browser.name)||wo.UNAVAILABLE,this.browserVersion=((o=this.parserResult)===null||o===void 0?void 0:o.browser.version)||wo.UNAVAILABLE,this.deviceName=[((c=this.parserResult)===null||c===void 0?void 0:c.device.vendor)||"",((p=this.parserResult)===null||p===void 0?void 0:p.device.model)||""].join(" ").trim()||wo.UNAVAILABLE}},"DefaultUserAgentParser");l.default=h,h.UNAVAILABLE="Unavailable"},574613:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{add(g){return new Promise((m,h)=>{this.queue=this.queue.then(g).then(m).catch(h)})}constructor(){this.queue=Promise.resolve()}},"PromiseQueue");l.default=f},823880:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.None=l.Some=l.Maybe=void 0;let f=s(class{static of(h){return h==null?g.of():u.of(h)}},"Maybe");l.Maybe=f;let u=s(class iS{map(h){return f.of(h(this.value))}flatMap(h){return h(this.value)}get(){return this.value}getOrElse(h){return this.value}defaulting(h){return f.of(this.getOrElse(h))}static of(h){if(h==null)throw new Error("value is ${value}");return new iS(h)}constructor(h){this.value=h,this.isSome=!0,this.isNone=!1}},"Some");l.Some=u;let g=s(class $l{get(){throw new Error("value is null")}getOrElse(h){return h}map(h){return new $l}flatMap(h){return new $l}defaulting(h){return f.of(this.getOrElse(h))}static of(){return new $l}constructor(){this.isSome=!1,this.isNone=!0}},"None");l.None=g},450804:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.getRandomValues=l.getFormattedOffset=l.getDefaultAssetSpec=l.toLowerCasePropertyNames=l.isIFramed=l.wait=void 0;const g=u(f(508338));function m(t){return new Promise(i=>setTimeout(i,t))}s(m,"wait"),l.wait=m;function h(){var t;try{return((t=window.frameElement)===null||t===void 0?void 0:t.nodeName)==="IFRAME"||parent!==top}catch{return!0}}s(h,"isIFramed"),l.isIFramed=h;function a(t){return t===null?null:typeof t!="object"?t:Array.isArray(t)?t.map(a):Object.keys(t).reduce((i,o)=>{const c=t[o],p=typeof c=="object"?a(c):c;return i[o.toLowerCase()]=p,i},{})}s(a,"toLowerCasePropertyNames"),l.toLowerCasePropertyNames=a;function r(){const t=g.default.sdkVersionSemVer;return{assetGroup:`sdk-${t.major}.${t.minor}`}}s(r,"getDefaultAssetSpec"),l.getDefaultAssetSpec=r;function n(t){const i=Math.abs(t),o=t<=0?"+":"-",c=Math.floor(i/60).toString().padStart(2,"0"),p=Math.floor(i%60).toString().padStart(2,"0");return`${o}${c}:${p}`}s(n,"getFormattedOffset"),l.getFormattedOffset=n;function e(t){try{window.crypto.getRandomValues(t)}catch{new DataView(t.buffer).setUint32(0,Math.trunc(Math.random()*Math.pow(2,32)),!0)}}s(e,"getRandomValues"),l.getRandomValues=e},508338:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(421537)),m=u(f(850996));let h=s(class Ya{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return m.default.semverString}static get sdkVersionSemVer(){var r,n,e,t;const i=m.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:(r=i==null?void 0:i.groups)===null||r===void 0?void 0:r.major,minor:(n=i==null?void 0:i.groups)===null||n===void 0?void 0:n.minor,patch:(e=i==null?void 0:i.groups)===null||e===void 0?void 0:e.patch,preRelease:(t=i==null?void 0:i.groups)===null||t===void 0?void 0:t.preRelease}}static get buildSHA(){return m.default.hash.substr(1)}static get sdkUserAgentLowResolution(){const r=new g.default;return`${r.name()}-${r.majorVersion()}`}static urlWithVersion(r){const n=new URL(r);return n.searchParams.append(Ya.X_AMZN_VERSION,Ya.sdkVersion),n.searchParams.append(Ya.X_AMZN_USER_AGENT,Ya.sdkUserAgentLowResolution),n.toString()}},"Versioning");l.default=h,h.X_AMZN_VERSION="X-Amzn-Version",h.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},850996:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default={hash:"4040baf",raw:"v3.22.0",semverString:"3.22.0"}},589417:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class rS{equal(g){let m=g.captureWidth()===this.cameraWidth&&g.captureHeight()===this.cameraHeight&&g.captureFrameRate()===this.cameraFrameRate&&g.encodeBitrates().length===this.encodeBitrates().length&&g.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&g.encodeWidths().length===this.encodeWidths().length&&g.encodeHeights().length===this.encodeHeights().length&&g.isSVCEncoding()===this.isSVC;if(m){for(let h=0;h<g.encodeWidths().length;h++)if(g.encodeWidths()[h]!==this.encodeWidths()[h]||g.encodeHeights()[h]!==this.encodeHeights()[h]||g.encodeBitrates()[h]!==this.encodeBitrates()[h]||g.encodeScaleResolutionDownBy()[h]!==this.encodeScaleResolutionDownBy()[h])return m=!1,m}return m}clone(){return new rS(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}constructor(g,m,h,a,r,n=1,e=!1){this.cameraWidth=g,this.cameraHeight=m,this.cameraFrameRate=h,this.maxEncodeBitrateKbps=a,this.isSimulcast=r,this.scaleResolutionDownBy=n,this.isSVC=e}},"DefaultVideoCaptureAndEncodeParameter");l.default=f},419507:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(333041));let m=s(class oS{reset(){this.optimalReceiveSet=new g.default,this.subscribedReceiveSet=new g.default,this.videoSources=void 0}updateIndex(a){this.videoIndex=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(a)}updateMetrics(a){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(a){this.videoSources=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(a){const r=new g.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return r;const n=a.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),e=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),t=this.videoIndex.remoteStreamDescriptions(),i=new Map;for(const c of t)n.contain(c.streamId)&&i.set(c.attendeeId,c);let o=0;for(const c of e){const p=c.attendee.attendeeId;if(i.has(p)){const S=i.get(p);if(o+S.maxBitrateKbps<=oS.maxReceiveBitrateKbps)r.add(S.streamId),o+=S.maxBitrateKbps;else{console.warn("total bitrate "+(o+S.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}}}return r}constructor(a){this.selfAttendeeId=a,this.reset()}},"AllHighestVideoBandwidthPolicy");l.default=m,m.maxReceiveBitrateKbps=15e3},297405:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(333041));let m=s(class{reset(){}updateIndex(a){}updateMetrics(a){}wantsResubscribe(){return!1}chooseSubscriptions(){return new g.default}},"NoVideoDownlinkBandwidthPolicy");l.default=m},56478:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TargetDisplaySize=void 0;var f;(function(u){u[u.Low=0]="Low",u[u.Medium=1]="Medium",u[u.High=2]="High",u[u.Maximum=3]="Maximum"})(f=l.TargetDisplaySize||(l.TargetDisplaySize={})),l.default=f},438507:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(203621)),m=u(f(941924)),h=f(586283),a=u(f(926448));let r=s(class extends a.default{reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(e){super.updateIndex(e);const t=h.VideoPreferences.prepare();let i=!1;const o=e.remoteStreamDescriptions();for(const c of o)t.some(p=>p.attendeeId===c.attendeeId)||(c.attendeeId.endsWith(g.default.Modality)?(t.add(new m.default(c.attendeeId,1)),i=!0):t.add(new m.default(c.attendeeId,2)));i?(this.videoPreferences=t.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(e){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}constructor(e){super(e),this.logger=e,super.shouldPauseTiles=!1,this.videoPreferences=void 0}},"VideoAdaptiveProbePolicy");l.default=r},941924:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(56478)),m=u(f(716696));let h=s(class la{partialCompare(r){return this.priority-r.priority}equals(r){return this.attendeeId===r.attendeeId&&this.targetSize===r.targetSize&&this.priority===r.priority&&this.degradationPreference===r.degradationPreference}clone(){return new la(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(r){switch(r){case g.default.Maximum:return la.MAXIMUM_BITRATE_KBPS;case g.default.High:return la.HIGH_BITRATE_KBPS;case g.default.Medium:return la.MID_BITRATE_KBPS;case g.default.Low:return la.LOW_BITRATE_KBPS}}constructor(r,n,e,t){this.attendeeId=r,this.priority=n,this.targetSize=e!==void 0?e:g.default.Maximum,this.degradationPreference=t!==void 0?t:m.default.Balanced}},"VideoPreference");l.default=h,h.LOW_BITRATE_KBPS=300,h.MID_BITRATE_KBPS=600,h.HIGH_BITRATE_KBPS=1500,h.MAXIMUM_BITRATE_KBPS=1e4},586283:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoPreferences=l.MutableVideoPreferences=l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const g=u(f(838552));function m(e,t,i){if(e.transceiverController.getMidForGroupId===void 0||e.videoStreamIndex.attendeeIdForGroupId===void 0||i===void 0)return[];const o=new Array,c=new Map,p=new Map;for(const S of t){const d=e.transceiverController.getMidForGroupId(S);if(d===void 0)continue;const y=e.videoStreamIndex.attendeeIdForGroupId(S);c.set(y,d),p.set(y,S)}for(const S of i){const d=new g.default,y=c.get(S.attendeeId);y!==void 0&&(d.mid=y,d.attendeeId=S.attendeeId,d.groupId=p.get(S.attendeeId),d.priority=Number.MAX_SAFE_INTEGER-S.priority,d.targetBitrateKbps=S.targetSizeToBitrateKbps(S.targetSize),d.qualityAdaptationPreference=S.degradationPreference,o.push(d))}return o}s(m,"convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration"),l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=m;let h=s(class wu{static default(){return new wu([])}[Symbol.iterator](){let t=0;const i=this.items;return{next(){return t<i.length?{done:!1,value:i[t++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(t){this.items.push(t)}replaceFirst(t,i){const o=this.items.findIndex(i);o===-1?this.items.push(t):this.has(t)?this.items.splice(o,1):this.items[o]=t}remove(t){this.items=this.items.filter(i=>!i.equals(t))}clear(){this.items=[]}isEmpty(){return this.items.length===0}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(const i of this.items)if(!t.items.some(o=>o.equals(i)))return!1;return!0}has(t){return this.items.some(i=>i.equals(t))}some(t){return this.items.some(t)}clone(){return new wu([...this.items])}sort(){this.items.sort((t,i)=>t.partialCompare(i))}modify(){return new a(this)}constructor(t=[]){this.items=t}},"ObjectSet"),a=s(class{cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(t){this.items.has(t)||(this.cow(),this.items.add(t))}replaceFirst(t,i){this.items.has(t)&&!this.items.some(i)||(this.cow(),this.items.replaceFirst(t,i))}remove(t){this.items.has(t)&&(this.cow(),this.items.remove(t))}some(t){return this.items.some(t)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}constructor(t=new h){this.items=t,this.copied=!1}},"SetBuilder"),r=s(class{add(t){this.builder.add(t)}replaceFirst(t,i){this.builder.replaceFirst(t,i)}remove(t){this.builder.remove(t)}some(t){return this.builder.some(t)}clear(){this.builder.clear()}build(){return new n(this.builder.build())}constructor(t){this.builder=t}},"MutableVideoPreferences");l.MutableVideoPreferences=r;let n=s(class Ou{static prepare(){return new r(new a)}static default(){return new Ou(h.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var t;return(t=this.items.first())===null||t===void 0?void 0:t.priority}sorted(){return this.items[Symbol.iterator]()}equals(t){return t===this||this.items.equals(t.items)}modify(){return new r(this.items.modify())}some(t){return this.items.some(t)}isEmpty(){return this.items.isEmpty()}clone(){const t=Ou.prepare();for(const i of this.items)t.add(i.clone());return t.build()}constructor(t){this.items=t}},"VideoPreferences");l.VideoPreferences=n,l.default=n},926448:function(U,l,f){"use strict";var u=this&&this.__createBinding||(Object.create?function(M,k,w,N){N===void 0&&(N=w),Object.defineProperty(M,N,{enumerable:!0,get:function(){return k[w]}})}:function(M,k,w,N){N===void 0&&(N=w),M[N]=k[w]}),g=this&&this.__setModuleDefault||(Object.create?function(M,k){Object.defineProperty(M,"default",{enumerable:!0,value:k})}:function(M,k){M.default=k}),m=this&&this.__importStar||function(M){if(M&&M.__esModule)return M;var k={};if(M!=null)for(var w in M)w!=="default"&&Object.prototype.hasOwnProperty.call(M,w)&&u(k,M,w);return g(k,M),k},h=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(l,"__esModule",{value:!0});const a=h(f(690)),r=h(f(369475)),n=h(f(982782)),e=h(f(203621)),t=f(938402),i=m(f(849539)),o=h(f(403868)),c=h(f(333041)),p=h(f(419507)),S=h(f(56478)),d=h(f(941924)),y=f(586283),E=h(f(177426)),I=h(f(716696));let A=s(class{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}},"LinkMediaStats"),L=s(class li{reset(){this.allHighestPolicy=new p.default(""),this.optimalReceiveSet=new c.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new c.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new c.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=li.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=li.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new A,this.prevDownlinkStats=new A,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(k){this.tileController=k,this.logger.info("tileController bound")}setWantsResubscribeObserver(k){this.wantsResubscribeObserver=k}chooseRemoteVideoSources(k){var w;if(!(!((w=this.videoPreferences)===null||w===void 0)&&w.equals(k))){if(this.videoPreferences=k==null?void 0:k.clone(),!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!0,this.wantsResubscribeObserver!==void 0&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)){const N=new Array;for(const T of this.videoPreferences){const O=new o.default;O.attendee=new a.default,O.attendee.attendeeId=T.attendeeId,N.push(O)}this.allHighestPolicy.chooseRemoteVideoSources(N);return}this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(k)}`)}}updateIndex(k){this.videoIndex=k,this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(k),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const k=new Set;for(const O of this.videoIndex.remoteStreamDescriptions())k.add(O.attendeeId);const w=y.VideoPreferences.prepare(),N=k.size;let T=S.default.Maximum;N>8?T=S.default.Low:N>4&&(T=S.default.Medium);for(const O of k)w.add(new d.default(O,1,T));this.defaultVideoPreferences=w.build()}updateMetrics(k){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new A;const w=k.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=w.availableIncomingBitrate/1e3;for(const N in k.streamMetricReports){const T=Number.parseInt(N,10),O=k.streamMetricReports[T];O.direction===r.default.DOWNSTREAM&&O.mediaType===n.default.VIDEO&&(O.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=k.countPerSecond("nackCount",T)),O.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=k.countPerSecond("packetsLost",T)),O.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=k.bitsPerSecond("bytesReceived",T)/1e3))}}wantsResubscribe(){let k=!1;return!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(k||(k=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)?k||this.allHighestPolicy.wantsResubscribe():(this.calculateOptimalReceiveSet(),k||(k=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),k)}chooseSubscriptions(){return!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)?this.allHighestPolicy.chooseSubscriptions():(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone())}addObserver(k){this.observerQueue.add(k)}removeObserver(k){this.observerQueue.delete(k)}forEachObserver(k){for(const w of this.observerQueue)k(w)}setVideoPriorityBasedPolicyConfigs(k){this.videoPriorityBasedPolicyConfig=k}calculateOptimalReceiveStreams(){var k;const w=[],N=this.videoIndex.remoteStreamDescriptions();if(N.length===0||!((k=this.videoPreferences)===null||k===void 0)&&k.isEmpty()){this.optimalReceiveStreams=[];return}const T=this.rateProbeState;this.cleanBwPausedTiles(N),this.handleAppPausedStreams(w,N);const O=new Map;for(const Ue of this.getCurrentVideoPreferences())O.set(Ue.attendeeId,Ue);const D=N.filter(Ue=>O.has(Ue.attendeeId)),G=!this.streamsWithPreferenceDidChange(D),K=!this.startupPeriod&&G;if(K&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;D.sort((Ue,ht)=>Ue.maxBitrateKbps===ht.maxBitrateKbps?Ue.streamId-ht.streamId:Ue.maxBitrateKbps-ht.maxBitrateKbps);for(const Ue of D)(Ue.avgBitrateKbps===0||Ue.avgBitrateKbps>Ue.maxBitrateKbps)&&(Ue.attendeeId.endsWith(e.default.Modality)&&Ue.maxBitrateKbps<100?Ue.maxBitrateKbps=Ue.avgBitrateKbps:Ue.avgBitrateKbps=Ue.maxBitrateKbps);const H=new Set;for(const Ue of this.getCurrentVideoPreferences()){const ht=D.filter(We=>We.attendeeId===Ue.attendeeId);if(ht.length<3)continue;let Tt=15,st=320*480;ht.forEach(We=>{Tt=Math.max(Tt,We.maxFrameRate),st=Math.max(st,We.totalPixels())}),ht.sort((We,_t)=>{if(Ue.degradationPreference===I.default.MaintainResolution)return Math.abs(We.maxFrameRate-_t.maxFrameRate)<2?We.totalPixels()-_t.totalPixels():We.maxFrameRate-_t.maxFrameRate;if(Ue.degradationPreference===I.default.MaintainFramerate)return We.totalPixels()===_t.totalPixels()?We.maxFrameRate-_t.maxFrameRate:We.totalPixels()-_t.totalPixels();{const $t=s(rt=>rt.avgBitrateKbps*Math.pow(2,5*rt.maxFrameRate/Tt*Math.pow(4,rt.totalPixels()/st)),"weighByFramerate");return $t(We)-$t(_t)}});let ut;for(const We of ht){if(ut!==void 0&&(We.maxFrameRate<ut.maxFrameRate&&Math.abs(ut.maxFrameRate-We.maxFrameRate)>2||We.totalPixels()<ut.totalPixels())){H.add(We.streamId);continue}ut=We}}const q=D.filter(Ue=>!H.has(Ue.streamId));this.logger.info(`Filtered to ${JSON.stringify(q)}`);const me={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};me.targetDownlinkBitrate=this.determineTargetRate();const we=this.subscribedReceiveSet.size(),ue=this.downlinkStats.bandwidthEstimateKbps,Pe=!this.videoPriorityBasedPolicyConfig.allowSubscribe(we,ue);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=li.MIN_TIME_BETWEEN_SUBSCRIBE_MS,K&&Pe))return;const Ye=this.priorityPolicy(me,q,w),be=!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption);let He=0;if(!be&&!this.startupPeriod&&G?this.rateProbeState==="Probing"?He=this.handleProbe(w,me.targetDownlinkBitrate):me.deltaToNextUpgrade!==0&&(He=this.maybeOverrideOrProbe(w,me,Ye)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.previousStreamsWithPreference=D,this.videoPreferencesUpdated=!1,He===1){this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),this.prevTargetRateKbps=me.targetDownlinkBitrate;return}if(He===2){const Ue=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(D,this.preProbeNonPausedReceiveStreams),this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+Ue);return}this.optimalNonPausedReceiveStreams=w.slice();const Ke=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(D,w),this.logger.getLogLevel()<=t.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==T||this.optimalReceiveStreams.length!==w.length||Ke!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(N,me.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=me.targetDownlinkBitrate,this.optimalReceiveStreams=w.slice()}calculateOptimalReceiveSet(){const k=new c.default;this.calculateOptimalReceiveStreams();for(const w of this.optimalReceiveStreams)k.add(w.streamId);if(!this.optimalReceiveSet.equal(k)){const w=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(k)} subscribedRate:${w}`)}this.optimalReceiveSet=k}determineTargetRate(){let k=0;const w=Date.now();return this.downlinkStats.bandwidthEstimateKbps!==0?(this.firstEstimateTimestamp===0&&(this.firstEstimateTimestamp=w),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>li.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||w-this.firstEstimateTimestamp>li.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?k=li.DEFAULT_BANDWIDTH_KBPS:this.rateProbeState==="Probing"&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<li.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),k=this.downlinkStats.usedBandwidthKbps+li.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):k=this.downlinkStats.bandwidthEstimateKbps):this.firstEstimateTimestamp===0?k=li.DEFAULT_BANDWIDTH_KBPS:k=this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-li.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*li.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&this.downlinkStats.packetsLost===0?(this.logger.debug(()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps),this.usingPrevTargetRate=!0,k=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,k>15e3&&this.logger.warn("bwe: "+k+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(k,15e3)}setProbeState(k){if(this.rateProbeState===k)return!1;const w=Date.now();switch(k){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(this.lastProbeTimestamp===0||w-this.lastProbeTimestamp>li.MIN_TIME_BETWEEN_PROBE_MS)this.probePendingStartTimestamp=w;else return!1;break;case"Probing":if(w-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs)this.lastProbeTimestamp=w,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(this.timeBeforeAllowProbeMs*2,li.MAX_HOLD_BEFORE_PROBE_MS);else return!1;break}return this.logger.info("bwe: setProbeState to "+k+" from "+this.rateProbeState),this.rateProbeState=k,!0}upgradeToStream(k,w){for(let N=0;N<k.length;N++)if(k[N].groupId===w.groupId){const T=w.avgBitrateKbps-k[N].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(k[N])+" to "+w),this.lastUpgradeRateKbps=T,k[N]=w,T}return k.push(w),this.lastUpgradeRateKbps=w.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(k,w){if(Date.now()-this.lastProbeTimestamp>li.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>li.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=Math.max(li.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs)*3,2;const N=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(k)||w>N?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=li.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(k,w,N){const T=this.chosenStreamsSameAsLast(k);let O=0;const D=w.targetDownlinkBitrate>li.LOW_BITRATE_THRESHOLD_KBPS?li.TARGET_RATE_CHANGE_TRIGGER_PERCENT:li.TARGET_RATE_CHANGE_TRIGGER_PERCENT*2,G=w.targetDownlinkBitrate*D/100;if(this.targetRateBaselineForDeltaCheckKbps=this.targetRateBaselineForDeltaCheckKbps!==void 0?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!T&&Math.abs(w.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<G?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),O=1):this.targetRateBaselineForDeltaCheckKbps=w.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,O;if(T||O===1)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(k,N),O=0);break}else this.setProbeState("Not Probing");return O}calculateSubscribeRate(k){let w=0;for(const N of k)!this.pausedStreamIds.contain(N.streamId)&&!this.pausedBwAttendeeIds.has(N.attendeeId)&&(w+=N.maxBitrateKbps);return w}handleAppPausedStreams(k,w){if(!this.tileController){this.logger.warn("tileController not found!");return}this.pausedStreamIds=new c.default;const N=this.tileController.getAllRemoteVideoTiles();for(const T of N){const O=T.state();if(O.paused&&!this.pausedBwAttendeeIds.has(O.boundAttendeeId)){let D=w.length;for(;D--;)w[D].attendeeId===O.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+O.boundAttendeeId+" streamId: "+w[D].streamId),this.pausedStreamIds.add(w[D].streamId),this.subscribedReceiveSet.contain(w[D].streamId)&&k.push(w[D]),w.splice(D,1))}}}processBwPausedStreams(k,w){if(!this.tileController){this.logger.warn("tileController not found!");return}const N=this.getCurrentVideoPreferences();if(N&&this.shouldPauseTiles){const T=this.tileController.getAllVideoTiles();for(const O of N){const D=this.getVideoTileForAttendeeId(O.attendeeId,T),G=(D==null?void 0:D.state().paused)||!1;if(w.some(K=>K.attendeeId===O.attendeeId))G&&this.pausedBwAttendeeIds.has(O.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${O.attendeeId} due to bandwidth`),this.forEachObserver(K=>{K.tileWillBeUnpausedByDownlinkPolicy(D.id())}),this.tileController.unpauseVideoTile(D.id()),this.pausedBwAttendeeIds.delete(O.attendeeId));else{const K=k.some(H=>H.attendeeId===O.attendeeId);if(D&&K){const H=this.optimalReceiveStreams.find(q=>q.attendeeId===O.attendeeId);H!==void 0&&(G||(this.logger.info(`bwe: pausing streamId ${H.streamId} attendee ${O.attendeeId} due to bandwidth`),this.forEachObserver(q=>{q.tileWillBePausedByDownlinkPolicy(D.id())}),this.tileController.pauseVideoTile(D.id())),w.push(H)),this.pausedBwAttendeeIds.add(O.attendeeId)}else if(K){const H=this.tileController.addVideoTile();H.bindVideoStream(O.attendeeId,!1,null,0,0,0,null),this.forEachObserver(q=>{q.tileWillBePausedByDownlinkPolicy(H.id())}),H.pause(),this.logger.info(`bwe: Created video tile ${H.id()} for bw paused attendee ${O.attendeeId}`),this.pausedBwAttendeeIds.add(O.attendeeId)}}}}}cleanBwPausedTiles(k){if(!this.tileController){this.logger.warn("tileController not found!");return}const w=this.tileController.getAllRemoteVideoTiles(),N=this.getCurrentVideoPreferences();for(const T of w){const O=T.state();O.boundVideoStream||(k.some(D=>D.attendeeId===O.boundAttendeeId)?N!==void 0&&!N.some(D=>D.attendeeId===O.boundAttendeeId)&&this.tileController.removeVideoTile(O.tileId):(this.tileController.removeVideoTile(O.tileId),this.logger.info(`bwe: Removed video tile ${O.tileId} for bw paused attendee ${O.boundAttendeeId}`)))}}priorityPolicy(k,w,N){let T;const O=this.getCurrentVideoPreferences(),D=O.highestPriority();let G,K=D;for(;K!==-1;){G=-1;for(const H of O)if(H.priority===K)for(const q of w)q.attendeeId===H.attendeeId&&(N.some(me=>me.groupId===q.groupId)||(k.chosenTotalBitrate+q.avgBitrateKbps<=k.targetDownlinkBitrate?(N.push(q),k.chosenTotalBitrate+=q.avgBitrateKbps):k.deltaToNextUpgrade===0&&(k.deltaToNextUpgrade=q.avgBitrateKbps,T=q)));else if(H.priority>K){G=H.priority;break}for(const H of O)if(H.priority===K){for(const q of w)if(q.attendeeId===H.attendeeId){const me=N.findIndex(we=>we.groupId===q.groupId&&we.maxBitrateKbps<=q.maxBitrateKbps&&we.avgBitrateKbps<q.avgBitrateKbps);if(me!==-1){const we=q.avgBitrateKbps-N[me].avgBitrateKbps;this.hasSimulcastStreams(w,q.attendeeId,q.groupId)&&this.canUpgrade(q.avgBitrateKbps,H.targetSize,H.targetSizeToBitrateKbps(H.targetSize),q.attendeeId.endsWith(e.default.Modality))?(this.logger.info(`bwe: attendee: ${q.attendeeId} group: ${q.groupId} has simulcast and can upgrade avgBitrate: ${q.avgBitrateKbps} target: ${H.targetSizeToBitrateKbps(H.targetSize)} targetTotalBitrate: ${k.targetDownlinkBitrate}`),k.chosenTotalBitrate+we<=k.targetDownlinkBitrate?(k.chosenTotalBitrate+=we,N[me]=q):k.deltaToNextUpgrade===0&&(k.deltaToNextUpgrade=we,T=q)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(H.priority>K)break;if(K===D&&k.deltaToNextUpgrade!==0)break;K=G}return T}getVideoTileForAttendeeId(k,w){for(const N of w)if(N.state().boundAttendeeId===k)return N;return null}canUpgrade(k,w,N,T){let O=!1;return(w===S.default.High||!T&&k<=N||T&&w===S.default.Medium&&k<=N)&&(O=!0),O?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${k} targetBitrateKbps: ${N}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${k} targetBitrateKbps: ${N}`),!1)}hasSimulcastStreams(k,w,N){let T=0;for(const O of k)O.attendeeId===w&&O.groupId===N&&T++;return this.logger.info(`bwe: attendeeId: ${w} groupId: ${N} hasSimulcastStreams: streamCount: ${T}`),T>1}streamsWithPreferenceDidChange(k){if(this.previousStreamsWithPreference===void 0||k.length!==this.previousStreamsWithPreference.length||this.videoPreferencesUpdated===!0)return!0;for(const w of k)if(this.previousStreamsWithPreference.find(T=>T.groupId===w.groupId&&T.streamId===w.streamId&&T.maxBitrateKbps===w.maxBitrateKbps)===void 0)return!0;return!1}chosenStreamsSameAsLast(k){if(this.optimalNonPausedReceiveStreams.length!==k.length)return!1;for(const w of this.optimalNonPausedReceiveStreams)if(!k.some(N=>N.streamId===w.streamId))return!1;return!0}policyStateLogStr(k,w){const N=this.calculateSubscribeRate(this.optimalReceiveStreams),T={targetBitrate:w,subscribedRate:N,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let O="remoteInfos: [";for(const G of k)O+=`{grpId:${G.groupId} strId:${G.streamId} maxBr:${G.maxBitrateKbps} avgBr:${G.avgBitrateKbps}}, `;O+="]";let D=`bwe: optimalReceiveSet ${JSON.stringify(T)}
bwe:   prev ${JSON.stringify(this.prevDownlinkStats)}
bwe:   now  ${JSON.stringify(this.downlinkStats)}
bwe:   ${O}
`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(D+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }
`),this.videoPreferences?D+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:D+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,D}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(k){this.serverSideNetworkAdaption=k,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[i.default.None,i.default.BandwidthProbing,i.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let k=this.getCurrentVideoPreferences();return k||(k=y.VideoPreferences.prepare().build()),k}wantsAllTemporalLayersInIndex(){return!0}constructor(k,w=E.default.Default){this.logger=k,this.videoPriorityBasedPolicyConfig=w,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.reset()}},"VideoPriorityBasedPolicy");l.default=L,L.DEFAULT_BANDWIDTH_KBPS=2800,L.STARTUP_PERIOD_MS=6e3,L.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,L.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,L.LOW_BITRATE_THRESHOLD_KBPS=300,L.MIN_TIME_BETWEEN_PROBE_MS=5e3,L.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,L.MAX_HOLD_BEFORE_PROBE_MS=3e4,L.MAX_ALLOWED_PROBE_TIME_MS=6e4,L.SPURIOUS_PACKET_LOST_THRESHOLD=2,L.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},177426:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(849539));let m=s(class Qa{allowSubscribe(a,r){let n=0;const e=this.currentNetworkEvent;if(r>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=r,!0;if(r<this.referenceBitrate){if(this.currentNetworkEvent=1,n=this.getSubscribeDelay(this.currentNetworkEvent,a),e!==1)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>n)return this.referenceBitrate=r,!0;return!1}else return this.currentNetworkEvent=0,!1}getSubscribeDelay(a,r){let n=Qa.MINIMUM_DELAY_MS;const e=Qa.MAXIMUM_DELAY_MS-Qa.MINIMUM_DELAY_MS,t=this.networkIssueResponseDelayFactor;switch(a){case 1:n+=e*t*(1+r/10),n=Math.min(Qa.MAXIMUM_DELAY_MS,n);break}return n}constructor(a=0,r=0){this.networkIssueResponseDelayFactor=a,this.networkIssueRecoveryDelayFactor=r,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=g.default.Default,a<0?a=0:a>1&&(a=1),this.networkIssueResponseDelayFactor=a,r<0?r=0:r>1&&(r=1),this.networkIssueRecoveryDelayFactor=r}},"VideoPriorityBasedPolicyConfig");l.default=m,m.MINIMUM_DELAY_MS=2e3,m.MAXIMUM_DELAY_MS=8e3,m.Default=new m(0,0),m.UnstableNetworkPreset=new m(0,1),m.StableNetworkPreset=new m(1,0)},716696:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoQualityAdaptationPreference=void 0;var f;(function(u){u[u.Balanced=0]="Balanced",u[u.MaintainFramerate=1]="MaintainFramerate",u[u.MaintainResolution=2]="MaintainResolution"})(f=l.VideoQualityAdaptationPreference||(l.VideoQualityAdaptationPreference={})),l.default=f},67368:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{create(){const g={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{g.paused=!0},play:()=>(g.paused=!1,Promise.resolve())};return g}},"NoOpVideoElementFactory");l.default=f},895296:function(U,l){"use strict";var f=this&&this.__awaiter||function(g,m,h,a){function r(n){return n instanceof h?n:new h(function(e){e(n)})}return s(r,"adopt"),new(h||(h=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(p){e(p)}}s(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(p){e(p)}}s(i,"rejected");function o(c){c.done?n(c.value):r(c.value).then(t,i)}s(o,"step"),o((a=a.apply(g,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=s(class{destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return f(this,void 0,void 0,function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)})}asCanvasElement(){return this.canvas}constructor(m){this.canvas=m,this.destroyed=!1}},"CanvasVideoFrameBuffer");l.default=u},186227:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(895296)),h=g(f(577400)),a=15;let r=s(class{destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?a:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver(e=>{e.processingDidStop&&e.processingDidStop()}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return u(this,void 0,void 0,function*(){return this.inputVideoStream})}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()?this.outputMediaStream:(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput(),this.outputMediaStream)}setInputMediaStream(e){return u(this,void 0,void 0,function*(){if(!e){this.stop();return}if(e.getVideoTracks().length===0){this.logger.error("No video tracks in input media stream, ignoring");return}this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const i=new m.default(this.canvasInput);this.sourceBuffers.push(i),this.videoInput.load();try{yield this.videoInput.play()}catch{this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()})}cloneInputAudioTracksToOutput(){if(!this.isOutputMediaStreamActive()||this.inputVideoStream===null){this.logger.info("Not cloning input audio tracks to output, do not have media streams ready");return}for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout(()=>{e(t)},0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}constructor(e,t,i=new h.default){this.logger=e,this.stages=t,this.fr=a,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=o=>u(this,void 0,void 0,function*(){if(!this.inputVideoStream)return;const c=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let p=[];p.push(this.sourceBuffers[0]);try{for(const L of this.processors)p=yield L.process(p)}catch{this.forEachObserver(M=>{M.processingDidFailToStart&&M.processingDidFailToStart()});return}this.destBuffers=p;let S;try{S=yield this.destBuffers[0].asCanvasImageSource()}catch{this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver(M=>{M.processingDidFailToStart&&M.processingDidFailToStart()}));return}const d=S.width,y=S.height;d!==0&&y!==0&&(this.canvasOutput.width!==d&&this.canvasOutput.height!==y&&(this.canvasOutput.width=d,this.canvasOutput.height=y),this.outputCtx.drawImage(S,0,0,d,y,0,0,d,y),this.hasStarted||(this.hasStarted=!0,this.forEachObserver(L=>{L.processingDidStart&&L.processingDidStart()})));const E=performance.now()-c,I=1e3*2/this.framerate-E,A=Math.max(0,1e3/this.framerate-E);I<=0&&this.forEachObserver(L=>{L.processingLatencyTooHigh&&L.processingLatencyTooHigh(E)}),yield this.timer.start(A,this.process.bind(this))}),this.timer=i}},"DefaultVideoFrameProcessorPipeline");l.default=r},577400:function(U,l){"use strict";var f=this&&this.__awaiter||function(g,m,h,a){function r(n){return n instanceof h?n:new h(function(e){e(n)})}return s(r,"adopt"),new(h||(h=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(p){e(p)}}s(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(p){e(p)}}s(i,"rejected");function o(c){c.done?n(c.value):r(c.value).then(t,i)}s(o,"step"),o((a=a.apply(g,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=s(class{createWorkerTimer(){try{const m=new Blob([`self.onmessage = async function(e){ 
            var timerID = null;
            const awaitTimeout = delay => new Promise( resolve => {
              timerID = setTimeout(resolve, delay);
            })
            await awaitTimeout(e.data);
            postMessage(timerID);
          }`],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(m))}catch{}}start(m,h){return f(this,void 0,void 0,function*(){this.callback=h,this.workerTimer?(this.workerTimer.onmessage=a=>{this.lastTimeout=a.data,this.callback()},this.workerTimer.postMessage(m)):this.lastTimeout=setTimeout(()=>{this.callback()},m)})}destroy(){return f(this,void 0,void 0,function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)})}constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}},"DefaultVideoFrameProcessorTimer");l.default=u},153922:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(421537)),h=g(f(186227));let a=s(class sS{get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(n){if(this.pipe.processors)for(const e of this.pipe.processors)typeof e.setEventController=="function"&&e.setEventController(n)}chooseNewInnerDevice(n){const e=new sS(this.logger,n,this.processors,this.browserBehavior);return e.pipe=this.pipe,e}getInnerDevice(){return this.device}intrinsicDevice(){return u(this,void 0,void 0,function*(){return this.device})}transformStream(n){return u(this,void 0,void 0,function*(){return yield this.pipe.setInputMediaStream(n),this.inputMediaStream=n,this.pipe.getActiveOutputMediaStream()})}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const n=this.device&&this.device.id;if(this.pipe.stop(),!n&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return u(this,void 0,void 0,function*(){if(this.inputMediaStream)for(const n of this.inputMediaStream.getVideoTracks())n.stop();this.pipe.destroy(),this.inputMediaStream=null})}addObserver(n){this.observers.add(n)}removeObserver(n){this.observers.delete(n)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver(n=>{n.processingDidStart&&n.processingDidStart()})}processingLatencyTooHigh(n){this.forEachObserver(e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(n)})}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver(n=>{n.processingDidFailToStart&&n.processingDidFailToStart()})}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver(n=>{n.processingDidStop&&n.processingDidStop()})}forEachObserver(n){for(const e of this.observers)setTimeout(()=>{n(e)},0)}constructor(n,e,t,i=new m.default){this.logger=n,this.device=e,this.processors=t,this.browserBehavior=i,this.observers=new Set,this.pipe=new h.default(this.logger,this.processors),this.pipe.addObserver(this)}},"DefaultVideoTransformDevice");l.default=a},739864:function(U,l){"use strict";var f=this&&this.__awaiter||function(g,m,h,a){function r(n){return n instanceof h?n:new h(function(e){e(n)})}return s(r,"adopt"),new(h||(h=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(p){e(p)}}s(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(p){e(p)}}s(i,"rejected");function o(c){c.done?n(c.value):r(c.value).then(t,i)}s(o,"step"),o((a=a.apply(g,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=s(class{process(m){return f(this,void 0,void 0,function*(){return m})}destroy(){return f(this,void 0,void 0,function*(){})}},"NoOpVideoFrameProcessor");l.default=u},771049:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DeferredPromise=void 0;let f=s(class{getPromise(){return this.promise}resolvePromise(g){this.resolve(g)}resolveAndReplacePromise(g){this.resolve(g),this.promise=new Promise((m,h)=>{this.resolve=m,this.reject=h})}rejectPromise(g){this.reject(g)}rejectAndReplacePromise(g){this.reject(g),this.promise=new Promise((m,h)=>{this.resolve=m,this.reject=h})}constructor(){this.promise=new Promise((g,m)=>{this.resolve=g,this.reject=m})}},"DeferredPromise");l.DeferredPromise=f},478811:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(h,a,r,n){function e(t){return t instanceof r?t:new r(function(i){i(t)})}return s(e,"adopt"),new(r||(r=Promise))(function(t,i){function o(S){try{p(n.next(S))}catch(d){i(d)}}s(o,"fulfilled");function c(S){try{p(n.throw(S))}catch(d){i(d)}}s(c,"rejected");function p(S){S.done?t(S.value):e(S.value).then(o,c)}s(p,"step"),p((n=n.apply(h,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxCanvasOpsManager=void 0;const g=f(236855);let m=s(class{getInferenceInputData(a){return this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(a,0,0),this.inferenceCtx.restore(),this.inferenceCtx.getImageData(0,0,g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(a){return u(this,void 0,void 0,function*(){if(this.streamParameters=a,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const r=document.createElement("canvas");r.width=this.streamParameters.width,r.height=this.streamParameters.height,r.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}this.configureCanvasPipeline()})}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(a){return u(this,void 0,void 0,function*(){const r=a.backgroundReplacement.backgroundImageURL,n=a.backgroundReplacement.defaultColor;if(r)try{const e=yield this.loadImage(r);this.backgroundReplacementImage=e,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(e){throw this.logger.error(e),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(n)})}resizeAndSetReplacementImage(a){const r=document.createElement("canvas"),n=r.getContext("2d");r.width=this.streamParameters.width,r.height=this.streamParameters.height,n.drawImage(a,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}resizeAndSetReplacementColor(a){const r=document.createElement("canvas"),n=r.getContext("2d");r.width=this.streamParameters.width,r.height=this.streamParameters.height,n.fillStyle=a,n.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}loadImage(a){return u(this,void 0,void 0,function*(){const n=yield(yield fetch(a).catch(t=>{throw this.logger.error(t.toString()),new Error("Failed to fetch image.")})).blob(),e=new Image;return e.src=URL.createObjectURL(n),new Promise((t,i)=>{e.onload=()=>{t(e)},e.onerror=o=>{i(o)}})})}constructor(a,r){this.streamParameters=a,this.outputCanvas=r,this.configureCanvasPipeline()}},"VideoFxCanvasOpsManager");l.VideoFxCanvasOpsManager=m},236855:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.FXLIB_PATH=l.WORKER_PATH=l.CDN_BASE_PATH=l.RESOURCE_CONSTRAINTS=l.SEGMENTATION_MODEL=l.DEFAULT_STREAM_PARAMETERS=l.WORKER_MSG=void 0,l.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},l.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},l.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},l.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},l.CDN_BASE_PATH="https://static.sdkassets.chime.aws";const f="/ml_media_fx/otherassets";l.WORKER_PATH=`${f}/worker.js`,l.FXLIB_PATH=`${f}/fxlib.js`},67242:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(y,E,I,A){function L(M){return M instanceof I?M:new I(function(k){k(M)})}return s(L,"adopt"),new(I||(I=Promise))(function(M,k){function w(O){try{T(A.next(O))}catch(D){k(D)}}s(w,"fulfilled");function N(O){try{T(A.throw(O))}catch(D){k(D)}}s(N,"rejected");function T(O){O.done?M(O.value):L(O.value).then(w,N)}s(T,"step"),T((A=A.apply(y,E||[])).next())})},g=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0});const m=f(598696),h=f(120165),a=f(966951),r=g(f(421537)),n=g(f(860702)),e=f(450804),t=g(f(508338)),i=g(f(895296)),o=f(771049),c=f(478811),p=f(236855),S=f(36737);let d=s(class da{process(E){return u(this,void 0,void 0,function*(){return E})}fxProcess(E){return u(this,void 0,void 0,function*(){const I=E[0].asCanvasElement();this.didStreamParametersChange(I)&&(yield this.adjustProcessorForNewStreamParameters(I));try{yield this.manageSegmentationMask(I)}catch(A){throw this.logger.error(A),new Error("Video stream could not be processed")}return yield this.renderer.render(I,this.segmentationMask),E[0]=this.canvasVideoFrameBuffer,E})}noOpProcess(E){return u(this,void 0,void 0,function*(){return E})}didStreamParametersChange(E){return E.width!==this.streamParameters.width||E.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(E){return u(this,void 0,void 0,function*(){this.streamParameters.width=E.width,this.streamParameters.height=E.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)})}destroy(){return u(this,void 0,void 0,function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:p.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:p.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")})}manageSegmentationMask(E){return u(this,void 0,void 0,function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const I=this.canvasOpsManager.getInferenceInputData(E);this.segmentationMask=yield this.generateSegmentationMask(I),this.segmentationRateManager.completeSegmentation()}}catch(I){throw this.logger.error(I.toString()),new Error("Can not properly manage the returned segmentation mask")}})}generateSegmentationMask(E){return u(this,void 0,void 0,function*(){da.isSharedArrayBufferSupported?(this.sharedImageData.set(E.data),this.engineWorker.postMessage({msg:p.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:p.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:E},[E.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(I){throw this.logger.error(I.toString()),new Error("Segmentation mask could not be generated")}})}cloneConfigFrom(E){return{backgroundBlur:{isEnabled:E.backgroundBlur.isEnabled,strength:E.backgroundBlur.strength},backgroundReplacement:{isEnabled:E.backgroundReplacement.isEnabled,backgroundImageURL:E.backgroundReplacement.backgroundImageURL,defaultColor:E.backgroundReplacement.defaultColor}}}setEffectConfig(E){return u(this,void 0,void 0,function*(){if(this.sameVideoFxConfig(E,this.effectConfig))return;const I=this.cloneConfigFrom(E);try{yield this.validateEffectConfig(I)}catch(A){throw this.logger.error(A.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}I.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(I),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,I),this.effectConfig=I,!this.effectConfig.backgroundBlur.isEnabled&&!this.effectConfig.backgroundReplacement.isEnabled?this.process=this.noOpProcess:this.process=this.fxProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()})}validateEffectConfig(E){return u(this,void 0,void 0,function*(){if(E.backgroundBlur.isEnabled&&E.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");E.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(E))})}validateReplacementConfig(E){return u(this,void 0,void 0,function*(){if(E.backgroundReplacement.backgroundImageURL&&E.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!E.backgroundReplacement.backgroundImageURL&&!E.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{E.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(E.backgroundReplacement.backgroundImageURL))}catch(A){throw this.logger.error(A.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const I=E.backgroundReplacement.defaultColor;if(I&&I!=="black"&&I!=="#000000"&&I!=="#000"){if(I.includes("#")&&!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(I))throw new Error(`Invalid hexadecimal color code for default replacement background: ${I}`);const L=document.createElement("canvas").getContext("2d"),M=L.fillStyle;if(L.fillStyle=I,L.fillStyle===M)throw new Error(`Invalid color for default replacement background: ${I}`)}})}validateProcessingBudgetPerFrame(E){if(E<p.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||E>p.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${p.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${p.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return u(this,void 0,void 0,function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const E=this.getVideoFxAssetParams();yield this.loadEngineWorker(E),yield this.buildEngine(E),yield this.loadFxLib(E),this.renderer=constructRenderer(p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(E){throw this.logger.error(E.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")})}getVideoFxAssetParams(){const E=e.getDefaultAssetSpec();return{assetGroup:E.assetGroup,revisionID:E.revisionID,sdk:encodeURIComponent(t.default.sdkVersion),ua:encodeURIComponent(t.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(E,I){const A=new URL(E);for(const[L,M]of Object.entries(I))if(M!==void 0){const k=encodeURIComponent(L),w=encodeURIComponent(M);A.searchParams.set(k,w)}return A.toString()}loadEngineWorker(E){return u(this,void 0,void 0,function*(){try{const I=this.getPathFromVideoFxAssetParams(p.CDN_BASE_PATH+p.WORKER_PATH,E);this.engineWorker=yield h.loadWorker(I,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",A=>this.engineWorkerReceiver(A))}catch(I){throw this.logger.error(I.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}})}buildEngine(E){return u(this,void 0,void 0,function*(){this.buildEnginePromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:p.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:p.CDN_BASE_PATH,sdkVersioningParams:E}});try{yield this.buildEnginePromise.getPromise()}catch(I){throw this.logger.error(I.toString()),new Error("Failed to instantiate the VideoFxEngine")}})}loadFxLib(E){return u(this,void 0,void 0,function*(){const I=this.getPathFromVideoFxAssetParams(p.CDN_BASE_PATH+p.FXLIB_PATH,E),A={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const L=yield m.fetchWithBehavior(I,A,{});if(!L.ok)throw new Error("Fetch failed.");const M=window.URL.createObjectURL(yield L.blob());yield new Promise((k,w)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",M),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",k),this.fxLibScript.addEventListener("error",w),document.body.appendChild(this.fxLibScript)})}catch(L){throw this.logger.error(L.toString()),new Error("Failed to load the fxlib")}})}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(E){const I=E.data;switch(I.msg){case p.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(I.payload);break;case p.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(I.payload.output);break;case p.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case p.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(I)}`);break}}settleEngineBuildPromise(E){E!==p.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(E){E?this.segmentationRequestPromise.resolveAndReplacePromise(E):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const E=new ImageData(new Uint8ClampedArray(this.sharedImageData),p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(E)}catch{this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new n.default,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return u(this,void 0,void 0,function*(){let A=!0;const L=s((w,N)=>{w&&(E.info(N),A=!1)},"checkEnv");L(typeof globalThis>"u","Browser does not have globalThis."),L(!a.supportsWorker(globalThis,E),"Browser does not support web workers."),L(!a.supportsWASM(globalThis,E),"Browser does not support wasm."),L(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");const M=new r.default;L(!M.isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");const k=s(()=>u(this,void 0,void 0,function*(){if(I)try{const w=new da(E);yield w.loadAssets(),yield w.destroy()}catch{return E.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)}),"checkProcessor");return Promise.resolve(A?yield k():!1)})}static create(E,I){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME;return u(this,void 0,void 0,function*(){const L=new da(E,A);try{return yield L.loadAssets(),yield L.setEffectConfig(I),L}catch(M){throw E.error(M.toString()),L.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}})}setEventController(E){this.eventController?this.eventController=E:(this.eventController=E,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const E={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",E)}sameVideoFxConfig(E,I){return E.backgroundBlur.isEnabled===I.backgroundBlur.isEnabled&&E.backgroundBlur.strength===I.backgroundBlur.strength&&E.backgroundReplacement.backgroundImageURL===I.backgroundReplacement.backgroundImageURL&&E.backgroundReplacement.defaultColor===I.backgroundReplacement.defaultColor&&E.backgroundReplacement.isEnabled===I.backgroundReplacement.isEnabled}constructor(E,I=p.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,A){this.logger=E,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new i.default(this.outputCanvas);try{this.validateProcessingBudgetPerFrame(I)}catch(L){throw this.logger.error(L),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${I}`)}A&&(this.eventController=A),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new o.DeferredPromise,this.segmentationRateManager=new S.VideoFxSegmentationRateManager(this.logger,I),this.streamParameters={framerate:p.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:p.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:p.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:p.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},da.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${da.isSharedArrayBufferSupported}`),this.canvasOpsManager=new c.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${I}`)}},"VideoFxProcessor");l.default=d,d.isSharedArrayBufferSupported=typeof SharedArrayBuffer<"u"},36737:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxSegmentationRateManager=void 0;const u=f(236855);let g=s(class{submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation===0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=u.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(h){h>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&h<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}constructor(h,a){this.logger=h,this.targetSegmentationCyclePercentage=a/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=u.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}},"VideoFxSegmentationRateManager");l.VideoFxSegmentationRateManager=g},403868:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"VideoSource");l.default=f},333041:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class Au{add(g){this.ids.add(g)}array(){return Array.from(this.ids.values()).sort((m,h)=>m-h)}contain(g){return this.ids.has(g)}forEach(g){this.ids.forEach(g)}empty(){return this.ids.size===0}size(){return this.ids.size}equal(g){if(!g)return this.ids.size===0;const m=this.array(),h=g.array();if(m.length!==h.length)return!1;for(let a=0;a<m.length;a++)if(m[a]!==h[a])return!1;return!0}clone(){return new Au(this.array())}remove(g){this.ids.delete(g)}toJSON(){return this.array()}truncate(g){const m=this.array();return new Au(m.splice(0,g))}constructor(g){this.ids=new Set(g)}},"DefaultVideoStreamIdSet");l.default=f},668077:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const g=f(50380),m=u(f(333041)),h=u(f(984650));let a=s(class{localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(n){return n>0&&n<1e3?1:Math.trunc(n/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const n=[];return this.currentIndex.sources.forEach(e=>{const t=new h.default;t.attendeeId=e.attendeeId,t.groupId=e.groupId,t.streamId=e.streamId,t.maxBitrateKbps=e.maxBitrateKbps,t.avgBitrateKbps=this.convertBpsToKbps(e.avgBitrateBps),t.width=e.width,t.height=e.height,t.maxFrameRate=e.framerate,n.push(t)}),n}integrateUplinkPolicyDecision(n){if(n&&n.length){const e=n[0];this.videoStreamDescription.maxBitrateKbps=e.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=e.maxFramerate}}integrateIndexFrame(n){if(this.currentIndex=n,!n)return;const e=new Map;let t=!1;for(const i of n.sources){if(!e.has(i.attendeeId)){e.set(i.attendeeId,i.groupId);continue}const o=e.get(i.attendeeId);o<i.groupId&&(this.logger.warn(`Old group ID ${o} found for attendee ID ${i.attendeeId}, replacing with newer group ID ${i.groupId}`),e.set(i.attendeeId,i.groupId)),t=!0}t&&(this.currentIndex.sources=this.currentIndex.sources.filter(i=>e.get(i.attendeeId)===i.groupId)),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}integrateSubscribeAckFrame(n){this.currentSubscribeAck=n,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,n.allocations&&n.allocations!==void 0&&n.allocations.length>0&&(this.sendVideoStreamId=n.allocations[0].streamId)}integrateBitratesFrame(n){if(this.currentIndex)for(const e of n.bitrates){const t=this.currentIndex.sources.find(i=>i.streamId===e.sourceStreamId);t!==void 0&&(t.avgBitrateBps=e.avgBitrateBps)}}allStreams(){const n=new m.default;if(this.currentIndex)for(const e of this.currentIndex.sources)n.add(e.streamId);return n}allVideoSendingSourcesExcludingSelf(n){const e=[],t=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const i of this.currentIndex.sources){const{attendeeId:o,externalUserId:c,mediaType:p}=i;o!==n&&p===g.SdkStreamMediaType.VIDEO&&(t.has(o)||(e.push({attendee:{attendeeId:o,externalUserId:c}}),t.add(o)))}return e}streamSelectionUnderBandwidthConstraint(n,e,t,i){const o=new Set;if(this.currentIndex)for(const y of this.currentIndex.sources)y.attendeeId===n||y.mediaType!==g.SdkStreamMediaType.VIDEO||!e.has(y.attendeeId)&&!t.has(y.attendeeId)&&o.add(y.attendeeId);const c=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(n),p=new Map;let S=0;c.forEach((y,E)=>{p.set(E,y[0]),S+=y[0].maxBitrateKbps}),S=this.trySelectHighBitrateForAttendees(c,e,S,i,p),this.trySelectHighBitrateForAttendees(c,o,S,i,p);const d=new m.default;for(const y of p.values())d.add(y.streamId);return d}highestQualityStreamFromEachGroupExcludingSelf(n){const e=new m.default;if(this.currentIndex){const t=new Map;for(const i of this.currentIndex.sources)i.attendeeId===n||i.mediaType!==g.SdkStreamMediaType.VIDEO||(!t.has(i.groupId)||i.maxBitrateKbps>t.get(i.groupId).maxBitrateKbps)&&t.set(i.groupId,i);for(const i of t.values())e.add(i.streamId)}return e}numberOfVideoPublishingParticipantsExcludingSelf(n){return this.highestQualityStreamFromEachGroupExcludingSelf(n).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(n){const e=this.streamIdForTrack(n);if(e===void 0||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${n}`),"";const t=this.subscribeStreamToAttendeeMap.get(e);return t||(this.logger.info(`track ${n} (stream ${e}) does not correspond to a known attendee`),"")}externalUserIdForTrack(n){const e=this.streamIdForTrack(n);if(e===void 0||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${n}`),"";const t=this.subscribeStreamToExternalUserIdMap.get(e);return t||(this.logger.info(`track ${n} (stream ${e}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(n){if(!this.streamToAttendeeMap)if(this.currentIndex)this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex);else return"";const e=this.streamToAttendeeMap.get(n);return e||(this.logger.info(`stream ID ${n} does not correspond to a known attendee`),"")}attendeeIdForGroupId(n){if(!this.groupIdToAttendeeMap)if(this.currentIndex)this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex);else return"";const e=this.groupIdToAttendeeMap.get(n);return e||(this.logger.info(`group ID ${n} does not correspond to a known attendee`),"")}groupIdForStreamId(n){if(!(!this.currentIndex||!this.currentIndex.sources)){for(const e of this.currentIndex.sources)if(e.streamId===n)return e.groupId;if(this.indexForSubscribe){for(const e of this.indexForSubscribe.sources)if(e.streamId===n)return e.groupId}}}StreamIdsInSameGroup(n,e){return this.groupIdForStreamId(n)===this.groupIdForStreamId(e)}streamIdForTrack(n){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(n)}streamIdForSSRC(n){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(n)}overrideStreamIdMappings(n,e){if(this.subscribeTrackToStreamMap){for(const[t,i]of this.subscribeTrackToStreamMap.entries())if(n===i){this.subscribeTrackToStreamMap.set(t,e);break}}if(this.subscribeSsrcToStreamMap){for(const[t,i]of this.subscribeSsrcToStreamMap.entries())if(n===i){this.subscribeSsrcToStreamMap.set(t,e);break}}}groupIdForSSRC(n){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(n)}streamsPausedAtSource(){const n=new m.default;if(this.currentIndex)for(const e of this.currentIndex.pausedAtSourceIds)n.add(e);return n}sendVideoStreamIdFromRid(n){return this.sendVideoStreamId}buildTrackToStreamMap(n){const e=new Map;this.logger.debug(()=>`trackMap ${JSON.stringify(n.tracks)}`);for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.trackLabel,t.streamId);return e}buildSSRCToStreamMap(n){const e=new Map;this.logger.debug(()=>`ssrcMap ${JSON.stringify(n.tracks)}`);for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,t.streamId);return e}buildSSRCToGroupMap(n){const e=new Map;for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,this.groupIdForStreamId(t.streamId));return e}buildStreamToAttendeeMap(n){const e=new Map;if(n)for(const t of n.sources)e.set(t.streamId,t.attendeeId);return e}buildGroupIdToAttendeeMap(n){const e=new Map;for(const t of n.sources)e.set(t.groupId,t.attendeeId);return e}buildStreamExternalUserIdMap(n){const e=new Map;if(n)for(const t of n.sources)t.externalUserId&&e.set(t.streamId,t.externalUserId);return e}trySelectHighBitrateForAttendees(n,e,t,i,o){for(const c of e){if(t>=i)break;if(n.has(c)){const p=n.get(c);for(const S of p.reverse())if(t-o.get(c).maxBitrateKbps+S.maxBitrateKbps<i){t=t-o.get(c).maxBitrateKbps+S.maxBitrateKbps,o.set(c,S);break}}}return t}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(n){const e=new Map;if(this.currentIndex)for(const t of this.currentIndex.sources)t.attendeeId===n||t.mediaType!==g.SdkStreamMediaType.VIDEO||(e.has(t.attendeeId)?e.get(t.attendeeId).push(t):e.set(t.attendeeId,[t]));return e.forEach((t,i)=>{t.sort((o,c)=>o.maxBitrateKbps>c.maxBitrateKbps?1:o.maxBitrateKbps<c.maxBitrateKbps?-1:0)}),e}constructor(n){this.logger=n,this.currentIndex=null,this.indexForSubscribe=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new h.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}},"DefaultVideoStreamIndex");l.default=a},473461:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const g=f(50380),m=u(f(668077)),h=u(f(984650));let a=s(class ca extends m.default{localStreamDescriptions(){const n=[];return this._localStreamInfos.forEach(e=>{n.push(e.clone())}),n}integrateUplinkPolicyDecision(n){let e=!0,t=0;for(let i=0;i<n.length;i++){const o=n[i].maxBitrate/1e3,c=n[i].maxFramerate;if(!e||i===this._localStreamInfos.length){e=!1;const p=new h.default;p.maxBitrateKbps=o,p.maxFrameRate=c,p.disabledByUplinkPolicy=o===0,p.rid=n[i].rid,o!==0&&(p.timeEnabled=Date.now()),this._localStreamInfos.push(p),t++;continue}this._localStreamInfos[t].maxBitrateKbps===0&&o>0&&(this._localStreamInfos[t].timeEnabled=Date.now()),this._localStreamInfos[t].maxBitrateKbps=o,this._localStreamInfos[t].maxFrameRate=c,this._localStreamInfos[t].disabledByUplinkPolicy=o===0,t++}e&&this._localStreamInfos.splice(t)}integrateBitratesFrame(n){super.integrateBitratesFrame(n);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of n.bitrates)e.add(i.sourceStreamId),this.streamIdToBitrateKbpsMap.set(i.sourceStreamId,this.convertBpsToKbps(i.avgBitrateBps));for(const i of t)e.has(i)||(this.streamIdToBitrateKbpsMap.get(i)===ca.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(i,ca.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(i,ca.NOT_SENDING_STREAM_BITRATE));this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let n="";for(const e of this._localStreamInfos)n+=`streamId=${e.streamId} maxBitrate=${e.maxBitrateKbps} disabledByUplink=${e.disabledByUplinkPolicy}
`;this.logger.debug(()=>n)}integrateIndexFrame(n){super.integrateIndexFrame(n);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of this.currentIndex.sources)i.mediaType===g.SdkStreamMediaType.VIDEO&&(e.add(i.streamId),this.streamIdToBitrateKbpsMap.has(i.streamId)||this.streamIdToBitrateKbpsMap.set(i.streamId,ca.UNSEEN_STREAM_BITRATE));for(const i of t)e.has(i)||this.streamIdToBitrateKbpsMap.delete(i)}integrateSubscribeAckFrame(n){if(super.integrateSubscribeAckFrame(n),!n.allocations||n.allocations===void 0)return;let e=0;this._sendRidToVideoStreamIdMap.clear();for(const t of n.allocations){if(this._localStreamInfos.length<e+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[e].groupId=t.groupId,this._localStreamInfos[e].streamId=t.streamId,this.streamIdToBitrateKbpsMap.has(t.streamId)||this.streamIdToBitrateKbpsMap.set(t.streamId,ca.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[e].rid,t.streamId),e++}}sendVideoStreamIdFromRid(n){let e=0;return this._sendRidToVideoStreamIdMap.has(n)&&(e=this._sendRidToVideoStreamIdMap.get(n)),e}constructor(){super(...arguments),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map}},"SimulcastVideoStreamIndex");l.default=a,a.UNSEEN_STREAM_BITRATE=-2,a.RECENTLY_INACTIVE_STREAM_BITRATE=-1,a.NOT_SENDING_STREAM_BITRATE=0,a.BitratesMsgFrequencyMs=4e3},984650:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=f(50380);let g=s(class aS{clone(){const h=new aS;return h.attendeeId=this.attendeeId,h.groupId=this.groupId,h.streamId=this.streamId,h.ssrc=this.ssrc,h.trackLabel=this.trackLabel,h.maxBitrateKbps=this.maxBitrateKbps,h.avgBitrateKbps=this.avgBitrateKbps,h.maxFrameRate=this.maxFrameRate,h.timeEnabled=this.timeEnabled,h.disabledByUplinkPolicy=this.disabledByUplinkPolicy,h.width=this.width,h.height=this.height,h}toStreamDescriptor(){const h=u.SdkStreamDescriptor.create();return h.mediaType=u.SdkStreamMediaType.VIDEO,h.trackLabel=this.trackLabel,h.attendeeId=this.attendeeId,h.streamId=this.streamId,h.groupId=this.groupId,h.framerate=this.maxFrameRate,h.maxBitrateKbps=this.disabledByUplinkPolicy?0:this.maxBitrateKbps,h.avgBitrateBps=this.avgBitrateKbps,h}totalPixels(){return this.width*this.height}constructor(h,a,r,n,e){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=h,this.groupId=a,this.streamId=r,this.maxBitrateKbps=n,this.avgBitrateKbps=e}},"VideoStreamDescription");l.default=g},639907:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(421537)),m=u(f(641501)),h=u(f(622283));let a=s(class zr{static connectVideoStreamToVideoElement(n,e,t){const i=t&&n.getVideoTracks()[0].getSettings().facingMode!=="environment"?"rotateY(180deg)":"";if(zr.setVideoElementFlag(e,"disablePictureInPicture",t),zr.setVideoElementFlag(e,"disableRemotePlayback",t),e.style.transform!==i&&(e.style.transform=i),e.hasAttribute("controls")&&e.removeAttribute("controls"),e.hasAttribute("autoplay")||e.setAttribute("autoplay","true"),e.hasAttribute("playsinline")||e.setAttribute("playsinline","true"),e.hasAttribute("muted")||(e.setAttribute("muted","true"),e.muted=!0),e.srcObject!==n&&(e.srcObject=n,new g.default().requiresVideoPlayWorkaround()&&e.paused)){const o=e.play();o!==void 0&&o.catch(c=>{console.warn("Error playing video in Safari",c)}).then(()=>{console.debug("Video played successfully in Safari")})}}static disconnectVideoStreamFromVideoElement(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(n)if(e)t||(n.srcObject=null,n.style.transform="");else{if(!n.srcObject)return;n.pause(),n.style.transform="",zr.setVideoElementFlag(n,"disablePictureInPicture",!1),zr.setVideoElementFlag(n,"disableRemotePlayback",!1),n.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&zr.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new h.default}devicePixelRatioChanged(n){this.tileState.devicePixelRatio=n,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(n,e,t,i,o,c,p,S){let d=!1;this.tileState.boundAttendeeId!==n&&(this.tileState.boundAttendeeId=n,new m.default(n).hasModality(m.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),d=!0),this.tileState.boundExternalUserId!==p&&(this.tileState.boundExternalUserId=p,d=!0),this.tileState.localTile!==e&&(this.tileState.localTile=e,d=!0),this.tileState.boundVideoStream!==t&&(this.tileState.boundVideoStream=t,d=!0),this.tileState.videoStreamContentWidth!==i&&(this.tileState.videoStreamContentWidth=i,d=!0),this.tileState.videoStreamContentHeight!==o&&(this.tileState.videoStreamContentHeight=o,d=!0),this.tileState.streamId!==c&&(this.tileState.streamId=c,d=!0),this.tileState.groupId!==S&&(this.tileState.groupId=S,d=!0),d&&this.sendTileStateUpdate()}bindVideoElement(n){let e=!1;this.tileState.boundVideoElement!==n&&(this.tileState.boundVideoElement=n,e=!0),this.tileState.boundVideoElement!==null?(this.tileState.videoElementCSSWidthPixels!==n.clientWidth&&(this.tileState.videoElementCSSWidthPixels=n.clientWidth,e=!0),this.tileState.videoElementCSSHeightPixels!==n.clientHeight&&(this.tileState.videoElementCSSHeightPixels=n.clientHeight,e=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),e&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return this.tileState.poorConnection?!1:(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return this.tileState.poorConnection?(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0):!1}capture(){if(!this.tileState.active)return null;const n=document.createElement("canvas"),e=this.tileState.boundVideoElement;n.width=e.videoWidth||e.width,n.height=e.videoHeight||e.height;const t=n.getContext("2d");return t.drawImage(e,0,0,n.width,n.height),t.getImageData(0,0,n.width,n.height)}setStreamId(n){this.tileState.streamId=n,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!!(!this.tileState.paused&&!this.tileState.poorConnection&&this.tileState.boundAttendeeId&&this.tileState.boundVideoElement&&this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){typeof this.tileState.videoElementCSSWidthPixels=="number"&&typeof this.tileState.videoElementCSSHeightPixels=="number"?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?zr.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):zr.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(n,e,t){e in n&&(n[e]=t)}constructor(n,e,t,i){this.tileController=t,this.devicePixelRatioMonitor=i,this.tileState=new h.default,this.tileState.tileId=n,this.tileState.localTile=e,this.devicePixelRatioMonitor.registerObserver(this)}},"DefaultVideoTile");l.default=a},622283:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class lS{clone(){const g=new lS;return g.tileId=this.tileId,g.localTile=this.localTile,g.isContent=this.isContent,g.active=this.active,g.paused=this.paused,g.poorConnection=this.poorConnection,g.boundAttendeeId=this.boundAttendeeId,g.boundExternalUserId=this.boundExternalUserId,g.boundVideoStream=this.boundVideoStream,g.boundVideoElement=this.boundVideoElement,g.nameplate=this.nameplate,g.videoStreamContentWidth=this.videoStreamContentWidth,g.videoStreamContentHeight=this.videoStreamContentHeight,g.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,g.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,g.devicePixelRatio=this.devicePixelRatio,g.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,g.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,g.streamId=this.streamId,g.groupId=this.groupId,g}constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null,this.groupId=null}},"VideoTileState");l.default=f},368695:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(t,i,o,c){function p(S){return S instanceof o?S:new o(function(d){d(S)})}return s(p,"adopt"),new(o||(o=Promise))(function(S,d){function y(A){try{I(c.next(A))}catch(L){d(L)}}s(y,"fulfilled");function E(A){try{I(c.throw(A))}catch(L){d(L)}}s(E,"rejected");function I(A){A.done?S(A.value):p(A.value).then(y,E)}s(I,"step"),I((c=c.apply(t,i||[])).next())})},g=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(577849)),h=g(f(691015)),a=g(f(890150)),r=f(823880),n=g(f(639907));let e=s(class{createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new h.default(new a.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return u(this,void 0,void 0,function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const i=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,i.destroy()})}bindVideoElement(i,o){const c=this.getVideoTile(i);if(c===null){this.logger.warn(`Ignoring video element binding for unknown tile id ${i}`);return}c.bindVideoElement(o)}unbindVideoElement(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const c=this.getVideoTile(i);if(c===null){this.logger.warn(`Ignoring video element unbinding for unknown tile id ${i}`);return}this.logger.info("Unbinding the video element");const p=c.stateRef().boundVideoElement;c.bindVideoElement(null),o&&(this.logger.info("Cleaning up the video element"),n.default.disconnectVideoStreamFromVideoElement(p,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===m.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const i=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),i.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!!(this.currentLocalTile&&this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(i){const o=this.getVideoTile(i);o&&(this.currentPausedTilesByIds.has(i)||(this.audioVideoController.pauseReceivingStream(o.stateRef().streamId),this.currentPausedTilesByIds.add(i)),o.pause())}unpauseVideoTile(i){const o=this.getVideoTile(i);o&&(this.currentPausedTilesByIds.has(i)&&(this.audioVideoController.resumeReceivingStream(o.stateRef().streamId),this.currentPausedTilesByIds.delete(i)),o.unpause())}getVideoTile(i){return this.tileMap.has(i)?this.tileMap.get(i):null}getVideoTileArea(i){const o=i.state();let c=0,p=0;return o.boundVideoElement&&(c=o.boundVideoElement.clientHeight*o.devicePixelRatio,p=o.boundVideoElement.clientWidth*o.devicePixelRatio),c*p}getAllRemoteVideoTiles(){const i=new Array;return this.tileMap.forEach((o,c)=>{(!this.currentLocalTile||c!==this.currentLocalTile.id())&&i.push(o)}),i}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const o=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const c=this.tileFactory.makeTile(o,i,this,this.devicePixelRatioMonitor);return this.tileMap.set(o,c),c}removeVideoTile(i){if(!this.tileMap.has(i))return;const o=this.tileMap.get(i);this.currentLocalTile===o&&(this.currentLocalTile=null),o.destroy(),this.tileMap.delete(i),this.audioVideoController.forEachObserver(c=>{r.Maybe.of(c.videoTileWasRemoved).map(p=>p.bind(c)(i))}),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(i){const o=[];for(const c of this.getAllVideoTiles()){const p=c.state();p.boundAttendeeId===i&&(this.removeVideoTile(p.tileId),o.push(p.tileId))}return o}removeAllVideoTiles(){const i=Array.from(this.tileMap.keys());for(const o of i)this.removeVideoTile(o)}sendTileStateUpdate(i){this.audioVideoController.forEachObserver(o=>{r.Maybe.of(o.videoTileDidUpdate).map(c=>c.bind(o)(i))})}haveVideoTilesWithStreams(){for(const i of this.getAllVideoTiles())if(i.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(i){return!!this.getVideoTileForAttendeeId(i)}getVideoTileForAttendeeId(i){for(const o of this.getAllVideoTiles())if(o.state().boundAttendeeId===i)return o}captureVideoTile(i){const o=this.getVideoTile(i);return o?o.capture():null}findOrCreateLocalVideoTile(){return this.currentLocalTile?this.currentLocalTile:(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.currentLocalTile)}constructor(i,o,c){this.tileFactory=i,this.audioVideoController=o,this.logger=c,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=o.configuration.keepLastFrameWhenPaused}},"DefaultVideoTileController");l.default=e},881497:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(639907));let m=s(class{makeTile(a,r,n,e){return new g.default(a,r,n,e)}},"DefaultVideoTileFactory");l.default=m},608744:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"BitrateParameters");l.default=f},452188:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(418760)),m=u(f(660937)),h=f(823880),a=u(f(589417)),r=u(f(608744));let n=s(class dr{updateConnectionMetric(t){}calculateEncodingParameters(){const t=[new r.default,new r.default,new r.default];this.shouldDisableSimulcast?(this.newActiveStreams=0,t[0].maxBitrateKbps=0,t[1].maxBitrateKbps=this.hiTargetBitrateKbps,t[2].maxBitrateKbps=0):this.numSenders<=4?(this.newActiveStreams=1,t[0].maxBitrateKbps=this.lowTargetBitrateKbps,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=this.hiTargetBitrateKbps):(this.newActiveStreams=2,t[0].maxBitrateKbps=this.lowTargetBitrateKbps*2/3,t[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:this.midTargetBitrateKbps*.6,t[2].maxBitrateKbps=0);const i=t.map((o,c,p)=>o.maxBitrateKbps);return this.newQualityMap=this.fillEncodingParamWithBitrates(i),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`),this.newQualityMap}chooseMediaTrackConstraints(){}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(t){const i=t.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,o=i!==this.numSenders,c=t.numberOfParticipants(),p=c>=0&&c<=2,S=this.shouldDisableSimulcast!==p;this.numSenders=i,this.shouldDisableSimulcast=p,this.optimalParameters=new a.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=t,(o||S)&&(this.newQualityMap=this.calculateEncodingParameters())}wantsResubscribe(){return!this.encodingParametersEqual()}compareEncodingParameter(t,i){return JSON.stringify(t)===JSON.stringify(i)}encodingParametersEqual(){let t=!1;for(const i of m.default.NAME_ARR_ASCENDING)if(t=t||!this.compareEncodingParameter(this.newQualityMap.get(i),this.currentQualityMap.get(i)),t)break;return!t}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(t){}setHasBandwidthPriority(t){}setHighResolutionFeatureEnabled(t){this.enableFhdVideo=t,this.hiTargetBitrateKbps=t?dr.kHiTargetBitrateKbpsFhd:dr.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=t?dr.kMidTargetBitrateKbpsFhd:dr.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=t?dr.kLowTargetBitrateKbpsFhd:dr.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(t){const i=new Map,o=1e3,c=m.default.NAME_ARR_ASCENDING,p=t;let S=this.shouldDisableSimulcast?1:4;for(let d=0;d<c.length;d++){const y=c[d];i.set(y,{rid:y,active:p[d]>0,scaleResolutionDownBy:Math.max(S,1),maxBitrate:p[d]*o}),S=S/2}return i}getQualityMapString(t){let i="";return this.videoIndex.localStreamDescriptions().length===3&&t.forEach(c=>{i+=`{ rid: ${c.rid} active:${c.active} maxBitrate:${c.maxBitrate}}`}),i}getEncodingSimulcastLayer(t){switch(t){case 0:return g.default.High;case 1:return g.default.LowAndHigh;case 2:return g.default.LowAndMedium}}publishEncodingSimulcastLayer(){const t=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver(i=>{h.Maybe.of(i.encodingSimulcastLayersDidChange).map(o=>o.bind(i)(t))})}addObserver(t){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const i of this.observerQueue)t(i)}constructor(t,i){this.selfAttendeeId=t,this.logger=i,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.videoIndex=null,this.observerQueue=new Set,this.hiTargetBitrateKbps=dr.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=dr.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=dr.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new a.default(0,0,0,0,!0),this.parametersInEffect=new a.default(0,0,0,0,!0),this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}},"DefaultSimulcastUplinkPolicy");l.default=n,n.kHiTargetBitrateKbpsHd=1200,n.kMidTargetBitrateKbpsHd=600,n.kLowTargetBitrateKbpsHd=300,n.kHiTargetBitrateKbpsFhd=2e3,n.kMidTargetBitrateKbpsFhd=1e3,n.kLowTargetBitrateKbpsFhd=500},400493:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(935385));let m=s(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var a,r,n,e,t,i,o,c,p,S,d,y;const E=new Map,I=1e3,A=g.default.NAME_ARR_ASCENDING;return E.set(A[0],{rid:A[0],active:!0,scaleResolutionDownBy:((r=(a=this.encodingParams)===null||a===void 0?void 0:a.low)===null||r===void 0?void 0:r.scaleResolutionDownBy)||2,maxBitrate:(((e=(n=this.encodingParams)===null||n===void 0?void 0:n.low)===null||e===void 0?void 0:e.maxBitrateKbps)||this.defaultLowTargetBitrateKbps)*I,maxFramerate:((i=(t=this.encodingParams)===null||t===void 0?void 0:t.low)===null||i===void 0?void 0:i.maxFramerate)||5}),E.set(A[1],{rid:A[1],active:!0,scaleResolutionDownBy:((c=(o=this.encodingParams)===null||o===void 0?void 0:o.high)===null||c===void 0?void 0:c.scaleResolutionDownBy)||1,maxBitrate:(((S=(p=this.encodingParams)===null||p===void 0?void 0:p.high)===null||S===void 0?void 0:S.maxBitrateKbps)||this.defaultHiTargetBitrateKbps)*I,maxFramerate:(y=(d=this.encodingParams)===null||d===void 0?void 0:d.high)===null||y===void 0?void 0:y.maxFramerate}),E}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){this.enableUhdContent=a,this.defaultHiTargetBitrateKbps=a?2e3:1200,this.defaultLowTargetBitrateKbps=a?500:300}addObserver(a){}removeObserver(a){}forEachObserver(a){}constructor(a,r){this.encodingParams=r,this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}},"DefaultSimulcastUplinkPolicyForContentShare");l.default=m},820732:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(589417));let h=s(class ua{reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new m.default(0,0,0,0,!1),this.parametersInEffect=new m.default(0,0,0,0,!1),this.encodingParamMap.set(ua.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(r){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(r){var n;let e=!0;this.transceiverController&&(e=this.transceiverController.hasVideoInput());const t=r.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(e?1:0),i=r.numberOfParticipants();if(this.numParticipants===i&&this.numberOfPublishedVideoSources===t){(n=this.logger)===null||n===void 0||n.debug("Skipping update index; Number of participants has not changed");return}this.numberOfPublishedVideoSources=t,this.numParticipants=i,this.updateOptimalParameters()}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let r=1;if(this.transceiverController){const n=this.getStreamCaptureSetting();n&&(r=this.calculateEncodingParameters(n).scaleResolutionDownBy)}this.optimalParameters=new m.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,r,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let r=640;return this.getNumberOfPublishedVideoSources()>4&&(r=320),r}captureHeight(){let r=384;return this.getNumberOfPublishedVideoSources()>4&&(r=192),r}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let r=0;return this.getNumberOfPublishedVideoSources()<=2?r=this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?r=this.idealMaxBandwidthKbps*2/3:r=(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(r)}setIdealMaxBandwidthKbps(r){this.idealMaxBandwidthKbps=r}setHasBandwidthPriority(r){this.hasBandwidthPriority=r}setTransceiverController(r){this.transceiverController=r}setSVCEnabled(r){var n;this.enableSVC=r,(n=this.logger)===null||n===void 0||n.info(`setSVCEnabled, enable: ${r}}`)}setHighResolutionFeatureEnabled(r){this.enableHighResolutionFeature=r}updateTransceiverController(){return u(this,void 0,void 0,function*(){const r=this.getStreamCaptureSetting();if(!r)return;const n=this.calculateEncodingParameters(r);this.shouldUpdateEndcodingParameters(n)&&(this.encodingParamMap.set(ua.encodingMapKey,n),this.transceiverController.setEncodingParameters(this.encodingParamMap))})}shouldUpdateEndcodingParameters(r){var n,e;const t=(e=(n=this.transceiverController.localVideoTransceiver().sender.getParameters())===null||n===void 0?void 0:n.encodings)===null||e===void 0?void 0:e[0];return r.maxBitrate!==(t==null?void 0:t.maxBitrate)||r.scaleResolutionDownBy!==(t==null?void 0:t.scaleResolutionDownBy)||(r==null?void 0:r.scalabilityMode)!==(t==null?void 0:t.scalabilityMode)}calculateEncodingParameters(r){var n,e,t;const i=this.maxBandwidthKbps()*1e3;let o=1,c=720;if(r.height!==void 0&&r.width!==void 0&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(c=ua.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),ua.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],c===480&&(!((n=this.browserBehavior)===null||n===void 0)&&n.disable480pResolutionScaleDown())&&(c=360),o=Math.max(Math.min(r.height,r.width)/c,1),(e=this.logger)===null||e===void 0||e.info(`Resolution scale factor is ${o} for capture resolution ${r.width}x${r.height}. New dimension is ${r.width/o}x${r.height/o}`)),this.enableSVC){let p;return this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?p="L1T1":p=c>=720?"L3T3":c>=360?"L2T3":"L1T3",(t=this.logger)===null||t===void 0||t.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${i}  targetHeight: ${c}  scalabilityMode: ${p}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:o,maxBitrate:i,scalabilityMode:p}}else return{scaleResolutionDownBy:o,maxBitrate:i}}getStreamCaptureSetting(){var r,n,e,t;return(t=(e=(n=(r=this.transceiverController)===null||r===void 0?void 0:r.localVideoTransceiver())===null||n===void 0?void 0:n.sender)===null||e===void 0?void 0:e.track)===null||t===void 0?void 0:t.getSettings()}getNumberOfPublishedVideoSources(){var r;return(r=this.numberOfPublishedVideoSources)!==null&&r!==void 0?r:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(r,n){const e=r??n,t=e.length>0&&ua.SVCCodecNames.includes(e[0].codecName);t!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=t,this.updateOptimalParameters())}constructor(r,n=!0,e=void 0,t=void 0){this.selfAttendeeId=r,this.scaleResolution=n,this.logger=e,this.browserBehavior=t,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}},"NScaleVideoUplinkBandwidthPolicy");l.default=h,h.encodingMapKey="video",h.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],h.SVCCodecNames=["VP9"]},337075:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(589417));let m=s(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new g.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}constructor(){}},"NoVideoUplinkBandwidthPolicy");l.default=m},438577:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});function f(g){return g.map(m=>typeof m=="object"?JSON.stringify(m):`${m}`).join(" ")}s(f,"stringify");let u=s(class{debug(){for(var m=arguments.length,h=new Array(m),a=0;a<m;a++)h[a]=arguments[a];this.base.debug(f(h))}info(){for(var m=arguments.length,h=new Array(m),a=0;a<m;a++)h[a]=arguments[a];this.base.info(f(h))}warn(){for(var m=arguments.length,h=new Array(m),a=0;a<m;a++)h[a]=arguments[a];this.base.warn(f(h))}error(){for(var m=arguments.length,h=new Array(m),a=0;a<m;a++)h[a]=arguments[a];this.base.error(f(h))}constructor(m){this.base=m}},"LoggerAdapter");l.default=u},591025:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(i,o,c,p){function S(d){return d instanceof c?d:new c(function(y){y(d)})}return s(S,"adopt"),new(c||(c=Promise))(function(d,y){function E(L){try{A(p.next(L))}catch(M){y(M)}}s(E,"fulfilled");function I(L){try{A(p.throw(L))}catch(M){y(M)}}s(I,"rejected");function A(L){L.done?d(L.value):S(L.value).then(E,I)}s(A,"step"),A((p=p.apply(i,o||[])).next())})},g=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusDeviceTransformer=void 0;const m=f(897828),h=f(450804),a=g(f(508338)),r=g(f(438577)),n=g(f(326866)),e=g(f(349433));let t=s(class Er{static isSupported(o,c){var p,S;const d=Er.defaultFetchBehavior(),y=c!=null&&c.logger?new r.default(c.logger):void 0,E={fetchBehavior:d,logger:y};if(h.isIFramed()){if((c==null?void 0:c.allowIFrame)===!1)return(p=c==null?void 0:c.logger)===null||p===void 0||p.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);(S=c==null?void 0:c.logger)===null||S===void 0||S.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return m.VoiceFocus.isSupported(Er.augmentSpec(o),E)}static create(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0;var y,E,I;return u(this,void 0,void 0,function*(){S&&S.Meeting.Meeting&&(S=S.Meeting);const A=((I=(E=(y=S==null?void 0:S.Meeting)===null||y===void 0?void 0:y.MeetingFeatures)===null||E===void 0?void 0:E.Audio)===null||I===void 0?void 0:I.EchoReduction)==="AVAILABLE",L=p&&p.supported===!0&&p.model.name==="ns_es"&&!A,M=o.name==="ns_es"&&!A;if(L||M)throw new Error("Echo Reduction requested but not enabled.");const k=new Er(o,c,p);return yield k.init(),k})}static configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return u(this,void 0,void 0,function*(){return new Er(o,c,void 0).configure(!0)})}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(o,c){return u(this,void 0,void 0,function*(){if(this.supported)try{const[S,d]=yield this.allocateVoiceFocus(!0),y=Object.assign(Object.assign({},c),{es:this.spec.name==="ns_es"});return new n.default(o,S,d,y)}catch{return}})}static destroyVoiceFocus(o){var c;return u(this,void 0,void 0,function*(){(c=o==null?void 0:o.vf)===null||c===void 0||c.destroy()})}static augmentSpec(o){return!o||!o.assetGroup&&!o.revisionID?Object.assign(Object.assign({},o),{assetGroup:Er.currentSDKAssetGroup()}):o}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const c={fetchBehavior:this.fetchBehavior,preResolve:o,logger:this.vfLogger};return m.VoiceFocus.configure(this.spec,c)})}init(){var o;return u(this,void 0,void 0,function*(){this.configuration||(this.configuration=this.configure());const c=yield this.configuration;if(!c.supported){this.supported=!1;return}this.pendingVoiceFocus=this.createVoiceFocus(c,this.preload);try{yield this.pendingVoiceFocus}catch(p){(o=this.logger)===null||o===void 0||o.error(`Unable to initialize Amazon Voice Focus: ${p}`),this.supported=!1}})}createVoiceFocus(o,c){return u(this,void 0,void 0,function*(){const p=new e.default;return this.vf=yield m.VoiceFocus.init(o,{delegate:p,preload:c,logger:this.vfLogger}),[this.vf,p]})}allocateVoiceFocus(o){return u(this,void 0,void 0,function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const c=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,c}return this.createVoiceFocus(yield this.configuration,o)})}static majorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const o=this.majorVersion();return o?`sdk-${o}`:"stable-v1"}static defaultFetchBehavior(){const o=Er.majorMinorVersion()||"unknown",c=a.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(o)}&ua=${encodeURIComponent(c)}`}}constructor(o,{preload:c=!0,logger:p,fetchBehavior:S=Er.defaultFetchBehavior()},d){this.spec=o,this.supported=!0,this.logger=p,this.vfLogger=p?new r.default(p):void 0,this.preload=c,this.fetchBehavior=S,this.spec=Er.augmentSpec(this.spec),d&&(this.configuration=Promise.resolve(d))}},"VoiceFocusDeviceTransformer");l.VoiceFocusDeviceTransformer=t,l.default=t},326866:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(421537));let h=s(class dS{getInnerDevice(){return this.device}mute(n){return u(this,void 0,void 0,function*(){this.node&&(n?yield this.node.disable():yield this.node.enable())})}stop(){return u(this,void 0,void 0,function*(){this.node&&(this.node.disconnect(),yield this.node.stop())})}chooseNewInnerDevice(n){return u(this,void 0,void 0,function*(){return this.device===n&&!a(n)?this:new dS(n,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode)})}intrinsicDevice(){return u(this,void 0,void 0,function*(){if(this.failed)return this.device;const n=this.nodeOptions.es,e={echoCancellation:!n,googEchoCancellation:!n,googEchoCancellation2:!n,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return this.nodeOptions&&this.nodeOptions.agc!==void 0?t=this.nodeOptions.agc.useBuiltInAGC:t=!0,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?typeof this.device=="string"?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e})}createAudioNode(n){var e,t;return u(this,void 0,void 0,function*(){if(((e=this.node)===null||e===void 0?void 0:e.context)===n)return{start:this.node,end:this.node};const o=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if((t=this.node)===null||t===void 0||t.disconnect(),this.node=yield this.voiceFocus.createNode(n,o),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(n,{channelCount:1,channelCountMode:"explicit"});for(const S of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(S);this.createMixSourceNode()}const c=this.node,p=this.node;return{start:c,end:p}}catch(c){throw this.failed=!0,this.delegate.onFallback(this,c),c}})}observeMeetingAudio(n){return u(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;n.addAudioMixObserver(this);const e=yield n.getCurrentMeetingAudioStream();e&&this.addFarEndStream(e)})}unObserveMeetingAudio(n){return u(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;n.removeAudioMixObserver(this);const e=yield n.getCurrentMeetingAudioStream();e&&this.removeFarendStream(e)})}addObserver(n){this.delegate.addObserver(n)}removeObserver(n){this.delegate.removeObserver(n)}addFarEndStream(n){return u(this,void 0,void 0,function*(){!this.nodeOptions.es||!n||this.farEndStreamToAudioSourceNode.has(n)||(this.node?this.assignFarEndStreamToAudioSourceNode(n):this.farEndStreamToAudioSourceNode.set(n,null))})}removeFarendStream(n){var e;return u(this,void 0,void 0,function*(){(e=this.farEndStreamToAudioSourceNode.get(n))===null||e===void 0||e.disconnect(),this.farEndStreamToAudioSourceNode.delete(n)})}meetingAudioStreamBecameActive(n){return u(this,void 0,void 0,function*(){this.addFarEndStream(n)})}meetingAudioStreamBecameInactive(n){return u(this,void 0,void 0,function*(){this.removeFarendStream(n)})}assignFarEndStreamToAudioSourceNode(n){const e=this.node.context.createMediaStreamSource(n);e.channelCount=1,e.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(n,e),e.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}constructor(n,e,t,i,o=!1,c=void 0,p=new m.default,S=new Map,d=void 0,y=void 0){this.device=n,this.voiceFocus=e,this.delegate=t,this.nodeOptions=i,this.failed=o,this.node=c,this.browserBehavior=p,this.farEndStreamToAudioSourceNode=S,this.mixDestNode=d,this.mixSourceNode=y}},"VoiceFocusTransformDevice");function a(r){return r==="default"?!0:!r||typeof r!="object"?!1:"deviceId"in r&&r.deviceId==="default"||"id"in r&&r.id==="default"}s(a,"isDefaultDevice"),l.default=h},349433:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{addObserver(g){this.observers.add(g)}removeObserver(g){this.observers.delete(g)}onFallback(g,m){var h;for(const a of this.observers)(h=a.voiceFocusFellBackToInnerStream)===null||h===void 0||h.call(a,g,m)}onCPUWarning(){var g;for(const m of this.observers)(g=m.voiceFocusInsufficientResources)===null||g===void 0||g.call(m)}constructor(){this.observers=new Set}},"VoiceFocusTransformDeviceDelegate");l.default=f},943145:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class Kl{onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(g){let m=0;for(const h of g.streams){const a=!!h.attendeeId,r=!!h.externalUserId,n=h.hasOwnProperty("muted"),e=!!h.dropped;if(a){this.attendeeIdToStreamId[h.attendeeId]&&this.attendeeIdToStreamId[h.attendeeId]<h.audioStreamId&&delete this.attendeeIdToStreamId[h.attendeeId],this.streamIdToAttendeeId[h.audioStreamId]=h.attendeeId;const t=r?h.externalUserId:h.attendeeId;this.streamIdToExternalUserId[h.audioStreamId]=t,this.attendeeIdToStreamId[h.attendeeId]=h.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(h.attendeeId,!0,t,!1,{attendeeIndex:m++,attendeesInFrame:g.streams.length})}if(n){const t=this.streamIdToAttendeeId[h.audioStreamId],i=this.streamIdToExternalUserId[h.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(t,null,h.muted,null,i)}if(!a&&!n){const t=this.streamIdToAttendeeId[h.audioStreamId];if(t){const i=this.streamIdToExternalUserId[h.audioStreamId];delete this.streamIdToAttendeeId[h.audioStreamId],delete this.streamIdToExternalUserId[h.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[h.audioStreamId],this.attendeeIdToStreamId[t]===h.audioStreamId&&delete this.attendeeIdToStreamId[t];let o=!1;for(const c of Object.keys(this.streamIdToAttendeeId)){const p=parseInt(c);if(p>h.audioStreamId&&this.streamIdToAttendeeId[p]===t){o=!0;break}}o||this.realtimeController.realtimeSetAttendeeIdPresence(t,!1,i,e,{attendeeIndex:m++,attendeesInFrame:g.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(g),this.sessionReconnected=!1)}cleanUpState(g){const m=Object.values(this.streamIdToAttendeeId),h=g.streams.map(r=>r.attendeeId),a=m.filter(r=>!h.includes(r));for(const[r,n]of a.entries()){const e=this.attendeeIdToStreamId[n],t=this.streamIdToExternalUserId[e];if(delete this.streamIdToAttendeeId[e],delete this.streamIdToExternalUserId[e],delete this.warnedAboutMissingStreamIdMapping[e],delete this.attendeeIdToStreamId[n],n===this.selfAttendeeId){this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection");continue}this.realtimeController.realtimeSetAttendeeIdPresence(n,!1,t,!1,{attendeeIndex:r,attendeesInFrame:n.length})}}sendRealtimeUpdatesForAudioMetadata(g){let m=null,h=null;for(const a of g.attendeeStates){const r=this.attendeeIdForStreamId(a.audioStreamId);a.hasOwnProperty("volume")&&(m===null&&(m={}),r!==null&&(m[r]=this.normalizedVolume(a))),a.hasOwnProperty("signalStrength")&&(h===null&&(h={}),r!==null&&(h[r]=this.normalizedSignalStrength(a)))}this.applyRealtimeUpdatesForAudioMetadata(m,h)}normalizedVolume(g){const h=1-(-g.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(h,0),1)}normalizedSignalStrength(g){const m=g.signalStrength/Kl.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(m,0),1)}applyRealtimeUpdatesForAudioMetadata(g,m){for(const h in this.streamIdToAttendeeId){const a=this.streamIdToAttendeeId[h],r=this.streamIdToExternalUserId[h];let n=null,e=null;g!==null&&(g.hasOwnProperty(a)?n=g[a]:n=Kl.IMPLICIT_VOLUME),m!==null&&(m.hasOwnProperty(a)?e=m[a]:e=Kl.IMPLICIT_SIGNAL_STRENGTH),(n!==null||e!==null)&&this.realtimeController.realtimeUpdateVolumeIndicator(a,n,null,e,r)}}attendeeIdForStreamId(g){if(g===0)return null;const m=this.streamIdToAttendeeId[g];return m||(this.warnedAboutMissingStreamIdMapping[g]||(this.warnedAboutMissingStreamIdMapping[g]=!0,this.logger.warn(`volume indicator stream id ${g} seen before being defined`)),null)}constructor(g,m,h,a,r){this.logger=g,this.realtimeController=m,this.minVolumeDecibels=h,this.maxVolumeDecibels=a,this.selfAttendeeId=r,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}},"DefaultVolumeIndicatorAdapter");l.default=f,f.MAX_SIGNAL_STRENGTH_LEVELS=2,f.IMPLICIT_VOLUME=0,f.IMPLICIT_SIGNAL_STRENGTH=1},709345:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(508338)),m=u(f(804417));let h=s(class{create(r,n,e){this.connection=new WebSocket(e?r:g.default.urlWithVersion(r),n),this.connection.binaryType="arraybuffer"}send(r){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return r instanceof Uint8Array?this.connection.send(r.buffer):this.connection.send(r),!0}catch(n){return this.logger.debug(()=>`send error: ${n.message}, websocket state=${m.default[this.readyState()]}`),!1}}close(r,n){var e;(e=this.connection)===null||e===void 0||e.close(r,n)}destroy(){this.connection=void 0}addEventListener(r,n){if(!this.connection){this.logger.warn("Cannot add event listener with no WebSocket connection.");return}this.connection.addEventListener(r,n)}removeEventListener(r,n){var e;(e=this.connection)===null||e===void 0||e.removeEventListener(r,n)}readyState(){if(!this.connection)return m.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return m.default.Connecting;case WebSocket.OPEN:return m.default.Open;case WebSocket.CLOSING:return m.default.Closing;case WebSocket.CLOSED:return m.default.Closed}}constructor(r){this.logger=r}},"DefaultWebSocketAdapter");l.default=h},804417:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WebSocketReadyState=void 0;var f;(function(u){u[u.None=0]="None",u[u.Connecting=1]="Connecting",u[u.Open=2]="Open",u[u.Closing=3]="Closing",u[u.Closed=4]="Closed"})(f=l.WebSocketReadyState||(l.WebSocketReadyState={})),l.default=f},158970:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(A,L,M,k){function w(N){return N instanceof M?N:new M(function(T){T(N)})}return s(w,"adopt"),new(M||(M=Promise))(function(N,T){function O(K){try{G(k.next(K))}catch(H){T(H)}}s(O,"fulfilled");function D(K){try{G(k.throw(K))}catch(H){T(H)}}s(D,"rejected");function G(K){K.done?N(K.value):w(K.value).then(O,D)}s(G,"step"),G((k=k.apply(A,L||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.decideModel=l.measureAndDecideExecutionApproach=void 0;const g=f(120165),m=f(966951),h=3,a=2.5,r=2.63,n=.6,e=.65,t=.5,i=.7,o={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};let c=s(class{roundtrip(L,M,k){return new Promise((w,N)=>{this.worker.then(T=>{let O;O=s(D=>{const{message:G,key:K}=D.data;G===M&&K===k&&(T.removeEventListener("message",O),w(D.data))},"listener"),T.addEventListener("message",O),T.postMessage(L)}).catch(T=>{var O;(O=this.logger)===null||O===void 0||O.error("Failed to load worker.",T),N(T)})})}supportsSIMD(L){const M="simd",k=L||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,w={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:k,key:M};return this.roundtrip(w,"simd-support",M).then(N=>N.supports)}measure(L,M){const k=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,w=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,N=L?w:k,T=`bench:${L}`,O={message:"measure",fetchBehavior:this.fetchBehavior,budget:M,path:N,key:T};return this.roundtrip(O,"measurement",T).then(D=>{if(D.measurement)return D.measurement;throw new Error("Failed to measure.")})}stop(){this.worker.then(L=>{var M;(M=this.logger)===null||M===void 0||M.debug("Stopping estimator worker."),L.terminate()}).catch(L=>{})}constructor(L,M){this.fetchConfig=L,this.logger=M;const k=`${L.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:L.headers,escapedQueryString:L.escapedQueryString},this.worker=g.loadWorker(k,"VoiceFocusEstimator",this.fetchBehavior,M)}},"Estimator");const p=s((A,L)=>A===1?n:L==="quality"?e*A:t*A,"inlineScoreMultiplier"),S=s(function(A){let{supportsSIMD:L,supportsSAB:M,duration:k,executionPreference:w="auto",simdPreference:N,variantPreference:T="auto",namePreference:O="default",usagePreference:D,executionQuantaPreference:G=h}=A,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,H=arguments.length>2?arguments[2]:void 0;const me=N==="force"||N!=="disable"&&L,we=k!==-1,ue=we?(me?a:r)/k:0,Pe=me?K.simd:K.wasm,Ye=we?p(G,D)*ue:0,be=we?i*ue:0,He=O,Ke=s(st=>({supported:!1,reason:st}),"unsupported");if(we){if(ue<Pe.noSupport)return Ke(`Performance score ${ue} worse than threshold ${Pe.noSupport}.`)}else if(w==="auto"||T==="auto")return Ke(`Missing explicit execution (${w}) or variant (${T}) preference, but no scoring performed.`);H==null||H.debug(`Bench duration ${k} yields inline score ${Ye} and worker score ${be}.`);const Ue=s((st,ut,We)=>({supported:!0,useSIMD:me,processor:st,executionApproach:ut,variant:We,executionQuanta:ut==="inline"?G:void 0,name:He}),"succeed"),ht=s((st,ut,We)=>ut!=="auto"?!we||st>We[ut]?ut:"failed":st>We.c100?"c100":st>We.c50?"c50":st>We.c20?"c20":st>We.c10?"c10":"failed","resolveVariant"),Tt=s(st=>{switch(st||"auto"){case"auto":{let ut=Tt("inline"),We=Tt("worker");return H==null||H.debug(`Reducing auto preference: ${JSON.stringify(ut)} vs ${JSON.stringify(We)}`),ut.supported===!1||We.supported===!1?We:ut.variant===We.variant||ut.variant==="c50"?ut:We}case"worker":return m.supportsSharedArrayBuffer(globalThis,window,H)?Tt("worker-sab"):Tt("worker-postMessage");case"inline":{const ut=ht(Ye,T,Pe.inline);return ut==="failed"?Ke(`Performance score ${Ye} not sufficient for inline use with variant preference ${T}.`):Ue("voicefocus-inline-processor","inline",ut)}case"worker-sab":{if(!M){const We="Requested worker-sab but no SharedArrayBuffer support.";return H==null||H.warn(We),{supported:!1,reason:We}}const ut=ht(be,T,Pe.worker);return ut==="failed"?Ke(`Performance score ${be} not sufficient for worker use with variant preference ${T}.`):Ue("voicefocus-worker-sab-processor","worker-sab",ut)}case"worker-postMessage":{const ut=ht(be,T,Pe.worker);if(ut==="failed")return Ke(`Performance score ${be} not sufficient for worker use.`);if(He==="ns_es"){const We="Requested echo suppression but postMessage executor does not support it.";return H==null||H.warn(We),{supported:!1,reason:We}}return Ue("voicefocus-worker-postMessage-processor","worker-postMessage",ut)}}},"reducePreference");return Tt(w)},"decideExecutionApproach"),d=s((A,L,M,k)=>u(void 0,void 0,void 0,function*(){const w={supportsSIMD:A,supportsSAB:m.supportsSharedArrayBuffer(globalThis,window,M),duration:-1};if(A)return M==null||M.info("Supports SIMD: true (force)"),w;const N=!k,T=k||new c(L,M);try{const O=!m.isOldChrome(window,M)&&(yield T.supportsSIMD());return M==null||M.info(`Supports SIMD: ${O} (force: ${A})`),w.supportsSIMD=O,w}finally{N&&T.stop()}}),"featureCheck"),y=s((A,L,M,k)=>u(void 0,void 0,void 0,function*(){const w=new c(L,k);try{const N=yield d(A,L,k,w);if(N.supportsSIMD)try{return N.duration=yield w.measure(!0,M),k==null||k.info("SIMD timing:",N.duration),N}catch{k==null||k.warn("Failed SIMD estimation; falling back to non-SIMD."),N.supportsSIMD=!1}return N.duration=yield w.measure(!1,M),k==null||k.info("No-SIMD timing:",N.duration),N}catch(N){throw k==null||k.error("Could not feature check.",N),N}finally{w.stop()}}),"estimateAndFeatureCheck"),E=s(function(A,L,M){let k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:o;return u(void 0,void 0,void 0,function*(){let w=A.executionPreference;const{usagePreference:N,variantPreference:T,namePreference:O,simdPreference:D,estimatorBudget:G,executionQuantaPreference:K}=A;N==="interactivity"&&w!=="inline"&&(M==null||M.debug(`Overriding execution preference ${w} to reflect interactivity preference.`),w="inline");const H=D==="force",q=T!=="auto",me=w!=="auto";let we;try{q&&me?we=yield d(H,L,M):we=yield y(H,L,G,M)}catch(ue){throw M==null||M.error("Could not load estimator.",ue),new Error("Could not load Voice Focus estimator.")}return S(Object.assign(Object.assign({},we),{simdPreference:D,executionPreference:w,variantPreference:T,namePreference:O,usagePreference:N,executionQuantaPreference:K}),k,M)})},"measureAndDecideExecutionApproach");l.measureAndDecideExecutionApproach=E;const I=s(A=>{let{category:L,name:M,variant:k,simd:w,url:N}=A;return`${L}-${M}-${k}-v1${w?"_simd":""}`},"decideModel");l.decideModel=I},598696:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isValidRevisionID=l.isValidAssetGroup=l.resolveURL=l.addQueryParams=l.withQueryString=l.withRequestHeaders=l.fetchWithBehavior=void 0;function f(e,t,i){if(!i)return fetch(e,t);const o=g(e,i),c=u(t,i);return fetch(o,c)}s(f,"fetchWithBehavior"),l.fetchWithBehavior=f;function u(e,t){return t!=null&&t.headers?e?Object.assign(Object.assign({},e),{headers:Object.assign(Object.assign({},e.headers||{}),t.headers)}):{headers:t.headers}:e}s(u,"withRequestHeaders"),l.withRequestHeaders=u;function g(e,t){if(!(t!=null&&t.escapedQueryString))return e;const i=e.lastIndexOf("?")!==-1;return`${e}${i?"&":"?"}${t.escapedQueryString}`}s(g,"withQueryString"),l.withQueryString=g;function m(e,t){const i=Object.keys(t);if(!i.length)return e;const o=new URLSearchParams(e==null?void 0:e.escapedQueryString);for(const c of i)o.append(c,t[c]);return Object.assign(Object.assign({},e),{escapedQueryString:o.toString()})}s(m,"addQueryParams"),l.addQueryParams=m;const h={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function a(e,t){return f(e,h,t).then(i=>i.redirected?i.url:e)}s(a,"resolveURL"),l.resolveURL=a;function r(e){return!!e&&/^[-.a-zA-Z0-9]+$/.test(e)}s(r,"isValidAssetGroup"),l.isValidAssetGroup=r;function n(e){return!!e&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(e)}s(n,"isValidRevisionID"),l.isValidRevisionID=n},120165:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.loadWorker=void 0;const u=f(598696),g={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},m=s((h,a,r,n)=>{n==null||n.debug(`Loading ${a} worker from ${h}.`);let e=!1;try{e=self.origin===new URL(h).origin}catch(t){n==null||n.error("Could not compare origins.",t)}if(e){const t=u.withQueryString(h,r);return Promise.resolve(new Worker(t,{name:a}))}return u.fetchWithBehavior(h,g,r).then(t=>{if(t.ok)return t.blob().then(i=>new Worker(window.URL.createObjectURL(i)));throw new Error("Fetch failed.")})},"loadWorker");l.loadWorker=m},966951:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(d,y,E,I){function A(L){return L instanceof E?L:new E(function(M){M(L)})}return s(A,"adopt"),new(E||(E=Promise))(function(L,M){function k(T){try{N(I.next(T))}catch(O){M(O)}}s(k,"fulfilled");function w(T){try{N(I.throw(T))}catch(O){M(O)}}s(w,"rejected");function N(T){T.done?L(T.value):A(T.value).then(k,w)}s(N,"step"),N((I=I.apply(d,y||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.isOldChrome=l.supportsWASMStreaming=l.supportsSharedArrayBuffer=l.supportsWASM=l.supportsAudioWorklet=l.supportsWorker=l.supportsVoiceFocusWorker=l.supportsWASMPostMessage=l.isSafari=void 0;const g=f(120165),m=s(function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/)},"isChrome"),h=s(function(){const y=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent,E=y.match(/Safari\//),I=y.match(/Chrom(?:e|ium)\//);return!!(E&&!I)},"isSafari");l.isSafari=h;const a=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;return l.isSafari(d)?!1:m(d)?(p(d)||0)<95:!0},"supportsWASMPostMessage");l.supportsWASMPostMessage=a;const r=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0,E=arguments.length>2?arguments[2]:void 0;return u(void 0,void 0,void 0,function*(){if(!l.supportsWorker(d,E))return!1;const I=`${y.paths.workers}worker-v1.js`;try{const A=yield g.loadWorker(I,"VoiceFocusTestWorker",y,E);try{A.terminate()}catch(L){E==null||E.debug("Failed to terminate worker.",L)}return!0}catch(A){return E==null||E.info("Failed to fetch and instantiate test worker",A),!1}})},"supportsVoiceFocusWorker");l.supportsVoiceFocusWorker=r;const n=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.Worker}catch(E){return y==null||y.info("Does not support Worker",E),!1}},"supportsWorker");l.supportsWorker=n;const e=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.AudioWorklet&&!!d.AudioWorkletNode}catch(E){return y==null||y.info("Does not support Audio Worklet",E),!1}},"supportsAudioWorklet");l.supportsAudioWorklet=e;const t=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.WebAssembly&&(!!d.WebAssembly.compile||!!d.WebAssembly.compileStreaming)}catch(E){return y==null||y.info("Does not support WASM",E),!1}},"supportsWASM");l.supportsWASM=t;const i=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis,E=arguments.length>2?arguments[2]:void 0;try{return!!d.SharedArrayBuffer&&(!!y.chrome||!!d.crossOriginIsolated)}catch{return E==null||E.info("Does not support SharedArrayBuffer."),!1}},"supportsSharedArrayBuffer");l.supportsSharedArrayBuffer=i;const o=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;var E;try{return!!(!((E=d.WebAssembly)===null||E===void 0)&&E.compileStreaming)}catch(I){return y==null||y.info("Does not support WASM streaming compilation",I),!1}},"supportsWASMStreaming");l.supportsWASMStreaming=o;const c=90,p=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;try{if(!d.chrome)return}catch{}const y=d.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(y)return parseInt(y[1],10)},"chromeVersion"),S=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;const E=p(d);return E&&E<c?(y==null||y.debug(`Chrome ${E} has incomplete SIMD support.`),!0):!1},"isOldChrome");l.isOldChrome=S},174725:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusAudioWorkletNode=void 0;let f=s(class extends(typeof globalThis<"u"&&globalThis.AudioWorkletNode||s(class{},"Sadness")){},"VoiceFocusAudioWorkletNode");l.VoiceFocusAudioWorkletNode=f},897828:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(T,O,D,G){function K(H){return H instanceof D?H:new D(function(q){q(H)})}return s(K,"adopt"),new(D||(D=Promise))(function(H,q){function me(Pe){try{ue(G.next(Pe))}catch(Ye){q(Ye)}}s(me,"fulfilled");function we(Pe){try{ue(G.throw(Pe))}catch(Ye){q(Ye)}}s(we,"rejected");function ue(Pe){Pe.done?H(Pe.value):K(Pe.value).then(me,we)}s(ue,"step"),ue((G=G.apply(T,O||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getAudioInput=l.createAudioContext=l.VoiceFocus=void 0;const g=f(158970),m=f(598696),h=f(120165),a=f(966951),r=f(119371),n=f(225243),e=f(364958),i={useVoiceFocusAGC:!1,useBuiltInAGC:!0},o="stable-v1",c="https://static.sdkassets.chime.aws",p={processors:`${c}/processors/`,workers:`${c}/workers/`,wasm:`${c}/wasm/`,models:`${c}/wasm/`},S={latencyHint:0},d={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},y=Object.assign(Object.assign({},d),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),E=Object.assign(Object.assign({},d),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),I={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:n.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:e.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:r.default}},A=s((T,O)=>{if(T!==void 0&&!m.isValidAssetGroup(T))throw new Error(`Invalid asset group ${T}`);if(O!==void 0&&!m.isValidRevisionID(O))throw new Error(`Invalid revision ID ${O}`)},"validateAssetSpec"),L=s((T,O)=>{let D;if(O.useBuiltInAGC?D=y:D=E,!T)return{audio:D};if(!T.audio)return T;if(T.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},T),{audio:T.audio===!0?D:Object.assign(Object.assign({},T.audio),D)})},"mungeConstraints"),M=s((T,O)=>`${O.models}${g.decideModel(T)}.wasm`,"urlForModel");let k=s(class cS{static isSupported(O,D){const{fetchBehavior:G,logger:K}=D||{};if(typeof globalThis>"u")return K==null||K.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!a.supportsAudioWorklet(globalThis,K))return K==null||K.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!a.supportsWASM(globalThis,K))return K==null||K.debug("Browser does not support WASM."),Promise.resolve(!1);a.supportsWASMStreaming(globalThis,K)||K==null||K.debug("Browser does not support streaming WASM compilation.");const{assetGroup:H=o,revisionID:q,paths:me=p}=O||{};A(H,q);const we=q?{revisionID:q}:{assetGroup:H},ue=m.addQueryParams(G,we),Pe=Object.assign(Object.assign({},ue),{paths:me});return a.supportsVoiceFocusWorker(globalThis,Pe,K)}static mungeExecutionPreference(O,D){const G=O===void 0||O==="auto";if(a.isSafari(globalThis)){if(G||O==="inline")return"inline";if(!G)throw new Error(`Unsupported execution preference ${O}`)}if(O==="worker-sab"&&!a.supportsSharedArrayBuffer(globalThis,globalThis,D))throw new Error(`Unsupported execution preference ${O}`);return O||"auto"}static configure(O,D){return u(this,void 0,void 0,function*(){const{fetchBehavior:G,preResolve:K,logger:H}=D||{},{category:q="voicefocus",name:me="default",variant:we="auto",assetGroup:ue=o,revisionID:Pe,simd:Ye="detect",executionPreference:be="auto",executionQuantaPreference:He,usagePreference:Ke="interactivity",estimatorBudget:Ue=100,paths:ht=p,thresholds:Tt}=O||{};if(H==null||H.debug("Configuring Voice Focus with spec",O),q!==void 0&&q!=="voicefocus")throw new Error(`Unrecognized category ${q}`);if(me!==void 0&&me!=="default"&&me!=="ns_es")throw new Error(`Unrecognized feature name ${me}`);if(we!==void 0&&!["auto","c100","c50","c20","c10"].includes(we))throw new Error(`Unrecognized feature variant ${we}`);if(He!==void 0&&![1,2,3].includes(He))throw new Error(`Unrecognized execution quanta preference ${He}`);if(A(ue,Pe),Ye!==void 0&&!["detect","force","disable"].includes(Ye))throw new Error(`Unrecognized SIMD option ${Ye}`);if(be!==void 0&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(be))throw new Error(`Unrecognized execution preference ${be}`);if(Ke!==void 0&&!["quality","interactivity"].includes(Ke))throw new Error(`Unrecognized usage preference ${Ke}`);const st={executionPreference:this.mungeExecutionPreference(be,H),usagePreference:Ke,executionQuantaPreference:He,variantPreference:we,namePreference:me,simdPreference:Ye,estimatorBudget:Ue},ut=Pe?{revisionID:Pe}:{assetGroup:ue},We=m.addQueryParams(G,ut),_t=Object.assign({paths:ht},We),Rt=yield g.measureAndDecideExecutionApproach(st,_t,H,Tt);if(Rt.supported===!1)return{supported:!1,reason:Rt.reason};H==null||H.info("Decided execution approach",Rt);const{useSIMD:Ae,processor:$t,variant:rt,executionQuanta:Ft}=Rt,en={category:q||"voicefocus",name:me||"default",variant:rt,simd:Ae};if(K){const on=M(en,ht);en.url=yield m.resolveURL(on,We)}return{fetchConfig:_t,model:en,processor:$t,executionQuanta:Ft,supported:!0}})}static init(O,D){let{delegate:G,preload:K=!0,logger:H}=D;return u(this,void 0,void 0,function*(){if(O.supported===!1)throw new Error("Voice Focus not supported. Reason: "+O.reason);const{model:q,processor:me,fetchConfig:we,executionQuanta:ue}=O,{simd:Pe,name:Ye}=q,{paths:be}=we;if(me!=="voicefocus-inline-processor"&&me!=="voicefocus-worker-postMessage-processor"&&me!=="voicefocus-worker-sab-processor")throw new Error(`Unknown processor ${me}`);const He=q.url||M(q,be);H==null||H.debug(`Using model URL ${He}.`);const Ke=`${be.wasm}audio_buffer-v1${Pe?"_simd":""}.wasm`,Ue=`${be.wasm}resampler-v1${Pe?"_simd":""}.wasm`,ht=`${be.workers}worker-v1.js`,{file:Tt,node:st}=I[me],ut=`${be.processors}${Tt}`,We=yield h.loadWorker(ht,"VoiceFocusWorker",we,H);if(K){H==null||H.debug("Preloading",He);let $t=a.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";We.postMessage({message:$t,preload:!0,key:"model",fetchBehavior:we,path:He})}const Rt={processor:me,worker:We,audioBufferURL:Ke,resamplerURL:Ue,fetchBehavior:we,modelURL:He,delegate:G,logger:H,numberOfInputs:Ye==="ns_es"?2:1},Ae=new cS(We,ut,st,Rt,ue);return Promise.resolve(Ae)})}createNode(O,D){var G;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:K=O.sampleRate===16e3?16e3:48e3,enabled:H=!0,agc:q=i}=D||{},me=D==null?void 0:D.es,we={voiceFocusSampleRate:K,enabled:H,sendBufferCount:10,prefill:6,agc:q,executionQuanta:this.executionQuanta,supportFarendStream:me},ue=m.withQueryString(this.processorURL,(G=this.nodeOptions)===null||G===void 0?void 0:G.fetchBehavior);return O.audioWorklet.addModule(ue).then(()=>new this.nodeConstructor(O,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:we})))}applyToStream(O,D,G){return u(this,void 0,void 0,function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const K=D.createMediaStreamSource(O),H=yield this.applyToSourceNode(K,D,G),q=D.createMediaStreamDestination();return H.connect(q),{node:H,source:K,destination:q,stream:q.stream}})}applyToSourceNode(O,D,G){return u(this,void 0,void 0,function*(){const K=yield this.createNode(D,G);return O.connect(K),K})}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}constructor(O,D,G,K,H){this.processorURL=D,this.nodeConstructor=G,this.nodeOptions=K,this.executionQuanta=H,this.internal={worker:O,nodeOptions:K,isDestroyed:!1}}},"VoiceFocus");l.VoiceFocus=k;const w=s(function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S;return new(window.AudioContext||window.webkitAudioContext)(T)},"createAudioContext");l.createAudioContext=w;const N=s((T,O,D)=>u(void 0,void 0,void 0,function*(){var G,K;const{constraints:H,spec:q,delegate:me,preload:we=!0,options:ue}=O,{logger:Pe}=D,Ye=yield k.configure(q,D);if(!Ye.supported)return(G=D.logger)===null||G===void 0||G.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(H);const be=yield k.init(Ye,{delegate:me,preload:we,logger:Pe}),He=((K=O.options)===null||K===void 0?void 0:K.agc)||i,Ke=yield window.navigator.mediaDevices.getUserMedia(L(H,He));return be.applyToStream(Ke,T,ue).then(Ue=>Ue.stream)}),"getAudioInput");l.getAudioInput=N},119371:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const g=f(966951),m=f(174725),h=5*1e3;let a=s(class extends m.VoiceFocusAudioWorkletNode{onModuleBufferLoaded(n,e){this.port.postMessage({message:"module-buffer",buffer:n,key:e})}onModuleLoaded(n,e){this.port.postMessage({message:"module",module:n,key:e})}enable(){return u(this,void 0,void 0,function*(){this.port.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.port.postMessage({message:"disable"})})}stop(){var n;return u(this,void 0,void 0,function*(){this.port.postMessage({message:"stop"});try{(n=this.worker)===null||n===void 0||n.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()})}onProcessorMessage(n){var e,t,i;const o=n.data;switch(o.message){case"cpu":this.cpuWarningCount++;const c=Date.now(),p=this.cpuWarningLastTriggered||c,S=Math.abs(c-p);(!this.cpuWarningLastTriggered||S>h)&&((e=this.logger)===null||e===void 0||e.warn(`CPU warning (count: ${this.cpuWarningCount}):`,o.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=c),(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;default:(i=this.logger)===null||i===void 0||i.debug("Ignoring processor message.")}}onWorkerMessage(n){const e=n.data;switch(e.message){case"module-buffer":if(!e.buffer||!e.key)return;this.onModuleBufferLoaded(e.buffer,e.key);break;case"module":if(!e.module||!e.key)return;this.onModuleLoaded(e.module,e.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}constructor(n,e){super(n,e.processor,e),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:t,worker:i,fetchBehavior:o,logger:c,delegate:p}=e;this.logger=c,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=p,c&&c.debug("VoiceFocusInlineNode:",t),this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this);const S=g.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:S,key:"model",fetchBehavior:o,path:t})}},"VoiceFocusInlineNode");l.default=a},364958:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const g=f(966951),m=f(174725);let h=s(class extends m.VoiceFocusAudioWorkletNode{enable(){return u(this,void 0,void 0,function*(){this.worker.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.worker.postMessage({message:"disable"})})}stop(){return u(this,void 0,void 0,function*(){try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(r){var n;const e=r.data;switch(e.message){case"ready":this.port.postMessage({message:"ready",shared:e.shared},e.shared?Object.values(e.shared):[]);break;case"data":if(!e.buffer)return;this.port.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(e);break;case"cpu":(n=this.delegate)===null||n===void 0||n.onCPUWarning();break;case"processing":this.port.postMessage(e);break;default:return}}onProcessorMessage(r){var n;const e=r.data;switch(e.message){case"data":if(!e.buffer)return;this.worker.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"cpu":(n=this.delegate)===null||n===void 0||n.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(e);break;default:return}}constructor(r,n){super(r,n.processor,n),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:e,audioBufferURL:t,worker:i,fetchBehavior:o,delegate:c}=n;this.delegate=c,this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:p,agc:S,supportFarendStream:d}=n.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:r.sampleRate===16e3?160:480,enabled:p,agc:S,fetchBehavior:o,model:e,supportFarendStream:d});const y=g.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:y,key:"buffer",fetchBehavior:o,path:t})}},"VoiceFocusWorkerPostMessageNode");l.default=h},225243:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const g=f(966951),m=f(174725),h={ready:0,enabled:1},a={disabled:0,enabled:1,stopped:2};let r=s(class extends m.VoiceFocusAudioWorkletNode{enable(){return u(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,h.enabled,a.enabled),Atomics.notify(this.state,h.ready,1)):this.worker.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,h.enabled,a.disabled),Atomics.notify(this.state,h.ready,1)):this.worker.postMessage({message:"disable"})})}stop(){return u(this,void 0,void 0,function*(){if(this.state)Atomics.store(this.state,h.enabled,a.stopped),Atomics.notify(this.state,h.ready,1);else try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(e){var t;const i=e.data;switch(i.message){case"ready":if(!i.shared)throw new Error("No shared state.");this.state=new Int32Array(i.shared.state),this.port.postMessage(i);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(i);break;case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"processing":this.port.postMessage(i);break;default:return}}onProcessorMessage(e){var t;const i=e.data;switch(i.message){case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(i);break;default:}}constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:i,resamplerURL:o,worker:c,fetchBehavior:p,delegate:S}=t;this.delegate=S,this.worker=c,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:d,supportFarendStream:y}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:e.sampleRate===16e3?160:480,enabled:d,model:i,supportFarendStream:y});const E=g.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:E,key:"resampler",fetchBehavior:p,path:o})}},"VoiceFocusWorkerBufferNode");l.default=r},824349:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.RawSha256=void 0;var u=f(792577),g=function(){function m(){this.state=Int32Array.from(u.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return s(m,"RawSha2561"),m.prototype.update=function(h){if(this.finished)throw new Error("Attempted to update an already finished hash.");var a=0,r=h.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>u.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=h[a++],r--,this.bufferLength===u.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},m.prototype.digest=function(){if(!this.finished){var h=this.bytesHashed*8,a=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(a.setUint8(this.bufferLength++,128),r%u.BLOCK_SIZE>=u.BLOCK_SIZE-8){for(var n=this.bufferLength;n<u.BLOCK_SIZE;n++)a.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<u.BLOCK_SIZE-8;n++)a.setUint8(n,0);a.setUint32(u.BLOCK_SIZE-8,Math.floor(h/4294967296),!0),a.setUint32(u.BLOCK_SIZE-4,h),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(u.DIGEST_LENGTH),n=0;n<8;n++)e[n*4]=this.state[n]>>>24&255,e[n*4+1]=this.state[n]>>>16&255,e[n*4+2]=this.state[n]>>>8&255,e[n*4+3]=this.state[n]>>>0&255;return e},m.prototype.hashBuffer=function(){for(var h=this,a=h.buffer,r=h.state,n=r[0],e=r[1],t=r[2],i=r[3],o=r[4],c=r[5],p=r[6],S=r[7],d=0;d<u.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(a[d*4]&255)<<24|(a[d*4+1]&255)<<16|(a[d*4+2]&255)<<8|a[d*4+3]&255;else{var y=this.temp[d-2],E=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10;y=this.temp[d-15];var I=(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;this.temp[d]=(E+this.temp[d-7]|0)+(I+this.temp[d-16]|0)}var A=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&c^~o&p)|0)+(S+(u.KEY[d]+this.temp[d]|0)|0)|0,L=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&e^n&t^e&t)|0;S=p,p=c,c=o,o=i+A|0,i=t,t=e,e=n,n=A+L|0}r[0]+=n,r[1]+=e,r[2]+=t,r[3]+=i,r[4]+=o,r[5]+=c,r[6]+=p,r[7]+=S},m}();l.RawSha256=g},792577:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MAX_HASHABLE_LENGTH=l.INIT=l.KEY=l.DIGEST_LENGTH=l.BLOCK_SIZE=void 0,l.BLOCK_SIZE=64,l.DIGEST_LENGTH=32,l.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},112380:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var u=f(407396);u.__exportStar(f(144578),l)},144578:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var u=f(407396),g=f(792577),m=f(824349),h=f(968405),a=function(){function n(e){if(this.hash=new m.RawSha256,e){this.outer=new m.RawSha256;var t=r(e),i=new Uint8Array(g.BLOCK_SIZE);i.set(t);for(var o=0;o<g.BLOCK_SIZE;o++)t[o]^=54,i[o]^=92;this.hash.update(t),this.outer.update(i);for(var o=0;o<t.byteLength;o++)t[o]=0}}return s(n,"Sha2561"),n.prototype.update=function(e){if(!((0,h.isEmptyData)(e)||this.error))try{this.hash.update((0,h.convertToBuffer)(e))}catch(t){this.error=t}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){return[2,this.digestSync()]})})},n}();l.Sha256=a;function r(n){var e=(0,h.convertToBuffer)(n);if(e.byteLength>g.BLOCK_SIZE){var t=new m.RawSha256;t.update(e),e=t.digest()}var i=new Uint8Array(g.BLOCK_SIZE);return i.set(e),i}s(r,"bufferFromSecret")},721825:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertToBuffer=void 0;var u=f(940612),g=typeof Buffer<"u"&&Buffer.from?function(h){return Buffer.from(h,"utf8")}:u.fromUtf8;function m(h){return h instanceof Uint8Array?h:typeof h=="string"?g(h):ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(h)}s(m,"convertToBuffer"),l.convertToBuffer=m},968405:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=l.numToUint8=l.isEmptyData=l.convertToBuffer=void 0;var u=f(721825);Object.defineProperty(l,"convertToBuffer",{enumerable:!0,get:function(){return u.convertToBuffer}});var g=f(579484);Object.defineProperty(l,"isEmptyData",{enumerable:!0,get:function(){return g.isEmptyData}});var m=f(547002);Object.defineProperty(l,"numToUint8",{enumerable:!0,get:function(){return m.numToUint8}});var h=f(904367);Object.defineProperty(l,"uint32ArrayFrom",{enumerable:!0,get:function(){return h.uint32ArrayFrom}})},579484:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function f(u){return typeof u=="string"?u.length===0:u.byteLength===0}s(f,"isEmptyData"),l.isEmptyData=f},547002:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.numToUint8=void 0;function f(u){return new Uint8Array([(u&4278190080)>>24,(u&16711680)>>16,(u&65280)>>8,u&255])}s(f,"numToUint8"),l.numToUint8=f},904367:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=void 0;function f(u){if(!Uint32Array.from){for(var g=new Uint32Array(u.length),m=0;m<u.length;)g[m]=u[m],m+=1;return g}return Uint32Array.from(u)}s(f,"uint32ArrayFrom"),l.uint32ArrayFrom=f},396169:(U,l,f)=>{"use strict";const{Deflate:u,deflate:g,deflateRaw:m,gzip:h}=f(553878),{Inflate:a,inflate:r,inflateRaw:n,ungzip:e}=f(657542),t=f(151782);U.exports.Deflate=u,U.exports.deflate=g,U.exports.deflateRaw=m,U.exports.gzip=h,U.exports.Inflate=a,U.exports.inflate=r,U.exports.inflateRaw=n,U.exports.ungzip=e,U.exports.constants=t},553878:(U,l,f)=>{"use strict";const u=f(37176),g=f(700746),m=f(387353),h=f(975971),a=f(395849),r=Object.prototype.toString,{Z_NO_FLUSH:n,Z_SYNC_FLUSH:e,Z_FULL_FLUSH:t,Z_FINISH:i,Z_OK:o,Z_STREAM_END:c,Z_DEFAULT_COMPRESSION:p,Z_DEFAULT_STRATEGY:S,Z_DEFLATED:d}=f(151782);function y(L){this.options=g.assign({level:p,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:S},L||{});let M=this.options;M.raw&&M.windowBits>0?M.windowBits=-M.windowBits:M.gzip&&M.windowBits>0&&M.windowBits<16&&(M.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let k=u.deflateInit2(this.strm,M.level,M.method,M.windowBits,M.memLevel,M.strategy);if(k!==o)throw new Error(h[k]);if(M.header&&u.deflateSetHeader(this.strm,M.header),M.dictionary){let w;if(typeof M.dictionary=="string"?w=m.string2buf(M.dictionary):r.call(M.dictionary)==="[object ArrayBuffer]"?w=new Uint8Array(M.dictionary):w=M.dictionary,k=u.deflateSetDictionary(this.strm,w),k!==o)throw new Error(h[k]);this._dict_set=!0}}s(y,"Deflate"),y.prototype.push=function(L,M){const k=this.strm,w=this.options.chunkSize;let N,T;if(this.ended)return!1;for(M===~~M?T=M:T=M===!0?i:n,typeof L=="string"?k.input=m.string2buf(L):r.call(L)==="[object ArrayBuffer]"?k.input=new Uint8Array(L):k.input=L,k.next_in=0,k.avail_in=k.input.length;;){if(k.avail_out===0&&(k.output=new Uint8Array(w),k.next_out=0,k.avail_out=w),(T===e||T===t)&&k.avail_out<=6){this.onData(k.output.subarray(0,k.next_out)),k.avail_out=0;continue}if(N=u.deflate(k,T),N===c)return k.next_out>0&&this.onData(k.output.subarray(0,k.next_out)),N=u.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===o;if(k.avail_out===0){this.onData(k.output);continue}if(T>0&&k.next_out>0){this.onData(k.output.subarray(0,k.next_out)),k.avail_out=0;continue}if(k.avail_in===0)break}return!0},y.prototype.onData=function(L){this.chunks.push(L)},y.prototype.onEnd=function(L){L===o&&(this.result=g.flattenChunks(this.chunks)),this.chunks=[],this.err=L,this.msg=this.strm.msg};function E(L,M){const k=new y(M);if(k.push(L,!0),k.err)throw k.msg||h[k.err];return k.result}s(E,"deflate");function I(L,M){return M=M||{},M.raw=!0,E(L,M)}s(I,"deflateRaw");function A(L,M){return M=M||{},M.gzip=!0,E(L,M)}s(A,"gzip"),U.exports.Deflate=y,U.exports.deflate=E,U.exports.deflateRaw=I,U.exports.gzip=A,U.exports.constants=f(151782)},657542:(U,l,f)=>{"use strict";const u=f(310356),g=f(700746),m=f(387353),h=f(975971),a=f(395849),r=f(754919),n=Object.prototype.toString,{Z_NO_FLUSH:e,Z_FINISH:t,Z_OK:i,Z_STREAM_END:o,Z_NEED_DICT:c,Z_STREAM_ERROR:p,Z_DATA_ERROR:S,Z_MEM_ERROR:d}=f(151782);function y(A){this.options=g.assign({chunkSize:1024*64,windowBits:15,to:""},A||{});const L=this.options;L.raw&&L.windowBits>=0&&L.windowBits<16&&(L.windowBits=-L.windowBits,L.windowBits===0&&(L.windowBits=-15)),L.windowBits>=0&&L.windowBits<16&&!(A&&A.windowBits)&&(L.windowBits+=32),L.windowBits>15&&L.windowBits<48&&(L.windowBits&15||(L.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let M=u.inflateInit2(this.strm,L.windowBits);if(M!==i)throw new Error(h[M]);if(this.header=new r,u.inflateGetHeader(this.strm,this.header),L.dictionary&&(typeof L.dictionary=="string"?L.dictionary=m.string2buf(L.dictionary):n.call(L.dictionary)==="[object ArrayBuffer]"&&(L.dictionary=new Uint8Array(L.dictionary)),L.raw&&(M=u.inflateSetDictionary(this.strm,L.dictionary),M!==i)))throw new Error(h[M])}s(y,"Inflate"),y.prototype.push=function(A,L){const M=this.strm,k=this.options.chunkSize,w=this.options.dictionary;let N,T,O;if(this.ended)return!1;for(L===~~L?T=L:T=L===!0?t:e,n.call(A)==="[object ArrayBuffer]"?M.input=new Uint8Array(A):M.input=A,M.next_in=0,M.avail_in=M.input.length;;){for(M.avail_out===0&&(M.output=new Uint8Array(k),M.next_out=0,M.avail_out=k),N=u.inflate(M,T),N===c&&w&&(N=u.inflateSetDictionary(M,w),N===i?N=u.inflate(M,T):N===S&&(N=c));M.avail_in>0&&N===o&&M.state.wrap>0&&A[M.next_in]!==0;)u.inflateReset(M),N=u.inflate(M,T);switch(N){case p:case S:case c:case d:return this.onEnd(N),this.ended=!0,!1}if(O=M.avail_out,M.next_out&&(M.avail_out===0||N===o))if(this.options.to==="string"){let D=m.utf8border(M.output,M.next_out),G=M.next_out-D,K=m.buf2string(M.output,D);M.next_out=G,M.avail_out=k-G,G&&M.output.set(M.output.subarray(D,D+G),0),this.onData(K)}else this.onData(M.output.length===M.next_out?M.output:M.output.subarray(0,M.next_out));if(!(N===i&&O===0)){if(N===o)return N=u.inflateEnd(this.strm),this.onEnd(N),this.ended=!0,!0;if(M.avail_in===0)break}}return!0},y.prototype.onData=function(A){this.chunks.push(A)},y.prototype.onEnd=function(A){A===i&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=g.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg};function E(A,L){const M=new y(L);if(M.push(A),M.err)throw M.msg||h[M.err];return M.result}s(E,"inflate");function I(A,L){return L=L||{},L.raw=!0,E(A,L)}s(I,"inflateRaw"),U.exports.Inflate=y,U.exports.inflate=E,U.exports.inflateRaw=I,U.exports.ungzip=E,U.exports.constants=f(151782)},700746:U=>{"use strict";const l=s((f,u)=>Object.prototype.hasOwnProperty.call(f,u),"_has");U.exports.assign=function(f){const u=Array.prototype.slice.call(arguments,1);for(;u.length;){const g=u.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(const m in g)l(g,m)&&(f[m]=g[m])}}return f},U.exports.flattenChunks=f=>{let u=0;for(let m=0,h=f.length;m<h;m++)u+=f[m].length;const g=new Uint8Array(u);for(let m=0,h=0,a=f.length;m<a;m++){let r=f[m];g.set(r,h),h+=r.length}return g}},387353:U=>{"use strict";let l=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}const f=new Uint8Array(256);for(let g=0;g<256;g++)f[g]=g>=252?6:g>=248?5:g>=240?4:g>=224?3:g>=192?2:1;f[254]=f[254]=1,U.exports.string2buf=g=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(g);let m,h,a,r,n,e=g.length,t=0;for(r=0;r<e;r++)h=g.charCodeAt(r),(h&64512)===55296&&r+1<e&&(a=g.charCodeAt(r+1),(a&64512)===56320&&(h=65536+(h-55296<<10)+(a-56320),r++)),t+=h<128?1:h<2048?2:h<65536?3:4;for(m=new Uint8Array(t),n=0,r=0;n<t;r++)h=g.charCodeAt(r),(h&64512)===55296&&r+1<e&&(a=g.charCodeAt(r+1),(a&64512)===56320&&(h=65536+(h-55296<<10)+(a-56320),r++)),h<128?m[n++]=h:h<2048?(m[n++]=192|h>>>6,m[n++]=128|h&63):h<65536?(m[n++]=224|h>>>12,m[n++]=128|h>>>6&63,m[n++]=128|h&63):(m[n++]=240|h>>>18,m[n++]=128|h>>>12&63,m[n++]=128|h>>>6&63,m[n++]=128|h&63);return m};const u=s((g,m)=>{if(m<65534&&g.subarray&&l)return String.fromCharCode.apply(null,g.length===m?g:g.subarray(0,m));let h="";for(let a=0;a<m;a++)h+=String.fromCharCode(g[a]);return h},"buf2binstring");U.exports.buf2string=(g,m)=>{const h=m||g.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(g.subarray(0,m));let a,r;const n=new Array(h*2);for(r=0,a=0;a<h;){let e=g[a++];if(e<128){n[r++]=e;continue}let t=f[e];if(t>4){n[r++]=65533,a+=t-1;continue}for(e&=t===2?31:t===3?15:7;t>1&&a<h;)e=e<<6|g[a++]&63,t--;if(t>1){n[r++]=65533;continue}e<65536?n[r++]=e:(e-=65536,n[r++]=55296|e>>10&1023,n[r++]=56320|e&1023)}return u(n,r)},U.exports.utf8border=(g,m)=>{m=m||g.length,m>g.length&&(m=g.length);let h=m-1;for(;h>=0&&(g[h]&192)===128;)h--;return h<0||h===0?m:h+f[g[h]]>m?h:m}},522946:U=>{"use strict";const l=s((f,u,g,m)=>{let h=f&65535|0,a=f>>>16&65535|0,r=0;for(;g!==0;){r=g>2e3?2e3:g,g-=r;do h=h+u[m++]|0,a=a+h|0;while(--r);h%=65521,a%=65521}return h|a<<16|0},"adler32");U.exports=l},151782:U=>{"use strict";U.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},443503:U=>{"use strict";const l=s(()=>{let g,m=[];for(var h=0;h<256;h++){g=h;for(var a=0;a<8;a++)g=g&1?3988292384^g>>>1:g>>>1;m[h]=g}return m},"makeTable"),f=new Uint32Array(l()),u=s((g,m,h,a)=>{const r=f,n=a+h;g^=-1;for(let e=a;e<n;e++)g=g>>>8^r[(g^m[e])&255];return g^-1},"crc32");U.exports=u},37176:(U,l,f)=>{"use strict";const{_tr_init:u,_tr_stored_block:g,_tr_flush_block:m,_tr_tally:h,_tr_align:a}=f(356394),r=f(522946),n=f(443503),e=f(975971),{Z_NO_FLUSH:t,Z_PARTIAL_FLUSH:i,Z_FULL_FLUSH:o,Z_FINISH:c,Z_BLOCK:p,Z_OK:S,Z_STREAM_END:d,Z_STREAM_ERROR:y,Z_DATA_ERROR:E,Z_BUF_ERROR:I,Z_DEFAULT_COMPRESSION:A,Z_FILTERED:L,Z_HUFFMAN_ONLY:M,Z_RLE:k,Z_FIXED:w,Z_DEFAULT_STRATEGY:N,Z_UNKNOWN:T,Z_DEFLATED:O}=f(151782),D=9,G=15,K=8,H=29,me=256+1+H,we=30,ue=19,Pe=2*me+1,Ye=15,be=3,He=258,Ke=He+be+1,Ue=32,ht=42,Tt=69,st=73,ut=91,We=103,_t=113,Rt=666,Ae=1,$t=2,rt=3,Ft=4,en=3,on=s((R,ae)=>(R.msg=e[ae],ae),"err"),Dn=s(R=>(R<<1)-(R>4?9:0),"rank"),Yt=s(R=>{let ae=R.length;for(;--ae>=0;)R[ae]=0},"zero");let vn=s((R,ae,pe)=>(ae<<R.hash_shift^pe)&R.hash_mask,"HASH_ZLIB");const mt=s(R=>{const ae=R.state;let pe=ae.pending;pe>R.avail_out&&(pe=R.avail_out),pe!==0&&(R.output.set(ae.pending_buf.subarray(ae.pending_out,ae.pending_out+pe),R.next_out),R.next_out+=pe,ae.pending_out+=pe,R.total_out+=pe,R.avail_out-=pe,ae.pending-=pe,ae.pending===0&&(ae.pending_out=0))},"flush_pending"),pt=s((R,ae)=>{m(R,R.block_start>=0?R.block_start:-1,R.strstart-R.block_start,ae),R.block_start=R.strstart,mt(R.strm)},"flush_block_only"),Qe=s((R,ae)=>{R.pending_buf[R.pending++]=ae},"put_byte"),Ht=s((R,ae)=>{R.pending_buf[R.pending++]=ae>>>8&255,R.pending_buf[R.pending++]=ae&255},"putShortMSB"),xt=s((R,ae,pe,Se)=>{let X=R.avail_in;return X>Se&&(X=Se),X===0?0:(R.avail_in-=X,ae.set(R.input.subarray(R.next_in,R.next_in+X),pe),R.state.wrap===1?R.adler=r(R.adler,ae,X,pe):R.state.wrap===2&&(R.adler=n(R.adler,ae,X,pe)),R.next_in+=X,R.total_in+=X,X)},"read_buf"),wn=s((R,ae)=>{let pe=R.max_chain_length,Se=R.strstart,X,ft,ke=R.prev_length,ze=R.nice_match;const Gt=R.strstart>R.w_size-Ke?R.strstart-(R.w_size-Ke):0,dt=R.window,Qn=R.w_mask,Wn=R.prev,Vt=R.strstart+He;let yn=dt[Se+ke-1],Zt=dt[Se+ke];R.prev_length>=R.good_match&&(pe>>=2),ze>R.lookahead&&(ze=R.lookahead);do if(X=ae,!(dt[X+ke]!==Zt||dt[X+ke-1]!==yn||dt[X]!==dt[Se]||dt[++X]!==dt[Se+1])){Se+=2,X++;do;while(dt[++Se]===dt[++X]&&dt[++Se]===dt[++X]&&dt[++Se]===dt[++X]&&dt[++Se]===dt[++X]&&dt[++Se]===dt[++X]&&dt[++Se]===dt[++X]&&dt[++Se]===dt[++X]&&dt[++Se]===dt[++X]&&Se<Vt);if(ft=He-(Vt-Se),Se=Vt-He,ft>ke){if(R.match_start=ae,ke=ft,ft>=ze)break;yn=dt[Se+ke-1],Zt=dt[Se+ke]}}while((ae=Wn[ae&Qn])>Gt&&--pe!==0);return ke<=R.lookahead?ke:R.lookahead},"longest_match"),kt=s(R=>{const ae=R.w_size;let pe,Se,X,ft,ke;do{if(ft=R.window_size-R.lookahead-R.strstart,R.strstart>=ae+(ae-Ke)){R.window.set(R.window.subarray(ae,ae+ae),0),R.match_start-=ae,R.strstart-=ae,R.block_start-=ae,Se=R.hash_size,pe=Se;do X=R.head[--pe],R.head[pe]=X>=ae?X-ae:0;while(--Se);Se=ae,pe=Se;do X=R.prev[--pe],R.prev[pe]=X>=ae?X-ae:0;while(--Se);ft+=ae}if(R.strm.avail_in===0)break;if(Se=xt(R.strm,R.window,R.strstart+R.lookahead,ft),R.lookahead+=Se,R.lookahead+R.insert>=be)for(ke=R.strstart-R.insert,R.ins_h=R.window[ke],R.ins_h=vn(R,R.ins_h,R.window[ke+1]);R.insert&&(R.ins_h=vn(R,R.ins_h,R.window[ke+be-1]),R.prev[ke&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=ke,ke++,R.insert--,!(R.lookahead+R.insert<be)););}while(R.lookahead<Ke&&R.strm.avail_in!==0)},"fill_window"),J=s((R,ae)=>{let pe=65535;for(pe>R.pending_buf_size-5&&(pe=R.pending_buf_size-5);;){if(R.lookahead<=1){if(kt(R),R.lookahead===0&&ae===t)return Ae;if(R.lookahead===0)break}R.strstart+=R.lookahead,R.lookahead=0;const Se=R.block_start+pe;if((R.strstart===0||R.strstart>=Se)&&(R.lookahead=R.strstart-Se,R.strstart=Se,pt(R,!1),R.strm.avail_out===0)||R.strstart-R.block_start>=R.w_size-Ke&&(pt(R,!1),R.strm.avail_out===0))return Ae}return R.insert=0,ae===c?(pt(R,!0),R.strm.avail_out===0?rt:Ft):(R.strstart>R.block_start&&(pt(R,!1),R.strm.avail_out===0),Ae)},"deflate_stored"),_e=s((R,ae)=>{let pe,Se;for(;;){if(R.lookahead<Ke){if(kt(R),R.lookahead<Ke&&ae===t)return Ae;if(R.lookahead===0)break}if(pe=0,R.lookahead>=be&&(R.ins_h=vn(R,R.ins_h,R.window[R.strstart+be-1]),pe=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),pe!==0&&R.strstart-pe<=R.w_size-Ke&&(R.match_length=wn(R,pe)),R.match_length>=be)if(Se=h(R,R.strstart-R.match_start,R.match_length-be),R.lookahead-=R.match_length,R.match_length<=R.max_lazy_match&&R.lookahead>=be){R.match_length--;do R.strstart++,R.ins_h=vn(R,R.ins_h,R.window[R.strstart+be-1]),pe=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart;while(--R.match_length!==0);R.strstart++}else R.strstart+=R.match_length,R.match_length=0,R.ins_h=R.window[R.strstart],R.ins_h=vn(R,R.ins_h,R.window[R.strstart+1]);else Se=h(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++;if(Se&&(pt(R,!1),R.strm.avail_out===0))return Ae}return R.insert=R.strstart<be-1?R.strstart:be-1,ae===c?(pt(R,!0),R.strm.avail_out===0?rt:Ft):R.last_lit&&(pt(R,!1),R.strm.avail_out===0)?Ae:$t},"deflate_fast"),Oe=s((R,ae)=>{let pe,Se,X;for(;;){if(R.lookahead<Ke){if(kt(R),R.lookahead<Ke&&ae===t)return Ae;if(R.lookahead===0)break}if(pe=0,R.lookahead>=be&&(R.ins_h=vn(R,R.ins_h,R.window[R.strstart+be-1]),pe=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),R.prev_length=R.match_length,R.prev_match=R.match_start,R.match_length=be-1,pe!==0&&R.prev_length<R.max_lazy_match&&R.strstart-pe<=R.w_size-Ke&&(R.match_length=wn(R,pe),R.match_length<=5&&(R.strategy===L||R.match_length===be&&R.strstart-R.match_start>4096)&&(R.match_length=be-1)),R.prev_length>=be&&R.match_length<=R.prev_length){X=R.strstart+R.lookahead-be,Se=h(R,R.strstart-1-R.prev_match,R.prev_length-be),R.lookahead-=R.prev_length-1,R.prev_length-=2;do++R.strstart<=X&&(R.ins_h=vn(R,R.ins_h,R.window[R.strstart+be-1]),pe=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart);while(--R.prev_length!==0);if(R.match_available=0,R.match_length=be-1,R.strstart++,Se&&(pt(R,!1),R.strm.avail_out===0))return Ae}else if(R.match_available){if(Se=h(R,0,R.window[R.strstart-1]),Se&&pt(R,!1),R.strstart++,R.lookahead--,R.strm.avail_out===0)return Ae}else R.match_available=1,R.strstart++,R.lookahead--}return R.match_available&&(Se=h(R,0,R.window[R.strstart-1]),R.match_available=0),R.insert=R.strstart<be-1?R.strstart:be-1,ae===c?(pt(R,!0),R.strm.avail_out===0?rt:Ft):R.last_lit&&(pt(R,!1),R.strm.avail_out===0)?Ae:$t},"deflate_slow"),Ne=s((R,ae)=>{let pe,Se,X,ft;const ke=R.window;for(;;){if(R.lookahead<=He){if(kt(R),R.lookahead<=He&&ae===t)return Ae;if(R.lookahead===0)break}if(R.match_length=0,R.lookahead>=be&&R.strstart>0&&(X=R.strstart-1,Se=ke[X],Se===ke[++X]&&Se===ke[++X]&&Se===ke[++X])){ft=R.strstart+He;do;while(Se===ke[++X]&&Se===ke[++X]&&Se===ke[++X]&&Se===ke[++X]&&Se===ke[++X]&&Se===ke[++X]&&Se===ke[++X]&&Se===ke[++X]&&X<ft);R.match_length=He-(ft-X),R.match_length>R.lookahead&&(R.match_length=R.lookahead)}if(R.match_length>=be?(pe=h(R,1,R.match_length-be),R.lookahead-=R.match_length,R.strstart+=R.match_length,R.match_length=0):(pe=h(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++),pe&&(pt(R,!1),R.strm.avail_out===0))return Ae}return R.insert=0,ae===c?(pt(R,!0),R.strm.avail_out===0?rt:Ft):R.last_lit&&(pt(R,!1),R.strm.avail_out===0)?Ae:$t},"deflate_rle"),$e=s((R,ae)=>{let pe;for(;;){if(R.lookahead===0&&(kt(R),R.lookahead===0)){if(ae===t)return Ae;break}if(R.match_length=0,pe=h(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++,pe&&(pt(R,!1),R.strm.avail_out===0))return Ae}return R.insert=0,ae===c?(pt(R,!0),R.strm.avail_out===0?rt:Ft):R.last_lit&&(pt(R,!1),R.strm.avail_out===0)?Ae:$t},"deflate_huff");function Fe(R,ae,pe,Se,X){this.good_length=R,this.max_lazy=ae,this.nice_length=pe,this.max_chain=Se,this.func=X}s(Fe,"Config");const oe=[new Fe(0,0,0,0,J),new Fe(4,4,8,4,_e),new Fe(4,5,16,8,_e),new Fe(4,6,32,32,_e),new Fe(4,4,16,16,Oe),new Fe(8,16,32,32,Oe),new Fe(8,16,128,128,Oe),new Fe(8,32,128,256,Oe),new Fe(32,128,258,1024,Oe),new Fe(32,258,258,4096,Oe)],Ce=s(R=>{R.window_size=2*R.w_size,Yt(R.head),R.max_lazy_match=oe[R.level].max_lazy,R.good_match=oe[R.level].good_length,R.nice_match=oe[R.level].nice_length,R.max_chain_length=oe[R.level].max_chain,R.strstart=0,R.block_start=0,R.lookahead=0,R.insert=0,R.match_length=R.prev_length=be-1,R.match_available=0,R.ins_h=0},"lm_init");function z(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Pe*2),this.dyn_dtree=new Uint16Array((2*we+1)*2),this.bl_tree=new Uint16Array((2*ue+1)*2),Yt(this.dyn_ltree),Yt(this.dyn_dtree),Yt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ye+1),this.heap=new Uint16Array(2*me+1),Yt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*me+1),Yt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}s(z,"DeflateState");const Y=s(R=>{if(!R||!R.state)return on(R,y);R.total_in=R.total_out=0,R.data_type=T;const ae=R.state;return ae.pending=0,ae.pending_out=0,ae.wrap<0&&(ae.wrap=-ae.wrap),ae.status=ae.wrap?ht:_t,R.adler=ae.wrap===2?0:1,ae.last_flush=t,u(ae),S},"deflateResetKeep"),de=s(R=>{const ae=Y(R);return ae===S&&Ce(R.state),ae},"deflateReset"),ce=s((R,ae)=>!R||!R.state||R.state.wrap!==2?y:(R.state.gzhead=ae,S),"deflateSetHeader"),De=s((R,ae,pe,Se,X,ft)=>{if(!R)return y;let ke=1;if(ae===A&&(ae=6),Se<0?(ke=0,Se=-Se):Se>15&&(ke=2,Se-=16),X<1||X>D||pe!==O||Se<8||Se>15||ae<0||ae>9||ft<0||ft>w)return on(R,y);Se===8&&(Se=9);const ze=new z;return R.state=ze,ze.strm=R,ze.wrap=ke,ze.gzhead=null,ze.w_bits=Se,ze.w_size=1<<ze.w_bits,ze.w_mask=ze.w_size-1,ze.hash_bits=X+7,ze.hash_size=1<<ze.hash_bits,ze.hash_mask=ze.hash_size-1,ze.hash_shift=~~((ze.hash_bits+be-1)/be),ze.window=new Uint8Array(ze.w_size*2),ze.head=new Uint16Array(ze.hash_size),ze.prev=new Uint16Array(ze.w_size),ze.lit_bufsize=1<<X+6,ze.pending_buf_size=ze.lit_bufsize*4,ze.pending_buf=new Uint8Array(ze.pending_buf_size),ze.d_buf=1*ze.lit_bufsize,ze.l_buf=(1+2)*ze.lit_bufsize,ze.level=ae,ze.strategy=ft,ze.method=pe,de(R)},"deflateInit2"),Ie=s((R,ae)=>De(R,ae,O,G,K,N),"deflateInit"),Le=s((R,ae)=>{let pe,Se;if(!R||!R.state||ae>p||ae<0)return R?on(R,y):y;const X=R.state;if(!R.output||!R.input&&R.avail_in!==0||X.status===Rt&&ae!==c)return on(R,R.avail_out===0?I:y);X.strm=R;const ft=X.last_flush;if(X.last_flush=ae,X.status===ht)if(X.wrap===2)R.adler=0,Qe(X,31),Qe(X,139),Qe(X,8),X.gzhead?(Qe(X,(X.gzhead.text?1:0)+(X.gzhead.hcrc?2:0)+(X.gzhead.extra?4:0)+(X.gzhead.name?8:0)+(X.gzhead.comment?16:0)),Qe(X,X.gzhead.time&255),Qe(X,X.gzhead.time>>8&255),Qe(X,X.gzhead.time>>16&255),Qe(X,X.gzhead.time>>24&255),Qe(X,X.level===9?2:X.strategy>=M||X.level<2?4:0),Qe(X,X.gzhead.os&255),X.gzhead.extra&&X.gzhead.extra.length&&(Qe(X,X.gzhead.extra.length&255),Qe(X,X.gzhead.extra.length>>8&255)),X.gzhead.hcrc&&(R.adler=n(R.adler,X.pending_buf,X.pending,0)),X.gzindex=0,X.status=Tt):(Qe(X,0),Qe(X,0),Qe(X,0),Qe(X,0),Qe(X,0),Qe(X,X.level===9?2:X.strategy>=M||X.level<2?4:0),Qe(X,en),X.status=_t);else{let ke=O+(X.w_bits-8<<4)<<8,ze=-1;X.strategy>=M||X.level<2?ze=0:X.level<6?ze=1:X.level===6?ze=2:ze=3,ke|=ze<<6,X.strstart!==0&&(ke|=Ue),ke+=31-ke%31,X.status=_t,Ht(X,ke),X.strstart!==0&&(Ht(X,R.adler>>>16),Ht(X,R.adler&65535)),R.adler=1}if(X.status===Tt)if(X.gzhead.extra){for(pe=X.pending;X.gzindex<(X.gzhead.extra.length&65535)&&!(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>pe&&(R.adler=n(R.adler,X.pending_buf,X.pending-pe,pe)),mt(R),pe=X.pending,X.pending===X.pending_buf_size));)Qe(X,X.gzhead.extra[X.gzindex]&255),X.gzindex++;X.gzhead.hcrc&&X.pending>pe&&(R.adler=n(R.adler,X.pending_buf,X.pending-pe,pe)),X.gzindex===X.gzhead.extra.length&&(X.gzindex=0,X.status=st)}else X.status=st;if(X.status===st)if(X.gzhead.name){pe=X.pending;do{if(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>pe&&(R.adler=n(R.adler,X.pending_buf,X.pending-pe,pe)),mt(R),pe=X.pending,X.pending===X.pending_buf_size)){Se=1;break}X.gzindex<X.gzhead.name.length?Se=X.gzhead.name.charCodeAt(X.gzindex++)&255:Se=0,Qe(X,Se)}while(Se!==0);X.gzhead.hcrc&&X.pending>pe&&(R.adler=n(R.adler,X.pending_buf,X.pending-pe,pe)),Se===0&&(X.gzindex=0,X.status=ut)}else X.status=ut;if(X.status===ut)if(X.gzhead.comment){pe=X.pending;do{if(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>pe&&(R.adler=n(R.adler,X.pending_buf,X.pending-pe,pe)),mt(R),pe=X.pending,X.pending===X.pending_buf_size)){Se=1;break}X.gzindex<X.gzhead.comment.length?Se=X.gzhead.comment.charCodeAt(X.gzindex++)&255:Se=0,Qe(X,Se)}while(Se!==0);X.gzhead.hcrc&&X.pending>pe&&(R.adler=n(R.adler,X.pending_buf,X.pending-pe,pe)),Se===0&&(X.status=We)}else X.status=We;if(X.status===We&&(X.gzhead.hcrc?(X.pending+2>X.pending_buf_size&&mt(R),X.pending+2<=X.pending_buf_size&&(Qe(X,R.adler&255),Qe(X,R.adler>>8&255),R.adler=0,X.status=_t)):X.status=_t),X.pending!==0){if(mt(R),R.avail_out===0)return X.last_flush=-1,S}else if(R.avail_in===0&&Dn(ae)<=Dn(ft)&&ae!==c)return on(R,I);if(X.status===Rt&&R.avail_in!==0)return on(R,I);if(R.avail_in!==0||X.lookahead!==0||ae!==t&&X.status!==Rt){let ke=X.strategy===M?$e(X,ae):X.strategy===k?Ne(X,ae):oe[X.level].func(X,ae);if((ke===rt||ke===Ft)&&(X.status=Rt),ke===Ae||ke===rt)return R.avail_out===0&&(X.last_flush=-1),S;if(ke===$t&&(ae===i?a(X):ae!==p&&(g(X,0,0,!1),ae===o&&(Yt(X.head),X.lookahead===0&&(X.strstart=0,X.block_start=0,X.insert=0))),mt(R),R.avail_out===0))return X.last_flush=-1,S}return ae!==c?S:X.wrap<=0?d:(X.wrap===2?(Qe(X,R.adler&255),Qe(X,R.adler>>8&255),Qe(X,R.adler>>16&255),Qe(X,R.adler>>24&255),Qe(X,R.total_in&255),Qe(X,R.total_in>>8&255),Qe(X,R.total_in>>16&255),Qe(X,R.total_in>>24&255)):(Ht(X,R.adler>>>16),Ht(X,R.adler&65535)),mt(R),X.wrap>0&&(X.wrap=-X.wrap),X.pending!==0?S:d)},"deflate"),fe=s(R=>{if(!R||!R.state)return y;const ae=R.state.status;return ae!==ht&&ae!==Tt&&ae!==st&&ae!==ut&&ae!==We&&ae!==_t&&ae!==Rt?on(R,y):(R.state=null,ae===_t?on(R,E):S)},"deflateEnd"),ge=s((R,ae)=>{let pe=ae.length;if(!R||!R.state)return y;const Se=R.state,X=Se.wrap;if(X===2||X===1&&Se.status!==ht||Se.lookahead)return y;if(X===1&&(R.adler=r(R.adler,ae,pe,0)),Se.wrap=0,pe>=Se.w_size){X===0&&(Yt(Se.head),Se.strstart=0,Se.block_start=0,Se.insert=0);let Gt=new Uint8Array(Se.w_size);Gt.set(ae.subarray(pe-Se.w_size,pe),0),ae=Gt,pe=Se.w_size}const ft=R.avail_in,ke=R.next_in,ze=R.input;for(R.avail_in=pe,R.next_in=0,R.input=ae,kt(Se);Se.lookahead>=be;){let Gt=Se.strstart,dt=Se.lookahead-(be-1);do Se.ins_h=vn(Se,Se.ins_h,Se.window[Gt+be-1]),Se.prev[Gt&Se.w_mask]=Se.head[Se.ins_h],Se.head[Se.ins_h]=Gt,Gt++;while(--dt);Se.strstart=Gt,Se.lookahead=be-1,kt(Se)}return Se.strstart+=Se.lookahead,Se.block_start=Se.strstart,Se.insert=Se.lookahead,Se.lookahead=0,Se.match_length=Se.prev_length=be-1,Se.match_available=0,R.next_in=ke,R.input=ze,R.avail_in=ft,Se.wrap=X,S},"deflateSetDictionary");U.exports.deflateInit=Ie,U.exports.deflateInit2=De,U.exports.deflateReset=de,U.exports.deflateResetKeep=Y,U.exports.deflateSetHeader=ce,U.exports.deflate=Le,U.exports.deflateEnd=fe,U.exports.deflateSetDictionary=ge,U.exports.deflateInfo="pako deflate (from Nodeca project)"},754919:U=>{"use strict";function l(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}s(l,"GZheader"),U.exports=l},763342:U=>{"use strict";U.exports=s(function(g,m){let h,a,r,n,e,t,i,o,c,p,S,d,y,E,I,A,L,M,k,w,N,T,O,D;const G=g.state;h=g.next_in,O=g.input,a=h+(g.avail_in-5),r=g.next_out,D=g.output,n=r-(m-g.avail_out),e=r+(g.avail_out-257),t=G.dmax,i=G.wsize,o=G.whave,c=G.wnext,p=G.window,S=G.hold,d=G.bits,y=G.lencode,E=G.distcode,I=(1<<G.lenbits)-1,A=(1<<G.distbits)-1;e:do{d<15&&(S+=O[h++]<<d,d+=8,S+=O[h++]<<d,d+=8),L=y[S&I];t:for(;;){if(M=L>>>24,S>>>=M,d-=M,M=L>>>16&255,M===0)D[r++]=L&65535;else if(M&16){k=L&65535,M&=15,M&&(d<M&&(S+=O[h++]<<d,d+=8),k+=S&(1<<M)-1,S>>>=M,d-=M),d<15&&(S+=O[h++]<<d,d+=8,S+=O[h++]<<d,d+=8),L=E[S&A];n:for(;;){if(M=L>>>24,S>>>=M,d-=M,M=L>>>16&255,M&16){if(w=L&65535,M&=15,d<M&&(S+=O[h++]<<d,d+=8,d<M&&(S+=O[h++]<<d,d+=8)),w+=S&(1<<M)-1,w>t){g.msg="invalid distance too far back",G.mode=30;break e}if(S>>>=M,d-=M,M=r-n,w>M){if(M=w-M,M>o&&G.sane){g.msg="invalid distance too far back",G.mode=30;break e}if(N=0,T=p,c===0){if(N+=i-M,M<k){k-=M;do D[r++]=p[N++];while(--M);N=r-w,T=D}}else if(c<M){if(N+=i+c-M,M-=c,M<k){k-=M;do D[r++]=p[N++];while(--M);if(N=0,c<k){M=c,k-=M;do D[r++]=p[N++];while(--M);N=r-w,T=D}}}else if(N+=c-M,M<k){k-=M;do D[r++]=p[N++];while(--M);N=r-w,T=D}for(;k>2;)D[r++]=T[N++],D[r++]=T[N++],D[r++]=T[N++],k-=3;k&&(D[r++]=T[N++],k>1&&(D[r++]=T[N++]))}else{N=r-w;do D[r++]=D[N++],D[r++]=D[N++],D[r++]=D[N++],k-=3;while(k>2);k&&(D[r++]=D[N++],k>1&&(D[r++]=D[N++]))}}else if(M&64){g.msg="invalid distance code",G.mode=30;break e}else{L=E[(L&65535)+(S&(1<<M)-1)];continue n}break}}else if(M&64)if(M&32){G.mode=12;break e}else{g.msg="invalid literal/length code",G.mode=30;break e}else{L=y[(L&65535)+(S&(1<<M)-1)];continue t}break}}while(h<a&&r<e);k=d>>3,h-=k,d-=k<<3,S&=(1<<d)-1,g.next_in=h,g.next_out=r,g.avail_in=h<a?5+(a-h):5-(h-a),g.avail_out=r<e?257+(e-r):257-(r-e),G.hold=S,G.bits=d},"inflate_fast")},310356:(U,l,f)=>{"use strict";const u=f(522946),g=f(443503),m=f(763342),h=f(644779),a=0,r=1,n=2,{Z_FINISH:e,Z_BLOCK:t,Z_TREES:i,Z_OK:o,Z_STREAM_END:c,Z_NEED_DICT:p,Z_STREAM_ERROR:S,Z_DATA_ERROR:d,Z_MEM_ERROR:y,Z_BUF_ERROR:E,Z_DEFLATED:I}=f(151782),A=1,L=2,M=3,k=4,w=5,N=6,T=7,O=8,D=9,G=10,K=11,H=12,q=13,me=14,we=15,ue=16,Pe=17,Ye=18,be=19,He=20,Ke=21,Ue=22,ht=23,Tt=24,st=25,ut=26,We=27,_t=28,Rt=29,Ae=30,$t=31,rt=32,Ft=852,en=592,Dn=15,Yt=s(oe=>(oe>>>24&255)+(oe>>>8&65280)+((oe&65280)<<8)+((oe&255)<<24),"zswap32");function zn(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}s(zn,"InflateState");const vn=s(oe=>{if(!oe||!oe.state)return S;const Ce=oe.state;return oe.total_in=oe.total_out=Ce.total=0,oe.msg="",Ce.wrap&&(oe.adler=Ce.wrap&1),Ce.mode=A,Ce.last=0,Ce.havedict=0,Ce.dmax=32768,Ce.head=null,Ce.hold=0,Ce.bits=0,Ce.lencode=Ce.lendyn=new Int32Array(Ft),Ce.distcode=Ce.distdyn=new Int32Array(en),Ce.sane=1,Ce.back=-1,o},"inflateResetKeep"),mt=s(oe=>{if(!oe||!oe.state)return S;const Ce=oe.state;return Ce.wsize=0,Ce.whave=0,Ce.wnext=0,vn(oe)},"inflateReset"),pt=s((oe,Ce)=>{let z;if(!oe||!oe.state)return S;const Y=oe.state;return Ce<0?(z=0,Ce=-Ce):(z=(Ce>>4)+1,Ce<48&&(Ce&=15)),Ce&&(Ce<8||Ce>15)?S:(Y.window!==null&&Y.wbits!==Ce&&(Y.window=null),Y.wrap=z,Y.wbits=Ce,mt(oe))},"inflateReset2"),Qe=s((oe,Ce)=>{if(!oe)return S;const z=new zn;oe.state=z,z.window=null;const Y=pt(oe,Ce);return Y!==o&&(oe.state=null),Y},"inflateInit2"),Ht=s(oe=>Qe(oe,Dn),"inflateInit");let xt=!0,wn,kt;const J=s(oe=>{if(xt){wn=new Int32Array(512),kt=new Int32Array(32);let Ce=0;for(;Ce<144;)oe.lens[Ce++]=8;for(;Ce<256;)oe.lens[Ce++]=9;for(;Ce<280;)oe.lens[Ce++]=7;for(;Ce<288;)oe.lens[Ce++]=8;for(h(r,oe.lens,0,288,wn,0,oe.work,{bits:9}),Ce=0;Ce<32;)oe.lens[Ce++]=5;h(n,oe.lens,0,32,kt,0,oe.work,{bits:5}),xt=!1}oe.lencode=wn,oe.lenbits=9,oe.distcode=kt,oe.distbits=5},"fixedtables"),_e=s((oe,Ce,z,Y)=>{let de;const ce=oe.state;return ce.window===null&&(ce.wsize=1<<ce.wbits,ce.wnext=0,ce.whave=0,ce.window=new Uint8Array(ce.wsize)),Y>=ce.wsize?(ce.window.set(Ce.subarray(z-ce.wsize,z),0),ce.wnext=0,ce.whave=ce.wsize):(de=ce.wsize-ce.wnext,de>Y&&(de=Y),ce.window.set(Ce.subarray(z-Y,z-Y+de),ce.wnext),Y-=de,Y?(ce.window.set(Ce.subarray(z-Y,z),0),ce.wnext=Y,ce.whave=ce.wsize):(ce.wnext+=de,ce.wnext===ce.wsize&&(ce.wnext=0),ce.whave<ce.wsize&&(ce.whave+=de))),0},"updatewindow"),Oe=s((oe,Ce)=>{let z,Y,de,ce,De,Ie,Le,fe,ge,R,ae,pe,Se,X,ft=0,ke,ze,Gt,dt,Qn,Wn,Vt,yn;const Zt=new Uint8Array(4);let Rn,Nn;const fi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!oe||!oe.state||!oe.output||!oe.input&&oe.avail_in!==0)return S;z=oe.state,z.mode===H&&(z.mode=q),De=oe.next_out,de=oe.output,Le=oe.avail_out,ce=oe.next_in,Y=oe.input,Ie=oe.avail_in,fe=z.hold,ge=z.bits,R=Ie,ae=Le,yn=o;e:for(;;)switch(z.mode){case A:if(z.wrap===0){z.mode=q;break}for(;ge<16;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(z.wrap&2&&fe===35615){z.check=0,Zt[0]=fe&255,Zt[1]=fe>>>8&255,z.check=g(z.check,Zt,2,0),fe=0,ge=0,z.mode=L;break}if(z.flags=0,z.head&&(z.head.done=!1),!(z.wrap&1)||(((fe&255)<<8)+(fe>>8))%31){oe.msg="incorrect header check",z.mode=Ae;break}if((fe&15)!==I){oe.msg="unknown compression method",z.mode=Ae;break}if(fe>>>=4,ge-=4,Vt=(fe&15)+8,z.wbits===0)z.wbits=Vt;else if(Vt>z.wbits){oe.msg="invalid window size",z.mode=Ae;break}z.dmax=1<<z.wbits,oe.adler=z.check=1,z.mode=fe&512?G:H,fe=0,ge=0;break;case L:for(;ge<16;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(z.flags=fe,(z.flags&255)!==I){oe.msg="unknown compression method",z.mode=Ae;break}if(z.flags&57344){oe.msg="unknown header flags set",z.mode=Ae;break}z.head&&(z.head.text=fe>>8&1),z.flags&512&&(Zt[0]=fe&255,Zt[1]=fe>>>8&255,z.check=g(z.check,Zt,2,0)),fe=0,ge=0,z.mode=M;case M:for(;ge<32;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}z.head&&(z.head.time=fe),z.flags&512&&(Zt[0]=fe&255,Zt[1]=fe>>>8&255,Zt[2]=fe>>>16&255,Zt[3]=fe>>>24&255,z.check=g(z.check,Zt,4,0)),fe=0,ge=0,z.mode=k;case k:for(;ge<16;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}z.head&&(z.head.xflags=fe&255,z.head.os=fe>>8),z.flags&512&&(Zt[0]=fe&255,Zt[1]=fe>>>8&255,z.check=g(z.check,Zt,2,0)),fe=0,ge=0,z.mode=w;case w:if(z.flags&1024){for(;ge<16;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}z.length=fe,z.head&&(z.head.extra_len=fe),z.flags&512&&(Zt[0]=fe&255,Zt[1]=fe>>>8&255,z.check=g(z.check,Zt,2,0)),fe=0,ge=0}else z.head&&(z.head.extra=null);z.mode=N;case N:if(z.flags&1024&&(pe=z.length,pe>Ie&&(pe=Ie),pe&&(z.head&&(Vt=z.head.extra_len-z.length,z.head.extra||(z.head.extra=new Uint8Array(z.head.extra_len)),z.head.extra.set(Y.subarray(ce,ce+pe),Vt)),z.flags&512&&(z.check=g(z.check,Y,pe,ce)),Ie-=pe,ce+=pe,z.length-=pe),z.length))break e;z.length=0,z.mode=T;case T:if(z.flags&2048){if(Ie===0)break e;pe=0;do Vt=Y[ce+pe++],z.head&&Vt&&z.length<65536&&(z.head.name+=String.fromCharCode(Vt));while(Vt&&pe<Ie);if(z.flags&512&&(z.check=g(z.check,Y,pe,ce)),Ie-=pe,ce+=pe,Vt)break e}else z.head&&(z.head.name=null);z.length=0,z.mode=O;case O:if(z.flags&4096){if(Ie===0)break e;pe=0;do Vt=Y[ce+pe++],z.head&&Vt&&z.length<65536&&(z.head.comment+=String.fromCharCode(Vt));while(Vt&&pe<Ie);if(z.flags&512&&(z.check=g(z.check,Y,pe,ce)),Ie-=pe,ce+=pe,Vt)break e}else z.head&&(z.head.comment=null);z.mode=D;case D:if(z.flags&512){for(;ge<16;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(fe!==(z.check&65535)){oe.msg="header crc mismatch",z.mode=Ae;break}fe=0,ge=0}z.head&&(z.head.hcrc=z.flags>>9&1,z.head.done=!0),oe.adler=z.check=0,z.mode=H;break;case G:for(;ge<32;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}oe.adler=z.check=Yt(fe),fe=0,ge=0,z.mode=K;case K:if(z.havedict===0)return oe.next_out=De,oe.avail_out=Le,oe.next_in=ce,oe.avail_in=Ie,z.hold=fe,z.bits=ge,p;oe.adler=z.check=1,z.mode=H;case H:if(Ce===t||Ce===i)break e;case q:if(z.last){fe>>>=ge&7,ge-=ge&7,z.mode=We;break}for(;ge<3;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}switch(z.last=fe&1,fe>>>=1,ge-=1,fe&3){case 0:z.mode=me;break;case 1:if(J(z),z.mode=He,Ce===i){fe>>>=2,ge-=2;break e}break;case 2:z.mode=Pe;break;case 3:oe.msg="invalid block type",z.mode=Ae}fe>>>=2,ge-=2;break;case me:for(fe>>>=ge&7,ge-=ge&7;ge<32;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if((fe&65535)!==(fe>>>16^65535)){oe.msg="invalid stored block lengths",z.mode=Ae;break}if(z.length=fe&65535,fe=0,ge=0,z.mode=we,Ce===i)break e;case we:z.mode=ue;case ue:if(pe=z.length,pe){if(pe>Ie&&(pe=Ie),pe>Le&&(pe=Le),pe===0)break e;de.set(Y.subarray(ce,ce+pe),De),Ie-=pe,ce+=pe,Le-=pe,De+=pe,z.length-=pe;break}z.mode=H;break;case Pe:for(;ge<14;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(z.nlen=(fe&31)+257,fe>>>=5,ge-=5,z.ndist=(fe&31)+1,fe>>>=5,ge-=5,z.ncode=(fe&15)+4,fe>>>=4,ge-=4,z.nlen>286||z.ndist>30){oe.msg="too many length or distance symbols",z.mode=Ae;break}z.have=0,z.mode=Ye;case Ye:for(;z.have<z.ncode;){for(;ge<3;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}z.lens[fi[z.have++]]=fe&7,fe>>>=3,ge-=3}for(;z.have<19;)z.lens[fi[z.have++]]=0;if(z.lencode=z.lendyn,z.lenbits=7,Rn={bits:z.lenbits},yn=h(a,z.lens,0,19,z.lencode,0,z.work,Rn),z.lenbits=Rn.bits,yn){oe.msg="invalid code lengths set",z.mode=Ae;break}z.have=0,z.mode=be;case be:for(;z.have<z.nlen+z.ndist;){for(;ft=z.lencode[fe&(1<<z.lenbits)-1],ke=ft>>>24,ze=ft>>>16&255,Gt=ft&65535,!(ke<=ge);){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(Gt<16)fe>>>=ke,ge-=ke,z.lens[z.have++]=Gt;else{if(Gt===16){for(Nn=ke+2;ge<Nn;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(fe>>>=ke,ge-=ke,z.have===0){oe.msg="invalid bit length repeat",z.mode=Ae;break}Vt=z.lens[z.have-1],pe=3+(fe&3),fe>>>=2,ge-=2}else if(Gt===17){for(Nn=ke+3;ge<Nn;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}fe>>>=ke,ge-=ke,Vt=0,pe=3+(fe&7),fe>>>=3,ge-=3}else{for(Nn=ke+7;ge<Nn;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}fe>>>=ke,ge-=ke,Vt=0,pe=11+(fe&127),fe>>>=7,ge-=7}if(z.have+pe>z.nlen+z.ndist){oe.msg="invalid bit length repeat",z.mode=Ae;break}for(;pe--;)z.lens[z.have++]=Vt}}if(z.mode===Ae)break;if(z.lens[256]===0){oe.msg="invalid code -- missing end-of-block",z.mode=Ae;break}if(z.lenbits=9,Rn={bits:z.lenbits},yn=h(r,z.lens,0,z.nlen,z.lencode,0,z.work,Rn),z.lenbits=Rn.bits,yn){oe.msg="invalid literal/lengths set",z.mode=Ae;break}if(z.distbits=6,z.distcode=z.distdyn,Rn={bits:z.distbits},yn=h(n,z.lens,z.nlen,z.ndist,z.distcode,0,z.work,Rn),z.distbits=Rn.bits,yn){oe.msg="invalid distances set",z.mode=Ae;break}if(z.mode=He,Ce===i)break e;case He:z.mode=Ke;case Ke:if(Ie>=6&&Le>=258){oe.next_out=De,oe.avail_out=Le,oe.next_in=ce,oe.avail_in=Ie,z.hold=fe,z.bits=ge,m(oe,ae),De=oe.next_out,de=oe.output,Le=oe.avail_out,ce=oe.next_in,Y=oe.input,Ie=oe.avail_in,fe=z.hold,ge=z.bits,z.mode===H&&(z.back=-1);break}for(z.back=0;ft=z.lencode[fe&(1<<z.lenbits)-1],ke=ft>>>24,ze=ft>>>16&255,Gt=ft&65535,!(ke<=ge);){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(ze&&!(ze&240)){for(dt=ke,Qn=ze,Wn=Gt;ft=z.lencode[Wn+((fe&(1<<dt+Qn)-1)>>dt)],ke=ft>>>24,ze=ft>>>16&255,Gt=ft&65535,!(dt+ke<=ge);){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}fe>>>=dt,ge-=dt,z.back+=dt}if(fe>>>=ke,ge-=ke,z.back+=ke,z.length=Gt,ze===0){z.mode=ut;break}if(ze&32){z.back=-1,z.mode=H;break}if(ze&64){oe.msg="invalid literal/length code",z.mode=Ae;break}z.extra=ze&15,z.mode=Ue;case Ue:if(z.extra){for(Nn=z.extra;ge<Nn;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}z.length+=fe&(1<<z.extra)-1,fe>>>=z.extra,ge-=z.extra,z.back+=z.extra}z.was=z.length,z.mode=ht;case ht:for(;ft=z.distcode[fe&(1<<z.distbits)-1],ke=ft>>>24,ze=ft>>>16&255,Gt=ft&65535,!(ke<=ge);){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(!(ze&240)){for(dt=ke,Qn=ze,Wn=Gt;ft=z.distcode[Wn+((fe&(1<<dt+Qn)-1)>>dt)],ke=ft>>>24,ze=ft>>>16&255,Gt=ft&65535,!(dt+ke<=ge);){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}fe>>>=dt,ge-=dt,z.back+=dt}if(fe>>>=ke,ge-=ke,z.back+=ke,ze&64){oe.msg="invalid distance code",z.mode=Ae;break}z.offset=Gt,z.extra=ze&15,z.mode=Tt;case Tt:if(z.extra){for(Nn=z.extra;ge<Nn;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}z.offset+=fe&(1<<z.extra)-1,fe>>>=z.extra,ge-=z.extra,z.back+=z.extra}if(z.offset>z.dmax){oe.msg="invalid distance too far back",z.mode=Ae;break}z.mode=st;case st:if(Le===0)break e;if(pe=ae-Le,z.offset>pe){if(pe=z.offset-pe,pe>z.whave&&z.sane){oe.msg="invalid distance too far back",z.mode=Ae;break}pe>z.wnext?(pe-=z.wnext,Se=z.wsize-pe):Se=z.wnext-pe,pe>z.length&&(pe=z.length),X=z.window}else X=de,Se=De-z.offset,pe=z.length;pe>Le&&(pe=Le),Le-=pe,z.length-=pe;do de[De++]=X[Se++];while(--pe);z.length===0&&(z.mode=Ke);break;case ut:if(Le===0)break e;de[De++]=z.length,Le--,z.mode=Ke;break;case We:if(z.wrap){for(;ge<32;){if(Ie===0)break e;Ie--,fe|=Y[ce++]<<ge,ge+=8}if(ae-=Le,oe.total_out+=ae,z.total+=ae,ae&&(oe.adler=z.check=z.flags?g(z.check,de,ae,De-ae):u(z.check,de,ae,De-ae)),ae=Le,(z.flags?fe:Yt(fe))!==z.check){oe.msg="incorrect data check",z.mode=Ae;break}fe=0,ge=0}z.mode=_t;case _t:if(z.wrap&&z.flags){for(;ge<32;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(fe!==(z.total&4294967295)){oe.msg="incorrect length check",z.mode=Ae;break}fe=0,ge=0}z.mode=Rt;case Rt:yn=c;break e;case Ae:yn=d;break e;case $t:return y;case rt:default:return S}return oe.next_out=De,oe.avail_out=Le,oe.next_in=ce,oe.avail_in=Ie,z.hold=fe,z.bits=ge,(z.wsize||ae!==oe.avail_out&&z.mode<Ae&&(z.mode<We||Ce!==e))&&_e(oe,oe.output,oe.next_out,ae-oe.avail_out)?(z.mode=$t,y):(R-=oe.avail_in,ae-=oe.avail_out,oe.total_in+=R,oe.total_out+=ae,z.total+=ae,z.wrap&&ae&&(oe.adler=z.check=z.flags?g(z.check,de,ae,oe.next_out-ae):u(z.check,de,ae,oe.next_out-ae)),oe.data_type=z.bits+(z.last?64:0)+(z.mode===H?128:0)+(z.mode===He||z.mode===we?256:0),(R===0&&ae===0||Ce===e)&&yn===o&&(yn=E),yn)},"inflate"),Ne=s(oe=>{if(!oe||!oe.state)return S;let Ce=oe.state;return Ce.window&&(Ce.window=null),oe.state=null,o},"inflateEnd"),$e=s((oe,Ce)=>{if(!oe||!oe.state)return S;const z=oe.state;return z.wrap&2?(z.head=Ce,Ce.done=!1,o):S},"inflateGetHeader"),Fe=s((oe,Ce)=>{const z=Ce.length;let Y,de,ce;return!oe||!oe.state||(Y=oe.state,Y.wrap!==0&&Y.mode!==K)?S:Y.mode===K&&(de=1,de=u(de,Ce,z,0),de!==Y.check)?d:(ce=_e(oe,Ce,z,z),ce?(Y.mode=$t,y):(Y.havedict=1,o))},"inflateSetDictionary");U.exports.inflateReset=mt,U.exports.inflateReset2=pt,U.exports.inflateResetKeep=vn,U.exports.inflateInit=Ht,U.exports.inflateInit2=Qe,U.exports.inflate=Oe,U.exports.inflateEnd=Ne,U.exports.inflateGetHeader=$e,U.exports.inflateSetDictionary=Fe,U.exports.inflateInfo="pako inflate (from Nodeca project)"},644779:U=>{"use strict";const a=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),r=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),t=s((i,o,c,p,S,d,y,E)=>{const I=E.bits;let A=0,L=0,M=0,k=0,w=0,N=0,T=0,O=0,D=0,G=0,K,H,q,me,we,ue=null,Pe=0,Ye;const be=new Uint16Array(15+1),He=new Uint16Array(15+1);let Ke=null,Ue=0,ht,Tt,st;for(A=0;A<=15;A++)be[A]=0;for(L=0;L<p;L++)be[o[c+L]]++;for(w=I,k=15;k>=1&&be[k]===0;k--);if(w>k&&(w=k),k===0)return S[d++]=1<<24|64<<16|0,S[d++]=1<<24|64<<16|0,E.bits=1,0;for(M=1;M<k&&be[M]===0;M++);for(w<M&&(w=M),O=1,A=1;A<=15;A++)if(O<<=1,O-=be[A],O<0)return-1;if(O>0&&(i===0||k!==1))return-1;for(He[1]=0,A=1;A<15;A++)He[A+1]=He[A]+be[A];for(L=0;L<p;L++)o[c+L]!==0&&(y[He[o[c+L]]++]=L);if(i===0?(ue=Ke=y,Ye=19):i===1?(ue=a,Pe-=257,Ke=r,Ue-=257,Ye=256):(ue=n,Ke=e,Ye=-1),G=0,L=0,A=M,we=d,N=w,T=0,q=-1,D=1<<w,me=D-1,i===1&&D>852||i===2&&D>592)return 1;for(;;){ht=A-T,y[L]<Ye?(Tt=0,st=y[L]):y[L]>Ye?(Tt=Ke[Ue+y[L]],st=ue[Pe+y[L]]):(Tt=32+64,st=0),K=1<<A-T,H=1<<N,M=H;do H-=K,S[we+(G>>T)+H]=ht<<24|Tt<<16|st|0;while(H!==0);for(K=1<<A-1;G&K;)K>>=1;if(K!==0?(G&=K-1,G+=K):G=0,L++,--be[A]===0){if(A===k)break;A=o[c+y[L]]}if(A>w&&(G&me)!==q){for(T===0&&(T=w),we+=M,N=A-T,O=1<<N;N+T<k&&(O-=be[N+T],!(O<=0));)N++,O<<=1;if(D+=1<<N,i===1&&D>852||i===2&&D>592)return 1;q=G&me,S[q]=w<<24|N<<16|we-d|0}}return G!==0&&(S[we+G]=A-T<<24|64<<16|0),E.bits=w,0},"inflate_table");U.exports=t},975971:U=>{"use strict";U.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},356394:U=>{"use strict";function m(J){let _e=J.length;for(;--_e>=0;)J[_e]=0}s(m,"zero");const h=0,a=1,r=2,n=3,e=258,t=29,i=256,o=i+1+t,c=30,p=19,S=2*o+1,d=15,y=16,E=7,I=256,A=16,L=17,M=18,k=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),w=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O=512,D=new Array((o+2)*2);m(D);const G=new Array(c*2);m(G);const K=new Array(O);m(K);const H=new Array(e-n+1);m(H);const q=new Array(t);m(q);const me=new Array(c);m(me);function we(J,_e,Oe,Ne,$e){this.static_tree=J,this.extra_bits=_e,this.extra_base=Oe,this.elems=Ne,this.max_length=$e,this.has_stree=J&&J.length}s(we,"StaticTreeDesc");let ue,Pe,Ye;function be(J,_e){this.dyn_tree=J,this.max_code=0,this.stat_desc=_e}s(be,"TreeDesc");const He=s(J=>J<256?K[J]:K[256+(J>>>7)],"d_code"),Ke=s((J,_e)=>{J.pending_buf[J.pending++]=_e&255,J.pending_buf[J.pending++]=_e>>>8&255},"put_short"),Ue=s((J,_e,Oe)=>{J.bi_valid>y-Oe?(J.bi_buf|=_e<<J.bi_valid&65535,Ke(J,J.bi_buf),J.bi_buf=_e>>y-J.bi_valid,J.bi_valid+=Oe-y):(J.bi_buf|=_e<<J.bi_valid&65535,J.bi_valid+=Oe)},"send_bits"),ht=s((J,_e,Oe)=>{Ue(J,Oe[_e*2],Oe[_e*2+1])},"send_code"),Tt=s((J,_e)=>{let Oe=0;do Oe|=J&1,J>>>=1,Oe<<=1;while(--_e>0);return Oe>>>1},"bi_reverse"),st=s(J=>{J.bi_valid===16?(Ke(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):J.bi_valid>=8&&(J.pending_buf[J.pending++]=J.bi_buf&255,J.bi_buf>>=8,J.bi_valid-=8)},"bi_flush"),ut=s((J,_e)=>{const Oe=_e.dyn_tree,Ne=_e.max_code,$e=_e.stat_desc.static_tree,Fe=_e.stat_desc.has_stree,oe=_e.stat_desc.extra_bits,Ce=_e.stat_desc.extra_base,z=_e.stat_desc.max_length;let Y,de,ce,De,Ie,Le,fe=0;for(De=0;De<=d;De++)J.bl_count[De]=0;for(Oe[J.heap[J.heap_max]*2+1]=0,Y=J.heap_max+1;Y<S;Y++)de=J.heap[Y],De=Oe[Oe[de*2+1]*2+1]+1,De>z&&(De=z,fe++),Oe[de*2+1]=De,!(de>Ne)&&(J.bl_count[De]++,Ie=0,de>=Ce&&(Ie=oe[de-Ce]),Le=Oe[de*2],J.opt_len+=Le*(De+Ie),Fe&&(J.static_len+=Le*($e[de*2+1]+Ie)));if(fe!==0){do{for(De=z-1;J.bl_count[De]===0;)De--;J.bl_count[De]--,J.bl_count[De+1]+=2,J.bl_count[z]--,fe-=2}while(fe>0);for(De=z;De!==0;De--)for(de=J.bl_count[De];de!==0;)ce=J.heap[--Y],!(ce>Ne)&&(Oe[ce*2+1]!==De&&(J.opt_len+=(De-Oe[ce*2+1])*Oe[ce*2],Oe[ce*2+1]=De),de--)}},"gen_bitlen"),We=s((J,_e,Oe)=>{const Ne=new Array(d+1);let $e=0,Fe,oe;for(Fe=1;Fe<=d;Fe++)Ne[Fe]=$e=$e+Oe[Fe-1]<<1;for(oe=0;oe<=_e;oe++){let Ce=J[oe*2+1];Ce!==0&&(J[oe*2]=Tt(Ne[Ce]++,Ce))}},"gen_codes"),_t=s(()=>{let J,_e,Oe,Ne,$e;const Fe=new Array(d+1);for(Oe=0,Ne=0;Ne<t-1;Ne++)for(q[Ne]=Oe,J=0;J<1<<k[Ne];J++)H[Oe++]=Ne;for(H[Oe-1]=Ne,$e=0,Ne=0;Ne<16;Ne++)for(me[Ne]=$e,J=0;J<1<<w[Ne];J++)K[$e++]=Ne;for($e>>=7;Ne<c;Ne++)for(me[Ne]=$e<<7,J=0;J<1<<w[Ne]-7;J++)K[256+$e++]=Ne;for(_e=0;_e<=d;_e++)Fe[_e]=0;for(J=0;J<=143;)D[J*2+1]=8,J++,Fe[8]++;for(;J<=255;)D[J*2+1]=9,J++,Fe[9]++;for(;J<=279;)D[J*2+1]=7,J++,Fe[7]++;for(;J<=287;)D[J*2+1]=8,J++,Fe[8]++;for(We(D,o+1,Fe),J=0;J<c;J++)G[J*2+1]=5,G[J*2]=Tt(J,5);ue=new we(D,k,i+1,o,d),Pe=new we(G,w,0,c,d),Ye=new we(new Array(0),N,0,p,E)},"tr_static_init"),Rt=s(J=>{let _e;for(_e=0;_e<o;_e++)J.dyn_ltree[_e*2]=0;for(_e=0;_e<c;_e++)J.dyn_dtree[_e*2]=0;for(_e=0;_e<p;_e++)J.bl_tree[_e*2]=0;J.dyn_ltree[I*2]=1,J.opt_len=J.static_len=0,J.last_lit=J.matches=0},"init_block"),Ae=s(J=>{J.bi_valid>8?Ke(J,J.bi_buf):J.bi_valid>0&&(J.pending_buf[J.pending++]=J.bi_buf),J.bi_buf=0,J.bi_valid=0},"bi_windup"),$t=s((J,_e,Oe,Ne)=>{Ae(J),Ne&&(Ke(J,Oe),Ke(J,~Oe)),J.pending_buf.set(J.window.subarray(_e,_e+Oe),J.pending),J.pending+=Oe},"copy_block"),rt=s((J,_e,Oe,Ne)=>{const $e=_e*2,Fe=Oe*2;return J[$e]<J[Fe]||J[$e]===J[Fe]&&Ne[_e]<=Ne[Oe]},"smaller"),Ft=s((J,_e,Oe)=>{const Ne=J.heap[Oe];let $e=Oe<<1;for(;$e<=J.heap_len&&($e<J.heap_len&&rt(_e,J.heap[$e+1],J.heap[$e],J.depth)&&$e++,!rt(_e,Ne,J.heap[$e],J.depth));)J.heap[Oe]=J.heap[$e],Oe=$e,$e<<=1;J.heap[Oe]=Ne},"pqdownheap"),en=s((J,_e,Oe)=>{let Ne,$e,Fe=0,oe,Ce;if(J.last_lit!==0)do Ne=J.pending_buf[J.d_buf+Fe*2]<<8|J.pending_buf[J.d_buf+Fe*2+1],$e=J.pending_buf[J.l_buf+Fe],Fe++,Ne===0?ht(J,$e,_e):(oe=H[$e],ht(J,oe+i+1,_e),Ce=k[oe],Ce!==0&&($e-=q[oe],Ue(J,$e,Ce)),Ne--,oe=He(Ne),ht(J,oe,Oe),Ce=w[oe],Ce!==0&&(Ne-=me[oe],Ue(J,Ne,Ce)));while(Fe<J.last_lit);ht(J,I,_e)},"compress_block"),on=s((J,_e)=>{const Oe=_e.dyn_tree,Ne=_e.stat_desc.static_tree,$e=_e.stat_desc.has_stree,Fe=_e.stat_desc.elems;let oe,Ce,z=-1,Y;for(J.heap_len=0,J.heap_max=S,oe=0;oe<Fe;oe++)Oe[oe*2]!==0?(J.heap[++J.heap_len]=z=oe,J.depth[oe]=0):Oe[oe*2+1]=0;for(;J.heap_len<2;)Y=J.heap[++J.heap_len]=z<2?++z:0,Oe[Y*2]=1,J.depth[Y]=0,J.opt_len--,$e&&(J.static_len-=Ne[Y*2+1]);for(_e.max_code=z,oe=J.heap_len>>1;oe>=1;oe--)Ft(J,Oe,oe);Y=Fe;do oe=J.heap[1],J.heap[1]=J.heap[J.heap_len--],Ft(J,Oe,1),Ce=J.heap[1],J.heap[--J.heap_max]=oe,J.heap[--J.heap_max]=Ce,Oe[Y*2]=Oe[oe*2]+Oe[Ce*2],J.depth[Y]=(J.depth[oe]>=J.depth[Ce]?J.depth[oe]:J.depth[Ce])+1,Oe[oe*2+1]=Oe[Ce*2+1]=Y,J.heap[1]=Y++,Ft(J,Oe,1);while(J.heap_len>=2);J.heap[--J.heap_max]=J.heap[1],ut(J,_e),We(Oe,z,J.bl_count)},"build_tree"),Dn=s((J,_e,Oe)=>{let Ne,$e=-1,Fe,oe=_e[0*2+1],Ce=0,z=7,Y=4;for(oe===0&&(z=138,Y=3),_e[(Oe+1)*2+1]=65535,Ne=0;Ne<=Oe;Ne++)Fe=oe,oe=_e[(Ne+1)*2+1],!(++Ce<z&&Fe===oe)&&(Ce<Y?J.bl_tree[Fe*2]+=Ce:Fe!==0?(Fe!==$e&&J.bl_tree[Fe*2]++,J.bl_tree[A*2]++):Ce<=10?J.bl_tree[L*2]++:J.bl_tree[M*2]++,Ce=0,$e=Fe,oe===0?(z=138,Y=3):Fe===oe?(z=6,Y=3):(z=7,Y=4))},"scan_tree"),Yt=s((J,_e,Oe)=>{let Ne,$e=-1,Fe,oe=_e[0*2+1],Ce=0,z=7,Y=4;for(oe===0&&(z=138,Y=3),Ne=0;Ne<=Oe;Ne++)if(Fe=oe,oe=_e[(Ne+1)*2+1],!(++Ce<z&&Fe===oe)){if(Ce<Y)do ht(J,Fe,J.bl_tree);while(--Ce!==0);else Fe!==0?(Fe!==$e&&(ht(J,Fe,J.bl_tree),Ce--),ht(J,A,J.bl_tree),Ue(J,Ce-3,2)):Ce<=10?(ht(J,L,J.bl_tree),Ue(J,Ce-3,3)):(ht(J,M,J.bl_tree),Ue(J,Ce-11,7));Ce=0,$e=Fe,oe===0?(z=138,Y=3):Fe===oe?(z=6,Y=3):(z=7,Y=4)}},"send_tree"),zn=s(J=>{let _e;for(Dn(J,J.dyn_ltree,J.l_desc.max_code),Dn(J,J.dyn_dtree,J.d_desc.max_code),on(J,J.bl_desc),_e=p-1;_e>=3&&J.bl_tree[T[_e]*2+1]===0;_e--);return J.opt_len+=3*(_e+1)+5+5+4,_e},"build_bl_tree"),vn=s((J,_e,Oe,Ne)=>{let $e;for(Ue(J,_e-257,5),Ue(J,Oe-1,5),Ue(J,Ne-4,4),$e=0;$e<Ne;$e++)Ue(J,J.bl_tree[T[$e]*2+1],3);Yt(J,J.dyn_ltree,_e-1),Yt(J,J.dyn_dtree,Oe-1)},"send_all_trees"),mt=s(J=>{let _e=4093624447,Oe;for(Oe=0;Oe<=31;Oe++,_e>>>=1)if(_e&1&&J.dyn_ltree[Oe*2]!==0)return 0;if(J.dyn_ltree[9*2]!==0||J.dyn_ltree[10*2]!==0||J.dyn_ltree[13*2]!==0)return 1;for(Oe=32;Oe<i;Oe++)if(J.dyn_ltree[Oe*2]!==0)return 1;return 0},"detect_data_type");let pt=!1;const Qe=s(J=>{pt||(_t(),pt=!0),J.l_desc=new be(J.dyn_ltree,ue),J.d_desc=new be(J.dyn_dtree,Pe),J.bl_desc=new be(J.bl_tree,Ye),J.bi_buf=0,J.bi_valid=0,Rt(J)},"_tr_init"),Ht=s((J,_e,Oe,Ne)=>{Ue(J,(h<<1)+(Ne?1:0),3),$t(J,_e,Oe,!0)},"_tr_stored_block"),xt=s(J=>{Ue(J,a<<1,3),ht(J,I,D),st(J)},"_tr_align"),wn=s((J,_e,Oe,Ne)=>{let $e,Fe,oe=0;J.level>0?(J.strm.data_type===2&&(J.strm.data_type=mt(J)),on(J,J.l_desc),on(J,J.d_desc),oe=zn(J),$e=J.opt_len+3+7>>>3,Fe=J.static_len+3+7>>>3,Fe<=$e&&($e=Fe)):$e=Fe=Oe+5,Oe+4<=$e&&_e!==-1?Ht(J,_e,Oe,Ne):J.strategy===4||Fe===$e?(Ue(J,(a<<1)+(Ne?1:0),3),en(J,D,G)):(Ue(J,(r<<1)+(Ne?1:0),3),vn(J,J.l_desc.max_code+1,J.d_desc.max_code+1,oe+1),en(J,J.dyn_ltree,J.dyn_dtree)),Rt(J),Ne&&Ae(J)},"_tr_flush_block"),kt=s((J,_e,Oe)=>(J.pending_buf[J.d_buf+J.last_lit*2]=_e>>>8&255,J.pending_buf[J.d_buf+J.last_lit*2+1]=_e&255,J.pending_buf[J.l_buf+J.last_lit]=Oe&255,J.last_lit++,_e===0?J.dyn_ltree[Oe*2]++:(J.matches++,_e--,J.dyn_ltree[(H[Oe]+i+1)*2]++,J.dyn_dtree[He(_e)*2]++),J.last_lit===J.lit_bufsize-1),"_tr_tally");U.exports._tr_init=Qe,U.exports._tr_stored_block=Ht,U.exports._tr_flush_block=wn,U.exports._tr_tally=kt,U.exports._tr_align=xt},395849:U=>{"use strict";function l(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}s(l,"ZStream"),U.exports=l},413863:(U,l,f)=>{"use strict";U.exports=f(273579)},273579:(U,l,f)=>{"use strict";var u=l;u.build="minimal",u.Writer=f(964654),u.BufferWriter=f(534303),u.Reader=f(509902),u.BufferReader=f(149887),u.util=f(394817),u.rpc=f(841266),u.roots=f(73620),u.configure=g;function g(){u.util._configure(),u.Writer._configure(u.BufferWriter),u.Reader._configure(u.BufferReader)}s(g,"configure"),g()},509902:(U,l,f)=>{"use strict";U.exports=r;var u=f(394817),g,m=u.LongBits,h=u.utf8;function a(c,p){return RangeError("index out of range: "+c.pos+" + "+(p||1)+" > "+c.len)}s(a,"indexOutOfRange");function r(c){this.buf=c,this.pos=0,this.len=c.length}s(r,"Reader");var n=typeof Uint8Array<"u"?s(function(p){if(p instanceof Uint8Array||Array.isArray(p))return new r(p);throw Error("illegal buffer")},"create_typed_array"):s(function(p){if(Array.isArray(p))return new r(p);throw Error("illegal buffer")},"create_array"),e=s(function(){return u.Buffer?s(function(S){return(r.create=s(function(y){return u.Buffer.isBuffer(y)?new g(y):n(y)},"create_buffer"))(S)},"create_buffer_setup"):n},"create");r.create=e(),r.prototype._slice=u.Array.prototype.subarray||u.Array.prototype.slice,r.prototype.uint32=s(function(){var p=4294967295;return s(function(){if(p=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(p=(p|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(p=(p|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(p=(p|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(p=(p|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return p;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return p},"read_uint32")},"read_uint32_setup")(),r.prototype.int32=s(function(){return this.uint32()|0},"read_int32"),r.prototype.sint32=s(function(){var p=this.uint32();return p>>>1^-(p&1)|0},"read_sint32");function t(){var c=new m(0,0),p=0;if(this.len-this.pos>4){for(;p<4;++p)if(c.lo=(c.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return c;if(c.lo=(c.lo|(this.buf[this.pos]&127)<<28)>>>0,c.hi=(c.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return c;p=0}else{for(;p<3;++p){if(this.pos>=this.len)throw a(this);if(c.lo=(c.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return c}return c.lo=(c.lo|(this.buf[this.pos++]&127)<<p*7)>>>0,c}if(this.len-this.pos>4){for(;p<5;++p)if(c.hi=(c.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return c}else for(;p<5;++p){if(this.pos>=this.len)throw a(this);if(c.hi=(c.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return c}throw Error("invalid varint encoding")}s(t,"readLongVarint"),r.prototype.bool=s(function(){return this.uint32()!==0},"read_bool");function i(c,p){return(c[p-4]|c[p-3]<<8|c[p-2]<<16|c[p-1]<<24)>>>0}s(i,"readFixed32_end"),r.prototype.fixed32=s(function(){if(this.pos+4>this.len)throw a(this,4);return i(this.buf,this.pos+=4)},"read_fixed32"),r.prototype.sfixed32=s(function(){if(this.pos+4>this.len)throw a(this,4);return i(this.buf,this.pos+=4)|0},"read_sfixed32");function o(){if(this.pos+8>this.len)throw a(this,8);return new m(i(this.buf,this.pos+=4),i(this.buf,this.pos+=4))}s(o,"readFixed64"),r.prototype.float=s(function(){if(this.pos+4>this.len)throw a(this,4);var p=u.float.readFloatLE(this.buf,this.pos);return this.pos+=4,p},"read_float"),r.prototype.double=s(function(){if(this.pos+8>this.len)throw a(this,4);var p=u.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,p},"read_double"),r.prototype.bytes=s(function(){var p=this.uint32(),S=this.pos,d=this.pos+p;if(d>this.len)throw a(this,p);if(this.pos+=p,Array.isArray(this.buf))return this.buf.slice(S,d);if(S===d){var y=u.Buffer;return y?y.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,S,d)},"read_bytes"),r.prototype.string=s(function(){var p=this.bytes();return h.read(p,0,p.length)},"read_string"),r.prototype.skip=s(function(p){if(typeof p=="number"){if(this.pos+p>this.len)throw a(this,p);this.pos+=p}else do if(this.pos>=this.len)throw a(this);while(this.buf[this.pos++]&128);return this},"skip"),r.prototype.skipType=function(c){switch(c){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(c=this.uint32()&7)!==4;)this.skipType(c);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+c+" at offset "+this.pos)}return this},r._configure=function(c){g=c,r.create=e(),g._configure();var p=u.Long?"toLong":"toNumber";u.merge(r.prototype,{int64:s(function(){return t.call(this)[p](!1)},"read_int64"),uint64:s(function(){return t.call(this)[p](!0)},"read_uint64"),sint64:s(function(){return t.call(this).zzDecode()[p](!1)},"read_sint64"),fixed64:s(function(){return o.call(this)[p](!0)},"read_fixed64"),sfixed64:s(function(){return o.call(this)[p](!1)},"read_sfixed64")})}},149887:(U,l,f)=>{"use strict";U.exports=m;var u=f(509902);(m.prototype=Object.create(u.prototype)).constructor=m;var g=f(394817);function m(h){u.call(this,h)}s(m,"BufferReader"),m._configure=function(){g.Buffer&&(m.prototype._slice=g.Buffer.prototype.slice)},m.prototype.string=s(function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},"read_string_buffer"),m._configure()},73620:U=>{"use strict";U.exports={}},841266:(U,l,f)=>{"use strict";var u=l;u.Service=f(752290)},752290:(U,l,f)=>{"use strict";U.exports=g;var u=f(394817);(g.prototype=Object.create(u.EventEmitter.prototype)).constructor=g;function g(m,h,a){if(typeof m!="function")throw TypeError("rpcImpl must be a function");u.EventEmitter.call(this),this.rpcImpl=m,this.requestDelimited=Boolean(h),this.responseDelimited=Boolean(a)}s(g,"Service"),g.prototype.rpcCall=s(function m(h,a,r,n,e){if(!n)throw TypeError("request must be specified");var t=this;if(!e)return u.asPromise(m,t,h,a,r,n);if(!t.rpcImpl){setTimeout(function(){e(Error("already ended"))},0);return}try{return t.rpcImpl(h,a[t.requestDelimited?"encodeDelimited":"encode"](n).finish(),s(function(o,c){if(o)return t.emit("error",o,h),e(o);if(c===null){t.end(!0);return}if(!(c instanceof r))try{c=r[t.responseDelimited?"decodeDelimited":"decode"](c)}catch(p){return t.emit("error",p,h),e(p)}return t.emit("data",c,h),e(null,c)},"rpcCallback"))}catch(i){t.emit("error",i,h),setTimeout(function(){e(i)},0);return}},"rpcCall"),g.prototype.end=s(function(h){return this.rpcImpl&&(h||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},"end")},883866:(U,l,f)=>{"use strict";U.exports=g;var u=f(394817);function g(r,n){this.lo=r>>>0,this.hi=n>>>0}s(g,"LongBits");var m=g.zero=new g(0,0);m.toNumber=function(){return 0},m.zzEncode=m.zzDecode=function(){return this},m.length=function(){return 1};var h=g.zeroHash="\0\0\0\0\0\0\0\0";g.fromNumber=s(function(n){if(n===0)return m;var e=n<0;e&&(n=-n);var t=n>>>0,i=(n-t)/4294967296>>>0;return e&&(i=~i>>>0,t=~t>>>0,++t>4294967295&&(t=0,++i>4294967295&&(i=0))),new g(t,i)},"fromNumber"),g.from=s(function(n){if(typeof n=="number")return g.fromNumber(n);if(u.isString(n))if(u.Long)n=u.Long.fromString(n);else return g.fromNumber(parseInt(n,10));return n.low||n.high?new g(n.low>>>0,n.high>>>0):m},"from"),g.prototype.toNumber=s(function(n){if(!n&&this.hi>>>31){var e=~this.lo+1>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+t*4294967296)}return this.lo+this.hi*4294967296},"toNumber"),g.prototype.toLong=s(function(n){return u.Long?new u.Long(this.lo|0,this.hi|0,Boolean(n)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(n)}},"toLong");var a=String.prototype.charCodeAt;g.fromHash=s(function(n){return n===h?m:new g((a.call(n,0)|a.call(n,1)<<8|a.call(n,2)<<16|a.call(n,3)<<24)>>>0,(a.call(n,4)|a.call(n,5)<<8|a.call(n,6)<<16|a.call(n,7)<<24)>>>0)},"fromHash"),g.prototype.toHash=s(function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},"toHash"),g.prototype.zzEncode=s(function(){var n=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^n)>>>0,this.lo=(this.lo<<1^n)>>>0,this},"zzEncode"),g.prototype.zzDecode=s(function(){var n=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^n)>>>0,this.hi=(this.hi>>>1^n)>>>0,this},"zzDecode"),g.prototype.length=s(function(){var n=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?e===0?n<16384?n<128?1:2:n<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},"length")},394817:function(U,l,f){"use strict";var u=l;u.asPromise=f(218045),u.base64=f(108839),u.EventEmitter=f(824358),u.float=f(349410),u.inquire=f(291738),u.utf8=f(181447),u.pool=f(199390),u.LongBits=f(883866),u.isNode=Boolean(typeof f.g<"u"&&f.g&&f.g.process&&f.g.process.versions&&f.g.process.versions.node),u.global=u.isNode&&f.g||typeof window<"u"&&window||typeof self<"u"&&self||this,u.emptyArray=Object.freeze?Object.freeze([]):[],u.emptyObject=Object.freeze?Object.freeze({}):{},u.isInteger=Number.isInteger||s(function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a},"isInteger"),u.isString=s(function(a){return typeof a=="string"||a instanceof String},"isString"),u.isObject=s(function(a){return a&&typeof a=="object"},"isObject"),u.isset=u.isSet=s(function(a,r){var n=a[r];return n!=null&&a.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1},"isSet"),u.Buffer=function(){try{var h=u.inquire("buffer").Buffer;return h.prototype.utf8Write?h:null}catch{return null}}(),u._Buffer_from=null,u._Buffer_allocUnsafe=null,u.newBuffer=s(function(a){return typeof a=="number"?u.Buffer?u._Buffer_allocUnsafe(a):new u.Array(a):u.Buffer?u._Buffer_from(a):typeof Uint8Array>"u"?a:new Uint8Array(a)},"newBuffer"),u.Array=typeof Uint8Array<"u"?Uint8Array:Array,u.Long=u.global.dcodeIO&&u.global.dcodeIO.Long||u.global.Long||u.inquire("long"),u.key2Re=/^true|false|0|1$/,u.key32Re=/^-?(?:0|[1-9][0-9]*)$/,u.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,u.longToHash=s(function(a){return a?u.LongBits.from(a).toHash():u.LongBits.zeroHash},"longToHash"),u.longFromHash=s(function(a,r){var n=u.LongBits.fromHash(a);return u.Long?u.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))},"longFromHash");function g(h,a,r){for(var n=Object.keys(a),e=0;e<n.length;++e)(h[n[e]]===void 0||!r)&&(h[n[e]]=a[n[e]]);return h}s(g,"merge"),u.merge=g,u.lcFirst=s(function(a){return a.charAt(0).toLowerCase()+a.substring(1)},"lcFirst");function m(h){function a(r,n){if(!(this instanceof a))return new a(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&g(this,n)}return s(a,"CustomError"),a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,enumerable:!1,configurable:!0},name:{get:s(function(){return h},"get"),set:void 0,enumerable:!1,configurable:!0},toString:{value:s(function(){return this.name+": "+this.message},"value"),writable:!0,enumerable:!1,configurable:!0}}),a}s(m,"newError"),u.newError=m,u.ProtocolError=m("ProtocolError"),u.oneOfGetter=s(function(a){for(var r={},n=0;n<a.length;++n)r[a[n]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(r[e[t]]===1&&this[e[t]]!==void 0&&this[e[t]]!==null)return e[t]}},"getOneOf"),u.oneOfSetter=s(function(a){return function(r){for(var n=0;n<a.length;++n)a[n]!==r&&delete this[a[n]]}},"setOneOf"),u.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},u._configure=function(){var h=u.Buffer;if(!h){u._Buffer_from=u._Buffer_allocUnsafe=null;return}u._Buffer_from=h.from!==Uint8Array.from&&h.from||s(function(r,n){return new h(r,n)},"Buffer_from"),u._Buffer_allocUnsafe=h.allocUnsafe||s(function(r){return new h(r)},"Buffer_allocUnsafe")}},964654:(U,l,f)=>{"use strict";U.exports=t;var u=f(394817),g,m=u.LongBits,h=u.base64,a=u.utf8;function r(E,I,A){this.fn=E,this.len=I,this.next=void 0,this.val=A}s(r,"Op");function n(){}s(n,"noop");function e(E){this.head=E.head,this.tail=E.tail,this.len=E.len,this.next=E.states}s(e,"State");function t(){this.len=0,this.head=new r(n,0,0),this.tail=this.head,this.states=null}s(t,"Writer");var i=s(function(){return u.Buffer?s(function(){return(t.create=s(function(){return new g},"create_buffer"))()},"create_buffer_setup"):s(function(){return new t},"create_array")},"create");t.create=i(),t.alloc=s(function(I){return new u.Array(I)},"alloc"),u.Array!==Array&&(t.alloc=u.pool(t.alloc,u.Array.prototype.subarray)),t.prototype._push=s(function(I,A,L){return this.tail=this.tail.next=new r(I,A,L),this.len+=A,this},"push");function o(E,I,A){I[A]=E&255}s(o,"writeByte");function c(E,I,A){for(;E>127;)I[A++]=E&127|128,E>>>=7;I[A]=E}s(c,"writeVarint32");function p(E,I){this.len=E,this.next=void 0,this.val=I}s(p,"VarintOp"),p.prototype=Object.create(r.prototype),p.prototype.fn=c,t.prototype.uint32=s(function(I){return this.len+=(this.tail=this.tail.next=new p((I=I>>>0)<128?1:I<16384?2:I<2097152?3:I<268435456?4:5,I)).len,this},"write_uint32"),t.prototype.int32=s(function(I){return I<0?this._push(S,10,m.fromNumber(I)):this.uint32(I)},"write_int32"),t.prototype.sint32=s(function(I){return this.uint32((I<<1^I>>31)>>>0)},"write_sint32");function S(E,I,A){for(;E.hi;)I[A++]=E.lo&127|128,E.lo=(E.lo>>>7|E.hi<<25)>>>0,E.hi>>>=7;for(;E.lo>127;)I[A++]=E.lo&127|128,E.lo=E.lo>>>7;I[A++]=E.lo}s(S,"writeVarint64"),t.prototype.uint64=s(function(I){var A=m.from(I);return this._push(S,A.length(),A)},"write_uint64"),t.prototype.int64=t.prototype.uint64,t.prototype.sint64=s(function(I){var A=m.from(I).zzEncode();return this._push(S,A.length(),A)},"write_sint64"),t.prototype.bool=s(function(I){return this._push(o,1,I?1:0)},"write_bool");function d(E,I,A){I[A]=E&255,I[A+1]=E>>>8&255,I[A+2]=E>>>16&255,I[A+3]=E>>>24}s(d,"writeFixed32"),t.prototype.fixed32=s(function(I){return this._push(d,4,I>>>0)},"write_fixed32"),t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=s(function(I){var A=m.from(I);return this._push(d,4,A.lo)._push(d,4,A.hi)},"write_fixed64"),t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=s(function(I){return this._push(u.float.writeFloatLE,4,I)},"write_float"),t.prototype.double=s(function(I){return this._push(u.float.writeDoubleLE,8,I)},"write_double");var y=u.Array.prototype.set?s(function(I,A,L){A.set(I,L)},"writeBytes_set"):s(function(I,A,L){for(var M=0;M<I.length;++M)A[L+M]=I[M]},"writeBytes_for");t.prototype.bytes=s(function(I){var A=I.length>>>0;if(!A)return this._push(o,1,0);if(u.isString(I)){var L=t.alloc(A=h.length(I));h.decode(I,L,0),I=L}return this.uint32(A)._push(y,A,I)},"write_bytes"),t.prototype.string=s(function(I){var A=a.length(I);return A?this.uint32(A)._push(a.write,A,I):this._push(o,1,0)},"write_string"),t.prototype.fork=s(function(){return this.states=new e(this),this.head=this.tail=new r(n,0,0),this.len=0,this},"fork"),t.prototype.reset=s(function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new r(n,0,0),this.len=0),this},"reset"),t.prototype.ldelim=s(function(){var I=this.head,A=this.tail,L=this.len;return this.reset().uint32(L),L&&(this.tail.next=I.next,this.tail=A,this.len+=L),this},"ldelim"),t.prototype.finish=s(function(){for(var I=this.head.next,A=this.constructor.alloc(this.len),L=0;I;)I.fn(I.val,A,L),L+=I.len,I=I.next;return A},"finish"),t._configure=function(E){g=E,t.create=i(),g._configure()}},534303:(U,l,f)=>{"use strict";U.exports=m;var u=f(964654);(m.prototype=Object.create(u.prototype)).constructor=m;var g=f(394817);function m(){u.call(this)}s(m,"BufferWriter"),m._configure=function(){m.alloc=g._Buffer_allocUnsafe,m.writeBytesBuffer=g.Buffer&&g.Buffer.prototype instanceof Uint8Array&&g.Buffer.prototype.set.name==="set"?s(function(r,n,e){n.set(r,e)},"writeBytesBuffer_set"):s(function(r,n,e){if(r.copy)r.copy(n,e,0,r.length);else for(var t=0;t<r.length;)n[e++]=r[t++]},"writeBytesBuffer_copy")},m.prototype.bytes=s(function(r){g.isString(r)&&(r=g._Buffer_from(r,"base64"));var n=r.length>>>0;return this.uint32(n),n&&this._push(m.writeBytesBuffer,n,r),this},"write_bytes_buffer");function h(a,r,n){a.length<40?g.utf8.write(a,r,n):r.utf8Write?r.utf8Write(a,n):r.write(a,n)}s(h,"writeStringBuffer"),m.prototype.string=s(function(r){var n=g.Buffer.byteLength(r);return this.uint32(n),n&&this._push(h,n,r),this},"write_string_buffer"),m._configure()},407396:(U,l,f)=>{"use strict";f.r(l),f.d(l,{__assign:()=>m,__asyncDelegator:()=>I,__asyncGenerator:()=>E,__asyncValues:()=>A,__await:()=>y,__awaiter:()=>e,__classPrivateFieldGet:()=>w,__classPrivateFieldSet:()=>N,__createBinding:()=>i,__decorate:()=>a,__exportStar:()=>o,__extends:()=>g,__generator:()=>t,__importDefault:()=>k,__importStar:()=>M,__makeTemplateObject:()=>L,__metadata:()=>n,__param:()=>r,__read:()=>p,__rest:()=>h,__spread:()=>S,__spreadArrays:()=>d,__values:()=>c});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u=s(function(T,O){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,G){D.__proto__=G}||function(D,G){for(var K in G)G.hasOwnProperty(K)&&(D[K]=G[K])},u(T,O)},"extendStatics");function g(T,O){u(T,O);function D(){this.constructor=T}s(D,"__"),T.prototype=O===null?Object.create(O):(D.prototype=O.prototype,new D)}s(g,"__extends");var m=s(function(){return m=Object.assign||s(function(O){for(var D,G=1,K=arguments.length;G<K;G++){D=arguments[G];for(var H in D)Object.prototype.hasOwnProperty.call(D,H)&&(O[H]=D[H])}return O},"__assign"),m.apply(this,arguments)},"__assign");function h(T,O){var D={};for(var G in T)Object.prototype.hasOwnProperty.call(T,G)&&O.indexOf(G)<0&&(D[G]=T[G]);if(T!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,G=Object.getOwnPropertySymbols(T);K<G.length;K++)O.indexOf(G[K])<0&&Object.prototype.propertyIsEnumerable.call(T,G[K])&&(D[G[K]]=T[G[K]]);return D}s(h,"__rest");function a(T,O,D,G){var K=arguments.length,H=K<3?O:G===null?G=Object.getOwnPropertyDescriptor(O,D):G,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(T,O,D,G);else for(var me=T.length-1;me>=0;me--)(q=T[me])&&(H=(K<3?q(H):K>3?q(O,D,H):q(O,D))||H);return K>3&&H&&Object.defineProperty(O,D,H),H}s(a,"__decorate");function r(T,O){return function(D,G){O(D,G,T)}}s(r,"__param");function n(T,O){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(T,O)}s(n,"__metadata");function e(T,O,D,G){function K(H){return H instanceof D?H:new D(function(q){q(H)})}return s(K,"adopt"),new(D||(D=Promise))(function(H,q){function me(Pe){try{ue(G.next(Pe))}catch(Ye){q(Ye)}}s(me,"fulfilled");function we(Pe){try{ue(G.throw(Pe))}catch(Ye){q(Ye)}}s(we,"rejected");function ue(Pe){Pe.done?H(Pe.value):K(Pe.value).then(me,we)}s(ue,"step"),ue((G=G.apply(T,O||[])).next())})}s(e,"__awaiter");function t(T,O){var D={label:0,sent:function(){if(H[0]&1)throw H[1];return H[1]},trys:[],ops:[]},G,K,H,q;return q={next:me(0),throw:me(1),return:me(2)},typeof Symbol=="function"&&(q[Symbol.iterator]=function(){return this}),q;function me(ue){return function(Pe){return we([ue,Pe])}}function we(ue){if(G)throw new TypeError("Generator is already executing.");for(;D;)try{if(G=1,K&&(H=ue[0]&2?K.return:ue[0]?K.throw||((H=K.return)&&H.call(K),0):K.next)&&!(H=H.call(K,ue[1])).done)return H;switch(K=0,H&&(ue=[ue[0]&2,H.value]),ue[0]){case 0:case 1:H=ue;break;case 4:return D.label++,{value:ue[1],done:!1};case 5:D.label++,K=ue[1],ue=[0];continue;case 7:ue=D.ops.pop(),D.trys.pop();continue;default:if(H=D.trys,!(H=H.length>0&&H[H.length-1])&&(ue[0]===6||ue[0]===2)){D=0;continue}if(ue[0]===3&&(!H||ue[1]>H[0]&&ue[1]<H[3])){D.label=ue[1];break}if(ue[0]===6&&D.label<H[1]){D.label=H[1],H=ue;break}if(H&&D.label<H[2]){D.label=H[2],D.ops.push(ue);break}H[2]&&D.ops.pop(),D.trys.pop();continue}ue=O.call(T,D)}catch(Pe){ue=[6,Pe],K=0}finally{G=H=0}if(ue[0]&5)throw ue[1];return{value:ue[0]?ue[1]:void 0,done:!0}}}s(t,"__generator");function i(T,O,D,G){G===void 0&&(G=D),T[G]=O[D]}s(i,"__createBinding");function o(T,O){for(var D in T)D!=="default"&&!O.hasOwnProperty(D)&&(O[D]=T[D])}s(o,"__exportStar");function c(T){var O=typeof Symbol=="function"&&Symbol.iterator,D=O&&T[O],G=0;if(D)return D.call(T);if(T&&typeof T.length=="number")return{next:function(){return T&&G>=T.length&&(T=void 0),{value:T&&T[G++],done:!T}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}s(c,"__values");function p(T,O){var D=typeof Symbol=="function"&&T[Symbol.iterator];if(!D)return T;var G=D.call(T),K,H=[],q;try{for(;(O===void 0||O-- >0)&&!(K=G.next()).done;)H.push(K.value)}catch(me){q={error:me}}finally{try{K&&!K.done&&(D=G.return)&&D.call(G)}finally{if(q)throw q.error}}return H}s(p,"__read");function S(){for(var T=[],O=0;O<arguments.length;O++)T=T.concat(p(arguments[O]));return T}s(S,"__spread");function d(){for(var T=0,O=0,D=arguments.length;O<D;O++)T+=arguments[O].length;for(var G=Array(T),K=0,O=0;O<D;O++)for(var H=arguments[O],q=0,me=H.length;q<me;q++,K++)G[K]=H[q];return G}s(d,"__spreadArrays");function y(T){return this instanceof y?(this.v=T,this):new y(T)}s(y,"__await");function E(T,O,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=D.apply(T,O||[]),K,H=[];return K={},q("next"),q("throw"),q("return"),K[Symbol.asyncIterator]=function(){return this},K;function q(be){G[be]&&(K[be]=function(He){return new Promise(function(Ke,Ue){H.push([be,He,Ke,Ue])>1||me(be,He)})})}function me(be,He){try{we(G[be](He))}catch(Ke){Ye(H[0][3],Ke)}}function we(be){be.value instanceof y?Promise.resolve(be.value.v).then(ue,Pe):Ye(H[0][2],be)}function ue(be){me("next",be)}function Pe(be){me("throw",be)}function Ye(be,He){be(He),H.shift(),H.length&&me(H[0][0],H[0][1])}}s(E,"__asyncGenerator");function I(T){var O,D;return O={},G("next"),G("throw",function(K){throw K}),G("return"),O[Symbol.iterator]=function(){return this},O;function G(K,H){O[K]=T[K]?function(q){return(D=!D)?{value:y(T[K](q)),done:K==="return"}:H?H(q):q}:H}}s(I,"__asyncDelegator");function A(T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var O=T[Symbol.asyncIterator],D;return O?O.call(T):(T=typeof c=="function"?c(T):T[Symbol.iterator](),D={},G("next"),G("throw"),G("return"),D[Symbol.asyncIterator]=function(){return this},D);function G(H){D[H]=T[H]&&function(q){return new Promise(function(me,we){q=T[H](q),K(me,we,q.done,q.value)})}}function K(H,q,me,we){Promise.resolve(we).then(function(ue){H({value:ue,done:me})},q)}}s(A,"__asyncValues");function L(T,O){return Object.defineProperty?Object.defineProperty(T,"raw",{value:O}):T.raw=O,T}s(L,"__makeTemplateObject");function M(T){if(T&&T.__esModule)return T;var O={};if(T!=null)for(var D in T)Object.hasOwnProperty.call(T,D)&&(O[D]=T[D]);return O.default=T,O}s(M,"__importStar");function k(T){return T&&T.__esModule?T:{default:T}}s(k,"__importDefault");function w(T,O){if(!O.has(T))throw new TypeError("attempted to get private field on non-instance");return O.get(T)}s(w,"__classPrivateFieldGet");function N(T,O,D){if(!O.has(T))throw new TypeError("attempted to set private field on non-instance");return O.set(T,D),D}s(N,"__classPrivateFieldSet")},965833:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(449341));let h=s(class{needUpdate(r){return this.activeSpeakers?this.speakerScores[r]===0&&this.activeSpeakers.includes(r)||this.speakerScores[r]>0&&!this.activeSpeakers.includes(r):!0}updateActiveSpeakers(r,n,e){if(!this.needUpdate(e))return;const t=[],i=Object.keys(this.speakerScores);for(let d=0;d<i.length;d++){const y=i[d];t.push({attendeeId:y,activeScore:this.speakerScores[y]})}const o=t.sort((d,y)=>y.activeScore-d.activeScore).filter(function(d){return d.activeScore>0}).map(function(d){return d.attendeeId});this.activeSpeakers=o,n(o);const p=o.length>0&&o[0]===this.selfAttendeeId&&r.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==p&&(this.hasBandwidthPriority=p,this.hasBandwidthPriorityCallback(p))}updateScore(r,n,e,t,i){const o=r.calculateScore(e,t,i);this.speakerScores[e]!==o&&(this.speakerScores[e]=o,this.mostRecentUpdateTimestamp[e]=Date.now(),this.updateActiveSpeakers(r,n,e))}subscribe(r,n,e,t){const i=s((c,p)=>{if(!p){this.speakerScores[c]=0,this.mostRecentUpdateTimestamp[c]=Date.now(),this.updateActiveSpeakers(r,n,c);return}this.realtimeController.realtimeSubscribeToVolumeIndicator(c,(S,d,y,E)=>{this.mostRecentUpdateTimestamp[S]=Date.now(),y!==null&&(this.speakerMuteState[S]=y),this.updateScore(r,n,S,d,y)})},"handler");this.detectorCallbackToHandler.set(n,i);const o=new m.default(this.updateIntervalMs);if(o.start(()=>{for(const c in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[c]>this.waitIntervalMs&&this.updateScore(r,n,c,0,this.speakerMuteState[c])}),this.detectorCallbackToActivityTimer.set(n,o),e&&t){const c=new m.default(t);c.start(()=>{e(this.speakerScores)}),this.detectorCallbackToScoresTimer.set(n,c)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)}unsubscribe(r){const n=this.detectorCallbackToHandler.get(r);this.detectorCallbackToHandler.delete(r),n&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n);const e=this.detectorCallbackToActivityTimer.get(r);e&&(e.stop(),this.detectorCallbackToActivityTimer.delete(r));const t=this.detectorCallbackToScoresTimer.get(r);t&&(t.stop(),this.detectorCallbackToHandler.delete(r))}destroy(){return u(this,void 0,void 0,function*(){for(const r of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(r);for(const r of this.detectorCallbackToActivityTimer.values())r.stop();for(const r of this.detectorCallbackToScoresTimer.values())r.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()})}constructor(r,n,e,t=1e3,i=200){this.realtimeController=r,this.selfAttendeeId=n,this.hasBandwidthPriorityCallback=e,this.waitIntervalMs=t,this.updateIntervalMs=i,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}},"DefaultActiveSpeakerDetector");l.default=h},436133:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{calculateScore(g,m,h){(h||m===null)&&(m=0),this.volumes.hasOwnProperty(g)||(this.volumes[g]=0),m>this.silenceThreshold?m=1:m=0;const a=this.volumes[g]*this.speakerWeight+m*(1-this.speakerWeight);this.volumes[g]=a;for(const r in this.volumes)r!==g&&(this.volumes[r]=Math.max(this.volumes[r]-this.takeoverRate*m,0));return a<this.cutoffThreshold?0:a}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}constructor(g=.9,m=.01,h=.2,a=.2){this.speakerWeight=g,this.cutoffThreshold=m,this.silenceThreshold=h,this.takeoverRate=a,this.volumes={}}},"DefaultActiveSpeakerPolicy");l.default=f},461886:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class uS{static create(g,m){const h=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!g||g.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!h.test(g))throw new Error(`appName must satisfy ${h} regular expression`);const a=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!m||m.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!a.test(m))throw new Error("appVersion must satisfy Semantic Versioning format");return new uS(g,m)}constructor(g,m){this.appName=g,this.appVersion=m}},"ApplicationMetadata");l.default=f},109520:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"Attendee");l.default=f},66967:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(48839)),h=g(f(359454));let a=s(class{bindAudioElement(n){return u(this,void 0,void 0,function*(){if(!n)throw new Error(`Cannot bind audio element: ${n}`);return this.audioElement=n,this.audioElement.autoplay=!0,this.bindAudioMix()})}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver(n=>{this.audioStream&&n.meetingAudioStreamBecameInactive(this.audioStream)}))}bindAudioStream(n){return u(this,void 0,void 0,function*(){if(n){this.audioStream=n;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}})}bindAudioDevice(n){return u(this,void 0,void 0,function*(){if(n&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=n,this.bindAudioMix()})}forEachObserver(n){for(const e of this.observers)h.default.nextTick(()=>{n(e)})}bindAudioMix(){var n,e;return u(this,void 0,void 0,function*(){if(!this.audioElement)return;const t=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),t!==this.audioStream&&this.forEachObserver(d=>{t&&d.meetingAudioStreamBecameInactive(t),this.audioStream&&d.meetingAudioStreamBecameActive(this.audioStream)});const i=((n=this.audioDevice)===null||n===void 0?void 0:n.deviceId)!==this.audioElement.sinkId;if(i&&typeof this.audioElement.sinkId>"u")throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const o=this.audioDevice?this.audioDevice.deviceId:"",c=this.audioElement.sinkId;if(o===c)return;const p=this.audioElement,S=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(p.srcObject=null),i)try{yield p.setSinkId(o)}catch(d){throw(e=this.logger)===null||e===void 0||e.error(`Failed to set sinkId for audio element: ${d}`),d}this.browserBehavior.hasChromiumWebRTC()&&(p.srcObject=S)})}getCurrentMeetingAudioStream(){return u(this,void 0,void 0,function*(){return this.audioStream})}addAudioMixObserver(n){return u(this,void 0,void 0,function*(){this.observers.add(n)})}removeAudioMixObserver(n){return u(this,void 0,void 0,function*(){this.observers.delete(n)})}audioOutputDidChange(n){return u(this,void 0,void 0,function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(n)})}constructor(n){this.logger=n,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new m.default,this.observers=new Set}},"DefaultAudioMixController");l.default=a},754790:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(48839));let m=s(class Jl{static fullbandSpeechMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Jl(4e4,a)}static fullbandMusicMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Jl(64e3,a)}static fullbandMusicStereo(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Jl(128e3,a)}isStereo(){return this.audioBitrateBps===128e3}hasRedundancyEnabled(){return this.enableAudioRedundancy}constructor(a=null,r=!0){this.audioBitrateBps=a,this.enableAudioRedundancy=new g.default().supportsAudioRedundancy()&&r}},"AudioProfile");l.default=m},263385:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;let f=s(class{resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.transceiverController!==void 0&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null}constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.prioritizedSendVideoCodecCapabilities=[],this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null}},"AudioVideoControllerState");l.default=f},493783:function(U,l,f){"use strict";var u=this&&this.__createBinding||(Object.create?function(z,Y,de,ce){ce===void 0&&(ce=de),Object.defineProperty(z,ce,{enumerable:!0,get:function(){return Y[de]}})}:function(z,Y,de,ce){ce===void 0&&(ce=de),z[ce]=Y[de]}),g=this&&this.__setModuleDefault||(Object.create?function(z,Y){Object.defineProperty(z,"default",{enumerable:!0,value:Y})}:function(z,Y){z.default=Y}),m=this&&this.__importStar||function(z){if(z&&z.__esModule)return z;var Y={};if(z!=null)for(var de in z)de!=="default"&&Object.prototype.hasOwnProperty.call(z,de)&&u(Y,z,de);return g(Y,z),Y},h=this&&this.__awaiter||function(z,Y,de,ce){function De(Ie){return Ie instanceof de?Ie:new de(function(Le){Le(Ie)})}return s(De,"adopt"),new(de||(de=Promise))(function(Ie,Le){function fe(ae){try{R(ce.next(ae))}catch(pe){Le(pe)}}s(fe,"fulfilled");function ge(ae){try{R(ce.throw(ae))}catch(pe){Le(pe)}}s(ge,"rejected");function R(ae){ae.done?Ie(ae.value):De(ae.value).then(fe,ge)}s(R,"step"),R((ce=ce.apply(z,Y||[])).next())})},a=this&&this.__importDefault||function(z){return z&&z.__esModule?z:{default:z}};Object.defineProperty(l,"__esModule",{value:!0});const r=a(f(965833)),n=a(f(66967)),e=a(f(754790)),t=a(f(48839)),i=a(f(140426)),o=a(f(14050)),c=a(f(74647)),p=a(f(91572)),S=a(f(407833)),d=a(f(544596)),y=a(f(578555)),E=a(f(504839)),I=a(f(337423)),A=a(f(359454)),L=a(f(866003)),M=a(f(860872)),k=a(f(956877)),w=a(f(547452)),N=a(f(572709)),T=m(f(493149)),O=a(f(497324)),D=a(f(463258)),G=f(459746),K=a(f(336632)),H=a(f(579219)),q=a(f(941513)),me=a(f(573628)),we=a(f(483066)),ue=a(f(87099)),Pe=a(f(591983)),Ye=a(f(355888)),be=a(f(410419)),He=a(f(584980)),Ke=a(f(159636)),Ue=a(f(912790)),ht=a(f(669492)),Tt=a(f(771132)),st=a(f(981373)),ut=a(f(130489)),We=a(f(640882)),_t=a(f(768034)),Rt=a(f(402858)),Ae=a(f(730157)),$t=a(f(713797)),rt=a(f(189362)),Ft=a(f(490525)),en=a(f(33001)),on=a(f(753973)),Dn=a(f(1727)),Yt=a(f(897111)),zn=a(f(439527)),vn=a(f(45519)),mt=f(153822),pt=a(f(769839)),Qe=a(f(961381)),Ht=a(f(806321)),xt=f(774377),wn=a(f(540079)),kt=a(f(983395)),J=a(f(243563)),_e=a(f(354013)),Oe=a(f(318415)),Ne=a(f(583646)),$e=a(f(978774)),Fe=a(f(948159)),oe=a(f(263385));let Ce=s(class Yl{destroy(){return h(this,void 0,void 0,function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0})}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new r.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(Y){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(Y):null}setAudioProfile(Y){this._audioProfile=Y}addObserver(Y){this.logger.info("adding meeting observer"),this.observerQueue.add(Y)}removeObserver(Y){this.logger.info("removing meeting observer"),this.observerQueue.delete(Y)}forEachObserver(Y){for(const de of this.observerQueue)A.default.nextTick(()=>{this.observerQueue.has(de)&&Y(de)})}initSignalingClient(){this.connectionHealthData.reset(),!this.meetingSessionContext.signalingClient&&(this.meetingSessionContext=new oe.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new t.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new N.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then(()=>{const Y=s(()=>h(this,void 0,void 0,function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}),"handleClosed");this.preStartObserver={handleSignalingClientEvent(de){de.type===O.default.WebSocketClosed&&Y()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)}).catch(Y=>{this.logger.error(`Signaling task pre-start failed: ${Y}`),this.signalingTask=void 0})}start(Y){this.startReturningPromise(Y).then(()=>{this.logger.info("start completed")}).catch(de=>{this.logger.error(`start failed: ${de}`)})}startReturningPromise(Y){return(Y==null?void 0:Y.signalingOnly)===!0?this.prestart():(this.activeSpeakerDetector,new Promise((de,ce)=>{this.sessionStateController.perform(M.default.Connect,()=>{this.actionConnect(!1).then(de).catch(ce)})}))}connectWithPromises(Y){const de=this.meetingSessionContext,ce=s((ft,ke)=>new en.default(this.logger,ke,ft),"timeout");this.monitorTask=new Ke.default(de,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const De=this.monitorTask.once(),Ie=new st.default(de).once();this.receiveIndexTask=new _t.default(de),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const Le=new Ae.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new He.default(de),new Rt.default(de),new Ye.default(de),this.receiveIndexTask]).once(),fe=new we.default(de).once(Le),ge=new H.default(de).once(fe,Ie),R=new ue.default(de).once(ge),ae=new $t.default(de).once(R),pe=new Pe.default(de).once(ae),Se=new Ft.default(de).once(pe),X=new ut.default(de).once(Se);return new Ae.default(this.logger,this.wrapTaskName("AudioVideoStart"),[De,ce(this.configuration.connectionTimeoutMs,new Ae.default(this.logger,"Peer",[Se,X,Y?new en.default(this.logger,new ht.default(this.logger,"FinalizeConnection",[new on.default(de),new rt.default(de)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new rt.default(de)]))])}actionConnect(Y){var de;return h(this,void 0,void 0,function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&new t.default().hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&new t.default().supportsScalableVideoCoding();const ce=!!this.configuration.urls.audioHostURL;if(ce?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new y.default(this.configuration.credentials.attendeeId).hasModality(y.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new Yt.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new zn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new Dn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new vn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new Fe.default(this.logger,this._realtimeController,Yl.MIN_VOLUME_DECIBELS,Yl.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let Le=this.meetingSessionContext.videoUplinkBandwidthPolicy;Le||(Le=new Ne.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=Le),Le.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Ht.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new J.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new kt.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new $e.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Qe.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new y.default(this.configuration.credentials.attendeeId).hasModality(y.default.MODALITY_CONTENT)){const Le=this.configuration.meetingFeatures.contentMaxResolution===c.default.VideoResolutionUHD;Le&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Le)}else{const Le=this.configuration.meetingFeatures.videoMaxResolution===c.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(Le)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver(()=>this.update({needsRenegotiation:!1})),this.meetingSessionContext.lastKnownVideoAvailability=new d.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new pt.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new wn.default,this.meetingSessionContext.videosPaused=new wn.default,this.meetingSessionContext.statsCollector=new K.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new o.default(this,this._realtimeController,this.connectionHealthData,new E.default(this.meetingSessionContext.signalingClient,Yl.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},Y||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver(Le=>{mt.Maybe.of(Le.audioVideoDidStartConnecting).map(fe=>fe.bind(Le)(!1))}),(de=this.eventController)===null||de===void 0||de.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const De=ce&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+De);const Ie=this.connectWithPromises(De);try{yield Ie.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(M.default.FinishConnecting,()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()})}catch(Le){this.signalingTask=void 0;const fe=new p.default(this.getMeetingStatusCode(Le)||S.default.TaskFailed);if(this.logger.info(`Start failed: ${fe} due to error ${Le}.`),this.sessionStateController.state()===k.default.NotConnected){this.logger.info("Start failed and not connected. Not cleaning up.");return}this.sessionStateController.perform(M.default.Fail,()=>h(this,void 0,void 0,function*(){yield this.actionDisconnect(fe,!0,Le),this.handleMeetingSessionStatus(fe,Le)||this.notifyStop(fe,Le)}))}})}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new en.default(this.logger,new Ue.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=G.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.forEachObserver(Y=>{mt.Maybe.of(Y.audioVideoDidStart).map(de=>de.bind(Y)())}),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var Y;return this.sessionStateController.state()===k.default.NotConnected?((Y=this.meetingSessionContext.signalingClient)===null||Y===void 0||Y.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise((de,ce)=>{this.sessionStateController.perform(M.default.Disconnect,()=>{this._reconnectController.disableReconnect(),this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new p.default(S.default.Left),!1,null).then(de).catch(ce)})})}stop(){this.stopReturningPromise()}actionDisconnect(Y,de,ce){return h(this,void 0,void 0,function*(){try{yield new Ae.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new en.default(this.logger,new be.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch{this.logger.info("fail to stop")}try{const De=[new en.default(this.logger,new me.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new Ae.default(this.logger,this.wrapTaskName("AudioVideoClean"),De).run()}catch{this.logger.info("fail to clean")}this.sessionStateController.perform(M.default.FinishDisconnecting,()=>{de||this.notifyStop(Y,ce)})})}update(){let de=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{needsRenegotiation:!0}).needsRenegotiation;if(de||(de=this.meetingSessionContext.peer===void 0),de||(de=!this.updateRemoteVideosFromPolicy()),de||(de=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!de)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const ce=this.sessionStateController.perform(M.default.Update,()=>{this.actionUpdateWithRenegotiation(!0)});return ce===w.default.Transitioned||ce===w.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!T.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===T.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const Y=this.detectChangesInVideosToReceive();if(Y===void 0)return!1;const de=Y.added,ce=Y.simulcastStreamUpdates,De=Y.removed,Ie=this.meetingSessionContext,Le=[];for(const[fe,ge]of ce.entries()){const R=new D.default;if(R.streamId=ge,R.attendeeId=Ie.videoStreamIndex.attendeeIdForStreamId(ge),R.mid=Ie.transceiverController.getMidForStreamId(fe),R.mid===void 0)return this.logger.info(`No MID found for stream ID ${fe}, cannot update stream without renegotiation`),!1;if(Le.push(R),Ie.transceiverController.setStreamIdForMid(R.mid,ge),Ie.videoStreamIndex.overrideStreamIdMappings(fe,ge),Ie.videoTileController.haveVideoTileForAttendeeId(R.attendeeId)){const ae=Ie.videoTileController.getVideoTileForAttendeeId(R.attendeeId);if(!ae.setStreamId)return!1;ae.setStreamId(ge)}}return Le.length!==0&&Ie.signalingClient.remoteVideoUpdate(Le,[]),de.length!==0||De.length!==0?!1:(Ie.videoStreamIndex.subscribeFrameSent(),!0)}detectChangesInVideosToReceive(){const Y=this.meetingSessionContext;if(Y.videosToReceive===null||!Y.transceiverController||!Y.transceiverController.getMidForStreamId||!Y.transceiverController.setStreamIdForMid||!Y.videosToReceive.forEach||!Y.signalingClient.remoteVideoUpdate||!Y.videoStreamIndex.overrideStreamIdMappings)return;let de=[];const ce=new Map;let De=[];if(Y.lastVideosToReceive===null)de=Y.videosToReceive.array();else{const Ie=Y.videoStreamIndex;Y.videosToReceive.forEach(Le=>{if(Y.lastVideosToReceive.contain(Le))return;let fe=!1;Y.lastVideosToReceive.forEach(ge=>{fe||Ie.StreamIdsInSameGroup(ge,Le)&&(ce.set(ge,Le),fe=!0)}),fe||de.push(Le)}),De=Y.lastVideosToReceive.array().filter(Le=>{const fe=Y.videosToReceive.contain(Le),ge=ce.has(Le);return!fe&&!ge})}return this.logger.info(`Request to update remote videos with added: ${de}, updated: ${[...ce.entries()]}, removed: ${De}`),{added:de,removed:De,simulcastStreamUpdates:ce}}isNotAddingOrRemovingStreams(){const Y=this.detectChangesInVideosToReceive();if(Y===void 0)return!1;const de=Y.added,ce=Y.removed;return!(de.length!==0||ce.length!==0)}sendRemoteVideoUpdate(){const Y=this.meetingSessionContext;if(Y.videosToReceive===null)return!1;const de=Y.videosToReceive.array().map(fe=>Y.videoStreamIndex.groupIdForStreamId(fe)),ce=xt.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(Y,de,Y.videoDownlinkBandwidthPolicy.getVideoPreferences()),De=new Map,Ie=[];for(const fe of ce){let ge=!1;if(!Y.lastVideoSubscriptionConfiguration.has(fe.groupId))ge=!0;else{const R=Y.lastVideoSubscriptionConfiguration.get(fe.groupId);fe.equals(R)||(this.logger.debug(`${JSON.stringify(fe)} does not equal ${JSON.stringify(R)}, sending update`),ge=!0)}De.set(fe.groupId,fe),ge&&Ie.push(fe)}Y.lastVideoSubscriptionConfiguration=De;const Le=[];if(Y.lastVideosToReceive!==null){const fe=new Set(de);for(const ge of Y.lastVideosToReceive.array()){const R=Y.videoStreamIndex.groupIdForStreamId(ge);if(!fe.has(R)){const ae=Y.transceiverController.getMidForGroupId(R);if(ae===void 0){Y.logger.warn(`Could not find MID for group ID to remove: ${R}`);continue}Le.push(ae)}}}return(Ie.length!==0||Le.length!==0)&&Y.signalingClient.remoteVideoUpdate(Ie,Le),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const Y=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(Y)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const Y=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!Y||!Y.headerExtensions?!1:Y.headerExtensions.some(de=>de.uri==="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00")}restartLocalVideo(Y){const de=s(()=>h(this,void 0,void 0,function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),Y()}),"restartVideo"),ce=this.sessionStateController.perform(M.default.Update,()=>{de()});return ce===w.default.Transitioned||ce===w.default.DeferredTransition}replaceLocalVideo(Y){return h(this,void 0,void 0,function*(){if(!Y||Y.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const de=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(de){const ce=de.state(),De=Y.getVideoTracks()[0].getSettings();de.bindVideoStream(ce.boundAttendeeId,!0,Y,De.width,De.height,ce.streamId,ce.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(Y.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=Y,this.logger.info("Local video input is updated")})}replaceLocalAudio(Y){return h(this,void 0,void 0,function*(){if(!Y||Y.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime(),!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(Y.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=Y,this.logger.info("Local audio input is updated")})}actionUpdateWithRenegotiation(Y){return h(this,void 0,void 0,function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new Ae.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new We.default(this.meetingSessionContext),new en.default(this.logger,new Ae.default(this.logger,"UpdateSession",[new H.default(this.meetingSessionContext),new ue.default(this.meetingSessionContext),new $t.default(this.meetingSessionContext),new Pe.default(this.meetingSessionContext),new Ft.default(this.meetingSessionContext),new rt.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),Y&&this.sessionStateController.perform(M.default.FinishUpdating,()=>{this.actionFinishUpdating()})}catch(de){this.sessionStateController.perform(M.default.FinishUpdating,()=>{const ce=new p.default(this.getMeetingStatusCode(de)||S.default.TaskFailed);ce.statusCode()!==S.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(ce,de)})}})}notifyStop(Y,de){var ce;if(this.forEachObserver(De=>{mt.Maybe.of(De.audioVideoDidStop).map(Ie=>Ie.bind(De)(Y))}),this.promotedToPrimaryMeeting&&de&&this.forEachObserver(De=>{this.promotedToPrimaryMeeting=!1,mt.Maybe.of(De.audioVideoWasDemotedFromPrimaryMeeting).map(Ie=>Ie.bind(De)(new p.default(S.default.SignalingInternalServerError)))}),this.eventController){const{signalingOpenDurationMs:De,poorConnectionCount:Ie,startTimeMs:Le,iceGatheringDurationMs:fe,attendeePresenceDurationMs:ge,meetingStartDurationMs:R}=this.meetingSessionContext,ae={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Le===null?0:Math.round(Date.now()-Le),meetingStatus:S.default[Y.statusCode()],signalingOpenDurationMs:De,iceGatheringDurationMs:fe,attendeePresenceDurationMs:ge,poorConnectionCount:Ie,meetingStartDurationMs:R,retryCount:this.totalRetryCount},pe=de&&de.message||((ce=Y.toString)===null||ce===void 0?void 0:ce.call(Y))||"";ae.meetingDurationMs===0?(ae.meetingErrorMessage=pe,delete ae.meetingDurationMs,delete ae.attendeePresenceDurationMs,delete ae.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",ae)):Y.isFailure()||Y.isAudioConnectionFailure()?(ae.meetingErrorMessage=pe,this.eventController.publishEvent("meetingFailed",ae)):this.eventController.publishEvent("meetingEnded",ae)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const Y=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(Y)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(Y,de){const ce=this._reconnectController.retryWithBackoff(()=>h(this,void 0,void 0,function*(){this.sessionStateController.state()===k.default.NotConnected?this.sessionStateController.perform(M.default.Connect,()=>{this.actionConnect(!0)}):this.sessionStateController.perform(M.default.Reconnect,()=>{this.actionReconnect(Y)}),this.totalRetryCount+=1}),()=>{this.logger.info("canceled retry")});return ce||this.sessionStateController.perform(M.default.Fail,()=>{this.actionDisconnect(Y,!1,de)}),ce}actionReconnect(Y){return h(this,void 0,void 0,function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver(de=>{mt.Maybe.of(de.audioVideoDidStartConnecting).map(ce=>ce.bind(de)(!0))})),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset();try{yield new Ae.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new en.default(this.logger,new Ae.default(this.logger,"Media",[new q.default(this.meetingSessionContext),new Ae.default(this.logger,"Signaling",[new Ue.default(this.meetingSessionContext),new Ye.default(this.meetingSessionContext)]),new we.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new We.default(this.meetingSessionContext),new en.default(this.logger,new Ae.default(this.logger,"UpdateSession",[new H.default(this.meetingSessionContext),new ue.default(this.meetingSessionContext),new $t.default(this.meetingSessionContext),new Pe.default(this.meetingSessionContext),new Ft.default(this.meetingSessionContext),new rt.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(M.default.FinishConnecting,()=>{if(this.eventController){const{signalingOpenDurationMs:de,poorConnectionCount:ce,startTimeMs:De,iceGatheringDurationMs:Ie,attendeePresenceDurationMs:Le,meetingStartDurationMs:fe}=this.meetingSessionContext,ge={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-De),meetingStatus:S.default[Y.statusCode()],signalingOpenDurationMs:de,iceGatheringDurationMs:Ie,attendeePresenceDurationMs:Le,poorConnectionCount:ce,meetingStartDurationMs:fe,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",ge)}this.actionFinishConnecting()})}catch(de){this.sessionStateController.perform(M.default.FinishConnecting,()=>{this.logger.info("failed to reconnect audio-video session");const ce=new p.default(this.getMeetingStatusCode(de)||S.default.TaskFailed);this.handleMeetingSessionStatus(ce,de)})}this.connectionHealthData.setConnectionStartTime()})}wrapTaskName(Y){return`${Y}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(Y){const de=/the meeting status code: (\d+)/.exec(Y&&Y.message);return de&&de.length>1?Number.parseInt(de[1],10):null}enforceBandwidthLimitationForSender(Y){return h(this,void 0,void 0,function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(Y)})}handleMeetingSessionStatus(Y,de){if(this.logger.info(`handling status: ${S.default[Y.statusCode()]}`),Y.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(Y),Y.statusCode()===S.default.IncompatibleSDP)return this.restartLocalVideo(()=>{this.logger.info("handled incompatible SDP by attempting to restart video")}),!0;if(Y.statusCode()===S.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver(ce=>{mt.Maybe.of(ce.videoSendDidBecomeUnavailable).map(De=>De.bind(ce)())}),!1;if(Y.statusCode()===S.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver(ce=>{mt.Maybe.of(ce.audioVideoWasDemotedFromPrimaryMeeting).map(De=>De.bind(ce)(Y))}),!1;if(Y.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(Y.isFailure()||Y.isTerminal())&&this.meetingSessionContext.reconnectController){const ce=this.reconnect(Y,de);return ce?this.logger.warn(`will retry due to status code ${S.default[Y.statusCode()]}${de?` and error: ${de.message}`:""}`):this.logger.error(`failed with status code ${S.default[Y.statusCode()]}${de?` and error: ${de.message}`:""}`),ce}return!1}setVideoMaxBandwidthKbps(Y){if(Y<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${Y} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(Y)),this.maxUplinkBandwidthKbps=Y}handleHasBandwidthPriority(Y){return h(this,void 0,void 0,function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink){this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(Y),yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();return}const de=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(Y);const ce=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();de!==ce&&(this.logger.info(`video send bandwidth priority ${Y} max has changed from ${de} kbps to ${ce} kbps`),yield this.enforceBandwidthLimitationForSender(ce))}})}pauseReceivingStream(Y){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([Y])}resumeReceivingStream(Y){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([Y])}setVideoCodecSendPreferences(Y){this.videoSendCodecPreferences=Y,this.meetingSessionContext.videoSendCodecPreferences=Y,this.sessionStateController.state()!==k.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:Y}=this.meetingSessionContext;if(!Y)return this.logger.info("meeting has not started"),[];const de=this.configuration.credentials.attendeeId;return Y.allVideoSendingSourcesExcludingSelf(de)}encodingSimulcastLayersDidChange(Y){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver(de=>{mt.Maybe.of(de.encodingSimulcastLayersDidChange).map(ce=>ce.bind(de)(Y))})}promoteToPrimaryMeeting(Y){return this.actionPromoteToPrimaryMeeting(Y)}actionPromoteToPrimaryMeeting(Y){return h(this,void 0,void 0,function*(){let de=new p.default(S.default.SignalingRequestFailed);return yield new Ae.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new en.default(this.logger,new Tt.default(this.meetingSessionContext,Y,ce=>{de=ce}),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=de.statusCode()===S.default.OK,de})}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver(Y=>{mt.Maybe.of(Y.audioVideoWasDemotedFromPrimaryMeeting).map(de=>de.bind(Y)(new p.default(S.default.OK)))})}videoInputDidChange(Y){return h(this,void 0,void 0,function*(){if(this.logger.info("Receive a video input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating video input because there is no active meeting and peer connection");return}this._videoTileController.hasStartedLocalVideoTile()&&(Y?yield this.replaceLocalVideo(Y):this._videoTileController.stopLocalVideoTile())})}audioInputDidChange(Y){return h(this,void 0,void 0,function*(){if(this.logger.info("Receive an audio input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating audio input because there is no active meeting and peer connection");return}if(!Y)try{Y=yield this.mediaStreamBroker.acquireAudioInputStream()}catch{this.logger.error("Could not acquire audio track from mediaStreamBroker");return}yield this.replaceLocalAudio(Y)})}constructor(Y,de,ce,De,Ie,Le){this._audioProfile=new e.default,this.connectionHealthData=new i.default,this.observerQueue=new Set,this.meetingSessionContext=new oe.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.destroyed=!1,this._logger=de,this.sessionStateController=new L.default(this._logger),this._configuration=Y,this._webSocketAdapter=ce,this._realtimeController=new I.default(De),this._realtimeController.realtimeSetLocalAttendeeId(Y.credentials.attendeeId,Y.credentials.externalUserId),this._mediaStreamBroker=De,this._reconnectController=Ie,this._videoTileController=new _e.default(new Oe.default,this,this._logger),this._audioMixController=new n.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=Le}},"DefaultAudioVideoController");l.default=Ce,Ce.MIN_VOLUME_DECIBELS=-42,Ce.MAX_VOLUME_DECIBELS=-14,Ce.PING_PONG_INTERVAL_MS=1e4},578358:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(252383)),m=u(f(491799)),h=u(f(73145)),a=u(f(66146)),r=u(f(416570)),n=u(f(40834)),e=u(f(91572)),t=u(f(407833)),i=u(f(700804)),o=u(f(146253)),c=u(f(19071)),p=u(f(493783));let S=s(class extends p.default{setAudioProfile(y){}start(){}stop(){}promoteToPrimaryMeeting(y){return Promise.resolve(new e.default(t.default.OK))}demoteFromPrimaryMeeting(){}constructor(y){const E=new r.default;E.meetingId="",E.externalMeetingId="",E.credentials=new n.default,E.credentials.attendeeId="",E.credentials.joinToken="",E.urls=new i.default,E.urls.turnControlURL="",E.urls.audioHostURL="",E.urls.signalingURL="wss://localhost/";const I=new h.default;super(y||E,I,new c.default(new h.default),new a.default,new o.default(0,new g.default(0,0,0)),new m.default(y||E,I))}},"NoOpAudioVideoController");l.default=S},299495:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(h,a,r,n){function e(t){return t instanceof r?t:new r(function(i){i(t)})}return s(e,"adopt"),new(r||(r=Promise))(function(t,i){function o(S){try{p(n.next(S))}catch(d){i(d)}}s(o,"fulfilled");function c(S){try{p(n.throw(S))}catch(d){i(d)}}s(c,"rejected");function p(S){S.done?t(S.value):e(S.value).then(o,c)}s(p,"step"),p((n=n.apply(h,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const g=f(150197);let m=s(class{addObserver(a){this.audioVideoController.addObserver(a),this.trace("addObserver")}removeObserver(a){this.audioVideoController.removeObserver(a),this.trace("removeObserver")}setAudioProfile(a){this.trace("setAudioProfile",a),this.audioVideoController.setAudioProfile(a)}start(a){this.audioVideoController.start(a),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(a){return this.trace("getRTCPeerConnectionStats",a?a.id:null),this.audioVideoController.getRTCPeerConnectionStats(a)}bindAudioElement(a){const r=this.audioMixController.bindAudioElement(a);return this.trace("bindAudioElement",a.id,r),r}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(a){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(a)}removeAudioMixObserver(a){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(a)}bindVideoElement(a,r){this.videoTileController.bindVideoElement(a,r),this.trace("bindVideoElement",{tileId:a,videoElementId:r.id})}unbindVideoElement(a){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.videoTileController.unbindVideoElement(a,r),this.trace("unbindVideoElement",{tileId:a,cleanUpVideoElement:r})}startLocalVideoTile(){const a=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,a),a}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const a=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,a),a}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const a=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),a}pauseVideoTile(a){this.videoTileController.pauseVideoTile(a),this.trace("pauseVideoTile",a)}unpauseVideoTile(a){this.videoTileController.unpauseVideoTile(a),this.trace("unpauseVideoTile",a)}getVideoTile(a){const r=this.videoTileController.getVideoTile(a);return this.trace("getVideoTile",a),r}getAllRemoteVideoTiles(){const a=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),a}getAllVideoTiles(){const a=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),a}addVideoTile(){const a=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,a.state()),a}removeVideoTile(a){this.videoTileController.removeVideoTile(a),this.trace("removeVideoTile",a)}removeVideoTilesByAttendeeId(a){const r=this.videoTileController.removeVideoTilesByAttendeeId(a);return this.trace("removeVideoTilesByAttendeeId",a,r),r}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(a){const r=this.videoTileController.captureVideoTile(a);return this.trace("captureVideoTile",a),r}realtimeSubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(a),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(a),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSetCanUnmuteLocalAudio(a),this.trace("realtimeSetCanUnmuteLocalAudio",a)}realtimeSubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const a=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,a),a}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const a=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),a}realtimeSubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const a=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),a}realtimeSubscribeToVolumeIndicator(a,r){this.realtimeController.realtimeSubscribeToVolumeIndicator(a,r),this.trace("realtimeSubscribeToVolumeIndicator",a)}realtimeUnsubscribeFromVolumeIndicator(a,r){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(a,r),this.trace("realtimeUnsubscribeFromVolumeIndicator",a,r)}realtimeSubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(a),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(a),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(a,r,n){this.realtimeController.realtimeSendDataMessage(a,r,n),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(a,r){this.realtimeController.realtimeSubscribeToReceiveDataMessage(a,r),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(a){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(a),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(a){this.realtimeController.realtimeSubscribeToFatalError(a),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(a){this.realtimeController.realtimeUnsubscribeToFatalError(a),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(a,r,n,e){this.audioVideoController.activeSpeakerDetector.subscribe(a,r,n,e),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(a){this.audioVideoController.activeSpeakerDetector.unsubscribe(a),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const r=yield this.deviceController.listAudioInputDevices(a);return this.trace("listAudioInputDevices",a,r),r})}listVideoInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const r=yield this.deviceController.listVideoInputDevices(a);return this.trace("listVideoInputDevices",a,r),r})}listAudioOutputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const r=yield this.deviceController.listAudioOutputDevices(a);return this.trace("listAudioOutputDevices",a,r),r})}startAudioInput(a){return u(this,void 0,void 0,function*(){return this.trace("startAudioInput",a),this.deviceController.startAudioInput(a)})}stopAudioInput(){return u(this,void 0,void 0,function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()})}startVideoInput(a){return u(this,void 0,void 0,function*(){return g.isVideoTransformDevice(a)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",a),this.deviceController.startVideoInput(a)})}stopVideoInput(){return u(this,void 0,void 0,function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()})}chooseAudioOutput(a){const r=this.deviceController.chooseAudioOutput(a);return this.trace("chooseAudioOutput",a),r}addDeviceChangeObserver(a){this.deviceController.addDeviceChangeObserver(a),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(a){this.deviceController.removeDeviceChangeObserver(a),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const a=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),a}startVideoPreviewForVideoInput(a){this.deviceController.startVideoPreviewForVideoInput(a),this.trace("startVideoPreviewForVideoInput",a.id)}stopVideoPreviewForVideoInput(a){this.deviceController.stopVideoPreviewForVideoInput(a),this.trace("stopVideoPreviewForVideoInput",a.id)}setDeviceLabelTrigger(a){this.deviceController.setDeviceLabelTrigger(a),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(a){const r=this.deviceController.mixIntoAudioInput(a);return this.trace("mixIntoAudioInput",a.id),r}chooseVideoInputQuality(a,r,n){this.deviceController.chooseVideoInputQuality(a,r,n),this.trace("chooseVideoInputQuality",{width:a,height:r,frameRate:n})}setVideoMaxBandwidthKbps(a){this.audioVideoController.setVideoMaxBandwidthKbps(a),this.trace("setVideoMaxBandwidthKbps",a)}setVideoCodecSendPreferences(a){this.audioVideoController.setVideoCodecSendPreferences(a),this.trace("setVideoCodecSendPreferences",a)}getVideoInputQualitySettings(){const a=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),a}setContentAudioProfile(a){this.trace("setContentAudioProfile",a),this.contentShareController.setContentAudioProfile(a)}enableSimulcastForContentShare(a,r){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(a,r)}enableSVCForContentShare(a){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(a)}startContentShare(a){const r=this.contentShareController.startContentShare(a);return this.trace("startContentShare"),r}startContentShareFromScreenCapture(a,r){const n=this.contentShareController.startContentShareFromScreenCapture(a,r);return this.trace("startContentShareFromScreenCapture"),n}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(a){this.contentShareController.addContentShareObserver(a),this.trace("addContentShareObserver")}removeContentShareObserver(a){this.contentShareController.removeContentShareObserver(a),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(a){this.contentShareController.setContentShareVideoCodecPreferences(a),this.trace("setContentShareVideoCodecPreferences")}trace(a,r,n){const e=this.audioVideoController.configuration.meetingId,t=this.audioVideoController.configuration.credentials.attendeeId;let i=`API/DefaultAudioVideoFacade/${e}/${t}/${a}`;typeof r<"u"&&(i+=` ${JSON.stringify(r)}`),typeof n<"u"&&(i+=` -> ${JSON.stringify(n)}`),this.audioVideoController.logger.info(i)}getRemoteVideoSources(){const a=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,a),a}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(a){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const r=this.audioVideoController.promoteToPrimaryMeeting(a);return this.trace("promoteToPrimaryMeeting",null,r),r}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(a){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}constructor(a,r,n,e,t,i){this.audioVideoController=a,this.videoTileController=r,this.realtimeController=n,this.audioMixController=e,this.deviceController=t,this.contentShareController=i}},"DefaultAudioVideoFacade");l.default=m},298327:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(458857)),h=f(39833);let a=s(class extends m.default{drawImageWithMask(n,e){const t=this.blurredImage,{canvasCtx:i,targetCanvas:o}=this,{width:c,height:p}=o;if(!e||!t){i.clearRect(0,0,c,p);return}this.scaledCanvas.getContext("2d").putImageData(e,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),i.save(),i.clearRect(0,0,c,p),i.drawImage(this.scaledCanvas,0,0,c,p),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,c,p),i.globalCompositeOperation="destination-over",i.drawImage(this.blurCanvas,0,0,c,p),i.restore()}setBlurStrength(n){if(super.setBlurStrength(n),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=h.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(n){if(this.logger.info(`received initialize message: ${this.stringify(n)}`),!n.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(n){this.blurredImage=n.payload.blurOutput,super.handlePredict(n)}destroy(){const n=Object.create(null,{destroy:{get:()=>super.destroy}});var e;return u(this,void 0,void 0,function*(){n.destroy.call(this),(e=this.blurCanvas)===null||e===void 0||e.remove(),this.blurCanvas=void 0})}constructor(n,e){super(n,e),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}},"BackgroundBlurProcessorBuiltIn");l.default=a},458857:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(517842)),h=f(39833),a=g(f(135081));let r=s(class extends m.default{validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(t,0,0);const{canvasCtx:o,targetCanvas:c}=this,{width:p,height:S}=c;o.save(),o.clearRect(0,0,p,S),o.drawImage(this.scaledCanvas,0,0,p,S),o.globalCompositeOperation="source-in",o.drawImage(e,0,0,p,S),o.globalCompositeOperation="destination-over",o.filter=`blur(${this.blurAmount}px)`,o.drawImage(e,0,0,c.width,c.height),o.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=h.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return u(this,void 0,void 0,function*(){const e=document.createElement("canvas"),t=e.getContext("2d").filter!==void 0;return e.remove(),t})}setEventController(e){this.eventController?this.eventController=e:(this.eventController=e,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const e={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",e)}constructor(e,t){super("background blur",e,t,new a.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: ${this.stringify(t)}`)}},"BackgroundBlurProcessorProvided");l.default=r},39833:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.BlurStrengthMapper=void 0;const f={LOW:7,MEDIUM:15,HIGH:30};let u=s(class{static getBlurAmount(m,h){if(m<=0)throw new Error(`invalid value for blur strength: ${m}`);return Math.round(m*h.height/this.BLUR_STRENGTH_DIVISOR)}},"BlurStrengthMapper");l.BlurStrengthMapper=u,u.BLUR_STRENGTH_DIVISOR=540,l.default=f},896226:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(c,p,S,d){function y(E){return E instanceof S?E:new S(function(I){I(E)})}return s(y,"adopt"),new(S||(S=Promise))(function(E,I){function A(k){try{M(d.next(k))}catch(w){I(w)}}s(A,"fulfilled");function L(k){try{M(d.throw(k))}catch(w){I(w)}}s(L,"rejected");function M(k){k.done?E(k.value):y(k.value).then(A,L)}s(M,"step"),M((d=d.apply(c,p||[])).next())})},g=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(611430)),h=g(f(356647)),a=g(f(343500)),r=g(f(572618)),n=g(f(298327)),e=g(f(458857)),t=g(f(39833));let i=s(class extends r.default{setBlurStrength(){}loadAssets(){return u(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}},"NoOpBackgroundBlurProcessor"),o=s(class fa extends m.default{static create(p,S){return u(this,void 0,void 0,function*(){p=fa.resolveSpec(p),S=fa.resolveOptions(S);const{logger:d}=S,y=yield fa.isSupported(p,S);if(d.info(`processor is ${y?"":"not"} supported`),!y)return d.warn("Using no-op processor because background blur is not supported"),new i;let E;return(yield e.default.isSupported())?(d.info("Using browser-provided background blur"),E=new e.default(p,S)):(d.info("Using built-in background blur"),E=new n.default(p,S)),yield E.loadAssets(),E})}static resolveOptions(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=Object.assign({},p);return S.blurStrength||(S.blurStrength=t.default.MEDIUM),S.logger||(S.logger=new h.default("BackgroundBlurProcessor",a.default.INFO)),S=super.resolveOptions(S),S}static isSupported(p,S){return p=fa.resolveSpec(p),S=fa.resolveOptions(S),super.isSupported(p,S)}},"BackgroundBlurVideoFrameProcessor");l.default=o},135081:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(742997));let m=s(class extends g.default{},"BackgroundBlurVideoFrameProcessorDelegate");l.default=m},665572:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class fS{static builder(){return new fS}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const g={height:144,width:256,range:[0,1],channels:3},m={height:144,width:256,range:[0,1],channels:1},h="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=h,this.input=g,this.output=m,this}withPath(g){return this.path=g,this}withInput(g){return this.input=g,this}withOutput(g){return this.output=g,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}constructor(){this.path=null,this.input=null,this.output=null}},"ModelSpecBuilder");l.default=f},65007:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=.8;let u=s(class{reportEvent(m){const h=m-this.lastReportedEventTimestamp;if(h>=this.reportingPeriodMillis){const a=this.filterCount,r=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=m,this.framerate===0||a===0)return;const n=Math.round(r/a),e=Math.round(this.framerate*(h/1e3))-a,t=Math.round(100*r/h);n>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:e,avgFilterDurationMillis:n,framerate:this.framerate,periodMillis:h}),t>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:t,filterMillis:r,periodMillis:h})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*f)}frameReceived(m){m!==this.framerate&&(this.framerate=m,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const h=Date.now();this.reportEvent(h)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}constructor(m,h,a,r){this.delegate=m,this.reportingPeriodMillis=h,this.filterCPUUtilization=a,this.logger=r,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}},"BackgroundFilterFrameCounter");l.default=u},517842:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(t,i,o,c){function p(S){return S instanceof o?S:new o(function(d){d(S)})}return s(p,"adopt"),new(o||(o=Promise))(function(S,d){function y(A){try{I(c.next(A))}catch(L){d(L)}}s(y,"fulfilled");function E(A){try{I(c.throw(A))}catch(L){d(L)}}s(E,"rejected");function I(A){A.done?S(A.value):p(A.value).then(y,E)}s(I,"step"),I((c=c.apply(t,i||[])).next())})},g=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.BackgroundFilterMonitor=void 0;const m=f(289927),h=g(f(274246)),a=g(f(65007));let r=s(class{whenNext(){return this.promise||(this.promise=new Promise(i=>this.resolve=i)),this.promise}next(i){this.value=i,this.resolve(i),delete this.promise}constructor(){this.value=void 0,this.resolve=null}},"DeferredObservable"),n=s(class Mu{static createWorkerPromise(){const i={resolve:null,reject:null,promise:null};return i.promise=new Promise((o,c)=>{i.resolve=o,i.reject=c}),i}validateSpec(i){if(!i)throw new Error("processor has null spec");if(!i.model)throw new Error("processor spec has null model");if(!i.paths)throw new Error("processor spec has null paths")}validateOptions(i){if(!i)throw new Error("processor has null options");if(!i.logger)throw new Error("processor has null options - logger");if(!i.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!i.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(i){this.videoFramesPerFilterUpdate=1,this.frameCounter=new a.default(this.delegate,i.reportingPeriodMillis,i.filterCPUUtilization,this.logger),this.cpuMonitor=new e(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(i){return JSON.stringify(i,null,2)}handleInitialize(i){if(this.logger.info(`received initialize message: ${this.stringify(i)}`),!i.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const o=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:o.path,inputHeight:o.input.height,inputWidth:o.input.width,inputChannels:4,modelRangeMin:o.input.range[0],modelRangeMax:o.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(i){if(this.logger.info(`received load model message: ${this.stringify(i)}`),i.payload!==2){this.logger.error("failed to load model! status: "+i.payload),this.loadModelPromise.reject(new Error("failed to load model! status: "+i.payload));return}this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(i){this.mask$.next(i.payload.output)}handleWorkerEvent(i){const o=i.data;switch(o.msg){case"initialize":this.handleInitialize(o);break;case"loadModel":this.handleLoadModel(o);break;case"predict":this.handlePredict(o);break;default:this.logger.info(`unexpected event msg: ${this.stringify(o)}`);break}}loadAssets(){return u(this,void 0,void 0,function*(){this.logger.info("start initializing the processor");try{this.worker=yield m.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",i=>this.handleWorkerEvent(i)),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(i){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${i.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)})}process(i){return u(this,void 0,void 0,function*(){if(this.destroyed)return i;this.frameCounter.frameReceived(i[0].framerate),this.cpuMonitor.frameReceived();const o=i[0].asCanvasElement();if(!o)return i;if(!this.modelInitialized)return i[0]=this.canvasVideoFrameBuffer,i;const c=o.width,p=o.height;if(c===0||p===0)return i;this.sourceWidth===0&&(this.sourceWidth=c,this.sourceHeight=p,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),(this.sourceWidth!==c||this.sourceHeight!==p)&&(this.sourceWidth=c,this.sourceHeight=p,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let S=this.mask$.value;const d=this.spec.model.input.width/o.width,y=this.spec.model.input.height/o.height;this.scaledCanvas===void 0&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const E=this.scaledCanvas.getContext("2d");E.save(),E.scale(d,y),E.drawImage(o,0,0),E.restore();const I=E.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const A=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:I},[I.data.buffer]),S=yield A}this.destroyed||this.drawImageWithMask(o,S)}catch(S){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${S}`),i}finally{this.frameCounter.filterComplete(),this.frameNumber++}return i[0]=this.canvasVideoFrameBuffer,i})}updateVideoFramesPerFilterUpdate(i){i!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=i,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var i,o,c,p;return u(this,void 0,void 0,function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),(i=this.worker)===null||i===void 0||i.postMessage({msg:"destroy"}),(o=this.worker)===null||o===void 0||o.postMessage({msg:"stop"}),(c=this.targetCanvas)===null||c===void 0||c.remove(),this.targetCanvas=void 0,(p=this.scaledCanvas)===null||p===void 0||p.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)})}constructor(i,o,c,p,S){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new h.default(this.targetCanvas),this.mask$=new r,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=Mu.createWorkerPromise(),this.loadModelPromise=Mu.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=i,this.validateSpec(o),this.validateOptions(c),this.spec=o,this.logger=c.logger,this.delegate=p,this.initCPUMonitor(c),this.eventController=S}},"BackgroundFilterProcessor");l.default=n;let e=s(class{filterCPUUtilizationHigh(){const i=Date.now();i-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=i,this.observer.reduceCPUUtilization())}frameReceived(){const i=Date.now();i-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis*2&&(this.lastCPUChangeTimestamp=i,this.observer.increaseCPUUtilization())}constructor(i,o){this.monitoringPeriodMillis=i,this.observer=o,this.lastCPUChangeTimestamp=0}},"BackgroundFilterMonitor");l.BackgroundFilterMonitor=e},611430:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(c,p,S,d){function y(E){return E instanceof S?E:new S(function(I){I(E)})}return s(y,"adopt"),new(S||(S=Promise))(function(E,I){function A(k){try{M(d.next(k))}catch(w){I(w)}}s(A,"fulfilled");function L(k){try{M(d.throw(k))}catch(w){I(w)}}s(L,"rejected");function M(k){k.done?E(k.value):y(k.value).then(A,L)}s(M,"step"),M((d=d.apply(c,p||[])).next())})},g=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const m=f(289927),h=f(915057),a=g(f(665572)),r=g(f(48839)),n=g(f(244504)),e=s(()=>a.default.builder().withSelfieSegmentationDefaults().build(),"CREATE_DEFAULT_MODEL_SPEC"),t="https://static.sdkassets.chime.aws",i={worker:`${t}/bgblur/workers/worker.js`,wasm:`${t}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${t}/bgblur/wasm/_cwt-wasm-simd.wasm`};let o=s(class{static defaultAssetSpec(){const p=n.default.sdkVersionSemVer;return{assetGroup:`sdk-${p.major}.${p.minor}`}}static createUrlWithParams(p,S){const d=new URL(p),y=Object.keys(S);for(const E of y)S[E]!==void 0&&d.searchParams.set(E,S[E]);return d.toString()}static resolveSpec(p){const{paths:S=i,model:d=e(),assetGroup:y=this.defaultAssetSpec().assetGroup,revisionID:E=this.defaultAssetSpec().revisionID}=p||{},I={assetGroup:y,revisionID:E,sdk:encodeURIComponent(n.default.sdkVersion),ua:encodeURIComponent(n.default.sdkUserAgentLowResolution)};return S.worker=this.createUrlWithParams(S.worker,I),S.wasm=this.createUrlWithParams(S.wasm,I),S.simd=this.createUrlWithParams(S.simd,I),d.path=this.createUrlWithParams(d.path,I),{paths:S,model:d,assetGroup:y,revisionID:E}}static resolveOptions(p){p.reportingPeriodMillis||(p.reportingPeriodMillis=1e3);const S=30;return p.filterCPUUtilization?(p.filterCPUUtilization<0||p.filterCPUUtilization>100)&&(p.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${S} percent`),p.filterCPUUtilization=S):p.filterCPUUtilization=S,p}static isSupported(p,S){const{logger:d}=S;return typeof globalThis>"u"?(d.info("Browser does not have globalThis."),Promise.resolve(!1)):new r.default().supportsBackgroundFilter()?h.supportsWASM(globalThis,d)?this.supportsBackgroundFilter(globalThis,p,d):(d.info("Browser does not support WASM."),Promise.resolve(!1)):(d.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,S=arguments.length>1?arguments[1]:void 0,d=arguments.length>2?arguments[2]:void 0;return u(this,void 0,void 0,function*(){if(!h.supportsWorker(p,d))return d.info("Browser does not support web workers."),!1;const y=S.paths.worker;try{const E=yield m.loadWorker(y,"BackgroundFilterWorker",{},null);try{E.terminate()}catch(I){d.info(`Failed to terminate worker. ${I.message}`)}return!0}catch(E){return d.info(`Failed to fetch and instantiate test worker ${E.message}`),!1}})}},"BackgroundFilterVideoFrameProcessor");l.default=o},742997:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{addObserver(g){this.observers.add(g)}removeObserver(g){this.observers.delete(g)}filterFrameDurationHigh(g){var m;for(const h of this.observers)(m=h.filterFrameDurationHigh)===null||m===void 0||m.call(h,g)}filterCPUUtilizationHigh(g){var m;for(const h of this.observers)(m=h.filterCPUUtilizationHigh)===null||m===void 0||m.call(h,g)}constructor(){this.observers=new Set}},"BackgroundFilterVideoFrameProcessorDelegate");l.default=f},99216:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(517842)),h=g(f(737919));let a=s(class Pu extends m.default{setImageBlob(n){return u(this,void 0,void 0,function*(){this.replacementBlob=n,this.replacementImage=yield Pu.loadImage(this.createReplacementObjectUrl())})}initOnFirstExecution(){}drawImageWithMask(n,e){e||(e=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(e,0,0);const{canvasCtx:i,targetCanvas:o}=this,{width:c,height:p}=o;i.save(),i.clearRect(0,0,c,p),i.drawImage(this.scaledCanvas,0,0,c,p),i.globalCompositeOperation="source-in",i.drawImage(n,0,0,c,p),i.globalCompositeOperation="destination-over",i.drawImage(this.replacementImage,0,0,o.width,o.height),i.restore()}static loadImageExecutor(n,e,t){const i=new Image;i.crossOrigin="Anonymous",i.addEventListener("load",()=>{n(i)},!1),i.addEventListener("error",o=>{e(new Error(`Could not load replacement image ${i.src}: ${o.message}`))},!1),i.src=t}static loadImage(n){return u(this,void 0,void 0,function*(){return new Promise((e,t)=>this.loadImageExecutor(e,t,n))})}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const n=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return u(this,void 0,void 0,function*(){this.replacementImage=yield Pu.loadImage(this.createReplacementObjectUrl()),n.loadAssets.call(this)})}addObserver(n){this.delegate.addObserver(n)}removeObserver(n){this.delegate.removeObserver(n)}destroy(){const n=Object.create(null,{destroy:{get:()=>super.destroy}});return u(this,void 0,void 0,function*(){n.destroy.call(this),this.revokeReplacementObjectUrl()})}setEventController(n){this.eventController?this.eventController=n:(this.eventController=n,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const n={backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",n)}constructor(n,e){super("background replacement",n,e,new h.default),this.replacementBlob=e.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: ${this.stringify(e)}`)}},"BackgroundReplacementFilter");l.default=a},196252:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(i,o,c,p){function S(d){return d instanceof c?d:new c(function(y){y(d)})}return s(S,"adopt"),new(c||(c=Promise))(function(d,y){function E(L){try{A(p.next(L))}catch(M){y(M)}}s(E,"fulfilled");function I(L){try{A(p.throw(L))}catch(M){y(M)}}s(I,"rejected");function A(L){L.done?d(L.value):S(L.value).then(E,I)}s(A,"step"),A((p=p.apply(i,o||[])).next())})},g=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(611430)),h=g(f(356647)),a=g(f(343500)),r=g(f(572618)),n=g(f(99216));let e=s(class extends r.default{loadAssets(){return u(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}setImageBlob(){return u(this,void 0,void 0,function*(){})}},"NoOpBackgroundReplacementProcessor"),t=s(class hS extends m.default{static create(o,c){return u(this,void 0,void 0,function*(){o=this.resolveSpec(o),c=this.resolveOptions(c),yield this.resolveOptionsAsync(c);const{logger:p}=c;if(!(yield hS.isSupported(o,c)))return p.warn("Using no-op processor because background replacement is not supported"),new e;p.info("Using background replacement filter");const d=new n.default(o,c);return yield d.loadAssets(),d})}static resolveOptions(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const c=Object.assign({},o);return c.logger||(c.logger=new h.default("BackgroundReplacementProcessor",a.default.INFO)),super.resolveOptions(c)}static resolveOptionsAsync(o){return u(this,void 0,void 0,function*(){if(!o.imageBlob){const c=document.createElement("canvas");c.width=100,c.height=100;const p=c.getContext("2d");p.fillStyle="blue",p.fillRect(0,0,100,100);const S=yield new Promise(d=>{c.toBlob(d)});o.imageBlob=S}})}static isSupported(o,c){const p=Object.create(null,{isSupported:{get:()=>super.isSupported}});return u(this,void 0,void 0,function*(){o=this.resolveSpec(o),c=this.resolveOptions(c),yield this.resolveOptionsAsync(c);const S=c.imageBlob,d=URL.createObjectURL(S);try{yield n.default.loadImage(d)}catch(y){return c.logger.info(`Failed to fetch load replacement image ${y.message}`),!1}finally{URL.revokeObjectURL(d)}return p.isSupported.call(this,o,c)})}},"BackgroundReplacementVideoFrameProcessor");l.default=t},737919:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(742997));let m=s(class extends g.default{},"BackgroundReplacementVideoFrameProcessorDelegate");l.default=m},252383:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{reset(){this.currentRetry=0}nextBackoffAmountMs(){const g=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,g}constructor(g,m,h){this.fixedWaitMs=g,this.shortBackoffMs=m,this.longBackoffMs=h,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}},"FullJitterBackoff");l.default=f},675721:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(252383)),m=u(f(985129));let h=s(class{create(){return new g.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(r){return new m.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,r)}constructor(r,n,e){this.fixedWaitMs=r,this.shortBackoffMs=n,this.longBackoffMs=e}},"FullJitterBackoffFactory");l.default=h},985129:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(252383));let m=s(class extends g.default{nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}constructor(a,r,n,e){super(a,r,n),this.limit=e,this.attempts=0}},"FullJitterLimitedBackoff");l.default=m},48839:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const g=f(248468),m=f(877232);let h=s(class Ru{version(){return this.browser.version}majorVersion(){return this.version()!==null?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const r of this.chromeLike)if(r===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const r of this.webkitBrowsers)if(r===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return navigator.userAgent.indexOf("Windows")!==-1}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=Ru.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=Ru.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return!(this.name()==="safari"&&this.majorVersion()===15||!this.supportsCanvasCapturedStreamPlayback())}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&this.engine()==="Blink"&&this.engineMajorVersion()>=111}supportsAudioRedundancy(){return this.hasChromiumWebRTC()?this.engineMajorVersion()>=107:!this.hasFirefoxWebRTC()}requiresResolutionAlignment(r,n){return this.isAndroid()&&this.isPixel3()?[Math.ceil(r/64)*64,Math.ceil(n/64)*64]:[r,n]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return this.browser.name==="chromium-webview"}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||this.browser.name==="firefox"&&this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const r=[];for(const n in this.browserSupport)r.push(`${this.browserName[n]} ${this.browserSupport[n]}+`);return r.join(", ")}supportedVideoCodecs(){return u(this,void 0,void 0,function*(){const r=new RTCPeerConnection;return r.addTransceiver("video",{direction:"inactive",streams:[]}),(yield r.createOffer({offerToReceiveVideo:!0})).sdp.split(`\r
`).filter(n=>n.includes("a=rtpmap:")).map(n=>n.replace(/.* /,"").replace(/\/.*/,"")).filter((n,e,t)=>t.indexOf(n)===e).filter(n=>n!=="rtx"&&n!=="red"&&n!=="ulpfec")})}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return(this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox())&&(this.version()==="15.1.0"||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return this.browser.name==="ios"||this.browser.name==="ios-webview"||this.browser.name==="safari"&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return this.browser.name==="safari"||this.isIOSSafari()}isFirefox(){return this.browser.name==="firefox"}isIOSFirefox(){return this.browser.name==="fxios"}isIOSChrome(){return this.browser.name==="crios"}isChrome(){return this.browser.name==="chrome"}isEdge(){return this.browser.name==="edge-chromium"}isIOSEdge(){return this.browser.name==="edge-ios"}isSamsungInternet(){return this.browser.name==="samsung"}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=g.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new m.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}},"DefaultBrowserBehavior");l.default=h,h.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,h.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},725462:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const g=f(459746),m=u(f(19933)),h=u(f(150224)),a=u(f(435870));let r=s(class pS{getMetricMap(e,t){switch(e){case h.default.AUDIO:switch(t){case m.default.UPSTREAM:return this.audioUpstreamMetricMap;case m.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case h.default.VIDEO:switch(t){case m.default.UPSTREAM:return this.videoUpstreamMetricMap;case m.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){if(this.overriddenObservableMetrics.has(e))return this.overriddenObservableMetrics.get(e);const t=this.observableMetricSpec[e],o=this.getMetricMap(t.media,t.dir)[t.source],{transform:c,source:p}=o;if(t.hasOwnProperty("media"))for(const S in this.streamMetricReports){const d=this.streamMetricReports[S];if(d.direction===t.dir&&d.mediaType===t.media)return c(p||t.source,Number(S))}else return c(p||t.source);return 0}getObservableVideoMetricValue(e,t){const i=this.observableVideoMetricSpec[e],c=this.getMetricMap(i.media,i.dir)[i.source],{transform:p,source:S}=c;return p(S||i.source,t)}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===h.default.VIDEO){const i={};for(const S in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[S].dir===this.streamMetricReports[t].direction){const d=this.getObservableVideoMetricValue(S,Number(t));isNaN(d)||(i[S]=d)}const o=this.streamMetricReports[t].groupId,c=this.streamMetricReports[t].streamId;let p="";this.videoStreamIndex.attendeeIdForGroupId!==void 0?p=o?this.videoStreamIndex.attendeeIdForGroupId(o):this.selfAttendeeId:p=c?this.videoStreamIndex.attendeeIdForStreamId(c):this.selfAttendeeId,e[p]=e[p]?e[p]:{},e[p][t]=i}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new pS(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.customStatsReports=this.customStatsReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e.overriddenObservableMetrics=this.overriddenObservableMetrics,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug(()=>`Client Metric Report: ${JSON.stringify(e)}`)}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}overrideObservableMetric(e,t){this.overriddenObservableMetrics.set(e,t)}constructor(e,t,i){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=i,this.globalMetricReport=new a.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(o,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;return Number(p.currentMetrics[o])},this.decoderLossPercent=(o,c)=>{const p=this.streamMetricReports[c],S=p.currentMetrics.concealedSamples-(p.previousMetrics.concealedSamples||0),d=p.currentMetrics.totalSamplesReceived-(p.previousMetrics.totalSamplesReceived||0);return d<=0||d-S<=0?0:S/d*100},this.packetLossPercent=(o,c)=>{const p=this.streamMetricReports[c],S=p.currentMetrics[o]-(p.previousMetrics[o]||0),d=p.currentMetrics.packetsLost-(p.previousMetrics.packetsLost||0),y=S+d;return y<=0||d<=0?0:d*100/y},this.jitterBufferMs=(o,c)=>{const p=this.streamMetricReports[c],S=p.currentMetrics.jitterBufferDelay-(p.previousMetrics.jitterBufferDelay||0),d=p.currentMetrics.jitterBufferEmittedCount-(p.previousMetrics.jitterBufferEmittedCount||0);return S<=0||d<=0?0:S/d*1e3},this.countPerSecond=(o,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const d=p.currentMetrics[o]-(p.previousMetrics[o]||0);return d<=0?0:Math.trunc(d/S)},this.bitsPerSecond=(o,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const d=(p.currentMetrics[o]-(p.previousMetrics[o]||0))*8;return d<=0?0:Math.trunc(d/S)},this.secondsToMilliseconds=(o,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;return Number(p.currentMetrics[o]*1e3)},this.averageTimeSpentPerSecondInMilliseconds=(o,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);const d=p.currentMetrics[o]-(p.previousMetrics[o]||0);return d<=0?0:d*1e3/S},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(o,c)=>{const p=this.streamMetricReports[c];let S=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(S<=0)return 0;this.previousTimestampMs<=0&&(S=1);let d=0,y=0;for(const[I,A]of Object.entries(p.previousObjectMetrics[o]))I==="cpu"&&(d=A);for(const[I,A]of Object.entries(p.currentObjectMetrics[o]))I==="cpu"&&(y=A);const E=y-d;return E<=0?0:E*1e3/S},this.isHardwareImplementation=(o,c)=>{const p=this.streamMetricReports[c],S=String(p.currentStringMetrics[o]),d=S.includes("ExternalDecoder")||S.includes("ExternalEncoder")||S.includes("EncodeAccelerator")||S.includes("DecodeAccelerator"),y=S.includes("fallback from");return d&&!y?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:g.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:g.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:g.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:g.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:g.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:g.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:g.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:g.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:g.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:g.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:g.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:g.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:g.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:g.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:g.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:g.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:g.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:g.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:g.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:g.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:g.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:g.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:g.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:g.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:g.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:g.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:g.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:g.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:g.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:g.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:g.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:g.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:g.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:g.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:g.SdkMetric.Type.VIDEO_DROPPED_FPS}},this.streamDimensionMap={encoderImplementation:g.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:g.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:h.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:h.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:h.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:h.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:h.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:h.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:h.default.VIDEO,dir:m.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:h.default.VIDEO,dir:m.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:h.default.AUDIO,dir:m.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:h.default.AUDIO,dir:m.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:h.default.AUDIO,dir:m.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:h.default.AUDIO,dir:m.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:h.default.AUDIO,dir:m.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:h.default.AUDIO,dir:m.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:h.default.VIDEO,dir:m.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:h.default.VIDEO,dir:m.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:h.default.AUDIO,dir:m.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:h.default.AUDIO,dir:m.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:h.default.AUDIO,dir:m.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:h.default.VIDEO,dir:m.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:h.default.AUDIO,dir:m.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}},"ClientMetricReport");l.default=r},19933:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportDirection=void 0;var f;(function(u){u[u.UPSTREAM=0]="UPSTREAM",u[u.DOWNSTREAM=1]="DOWNSTREAM"})(f=l.ClientMetricReportDirection||(l.ClientMetricReportDirection={})),l.default=f},150224:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportMediaType=void 0;var f;(function(u){u[u.AUDIO=0]="AUDIO",u[u.VIDEO=1]="VIDEO"})(f=l.ClientMetricReportMediaType||(l.ClientMetricReportMediaType={})),l.default=f},849333:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"ClientVideoStreamReceivingReport");l.default=f},435870:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"GlobalMetricReport");l.default=f},410779:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}},"RedundantAudioRecoveryMetricReport");l.default=f},168321:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"StreamMetricReport");l.default=f},702577:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(g){this.currentData=g}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const g=this.health();return g!==this.currentHealth?(this.currentHealth=g,g):null}constructor(g,m,h){this.minHealth=g.minHealth,this.maxHealth=g.maxHealth,this.currentHealth=g.initialHealth,this.currentData=m.clone(),this.name=h}},"BaseConnectionHealthPolicy");l.default=f},140426:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class Oo{static isTimestampRecent(g,m){return Date.now()<g+m}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}isConnectionStartRecent(g){return Oo.isTimestampRecent(this.connectionStartTimestampMs,g)}isLastPacketLossRecent(g){return Oo.isTimestampRecent(this.lastPacketLossInboundTimestampMs,g)}isGoodSignalRecent(g){return Oo.isTimestampRecent(this.lastGoodSignalTimestampMs,g)}isWeakSignalRecent(g){return Oo.isTimestampRecent(this.lastWeakSignalTimestampMs,g)}isNoSignalRecent(g){return Oo.isTimestampRecent(this.lastNoSignalTimestampMs,g)}clone(){const g=new Oo;return g.connectionStartTimestampMs=this.connectionStartTimestampMs,g.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,g.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,g.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,g.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,g.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,g.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,g.consecutiveMissedPongs=this.consecutiveMissedPongs,g.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),g.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),g.audioSpeakerDelayMs=this.audioSpeakerDelayMs,g}setConsecutiveMissedPongs(g){this.consecutiveMissedPongs=g}setConsecutiveStatsWithNoPackets(g){this.consecutiveStatsWithNoPackets=g}setConsecutiveStatsWithNoAudioPacketsSent(g){this.consecutiveStatsWithNoAudioPacketsSent=g}setLastPacketLossInboundTimestampMs(g){this.lastPacketLossInboundTimestampMs=g}setLastNoSignalTimestampMs(g){this.lastNoSignalTimestampMs=g}setLastWeakSignalTimestampMs(g){this.lastWeakSignalTimestampMs=g}setLastGoodSignalTimestampMs(g){this.lastGoodSignalTimestampMs=g}setAudioSpeakerDelayMs(g){this.audioSpeakerDelayMs=g}constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}},"ConnectionHealthData");l.default=f},354672:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3}},"ConnectionHealthPolicyConfiguration");l.default=f},583981:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(702577));let m=s(class ir extends g.default{health(){if(this.currentData.isConnectionStartRecent(ir.CONNECTION_WAIT_TIME_MS))return 1;const r=this.currentData.consecutiveStatsWithNoPackets>=ir.CONNECTION_UNHEALTHY_THRESHOLD,n=this.currentData.consecutiveMissedPongs>=ir.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>ir.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const e=this.audioDelayPointsOverMaximum>ir.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return e&&(this.audioDelayPointsOverMaximum=0),r||n||e?(this.logger.warn(`reconnection recommended due to: no packets received: ${r}, missed pongs: ${n}, bad audio delay: ${e}`),0):1}constructor(a,r,n){super(r,n,"Reconnection Health"),this.logger=a,this.audioDelayPointsOverMaximum=0,ir.CONNECTION_UNHEALTHY_THRESHOLD=r.connectionUnhealthyThreshold,ir.CONNECTION_WAIT_TIME_MS=r.connectionWaitTimeMs,ir.MISSED_PONGS_THRESHOLD=r.missedPongsUpperThreshold,ir.MAXIMUM_AUDIO_DELAY_MS=r.maximumAudioDelayMs,ir.MAXIMUM_AUDIO_DELAY_DATA_POINTS=r.maximumAudioDelayDataPoints}},"ReconnectionHealthPolicy");l.default=m},139316:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(702577));let m=s(class extends g.default{isSendingAudioUnhealthy(){const a=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),r=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return a&&r}health(){if(this.isSendingAudioUnhealthy()){const a=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!a?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}constructor(a,r,n){super(r,n,"Sending Audio Health"),this.logger=a,this.sendingAudioFailureSamplesToConsider=r.sendingAudioFailureSamplesToConsider>0?r.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=r.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=r.maximumTimesToWarn,this.coolDownTimeMs=r.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}},"SendingAudioFailureConnectionHealthPolicy");l.default=m},979841:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(702577));let m=s(class extends g.default{calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const a=this.pastSamplesToConsider,r=a*this.packetsExpected;let n=0;for(let e=0;e<a;e++)n+=this.currentData.packetsReceivedInLastMinute[e];return Math.min(Math.max(1-n/r,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?this.currentHealth!==0&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}constructor(a,r){super(a,r,"Unusable Audio Warning"),this.coolDownTimeMs=a.cooldownTimeMs,this.pastSamplesToConsider=a.pastSamplesToConsider,this.fractionalLoss=a.fractionalLoss,this.packetsExpected=a.packetsExpected,this.maximumTimesToWarn=a.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}},"UnusableAudioWarningConnectionHealthPolicy");l.default=m},14050:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=f(153822);let g=s(class{start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(h){h===0?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):h<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(h,a,r){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",a),this.statsCollector.logLatency("ping_pong_clock_skew",r),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(h){let a=0,r=0;const n=h.getObservableMetrics(),e=n.audioPacketsReceived,t=n.audioPacketsReceivedFractionLoss,i=n.audioSpeakerDelayMs;typeof i=="number"&&!isNaN(i)&&this.connectionHealthData.setAudioSpeakerDelayMs(i);const o=h.getRTCStatsReport();let c=0;o.forEach(S=>{S.type==="candidate-pair"&&S.bytesReceived&&(c+=S.bytesReceived)});const p=c-this.lastTotalBytesReceived;if(this.lastTotalBytesReceived=c,typeof e=="number"&&typeof t=="number"){if(a=e,r=t,a<0||r<0||p<0)return}else return;this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,a),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,r),p>0?(this.hasSeenValidCandidatePairMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidCandidatePairMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(a===0||r>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),typeof n.audioPacketsSent=="number"&&this.updateAudioPacketsSentInConnectionHealth(n.audioPacketsSent),this.updateConnectionHealth()}updateAudioPacketsSentInConnectionHealth(h){h>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}addToMinuteWindow(h,a){h.unshift(a),h.length>60&&h.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver(h=>{u.Maybe.of(h.connectionHealthDidChange).map(a=>a.bind(h)(this.connectionHealthData.clone()))})}constructor(h,a,r,n,e){this.audioVideoController=h,this.realtimeController=a,this.connectionHealthData=r,this.pingPong=n,this.statsCollector=e,this.isActive=!1,this.hasSeenValidCandidatePairMetricsBefore=!1,this.lastTotalBytesReceived=0,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(t=>{this.isActive&&this.receiveSignalStrengthChange(t)})}},"SignalingAndMetricsConnectionMonitor");l.default=g},116631:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var f;(function(u){u.Modality="#content"})(f||(f={})),l.default=f},65215:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(48839)),h=g(f(228991));let a=s(class ku{get mediaStream(){return this._mediaStream}set mediaStream(n){this._mediaStream=n}acquireAudioInputStream(){return u(this,void 0,void 0,function*(){return this._mediaStream.getAudioTracks().length===0?(this.logger.info("No audio stream available. Synthesizing an audio stream."),h.default.synthesizeAudioDevice(0)):this._mediaStream})}acquireVideoInputStream(){return u(this,void 0,void 0,function*(){return this._mediaStream})}acquireDisplayInputStream(n){return u(this,void 0,void 0,function*(){return n&&n.video&&n.video.mandatory&&n.video.mandatory.chromeMediaSource&&n.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(n):navigator.mediaDevices.getDisplayMedia(n)})}acquireScreenCaptureDisplayInputStream(n,e){return u(this,void 0,void 0,function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(n,e))})}screenCaptureDisplayMediaConstraints(n,e){return{audio:!!(!n&&new m.default().getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!n&&{frameRate:{max:e||ku.defaultFrameRate}}),n&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxFrameRate:e||ku.defaultFrameRate}})}}toggleMediaStream(n){let e=!1;if(this.mediaStream)for(let t=0;t<this.mediaStream.getTracks().length;t++)this.mediaStream.getTracks()[t].enabled!==n&&(this.mediaStream.getTracks()[t].enabled=n,e=!0);return e}cleanup(){if(this.mediaStream)for(let n=0;n<this.mediaStream.getTracks().length;n++)this.mediaStream.getTracks()[n].stop();this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(n){}removeMediaStreamBrokerObserver(n){}constructor(n){this.logger=n}},"ContentShareMediaStreamBroker");l.default=a,a.defaultFrameRate=15},509419:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(p,S,d,y){function E(I){return I instanceof d?I:new d(function(A){A(I)})}return s(E,"adopt"),new(d||(d=Promise))(function(I,A){function L(w){try{k(y.next(w))}catch(N){A(N)}}s(L,"fulfilled");function M(w){try{k(y.throw(w))}catch(N){A(N)}}s(M,"rejected");function k(w){w.done?I(w.value):E(w.value).then(L,M)}s(k,"step"),k((y=y.apply(p,S||[])).next())})},g=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(74647)),h=g(f(416570)),a=g(f(40834)),r=g(f(578555)),n=g(f(359454)),e=f(153822),t=g(f(684947)),i=g(f(121919)),o=g(f(116631));let c=s(class{static createContentShareMeetingSessionConfigure(S){const d=new h.default;return d.meetingId=S.meetingId,d.externalMeetingId=S.externalMeetingId,d.urls=S.urls,d.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,d.credentials=new a.default,d.credentials.attendeeId=S.credentials.attendeeId+o.default.Modality,d.credentials.externalUserId=S.credentials.externalUserId,d.credentials.joinToken=S.credentials.joinToken+o.default.Modality,d.meetingFeatures=S.meetingFeatures.clone(),d.videoDownlinkBandwidthPolicy=new t.default,d}setContentAudioProfile(S){this.contentAudioVideo.setAudioProfile(S)}enableSimulcastForContentShare(S,d){S?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new i.default(this.contentAudioVideo.logger,d)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(S){S?this.contentAudioVideo.configuration.enableSVC=!0:this.contentAudioVideo.configuration.enableSVC=!1}startContentShare(S){return u(this,void 0,void 0,function*(){if(S){if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution===m.default.VideoDisabled){this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None");return}this.mediaStreamBroker.mediaStream=S;for(let d=0;d<this.mediaStreamBroker.mediaStream.getTracks().length;d++)this.mediaStreamBroker.mediaStream.getTracks()[d].addEventListener("ended",()=>{this.stopContentShare()});this.contentAudioVideo.start()}})}startContentShareFromScreenCapture(S,d){return u(this,void 0,void 0,function*(){const y=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(S,d);return yield this.startContentShare(y),y})}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidPause).map(d=>d.call(S))})}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver(S=>{e.Maybe.of(S.contentShareDidUnpause).map(d=>d.call(S))})}setContentShareVideoCodecPreferences(S){this.contentAudioVideo.setVideoCodecSendPreferences(S)}destroy(){return u(this,void 0,void 0,function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)})}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(S){this.observerQueue.add(S)}removeContentShareObserver(S){this.observerQueue.delete(S)}forEachContentShareObserver(S){for(const d of this.observerQueue)n.default.nextTick(()=>{this.observerQueue.has(d)&&S(d)})}audioVideoDidStart(){var S;((S=this.mediaStreamBroker.mediaStream)===null||S===void 0?void 0:S.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(S){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver(d=>{e.Maybe.of(d.contentShareDidStop).map(y=>y.call(d))})}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence((S,d,y,E)=>{const I=new r.default(S).hasModality(r.default.MODALITY_CONTENT),A=new r.default(S).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!I||!A||!d||this.contentShareTile)return;const L=this.mediaStreamBroker.mediaStream;if(L!=null&&L.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const M=L.getVideoTracks()[0];let k,w;if(M.getSettings){const N=M.getSettings();k=N.width,w=N.height}else{const N=M.getCapabilities();k=N.width,w=N.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,L,k,w,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver(M=>{e.Maybe.of(M.contentShareDidStart).map(k=>k.call(M))})})}constructor(S,d,y){this.mediaStreamBroker=S,this.contentAudioVideo=d,this.attendeeAudioVideo=y,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}},"DefaultContentShareController");l.default=c},105884:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let u=s(class $i{static register(){!("document"in f.g)||!document.addEventListener||$i.shouldRegisterCSPMonitor&&($i.added||(document.addEventListener("securitypolicyviolation",$i.listener),$i.added=!0))}static unregister(){!("document"in f.g)||!document.removeEventListener||(document.removeEventListener("securitypolicyviolation",$i.listener),$i.loggers=new Set,$i.added=!1)}static disable(){$i.shouldRegisterCSPMonitor=!1,$i.unregister()}static addLogger(m){m&&$i.loggers.add(m)}static removeLogger(m){m&&$i.loggers.delete(m)}},"CSPMonitor");l.default=u,u.loggers=new Set,u.shouldRegisterCSPMonitor=!0,u.added=!1,u.listener=g=>{const m=`Security Policy Violation
Blocked URI: ${g.blockedURI}
Violated Directive: ${g.violatedDirective}
Original Policy: ${g.originalPolicy}
Document URI: ${g.documentURI}
Source File: ${g.sourceFile}
Line No.: ${g.lineNumber}
`;for(const h of u.loggers)h.error(m);u.loggers.size===0&&console.error(m)}},361862:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{text(){return new TextDecoder().decode(this.data)}json(){return JSON.parse(new TextDecoder().decode(this.data))}constructor(g,m,h,a,r,n){this.timestampMs=g,this.topic=m,this.data=h,this.senderAttendeeId=a,this.senderExternalUserId=r,this.throttled=!!n}},"DataMessage");l.default=f},6918:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isDestroyable=void 0;function f(u){return u&&"destroy"in u}s(f,"isDestroyable"),l.isDestroyable=f},816302:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isAudioTransformDevice=void 0;function f(u){return!!u&&typeof u=="object"&&"mute"in u&&"stop"in u&&"intrinsicDevice"in u}s(f,"isAudioTransformDevice"),l.isAudioTransformDevice=f},228991:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(k,w,N,T){function O(D){return D instanceof N?D:new N(function(G){G(D)})}return s(O,"adopt"),new(N||(N=Promise))(function(D,G){function K(me){try{q(T.next(me))}catch(we){G(we)}}s(K,"fulfilled");function H(me){try{q(T.throw(me))}catch(we){G(we)}}s(H,"rejected");function q(me){me.done?D(me.value):O(me.value).then(K,H)}s(q,"step"),q((T=T.apply(k,w||[])).next())})},g=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(48839)),h=g(f(715731)),a=g(f(359454)),r=g(f(518623)),n=f(153822),e=g(f(583920)),t=g(f(559521)),i=f(816302),o=g(f(406516)),c=g(f(139945)),p=g(f(701887)),S=g(f(2783)),d=g(f(588462)),y=g(f(597702)),E=g(f(647970)),I=g(f(74647)),A=f(150197);let L=s(class Hn{isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var w;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},(w=this.mediaDeviceWrapper)===null||w===void 0||w.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var w;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),(w=this.mediaDeviceWrapper)===null||w===void 0||w.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return this.deviceChangeObservers.size?!0:this.activeDevices.audio&&this.activeDevices.audio.constraints!==null||this.activeDevices.video&&this.activeDevices.video.constraints!==null||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return u(this,void 0,void 0,function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()})}listAudioInputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const N=yield this.listDevicesOfKind("audioinput",w);return this.trace("listAudioInputDevices",w,N),N})}listVideoInputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const N=yield this.listDevicesOfKind("videoinput",w);return this.trace("listVideoInputDevices",w,N),N})}listAudioOutputDevices(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const N=yield this.listDevicesOfKind("audiooutput",w);return this.trace("listAudioOutputDevices",w,N),N})}pushAudioMeetingStateForPermissions(w){var N;(N=this.eventController)===null||N===void 0||N.publishEvent(w===void 0?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(w){var N;(N=this.eventController)===null||N===void 0||N.publishEvent(w===void 0?"videoInputUnselected":"videoInputSelected")}startAudioInput(w){return u(this,void 0,void 0,function*(){return yield this.audioInputTaskQueue.add(()=>this.startAudioInputTask(w))})}startAudioInputTask(w){var N;return u(this,void 0,void 0,function*(){if(w===void 0){this.logger.error("Audio input device cannot be undefined");return}try{return i.isAudioTransformDevice(w)?(this.logger.info(`Choosing transform input device ${w}`),yield this.chooseAudioTransformInputDevice(w)):(this.logger.info(`Choosing intrinsic audio input device ${w}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",w)),this.trace("startAudioInputDevice",w,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield(N=this.transform)===null||N===void 0?void 0:N.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(T){throw T}})}stopAudioInput(){return u(this,void 0,void 0,function*(){return this.audioInputTaskQueue.add(()=>this.stopAudioInputTask())})}stopAudioInputTask(){return u(this,void 0,void 0,function*(){try{if(this.useWebAudio){this.releaseAudioTransformStream();return}this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}})}chooseAudioTransformInputDevice(w){var N;return u(this,void 0,void 0,function*(){if(((N=this.transform)===null||N===void 0?void 0:N.device)===w)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const T=Hn.getAudioContext();if(!(T instanceof OfflineAudioContext))switch(T.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield T.resume()}let O;try{O=yield w.createAudioNode(T)}catch(G){throw this.logger.error(`Unable to create transform device node: ${G}.`),G}const D=yield w.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",D),this.logger.debug(`Got inner stream: ${D}.`),this.setTransform(w,O)})}chooseVideoTransformInputDevice(w){var N;return u(this,void 0,void 0,function*(){if(this.eventController&&w instanceof e.default&&w.passEventControllerToProcessors(this.eventController),w===this.chosenVideoTransformDevice){this.logger.info("Reselecting same VideoTransformDevice");return}const T=this.chosenVideoTransformDevice;T&&this.logger.info("Switched from previous VideoTransformDevice");const O=!!T,D=yield w.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId((N=this.activeDevices.video)===null||N===void 0?void 0:N.stream,D)){this.logger.info("video transform device needs new intrinsic device"),O&&T.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=w,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",D),this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream);return}this.chosenVideoTransformDevice=w,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield w.transformStream(this.activeDevices.video.stream)})}startVideoInput(w){return u(this,void 0,void 0,function*(){return yield this.videoInputTaskQueue.add(()=>this.startVideoInputTask(w))})}startVideoInputTask(w){return u(this,void 0,void 0,function*(){if(!w){this.logger.error("Invalid video input device");return}try{return A.isVideoTransformDevice(w)?(this.logger.info(`Choosing video transform device ${w}`),yield this.chooseVideoTransformInputDevice(w),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",w),this.trace("startVideoInputDevice",w),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(N){throw N}})}stopVideoInput(){return u(this,void 0,void 0,function*(){return this.videoInputTaskQueue.add(()=>this.stopVideoInputTask())})}stopVideoInputTask(){return u(this,void 0,void 0,function*(){try{if(this.chosenVideoInputIsTransformDevice()){this.releaseVideoTransformStream();return}this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}})}chooseAudioOutput(w){return u(this,void 0,void 0,function*(){this.audioOutputDeviceId=w,this.watchForDeviceChangesIfNecessary();const N=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(N),this.trace("chooseAudioOutput",w,null)})}addDeviceChangeObserver(w){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(w),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(w){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(w),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var w,N;if(!this.activeDevices.audio)return null;const T=(N=(w=this.transform)===null||w===void 0?void 0:w.nodes)===null||N===void 0?void 0:N.end;if(T){const O=T.context.createAnalyser();return O.removeOriginalInputs=()=>{try{T.disconnect(O)}catch{}},T.connect(O),O}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(w){const N=Hn.getAudioContext(),T=N.createAnalyser(),O=N.createMediaStreamSource(w);return O.connect(T),this.trace("createAnalyserNodeForAudioInput"),T.removeOriginalInputs=()=>{try{O.disconnect(T)}catch{}},T}startVideoPreviewForVideoInput(w){if(!this.activeDevices.video){this.logger.warn("cannot bind video preview since video input device has not been chosen"),this.trace("startVideoPreviewForVideoInput",w.id);return}t.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,w,!0),this.trace("startVideoPreviewForVideoInput",w.id)}stopVideoPreviewForVideoInput(w){t.default.disconnectVideoStreamFromVideoElement(w,!1),this.trace("stopVideoPreviewForVideoInput",w.id)}setDeviceLabelTrigger(w){if(this.deviceInfoCache){for(const N of this.deviceInfoCache)if(!N.label){this.deviceInfoCache=null;break}}this.deviceLabelTrigger=w,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(w){let N=null;return this.useWebAudio?(N=Hn.getAudioContext().createMediaStreamSource(w),N.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",w.id),N}chooseVideoInputQuality(w,N,T){const O=this.browserBehavior.requiresResolutionAlignment(w,N);this.videoInputQualitySettings=new I.default(O[0],O[1],T)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return u(this,void 0,void 0,function*(){return this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio?this.getMediaStreamDestinationNode().stream:this.activeDevices.audio.stream})}acquireVideoInputStream(){return u(this,void 0,void 0,function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream})}acquireDisplayInputStream(w){return u(this,void 0,void 0,function*(){throw new Error("unsupported")})}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(w){const N=this.activeDevices[w];if(!N)return;const T=N.endedCallback,O=N.trackMuteCallback,D=N.trackUnmuteCallback;for(const G of N.stream.getTracks())G.stop(),T&&G.removeEventListener("ended",T),O&&G.removeEventListener("mute",O),D&&G.removeEventListener("unmute",D),delete N.endedCallback,delete N.trackMuteCallback,delete N.trackUnmuteCallback,delete this.activeDevices[w]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(w){var N;let T=this.activeDevices.audio;if(this.useWebAudio&&(T=this.getMediaStreamDestinationNode()),!!T){for(const O of T.stream.getTracks())O.enabled!==w&&(O.enabled=w);this.muted!==!w&&(this.muted=!w,(N=this.transform)===null||N===void 0||N.device.mute(this.muted))}}static getIntrinsicDeviceId(w){if(!w)return;if(typeof w=="string")return w;if(w.id)return w.id;const T=w.deviceId;if(!T)return;if(typeof T=="string"||Array.isArray(T))return T;const O=T;if(typeof O.exact=="string"||Array.isArray(O.exact))return O.exact}static createEmptyAudioDevice(){return Hn.synthesizeAudioDevice(0)}static synthesizeAudioDevice(w){const N=Hn.getAudioContext(),T=N.createMediaStreamDestination();if(w){const O=N.createGain();O.gain.value=.1,O.connect(T);const D=N.createOscillator();D.frequency.value=w,D.connect(O),D.start()}else{const O=N.createBufferSource();try{O.buffer=N.createBuffer(1,N.sampleRate*5,N.sampleRate)}catch(D){if(D&&D.name==="NotSupportedError")O.buffer=N.createBuffer(1,Hn.defaultSampleRate*5,Hn.defaultSampleRate);else throw D}O.buffer.getChannelData(0)[0]=3e-4,O.loop=!0,O.connect(T),O.start()}return T.stream}listDevicesOfKind(w,N){return u(this,void 0,void 0,function*(){return(N||this.deviceInfoCache===null||!this.isWatchingForDeviceChanges())&&(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(w)})}updateDeviceInfoCacheFromBrowser(){var w;return u(this,void 0,void 0,function*(){if(typeof MediaDeviceInfo>"u"){this.deviceInfoCache=[];return}let T=yield navigator.mediaDevices.enumerateDevices(),O=!0;for(const D of T)if(!D.label){O=!1;break}if(!O)try{this.logger.info("attempting to trigger media device labels since they are hidden");const D=yield this.deviceLabelTrigger();T=yield navigator.mediaDevices.enumerateDevices();for(const G of D.getTracks())G.stop()}catch(D){this.logger.info("unable to get media device labels"),(w=this.eventController)===null||w===void 0||w.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(D)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(T)}`),this.deviceInfoCache=T})}listCachedDevicesOfKind(w){const N=[];if(this.deviceInfoCache)for(const T of this.deviceInfoCache)T.kind===w&&N.push(T);return N}handleDeviceChange(){return u(this,void 0,void 0,function*(){if(this.deviceInfoCache===null)return;if(this.alreadyHandlingDeviceChange){a.default.nextTick(()=>{this.handleDeviceChange()});return}this.alreadyHandlingDeviceChange=!0;const w=this.listCachedDevicesOfKind("audioinput"),N=this.listCachedDevicesOfKind("videoinput"),T=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const O=this.listCachedDevicesOfKind("audioinput"),D=this.listCachedDevicesOfKind("videoinput"),G=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver(K=>{this.areDeviceListsEqual(w,O)||n.Maybe.of(K.audioInputsChanged).map(H=>H.bind(K)(O)),this.areDeviceListsEqual(N,D)||n.Maybe.of(K.videoInputsChanged).map(H=>H.bind(K)(D)),this.areDeviceListsEqual(T,G)||n.Maybe.of(K.audioOutputsChanged).map(H=>H.bind(K)(G))}),this.alreadyHandlingDeviceChange=!1})}handleDeviceStreamEnded(w,N){return u(this,void 0,void 0,function*(){try{w==="audio"?(this.logger.warn("Audio input device which was active is no longer available, resetting to null device"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch{this.logger.error("Failed to choose null device after stream ended.")}w==="audio"?this.forEachObserver(T=>{n.Maybe.of(T.audioInputStreamEnded).map(O=>O.bind(T)(N))}):this.forEachObserver(T=>{n.Maybe.of(T.videoInputStreamEnded).map(O=>O.bind(T)(N))})})}forEachObserver(w){for(const N of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(N)&&w(N)})}forEachMediaStreamBrokerObserver(w){for(const N of this.mediaStreamBrokerObservers)a.default.nextTick(()=>{this.mediaStreamBrokerObservers.has(N)&&w(N)})}areDeviceListsEqual(w,N){return JSON.stringify(w.map(T=>JSON.stringify(T)).sort())===JSON.stringify(N.map(T=>JSON.stringify(T)).sort())}intrinsicDeviceAsMediaStream(w){return w&&w.id?w:null}hasSameMediaStreamId(w,N,T){var O,D,G,K;let H;return w==="audio"?(H=T==null?void 0:T.audio.streamId,!!H&&H===((D=(O=N.constraints)===null||O===void 0?void 0:O.audio)===null||D===void 0?void 0:D.streamId)):(H=T==null?void 0:T.video.streamId,!!H&&H===((K=(G=N==null?void 0:N.constraints)===null||G===void 0?void 0:G.video)===null||K===void 0?void 0:K.streamId))}hasSameGroupId(w,N,T){if(w==="")return!0;const O=Hn.getIntrinsicDeviceId(T);return this.logger.debug(`Checking deviceIds ${O} of type ${typeof O} with groupId ${w}`),typeof O=="string"&&w===this.getGroupIdFromDeviceId(N,O)}getGroupIdFromDeviceId(w,N){if(this.deviceInfoCache!==null){const T=this.listCachedDevicesOfKind(`${w}input`).find(O=>O.deviceId===N);if(T&&T.groupId)return this.logger.debug(`GroupId of deviceId ${N} found in cache is ${T.groupId}`),T.groupId}return this.logger.debug(`GroupId of deviceId ${N} found in cache is empty`),""}handleGetUserMediaError(w,N){if(!w)throw new c.default(w);switch(w.name){case"NotReadableError":case"TrackStartError":throw new S.default(w);case"NotFoundError":case"DevicesNotFoundError":throw new p.default(w);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw N&&N<Hn.permissionDeniedOriginDetectionThresholdMs?new y.default(w,"Permission denied by browser"):new y.default(w,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new d.default(w);case"TypeError":throw new E.default(w);case"AbortError":default:throw new c.default(w)}}matchesDeviceSelection(w,N,T,O){return T&&T.stream.active&&(this.hasSameMediaStreamId(w,T,O)||T.groupId!==null&&this.hasSameGroupId(T.groupId,w,N))?(this.logger.debug(`Compare current device constraint ${JSON.stringify(T.constraints)} to proposed constraints ${JSON.stringify(O)}`),T.matchesConstraints(O)):!1}chooseInputIntrinsicDevice(w,N){var T,O;return u(this,void 0,void 0,function*(){const D=this.getMediaStreamConstraints(w,N);if(this.matchesDeviceSelection(w,N,this.activeDevices[w],D)){this.logger.info(`reusing existing ${w} input device`);return}this.activeDevices[w]&&this.activeDevices[w].stream&&this.stopTracksAndRemoveCallbacks(w);const G=Date.now(),K=new o.default;try{this.logger.info(`requesting new ${w} device with constraint ${JSON.stringify(D)}`);const H=this.intrinsicDeviceAsMediaStream(N);w==="audio"&&N===null?(K.stream=Hn.createEmptyAudioDevice(),K.constraints=null):H?(this.logger.info(`using media stream ${H.id} for ${w} device`),K.stream=H,K.constraints=D):(K.stream=yield navigator.mediaDevices.getUserMedia(D),K.constraints=D),yield this.handleNewInputDevice(w,K)}catch(H){const q=this.getErrorMessage(H);w==="audio"?(T=this.eventController)===null||T===void 0||T.publishEvent("audioInputFailed",{audioInputErrorMessage:q}):(O=this.eventController)===null||O===void 0||O.publishEvent("videoInputFailed",{videoInputErrorMessage:q}),this.logger.error(`failed to get ${w} device for constraints ${JSON.stringify(D)}: ${q}`);let me=!0;if(H&&"constraint"in H&&(this.logger.error(`Over-constrained by constraint: ${H.constraint}`),this.useMediaConstraintsFallback)){const we=this.getMediaStreamConstraints(w,N,!0),ue=JSON.stringify(we);if(ue!==JSON.stringify(D)){this.logger.info(`retry requesting new ${w} device with minimal constraint ${ue}`);try{K.stream=yield navigator.mediaDevices.getUserMedia(we),K.constraints=we,yield this.handleNewInputDevice(w,K),me=!1}catch(Pe){this.logger.error(`failed to get ${w} device for constraints ${ue}: ${this.getErrorMessage(Pe)}`)}}}if(me){if(w==="audio"){this.logger.info(`choosing null ${w} device instead`);try{K.stream=Hn.createEmptyAudioDevice(),K.constraints=null,yield this.handleNewInputDevice(w,K)}catch(we){this.logger.error(`failed to choose null ${w} device. ${we.name}: ${we.message}`)}}this.handleGetUserMediaError(H,Date.now()-G)}}finally{this.watchForDeviceChangesIfNecessary()}})}getErrorMessage(w){return w?w.name&&w.message?`${w.name}: ${w.message}`:w.name?w.name:w.message?w.message:"UnknownError":"UnknownError"}handleNewInputDevice(w,N){var T;return u(this,void 0,void 0,function*(){this.logger.info(`got ${w} device for constraints ${JSON.stringify(N.constraints)}`);const O=(T=this.getMediaTrackSettings(N.stream))===null||T===void 0?void 0:T.deviceId;N.groupId=O?this.getGroupIdFromDeviceId(w,O):"",this.activeDevices[w]=N,this.logger.debug(`Set activeDevice to ${JSON.stringify(N)}`),this.watchForDeviceChangesIfNecessary();const D=N.stream.getTracks()[0];if(D&&(N.endedCallback=()=>{this.activeDevices[w]&&this.activeDevices[w].stream===N.stream&&(this.handleDeviceStreamEnded(w,O),delete N.endedCallback)},D.addEventListener("ended",N.endedCallback,{once:!0})),w==="audio"){const G=N.stream.getAudioTracks()[0];if(G){const K=G.getSettings().deviceId||N.stream;N.trackMuteCallback=()=>{this.mediaStreamMuteObserver(K,!0)},N.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(K,!1)},G.addEventListener("mute",N.trackMuteCallback,{once:!1}),G.addEventListener("unmute",N.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),G.muted?N.trackMuteCallback():N.trackUnmuteCallback()}}})}calculateMediaStreamConstraints(w,N,T,O){if(O&&this.listCachedDevicesOfKind(`${w}input`).length===1)return!0;const D={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?D.deviceId=N:D.deviceId={exact:N},T&&(D.groupId=T),O?D:w==="video"?(D.width={ideal:this.videoInputQualitySettings.videoWidth},D.height={ideal:this.videoInputQualitySettings.videoHeight},D.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},D):(this.supportSampleRateConstraint()&&(D.sampleRate={ideal:Hn.defaultSampleRate}),this.supportSampleSizeConstraint()&&(D.sampleSize={ideal:Hn.defaultSampleSize}),this.supportChannelCountConstraint()&&(D.channelCount={ideal:Hn.defaultChannelCount}),Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},D))}getMediaStreamConstraintsFromTrackConstraints(w,N){return w==="audio"?{audio:N}:{video:N}}getMediaStreamConstraints(w,N){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,O={};if(!N)return null;const D=this.intrinsicDeviceAsMediaStream(N);if(D)return O.streamId=D.id,this.getMediaStreamConstraintsFromTrackConstraints(w,O);if(typeof N=="string"){let G="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(this.deviceInfoCache!==null?G=this.getGroupIdFromDeviceId(w,N):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),O=this.calculateMediaStreamConstraints(w,N,G,T),this.getMediaStreamConstraintsFromTrackConstraints(w,O)}return M(N)?(O=this.calculateMediaStreamConstraints(w,N.deviceId,N.groupId,T),this.getMediaStreamConstraintsFromTrackConstraints(w,O)):(O=N,this.getMediaStreamConstraintsFromTrackConstraints(w,O))}deviceInfoFromDeviceId(w,N){if(this.deviceInfoCache===null)return null;for(const T of this.deviceInfoCache)if(T.kind===w&&T.deviceId===N)return T;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(w,N){if(!w||!w.active||!N)return!1;if(N.id)return w.id===N.id;const T=this.getMediaTrackSettings(w);if(!T.deviceId)return!1;const O=Hn.getIntrinsicDeviceId(N);return typeof O=="string"?T.deviceId===O:!1}getMediaTrackSettings(w){var N;return(N=w.getTracks()[0])===null||N===void 0?void 0:N.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const w=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(w)}setTransform(w,N){var T,O;(O=(T=this.transform)===null||T===void 0?void 0:T.nodes)===null||O===void 0||O.end.disconnect(),this.transform={nodes:N,device:w};const D=N==null?void 0:N.end,G=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${D} to destination ${G}.`),D==null||D.connect(G),this.reconnectAudioInputs()}removeTransform(){var w;const N=this.transform;if(N)return(w=this.transform.nodes)===null||w===void 0||w.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),N}attachAudioInputStreamToAudioContext(w){var N;(N=this.audioInputSourceNode)===null||N===void 0||N.disconnect(),this.audioInputSourceNode=Hn.getAudioContext().createMediaStreamSource(w);const T=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(T)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=Hn.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var w,N;return((N=(w=this.transform)===null||w===void 0?void 0:w.nodes)===null||N===void 0?void 0:N.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(w){Hn.defaultLatencyHint=w}static getAudioContext(){if(!Hn.audioContext){const w={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(w.sampleRate=Hn.defaultSampleRate),new m.default().requiresPlaybackLatencyHintForAudioContext()&&(w.latencyHint="playback"),Hn.defaultLatencyHint&&(w.latencyHint=Hn.defaultLatencyHint),Hn.audioContext=new(window.AudioContext||window.webkitAudioContext)(w)}return Hn.audioContext}static closeAudioContext(){if(Hn.audioContext)try{Hn.audioContext.close()}catch{}Hn.audioContext=null}addMediaStreamBrokerObserver(w){this.mediaStreamBrokerObservers.add(w)}removeMediaStreamBrokerObserver(w){this.mediaStreamBrokerObservers.delete(w)}publishVideoInputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(N=>{N.videoInputDidChange&&N.videoInputDidChange(w)}),this.pushVideoMeetingStateForPermissions(w)}publishAudioInputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(N=>{N.audioInputDidChange&&N.audioInputDidChange(w)}),this.pushAudioMeetingStateForPermissions(w)}publishAudioOutputDidChangeEvent(w){this.forEachMediaStreamBrokerObserver(N=>{N.audioOutputDidChange&&N.audioOutputDidChange(w)})}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(w,N,T){let O=`API/DefaultDeviceController/${w}`;typeof N<"u"&&(O+=` ${JSON.stringify(N)}`),typeof T<"u"&&(O+=` -> ${JSON.stringify(T)}`),this.logger.info(O)}constructor(w,N,T=new m.default,O){this.logger=w,this.browserBehavior=T,this.eventController=O,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new r.default,this.videoInputTaskQueue=new r.default,this.muted=!1,this.mediaStreamMuteObserver=(H,q)=>{for(const me of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(me)&&me.audioInputMuteStateChanged&&me.audioInputMuteStateChanged(H,q)})},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:D=!1,useMediaConstraintsFallback:G=!0}=N||{};this.useWebAudio=D,this.useMediaConstraintsFallback=G,this.videoInputQualitySettings=new I.default(Hn.defaultVideoWidth,Hn.defaultVideoHeight,Hn.defaultVideoFrameRate);const K=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=K[0],this.videoInputQualitySettings.videoHeight=K[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=new h.default().create();const H=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(H)}`)}catch(H){w.error(H.message)}}},"DefaultDeviceController");l.default=L,L.permissionDeniedOriginDetectionThresholdMs=500,L.defaultVideoWidth=960,L.defaultVideoHeight=540,L.defaultVideoFrameRate=15,L.defaultSampleRate=48e3,L.defaultSampleSize=16,L.defaultChannelCount=1,L.audioContext=null;function M(k){return typeof k=="object"&&"deviceId"in k&&"groupId"in k&&"kind"in k&&"label"in k}s(M,"isMediaDeviceInfo")},406516:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{matchesConstraints(g){return JSON.stringify(this.constraints)===JSON.stringify(g)}constructor(){this.groupId=""}},"DeviceSelection");l.default=f},139945:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class extends Error{constructor(g,m){super(m||"Error fetching device."),this.cause=g,this.name="GetUserMediaError"}},"GetUserMediaError");l.default=f},805644:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0}),l.NoOpDeviceControllerWithEventController=void 0;const m=g(f(66146)),h=g(f(74647));let a=s(class extends m.default{destroy(){return u(this,void 0,void 0,function*(){this.destroyed=!0})}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,i){}getVideoInputQualitySettings(){return h.default.VideoDisabled}constructor(e){super(),this.destroyed=!1}},"NoOpDeviceController");l.default=a;let r=s(class extends a{constructor(e){super(),this.eventController=e}},"NoOpDeviceControllerWithEventController");l.NoOpDeviceControllerWithEventController=r},701887:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(139945));let m=s(class extends g.default{constructor(a){super(a),this.name="NotFoundError"}},"NotFoundError");l.default=m},2783:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(139945));let m=s(class extends g.default{constructor(a){super(a),this.name="NotReadableError"}},"NotReadableError");l.default=m},588462:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(139945));let m=s(class extends g.default{constructor(a,r){super(a),this.constraint=r,this.name="OverconstrainedError"}},"OverconstrainedError");l.default=m},597702:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(139945));let m=s(class extends g.default{constructor(a,r){super(a,r),this.name="PermissionDeniedError"}},"PermissionDeniedError");l.default=m},98450:function(U,l){"use strict";var f=this&&this.__awaiter||function(g,m,h,a){function r(n){return n instanceof h?n:new h(function(e){e(n)})}return s(r,"adopt"),new(h||(h=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(p){e(p)}}s(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(p){e(p)}}s(i,"rejected");function o(c){c.done?n(c.value):r(c.value).then(t,i)}s(o,"step"),o((a=a.apply(g,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=s(class{mute(m){return f(this,void 0,void 0,function*(){})}stop(){var m;return f(this,void 0,void 0,function*(){(m=this.node)===null||m===void 0||m.disconnect()})}intrinsicDevice(){return f(this,void 0,void 0,function*(){return this.inner})}createAudioNode(m){var h;return f(this,void 0,void 0,function*(){return(h=this.node)===null||h===void 0||h.disconnect(),this.node=yield this.createSingleAudioNode(m),{start:this.node,end:this.node}})}constructor(m){this.inner=m}},"SingleNodeAudioTransformDevice");l.default=u},647970:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(139945));let m=s(class extends g.default{constructor(a){super(a),this.name="TypeError"}},"TypeError");l.default=m},74647:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{equals(g){return this.videoWidth===g.videoWidth&&this.videoHeight===g.videoHeight&&this.videoFrameRate===g.videoFrameRate}constructor(g,m,h){this.videoWidth=g,this.videoHeight=m,this.videoFrameRate=h}},"VideoQualitySettings");l.default=f,f.VideoDisabled=new f(0,0,0),f.VideoResolutionHD=new f(1280,720,30),f.VideoResolutionFHD=new f(1920,1080,30),f.VideoResolutionUHD=new f(3840,2160,30)},150197:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isVideoTransformDevice=void 0;function f(u){return!!u&&typeof u=="object"&&"transformStream"in u&&"stop"in u&&"intrinsicDevice"in u}s(f,"isVideoTransformDevice"),l.isVideoTransformDevice=f},436517:function(U,l){"use strict";var f=this&&this.__awaiter||function(g,m,h,a){function r(n){return n instanceof h?n:new h(function(e){e(n)})}return s(r,"adopt"),new(h||(h=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(p){e(p)}}s(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(p){e(p)}}s(i,"rejected");function o(c){c.done?n(c.value):r(c.value).then(t,i)}s(o,"step"),o((a=a.apply(g,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=s(class{destroy(){return f(this,void 0,void 0,function*(){this.mediaQueryList&&(typeof this.mediaQueryList.addEventListener=="function"?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()})}registerObserver(m){this.observerQueue.add(m),m.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(m){this.observerQueue.delete(m)}constructor(m,h){if(this.devicePixelRatioSource=m,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach(r=>{r.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())})},typeof window>"u")return;const a=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);typeof a.addEventListener=="function"?(a.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=a):typeof a.addListener=="function"?(a.addListener(this.mediaQueryListener),this.mediaQueryList=a):h.warn("ignoring DefaultDevicePixelRatioMonitor")}},"DefaultDevicePixelRatioMonitor");l.default=u},704988:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{devicePixelRatio(){return typeof window>"u"||!window||!window.devicePixelRatio?1:window.devicePixelRatio}},"DevicePixelRatioWindowSource");l.default=f},422260:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(t,i,o,c){function p(S){return S instanceof o?S:new o(function(d){d(S)})}return s(p,"adopt"),new(o||(o=Promise))(function(S,d){function y(A){try{I(c.next(A))}catch(L){d(L)}}s(y,"fulfilled");function E(A){try{I(c.throw(A))}catch(L){d(L)}}s(E,"rejected");function I(A){A.done?S(A.value):p(A.value).then(y,E)}s(I,"step"),I((c=c.apply(t,i||[])).next())})},g=this&&this.__rest||function(t,i){var o={};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&i.indexOf(c)<0&&(o[c]=t[c]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,c=Object.getOwnPropertySymbols(t);p<c.length;p++)i.indexOf(c[p])<0&&Object.prototype.propertyIsEnumerable.call(t,c[p])&&(o[c[p]]=t[c[p]]);return o},m=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const h=m(f(252383)),a=m(f(449341)),r=m(f(916889)),n=f(817426);let e=s(class Wr{addEventListeners(){!this.beaconEventListener||!("window"in f.g)||!window.addEventListener||!("document"in f.g)||!document.addEventListener||(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(i){(i.type==="visibilitychange"&&document.visibilityState==="hidden"||i.type==="pagehide")&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){!this.beaconEventListener||!("window"in f.g)||!window.removeEventListener||!("document"in f.g)||!document.removeEventListener||(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var i;this.removeEventListeners(),this.addEventListeners(),(i=this.intervalScheduler)===null||i===void 0||i.stop(),this.intervalScheduler=new a.default(this.flushIntervalMs),this.intervalScheduler.start(()=>this.sendEvents())}stop(){var i;(i=this.intervalScheduler)===null||i===void 0||i.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(i){return u(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(i)}`);const{name:o,ts:c,attributes:p}=i,S=p&&this.filterAttributes(p,this.attributesToFilter),d=Object.assign({name:o,ts:c},S);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(d)}`);const y=this.getSize(d);if(y>Wr.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${y} bytes. Item cannot exceed max item size allowed of ${Wr.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(o)){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(d)}`),this.sendEventImmediately({name:o,ts:c,attributes:S});return}if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(d),this.ingestionEventSize+=y,this.bufferItemThresholdReached(y)){const E=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(E),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}})}filterAttributes(i,o){const c=new Set(o);return Object.keys(i).filter(S=>c.has(S)).forEach(S=>delete i[S]),i}initializeAndGetCurrentIngestionEvent(){const i={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(i),i}bufferItemThresholdReached(i){return i+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===Wr.MAX_PAYLOAD_ITEMS}getSize(i){let o=0;if(typeof i=="object")for(const[c,p]of Object.entries(i))o+=this.getPrimitiveSize(c),o+=this.getSize(p);else o+=this.getPrimitiveSize(i);return o}getPrimitiveSize(i){let o=0;return typeof i=="string"?o+=i.length*2:typeof i=="number"&&(o+=8),o}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return this.buffer.length===0||this.bufferSize===0}getItems(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.isEmpty()?[]:(i=Math.min(this.buffer.length,i+1),this.buffer.splice(o,i))}makeBeaconRequestBody(i){const o={metadata:this.metadata,events:i,authorization:this.authenticationToken};return JSON.stringify(o)}makeRequestBody(i){const o={metadata:this.metadata,events:i};return JSON.stringify(o)}sendEventImmediately(i){return u(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(i)}`);const{name:o,ts:c,attributes:p}=i,S={type:this.type,v:this.v,payloads:[Object.assign({name:o,ts:c},p)]};let d=!1,y=null;const E=this.makeRequestBody([S]);try{if(y=yield this.send(E),y.ok){try{const I=yield y.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${E}, message: ${JSON.stringify(I)}`)}catch(I){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${I} for event ${E}`)}return}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${E} with response status ${y.status}`),d=!0}catch(I){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${E} to the ingestion endpoint ${I}.`),d=!0;try{if(this.metadata.browserName.toLowerCase()==="firefox"){const A=this.makeBeaconRequestBody([S]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${A}`),navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,A)?d=!1:d=!0}}catch{this.logger.warn(`Event Reporting - Error sending beacon for an important event ${E}`),d=!0}}d&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${E}`),this.failedIngestionEvents.push(S))})}send(i){return u(this,void 0,void 0,function*(){const o=new h.default(Wr.RETRY_FIXED_BACKOFF_WAIT_MS,Wr.RETRY_SHORT_BACKOFF_MS,Wr.RETRY_LONG_BACKOFF_MS);try{let c=0;for(;c<this.retryCountLimit;){const p=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:i});if(p.ok||!Wr.SENDING_FAILURE_CODES.has(p.status))return p;if(this.logger.warn(`Will retry sending failure for ${i} due to status code ${p.status}.`),c++,c<this.retryCountLimit){const S=o.nextBackoffAmountMs();yield n.wait(S)}}if(c===this.retryCountLimit)throw new Error(`Retry count limit reached for ${i}`)}catch(c){throw c}})}sendBeacon(){return u(this,void 0,void 0,function*(){const i=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(i)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const c=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);i.push(c),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(c)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const c=this.failedIngestionEvents.map(p=>this.deepCopyCurrentIngestionEvent(p));i.push(...c),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(c)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach(c=>{i.push(...c),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(c)}`)}),this.cancellableEvents.clear()),i.length===0)return;const o=this.makeBeaconRequestBody(i);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${o}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,o)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${o}`)}catch(c){this.logger.warn(`Event Reporting - Sending beacon data ${o} failed with error ${c}`)}})}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return u(this,void 0,void 0,function*(){this.stop(),this.reset()})}constructor(i,o,c,p,S){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=D=>({type:D.type,v:D.v,payloads:[...D.payloads]}),this.sendEvents=()=>u(this,void 0,void 0,function*(){if(this.lock)return;const D=this.getItems(this.flushSize);if(D.length===0)return;this.lock=!0;const G=this.makeRequestBody(D);let K=!1;const H=Date.now();this.metadata.browserName.toLowerCase()==="firefox"&&this.cancellableEvents.set(H,D);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${G}`);const q=yield this.send(G);if(this.cancellableEvents.delete(H),!q.ok)this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${G} with response status ${q.status}`),K=!0;else try{const me=yield q.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${G} message: ${JSON.stringify(me)}`)}catch(me){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${me} for events ${G}`)}}catch(q){K=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${G} to the ingestion endpoint ${q}`)}finally{this.lock=!1}K&&(this.cancellableEvents.delete(H),this.failedIngestionEvents.push(...D))});const d=new r.default(S).getParserResult(),{browserMajorVersion:y}=d,E=g(d,["browserMajorVersion"]),I=o.toJSON(),{type:A,v:L}=I,M=g(I,["type","v"]);this.authenticationToken=o.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},E),M),Object.keys(this.metadata).forEach(D=>this.attributesToFilter.push(D)),this.type=A,this.v=L,this.ingestionURL=c,this.logger=S,this.importantEvents=new Set(p);const{maxBufferCapacityKb:k,totalBufferItems:w,flushSize:N,flushIntervalMs:T,retryCountLimit:O}=i;this.maxBufferCapacityBytes=k*1024,this.totalBufferItems=w,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/w),this.flushIntervalMs=T,this.flushSize=N,this.retryCountLimit=O,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=D=>this.beaconEventHandler(D),this.addEventListeners()}},"InMemoryJSONEventBuffer");l.default=e,e.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),e.RETRY_FIXED_BACKOFF_WAIT_MS=0,e.RETRY_SHORT_BACKOFF_MS=1e3,e.RETRY_LONG_BACKOFF_MS=15e3,e.MAX_PAYLOAD_ITEMS=2,e.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3},449012:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(g=5e3,m=2,h=64,a=100,r=15){this.flushIntervalMs=g,this.flushSize=m,this.maxBufferCapacityKb=h,this.totalBufferItems=a,this.retryCountLimit=r}},"EventBufferConfiguration");l.default=f},491799:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(c,p,S,d){function y(E){return E instanceof S?E:new S(function(I){I(E)})}return s(y,"adopt"),new(S||(S=Promise))(function(E,I){function A(k){try{M(d.next(k))}catch(w){I(w)}}s(A,"fulfilled");function L(k){try{M(d.throw(k))}catch(w){I(w)}}s(L,"rejected");function M(k){k.done?E(k.value):y(k.value).then(A,L)}s(M,"step"),M((d=d.apply(c,p||[])).next())})},g=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const m=f(877232),h=f(6918),a=g(f(849298)),r=g(f(200776)),n=g(f(237427)),e=g(f(359454)),t=g(f(244504)),i=g(f(816395));let o=s(class Ao{addObserver(p){this.observerSet.add(p)}removeObserver(p){this.observerSet.delete(p)}forEachObserver(p){for(const S of this.observerSet)e.default.nextTick(()=>{this.observerSet.has(S)&&p(S)})}publishEvent(p,S){return u(this,void 0,void 0,function*(){const d=Date.now();this.meetingHistoryStates.push({name:p,timestampMs:d});const y=Object.freeze(Object.assign(this.getAttributes(d),S));this.forEachObserver(E=>{E.eventDidReceive(p,y)}),this.reportEvent(p,d,S)})}reportEvent(p,S,d){var y;return u(this,void 0,void 0,function*(){let E;try{d&&(E=i.default(d)),yield(y=this.eventReporter)===null||y===void 0?void 0:y.reportEvent(S,p,E)}catch(I){this.logger.error(`Error reporting event ${I}`)}})}setupEventReporter(p,S,d){if(d)this._eventReporter=d;else if(p.urls){const y=p.urls.eventIngestionURL;if(y){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:E,credentials:{attendeeId:I,joinToken:A}}=p,L=new n.default(E,I,A),M=new a.default(L,y);this._eventReporter=new r.default(M,S)}}}getAttributes(p){var S,d;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:typeof this.configuration.externalMeetingId=="string"?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:((S=this.parserResult)===null||S===void 0?void 0:S.os.name)||Ao.UNAVAILABLE,osVersion:((d=this.parserResult)===null||d===void 0?void 0:d.os.version)||Ao.UNAVAILABLE,sdkVersion:t.default.sdkVersion,sdkName:t.default.sdkName,timestampMs:p}}get eventReporter(){return this._eventReporter}destroy(){return u(this,void 0,void 0,function*(){h.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0})}constructor(p,S,d){var y,E,I,A,L,M,k;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=S,this.configuration=p,this.setupEventReporter(p,S,d);try{this.parserResult=navigator&&navigator.userAgent?new m.UAParser(navigator.userAgent).getResult():null}catch(w){this.logger.error(w.message)}this.browserMajorVersion=((I=(E=(y=this.parserResult)===null||y===void 0?void 0:y.browser)===null||E===void 0?void 0:E.version)===null||I===void 0?void 0:I.split(".")[0])||Ao.UNAVAILABLE,this.browserName=((A=this.parserResult)===null||A===void 0?void 0:A.browser.name)||Ao.UNAVAILABLE,this.browserVersion=((L=this.parserResult)===null||L===void 0?void 0:L.browser.version)||Ao.UNAVAILABLE,this.deviceName=[((M=this.parserResult)===null||M===void 0?void 0:M.device.vendor)||"",((k=this.parserResult)===null||k===void 0?void 0:k.device.model)||""].join(" ").trim()||Ao.UNAVAILABLE}},"DefaultEventController");l.default=o,o.UNAVAILABLE="Unavailable"},816395:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=s(u=>{const g={};for(const[m,h]of Object.entries(u))if(!(h==null||h===""))if(typeof h=="number"||typeof h=="string")g[m]=h;else throw new TypeError("Unhandled type received while flattening attributes.");return g},"flattenEventAttributes");l.default=f},849298:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(449012));let m=s(class{constructor(a,r,n=new g.default){this.eventsClientConfiguration=a,this.ingestionURL=r,this.eventBufferConfiguration=n}},"EventIngestionConfiguration");l.default=m},200776:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=f(6918),h=g(f(422260));let a=s(class{start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(n){this.logger.error(`Event Reporting - Error starting the event buffer ${n}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(n){this.logger.error(`Event Reporting - Error stopping the event buffer ${n}`)}}reportEvent(n,e,t){return u(this,void 0,void 0,function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${n}, ${e}, ${JSON.stringify(t)}`),this.eventsToIgnore.includes(e)){this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${e} event will be ignored as it is in events to ignore`);return}try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:n,name:e,attributes:t})}catch(i){this.logger.error(`Event Reporting - Error adding event to buffer ${i}`)}})}destroy(){return u(this,void 0,void 0,function*(){this.destroyed=!0,this.stop(),m.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0})}constructor(n,e){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration:t,ingestionURL:i,eventBufferConfiguration:o}=n,{eventsToIgnore:c}=t;this.eventBuffer=new h.default(o,t,i,this.importantEvents,e),this.logger=e,this.eventsToIgnore=c,this.start()}},"DefaultMeetingEventReporter");l.default=a},121206:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{reportEvent(g,m,h){}start(){}stop(){}constructor(){}},"NoOpEventReporter");l.default=f},237427:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{getAuthenticationToken(){return this.authenticationToken}toJSON(){const g={};return g.type=this.type,g.v=this.v,g.meetingId=this.meetingId,g.attendeeId=this.attendeeId,g}constructor(g,m,h,a=[]){this.type="Meet",this.v=1,this.meetingId=g,this.attendeeId=m,this.eventsToIgnore=a,this.authenticationToken=h}},"MeetingEventsClientConfiguration");l.default=f},126325:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(Ii){return Ii&&Ii.__esModule?Ii:{default:Ii}};Object.defineProperty(l,"__esModule",{value:!0}),l.DefaultEventController=l.DefaultDevicePixelRatioMonitor=l.DefaultDeviceController=l.DefaultContentShareController=l.DefaultBrowserBehavior=l.DefaultAudioVideoFacade=l.DefaultAudioVideoController=l.DefaultAudioMixController=l.DefaultActiveSpeakerPolicy=l.DefaultActiveSpeakerDetector=l.DataMessage=l.CreateSDPTask=l.CreatePeerConnectionTask=l.ContentShareMediaStreamBroker=l.ContentShareConstants=l.ConsoleLogger=l.ConnectionHealthPolicyConfiguration=l.ConnectionHealthData=l.ClientVideoStreamReceivingReport=l.ClientMetricReportMediaType=l.ClientMetricReportDirection=l.ClientMetricReport=l.CleanStoppedSessionTask=l.CleanRestartedSessionTask=l.CheckVideoInputFeedback=l.CheckVideoConnectivityFeedback=l.CheckNetworkUDPConnectivityFeedback=l.CheckNetworkTCPConnectivityFeedback=l.CheckContentShareConnectivityFeedback=l.CheckCameraResolutionFeedback=l.CheckAudioOutputFeedback=l.CheckAudioInputFeedback=l.CheckAudioConnectivityFeedback=l.CanvasVideoFrameBuffer=l.CSPMonitor=l.BitrateParameters=l.BaseTask=l.BaseConnectionHealthPolicy=l.BackgroundReplacementVideoFrameProcessor=l.BackgroundFilterVideoFrameProcessor=l.BackgroundBlurVideoFrameProcessor=l.BackgroundBlurStrength=l.AudioVideoControllerState=l.AudioProfile=l.AudioLogEvent=l.Attendee=l.AttachMediaInputTask=l.AsyncScheduler=l.ApplicationMetadata=l.AllHighestVideoBandwidthPolicy=void 0,l.MeetingReadinessCheckerConfiguration=l.MeetingFeatures=l.MeetingEventsClientConfiguration=l.MediaDeviceProxyHandler=l.Maybe=l.LogLevel=l.Log=l.ListenForVolumeIndicatorsTask=l.LeaveAndReceiveLeaveAckTask=l.JoinAndReceiveIndexTask=l.IntervalScheduler=l.InMemoryJSONEventBuffer=l.GlobalMetricReport=l.GetUserMediaError=l.FullJitterLimitedBackoff=l.FullJitterBackoffFactory=l.FullJitterBackoff=l.FinishGatheringICECandidatesTask=l.EventIngestionConfiguration=l.EventBufferConfiguration=l.DeviceSelection=l.DevicePixelRatioWindowSource=l.DefaultWebSocketAdapter=l.DefaultVolumeIndicatorAdapter=l.DefaultVideoTransformDevice=l.DefaultVideoTileFactory=l.DefaultVideoTileController=l.DefaultVideoTile=l.DefaultVideoStreamIndex=l.DefaultVideoStreamIdSet=l.DefaultVideoFrameProcessorTimer=l.DefaultVideoFrameProcessorPipeline=l.DefaultVideoCaptureAndEncodeParameter=l.DefaultUserAgentParser=l.DefaultTranscriptionController=l.DefaultTransceiverController=l.DefaultSimulcastUplinkPolicyForContentShare=l.DefaultSimulcastUplinkPolicy=l.DefaultSignalingClient=l.DefaultSigV4=l.DefaultSessionStateController=l.DefaultReconnectController=l.DefaultRealtimeController=l.DefaultPingPong=l.DefaultModality=l.DefaultMessagingSession=l.DefaultMeetingSession=l.DefaultMeetingReadinessChecker=l.DefaultMeetingEventReporter=l.DefaultMediaDeviceFactory=void 0,l.RedundantAudioEncoderWorkerCode=l.RedundantAudioEncoder=l.ReconnectionHealthPolicy=l.ReceiveVideoStreamIndexTask=l.ReceiveVideoInputTask=l.ReceiveRemoteVideoPauseResumeTask=l.ReceiveAudioInputTask=l.RealtimeVolumeIndicator=l.RealtimeState=l.RealtimeAttendeePositionInFrame=l.PromoteToPrimaryMeetingTask=l.PromiseQueue=l.PrefetchSortBy=l.PrefetchOn=l.PermissionDeniedError=l.ParallelGroupTask=l.POSTLogger=l.OverconstrainedError=l.OpenSignalingConnectionTask=l.OnceTask=l.NotReadableError=l.NotFoundError=l.None=l.NoVideoUplinkBandwidthPolicy=l.NoVideoDownlinkBandwidthPolicy=l.NoOpVideoFrameProcessor=l.NoOpVideoElementFactory=l.NoOpTask=l.NoOpMediaStreamBroker=l.NoOpLogger=l.NoOpEventReporter=l.NoOpDeviceController=l.NoOpDebugLogger=l.NoOpAudioVideoController=l.NScaleVideoUplinkBandwidthPolicy=l.MutableVideoPreferences=l.MultiLogger=l.MonitorTask=l.ModelSpecBuilder=l.MessagingSessionConfiguration=l.Message=l.MeetingSessionVideoAvailability=l.MeetingSessionURLs=l.MeetingSessionTURNCredentials=l.MeetingSessionStatusCode=l.MeetingSessionStatus=l.MeetingSessionLifecycleEventCondition=l.MeetingSessionLifecycleEvent=l.MeetingSessionCredentials=l.MeetingSessionConfiguration=void 0,l.VideoLogEvent=l.VideoFxProcessor=l.VideoCodecCapability=l.VideoAdaptiveProbePolicy=l.Versioning=l.UnusableAudioWarningConnectionHealthPolicy=l.TypeError=l.TranscriptionStatusType=l.TranscriptionStatus=l.TranscriptResult=l.TranscriptLanguageWithScore=l.TranscriptItemType=l.TranscriptItem=l.TranscriptEntity=l.TranscriptAlternative=l.Transcript=l.TimeoutTask=l.TimeoutScheduler=l.TaskStatus=l.TargetDisplaySize=l.SubscribeAndReceiveSubscribeAckTask=l.StreamMetricReport=l.Some=l.SingleNodeAudioTransformDevice=l.SimulcastVideoStreamIndex=l.SimulcastTransceiverController=l.SimulcastLayers=l.SimulcastContentShareTransceiverController=l.SignalingClientVideoSubscriptionConfiguration=l.SignalingClientSubscribe=l.SignalingClientJoin=l.SignalingClientEventType=l.SignalingClientEvent=l.SignalingClientConnectionRequest=l.SignalingAndMetricsConnectionMonitor=l.SetRemoteDescriptionTask=l.SetLocalDescriptionTask=l.SessionStateControllerTransitionResult=l.SessionStateControllerState=l.SessionStateControllerDeferPriority=l.SessionStateControllerAction=l.ServerSideNetworkAdaption=l.SerialGroupTask=l.SendingAudioFailureConnectionHealthPolicy=l.SendAndReceiveDataMessagesTask=l.SDPMediaSection=l.SDPCandidateType=l.SDP=l.RunnableTask=l.RedundantAudioRecoveryMetricReport=void 0,l.isVideoTransformDevice=l.isDestroyable=l.isAudioTransformDevice=l.ZLIBTextCompressor=l.WebSocketReadyState=l.WaitForAttendeePresenceTask=l.VoiceFocusTransformDevice=l.VoiceFocusDeviceTransformer=l.VideoTileState=l.VideoStreamDescription=l.VideoSource=l.VideoQualitySettings=l.VideoQualityAdaptationPreference=l.VideoPriorityBasedPolicyConfig=l.VideoPriorityBasedPolicy=l.VideoPreferences=l.VideoPreference=l.VideoOnlyTransceiverController=void 0;const g=u(f(961381));l.AllHighestVideoBandwidthPolicy=g.default;const m=u(f(461886));l.ApplicationMetadata=m.default;const h=u(f(359454));l.AsyncScheduler=h.default;const a=u(f(579219));l.AttachMediaInputTask=a.default;const r=u(f(109520));l.Attendee=r.default;const n=u(f(411660));l.AudioLogEvent=n.default;const e=u(f(754790));l.AudioProfile=e.default;const t=u(f(263385));l.AudioVideoControllerState=t.default;const i=u(f(39833));l.BackgroundBlurStrength=i.default;const o=u(f(896226));l.BackgroundBlurVideoFrameProcessor=o.default;const c=u(f(611430));l.BackgroundFilterVideoFrameProcessor=c.default;const p=u(f(196252));l.BackgroundReplacementVideoFrameProcessor=p.default;const S=u(f(702577));l.BaseConnectionHealthPolicy=S.default;const d=u(f(337063));l.BaseTask=d.default;const y=u(f(819730));l.BitrateParameters=y.default;const E=u(f(105884));l.CSPMonitor=E.default;const I=u(f(274246));l.CanvasVideoFrameBuffer=I.default;const A=u(f(173092));l.CheckAudioConnectivityFeedback=A.default;const L=u(f(617969));l.CheckAudioInputFeedback=L.default;const M=u(f(595990));l.CheckAudioOutputFeedback=M.default;const k=u(f(882218));l.CheckCameraResolutionFeedback=k.default;const w=u(f(484388));l.CheckContentShareConnectivityFeedback=w.default;const N=u(f(427473));l.CheckNetworkTCPConnectivityFeedback=N.default;const T=u(f(493793));l.CheckNetworkUDPConnectivityFeedback=T.default;const O=u(f(369953));l.CheckVideoConnectivityFeedback=O.default;const D=u(f(118550));l.CheckVideoInputFeedback=D.default;const G=u(f(941513));l.CleanRestartedSessionTask=G.default;const K=u(f(573628));l.CleanStoppedSessionTask=K.default;const H=u(f(725462));l.ClientMetricReport=H.default;const q=u(f(19933));l.ClientMetricReportDirection=q.default;const me=u(f(150224));l.ClientMetricReportMediaType=me.default;const we=u(f(849333));l.ClientVideoStreamReceivingReport=we.default;const ue=u(f(140426));l.ConnectionHealthData=ue.default;const Pe=u(f(354672));l.ConnectionHealthPolicyConfiguration=Pe.default;const Ye=u(f(356647));l.ConsoleLogger=Ye.default;const be=u(f(116631));l.ContentShareConstants=be.default;const He=u(f(65215));l.ContentShareMediaStreamBroker=He.default;const Ke=u(f(483066));l.CreatePeerConnectionTask=Ke.default;const Ue=u(f(87099));l.CreateSDPTask=Ue.default;const ht=u(f(361862));l.DataMessage=ht.default;const Tt=u(f(965833));l.DefaultActiveSpeakerDetector=Tt.default;const st=u(f(436133));l.DefaultActiveSpeakerPolicy=st.default;const ut=u(f(66967));l.DefaultAudioMixController=ut.default;const We=u(f(493783));l.DefaultAudioVideoController=We.default;const _t=u(f(299495));l.DefaultAudioVideoFacade=_t.default;const Rt=u(f(48839));l.DefaultBrowserBehavior=Rt.default;const Ae=u(f(509419));l.DefaultContentShareController=Ae.default;const $t=u(f(228991));l.DefaultDeviceController=$t.default;const rt=u(f(436517));l.DefaultDevicePixelRatioMonitor=rt.default;const Ft=u(f(491799));l.DefaultEventController=Ft.default;const en=u(f(715731));l.DefaultMediaDeviceFactory=en.default;const on=u(f(200776));l.DefaultMeetingEventReporter=on.default;const Dn=u(f(359455));l.DefaultMeetingReadinessChecker=Dn.default;const Yt=u(f(232871));l.DefaultMeetingSession=Yt.default;const zn=u(f(28403));l.DefaultMessagingSession=zn.default;const vn=u(f(578555));l.DefaultModality=vn.default;const mt=u(f(504839));l.DefaultPingPong=mt.default;const pt=u(f(337423));l.DefaultRealtimeController=pt.default;const Qe=u(f(146253));l.DefaultReconnectController=Qe.default;const Ht=u(f(866003));l.DefaultSessionStateController=Ht.default;const xt=u(f(651033));l.DefaultSigV4=xt.default;const wn=u(f(572709));l.DefaultSignalingClient=wn.default;const kt=u(f(583646));l.DefaultSimulcastUplinkPolicy=kt.default;const J=u(f(121919));l.DefaultSimulcastUplinkPolicyForContentShare=J.default;const _e=u(f(1727));l.DefaultTransceiverController=_e.default;const Oe=u(f(624233));l.DefaultTranscriptionController=Oe.default;const Ne=u(f(916889));l.DefaultUserAgentParser=Ne.default;const $e=u(f(769839));l.DefaultVideoCaptureAndEncodeParameter=$e.default;const Fe=u(f(222109));l.DefaultVideoFrameProcessorPipeline=Fe.default;const oe=u(f(226830));l.DefaultVideoFrameProcessorTimer=oe.default;const Ce=u(f(540079));l.DefaultVideoStreamIdSet=Ce.default;const z=u(f(983395));l.DefaultVideoStreamIndex=z.default;const Y=u(f(559521));l.DefaultVideoTile=Y.default;const de=u(f(354013));l.DefaultVideoTileController=de.default;const ce=u(f(318415));l.DefaultVideoTileFactory=ce.default;const De=u(f(583920));l.DefaultVideoTransformDevice=De.default;const Ie=u(f(948159));l.DefaultVolumeIndicatorAdapter=Ie.default;const Le=u(f(19071));l.DefaultWebSocketAdapter=Le.default;const fe=u(f(704988));l.DevicePixelRatioWindowSource=fe.default;const ge=u(f(406516));l.DeviceSelection=ge.default;const R=u(f(449012));l.EventBufferConfiguration=R.default;const ae=u(f(849298));l.EventIngestionConfiguration=ae.default;const pe=u(f(591983));l.FinishGatheringICECandidatesTask=pe.default;const Se=u(f(252383));l.FullJitterBackoff=Se.default;const X=u(f(675721));l.FullJitterBackoffFactory=X.default;const ft=u(f(985129));l.FullJitterLimitedBackoff=ft.default;const ke=u(f(139945));l.GetUserMediaError=ke.default;const ze=u(f(435870));l.GlobalMetricReport=ze.default;const Gt=u(f(422260));l.InMemoryJSONEventBuffer=Gt.default;const dt=u(f(449341));l.IntervalScheduler=dt.default;const Qn=u(f(355888));l.JoinAndReceiveIndexTask=Qn.default;const Wn=u(f(410419));l.LeaveAndReceiveLeaveAckTask=Wn.default;const Vt=u(f(584980));l.ListenForVolumeIndicatorsTask=Vt.default;const yn=u(f(215756));l.Log=yn.default;const Zt=u(f(343500));l.LogLevel=Zt.default;const Rn=u(f(514808));l.MediaDeviceProxyHandler=Rn.default;const Nn=u(f(237427));l.MeetingEventsClientConfiguration=Nn.default;const fi=u(f(125875));l.MeetingFeatures=fi.default;const ct=u(f(939638));l.MeetingReadinessCheckerConfiguration=ct.default;const Ze=u(f(416570));l.MeetingSessionConfiguration=Ze.default;const Xt=u(f(40834));l.MeetingSessionCredentials=Xt.default;const Ot=u(f(123310));l.MeetingSessionLifecycleEvent=Ot.default;const sn=u(f(867225));l.MeetingSessionLifecycleEventCondition=sn.default;const En=u(f(91572));l.MeetingSessionStatus=En.default;const On=u(f(407833));l.MeetingSessionStatusCode=On.default;const Sn=u(f(138995));l.MeetingSessionTURNCredentials=Sn.default;const bn=u(f(700804));l.MeetingSessionURLs=bn.default;const xn=u(f(544596));l.MeetingSessionVideoAvailability=xn.default;const B=u(f(76422));l.Message=B.default;const re=u(f(733056));l.MessagingSessionConfiguration=re.default;const Ee=u(f(665572));l.ModelSpecBuilder=Ee.default;const Me=u(f(159636));l.MonitorTask=Me.default;const qe=u(f(302323));l.MultiLogger=qe.default;const St=u(f(978774));l.NScaleVideoUplinkBandwidthPolicy=St.default;const At=u(f(578358));l.NoOpAudioVideoController=At.default;const Et=u(f(73145));l.NoOpDebugLogger=Et.default;const gt=u(f(805644));l.NoOpDeviceController=gt.default;const Dt=u(f(121206));l.NoOpEventReporter=Dt.default;const jt=u(f(350928));l.NoOpLogger=jt.default;const Cn=u(f(66146));l.NoOpMediaStreamBroker=Cn.default;const _n=u(f(1818));l.NoOpTask=_n.default;const Bn=u(f(60234));l.NoOpVideoElementFactory=Bn.default;const Gn=u(f(572618));l.NoOpVideoFrameProcessor=Gn.default;const hi=u(f(684947));l.NoVideoDownlinkBandwidthPolicy=hi.default;const Ei=u(f(433481));l.NoVideoUplinkBandwidthPolicy=Ei.default;const Ci=u(f(701887));l.NotFoundError=Ci.default;const pi=u(f(2783));l.NotReadableError=pi.default;const mi=u(f(976179));l.OnceTask=mi.default;const Di=u(f(912790));l.OpenSignalingConnectionTask=Di.default;const xi=u(f(588462));l.OverconstrainedError=xi.default;const Li=u(f(684362));l.POSTLogger=Li.default;const gi=u(f(669492));l.ParallelGroupTask=gi.default;const Si=u(f(597702));l.PermissionDeniedError=Si.default;const Ti=u(f(381458));l.PrefetchOn=Ti.default;const Hi=u(f(748722));l.PrefetchSortBy=Hi.default;const kn=u(f(518623));l.PromiseQueue=kn.default;const Xn=u(f(771132));l.PromoteToPrimaryMeetingTask=Xn.default;const ti=u(f(554455));l.RealtimeAttendeePositionInFrame=ti.default;const Bi=u(f(220781));l.RealtimeState=Bi.default;const Ai=u(f(640079));l.RealtimeVolumeIndicator=Ai.default;const vi=u(f(981373));l.ReceiveAudioInputTask=vi.default;const Ni=u(f(130489));l.ReceiveRemoteVideoPauseResumeTask=Ni.default;const Ro=u(f(640882));l.ReceiveVideoInputTask=Ro.default;const ko=u(f(768034));l.ReceiveVideoStreamIndexTask=ko.default;const jr=u(f(583981));l.ReconnectionHealthPolicy=jr.default;const Do=u(f(317510));l.RedundantAudioEncoder=Do.default;const Lo=u(f(417238));l.RedundantAudioEncoderWorkerCode=Lo.default;const $r=u(f(410779));l.RedundantAudioRecoveryMetricReport=$r.default;const Kr=u(f(426307));l.RunnableTask=Kr.default;const Sa=u(f(182394));l.SDP=Sa.default;const Jr=u(f(250353));l.SDPCandidateType=Jr.default;const Yr=u(f(641125));l.SDPMediaSection=Yr.default;const va=u(f(402858));l.SendAndReceiveDataMessagesTask=va.default;const No=u(f(139316));l.SendingAudioFailureConnectionHealthPolicy=No.default;const xo=u(f(730157));l.SerialGroupTask=xo.default;const _r=u(f(493149));l.ServerSideNetworkAdaption=_r.default;const Bo=u(f(860872));l.SessionStateControllerAction=Bo.default;const ya=u(f(924292));l.SessionStateControllerDeferPriority=ya.default;const Fo=u(f(956877));l.SessionStateControllerState=Fo.default;const Vo=u(f(547452));l.SessionStateControllerTransitionResult=Vo.default;const Uo=u(f(713797));l.SetLocalDescriptionTask=Uo.default;const ba=u(f(189362));l.SetRemoteDescriptionTask=ba.default;const Tr=u(f(14050));l.SignalingAndMetricsConnectionMonitor=Tr.default;const Ea=u(f(960881));l.SignalingClientConnectionRequest=Ea.default;const Ho=u(f(710196));l.SignalingClientEvent=Ho.default;const zo=u(f(497324));l.SignalingClientEventType=zo.default;const Wo=u(f(248970));l.SignalingClientJoin=Wo.default;const Qr=u(f(790344));l.SignalingClientSubscribe=Qr.default;const Go=u(f(463258));l.SignalingClientVideoSubscriptionConfiguration=Go.default;const Ji=u(f(897111));l.SimulcastContentShareTransceiverController=Ji.default;const fr=u(f(324374));l.SimulcastLayers=fr.default;const Ir=u(f(439527));l.SimulcastTransceiverController=Ir.default;const jo=u(f(243563));l.SimulcastVideoStreamIndex=jo.default;const Ca=u(f(98450));l.SingleNodeAudioTransformDevice=Ca.default;const Xr=u(f(168321));l.StreamMetricReport=Xr.default;const Zr=u(f(490525));l.SubscribeAndReceiveSubscribeAckTask=Zr.default;const zi=u(f(141572));l.TargetDisplaySize=zi.default;const $o=u(f(438416));l.TaskStatus=$o.default;const Ko=u(f(747675));l.TimeoutScheduler=Ko.default;const Jo=u(f(33001));l.TimeoutTask=Jo.default;const wr=u(f(153084));l.Transcript=wr.default;const Yo=u(f(332221));l.TranscriptAlternative=Yo.default;const _a=u(f(100727));l.TranscriptEntity=_a.default;const Ta=u(f(703535));l.TranscriptItem=Ta.default;const qr=u(f(432743));l.TranscriptItemType=qr.default;const Qo=u(f(745694));l.TranscriptLanguageWithScore=Qo.default;const Xo=u(f(424673));l.TranscriptResult=Xo.default;const eo=u(f(201182));l.TranscriptionStatus=eo.default;const Zo=u(f(330870));l.TranscriptionStatusType=Zo.default;const qo=u(f(647970));l.TypeError=qo.default;const Or=u(f(979841));l.UnusableAudioWarningConnectionHealthPolicy=Or.default;const hr=u(f(244504));l.Versioning=hr.default;const to=u(f(806321));l.VideoAdaptiveProbePolicy=to.default;const es=u(f(232666));l.VideoCodecCapability=es.default;const ts=u(f(852376));l.VideoFxProcessor=ts.default;const Ia=u(f(182613));l.VideoLogEvent=Ia.default;const no=u(f(45519));l.VideoOnlyTransceiverController=no.default;const io=u(f(531482));l.VideoPreference=io.default;const ns=u(f(774377));l.VideoPreferences=ns.default;const ro=u(f(63754));l.VideoPriorityBasedPolicy=ro.default;const is=u(f(205144));l.VideoPriorityBasedPolicyConfig=is.default;const Ar=u(f(821234));l.VideoQualityAdaptationPreference=Ar.default;const oo=u(f(74647));l.VideoQualitySettings=oo.default;const rs=u(f(471066));l.VideoSource=rs.default;const os=u(f(561720));l.VideoStreamDescription=os.default;const wa=u(f(383017));l.VideoTileState=wa.default;const ss=u(f(605687));l.VoiceFocusDeviceTransformer=ss.default;const as=u(f(439300));l.VoiceFocusTransformDevice=as.default;const so=u(f(753973));l.WaitForAttendeePresenceTask=so.default;const ao=u(f(293975));l.WebSocketReadyState=ao.default;const lo=u(f(864652));l.ZLIBTextCompressor=lo.default;const ls=f(774377);Object.defineProperty(l,"MutableVideoPreferences",{enumerable:!0,get:function(){return ls.MutableVideoPreferences}});const pr=f(153822);Object.defineProperty(l,"Some",{enumerable:!0,get:function(){return pr.Some}}),Object.defineProperty(l,"None",{enumerable:!0,get:function(){return pr.None}}),Object.defineProperty(l,"Maybe",{enumerable:!0,get:function(){return pr.Maybe}});const ds=f(816302);Object.defineProperty(l,"isAudioTransformDevice",{enumerable:!0,get:function(){return ds.isAudioTransformDevice}});const co=f(6918);Object.defineProperty(l,"isDestroyable",{enumerable:!0,get:function(){return co.isDestroyable}});const Wi=f(150197);Object.defineProperty(l,"isVideoTransformDevice",{enumerable:!0,get:function(){return Wi.isVideoTransformDevice}})},356647:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(343500));let m=s(class{info(a){this.log(g.default.INFO,a)}warn(a){this.log(g.default.WARN,a)}error(a){this.log(g.default.ERROR,a)}debug(a){g.default.DEBUG<this.level||(typeof a=="string"?this.log(g.default.DEBUG,a):a?this.log(g.default.DEBUG,a()):this.log(g.default.DEBUG,""+a))}setLogLevel(a){this.level=a}getLogLevel(){return this.level}log(a,r){if(a<this.level)return;const e=`${new Date().toISOString()} [${g.default[a]}] ${this.name} - ${r}`;switch(a){case g.default.ERROR:console.error(e);break;case g.default.WARN:console.warn(e);break;case g.default.DEBUG:console.debug(e.replace(/\\r\\n/g,`
`));break;case g.default.INFO:console.info(e);break}}constructor(a,r=g.default.WARN){this.name=a,this.level=r}},"ConsoleLogger");l.default=m},215756:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(g,m,h,a){this.sequenceNumber=g,this.message=m,this.timestampMs=h,this.logLevel=a}},"Log");l.default=f},343500:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.LogLevel=void 0;var f;(function(u){u[u.DEBUG=0]="DEBUG",u[u.INFO=1]="INFO",u[u.WARN=2]="WARN",u[u.ERROR=3]="ERROR",u[u.OFF=4]="OFF"})(f=l.LogLevel||(l.LogLevel={})),l.default=f},302323:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(343500));let m=s(class{info(a){for(const r of this._loggers)r.info(a)}warn(a){for(const r of this._loggers)r.warn(a)}error(a){for(const r of this._loggers)r.error(a)}debug(a){let r,n;typeof a=="string"?n=a:a?n=s(()=>(r||(r=a()),r),"memoized"):n=""+a;for(const e of this._loggers)e.debug(n)}setLogLevel(a){for(const r of this._loggers)r.setLogLevel(a)}getLogLevel(){for(const a of this._loggers)return a.getLogLevel();return g.default.OFF}constructor(...a){this._loggers=a}},"MultiLogger");l.default=m},73145:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(343500)),m=u(f(350928));let h=s(class extends m.default{constructor(){super(g.default.DEBUG)}},"NoOpDebugLogger");l.default=h},350928:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(343500));let m=s(class{info(a){}warn(a){}error(a){}debug(a){g.default.DEBUG<this.level||typeof a!="string"&&a()}setLogLevel(a){this.level=a}getLogLevel(){return this.level}constructor(a=g.default.OFF){this.level=a}},"NoOpLogger");l.default=m},684362:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(449341)),h=g(f(215756)),a=g(f(343500));let r=s(class Du{addEventListener(){!this.eventListener||!("window"in f.g)||!window.addEventListener||window.addEventListener("unload",this.eventListener)}removeEventListener(){!this.eventListener||!("window"in f.g)||!window.removeEventListener||window.removeEventListener("unload",this.eventListener)}debug(e){a.default.DEBUG<this.logLevel||(typeof e=="string"?this.log(a.default.DEBUG,e):e?this.log(a.default.DEBUG,e()):this.log(a.default.DEBUG,""+e))}info(e){this.log(a.default.INFO,e)}warn(e){this.log(a.default.WARN,e)}error(e){this.log(a.default.ERROR,e)}setLogLevel(e){this.logLevel=e}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new m.default(this.intervalMs),this.intervalScheduler.start(()=>u(this,void 0,void 0,function*(){if(this.lock===!0||this.getLogCaptureSize()===0)return;this.lock=!0;const e=this.logCapture.slice(0,this.batchSize),t=this.makeRequestBody(e);try{(yield fetch(this.url,Object.assign({method:"POST",body:t},this.headers?{headers:this.headers}:{}))).status===200&&(this.logCapture=this.logCapture.slice(e.length))}catch(i){console.warn("[POSTLogger] "+i.message)}finally{this.lock=!1}}))}stop(){var e;(e=this.intervalScheduler)===null||e===void 0||e.stop(),this.intervalScheduler=void 0,this.removeEventListener();const t=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,t)}destroy(){return u(this,void 0,void 0,function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0})}makeRequestBody(e){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:e}))}log(e,t){if(e<this.logLevel)return;const i=Date.now();this.logCapture.push(new h.default(this.sequenceNumber,t,i,a.default[e])),this.sequenceNumber+=1}constructor(e){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:t,batchSize:i=Du.BATCH_SIZE,intervalMs:o=Du.INTERVAL_MS,logLevel:c=a.default.WARN,metadata:p,headers:S}=e;this.url=t,this.batchSize=i,this.intervalMs=o,this.logLevel=c,this.metadata=p,this.headers=S,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}},"POSTLogger");l.default=r,r.BATCH_SIZE=85,r.INTERVAL_MS=2e3},715731:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(514808));let m=s(class{create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new g.default);throw new Error("navigator.mediaDevices is not supported")}constructor(){this.isMediaDevicesSupported=typeof navigator<"u"&&!!navigator.mediaDevices}},"DefaultMediaDeviceFactory");l.default=m},514808:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(359454)),h=g(f(449341));let a=s(class mS{sortedDeviceList(){return u(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0)})}handleDeviceChangeEvent(){for(const n of this.deviceChangeListeners)m.default.nextTick(()=>{if(this.deviceChangeListeners.has(n)){const e=new Event("devicechange");typeof n=="function"?n(e):n.handleEvent(e)}})}constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(n,e,t)=>{if(!Reflect.has(n,e))return;if(!("ondevicechange"in navigator.mediaDevices)){if(e==="addEventListener")return this.patchAddEventListener(n,e,t);if(e==="removeEventListener")return this.patchRemoveEventListener(n,e,t)}const i=Reflect.get(n,e,t);return typeof i=="function"?i.bind(n):i},this.patchAddEventListener=(n,e,t)=>{const i=Reflect.get(n,e,t);return(o,c,p)=>{if(o==="devicechange")this.deviceChangeListeners.add(c),this.scheduler||(this.scheduler=new h.default(mS.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists));else return Reflect.apply(i,n,[o,c,p])}},this.patchRemoveEventListener=(n,e,t)=>{const i=Reflect.get(n,e,t);return(o,c,p)=>{if(o==="devicechange")this.deviceChangeListeners.delete(c),this.deviceChangeListeners.size===0&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null);else return Reflect.apply(i,n,[o,c,p])}},this.pollDeviceLists=()=>u(this,void 0,void 0,function*(){const n=yield this.sortedDeviceList();this.devices&&(n.length!==this.devices.length||n.some((t,i)=>t.deviceId!==this.devices[i].deviceId))&&this.handleDeviceChangeEvent(),this.devices=n})}},"MediaDeviceProxyHandler");l.default=a,a.INTERVAL_MS=1e3},66146:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(g){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(g){}removeMediaStreamBrokerObserver(g){}},"NoOpMediaStreamBroker");l.default=f},173092:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioConnectivityFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.AudioInputRequestFailed=1]="AudioInputRequestFailed",u[u.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",u[u.ConnectionFailed=3]="ConnectionFailed",u[u.AudioNotReceived=4]="AudioNotReceived"})(f=l.CheckAudioConnectivityFeedback||(l.CheckAudioConnectivityFeedback={})),l.default=f},617969:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioInputFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied"})(f=l.CheckAudioInputFeedback||(l.CheckAudioInputFeedback={})),l.default=f},595990:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioOutputFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed"})(f=l.CheckAudioOutputFeedback||(l.CheckAudioOutputFeedback={})),l.default=f},882218:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckCameraResolutionFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.ResolutionNotSupported=2]="ResolutionNotSupported",u[u.PermissionDenied=3]="PermissionDenied"})(f=l.CheckCameraResolutionFeedback||(l.CheckCameraResolutionFeedback={})),l.default=f},484388:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckContentShareConnectivityFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied",u[u.TimedOut=3]="TimedOut",u[u.ConnectionFailed=4]="ConnectionFailed"})(f=l.CheckContentShareConnectivityFeedback||(l.CheckContentShareConnectivityFeedback={})),l.default=f},427473:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkTCPConnectivityFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",u[u.ConnectionFailed=2]="ConnectionFailed",u[u.ICENegotiationFailed=3]="ICENegotiationFailed"})(f=l.CheckNetworkTCPConnectivityFeedback||(l.CheckNetworkTCPConnectivityFeedback={})),l.default=f},493793:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkUDPConnectivityFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",u[u.ConnectionFailed=2]="ConnectionFailed",u[u.ICENegotiationFailed=3]="ICENegotiationFailed"})(f=l.CheckNetworkUDPConnectivityFeedback||(l.CheckNetworkUDPConnectivityFeedback={})),l.default=f},369953:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoConnectivityFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.VideoInputRequestFailed=1]="VideoInputRequestFailed",u[u.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",u[u.ConnectionFailed=3]="ConnectionFailed",u[u.VideoNotSent=4]="VideoNotSent"})(f=l.CheckVideoConnectivityFeedback||(l.CheckVideoConnectivityFeedback={})),l.default=f},118550:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoInputFeedback=void 0;var f;(function(u){u[u.Succeeded=0]="Succeeded",u[u.Failed=1]="Failed",u[u.PermissionDenied=2]="PermissionDenied"})(f=l.CheckVideoInputFeedback||(l.CheckVideoInputFeedback={})),l.default=f},359455:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(L,M,k,w){function N(T){return T instanceof k?T:new k(function(O){O(T)})}return s(N,"adopt"),new(k||(k=Promise))(function(T,O){function D(H){try{K(w.next(H))}catch(q){O(q)}}s(D,"fulfilled");function G(H){try{K(w.throw(H))}catch(q){O(q)}}s(G,"rejected");function K(H){H.done?T(H.value):N(H.value).then(D,G)}s(K,"step"),K((w=w.apply(L,M||[])).next())})},g=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(66967)),h=g(f(48839)),a=g(f(228991)),r=g(f(597702)),n=g(f(337063)),e=g(f(33001)),t=g(f(173092)),i=g(f(617969)),o=g(f(595990)),c=g(f(882218)),p=g(f(484388)),S=g(f(427473)),d=g(f(493793)),y=g(f(369953)),E=g(f(118550)),I=g(f(939638));let A=s(class gS{static delay(M){return u(this,void 0,void 0,function*(){return new Promise(k=>setTimeout(k,M))})}checkAudioInput(M){return u(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(M),yield this.meetingSession.audioVideo.stopAudioInput(),i.default.Succeeded}catch(k){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${k}`),k instanceof r.default?i.default.PermissionDenied:i.default.Failed}})}checkAudioOutput(M,k){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return u(this,void 0,void 0,function*(){try{const N=M?a.default.getIntrinsicDeviceId(M):"";return yield this.playTone(N,this.configuration.audioOutputFrequency,w),(yield k())?o.default.Succeeded:o.default.Failed}catch(N){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${N}`),o.default.Failed}finally{this.stopTone()}})}playTone(M,k,w){return u(this,void 0,void 0,function*(){const T=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=a.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=k,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const D=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,D),this.gainNode.gain.linearRampToValueAtTime(T,D+.1),this.oscillatorNode.start();const G=new m.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield G.bindAudioDevice({deviceId:M}))}catch(K){this.logger.error(`Failed to bind audio device: ${K}`)}try{yield G.bindAudioElement(w||new Audio)}catch(K){this.logger.error(`Failed to bind audio element: ${K}`)}yield G.bindAudioStream(this.destinationStream.stream)})}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const M=1,k=.1,w=this.configuration.audioOutputGain,N=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(w,N+k+M),this.gainNode.gain.linearRampToValueAtTime(0,N+k*2+M),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(M){return u(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(M),yield this.meetingSession.audioVideo.stopVideoInput(),E.default.Succeeded}catch(k){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${k}`),k instanceof r.default?E.default.PermissionDenied:E.default.Failed}})}checkCameraResolution(M,k,w){return u(this,void 0,void 0,function*(){let N;try{const T=a.default.getIntrinsicDeviceId(M),O={video:this.calculateVideoConstraint(T,k,w)};N=yield navigator.mediaDevices.getUserMedia(O)}catch(T){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${k} height ${w} failed with error ${T}`),T&&T.name==="OverconstrainedError"?c.default.ResolutionNotSupported:T&&T.name==="NotAllowedError"?c.default.PermissionDenied:c.default.Failed}finally{N&&N.getTracks().forEach(function(T){T.stop()})}return c.default.Succeeded})}calculateVideoConstraint(M,k,w){const N=this.browserBehavior.requiresResolutionAlignment(k,w),T={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(T.deviceId=M,T.width=k,T.height=w):(T.deviceId={exact:M},T.width={exact:N[0]},T.height={exact:N[1]}),T}checkContentShareConnectivity(M){return u(this,void 0,void 0,function*(){let k=!1,w=!1;const N={contentShareDidStart:()=>{k=!0}},T={audioVideoDidStart:()=>{w=!0}};try{return this.meetingSession.audioVideo.addObserver(T),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(N),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(M),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return w&&k})),w?(yield this.stopMeeting(),k?p.default.Succeeded:p.default.TimedOut):p.default.ConnectionFailed}catch(O){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${O}`),O.name==="NotAllowedError"?p.default.PermissionDenied:p.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(T),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(N)}})}checkAudioConnectivity(M){return u(this,void 0,void 0,function*(){let k=!1;const w={packetsReceived:0},N=this.meetingSession.audioVideo,T={metricsDidReceive(D){D.getRTCStatsReport().forEach(G=>{G.type==="inbound-rtp"&&(G.mediaType==="audio"||G.kind==="audio")&&(w.packetsReceived=G.packetsReceived)})}},O=s((D,G,K,H)=>{D===this.meetingSession.configuration.credentials.attendeeId&&G&&(k=!0)},"attendeePresenceHandler");try{yield N.startAudioInput(M)}catch(D){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${D}`),D instanceof r.default?t.default.AudioInputPermissionDenied:t.default.AudioInputRequestFailed}return N.realtimeSubscribeToAttendeeIdPresence(O),N.addObserver(T),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return this.isAudioConnectionSuccessful(k,w)})),N.removeObserver(T),N.realtimeUnsubscribeToAttendeeIdPresence(O),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(k,w)?t.default.Succeeded:t.default.AudioNotReceived):(N.removeObserver(T),N.realtimeUnsubscribeToAttendeeIdPresence(O),yield this.meetingSession.audioVideo.stopAudioInput(),t.default.ConnectionFailed)})}checkVideoConnectivity(M){return u(this,void 0,void 0,function*(){const k=this.meetingSession.audioVideo;let w=0;const N={metricsDidReceive(T){T.getRTCStatsReport().forEach(D=>{D.type==="outbound-rtp"&&(D.mediaType==="video"||D.kind==="video")&&(w=D.packetsSent)})}};try{yield k.startVideoInput(M)}catch(T){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${T}`),T instanceof r.default?y.default.VideoInputPermissionDenied:y.default.VideoInputRequestFailed}return k.addObserver(N),(yield this.startMeeting())?(k.startLocalVideoTile(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return w>0})),yield k.stopVideoInput(),yield this.stopMeeting(),k.removeObserver(N),w<=0?y.default.VideoNotSent:y.default.Succeeded):y.default.ConnectionFailed})}checkNetworkUDPConnectivity(){return u(this,void 0,void 0,function*(){let M=!1;const k={metricsDidReceive(N){N.getRTCStatsReport().forEach(O=>{O.type==="candidate-pair"&&O.state==="succeeded"&&(M=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(N){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${N}`),d.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=N=>{const T=this.originalURLRewriter(N);return T.includes("transport=tcp")?"":T};const w=this.meetingSession.audioVideo;return w.addObserver(k),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return M})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),w.removeObserver(k),M?d.default.Succeeded:d.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,d.default.ConnectionFailed)})}checkNetworkTCPConnectivity(){return u(this,void 0,void 0,function*(){let M=!1;const k={metricsDidReceive(N){N.getRTCStatsReport().forEach(O=>{O.type==="candidate-pair"&&O.state==="succeeded"&&(M=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(N){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${N}`),S.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=N=>{const T=this.originalURLRewriter(N);return T.includes("transport=udp")?"":T};const w=this.meetingSession.audioVideo;return w.addObserver(k),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return M})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),w.removeObserver(k),M?S.default.Succeeded:S.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,S.default.ConnectionFailed)})}startMeeting(){return u(this,void 0,void 0,function*(){let M=!1;const k={audioVideoDidStart:()=>{M=!0}};return this.meetingSession.audioVideo.addObserver(k),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return M})),this.meetingSession.audioVideo.removeObserver(k),M})}stopMeeting(){return u(this,void 0,void 0,function*(){let M=!1;const k={audioVideoDidStop:w=>{M=!0}};return this.meetingSession.audioVideo.addObserver(k),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask(()=>u(this,void 0,void 0,function*(){return M})),this.meetingSession.audioVideo.removeObserver(k),M})}executeTimeoutTask(M){return u(this,void 0,void 0,function*(){let k=!1,w=s(class extends n.default{cancel(){this.isCancelled=!0}run(){return u(this,void 0,void 0,function*(){for(;!this.isCancelled;){if(yield M()){k=!0;break}yield gS.delay(this.waitDurationMs)}})}constructor(O,D){super(O),this.waitDurationMs=D,this.isCancelled=!1}},"CheckForConditionTask");return yield new e.default(this.logger,new w(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs).run(),k})}isAudioConnectionSuccessful(M,k){return M&&k.packetsReceived>0}constructor(M,k,w=new I.default){this.logger=M,this.meetingSession=k,this.configuration=w,this.browserBehavior=new h.default}},"DefaultMeetingReadinessChecker");l.default=A},939638:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}},"MeetingReadinessCheckerConfiguration");l.default=f},232871:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(d,y,E,I){function A(L){return L instanceof E?L:new E(function(M){M(L)})}return s(A,"adopt"),new(E||(E=Promise))(function(L,M){function k(T){try{N(I.next(T))}catch(O){M(O)}}s(k,"fulfilled");function w(T){try{N(I.throw(T))}catch(O){M(O)}}s(w,"rejected");function N(T){T.done?L(T.value):A(T.value).then(k,w)}s(N,"step"),N((I=I.apply(d,y||[])).next())})},g=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(493783)),h=g(f(299495)),a=g(f(252383)),r=g(f(48839)),n=g(f(65215)),e=g(f(509419)),t=g(f(105884)),i=f(6918),o=g(f(491799)),c=g(f(146253)),p=g(f(19071));let S=s(class{get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return u(this,void 0,void 0,function*(){i.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),i.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),i.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),t.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0})}checkBrowserSupportAndFeatureConfiguration(){const y=new r.default,E=`${y.name()} ${y.majorVersion()} (${y.version()})`;if(this.logger.info(`browser is ${E}`),y.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${y.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!y.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(y.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${y.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!y.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(y){return!!(y&&y.addObserver)}constructor(y,E,I,A){this._eventController=A,this._configuration=y,this._logger=E,this.checkBrowserSupportAndFeatureConfiguration(),t.default.addLogger(this._logger),t.default.register(),this._eventController||(this._eventController=new o.default(y,E)),I.eventController||(I.eventController=this.eventController),this.audioVideoController=new m.default(this._configuration,this._logger,new p.default(this._logger),I,new c.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=I,this.logger.info(`MeetingFeatures: ${JSON.stringify(y.meetingFeatures)}`);const L=new n.default(this._logger);this.contentShareController=new e.default(L,new m.default(e.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new p.default(this._logger),L,new c.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new h.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}},"DefaultMeetingSession");l.default=S},125875:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(74647));let m=s(class SS{clone(){return new SS(this.videoMaxResolution,this.contentMaxResolution)}constructor(a=g.default.VideoResolutionHD,r=g.default.VideoResolutionFHD){this.videoMaxResolution=a,this.contentMaxResolution=r}},"MeetingFeatures");l.default=m},416570:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(354672)),m=u(f(74647)),h=f(817426),a=u(f(125875)),r=u(f(40834)),n=u(f(700804));let e=s(class{constructor(i,o){var c,p;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new g.default,this.reconnectTimeoutMs=120*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1*1e3,this.reconnectLongBackOffMs=5*1e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new a.default,i){i=h.toLowerCasePropertyNames(i),i.meeting&&(i=i.meeting),this.meetingId=i.meetingid,this.externalMeetingId=i.externalmeetingid,this.urls=new n.default,this.urls.audioHostURL=i.mediaplacement.audiohosturl,this.urls.signalingURL=i.mediaplacement.signalingurl,this.urls.turnControlURL=i.mediaplacement.turncontrolurl,i.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=i.mediaplacement.eventingestionurl);const S=s((d,y)=>{switch(d){case"None":return m.default.VideoDisabled;case"HD":return m.default.VideoResolutionHD;case"FHD":return m.default.VideoResolutionFHD;case"UHD":return m.default.VideoResolutionUHD;default:return y}},"parseVideoResolution");if(((c=i.meetingfeatures)===null||c===void 0?void 0:c.video)!==void 0||((p=i.meetingfeatures)===null||p===void 0?void 0:p.content)!==void 0){const d=i.meetingfeatures.video===void 0?"HD":i.meetingfeatures.video.maxresolution,y=i.meetingfeatures.content===void 0?"FHD":i.meetingfeatures.content.maxresolution;this.meetingFeatures=new a.default(S(d,m.default.VideoResolutionHD),S(y,m.default.VideoResolutionFHD))}}o&&(o=h.toLowerCasePropertyNames(o),o.attendee&&(o=o.attendee),this.credentials=new r.default,this.credentials.attendeeId=o.attendeeid,this.credentials.externalUserId=o.externaluserid,this.credentials.joinToken=o.jointoken)}},"MeetingSessionConfiguration");l.default=e},40834:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{toJSON(){return{attendeeId:this.attendeeId,joinToken:this.joinToken===null?null:"<redacted>"}}constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}},"MeetingSessionCredentials");l.default=f},123310:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEvent=void 0;var f;(function(u){u[u.Connecting=0]="Connecting",u[u.Started=1]="Started",u[u.Stopped=2]="Stopped"})(f=l.MeetingSessionLifecycleEvent||(l.MeetingSessionLifecycleEvent={})),l.default=f},867225:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEventCondition=void 0;var f;(function(u){u[u.ConnectingNew=0]="ConnectingNew",u[u.ReconnectingExisting=1]="ReconnectingExisting",u[u.StartedNew=2]="StartedNew",u[u.StartedExisting=3]="StartedExisting",u[u.StartedAfterReconnect=4]="StartedAfterReconnect",u[u.StoppedCleanly=5]="StoppedCleanly",u[u.StoppedWithFailure=6]="StoppedWithFailure"})(f=l.MeetingSessionLifecycleEventCondition||(l.MeetingSessionLifecycleEventCondition={})),l.default=f},91572:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=f(459746),m=u(f(407833));let h=s(class ei{statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case m.default.AudioAuthenticationRejected:case m.default.AudioCallAtCapacity:case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.AudioDisconnected:case m.default.VideoCallAtSourceCapacity:case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:case m.default.ICEGatheringTimeoutWorkaround:case m.default.ConnectionHealthReconnect:case m.default.RealtimeApiFailed:case m.default.TaskFailed:case m.default.NoAttendeePresent:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case m.default.Left:case m.default.AudioJoinedFromAnotherDevice:case m.default.AudioAuthenticationRejected:case m.default.AudioCallAtCapacity:case m.default.MeetingEnded:case m.default.AudioDisconnected:case m.default.TURNCredentialsForbidden:case m.default.SignalingBadRequest:case m.default.SignalingRequestFailed:case m.default.VideoCallAtSourceCapacity:case m.default.RealtimeApiFailed:case m.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case m.default.AudioAuthenticationRejected:case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.ICEGatheringTimeoutWorkaround:case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:case m.default.RealtimeApiFailed:case m.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case m.default.OK:return"Everything is OK so far.";case m.default.Left:return"The attendee left the meeting.";case m.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case m.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case m.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case m.default.MeetingEnded:return"The meeting ended.";case m.default.AudioInternalServerError:case m.default.AudioServiceUnavailable:case m.default.AudioDisconnected:return"The audio connection failed.";case m.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case m.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case m.default.SignalingBadRequest:case m.default.SignalingInternalServerError:case m.default.SignalingRequestFailed:return"The signaling connection failed.";case m.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case m.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case m.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case m.default.TaskFailed:return"The connection failed. See the error message for more details.";case m.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case m.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case m.default.NoAttendeePresent:return"The attendee was not present.";case m.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case m.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case m.default.AudioDisconnectAudio:return"The audio connection failed.";default:{const r=this._statusCode;throw new Error(`Unhandled case: ${r}`)}}}static fromSignalFrame(r){return r.error&&r.error.status?this.fromSignalingStatus(r.error.status):r.type===g.SdkSignalFrame.Type.AUDIO_STATUS?r.audioStatus?this.fromAudioStatus(r.audioStatus.audioStatus):new ei(m.default.SignalingRequestFailed):r.type===g.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new ei(m.default.AudioVideoWasRemovedFromPrimaryMeeting):new ei(m.default.OK)}static fromAudioStatus(r){switch(r){case 200:return new ei(m.default.OK);case 301:return new ei(m.default.AudioJoinedFromAnotherDevice);case 302:return new ei(m.default.AudioDisconnectAudio);case 403:return new ei(m.default.AudioAuthenticationRejected);case 409:return new ei(m.default.AudioCallAtCapacity);case 410:return new ei(m.default.MeetingEnded);case 411:return new ei(m.default.AudioAttendeeRemoved);case 500:return new ei(m.default.AudioInternalServerError);case 503:return new ei(m.default.AudioServiceUnavailable);default:switch(Math.floor(r/100)){case 2:return new ei(m.default.OK);default:return new ei(m.default.AudioDisconnected)}}}static fromSignalingStatus(r){switch(r){case 206:return new ei(m.default.VideoCallSwitchToViewOnly);case 509:return new ei(m.default.VideoCallAtSourceCapacity);case 403:return new ei(m.default.AudioAuthenticationRejected);case 409:return new ei(m.default.AudioCallAtCapacity);default:switch(Math.floor(r/100)){case 2:return new ei(m.default.OK);case 4:return new ei(m.default.SignalingBadRequest);case 5:return new ei(m.default.SignalingInternalServerError);default:return new ei(m.default.SignalingRequestFailed)}}}constructor(r){this._statusCode=r}},"MeetingSessionStatus");l.default=h},407833:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionStatusCode=void 0;var f;(function(u){u[u.OK=0]="OK",u[u.Left=1]="Left",u[u.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",u[u.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",u[u.AudioCallAtCapacity=4]="AudioCallAtCapacity",u[u.MeetingEnded=5]="MeetingEnded",u[u.AudioInternalServerError=6]="AudioInternalServerError",u[u.AudioServiceUnavailable=7]="AudioServiceUnavailable",u[u.AudioDisconnected=8]="AudioDisconnected",u[u.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",u[u.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",u[u.SignalingBadRequest=11]="SignalingBadRequest",u[u.SignalingInternalServerError=12]="SignalingInternalServerError",u[u.SignalingRequestFailed=13]="SignalingRequestFailed",u[u.ICEGatheringTimeoutWorkaround=14]="ICEGatheringTimeoutWorkaround",u[u.ConnectionHealthReconnect=15]="ConnectionHealthReconnect",u[u.RealtimeApiFailed=16]="RealtimeApiFailed",u[u.TaskFailed=17]="TaskFailed",u[u.IncompatibleSDP=18]="IncompatibleSDP",u[u.TURNCredentialsForbidden=19]="TURNCredentialsForbidden",u[u.NoAttendeePresent=20]="NoAttendeePresent",u[u.AudioAttendeeRemoved=21]="AudioAttendeeRemoved",u[u.AudioVideoWasRemovedFromPrimaryMeeting=22]="AudioVideoWasRemovedFromPrimaryMeeting",u[u.AudioDisconnectAudio=23]="AudioDisconnectAudio"})(f=l.MeetingSessionStatusCode||(l.MeetingSessionStatusCode={})),l.default=f},138995:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}},"MeetingSessionTURNCredentials");l.default=f},700804:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(g){this._audioHostURL=g}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(g){this._signalingURL=g}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(g){this._turnControlURL=g}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(g){this._eventIngestionURL=g}constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=g=>g}},"MeetingSessionURLs");l.default=f},544596:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class vS{equal(g){return this.remoteVideoAvailable===g.remoteVideoAvailable&&this.canStartLocalVideo===g.canStartLocalVideo}clone(){const g=new vS;return g.remoteVideoAvailable=this.remoteVideoAvailable,g.canStartLocalVideo=this.canStartLocalVideo,g}constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}},"MeetingSessionVideoAvailability");l.default=f},76422:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(g,m,h){this.type=g,this.headers=m,this.payload=h}},"Message");l.default=f},28403:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(S,d,y,E){function I(A){return A instanceof y?A:new y(function(L){L(A)})}return s(I,"adopt"),new(y||(y=Promise))(function(A,L){function M(N){try{w(E.next(N))}catch(T){L(T)}}s(M,"fulfilled");function k(N){try{w(E.throw(N))}catch(T){L(T)}}s(k,"rejected");function w(N){N.done?A(N.value):I(N.value).then(M,k)}s(w,"step"),w((E=E.apply(S,d||[])).next())})},g=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});const m=f(888603),h=g(f(252383)),a=g(f(105884)),r=g(f(76422)),n=g(f(146253)),e=g(f(359454)),t=g(f(651033)),i=g(f(19071)),o=g(f(293975)),c=g(f(381458));let p=s(class{addObserver(d){this.logger.info("adding messaging observer"),this.observerQueue.add(d)}removeObserver(d){this.logger.info("removing messaging observer"),this.observerQueue.delete(d)}start(){return u(this,void 0,void 0,function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")})}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),a.default.removeLogger(this.logger))}forEachObserver(d){for(const y of this.observerQueue)e.default.nextTick(()=>{this.observerQueue.has(y)&&d(y)})}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.openEventHandler()}),this.webSocket.addEventListener("message",d=>{this.receiveMessageHandler(d.data)}),this.webSocket.addEventListener("close",d=>{this.closeEventHandler(d)}),this.webSocket.addEventListener("error",()=>{this.logger.error("WebSocket error")})}startConnecting(d){return u(this,void 0,void 0,function*(){return yield this.startConnectingInternal(d),yield new Promise((y,E)=>{this.bootstrapResolved=y,this.bootstrapRejected=E})})}startConnectingInternal(d){var y;return u(this,void 0,void 0,function*(){let E=this.configuration.endpointUrl;if(d||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),d||E===void 0)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const A=yield this.configuration.chimeClient.getMessagingSessionEndpoint();!((y=A.Endpoint)===null||y===void 0)&&y.Url?E=A.Endpoint.Url:E=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}else E=(yield this.configuration.chimeClient.send(new m.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${E}`)}catch(A){this.logger.error(`Messaging Session failed to resolve endpoint: ${A}`);const L=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});this.closeEventHandler(L);return}const I=yield this.prepareWebSocketUrl(E);this.logger.info(`opening connection to ${I}`),d||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(I,[],!0),this.forEachObserver(A=>{A.messagingSessionDidStartConnecting&&A.messagingSessionDidStartConnecting(d)}),this.setUpEventListeners()})}prepareWebSocketUrl(d){return u(this,void 0,void 0,function*(){const y=new Map;return y.set("userArn",[this.configuration.userArn]),y.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===c.default.Connect&&y.set("prefetch-on",[c.default.Connect]),this.configuration.prefetchSortBy&&y.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",d,"/connect","",y)})}isClosed(){return this.webSocket.readyState()===o.default.None||this.webSocket.readyState()===o.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(d){try{const y=JSON.parse(d),E=y.Headers["x-amz-chime-event-type"],I=new r.default(E,y.Headers,y.Payload||null);if(!this.isSessionEstablished&&E==="SESSION_ESTABLISHED"){this.forEachObserver(L=>{L.messagingSessionDidStart&&L.messagingSessionDidStart()}),this.bootstrapResolved(),this.isSessionEstablished=!0;const A=this.preBootstrapMessages.length;for(let L=0;L<A;L++){const M=this.preBootstrapMessages.shift();this.forEachObserver(k=>{this.sendMessageToObserver(k,M)})}}else if(!this.isSessionEstablished){this.preBootstrapMessages.push(I);return}this.forEachObserver(A=>{this.sendMessageToObserver(A,I)})}catch(y){this.logger.error(`Messaging parsing failed: ${y}`)}}sendMessageToObserver(d,y){d.messagingSessionDidReceiveMessage&&d.messagingSessionDidReceiveMessage(y)}retryConnection(){return this.reconnectController.retryWithBackoff(()=>u(this,void 0,void 0,function*(){yield this.startConnecting(!0)}),null)}closeEventHandler(d){this.logger.info(`WebSocket close: ${d.code} ${d.reason}`),d.code!==4999&&this.webSocket.destroy(),!(!this.isClosing&&this.canReconnect(d.code)&&this.retryConnection())&&(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver(y=>{y.messagingSessionDidStop&&y.messagingSessionDidStop(d)}):this.bootstrapRejected(d))}canReconnect(d){return d===1001||d===1006||d>=1011&&d<=1014||d>4e3&&d!==4002&&d!==4003&&d!==4401}constructor(d,y,E,I,A){this.configuration=d,this.logger=y,this.webSocket=E,this.reconnectController=I,this.sigV4=A,this.observerQueue=new Set,this.webSocket||(this.webSocket=new i.default(this.logger)),this.reconnectController||(this.reconnectController=new n.default(d.reconnectTimeoutMs,new h.default(d.reconnectFixedWaitMs,d.reconnectShortBackoffMs,d.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new t.default(this.configuration.chimeClient)),a.default.addLogger(this.logger),a.default.register(),this.preBootstrapMessages=[]}},"DefaultMessagingSession");l.default=p},733056:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=f(817426);let g=s(class{generateSessionId(){const h=new Uint32Array(1);return u.getRandomValues(h),h[0].toString()}constructor(h,a,r,n){this.userArn=h,this.messagingSessionId=a,this.endpointUrl=r,this.chimeClient=n,this.reconnectTimeoutMs=10*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1*1e3,this.reconnectLongBackoffMs=5*1e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}},"MessagingSessionConfiguration");l.default=g},381458:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var f;(function(u){u.Connect="connect"})(f||(f={})),l.default=f},748722:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var f;(function(u){u.Unread="unread",u.LastMessageTimestamp="last-message-timestamp"})(f||(f={})),l.default=f},578555:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(116631));let m=s(class Mo{id(){return this._id}base(){return this._id?this._id.split(Mo.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const a=this._id.split(Mo.MODALITY_SEPARATOR);return a.length===2?a[1]:""}hasModality(a){return a!==""&&this.modality()===a}withModality(a){const r=new Mo(this.base()+Mo.MODALITY_SEPARATOR+a);return a===""||this.base()===""||new Mo(r._id).modality()!==a?new Mo(this.base()):r}constructor(a){this._id=a}},"DefaultModality");l.default=m,m.MODALITY_SEPARATOR=g.default.Modality[0],m.MODALITY_CONTENT=g.default.Modality.substr(1)},504839:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(359454)),m=u(f(449341)),h=u(f(497324)),a=f(459746),r=f(153822);let n=s(class{addObserver(t){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const i of this.observerQueue)g.default.nextTick(()=>{this.observerQueue.has(i)&&t(i)})}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start(()=>{this.ping()}),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver(i=>{r.Maybe.of(i.didMissPongs).map(o=>o.bind(i)(this.consecutivePongsUnaccountedFor))})),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const t=a.SdkPingPongFrame.create();t.pingId=this.pingId,t.type=a.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(t),this.logger.debug(()=>`sent ping ${this.pingId}`)}pong(t){const i=a.SdkPingPongFrame.create();i.pingId=t,i.type=a.SdkPingPongType.PONG,this.signalingClient.pingPong(i)}handleSignalingClientEvent(t){switch(t.type){case h.default.WebSocketOpen:this.startPingInterval();break;case h.default.WebSocketFailed:case h.default.WebSocketError:this.logger.warn(`stopped pinging (${h.default[t.type]})`),this.stopPingInterval();break;case h.default.WebSocketClosing:case h.default.WebSocketClosed:this.logger.info(`stopped pinging (${h.default[t.type]})`),this.stopPingInterval();break;case h.default.ReceivedSignalFrame:if(t.message.type!==a.SdkSignalFrame.Type.PING_PONG)break;if(t.message.pingPong.type===a.SdkPingPongType.PONG){const i=t.message.pingPong.pingId;if(i!==this.pingId){this.logger.warn(`unexpected ping id ${i} (expected ${this.pingId})`);break}this.consecutivePongsUnaccountedFor=0;let o;if(typeof t.message.timestampMs=="number")o=t.message.timestampMs;else break;this.logger.debug(()=>`received pong ${i} with timestamp ${o}`);const p=t.timestampMs-this.pingTimestampLocalMs,S=Math.round(o-p/2),d=this.pingTimestampLocalMs-S;this.logger.info(`local clock skew estimate=${d}ms from ping-pong time=${p}ms`),this.forEachObserver(y=>{r.Maybe.of(y.didReceivePong).map(E=>E.bind(y)(i,d,p))})}else this.pong(t.message.pingPong.pingId);break}}constructor(t,i,o){this.signalingClient=t,this.intervalMs=i,this.logger=o,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new m.default(this.intervalMs),this.pingId=0}},"DefaultPingPong");l.default=n},337423:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(624233)),m=u(f(220781)),h=u(f(640079));let a=s(class{realtimeSetLocalAttendeeId(n,e){this.state.localAttendeeId=n,this.state.localExternalUserId=e}realtimeSetAttendeeIdPresence(n,e,t,i,o){try{e&&(this.state.attendeeIdToExternalUserId[n]=t);for(const c of this.state.attendeeIdChangesCallbacks)c(n,e,t,i,o)}catch(c){this.onError(c)}}realtimeSubscribeToAttendeeIdPresence(n){try{this.state.attendeeIdChangesCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToAttendeeIdPresence(n){try{const e=this.state.attendeeIdChangesCallbacks.indexOf(n);e!==-1&&this.state.attendeeIdChangesCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSetCanUnmuteLocalAudio(n){try{if(this.state.canUnmute===n)return;this.state.canUnmute=n;for(const e of this.state.setCanUnmuteLocalAudioCallbacks)e(n)}catch(e){this.onError(e)}}realtimeSubscribeToSetCanUnmuteLocalAudio(n){try{this.state.setCanUnmuteLocalAudioCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(n){try{const e=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(n);e!==-1&&this.state.setCanUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const n of this.state.muteAndUnmuteLocalAudioCallbacks)n(!0)}catch(n){this.onError(n)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const n of this.state.muteAndUnmuteLocalAudioCallbacks)n(!1);return!0}catch(n){return this.onError(n),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(n){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(n){try{const e=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(n);e!==-1&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(n,e){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(n)||(this.state.volumeIndicatorCallbacks[n]=[]),this.state.volumeIndicatorCallbacks[n].push(e),this.sendVolumeIndicatorChange(n,!0,!0,!0,this.state.attendeeIdToExternalUserId[n])}catch(t){this.onError(t)}}realtimeUnsubscribeFromVolumeIndicator(n,e){if(this.state.volumeIndicatorCallbacks[n])if(e){const i=this.state.volumeIndicatorCallbacks[n].indexOf(e);i>=0&&this.state.volumeIndicatorCallbacks[n].splice(i,1)}else delete this.state.volumeIndicatorCallbacks[n]}realtimeUpdateVolumeIndicator(n,e,t,i,o){try{t=this.applyLocalMuteOverride(n,t);const c=this.getVolumeIndicatorState(n);let p=!1,S=!1,d=!1;t!==null&&c.muted!==t&&(c.muted=t,S=!0,c.muted&&c.volume!==0&&(c.volume=0,p=!0)),!c.muted&&e!==null&&(c.volume!==e&&(c.volume=e,p=!0),c.muted===null&&(c.muted=!1,S=!0)),i!==null&&c.signalStrength!==i&&(c.signalStrength=i,d=!0),this.sendVolumeIndicatorChange(n,p,S,d,o)}catch(c){this.onError(c)}}realtimeSubscribeToLocalSignalStrengthChange(n){try{if(this.state.localSignalStrengthChangeCallbacks.push(n),this.state.localAttendeeId===null)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(e){this.onError(e)}}realtimeUnsubscribeToLocalSignalStrengthChange(n){try{const e=this.state.localSignalStrengthChangeCallbacks.indexOf(n);e!==-1&&this.state.localSignalStrengthChangeCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSubscribeToSendDataMessage(n){try{this.state.sendDataMessageCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeFromSendDataMessage(n){try{const e=this.state.sendDataMessageCallbacks.indexOf(n);e!==-1&&this.state.sendDataMessageCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSendDataMessage(n,e,t){try{for(const i of this.state.sendDataMessageCallbacks)i(n,e,t)}catch(i){this.onError(i)}}realtimeSubscribeToReceiveDataMessage(n,e){try{this.state.receiveDataMessageCallbacks.has(n)?this.state.receiveDataMessageCallbacks.get(n).push(e):this.state.receiveDataMessageCallbacks.set(n,[e])}catch(t){this.onError(t)}}realtimeUnsubscribeFromReceiveDataMessage(n){try{this.state.receiveDataMessageCallbacks.delete(n)}catch(e){this.onError(e)}}realtimeReceiveDataMessage(n){try{if(this.state.receiveDataMessageCallbacks.has(n.topic))for(const e of this.state.receiveDataMessageCallbacks.get(n.topic))e(n)}catch(e){this.onError(e)}}realtimeSubscribeToFatalError(n){try{this.state.fatalErrorCallbacks.push(n)}catch(e){this.onError(e)}}realtimeUnsubscribeToFatalError(n){try{const e=this.state.fatalErrorCallbacks.indexOf(n);e!==-1&&this.state.fatalErrorCallbacks.splice(e,1)}catch(e){this.onError(e)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(n){n?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(n,e){const t=this.state.localAttendeeId,i=this.state.muted;return n!==t||!("activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio)?e:i}sendVolumeIndicatorChange(n,e,t,i,o){if(this.sendLocalSignalStrengthChange(n,i),!this.state.volumeIndicatorCallbacks.hasOwnProperty(n))return;const c=this.getVolumeIndicatorState(n),p=new h.default;if(e&&(p.volume=c.volume),t&&(p.muted=c.muted),i&&(p.signalStrength=c.signalStrength),!this.stateIsEmpty(p))for(const S of this.state.volumeIndicatorCallbacks[n])S(n,p.volume,p.muted,p.signalStrength,o)}sendLocalSignalStrengthChange(n,e){if(!e||n!==this.state.localAttendeeId)return;const i=this.getVolumeIndicatorState(n).signalStrength;if(i!==null)for(const o of this.state.localSignalStrengthChangeCallbacks)o(i)}getVolumeIndicatorState(n){return this.state.volumeIndicatorState.hasOwnProperty(n)||(this.state.volumeIndicatorState[n]=new h.default),this.state.volumeIndicatorState[n]}stateIsEmpty(n){return n.volume===null&&n.muted===null&&n.signalStrength===null}onError(n){try{for(const e of this.state.fatalErrorCallbacks)e(n)}catch(e){try{console.error(n),console.error(e)}catch{}}}constructor(n,e){this.mediaStreamBroker=n,this.state=new m.default,this._transcriptionController=e||new g.default(this)}},"DefaultRealtimeController");l.default=a},554455:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}},"RealtimeAttendeePositionInFrame");l.default=f},220781:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}},"RealtimeState");l.default=f},640079:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}},"RealtimeVolumeIndicator");l.default=f},146253:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(747675));let m=s(class yS{timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs?!0:this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(a){this._isFirstConnection=a,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(a,r){const n=this.shouldReconnect&&!this.hasPastReconnectDeadline();return n&&(this.backoffCancel=r,this.backoffTimer=new g.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start(()=>{this.backoffCancel=null,a()})),n}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new yS(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(a){this.lastActiveTimestampMs=a}constructor(a,r){this.reconnectTimeoutMs=a,this.backoffPolicy=r,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}},"DefaultReconnectController");l.default=m},317510:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class Ki{static initializeWorker(){Ki.log("Initializing RedundantAudioEncoder");const g=new Ki;self.RTCRtpScriptTransformer&&(self.onrtctransform=m=>{m.transformer.options.type==="SenderTransform"?g.setupSenderTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="ReceiverTransform"?g.setupReceiverTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="PassthroughTransform"&&g.setupPassthroughTransform(m.transformer.readable,m.transformer.writable)}),self.onmessage=m=>{m.data.msgType==="StartRedWorker"?(g.setupSenderTransform(m.data.send.readable,m.data.send.writable),g.setupReceiverTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="PassthroughTransform"?(g.setupPassthroughTransform(m.data.send.readable,m.data.send.writable),g.setupPassthroughTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="RedPayloadType"?g.setRedPayloadType(m.data.payloadType):m.data.msgType==="OpusPayloadType"?g.setOpusPayloadType(m.data.payloadType):m.data.msgType==="UpdateNumRedundantEncodings"?g.setNumRedundantEncodings(m.data.numRedundantEncodings):m.data.msgType==="Enable"?g.setRedundancyEnabled(!0):m.data.msgType==="Disable"&&g.setRedundancyEnabled(!1)}}static log(g){Ki.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${g}`})}static getNumRedundantEncodingsForPacketLoss(g){let m=0,h=!1;return g<=8?m=0:g<=18?m=1:g<=75?m=2:(m=0,h=!0),[m,h]}setupPassthroughTransform(g,m){Ki.log("Setting up passthrough transform"),g.pipeTo(m)}setupSenderTransform(g,m){Ki.log("Setting up sender RED transform");const h=new TransformStream({transform:this.senderTransform.bind(this)});g.pipeThrough(h).pipeTo(m)}setupReceiverTransform(g,m){Ki.log("Setting up receiver RED transform");const h=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});g.pipeThrough(h).pipeTo(m)}setRedPayloadType(g){this.redPayloadType=g,Ki.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(g){this.opusPayloadType=g,Ki.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(g){this.numRedundantEncodings=g,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),Ki.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(g){this.redundancyEnabled=g,Ki.log(`redundancy ${this.redundancyEnabled?"enabled":"disabled"}`)}enqueueAudioFrameIfPayloadSizeIsValid(g,m){g.data.byteLength>this.maxAudioPayloadSizeBytes||m.enqueue(g)}senderTransform(g,m){if(g.getMetadata().payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(g,m);return}const a=this.getPrimaryPayload(g.timestamp,g.data);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(g,m);return}const r=this.encode(g.timestamp,a);if(!r){this.enqueueAudioFrameIfPayloadSizeIsValid(g,m);return}g.data=r,this.enqueueAudioFrameIfPayloadSizeIsValid(g,m)}getPrimaryPayload(g,m){const h=this.splitEncodings(g,m);return!h||h.length<1?null:h[h.length-1].payload}splitEncodings(g,m){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;const r=new DataView(m);let n=r.byteLength,e=0,t=0,i=0,o=0,c=!1;const p=new Array,S=new Array,d=new Array;for(;n>0;)if(c=(r.getUint8(o)&128)===0,c){if((r.getUint8(o)&127)!==this.opusPayloadType||(e+=this.redLastHeaderSizeBytes,t+=this.redLastHeaderSizeBytes,e>=r.byteLength))return null;i=r.byteLength-e;break}else{if(n<this.redHeaderSizeBytes)return null;const M=((r.getUint8(o+2)&3)<<8)+r.getUint8(o+3);S.push(M);const k=r.getUint16(o+1)>>2,w=g-k;d.push(w),e+=M+this.redHeaderSizeBytes,t+=this.redHeaderSizeBytes,o+=this.redHeaderSizeBytes,n-=this.redHeaderSizeBytes}if(!c)return null;let y=t;for(let M=0;M<d.length;M++){const k=new ArrayBuffer(S[M]);new Uint8Array(k).set(new Uint8Array(r.buffer,y,S[M]),0);const N={timestamp:d[M],payload:k,isRedundant:!0};h&&(N.hasFec=this.opusPacketHasFec(new DataView(k),k.byteLength)),p.push(N),y+=S[M]}const E=r.byteLength-i,I=new ArrayBuffer(i);new Uint8Array(I).set(new Uint8Array(r.buffer,E,i),0);const L={timestamp:g,payload:I,isRedundant:!1,seq:a};return h&&(L.hasFec=this.opusPacketHasFec(new DataView(I),I.byteLength)),p.push(L),p}encode(g,m){const h=m.byteLength;if(h===0||h>=this.maxRedPacketSizeBytes||h>=this.maxAudioPayloadSizeBytes)return null;const a=this.numRedundantEncodings;let r=this.redLastHeaderSizeBytes,n=h,e=this.maxAudioPayloadSizeBytes-h-r;const t=new Array,i=new Array;if(this.redundancyEnabled){let d=this.uint32WrapAround(g-this.redPacketizationTime*this.redPacketDistance);for(let y=0;y<a&&!(this.uint32WrapAround(g-d)>=this.maxRedTimestampOffset);y++){let E=d,I=this.encodingHistory.find(A=>A.timestamp===E);if(I||(E=this.uint32WrapAround(d-this.redPacketizationTime),I=this.encodingHistory.find(A=>A.timestamp===E)),I){const A=I.payload.byteLength;if(e<this.redHeaderSizeBytes+A)break;e-=this.redHeaderSizeBytes+A,r+=this.redHeaderSizeBytes,n+=A,t.unshift(I.timestamp),i.unshift(I.payload)}d-=this.redPacketizationTime*this.redPacketDistance,d=this.uint32WrapAround(d)}}const o=new ArrayBuffer(r+n),c=new DataView(o);let p=0;for(let d=0;d<t.length;d++){const y=g-t[d];c.setUint8(p,this.opusPayloadType|128),c.setUint16(p+1,y<<2|i[d].byteLength>>8),c.setUint8(p+3,i[d].byteLength&255),p+=this.redHeaderSizeBytes}c.setUint8(p,this.opusPayloadType),p+=this.redLastHeaderSizeBytes;const S=new Uint8Array(o);for(let d=0;d<i.length;d++)S.set(new Uint8Array(i[d]),p),p+=i[d].byteLength;return S.set(new Uint8Array(m),p),p+=m.byteLength,p!==r+n?null:(this.updateEncodingHistory(g,m),o)}updateEncodingHistory(g,m){for(const a of this.encodingHistory){const r=this.redPacketizationTime*this.redMaxRecoveryDistance;if(g-a.timestamp>=r)this.encodingHistory.shift();else break}const h=new DataView(m);(this.opusPacketIsCeltOnly(h)||this.opusPacketHasVoiceActivity(h,h.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:g,payload:m}))}initializePacketLogs(){const g=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(g),index:0,windowSize:g},this.redRecoveryLog={window:new Array(g),index:0,windowSize:g},this.fecRecoveryLog={window:new Array(g),index:0,windowSize:g},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(g,m){const h=g.getMetadata();if(h.payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(g,m);return}const a=this.splitEncodings(g.timestamp,g.data,!0,h.sequenceNumber);if(!a){this.enqueueAudioFrameIfPayloadSizeIsValid(g,m);return}for(let r=a.length-1;r>=0;r--)this.updateLossStats(a[r])&&(this.updateRedStats(a[r]),this.updateFecStats(a[r]));this.maybeReportLossStats(a[a.length-1].timestamp,h.synchronizationSource),this.enqueueAudioFrameIfPayloadSizeIsValid(g,m)}updateLossStats(g){if(g.isRedundant)return!0;const m=g.timestamp,h=g.seq;if(this.totalAudioPacketsExpected===0)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=h,this.addTimestamp(this.primaryPacketLog,m),!0;const a=this.int16(h-this.newestSequenceNumber);return a<-this.maxOutOfOrderPacketDistance?!1:(a<0?this.hasTimestamp(this.primaryPacketLog,m)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,m),this.removeFromRecoveryWindows(m)):a>1&&(this.totalAudioPacketsLost+=a-1),a>0&&(this.totalAudioPacketsExpected+=a,this.newestSequenceNumber=g.seq,this.addTimestamp(this.primaryPacketLog,m)),!0)}updateRedStats(g){if(!g.isRedundant||this.totalAudioPacketsLost===0)return;const m=g.timestamp;this.hasTimestamp(this.primaryPacketLog,m)||(this.hasTimestamp(this.redRecoveryLog,m)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,m)),this.removeTimestamp(this.fecRecoveryLog,m)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(g){if(!g.hasFec||this.totalAudioPacketsLost===0)return;const m=g.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,m)||this.hasTimestamp(this.redRecoveryLog,m)||this.hasTimestamp(this.fecRecoveryLog,m)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,m))}maybeReportLossStats(g,m){g-this.lastLossReportTimestamp<this.lossReportInterval||(Ki.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc:m,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=g)}addTimestamp(g,m){g.window[g.index]=m,g.index=(g.index+1)%g.windowSize}hasTimestamp(g,m){return!!g.window.find(a=>a===m)}removeTimestamp(g,m){const h=g.window.indexOf(m);return h>=0?(g.window[h]=void 0,!0):!1}removeFromRecoveryWindows(g){let m=this.removeTimestamp(this.redRecoveryLog,g);m&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,m=this.removeTimestamp(this.fecRecoveryLog,g),m&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(g){let h=g;return g>=4294967296?h=g-4294967296:g<0&&(h=4294967296+g),h}int16(g){return g<<16>>16}opusPacketIsCeltOnly(g){return!!(g.getUint8(0)&128)}opusPacketGetSamplesPerFrame(g,m){m=Math.round(m),m=Math.min(Math.max(m,-Math.pow(2,32)),Math.pow(2,32)-1);let h,a;return this.opusPacketIsCeltOnly(g)?(a=g.getUint8(0)>>3&3,h=(m<<a)/400):(g.getUint8(0)&96)===96?h=g.getUint8(0)&8?m/50:m/100:(a=g.getUint8(0)>>3&3,a===3?h=m*60/1e3:h=(m<<a)/100),h}opusNumSilkFrames(g){let m=this.opusPacketGetSamplesPerFrame(g,48e3)/48;switch(m<10&&(m=10),m){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(g){return g.getUint8(0)&4?2:1}opusParseSize(g,m,h,a){return h<1?(a[0]=-1,-1):g.getUint8(m)<252?(a[0]=g.getUint8(m),1):h<2?(a[0]=-1,-1):(a[0]=4*g.getUint8(m+1)+g.getUint8(m),2)}opusPacketParseImpl(g,m,h,a,r,n,e,t){if(!n||m<0)return this.OPUS_BAD_ARG;if(m===0)return this.OPUS_INVALID_PACKET;let i,o,c=0,p=!1;const S=g.getUint8(0);a&&(a[0]=S);let d=m-1,y=1,E=d;switch(S&3){case 0:i=1;break;case 1:if(i=2,p=!0,!h){if(d&1)return this.OPUS_INVALID_PACKET;E=d/2,n[0][0]=E}break;case 2:if(i=2,o=this.opusParseSize(g,y,d,n[0]),d-=o,n[0][0]<0||n[0][0]>d)return this.OPUS_INVALID_PACKET;y+=o,E=d-n[0][0];break;default:if(d<1)return this.OPUS_INVALID_PACKET;const I=g.getUint8(y++);if(--d,i=I&63,i<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(g,48e3)*i>5760)return this.OPUS_INVALID_PACKET;if(I&64){let L,M;do{if(d<=0)return this.OPUS_INVALID_PACKET;L=g.getUint8(y++),--d,M=L===255?254:L,d-=M,c+=M}while(L===255)}if(d<0)return this.OPUS_INVALID_PACKET;if(p=!(I&128),p){if(!h){if(E=Math.trunc(d/i),E*i!==d)return this.OPUS_INVALID_PACKET;for(let L=0;L<i-1;++L)n[L][0]=E}}else{E=d;for(let L=0;L<i-1;++L){if(o=this.opusParseSize(g,y,d,n[L]),d-=o,n[L][0]<0||n[L][0]>d)return this.OPUS_INVALID_PACKET;y+=o,E-=o+n[L][0]}if(E<0)return this.OPUS_INVALID_PACKET}}if(h){if(o=this.opusParseSize(g,y,d,n[i-1]),d-=o,n[i-1][0]<0||n[i-1][0]>d)return this.OPUS_INVALID_PACKET;if(y+=o,p){if(n[i-1][0]*i>d)return this.OPUS_INVALID_PACKET;for(let I=0;I<i-1;++I)n[I][0]=n[i-1][0]}else if(!(o+n[i-1][0]<=E))return this.OPUS_INVALID_PACKET}else{if(E>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;n[i-1][0]=E}e&&(e[0]=y);for(let I=0;I<i;++I)r&&(r[I][0]=y),y+=n[I][0];return t&&(t[0]=y+c),i}opusPacketParse(g,m,h,a,r,n){return this.opusPacketParseImpl(g,m,!1,h,a,r,n,null)}opusPacketHasVoiceActivity(g,m){if(!g||m<=0)return 0;if(this.opusPacketIsCeltOnly(g))return-1;const h=this.opusNumSilkFrames(g);if(h===0)return-1;const a=new Array(this.OPUS_MAX_OPUS_FRAMES),r=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let e=0;e<this.OPUS_MAX_OPUS_FRAMES;++e)a[e]=[void 0],r[e]=[void 0];const n=this.opusPacketParse(g,m,null,a,r,null);if(n<0)return-1;for(let e=0;e<n;++e){if(r[e][0]<1)continue;if(g.getUint8(a[e][0])>>8-h||this.opusPacketGetNumChannels(g)===2&&g.getUint8(a[e][0])<<h+1>>8-h)return 1}return 0}opusPacketHasFec(g,m){if(!g||m<=0||this.opusPacketIsCeltOnly(g))return!1;const h=new Array(this.OPUS_MAX_OPUS_FRAMES),a=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let t=0;t<this.OPUS_MAX_OPUS_FRAMES;++t)h[t]=[void 0],a[t]=[void 0];if(this.opusPacketParse(g,m,null,h,a,null)<0||a[0][0]<=1)return!1;const n=this.opusNumSilkFrames(g);if(n===0)return!1;const e=this.opusPacketGetNumChannels(g);if(e!==1&&e!==2)return!1;for(let t=0;t<e;t++)if(g.getUint8(h[0][0])&128>>(t+1)*(n+1)-1)return!0;return!1}constructor(){this.maxRedPacketSizeBytes=1<<10,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=1<<14,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=48e3*5,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}},"RedundantAudioEncoder");l.default=f,f.shouldLog=!1,f.shouldReportStats=!1},417238:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const f=`class RedundantAudioEncoder {
    constructor() {
        // Each payload must be less than 1024 bytes to fit the 10 bit block length
        this.maxRedPacketSizeBytes = 1 << 10;
        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio
        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio
        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See
        // https://crbug.com/1248479.
        this.maxAudioPayloadSizeBytes = 1000;
        // Each payload can encode a timestamp delta of 14 bits
        this.maxRedTimestampOffset = 1 << 14;
        // 4 byte RED header
        this.redHeaderSizeBytes = 4;
        // reduced size for last RED header
        this.redLastHeaderSizeBytes = 1;
        // P-Time for Opus 20 msec packets
        // We do not support other p-times or clock rates
        this.redPacketizationTime = 960;
        // distance between redundant payloads, Opus FEC handles a distance of 1
        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):
        // Consider making this dynamic
        this.redPacketDistance = 2;
        // maximum number of redundant payloads per RTP packet
        this.maxRedEncodings = 2;
        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant
        // payloads have FEC.
        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;
        // maximum history of prior payloads to keep
        // generally we will expire old entries based on timestamp
        // this limit is in place just to make sure the history does not
        // grow too large in the case of erroneous timestamp inputs
        this.maxEncodingHistorySize = 10;
        // Current number of encodings we want to send
        // to the remote end. This will be dynamically
        // updated through the setNumEncodingsFromPacketloss API
        this.numRedundantEncodings = 0;
        // Used to enable or disable redundancy
        // in response to very high packet loss events
        this.redundancyEnabled = true;
        // Loss stats are reported to the main thread every 5 seconds.
        // Since timestamp differences between 2 consecutive packets
        // give us the number of samples in each channel, 1 second
        // is equivalent to 48000 samples:
        // P-time * (1000ms/1s)
        // = (960 samples/20ms) * (1000ms/1s)
        // = 48000 samples/s
        this.lossReportInterval = 48000 * 5;
        // Maximum distance of a packet from the most recent packet timestamp
        // that we will consider for recovery.
        this.maxOutOfOrderPacketDistance = 16;
        /**
         * Below are Opus helper methods and constants.
         */
        this.OPUS_BAD_ARG = -1;
        this.OPUS_INVALID_PACKET = -4;
        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).
        this.OPUS_MAX_OPUS_FRAMES = 48;
        // Max number of bytes that any individual Opus frame can have.
        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;
        this.encodingHistory = new Array();
        this.opusPayloadType = 0;
        this.redPayloadType = 0;
        this.initializePacketLogs();
    }
    /**
     * Creates an instance of RedundantAudioEncoder and sets up callbacks.
     */
    static initializeWorker() {
        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');
        const encoder = new RedundantAudioEncoder();
        // RED encoding is done using WebRTC Encoded Transform
        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md
        // Check the DedicatedWorkerGlobalScope for existence of
        // RTCRtpScriptTransformer interface. If exists, then
        // RTCRtpScriptTransform is supported by this browser.
        // @ts-ignore
        if (self.RTCRtpScriptTransformer) {
            // @ts-ignore
            self.onrtctransform = (event) => {
                if (event.transformer.options.type === 'SenderTransform') {
                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'ReceiverTransform') {
                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'PassthroughTransform') {
                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);
                }
            };
        }
        self.onmessage = (event) => {
            if (event.data.msgType === 'StartRedWorker') {
                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'PassthroughTransform') {
                encoder.setupPassthroughTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupPassthroughTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'RedPayloadType') {
                encoder.setRedPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'OpusPayloadType') {
                encoder.setOpusPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {
                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);
            }
            else if (event.data.msgType === 'Enable') {
                encoder.setRedundancyEnabled(true);
            }
            else if (event.data.msgType === 'Disable') {
                encoder.setRedundancyEnabled(false);
            }
        };
    }
    /**
     * Post logs to the main thread
     */
    static log(msg) {
        if (RedundantAudioEncoder.shouldLog) {
            // @ts-ignore
            self.postMessage({
                type: 'REDWorkerLog',
                log: \`[AudioRed] \${msg}\`,
            });
        }
    }
    /**
     * Returns the number of encodings based on packetLoss value. This is used by \`DefaultTransceiverController\` to
     * determine when to alert the encoder to update the number of encodings. It also determines if we need to
     * turn off red in cases of very high packet loss to avoid congestion collapse.
     */
    static getNumRedundantEncodingsForPacketLoss(packetLoss) {
        let recommendedRedundantEncodings = 0;
        let shouldTurnOffRed = false;
        if (packetLoss <= 8) {
            recommendedRedundantEncodings = 0;
        }
        else if (packetLoss <= 18) {
            recommendedRedundantEncodings = 1;
        }
        else if (packetLoss <= 75) {
            recommendedRedundantEncodings = 2;
        }
        else {
            recommendedRedundantEncodings = 0;
            shouldTurnOffRed = true;
        }
        return [recommendedRedundantEncodings, shouldTurnOffRed];
    }
    /**
     * Sets up a passthrough (no-op) transform for the given streams.
     */
    setupPassthroughTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up passthrough transform');
        readable.pipeTo(writable);
    }
    /**
     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.
     */
    setupSenderTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up sender RED transform');
        const transformStream = new TransformStream({
            transform: this.senderTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.
     */
    setupReceiverTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up receiver RED transform');
        const transformStream = new TransformStream({
            transform: this.receivePacketLogTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Set the RED payload type ideally obtained from local offer.
     */
    setRedPayloadType(payloadType) {
        this.redPayloadType = payloadType;
        RedundantAudioEncoder.log(\`red payload type set to \${this.redPayloadType}\`);
    }
    /**
     * Set the opus payload type ideally obtained from local offer.
     */
    setOpusPayloadType(payloadType) {
        this.opusPayloadType = payloadType;
        RedundantAudioEncoder.log(\`opus payload type set to \${this.opusPayloadType}\`);
    }
    /**
     * Set the number of redundant encodings
     */
    setNumRedundantEncodings(numRedundantEncodings) {
        this.numRedundantEncodings = numRedundantEncodings;
        if (this.numRedundantEncodings > this.maxRedEncodings) {
            this.numRedundantEncodings = this.maxRedEncodings;
        }
        RedundantAudioEncoder.log(\`Updated numRedundantEncodings to \${this.numRedundantEncodings}\`);
    }
    /**
     * Enable or disable redundancy in response to
     * high packet loss event.
     */
    setRedundancyEnabled(enabled) {
        this.redundancyEnabled = enabled;
        RedundantAudioEncoder.log(\`redundancy \${this.redundancyEnabled ? 'enabled' : 'disabled'}\`);
    }
    /**
     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by
     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than
     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will
     * encounter this error and will permanently stop sending or receiving audio.
     */
    enqueueAudioFrameIfPayloadSizeIsValid(
    // @ts-ignore
    frame, controller) {
        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)
            return;
        controller.enqueue(frame);
    }
    /**
     * Receives encoded frames and modifies as needed before sending to transport.
     */
    senderTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);
        if (!primaryPayloadBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);
        /* istanbul ignore next */
        if (!encodedBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        frame.data = encodedBuffer;
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
        return;
    }
    /**
     * Get the primary payload from encoding
     */
    getPrimaryPayload(primaryTimestamp, frame) {
        const encodings = this.splitEncodings(primaryTimestamp, frame);
        if (!encodings || encodings.length < 1)
            return null;
        return encodings[encodings.length - 1].payload;
    }
    /**
     * Split up the encoding received into primary and redundant encodings
     * These will be ordered oldest to newest which is the same ordering
     * in the RTP red payload.
     */
    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {
        // process RED headers (according to RFC 2198)
        //   0                   1                   2                   3
        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //  |F|   block PT  |  timestamp offset         |   block length    |
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //
        // last header
        //   0 1 2 3 4 5 6 7
        //  +-+-+-+-+-+-+-+-+
        //  |0|   Block PT  |
        //  +-+-+-+-+-+-+-+-+
        const payload = new DataView(frame);
        let payloadSizeBytes = payload.byteLength;
        let totalPayloadSizeBytes = 0;
        let totalHeaderSizeBytes = 0;
        let primaryPayloadSizeBytes = 0;
        let payloadOffset = 0;
        let gotLastBlock = false;
        const encodings = new Array();
        const redundantEncodingBlockLengths = new Array();
        const redundantEncodingTimestamps = new Array();
        while (payloadSizeBytes > 0) {
            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;
            if (gotLastBlock) {
                // Bits 1 through 7 are payload type
                const payloadType = payload.getUint8(payloadOffset) & 0x7f;
                // Unexpected payload type. This is a bad packet.
                if (payloadType !== this.opusPayloadType) {
                    return null;
                }
                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;
                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;
                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This
                // is a bad packet.
                if (totalPayloadSizeBytes >= payload.byteLength) {
                    return null;
                }
                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;
                break;
            }
            else {
                if (payloadSizeBytes < this.redHeaderSizeBytes) {
                    return null;
                }
                // Bits 22 through 31 are payload length
                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);
                redundantEncodingBlockLengths.push(blockLength);
                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;
                const timestamp = primaryTimestamp - timestampOffset;
                redundantEncodingTimestamps.push(timestamp);
                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;
                totalHeaderSizeBytes += this.redHeaderSizeBytes;
                payloadOffset += this.redHeaderSizeBytes;
                payloadSizeBytes -= this.redHeaderSizeBytes;
            }
        }
        // The last block was never found. This is a bad packet.
        if (!gotLastBlock) {
            return null;
        }
        let redundantPayloadOffset = totalHeaderSizeBytes;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);
            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);
            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);
            const encoding = {
                timestamp: redundantEncodingTimestamps[i],
                payload: redundantPayloadBuffer,
                isRedundant: true,
            };
            if (getFecInfo) {
                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);
            }
            encodings.push(encoding);
            redundantPayloadOffset += redundantEncodingBlockLengths[i];
        }
        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;
        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);
        const primaryArray = new Uint8Array(primaryPayloadBuffer);
        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);
        const encoding = {
            timestamp: primaryTimestamp,
            payload: primaryPayloadBuffer,
            isRedundant: false,
            seq: primarySequenceNumber,
        };
        if (getFecInfo) {
            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);
        }
        encodings.push(encoding);
        return encodings;
    }
    /**
     * Create a new encoding with current primary payload and the older payloads of choice.
     */
    encode(primaryTimestamp, primaryPayload) {
        const primaryPayloadSize = primaryPayload.byteLength;
        // Payload size needs to be valid.
        if (primaryPayloadSize === 0 ||
            primaryPayloadSize >= this.maxRedPacketSizeBytes ||
            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {
            return null;
        }
        const numRedundantEncodings = this.numRedundantEncodings;
        let headerSizeBytes = this.redLastHeaderSizeBytes;
        let payloadSizeBytes = primaryPayloadSize;
        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;
        const redundantEncodingTimestamps = new Array();
        const redundantEncodingPayloads = new Array();
        // If redundancy is disabled then only send the primary payload
        if (this.redundancyEnabled) {
            // Determine how much redundancy we can fit into our packet
            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);
            for (let i = 0; i < numRedundantEncodings; i++) {
                // Do not add redundant encodings that are beyond the maximum timestamp offset.
                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {
                    break;
                }
                let findTimestamp = redundantTimestamp;
                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                if (!encoding) {
                    // If not found or not important then look for the previous packet.
                    // The current packet may have included FEC for the previous, so just
                    // use the previous packet instead provided that it has voice activity.
                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);
                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                }
                if (encoding) {
                    const redundantEncodingSizeBytes = encoding.payload.byteLength;
                    // Only add redundancy if there are enough bytes available.
                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)
                        break;
                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;
                    headerSizeBytes += this.redHeaderSizeBytes;
                    payloadSizeBytes += redundantEncodingSizeBytes;
                    redundantEncodingTimestamps.unshift(encoding.timestamp);
                    redundantEncodingPayloads.unshift(encoding.payload);
                }
                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;
                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);
            }
        }
        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);
        const redPayloadView = new DataView(redPayloadBuffer);
        // Add redundant encoding header(s) to new buffer
        let redPayloadOffset = 0;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];
            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);
            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));
            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);
            redPayloadOffset += this.redHeaderSizeBytes;
        }
        // Add primary encoding header to new buffer
        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);
        redPayloadOffset += this.redLastHeaderSizeBytes;
        // Add redundant payload(s) to new buffer
        const redPayloadArray = new Uint8Array(redPayloadBuffer);
        for (let i = 0; i < redundantEncodingPayloads.length; i++) {
            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);
            redPayloadOffset += redundantEncodingPayloads[i].byteLength;
        }
        // Add primary payload to new buffer
        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);
        redPayloadOffset += primaryPayload.byteLength;
        /* istanbul ignore next */
        // Sanity check that we got the expected total payload size.
        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)
            return null;
        this.updateEncodingHistory(primaryTimestamp, primaryPayload);
        return redPayloadBuffer;
    }
    /**
     * Update the encoding history with the latest primary encoding
     */
    updateEncodingHistory(primaryTimestamp, primaryPayload) {
        // Remove encodings from the history if they are too old.
        for (const encoding of this.encodingHistory) {
            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;
            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {
                this.encodingHistory.shift();
            }
            else {
                break;
            }
        }
        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is
        // a CELT-only packet or contains voice activity.
        const packet = new DataView(primaryPayload);
        if (this.opusPacketIsCeltOnly(packet) ||
            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {
            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.
            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory
            // usage is bounded. In this case, just clear the history and start over from empty.
            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)
                this.encodingHistory.length = 0;
            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });
        }
    }
    /**
     * Initialize packet logs and metric values.
     */
    initializePacketLogs() {
        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for
        // packets that have already been received but are outside of the max out-of-order distance.
        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;
        this.primaryPacketLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.redRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.fecRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.totalAudioPacketsExpected = 0;
        this.totalAudioPacketsLost = 0;
        this.totalAudioPacketsRecoveredRed = 0;
        this.totalAudioPacketsRecoveredFec = 0;
    }
    /**
     * Receives encoded frames from the server
     * and adds the timestamps to a packet log
     * to calculate an approximate recovery metric.
     */
    receivePacketLogTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        // @ts-ignore
        const encodings = this.splitEncodings(frame.timestamp, frame.data, 
        /*getFecInfo*/ true, frameMetadata.sequenceNumber);
        if (!encodings) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        for (let i = encodings.length - 1; i >= 0; i--) {
            if (this.updateLossStats(encodings[i])) {
                this.updateRedStats(encodings[i]);
                this.updateFecStats(encodings[i]);
            }
        }
        this.maybeReportLossStats(encodings[encodings.length - 1].timestamp, frameMetadata.synchronizationSource);
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
    }
    /**
     * Adds a timestamp to the primary packet log.
     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking
     * at the difference between timestamps.
     *
     * @param encoding : The encoding to be analyzed
     * @returns false if sequence number was greater than max out of order distance
     *          true otherwise
     */
    updateLossStats(encoding) {
        if (encoding.isRedundant)
            return true;
        const timestamp = encoding.timestamp;
        const seq = encoding.seq;
        if (this.totalAudioPacketsExpected === 0) {
            this.totalAudioPacketsExpected = 1;
            this.newestSequenceNumber = seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
            return true;
        }
        const diff = this.int16(seq - this.newestSequenceNumber);
        if (diff < -this.maxOutOfOrderPacketDistance)
            return false;
        if (diff < 0) {
            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
                if (this.totalAudioPacketsLost > 0)
                    this.totalAudioPacketsLost--;
                this.addTimestamp(this.primaryPacketLog, timestamp);
                this.removeFromRecoveryWindows(timestamp);
            }
        }
        else if (diff > 1) {
            this.totalAudioPacketsLost += diff - 1;
        }
        if (diff > 0) {
            this.totalAudioPacketsExpected += diff;
            this.newestSequenceNumber = encoding.seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
        }
        return true;
    }
    /**
     * Adds a timestamp to the red recovery log if it is not present in
     * the primary packet log and if it's not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateRedStats(encoding) {
        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)
            return;
        const timestamp = encoding.timestamp;
        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {
                this.totalAudioPacketsRecoveredRed++;
                this.addTimestamp(this.redRecoveryLog, timestamp);
            }
            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {
                /* istanbul ignore else */
                if (this.totalAudioPacketsRecoveredFec > 0)
                    this.totalAudioPacketsRecoveredFec--;
            }
        }
    }
    /**
     * Adds a timestamp to the fec recovery log if it is not present in
     * the primary packet log and red recovery log and if it is not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateFecStats(encoding) {
        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)
            return;
        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;
        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||
            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||
            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {
            return;
        }
        this.totalAudioPacketsRecoveredFec++;
        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);
    }
    /**
     * Reports loss metrics to DefaultTransceiverController
     *
     * @param timestamp : Timestamp of most recent primary packet
     */
    maybeReportLossStats(timestamp, ssrc) {
        if (timestamp - this.lastLossReportTimestamp < this.lossReportInterval)
            return;
        /* istanbul ignore next */
        if (RedundantAudioEncoder.shouldReportStats) {
            // @ts-ignore
            self.postMessage({
                type: 'RedundantAudioEncoderStats',
                ssrc,
                totalAudioPacketsLost: this.totalAudioPacketsLost,
                totalAudioPacketsExpected: this.totalAudioPacketsExpected,
                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,
                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,
            });
        }
        this.lastLossReportTimestamp = timestamp;
    }
    /**
     * Adds a timestamp to a packet log
     *
     * @param packetLog : The packetlog to add the timestamp to
     * @param timestamp : The timestamp that should be added
     */
    addTimestamp(packetLog, timestamp) {
        packetLog.window[packetLog.index] = timestamp;
        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;
    }
    /**
     * Checks if a timestamp is in a packetlog
     *
     * @param packetLog : The packetlog to search
     * @param timestamp : The timestamp to search for
     * @returns true if timestamp is present, false otherwise
     */
    hasTimestamp(packetLog, timestamp) {
        const element = packetLog.window.find(t => t === timestamp);
        return !!element;
    }
    /**
     * Removes a timestamp from a packet log
     *
     * @param packetLog : The packetlog from which the timestamp should be removed
     * @param timestamp : The timestamp to be removed
     * @returns true if timestamp was present in the log and removed, false otherwise
     */
    removeTimestamp(packetLog, timestamp) {
        const index = packetLog.window.indexOf(timestamp);
        if (index >= 0) {
            packetLog.window[index] = undefined;
            return true;
        }
        return false;
    }
    /**
     * Removes a timestamp from red and fec recovery windows.
     *
     * @param timestamp : The timestamp to be removed
     */
    removeFromRecoveryWindows(timestamp) {
        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredRed > 0)
                this.totalAudioPacketsRecoveredRed--;
        }
        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredFec > 0)
                this.totalAudioPacketsRecoveredFec--;
        }
    }
    /**
     * Converts the supplied argument to 32-bit unsigned integer
     */
    uint32WrapAround(num) {
        const mod = 4294967296; // 2^32
        let res = num;
        if (num >= mod) {
            res = num - mod;
        }
        else if (num < 0) {
            res = mod + num;
        }
        return res;
    }
    /**
     * Converts the supplied argument to 16-bit signed integer
     */
    int16(num) {
        return (num << 16) >> 16;
    }
    /**
     * Determines if an Opus packet is in CELT-only mode.
     *
     * @param packet Opus packet.
     * @returns \`true\` if the packet is in CELT-only mode.
     */
    opusPacketIsCeltOnly(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1
        // for CELT-only packets.
        return !!(packet.getUint8(0) & 0x80);
    }
    /**
     * Gets the number of samples per frame from an Opus packet.
     *
     * @param packet Opus packet. This must contain at least one byte of data.
     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will
     *                     be returned.
     * @returns Number of samples per frame.
     */
    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {
        // Sample rate must be a 32-bit integer.
        sampleRateHz = Math.round(sampleRateHz);
        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        let numSamples;
        let frameSizeOption;
        // Case for CELT-only packet.
        if (this.opusPacketIsCeltOnly(packet)) {
            // The lower 3 'config' bits indicate the frame size option.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes
            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be
            // calculated as follows:
            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)
            // = (sample/s) * (1s/400) * 2^(frameSizeOption)
            // = (sample/s) * 2^(frameSizeOption) * (1s/400)
            numSamples = (sampleRateHz << frameSizeOption) / 400;
        }
        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the
        // above TOC byte diagram will both be 1.
        else if ((packet.getUint8(0) & 0x60) === 0x60) {
            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15
            // correspond to a 20ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (20ms)
            // = (sample/s) * (1s/50)
            //
            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14
            // correspond to a 10ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (10ms)
            // = (sample/s) * (1s/100)
            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;
        }
        // Case for SILK-only packet.
        else {
            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            if (frameSizeOption === 3) {
                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:
                // (sample/s) * (1s/1000ms) * (60ms)
                // = (sample/s) * (60ms) * (1s/1000ms)
                numSamples = (sampleRateHz * 60) / 1000;
            }
            else {
                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be
                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:
                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)
                // = (sample/s) * (1s/100) * 2^(frameSizeOption)
                // = (sample/s) * 2^(frameSizeOption) * (1s/100)
                numSamples = (sampleRateHz << frameSizeOption) / 100;
            }
        }
        return numSamples;
    }
    /**
     * Gets the number of SILK frames per Opus frame.
     *
     * @param packet Opus packet.
     * @returns Number of SILK frames per Opus frame.
     */
    opusNumSilkFrames(packet) {
        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but
        // any valid sample rate would work.
        //
        // To calculate the length of a frame (with a 48kHz sample rate) in ms:
        // (samples/frame) * (1s/48000 samples) * (1000ms/s)
        // = (samples/frame) * (1000ms/48000 samples)
        // = (samples/frame) * (1ms/48 samples)
        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;
        if (frameLengthMs < 10)
            frameLengthMs = 10;
        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.
        switch (frameLengthMs) {
            case 10:
            case 20:
                return 1;
            case 40:
                return 2;
            case 60:
                return 3;
            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,
            // or 60 ms, so we ignore the default case for test coverage.
            /* istanbul ignore next */
            default:
                return 0;
        }
    }
    /**
     * Gets the number of channels from an Opus packet.
     *
     * @param packet Opus packet.
     * @returns Number of channels.
     */
    opusPacketGetNumChannels(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.
        return packet.getUint8(0) & 0x4 ? 2 : 1;
    }
    /**
     * Determine the size (in bytes) of an Opus frame.
     *
     * @param packet Opus packet.
     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.
     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.
     * @param sizeBytes Variable to store the parsed frame size (in bytes).
     * @returns Number of bytes that were parsed to determine the frame size.
     */
    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {
        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.
        // If there are no remaining bytes to parse the size from, then the size cannot be determined.
        if (remainingBytes < 1) {
            sizeBytes[0] = -1;
            return -1;
        }
        // If the first byte is in the range 0...251, then this value is the size of the frame.
        else if (packet.getUint8(byteOffset) < 252) {
            sizeBytes[0] = packet.getUint8(byteOffset);
            return 1;
        }
        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size
        // cannot be determined.
        else if (remainingBytes < 2) {
            sizeBytes[0] = -1;
            return -1;
        }
        // The total size of the frame given two size bytes is:
        // (4 * secondSizeByte) + firstSizeByte
        else {
            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);
            return 2;
        }
    }
    /**
     * Parse binary data containing an Opus packet into one or more Opus frames.
     *
     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the
     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the
     *             contained Opus packet.
     * @param lenBytes Size of the data (in bytes).
     * @param selfDelimited Indicates if the Opus packet is self-delimiting
     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each
     *                     Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the
     *                      payload.
     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).
     * @returns Number of Opus frames.
     */
    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {
        if (!frameSizes || lenBytes < 0)
            return this.OPUS_BAD_ARG;
        if (lenBytes === 0)
            return this.OPUS_INVALID_PACKET;
        // The number of Opus frames in the packet.
        let numFrames;
        // Intermediate storage for the number of bytes parsed to determine the size of a frame.
        let numBytesParsed;
        // The number of the padding bytes (excluding the padding count bytes) in the packet.
        let paddingBytes = 0;
        // Indicates whether CBR (constant bitrate) framing is used.
        let cbr = false;
        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).
        const toc = data.getUint8(0);
        // Store the TOC byte.
        if (tocByte)
            tocByte[0] = toc;
        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the
        // minus 1.
        let remainingBytes = lenBytes - 1;
        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.
        let byteOffset = 1;
        // The size of the last Opus frame in bytes.
        let lastSizeBytes = remainingBytes;
        // Read the \`c\` bits (i.e. code bits) from the TOC byte.
        switch (toc & 0x3) {
            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.
            case 0:
                numFrames = 1;
                break;
            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.
            case 1:
                numFrames = 2;
                cbr = true;
                if (!selfDelimited) {
                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.
                    if (remainingBytes & 0x1)
                        return this.OPUS_INVALID_PACKET;
                    // The sizes of both frames are equal (i.e. half of the number of data bytes).
                    lastSizeBytes = remainingBytes / 2;
                    // If \`lastSizeBytes\` is too large, we will catch it later.
                    frameSizes[0][0] = lastSizeBytes;
                }
                break;
            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.
            case 2:
                numFrames = 2;
                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);
                remainingBytes -= numBytesParsed;
                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.
                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                byteOffset += numBytesParsed;
                // The size of the second frame is the remaining number of bytes after the first frame.
                lastSizeBytes = remainingBytes - frameSizes[0][0];
                break;
            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to
            // 120 ms).
            default:
                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).
                if (remainingBytes < 1)
                    return this.OPUS_INVALID_PACKET;
                // Frame count byte format:
                //  0
                //  0 1 2 3 4 5 6 7
                // +-+-+-+-+-+-+-+-+
                // |v|p|     M     |
                // +-+-+-+-+-+-+-+-+
                //
                // Read the frame count byte, which immediately follows the TOC byte.
                const frameCountByte = data.getUint8(byteOffset++);
                --remainingBytes;
                // Read the 'M' bits of the frame count byte, which encode the number of frames.
                numFrames = frameCountByte & 0x3f;
                // The number of frames in a code 3 packet must not be 0.
                if (numFrames <= 0)
                    return this.OPUS_INVALID_PACKET;
                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);
                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded
                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot
                // exceed 2880 * 2 = 5760.
                if (samplesPerFrame * numFrames > 5760)
                    return this.OPUS_INVALID_PACKET;
                // Parse padding bytes if the 'p' bit is 1.
                if (frameCountByte & 0x40) {
                    let paddingCountByte;
                    let numPaddingBytes;
                    // Remove padding bytes (including padding count bytes) from the remaining byte count.
                    do {
                        // Sanity check that there are enough bytes to parse and remove the padding.
                        if (remainingBytes <= 0)
                            return this.OPUS_INVALID_PACKET;
                        // Get the next padding count byte.
                        paddingCountByte = data.getUint8(byteOffset++);
                        --remainingBytes;
                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the
                        // value in the padding count byte.
                        //
                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the
                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.
                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;
                        remainingBytes -= numPaddingBytes;
                        paddingBytes += numPaddingBytes;
                    } while (paddingCountByte === 255);
                }
                // Sanity check that the remaining number of bytes is not negative after removing the padding.
                if (remainingBytes < 0)
                    return this.OPUS_INVALID_PACKET;
                // Read the 'v' bit (i.e. VBR bit).
                cbr = !(frameCountByte & 0x80);
                // VBR case
                if (!cbr) {
                    lastSizeBytes = remainingBytes;
                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)
                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the
                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);
                        remainingBytes -= numBytesParsed;
                        // The remaining number of data bytes must be enough to contain each frame.
                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {
                            return this.OPUS_INVALID_PACKET;
                        }
                        byteOffset += numBytesParsed;
                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];
                    }
                    // Sanity check that the size of the last frame is not negative.
                    if (lastSizeBytes < 0)
                        return this.OPUS_INVALID_PACKET;
                }
                // CBR case
                else if (!selfDelimited) {
                    // The size of each frame is the number of data bytes divided by the number of frames.
                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);
                    // The number of data bytes must be a non-negative integer multiple of the number of frames.
                    if (lastSizeBytes * numFrames !== remainingBytes)
                        return this.OPUS_INVALID_PACKET;
                    // All frames have equal size in the undelimited CBR case.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        frameSizes[i][0] = lastSizeBytes;
                    }
                }
        }
        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the
        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and
        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.
        if (selfDelimited) {
            // The extra frame size byte(s) will always indicate the size of the last frame.
            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);
            remainingBytes -= numBytesParsed;
            // There must be enough data bytes for the last frame.
            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {
                return this.OPUS_INVALID_PACKET;
            }
            byteOffset += numBytesParsed;
            // For CBR packets, the sizes of all the frames are equal.
            if (cbr) {
                // There must be enough data bytes for all the frames.
                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                for (let i = 0; i < numFrames - 1; ++i) {
                    frameSizes[i][0] = frameSizes[numFrames - 1][0];
                }
            }
            // At this point, \`lastSizeBytes\` contains the size of the last frame plus the size of the extra frame size
            // byte(s), so sanity check that \`lastSizeBytes\` is the upper bound for the size of the last frame.
            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {
                return this.OPUS_INVALID_PACKET;
            }
        }
        // Undelimited case
        else {
            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet
            // (or of all the packets, for the CBR case) is larger than maximum frame size.
            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)
                return this.OPUS_INVALID_PACKET;
            frameSizes[numFrames - 1][0] = lastSizeBytes;
        }
        // Store the offset to the start of the payload.
        if (payloadOffset)
            payloadOffset[0] = byteOffset;
        // Store the offsets to the start of each frame.
        for (let i = 0; i < numFrames; ++i) {
            if (frameOffsets)
                frameOffsets[i][0] = byteOffset;
            byteOffset += frameSizes[i][0];
        }
        // Store the length of the Opus packet.
        if (packetLenBytes)
            packetLenBytes[0] = byteOffset + paddingBytes;
        return numFrames;
    }
    /**
     * Parse a single undelimited Opus packet into one or more Opus frames.
     *
     * @param packet Opus packet to be parsed.
     * @param lenBytes Size of the packet (in bytes).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of
     *                     each Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the
     *                      payload.
     * @returns Number of Opus frames.
     */
    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {
        return this.opusPacketParseImpl(packet, lenBytes, 
        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);
    }
    /**
     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only
     * packets that do not have VAD information, it returns -1.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  0: no frame had the VAD flag set.
     *           1: at least one frame had the VAD flag set.
     *          -1: VAD status could not be determined.
     */
    opusPacketHasVoiceActivity(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return 0;
        // In CELT-only mode, we can not determine whether there is VAD.
        if (this.opusPacketIsCeltOnly(packet))
            return -1;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        // It is not possible for \`opusNumSilkFrames()\` to return 0, so we ignore the next sanity check for test coverage.
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return -1;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        // VAD status cannot be determined for invalid packets.
        if (numOpusFrames < 0)
            return -1;
        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.
        for (let i = 0; i < numOpusFrames; ++i) {
            if (opusFrameSizes[i][0] < 1)
                continue;
            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):
            //
            // Mono case:
            // +-----------------+----------+
            // | 1 to 3 VAD bits | LBRR bit |
            // +-----------------+----------+
            //
            // Stereo case:
            // +---------------------+--------------+----------------------+---------------+
            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |
            // +---------------------+--------------+----------------------+---------------+
            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of
            // these VAD bits are 1, then voice activity is present.
            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))
                return 1;
            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.
            const channels = this.opusPacketGetNumChannels(packet);
            if (channels === 2 &&
                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {
                return 1;
            }
        }
        // No voice activity was detected.
        return 0;
    }
    /**
     * This method is based on Definition of the Opus Audio Codec
     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on
     * parsing the LP layer of an Opus packet, particularly the LBRR flag.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  true: packet has fec encoding about previous packet.
     *           false: no fec encoding present.
     */
    opusPacketHasFec(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return false;
        // In CELT-only mode, packets should not have FEC.
        if (this.opusPacketIsCeltOnly(packet))
            return false;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        if (numOpusFrames < 0)
            return false;
        /* istanbul ignore next */
        if (opusFrameSizes[0][0] <= 1)
            return false;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return false;
        const channels = this.opusPacketGetNumChannels(packet);
        /* istanbul ignore next */
        if (channels !== 1 && channels !== 2)
            return false;
        // A frame starts with the LP layer. The LP layer begins with two to eight
        // header bits.These consist of one VAD bit per SILK frame (up to 3),
        // followed by a single flag indicating the presence of LBRR frames.
        // For a stereo packet, these first flags correspond to the mid channel, and
        // a second set of flags is included for the side channel. Because these are
        // the first symbols decoded by the range coder and because they are coded
        // as binary values with uniform probability, they can be extracted directly
        // from the most significant bits of the first byte of compressed data.
        for (let i = 0; i < channels; i++) {
            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))
                return true;
        }
        return false;
    }
}
RedundantAudioEncoder.shouldLog = true;
RedundantAudioEncoder.shouldReportStats = true;
RedundantAudioEncoder.initializeWorker();
`;l.default=f},359454:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(747675));let m=s(class extends g.default{static nextTick(a){setTimeout(a,0)}constructor(){super(0)}},"AsyncScheduler");l.default=m},449341:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{start(g){this.stop(),this.timer=setInterval(g,this.intervalMs)}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}running(){return this.timer!==void 0}constructor(g){this.intervalMs=g}},"IntervalScheduler");l.default=f},747675:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{start(g){this.stop(),this.timer=setTimeout(()=>{clearTimeout(this.timer),g()},this.timeoutMs)}stop(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}constructor(g){this.timeoutMs=g,this.timer=null}},"TimeoutScheduler");l.default=f},182394:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(250353)),m=u(f(641125)),h=u(f(232666));let a=s(class Pt{clone(){return new Pt(this.sdp)}static isRTPCandidate(n){const e=/candidate[:](\S+) (\d+)/g.exec(n);return!(e===null||e[2]!=="1")}static linesToSDP(n){return new Pt(n.join(Pt.CRLF))}static candidateTypeFromString(n){switch(n){case g.default.Host:return g.default.Host;case g.default.ServerReflexive:return g.default.ServerReflexive;case g.default.PeerReflexive:return g.default.PeerReflexive;case g.default.Relay:return g.default.Relay}return null}static candidateType(n){const e=/a[=]candidate[:].* typ ([a-z]+) /g.exec(n);return e===null?null:Pt.candidateTypeFromString(e[1])}static mediaType(n){const e=/m=(audio|video)/g.exec(n);if(e!==null)return e[1]}static mid(n){if(n.includes("a=mid:"))return n.replace(/^(a=mid:)/,"")}static direction(n){const e=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(n);if(e!==null)return e[1]}static splitLines(n){return n.trim().split(`
`).map(e=>e.trim())}static splitSections(n){return n.split(`
m=`).map((t,i)=>(i>0?"m="+t:t).trim()+Pt.CRLF)}static findActiveCameraSection(n){let e=0,t=!1;for(const i of n){if(/^m=video/.test(i)&&(i.indexOf("sendrecv")>-1||i.indexOf("sendonly")===-1&&i.indexOf("recvonly")===-1&&i.indexOf("inactive")===-1)){t=!0;break}e++}return t===!1&&(e=-1),e}static extractSSRCsFromFIDGroupLine(n){return/^a=ssrc-group:FID\s(.+)/.exec(n)[1]}static matchPrefix(n,e){return Pt.splitLines(n).filter(t=>t.indexOf(e)===0)}lines(){return this.sdp.split(Pt.CRLF)}hasVideo(){return/^m=video/gm.exec(this.sdp)!==null}hasCandidates(){return/a[=]candidate[:]/g.exec(this.sdp)!==null}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(n){return Pt.linesToSDP(this.lines().filter(e=>Pt.candidateType(e)!==n))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(g.default.ServerReflexive)}withAudioMaxAverageBitrate(n){if(!n)return this.clone();n=Math.trunc(Math.min(Math.max(n,Pt.rfc7587LowestBitrate),Pt.rfc7587HighestBitrate));const e=this.lines(),t=Pt.findOpusFmtpAttributes(e),i=Pt.updateOpusFmtpAttributes(e,t,[`maxaveragebitrate=${n}`]);return Pt.linesToSDP(i)}withStereoAudio(){const n=this.lines(),e=Pt.findOpusFmtpAttributes(n),t=Pt.updateOpusFmtpAttributes(n,e,["stereo=1","sprop-stereo=1"]);return Pt.linesToSDP(t)}static findOpusFmtpAttributes(n){const e=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let t=!1;const i=[];for(const o of n)if(o.startsWith("m=audio")&&(i.push(null),t=!0),o.startsWith("m=video")&&(t=!1),t){const c=e.exec(o);c!==null&&(i[i.length-1]=`a=fmtp:${c[1]} `)}return i}static updateOpusFmtpAttributes(n,e,t){const i=[];let o=0,c=null;for(const p of n)if(p.startsWith("m=audio")&&(c=e[o],o++),p.startsWith("m=video")&&(c=null),c&&p.startsWith(c)){const S=p.slice(c.length).split(";"),d=[];for(const y of S)t.findIndex(I=>I.startsWith(y.split("=")[0]))<0&&d.push(y);for(const y of t)d.push(y);i.push(c+d.join(";"))}else i.push(p);return i}withUnifiedPlanFormat(){let n=this.sdp;return n.includes("mozilla")?this.clone():(n=n.replace("o=-","o=mozilla-chrome"),new Pt(n))}getUniqueRtpHeaderExtensionId(n){const e=[];for(const i of n)if(/^a=extmap:/.test(i.trim())){const c=+i.split("a=extmap:")[1].split(" ")[0];e.includes(c)||e.push(c)}e.sort((i,o)=>i-o);let t=0;for(const i of e){if(i-t>1)return t+1;t=i}return t===14?-1:t+1}withVideoLayersAllocationRtpHeaderExtension(n){return this.withRtpHeaderExtension(n,Pt.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(n){return this.withRtpHeaderExtension(n,Pt.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const n=Pt.splitLines(this.sdp).filter(e=>!e.includes(Pt.dependencyDescriptorRtpHeaderExtensionUrl));return new Pt(n.join(Pt.CRLF)+Pt.CRLF)}withRtpHeaderExtension(n,e){const t=n?n.getRtpHeaderExtensionId(e):-1,i=t===-1?this.getUniqueRtpHeaderExtensionId(Pt.splitLines(this.sdp)):t,o=Pt.splitSections(this.sdp),c=[];for(let S of o){if(/^m=video/.test(S)&&Pt.getRtpHeaderExtensionIdInSection(S,e)===-1){const d=Pt.splitLines(S),y=[];if(i===-1||this.hasRtpHeaderExtensionId(i)){c.push(S);continue}for(const E of d)if(y.push(E),/^a=sendrecv/.test(E.trim())){const I="a=extmap:"+i+" "+e;y.push(I)}S=y.join(Pt.CRLF)+Pt.CRLF}else if(t!==-1&&/^m=video/.test(S)&&Pt.getRtpHeaderExtensionIdInSection(S,e)!==t){const d=Pt.splitLines(S),y=[];for(const E of d){if(/^a=extmap:/.test(E.trim())&&E.split("a=extmap:")[1].split(" ")[1]===e){if(!this.hasRtpHeaderExtensionId(t)){const A="a=extmap:"+t+" "+e;y.push(A)}continue}y.push(E)}S=y.join(Pt.CRLF)+Pt.CRLF}c.push(S)}const p=c.join("");return new Pt(p)}ssrcForVideoSendingSection(){const n=this.sdp,e=Pt.splitSections(n);if(e.length<2)return"";const t=Pt.findActiveCameraSection(e);if(t===-1)return"";const i=Pt.matchPrefix(e[t],"a=ssrc-group:FID ");if(i.length<1)return"";const o=Pt.extractSSRCsFromFIDGroupLine(i[0]),[c]=o.split(" ").map(p=>parseInt(p,10));return c.toString()}videoSendSectionHasDifferentSSRC(n){const e=this.ssrcForVideoSendingSection(),t=n.ssrcForVideoSendingSection();if(e===""||t==="")return!1;const i=parseInt(e,10),o=parseInt(t,10);return i!==o}removeH264SupportFromSendSection(){const n=this.sdp,e=Pt.splitSections(n),t=Pt.findActiveCameraSection(e);if(t===-1)return new Pt(this.sdp);const i=e[t],o=Pt.splitLines(i),c=[],p=new Map;o.forEach(E=>{if(/^a=rtpmap:/.test(E)){const I=/^a=rtpmap:([0-9]+)\s/.exec(E);I&&E.toLowerCase().includes("h264")&&c.push(parseInt(I[1],10))}if(/^a=fmtp:/.test(E)){const I=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(E);if(I&&I.length===3){const A=parseInt(I[1],10),L=parseInt(I[2],10);p.has(L)?p.get(L).push(A):p.set(L,[A])}}});const S=new Set;for(const E of c){S.add(E);const I=p.get(E);if(I)for(const A of I)S.add(A)}if(c.length>0){const E=o[0].split(" ");o[0]=E.filter(I=>!S.has(parseInt(I))).join(" ")}const d=o.filter(E=>{if(!E.includes("rtpmap")&&!E.includes("rtcp-fb")&&!E.includes("fmtp"))return!0;for(const I of S)if(E.includes(I.toString()))return!1;return!0});e[t]=d.join(Pt.CRLF)+Pt.CRLF;const y=e.join("");return new Pt(y)}mediaSections(){const n=Pt.splitSections(this.sdp);if(n.length<2)return[];const e=[];for(let t=1;t<n.length;t++){const i=new m.default,o=Pt.splitLines(n[t]);for(const c of o){const p=Pt.mediaType(c);if(p!==void 0){i.mediaType=p;continue}const S=Pt.direction(c);if(S!==void 0){i.direction=S;continue}const d=Pt.mid(c);if(d!==void 0){i.mid=d;continue}}e.push(i)}return e}static getRtpHeaderExtensionIdInSection(n,e){const t=Pt.splitLines(n);for(const i of t)if(/^a=extmap:/.test(i.trim())){const o=i.split("a=extmap:")[1].split(" "),c=+o[0];if(o[1]===e)return c}return-1}getRtpHeaderExtensionId(n){const e=Pt.splitSections(this.sdp);for(const t of e)if(/^m=video/.test(t)){const i=Pt.getRtpHeaderExtensionIdInSection(t,n);if(i!==-1)return i}return-1}hasRtpHeaderExtensionId(n){const e=Pt.splitLines(this.sdp);for(const t of e)if(/^a=extmap:/.test(t.trim())&&+t.split("a=extmap:")[1].split(" ")[0]===n)return!0;return!1}withVideoSendCodecPreferences(n){const e=this.sdp,t=Pt.splitSections(e),i=Pt.findActiveCameraSection(t);if(i===-1)return new Pt(this.sdp);t[i]=this.sectionWithCodecPreferences(t[i],n);const o=t.join("");return new Pt(o)}sectionWithCodecPreferences(n,e){const t=new Map,i=Pt.splitLines(n);i.forEach(S=>{if(!S.startsWith("a=rtpmap:"))return;const d=/^a=rtpmap:(\d+)\s/.exec(S);if(!d)return;const y=d[1];for(const E of e){if(!S.includes(`${E.codecName}/${E.codecCapability.clockRate}`))continue;let I=!1;if(E.codecCapability.sdpFmtpLine!==void 0){let A=!1;for(const L of i){if(E.fmtpLineMatches(L,parseInt(y))){I=!0;break}A||(A=L.startsWith(`a=fmtp:${y} profile-id=`))}E.equals(h.default.vp9Profile0())&&!A&&(I=!0)}else I=!0;if(I){t.set(y,E);break}}});const o=new Set(t.keys()),c=i[0].split(" ").filter(S=>!o.has(S)),p=Array.from(t.entries()).sort((S,d)=>{let[y,E]=S,[I,A]=d;const L=e.indexOf(E),M=e.indexOf(A);return L-M}).map(S=>{let[d,y]=S;return d});return c.splice(3,0,...p),i[0]=c.join(" "),i.join(Pt.CRLF)+Pt.CRLF}highestPriorityVideoSendCodec(){const n=this.prioritizedSendVideoCodecCapabilities();return n.length>0?n[0]:void 0}prioritizedSendVideoCodecCapabilities(){const n=this.sdp,e=Pt.splitSections(n),t=Pt.findActiveCameraSection(e);if(t===-1)return[];const i=Pt.splitLines(e[t]),o=i[0].split(" ");return o.length<4?[]:o.slice(3).map(S=>this.videoCodecCapabilityForPayloadType(i,S)).filter(S=>S!==void 0&&["VP8","H264","VP9","AV1"].includes(S.codecName))}videoCodecCapabilityForPayloadType(n,e){let t,i,o;for(const c of n){const p=/^a=rtpmap:([0-9]+)\s/.exec(c);if(p&&p[1]===e){const d=c.split(" ")[1].split("/");d.length>=2&&(t=d[0],i=d[1])}c.startsWith(`a=fmtp:${e} `)&&(o=c.split(" ")[1])}if(t!==void 0)return new h.default(t,{clockRate:parseInt(i),mimeType:`video/${t}`,sdpFmtpLine:o})}getAudioPayloadTypes(){const n=new Map,e=this.sdp,t=Pt.splitSections(e);return n.set("opus",Pt.findAudioPayloadType("opus",t)),n.set("red",Pt.findAudioPayloadType("red",t)),n}static findAudioPayloadType(n,e){const t=`a=rtpmap:\\s*(\\d+)\\s+${n}\\/48000`,i=new RegExp(t);for(const o of e)if(/^m=audio/.test(o)){const c=i.exec(o);if(c!==null)return Number(c[1])}return 0}withStartingVideoSendBitrate(n){const e=Pt.splitSections(this.sdp),t=Pt.findActiveCameraSection(e);if(t===-1)return this;const i=Pt.splitLines(e[t]),o=[];for(const p of i)if(/^a=fmtp:\d*/.test(p)){const S=p+`;x-google-start-bitrate=${n*1e3}`;o.push(S)}else o.push(p);e[t]=o.join(Pt.CRLF)+Pt.CRLF;const c=e.join("");return new Pt(c)}constructor(n){this.sdp=n}},"SDP");l.default=a,a.CRLF=`\r
`,a.rfc7587LowestBitrate=6e3,a.rfc7587HighestBitrate=51e4,a.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",a.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},250353:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SDPCandidateType=void 0;var f;(function(u){u.Host="host",u.ServerReflexive="srflx",u.PeerReflexive="prflx",u.Relay="relay"})(f=l.SDPCandidateType||(l.SDPCandidateType={})),l.default=f},641125:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"SDPMediaSection");l.default=f},232666:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=f(459746);let g=s(class ui{equals(h){return h!==void 0&&this.codecName===h.codecName&&this.codecCapability.mimeType===h.codecCapability.mimeType&&this.codecCapability.clockRate===h.codecCapability.clockRate&&this.codecCapability.sdpFmtpLine===h.codecCapability.sdpFmtpLine}fmtpLineMatches(h,a){const r=this.codecCapability.sdpFmtpLine;if(!r)return!1;if(this.codecName==="H264"){const n=/profile-level-id=([0-9a-f]{4})[0-9a-f]{2}/i,e=r.replace(n,"profile-level-id=$1");return h.replace(n,"profile-level-id=$1").startsWith(`a=fmtp:${a} ${e}`)}return h.startsWith(`a=fmtp:${a} ${r}`)}static vp8(){return new ui("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264BaselineProfile(){return new ui("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"})}static h264ConstrainedBaselineProfile(){return new ui("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264MainProfile(){return new ui("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d001f"})}static h264HighProfile(){return new ui("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=64001f"})}static h264ConstrainedHighProfile(){return new ui("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640c1f"})}static h264(){return ui.h264ConstrainedBaselineProfile()}static vp9Profile0(){return new ui("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static vp9(){return ui.vp9Profile0()}static av1Main(){return new ui("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static av1(){return ui.av1Main()}static fromSignaled(h){switch(h){case u.SdkVideoCodecCapability.VP8:return ui.vp8();case u.SdkVideoCodecCapability.H264_BASELINE_PROFILE:return ui.h264BaselineProfile();case u.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return ui.h264ConstrainedBaselineProfile();case u.SdkVideoCodecCapability.H264_MAIN_PROFILE:return ui.h264MainProfile();case u.SdkVideoCodecCapability.H264_HIGH_PROFILE:return ui.h264HighProfile();case u.SdkVideoCodecCapability.H264_CONSTRAINED_HIGH_PROFILE:return ui.h264ConstrainedHighProfile();case u.SdkVideoCodecCapability.VP9_PROFILE_0:return ui.vp9Profile0();case u.SdkVideoCodecCapability.AV1_MAIN_PROFILE:return ui.av1Main();default:return}}constructor(h,a){this.codecName=h,this.codecCapability=a}},"VideoCodecCapability");l.default=g},864652:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=f(477051);let g=s(class Ql{compress(h,a){if(a.length>0){const e=Math.min(a.length,Ql.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const r={memLevel:Ql.Z_MEM_LEVEL,dictionary:a};return u.deflateRaw(h,r)}decompress(h,a){if(a.length>0){const e=Math.min(a.length,Ql.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const r={to:"string",dictionary:a,chunkSize:4096};let n="";try{n=u.inflateRaw(h,r)}catch(e){this.logger.error(`failed to decompress the string with error: [${e}]`)}return n}constructor(h){this.logger=h}},"ZLIBTextCompressor");l.default=g,g.Z_MEM_LEVEL=9,g.MAX_DICTIONARY_SIZE=31744},866003:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=f(860872),g=f(924292),m=f(956877),h=f(547452);let a=s(class{perform(n,e){const t=this.currentState;if(t===m.SessionStateControllerState.NotConnected&&n===u.SessionStateControllerAction.Connect)this.transition(m.SessionStateControllerState.Connecting,n);else if(t===m.SessionStateControllerState.Connecting&&n===u.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connecting&&n===u.SessionStateControllerAction.FinishConnecting)this.transition(m.SessionStateControllerState.Connected,n);else if(t===m.SessionStateControllerState.Connected&&n===u.SessionStateControllerAction.Disconnect)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connected&&n===u.SessionStateControllerAction.Reconnect)this.transition(m.SessionStateControllerState.Connecting,n);else if(t===m.SessionStateControllerState.Connected&&n===u.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Connected&&n===u.SessionStateControllerAction.Update)this.transition(m.SessionStateControllerState.Updating,n);else if(t===m.SessionStateControllerState.Updating&&n===u.SessionStateControllerAction.Fail)this.transition(m.SessionStateControllerState.Disconnecting,n);else if(t===m.SessionStateControllerState.Updating&&n===u.SessionStateControllerAction.FinishUpdating)this.transition(m.SessionStateControllerState.Connected,n);else if(t===m.SessionStateControllerState.Disconnecting&&n===u.SessionStateControllerAction.FinishDisconnecting)this.transition(m.SessionStateControllerState.NotConnected,n);else return this.canDefer(n)?(this.logger.info(`deferring transition from ${m.SessionStateControllerState[this.currentState]} with ${u.SessionStateControllerAction[n]}`),this.deferAction(n,e),h.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${m.SessionStateControllerState[this.currentState]} with ${u.SessionStateControllerAction[n]}`),h.SessionStateControllerTransitionResult.NoTransitionAvailable);try{e()}catch(i){return this.logger.error(`error during state ${m.SessionStateControllerState[this.currentState]} with action ${u.SessionStateControllerAction[n]}: ${i}`),this.logger.info(`rolling back transition to ${m.SessionStateControllerState[t]}`),this.currentState=t,h.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),h.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(n,e){this.logger.info(`transitioning from ${m.SessionStateControllerState[this.currentState]} to ${m.SessionStateControllerState[n]} with ${u.SessionStateControllerAction[e]}`),this.currentState=n}deferPriority(n){switch(n){case u.SessionStateControllerAction.Disconnect:return g.SessionStateControllerDeferPriority.VeryHigh;case u.SessionStateControllerAction.Fail:return g.SessionStateControllerDeferPriority.High;case u.SessionStateControllerAction.Reconnect:return g.SessionStateControllerDeferPriority.Medium;case u.SessionStateControllerAction.Update:return g.SessionStateControllerDeferPriority.Low;default:return g.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(n,e){this.deferredAction!==null&&this.deferPriority(this.deferredAction)>this.deferPriority(n)||(this.deferredAction=n,this.deferredWork=e)}canDefer(n){return this.deferPriority(n)!==g.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===m.SessionStateControllerState.Connecting||this.currentState===m.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const n=this.deferredAction,e=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${u.SessionStateControllerAction[n]}`),this.perform(n,e)!==h.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${u.SessionStateControllerAction[n]} in state ${m.SessionStateControllerState[this.currentState]}`)}constructor(n){this.logger=n,this.currentState=m.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}},"DefaultSessionStateController");l.default=a},860872:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerAction=void 0;var f;(function(u){u[u.Connect=0]="Connect",u[u.FinishConnecting=1]="FinishConnecting",u[u.Update=2]="Update",u[u.FinishUpdating=3]="FinishUpdating",u[u.Reconnect=4]="Reconnect",u[u.Disconnect=5]="Disconnect",u[u.Fail=6]="Fail",u[u.FinishDisconnecting=7]="FinishDisconnecting"})(f=l.SessionStateControllerAction||(l.SessionStateControllerAction={})),l.default=f},924292:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerDeferPriority=void 0;var f;(function(u){u[u.DoNotDefer=0]="DoNotDefer",u[u.Low=1]="Low",u[u.Medium=2]="Medium",u[u.High=3]="High",u[u.VeryHigh=4]="VeryHigh"})(f=l.SessionStateControllerDeferPriority||(l.SessionStateControllerDeferPriority={})),l.default=f},956877:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerState=void 0;var f;(function(u){u[u.NotConnected=0]="NotConnected",u[u.Connecting=1]="Connecting",u[u.Connected=2]="Connected",u[u.Updating=3]="Updating",u[u.Disconnecting=4]="Disconnecting"})(f=l.SessionStateControllerState||(l.SessionStateControllerState={})),l.default=f},547452:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerTransitionResult=void 0;var f;(function(u){u[u.Transitioned=0]="Transitioned",u[u.NoTransitionAvailable=1]="NoTransitionAvailable",u[u.DeferredTransition=2]="DeferredTransition",u[u.TransitionFailed=3]="TransitionFailed"})(f=l.SessionStateControllerTransitionResult||(l.SessionStateControllerTransitionResult={})),l.default=f},572709:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(48839)),m=u(f(747675)),h=f(459746),a=f(817426),r=u(f(244504)),n=u(f(821234)),e=u(f(293975)),t=f(493149),i=u(f(710196)),o=u(f(497324));let c=s(class Xa{registerObserver(S){this.logger.debug(()=>"registering signaling client observer"),this.observerQueue.add(S)}removeObserver(S){this.logger.debug(()=>"removing signaling client observer"),this.observerQueue.delete(S)}openConnection(S){this.logger.info("adding connection request to queue: "+S.url()),this.connectionRequestQueue.push(S),this.closeConnection()}pingPong(S){this.logger.debug(()=>"sending ping");const d=h.SdkSignalFrame.create();return d.type=h.SdkSignalFrame.Type.PING_PONG,d.pingPong=S,this.sendMessage(d),d.timestampMs}join(S){this.logger.info("sending join");const d=h.SdkJoinFrame.create();d.protocolVersion=2,d.flags=h.SdkJoinFlags.HAS_STREAM_UPDATE;const y=new g.default,E={platformName:y.name(),platformVersion:y.version(),clientSource:r.default.sdkName,chimeSdkVersion:r.default.sdkVersion,clientUtcOffset:a.getFormattedOffset(new Date().getTimezoneOffset())};if(S.applicationMetadata){const{appName:A,appVersion:L}=S.applicationMetadata;E.appName=A,E.appVersion=L}d.clientDetails=h.SdkClientDetails.create(E),d.audioSessionId=this.audioSessionId,d.wantsCompressedSdp=Xa.CLIENT_SUPPORTS_COMPRESSION,d.disablePeriodicKeyframeRequestOnContentSender=S.disablePeriodicKeyframeRequestOnContentSender,d.serverSideNetworkAdaption=t.convertServerSideNetworkAdaptionEnumToSignaled(S.serverSideNetworkAdaption),d.supportedServerSideNetworkAdaptions=S.supportedServerSideNetworkAdaptions.map(t.convertServerSideNetworkAdaptionEnumToSignaled),d.wantsAllTemporalLayersInIndex=S.wantsAllTemporalLayersInIndex;const I=h.SdkSignalFrame.create();I.type=h.SdkSignalFrame.Type.JOIN,I.join=d,this.sendMessage(I)}subscribe(S){const d=h.SdkSubscribeFrame.create();if(d.sendStreams=[],d.sdpOffer=S.sdpOffer,S.connectionTypeHasVideo&&(d.receiveStreamIds=S.receiveStreamIds),S.audioHost&&(d.audioCheckin=S.audioCheckin,d.audioHost=S.audioHost,d.audioMuted=S.audioMuted,!S.audioCheckin)){const E=h.SdkStreamDescriptor.create();E.mediaType=h.SdkStreamMediaType.AUDIO,E.trackLabel="AmazonChimeExpressAudio",E.attendeeId=S.attendeeId,E.streamId=1,E.groupId=1,E.framerate=15,E.maxBitrateKbps=600,E.avgBitrateBps=4e5,d.sendStreams.push(E)}if(d.compressedSdpOffer=S.compressedSdpOffer,d.duplex=h.SdkStreamServiceType.RX,S.localVideoEnabled){d.duplex=h.SdkStreamServiceType.DUPLEX;for(let E=0;E<S.videoStreamDescriptions.length;E++){const I=S.videoStreamDescriptions[E].clone();I.attendeeId=S.attendeeId,d.sendStreams.push(I.toStreamDescriptor())}}S.videoSubscriptionConfiguration.length>0&&(d.videoSubscriptionConfiguration=S.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const y=h.SdkSignalFrame.create();y.type=h.SdkSignalFrame.Type.SUBSCRIBE,y.sub=d,this.sendMessage(y)}remoteVideoUpdate(S,d){const y=h.SdkRemoteVideoUpdateFrame.create();y.addedOrUpdatedVideoSubscriptions=S.map(this.convertSignalingClientVideoSubscriptionConfiguration),y.removedVideoSubscriptionMids=d;const E=h.SdkSignalFrame.create();E.type=h.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,E.remoteVideoUpdate=y,this.sendMessage(E)}convertSignalingClientVideoSubscriptionConfiguration(S){const d=new h.SdkVideoSubscriptionConfiguration;switch(d.mid=S.mid,d.attendeeId=S.attendeeId,d.streamId=S.streamId,d.groupId=S.groupId,d.priority=S.priority,d.targetBitrateKbps=S.targetBitrateKbps,S.qualityAdaptationPreference){case n.default.Balanced:d.qualityAdaptationPreference=h.SdkVideoQualityAdaptationPreference.BALANCED;break;case n.default.MaintainFramerate:d.qualityAdaptationPreference=h.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case n.default.MaintainResolution:d.qualityAdaptationPreference=h.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:d.qualityAdaptationPreference=h.SdkVideoQualityAdaptationPreference.BALANCED}return d}leave(){const S=h.SdkSignalFrame.create();S.type=h.SdkSignalFrame.Type.LEAVE,S.leave=h.SdkLeaveFrame.create(),this.sendMessage(S),this.logger.debug(()=>"sent leave")}sendClientMetrics(S){const d=h.SdkSignalFrame.create();d.type=h.SdkSignalFrame.Type.CLIENT_METRIC,d.clientMetric=S,this.sendMessage(d)}sendDataMessage(S){const d=h.SdkSignalFrame.create();d.type=h.SdkSignalFrame.Type.DATA_MESSAGE,d.dataMessage=S,this.sendMessage(d)}closeConnection(){var S,d;if(this.webSocket.readyState()!==e.default.None&&this.webSocket.readyState()!==e.default.Closed){this.isClosing=!0,this.sendEvent(new i.default(this,o.default.WebSocketClosing,null));const y=new m.default(Xa.CLOSE_EVENT_TIMEOUT_MS),E=s(I=>{var A,L;(L=(A=this.webSocket).removeEventListener)===null||L===void 0||L.call(A,"close",E),y.stop(),this.closeEventHandler(I)},"handler");(d=(S=this.webSocket).removeEventListener)===null||d===void 0||d.call(S,"close",this.closeEventHandler),this.webSocket.addEventListener("close",E),y.start(()=>{E(new CloseEvent("close",{wasClean:!1,code:1006,reason:"",bubbles:!1}))}),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===e.default.Open&&!this.isClosing&&this.wasOpened}mute(S){const d=h.SdkSignalFrame.create();d.type=h.SdkSignalFrame.Type.AUDIO_CONTROL;const y=h.SdkAudioControlFrame.create();y.muted=S,d.audioControl=y,this.sendMessage(d)}pause(S){const d=h.SdkSignalFrame.create();d.type=h.SdkSignalFrame.Type.PAUSE,d.pause=h.SdkPauseResumeFrame.create(),d.pause.streamIds=S,this.sendMessage(d)}resume(S){const d=h.SdkSignalFrame.create();d.type=h.SdkSignalFrame.Type.RESUME,d.pause=h.SdkPauseResumeFrame.create(),d.pause.streamIds=S,this.sendMessage(d)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(S){S.timestampMs=Date.now(),this.logger.debug(()=>`sending: ${JSON.stringify(S)}`);const d=this.prependWithFrameTypeRTC(h.SdkSignalFrame.encode(S).finish());if(this.ready()){if(!this.webSocket.send(d)){this.sendEvent(new i.default(this,o.default.WebSocketSendMessageFailure,null));return}this.sendEvent(new i.default(this,o.default.WebSocketSentMessage,null))}else this.sendEvent(new i.default(this,o.default.WebSocketSkippedMessage,null))}receiveMessage(S){let d;try{d=h.SdkSignalFrame.decode(S)}catch{this.logger.info(`failed to decode: ${S}`),this.sendEvent(new i.default(this,o.default.ProtocolDecodeFailure,null));return}this.logger.debug(()=>`received: ${JSON.stringify(d)}`),this.webSocket.readyState()===e.default.Open?this.sendEvent(new i.default(this,o.default.ReceivedSignalFrame,d)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(d)}`)}stripFrameTypeRTC(S){const d=S[0];return d!==Xa.FRAME_TYPE_RTC&&d!==2&&this.logger.warn(`expected FrameTypeRTC for message but got ${d}`),S.slice(1)}prependWithFrameTypeRTC(S){const d=new Uint8Array(S.length+1);return d[0]=Xa.FRAME_TYPE_RTC,d.set(S,1),d}serviceConnectionRequestQueue(){if(this.connectionRequestQueue.length===0){this.logger.info("no connection requests to service");return}const S=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${S.url()}`),this.isClosing=!1,this.webSocket.create(S.url(),S.protocols()),this.setUpEventListeners(),this.sendEvent(new i.default(this,o.default.WebSocketConnecting,null))}sendEvent(S){switch(S.type){case o.default.WebSocketMessage:case o.default.ReceivedSignalFrame:case o.default.WebSocketSentMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}`);break;case o.default.WebSocketSkippedMessage:this.logger.debug(()=>`notifying event: ${o.default[S.type]}, websocket state=${e.default[this.webSocket.readyState()]}`);break;default:this.logger.info(`notifying event: ${o.default[S.type]}`);break}for(const d of this.observerQueue)d.handleSignalingClientEvent(S)}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new i.default(this,o.default.WebSocketOpen,null))}),this.webSocket.addEventListener("message",S=>{this.sendEvent(new i.default(this,o.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(S.data)))}),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",()=>{if(this.isClosing&&!this.wasOpened){this.logger.info("ignoring error closing signaling while connecting");return}this.wasOpened?(this.logger.error("received error while connected"),this.sendEvent(new i.default(this,o.default.WebSocketError,null))):(this.logger.error("failed to connect"),this.sendEvent(new i.default(this,o.default.WebSocketFailed,null)))})}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const S=f.g;S.window&&S.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const S=f.g;S.window&&S.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const S=new Uint32Array(1);return a.getRandomValues(S),S[0]}promoteToPrimaryMeeting(S){const d=h.SdkMeetingSessionCredentials.create();d.attendeeId=S.attendeeId,d.externalUserId=S.externalUserId,d.joinToken=S.joinToken;const y=h.SdkPrimaryMeetingJoinFrame.create();y.credentials=d;const E=h.SdkSignalFrame.create();E.type=h.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,E.primaryMeetingJoin=y,this.sendMessage(E)}demoteFromPrimaryMeeting(){const S=h.SdkPrimaryMeetingLeaveFrame.create(),d=h.SdkSignalFrame.create();d.type=h.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,d.primaryMeetingLeave=S,this.sendMessage(d)}constructor(S,d){this.webSocket=S,this.logger=d,this.unloadHandler=null,this.closeEventHandler=y=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new i.default(this,o.default.WebSocketClosed,null,y.code,y.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug(()=>"signaling client init"),this.audioSessionId=this.generateNewAudioSessionId()}},"DefaultSignalingClient");l.default=c,c.FRAME_TYPE_RTC=5,c.CLOSE_EVENT_TIMEOUT_MS=2e3,c.CLIENT_SUPPORTS_COMPRESSION=!0},493149:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertServerSideNetworkAdaptionEnumToSignaled=l.convertServerSideNetworkAdaptionEnumFromSignaled=l.serverSideNetworkAdaptionIsNoneOrDefault=l.ServerSideNetworkAdaption=void 0;const u=f(459746);var g;(function(r){r[r.Default=0]="Default",r[r.None=1]="None",r[r.BandwidthProbing=2]="BandwidthProbing",r[r.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"})(g=l.ServerSideNetworkAdaption||(l.ServerSideNetworkAdaption={})),l.default=g;function m(r){return r===g.None||r===g.Default}s(m,"serverSideNetworkAdaptionIsNoneOrDefault"),l.serverSideNetworkAdaptionIsNoneOrDefault=m;function h(r){switch(r){case u.SdkServerSideNetworkAdaption.DEFAULT:return g.Default;case u.SdkServerSideNetworkAdaption.NONE:return g.None;case u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return g.BandwidthProbing;case u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return g.BandwidthProbingAndRemoteVideoQualityAdaption}}s(h,"convertServerSideNetworkAdaptionEnumFromSignaled"),l.convertServerSideNetworkAdaptionEnumFromSignaled=h;function a(r){switch(r){case g.Default:return u.SdkServerSideNetworkAdaption.DEFAULT;case g.None:return u.SdkServerSideNetworkAdaption.NONE;case g.BandwidthProbing:return u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case g.BandwidthProbingAndRemoteVideoQualityAdaption:return u.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}s(a,"convertServerSideNetworkAdaptionEnumToSignaled"),l.convertServerSideNetworkAdaptionEnumToSignaled=a},960881:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}constructor(g,m){this.signalingURL=g,this.joinToken=m}},"SignalingClientConnectionRequest");l.default=f},710196:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(497324));let m=s(class{isConnectionTerminated(){switch(this.type){case g.default.WebSocketFailed:case g.default.WebSocketError:case g.default.WebSocketClosing:case g.default.WebSocketClosed:return!0;default:return!1}}constructor(a,r,n,e,t){this.client=a,this.type=r,this.message=n,this.closeCode=e,this.closeReason=t,this.timestampMs=Date.now()}},"SignalingClientEvent");l.default=m},497324:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SignalingClientEventType=void 0;var f;(function(u){u[u.WebSocketConnecting=0]="WebSocketConnecting",u[u.WebSocketOpen=1]="WebSocketOpen",u[u.WebSocketError=2]="WebSocketError",u[u.WebSocketClosing=3]="WebSocketClosing",u[u.WebSocketClosed=4]="WebSocketClosed",u[u.WebSocketFailed=5]="WebSocketFailed",u[u.WebSocketMessage=6]="WebSocketMessage",u[u.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",u[u.WebSocketSentMessage=8]="WebSocketSentMessage",u[u.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",u[u.ReceivedSignalFrame=10]="ReceivedSignalFrame",u[u.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"})(f=l.SignalingClientEventType||(l.SignalingClientEventType={})),l.default=f},248970:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(493149));let m=s(class{constructor(a){this.applicationMetadata=a,this.serverSideNetworkAdaption=g.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}},"SignalingClientJoin");l.default=m},790344:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{constructor(g,m,h,a,r,n,e,t,i,o){this.attendeeId=g,this.sdpOffer=m,this.audioHost=h,this.audioMuted=a,this.audioCheckin=r,this.receiveStreamIds=n,this.localVideoEnabled=e,this.videoStreamDescriptions=t,this.connectionTypeHasVideo=i,this.compressedSdpOffer=o,this.videoSubscriptionConfiguration=[]}},"SignalingClientSubscribe");l.default=f},463258:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{equals(g){return g!==void 0&&this.mid===g.mid&&this.attendeeId===g.attendeeId&&this.streamId===g.streamId&&this.groupId===g.groupId&&this.priority===g.priority&&this.targetBitrateKbps===g.targetBitrateKbps&&this.qualityAdaptationPreference===g.qualityAdaptationPreference}},"SignalingClientVideoSubscriptionConfiguration");l.default=f},459746:(U,l,f)=>{"use strict";var u=f(729661),g=u.Reader,m=u.Writer,h=u.util,a=u.roots.default||(u.roots.default={});a.SdkSignalFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSignalFrame"),r.prototype.timestampMs=h.Long?h.Long.fromBits(0,0,!0):0,r.prototype.type=1,r.prototype.error=null,r.prototype.join=null,r.prototype.joinack=null,r.prototype.sub=null,r.prototype.suback=null,r.prototype.index=null,r.prototype.pause=null,r.prototype.leave=null,r.prototype.leaveAck=null,r.prototype.bitrates=null,r.prototype.audioControl=null,r.prototype.audioMetadata=null,r.prototype.audioStreamIdInfo=null,r.prototype.pingPong=null,r.prototype.audioStatus=null,r.prototype.clientMetric=null,r.prototype.dataMessage=null,r.prototype.remoteVideoUpdate=null,r.prototype.primaryMeetingJoin=null,r.prototype.primaryMeetingJoinAck=null,r.prototype.primaryMeetingLeave=null,r.prototype.notification=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&a.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),e.join!=null&&Object.hasOwnProperty.call(e,"join")&&a.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),e.joinack!=null&&Object.hasOwnProperty.call(e,"joinack")&&a.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),e.sub!=null&&Object.hasOwnProperty.call(e,"sub")&&a.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),e.suback!=null&&Object.hasOwnProperty.call(e,"suback")&&a.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&a.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),e.pause!=null&&Object.hasOwnProperty.call(e,"pause")&&a.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),e.leave!=null&&Object.hasOwnProperty.call(e,"leave")&&a.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),e.leaveAck!=null&&Object.hasOwnProperty.call(e,"leaveAck")&&a.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),e.bitrates!=null&&Object.hasOwnProperty.call(e,"bitrates")&&a.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),e.audioControl!=null&&Object.hasOwnProperty.call(e,"audioControl")&&a.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),e.audioMetadata!=null&&Object.hasOwnProperty.call(e,"audioMetadata")&&a.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),e.audioStreamIdInfo!=null&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&a.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),e.pingPong!=null&&Object.hasOwnProperty.call(e,"pingPong")&&a.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&a.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),e.clientMetric!=null&&Object.hasOwnProperty.call(e,"clientMetric")&&a.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),e.dataMessage!=null&&Object.hasOwnProperty.call(e,"dataMessage")&&a.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),e.remoteVideoUpdate!=null&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&a.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),e.primaryMeetingJoin!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&a.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),e.primaryMeetingJoinAck!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&a.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),e.primaryMeetingLeave!=null&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&a.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),e.notification!=null&&Object.hasOwnProperty.call(e,"notification")&&a.SdkNotificationFrame.encode(e.notification,t.uint32(282).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSignalFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.timestampMs=e.uint64();break}case 2:{o.type=e.int32();break}case 3:{o.error=a.SdkErrorFrame.decode(e,e.uint32());break}case 4:{o.join=a.SdkJoinFrame.decode(e,e.uint32());break}case 5:{o.joinack=a.SdkJoinAckFrame.decode(e,e.uint32());break}case 6:{o.sub=a.SdkSubscribeFrame.decode(e,e.uint32());break}case 7:{o.suback=a.SdkSubscribeAckFrame.decode(e,e.uint32());break}case 8:{o.index=a.SdkIndexFrame.decode(e,e.uint32());break}case 10:{o.pause=a.SdkPauseResumeFrame.decode(e,e.uint32());break}case 11:{o.leave=a.SdkLeaveFrame.decode(e,e.uint32());break}case 12:{o.leaveAck=a.SdkLeaveAckFrame.decode(e,e.uint32());break}case 14:{o.bitrates=a.SdkBitrateFrame.decode(e,e.uint32());break}case 17:{o.audioControl=a.SdkAudioControlFrame.decode(e,e.uint32());break}case 18:{o.audioMetadata=a.SdkAudioMetadataFrame.decode(e,e.uint32());break}case 19:{o.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break}case 20:{o.pingPong=a.SdkPingPongFrame.decode(e,e.uint32());break}case 21:{o.audioStatus=a.SdkAudioStatusFrame.decode(e,e.uint32());break}case 22:{o.clientMetric=a.SdkClientMetricFrame.decode(e,e.uint32());break}case 23:{o.dataMessage=a.SdkDataMessageFrame.decode(e,e.uint32());break}case 25:{o.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break}case 26:{o.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break}case 27:{o.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break}case 28:{o.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break}case 35:{o.notification=a.SdkNotificationFrame.decode(e,e.uint32());break}default:e.skipType(c&7);break}}if(!o.hasOwnProperty("timestampMs"))throw h.ProtocolError("missing required 'timestampMs'",{instance:o});if(!o.hasOwnProperty("type"))throw h.ProtocolError("missing required 'type'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(!h.isInteger(e.timestampMs)&&!(e.timestampMs&&h.isInteger(e.timestampMs.low)&&h.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:break}if(e.error!=null&&e.hasOwnProperty("error")){var t=a.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(e.join!=null&&e.hasOwnProperty("join")){var t=a.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(e.joinack!=null&&e.hasOwnProperty("joinack")){var t=a.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(e.sub!=null&&e.hasOwnProperty("sub")){var t=a.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(e.suback!=null&&e.hasOwnProperty("suback")){var t=a.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(e.index!=null&&e.hasOwnProperty("index")){var t=a.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(e.pause!=null&&e.hasOwnProperty("pause")){var t=a.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(e.leave!=null&&e.hasOwnProperty("leave")){var t=a.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(e.leaveAck!=null&&e.hasOwnProperty("leaveAck")){var t=a.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){var t=a.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(e.audioControl!=null&&e.hasOwnProperty("audioControl")){var t=a.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")){var t=a.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")){var t=a.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(e.pingPong!=null&&e.hasOwnProperty("pingPong")){var t=a.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(e.audioStatus!=null&&e.hasOwnProperty("audioStatus")){var t=a.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(e.clientMetric!=null&&e.hasOwnProperty("clientMetric")){var t=a.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(e.dataMessage!=null&&e.hasOwnProperty("dataMessage")){var t=a.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")){var t=a.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")){var t=a.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")){var t=a.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")){var t=a.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}if(e.notification!=null&&e.hasOwnProperty("notification")){var t=a.SdkNotificationFrame.verify(e.notification);if(t)return"notification."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkSignalFrame)return e;var t=new a.SdkSignalFrame;switch(e.timestampMs!=null&&(h.Long?(t.timestampMs=h.Long.fromValue(e.timestampMs)).unsigned=!0:typeof e.timestampMs=="string"?t.timestampMs=parseInt(e.timestampMs,10):typeof e.timestampMs=="number"?t.timestampMs=e.timestampMs:typeof e.timestampMs=="object"&&(t.timestampMs=new h.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break;case"NOTIFICATION":case 34:t.type=34;break}if(e.error!=null){if(typeof e.error!="object")throw TypeError(".SdkSignalFrame.error: object expected");t.error=a.SdkErrorFrame.fromObject(e.error)}if(e.join!=null){if(typeof e.join!="object")throw TypeError(".SdkSignalFrame.join: object expected");t.join=a.SdkJoinFrame.fromObject(e.join)}if(e.joinack!=null){if(typeof e.joinack!="object")throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=a.SdkJoinAckFrame.fromObject(e.joinack)}if(e.sub!=null){if(typeof e.sub!="object")throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=a.SdkSubscribeFrame.fromObject(e.sub)}if(e.suback!=null){if(typeof e.suback!="object")throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=a.SdkSubscribeAckFrame.fromObject(e.suback)}if(e.index!=null){if(typeof e.index!="object")throw TypeError(".SdkSignalFrame.index: object expected");t.index=a.SdkIndexFrame.fromObject(e.index)}if(e.pause!=null){if(typeof e.pause!="object")throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=a.SdkPauseResumeFrame.fromObject(e.pause)}if(e.leave!=null){if(typeof e.leave!="object")throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=a.SdkLeaveFrame.fromObject(e.leave)}if(e.leaveAck!=null){if(typeof e.leaveAck!="object")throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=a.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(e.bitrates!=null){if(typeof e.bitrates!="object")throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=a.SdkBitrateFrame.fromObject(e.bitrates)}if(e.audioControl!=null){if(typeof e.audioControl!="object")throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=a.SdkAudioControlFrame.fromObject(e.audioControl)}if(e.audioMetadata!=null){if(typeof e.audioMetadata!="object")throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=a.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(e.audioStreamIdInfo!=null){if(typeof e.audioStreamIdInfo!="object")throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(e.pingPong!=null){if(typeof e.pingPong!="object")throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=a.SdkPingPongFrame.fromObject(e.pingPong)}if(e.audioStatus!=null){if(typeof e.audioStatus!="object")throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=a.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(e.clientMetric!=null){if(typeof e.clientMetric!="object")throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=a.SdkClientMetricFrame.fromObject(e.clientMetric)}if(e.dataMessage!=null){if(typeof e.dataMessage!="object")throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=a.SdkDataMessageFrame.fromObject(e.dataMessage)}if(e.remoteVideoUpdate!=null){if(typeof e.remoteVideoUpdate!="object")throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(e.primaryMeetingJoin!=null){if(typeof e.primaryMeetingJoin!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(e.primaryMeetingJoinAck!=null){if(typeof e.primaryMeetingJoinAck!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(e.primaryMeetingLeave!=null){if(typeof e.primaryMeetingLeave!="object")throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}if(e.notification!=null){if(typeof e.notification!="object")throw TypeError(".SdkSignalFrame.notification: object expected");t.notification=a.SdkNotificationFrame.fromObject(e.notification)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(h.Long){var o=new h.Long(0,0,!0);i.timestampMs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.timestampMs=t.longs===String?"0":0;i.type=t.enums===String?"JOIN":1,i.error=null,i.join=null,i.joinack=null,i.sub=null,i.suback=null,i.index=null,i.pause=null,i.leave=null,i.leaveAck=null,i.bitrates=null,i.audioControl=null,i.audioMetadata=null,i.audioStreamIdInfo=null,i.pingPong=null,i.audioStatus=null,i.clientMetric=null,i.dataMessage=null,i.remoteVideoUpdate=null,i.primaryMeetingJoin=null,i.primaryMeetingJoinAck=null,i.primaryMeetingLeave=null,i.notification=null}return e.timestampMs!=null&&e.hasOwnProperty("timestampMs")&&(typeof e.timestampMs=="number"?i.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:i.timestampMs=t.longs===String?h.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new h.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkSignalFrame.Type[e.type]===void 0?e.type:a.SdkSignalFrame.Type[e.type]:e.type),e.error!=null&&e.hasOwnProperty("error")&&(i.error=a.SdkErrorFrame.toObject(e.error,t)),e.join!=null&&e.hasOwnProperty("join")&&(i.join=a.SdkJoinFrame.toObject(e.join,t)),e.joinack!=null&&e.hasOwnProperty("joinack")&&(i.joinack=a.SdkJoinAckFrame.toObject(e.joinack,t)),e.sub!=null&&e.hasOwnProperty("sub")&&(i.sub=a.SdkSubscribeFrame.toObject(e.sub,t)),e.suback!=null&&e.hasOwnProperty("suback")&&(i.suback=a.SdkSubscribeAckFrame.toObject(e.suback,t)),e.index!=null&&e.hasOwnProperty("index")&&(i.index=a.SdkIndexFrame.toObject(e.index,t)),e.pause!=null&&e.hasOwnProperty("pause")&&(i.pause=a.SdkPauseResumeFrame.toObject(e.pause,t)),e.leave!=null&&e.hasOwnProperty("leave")&&(i.leave=a.SdkLeaveFrame.toObject(e.leave,t)),e.leaveAck!=null&&e.hasOwnProperty("leaveAck")&&(i.leaveAck=a.SdkLeaveAckFrame.toObject(e.leaveAck,t)),e.bitrates!=null&&e.hasOwnProperty("bitrates")&&(i.bitrates=a.SdkBitrateFrame.toObject(e.bitrates,t)),e.audioControl!=null&&e.hasOwnProperty("audioControl")&&(i.audioControl=a.SdkAudioControlFrame.toObject(e.audioControl,t)),e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")&&(i.audioMetadata=a.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")&&(i.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),e.pingPong!=null&&e.hasOwnProperty("pingPong")&&(i.pingPong=a.SdkPingPongFrame.toObject(e.pingPong,t)),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=a.SdkAudioStatusFrame.toObject(e.audioStatus,t)),e.clientMetric!=null&&e.hasOwnProperty("clientMetric")&&(i.clientMetric=a.SdkClientMetricFrame.toObject(e.clientMetric,t)),e.dataMessage!=null&&e.hasOwnProperty("dataMessage")&&(i.dataMessage=a.SdkDataMessageFrame.toObject(e.dataMessage,t)),e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")&&(i.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")&&(i.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")&&(i.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")&&(i.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),e.notification!=null&&e.hasOwnProperty("notification")&&(i.notification=a.SdkNotificationFrame.toObject(e.notification,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSignalFrame"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="JOIN"]=1,e[n[2]="JOIN_ACK"]=2,e[n[3]="SUBSCRIBE"]=3,e[n[4]="SUBSCRIBE_ACK"]=4,e[n[5]="INDEX"]=5,e[n[7]="PAUSE"]=7,e[n[8]="RESUME"]=8,e[n[9]="LEAVE"]=9,e[n[10]="LEAVE_ACK"]=10,e[n[13]="BITRATES"]=13,e[n[16]="AUDIO_CONTROL"]=16,e[n[17]="AUDIO_METADATA"]=17,e[n[18]="AUDIO_STREAM_ID_INFO"]=18,e[n[19]="PING_PONG"]=19,e[n[20]="AUDIO_STATUS"]=20,e[n[21]="CLIENT_METRIC"]=21,e[n[22]="DATA_MESSAGE"]=22,e[n[24]="REMOTE_VIDEO_UPDATE"]=24,e[n[25]="PRIMARY_MEETING_JOIN"]=25,e[n[26]="PRIMARY_MEETING_JOIN_ACK"]=26,e[n[27]="PRIMARY_MEETING_LEAVE"]=27,e[n[34]="NOTIFICATION"]=34,e}(),r}(),a.SdkErrorFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkErrorFrame"),r.prototype.status=0,r.prototype.description="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.status!=null&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),e.description!=null&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkErrorFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.status=e.uint32();break}case 2:{o.description=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.status!=null&&e.hasOwnProperty("status")&&!h.isInteger(e.status)?"status: integer expected":e.description!=null&&e.hasOwnProperty("description")&&!h.isString(e.description)?"description: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkErrorFrame)return e;var t=new a.SdkErrorFrame;return e.status!=null&&(t.status=e.status>>>0),e.description!=null&&(t.description=String(e.description)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.status=0,i.description=""),e.status!=null&&e.hasOwnProperty("status")&&(i.status=e.status),e.description!=null&&e.hasOwnProperty("description")&&(i.description=e.description),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkErrorFrame"},"getTypeUrl"),r}(),a.SdkJoinFlags=function(){var r={},n=Object.create(r);return n[r[2]="HAS_STREAM_UPDATE"]=2,n[r[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,n[r[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,n}(),a.SdkClientDetails=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkClientDetails"),r.prototype.appName="",r.prototype.appVersion="",r.prototype.deviceModel="",r.prototype.deviceMake="",r.prototype.platformName="",r.prototype.platformVersion="",r.prototype.clientSource="",r.prototype.chimeSdkVersion="",r.prototype.clientUtcOffset="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.appName!=null&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),e.appVersion!=null&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),e.deviceModel!=null&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),e.deviceMake!=null&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),e.platformName!=null&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),e.platformVersion!=null&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),e.clientSource!=null&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),e.chimeSdkVersion!=null&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),e.clientUtcOffset!=null&&Object.hasOwnProperty.call(e,"clientUtcOffset")&&t.uint32(74).string(e.clientUtcOffset),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkClientDetails;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.appName=e.string();break}case 2:{o.appVersion=e.string();break}case 3:{o.deviceModel=e.string();break}case 4:{o.deviceMake=e.string();break}case 5:{o.platformName=e.string();break}case 6:{o.platformVersion=e.string();break}case 7:{o.clientSource=e.string();break}case 8:{o.chimeSdkVersion=e.string();break}case 9:{o.clientUtcOffset=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.appName!=null&&e.hasOwnProperty("appName")&&!h.isString(e.appName)?"appName: string expected":e.appVersion!=null&&e.hasOwnProperty("appVersion")&&!h.isString(e.appVersion)?"appVersion: string expected":e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&!h.isString(e.deviceModel)?"deviceModel: string expected":e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&!h.isString(e.deviceMake)?"deviceMake: string expected":e.platformName!=null&&e.hasOwnProperty("platformName")&&!h.isString(e.platformName)?"platformName: string expected":e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&!h.isString(e.platformVersion)?"platformVersion: string expected":e.clientSource!=null&&e.hasOwnProperty("clientSource")&&!h.isString(e.clientSource)?"clientSource: string expected":e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&!h.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&!h.isString(e.clientUtcOffset)?"clientUtcOffset: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkClientDetails)return e;var t=new a.SdkClientDetails;return e.appName!=null&&(t.appName=String(e.appName)),e.appVersion!=null&&(t.appVersion=String(e.appVersion)),e.deviceModel!=null&&(t.deviceModel=String(e.deviceModel)),e.deviceMake!=null&&(t.deviceMake=String(e.deviceMake)),e.platformName!=null&&(t.platformName=String(e.platformName)),e.platformVersion!=null&&(t.platformVersion=String(e.platformVersion)),e.clientSource!=null&&(t.clientSource=String(e.clientSource)),e.chimeSdkVersion!=null&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),e.clientUtcOffset!=null&&(t.clientUtcOffset=String(e.clientUtcOffset)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.appName="",i.appVersion="",i.deviceModel="",i.deviceMake="",i.platformName="",i.platformVersion="",i.clientSource="",i.chimeSdkVersion="",i.clientUtcOffset=""),e.appName!=null&&e.hasOwnProperty("appName")&&(i.appName=e.appName),e.appVersion!=null&&e.hasOwnProperty("appVersion")&&(i.appVersion=e.appVersion),e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&(i.deviceModel=e.deviceModel),e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&(i.deviceMake=e.deviceMake),e.platformName!=null&&e.hasOwnProperty("platformName")&&(i.platformName=e.platformName),e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&(i.platformVersion=e.platformVersion),e.clientSource!=null&&e.hasOwnProperty("clientSource")&&(i.clientSource=e.clientSource),e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&(i.chimeSdkVersion=e.chimeSdkVersion),e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&(i.clientUtcOffset=e.clientUtcOffset),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientDetails"},"getTypeUrl"),r}(),a.SdkServerSideNetworkAdaption=function(){var r={},n=Object.create(r);return n[r[1]="DEFAULT"]=1,n[r[2]="NONE"]=2,n[r[3]="BANDWIDTH_PROBING"]=3,n[r[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,n}(),a.SdkJoinFrame=function(){function r(n){if(this.supportedServerSideNetworkAdaptions=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkJoinFrame"),r.prototype.protocolVersion=2,r.prototype.maxNumOfVideos=0,r.prototype.flags=0,r.prototype.clientDetails=null,r.prototype.audioSessionId=h.Long?h.Long.fromBits(0,0,!0):0,r.prototype.wantsCompressedSdp=!1,r.prototype.serverSideNetworkAdaption=1,r.prototype.supportedServerSideNetworkAdaptions=h.emptyArray,r.prototype.wantsAllTemporalLayersInIndex=!1,r.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.protocolVersion!=null&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),e.maxNumOfVideos!=null&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),e.flags!=null&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),e.clientDetails!=null&&Object.hasOwnProperty.call(e,"clientDetails")&&a.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),e.audioSessionId!=null&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions!=null&&e.supportedServerSideNetworkAdaptions.length)for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[i]);return e.wantsAllTemporalLayersInIndex!=null&&Object.hasOwnProperty.call(e,"wantsAllTemporalLayersInIndex")&&t.uint32(96).bool(e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&Object.hasOwnProperty.call(e,"disablePeriodicKeyframeRequestOnContentSender")&&t.uint32(104).bool(e.disablePeriodicKeyframeRequestOnContentSender),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkJoinFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.protocolVersion=e.uint32();break}case 2:{o.maxNumOfVideos=e.uint32();break}case 3:{o.flags=e.uint32();break}case 4:{o.clientDetails=a.SdkClientDetails.decode(e,e.uint32());break}case 6:{o.audioSessionId=e.uint64();break}case 7:{o.wantsCompressedSdp=e.bool();break}case 10:{o.serverSideNetworkAdaption=e.int32();break}case 11:{if(o.supportedServerSideNetworkAdaptions&&o.supportedServerSideNetworkAdaptions.length||(o.supportedServerSideNetworkAdaptions=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)o.supportedServerSideNetworkAdaptions.push(e.int32());else o.supportedServerSideNetworkAdaptions.push(e.int32());break}case 12:{o.wantsAllTemporalLayersInIndex=e.bool();break}case 13:{o.disablePeriodicKeyframeRequestOnContentSender=e.bool();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&!h.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&!h.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(e.flags!=null&&e.hasOwnProperty("flags")&&!h.isInteger(e.flags))return"flags: integer expected";if(e.clientDetails!=null&&e.hasOwnProperty("clientDetails")){var t=a.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&!h.isInteger(e.audioSessionId)&&!(e.audioSessionId&&h.isInteger(e.audioSessionId.low)&&h.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}if(e.supportedServerSideNetworkAdaptions!=null&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)switch(e.supportedServerSideNetworkAdaptions[i]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:break}}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&typeof e.wantsAllTemporalLayersInIndex!="boolean"?"wantsAllTemporalLayersInIndex: boolean expected":e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&typeof e.disablePeriodicKeyframeRequestOnContentSender!="boolean"?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkJoinFrame)return e;var t=new a.SdkJoinFrame;if(e.protocolVersion!=null&&(t.protocolVersion=e.protocolVersion>>>0),e.maxNumOfVideos!=null&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),e.flags!=null&&(t.flags=e.flags>>>0),e.clientDetails!=null){if(typeof e.clientDetails!="object")throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=a.SdkClientDetails.fromObject(e.clientDetails)}switch(e.audioSessionId!=null&&(h.Long?(t.audioSessionId=h.Long.fromValue(e.audioSessionId)).unsigned=!0:typeof e.audioSessionId=="string"?t.audioSessionId=parseInt(e.audioSessionId,10):typeof e.audioSessionId=="number"?t.audioSessionId=e.audioSessionId:typeof e.audioSessionId=="object"&&(t.audioSessionId=new h.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.serverSideNetworkAdaption){default:if(typeof e.serverSideNetworkAdaption=="number"){t.serverSideNetworkAdaption=e.serverSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.serverSideNetworkAdaption=4;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var i=0;i<e.supportedServerSideNetworkAdaptions.length;++i)switch(e.supportedServerSideNetworkAdaptions[i]){default:if(typeof e.supportedServerSideNetworkAdaptions[i]=="number"){t.supportedServerSideNetworkAdaptions[i]=e.supportedServerSideNetworkAdaptions[i];break}case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[i]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[i]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[i]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.supportedServerSideNetworkAdaptions[i]=4;break}}return e.wantsAllTemporalLayersInIndex!=null&&(t.wantsAllTemporalLayersInIndex=Boolean(e.wantsAllTemporalLayersInIndex)),e.disablePeriodicKeyframeRequestOnContentSender!=null&&(t.disablePeriodicKeyframeRequestOnContentSender=Boolean(e.disablePeriodicKeyframeRequestOnContentSender)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.supportedServerSideNetworkAdaptions=[]),t.defaults){if(i.protocolVersion=2,i.maxNumOfVideos=0,i.flags=0,i.clientDetails=null,h.Long){var o=new h.Long(0,0,!0);i.audioSessionId=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.audioSessionId=t.longs===String?"0":0;i.wantsCompressedSdp=!1,i.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1,i.wantsAllTemporalLayersInIndex=!1,i.disablePeriodicKeyframeRequestOnContentSender=!1}if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&(i.protocolVersion=e.protocolVersion),e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&(i.maxNumOfVideos=e.maxNumOfVideos),e.flags!=null&&e.hasOwnProperty("flags")&&(i.flags=e.flags),e.clientDetails!=null&&e.hasOwnProperty("clientDetails")&&(i.clientDetails=a.SdkClientDetails.toObject(e.clientDetails,t)),e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&(typeof e.audioSessionId=="number"?i.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:i.audioSessionId=t.longs===String?h.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new h.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(i.wantsCompressedSdp=e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption")&&(i.serverSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]===void 0?e.serverSideNetworkAdaption:a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){i.supportedServerSideNetworkAdaptions=[];for(var c=0;c<e.supportedServerSideNetworkAdaptions.length;++c)i.supportedServerSideNetworkAdaptions[c]=t.enums===String?a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[c]]===void 0?e.supportedServerSideNetworkAdaptions[c]:a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[c]]:e.supportedServerSideNetworkAdaptions[c]}return e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&(i.wantsAllTemporalLayersInIndex=e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(i.disablePeriodicKeyframeRequestOnContentSender=e.disablePeriodicKeyframeRequestOnContentSender),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinFrame"},"getTypeUrl"),r}(),a.SdkJoinAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkJoinAckFrame"),r.prototype.turnCredentials=null,r.prototype.videoSubscriptionLimit=0,r.prototype.wantsCompressedSdp=!1,r.prototype.defaultServerSideNetworkAdaption=1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.turnCredentials!=null&&Object.hasOwnProperty.call(e,"turnCredentials")&&a.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),e.videoSubscriptionLimit!=null&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkJoinAckFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.turnCredentials=a.SdkTurnCredentials.decode(e,e.uint32());break}case 2:{o.videoSubscriptionLimit=e.uint32();break}case 3:{o.wantsCompressedSdp=e.bool();break}case 4:{o.defaultServerSideNetworkAdaption=e.int32();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")){var t=a.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&!h.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkJoinAckFrame)return e;var t=new a.SdkJoinAckFrame;if(e.turnCredentials!=null){if(typeof e.turnCredentials!="object")throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=a.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(e.videoSubscriptionLimit!=null&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){default:if(typeof e.defaultServerSideNetworkAdaption=="number"){t.defaultServerSideNetworkAdaption=e.defaultServerSideNetworkAdaption;break}break;case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.defaultServerSideNetworkAdaption=4;break}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.turnCredentials=null,i.videoSubscriptionLimit=0,i.wantsCompressedSdp=!1,i.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")&&(i.turnCredentials=a.SdkTurnCredentials.toObject(e.turnCredentials,t)),e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&(i.videoSubscriptionLimit=e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(i.wantsCompressedSdp=e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(i.defaultServerSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]===void 0?e.defaultServerSideNetworkAdaption:a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkJoinAckFrame"},"getTypeUrl"),r}(),a.SdkLeaveFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkLeaveFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkLeaveFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof a.SdkLeaveFrame?e:new a.SdkLeaveFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveFrame"},"getTypeUrl"),r}(),a.SdkLeaveAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkLeaveAckFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkLeaveAckFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof a.SdkLeaveAckFrame?e:new a.SdkLeaveAckFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkLeaveAckFrame"},"getTypeUrl"),r}(),a.SdkStreamServiceType=function(){var r={},n=Object.create(r);return n[r[1]="RX"]=1,n[r[2]="TX"]=2,n[r[3]="DUPLEX"]=3,n}(),a.SdkStreamMediaType=function(){var r={},n=Object.create(r);return n[r[1]="AUDIO"]=1,n[r[2]="VIDEO"]=2,n}(),a.SdkSubscribeFrame=function(){function r(n){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSubscribeFrame"),r.prototype.duplex=1,r.prototype.sendStreams=h.emptyArray,r.prototype.receiveStreamIds=h.emptyArray,r.prototype.sdpOffer="",r.prototype.audioHost="",r.prototype.audioCheckin=!1,r.prototype.audioMuted=!1,r.prototype.compressedSdpOffer=h.newBuffer([]),r.prototype.videoSubscriptionConfiguration=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.sendStreams!=null&&e.sendStreams.length)for(var i=0;i<e.sendStreams.length;++i)a.SdkStreamDescriptor.encode(e.sendStreams[i],t.uint32(18).fork()).ldelim();if(e.receiveStreamIds!=null&&e.receiveStreamIds.length)for(var i=0;i<e.receiveStreamIds.length;++i)t.uint32(24).uint32(e.receiveStreamIds[i]);if(e.sdpOffer!=null&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),e.audioHost!=null&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),e.audioCheckin!=null&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),e.audioMuted!=null&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),e.compressedSdpOffer!=null&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),e.videoSubscriptionConfiguration!=null&&e.videoSubscriptionConfiguration.length)for(var i=0;i<e.videoSubscriptionConfiguration.length;++i)a.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[i],t.uint32(74).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSubscribeFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.sendStreams&&o.sendStreams.length||(o.sendStreams=[]),o.sendStreams.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.receiveStreamIds&&o.receiveStreamIds.length||(o.receiveStreamIds=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)o.receiveStreamIds.push(e.uint32());else o.receiveStreamIds.push(e.uint32());break}case 4:{o.sdpOffer=e.string();break}case 5:{o.audioHost=e.string();break}case 6:{o.audioCheckin=e.bool();break}case 7:{o.audioMuted=e.bool();break}case 8:{o.compressedSdpOffer=e.bytes();break}case 9:{o.videoSubscriptionConfiguration&&o.videoSubscriptionConfiguration.length||(o.videoSubscriptionConfiguration=[]),o.videoSubscriptionConfiguration.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.sendStreams!=null&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var i=a.SdkStreamDescriptor.verify(e.sendStreams[t]);if(i)return"sendStreams."+i}}if(e.receiveStreamIds!=null&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(var t=0;t<e.receiveStreamIds.length;++t)if(!h.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&!h.isString(e.sdpOffer))return"sdpOffer: string expected";if(e.audioHost!=null&&e.hasOwnProperty("audioHost")&&!h.isString(e.audioHost))return"audioHost: string expected";if(e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&typeof e.audioCheckin!="boolean")return"audioCheckin: boolean expected";if(e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&typeof e.audioMuted!="boolean")return"audioMuted: boolean expected";if(e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&typeof e.compressedSdpOffer.length=="number"||h.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(e.videoSubscriptionConfiguration!=null&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(var t=0;t<e.videoSubscriptionConfiguration.length;++t){var i=a.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(i)return"videoSubscriptionConfiguration."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkSubscribeFrame)return e;var t=new a.SdkSubscribeFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var i=0;i<e.sendStreams.length;++i){if(typeof e.sendStreams[i]!="object")throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[i]=a.SdkStreamDescriptor.fromObject(e.sendStreams[i])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(var i=0;i<e.receiveStreamIds.length;++i)t.receiveStreamIds[i]=e.receiveStreamIds[i]>>>0}if(e.sdpOffer!=null&&(t.sdpOffer=String(e.sdpOffer)),e.audioHost!=null&&(t.audioHost=String(e.audioHost)),e.audioCheckin!=null&&(t.audioCheckin=Boolean(e.audioCheckin)),e.audioMuted!=null&&(t.audioMuted=Boolean(e.audioMuted)),e.compressedSdpOffer!=null&&(typeof e.compressedSdpOffer=="string"?h.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=h.newBuffer(h.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length>=0&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(var i=0;i<e.videoSubscriptionConfiguration.length;++i){if(typeof e.videoSubscriptionConfiguration[i]!="object")throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[i]=a.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sendStreams=[],i.receiveStreamIds=[],i.videoSubscriptionConfiguration=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpOffer="",i.audioHost="",i.audioCheckin=!1,i.audioMuted=!1,t.bytes===String?i.compressedSdpOffer="":(i.compressedSdpOffer=[],t.bytes!==Array&&(i.compressedSdpOffer=h.newBuffer(i.compressedSdpOffer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]===void 0?e.duplex:a.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){i.sendStreams=[];for(var o=0;o<e.sendStreams.length;++o)i.sendStreams[o]=a.SdkStreamDescriptor.toObject(e.sendStreams[o],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){i.receiveStreamIds=[];for(var o=0;o<e.receiveStreamIds.length;++o)i.receiveStreamIds[o]=e.receiveStreamIds[o]}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&(i.sdpOffer=e.sdpOffer),e.audioHost!=null&&e.hasOwnProperty("audioHost")&&(i.audioHost=e.audioHost),e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&(i.audioCheckin=e.audioCheckin),e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&(i.audioMuted=e.audioMuted),e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&(i.compressedSdpOffer=t.bytes===String?h.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){i.videoSubscriptionConfiguration=[];for(var o=0;o<e.videoSubscriptionConfiguration.length;++o)i.videoSubscriptionConfiguration[o]=a.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeFrame"},"getTypeUrl"),r}(),a.SdkSubscribeAckFrame=function(){function r(n){if(this.allocations=[],this.tracks=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkSubscribeAckFrame"),r.prototype.duplex=1,r.prototype.allocations=h.emptyArray,r.prototype.sdpAnswer="",r.prototype.tracks=h.emptyArray,r.prototype.compressedSdpAnswer=h.newBuffer([]),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.allocations!=null&&e.allocations.length)for(var i=0;i<e.allocations.length;++i)a.SdkStreamAllocation.encode(e.allocations[i],t.uint32(18).fork()).ldelim();if(e.sdpAnswer!=null&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),e.tracks!=null&&e.tracks.length)for(var i=0;i<e.tracks.length;++i)a.SdkTrackMapping.encode(e.tracks[i],t.uint32(34).fork()).ldelim();return e.compressedSdpAnswer!=null&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkSubscribeAckFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.duplex=e.int32();break}case 2:{o.allocations&&o.allocations.length||(o.allocations=[]),o.allocations.push(a.SdkStreamAllocation.decode(e,e.uint32()));break}case 3:{o.sdpAnswer=e.string();break}case 4:{o.tracks&&o.tracks.length||(o.tracks=[]),o.tracks.push(a.SdkTrackMapping.decode(e,e.uint32()));break}case 5:{o.compressedSdpAnswer=e.bytes();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.allocations!=null&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var i=a.SdkStreamAllocation.verify(e.allocations[t]);if(i)return"allocations."+i}}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&!h.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(e.tracks!=null&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var i=a.SdkTrackMapping.verify(e.tracks[t]);if(i)return"tracks."+i}}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&typeof e.compressedSdpAnswer.length=="number"||h.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkSubscribeAckFrame)return e;var t=new a.SdkSubscribeAckFrame;switch(e.duplex){default:if(typeof e.duplex=="number"){t.duplex=e.duplex;break}break;case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var i=0;i<e.allocations.length;++i){if(typeof e.allocations[i]!="object")throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[i]=a.SdkStreamAllocation.fromObject(e.allocations[i])}}if(e.sdpAnswer!=null&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(var i=0;i<e.tracks.length;++i){if(typeof e.tracks[i]!="object")throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[i]=a.SdkTrackMapping.fromObject(e.tracks[i])}}return e.compressedSdpAnswer!=null&&(typeof e.compressedSdpAnswer=="string"?h.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=h.newBuffer(h.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length>=0&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.allocations=[],i.tracks=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpAnswer="",t.bytes===String?i.compressedSdpAnswer="":(i.compressedSdpAnswer=[],t.bytes!==Array&&(i.compressedSdpAnswer=h.newBuffer(i.compressedSdpAnswer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]===void 0?e.duplex:a.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){i.allocations=[];for(var o=0;o<e.allocations.length;++o)i.allocations[o]=a.SdkStreamAllocation.toObject(e.allocations[o],t)}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&(i.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){i.tracks=[];for(var o=0;o<e.tracks.length;++o)i.tracks[o]=a.SdkTrackMapping.toObject(e.tracks[o],t)}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&(i.compressedSdpAnswer=t.bytes===String?h.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkSubscribeAckFrame"},"getTypeUrl"),r}(),a.SdkIndexFrame=function(){function r(n){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkIndexFrame"),r.prototype.atCapacity=!1,r.prototype.sources=h.emptyArray,r.prototype.pausedAtSourceIds=h.emptyArray,r.prototype.numParticipants=0,r.prototype.supportedReceiveCodecIntersection=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.atCapacity!=null&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),e.sources!=null&&e.sources.length)for(var i=0;i<e.sources.length;++i)a.SdkStreamDescriptor.encode(e.sources[i],t.uint32(18).fork()).ldelim();if(e.pausedAtSourceIds!=null&&e.pausedAtSourceIds.length)for(var i=0;i<e.pausedAtSourceIds.length;++i)t.uint32(24).uint32(e.pausedAtSourceIds[i]);if(e.numParticipants!=null&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),e.supportedReceiveCodecIntersection!=null&&e.supportedReceiveCodecIntersection.length)for(var i=0;i<e.supportedReceiveCodecIntersection.length;++i)t.uint32(40).int32(e.supportedReceiveCodecIntersection[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkIndexFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.atCapacity=e.bool();break}case 2:{o.sources&&o.sources.length||(o.sources=[]),o.sources.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break}case 3:{if(o.pausedAtSourceIds&&o.pausedAtSourceIds.length||(o.pausedAtSourceIds=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)o.pausedAtSourceIds.push(e.uint32());else o.pausedAtSourceIds.push(e.uint32());break}case 4:{o.numParticipants=e.uint32();break}case 5:{if(o.supportedReceiveCodecIntersection&&o.supportedReceiveCodecIntersection.length||(o.supportedReceiveCodecIntersection=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)o.supportedReceiveCodecIntersection.push(e.int32());else o.supportedReceiveCodecIntersection.push(e.int32());break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&typeof e.atCapacity!="boolean")return"atCapacity: boolean expected";if(e.sources!=null&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var i=a.SdkStreamDescriptor.verify(e.sources[t]);if(i)return"sources."+i}}if(e.pausedAtSourceIds!=null&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(var t=0;t<e.pausedAtSourceIds.length;++t)if(!h.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&!h.isInteger(e.numParticipants))return"numParticipants: integer expected";if(e.supportedReceiveCodecIntersection!=null&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(var t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 11:break}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkIndexFrame)return e;var t=new a.SdkIndexFrame;if(e.atCapacity!=null&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var i=0;i<e.sources.length;++i){if(typeof e.sources[i]!="object")throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[i]=a.SdkStreamDescriptor.fromObject(e.sources[i])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(var i=0;i<e.pausedAtSourceIds.length;++i)t.pausedAtSourceIds[i]=e.pausedAtSourceIds[i]>>>0}if(e.numParticipants!=null&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(var i=0;i<e.supportedReceiveCodecIntersection.length;++i)switch(e.supportedReceiveCodecIntersection[i]){default:if(typeof e.supportedReceiveCodecIntersection[i]=="number"){t.supportedReceiveCodecIntersection[i]=e.supportedReceiveCodecIntersection[i];break}case"VP8":case 1:t.supportedReceiveCodecIntersection[i]=1;break;case"H264_BASELINE_PROFILE":case 2:t.supportedReceiveCodecIntersection[i]=2;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[i]=3;break;case"H264_MAIN_PROFILE":case 4:t.supportedReceiveCodecIntersection[i]=4;break;case"H264_HIGH_PROFILE":case 5:t.supportedReceiveCodecIntersection[i]=5;break;case"H264_CONSTRAINED_HIGH_PROFILE":case 6:t.supportedReceiveCodecIntersection[i]=6;break;case"VP9_PROFILE_0":case 8:t.supportedReceiveCodecIntersection[i]=8;break;case"AV1_MAIN_PROFILE":case 11:t.supportedReceiveCodecIntersection[i]=11;break}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sources=[],i.pausedAtSourceIds=[],i.supportedReceiveCodecIntersection=[]),t.defaults&&(i.atCapacity=!1,i.numParticipants=0),e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&(i.atCapacity=e.atCapacity),e.sources&&e.sources.length){i.sources=[];for(var o=0;o<e.sources.length;++o)i.sources[o]=a.SdkStreamDescriptor.toObject(e.sources[o],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){i.pausedAtSourceIds=[];for(var o=0;o<e.pausedAtSourceIds.length;++o)i.pausedAtSourceIds[o]=e.pausedAtSourceIds[o]}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&(i.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){i.supportedReceiveCodecIntersection=[];for(var o=0;o<e.supportedReceiveCodecIntersection.length;++o)i.supportedReceiveCodecIntersection[o]=t.enums===String?a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]===void 0?e.supportedReceiveCodecIntersection[o]:a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[o]]:e.supportedReceiveCodecIntersection[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkIndexFrame"},"getTypeUrl"),r}(),a.SdkPauseResumeFrame=function(){function r(n){if(this.streamIds=[],this.groupIds=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPauseResumeFrame"),r.prototype.streamIds=h.emptyArray,r.prototype.groupIds=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streamIds!=null&&e.streamIds.length)for(var i=0;i<e.streamIds.length;++i)t.uint32(8).uint32(e.streamIds[i]);if(e.groupIds!=null&&e.groupIds.length)for(var i=0;i<e.groupIds.length;++i)t.uint32(16).uint32(e.groupIds[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPauseResumeFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{if(o.streamIds&&o.streamIds.length||(o.streamIds=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)o.streamIds.push(e.uint32());else o.streamIds.push(e.uint32());break}case 2:{if(o.groupIds&&o.groupIds.length||(o.groupIds=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)o.groupIds.push(e.uint32());else o.groupIds.push(e.uint32());break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamIds!=null&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!h.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(e.groupIds!=null&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(var t=0;t<e.groupIds.length;++t)if(!h.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkPauseResumeFrame)return e;var t=new a.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var i=0;i<e.streamIds.length;++i)t.streamIds[i]=e.streamIds[i]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(var i=0;i<e.groupIds.length;++i)t.groupIds[i]=e.groupIds[i]>>>0}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streamIds=[],i.groupIds=[]),e.streamIds&&e.streamIds.length){i.streamIds=[];for(var o=0;o<e.streamIds.length;++o)i.streamIds[o]=e.streamIds[o]}if(e.groupIds&&e.groupIds.length){i.groupIds=[];for(var o=0;o<e.groupIds.length;++o)i.groupIds[o]=e.groupIds[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPauseResumeFrame"},"getTypeUrl"),r}(),a.SdkBitrateFrame=function(){function r(n){if(this.bitrates=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkBitrateFrame"),r.prototype.bitrates=h.emptyArray,r.prototype.serverAvailableOutgoingBitrate=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.bitrates!=null&&e.bitrates.length)for(var i=0;i<e.bitrates.length;++i)a.SdkBitrate.encode(e.bitrates[i],t.uint32(10).fork()).ldelim();return e.serverAvailableOutgoingBitrate!=null&&Object.hasOwnProperty.call(e,"serverAvailableOutgoingBitrate")&&t.uint32(16).uint32(e.serverAvailableOutgoingBitrate),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkBitrateFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.bitrates&&o.bitrates.length||(o.bitrates=[]),o.bitrates.push(a.SdkBitrate.decode(e,e.uint32()));break}case 2:{o.serverAvailableOutgoingBitrate=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var i=a.SdkBitrate.verify(e.bitrates[t]);if(i)return"bitrates."+i}}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&!h.isInteger(e.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkBitrateFrame)return e;var t=new a.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var i=0;i<e.bitrates.length;++i){if(typeof e.bitrates[i]!="object")throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[i]=a.SdkBitrate.fromObject(e.bitrates[i])}}return e.serverAvailableOutgoingBitrate!=null&&(t.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.bitrates=[]),t.defaults&&(i.serverAvailableOutgoingBitrate=0),e.bitrates&&e.bitrates.length){i.bitrates=[];for(var o=0;o<e.bitrates.length;++o)i.bitrates[o]=a.SdkBitrate.toObject(e.bitrates[o],t)}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&(i.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrateFrame"},"getTypeUrl"),r}(),a.SdkStreamDescriptor=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamDescriptor"),r.prototype.streamId=0,r.prototype.framerate=0,r.prototype.maxBitrateKbps=0,r.prototype.trackLabel="",r.prototype.groupId=0,r.prototype.avgBitrateBps=0,r.prototype.attendeeId="",r.prototype.mediaType=1,r.prototype.externalUserId="",r.prototype.width=0,r.prototype.height=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.framerate!=null&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),e.maxBitrateKbps!=null&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),e.width!=null&&Object.hasOwnProperty.call(e,"width")&&t.uint32(88).uint32(e.width),e.height!=null&&Object.hasOwnProperty.call(e,"height")&&t.uint32(96).uint32(e.height),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamDescriptor;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.framerate=e.uint32();break}case 3:{o.maxBitrateKbps=e.uint32();break}case 4:{o.trackLabel=e.string();break}case 6:{o.groupId=e.uint32();break}case 7:{o.avgBitrateBps=e.uint32();break}case 8:{o.attendeeId=e.string();break}case 9:{o.mediaType=e.int32();break}case 10:{o.externalUserId=e.string();break}case 11:{o.width=e.uint32();break}case 12:{o.height=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!h.isInteger(e.streamId))return"streamId: integer expected";if(e.framerate!=null&&e.hasOwnProperty("framerate")&&!h.isInteger(e.framerate))return"framerate: integer expected";if(e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&!h.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!h.isString(e.trackLabel))return"trackLabel: string expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!h.isInteger(e.groupId))return"groupId: integer expected";if(e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!h.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!h.isString(e.attendeeId))return"attendeeId: string expected";if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!h.isString(e.externalUserId)?"externalUserId: string expected":e.width!=null&&e.hasOwnProperty("width")&&!h.isInteger(e.width)?"width: integer expected":e.height!=null&&e.hasOwnProperty("height")&&!h.isInteger(e.height)?"height: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkStreamDescriptor)return e;var t=new a.SdkStreamDescriptor;switch(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.framerate!=null&&(t.framerate=e.framerate>>>0),e.maxBitrateKbps!=null&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.mediaType){default:if(typeof e.mediaType=="number"){t.mediaType=e.mediaType;break}break;case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.width!=null&&(t.width=e.width>>>0),e.height!=null&&(t.height=e.height>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.framerate=0,i.maxBitrateKbps=0,i.trackLabel="",i.groupId=0,i.avgBitrateBps=0,i.attendeeId="",i.mediaType=t.enums===String?"AUDIO":1,i.externalUserId="",i.width=0,i.height=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.framerate!=null&&e.hasOwnProperty("framerate")&&(i.framerate=e.framerate),e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&(i.maxBitrateKbps=e.maxBitrateKbps),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(i.mediaType=t.enums===String?a.SdkStreamMediaType[e.mediaType]===void 0?e.mediaType:a.SdkStreamMediaType[e.mediaType]:e.mediaType),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.width!=null&&e.hasOwnProperty("width")&&(i.width=e.width),e.height!=null&&e.hasOwnProperty("height")&&(i.height=e.height),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDescriptor"},"getTypeUrl"),r}(),a.SdkStreamAllocation=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamAllocation"),r.prototype.trackLabel="",r.prototype.streamId=0,r.prototype.groupId=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamAllocation;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.trackLabel=e.string();break}case 2:{o.streamId=e.uint32();break}case 3:{o.groupId=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!h.isString(e.trackLabel)?"trackLabel: string expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!h.isInteger(e.streamId)?"streamId: integer expected":e.groupId!=null&&e.hasOwnProperty("groupId")&&!h.isInteger(e.groupId)?"groupId: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkStreamAllocation)return e;var t=new a.SdkStreamAllocation;return e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.trackLabel="",i.streamId=0,i.groupId=0),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamAllocation"},"getTypeUrl"),r}(),a.SdkTrackMapping=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTrackMapping"),r.prototype.streamId=0,r.prototype.ssrc=0,r.prototype.trackLabel="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.ssrc!=null&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTrackMapping;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.streamId=e.uint32();break}case 2:{o.ssrc=e.uint32();break}case 3:{o.trackLabel=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!h.isInteger(e.streamId)?"streamId: integer expected":e.ssrc!=null&&e.hasOwnProperty("ssrc")&&!h.isInteger(e.ssrc)?"ssrc: integer expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!h.isString(e.trackLabel)?"trackLabel: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTrackMapping)return e;var t=new a.SdkTrackMapping;return e.streamId!=null&&(t.streamId=e.streamId>>>0),e.ssrc!=null&&(t.ssrc=e.ssrc>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.ssrc=0,i.trackLabel=""),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.ssrc!=null&&e.hasOwnProperty("ssrc")&&(i.ssrc=e.ssrc),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTrackMapping"},"getTypeUrl"),r}(),a.SdkBitrate=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkBitrate"),r.prototype.sourceStreamId=0,r.prototype.avgBitrateBps=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.sourceStreamId!=null&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkBitrate;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.sourceStreamId=e.uint32();break}case 2:{o.avgBitrateBps=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&!h.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!h.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkBitrate)return e;var t=new a.SdkBitrate;return e.sourceStreamId!=null&&(t.sourceStreamId=e.sourceStreamId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.sourceStreamId=0,i.avgBitrateBps=0),e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&(i.sourceStreamId=e.sourceStreamId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkBitrate"},"getTypeUrl"),r}(),a.SdkAudioControlFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioControlFrame"),r.prototype.muted=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioControlFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.muted=e.bool();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioControlFrame)return e;var t=new a.SdkAudioControlFrame;return e.muted!=null&&(t.muted=Boolean(e.muted)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.muted=!1),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioControlFrame"},"getTypeUrl"),r}(),a.SdkAudioMetadataFrame=function(){function r(n){if(this.attendeeStates=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioMetadataFrame"),r.prototype.attendeeStates=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.attendeeStates!=null&&e.attendeeStates.length)for(var i=0;i<e.attendeeStates.length;++i)a.SdkAudioAttendeeState.encode(e.attendeeStates[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioMetadataFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.attendeeStates&&o.attendeeStates.length||(o.attendeeStates=[]),o.attendeeStates.push(a.SdkAudioAttendeeState.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.attendeeStates!=null&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var i=a.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(i)return"attendeeStates."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioMetadataFrame)return e;var t=new a.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var i=0;i<e.attendeeStates.length;++i){if(typeof e.attendeeStates[i]!="object")throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[i]=a.SdkAudioAttendeeState.fromObject(e.attendeeStates[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){i.attendeeStates=[];for(var o=0;o<e.attendeeStates.length;++o)i.attendeeStates[o]=a.SdkAudioAttendeeState.toObject(e.attendeeStates[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioMetadataFrame"},"getTypeUrl"),r}(),a.SdkAudioAttendeeState=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioAttendeeState"),r.prototype.audioStreamId=0,r.prototype.volume=0,r.prototype.muted=!1,r.prototype.signalStrength=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.volume!=null&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.signalStrength!=null&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioAttendeeState;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.volume=e.uint32();break}case 3:{o.muted=e.bool();break}case 4:{o.signalStrength=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!h.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.volume!=null&&e.hasOwnProperty("volume")&&!h.isInteger(e.volume)?"volume: integer expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&!h.isInteger(e.signalStrength)?"signalStrength: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioAttendeeState)return e;var t=new a.SdkAudioAttendeeState;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.volume!=null&&(t.volume=e.volume>>>0),e.muted!=null&&(t.muted=Boolean(e.muted)),e.signalStrength!=null&&(t.signalStrength=e.signalStrength>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.volume=0,i.muted=!1,i.signalStrength=0),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),e.volume!=null&&e.hasOwnProperty("volume")&&(i.volume=e.volume),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&(i.signalStrength=e.signalStrength),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioAttendeeState"},"getTypeUrl"),r}(),a.SdkAudioStreamIdInfoFrame=function(){function r(n){if(this.streams=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStreamIdInfoFrame"),r.prototype.streams=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streams!=null&&e.streams.length)for(var i=0;i<e.streams.length;++i)a.SdkAudioStreamIdInfo.encode(e.streams[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStreamIdInfoFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.streams&&o.streams.length||(o.streams=[]),o.streams.push(a.SdkAudioStreamIdInfo.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streams!=null&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var i=a.SdkAudioStreamIdInfo.verify(e.streams[t]);if(i)return"streams."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioStreamIdInfoFrame)return e;var t=new a.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var i=0;i<e.streams.length;++i){if(typeof e.streams[i]!="object")throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[i]=a.SdkAudioStreamIdInfo.fromObject(e.streams[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streams=[]),e.streams&&e.streams.length){i.streams=[];for(var o=0;o<e.streams.length;++o)i.streams[o]=a.SdkAudioStreamIdInfo.toObject(e.streams[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfoFrame"},"getTypeUrl"),r}(),a.SdkAudioStreamIdInfo=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStreamIdInfo"),r.prototype.audioStreamId=0,r.prototype.attendeeId="",r.prototype.muted=!1,r.prototype.externalUserId="",r.prototype.dropped=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),e.dropped!=null&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStreamIdInfo;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.audioStreamId=e.uint32();break}case 2:{o.attendeeId=e.string();break}case 3:{o.muted=e.bool();break}case 4:{o.externalUserId=e.string();break}case 5:{o.dropped=e.bool();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!h.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!h.isString(e.attendeeId)?"attendeeId: string expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!h.isString(e.externalUserId)?"externalUserId: string expected":e.dropped!=null&&e.hasOwnProperty("dropped")&&typeof e.dropped!="boolean"?"dropped: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioStreamIdInfo)return e;var t=new a.SdkAudioStreamIdInfo;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.muted!=null&&(t.muted=Boolean(e.muted)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.dropped!=null&&(t.dropped=Boolean(e.dropped)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.attendeeId="",i.muted=!1,i.externalUserId="",i.dropped=!1),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.muted!=null&&e.hasOwnProperty("muted")&&(i.muted=e.muted),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.dropped!=null&&e.hasOwnProperty("dropped")&&(i.dropped=e.dropped),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStreamIdInfo"},"getTypeUrl"),r}(),a.SdkPingPongType=function(){var r={},n=Object.create(r);return n[r[1]="PING"]=1,n[r[2]="PONG"]=2,n}(),a.SdkPingPongFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPingPongFrame"),r.prototype.type=1,r.prototype.pingId=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPingPongFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.type=e.int32();break}case 2:{o.pingId=e.uint32();break}default:e.skipType(c&7);break}}if(!o.hasOwnProperty("type"))throw h.ProtocolError("missing required 'type'",{instance:o});if(!o.hasOwnProperty("pingId"))throw h.ProtocolError("missing required 'pingId'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return h.isInteger(e.pingId)?null:"pingId: integer expected"},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkPingPongFrame)return e;var t=new a.SdkPingPongFrame;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return e.pingId!=null&&(t.pingId=e.pingId>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"PING":1,i.pingId=0),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkPingPongType[e.type]===void 0?e.type:a.SdkPingPongType[e.type]:e.type),e.pingId!=null&&e.hasOwnProperty("pingId")&&(i.pingId=e.pingId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPingPongFrame"},"getTypeUrl"),r}(),a.SdkAudioStatusFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkAudioStatusFrame"),r.prototype.audioStatus=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkAudioStatusFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.audioStatus=e.uint32();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&!h.isInteger(e.audioStatus)?"audioStatus: integer expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkAudioStatusFrame)return e;var t=new a.SdkAudioStatusFrame;return e.audioStatus!=null&&(t.audioStatus=e.audioStatus>>>0),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStatus=0),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=e.audioStatus),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkAudioStatusFrame"},"getTypeUrl"),r}(),a.SdkMetric=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkMetric"),r.prototype.type=1,r.prototype.value=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkMetric;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=e.double();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:break}return e.value!=null&&e.hasOwnProperty("value")&&typeof e.value!="number"?"value: number expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkMetric)return e;var t=new a.SdkMetric;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break;case"VIDEO_FREEZE_COUNT":case 90:t.type=90;break;case"VIDEO_FREEZE_DURATION":case 91:t.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:t.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:t.type=93;break;case"VIDEO_QUALITY_REASON":case 94:t.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:t.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:t.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:t.type=97;break;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:t.type=102;break}return e.value!=null&&(t.value=Number(e.value)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,i.value=0),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkMetric.Type[e.type]===void 0?e.type:a.SdkMetric.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(i.value=t.json&&!isFinite(e.value)?String(e.value):e.value),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMetric"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,e[n[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,e[n[3]="VIDEO_RETRANSMIT_BITRATE"]=3,e[n[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,e[n[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,e[n[6]="VIDEO_BUCKET_DELAY_MS"]=6,e[n[7]="STUN_RTT_MS"]=7,e[n[8]="SOCKET_DISCARDED_PPS"]=8,e[n[9]="RTC_MIC_JITTER_MS"]=9,e[n[10]="RTC_MIC_PPS"]=10,e[n[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,e[n[12]="RTC_MIC_BITRATE"]=12,e[n[13]="RTC_MIC_RTT_MS"]=13,e[n[14]="RTC_SPK_PPS"]=14,e[n[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,e[n[16]="RTC_SPK_JITTER_MS"]=16,e[n[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,e[n[18]="RTC_SPK_BITRATE"]=18,e[n[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,e[n[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,e[n[21]="VIDEO_SENT_RTT_MS"]=21,e[n[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,e[n[23]="VIDEO_NACKS_RECEIVED"]=23,e[n[24]="VIDEO_PLIS_RECEIVED"]=24,e[n[25]="VIDEO_ENCODE_MS"]=25,e[n[26]="VIDEO_INPUT_FPS"]=26,e[n[27]="VIDEO_ENCODE_FPS"]=27,e[n[28]="VIDEO_SENT_FPS"]=28,e[n[29]="VIDEO_FIRS_RECEIVED"]=29,e[n[30]="VIDEO_SENT_PPS"]=30,e[n[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,e[n[32]="VIDEO_SENT_BITRATE"]=32,e[n[33]="VIDEO_DROPPED_FPS"]=33,e[n[34]="VIDEO_TARGET_DELAY_MS"]=34,e[n[35]="VIDEO_DECODE_MS"]=35,e[n[36]="VIDEO_OUTPUT_FPS"]=36,e[n[37]="VIDEO_RECEIVED_PPS"]=37,e[n[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,e[n[39]="VIDEO_RENDER_DELAY_MS"]=39,e[n[40]="VIDEO_RECEIVED_FPS"]=40,e[n[41]="VIDEO_DECODE_FPS"]=41,e[n[42]="VIDEO_NACKS_SENT"]=42,e[n[43]="VIDEO_FIRS_SENT"]=43,e[n[44]="VIDEO_RECEIVED_BITRATE"]=44,e[n[45]="VIDEO_CURRENT_DELAY_MS"]=45,e[n[46]="VIDEO_JITTER_BUFFER_MS"]=46,e[n[47]="VIDEO_DISCARDED_PPS"]=47,e[n[48]="VIDEO_PLIS_SENT"]=48,e[n[49]="VIDEO_RECEIVED_JITTER_MS"]=49,e[n[64]="VIDEO_ENCODE_HEIGHT"]=64,e[n[66]="VIDEO_SENT_QP_SUM"]=66,e[n[69]="VIDEO_DECODE_HEIGHT"]=69,e[n[72]="VIDEO_RECEIVED_QP_SUM"]=72,e[n[86]="VIDEO_ENCODE_WIDTH"]=86,e[n[87]="VIDEO_DECODE_WIDTH"]=87,e[n[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,e[n[89]="VIDEO_DECODER_IS_HARDWARE"]=89,e[n[90]="VIDEO_FREEZE_COUNT"]=90,e[n[91]="VIDEO_FREEZE_DURATION"]=91,e[n[92]="VIDEO_PAUSE_COUNT"]=92,e[n[93]="VIDEO_PAUSE_DURATION"]=93,e[n[94]="VIDEO_QUALITY_REASON"]=94,e[n[95]="VIDEO_PROCESSING_TIME"]=95,e[n[96]="RTC_SPK_AUDIO_LEVEL"]=96,e[n[97]="RTC_MIC_AUDIO_LEVEL"]=97,e[n[98]="RTC_SPK_TOTAL_LOST"]=98,e[n[99]="RTC_SPK_TOTAL_EXPECTED"]=99,e[n[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,e[n[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,e[n[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,e}(),r}(),a.SdkStreamMetricFrame=function(){function r(n){if(this.metrics=[],this.dimensions=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamMetricFrame"),r.prototype.streamId=0,r.prototype.groupId=0,r.prototype.metrics=h.emptyArray,r.prototype.dimensions=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),e.metrics!=null&&e.metrics.length)for(var i=0;i<e.metrics.length;++i)a.SdkMetric.encode(e.metrics[i],t.uint32(42).fork()).ldelim();if(e.dimensions!=null&&e.dimensions.length)for(var i=0;i<e.dimensions.length;++i)a.SdkStreamDimension.encode(e.dimensions[i],t.uint32(50).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamMetricFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 3:{o.streamId=e.uint32();break}case 4:{o.groupId=e.uint32();break}case 5:{o.metrics&&o.metrics.length||(o.metrics=[]),o.metrics.push(a.SdkMetric.decode(e,e.uint32()));break}case 6:{o.dimensions&&o.dimensions.length||(o.dimensions=[]),o.dimensions.push(a.SdkStreamDimension.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!h.isInteger(e.streamId))return"streamId: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!h.isInteger(e.groupId))return"groupId: integer expected";if(e.metrics!=null&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var i=a.SdkMetric.verify(e.metrics[t]);if(i)return"metrics."+i}}if(e.dimensions!=null&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(var t=0;t<e.dimensions.length;++t){var i=a.SdkStreamDimension.verify(e.dimensions[t]);if(i)return"dimensions."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkStreamMetricFrame)return e;var t=new a.SdkStreamMetricFrame;if(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var i=0;i<e.metrics.length;++i){if(typeof e.metrics[i]!="object")throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[i]=a.SdkMetric.fromObject(e.metrics[i])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(var i=0;i<e.dimensions.length;++i){if(typeof e.dimensions[i]!="object")throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[i]=a.SdkStreamDimension.fromObject(e.dimensions[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.metrics=[],i.dimensions=[]),t.defaults&&(i.streamId=0,i.groupId=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.metrics&&e.metrics.length){i.metrics=[];for(var o=0;o<e.metrics.length;++o)i.metrics[o]=a.SdkMetric.toObject(e.metrics[o],t)}if(e.dimensions&&e.dimensions.length){i.dimensions=[];for(var o=0;o<e.dimensions.length;++o)i.dimensions[o]=a.SdkStreamDimension.toObject(e.dimensions[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamMetricFrame"},"getTypeUrl"),r}(),a.SdkClientMetricFrame=function(){function r(n){if(this.globalMetrics=[],this.streamMetricFrames=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkClientMetricFrame"),r.prototype.globalMetrics=h.emptyArray,r.prototype.streamMetricFrames=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.globalMetrics!=null&&e.globalMetrics.length)for(var i=0;i<e.globalMetrics.length;++i)a.SdkMetric.encode(e.globalMetrics[i],t.uint32(10).fork()).ldelim();if(e.streamMetricFrames!=null&&e.streamMetricFrames.length)for(var i=0;i<e.streamMetricFrames.length;++i)a.SdkStreamMetricFrame.encode(e.streamMetricFrames[i],t.uint32(18).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkClientMetricFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.globalMetrics&&o.globalMetrics.length||(o.globalMetrics=[]),o.globalMetrics.push(a.SdkMetric.decode(e,e.uint32()));break}case 2:{o.streamMetricFrames&&o.streamMetricFrames.length||(o.streamMetricFrames=[]),o.streamMetricFrames.push(a.SdkStreamMetricFrame.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.globalMetrics!=null&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var i=a.SdkMetric.verify(e.globalMetrics[t]);if(i)return"globalMetrics."+i}}if(e.streamMetricFrames!=null&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(var t=0;t<e.streamMetricFrames.length;++t){var i=a.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(i)return"streamMetricFrames."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkClientMetricFrame)return e;var t=new a.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var i=0;i<e.globalMetrics.length;++i){if(typeof e.globalMetrics[i]!="object")throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[i]=a.SdkMetric.fromObject(e.globalMetrics[i])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(var i=0;i<e.streamMetricFrames.length;++i){if(typeof e.streamMetricFrames[i]!="object")throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[i]=a.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.globalMetrics=[],i.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){i.globalMetrics=[];for(var o=0;o<e.globalMetrics.length;++o)i.globalMetrics[o]=a.SdkMetric.toObject(e.globalMetrics[o],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){i.streamMetricFrames=[];for(var o=0;o<e.streamMetricFrames.length;++o)i.streamMetricFrames[o]=a.SdkStreamMetricFrame.toObject(e.streamMetricFrames[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkClientMetricFrame"},"getTypeUrl"),r}(),a.SdkStreamDimension=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkStreamDimension"),r.prototype.type=1,r.prototype.value=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&a.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkStreamDimension;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.type=e.int32();break}case 2:{o.value=a.SdkDimensionValue.decode(e,e.uint32());break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(e.value!=null&&e.hasOwnProperty("value")){var t=a.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkStreamDimension)return e;var t=new a.SdkStreamDimension;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(e.value!=null){if(typeof e.value!="object")throw TypeError(".SdkStreamDimension.value: object expected");t.value=a.SdkDimensionValue.fromObject(e.value)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ENCODER_NAME":1,i.value=null),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkStreamDimension.Type[e.type]===void 0?e.type:a.SdkStreamDimension.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(i.value=a.SdkDimensionValue.toObject(e.value,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkStreamDimension"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="VIDEO_ENCODER_NAME"]=1,e[n[2]="VIDEO_DECODER_NAME"]=2,e}(),r}(),a.SdkDimensionValue=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDimensionValue"),r.prototype.stringValue="",r.prototype.boolValue=!1,r.prototype.uintValue=h.Long?h.Long.fromBits(0,0,!0):0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),e.boolValue!=null&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),e.uintValue!=null&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDimensionValue;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.stringValue=e.string();break}case 2:{o.boolValue=e.bool();break}case 3:{o.uintValue=e.uint64();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.stringValue!=null&&e.hasOwnProperty("stringValue")&&!h.isString(e.stringValue)?"stringValue: string expected":e.boolValue!=null&&e.hasOwnProperty("boolValue")&&typeof e.boolValue!="boolean"?"boolValue: boolean expected":e.uintValue!=null&&e.hasOwnProperty("uintValue")&&!h.isInteger(e.uintValue)&&!(e.uintValue&&h.isInteger(e.uintValue.low)&&h.isInteger(e.uintValue.high))?"uintValue: integer|Long expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkDimensionValue)return e;var t=new a.SdkDimensionValue;return e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.boolValue!=null&&(t.boolValue=Boolean(e.boolValue)),e.uintValue!=null&&(h.Long?(t.uintValue=h.Long.fromValue(e.uintValue)).unsigned=!0:typeof e.uintValue=="string"?t.uintValue=parseInt(e.uintValue,10):typeof e.uintValue=="number"?t.uintValue=e.uintValue:typeof e.uintValue=="object"&&(t.uintValue=new h.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults)if(i.stringValue="",i.boolValue=!1,h.Long){var o=new h.Long(0,0,!0);i.uintValue=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.uintValue=t.longs===String?"0":0;return e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(i.stringValue=e.stringValue),e.boolValue!=null&&e.hasOwnProperty("boolValue")&&(i.boolValue=e.boolValue),e.uintValue!=null&&e.hasOwnProperty("uintValue")&&(typeof e.uintValue=="number"?i.uintValue=t.longs===String?String(e.uintValue):e.uintValue:i.uintValue=t.longs===String?h.Long.prototype.toString.call(e.uintValue):t.longs===Number?new h.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDimensionValue"},"getTypeUrl"),r}(),a.SdkDataMessageFrame=function(){function r(n){if(this.messages=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDataMessageFrame"),r.prototype.messages=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.messages!=null&&e.messages.length)for(var i=0;i<e.messages.length;++i)a.SdkDataMessagePayload.encode(e.messages[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDataMessageFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.messages&&o.messages.length||(o.messages=[]),o.messages.push(a.SdkDataMessagePayload.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.messages!=null&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var i=a.SdkDataMessagePayload.verify(e.messages[t]);if(i)return"messages."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkDataMessageFrame)return e;var t=new a.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var i=0;i<e.messages.length;++i){if(typeof e.messages[i]!="object")throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[i]=a.SdkDataMessagePayload.fromObject(e.messages[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.messages=[]),e.messages&&e.messages.length){i.messages=[];for(var o=0;o<e.messages.length;++o)i.messages[o]=a.SdkDataMessagePayload.toObject(e.messages[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessageFrame"},"getTypeUrl"),r}(),a.SdkDataMessagePayload=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkDataMessagePayload"),r.prototype.topic="",r.prototype.data=h.newBuffer([]),r.prototype.lifetimeMs=0,r.prototype.senderAttendeeId="",r.prototype.ingestTimeNs=h.Long?h.Long.fromBits(0,0,!1):0,r.prototype.senderExternalUserId="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.topic!=null&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),e.lifetimeMs!=null&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),e.senderAttendeeId!=null&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),e.ingestTimeNs!=null&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),e.senderExternalUserId!=null&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkDataMessagePayload;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.topic=e.string();break}case 2:{o.data=e.bytes();break}case 3:{o.lifetimeMs=e.uint32();break}case 4:{o.senderAttendeeId=e.string();break}case 5:{o.ingestTimeNs=e.int64();break}case 6:{o.senderExternalUserId=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.topic!=null&&e.hasOwnProperty("topic")&&!h.isString(e.topic)?"topic: string expected":e.data!=null&&e.hasOwnProperty("data")&&!(e.data&&typeof e.data.length=="number"||h.isString(e.data))?"data: buffer expected":e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&!h.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&!h.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&!h.isInteger(e.ingestTimeNs)&&!(e.ingestTimeNs&&h.isInteger(e.ingestTimeNs.low)&&h.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&!h.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkDataMessagePayload)return e;var t=new a.SdkDataMessagePayload;return e.topic!=null&&(t.topic=String(e.topic)),e.data!=null&&(typeof e.data=="string"?h.base64.decode(e.data,t.data=h.newBuffer(h.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),e.lifetimeMs!=null&&(t.lifetimeMs=e.lifetimeMs>>>0),e.senderAttendeeId!=null&&(t.senderAttendeeId=String(e.senderAttendeeId)),e.ingestTimeNs!=null&&(h.Long?(t.ingestTimeNs=h.Long.fromValue(e.ingestTimeNs)).unsigned=!1:typeof e.ingestTimeNs=="string"?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):typeof e.ingestTimeNs=="number"?t.ingestTimeNs=e.ingestTimeNs:typeof e.ingestTimeNs=="object"&&(t.ingestTimeNs=new h.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),e.senderExternalUserId!=null&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.topic="",t.bytes===String?i.data="":(i.data=[],t.bytes!==Array&&(i.data=h.newBuffer(i.data))),i.lifetimeMs=0,i.senderAttendeeId="",h.Long){var o=new h.Long(0,0,!1);i.ingestTimeNs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.ingestTimeNs=t.longs===String?"0":0;i.senderExternalUserId=""}return e.topic!=null&&e.hasOwnProperty("topic")&&(i.topic=e.topic),e.data!=null&&e.hasOwnProperty("data")&&(i.data=t.bytes===String?h.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&(i.lifetimeMs=e.lifetimeMs),e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&(i.senderAttendeeId=e.senderAttendeeId),e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&(typeof e.ingestTimeNs=="number"?i.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:i.ingestTimeNs=t.longs===String?h.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new h.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&(i.senderExternalUserId=e.senderExternalUserId),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkDataMessagePayload"},"getTypeUrl"),r}(),a.SdkTurnCredentials=function(){function r(n){if(this.uris=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTurnCredentials"),r.prototype.username="",r.prototype.password="",r.prototype.ttl=0,r.prototype.uris=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.username!=null&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),e.password!=null&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),e.uris!=null&&e.uris.length)for(var i=0;i<e.uris.length;++i)t.uint32(34).string(e.uris[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTurnCredentials;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.username=e.string();break}case 2:{o.password=e.string();break}case 3:{o.ttl=e.uint32();break}case 4:{o.uris&&o.uris.length||(o.uris=[]),o.uris.push(e.string());break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.username!=null&&e.hasOwnProperty("username")&&!h.isString(e.username))return"username: string expected";if(e.password!=null&&e.hasOwnProperty("password")&&!h.isString(e.password))return"password: string expected";if(e.ttl!=null&&e.hasOwnProperty("ttl")&&!h.isInteger(e.ttl))return"ttl: integer expected";if(e.uris!=null&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!h.isString(e.uris[t]))return"uris: string[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTurnCredentials)return e;var t=new a.SdkTurnCredentials;if(e.username!=null&&(t.username=String(e.username)),e.password!=null&&(t.password=String(e.password)),e.ttl!=null&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var i=0;i<e.uris.length;++i)t.uris[i]=String(e.uris[i])}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.uris=[]),t.defaults&&(i.username="",i.password="",i.ttl=0),e.username!=null&&e.hasOwnProperty("username")&&(i.username=e.username),e.password!=null&&e.hasOwnProperty("password")&&(i.password=e.password),e.ttl!=null&&e.hasOwnProperty("ttl")&&(i.ttl=e.ttl),e.uris&&e.uris.length){i.uris=[];for(var o=0;o<e.uris.length;++o)i.uris[o]=e.uris[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTurnCredentials"},"getTypeUrl"),r}(),a.SdkTranscriptItem=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptItem"),r.prototype.content="",r.prototype.endTime=h.Long?h.Long.fromBits(0,0,!1):0,r.prototype.speakerAttendeeId="",r.prototype.speakerExternalUserId="",r.prototype.startTime=h.Long?h.Long.fromBits(0,0,!1):0,r.prototype.type=1,r.prototype.vocabularyFilterMatch=!1,r.prototype.confidence=0,r.prototype.stable=!1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),e.speakerAttendeeId!=null&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),e.speakerExternalUserId!=null&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),e.vocabularyFilterMatch!=null&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),e.stable!=null&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptItem;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.content=e.string();break}case 2:{o.endTime=e.int64();break}case 3:{o.speakerAttendeeId=e.string();break}case 4:{o.speakerExternalUserId=e.string();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.int32();break}case 7:{o.vocabularyFilterMatch=e.bool();break}case 8:{o.confidence=e.double();break}case 9:{o.stable=e.bool();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.content!=null&&e.hasOwnProperty("content")&&!h.isString(e.content))return"content: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!h.isInteger(e.endTime)&&!(e.endTime&&h.isInteger(e.endTime.low)&&h.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&!h.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&!h.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!h.isInteger(e.startTime)&&!(e.startTime&&h.isInteger(e.startTime.low)&&h.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&typeof e.vocabularyFilterMatch!="boolean"?"vocabularyFilterMatch: boolean expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.stable!=null&&e.hasOwnProperty("stable")&&typeof e.stable!="boolean"?"stable: boolean expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptItem)return e;var t=new a.SdkTranscriptItem;switch(e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(h.Long?(t.endTime=h.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new h.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.speakerAttendeeId!=null&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),e.speakerExternalUserId!=null&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),e.startTime!=null&&(h.Long?(t.startTime=h.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new h.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return e.vocabularyFilterMatch!=null&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.stable!=null&&(t.stable=Boolean(e.stable)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.content="",h.Long){var o=new h.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(i.speakerAttendeeId="",i.speakerExternalUserId="",h.Long){var o=new h.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.type=t.enums===String?"PRONUNCIATION":1,i.vocabularyFilterMatch=!1,i.confidence=0,i.stable=!1}return e.content!=null&&e.hasOwnProperty("content")&&(i.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?h.Long.prototype.toString.call(e.endTime):t.longs===Number?new h.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&(i.speakerAttendeeId=e.speakerAttendeeId),e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&(i.speakerExternalUserId=e.speakerExternalUserId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?h.Long.prototype.toString.call(e.startTime):t.longs===Number?new h.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkTranscriptItem.Type[e.type]===void 0?e.type:a.SdkTranscriptItem.Type[e.type]:e.type),e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&(i.vocabularyFilterMatch=e.vocabularyFilterMatch),e.confidence!=null&&e.hasOwnProperty("confidence")&&(i.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.stable!=null&&e.hasOwnProperty("stable")&&(i.stable=e.stable),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptItem"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="PRONUNCIATION"]=1,e[n[2]="PUNCTUATION"]=2,e}(),r}(),a.SdkTranscriptEntity=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptEntity"),r.prototype.category="",r.prototype.confidence=0,r.prototype.content="",r.prototype.endTime=h.Long?h.Long.fromBits(0,0,!1):0,r.prototype.startTime=h.Long?h.Long.fromBits(0,0,!1):0,r.prototype.type="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.category!=null&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptEntity;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.category=e.string();break}case 2:{o.confidence=e.double();break}case 3:{o.content=e.string();break}case 4:{o.endTime=e.int64();break}case 5:{o.startTime=e.int64();break}case 6:{o.type=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.category!=null&&e.hasOwnProperty("category")&&!h.isString(e.category)?"category: string expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.content!=null&&e.hasOwnProperty("content")&&!h.isString(e.content)?"content: string expected":e.endTime!=null&&e.hasOwnProperty("endTime")&&!h.isInteger(e.endTime)&&!(e.endTime&&h.isInteger(e.endTime.low)&&h.isInteger(e.endTime.high))?"endTime: integer|Long expected":e.startTime!=null&&e.hasOwnProperty("startTime")&&!h.isInteger(e.startTime)&&!(e.startTime&&h.isInteger(e.startTime.low)&&h.isInteger(e.startTime.high))?"startTime: integer|Long expected":e.type!=null&&e.hasOwnProperty("type")&&!h.isString(e.type)?"type: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptEntity)return e;var t=new a.SdkTranscriptEntity;return e.category!=null&&(t.category=String(e.category)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(h.Long?(t.endTime=h.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new h.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.startTime!=null&&(h.Long?(t.startTime=h.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new h.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type!=null&&(t.type=String(e.type)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.category="",i.confidence=0,i.content="",h.Long){var o=new h.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(h.Long){var o=new h.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.type=""}return e.category!=null&&e.hasOwnProperty("category")&&(i.category=e.category),e.confidence!=null&&e.hasOwnProperty("confidence")&&(i.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.content!=null&&e.hasOwnProperty("content")&&(i.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?h.Long.prototype.toString.call(e.endTime):t.longs===Number?new h.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?h.Long.prototype.toString.call(e.startTime):t.longs===Number?new h.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(i.type=e.type),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptEntity"},"getTypeUrl"),r}(),a.SdkTranscriptAlternative=function(){function r(n){if(this.items=[],this.entities=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptAlternative"),r.prototype.items=h.emptyArray,r.prototype.transcript="",r.prototype.entities=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.items!=null&&e.items.length)for(var i=0;i<e.items.length;++i)a.SdkTranscriptItem.encode(e.items[i],t.uint32(10).fork()).ldelim();if(e.transcript!=null&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),e.entities!=null&&e.entities.length)for(var i=0;i<e.entities.length;++i)a.SdkTranscriptEntity.encode(e.entities[i],t.uint32(26).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptAlternative;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.items&&o.items.length||(o.items=[]),o.items.push(a.SdkTranscriptItem.decode(e,e.uint32()));break}case 2:{o.transcript=e.string();break}case 3:{o.entities&&o.entities.length||(o.entities=[]),o.entities.push(a.SdkTranscriptEntity.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.items!=null&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var i=a.SdkTranscriptItem.verify(e.items[t]);if(i)return"items."+i}}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&!h.isString(e.transcript))return"transcript: string expected";if(e.entities!=null&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(var t=0;t<e.entities.length;++t){var i=a.SdkTranscriptEntity.verify(e.entities[t]);if(i)return"entities."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptAlternative)return e;var t=new a.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var i=0;i<e.items.length;++i){if(typeof e.items[i]!="object")throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[i]=a.SdkTranscriptItem.fromObject(e.items[i])}}if(e.transcript!=null&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(var i=0;i<e.entities.length;++i){if(typeof e.entities[i]!="object")throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[i]=a.SdkTranscriptEntity.fromObject(e.entities[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.items=[],i.entities=[]),t.defaults&&(i.transcript=""),e.items&&e.items.length){i.items=[];for(var o=0;o<e.items.length;++o)i.items[o]=a.SdkTranscriptItem.toObject(e.items[o],t)}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&(i.transcript=e.transcript),e.entities&&e.entities.length){i.entities=[];for(var o=0;o<e.entities.length;++o)i.entities[o]=a.SdkTranscriptEntity.toObject(e.entities[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptAlternative"},"getTypeUrl"),r}(),a.SdkTranscriptLanguageWithScore=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptLanguageWithScore"),r.prototype.languageCode="",r.prototype.score=0,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),e.score!=null&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptLanguageWithScore;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.languageCode=e.string();break}case 2:{o.score=e.double();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!h.isString(e.languageCode)?"languageCode: string expected":e.score!=null&&e.hasOwnProperty("score")&&typeof e.score!="number"?"score: number expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptLanguageWithScore)return e;var t=new a.SdkTranscriptLanguageWithScore;return e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.score!=null&&(t.score=Number(e.score)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.languageCode="",i.score=0),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(i.languageCode=e.languageCode),e.score!=null&&e.hasOwnProperty("score")&&(i.score=t.json&&!isFinite(e.score)?String(e.score):e.score),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptLanguageWithScore"},"getTypeUrl"),r}(),a.SdkTranscriptResult=function(){function r(n){if(this.alternatives=[],this.languageIdentification=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptResult"),r.prototype.alternatives=h.emptyArray,r.prototype.channelId="",r.prototype.endTime=h.Long?h.Long.fromBits(0,0,!1):0,r.prototype.isPartial=!1,r.prototype.resultId="",r.prototype.startTime=h.Long?h.Long.fromBits(0,0,!1):0,r.prototype.languageCode="",r.prototype.languageIdentification=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.alternatives!=null&&e.alternatives.length)for(var i=0;i<e.alternatives.length;++i)a.SdkTranscriptAlternative.encode(e.alternatives[i],t.uint32(10).fork()).ldelim();if(e.channelId!=null&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),e.isPartial!=null&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),e.resultId!=null&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),e.languageIdentification!=null&&e.languageIdentification.length)for(var i=0;i<e.languageIdentification.length;++i)a.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[i],t.uint32(66).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptResult;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.alternatives&&o.alternatives.length||(o.alternatives=[]),o.alternatives.push(a.SdkTranscriptAlternative.decode(e,e.uint32()));break}case 2:{o.channelId=e.string();break}case 3:{o.endTime=e.int64();break}case 4:{o.isPartial=e.bool();break}case 5:{o.resultId=e.string();break}case 6:{o.startTime=e.int64();break}case 7:{o.languageCode=e.string();break}case 8:{o.languageIdentification&&o.languageIdentification.length||(o.languageIdentification=[]),o.languageIdentification.push(a.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.alternatives!=null&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var i=a.SdkTranscriptAlternative.verify(e.alternatives[t]);if(i)return"alternatives."+i}}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&!h.isString(e.channelId))return"channelId: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!h.isInteger(e.endTime)&&!(e.endTime&&h.isInteger(e.endTime.low)&&h.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.isPartial!=null&&e.hasOwnProperty("isPartial")&&typeof e.isPartial!="boolean")return"isPartial: boolean expected";if(e.resultId!=null&&e.hasOwnProperty("resultId")&&!h.isString(e.resultId))return"resultId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!h.isInteger(e.startTime)&&!(e.startTime&&h.isInteger(e.startTime.low)&&h.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!h.isString(e.languageCode))return"languageCode: string expected";if(e.languageIdentification!=null&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(var t=0;t<e.languageIdentification.length;++t){var i=a.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(i)return"languageIdentification."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptResult)return e;var t=new a.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var i=0;i<e.alternatives.length;++i){if(typeof e.alternatives[i]!="object")throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[i]=a.SdkTranscriptAlternative.fromObject(e.alternatives[i])}}if(e.channelId!=null&&(t.channelId=String(e.channelId)),e.endTime!=null&&(h.Long?(t.endTime=h.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new h.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.isPartial!=null&&(t.isPartial=Boolean(e.isPartial)),e.resultId!=null&&(t.resultId=String(e.resultId)),e.startTime!=null&&(h.Long?(t.startTime=h.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new h.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(var i=0;i<e.languageIdentification.length;++i){if(typeof e.languageIdentification[i]!="object")throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[i]=a.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.alternatives=[],i.languageIdentification=[]),t.defaults){if(i.channelId="",h.Long){var o=new h.Long(0,0,!1);i.endTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.endTime=t.longs===String?"0":0;if(i.isPartial=!1,i.resultId="",h.Long){var o=new h.Long(0,0,!1);i.startTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.startTime=t.longs===String?"0":0;i.languageCode=""}if(e.alternatives&&e.alternatives.length){i.alternatives=[];for(var c=0;c<e.alternatives.length;++c)i.alternatives[c]=a.SdkTranscriptAlternative.toObject(e.alternatives[c],t)}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&(i.channelId=e.channelId),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?i.endTime=t.longs===String?String(e.endTime):e.endTime:i.endTime=t.longs===String?h.Long.prototype.toString.call(e.endTime):t.longs===Number?new h.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.isPartial!=null&&e.hasOwnProperty("isPartial")&&(i.isPartial=e.isPartial),e.resultId!=null&&e.hasOwnProperty("resultId")&&(i.resultId=e.resultId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?i.startTime=t.longs===String?String(e.startTime):e.startTime:i.startTime=t.longs===String?h.Long.prototype.toString.call(e.startTime):t.longs===Number?new h.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(i.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){i.languageIdentification=[];for(var c=0;c<e.languageIdentification.length;++c)i.languageIdentification[c]=a.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[c],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptResult"},"getTypeUrl"),r}(),a.SdkTranscript=function(){function r(n){if(this.results=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscript"),r.prototype.results=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.results!=null&&e.results.length)for(var i=0;i<e.results.length;++i)a.SdkTranscriptResult.encode(e.results[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscript;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.results&&o.results.length||(o.results=[]),o.results.push(a.SdkTranscriptResult.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.results!=null&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var i=a.SdkTranscriptResult.verify(e.results[t]);if(i)return"results."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscript)return e;var t=new a.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var i=0;i<e.results.length;++i){if(typeof e.results[i]!="object")throw TypeError(".SdkTranscript.results: object expected");t.results[i]=a.SdkTranscriptResult.fromObject(e.results[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.results=[]),e.results&&e.results.length){i.results=[];for(var o=0;o<e.results.length;++o)i.results[o]=a.SdkTranscriptResult.toObject(e.results[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscript"},"getTypeUrl"),r}(),a.SdkTranscriptionStatus=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptionStatus"),r.prototype.type=1,r.prototype.eventTime=h.Long?h.Long.fromBits(0,0,!1):0,r.prototype.transcriptionRegion="",r.prototype.transcriptionConfiguration="",r.prototype.message="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.eventTime!=null&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),e.transcriptionRegion!=null&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),e.transcriptionConfiguration!=null&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptionStatus;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.type=e.int32();break}case 2:{o.eventTime=e.int64();break}case 3:{o.transcriptionRegion=e.string();break}case 4:{o.transcriptionConfiguration=e.string();break}case 5:{o.message=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return e.eventTime!=null&&e.hasOwnProperty("eventTime")&&!h.isInteger(e.eventTime)&&!(e.eventTime&&h.isInteger(e.eventTime.low)&&h.isInteger(e.eventTime.high))?"eventTime: integer|Long expected":e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&!h.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&!h.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":e.message!=null&&e.hasOwnProperty("message")&&!h.isString(e.message)?"message: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptionStatus)return e;var t=new a.SdkTranscriptionStatus;switch(e.type){default:if(typeof e.type=="number"){t.type=e.type;break}break;case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return e.eventTime!=null&&(h.Long?(t.eventTime=h.Long.fromValue(e.eventTime)).unsigned=!1:typeof e.eventTime=="string"?t.eventTime=parseInt(e.eventTime,10):typeof e.eventTime=="number"?t.eventTime=e.eventTime:typeof e.eventTime=="object"&&(t.eventTime=new h.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),e.transcriptionRegion!=null&&(t.transcriptionRegion=String(e.transcriptionRegion)),e.transcriptionConfiguration!=null&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),e.message!=null&&(t.message=String(e.message)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if(t.defaults){if(i.type=t.enums===String?"STARTED":1,h.Long){var o=new h.Long(0,0,!1);i.eventTime=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else i.eventTime=t.longs===String?"0":0;i.transcriptionRegion="",i.transcriptionConfiguration="",i.message=""}return e.type!=null&&e.hasOwnProperty("type")&&(i.type=t.enums===String?a.SdkTranscriptionStatus.Type[e.type]===void 0?e.type:a.SdkTranscriptionStatus.Type[e.type]:e.type),e.eventTime!=null&&e.hasOwnProperty("eventTime")&&(typeof e.eventTime=="number"?i.eventTime=t.longs===String?String(e.eventTime):e.eventTime:i.eventTime=t.longs===String?h.Long.prototype.toString.call(e.eventTime):t.longs===Number?new h.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&(i.transcriptionRegion=e.transcriptionRegion),e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&(i.transcriptionConfiguration=e.transcriptionConfiguration),e.message!=null&&e.hasOwnProperty("message")&&(i.message=e.message),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptionStatus"},"getTypeUrl"),r.Type=function(){var n={},e=Object.create(n);return e[n[1]="STARTED"]=1,e[n[2]="INTERRUPTED"]=2,e[n[3]="RESUMED"]=3,e[n[4]="STOPPED"]=4,e[n[5]="FAILED"]=5,e}(),r}(),a.SdkTranscriptEvent=function(){function r(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)e[t[i]]!=null&&(this[t[i]]=e[t[i]])}s(r,"SdkTranscriptEvent"),r.prototype.status=null,r.prototype.transcript=null;var n;return Object.defineProperty(r.prototype,"Event",{get:h.oneOfGetter(n=["status","transcript"]),set:h.oneOfSetter(n)}),r.create=s(function(t){return new r(t)},"create"),r.encode=s(function(t,i){return i||(i=m.create()),t.status!=null&&Object.hasOwnProperty.call(t,"status")&&a.SdkTranscriptionStatus.encode(t.status,i.uint32(10).fork()).ldelim(),t.transcript!=null&&Object.hasOwnProperty.call(t,"transcript")&&a.SdkTranscript.encode(t.transcript,i.uint32(18).fork()).ldelim(),i},"encode"),r.encodeDelimited=s(function(t,i){return this.encode(t,i).ldelim()},"encodeDelimited"),r.decode=s(function(t,i){t instanceof g||(t=g.create(t));for(var o=i===void 0?t.len:t.pos+i,c=new a.SdkTranscriptEvent;t.pos<o;){var p=t.uint32();switch(p>>>3){case 1:{c.status=a.SdkTranscriptionStatus.decode(t,t.uint32());break}case 2:{c.transcript=a.SdkTranscript.decode(t,t.uint32());break}default:t.skipType(p&7);break}}return c},"decode"),r.decodeDelimited=s(function(t){return t instanceof g||(t=new g(t)),this.decode(t,t.uint32())},"decodeDelimited"),r.verify=s(function(t){if(typeof t!="object"||t===null)return"object expected";var i={};if(t.status!=null&&t.hasOwnProperty("status")){i.Event=1;{var o=a.SdkTranscriptionStatus.verify(t.status);if(o)return"status."+o}}if(t.transcript!=null&&t.hasOwnProperty("transcript")){if(i.Event===1)return"Event: multiple values";i.Event=1;{var o=a.SdkTranscript.verify(t.transcript);if(o)return"transcript."+o}}return null},"verify"),r.fromObject=s(function(t){if(t instanceof a.SdkTranscriptEvent)return t;var i=new a.SdkTranscriptEvent;if(t.status!=null){if(typeof t.status!="object")throw TypeError(".SdkTranscriptEvent.status: object expected");i.status=a.SdkTranscriptionStatus.fromObject(t.status)}if(t.transcript!=null){if(typeof t.transcript!="object")throw TypeError(".SdkTranscriptEvent.transcript: object expected");i.transcript=a.SdkTranscript.fromObject(t.transcript)}return i},"fromObject"),r.toObject=s(function(t,i){i||(i={});var o={};return t.status!=null&&t.hasOwnProperty("status")&&(o.status=a.SdkTranscriptionStatus.toObject(t.status,i),i.oneofs&&(o.Event="status")),t.transcript!=null&&t.hasOwnProperty("transcript")&&(o.transcript=a.SdkTranscript.toObject(t.transcript,i),i.oneofs&&(o.Event="transcript")),o},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(t){return t===void 0&&(t="type.googleapis.com"),t+"/SdkTranscriptEvent"},"getTypeUrl"),r}(),a.SdkTranscriptFrame=function(){function r(n){if(this.events=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkTranscriptFrame"),r.prototype.events=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.events!=null&&e.events.length)for(var i=0;i<e.events.length;++i)a.SdkTranscriptEvent.encode(e.events[i],t.uint32(10).fork()).ldelim();return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkTranscriptFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.events&&o.events.length||(o.events=[]),o.events.push(a.SdkTranscriptEvent.decode(e,e.uint32()));break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.events!=null&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var i=a.SdkTranscriptEvent.verify(e.events[t]);if(i)return"events."+i}}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkTranscriptFrame)return e;var t=new a.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var i=0;i<e.events.length;++i){if(typeof e.events[i]!="object")throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[i]=a.SdkTranscriptEvent.fromObject(e.events[i])}}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.events=[]),e.events&&e.events.length){i.events=[];for(var o=0;o<e.events.length;++o)i.events[o]=a.SdkTranscriptEvent.toObject(e.events[o],t)}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkTranscriptFrame"},"getTypeUrl"),r}(),a.SdkRemoteVideoUpdateFrame=function(){function r(n){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkRemoteVideoUpdateFrame"),r.prototype.addedOrUpdatedVideoSubscriptions=h.emptyArray,r.prototype.removedVideoSubscriptionMids=h.emptyArray,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){if(t||(t=m.create()),e.addedOrUpdatedVideoSubscriptions!=null&&e.addedOrUpdatedVideoSubscriptions.length)for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i)a.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[i],t.uint32(10).fork()).ldelim();if(e.removedVideoSubscriptionMids!=null&&e.removedVideoSubscriptionMids.length)for(var i=0;i<e.removedVideoSubscriptionMids.length;++i)t.uint32(18).string(e.removedVideoSubscriptionMids[i]);return t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkRemoteVideoUpdateFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.addedOrUpdatedVideoSubscriptions&&o.addedOrUpdatedVideoSubscriptions.length||(o.addedOrUpdatedVideoSubscriptions=[]),o.addedOrUpdatedVideoSubscriptions.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break}case 2:{o.removedVideoSubscriptionMids&&o.removedVideoSubscriptionMids.length||(o.removedVideoSubscriptionMids=[]),o.removedVideoSubscriptionMids.push(e.string());break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.addedOrUpdatedVideoSubscriptions!=null&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var i=a.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(i)return"addedOrUpdatedVideoSubscriptions."+i}}if(e.removedVideoSubscriptionMids!=null&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(var t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!h.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkRemoteVideoUpdateFrame)return e;var t=new a.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var i=0;i<e.addedOrUpdatedVideoSubscriptions.length;++i){if(typeof e.addedOrUpdatedVideoSubscriptions[i]!="object")throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[i]=a.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[i])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(var i=0;i<e.removedVideoSubscriptionMids.length;++i)t.removedVideoSubscriptionMids[i]=String(e.removedVideoSubscriptionMids[i])}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.addedOrUpdatedVideoSubscriptions=[],i.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){i.addedOrUpdatedVideoSubscriptions=[];for(var o=0;o<e.addedOrUpdatedVideoSubscriptions.length;++o)i.addedOrUpdatedVideoSubscriptions[o]=a.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[o],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){i.removedVideoSubscriptionMids=[];for(var o=0;o<e.removedVideoSubscriptionMids.length;++o)i.removedVideoSubscriptionMids[o]=e.removedVideoSubscriptionMids[o]}return i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkRemoteVideoUpdateFrame"},"getTypeUrl"),r}(),a.SdkVideoQualityAdaptationPreference=function(){var r={},n=Object.create(r);return n[r[1]="BALANCED"]=1,n[r[2]="MAINTAIN_FRAMERATE"]=2,n[r[3]="MAINTAIN_RESOLUTION"]=3,n}(),a.SdkVideoSubscriptionConfiguration=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkVideoSubscriptionConfiguration"),r.prototype.mid="",r.prototype.attendeeId="",r.prototype.streamId=0,r.prototype.priority=0,r.prototype.targetBitrateKbps=0,r.prototype.groupId=0,r.prototype.qualityAdaptationPreference=1,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t.uint32(10).string(e.mid),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.priority!=null&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),e.targetBitrateKbps!=null&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.qualityAdaptationPreference!=null&&Object.hasOwnProperty.call(e,"qualityAdaptationPreference")&&t.uint32(56).int32(e.qualityAdaptationPreference),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkVideoSubscriptionConfiguration;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.mid=e.string();break}case 2:{o.attendeeId=e.string();break}case 3:{o.streamId=e.uint32();break}case 4:{o.priority=e.uint32();break}case 5:{o.targetBitrateKbps=e.uint32();break}case 6:{o.groupId=e.uint32();break}case 7:{o.qualityAdaptationPreference=e.int32();break}default:e.skipType(c&7);break}}if(!o.hasOwnProperty("mid"))throw h.ProtocolError("missing required 'mid'",{instance:o});return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(!h.isString(e.mid))return"mid: string expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!h.isString(e.attendeeId))return"attendeeId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!h.isInteger(e.streamId))return"streamId: integer expected";if(e.priority!=null&&e.hasOwnProperty("priority")&&!h.isInteger(e.priority))return"priority: integer expected";if(e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&!h.isInteger(e.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!h.isInteger(e.groupId))return"groupId: integer expected";if(e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference"))switch(e.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:break}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkVideoSubscriptionConfiguration)return e;var t=new a.SdkVideoSubscriptionConfiguration;switch(e.mid!=null&&(t.mid=String(e.mid)),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.priority!=null&&(t.priority=e.priority>>>0),e.targetBitrateKbps!=null&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.qualityAdaptationPreference){default:if(typeof e.qualityAdaptationPreference=="number"){t.qualityAdaptationPreference=e.qualityAdaptationPreference;break}break;case"BALANCED":case 1:t.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:t.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:t.qualityAdaptationPreference=3;break}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.mid="",i.attendeeId="",i.streamId=0,i.priority=0,i.targetBitrateKbps=0,i.groupId=0,i.qualityAdaptationPreference=t.enums===String?"BALANCED":1),e.mid!=null&&e.hasOwnProperty("mid")&&(i.mid=e.mid),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.streamId!=null&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),e.priority!=null&&e.hasOwnProperty("priority")&&(i.priority=e.priority),e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&(i.targetBitrateKbps=e.targetBitrateKbps),e.groupId!=null&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference")&&(i.qualityAdaptationPreference=t.enums===String?a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]===void 0?e.qualityAdaptationPreference:a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]:e.qualityAdaptationPreference),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkVideoSubscriptionConfiguration"},"getTypeUrl"),r}(),a.SdkNotificationFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkNotificationFrame"),r.prototype.level=3,r.prototype.message="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.level!=null&&Object.hasOwnProperty.call(e,"level")&&t.uint32(8).int32(e.level),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkNotificationFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.level=e.int32();break}case 2:{o.message=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.level!=null&&e.hasOwnProperty("level"))switch(e.level){default:return"level: enum value expected";case 1:case 2:case 3:break}return e.message!=null&&e.hasOwnProperty("message")&&!h.isString(e.message)?"message: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkNotificationFrame)return e;var t=new a.SdkNotificationFrame;switch(e.level){case"INFO":case 1:t.level=1;break;case"WARNING":case 2:t.level=2;break;default:if(typeof e.level=="number"){t.level=e.level;break}break;case"ERROR":case 3:t.level=3;break}return e.message!=null&&(t.message=String(e.message)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.level=t.enums===String?"ERROR":3,i.message=""),e.level!=null&&e.hasOwnProperty("level")&&(i.level=t.enums===String?a.SdkNotificationFrame.NotificationLevel[e.level]===void 0?e.level:a.SdkNotificationFrame.NotificationLevel[e.level]:e.level),e.message!=null&&e.hasOwnProperty("message")&&(i.message=e.message),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkNotificationFrame"},"getTypeUrl"),r.NotificationLevel=function(){var n={},e=Object.create(n);return e[n[1]="INFO"]=1,e[n[2]="WARNING"]=2,e[n[3]="ERROR"]=3,e}(),r}(),a.SdkPrimaryMeetingJoinFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingJoinFrame"),r.prototype.credentials=null,r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.credentials!=null&&Object.hasOwnProperty.call(e,"credentials")&&a.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingJoinFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.credentials=a.SdkMeetingSessionCredentials.decode(e,e.uint32());break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.credentials!=null&&e.hasOwnProperty("credentials")){var t=a.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkPrimaryMeetingJoinFrame)return e;var t=new a.SdkPrimaryMeetingJoinFrame;if(e.credentials!=null){if(typeof e.credentials!="object")throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=a.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.credentials=null),e.credentials!=null&&e.hasOwnProperty("credentials")&&(i.credentials=a.SdkMeetingSessionCredentials.toObject(e.credentials,t)),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinFrame"},"getTypeUrl"),r}(),a.SdkPrimaryMeetingJoinAckFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingJoinAckFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingJoinAckFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof a.SdkPrimaryMeetingJoinAckFrame?e:new a.SdkPrimaryMeetingJoinAckFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingJoinAckFrame"},"getTypeUrl"),r}(),a.SdkPrimaryMeetingLeaveFrame=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkPrimaryMeetingLeaveFrame"),r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkPrimaryMeetingLeaveFrame;e.pos<i;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),r.fromObject=s(function(e){return e instanceof a.SdkPrimaryMeetingLeaveFrame?e:new a.SdkPrimaryMeetingLeaveFrame},"fromObject"),r.toObject=s(function(){return{}},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkPrimaryMeetingLeaveFrame"},"getTypeUrl"),r}(),a.SdkMeetingSessionCredentials=function(){function r(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)n[e[t]]!=null&&(this[e[t]]=n[e[t]])}return s(r,"SdkMeetingSessionCredentials"),r.prototype.attendeeId="",r.prototype.externalUserId="",r.prototype.joinToken="",r.create=s(function(e){return new r(e)},"create"),r.encode=s(function(e,t){return t||(t=m.create()),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),e.joinToken!=null&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},"encode"),r.encodeDelimited=s(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),r.decode=s(function(e,t){e instanceof g||(e=g.create(e));for(var i=t===void 0?e.len:e.pos+t,o=new a.SdkMeetingSessionCredentials;e.pos<i;){var c=e.uint32();switch(c>>>3){case 1:{o.attendeeId=e.string();break}case 2:{o.externalUserId=e.string();break}case 3:{o.joinToken=e.string();break}default:e.skipType(c&7);break}}return o},"decode"),r.decodeDelimited=s(function(e){return e instanceof g||(e=new g(e)),this.decode(e,e.uint32())},"decodeDelimited"),r.verify=s(function(e){return typeof e!="object"||e===null?"object expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!h.isString(e.attendeeId)?"attendeeId: string expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!h.isString(e.externalUserId)?"externalUserId: string expected":e.joinToken!=null&&e.hasOwnProperty("joinToken")&&!h.isString(e.joinToken)?"joinToken: string expected":null},"verify"),r.fromObject=s(function(e){if(e instanceof a.SdkMeetingSessionCredentials)return e;var t=new a.SdkMeetingSessionCredentials;return e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.joinToken!=null&&(t.joinToken=String(e.joinToken)),t},"fromObject"),r.toObject=s(function(e,t){t||(t={});var i={};return t.defaults&&(i.attendeeId="",i.externalUserId="",i.joinToken=""),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),e.joinToken!=null&&e.hasOwnProperty("joinToken")&&(i.joinToken=e.joinToken),i},"toObject"),r.prototype.toJSON=s(function(){return this.constructor.toObject(this,u.util.toJSONOptions)},"toJSON"),r.getTypeUrl=s(function(e){return e===void 0&&(e="type.googleapis.com"),e+"/SdkMeetingSessionCredentials"},"getTypeUrl"),r}(),a.SdkVideoCodecCapability=function(){var r={},n=Object.create(r);return n[r[1]="VP8"]=1,n[r[2]="H264_BASELINE_PROFILE"]=2,n[r[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,n[r[4]="H264_MAIN_PROFILE"]=4,n[r[5]="H264_HIGH_PROFILE"]=5,n[r[6]="H264_CONSTRAINED_HIGH_PROFILE"]=6,n[r[8]="VP9_PROFILE_0"]=8,n[r[11]="AV1_MAIN_PROFILE"]=11,n}(),U.exports=a,h.Long=void 0,u.configure()},651033:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=f(636934),h=f(940999),a=g(f(244504));let r=s(class{makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const i=new m.Sha256(t);return i.update(e),i.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,i,o){return u(this,void 0,void 0,function*(){const c=yield this.hmac(t,"AWS4"+e),p=yield this.hmac(i,c),S=yield this.hmac(o,p);return yield this.hmac("aws4_request",S)})}signURL(e,t,i,o,c,p,S){return u(this,void 0,void 0,function*(){const d=this.getDateTimeString(),y=this.getDateString(d),E="AWS4-HMAC-SHA256";let I="";this.chimeClient.config.region instanceof Function?I=yield this.chimeClient.config.region():I=this.chimeClient.config.region;const A="host",L="host:"+o.toLowerCase()+`
`,M=y+"/"+I+"/"+i+"/aws4_request";let k;this.chimeClient.config.credentials instanceof Function?k=yield this.chimeClient.config.credentials():k=this.chimeClient.config.credentials;let w=new Map;w.set("X-Amz-Algorithm",[E]),w.set("X-Amz-Credential",[encodeURIComponent(k.accessKeyId+"/"+M)]),w.set("X-Amz-Date",[d]),w.set("X-Amz-Expires",["10"]),w.set("X-Amz-SignedHeaders",["host"]),k.sessionToken&&w.set("X-Amz-Security-Token",[encodeURIComponent(k.sessionToken)]),w.set(a.default.X_AMZN_VERSION,[encodeURIComponent(a.default.sdkVersion)]),w.set(a.default.X_AMZN_USER_AGENT,[encodeURIComponent(a.default.sdkUserAgentLowResolution)]),S==null||S.forEach((q,me)=>{const we=encodeURIComponent(me);q.sort().forEach(ue=>{w.has(we)||w.set(we,[]),w.get(we).push(encodeURIComponent(ue))})});let N="";w=new Map([...w.entries()].sort()),w.forEach((q,me)=>{q.forEach(we=>{N.length&&(N+="&"),N+=me+"="+we})});const T=e+`
`+c+`
`+N+`
`+L+`
`+A+`
`+h.toHex(yield this.hmac(p)),O=h.toHex(yield this.hmac(T)),D=`AWS4-HMAC-SHA256
`+d+`
`+y+"/"+I+"/"+i+`/aws4_request
`+O,G=yield this.getSignatureKey(k.secretAccessKey,y,I,i),K=h.toHex(yield this.hmac(D,G)),H=N+"&X-Amz-Signature="+K;return t+"://"+o+c+"?"+H})}constructor(e){this.chimeClient=e}},"DefaultSigV4");l.default=r},324374:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SimulcastLayers=void 0;var f;(function(u){u[u.Low=0]="Low",u[u.LowAndMedium=1]="LowAndMedium",u[u.LowAndHigh=2]="LowAndHigh",u[u.Medium=3]="Medium",u[u.MediumAndHigh=4]="MediumAndHigh",u[u.High=5]="High"})(f=l.SimulcastLayers||(l.SimulcastLayers={})),l.default=f},411660:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.AudioLogEvent=void 0;var f;(function(u){u[u.DeviceChanged=0]="DeviceChanged",u[u.MutedLocal=1]="MutedLocal",u[u.UnmutedLocal=2]="UnmutedLocal",u[u.Connected=3]="Connected",u[u.ConnectFailed=4]="ConnectFailed",u[u.RedmicStartLoss=5]="RedmicStartLoss",u[u.RedmicEndLoss=6]="RedmicEndLoss"})(f=l.AudioLogEvent||(l.AudioLogEvent={})),l.default=f},336632:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(y,E,I,A){function L(M){return M instanceof I?M:new I(function(k){k(M)})}return s(L,"adopt"),new(I||(I=Promise))(function(M,k){function w(O){try{T(A.next(O))}catch(D){k(D)}}s(w,"fulfilled");function N(O){try{T(A.throw(O))}catch(D){k(D)}}s(N,"rejected");function T(O){O.done?M(O.value):L(O.value).then(w,N)}s(T,"step"),T((A=A.apply(y,E||[])).next())})},g=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(725462)),h=g(f(19933)),a=g(f(150224)),r=g(f(410779)),n=g(f(168321)),e=g(f(123310)),t=g(f(867225)),i=g(f(449341)),o=f(459746),c=f(153822),p=g(f(411660)),S=g(f(182613));let d=s(class Xl{toAttribute(E){return this.toSuffix(E).substring(1)}toSuffix(E){return E.toLowerCase()===E?`_${E}`:E.toUpperCase()===E?`_${E.toLowerCase()}`:E.replace(/([A-Z][a-z]+)/g,function(I){return`_${I}`}).replace(/([A-Z][A-Z]+)/g,function(I){return`_${I}`}).toLowerCase()}logLatency(E,I,A){const L=this.toSuffix(E);this.logEventTime("meeting"+L,I,A)}logStateTimeout(E,I){const A=this.toSuffix(E);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},I),{state:`state${A}`}))}logAudioEvent(E,I){const A="audio"+this.toSuffix(p.default[E]);this.logEvent(A,I)}logVideoEvent(E,I){const A="video"+this.toSuffix(S.default[E]);this.logEvent(A,I)}logEventTime(E,I){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const L=Object.assign(Object.assign({},A),{call_id:this.audioVideoController.configuration.meetingId,client_type:Xl.CLIENT_TYPE,metric_type:"latency"});this.logger.debug(()=>`[StatsCollector] ${E}: ${JSON.stringify(L)}`),this.metricsAddTime(E,I,L)}logMeetingSessionStatus(E){const I=`${E.statusCode()}`;this.logEvent(I);const A={status:I,status_code:`${E.statusCode()}`};this.logEvent("meeting_session_status",A),E.isTerminal()&&this.logEvent("meeting_session_stopped",A),E.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",A),E.isFailure()&&this.logEvent("meeting_session_failed",A)}logLifecycleEvent(E,I){const A={lifecycle_event:`lifecycle${this.toSuffix(e.default[E])}`,lifecycle_event_code:`${E}`,lifecycle_event_condition:`condition${this.toSuffix(t.default[I])}`,lifecycle_event_condition_code:`${I}`};this.logEvent("meeting_session_lifecycle",A)}logEvent(E){let I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const A=Object.assign(Object.assign({},I),{call_id:this.audioVideoController.configuration.meetingId,client_type:Xl.CLIENT_TYPE});this.logger.debug(()=>`[StatsCollector] ${E}: ${JSON.stringify(A)}`),this.metricsLogEvent(E,A)}start(E,I){return this.intervalScheduler?!1:(this.logger.info("Starting StatsCollector"),this.signalingClient=E,this.videoStreamIndex=I,this.clientMetricReport=new m.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new i.default(this.interval),this.intervalScheduler.start(()=>u(this,void 0,void 0,function*(){yield this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}updateMetricValues(E,I){const A=I?this.clientMetricReport.streamMetricReports[Number(E.ssrc)]:this.clientMetricReport.globalMetricReport;let L;I?L=this.clientMetricReport.getMetricMap(A.mediaType,A.direction):L=this.clientMetricReport.getMetricMap();for(const M in E)M in L&&(typeof E[M]=="number"?(A.previousMetrics[M]=A.currentMetrics[M],A.currentMetrics[M]=E[M]):typeof E[M]=="string"?A.currentStringMetrics[M]=E[M]:typeof E[M]=="object"?(A.previousObjectMetrics[M]=A.currentObjectMetrics[M]===void 0?E[M]:A.currentObjectMetrics[M],A.currentObjectMetrics[M]=E[M]):this.logger.error(`Unknown metric value type ${typeof E[M]} for metric ${M}`))}processRawMetricReports(E){this.clientMetricReport.currentSsrcs={};const I=Date.now();for(const A of E){const L=this.isStreamRawMetricReport(A.type);if(L){const M=this.clientMetricReport.streamMetricReports[Number(A.ssrc)];if(M)M.mediaType===a.default.VIDEO&&M.direction===h.default.UPSTREAM?M.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(A.rid):M.streamId=this.videoStreamIndex.streamIdForSSRC(Number(A.ssrc));else{const k=new n.default;k.mediaType=this.getMediaType(A),k.direction=this.getDirectionType(A),k.mediaType===a.default.VIDEO&&k.direction===h.default.UPSTREAM?k.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(A.rid):this.videoStreamIndex.allStreams().empty()||(k.streamId=this.videoStreamIndex.streamIdForSSRC(Number(A.ssrc)),this.videoStreamIndex.groupIdForSSRC!==void 0&&(k.groupId=this.videoStreamIndex.groupIdForSSRC(Number(A.ssrc)))),this.clientMetricReport.streamMetricReports[Number(A.ssrc)]=k}this.clientMetricReport.currentSsrcs[Number(A.ssrc)]=1}this.updateMetricValues(A,L)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=I,this.clientMetricReport.print()}addStreamMetricDimensionFrames(E,I){const A=this.clientMetricReport.getStreamDimensionMap();for(const L in I.currentStringMetrics)if(L in A){const M=o.SdkStreamDimension.create();M.type=A[L];const k=o.SdkDimensionValue.create();k.stringValue=I.currentStringMetrics[L],M.value=k,E.dimensions.push(M)}}addMetricFrame(E,I,A,L){const M=A.type,k=A.transform,w=A.source,N=I.streamMetricFrames.length,T=I.streamMetricFrames[N-1];if(M){const O=o.SdkMetric.create();O.type=M,O.value=k(w||E,L),L?T.metrics.push(O):I.globalMetrics.push(O)}}addGlobalMetricsToProtobuf(E){const I=this.clientMetricReport.getMetricMap();for(const A in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(A,E,I[A])}addStreamMetricsToProtobuf(E){for(const I in this.clientMetricReport.streamMetricReports){const A=this.clientMetricReport.streamMetricReports[I],L=o.SdkStreamMetricFrame.create();L.streamId=A.streamId,L.metrics=[],this.addStreamMetricDimensionFrames(L,A),E.streamMetricFrames.push(L);const M=this.clientMetricReport.getMetricMap(A.mediaType,A.direction);for(const k in A.currentMetrics)this.addMetricFrame(k,E,M[k],Number(I));for(const k in A.currentStringMetrics)this.addMetricFrame(k,E,M[k],Number(I));for(const k in A.currentObjectMetrics)this.addMetricFrame(k,E,M[k],Number(I))}}makeClientMetricProtobuf(){const E=o.SdkClientMetricFrame.create();return E.globalMetrics=[],E.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(E),this.addStreamMetricsToProtobuf(E),E}sendClientMetricProtobuf(E){this.signalingClient.sendClientMetrics(E)}isStreamRawMetricReport(E){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(E)}getMediaType(E){return E.kind==="audio"?a.default.AUDIO:a.default.VIDEO}getDirectionType(E){const{type:I}=E;return I==="inbound-rtp"||I==="remote-outbound-rtp"||I==="inbound-rtp-red"?h.default.DOWNSTREAM:h.default.UPSTREAM}isValidStandardRawMetric(E){return E.type==="inbound-rtp"||E.type==="inbound-rtp-red"||E.type==="outbound-rtp"||E.type==="remote-inbound-rtp"||E.type==="remote-outbound-rtp"||E.type==="candidate-pair"&&E.state==="succeeded"||E.type==="media-source"&&E.kind==="audio"}isValidSsrc(E){let I=!0;return this.isStreamRawMetricReport(E.type)&&this.getDirectionType(E)===h.default.DOWNSTREAM&&this.getMediaType(E)===a.default.VIDEO&&(I=this.videoStreamIndex.streamIdForSSRC(Number(E.ssrc))>0),I}isValidRawMetricReport(E){return this.isValidStandardRawMetric(E)&&this.isValidSsrc(E)}filterRawMetricReports(E){const I=[];for(const A of E)this.isValidRawMetricReport(A)&&I.push(A);return I}handleRawMetricReports(E){const I=this.filterRawMetricReports(E);this.logger.debug(()=>`Filtered raw metrics : ${JSON.stringify(I)}`);const A=[];this.maybeAddRedRecoveryMetrics(A),this.clientMetricReport.customStatsReports=A,I.push(...A),this.processRawMetricReports(I);const L=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(L),this.audioVideoController.forEachObserver(M=>{c.Maybe.of(M.metricsDidReceive).map(k=>k.bind(M)(this.clientMetricReport.clone()))})}getStatsWrapper(){return u(this,void 0,void 0,function*(){if(!this.audioVideoController.rtcPeerConnection)return;const E=[];try{const I=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=I,I.forEach(A=>{E.push(A)}),this.handleRawMetricReports(E)}catch(I){this.logger.error(I.message)}})}overrideObservableMetric(E,I){this.clientMetricReport.overrideObservableMetric(E,I)}recoveryMetricsDidReceive(E){this.redRecoveryMetricReport=E}maybeAddRedRecoveryMetrics(E){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(E.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}constructor(E,I,A=Xl.INTERVAL_MS){this.audioVideoController=E,this.logger=I,this.interval=A,this.intervalScheduler=null,this.redRecoveryMetricReport=new r.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.metricsAddTime=(L,M,k)=>{},this.metricsLogEvent=(L,M)=>{}}},"StatsCollector");l.default=d,d.INTERVAL_MS=1e3,d.CLIENT_TYPE="amazon-chime-sdk-js"},182613:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoLogEvent=void 0;var f;(function(u){u[u.InputAttached=0]="InputAttached",u[u.SendingFailed=1]="SendingFailed",u[u.SendingSuccess=2]="SendingSuccess"})(f=l.VideoLogEvent||(l.VideoLogEvent={})),l.default=f},579219:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(182613)),h=g(f(337063));let a=s(class extends h.default{run(){return u(this,void 0,void 0,function*(){const n=this.context.transceiverController;n.setPeer(this.context.peer),n.setupLocalTransceivers();const e=this.context.activeAudioInput;if(e){const i=e.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield n.setAudioInput(i.length?i[0]:null)}else yield n.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const t=this.context.activeVideoInput;if(t){const i=t.getVideoTracks(),o=i.length?i[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield n.setVideoInput(o),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const c=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();n.setEncodingParameters(c)}o&&this.context.statsCollector.logVideoEvent(m.default.InputAttached,this.context.videoDeviceInformation)}else yield n.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=n.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive)})}setAudioCodecPreferences(){const n=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,e=this.context.audioProfile.hasRedundancyEnabled();if(!n){this.context.logger.warn("Setting codec preferences not supported");return}const t=this.context.transceiverController.localAudioTransceiver(),{codecs:i}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(i,null,4)}`);const o=i.findIndex(c=>c.mimeType==="audio/red");if(!t){this.context.logger.error("audio transceiver is null");return}if(o>=0){const c=i[o];i.splice(o,1),e?(i.unshift(c),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),t.setCodecPreferences(i);return}this.context.logger.info("audio/red codec not supported")}constructor(n){super(n.logger),this.context=n,this.taskName="AttachMediaInputTask"}},"AttachMediaInputTask");l.default=a},337063:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(976179)),h=g(f(438416));let a=s(class{once(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return new m.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(n){this.parentTask=n}getStatus(){return this.status}logAndThrow(n){throw this.logger.info(n),new Error(n)}baseRun(n){return u(this,void 0,void 0,function*(){try{const e=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case h.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case h.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case h.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=h.default.RUNNING,yield n.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-e)} ms`)}catch(e){throw e}finally{this.status!==h.default.CANCELED&&(this.status=h.default.FINISHED)}})}baseCancel(n){if(this.status===h.default.CANCELED||this.status===h.default.FINISHED){this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`);return}this.logger.info(`canceling task ${this.name()}`),this.status=h.default.CANCELED,n.call(this)}constructor(n){this.logger=n,this.taskName="BaseTask",this.parentTask=null,this.status=h.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}},"BaseTask");l.default=a},941513:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(337063));let h=s(class extends m.default{run(){return u(this,void 0,void 0,function*(){this.context.resetConnectionSpecificState()})}constructor(r){super(r.logger),this.context=r,this.taskName="CleanRestartedSessionTask"}},"CleanRestartedSessionTask");l.default=h},573628:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(497324)),h=g(f(337063));let a=s(class extends h.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(n){throw n}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const n=this.context.videoTileController.getLocalVideoTile();n&&n.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}})}receiveWebSocketClosedEvent(){return new Promise((n,e)=>{let t=s(class{cancel(){this.signalingClient.removeObserver(this),e(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(c){c.type===m.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),n())}constructor(c){this.signalingClient=c}},"Interceptor");const i=new t(this.context.signalingClient);this.taskCanceler=i,this.context.signalingClient.registerObserver(i)})}constructor(n){super(n.logger),this.context=n,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}},"CleanStoppedSessionTask");l.default=a},483066:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(337063));let h=s(class extends m.default{removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const r in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[r]()}addPeerConnectionEventLogger(){const r=this.context.peer;r.addEventListener("connectionstatechange",()=>{this.context.logger.info(`peer connection state changed: ${r.connectionState}`)}),r.addEventListener("negotiationneeded",()=>{this.context.logger.info("peer connection negotiation is needed")}),r.addEventListener("icegatheringstatechange",()=>{this.context.logger.info(`peer connection ice gathering state changed: ${r.iceGatheringState}`)}),r.addEventListener("icecandidate",n=>{this.context.logger.info(`peer connection ice candidate: ${n.candidate?n.candidate.candidate:"(null)"}`)}),r.addEventListener("iceconnectionstatechange",()=>{this.context.logger.info(`peer connection ice connection state changed: ${r.iceConnectionState}`)})}run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this);const n=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};n.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),n.sdpSemantics="unified-plan",n.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(n),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)})}trackIsVideoInput(r){return this.context.transceiverController.useTransceivers()?(this.logger.debug(()=>"getting video track type"),this.context.transceiverController.trackIsVideoInput(r)):!1}addRemoteVideoTrack(r,n){var e;const t=n.id,i=this.context.videoStreamIndex.attendeeIdForTrack(t);let o,c;if(this.context.videoTileController.getVideoTileForAttendeeId?(c=this.context.videoTileController.getVideoTileForAttendeeId(i),o=!!(!((e=c==null?void 0:c.state())===null||e===void 0)&&e.boundVideoStream)):o=this.context.videoTileController.haveVideoTileForAttendeeId(i),o){this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${i}`);return}c||(c=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${c.id()}`));let p=this.context.videoStreamIndex.streamIdForTrack(t);typeof p>"u"&&(this.logger.warn(`stream not found for tile=${c.id()} track=${t}`),p=null);for(let L=0;L<this.trackEvents.length;L++){const M=this.trackEvents[L],k=n.getVideoTracks();if(k&&k.length){const w=k[0],N=s(()=>{this.context.logger.info(`received the ${M} event for tile=${c.id()} id=${r.id} streamId=${p}`),M==="ended"&&this.removeRemoteVideoTrack(r,c.state())},"callback");w.addEventListener(M,N),this.removeVideoTrackEventListeners[r.id]||(this.removeVideoTrackEventListeners[r.id]=[]),this.removeVideoTrackEventListeners[r.id].push(()=>{w.removeEventListener(M,N)})}}let S,d;if(r.getSettings){const L=r.getSettings();S=L.width,d=L.height}else{const L=r.getCapabilities();S=L.width,d=L.height}const y=this.context.videoStreamIndex.externalUserIdForTrack(t);c.bindVideoStream(i,!1,n,S,d,p,y),this.logger.info(`video track added, use tile=${c.id()} track=${t} streamId=${p}`);const E="removetrack",I=n,A=s(()=>this.removeRemoteVideoTrack(r,c.state()),"trackRemovedHandler");this.removeTrackRemovedEventListeners[r.id]=()=>{I.removeEventListener(E,A),delete this.removeTrackRemovedEventListeners[r.id]},I.addEventListener(E,A)}removeRemoteVideoTrack(r,n){if(this.removeTrackRemovedEventListeners.hasOwnProperty(r.id)){this.removeTrackRemovedEventListeners[r.id]();for(const e of this.removeVideoTrackEventListeners[r.id])e();delete this.removeVideoTrackEventListeners[r.id]}this.logger.info(`video track ended, removing tile=${n.tileId} id=${r.id} stream=${n.streamId}`),n.streamId?this.context.videosPaused.remove(n.streamId):this.logger.warn(`no stream found for tile=${n.tileId}`),this.context.videoTileController.removeVideoTile(n.tileId)}constructor(r){super(r.logger),this.context=r,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=n=>{const e=n.track;if(this.context.logger.info(`received track event: kind=${e.kind} id=${e.id} label=${e.label}`),n.transceiver&&n.transceiver.currentDirection==="inactive")return;if(n.streams.length===0){this.context.logger.warn("Track event but no stream");return}const t=n.streams[0];e.kind==="audio"?this.context.audioMixController.bindAudioStream(t):e.kind==="video"&&!this.trackIsVideoInput(e)&&this.addRemoteVideoTrack(e,t)}}},"CreatePeerConnectionTask");l.default=h,h.REMOVE_HANDLER_INTERVAL_MS=1e4},87099:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(407833)),h=g(f(182394)),a=g(f(337063));let r=s(class extends a.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(!((t=(e=this.context.meetingSessionConfiguration)===null||e===void 0?void 0:e.urls)===null||t===void 0)&&t.audioHostURL)}sessionUsesVideo(){let t;this.context.transceiverController.useTransceivers()?t=this.context.transceiverController.hasVideoInput():t=this.context.videoTileController.hasStartedLocalVideoTile();const i=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),o=t||i;return this.context.logger.info(`uses video: ${o} (enabled: ${!0}, sending: ${t}, receiving: ${i})`),o}run(){return u(this,void 0,void 0,function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise((t,i)=>u(this,void 0,void 0,function*(){this.cancelPromise=o=>{i(o)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new h.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const o=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.IncompatibleSDP}`);this.context.previousSdpOffer=null,i(o);return}t()}catch(o){i(o)}finally{delete this.cancelPromise}}))})}constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}},"CreateSDPTask");l.default=r},591983:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(407833)),h=g(f(182394)),a=g(f(337063));let r=s(class bS extends a.default{removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return u(this,void 0,void 0,function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new h.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()){this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`);return}}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if((this.context.browserBehavior.hasFirefoxWebRTC()||this.context.peer.iceGatheringState==="complete")&&new h.default(this.context.peer.localDescription.sdp).hasCandidates()){this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering");return}try{yield new Promise((e,t)=>{this.cancelPromise=i=>{this.removeEventListener(),t(i)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if(this.context.peer.iceGatheringState==="complete"){this.removeEventListener(),e(),delete this.cancelPromise;return}},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=i=>{if(this.context.logger.info(`ice candidate: ${i.candidate?i.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),i.candidate&&(h.default.isRTPCandidate(i.candidate.candidate)&&this.context.iceCandidates.push(i.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1)){this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),delete this.cancelPromise;return}this.context.peer.iceGatheringState==="complete"&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),!new h.default(this.context.peer.localDescription.sdp).hasCandidates()||this.context.iceCandidates.length===0?(t(new Error("no ice candidates were gathered")),delete this.cancelPromise):(e(),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()})}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}})}constructor(e,t=bS.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}},"FinishGatheringICECandidatesTask");l.default=r,r.CHROME_VPN_TIMEOUT_MS=5e3},355888:function(U,l,f){"use strict";var u=this&&this.__createBinding||(Object.create?function(d,y,E,I){I===void 0&&(I=E),Object.defineProperty(d,I,{enumerable:!0,get:function(){return y[E]}})}:function(d,y,E,I){I===void 0&&(I=E),d[I]=y[E]}),g=this&&this.__setModuleDefault||(Object.create?function(d,y){Object.defineProperty(d,"default",{enumerable:!0,value:y})}:function(d,y){d.default=y}),m=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var y={};if(d!=null)for(var E in d)E!=="default"&&Object.prototype.hasOwnProperty.call(d,E)&&u(y,d,E);return g(y,d),y},h=this&&this.__awaiter||function(d,y,E,I){function A(L){return L instanceof E?L:new E(function(M){M(L)})}return s(A,"adopt"),new(E||(E=Promise))(function(L,M){function k(T){try{N(I.next(T))}catch(O){M(O)}}s(k,"fulfilled");function w(T){try{N(I.throw(T))}catch(O){M(O)}}s(w,"rejected");function N(T){T.done?L(T.value):A(T.value).then(k,w)}s(N,"step"),N((I=I.apply(d,y||[])).next())})},a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const r=a(f(91572)),n=a(f(407833)),e=a(f(138995)),t=m(f(493149)),i=a(f(497324)),o=a(f(248970)),c=f(459746),p=a(f(337063));let S=s(class extends p.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return h(this,void 0,void 0,function*(){const y=yield new Promise((E,I)=>{const A=this.context;A.turnCredentials=null;let L=s(class{cancel(){this.signalingClient.removeObserver(this),I(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(N){if(N.type===i.default.WebSocketClosed){let O=`The signaling connection was closed with code ${N.closeCode} and reason: ${N.closeReason}`;A.logger.warn(O);let D=n.default.SignalingBadRequest;N.closeCode===4410?(O="The meeting already ended.",A.logger.warn(O),D=n.default.MeetingEnded):N.closeCode>=4500&&N.closeCode<4600&&(D=n.default.SignalingInternalServerError),A.audioVideoController.handleMeetingSessionStatus(new r.default(D),new Error(O));return}if(N.type!==i.default.ReceivedSignalFrame)return;if(N.message.type===c.SdkSignalFrame.Type.JOIN_ACK){const O=N.message.joinack;if(!O){A.audioVideoController.handleMeetingSessionStatus(new r.default(n.default.SignalingRequestFailed),new Error("Join ACK message did not include expected frame"));return}if(O.videoSubscriptionLimit&&(A.videoSubscriptionLimit=O.videoSubscriptionLimit),A.serverSupportsCompression=O.wantsCompressedSdp,O.defaultServerSideNetworkAdaption!==void 0&&O.defaultServerSideNetworkAdaption!==t.default.Default&&A.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption!==void 0){const D=O.defaultServerSideNetworkAdaption;A.logger.info(`Overriding server side network adaption value to ${D}`),A.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(t.convertServerSideNetworkAdaptionEnumFromSignaled(D))}O&&O.turnCredentials?(A.turnCredentials=new e.default,A.turnCredentials.username=O.turnCredentials.username,A.turnCredentials.password=O.turnCredentials.password,A.turnCredentials.ttl=O.turnCredentials.ttl,A.turnCredentials.uris=O.turnCredentials.uris.map(D=>A.meetingSessionConfiguration.urls.urlRewriter(D)).filter(D=>!!D)):A.logger.error("missing TURN credentials in JoinAckFrame");return}if(N.message.type!==c.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const T=N.message.index;E(T)}constructor(N){this.signalingClient=N}},"IndexFrameInterceptor");const M=new L(this.context.signalingClient);this.context.signalingClient.registerObserver(M),this.taskCanceler=M,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const k=new o.default(this.context.meetingSessionConfiguration.applicationMetadata);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions!==void 0&&(k.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),k.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex!==void 0&&(k.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),k.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(k)});this.context.logger.info(`received first index ${JSON.stringify(y)}`),this.context.indexFrame=y})}constructor(y){super(y.logger),this.context=y,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}},"JoinAndReceiveIndexTask");l.default=S},410419:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(497324)),h=f(459746),a=g(f(337063));let r=s(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())})}receiveLeaveAck(){return new Promise((e,t)=>{let i=s(class{cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(p){if(p.isConnectionTerminated()){this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),e();return}p.type===m.default.ReceivedSignalFrame&&p.message.type===h.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}constructor(p,S){this.signalingClient=p,this.logger=S}},"Interceptor");const o=new i(this.context.signalingClient,this.context.logger);this.taskCanceler=o,this.context.signalingClient.registerObserver(o)})}constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}},"LeaveAndReceiveLeaveAckTask");l.default=r},584980:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(497324)),h=f(459746),a=g(f(337063));let r=s(class extends a.default{run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===m.default.ReceivedSignalFrame){if(e.message.type===h.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===h.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=t=>{this.context.signalingClient.mute(t)}}},"ListenForVolumeIndicatorsTask");l.default=r},159636:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(y,E,I,A){function L(M){return M instanceof I?M:new I(function(k){k(M)})}return s(L,"adopt"),new(I||(I=Promise))(function(M,k){function w(O){try{T(A.next(O))}catch(D){k(D)}}s(w,"fulfilled");function N(O){try{T(A.throw(O))}catch(D){k(D)}}s(N,"rejected");function T(O){O.done?M(O.value):L(O.value).then(w,N)}s(T,"step"),T((A=A.apply(y,E||[])).next())})},g=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(19933)),h=g(f(150224)),a=g(f(583981)),r=g(f(139316)),n=g(f(979841)),e=g(f(91572)),t=g(f(407833)),i=g(f(497324)),o=f(459746),c=g(f(411660)),p=f(153822),S=g(f(337063));let d=s(class extends S.default{removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)})}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(E){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(E){if(this.isResubscribeCheckPaused){this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),this.pendingMetricsReport=E;return}else this.pendingMetricsReport=void 0;const I=E.getObservableMetrics(),A=I.availableOutgoingBitrate,L=I.nackCountReceivedPerSecond;let M=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(E);const k=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(M=M||k,k){const w=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=w.truncate(this.context.videoSubscriptionLimit),w.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${k}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:A/1e3,nackCountPerSecond:L});const w=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();M=M||w,w&&(this.logger.info(`trigger resubscribe for up=${w}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters())}return M}metricsDidReceive(E){if(this.checkResubscribe(E)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const I=E.streamMetricReports,A=new Map;for(const L in I)I[L].mediaType===h.default.VIDEO&&I[L].direction===m.default.DOWNSTREAM&&A.set(I[L].streamId,I[L])}connectionHealthDidChange(E){E.consecutiveMissedPongs===0&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,E,()=>{this.context.audioVideoController.handleMeetingSessionStatus(new e.default(t.default.ConnectionHealthReconnect),null)}),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,E,()=>{var I;this.context.poorConnectionCount+=1;const A=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(I=this.context.eventController)===null||I===void 0||I.publishEvent("receivingAudioDropped",A),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver(L=>{p.Maybe.of(L.connectionDidSuggestStopVideo).map(M=>M.bind(L)())}):this.context.audioVideoController.forEachObserver(L=>{p.Maybe.of(L.connectionDidBecomePoor).map(M=>M.bind(L)())})},()=>{this.context.audioVideoController.forEachObserver(I=>{p.Maybe.of(I.connectionDidBecomeGood).map(A=>A.bind(I)())})}),this.isMeetingConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,E,()=>{var I;const A=this.generateBaseAudioVideoEventAttributes();(I=this.context.eventController)===null||I===void 0||I.publishEvent("sendingAudioFailed",A)},()=>{var I;const A=this.generateBaseAudioVideoEventAttributes();(I=this.context.eventController)===null||I===void 0||I.publishEvent("sendingAudioRecovered",A)})}audioVideoDidStart(){this.isMeetingConnected=!0}audioVideoDidStartConnecting(E){this.isMeetingConnected=!1}audioVideoDidStop(E){this.isMeetingConnected=!1}applyHealthPolicy(E,I,A,L){E.update(I);const M=E.healthIfChanged();M!==null&&(this.logger.info(`${E.name} value is now ${M}`),M<=E.minimumHealth()?p.Maybe.of(A).map(k=>k.bind(this)()):p.Maybe.of(L).map(k=>k.bind(this)()))}handleBitrateFrame(E){this.currentAvailableStreamAvgBitrates=E,E.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${E.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",E.serverAvailableOutgoingBitrate*1e3))}handleSignalingClientEvent(E){var I;if(E.type===i.default.WebSocketClosed&&(E.closeCode===4410||E.closeCode>=4500&&E.closeCode<4600)||E.type===i.default.WebSocketError||E.type===i.default.WebSocketFailed){if(!this.hasSignalingError){const A=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(I=this.context.eventController)===null||I===void 0||I.publishEvent("signalingDropped",A),this.hasSignalingError=!0}}else E.type===i.default.WebSocketOpen&&(this.hasSignalingError=!1);if(E.type===i.default.ReceivedSignalFrame){if(E.message.type===o.SdkSignalFrame.Type.NOTIFICATION){switch(E.message.notification.level){case o.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${E.message.notification.message}`);break;case o.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${E.message.notification.message}`);break;case o.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${E.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${E.message.notification.level}: ${E.message.notification.message}`);break}return}if(E.message.bitrates){const L=E.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(L),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(E.message.bitrates)}const A=e.default.fromSignalFrame(E.message);E.message.type!==o.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&A.statusCode()!==t.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(A,null)}}constructor(E,I,A){super(E.logger),this.context=E,this.initialConnectionHealthData=A,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.isMeetingConnected=!1,this.checkAndSendWeakSignalEvent=L=>{const M=L<1,k=this.prevSignalStrength<1,w=M?k?null:c.default.RedmicStartLoss:k?c.default.RedmicEndLoss:null;w&&this.context.statsCollector.logAudioEvent(w),this.prevSignalStrength=L},this.realtimeFatalErrorCallback=L=>{this.logger.error(`realtime error: ${L}: ${L.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new e.default(t.default.RealtimeApiFailed),L)},this.realtimeAttendeeIdPresenceHandler=(L,M)=>{var k;const w=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${w}`),w===L&&M&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,(k=this.context.eventController)===null||k===void 0||k.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:L,startTimeMs:M,iceGatheringDurationMs:k,attendeePresenceDurationMs:w,meetingStartDurationMs:N}=this.context;return{meetingDurationMs:M===null?0:Math.round(Date.now()-M),signalingOpenDurationMs:L,iceGatheringDurationMs:k,attendeePresenceDurationMs:w,meetingStartDurationMs:N}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const L=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},L),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new a.default(E.logger,Object.assign({},I),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new n.default(Object.assign({},I),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new r.default(E.logger,Object.assign({},I),this.initialConnectionHealthData.clone())}},"MonitorTask");l.default=d},1818:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(g){}},"NoOpTask");l.default=f},976179:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(343500)),m=u(f(359454));let h=s(class{name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const r of this.dependencies)r.cancel();this.logger.info(`Canceling ${this.name()}`),m.default.nextTick(()=>this.task.cancel()),this.canceled=!0,this.cancelPromise&&m.default.nextTick(()=>this.cancelPromise(new Error(`canceling ${this.name()}`)))}}logDependencies(){if(this.logger.getLogLevel()>g.default.INFO||!this.dependencies)return;const r=this.dependencies.filter(n=>n).map(n=>n.name()).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${r}`)}run(){if(this.promise)return this.promise;const r=this.dependencies?Promise.all(this.dependencies.map(n=>n==null?void 0:n.run())):Promise.resolve();return this.logDependencies(),this.ongoing=r.then(()=>this.task.run()),this.promise=new Promise((n,e)=>{this.cancelPromise=e,this.ongoing.then(n).catch(e)})}setParent(r){this.task.setParent(r)}constructor(r,n,e){this.logger=r,this.task=n,this.dependencies=e,this.canceled=!1}},"OnceTask");l.default=h},912790:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(960881)),h=g(f(497324)),a=g(f(337063));let r=s(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new m.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise((i,o)=>{let c=s(class{cancel(){this.signalingClient.removeObserver(this),o(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(d){switch(d.type){case h.default.WebSocketOpen:this.signalingClient.removeObserver(this),i();break;case h.default.WebSocketFailed:this.signalingClient.removeObserver(this),o(new Error("WebSocket connection failed"));break}}constructor(d){this.signalingClient=d}},"WebSocketOpenInterceptor");const p=new c(this.context.signalingClient);this.context.signalingClient.registerObserver(p),this.taskCanceler=p})}catch(i){throw i}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}})}constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}},"OpenSignalingConnectionTask");l.default=r},669492:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(337063));let h=s(class extends m.default{cancel(){for(const r of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${r.name()}`),r.cancel()}run(){return u(this,void 0,void 0,function*(){const r=[];for(const e of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${e.name()}`),r.push(e.run());const n=[];for(let e=0;e<r.length;e++){try{yield r[e]}catch(t){n.push(`task ${this.tasksToRunParallel[e].name()} failed: ${t.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[e].name()}`)}if(n.length>0){const e=n.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)})}constructor(r,n,e){super(r),this.taskName=n,this.tasksToRunParallel=e;for(const t of e)t.setParent(this)}},"ParallelGroupTask");l.default=h},771132:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(e,t,i,o){function c(p){return p instanceof i?p:new i(function(S){S(p)})}return s(c,"adopt"),new(i||(i=Promise))(function(p,S){function d(I){try{E(o.next(I))}catch(A){S(A)}}s(d,"fulfilled");function y(I){try{E(o.throw(I))}catch(A){S(A)}}s(y,"rejected");function E(I){I.done?p(I.value):c(I.value).then(d,y)}s(E,"step"),E((o=o.apply(e,t||[])).next())})},g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=f(126325),h=g(f(497324)),a=f(459746),r=g(f(337063));let n=s(class extends r.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed))})}receivePrimaryMeetingJoinAck(){return new Promise((t,i)=>{let o=s(class{cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed)),t()}handleSignalingClientEvent(S){S.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new m.MeetingSessionStatus(m.MeetingSessionStatusCode.SignalingRequestFailed)),t()),S.type===h.default.ReceivedSignalFrame&&S.message.type===a.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(m.MeetingSessionStatus.fromSignalFrame(S.message)),t())}constructor(S,d,y){this.signalingClient=S,this.completionCallback=d,this.logger=y}},"Interceptor");const c=new o(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=c,this.context.signalingClient.registerObserver(c)})}constructor(t,i,o){super(t.logger),this.context=t,this.credentials=i,this.completionCallback=o,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}},"PromoteToPrimaryMeetingTask");l.default=n},981373:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(337063));let h=s(class extends m.default{run(){var r,n;return u(this,void 0,void 0,function*(){if(!(!((n=(r=this.context.meetingSessionConfiguration)===null||r===void 0?void 0:r.urls)===null||n===void 0)&&n.audioHostURL)){this.context.logger.info("No audio connection: not acquiring audio input");return}if(this.context.activeAudioInput){this.context.logger.info("an active audio input exists");return}let e;try{e=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch{this.context.logger.warn("could not acquire audio input from current device")}e?this.context.activeAudioInput=e:this.context.logger.warn("an audio input is not available")})}constructor(r){super(r.logger),this.context=r,this.taskName="ReceiveAudioInputTask"}},"ReceiveAudioInputTask");l.default=h},130489:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(497324)),h=f(459746),a=g(f(337063));let r=s(class extends a.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(e){if(e.type!==m.default.ReceivedSignalFrame||e.message.type!==h.SdkSignalFrame.Type.PAUSE&&e.message.type!==h.SdkSignalFrame.Type.RESUME)return;const t=e.message.pause,i=e.message.type;if(this.context.logger.info(`received new ${i===h.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(t)}`),!t||this.context.videoTileController.getVideoTileForAttendeeId===void 0||this.context.videoDownlinkBandwidthPolicy.forEachObserver===void 0||this.context.videoStreamIndex.attendeeIdForGroupId===void 0)return;const o=t.groupIds.map(c=>{const p=this.context.videoStreamIndex.attendeeIdForGroupId(c);return this.context.videoTileController.getVideoTileForAttendeeId(p)});for(const c of o)c!==void 0&&(i===h.SdkSignalFrame.Type.PAUSE?c.state().paused||(this.serverPausedVideoTileIds.add(c.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(p=>{p.tileWillBePausedByDownlinkPolicy(c.id())}),c.pause()):c.state().paused&&this.serverPausedVideoTileIds.has(c.id())&&(this.serverPausedVideoTileIds.delete(c.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(p=>{p.tileWillBeUnpausedByDownlinkPolicy(c.id())}),c.unpause()))}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}},"ReceiveRemoteVideoPauseResume");l.default=r},640882:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(578555)),h=f(459746),a=g(f(337063));let r=s(class extends a.default{checkAndApplyVideoConstraint(e,t,i,o,c){return u(this,void 0,void 0,function*(){const p=t.getSettings();let S;if(e?S=this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:S=this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution,i>S.videoWidth||o>S.videoHeight||c>S.videoFrameRate){const d={width:{ideal:S.videoWidth},height:{ideal:S.videoHeight},frameRate:{ideal:S.videoFrameRate}};this.context.logger.warn(`Video track (content = ${e}) will be constrained to: ${JSON.stringify(d)} to remain below configured video quality settings, trackSettings: ${JSON.stringify(p)}`);try{yield t.applyConstraints(d)}catch{this.context.logger.info(`Could not apply constraint for video track (content = ${e})`)}}})}run(){return u(this,void 0,void 0,function*(){const e=this.context.videoDuplexMode===h.SdkStreamServiceType.RX||this.context.videoDuplexMode===h.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?h.SdkStreamServiceType.DUPLEX:h.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?h.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile()){this.context.logger.info("has not started local video tile"),this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([]));return}const t=this.context.videoTileController.getLocalVideoTile();let i;try{i=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch{this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const o=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(o.values()))}if(this.context.activeVideoInput=i,i){const o=i.getVideoTracks();if(!o||o.length===0)return;const c=this.context.meetingSessionConfiguration.credentials.attendeeId,p=new m.default(c).hasModality(m.default.MODALITY_CONTENT),S=o[0].getSettings();this.checkAndApplyVideoConstraint(p,o[0],S.width,S.height,S.frameRate);const d=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(c,!0,i,S.width,S.height,null,d);for(const y of o)this.logger.info(`Using video device label=${y.label} id=${y.id}`),this.context.videoDeviceInformation.current_camera_name=y.label,this.context.videoDeviceInformation.current_camera_id=y.id}})}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}},"ReceiveVideoInputTask");l.default=r},768034:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(o,c,p,S){function d(y){return y instanceof p?y:new p(function(E){E(y)})}return s(d,"adopt"),new(p||(p=Promise))(function(y,E){function I(M){try{L(S.next(M))}catch(k){E(k)}}s(I,"fulfilled");function A(M){try{L(S.throw(M))}catch(k){E(k)}}s(A,"rejected");function L(M){M.done?y(M.value):d(M.value).then(I,A)}s(L,"step"),L((S=S.apply(o,c||[])).next())})},g=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(544596)),h=g(f(578555)),a=g(f(232666)),r=g(f(497324)),n=f(459746),e=f(153822),t=g(f(337063));let i=s(class extends t.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return u(this,void 0,void 0,function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(c){if(c.type!==r.default.ReceivedSignalFrame||c.message.type!==n.SdkSignalFrame.Type.INDEX)return;const p=c.message.index;this.context.logger.info(`received new index ${JSON.stringify(p)}`),this.handleIndexFrame(p)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(c){if(!c)return;if(this.isIngestionPaused){this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),this.pendingIndex=c;return}else this.pendingIndex=null;const p=this.context.audioVideoController.configuration.credentials.attendeeId;c.sources=c.sources.filter(A=>{const L=new h.default(A.attendeeId);return!(L.base()===p&&L.hasModality(h.default.MODALITY_CONTENT))});const{videoStreamIndex:S,videoDownlinkBandwidthPolicy:d,videoUplinkBandwidthPolicy:y}=this.context,E=S.allVideoSendingSourcesExcludingSelf(p);S.integrateIndexFrame(c),d.updateIndex(S),y.updateIndex(S),this.resubscribe(d,y),this.updateVideoAvailability(c),this.handleIndexVideosPausedAtSource(),c.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(c);const I=S.allVideoSendingSourcesExcludingSelf(p);this.areVideoSourcesEqual(E,I)||this.context.audioVideoController.forEachObserver(A=>{e.Maybe.of(A.remoteVideoSourcesDidChange).map(L=>L.bind(A)(I))})}areVideoSourcesEqual(c,p){if(c.length!==p.length)return!1;const S=s((E,I)=>E.attendee.attendeeId.localeCompare(I.attendee.attendeeId),"compare"),d=[...c].sort(S),y=[...p].sort(S);for(let E=0;E<d.length;E++)if(d[E].attendee.attendeeId!==y[E].attendee.attendeeId)return!1;return!0}resubscribe(c,p){const S=c.wantsResubscribe(),d=(this.context.videoDuplexMode===n.SdkStreamServiceType.TX||this.context.videoDuplexMode===n.SdkStreamServiceType.DUPLEX)&&p.wantsResubscribe(),y=S||d;if(this.logger.info(`should resubscribe: ${y} (downlink: ${S} uplink: ${d})`),!y)return;const E=c.chooseSubscriptions();this.context.videosToReceive=E.truncate(this.context.videoSubscriptionLimit),E.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=p.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${d} down=${S}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(c){if(!this.context.videosToReceive){this.logger.error("videosToReceive must be set in the meeting context.");return}const p=new m.default;p.remoteVideoAvailable=!this.context.videosToReceive.empty(),p.canStartLocalVideo=!c.atCapacity,(!this.context.lastKnownVideoAvailability||!this.context.lastKnownVideoAvailability.equal(p))&&(this.context.lastKnownVideoAvailability=p.clone(),this.context.audioVideoController.forEachObserver(S=>{e.Maybe.of(S.videoAvailabilityDidChange).map(d=>d.bind(S)(p.clone()))}))}handleSupportedVideoReceiveCodecIntersection(c){if(this.context.videoSendCodecPreferences===void 0)return;const p=[];let S=!1;for(const d of this.context.videoSendCodecPreferences)for(const y of c.supportedReceiveCodecIntersection)if(d.equals(a.default.fromSignaled(y))){p.push(d);break}if(p.length>0){const d=p.find(y=>this.context.prioritizedSendVideoCodecCapabilities.some(E=>y.equals(E)));this.context.currentVideoSendCodec!==void 0&&(d===void 0||!this.context.currentVideoSendCodec.equals(d))&&(S=!0),this.context.meetingSupportedVideoSendCodecPreferences=p}else this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0;this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),S&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const c=this.context.videoStreamIndex.streamsPausedAtSource();for(const p of this.context.videoTileController.getAllVideoTiles()){const S=p.state();c.contain(S.streamId)?p.markPoorConnection()&&this.logger.info(`marks the tile ${S.tileId} as having a poor connection`):p.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${S.tileId} as having a poor connection`)}}constructor(c){super(c.logger),this.context=c,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}},"ReceiveVideoStreamIndexTask");l.default=i},426307:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(337063));let m=s(class extends g.default{run(){return this.fn().then(()=>{})}constructor(a,r,n="RunnableTask"){super(a),this.fn=r,this.taskName=n}},"RunnableTask");l.default=m},402858:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(e,t,i,o){function c(p){return p instanceof i?p:new i(function(S){S(p)})}return s(c,"adopt"),new(i||(i=Promise))(function(p,S){function d(I){try{E(o.next(I))}catch(A){S(A)}}s(d,"fulfilled");function y(I){try{E(o.throw(I))}catch(A){S(A)}}s(y,"rejected");function E(I){I.done?p(I.value):c(I.value).then(d,y)}s(E,"step"),E((o=o.apply(e,t||[])).next())})},g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(361862)),h=g(f(497324)),a=f(459746),r=g(f(337063));let n=s(class Lu extends r.default{run(){return u(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(t){if(t.type===h.default.ReceivedSignalFrame&&t.message.type===a.SdkSignalFrame.Type.DATA_MESSAGE)for(const i of t.message.dataMessage.messages){const o=new m.default(i.ingestTimeNs/1e6,i.topic,i.data,i.senderAttendeeId,i.senderExternalUserId,i.ingestTimeNs===0);this.context.realtimeController.realtimeReceiveDataMessage(o)}}validateDataMessage(t,i,o){if(!Lu.TOPIC_REGEX.test(t))throw new Error("Invalid topic");if(i.length>Lu.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(o&&o<0)throw new Error("The life time of the message has to be non negative")}constructor(t){super(t.logger),this.context=t,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(i,o,c)=>{if(this.context.signalingClient.ready()){let p;o instanceof Uint8Array?p=o:typeof o=="string"?p=new TextEncoder().encode(o):p=new TextEncoder().encode(JSON.stringify(o)),this.validateDataMessage(i,p,c);const S=a.SdkDataMessagePayload.create();S.topic=i,S.lifetimeMs=c,S.data=p;const d=a.SdkDataMessageFrame.create();d.messages=[S],this.context.signalingClient.sendDataMessage(d)}else this.context.logger.error("Signaling client is not ready")}}},"SendAndReceiveDataMessagesTask");l.default=n,n.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),n.DATA_SIZE=2048},730157:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(337063)),h=g(f(438416));let a=s(class extends m.default{cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return u(this,void 0,void 0,function*(){for(const n of this.tasksToRunSerially){this.getStatus()===h.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${n.name()}`),this.currentTask=n,yield n.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${n.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)})}constructor(n,e,t){super(n),this.taskName=e,this.tasksToRunSerially=t,this.currentTask=null;for(const i of t)i.setParent(this)}},"SerialGroupTask");l.default=a},713797:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(e,t,i,o){function c(p){return p instanceof i?p:new i(function(S){S(p)})}return s(c,"adopt"),new(i||(i=Promise))(function(p,S){function d(I){try{E(o.next(I))}catch(A){S(A)}}s(d,"fulfilled");function y(I){try{E(o.throw(I))}catch(A){S(A)}}s(y,"rejected");function E(I){I.done?p(I.value):c(I.value).then(d,y)}s(E,"step"),E((o=o.apply(e,t||[])).next())})},g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(48839)),h=g(f(578555)),a=g(f(182394)),r=g(f(337063));let n=s(class extends r.default{cancel(){if(this.cancelPromise){const t=new Error(`canceling ${this.name()}`);this.cancelPromise(t),delete this.cancelPromise}}run(){return u(this,void 0,void 0,function*(){const t=this.context.peer;let o=this.context.sdpOfferInit.sdp;this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(o=new a.default(o).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension!==void 0&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(o=new a.default(o).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),new m.default().requiresDisablingH264Encoding()&&(o=new a.default(o).removeH264SupportFromSendSection().sdp);const c=this.context.audioVideoController.configuration.credentials.attendeeId;if(new h.default(c).hasModality(h.default.MODALITY_CONTENT)&&this.context.audioVideoController.configuration.enableSVC&&(o=new a.default(o).withStartingVideoSendBitrate(100).sdp),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new a.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(o=new a.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new a.default(o).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const d=new a.default(o).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(d)}this.logger.debug(()=>`local description is >>>${o}<<<`);const S={type:"offer",sdp:o,toJSON:null};yield new Promise((d,y)=>u(this,void 0,void 0,function*(){this.cancelPromise=E=>{y(E)};try{yield t.setLocalDescription(S),d()}catch(E){y(E)}finally{delete this.cancelPromise}})),this.context.logger.info("set local description")})}constructor(t){super(t.logger),this.context=t,this.taskName="SetLocalDescriptionTask"}},"SetLocalDescriptionTask");l.default=n},189362:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(e,t,i,o){function c(p){return p instanceof i?p:new i(function(S){S(p)})}return s(c,"adopt"),new(i||(i=Promise))(function(p,S){function d(I){try{E(o.next(I))}catch(A){S(A)}}s(d,"fulfilled");function y(I){try{E(o.throw(I))}catch(A){S(A)}}s(y,"rejected");function E(I){I.done?p(I.value):c(I.value).then(d,y)}s(E,"step"),E((o=o.apply(e,t||[])).next())})},g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(578555)),h=g(f(182394)),a=g(f(232666)),r=g(f(337063));let n=s(class extends r.default{cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var t;return u(this,void 0,void 0,function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let o=this.context.sdpAnswer;o=new h.default(o).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(o=new h.default(o).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(o=new h.default(o).withStereoAudio().sdp)),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(o=new h.default(o).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.prioritizedSendVideoCodecCapabilities=new h.default(o).prioritizedSendVideoCodecCapabilities(),this.context.currentVideoSendCodec=this.context.prioritizedSendVideoCodecCapabilities.length>0?this.context.prioritizedSendVideoCodecCapabilities[0]:void 0;const c=this.context.activeVideoInput;if(c!==void 0){const S=this.context.audioVideoController.configuration.credentials.attendeeId,d=new m.default(S).hasModality(m.default.MODALITY_CONTENT),y=c.getVideoTracks()[0];d&&(((t=this.context.currentVideoSendCodec)===null||t===void 0?void 0:t.codecName)===a.default.av1Main().codecName?(y.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${S}`)):this.context.audioVideoController.configuration.enableSVC&&(y.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${S}`)))}this.logger.info(`processed remote description is >>>${o}<<<`);const p={type:"answer",sdp:o,toJSON:null};try{yield this.createICEConnectionCompletedPromise(p)}catch(S){throw S}})}createICEConnectionCompletedPromise(t){return new Promise((i,o)=>u(this,void 0,void 0,function*(){const c=s(()=>{(this.context.peer.iceConnectionState==="connected"||this.context.peer.iceConnectionState==="completed")&&(this.context.peer.removeEventListener("iceconnectionstatechange",c),i())},"checkConnectionCompleted");this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",c),o(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",c);try{yield this.context.peer.setRemoteDescription(t),this.logger.info("set remote description, waiting for ICE connection"),c()}catch(p){o(p)}}))}constructor(t){super(t.logger),this.context=t,this.taskName="SetRemoteDescriptionTask"}},"SetRemoteDescriptionTask");l.default=n},490525:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(S,d,y,E){function I(A){return A instanceof y?A:new y(function(L){L(A)})}return s(I,"adopt"),new(y||(y=Promise))(function(A,L){function M(N){try{w(E.next(N))}catch(T){L(T)}}s(M,"fulfilled");function k(N){try{w(E.throw(N))}catch(T){L(T)}}s(k,"rejected");function w(N){N.done?A(N.value):I(N.value).then(M,k)}s(w,"step"),w((E=E.apply(S,d||[])).next())})},g=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(91572)),h=g(f(407833)),a=g(f(182394)),r=g(f(864652)),n=f(493149),e=g(f(497324)),t=g(f(790344)),i=f(459746),o=f(774377),c=g(f(337063));let p=s(class extends c.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return u(this,void 0,void 0,function*(){let d="";if(this.context.peer&&this.context.peer.localDescription&&(d=new a.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let w=0,N=0;this.context.videoCaptureAndEncodeParameter&&(w=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),N=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const T={rid:"hi",maxBitrate:N*1e3,maxFramerate:w,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([T])}this.context.videoStreamIndex.subscribeFrameSent();const y=this.fixUpSubscriptionOrder(d,this.context.videoSubscriptions),E=this.context.videoDuplexMode===i.SdkStreamServiceType.TX||this.context.videoDuplexMode===i.SdkStreamServiceType.DUPLEX;let I,A=d;if((this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension===void 0||!this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension())&&(A=new a.default(A).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const w=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";I=this.textCompressor.compress(A,w),this.context.logger.info(`Compressed the SDP message from ${A.length} to ${I.length} bytes.`),d=""}this.context.previousSdpOffer=new a.default(d);const L=new t.default(this.context.meetingSessionConfiguration.credentials.attendeeId,d,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,y,E,this.context.videoStreamIndex.localStreamDescriptions(),!0,I);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!n.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())&&this.context.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&(L.videoSubscriptionConfiguration=o.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,y.map(w=>w===0?0:this.context.videoStreamIndex.groupIdForStreamId(w)),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(L)}`),this.context.signalingClient.subscribe(L);const M=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(M)}`);let k="";M.compressedSdpAnswer&&M.compressedSdpAnswer.length?(k=this.textCompressor.decompress(M.compressedSdpAnswer,this.context.previousSdpAnswerAsString),k.length===0&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${M.compressedSdpAnswer.length} to ${k.length} bytes.`),this.context.sdpAnswer=k):this.context.sdpAnswer=M.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(M)})}fixUpSubscriptionOrder(d,y){if(this.context.transceiverController.getMidForStreamId===void 0)return y;const E=new Map;for(const L of y){const M=this.context.transceiverController.getMidForStreamId(L);if(M===void 0){L!==0&&this.logger.warn(`Could not find MID for stream ID: ${L}`);continue}E.set(M,L)}const I=new a.default(d).mediaSections(),A=[];for(const L of I)if(L.mediaType==="video")if(L.direction==="recvonly"){const M=E.get(L.mid);if(M===void 0){this.logger.warn(`Could not find stream ID for MID: ${L.mid}`);continue}A.push(M)}else A.push(0);return this.logger.info(`Fixed up ${JSON.stringify(y)} to ${JSON.stringify(A)} (may be same))}`),A}receiveSubscribeAck(){return new Promise((d,y)=>{const E=this.context;let I=s(class{cancel(){this.signalingClient.removeObserver(this),y(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(M){if(M.isConnectionTerminated()){const w=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${M.closeCode} and reason: ${M.closeReason}`;E.logger.warn(w);let N=h.default.TaskFailed;M.closeCode>=4500&&M.closeCode<4600&&(N=h.default.SignalingInternalServerError),E.audioVideoController.handleMeetingSessionStatus(new m.default(N),new Error(w));return}if(M.type!==e.default.ReceivedSignalFrame||M.message.type!==i.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const k=M.message.suback;d(k)}constructor(M){this.signalingClient=M}},"Interceptor");const A=new I(this.context.signalingClient);this.context.signalingClient.registerObserver(A),this.taskCanceler=A})}constructor(d){super(d.logger),this.context=d,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new r.default(d.logger)}},"SubscribeAndReceiveSubscribeAckTask");l.default=p},438416:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var f;(function(u){u.IDLE="IDLE",u.RUNNING="RUNNING",u.CANCELED="CANCELED",u.FINISHED="FINISHED"})(f||(f={})),l.default=f},33001:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(747675)),h=g(f(337063));let a=s(class extends h.default{cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return u(this,void 0,void 0,function*(){const n=new m.default(this.timeoutMs);n.start(()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()});try{yield this.taskToRunBeforeTimeout.run()}finally{n.stop()}this.logger.info(`timeout task ${this.name()} completed`)})}constructor(n,e,t){super(n),this.taskToRunBeforeTimeout=e,this.timeoutMs=t,this.taskName=`Timeout${this.timeoutMs}ms`,e.setParent(this)}},"TimeoutTask");l.default=a},753973:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(407833)),h=g(f(337063));let a=s(class extends h.default{cancel(){if(this.cancelPromise){const n=new Error(`canceling ${this.name()} due to the meeting status code: ${m.default.NoAttendeePresent}`);this.cancelPromise(n),delete this.cancelPromise}}run(){return u(this,void 0,void 0,function*(){const n=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise((e,t)=>{const i=s((o,c,p,S,d)=>{n===o&&c&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),e(),delete this.cancelPromise)},"handler");this.cancelPromise=o=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i),t(o)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(i)})})}constructor(n){super(n.logger),this.context=n,this.taskName="WaitForAttendeePresenceTask"}},"WaitForAttendeePresenceTask");l.default=a},1727:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(t,i,o,c){function p(S){return S instanceof o?S:new o(function(d){d(S)})}return s(p,"adopt"),new(o||(o=Promise))(function(S,d){function y(A){try{I(c.next(A))}catch(L){d(L)}}s(y,"fulfilled");function E(A){try{I(c.throw(A))}catch(L){d(L)}}s(E,"rejected");function I(A){A.done?S(A.value):p(A.value).then(y,E)}s(I,"step"),I((c=c.apply(t,i||[])).next())})},g=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(754790)),h=g(f(410779)),a=g(f(317510)),r=g(f(417238)),n=g(f(359454));let e=s(class{setEncodingParameters(i){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!i||i.size===0)return;const c=Array.from(i.values()),p=o.getParameters();if(!p.encodings||p.encodings.length===0)p.encodings=c;else for(const S of p.encodings)for(const d of c){if((S.rid||d.rid)&&S.rid!==d.rid)continue;let y;for(y in d)y==="rid"||y==="codecPayloadType"||d.hasOwnProperty(y)&&(S[y]=d[y])}yield o.setParameters(p)})}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(i){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const o=this._localCameraTransceiver.sender;if(!o||i<=0)return;const c=o.getParameters();c.encodings||(c.encodings=[{}]);for(const p of c.encodings)p.maxBitrate=i*1e3;yield o.setParameters(c)})}setPeer(i){this.peer=i}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&typeof this.peer.getTransceivers<"u"}hasVideoInput(){return!(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")}trackIsVideoInput(i){return this._localCameraTransceiver?i===this._localCameraTransceiver.sender.track||i===this._localCameraTransceiver.receiver.track:!1}setupLocalTransceivers(){var i,o;this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((o=(i=this.meetingSessionContext)===null||i===void 0?void 0:i.audioProfile)===null||o===void 0)&&o.hasRedundancyEnabled()&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(i){return u(this,void 0,void 0,function*(){return!this._localAudioTransceiver||this._localAudioTransceiver.direction!=="sendrecv"?(this.logger.info("audio transceiver direction is not set up or not activated"),!1):(yield this._localAudioTransceiver.sender.replaceTrack(i),!0)})}setAudioInput(i){return u(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localAudioTransceiver,i)})}setVideoInput(i){return u(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localCameraTransceiver,i)})}updateVideoTransceivers(i,o){if(!this.useTransceivers())return o.array();const c=this.peer.getTransceivers();return this.videoSubscriptions=[0],o=o.clone(),this.updateTransceivers(c,i,o),this.logger.debug(()=>this.debugDumpTransceivers()),this.videoSubscriptions}updateTransceivers(i,o,c){const p=c.array();i.length!==0&&!i[0].stop?(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(i,o,p)):i.length!==0&&this.updateTransceiverWithStop(i,o,p);for(const S of p){const d=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(S,d),this.groupIdToTransceiver.set(o.groupIdForStreamId(S),d),this.videoSubscriptions.push(S),this.logger.info(`adding transceiver mid: ${d.mid} subscription: ${S} direction: recvonly`)}}updateTransceiverWithStop(i,o,c){let p=1;this.videoSubscriptions=[0];for(const S of i){if(S===this._localCameraTransceiver||!this.transceiverIsVideo(S)||!S.mid)continue;let d=!1;const y=o.streamIdForTrack("v_"+S.mid);if(S.direction!=="inactive"&&y!==void 0){for(const[E,I]of c.entries())if(o.StreamIdsInSameGroup(y,I)){S.direction="recvonly",this.videoSubscriptions[p]=I,d=!0,this.streamIdToTransceiver.delete(y),this.streamIdToTransceiver.set(I,S),c.splice(E,1);break}}if(!d){this.videoSubscriptions[p]=0,this.logger.info(`Stopping MID: ${S.mid}, direction: ${S.direction}, current direction: ${S.currentDirection}`),S.stop();for(const[E,I]of this.streamIdToTransceiver.entries())S.mid===I.mid&&(this.streamIdToTransceiver.delete(E),this.groupIdToTransceiver.delete(o.groupIdForStreamId(E)))}p+=1}}updateTransceiverWithoutStop(i,o,c){let p=1;for(const S of i)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(this.videoSubscriptions[p]=0,S.direction!=="inactive"){const d=o.streamIdForTrack("v_"+S.mid);if(d!==void 0){for(const[y,E]of c.entries())if(o.StreamIdsInSameGroup(d,E)){S.direction="recvonly",this.videoSubscriptions[p]=E,this.streamIdToTransceiver.delete(d),this.streamIdToTransceiver.set(E,S),c.splice(y,1);break}}}p+=1}p=1;for(const S of i)if(!(S===this._localCameraTransceiver||!this.transceiverIsVideo(S))){if(S.direction==="inactive"&&c.length>0){S.direction="recvonly";const d=c.shift();this.videoSubscriptions[p]=d,this.streamIdToTransceiver.set(d,S),this.groupIdToTransceiver.set(o.groupIdForStreamId(d),S)}else if(this.videoSubscriptions[p]===0){S.direction="inactive";for(const[d,y]of this.streamIdToTransceiver.entries())S===y&&(this.streamIdToTransceiver.delete(d),this.groupIdToTransceiver.delete(o.groupIdForStreamId(d)))}p+=1}}getMidForStreamId(i){var o;return(o=this.streamIdToTransceiver.get(i))===null||o===void 0?void 0:o.mid}setStreamIdForMid(i,o){for(const[c,p]of this.streamIdToTransceiver.entries())if(p.mid===i){this.streamIdToTransceiver.delete(c),this.streamIdToTransceiver.set(o,p);return}}getMidForGroupId(i){var o;return(o=this.groupIdToTransceiver.get(i))===null||o===void 0?void 0:o.mid}transceiverIsVideo(i){return i.receiver&&i.receiver.track&&i.receiver.track.kind==="video"||i.sender&&i.sender.track&&i.sender.track.kind==="video"}debugDumpTransceivers(){let i="",o=0;for(const c of this.peer.getTransceivers())this.transceiverIsVideo(c)&&(i+=`transceiver index=${o} mid=${c.mid} subscription=${this.videoSubscriptions[o]} direction=${c.direction}
`,o+=1);return i}setTransceiverInput(i,o){return u(this,void 0,void 0,function*(){i&&(o?i.direction="sendrecv":i.direction="inactive",yield i.sender.replaceTrack(o))})}forEachRedMetricsObserver(i){for(const o of this.redMetricsObservers)n.default.nextTick(()=>{this.redMetricsObservers.has(o)&&o.recoveryMetricsDidReceive(i)})}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new m.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var i,o;const c=!!window.RTCRtpScriptTransform,p=!!RTCRtpSender.prototype.createEncodedStreams;if(c)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else if(p)this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream");else throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([r.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(S){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${S}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),S}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=S=>{if(S.data.type==="REDWorkerLog")this.logger.info(S.data.log);else if(S.data.type==="RedundantAudioEncoderStats"){const d=new h.default;d.currentTimestampMs=Date.now(),d.ssrc=S.data.ssrc,d.totalAudioPacketsLost=S.data.totalAudioPacketsLost,d.totalAudioPacketsExpected=S.data.totalAudioPacketsExpected,d.totalAudioPacketsRecoveredRed=S.data.totalAudioPacketsRecoveredRed,d.totalAudioPacketsRecoveredFec=S.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(d)}},c)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(p){const S=this._localAudioTransceiver.sender.createEncodedStreams(),d=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:S,receive:d},[S.readable,S.writable,d.readable,d.writable])}(i=this.meetingSessionContext)===null||i===void 0||i.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector)}addTransceiver(i,o){var c;const p=this.peer.addTransceiver(i,o);if(!(!((c=this.peer.getConfiguration())===null||c===void 0)&&c.encodedInsertableStreams)||!this.audioRedWorker)return p;const S=!!window.RTCRtpScriptTransform,d=!!RTCRtpSender.prototype.createEncodedStreams;if(S)p.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),p.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(d){const y=p.sender.createEncodedStreams(),E=p.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"PassthroughTransform",send:y,receive:E},[y.readable,y.writable,E.readable,E.writable])}return p}destroyAudioRedWorkerAndStates(){var i,o;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,(i=this.meetingSessionContext)===null||i===void 0||i.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver((o=this.meetingSessionContext)===null||o===void 0?void 0:o.statsCollector))}setAudioPayloadTypes(i){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:i.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:i.get("opus")}))}metricsDidReceive(i){const{currentTimestampMs:o}=i,c=i.getRTCStatsReport();let p=0,S=0,d=0;c.forEach(M=>{M.kind==="audio"&&(M.type==="outbound-rtp"?S=M.packetsSent:M.type==="remote-inbound-rtp"&&(p=M.timestamp,d=M.packetsLost))}),(this.audioMetricsHistory.length===0||p>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&S>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:p,totalPacketsSent:S,totalPacketsLost:d}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const y=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),E=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),I=Math.max(y,E),[A,L]=a.default.getNumRedundantEncodingsForPacketLoss(I);if(L){this.lastHighPacketLossEventTimestampMs=o,this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=o);return}else if(!this.audioRedEnabled){const M=o-this.lastAudioRedTurnOffTimestampMs,k=o-this.lastHighPacketLossEventTimestampMs;if(M>=this.audioRedPacketLossLongEvalPeriodMs&&k<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(o)}this.shouldUpdateAudioRedWorkerEncodings(o,A)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:A})}maybeResetHoldDownTimer(i){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=i)}lossPercent(i){if(this.audioMetricsHistory.length<2)return 0;const o=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,c=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,p=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let S=this.audioMetricsHistory.length-2;S>=0;S--)if(o-this.audioMetricsHistory[S].timestampMs>=i){const d=p-this.audioMetricsHistory[S].totalPacketsLost,y=c-this.audioMetricsHistory[S].totalPacketsSent,E=100*(d/y);return Math.max(0,Math.min(E,100))}return 0}shouldUpdateAudioRedWorkerEncodings(i,o){return this.currentNumRedundantEncodings===o?(this.maybeResetHoldDownTimer(i),!1):o<this.currentNumRedundantEncodings&&i-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs?!1:(this.currentNumRedundantEncodings=o,this.maybeResetHoldDownTimer(i),!0)}addRedundantAudioRecoveryMetricsObserver(i){this.redMetricsObservers.add(i)}removeRedundantAudioRecoveryMetricsObserver(i){this.redMetricsObservers.delete(i)}constructor(i,o,c){this.logger=i,this.browserBehavior=o,this.meetingSessionContext=c,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5*1e3,this.audioRedPacketLossLongEvalPeriodMs=15*1e3,this.audioRedHoldDownTimeMs=5*60*1e3,this.redRecoveryTimeMs=1*60*1e3}},"DefaultTransceiverController");l.default=e},897111:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(439527));let h=s(class Zl extends m.default{setEncodingParameters(r){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const n=this._localCameraTransceiver.sender,e=Array.from(r.values());if(e.length<=0)return;const t=n.getParameters();if(!t.encodings)t.encodings=e;else for(let i=0;i<t.encodings.length;i++)t.encodings[i].rid===m.default.LOW_LEVEL_NAME&&this.copyEncodingParams(r.get(m.default.LOW_LEVEL_NAME),t.encodings[i]),t.encodings[i].rid===m.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(r.get(m.default.HIGH_LEVEL_NAME),t.encodings[i]);yield n.setParameters(t),this.logVideoTransceiverParameters()})}constructor(r,n,e){super(r,n,e);let t=2;this.videoQualityControlParameterMap=new Map;for(let i=0;i<Zl.NAME_ARR_ASCENDING.length;i++){const o=Zl.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:Zl.BITRATE_ARR_ASCENDING[i]*1e3}),t=t/2}}},"SimulcastContentShareTransceiverController");l.default=h,h.NAME_ARR_ASCENDING=["low","hi"],h.BITRATE_ARR_ASCENDING=[300,1200]},439527:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(1727));let h=s(class cr extends m.default{setEncodingParameters(r){return u(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const n=this._localCameraTransceiver.sender,e=Array.from(r.values());if(e.length<=0)return;const t=n.getParameters();if(!t.encodings)t.encodings=e;else for(const i of t.encodings)i.rid===cr.LOW_LEVEL_NAME&&this.copyEncodingParams(r.get(cr.LOW_LEVEL_NAME),i),i.rid===cr.MID_LEVEL_NAME&&this.copyEncodingParams(r.get(cr.MID_LEVEL_NAME),i),i.rid===cr.HIGH_LEVEL_NAME&&this.copyEncodingParams(r.get(cr.HIGH_LEVEL_NAME),i);yield n.setParameters(t),this.logVideoTransceiverParameters()})}setVideoSendingBitrateKbps(r){return u(this,void 0,void 0,function*(){})}setupLocalTransceivers(){var r,n;if(this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((n=(r=this.meetingSessionContext)===null||r===void 0?void 0:r.audioProfile)===null||n===void 0)&&n.hasRedundancyEnabled()&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const n=this._localCameraTransceiver.sender.getParameters().encodings;let e=`simulcast: current encoding parameters 
`;for(const t of n)e+=`rid=${t.rid} maxBitrate=${t.maxBitrate} active=${t.active} scaleDownBy=${t.scaleResolutionDownBy} maxFrameRate = ${t.maxFramerate} 
`;this.logger.info(e)}copyEncodingParams(r,n){n.active=r.active,n.maxBitrate=r.maxBitrate,n.scaleResolutionDownBy=r.scaleResolutionDownBy,n.maxFramerate=r.maxFramerate}constructor(r,n,e){super(r,n,e),this.videoQualityControlParameterMap=new Map;let t=4;for(let i=0;i<cr.NAME_ARR_ASCENDING.length;i++){const o=cr.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(o,{rid:o,scaleResolutionDownBy:t,maxBitrate:cr.BITRATE_ARR_ASCENDING[i]*1e3}),t=t/2}}},"SimulcastTransceiverController");l.default=h,h.LOW_LEVEL_NAME="low",h.MID_LEVEL_NAME="mid",h.HIGH_LEVEL_NAME="hi",h.NAME_ARR_ASCENDING=["low","mid","hi"],h.BITRATE_ARR_ASCENDING=[200,400,1100]},45519:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(1727));let m=s(class extends g.default{setupLocalTransceivers(){this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}constructor(a,r,n){super(a,r,n)}},"VideoOnlyTransceiverController");l.default=m},624233:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const u=f(686222);l.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";let g=s(class{subscribeToTranscriptEvent(h){this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC,a=>{for(const r of u.TranscriptEventConverter.from(a))for(const n of this.transcriptEventCallbacks)n(r)}),this.transcriptEventCallbacks.add(h)}unsubscribeFromTranscriptEvent(h){this.transcriptEventCallbacks.delete(h),this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}constructor(h){this.realtimeController=h,this.transcriptEventCallbacks=new Set}},"DefaultTranscriptionController");l.default=g},153084:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"Transcript");l.default=f},332221:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"TranscriptAlternative");l.default=f},100727:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"TranscriptEntity");l.default=f},686222:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.TranscriptEventConverter=void 0;const g=f(459746),m=u(f(153084)),h=u(f(201182)),a=u(f(330870)),r=u(f(432743)),n={[g.SdkTranscriptionStatus.Type.STARTED]:a.default.STARTED,[g.SdkTranscriptionStatus.Type.INTERRUPTED]:a.default.INTERRUPTED,[g.SdkTranscriptionStatus.Type.RESUMED]:a.default.RESUMED,[g.SdkTranscriptionStatus.Type.STOPPED]:a.default.STOPPED,[g.SdkTranscriptionStatus.Type.FAILED]:a.default.FAILED};let e=s(class{static from(i){let o;try{o=g.SdkTranscriptFrame.decode(i.data)}catch(p){throw new Error("Cannot decode transcript data message: "+p)}const c=[];for(const p of o.events)if(p.status){const S=n[p.status.type];if(!S)continue;const d=new h.default;d.type=S,d.eventTimeMs=p.status.eventTime,d.transcriptionRegion=p.status.transcriptionRegion,d.transcriptionConfiguration=p.status.transcriptionConfiguration,p.status.message&&(d.message=p.status.message),c.push(d)}else if(p.transcript){const S=new m.default;S.results=[];for(const d of p.transcript.results){const y={channelId:d.channelId,isPartial:d.isPartial,resultId:d.resultId,startTimeMs:d.startTime,endTimeMs:d.endTime,alternatives:[]};if(d.languageCode&&(y.languageCode=d.languageCode),d.languageIdentification&&d.languageIdentification.length>0){y.languageIdentification=[];for(const E of d.languageIdentification){const I={languageCode:E.languageCode,score:E.score};y.languageIdentification.push(I)}}for(const E of d.alternatives){const I={items:[],transcript:E.transcript};for(const A of E.items){const L={content:A.content,attendee:{attendeeId:A.speakerAttendeeId,externalUserId:A.speakerExternalUserId},startTimeMs:A.startTime,endTimeMs:A.endTime,type:null};switch(A.vocabularyFilterMatch&&(L.vocabularyFilterMatch=A.vocabularyFilterMatch),A.hasOwnProperty("stable")&&(L.stable=A.stable),A.hasOwnProperty("confidence")&&(L.confidence=A.confidence),A.type){case g.SdkTranscriptItem.Type.PRONUNCIATION:L.type=r.default.PRONUNCIATION;break;case g.SdkTranscriptItem.Type.PUNCTUATION:L.type=r.default.PUNCTUATION;break}I.items.push(L)}for(const A of E.entities){I.entities||(I.entities=[]);const L={category:A.category,confidence:A.confidence,content:A.content,startTimeMs:A.startTime,endTimeMs:A.endTime};A.type&&(L.type=A.type),I.entities.push(L)}y.alternatives.push(I)}S.results.push(y)}c.push(S)}return c}},"TranscriptEventConverter");l.TranscriptEventConverter=e},703535:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"TranscriptItem");l.default=f},432743:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var f;(function(u){u.PRONUNCIATION="pronunciation",u.PUNCTUATION="punctuation"})(f||(f={})),l.default=f},745694:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"TranscriptLanguageWithScore");l.default=f},424673:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"TranscriptResult");l.default=f},201182:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"TranscriptionStatus");l.default=f},330870:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var f;(function(u){u.STARTED="started",u.INTERRUPTED="interrupted",u.RESUMED="resumed",u.STOPPED="stopped",u.FAILED="failed"})(f||(f={})),l.default=f},916889:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=f(877232),m=u(f(244504));let h=s(class Po{getParserResult(){var r,n;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:((r=this.parserResult)===null||r===void 0?void 0:r.os.name)||Po.UNAVAILABLE,osVersion:((n=this.parserResult)===null||n===void 0?void 0:n.os.version)||Po.UNAVAILABLE,sdkVersion:m.default.sdkVersion,sdkName:m.default.sdkName}}constructor(r){var n,e,t,i,o,c,p;try{this.parserResult=navigator&&navigator.userAgent?new g.UAParser(navigator.userAgent).getResult():void 0}catch(S){r.error(S.message)}this.browserMajorVersion=((t=(e=(n=this.parserResult)===null||n===void 0?void 0:n.browser)===null||e===void 0?void 0:e.version)===null||t===void 0?void 0:t.split(".")[0])||Po.UNAVAILABLE,this.browserName=((i=this.parserResult)===null||i===void 0?void 0:i.browser.name)||Po.UNAVAILABLE,this.browserVersion=((o=this.parserResult)===null||o===void 0?void 0:o.browser.version)||Po.UNAVAILABLE,this.deviceName=[((c=this.parserResult)===null||c===void 0?void 0:c.device.vendor)||"",((p=this.parserResult)===null||p===void 0?void 0:p.device.model)||""].join(" ").trim()||Po.UNAVAILABLE}},"DefaultUserAgentParser");l.default=h,h.UNAVAILABLE="Unavailable"},518623:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{add(g){return new Promise((m,h)=>{this.queue=this.queue.then(g).then(m).catch(h)})}constructor(){this.queue=Promise.resolve()}},"PromiseQueue");l.default=f},153822:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.None=l.Some=l.Maybe=void 0;let f=s(class{static of(h){return h==null?g.of():u.of(h)}},"Maybe");l.Maybe=f;let u=s(class ES{map(h){return f.of(h(this.value))}flatMap(h){return h(this.value)}get(){return this.value}getOrElse(h){return this.value}defaulting(h){return f.of(this.getOrElse(h))}static of(h){if(h==null)throw new Error("value is ${value}");return new ES(h)}constructor(h){this.value=h,this.isSome=!0,this.isNone=!1}},"Some");l.Some=u;let g=s(class ql{get(){throw new Error("value is null")}getOrElse(h){return h}map(h){return new ql}flatMap(h){return new ql}defaulting(h){return f.of(this.getOrElse(h))}static of(){return new ql}constructor(){this.isSome=!1,this.isNone=!0}},"None");l.None=g},817426:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.getRandomValues=l.getFormattedOffset=l.getDefaultAssetSpec=l.toLowerCasePropertyNames=l.isIFramed=l.wait=void 0;const g=u(f(244504));function m(t){return new Promise(i=>setTimeout(i,t))}s(m,"wait"),l.wait=m;function h(){var t;try{return((t=window.frameElement)===null||t===void 0?void 0:t.nodeName)==="IFRAME"||parent!==top}catch{return!0}}s(h,"isIFramed"),l.isIFramed=h;function a(t){return t===null?null:typeof t!="object"?t:Array.isArray(t)?t.map(a):Object.keys(t).reduce((i,o)=>{const c=t[o],p=typeof c=="object"?a(c):c;return i[o.toLowerCase()]=p,i},{})}s(a,"toLowerCasePropertyNames"),l.toLowerCasePropertyNames=a;function r(){const t=g.default.sdkVersionSemVer;return{assetGroup:`sdk-${t.major}.${t.minor}`}}s(r,"getDefaultAssetSpec"),l.getDefaultAssetSpec=r;function n(t){const i=Math.abs(t),o=t<=0?"+":"-",c=Math.floor(i/60).toString().padStart(2,"0"),p=Math.floor(i%60).toString().padStart(2,"0");return`${o}${c}:${p}`}s(n,"getFormattedOffset"),l.getFormattedOffset=n;function e(t){try{window.crypto.getRandomValues(t)}catch{new DataView(t.buffer).setUint32(0,Math.trunc(Math.random()*Math.pow(2,32)),!0)}}s(e,"getRandomValues"),l.getRandomValues=e},244504:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(48839)),m=u(f(878294));let h=s(class Za{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return m.default.semverString}static get sdkVersionSemVer(){var r,n,e,t;const i=m.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:(r=i==null?void 0:i.groups)===null||r===void 0?void 0:r.major,minor:(n=i==null?void 0:i.groups)===null||n===void 0?void 0:n.minor,patch:(e=i==null?void 0:i.groups)===null||e===void 0?void 0:e.patch,preRelease:(t=i==null?void 0:i.groups)===null||t===void 0?void 0:t.preRelease}}static get buildSHA(){return m.default.hash.substr(1)}static get sdkUserAgentLowResolution(){const r=new g.default;return`${r.name()}-${r.majorVersion()}`}static urlWithVersion(r){const n=new URL(r);return n.searchParams.append(Za.X_AMZN_VERSION,Za.sdkVersion),n.searchParams.append(Za.X_AMZN_USER_AGENT,Za.sdkUserAgentLowResolution),n.toString()}},"Versioning");l.default=h,h.X_AMZN_VERSION="X-Amzn-Version",h.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},878294:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default={hash:"9158963",raw:"v3.21.1",semverString:"3.21.1"}},769839:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class CS{equal(g){let m=g.captureWidth()===this.cameraWidth&&g.captureHeight()===this.cameraHeight&&g.captureFrameRate()===this.cameraFrameRate&&g.encodeBitrates().length===this.encodeBitrates().length&&g.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&g.encodeWidths().length===this.encodeWidths().length&&g.encodeHeights().length===this.encodeHeights().length&&g.isSVCEncoding()===this.isSVC;if(m){for(let h=0;h<g.encodeWidths().length;h++)if(g.encodeWidths()[h]!==this.encodeWidths()[h]||g.encodeHeights()[h]!==this.encodeHeights()[h]||g.encodeBitrates()[h]!==this.encodeBitrates()[h]||g.encodeScaleResolutionDownBy()[h]!==this.encodeScaleResolutionDownBy()[h])return m=!1,m}return m}clone(){return new CS(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}constructor(g,m,h,a,r,n=1,e=!1){this.cameraWidth=g,this.cameraHeight=m,this.cameraFrameRate=h,this.maxEncodeBitrateKbps=a,this.isSimulcast=r,this.scaleResolutionDownBy=n,this.isSVC=e}},"DefaultVideoCaptureAndEncodeParameter");l.default=f},961381:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(540079));let m=s(class _S{reset(){this.optimalReceiveSet=new g.default,this.subscribedReceiveSet=new g.default,this.videoSources=void 0}updateIndex(a){this.videoIndex=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(a)}updateMetrics(a){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(a){this.videoSources=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(a){const r=new g.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return r;const n=a.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),e=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),t=this.videoIndex.remoteStreamDescriptions(),i=new Map;for(const c of t)n.contain(c.streamId)&&i.set(c.attendeeId,c);let o=0;for(const c of e){const p=c.attendee.attendeeId;if(i.has(p)){const S=i.get(p);if(o+S.maxBitrateKbps<=_S.maxReceiveBitrateKbps)r.add(S.streamId),o+=S.maxBitrateKbps;else{console.warn("total bitrate "+(o+S.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}}}return r}constructor(a){this.selfAttendeeId=a,this.reset()}},"AllHighestVideoBandwidthPolicy");l.default=m,m.maxReceiveBitrateKbps=15e3},684947:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(540079));let m=s(class{reset(){}updateIndex(a){}updateMetrics(a){}wantsResubscribe(){return!1}chooseSubscriptions(){return new g.default}},"NoVideoDownlinkBandwidthPolicy");l.default=m},141572:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TargetDisplaySize=void 0;var f;(function(u){u[u.Low=0]="Low",u[u.Medium=1]="Medium",u[u.High=2]="High",u[u.Maximum=3]="Maximum"})(f=l.TargetDisplaySize||(l.TargetDisplaySize={})),l.default=f},806321:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(116631)),m=u(f(531482)),h=f(774377),a=u(f(63754));let r=s(class extends a.default{reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(e){super.updateIndex(e);const t=h.VideoPreferences.prepare();let i=!1;const o=e.remoteStreamDescriptions();for(const c of o)t.some(p=>p.attendeeId===c.attendeeId)||(c.attendeeId.endsWith(g.default.Modality)?(t.add(new m.default(c.attendeeId,1)),i=!0):t.add(new m.default(c.attendeeId,2)));i?(this.videoPreferences=t.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(e){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}constructor(e){super(e),this.logger=e,super.shouldPauseTiles=!1,this.videoPreferences=void 0}},"VideoAdaptiveProbePolicy");l.default=r},531482:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(141572)),m=u(f(821234));let h=s(class ha{partialCompare(r){return this.priority-r.priority}equals(r){return this.attendeeId===r.attendeeId&&this.targetSize===r.targetSize&&this.priority===r.priority&&this.degradationPreference===r.degradationPreference}clone(){return new ha(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(r){switch(r){case g.default.Maximum:return ha.MAXIMUM_BITRATE_KBPS;case g.default.High:return ha.HIGH_BITRATE_KBPS;case g.default.Medium:return ha.MID_BITRATE_KBPS;case g.default.Low:return ha.LOW_BITRATE_KBPS}}constructor(r,n,e,t){this.attendeeId=r,this.priority=n,this.targetSize=e!==void 0?e:g.default.Maximum,this.degradationPreference=t!==void 0?t:m.default.Balanced}},"VideoPreference");l.default=h,h.LOW_BITRATE_KBPS=300,h.MID_BITRATE_KBPS=600,h.HIGH_BITRATE_KBPS=1500,h.MAXIMUM_BITRATE_KBPS=1e4},774377:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoPreferences=l.MutableVideoPreferences=l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const g=u(f(463258));function m(e,t,i){if(e.transceiverController.getMidForGroupId===void 0||e.videoStreamIndex.attendeeIdForGroupId===void 0||i===void 0)return[];const o=new Array,c=new Map,p=new Map;for(const S of t){const d=e.transceiverController.getMidForGroupId(S);if(d===void 0)continue;const y=e.videoStreamIndex.attendeeIdForGroupId(S);c.set(y,d),p.set(y,S)}for(const S of i){const d=new g.default,y=c.get(S.attendeeId);y!==void 0&&(d.mid=y,d.attendeeId=S.attendeeId,d.groupId=p.get(S.attendeeId),d.priority=Number.MAX_SAFE_INTEGER-S.priority,d.targetBitrateKbps=S.targetSizeToBitrateKbps(S.targetSize),d.qualityAdaptationPreference=S.degradationPreference,o.push(d))}return o}s(m,"convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration"),l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=m;let h=s(class Nu{static default(){return new Nu([])}[Symbol.iterator](){let t=0;const i=this.items;return{next(){return t<i.length?{done:!1,value:i[t++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(t){this.items.push(t)}replaceFirst(t,i){const o=this.items.findIndex(i);o===-1?this.items.push(t):this.has(t)?this.items.splice(o,1):this.items[o]=t}remove(t){this.items=this.items.filter(i=>!i.equals(t))}clear(){this.items=[]}isEmpty(){return this.items.length===0}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(const i of this.items)if(!t.items.some(o=>o.equals(i)))return!1;return!0}has(t){return this.items.some(i=>i.equals(t))}some(t){return this.items.some(t)}clone(){return new Nu([...this.items])}sort(){this.items.sort((t,i)=>t.partialCompare(i))}modify(){return new a(this)}constructor(t=[]){this.items=t}},"ObjectSet"),a=s(class{cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(t){this.items.has(t)||(this.cow(),this.items.add(t))}replaceFirst(t,i){this.items.has(t)&&!this.items.some(i)||(this.cow(),this.items.replaceFirst(t,i))}remove(t){this.items.has(t)&&(this.cow(),this.items.remove(t))}some(t){return this.items.some(t)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}constructor(t=new h){this.items=t,this.copied=!1}},"SetBuilder"),r=s(class{add(t){this.builder.add(t)}replaceFirst(t,i){this.builder.replaceFirst(t,i)}remove(t){this.builder.remove(t)}some(t){return this.builder.some(t)}clear(){this.builder.clear()}build(){return new n(this.builder.build())}constructor(t){this.builder=t}},"MutableVideoPreferences");l.MutableVideoPreferences=r;let n=s(class xu{static prepare(){return new r(new a)}static default(){return new xu(h.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var t;return(t=this.items.first())===null||t===void 0?void 0:t.priority}sorted(){return this.items[Symbol.iterator]()}equals(t){return t===this||this.items.equals(t.items)}modify(){return new r(this.items.modify())}some(t){return this.items.some(t)}isEmpty(){return this.items.isEmpty()}clone(){const t=xu.prepare();for(const i of this.items)t.add(i.clone());return t.build()}constructor(t){this.items=t}},"VideoPreferences");l.VideoPreferences=n,l.default=n},63754:function(U,l,f){"use strict";var u=this&&this.__createBinding||(Object.create?function(M,k,w,N){N===void 0&&(N=w),Object.defineProperty(M,N,{enumerable:!0,get:function(){return k[w]}})}:function(M,k,w,N){N===void 0&&(N=w),M[N]=k[w]}),g=this&&this.__setModuleDefault||(Object.create?function(M,k){Object.defineProperty(M,"default",{enumerable:!0,value:k})}:function(M,k){M.default=k}),m=this&&this.__importStar||function(M){if(M&&M.__esModule)return M;var k={};if(M!=null)for(var w in M)w!=="default"&&Object.prototype.hasOwnProperty.call(M,w)&&u(k,M,w);return g(k,M),k},h=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(l,"__esModule",{value:!0});const a=h(f(109520)),r=h(f(19933)),n=h(f(150224)),e=h(f(116631)),t=f(343500),i=m(f(493149)),o=h(f(471066)),c=h(f(540079)),p=h(f(961381)),S=h(f(141572)),d=h(f(531482)),y=f(774377),E=h(f(205144)),I=h(f(821234));let A=s(class{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}},"LinkMediaStats"),L=s(class di{reset(){this.allHighestPolicy=new p.default(""),this.optimalReceiveSet=new c.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new c.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new c.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=di.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=di.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new A,this.prevDownlinkStats=new A,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(k){this.tileController=k,this.logger.info("tileController bound")}setWantsResubscribeObserver(k){this.wantsResubscribeObserver=k}chooseRemoteVideoSources(k){var w;if(!(!((w=this.videoPreferences)===null||w===void 0)&&w.equals(k))){if(this.videoPreferences=k==null?void 0:k.clone(),!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!0,this.wantsResubscribeObserver!==void 0&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)){const N=new Array;for(const T of this.videoPreferences){const O=new o.default;O.attendee=new a.default,O.attendee.attendeeId=T.attendeeId,N.push(O)}this.allHighestPolicy.chooseRemoteVideoSources(N);return}this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(k)}`)}}updateIndex(k){this.videoIndex=k,this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(k),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const k=new Set;for(const O of this.videoIndex.remoteStreamDescriptions())k.add(O.attendeeId);const w=y.VideoPreferences.prepare(),N=k.size;let T=S.default.Maximum;N>8?T=S.default.Low:N>4&&(T=S.default.Medium);for(const O of k)w.add(new d.default(O,1,T));this.defaultVideoPreferences=w.build()}updateMetrics(k){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new A;const w=k.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=w.availableIncomingBitrate/1e3;for(const N in k.streamMetricReports){const T=Number.parseInt(N,10),O=k.streamMetricReports[T];O.direction===r.default.DOWNSTREAM&&O.mediaType===n.default.VIDEO&&(O.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=k.countPerSecond("nackCount",T)),O.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=k.countPerSecond("packetsLost",T)),O.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=k.bitsPerSecond("bytesReceived",T)/1e3))}}wantsResubscribe(){let k=!1;return!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(k||(k=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)?k||this.allHighestPolicy.wantsResubscribe():(this.calculateOptimalReceiveSet(),k||(k=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),k)}chooseSubscriptions(){return!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption===i.default.BandwidthProbingAndRemoteVideoQualityAdaption)?this.allHighestPolicy.chooseSubscriptions():(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone())}addObserver(k){this.observerQueue.add(k)}removeObserver(k){this.observerQueue.delete(k)}forEachObserver(k){for(const w of this.observerQueue)k(w)}setVideoPriorityBasedPolicyConfigs(k){this.videoPriorityBasedPolicyConfig=k}calculateOptimalReceiveStreams(){var k;const w=[],N=this.videoIndex.remoteStreamDescriptions();if(N.length===0||!((k=this.videoPreferences)===null||k===void 0)&&k.isEmpty()){this.optimalReceiveStreams=[];return}const T=this.rateProbeState;this.cleanBwPausedTiles(N),this.handleAppPausedStreams(w,N);const O=new Map;for(const Ue of this.getCurrentVideoPreferences())O.set(Ue.attendeeId,Ue);const D=N.filter(Ue=>O.has(Ue.attendeeId)),G=!this.streamsWithPreferenceDidChange(D),K=!this.startupPeriod&&G;if(K&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;D.sort((Ue,ht)=>Ue.maxBitrateKbps===ht.maxBitrateKbps?Ue.streamId-ht.streamId:Ue.maxBitrateKbps-ht.maxBitrateKbps);for(const Ue of D)(Ue.avgBitrateKbps===0||Ue.avgBitrateKbps>Ue.maxBitrateKbps)&&(Ue.attendeeId.endsWith(e.default.Modality)&&Ue.maxBitrateKbps<100?Ue.maxBitrateKbps=Ue.avgBitrateKbps:Ue.avgBitrateKbps=Ue.maxBitrateKbps);const H=new Set;for(const Ue of this.getCurrentVideoPreferences()){const ht=D.filter(We=>We.attendeeId===Ue.attendeeId);if(ht.length<3)continue;let Tt=15,st=320*480;ht.forEach(We=>{Tt=Math.max(Tt,We.maxFrameRate),st=Math.max(st,We.totalPixels())}),ht.sort((We,_t)=>{if(Ue.degradationPreference===I.default.MaintainResolution)return Math.abs(We.maxFrameRate-_t.maxFrameRate)<2?We.totalPixels()-_t.totalPixels():We.maxFrameRate-_t.maxFrameRate;if(Ue.degradationPreference===I.default.MaintainFramerate)return We.totalPixels()===_t.totalPixels()?We.maxFrameRate-_t.maxFrameRate:We.totalPixels()-_t.totalPixels();{const $t=s(rt=>rt.avgBitrateKbps*Math.pow(2,5*rt.maxFrameRate/Tt*Math.pow(4,rt.totalPixels()/st)),"weighByFramerate");return $t(We)-$t(_t)}});let ut;for(const We of ht){if(ut!==void 0&&(We.maxFrameRate<ut.maxFrameRate&&Math.abs(ut.maxFrameRate-We.maxFrameRate)>2||We.totalPixels()<ut.totalPixels())){H.add(We.streamId);continue}ut=We}}const q=D.filter(Ue=>!H.has(Ue.streamId));this.logger.info(`Filtered to ${JSON.stringify(q)}`);const me={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};me.targetDownlinkBitrate=this.determineTargetRate();const we=this.subscribedReceiveSet.size(),ue=this.downlinkStats.bandwidthEstimateKbps,Pe=!this.videoPriorityBasedPolicyConfig.allowSubscribe(we,ue);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=di.MIN_TIME_BETWEEN_SUBSCRIBE_MS,K&&Pe))return;const Ye=this.priorityPolicy(me,q,w),be=!i.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption);let He=0;if(!be&&!this.startupPeriod&&G?this.rateProbeState==="Probing"?He=this.handleProbe(w,me.targetDownlinkBitrate):me.deltaToNextUpgrade!==0&&(He=this.maybeOverrideOrProbe(w,me,Ye)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.previousStreamsWithPreference=D,this.videoPreferencesUpdated=!1,He===1){this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),this.prevTargetRateKbps=me.targetDownlinkBitrate;return}if(He===2){const Ue=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(D,this.preProbeNonPausedReceiveStreams),this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+Ue);return}this.optimalNonPausedReceiveStreams=w.slice();const Ke=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(D,w),this.logger.getLogLevel()<=t.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==T||this.optimalReceiveStreams.length!==w.length||Ke!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(N,me.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=me.targetDownlinkBitrate,this.optimalReceiveStreams=w.slice()}calculateOptimalReceiveSet(){const k=new c.default;this.calculateOptimalReceiveStreams();for(const w of this.optimalReceiveStreams)k.add(w.streamId);if(!this.optimalReceiveSet.equal(k)){const w=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(k)} subscribedRate:${w}`)}this.optimalReceiveSet=k}determineTargetRate(){let k=0;const w=Date.now();return this.downlinkStats.bandwidthEstimateKbps!==0?(this.firstEstimateTimestamp===0&&(this.firstEstimateTimestamp=w),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>di.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||w-this.firstEstimateTimestamp>di.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?k=di.DEFAULT_BANDWIDTH_KBPS:this.rateProbeState==="Probing"&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<di.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),k=this.downlinkStats.usedBandwidthKbps+di.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):k=this.downlinkStats.bandwidthEstimateKbps):this.firstEstimateTimestamp===0?k=di.DEFAULT_BANDWIDTH_KBPS:k=this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-di.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*di.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&this.downlinkStats.packetsLost===0?(this.logger.debug(()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps),this.usingPrevTargetRate=!0,k=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,k>15e3&&this.logger.warn("bwe: "+k+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(k,15e3)}setProbeState(k){if(this.rateProbeState===k)return!1;const w=Date.now();switch(k){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(this.lastProbeTimestamp===0||w-this.lastProbeTimestamp>di.MIN_TIME_BETWEEN_PROBE_MS)this.probePendingStartTimestamp=w;else return!1;break;case"Probing":if(w-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs)this.lastProbeTimestamp=w,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(this.timeBeforeAllowProbeMs*2,di.MAX_HOLD_BEFORE_PROBE_MS);else return!1;break}return this.logger.info("bwe: setProbeState to "+k+" from "+this.rateProbeState),this.rateProbeState=k,!0}upgradeToStream(k,w){for(let N=0;N<k.length;N++)if(k[N].groupId===w.groupId){const T=w.avgBitrateKbps-k[N].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(k[N])+" to "+w),this.lastUpgradeRateKbps=T,k[N]=w,T}return k.push(w),this.lastUpgradeRateKbps=w.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(k,w){if(Date.now()-this.lastProbeTimestamp>di.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>di.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=Math.max(di.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs)*3,2;const N=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(k)||w>N?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=di.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(k,w,N){const T=this.chosenStreamsSameAsLast(k);let O=0;const D=w.targetDownlinkBitrate>di.LOW_BITRATE_THRESHOLD_KBPS?di.TARGET_RATE_CHANGE_TRIGGER_PERCENT:di.TARGET_RATE_CHANGE_TRIGGER_PERCENT*2,G=w.targetDownlinkBitrate*D/100;if(this.targetRateBaselineForDeltaCheckKbps=this.targetRateBaselineForDeltaCheckKbps!==void 0?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!T&&Math.abs(w.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<G?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),O=1):this.targetRateBaselineForDeltaCheckKbps=w.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,O;if(T||O===1)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(k,N),O=0);break}else this.setProbeState("Not Probing");return O}calculateSubscribeRate(k){let w=0;for(const N of k)!this.pausedStreamIds.contain(N.streamId)&&!this.pausedBwAttendeeIds.has(N.attendeeId)&&(w+=N.maxBitrateKbps);return w}handleAppPausedStreams(k,w){if(!this.tileController){this.logger.warn("tileController not found!");return}this.pausedStreamIds=new c.default;const N=this.tileController.getAllRemoteVideoTiles();for(const T of N){const O=T.state();if(O.paused&&!this.pausedBwAttendeeIds.has(O.boundAttendeeId)){let D=w.length;for(;D--;)w[D].attendeeId===O.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+O.boundAttendeeId+" streamId: "+w[D].streamId),this.pausedStreamIds.add(w[D].streamId),this.subscribedReceiveSet.contain(w[D].streamId)&&k.push(w[D]),w.splice(D,1))}}}processBwPausedStreams(k,w){if(!this.tileController){this.logger.warn("tileController not found!");return}const N=this.getCurrentVideoPreferences();if(N&&this.shouldPauseTiles){const T=this.tileController.getAllVideoTiles();for(const O of N){const D=this.getVideoTileForAttendeeId(O.attendeeId,T),G=(D==null?void 0:D.state().paused)||!1;if(w.some(K=>K.attendeeId===O.attendeeId))G&&this.pausedBwAttendeeIds.has(O.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${O.attendeeId} due to bandwidth`),this.forEachObserver(K=>{K.tileWillBeUnpausedByDownlinkPolicy(D.id())}),this.tileController.unpauseVideoTile(D.id()),this.pausedBwAttendeeIds.delete(O.attendeeId));else{const K=k.some(H=>H.attendeeId===O.attendeeId);if(D&&K){const H=this.optimalReceiveStreams.find(q=>q.attendeeId===O.attendeeId);H!==void 0&&(G||(this.logger.info(`bwe: pausing streamId ${H.streamId} attendee ${O.attendeeId} due to bandwidth`),this.forEachObserver(q=>{q.tileWillBePausedByDownlinkPolicy(D.id())}),this.tileController.pauseVideoTile(D.id())),w.push(H)),this.pausedBwAttendeeIds.add(O.attendeeId)}else if(K){const H=this.tileController.addVideoTile();H.bindVideoStream(O.attendeeId,!1,null,0,0,0,null),this.forEachObserver(q=>{q.tileWillBePausedByDownlinkPolicy(H.id())}),H.pause(),this.logger.info(`bwe: Created video tile ${H.id()} for bw paused attendee ${O.attendeeId}`),this.pausedBwAttendeeIds.add(O.attendeeId)}}}}}cleanBwPausedTiles(k){if(!this.tileController){this.logger.warn("tileController not found!");return}const w=this.tileController.getAllRemoteVideoTiles(),N=this.getCurrentVideoPreferences();for(const T of w){const O=T.state();O.boundVideoStream||(k.some(D=>D.attendeeId===O.boundAttendeeId)?N!==void 0&&!N.some(D=>D.attendeeId===O.boundAttendeeId)&&this.tileController.removeVideoTile(O.tileId):(this.tileController.removeVideoTile(O.tileId),this.logger.info(`bwe: Removed video tile ${O.tileId} for bw paused attendee ${O.boundAttendeeId}`)))}}priorityPolicy(k,w,N){let T;const O=this.getCurrentVideoPreferences(),D=O.highestPriority();let G,K=D;for(;K!==-1;){G=-1;for(const H of O)if(H.priority===K)for(const q of w)q.attendeeId===H.attendeeId&&(N.some(me=>me.groupId===q.groupId)||(k.chosenTotalBitrate+q.avgBitrateKbps<=k.targetDownlinkBitrate?(N.push(q),k.chosenTotalBitrate+=q.avgBitrateKbps):k.deltaToNextUpgrade===0&&(k.deltaToNextUpgrade=q.avgBitrateKbps,T=q)));else if(H.priority>K){G=H.priority;break}for(const H of O)if(H.priority===K){for(const q of w)if(q.attendeeId===H.attendeeId){const me=N.findIndex(we=>we.groupId===q.groupId&&we.maxBitrateKbps<=q.maxBitrateKbps&&we.avgBitrateKbps<q.avgBitrateKbps);if(me!==-1){const we=q.avgBitrateKbps-N[me].avgBitrateKbps;this.hasSimulcastStreams(w,q.attendeeId,q.groupId)&&this.canUpgrade(q.avgBitrateKbps,H.targetSize,H.targetSizeToBitrateKbps(H.targetSize),q.attendeeId.endsWith(e.default.Modality))?(this.logger.info(`bwe: attendee: ${q.attendeeId} group: ${q.groupId} has simulcast and can upgrade avgBitrate: ${q.avgBitrateKbps} target: ${H.targetSizeToBitrateKbps(H.targetSize)} targetTotalBitrate: ${k.targetDownlinkBitrate}`),k.chosenTotalBitrate+we<=k.targetDownlinkBitrate?(k.chosenTotalBitrate+=we,N[me]=q):k.deltaToNextUpgrade===0&&(k.deltaToNextUpgrade=we,T=q)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(H.priority>K)break;if(K===D&&k.deltaToNextUpgrade!==0)break;K=G}return T}getVideoTileForAttendeeId(k,w){for(const N of w)if(N.state().boundAttendeeId===k)return N;return null}canUpgrade(k,w,N,T){let O=!1;return(w===S.default.High||!T&&k<=N||T&&w===S.default.Medium&&k<=N)&&(O=!0),O?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${k} targetBitrateKbps: ${N}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${k} targetBitrateKbps: ${N}`),!1)}hasSimulcastStreams(k,w,N){let T=0;for(const O of k)O.attendeeId===w&&O.groupId===N&&T++;return this.logger.info(`bwe: attendeeId: ${w} groupId: ${N} hasSimulcastStreams: streamCount: ${T}`),T>1}streamsWithPreferenceDidChange(k){if(this.previousStreamsWithPreference===void 0||k.length!==this.previousStreamsWithPreference.length||this.videoPreferencesUpdated===!0)return!0;for(const w of k)if(this.previousStreamsWithPreference.find(T=>T.groupId===w.groupId&&T.streamId===w.streamId&&T.maxBitrateKbps===w.maxBitrateKbps)===void 0)return!0;return!1}chosenStreamsSameAsLast(k){if(this.optimalNonPausedReceiveStreams.length!==k.length)return!1;for(const w of this.optimalNonPausedReceiveStreams)if(!k.some(N=>N.streamId===w.streamId))return!1;return!0}policyStateLogStr(k,w){const N=this.calculateSubscribeRate(this.optimalReceiveStreams),T={targetBitrate:w,subscribedRate:N,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let O="remoteInfos: [";for(const G of k)O+=`{grpId:${G.groupId} strId:${G.streamId} maxBr:${G.maxBitrateKbps} avgBr:${G.avgBitrateKbps}}, `;O+="]";let D=`bwe: optimalReceiveSet ${JSON.stringify(T)}
bwe:   prev ${JSON.stringify(this.prevDownlinkStats)}
bwe:   now  ${JSON.stringify(this.downlinkStats)}
bwe:   ${O}
`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(D+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }
`),this.videoPreferences?D+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:D+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,D}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(k){this.serverSideNetworkAdaption=k,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[i.default.None,i.default.BandwidthProbing,i.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let k=this.getCurrentVideoPreferences();return k||(k=y.VideoPreferences.prepare().build()),k}wantsAllTemporalLayersInIndex(){return!0}constructor(k,w=E.default.Default){this.logger=k,this.videoPriorityBasedPolicyConfig=w,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.reset()}},"VideoPriorityBasedPolicy");l.default=L,L.DEFAULT_BANDWIDTH_KBPS=2800,L.STARTUP_PERIOD_MS=6e3,L.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,L.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,L.LOW_BITRATE_THRESHOLD_KBPS=300,L.MIN_TIME_BETWEEN_PROBE_MS=5e3,L.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,L.MAX_HOLD_BEFORE_PROBE_MS=3e4,L.MAX_ALLOWED_PROBE_TIME_MS=6e4,L.SPURIOUS_PACKET_LOST_THRESHOLD=2,L.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},205144:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(493149));let m=s(class qa{allowSubscribe(a,r){let n=0;const e=this.currentNetworkEvent;if(r>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=r,!0;if(r<this.referenceBitrate){if(this.currentNetworkEvent=1,n=this.getSubscribeDelay(this.currentNetworkEvent,a),e!==1)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>n)return this.referenceBitrate=r,!0;return!1}else return this.currentNetworkEvent=0,!1}getSubscribeDelay(a,r){let n=qa.MINIMUM_DELAY_MS;const e=qa.MAXIMUM_DELAY_MS-qa.MINIMUM_DELAY_MS,t=this.networkIssueResponseDelayFactor;switch(a){case 1:n+=e*t*(1+r/10),n=Math.min(qa.MAXIMUM_DELAY_MS,n);break}return n}constructor(a=0,r=0){this.networkIssueResponseDelayFactor=a,this.networkIssueRecoveryDelayFactor=r,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=g.default.Default,a<0?a=0:a>1&&(a=1),this.networkIssueResponseDelayFactor=a,r<0?r=0:r>1&&(r=1),this.networkIssueRecoveryDelayFactor=r}},"VideoPriorityBasedPolicyConfig");l.default=m,m.MINIMUM_DELAY_MS=2e3,m.MAXIMUM_DELAY_MS=8e3,m.Default=new m(0,0),m.UnstableNetworkPreset=new m(0,1),m.StableNetworkPreset=new m(1,0)},821234:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoQualityAdaptationPreference=void 0;var f;(function(u){u[u.Balanced=0]="Balanced",u[u.MaintainFramerate=1]="MaintainFramerate",u[u.MaintainResolution=2]="MaintainResolution"})(f=l.VideoQualityAdaptationPreference||(l.VideoQualityAdaptationPreference={})),l.default=f},60234:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{create(){const g={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{g.paused=!0},play:()=>(g.paused=!1,Promise.resolve())};return g}},"NoOpVideoElementFactory");l.default=f},274246:function(U,l){"use strict";var f=this&&this.__awaiter||function(g,m,h,a){function r(n){return n instanceof h?n:new h(function(e){e(n)})}return s(r,"adopt"),new(h||(h=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(p){e(p)}}s(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(p){e(p)}}s(i,"rejected");function o(c){c.done?n(c.value):r(c.value).then(t,i)}s(o,"step"),o((a=a.apply(g,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=s(class{destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return f(this,void 0,void 0,function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)})}asCanvasElement(){return this.canvas}constructor(m){this.canvas=m,this.destroyed=!1}},"CanvasVideoFrameBuffer");l.default=u},222109:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})},g=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(274246)),h=g(f(226830)),a=15;let r=s(class{destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?a:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver(e=>{e.processingDidStop&&e.processingDidStop()}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return u(this,void 0,void 0,function*(){return this.inputVideoStream})}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()?this.outputMediaStream:(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput(),this.outputMediaStream)}setInputMediaStream(e){return u(this,void 0,void 0,function*(){if(!e){this.stop();return}if(e.getVideoTracks().length===0){this.logger.error("No video tracks in input media stream, ignoring");return}this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const i=new m.default(this.canvasInput);this.sourceBuffers.push(i),this.videoInput.load();try{yield this.videoInput.play()}catch{this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()})}cloneInputAudioTracksToOutput(){if(!this.isOutputMediaStreamActive()||this.inputVideoStream===null){this.logger.info("Not cloning input audio tracks to output, do not have media streams ready");return}for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout(()=>{e(t)},0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}constructor(e,t,i=new h.default){this.logger=e,this.stages=t,this.fr=a,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=o=>u(this,void 0,void 0,function*(){if(!this.inputVideoStream)return;const c=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let p=[];p.push(this.sourceBuffers[0]);try{for(const L of this.processors)p=yield L.process(p)}catch{this.forEachObserver(M=>{M.processingDidFailToStart&&M.processingDidFailToStart()});return}this.destBuffers=p;let S;try{S=yield this.destBuffers[0].asCanvasImageSource()}catch{this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver(M=>{M.processingDidFailToStart&&M.processingDidFailToStart()}));return}const d=S.width,y=S.height;d!==0&&y!==0&&(this.canvasOutput.width!==d&&this.canvasOutput.height!==y&&(this.canvasOutput.width=d,this.canvasOutput.height=y),this.outputCtx.drawImage(S,0,0,d,y,0,0,d,y),this.hasStarted||(this.hasStarted=!0,this.forEachObserver(L=>{L.processingDidStart&&L.processingDidStart()})));const E=performance.now()-c,I=1e3*2/this.framerate-E,A=Math.max(0,1e3/this.framerate-E);I<=0&&this.forEachObserver(L=>{L.processingLatencyTooHigh&&L.processingLatencyTooHigh(E)}),yield this.timer.start(A,this.process.bind(this))}),this.timer=i}},"DefaultVideoFrameProcessorPipeline");l.default=r},226830:function(U,l){"use strict";var f=this&&this.__awaiter||function(g,m,h,a){function r(n){return n instanceof h?n:new h(function(e){e(n)})}return s(r,"adopt"),new(h||(h=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(p){e(p)}}s(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(p){e(p)}}s(i,"rejected");function o(c){c.done?n(c.value):r(c.value).then(t,i)}s(o,"step"),o((a=a.apply(g,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=s(class{createWorkerTimer(){try{const m=new Blob([`self.onmessage = async function(e){ 
            var timerID = null;
            const awaitTimeout = delay => new Promise( resolve => {
              timerID = setTimeout(resolve, delay);
            })
            await awaitTimeout(e.data);
            postMessage(timerID);
          }`],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(m))}catch{}}start(m,h){return f(this,void 0,void 0,function*(){this.callback=h,this.workerTimer?(this.workerTimer.onmessage=a=>{this.lastTimeout=a.data,this.callback()},this.workerTimer.postMessage(m)):this.lastTimeout=setTimeout(()=>{this.callback()},m)})}destroy(){return f(this,void 0,void 0,function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)})}constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}},"DefaultVideoFrameProcessorTimer");l.default=u},583920:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(48839)),h=g(f(222109));let a=s(class TS{get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(n){if(this.pipe.processors)for(const e of this.pipe.processors)typeof e.setEventController=="function"&&e.setEventController(n)}chooseNewInnerDevice(n){const e=new TS(this.logger,n,this.processors,this.browserBehavior);return e.pipe=this.pipe,e}getInnerDevice(){return this.device}intrinsicDevice(){return u(this,void 0,void 0,function*(){return this.device})}transformStream(n){return u(this,void 0,void 0,function*(){return yield this.pipe.setInputMediaStream(n),this.inputMediaStream=n,this.pipe.getActiveOutputMediaStream()})}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const n=this.device&&this.device.id;if(this.pipe.stop(),!n&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return u(this,void 0,void 0,function*(){if(this.inputMediaStream)for(const n of this.inputMediaStream.getVideoTracks())n.stop();this.pipe.destroy(),this.inputMediaStream=null})}addObserver(n){this.observers.add(n)}removeObserver(n){this.observers.delete(n)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver(n=>{n.processingDidStart&&n.processingDidStart()})}processingLatencyTooHigh(n){this.forEachObserver(e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(n)})}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver(n=>{n.processingDidFailToStart&&n.processingDidFailToStart()})}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver(n=>{n.processingDidStop&&n.processingDidStop()})}forEachObserver(n){for(const e of this.observers)setTimeout(()=>{n(e)},0)}constructor(n,e,t,i=new m.default){this.logger=n,this.device=e,this.processors=t,this.browserBehavior=i,this.observers=new Set,this.pipe=new h.default(this.logger,this.processors),this.pipe.addObserver(this)}},"DefaultVideoTransformDevice");l.default=a},572618:function(U,l){"use strict";var f=this&&this.__awaiter||function(g,m,h,a){function r(n){return n instanceof h?n:new h(function(e){e(n)})}return s(r,"adopt"),new(h||(h=Promise))(function(n,e){function t(c){try{o(a.next(c))}catch(p){e(p)}}s(t,"fulfilled");function i(c){try{o(a.throw(c))}catch(p){e(p)}}s(i,"rejected");function o(c){c.done?n(c.value):r(c.value).then(t,i)}s(o,"step"),o((a=a.apply(g,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let u=s(class{process(m){return f(this,void 0,void 0,function*(){return m})}destroy(){return f(this,void 0,void 0,function*(){})}},"NoOpVideoFrameProcessor");l.default=u},45227:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DeferredPromise=void 0;let f=s(class{getPromise(){return this.promise}resolvePromise(g){this.resolve(g)}resolveAndReplacePromise(g){this.resolve(g),this.promise=new Promise((m,h)=>{this.resolve=m,this.reject=h})}rejectPromise(g){this.reject(g)}rejectAndReplacePromise(g){this.reject(g),this.promise=new Promise((m,h)=>{this.resolve=m,this.reject=h})}constructor(){this.promise=new Promise((g,m)=>{this.resolve=g,this.reject=m})}},"DeferredPromise");l.DeferredPromise=f},91021:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(h,a,r,n){function e(t){return t instanceof r?t:new r(function(i){i(t)})}return s(e,"adopt"),new(r||(r=Promise))(function(t,i){function o(S){try{p(n.next(S))}catch(d){i(d)}}s(o,"fulfilled");function c(S){try{p(n.throw(S))}catch(d){i(d)}}s(c,"rejected");function p(S){S.done?t(S.value):e(S.value).then(o,c)}s(p,"step"),p((n=n.apply(h,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxCanvasOpsManager=void 0;const g=f(985769);let m=s(class{getInferenceInputData(a){return this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(a,0,0),this.inferenceCtx.restore(),this.inferenceCtx.getImageData(0,0,g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(a){return u(this,void 0,void 0,function*(){if(this.streamParameters=a,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const r=document.createElement("canvas");r.width=this.streamParameters.width,r.height=this.streamParameters.height,r.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}this.configureCanvasPipeline()})}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=g.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=g.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(a){return u(this,void 0,void 0,function*(){const r=a.backgroundReplacement.backgroundImageURL,n=a.backgroundReplacement.defaultColor;if(r)try{const e=yield this.loadImage(r);this.backgroundReplacementImage=e,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(e){throw this.logger.error(e),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(n)})}resizeAndSetReplacementImage(a){const r=document.createElement("canvas"),n=r.getContext("2d");r.width=this.streamParameters.width,r.height=this.streamParameters.height,n.drawImage(a,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}resizeAndSetReplacementColor(a){const r=document.createElement("canvas"),n=r.getContext("2d");r.width=this.streamParameters.width,r.height=this.streamParameters.height,n.fillStyle=a,n.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=r}loadImage(a){return u(this,void 0,void 0,function*(){const n=yield(yield fetch(a).catch(t=>{throw this.logger.error(t.toString()),new Error("Failed to fetch image.")})).blob(),e=new Image;return e.src=URL.createObjectURL(n),new Promise((t,i)=>{e.onload=()=>{t(e)},e.onerror=o=>{i(o)}})})}constructor(a,r){this.streamParameters=a,this.outputCanvas=r,this.configureCanvasPipeline()}},"VideoFxCanvasOpsManager");l.VideoFxCanvasOpsManager=m},985769:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.FXLIB_PATH=l.WORKER_PATH=l.CDN_BASE_PATH=l.RESOURCE_CONSTRAINTS=l.SEGMENTATION_MODEL=l.DEFAULT_STREAM_PARAMETERS=l.WORKER_MSG=void 0,l.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},l.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},l.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},l.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},l.CDN_BASE_PATH="https://static.sdkassets.chime.aws";const f="/ml_media_fx/otherassets";l.WORKER_PATH=`${f}/worker.js`,l.FXLIB_PATH=`${f}/fxlib.js`},852376:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(y,E,I,A){function L(M){return M instanceof I?M:new I(function(k){k(M)})}return s(L,"adopt"),new(I||(I=Promise))(function(M,k){function w(O){try{T(A.next(O))}catch(D){k(D)}}s(w,"fulfilled");function N(O){try{T(A.throw(O))}catch(D){k(D)}}s(N,"rejected");function T(O){O.done?M(O.value):L(O.value).then(w,N)}s(T,"step"),T((A=A.apply(y,E||[])).next())})},g=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0});const m=f(142406),h=f(289927),a=f(915057),r=g(f(48839)),n=g(f(350928)),e=f(817426),t=g(f(244504)),i=g(f(274246)),o=f(45227),c=f(91021),p=f(985769),S=f(495212);let d=s(class pa{process(E){return u(this,void 0,void 0,function*(){return E})}fxProcess(E){return u(this,void 0,void 0,function*(){const I=E[0].asCanvasElement();this.didStreamParametersChange(I)&&(yield this.adjustProcessorForNewStreamParameters(I));try{yield this.manageSegmentationMask(I)}catch(A){throw this.logger.error(A),new Error("Video stream could not be processed")}return yield this.renderer.render(I,this.segmentationMask),E[0]=this.canvasVideoFrameBuffer,E})}noOpProcess(E){return u(this,void 0,void 0,function*(){return E})}didStreamParametersChange(E){return E.width!==this.streamParameters.width||E.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(E){return u(this,void 0,void 0,function*(){this.streamParameters.width=E.width,this.streamParameters.height=E.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)})}destroy(){return u(this,void 0,void 0,function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:p.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:p.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")})}manageSegmentationMask(E){return u(this,void 0,void 0,function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const I=this.canvasOpsManager.getInferenceInputData(E);this.segmentationMask=yield this.generateSegmentationMask(I),this.segmentationRateManager.completeSegmentation()}}catch(I){throw this.logger.error(I.toString()),new Error("Can not properly manage the returned segmentation mask")}})}generateSegmentationMask(E){return u(this,void 0,void 0,function*(){pa.isSharedArrayBufferSupported?(this.sharedImageData.set(E.data),this.engineWorker.postMessage({msg:p.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:p.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:E},[E.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(I){throw this.logger.error(I.toString()),new Error("Segmentation mask could not be generated")}})}cloneConfigFrom(E){return{backgroundBlur:{isEnabled:E.backgroundBlur.isEnabled,strength:E.backgroundBlur.strength},backgroundReplacement:{isEnabled:E.backgroundReplacement.isEnabled,backgroundImageURL:E.backgroundReplacement.backgroundImageURL,defaultColor:E.backgroundReplacement.defaultColor}}}setEffectConfig(E){return u(this,void 0,void 0,function*(){if(this.sameVideoFxConfig(E,this.effectConfig))return;const I=this.cloneConfigFrom(E);try{yield this.validateEffectConfig(I)}catch(A){throw this.logger.error(A.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}I.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(I),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,I),this.effectConfig=I,!this.effectConfig.backgroundBlur.isEnabled&&!this.effectConfig.backgroundReplacement.isEnabled?this.process=this.noOpProcess:this.process=this.fxProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()})}validateEffectConfig(E){return u(this,void 0,void 0,function*(){if(E.backgroundBlur.isEnabled&&E.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");E.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(E))})}validateReplacementConfig(E){return u(this,void 0,void 0,function*(){if(E.backgroundReplacement.backgroundImageURL&&E.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!E.backgroundReplacement.backgroundImageURL&&!E.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{E.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(E.backgroundReplacement.backgroundImageURL))}catch(A){throw this.logger.error(A.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const I=E.backgroundReplacement.defaultColor;if(I&&I!=="black"&&I!=="#000000"&&I!=="#000"){if(I.includes("#")&&!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(I))throw new Error(`Invalid hexadecimal color code for default replacement background: ${I}`);const L=document.createElement("canvas").getContext("2d"),M=L.fillStyle;if(L.fillStyle=I,L.fillStyle===M)throw new Error(`Invalid color for default replacement background: ${I}`)}})}validateProcessingBudgetPerFrame(E){if(E<p.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||E>p.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${p.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${p.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return u(this,void 0,void 0,function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const E=this.getVideoFxAssetParams();yield this.loadEngineWorker(E),yield this.buildEngine(E),yield this.loadFxLib(E),this.renderer=constructRenderer(p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(E){throw this.logger.error(E.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")})}getVideoFxAssetParams(){const E=e.getDefaultAssetSpec();return{assetGroup:E.assetGroup,revisionID:E.revisionID,sdk:encodeURIComponent(t.default.sdkVersion),ua:encodeURIComponent(t.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(E,I){const A=new URL(E);for(const[L,M]of Object.entries(I))if(M!==void 0){const k=encodeURIComponent(L),w=encodeURIComponent(M);A.searchParams.set(k,w)}return A.toString()}loadEngineWorker(E){return u(this,void 0,void 0,function*(){try{const I=this.getPathFromVideoFxAssetParams(p.CDN_BASE_PATH+p.WORKER_PATH,E);this.engineWorker=yield h.loadWorker(I,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",A=>this.engineWorkerReceiver(A))}catch(I){throw this.logger.error(I.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}})}buildEngine(E){return u(this,void 0,void 0,function*(){this.buildEnginePromise=new o.DeferredPromise,this.engineWorker.postMessage({msg:p.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:p.CDN_BASE_PATH,sdkVersioningParams:E}});try{yield this.buildEnginePromise.getPromise()}catch(I){throw this.logger.error(I.toString()),new Error("Failed to instantiate the VideoFxEngine")}})}loadFxLib(E){return u(this,void 0,void 0,function*(){const I=this.getPathFromVideoFxAssetParams(p.CDN_BASE_PATH+p.FXLIB_PATH,E),A={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const L=yield m.fetchWithBehavior(I,A,{});if(!L.ok)throw new Error("Fetch failed.");const M=window.URL.createObjectURL(yield L.blob());yield new Promise((k,w)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",M),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",k),this.fxLibScript.addEventListener("error",w),document.body.appendChild(this.fxLibScript)})}catch(L){throw this.logger.error(L.toString()),new Error("Failed to load the fxlib")}})}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(E){const I=E.data;switch(I.msg){case p.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(I.payload);break;case p.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(I.payload.output);break;case p.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case p.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(I)}`);break}}settleEngineBuildPromise(E){E!==p.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(E){E?this.segmentationRequestPromise.resolveAndReplacePromise(E):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const E=new ImageData(new Uint8ClampedArray(this.sharedImageData),p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(E)}catch{this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new n.default,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return u(this,void 0,void 0,function*(){let A=!0;const L=s((w,N)=>{w&&(E.info(N),A=!1)},"checkEnv");L(typeof globalThis>"u","Browser does not have globalThis."),L(!a.supportsWorker(globalThis,E),"Browser does not support web workers."),L(!a.supportsWASM(globalThis,E),"Browser does not support wasm."),L(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");const M=new r.default;L(!M.isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");const k=s(()=>u(this,void 0,void 0,function*(){if(I)try{const w=new pa(E);yield w.loadAssets(),yield w.destroy()}catch{return E.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)}),"checkProcessor");return Promise.resolve(A?yield k():!1)})}static create(E,I){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME;return u(this,void 0,void 0,function*(){const L=new pa(E,A);try{return yield L.loadAssets(),yield L.setEffectConfig(I),L}catch(M){throw E.error(M.toString()),L.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}})}setEventController(E){this.eventController?this.eventController=E:(this.eventController=E,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const E={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",E)}sameVideoFxConfig(E,I){return E.backgroundBlur.isEnabled===I.backgroundBlur.isEnabled&&E.backgroundBlur.strength===I.backgroundBlur.strength&&E.backgroundReplacement.backgroundImageURL===I.backgroundReplacement.backgroundImageURL&&E.backgroundReplacement.defaultColor===I.backgroundReplacement.defaultColor&&E.backgroundReplacement.isEnabled===I.backgroundReplacement.isEnabled}constructor(E,I=p.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,A){this.logger=E,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new i.default(this.outputCanvas);try{this.validateProcessingBudgetPerFrame(I)}catch(L){throw this.logger.error(L),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${I}`)}A&&(this.eventController=A),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new o.DeferredPromise,this.segmentationRateManager=new S.VideoFxSegmentationRateManager(this.logger,I),this.streamParameters={framerate:p.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:p.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:p.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:p.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},pa.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${pa.isSharedArrayBufferSupported}`),this.canvasOpsManager=new c.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${I}`)}},"VideoFxProcessor");l.default=d,d.isSharedArrayBufferSupported=typeof SharedArrayBuffer<"u"},495212:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxSegmentationRateManager=void 0;const u=f(985769);let g=s(class{submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation===0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=u.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(h){h>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&h<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}constructor(h,a){this.logger=h,this.targetSegmentationCyclePercentage=a/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=u.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}},"VideoFxSegmentationRateManager");l.VideoFxSegmentationRateManager=g},471066:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"VideoSource");l.default=f},540079:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class Bu{add(g){this.ids.add(g)}array(){return Array.from(this.ids.values()).sort((m,h)=>m-h)}contain(g){return this.ids.has(g)}forEach(g){this.ids.forEach(g)}empty(){return this.ids.size===0}size(){return this.ids.size}equal(g){if(!g)return this.ids.size===0;const m=this.array(),h=g.array();if(m.length!==h.length)return!1;for(let a=0;a<m.length;a++)if(m[a]!==h[a])return!1;return!0}clone(){return new Bu(this.array())}remove(g){this.ids.delete(g)}toJSON(){return this.array()}truncate(g){const m=this.array();return new Bu(m.splice(0,g))}constructor(g){this.ids=new Set(g)}},"DefaultVideoStreamIdSet");l.default=f},983395:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const g=f(459746),m=u(f(540079)),h=u(f(561720));let a=s(class{localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(n){return n>0&&n<1e3?1:Math.trunc(n/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const n=[];return this.currentIndex.sources.forEach(e=>{const t=new h.default;t.attendeeId=e.attendeeId,t.groupId=e.groupId,t.streamId=e.streamId,t.maxBitrateKbps=e.maxBitrateKbps,t.avgBitrateKbps=this.convertBpsToKbps(e.avgBitrateBps),t.width=e.width,t.height=e.height,t.maxFrameRate=e.framerate,n.push(t)}),n}integrateUplinkPolicyDecision(n){if(n&&n.length){const e=n[0];this.videoStreamDescription.maxBitrateKbps=e.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=e.maxFramerate}}integrateIndexFrame(n){if(this.currentIndex=n,!n)return;const e=new Map;let t=!1;for(const i of n.sources){if(!e.has(i.attendeeId)){e.set(i.attendeeId,i.groupId);continue}const o=e.get(i.attendeeId);o<i.groupId&&(this.logger.warn(`Old group ID ${o} found for attendee ID ${i.attendeeId}, replacing with newer group ID ${i.groupId}`),e.set(i.attendeeId,i.groupId)),t=!0}t&&(this.currentIndex.sources=this.currentIndex.sources.filter(i=>e.get(i.attendeeId)===i.groupId)),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}integrateSubscribeAckFrame(n){this.currentSubscribeAck=n,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,n.allocations&&n.allocations!==void 0&&n.allocations.length>0&&(this.sendVideoStreamId=n.allocations[0].streamId)}integrateBitratesFrame(n){if(this.currentIndex)for(const e of n.bitrates){const t=this.currentIndex.sources.find(i=>i.streamId===e.sourceStreamId);t!==void 0&&(t.avgBitrateBps=e.avgBitrateBps)}}allStreams(){const n=new m.default;if(this.currentIndex)for(const e of this.currentIndex.sources)n.add(e.streamId);return n}allVideoSendingSourcesExcludingSelf(n){const e=[],t=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const i of this.currentIndex.sources){const{attendeeId:o,externalUserId:c,mediaType:p}=i;o!==n&&p===g.SdkStreamMediaType.VIDEO&&(t.has(o)||(e.push({attendee:{attendeeId:o,externalUserId:c}}),t.add(o)))}return e}streamSelectionUnderBandwidthConstraint(n,e,t,i){const o=new Set;if(this.currentIndex)for(const y of this.currentIndex.sources)y.attendeeId===n||y.mediaType!==g.SdkStreamMediaType.VIDEO||!e.has(y.attendeeId)&&!t.has(y.attendeeId)&&o.add(y.attendeeId);const c=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(n),p=new Map;let S=0;c.forEach((y,E)=>{p.set(E,y[0]),S+=y[0].maxBitrateKbps}),S=this.trySelectHighBitrateForAttendees(c,e,S,i,p),this.trySelectHighBitrateForAttendees(c,o,S,i,p);const d=new m.default;for(const y of p.values())d.add(y.streamId);return d}highestQualityStreamFromEachGroupExcludingSelf(n){const e=new m.default;if(this.currentIndex){const t=new Map;for(const i of this.currentIndex.sources)i.attendeeId===n||i.mediaType!==g.SdkStreamMediaType.VIDEO||(!t.has(i.groupId)||i.maxBitrateKbps>t.get(i.groupId).maxBitrateKbps)&&t.set(i.groupId,i);for(const i of t.values())e.add(i.streamId)}return e}numberOfVideoPublishingParticipantsExcludingSelf(n){return this.highestQualityStreamFromEachGroupExcludingSelf(n).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(n){const e=this.streamIdForTrack(n);if(e===void 0||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${n}`),"";const t=this.subscribeStreamToAttendeeMap.get(e);return t||(this.logger.info(`track ${n} (stream ${e}) does not correspond to a known attendee`),"")}externalUserIdForTrack(n){const e=this.streamIdForTrack(n);if(e===void 0||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${n}`),"";const t=this.subscribeStreamToExternalUserIdMap.get(e);return t||(this.logger.info(`track ${n} (stream ${e}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(n){if(!this.streamToAttendeeMap)if(this.currentIndex)this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex);else return"";const e=this.streamToAttendeeMap.get(n);return e||(this.logger.info(`stream ID ${n} does not correspond to a known attendee`),"")}attendeeIdForGroupId(n){if(!this.groupIdToAttendeeMap)if(this.currentIndex)this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex);else return"";const e=this.groupIdToAttendeeMap.get(n);return e||(this.logger.info(`group ID ${n} does not correspond to a known attendee`),"")}groupIdForStreamId(n){if(!(!this.currentIndex||!this.currentIndex.sources)){for(const e of this.currentIndex.sources)if(e.streamId===n)return e.groupId;if(this.indexForSubscribe){for(const e of this.indexForSubscribe.sources)if(e.streamId===n)return e.groupId}}}StreamIdsInSameGroup(n,e){return this.groupIdForStreamId(n)===this.groupIdForStreamId(e)}streamIdForTrack(n){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(n)}streamIdForSSRC(n){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(n)}overrideStreamIdMappings(n,e){if(this.subscribeTrackToStreamMap){for(const[t,i]of this.subscribeTrackToStreamMap.entries())if(n===i){this.subscribeTrackToStreamMap.set(t,e);break}}if(this.subscribeSsrcToStreamMap){for(const[t,i]of this.subscribeSsrcToStreamMap.entries())if(n===i){this.subscribeSsrcToStreamMap.set(t,e);break}}}groupIdForSSRC(n){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(n)}streamsPausedAtSource(){const n=new m.default;if(this.currentIndex)for(const e of this.currentIndex.pausedAtSourceIds)n.add(e);return n}sendVideoStreamIdFromRid(n){return this.sendVideoStreamId}buildTrackToStreamMap(n){const e=new Map;this.logger.debug(()=>`trackMap ${JSON.stringify(n.tracks)}`);for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.trackLabel,t.streamId);return e}buildSSRCToStreamMap(n){const e=new Map;this.logger.debug(()=>`ssrcMap ${JSON.stringify(n.tracks)}`);for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,t.streamId);return e}buildSSRCToGroupMap(n){const e=new Map;for(const t of n.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,this.groupIdForStreamId(t.streamId));return e}buildStreamToAttendeeMap(n){const e=new Map;if(n)for(const t of n.sources)e.set(t.streamId,t.attendeeId);return e}buildGroupIdToAttendeeMap(n){const e=new Map;for(const t of n.sources)e.set(t.groupId,t.attendeeId);return e}buildStreamExternalUserIdMap(n){const e=new Map;if(n)for(const t of n.sources)t.externalUserId&&e.set(t.streamId,t.externalUserId);return e}trySelectHighBitrateForAttendees(n,e,t,i,o){for(const c of e){if(t>=i)break;if(n.has(c)){const p=n.get(c);for(const S of p.reverse())if(t-o.get(c).maxBitrateKbps+S.maxBitrateKbps<i){t=t-o.get(c).maxBitrateKbps+S.maxBitrateKbps,o.set(c,S);break}}}return t}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(n){const e=new Map;if(this.currentIndex)for(const t of this.currentIndex.sources)t.attendeeId===n||t.mediaType!==g.SdkStreamMediaType.VIDEO||(e.has(t.attendeeId)?e.get(t.attendeeId).push(t):e.set(t.attendeeId,[t]));return e.forEach((t,i)=>{t.sort((o,c)=>o.maxBitrateKbps>c.maxBitrateKbps?1:o.maxBitrateKbps<c.maxBitrateKbps?-1:0)}),e}constructor(n){this.logger=n,this.currentIndex=null,this.indexForSubscribe=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new h.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}},"DefaultVideoStreamIndex");l.default=a},243563:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const g=f(459746),m=u(f(983395)),h=u(f(561720));let a=s(class ma extends m.default{localStreamDescriptions(){const n=[];return this._localStreamInfos.forEach(e=>{n.push(e.clone())}),n}integrateUplinkPolicyDecision(n){let e=!0,t=0;for(let i=0;i<n.length;i++){const o=n[i].maxBitrate/1e3,c=n[i].maxFramerate;if(!e||i===this._localStreamInfos.length){e=!1;const p=new h.default;p.maxBitrateKbps=o,p.maxFrameRate=c,p.disabledByUplinkPolicy=o===0,p.rid=n[i].rid,o!==0&&(p.timeEnabled=Date.now()),this._localStreamInfos.push(p),t++;continue}this._localStreamInfos[t].maxBitrateKbps===0&&o>0&&(this._localStreamInfos[t].timeEnabled=Date.now()),this._localStreamInfos[t].maxBitrateKbps=o,this._localStreamInfos[t].maxFrameRate=c,this._localStreamInfos[t].disabledByUplinkPolicy=o===0,t++}e&&this._localStreamInfos.splice(t)}integrateBitratesFrame(n){super.integrateBitratesFrame(n);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of n.bitrates)e.add(i.sourceStreamId),this.streamIdToBitrateKbpsMap.set(i.sourceStreamId,this.convertBpsToKbps(i.avgBitrateBps));for(const i of t)e.has(i)||(this.streamIdToBitrateKbpsMap.get(i)===ma.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(i,ma.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(i,ma.NOT_SENDING_STREAM_BITRATE));this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let n="";for(const e of this._localStreamInfos)n+=`streamId=${e.streamId} maxBitrate=${e.maxBitrateKbps} disabledByUplink=${e.disabledByUplinkPolicy}
`;this.logger.debug(()=>n)}integrateIndexFrame(n){super.integrateIndexFrame(n);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of this.currentIndex.sources)i.mediaType===g.SdkStreamMediaType.VIDEO&&(e.add(i.streamId),this.streamIdToBitrateKbpsMap.has(i.streamId)||this.streamIdToBitrateKbpsMap.set(i.streamId,ma.UNSEEN_STREAM_BITRATE));for(const i of t)e.has(i)||this.streamIdToBitrateKbpsMap.delete(i)}integrateSubscribeAckFrame(n){if(super.integrateSubscribeAckFrame(n),!n.allocations||n.allocations===void 0)return;let e=0;this._sendRidToVideoStreamIdMap.clear();for(const t of n.allocations){if(this._localStreamInfos.length<e+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[e].groupId=t.groupId,this._localStreamInfos[e].streamId=t.streamId,this.streamIdToBitrateKbpsMap.has(t.streamId)||this.streamIdToBitrateKbpsMap.set(t.streamId,ma.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[e].rid,t.streamId),e++}}sendVideoStreamIdFromRid(n){let e=0;return this._sendRidToVideoStreamIdMap.has(n)&&(e=this._sendRidToVideoStreamIdMap.get(n)),e}constructor(){super(...arguments),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map}},"SimulcastVideoStreamIndex");l.default=a,a.UNSEEN_STREAM_BITRATE=-2,a.RECENTLY_INACTIVE_STREAM_BITRATE=-1,a.NOT_SENDING_STREAM_BITRATE=0,a.BitratesMsgFrequencyMs=4e3},561720:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});const u=f(459746);let g=s(class IS{clone(){const h=new IS;return h.attendeeId=this.attendeeId,h.groupId=this.groupId,h.streamId=this.streamId,h.ssrc=this.ssrc,h.trackLabel=this.trackLabel,h.maxBitrateKbps=this.maxBitrateKbps,h.avgBitrateKbps=this.avgBitrateKbps,h.maxFrameRate=this.maxFrameRate,h.timeEnabled=this.timeEnabled,h.disabledByUplinkPolicy=this.disabledByUplinkPolicy,h.width=this.width,h.height=this.height,h}toStreamDescriptor(){const h=u.SdkStreamDescriptor.create();return h.mediaType=u.SdkStreamMediaType.VIDEO,h.trackLabel=this.trackLabel,h.attendeeId=this.attendeeId,h.streamId=this.streamId,h.groupId=this.groupId,h.framerate=this.maxFrameRate,h.maxBitrateKbps=this.disabledByUplinkPolicy?0:this.maxBitrateKbps,h.avgBitrateBps=this.avgBitrateKbps,h}totalPixels(){return this.width*this.height}constructor(h,a,r,n,e){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=h,this.groupId=a,this.streamId=r,this.maxBitrateKbps=n,this.avgBitrateKbps=e}},"VideoStreamDescription");l.default=g},559521:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(48839)),m=u(f(578555)),h=u(f(383017));let a=s(class Gr{static connectVideoStreamToVideoElement(n,e,t){const i=t&&n.getVideoTracks()[0].getSettings().facingMode!=="environment"?"rotateY(180deg)":"";if(Gr.setVideoElementFlag(e,"disablePictureInPicture",t),Gr.setVideoElementFlag(e,"disableRemotePlayback",t),e.style.transform!==i&&(e.style.transform=i),e.hasAttribute("controls")&&e.removeAttribute("controls"),e.hasAttribute("autoplay")||e.setAttribute("autoplay","true"),e.hasAttribute("playsinline")||e.setAttribute("playsinline","true"),e.hasAttribute("muted")||(e.setAttribute("muted","true"),e.muted=!0),e.srcObject!==n&&(e.srcObject=n,new g.default().requiresVideoPlayWorkaround()&&e.paused)){const o=e.play();o!==void 0&&o.catch(c=>{console.warn("Error playing video in Safari",c)}).then(()=>{console.debug("Video played successfully in Safari")})}}static disconnectVideoStreamFromVideoElement(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(n)if(e)t||(n.srcObject=null,n.style.transform="");else{if(!n.srcObject)return;n.pause(),n.style.transform="",Gr.setVideoElementFlag(n,"disablePictureInPicture",!1),Gr.setVideoElementFlag(n,"disableRemotePlayback",!1),n.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&Gr.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new h.default}devicePixelRatioChanged(n){this.tileState.devicePixelRatio=n,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(n,e,t,i,o,c,p){let S=!1;this.tileState.boundAttendeeId!==n&&(this.tileState.boundAttendeeId=n,new m.default(n).hasModality(m.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),S=!0),this.tileState.boundExternalUserId!==p&&(this.tileState.boundExternalUserId=p,S=!0),this.tileState.localTile!==e&&(this.tileState.localTile=e,S=!0),this.tileState.boundVideoStream!==t&&(this.tileState.boundVideoStream=t,S=!0),this.tileState.videoStreamContentWidth!==i&&(this.tileState.videoStreamContentWidth=i,S=!0),this.tileState.videoStreamContentHeight!==o&&(this.tileState.videoStreamContentHeight=o,S=!0),this.tileState.streamId!==c&&(this.tileState.streamId=c,S=!0),S&&this.sendTileStateUpdate()}bindVideoElement(n){let e=!1;this.tileState.boundVideoElement!==n&&(this.tileState.boundVideoElement=n,e=!0),this.tileState.boundVideoElement!==null?(this.tileState.videoElementCSSWidthPixels!==n.clientWidth&&(this.tileState.videoElementCSSWidthPixels=n.clientWidth,e=!0),this.tileState.videoElementCSSHeightPixels!==n.clientHeight&&(this.tileState.videoElementCSSHeightPixels=n.clientHeight,e=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),e&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return this.tileState.poorConnection?!1:(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return this.tileState.poorConnection?(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0):!1}capture(){if(!this.tileState.active)return null;const n=document.createElement("canvas"),e=this.tileState.boundVideoElement;n.width=e.videoWidth||e.width,n.height=e.videoHeight||e.height;const t=n.getContext("2d");return t.drawImage(e,0,0,n.width,n.height),t.getImageData(0,0,n.width,n.height)}setStreamId(n){this.tileState.streamId=n,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!!(!this.tileState.paused&&!this.tileState.poorConnection&&this.tileState.boundAttendeeId&&this.tileState.boundVideoElement&&this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){typeof this.tileState.videoElementCSSWidthPixels=="number"&&typeof this.tileState.videoElementCSSHeightPixels=="number"?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?Gr.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):Gr.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(n,e,t){e in n&&(n[e]=t)}constructor(n,e,t,i){this.tileController=t,this.devicePixelRatioMonitor=i,this.tileState=new h.default,this.tileState.tileId=n,this.tileState.localTile=e,this.devicePixelRatioMonitor.registerObserver(this)}},"DefaultVideoTile");l.default=a},383017:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class wS{clone(){const g=new wS;return g.tileId=this.tileId,g.localTile=this.localTile,g.isContent=this.isContent,g.active=this.active,g.paused=this.paused,g.poorConnection=this.poorConnection,g.boundAttendeeId=this.boundAttendeeId,g.boundExternalUserId=this.boundExternalUserId,g.boundVideoStream=this.boundVideoStream,g.boundVideoElement=this.boundVideoElement,g.nameplate=this.nameplate,g.videoStreamContentWidth=this.videoStreamContentWidth,g.videoStreamContentHeight=this.videoStreamContentHeight,g.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,g.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,g.devicePixelRatio=this.devicePixelRatio,g.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,g.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,g.streamId=this.streamId,g}constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null}},"VideoTileState");l.default=f},354013:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(t,i,o,c){function p(S){return S instanceof o?S:new o(function(d){d(S)})}return s(p,"adopt"),new(o||(o=Promise))(function(S,d){function y(A){try{I(c.next(A))}catch(L){d(L)}}s(y,"fulfilled");function E(A){try{I(c.throw(A))}catch(L){d(L)}}s(E,"rejected");function I(A){A.done?S(A.value):p(A.value).then(y,E)}s(I,"step"),I((c=c.apply(t,i||[])).next())})},g=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(74647)),h=g(f(436517)),a=g(f(704988)),r=f(153822),n=g(f(559521));let e=s(class{createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new h.default(new a.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return u(this,void 0,void 0,function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const i=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,i.destroy()})}bindVideoElement(i,o){const c=this.getVideoTile(i);if(c===null){this.logger.warn(`Ignoring video element binding for unknown tile id ${i}`);return}c.bindVideoElement(o)}unbindVideoElement(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const c=this.getVideoTile(i);if(c===null){this.logger.warn(`Ignoring video element unbinding for unknown tile id ${i}`);return}this.logger.info("Unbinding the video element");const p=c.stateRef().boundVideoElement;c.bindVideoElement(null),o&&(this.logger.info("Cleaning up the video element"),n.default.disconnectVideoStreamFromVideoElement(p,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===m.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const i=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),i.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!!(this.currentLocalTile&&this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(i){const o=this.getVideoTile(i);o&&(this.currentPausedTilesByIds.has(i)||(this.audioVideoController.pauseReceivingStream(o.stateRef().streamId),this.currentPausedTilesByIds.add(i)),o.pause())}unpauseVideoTile(i){const o=this.getVideoTile(i);o&&(this.currentPausedTilesByIds.has(i)&&(this.audioVideoController.resumeReceivingStream(o.stateRef().streamId),this.currentPausedTilesByIds.delete(i)),o.unpause())}getVideoTile(i){return this.tileMap.has(i)?this.tileMap.get(i):null}getVideoTileArea(i){const o=i.state();let c=0,p=0;return o.boundVideoElement&&(c=o.boundVideoElement.clientHeight*o.devicePixelRatio,p=o.boundVideoElement.clientWidth*o.devicePixelRatio),c*p}getAllRemoteVideoTiles(){const i=new Array;return this.tileMap.forEach((o,c)=>{(!this.currentLocalTile||c!==this.currentLocalTile.id())&&i.push(o)}),i}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const o=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const c=this.tileFactory.makeTile(o,i,this,this.devicePixelRatioMonitor);return this.tileMap.set(o,c),c}removeVideoTile(i){if(!this.tileMap.has(i))return;const o=this.tileMap.get(i);this.currentLocalTile===o&&(this.currentLocalTile=null),o.destroy(),this.tileMap.delete(i),this.audioVideoController.forEachObserver(c=>{r.Maybe.of(c.videoTileWasRemoved).map(p=>p.bind(c)(i))}),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(i){const o=[];for(const c of this.getAllVideoTiles()){const p=c.state();p.boundAttendeeId===i&&(this.removeVideoTile(p.tileId),o.push(p.tileId))}return o}removeAllVideoTiles(){const i=Array.from(this.tileMap.keys());for(const o of i)this.removeVideoTile(o)}sendTileStateUpdate(i){this.audioVideoController.forEachObserver(o=>{r.Maybe.of(o.videoTileDidUpdate).map(c=>c.bind(o)(i))})}haveVideoTilesWithStreams(){for(const i of this.getAllVideoTiles())if(i.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(i){return!!this.getVideoTileForAttendeeId(i)}getVideoTileForAttendeeId(i){for(const o of this.getAllVideoTiles())if(o.state().boundAttendeeId===i)return o}captureVideoTile(i){const o=this.getVideoTile(i);return o?o.capture():null}findOrCreateLocalVideoTile(){return this.currentLocalTile?this.currentLocalTile:(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.currentLocalTile)}constructor(i,o,c){this.tileFactory=i,this.audioVideoController=o,this.logger=c,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=o.configuration.keepLastFrameWhenPaused}},"DefaultVideoTileController");l.default=e},318415:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(559521));let m=s(class{makeTile(a,r,n,e){return new g.default(a,r,n,e)}},"DefaultVideoTileFactory");l.default=m},819730:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{},"BitrateParameters");l.default=f},583646:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(324374)),m=u(f(439527)),h=f(153822),a=u(f(769839)),r=u(f(819730));let n=s(class ur{updateConnectionMetric(t){}calculateEncodingParameters(){const t=[new r.default,new r.default,new r.default];this.shouldDisableSimulcast?(this.newActiveStreams=0,t[0].maxBitrateKbps=0,t[1].maxBitrateKbps=this.hiTargetBitrateKbps,t[2].maxBitrateKbps=0):this.numSenders<=4?(this.newActiveStreams=1,t[0].maxBitrateKbps=this.lowTargetBitrateKbps,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=this.hiTargetBitrateKbps):(this.newActiveStreams=2,t[0].maxBitrateKbps=this.lowTargetBitrateKbps*2/3,t[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:this.midTargetBitrateKbps*.6,t[2].maxBitrateKbps=0);const i=t.map((o,c,p)=>o.maxBitrateKbps);return this.newQualityMap=this.fillEncodingParamWithBitrates(i),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`),this.newQualityMap}chooseMediaTrackConstraints(){}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(t){const i=t.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,o=i!==this.numSenders,c=t.numberOfParticipants(),p=c>=0&&c<=2,S=this.shouldDisableSimulcast!==p;this.numSenders=i,this.shouldDisableSimulcast=p,this.optimalParameters=new a.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=t,(o||S)&&(this.newQualityMap=this.calculateEncodingParameters())}wantsResubscribe(){return!this.encodingParametersEqual()}compareEncodingParameter(t,i){return JSON.stringify(t)===JSON.stringify(i)}encodingParametersEqual(){let t=!1;for(const i of m.default.NAME_ARR_ASCENDING)if(t=t||!this.compareEncodingParameter(this.newQualityMap.get(i),this.currentQualityMap.get(i)),t)break;return!t}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(t){}setHasBandwidthPriority(t){}setHighResolutionFeatureEnabled(t){this.enableFhdVideo=t,this.hiTargetBitrateKbps=t?ur.kHiTargetBitrateKbpsFhd:ur.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=t?ur.kMidTargetBitrateKbpsFhd:ur.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=t?ur.kLowTargetBitrateKbpsFhd:ur.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(t){const i=new Map,o=1e3,c=m.default.NAME_ARR_ASCENDING,p=t;let S=this.shouldDisableSimulcast?1:4;for(let d=0;d<c.length;d++){const y=c[d];i.set(y,{rid:y,active:p[d]>0,scaleResolutionDownBy:Math.max(S,1),maxBitrate:p[d]*o}),S=S/2}return i}getQualityMapString(t){let i="";return this.videoIndex.localStreamDescriptions().length===3&&t.forEach(c=>{i+=`{ rid: ${c.rid} active:${c.active} maxBitrate:${c.maxBitrate}}`}),i}getEncodingSimulcastLayer(t){switch(t){case 0:return g.default.High;case 1:return g.default.LowAndHigh;case 2:return g.default.LowAndMedium}}publishEncodingSimulcastLayer(){const t=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver(i=>{h.Maybe.of(i.encodingSimulcastLayersDidChange).map(o=>o.bind(i)(t))})}addObserver(t){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const i of this.observerQueue)t(i)}constructor(t,i){this.selfAttendeeId=t,this.logger=i,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.videoIndex=null,this.observerQueue=new Set,this.hiTargetBitrateKbps=ur.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=ur.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=ur.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new a.default(0,0,0,0,!0),this.parametersInEffect=new a.default(0,0,0,0,!0),this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}},"DefaultSimulcastUplinkPolicy");l.default=n,n.kHiTargetBitrateKbpsHd=1200,n.kMidTargetBitrateKbpsHd=600,n.kLowTargetBitrateKbpsHd=300,n.kHiTargetBitrateKbpsFhd=2e3,n.kMidTargetBitrateKbpsFhd=1e3,n.kLowTargetBitrateKbpsFhd=500},121919:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(897111));let m=s(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var a,r,n,e,t,i,o,c,p,S,d,y;const E=new Map,I=1e3,A=g.default.NAME_ARR_ASCENDING;return E.set(A[0],{rid:A[0],active:!0,scaleResolutionDownBy:((r=(a=this.encodingParams)===null||a===void 0?void 0:a.low)===null||r===void 0?void 0:r.scaleResolutionDownBy)||2,maxBitrate:(((e=(n=this.encodingParams)===null||n===void 0?void 0:n.low)===null||e===void 0?void 0:e.maxBitrateKbps)||this.defaultLowTargetBitrateKbps)*I,maxFramerate:((i=(t=this.encodingParams)===null||t===void 0?void 0:t.low)===null||i===void 0?void 0:i.maxFramerate)||5}),E.set(A[1],{rid:A[1],active:!0,scaleResolutionDownBy:((c=(o=this.encodingParams)===null||o===void 0?void 0:o.high)===null||c===void 0?void 0:c.scaleResolutionDownBy)||1,maxBitrate:(((S=(p=this.encodingParams)===null||p===void 0?void 0:p.high)===null||S===void 0?void 0:S.maxBitrateKbps)||this.defaultHiTargetBitrateKbps)*I,maxFramerate:(y=(d=this.encodingParams)===null||d===void 0?void 0:d.high)===null||y===void 0?void 0:y.maxFramerate}),E}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){this.enableUhdContent=a,this.defaultHiTargetBitrateKbps=a?2e3:1200,this.defaultLowTargetBitrateKbps=a?500:300}addObserver(a){}removeObserver(a){}forEachObserver(a){}constructor(a,r){this.encodingParams=r,this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}},"DefaultSimulcastUplinkPolicyForContentShare");l.default=m},978774:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})},g=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(769839));let h=s(class ga{reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new m.default(0,0,0,0,!1),this.parametersInEffect=new m.default(0,0,0,0,!1),this.encodingParamMap.set(ga.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(r){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(r){var n;let e=!0;this.transceiverController&&(e=this.transceiverController.hasVideoInput());const t=r.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(e?1:0),i=r.numberOfParticipants();if(this.numParticipants===i&&this.numberOfPublishedVideoSources===t){(n=this.logger)===null||n===void 0||n.debug("Skipping update index; Number of participants has not changed");return}this.numberOfPublishedVideoSources=t,this.numParticipants=i,this.updateOptimalParameters()}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let r=1;if(this.transceiverController){const n=this.getStreamCaptureSetting();n&&(r=this.calculateEncodingParameters(n).scaleResolutionDownBy)}this.optimalParameters=new m.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,r,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let r=640;return this.getNumberOfPublishedVideoSources()>4&&(r=320),r}captureHeight(){let r=384;return this.getNumberOfPublishedVideoSources()>4&&(r=192),r}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let r=0;return this.getNumberOfPublishedVideoSources()<=2?r=this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?r=this.idealMaxBandwidthKbps*2/3:r=(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(r)}setIdealMaxBandwidthKbps(r){this.idealMaxBandwidthKbps=r}setHasBandwidthPriority(r){this.hasBandwidthPriority=r}setTransceiverController(r){this.transceiverController=r}setSVCEnabled(r){var n;this.enableSVC=r,(n=this.logger)===null||n===void 0||n.info(`setSVCEnabled, enable: ${r}}`)}setHighResolutionFeatureEnabled(r){this.enableHighResolutionFeature=r}updateTransceiverController(){return u(this,void 0,void 0,function*(){const r=this.getStreamCaptureSetting();if(!r)return;const n=this.calculateEncodingParameters(r);this.shouldUpdateEndcodingParameters(n)&&(this.encodingParamMap.set(ga.encodingMapKey,n),this.transceiverController.setEncodingParameters(this.encodingParamMap))})}shouldUpdateEndcodingParameters(r){var n,e;const t=(e=(n=this.transceiverController.localVideoTransceiver().sender.getParameters())===null||n===void 0?void 0:n.encodings)===null||e===void 0?void 0:e[0];return r.maxBitrate!==(t==null?void 0:t.maxBitrate)||r.scaleResolutionDownBy!==(t==null?void 0:t.scaleResolutionDownBy)||(r==null?void 0:r.scalabilityMode)!==(t==null?void 0:t.scalabilityMode)}calculateEncodingParameters(r){var n,e,t;const i=this.maxBandwidthKbps()*1e3;let o=1,c=720;if(r.height!==void 0&&r.width!==void 0&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(c=ga.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),ga.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],c===480&&(!((n=this.browserBehavior)===null||n===void 0)&&n.disable480pResolutionScaleDown())&&(c=360),o=Math.max(Math.min(r.height,r.width)/c,1),(e=this.logger)===null||e===void 0||e.info(`Resolution scale factor is ${o} for capture resolution ${r.width}x${r.height}. New dimension is ${r.width/o}x${r.height/o}`)),this.enableSVC){let p;return this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?p="L1T1":p=c>=720?"L3T3":c>=360?"L2T3":"L1T3",(t=this.logger)===null||t===void 0||t.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${i}  targetHeight: ${c}  scalabilityMode: ${p}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:o,maxBitrate:i,scalabilityMode:p}}else return{scaleResolutionDownBy:o,maxBitrate:i}}getStreamCaptureSetting(){var r,n,e,t;return(t=(e=(n=(r=this.transceiverController)===null||r===void 0?void 0:r.localVideoTransceiver())===null||n===void 0?void 0:n.sender)===null||e===void 0?void 0:e.track)===null||t===void 0?void 0:t.getSettings()}getNumberOfPublishedVideoSources(){var r;return(r=this.numberOfPublishedVideoSources)!==null&&r!==void 0?r:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(r,n){const e=r??n,t=e.length>0&&ga.SVCCodecNames.includes(e[0].codecName);t!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=t,this.updateOptimalParameters())}constructor(r,n=!0,e=void 0,t=void 0){this.selfAttendeeId=r,this.scaleResolution=n,this.logger=e,this.browserBehavior=t,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}},"NScaleVideoUplinkBandwidthPolicy");l.default=h,h.encodingMapKey="video",h.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],h.SVCCodecNames=["VP9"]},433481:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(769839));let m=s(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new g.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}constructor(){}},"NoVideoUplinkBandwidthPolicy");l.default=m},297699:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});function f(g){return g.map(m=>typeof m=="object"?JSON.stringify(m):`${m}`).join(" ")}s(f,"stringify");let u=s(class{debug(){for(var m=arguments.length,h=new Array(m),a=0;a<m;a++)h[a]=arguments[a];this.base.debug(f(h))}info(){for(var m=arguments.length,h=new Array(m),a=0;a<m;a++)h[a]=arguments[a];this.base.info(f(h))}warn(){for(var m=arguments.length,h=new Array(m),a=0;a<m;a++)h[a]=arguments[a];this.base.warn(f(h))}error(){for(var m=arguments.length,h=new Array(m),a=0;a<m;a++)h[a]=arguments[a];this.base.error(f(h))}constructor(m){this.base=m}},"LoggerAdapter");l.default=u},605687:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(i,o,c,p){function S(d){return d instanceof c?d:new c(function(y){y(d)})}return s(S,"adopt"),new(c||(c=Promise))(function(d,y){function E(L){try{A(p.next(L))}catch(M){y(M)}}s(E,"fulfilled");function I(L){try{A(p.throw(L))}catch(M){y(M)}}s(I,"rejected");function A(L){L.done?d(L.value):S(L.value).then(E,I)}s(A,"step"),A((p=p.apply(i,o||[])).next())})},g=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusDeviceTransformer=void 0;const m=f(523850),h=f(817426),a=g(f(244504)),r=g(f(297699)),n=g(f(439300)),e=g(f(387639));let t=s(class Cr{static isSupported(o,c){var p,S;const d=Cr.defaultFetchBehavior(),y=c!=null&&c.logger?new r.default(c.logger):void 0,E={fetchBehavior:d,logger:y};if(h.isIFramed()){if((c==null?void 0:c.allowIFrame)===!1)return(p=c==null?void 0:c.logger)===null||p===void 0||p.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);(S=c==null?void 0:c.logger)===null||S===void 0||S.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return m.VoiceFocus.isSupported(Cr.augmentSpec(o),E)}static create(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0;var y,E,I;return u(this,void 0,void 0,function*(){S&&S.Meeting.Meeting&&(S=S.Meeting);const A=((I=(E=(y=S==null?void 0:S.Meeting)===null||y===void 0?void 0:y.MeetingFeatures)===null||E===void 0?void 0:E.Audio)===null||I===void 0?void 0:I.EchoReduction)==="AVAILABLE",L=p&&p.supported===!0&&p.model.name==="ns_es"&&!A,M=o.name==="ns_es"&&!A;if(L||M)throw new Error("Echo Reduction requested but not enabled.");const k=new Cr(o,c,p);return yield k.init(),k})}static configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return u(this,void 0,void 0,function*(){return new Cr(o,c,void 0).configure(!0)})}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(o,c){return u(this,void 0,void 0,function*(){if(this.supported)try{const[S,d]=yield this.allocateVoiceFocus(!0),y=Object.assign(Object.assign({},c),{es:this.spec.name==="ns_es"});return new n.default(o,S,d,y)}catch{return}})}static destroyVoiceFocus(o){var c;return u(this,void 0,void 0,function*(){(c=o==null?void 0:o.vf)===null||c===void 0||c.destroy()})}static augmentSpec(o){return!o||!o.assetGroup&&!o.revisionID?Object.assign(Object.assign({},o),{assetGroup:Cr.currentSDKAssetGroup()}):o}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u(this,void 0,void 0,function*(){const c={fetchBehavior:this.fetchBehavior,preResolve:o,logger:this.vfLogger};return m.VoiceFocus.configure(this.spec,c)})}init(){var o;return u(this,void 0,void 0,function*(){this.configuration||(this.configuration=this.configure());const c=yield this.configuration;if(!c.supported){this.supported=!1;return}this.pendingVoiceFocus=this.createVoiceFocus(c,this.preload);try{yield this.pendingVoiceFocus}catch(p){(o=this.logger)===null||o===void 0||o.error(`Unable to initialize Amazon Voice Focus: ${p}`),this.supported=!1}})}createVoiceFocus(o,c){return u(this,void 0,void 0,function*(){const p=new e.default;return this.vf=yield m.VoiceFocus.init(o,{delegate:p,preload:c,logger:this.vfLogger}),[this.vf,p]})}allocateVoiceFocus(o){return u(this,void 0,void 0,function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const c=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,c}return this.createVoiceFocus(yield this.configuration,o)})}static majorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const o=this.majorVersion();return o?`sdk-${o}`:"stable-v1"}static defaultFetchBehavior(){const o=Cr.majorMinorVersion()||"unknown",c=a.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(o)}&ua=${encodeURIComponent(c)}`}}constructor(o,{preload:c=!0,logger:p,fetchBehavior:S=Cr.defaultFetchBehavior()},d){this.spec=o,this.supported=!0,this.logger=p,this.vfLogger=p?new r.default(p):void 0,this.preload=c,this.fetchBehavior=S,this.spec=Cr.augmentSpec(this.spec),d&&(this.configuration=Promise.resolve(d))}},"VoiceFocusDeviceTransformer");l.VoiceFocusDeviceTransformer=t,l.default=t},439300:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})},g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const m=g(f(48839));let h=s(class OS{getInnerDevice(){return this.device}mute(n){return u(this,void 0,void 0,function*(){this.node&&(n?yield this.node.disable():yield this.node.enable())})}stop(){return u(this,void 0,void 0,function*(){this.node&&(this.node.disconnect(),yield this.node.stop())})}chooseNewInnerDevice(n){return u(this,void 0,void 0,function*(){return this.device===n&&!a(n)?this:new OS(n,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode)})}intrinsicDevice(){return u(this,void 0,void 0,function*(){if(this.failed)return this.device;const n=this.nodeOptions.es,e={echoCancellation:!n,googEchoCancellation:!n,googEchoCancellation2:!n,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return this.nodeOptions&&this.nodeOptions.agc!==void 0?t=this.nodeOptions.agc.useBuiltInAGC:t=!0,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?typeof this.device=="string"?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e})}createAudioNode(n){var e,t;return u(this,void 0,void 0,function*(){if(((e=this.node)===null||e===void 0?void 0:e.context)===n)return{start:this.node,end:this.node};const o=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if((t=this.node)===null||t===void 0||t.disconnect(),this.node=yield this.voiceFocus.createNode(n,o),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(n,{channelCount:1,channelCountMode:"explicit"});for(const S of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(S);this.createMixSourceNode()}const c=this.node,p=this.node;return{start:c,end:p}}catch(c){throw this.failed=!0,this.delegate.onFallback(this,c),c}})}observeMeetingAudio(n){return u(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;n.addAudioMixObserver(this);const e=yield n.getCurrentMeetingAudioStream();e&&this.addFarEndStream(e)})}unObserveMeetingAudio(n){return u(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;n.removeAudioMixObserver(this);const e=yield n.getCurrentMeetingAudioStream();e&&this.removeFarendStream(e)})}addObserver(n){this.delegate.addObserver(n)}removeObserver(n){this.delegate.removeObserver(n)}addFarEndStream(n){return u(this,void 0,void 0,function*(){!this.nodeOptions.es||!n||this.farEndStreamToAudioSourceNode.has(n)||(this.node?this.assignFarEndStreamToAudioSourceNode(n):this.farEndStreamToAudioSourceNode.set(n,null))})}removeFarendStream(n){var e;return u(this,void 0,void 0,function*(){(e=this.farEndStreamToAudioSourceNode.get(n))===null||e===void 0||e.disconnect(),this.farEndStreamToAudioSourceNode.delete(n)})}meetingAudioStreamBecameActive(n){return u(this,void 0,void 0,function*(){this.addFarEndStream(n)})}meetingAudioStreamBecameInactive(n){return u(this,void 0,void 0,function*(){this.removeFarendStream(n)})}assignFarEndStreamToAudioSourceNode(n){const e=this.node.context.createMediaStreamSource(n);e.channelCount=1,e.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(n,e),e.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}constructor(n,e,t,i,o=!1,c=void 0,p=new m.default,S=new Map,d=void 0,y=void 0){this.device=n,this.voiceFocus=e,this.delegate=t,this.nodeOptions=i,this.failed=o,this.node=c,this.browserBehavior=p,this.farEndStreamToAudioSourceNode=S,this.mixDestNode=d,this.mixSourceNode=y}},"VoiceFocusTransformDevice");function a(r){return r==="default"?!0:!r||typeof r!="object"?!1:"deviceId"in r&&r.deviceId==="default"||"id"in r&&r.id==="default"}s(a,"isDefaultDevice"),l.default=h},387639:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class{addObserver(g){this.observers.add(g)}removeObserver(g){this.observers.delete(g)}onFallback(g,m){var h;for(const a of this.observers)(h=a.voiceFocusFellBackToInnerStream)===null||h===void 0||h.call(a,g,m)}onCPUWarning(){var g;for(const m of this.observers)(g=m.voiceFocusInsufficientResources)===null||g===void 0||g.call(m)}constructor(){this.observers=new Set}},"VoiceFocusTransformDeviceDelegate");l.default=f},948159:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});let f=s(class ed{onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(g){let m=0;for(const h of g.streams){const a=!!h.attendeeId,r=!!h.externalUserId,n=h.hasOwnProperty("muted"),e=!!h.dropped;if(a){this.attendeeIdToStreamId[h.attendeeId]&&this.attendeeIdToStreamId[h.attendeeId]<h.audioStreamId&&delete this.attendeeIdToStreamId[h.attendeeId],this.streamIdToAttendeeId[h.audioStreamId]=h.attendeeId;const t=r?h.externalUserId:h.attendeeId;this.streamIdToExternalUserId[h.audioStreamId]=t,this.attendeeIdToStreamId[h.attendeeId]=h.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(h.attendeeId,!0,t,!1,{attendeeIndex:m++,attendeesInFrame:g.streams.length})}if(n){const t=this.streamIdToAttendeeId[h.audioStreamId],i=this.streamIdToExternalUserId[h.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(t,null,h.muted,null,i)}if(!a&&!n){const t=this.streamIdToAttendeeId[h.audioStreamId];if(t){const i=this.streamIdToExternalUserId[h.audioStreamId];delete this.streamIdToAttendeeId[h.audioStreamId],delete this.streamIdToExternalUserId[h.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[h.audioStreamId],this.attendeeIdToStreamId[t]===h.audioStreamId&&delete this.attendeeIdToStreamId[t];let o=!1;for(const c of Object.keys(this.streamIdToAttendeeId)){const p=parseInt(c);if(p>h.audioStreamId&&this.streamIdToAttendeeId[p]===t){o=!0;break}}o||this.realtimeController.realtimeSetAttendeeIdPresence(t,!1,i,e,{attendeeIndex:m++,attendeesInFrame:g.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(g),this.sessionReconnected=!1)}cleanUpState(g){const m=Object.values(this.streamIdToAttendeeId),h=g.streams.map(r=>r.attendeeId),a=m.filter(r=>!h.includes(r));for(const[r,n]of a.entries()){const e=this.attendeeIdToStreamId[n],t=this.streamIdToExternalUserId[e];if(delete this.streamIdToAttendeeId[e],delete this.streamIdToExternalUserId[e],delete this.warnedAboutMissingStreamIdMapping[e],delete this.attendeeIdToStreamId[n],n===this.selfAttendeeId){this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection");continue}this.realtimeController.realtimeSetAttendeeIdPresence(n,!1,t,!1,{attendeeIndex:r,attendeesInFrame:n.length})}}sendRealtimeUpdatesForAudioMetadata(g){let m=null,h=null;for(const a of g.attendeeStates){const r=this.attendeeIdForStreamId(a.audioStreamId);a.hasOwnProperty("volume")&&(m===null&&(m={}),r!==null&&(m[r]=this.normalizedVolume(a))),a.hasOwnProperty("signalStrength")&&(h===null&&(h={}),r!==null&&(h[r]=this.normalizedSignalStrength(a)))}this.applyRealtimeUpdatesForAudioMetadata(m,h)}normalizedVolume(g){const h=1-(-g.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(h,0),1)}normalizedSignalStrength(g){const m=g.signalStrength/ed.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(m,0),1)}applyRealtimeUpdatesForAudioMetadata(g,m){for(const h in this.streamIdToAttendeeId){const a=this.streamIdToAttendeeId[h],r=this.streamIdToExternalUserId[h];let n=null,e=null;g!==null&&(g.hasOwnProperty(a)?n=g[a]:n=ed.IMPLICIT_VOLUME),m!==null&&(m.hasOwnProperty(a)?e=m[a]:e=ed.IMPLICIT_SIGNAL_STRENGTH),(n!==null||e!==null)&&this.realtimeController.realtimeUpdateVolumeIndicator(a,n,null,e,r)}}attendeeIdForStreamId(g){if(g===0)return null;const m=this.streamIdToAttendeeId[g];return m||(this.warnedAboutMissingStreamIdMapping[g]||(this.warnedAboutMissingStreamIdMapping[g]=!0,this.logger.warn(`volume indicator stream id ${g} seen before being defined`)),null)}constructor(g,m,h,a,r){this.logger=g,this.realtimeController=m,this.minVolumeDecibels=h,this.maxVolumeDecibels=a,this.selfAttendeeId=r,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}},"DefaultVolumeIndicatorAdapter");l.default=f,f.MAX_SIGNAL_STRENGTH_LEVELS=2,f.IMPLICIT_VOLUME=0,f.IMPLICIT_SIGNAL_STRENGTH=1},19071:function(U,l,f){"use strict";var u=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const g=u(f(244504)),m=u(f(293975));let h=s(class{create(r,n,e){this.connection=new WebSocket(e?r:g.default.urlWithVersion(r),n),this.connection.binaryType="arraybuffer"}send(r){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return r instanceof Uint8Array?this.connection.send(r.buffer):this.connection.send(r),!0}catch(n){return this.logger.debug(()=>`send error: ${n.message}, websocket state=${m.default[this.readyState()]}`),!1}}close(r,n){var e;(e=this.connection)===null||e===void 0||e.close(r,n)}destroy(){this.connection=void 0}addEventListener(r,n){if(!this.connection){this.logger.warn("Cannot add event listener with no WebSocket connection.");return}this.connection.addEventListener(r,n)}removeEventListener(r,n){var e;(e=this.connection)===null||e===void 0||e.removeEventListener(r,n)}readyState(){if(!this.connection)return m.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return m.default.Connecting;case WebSocket.OPEN:return m.default.Open;case WebSocket.CLOSING:return m.default.Closing;case WebSocket.CLOSED:return m.default.Closed}}constructor(r){this.logger=r}},"DefaultWebSocketAdapter");l.default=h},293975:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WebSocketReadyState=void 0;var f;(function(u){u[u.None=0]="None",u[u.Connecting=1]="Connecting",u[u.Open=2]="Open",u[u.Closing=3]="Closing",u[u.Closed=4]="Closed"})(f=l.WebSocketReadyState||(l.WebSocketReadyState={})),l.default=f},615344:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(A,L,M,k){function w(N){return N instanceof M?N:new M(function(T){T(N)})}return s(w,"adopt"),new(M||(M=Promise))(function(N,T){function O(K){try{G(k.next(K))}catch(H){T(H)}}s(O,"fulfilled");function D(K){try{G(k.throw(K))}catch(H){T(H)}}s(D,"rejected");function G(K){K.done?N(K.value):w(K.value).then(O,D)}s(G,"step"),G((k=k.apply(A,L||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.decideModel=l.measureAndDecideExecutionApproach=void 0;const g=f(289927),m=f(915057),h=3,a=2.5,r=2.63,n=.6,e=.65,t=.5,i=.7,o={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};let c=s(class{roundtrip(L,M,k){return new Promise((w,N)=>{this.worker.then(T=>{let O;O=s(D=>{const{message:G,key:K}=D.data;G===M&&K===k&&(T.removeEventListener("message",O),w(D.data))},"listener"),T.addEventListener("message",O),T.postMessage(L)}).catch(T=>{var O;(O=this.logger)===null||O===void 0||O.error("Failed to load worker.",T),N(T)})})}supportsSIMD(L){const M="simd",k=L||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,w={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:k,key:M};return this.roundtrip(w,"simd-support",M).then(N=>N.supports)}measure(L,M){const k=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,w=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,N=L?w:k,T=`bench:${L}`,O={message:"measure",fetchBehavior:this.fetchBehavior,budget:M,path:N,key:T};return this.roundtrip(O,"measurement",T).then(D=>{if(D.measurement)return D.measurement;throw new Error("Failed to measure.")})}stop(){this.worker.then(L=>{var M;(M=this.logger)===null||M===void 0||M.debug("Stopping estimator worker."),L.terminate()}).catch(L=>{})}constructor(L,M){this.fetchConfig=L,this.logger=M;const k=`${L.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:L.headers,escapedQueryString:L.escapedQueryString},this.worker=g.loadWorker(k,"VoiceFocusEstimator",this.fetchBehavior,M)}},"Estimator");const p=s((A,L)=>A===1?n:L==="quality"?e*A:t*A,"inlineScoreMultiplier"),S=s(function(A){let{supportsSIMD:L,supportsSAB:M,duration:k,executionPreference:w="auto",simdPreference:N,variantPreference:T="auto",namePreference:O="default",usagePreference:D,executionQuantaPreference:G=h}=A,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,H=arguments.length>2?arguments[2]:void 0;const me=N==="force"||N!=="disable"&&L,we=k!==-1,ue=we?(me?a:r)/k:0,Pe=me?K.simd:K.wasm,Ye=we?p(G,D)*ue:0,be=we?i*ue:0,He=O,Ke=s(st=>({supported:!1,reason:st}),"unsupported");if(we){if(ue<Pe.noSupport)return Ke(`Performance score ${ue} worse than threshold ${Pe.noSupport}.`)}else if(w==="auto"||T==="auto")return Ke(`Missing explicit execution (${w}) or variant (${T}) preference, but no scoring performed.`);H==null||H.debug(`Bench duration ${k} yields inline score ${Ye} and worker score ${be}.`);const Ue=s((st,ut,We)=>({supported:!0,useSIMD:me,processor:st,executionApproach:ut,variant:We,executionQuanta:ut==="inline"?G:void 0,name:He}),"succeed"),ht=s((st,ut,We)=>ut!=="auto"?!we||st>We[ut]?ut:"failed":st>We.c100?"c100":st>We.c50?"c50":st>We.c20?"c20":st>We.c10?"c10":"failed","resolveVariant"),Tt=s(st=>{switch(st||"auto"){case"auto":{let ut=Tt("inline"),We=Tt("worker");return H==null||H.debug(`Reducing auto preference: ${JSON.stringify(ut)} vs ${JSON.stringify(We)}`),ut.supported===!1||We.supported===!1?We:ut.variant===We.variant||ut.variant==="c50"?ut:We}case"worker":return m.supportsSharedArrayBuffer(globalThis,window,H)?Tt("worker-sab"):Tt("worker-postMessage");case"inline":{const ut=ht(Ye,T,Pe.inline);return ut==="failed"?Ke(`Performance score ${Ye} not sufficient for inline use with variant preference ${T}.`):Ue("voicefocus-inline-processor","inline",ut)}case"worker-sab":{if(!M){const We="Requested worker-sab but no SharedArrayBuffer support.";return H==null||H.warn(We),{supported:!1,reason:We}}const ut=ht(be,T,Pe.worker);return ut==="failed"?Ke(`Performance score ${be} not sufficient for worker use with variant preference ${T}.`):Ue("voicefocus-worker-sab-processor","worker-sab",ut)}case"worker-postMessage":{const ut=ht(be,T,Pe.worker);if(ut==="failed")return Ke(`Performance score ${be} not sufficient for worker use.`);if(He==="ns_es"){const We="Requested echo suppression but postMessage executor does not support it.";return H==null||H.warn(We),{supported:!1,reason:We}}return Ue("voicefocus-worker-postMessage-processor","worker-postMessage",ut)}}},"reducePreference");return Tt(w)},"decideExecutionApproach"),d=s((A,L,M,k)=>u(void 0,void 0,void 0,function*(){const w={supportsSIMD:A,supportsSAB:m.supportsSharedArrayBuffer(globalThis,window,M),duration:-1};if(A)return M==null||M.info("Supports SIMD: true (force)"),w;const N=!k,T=k||new c(L,M);try{const O=!m.isOldChrome(window,M)&&(yield T.supportsSIMD());return M==null||M.info(`Supports SIMD: ${O} (force: ${A})`),w.supportsSIMD=O,w}finally{N&&T.stop()}}),"featureCheck"),y=s((A,L,M,k)=>u(void 0,void 0,void 0,function*(){const w=new c(L,k);try{const N=yield d(A,L,k,w);if(N.supportsSIMD)try{return N.duration=yield w.measure(!0,M),k==null||k.info("SIMD timing:",N.duration),N}catch{k==null||k.warn("Failed SIMD estimation; falling back to non-SIMD."),N.supportsSIMD=!1}return N.duration=yield w.measure(!1,M),k==null||k.info("No-SIMD timing:",N.duration),N}catch(N){throw k==null||k.error("Could not feature check.",N),N}finally{w.stop()}}),"estimateAndFeatureCheck"),E=s(function(A,L,M){let k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:o;return u(void 0,void 0,void 0,function*(){let w=A.executionPreference;const{usagePreference:N,variantPreference:T,namePreference:O,simdPreference:D,estimatorBudget:G,executionQuantaPreference:K}=A;N==="interactivity"&&w!=="inline"&&(M==null||M.debug(`Overriding execution preference ${w} to reflect interactivity preference.`),w="inline");const H=D==="force",q=T!=="auto",me=w!=="auto";let we;try{q&&me?we=yield d(H,L,M):we=yield y(H,L,G,M)}catch(ue){throw M==null||M.error("Could not load estimator.",ue),new Error("Could not load Voice Focus estimator.")}return S(Object.assign(Object.assign({},we),{simdPreference:D,executionPreference:w,variantPreference:T,namePreference:O,usagePreference:N,executionQuantaPreference:K}),k,M)})},"measureAndDecideExecutionApproach");l.measureAndDecideExecutionApproach=E;const I=s(A=>{let{category:L,name:M,variant:k,simd:w,url:N}=A;return`${L}-${M}-${k}-v1${w?"_simd":""}`},"decideModel");l.decideModel=I},142406:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isValidRevisionID=l.isValidAssetGroup=l.resolveURL=l.addQueryParams=l.withQueryString=l.withRequestHeaders=l.fetchWithBehavior=void 0;function f(e,t,i){if(!i)return fetch(e,t);const o=g(e,i),c=u(t,i);return fetch(o,c)}s(f,"fetchWithBehavior"),l.fetchWithBehavior=f;function u(e,t){return t!=null&&t.headers?e?Object.assign(Object.assign({},e),{headers:Object.assign(Object.assign({},e.headers||{}),t.headers)}):{headers:t.headers}:e}s(u,"withRequestHeaders"),l.withRequestHeaders=u;function g(e,t){if(!(t!=null&&t.escapedQueryString))return e;const i=e.lastIndexOf("?")!==-1;return`${e}${i?"&":"?"}${t.escapedQueryString}`}s(g,"withQueryString"),l.withQueryString=g;function m(e,t){const i=Object.keys(t);if(!i.length)return e;const o=new URLSearchParams(e==null?void 0:e.escapedQueryString);for(const c of i)o.append(c,t[c]);return Object.assign(Object.assign({},e),{escapedQueryString:o.toString()})}s(m,"addQueryParams"),l.addQueryParams=m;const h={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function a(e,t){return f(e,h,t).then(i=>i.redirected?i.url:e)}s(a,"resolveURL"),l.resolveURL=a;function r(e){return!!e&&/^[-.a-zA-Z0-9]+$/.test(e)}s(r,"isValidAssetGroup"),l.isValidAssetGroup=r;function n(e){return!!e&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(e)}s(n,"isValidRevisionID"),l.isValidRevisionID=n},289927:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.loadWorker=void 0;const u=f(142406),g={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},m=s((h,a,r,n)=>{n==null||n.debug(`Loading ${a} worker from ${h}.`);let e=!1;try{e=self.origin===new URL(h).origin}catch(t){n==null||n.error("Could not compare origins.",t)}if(e){const t=u.withQueryString(h,r);return Promise.resolve(new Worker(t,{name:a}))}return u.fetchWithBehavior(h,g,r).then(t=>{if(t.ok)return t.blob().then(i=>new Worker(window.URL.createObjectURL(i)));throw new Error("Fetch failed.")})},"loadWorker");l.loadWorker=m},915057:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(d,y,E,I){function A(L){return L instanceof E?L:new E(function(M){M(L)})}return s(A,"adopt"),new(E||(E=Promise))(function(L,M){function k(T){try{N(I.next(T))}catch(O){M(O)}}s(k,"fulfilled");function w(T){try{N(I.throw(T))}catch(O){M(O)}}s(w,"rejected");function N(T){T.done?L(T.value):A(T.value).then(k,w)}s(N,"step"),N((I=I.apply(d,y||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.isOldChrome=l.supportsWASMStreaming=l.supportsSharedArrayBuffer=l.supportsWASM=l.supportsAudioWorklet=l.supportsWorker=l.supportsVoiceFocusWorker=l.supportsWASMPostMessage=l.isSafari=void 0;const g=f(289927),m=s(function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/)},"isChrome"),h=s(function(){const y=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent,E=y.match(/Safari\//),I=y.match(/Chrom(?:e|ium)\//);return!!(E&&!I)},"isSafari");l.isSafari=h;const a=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;return l.isSafari(d)?!1:m(d)?(p(d)||0)<95:!0},"supportsWASMPostMessage");l.supportsWASMPostMessage=a;const r=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0,E=arguments.length>2?arguments[2]:void 0;return u(void 0,void 0,void 0,function*(){if(!l.supportsWorker(d,E))return!1;const I=`${y.paths.workers}worker-v1.js`;try{const A=yield g.loadWorker(I,"VoiceFocusTestWorker",y,E);try{A.terminate()}catch(L){E==null||E.debug("Failed to terminate worker.",L)}return!0}catch(A){return E==null||E.info("Failed to fetch and instantiate test worker",A),!1}})},"supportsVoiceFocusWorker");l.supportsVoiceFocusWorker=r;const n=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.Worker}catch(E){return y==null||y.info("Does not support Worker",E),!1}},"supportsWorker");l.supportsWorker=n;const e=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.AudioWorklet&&!!d.AudioWorkletNode}catch(E){return y==null||y.info("Does not support Audio Worklet",E),!1}},"supportsAudioWorklet");l.supportsAudioWorklet=e;const t=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.WebAssembly&&(!!d.WebAssembly.compile||!!d.WebAssembly.compileStreaming)}catch(E){return y==null||y.info("Does not support WASM",E),!1}},"supportsWASM");l.supportsWASM=t;const i=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis,E=arguments.length>2?arguments[2]:void 0;try{return!!d.SharedArrayBuffer&&(!!y.chrome||!!d.crossOriginIsolated)}catch{return E==null||E.info("Does not support SharedArrayBuffer."),!1}},"supportsSharedArrayBuffer");l.supportsSharedArrayBuffer=i;const o=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;var E;try{return!!(!((E=d.WebAssembly)===null||E===void 0)&&E.compileStreaming)}catch(I){return y==null||y.info("Does not support WASM streaming compilation",I),!1}},"supportsWASMStreaming");l.supportsWASMStreaming=o;const c=90,p=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;try{if(!d.chrome)return}catch{}const y=d.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(y)return parseInt(y[1],10)},"chromeVersion"),S=s(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;const E=p(d);return E&&E<c?(y==null||y.debug(`Chrome ${E} has incomplete SIMD support.`),!0):!1},"isOldChrome");l.isOldChrome=S},708919:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusAudioWorkletNode=void 0;let f=s(class extends(typeof globalThis<"u"&&globalThis.AudioWorkletNode||s(class{},"Sadness")){},"VoiceFocusAudioWorkletNode");l.VoiceFocusAudioWorkletNode=f},523850:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(T,O,D,G){function K(H){return H instanceof D?H:new D(function(q){q(H)})}return s(K,"adopt"),new(D||(D=Promise))(function(H,q){function me(Pe){try{ue(G.next(Pe))}catch(Ye){q(Ye)}}s(me,"fulfilled");function we(Pe){try{ue(G.throw(Pe))}catch(Ye){q(Ye)}}s(we,"rejected");function ue(Pe){Pe.done?H(Pe.value):K(Pe.value).then(me,we)}s(ue,"step"),ue((G=G.apply(T,O||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getAudioInput=l.createAudioContext=l.VoiceFocus=void 0;const g=f(615344),m=f(142406),h=f(289927),a=f(915057),r=f(169361),n=f(818701),e=f(540572),i={useVoiceFocusAGC:!1,useBuiltInAGC:!0},o="stable-v1",c="https://static.sdkassets.chime.aws",p={processors:`${c}/processors/`,workers:`${c}/workers/`,wasm:`${c}/wasm/`,models:`${c}/wasm/`},S={latencyHint:0},d={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},y=Object.assign(Object.assign({},d),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),E=Object.assign(Object.assign({},d),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),I={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:n.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:e.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:r.default}},A=s((T,O)=>{if(T!==void 0&&!m.isValidAssetGroup(T))throw new Error(`Invalid asset group ${T}`);if(O!==void 0&&!m.isValidRevisionID(O))throw new Error(`Invalid revision ID ${O}`)},"validateAssetSpec"),L=s((T,O)=>{let D;if(O.useBuiltInAGC?D=y:D=E,!T)return{audio:D};if(!T.audio)return T;if(T.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},T),{audio:T.audio===!0?D:Object.assign(Object.assign({},T.audio),D)})},"mungeConstraints"),M=s((T,O)=>`${O.models}${g.decideModel(T)}.wasm`,"urlForModel");let k=s(class AS{static isSupported(O,D){const{fetchBehavior:G,logger:K}=D||{};if(typeof globalThis>"u")return K==null||K.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!a.supportsAudioWorklet(globalThis,K))return K==null||K.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!a.supportsWASM(globalThis,K))return K==null||K.debug("Browser does not support WASM."),Promise.resolve(!1);a.supportsWASMStreaming(globalThis,K)||K==null||K.debug("Browser does not support streaming WASM compilation.");const{assetGroup:H=o,revisionID:q,paths:me=p}=O||{};A(H,q);const we=q?{revisionID:q}:{assetGroup:H},ue=m.addQueryParams(G,we),Pe=Object.assign(Object.assign({},ue),{paths:me});return a.supportsVoiceFocusWorker(globalThis,Pe,K)}static mungeExecutionPreference(O,D){const G=O===void 0||O==="auto";if(a.isSafari(globalThis)){if(G||O==="inline")return"inline";if(!G)throw new Error(`Unsupported execution preference ${O}`)}if(O==="worker-sab"&&!a.supportsSharedArrayBuffer(globalThis,globalThis,D))throw new Error(`Unsupported execution preference ${O}`);return O||"auto"}static configure(O,D){return u(this,void 0,void 0,function*(){const{fetchBehavior:G,preResolve:K,logger:H}=D||{},{category:q="voicefocus",name:me="default",variant:we="auto",assetGroup:ue=o,revisionID:Pe,simd:Ye="detect",executionPreference:be="auto",executionQuantaPreference:He,usagePreference:Ke="interactivity",estimatorBudget:Ue=100,paths:ht=p,thresholds:Tt}=O||{};if(H==null||H.debug("Configuring Voice Focus with spec",O),q!==void 0&&q!=="voicefocus")throw new Error(`Unrecognized category ${q}`);if(me!==void 0&&me!=="default"&&me!=="ns_es")throw new Error(`Unrecognized feature name ${me}`);if(we!==void 0&&!["auto","c100","c50","c20","c10"].includes(we))throw new Error(`Unrecognized feature variant ${we}`);if(He!==void 0&&![1,2,3].includes(He))throw new Error(`Unrecognized execution quanta preference ${He}`);if(A(ue,Pe),Ye!==void 0&&!["detect","force","disable"].includes(Ye))throw new Error(`Unrecognized SIMD option ${Ye}`);if(be!==void 0&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(be))throw new Error(`Unrecognized execution preference ${be}`);if(Ke!==void 0&&!["quality","interactivity"].includes(Ke))throw new Error(`Unrecognized usage preference ${Ke}`);const st={executionPreference:this.mungeExecutionPreference(be,H),usagePreference:Ke,executionQuantaPreference:He,variantPreference:we,namePreference:me,simdPreference:Ye,estimatorBudget:Ue},ut=Pe?{revisionID:Pe}:{assetGroup:ue},We=m.addQueryParams(G,ut),_t=Object.assign({paths:ht},We),Rt=yield g.measureAndDecideExecutionApproach(st,_t,H,Tt);if(Rt.supported===!1)return{supported:!1,reason:Rt.reason};H==null||H.info("Decided execution approach",Rt);const{useSIMD:Ae,processor:$t,variant:rt,executionQuanta:Ft}=Rt,en={category:q||"voicefocus",name:me||"default",variant:rt,simd:Ae};if(K){const on=M(en,ht);en.url=yield m.resolveURL(on,We)}return{fetchConfig:_t,model:en,processor:$t,executionQuanta:Ft,supported:!0}})}static init(O,D){let{delegate:G,preload:K=!0,logger:H}=D;return u(this,void 0,void 0,function*(){if(O.supported===!1)throw new Error("Voice Focus not supported. Reason: "+O.reason);const{model:q,processor:me,fetchConfig:we,executionQuanta:ue}=O,{simd:Pe,name:Ye}=q,{paths:be}=we;if(me!=="voicefocus-inline-processor"&&me!=="voicefocus-worker-postMessage-processor"&&me!=="voicefocus-worker-sab-processor")throw new Error(`Unknown processor ${me}`);const He=q.url||M(q,be);H==null||H.debug(`Using model URL ${He}.`);const Ke=`${be.wasm}audio_buffer-v1${Pe?"_simd":""}.wasm`,Ue=`${be.wasm}resampler-v1${Pe?"_simd":""}.wasm`,ht=`${be.workers}worker-v1.js`,{file:Tt,node:st}=I[me],ut=`${be.processors}${Tt}`,We=yield h.loadWorker(ht,"VoiceFocusWorker",we,H);if(K){H==null||H.debug("Preloading",He);let $t=a.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";We.postMessage({message:$t,preload:!0,key:"model",fetchBehavior:we,path:He})}const Rt={processor:me,worker:We,audioBufferURL:Ke,resamplerURL:Ue,fetchBehavior:we,modelURL:He,delegate:G,logger:H,numberOfInputs:Ye==="ns_es"?2:1},Ae=new AS(We,ut,st,Rt,ue);return Promise.resolve(Ae)})}createNode(O,D){var G;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:K=O.sampleRate===16e3?16e3:48e3,enabled:H=!0,agc:q=i}=D||{},me=D==null?void 0:D.es,we={voiceFocusSampleRate:K,enabled:H,sendBufferCount:10,prefill:6,agc:q,executionQuanta:this.executionQuanta,supportFarendStream:me},ue=m.withQueryString(this.processorURL,(G=this.nodeOptions)===null||G===void 0?void 0:G.fetchBehavior);return O.audioWorklet.addModule(ue).then(()=>new this.nodeConstructor(O,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:we})))}applyToStream(O,D,G){return u(this,void 0,void 0,function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const K=D.createMediaStreamSource(O),H=yield this.applyToSourceNode(K,D,G),q=D.createMediaStreamDestination();return H.connect(q),{node:H,source:K,destination:q,stream:q.stream}})}applyToSourceNode(O,D,G){return u(this,void 0,void 0,function*(){const K=yield this.createNode(D,G);return O.connect(K),K})}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}constructor(O,D,G,K,H){this.processorURL=D,this.nodeConstructor=G,this.nodeOptions=K,this.executionQuanta=H,this.internal={worker:O,nodeOptions:K,isDestroyed:!1}}},"VoiceFocus");l.VoiceFocus=k;const w=s(function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S;return new(window.AudioContext||window.webkitAudioContext)(T)},"createAudioContext");l.createAudioContext=w;const N=s((T,O,D)=>u(void 0,void 0,void 0,function*(){var G,K;const{constraints:H,spec:q,delegate:me,preload:we=!0,options:ue}=O,{logger:Pe}=D,Ye=yield k.configure(q,D);if(!Ye.supported)return(G=D.logger)===null||G===void 0||G.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(H);const be=yield k.init(Ye,{delegate:me,preload:we,logger:Pe}),He=((K=O.options)===null||K===void 0?void 0:K.agc)||i,Ke=yield window.navigator.mediaDevices.getUserMedia(L(H,He));return be.applyToStream(Ke,T,ue).then(Ue=>Ue.stream)}),"getAudioInput");l.getAudioInput=N},169361:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(r,n,e,t){function i(o){return o instanceof e?o:new e(function(c){c(o)})}return s(i,"adopt"),new(e||(e=Promise))(function(o,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}s(p,"fulfilled");function S(y){try{d(t.throw(y))}catch(E){c(E)}}s(S,"rejected");function d(y){y.done?o(y.value):i(y.value).then(p,S)}s(d,"step"),d((t=t.apply(r,n||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const g=f(915057),m=f(708919),h=5*1e3;let a=s(class extends m.VoiceFocusAudioWorkletNode{onModuleBufferLoaded(n,e){this.port.postMessage({message:"module-buffer",buffer:n,key:e})}onModuleLoaded(n,e){this.port.postMessage({message:"module",module:n,key:e})}enable(){return u(this,void 0,void 0,function*(){this.port.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.port.postMessage({message:"disable"})})}stop(){var n;return u(this,void 0,void 0,function*(){this.port.postMessage({message:"stop"});try{(n=this.worker)===null||n===void 0||n.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()})}onProcessorMessage(n){var e,t,i;const o=n.data;switch(o.message){case"cpu":this.cpuWarningCount++;const c=Date.now(),p=this.cpuWarningLastTriggered||c,S=Math.abs(c-p);(!this.cpuWarningLastTriggered||S>h)&&((e=this.logger)===null||e===void 0||e.warn(`CPU warning (count: ${this.cpuWarningCount}):`,o.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=c),(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;default:(i=this.logger)===null||i===void 0||i.debug("Ignoring processor message.")}}onWorkerMessage(n){const e=n.data;switch(e.message){case"module-buffer":if(!e.buffer||!e.key)return;this.onModuleBufferLoaded(e.buffer,e.key);break;case"module":if(!e.module||!e.key)return;this.onModuleLoaded(e.module,e.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}constructor(n,e){super(n,e.processor,e),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:t,worker:i,fetchBehavior:o,logger:c,delegate:p}=e;this.logger=c,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=p,c&&c.debug("VoiceFocusInlineNode:",t),this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this);const S=g.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:S,key:"model",fetchBehavior:o,path:t})}},"VoiceFocusInlineNode");l.default=a},540572:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(a,r,n,e){function t(i){return i instanceof n?i:new n(function(o){o(i)})}return s(t,"adopt"),new(n||(n=Promise))(function(i,o){function c(d){try{S(e.next(d))}catch(y){o(y)}}s(c,"fulfilled");function p(d){try{S(e.throw(d))}catch(y){o(y)}}s(p,"rejected");function S(d){d.done?i(d.value):t(d.value).then(c,p)}s(S,"step"),S((e=e.apply(a,r||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const g=f(915057),m=f(708919);let h=s(class extends m.VoiceFocusAudioWorkletNode{enable(){return u(this,void 0,void 0,function*(){this.worker.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.worker.postMessage({message:"disable"})})}stop(){return u(this,void 0,void 0,function*(){try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(r){var n;const e=r.data;switch(e.message){case"ready":this.port.postMessage({message:"ready",shared:e.shared},e.shared?Object.values(e.shared):[]);break;case"data":if(!e.buffer)return;this.port.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(e);break;case"cpu":(n=this.delegate)===null||n===void 0||n.onCPUWarning();break;case"processing":this.port.postMessage(e);break;default:return}}onProcessorMessage(r){var n;const e=r.data;switch(e.message){case"data":if(!e.buffer)return;this.worker.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"cpu":(n=this.delegate)===null||n===void 0||n.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(e);break;default:return}}constructor(r,n){super(r,n.processor,n),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:e,audioBufferURL:t,worker:i,fetchBehavior:o,delegate:c}=n;this.delegate=c,this.worker=i,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:p,agc:S,supportFarendStream:d}=n.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:r.sampleRate===16e3?160:480,enabled:p,agc:S,fetchBehavior:o,model:e,supportFarendStream:d});const y=g.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:y,key:"buffer",fetchBehavior:o,path:t})}},"VoiceFocusWorkerPostMessageNode");l.default=h},818701:function(U,l,f){"use strict";var u=this&&this.__awaiter||function(n,e,t,i){function o(c){return c instanceof t?c:new t(function(p){p(c)})}return s(o,"adopt"),new(t||(t=Promise))(function(c,p){function S(E){try{y(i.next(E))}catch(I){p(I)}}s(S,"fulfilled");function d(E){try{y(i.throw(E))}catch(I){p(I)}}s(d,"rejected");function y(E){E.done?c(E.value):o(E.value).then(S,d)}s(y,"step"),y((i=i.apply(n,e||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const g=f(915057),m=f(708919),h={ready:0,enabled:1},a={disabled:0,enabled:1,stopped:2};let r=s(class extends m.VoiceFocusAudioWorkletNode{enable(){return u(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,h.enabled,a.enabled),Atomics.notify(this.state,h.ready,1)):this.worker.postMessage({message:"enable"})})}disable(){return u(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,h.enabled,a.disabled),Atomics.notify(this.state,h.ready,1)):this.worker.postMessage({message:"disable"})})}stop(){return u(this,void 0,void 0,function*(){if(this.state)Atomics.store(this.state,h.enabled,a.stopped),Atomics.notify(this.state,h.ready,1);else try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(e){var t;const i=e.data;switch(i.message){case"ready":if(!i.shared)throw new Error("No shared state.");this.state=new Int32Array(i.shared.state),this.port.postMessage(i);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(i);break;case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"processing":this.port.postMessage(i);break;default:return}}onProcessorMessage(e){var t;const i=e.data;switch(i.message){case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(i);break;default:}}constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:i,resamplerURL:o,worker:c,fetchBehavior:p,delegate:S}=t;this.delegate=S,this.worker=c,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:d,supportFarendStream:y}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:e.sampleRate===16e3?160:480,enabled:d,model:i,supportFarendStream:y});const E=g.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:E,key:"resampler",fetchBehavior:p,path:o})}},"VoiceFocusWorkerBufferNode");l.default=r},664207:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.RawSha256=void 0;var u=f(173271),g=function(){function m(){this.state=Int32Array.from(u.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return s(m,"RawSha2561"),m.prototype.update=function(h){if(this.finished)throw new Error("Attempted to update an already finished hash.");var a=0,r=h.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>u.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=h[a++],r--,this.bufferLength===u.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},m.prototype.digest=function(){if(!this.finished){var h=this.bytesHashed*8,a=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(a.setUint8(this.bufferLength++,128),r%u.BLOCK_SIZE>=u.BLOCK_SIZE-8){for(var n=this.bufferLength;n<u.BLOCK_SIZE;n++)a.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<u.BLOCK_SIZE-8;n++)a.setUint8(n,0);a.setUint32(u.BLOCK_SIZE-8,Math.floor(h/4294967296),!0),a.setUint32(u.BLOCK_SIZE-4,h),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(u.DIGEST_LENGTH),n=0;n<8;n++)e[n*4]=this.state[n]>>>24&255,e[n*4+1]=this.state[n]>>>16&255,e[n*4+2]=this.state[n]>>>8&255,e[n*4+3]=this.state[n]>>>0&255;return e},m.prototype.hashBuffer=function(){for(var h=this,a=h.buffer,r=h.state,n=r[0],e=r[1],t=r[2],i=r[3],o=r[4],c=r[5],p=r[6],S=r[7],d=0;d<u.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(a[d*4]&255)<<24|(a[d*4+1]&255)<<16|(a[d*4+2]&255)<<8|a[d*4+3]&255;else{var y=this.temp[d-2],E=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10;y=this.temp[d-15];var I=(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;this.temp[d]=(E+this.temp[d-7]|0)+(I+this.temp[d-16]|0)}var A=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&c^~o&p)|0)+(S+(u.KEY[d]+this.temp[d]|0)|0)|0,L=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&e^n&t^e&t)|0;S=p,p=c,c=o,o=i+A|0,i=t,t=e,e=n,n=A+L|0}r[0]+=n,r[1]+=e,r[2]+=t,r[3]+=i,r[4]+=o,r[5]+=c,r[6]+=p,r[7]+=S},m}();l.RawSha256=g},173271:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MAX_HASHABLE_LENGTH=l.INIT=l.KEY=l.DIGEST_LENGTH=l.BLOCK_SIZE=void 0,l.BLOCK_SIZE=64,l.DIGEST_LENGTH=32,l.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},636934:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});var u=f(587314);u.__exportStar(f(827424),l)},827424:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var u=f(587314),g=f(173271),m=f(664207),h=f(87711),a=function(){function n(e){if(this.hash=new m.RawSha256,e){this.outer=new m.RawSha256;var t=r(e),i=new Uint8Array(g.BLOCK_SIZE);i.set(t);for(var o=0;o<g.BLOCK_SIZE;o++)t[o]^=54,i[o]^=92;this.hash.update(t),this.outer.update(i);for(var o=0;o<t.byteLength;o++)t[o]=0}}return s(n,"Sha2561"),n.prototype.update=function(e){if(!((0,h.isEmptyData)(e)||this.error))try{this.hash.update((0,h.convertToBuffer)(e))}catch(t){this.error=t}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){return[2,this.digestSync()]})})},n}();l.Sha256=a;function r(n){var e=(0,h.convertToBuffer)(n);if(e.byteLength>g.BLOCK_SIZE){var t=new m.RawSha256;t.update(e),e=t.digest()}var i=new Uint8Array(g.BLOCK_SIZE);return i.set(e),i}s(r,"bufferFromSecret")},114295:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertToBuffer=void 0;var u=f(940612),g=typeof Buffer<"u"&&Buffer.from?function(h){return Buffer.from(h,"utf8")}:u.fromUtf8;function m(h){return h instanceof Uint8Array?h:typeof h=="string"?g(h):ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(h)}s(m,"convertToBuffer"),l.convertToBuffer=m},87711:(U,l,f)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=l.numToUint8=l.isEmptyData=l.convertToBuffer=void 0;var u=f(114295);Object.defineProperty(l,"convertToBuffer",{enumerable:!0,get:function(){return u.convertToBuffer}});var g=f(821422);Object.defineProperty(l,"isEmptyData",{enumerable:!0,get:function(){return g.isEmptyData}});var m=f(765672);Object.defineProperty(l,"numToUint8",{enumerable:!0,get:function(){return m.numToUint8}});var h=f(307861);Object.defineProperty(l,"uint32ArrayFrom",{enumerable:!0,get:function(){return h.uint32ArrayFrom}})},821422:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function f(u){return typeof u=="string"?u.length===0:u.byteLength===0}s(f,"isEmptyData"),l.isEmptyData=f},765672:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.numToUint8=void 0;function f(u){return new Uint8Array([(u&4278190080)>>24,(u&16711680)>>16,(u&65280)>>8,u&255])}s(f,"numToUint8"),l.numToUint8=f},307861:(U,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=void 0;function f(u){if(!Uint32Array.from){for(var g=new Uint32Array(u.length),m=0;m<u.length;)g[m]=u[m],m+=1;return g}return Uint32Array.from(u)}s(f,"uint32ArrayFrom"),l.uint32ArrayFrom=f},477051:(U,l,f)=>{"use strict";const{Deflate:u,deflate:g,deflateRaw:m,gzip:h}=f(151328),{Inflate:a,inflate:r,inflateRaw:n,ungzip:e}=f(95484),t=f(5380);U.exports.Deflate=u,U.exports.deflate=g,U.exports.deflateRaw=m,U.exports.gzip=h,U.exports.Inflate=a,U.exports.inflate=r,U.exports.inflateRaw=n,U.exports.ungzip=e,U.exports.constants=t},151328:(U,l,f)=>{"use strict";const u=f(880970),g=f(870500),m=f(351387),h=f(362853),a=f(426451),r=Object.prototype.toString,{Z_NO_FLUSH:n,Z_SYNC_FLUSH:e,Z_FULL_FLUSH:t,Z_FINISH:i,Z_OK:o,Z_STREAM_END:c,Z_DEFAULT_COMPRESSION:p,Z_DEFAULT_STRATEGY:S,Z_DEFLATED:d}=f(5380);function y(L){this.options=g.assign({level:p,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:S},L||{});let M=this.options;M.raw&&M.windowBits>0?M.windowBits=-M.windowBits:M.gzip&&M.windowBits>0&&M.windowBits<16&&(M.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let k=u.deflateInit2(this.strm,M.level,M.method,M.windowBits,M.memLevel,M.strategy);if(k!==o)throw new Error(h[k]);if(M.header&&u.deflateSetHeader(this.strm,M.header),M.dictionary){let w;if(typeof M.dictionary=="string"?w=m.string2buf(M.dictionary):r.call(M.dictionary)==="[object ArrayBuffer]"?w=new Uint8Array(M.dictionary):w=M.dictionary,k=u.deflateSetDictionary(this.strm,w),k!==o)throw new Error(h[k]);this._dict_set=!0}}s(y,"Deflate"),y.prototype.push=function(L,M){const k=this.strm,w=this.options.chunkSize;let N,T;if(this.ended)return!1;for(M===~~M?T=M:T=M===!0?i:n,typeof L=="string"?k.input=m.string2buf(L):r.call(L)==="[object ArrayBuffer]"?k.input=new Uint8Array(L):k.input=L,k.next_in=0,k.avail_in=k.input.length;;){if(k.avail_out===0&&(k.output=new Uint8Array(w),k.next_out=0,k.avail_out=w),(T===e||T===t)&&k.avail_out<=6){this.onData(k.output.subarray(0,k.next_out)),k.avail_out=0;continue}if(N=u.deflate(k,T),N===c)return k.next_out>0&&this.onData(k.output.subarray(0,k.next_out)),N=u.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===o;if(k.avail_out===0){this.onData(k.output);continue}if(T>0&&k.next_out>0){this.onData(k.output.subarray(0,k.next_out)),k.avail_out=0;continue}if(k.avail_in===0)break}return!0},y.prototype.onData=function(L){this.chunks.push(L)},y.prototype.onEnd=function(L){L===o&&(this.result=g.flattenChunks(this.chunks)),this.chunks=[],this.err=L,this.msg=this.strm.msg};function E(L,M){const k=new y(M);if(k.push(L,!0),k.err)throw k.msg||h[k.err];return k.result}s(E,"deflate");function I(L,M){return M=M||{},M.raw=!0,E(L,M)}s(I,"deflateRaw");function A(L,M){return M=M||{},M.gzip=!0,E(L,M)}s(A,"gzip"),U.exports.Deflate=y,U.exports.deflate=E,U.exports.deflateRaw=I,U.exports.gzip=A,U.exports.constants=f(5380)},95484:(U,l,f)=>{"use strict";const u=f(368162),g=f(870500),m=f(351387),h=f(362853),a=f(426451),r=f(569645),n=Object.prototype.toString,{Z_NO_FLUSH:e,Z_FINISH:t,Z_OK:i,Z_STREAM_END:o,Z_NEED_DICT:c,Z_STREAM_ERROR:p,Z_DATA_ERROR:S,Z_MEM_ERROR:d}=f(5380);function y(A){this.options=g.assign({chunkSize:1024*64,windowBits:15,to:""},A||{});const L=this.options;L.raw&&L.windowBits>=0&&L.windowBits<16&&(L.windowBits=-L.windowBits,L.windowBits===0&&(L.windowBits=-15)),L.windowBits>=0&&L.windowBits<16&&!(A&&A.windowBits)&&(L.windowBits+=32),L.windowBits>15&&L.windowBits<48&&(L.windowBits&15||(L.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let M=u.inflateInit2(this.strm,L.windowBits);if(M!==i)throw new Error(h[M]);if(this.header=new r,u.inflateGetHeader(this.strm,this.header),L.dictionary&&(typeof L.dictionary=="string"?L.dictionary=m.string2buf(L.dictionary):n.call(L.dictionary)==="[object ArrayBuffer]"&&(L.dictionary=new Uint8Array(L.dictionary)),L.raw&&(M=u.inflateSetDictionary(this.strm,L.dictionary),M!==i)))throw new Error(h[M])}s(y,"Inflate"),y.prototype.push=function(A,L){const M=this.strm,k=this.options.chunkSize,w=this.options.dictionary;let N,T,O;if(this.ended)return!1;for(L===~~L?T=L:T=L===!0?t:e,n.call(A)==="[object ArrayBuffer]"?M.input=new Uint8Array(A):M.input=A,M.next_in=0,M.avail_in=M.input.length;;){for(M.avail_out===0&&(M.output=new Uint8Array(k),M.next_out=0,M.avail_out=k),N=u.inflate(M,T),N===c&&w&&(N=u.inflateSetDictionary(M,w),N===i?N=u.inflate(M,T):N===S&&(N=c));M.avail_in>0&&N===o&&M.state.wrap>0&&A[M.next_in]!==0;)u.inflateReset(M),N=u.inflate(M,T);switch(N){case p:case S:case c:case d:return this.onEnd(N),this.ended=!0,!1}if(O=M.avail_out,M.next_out&&(M.avail_out===0||N===o))if(this.options.to==="string"){let D=m.utf8border(M.output,M.next_out),G=M.next_out-D,K=m.buf2string(M.output,D);M.next_out=G,M.avail_out=k-G,G&&M.output.set(M.output.subarray(D,D+G),0),this.onData(K)}else this.onData(M.output.length===M.next_out?M.output:M.output.subarray(0,M.next_out));if(!(N===i&&O===0)){if(N===o)return N=u.inflateEnd(this.strm),this.onEnd(N),this.ended=!0,!0;if(M.avail_in===0)break}}return!0},y.prototype.onData=function(A){this.chunks.push(A)},y.prototype.onEnd=function(A){A===i&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=g.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg};function E(A,L){const M=new y(L);if(M.push(A),M.err)throw M.msg||h[M.err];return M.result}s(E,"inflate");function I(A,L){return L=L||{},L.raw=!0,E(A,L)}s(I,"inflateRaw"),U.exports.Inflate=y,U.exports.inflate=E,U.exports.inflateRaw=I,U.exports.ungzip=E,U.exports.constants=f(5380)},870500:U=>{"use strict";const l=s((f,u)=>Object.prototype.hasOwnProperty.call(f,u),"_has");U.exports.assign=function(f){const u=Array.prototype.slice.call(arguments,1);for(;u.length;){const g=u.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(const m in g)l(g,m)&&(f[m]=g[m])}}return f},U.exports.flattenChunks=f=>{let u=0;for(let m=0,h=f.length;m<h;m++)u+=f[m].length;const g=new Uint8Array(u);for(let m=0,h=0,a=f.length;m<a;m++){let r=f[m];g.set(r,h),h+=r.length}return g}},351387:U=>{"use strict";let l=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}const f=new Uint8Array(256);for(let g=0;g<256;g++)f[g]=g>=252?6:g>=248?5:g>=240?4:g>=224?3:g>=192?2:1;f[254]=f[254]=1,U.exports.string2buf=g=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(g);let m,h,a,r,n,e=g.length,t=0;for(r=0;r<e;r++)h=g.charCodeAt(r),(h&64512)===55296&&r+1<e&&(a=g.charCodeAt(r+1),(a&64512)===56320&&(h=65536+(h-55296<<10)+(a-56320),r++)),t+=h<128?1:h<2048?2:h<65536?3:4;for(m=new Uint8Array(t),n=0,r=0;n<t;r++)h=g.charCodeAt(r),(h&64512)===55296&&r+1<e&&(a=g.charCodeAt(r+1),(a&64512)===56320&&(h=65536+(h-55296<<10)+(a-56320),r++)),h<128?m[n++]=h:h<2048?(m[n++]=192|h>>>6,m[n++]=128|h&63):h<65536?(m[n++]=224|h>>>12,m[n++]=128|h>>>6&63,m[n++]=128|h&63):(m[n++]=240|h>>>18,m[n++]=128|h>>>12&63,m[n++]=128|h>>>6&63,m[n++]=128|h&63);return m};const u=s((g,m)=>{if(m<65534&&g.subarray&&l)return String.fromCharCode.apply(null,g.length===m?g:g.subarray(0,m));let h="";for(let a=0;a<m;a++)h+=String.fromCharCode(g[a]);return h},"buf2binstring");U.exports.buf2string=(g,m)=>{const h=m||g.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(g.subarray(0,m));let a,r;const n=new Array(h*2);for(r=0,a=0;a<h;){let e=g[a++];if(e<128){n[r++]=e;continue}let t=f[e];if(t>4){n[r++]=65533,a+=t-1;continue}for(e&=t===2?31:t===3?15:7;t>1&&a<h;)e=e<<6|g[a++]&63,t--;if(t>1){n[r++]=65533;continue}e<65536?n[r++]=e:(e-=65536,n[r++]=55296|e>>10&1023,n[r++]=56320|e&1023)}return u(n,r)},U.exports.utf8border=(g,m)=>{m=m||g.length,m>g.length&&(m=g.length);let h=m-1;for(;h>=0&&(g[h]&192)===128;)h--;return h<0||h===0?m:h+f[g[h]]>m?h:m}},555756:U=>{"use strict";const l=s((f,u,g,m)=>{let h=f&65535|0,a=f>>>16&65535|0,r=0;for(;g!==0;){r=g>2e3?2e3:g,g-=r;do h=h+u[m++]|0,a=a+h|0;while(--r);h%=65521,a%=65521}return h|a<<16|0},"adler32");U.exports=l},5380:U=>{"use strict";U.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},354198:U=>{"use strict";const l=s(()=>{let g,m=[];for(var h=0;h<256;h++){g=h;for(var a=0;a<8;a++)g=g&1?3988292384^g>>>1:g>>>1;m[h]=g}return m},"makeTable"),f=new Uint32Array(l()),u=s((g,m,h,a)=>{const r=f,n=a+h;g^=-1;for(let e=a;e<n;e++)g=g>>>8^r[(g^m[e])&255];return g^-1},"crc32");U.exports=u},880970:(U,l,f)=>{"use strict";const{_tr_init:u,_tr_stored_block:g,_tr_flush_block:m,_tr_tally:h,_tr_align:a}=f(391104),r=f(555756),n=f(354198),e=f(362853),{Z_NO_FLUSH:t,Z_PARTIAL_FLUSH:i,Z_FULL_FLUSH:o,Z_FINISH:c,Z_BLOCK:p,Z_OK:S,Z_STREAM_END:d,Z_STREAM_ERROR:y,Z_DATA_ERROR:E,Z_BUF_ERROR:I,Z_DEFAULT_COMPRESSION:A,Z_FILTERED:L,Z_HUFFMAN_ONLY:M,Z_RLE:k,Z_FIXED:w,Z_DEFAULT_STRATEGY:N,Z_UNKNOWN:T,Z_DEFLATED:O}=f(5380),D=9,G=15,K=8,H=29,me=256+1+H,we=30,ue=19,Pe=2*me+1,Ye=15,be=3,He=258,Ke=He+be+1,Ue=32,ht=42,Tt=69,st=73,ut=91,We=103,_t=113,Rt=666,Ae=1,$t=2,rt=3,Ft=4,en=3,on=s((R,ae)=>(R.msg=e[ae],ae),"err"),Dn=s(R=>(R<<1)-(R>4?9:0),"rank"),Yt=s(R=>{let ae=R.length;for(;--ae>=0;)R[ae]=0},"zero");let vn=s((R,ae,pe)=>(ae<<R.hash_shift^pe)&R.hash_mask,"HASH_ZLIB");const mt=s(R=>{const ae=R.state;let pe=ae.pending;pe>R.avail_out&&(pe=R.avail_out),pe!==0&&(R.output.set(ae.pending_buf.subarray(ae.pending_out,ae.pending_out+pe),R.next_out),R.next_out+=pe,ae.pending_out+=pe,R.total_out+=pe,R.avail_out-=pe,ae.pending-=pe,ae.pending===0&&(ae.pending_out=0))},"flush_pending"),pt=s((R,ae)=>{m(R,R.block_start>=0?R.block_start:-1,R.strstart-R.block_start,ae),R.block_start=R.strstart,mt(R.strm)},"flush_block_only"),Qe=s((R,ae)=>{R.pending_buf[R.pending++]=ae},"put_byte"),Ht=s((R,ae)=>{R.pending_buf[R.pending++]=ae>>>8&255,R.pending_buf[R.pending++]=ae&255},"putShortMSB"),xt=s((R,ae,pe,Se)=>{let X=R.avail_in;return X>Se&&(X=Se),X===0?0:(R.avail_in-=X,ae.set(R.input.subarray(R.next_in,R.next_in+X),pe),R.state.wrap===1?R.adler=r(R.adler,ae,X,pe):R.state.wrap===2&&(R.adler=n(R.adler,ae,X,pe)),R.next_in+=X,R.total_in+=X,X)},"read_buf"),wn=s((R,ae)=>{let pe=R.max_chain_length,Se=R.strstart,X,ft,ke=R.prev_length,ze=R.nice_match;const Gt=R.strstart>R.w_size-Ke?R.strstart-(R.w_size-Ke):0,dt=R.window,Qn=R.w_mask,Wn=R.prev,Vt=R.strstart+He;let yn=dt[Se+ke-1],Zt=dt[Se+ke];R.prev_length>=R.good_match&&(pe>>=2),ze>R.lookahead&&(ze=R.lookahead);do if(X=ae,!(dt[X+ke]!==Zt||dt[X+ke-1]!==yn||dt[X]!==dt[Se]||dt[++X]!==dt[Se+1])){Se+=2,X++;do;while(dt[++Se]===dt[++X]&&dt[++Se]===dt[++X]&&dt[++Se]===dt[++X]&&dt[++Se]===dt[++X]&&dt[++Se]===dt[++X]&&dt[++Se]===dt[++X]&&dt[++Se]===dt[++X]&&dt[++Se]===dt[++X]&&Se<Vt);if(ft=He-(Vt-Se),Se=Vt-He,ft>ke){if(R.match_start=ae,ke=ft,ft>=ze)break;yn=dt[Se+ke-1],Zt=dt[Se+ke]}}while((ae=Wn[ae&Qn])>Gt&&--pe!==0);return ke<=R.lookahead?ke:R.lookahead},"longest_match"),kt=s(R=>{const ae=R.w_size;let pe,Se,X,ft,ke;do{if(ft=R.window_size-R.lookahead-R.strstart,R.strstart>=ae+(ae-Ke)){R.window.set(R.window.subarray(ae,ae+ae),0),R.match_start-=ae,R.strstart-=ae,R.block_start-=ae,Se=R.hash_size,pe=Se;do X=R.head[--pe],R.head[pe]=X>=ae?X-ae:0;while(--Se);Se=ae,pe=Se;do X=R.prev[--pe],R.prev[pe]=X>=ae?X-ae:0;while(--Se);ft+=ae}if(R.strm.avail_in===0)break;if(Se=xt(R.strm,R.window,R.strstart+R.lookahead,ft),R.lookahead+=Se,R.lookahead+R.insert>=be)for(ke=R.strstart-R.insert,R.ins_h=R.window[ke],R.ins_h=vn(R,R.ins_h,R.window[ke+1]);R.insert&&(R.ins_h=vn(R,R.ins_h,R.window[ke+be-1]),R.prev[ke&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=ke,ke++,R.insert--,!(R.lookahead+R.insert<be)););}while(R.lookahead<Ke&&R.strm.avail_in!==0)},"fill_window"),J=s((R,ae)=>{let pe=65535;for(pe>R.pending_buf_size-5&&(pe=R.pending_buf_size-5);;){if(R.lookahead<=1){if(kt(R),R.lookahead===0&&ae===t)return Ae;if(R.lookahead===0)break}R.strstart+=R.lookahead,R.lookahead=0;const Se=R.block_start+pe;if((R.strstart===0||R.strstart>=Se)&&(R.lookahead=R.strstart-Se,R.strstart=Se,pt(R,!1),R.strm.avail_out===0)||R.strstart-R.block_start>=R.w_size-Ke&&(pt(R,!1),R.strm.avail_out===0))return Ae}return R.insert=0,ae===c?(pt(R,!0),R.strm.avail_out===0?rt:Ft):(R.strstart>R.block_start&&(pt(R,!1),R.strm.avail_out===0),Ae)},"deflate_stored"),_e=s((R,ae)=>{let pe,Se;for(;;){if(R.lookahead<Ke){if(kt(R),R.lookahead<Ke&&ae===t)return Ae;if(R.lookahead===0)break}if(pe=0,R.lookahead>=be&&(R.ins_h=vn(R,R.ins_h,R.window[R.strstart+be-1]),pe=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),pe!==0&&R.strstart-pe<=R.w_size-Ke&&(R.match_length=wn(R,pe)),R.match_length>=be)if(Se=h(R,R.strstart-R.match_start,R.match_length-be),R.lookahead-=R.match_length,R.match_length<=R.max_lazy_match&&R.lookahead>=be){R.match_length--;do R.strstart++,R.ins_h=vn(R,R.ins_h,R.window[R.strstart+be-1]),pe=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart;while(--R.match_length!==0);R.strstart++}else R.strstart+=R.match_length,R.match_length=0,R.ins_h=R.window[R.strstart],R.ins_h=vn(R,R.ins_h,R.window[R.strstart+1]);else Se=h(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++;if(Se&&(pt(R,!1),R.strm.avail_out===0))return Ae}return R.insert=R.strstart<be-1?R.strstart:be-1,ae===c?(pt(R,!0),R.strm.avail_out===0?rt:Ft):R.last_lit&&(pt(R,!1),R.strm.avail_out===0)?Ae:$t},"deflate_fast"),Oe=s((R,ae)=>{let pe,Se,X;for(;;){if(R.lookahead<Ke){if(kt(R),R.lookahead<Ke&&ae===t)return Ae;if(R.lookahead===0)break}if(pe=0,R.lookahead>=be&&(R.ins_h=vn(R,R.ins_h,R.window[R.strstart+be-1]),pe=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),R.prev_length=R.match_length,R.prev_match=R.match_start,R.match_length=be-1,pe!==0&&R.prev_length<R.max_lazy_match&&R.strstart-pe<=R.w_size-Ke&&(R.match_length=wn(R,pe),R.match_length<=5&&(R.strategy===L||R.match_length===be&&R.strstart-R.match_start>4096)&&(R.match_length=be-1)),R.prev_length>=be&&R.match_length<=R.prev_length){X=R.strstart+R.lookahead-be,Se=h(R,R.strstart-1-R.prev_match,R.prev_length-be),R.lookahead-=R.prev_length-1,R.prev_length-=2;do++R.strstart<=X&&(R.ins_h=vn(R,R.ins_h,R.window[R.strstart+be-1]),pe=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart);while(--R.prev_length!==0);if(R.match_available=0,R.match_length=be-1,R.strstart++,Se&&(pt(R,!1),R.strm.avail_out===0))return Ae}else if(R.match_available){if(Se=h(R,0,R.window[R.strstart-1]),Se&&pt(R,!1),R.strstart++,R.lookahead--,R.strm.avail_out===0)return Ae}else R.match_available=1,R.strstart++,R.lookahead--}return R.match_available&&(Se=h(R,0,R.window[R.strstart-1]),R.match_available=0),R.insert=R.strstart<be-1?R.strstart:be-1,ae===c?(pt(R,!0),R.strm.avail_out===0?rt:Ft):R.last_lit&&(pt(R,!1),R.strm.avail_out===0)?Ae:$t},"deflate_slow"),Ne=s((R,ae)=>{let pe,Se,X,ft;const ke=R.window;for(;;){if(R.lookahead<=He){if(kt(R),R.lookahead<=He&&ae===t)return Ae;if(R.lookahead===0)break}if(R.match_length=0,R.lookahead>=be&&R.strstart>0&&(X=R.strstart-1,Se=ke[X],Se===ke[++X]&&Se===ke[++X]&&Se===ke[++X])){ft=R.strstart+He;do;while(Se===ke[++X]&&Se===ke[++X]&&Se===ke[++X]&&Se===ke[++X]&&Se===ke[++X]&&Se===ke[++X]&&Se===ke[++X]&&Se===ke[++X]&&X<ft);R.match_length=He-(ft-X),R.match_length>R.lookahead&&(R.match_length=R.lookahead)}if(R.match_length>=be?(pe=h(R,1,R.match_length-be),R.lookahead-=R.match_length,R.strstart+=R.match_length,R.match_length=0):(pe=h(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++),pe&&(pt(R,!1),R.strm.avail_out===0))return Ae}return R.insert=0,ae===c?(pt(R,!0),R.strm.avail_out===0?rt:Ft):R.last_lit&&(pt(R,!1),R.strm.avail_out===0)?Ae:$t},"deflate_rle"),$e=s((R,ae)=>{let pe;for(;;){if(R.lookahead===0&&(kt(R),R.lookahead===0)){if(ae===t)return Ae;break}if(R.match_length=0,pe=h(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++,pe&&(pt(R,!1),R.strm.avail_out===0))return Ae}return R.insert=0,ae===c?(pt(R,!0),R.strm.avail_out===0?rt:Ft):R.last_lit&&(pt(R,!1),R.strm.avail_out===0)?Ae:$t},"deflate_huff");function Fe(R,ae,pe,Se,X){this.good_length=R,this.max_lazy=ae,this.nice_length=pe,this.max_chain=Se,this.func=X}s(Fe,"Config");const oe=[new Fe(0,0,0,0,J),new Fe(4,4,8,4,_e),new Fe(4,5,16,8,_e),new Fe(4,6,32,32,_e),new Fe(4,4,16,16,Oe),new Fe(8,16,32,32,Oe),new Fe(8,16,128,128,Oe),new Fe(8,32,128,256,Oe),new Fe(32,128,258,1024,Oe),new Fe(32,258,258,4096,Oe)],Ce=s(R=>{R.window_size=2*R.w_size,Yt(R.head),R.max_lazy_match=oe[R.level].max_lazy,R.good_match=oe[R.level].good_length,R.nice_match=oe[R.level].nice_length,R.max_chain_length=oe[R.level].max_chain,R.strstart=0,R.block_start=0,R.lookahead=0,R.insert=0,R.match_length=R.prev_length=be-1,R.match_available=0,R.ins_h=0},"lm_init");function z(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Pe*2),this.dyn_dtree=new Uint16Array((2*we+1)*2),this.bl_tree=new Uint16Array((2*ue+1)*2),Yt(this.dyn_ltree),Yt(this.dyn_dtree),Yt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ye+1),this.heap=new Uint16Array(2*me+1),Yt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*me+1),Yt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}s(z,"DeflateState");const Y=s(R=>{if(!R||!R.state)return on(R,y);R.total_in=R.total_out=0,R.data_type=T;const ae=R.state;return ae.pending=0,ae.pending_out=0,ae.wrap<0&&(ae.wrap=-ae.wrap),ae.status=ae.wrap?ht:_t,R.adler=ae.wrap===2?0:1,ae.last_flush=t,u(ae),S},"deflateResetKeep"),de=s(R=>{const ae=Y(R);return ae===S&&Ce(R.state),ae},"deflateReset"),ce=s((R,ae)=>!R||!R.state||R.state.wrap!==2?y:(R.state.gzhead=ae,S),"deflateSetHeader"),De=s((R,ae,pe,Se,X,ft)=>{if(!R)return y;let ke=1;if(ae===A&&(ae=6),Se<0?(ke=0,Se=-Se):Se>15&&(ke=2,Se-=16),X<1||X>D||pe!==O||Se<8||Se>15||ae<0||ae>9||ft<0||ft>w)return on(R,y);Se===8&&(Se=9);const ze=new z;return R.state=ze,ze.strm=R,ze.wrap=ke,ze.gzhead=null,ze.w_bits=Se,ze.w_size=1<<ze.w_bits,ze.w_mask=ze.w_size-1,ze.hash_bits=X+7,ze.hash_size=1<<ze.hash_bits,ze.hash_mask=ze.hash_size-1,ze.hash_shift=~~((ze.hash_bits+be-1)/be),ze.window=new Uint8Array(ze.w_size*2),ze.head=new Uint16Array(ze.hash_size),ze.prev=new Uint16Array(ze.w_size),ze.lit_bufsize=1<<X+6,ze.pending_buf_size=ze.lit_bufsize*4,ze.pending_buf=new Uint8Array(ze.pending_buf_size),ze.d_buf=1*ze.lit_bufsize,ze.l_buf=(1+2)*ze.lit_bufsize,ze.level=ae,ze.strategy=ft,ze.method=pe,de(R)},"deflateInit2"),Ie=s((R,ae)=>De(R,ae,O,G,K,N),"deflateInit"),Le=s((R,ae)=>{let pe,Se;if(!R||!R.state||ae>p||ae<0)return R?on(R,y):y;const X=R.state;if(!R.output||!R.input&&R.avail_in!==0||X.status===Rt&&ae!==c)return on(R,R.avail_out===0?I:y);X.strm=R;const ft=X.last_flush;if(X.last_flush=ae,X.status===ht)if(X.wrap===2)R.adler=0,Qe(X,31),Qe(X,139),Qe(X,8),X.gzhead?(Qe(X,(X.gzhead.text?1:0)+(X.gzhead.hcrc?2:0)+(X.gzhead.extra?4:0)+(X.gzhead.name?8:0)+(X.gzhead.comment?16:0)),Qe(X,X.gzhead.time&255),Qe(X,X.gzhead.time>>8&255),Qe(X,X.gzhead.time>>16&255),Qe(X,X.gzhead.time>>24&255),Qe(X,X.level===9?2:X.strategy>=M||X.level<2?4:0),Qe(X,X.gzhead.os&255),X.gzhead.extra&&X.gzhead.extra.length&&(Qe(X,X.gzhead.extra.length&255),Qe(X,X.gzhead.extra.length>>8&255)),X.gzhead.hcrc&&(R.adler=n(R.adler,X.pending_buf,X.pending,0)),X.gzindex=0,X.status=Tt):(Qe(X,0),Qe(X,0),Qe(X,0),Qe(X,0),Qe(X,0),Qe(X,X.level===9?2:X.strategy>=M||X.level<2?4:0),Qe(X,en),X.status=_t);else{let ke=O+(X.w_bits-8<<4)<<8,ze=-1;X.strategy>=M||X.level<2?ze=0:X.level<6?ze=1:X.level===6?ze=2:ze=3,ke|=ze<<6,X.strstart!==0&&(ke|=Ue),ke+=31-ke%31,X.status=_t,Ht(X,ke),X.strstart!==0&&(Ht(X,R.adler>>>16),Ht(X,R.adler&65535)),R.adler=1}if(X.status===Tt)if(X.gzhead.extra){for(pe=X.pending;X.gzindex<(X.gzhead.extra.length&65535)&&!(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>pe&&(R.adler=n(R.adler,X.pending_buf,X.pending-pe,pe)),mt(R),pe=X.pending,X.pending===X.pending_buf_size));)Qe(X,X.gzhead.extra[X.gzindex]&255),X.gzindex++;X.gzhead.hcrc&&X.pending>pe&&(R.adler=n(R.adler,X.pending_buf,X.pending-pe,pe)),X.gzindex===X.gzhead.extra.length&&(X.gzindex=0,X.status=st)}else X.status=st;if(X.status===st)if(X.gzhead.name){pe=X.pending;do{if(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>pe&&(R.adler=n(R.adler,X.pending_buf,X.pending-pe,pe)),mt(R),pe=X.pending,X.pending===X.pending_buf_size)){Se=1;break}X.gzindex<X.gzhead.name.length?Se=X.gzhead.name.charCodeAt(X.gzindex++)&255:Se=0,Qe(X,Se)}while(Se!==0);X.gzhead.hcrc&&X.pending>pe&&(R.adler=n(R.adler,X.pending_buf,X.pending-pe,pe)),Se===0&&(X.gzindex=0,X.status=ut)}else X.status=ut;if(X.status===ut)if(X.gzhead.comment){pe=X.pending;do{if(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>pe&&(R.adler=n(R.adler,X.pending_buf,X.pending-pe,pe)),mt(R),pe=X.pending,X.pending===X.pending_buf_size)){Se=1;break}X.gzindex<X.gzhead.comment.length?Se=X.gzhead.comment.charCodeAt(X.gzindex++)&255:Se=0,Qe(X,Se)}while(Se!==0);X.gzhead.hcrc&&X.pending>pe&&(R.adler=n(R.adler,X.pending_buf,X.pending-pe,pe)),Se===0&&(X.status=We)}else X.status=We;if(X.status===We&&(X.gzhead.hcrc?(X.pending+2>X.pending_buf_size&&mt(R),X.pending+2<=X.pending_buf_size&&(Qe(X,R.adler&255),Qe(X,R.adler>>8&255),R.adler=0,X.status=_t)):X.status=_t),X.pending!==0){if(mt(R),R.avail_out===0)return X.last_flush=-1,S}else if(R.avail_in===0&&Dn(ae)<=Dn(ft)&&ae!==c)return on(R,I);if(X.status===Rt&&R.avail_in!==0)return on(R,I);if(R.avail_in!==0||X.lookahead!==0||ae!==t&&X.status!==Rt){let ke=X.strategy===M?$e(X,ae):X.strategy===k?Ne(X,ae):oe[X.level].func(X,ae);if((ke===rt||ke===Ft)&&(X.status=Rt),ke===Ae||ke===rt)return R.avail_out===0&&(X.last_flush=-1),S;if(ke===$t&&(ae===i?a(X):ae!==p&&(g(X,0,0,!1),ae===o&&(Yt(X.head),X.lookahead===0&&(X.strstart=0,X.block_start=0,X.insert=0))),mt(R),R.avail_out===0))return X.last_flush=-1,S}return ae!==c?S:X.wrap<=0?d:(X.wrap===2?(Qe(X,R.adler&255),Qe(X,R.adler>>8&255),Qe(X,R.adler>>16&255),Qe(X,R.adler>>24&255),Qe(X,R.total_in&255),Qe(X,R.total_in>>8&255),Qe(X,R.total_in>>16&255),Qe(X,R.total_in>>24&255)):(Ht(X,R.adler>>>16),Ht(X,R.adler&65535)),mt(R),X.wrap>0&&(X.wrap=-X.wrap),X.pending!==0?S:d)},"deflate"),fe=s(R=>{if(!R||!R.state)return y;const ae=R.state.status;return ae!==ht&&ae!==Tt&&ae!==st&&ae!==ut&&ae!==We&&ae!==_t&&ae!==Rt?on(R,y):(R.state=null,ae===_t?on(R,E):S)},"deflateEnd"),ge=s((R,ae)=>{let pe=ae.length;if(!R||!R.state)return y;const Se=R.state,X=Se.wrap;if(X===2||X===1&&Se.status!==ht||Se.lookahead)return y;if(X===1&&(R.adler=r(R.adler,ae,pe,0)),Se.wrap=0,pe>=Se.w_size){X===0&&(Yt(Se.head),Se.strstart=0,Se.block_start=0,Se.insert=0);let Gt=new Uint8Array(Se.w_size);Gt.set(ae.subarray(pe-Se.w_size,pe),0),ae=Gt,pe=Se.w_size}const ft=R.avail_in,ke=R.next_in,ze=R.input;for(R.avail_in=pe,R.next_in=0,R.input=ae,kt(Se);Se.lookahead>=be;){let Gt=Se.strstart,dt=Se.lookahead-(be-1);do Se.ins_h=vn(Se,Se.ins_h,Se.window[Gt+be-1]),Se.prev[Gt&Se.w_mask]=Se.head[Se.ins_h],Se.head[Se.ins_h]=Gt,Gt++;while(--dt);Se.strstart=Gt,Se.lookahead=be-1,kt(Se)}return Se.strstart+=Se.lookahead,Se.block_start=Se.strstart,Se.insert=Se.lookahead,Se.lookahead=0,Se.match_length=Se.prev_length=be-1,Se.match_available=0,R.next_in=ke,R.input=ze,R.avail_in=ft,Se.wrap=X,S},"deflateSetDictionary");U.exports.deflateInit=Ie,U.exports.deflateInit2=De,U.exports.deflateReset=de,U.exports.deflateResetKeep=Y,U.exports.deflateSetHeader=ce,U.exports.deflate=Le,U.exports.deflateEnd=fe,U.exports.deflateSetDictionary=ge,U.exports.deflateInfo="pako deflate (from Nodeca project)"},569645:U=>{"use strict";function l(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}s(l,"GZheader"),U.exports=l},49100:U=>{"use strict";U.exports=s(function(g,m){let h,a,r,n,e,t,i,o,c,p,S,d,y,E,I,A,L,M,k,w,N,T,O,D;const G=g.state;h=g.next_in,O=g.input,a=h+(g.avail_in-5),r=g.next_out,D=g.output,n=r-(m-g.avail_out),e=r+(g.avail_out-257),t=G.dmax,i=G.wsize,o=G.whave,c=G.wnext,p=G.window,S=G.hold,d=G.bits,y=G.lencode,E=G.distcode,I=(1<<G.lenbits)-1,A=(1<<G.distbits)-1;e:do{d<15&&(S+=O[h++]<<d,d+=8,S+=O[h++]<<d,d+=8),L=y[S&I];t:for(;;){if(M=L>>>24,S>>>=M,d-=M,M=L>>>16&255,M===0)D[r++]=L&65535;else if(M&16){k=L&65535,M&=15,M&&(d<M&&(S+=O[h++]<<d,d+=8),k+=S&(1<<M)-1,S>>>=M,d-=M),d<15&&(S+=O[h++]<<d,d+=8,S+=O[h++]<<d,d+=8),L=E[S&A];n:for(;;){if(M=L>>>24,S>>>=M,d-=M,M=L>>>16&255,M&16){if(w=L&65535,M&=15,d<M&&(S+=O[h++]<<d,d+=8,d<M&&(S+=O[h++]<<d,d+=8)),w+=S&(1<<M)-1,w>t){g.msg="invalid distance too far back",G.mode=30;break e}if(S>>>=M,d-=M,M=r-n,w>M){if(M=w-M,M>o&&G.sane){g.msg="invalid distance too far back",G.mode=30;break e}if(N=0,T=p,c===0){if(N+=i-M,M<k){k-=M;do D[r++]=p[N++];while(--M);N=r-w,T=D}}else if(c<M){if(N+=i+c-M,M-=c,M<k){k-=M;do D[r++]=p[N++];while(--M);if(N=0,c<k){M=c,k-=M;do D[r++]=p[N++];while(--M);N=r-w,T=D}}}else if(N+=c-M,M<k){k-=M;do D[r++]=p[N++];while(--M);N=r-w,T=D}for(;k>2;)D[r++]=T[N++],D[r++]=T[N++],D[r++]=T[N++],k-=3;k&&(D[r++]=T[N++],k>1&&(D[r++]=T[N++]))}else{N=r-w;do D[r++]=D[N++],D[r++]=D[N++],D[r++]=D[N++],k-=3;while(k>2);k&&(D[r++]=D[N++],k>1&&(D[r++]=D[N++]))}}else if(M&64){g.msg="invalid distance code",G.mode=30;break e}else{L=E[(L&65535)+(S&(1<<M)-1)];continue n}break}}else if(M&64)if(M&32){G.mode=12;break e}else{g.msg="invalid literal/length code",G.mode=30;break e}else{L=y[(L&65535)+(S&(1<<M)-1)];continue t}break}}while(h<a&&r<e);k=d>>3,h-=k,d-=k<<3,S&=(1<<d)-1,g.next_in=h,g.next_out=r,g.avail_in=h<a?5+(a-h):5-(h-a),g.avail_out=r<e?257+(e-r):257-(r-e),G.hold=S,G.bits=d},"inflate_fast")},368162:(U,l,f)=>{"use strict";const u=f(555756),g=f(354198),m=f(49100),h=f(542373),a=0,r=1,n=2,{Z_FINISH:e,Z_BLOCK:t,Z_TREES:i,Z_OK:o,Z_STREAM_END:c,Z_NEED_DICT:p,Z_STREAM_ERROR:S,Z_DATA_ERROR:d,Z_MEM_ERROR:y,Z_BUF_ERROR:E,Z_DEFLATED:I}=f(5380),A=1,L=2,M=3,k=4,w=5,N=6,T=7,O=8,D=9,G=10,K=11,H=12,q=13,me=14,we=15,ue=16,Pe=17,Ye=18,be=19,He=20,Ke=21,Ue=22,ht=23,Tt=24,st=25,ut=26,We=27,_t=28,Rt=29,Ae=30,$t=31,rt=32,Ft=852,en=592,Dn=15,Yt=s(oe=>(oe>>>24&255)+(oe>>>8&65280)+((oe&65280)<<8)+((oe&255)<<24),"zswap32");function zn(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}s(zn,"InflateState");const vn=s(oe=>{if(!oe||!oe.state)return S;const Ce=oe.state;return oe.total_in=oe.total_out=Ce.total=0,oe.msg="",Ce.wrap&&(oe.adler=Ce.wrap&1),Ce.mode=A,Ce.last=0,Ce.havedict=0,Ce.dmax=32768,Ce.head=null,Ce.hold=0,Ce.bits=0,Ce.lencode=Ce.lendyn=new Int32Array(Ft),Ce.distcode=Ce.distdyn=new Int32Array(en),Ce.sane=1,Ce.back=-1,o},"inflateResetKeep"),mt=s(oe=>{if(!oe||!oe.state)return S;const Ce=oe.state;return Ce.wsize=0,Ce.whave=0,Ce.wnext=0,vn(oe)},"inflateReset"),pt=s((oe,Ce)=>{let z;if(!oe||!oe.state)return S;const Y=oe.state;return Ce<0?(z=0,Ce=-Ce):(z=(Ce>>4)+1,Ce<48&&(Ce&=15)),Ce&&(Ce<8||Ce>15)?S:(Y.window!==null&&Y.wbits!==Ce&&(Y.window=null),Y.wrap=z,Y.wbits=Ce,mt(oe))},"inflateReset2"),Qe=s((oe,Ce)=>{if(!oe)return S;const z=new zn;oe.state=z,z.window=null;const Y=pt(oe,Ce);return Y!==o&&(oe.state=null),Y},"inflateInit2"),Ht=s(oe=>Qe(oe,Dn),"inflateInit");let xt=!0,wn,kt;const J=s(oe=>{if(xt){wn=new Int32Array(512),kt=new Int32Array(32);let Ce=0;for(;Ce<144;)oe.lens[Ce++]=8;for(;Ce<256;)oe.lens[Ce++]=9;for(;Ce<280;)oe.lens[Ce++]=7;for(;Ce<288;)oe.lens[Ce++]=8;for(h(r,oe.lens,0,288,wn,0,oe.work,{bits:9}),Ce=0;Ce<32;)oe.lens[Ce++]=5;h(n,oe.lens,0,32,kt,0,oe.work,{bits:5}),xt=!1}oe.lencode=wn,oe.lenbits=9,oe.distcode=kt,oe.distbits=5},"fixedtables"),_e=s((oe,Ce,z,Y)=>{let de;const ce=oe.state;return ce.window===null&&(ce.wsize=1<<ce.wbits,ce.wnext=0,ce.whave=0,ce.window=new Uint8Array(ce.wsize)),Y>=ce.wsize?(ce.window.set(Ce.subarray(z-ce.wsize,z),0),ce.wnext=0,ce.whave=ce.wsize):(de=ce.wsize-ce.wnext,de>Y&&(de=Y),ce.window.set(Ce.subarray(z-Y,z-Y+de),ce.wnext),Y-=de,Y?(ce.window.set(Ce.subarray(z-Y,z),0),ce.wnext=Y,ce.whave=ce.wsize):(ce.wnext+=de,ce.wnext===ce.wsize&&(ce.wnext=0),ce.whave<ce.wsize&&(ce.whave+=de))),0},"updatewindow"),Oe=s((oe,Ce)=>{let z,Y,de,ce,De,Ie,Le,fe,ge,R,ae,pe,Se,X,ft=0,ke,ze,Gt,dt,Qn,Wn,Vt,yn;const Zt=new Uint8Array(4);let Rn,Nn;const fi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!oe||!oe.state||!oe.output||!oe.input&&oe.avail_in!==0)return S;z=oe.state,z.mode===H&&(z.mode=q),De=oe.next_out,de=oe.output,Le=oe.avail_out,ce=oe.next_in,Y=oe.input,Ie=oe.avail_in,fe=z.hold,ge=z.bits,R=Ie,ae=Le,yn=o;e:for(;;)switch(z.mode){case A:if(z.wrap===0){z.mode=q;break}for(;ge<16;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(z.wrap&2&&fe===35615){z.check=0,Zt[0]=fe&255,Zt[1]=fe>>>8&255,z.check=g(z.check,Zt,2,0),fe=0,ge=0,z.mode=L;break}if(z.flags=0,z.head&&(z.head.done=!1),!(z.wrap&1)||(((fe&255)<<8)+(fe>>8))%31){oe.msg="incorrect header check",z.mode=Ae;break}if((fe&15)!==I){oe.msg="unknown compression method",z.mode=Ae;break}if(fe>>>=4,ge-=4,Vt=(fe&15)+8,z.wbits===0)z.wbits=Vt;else if(Vt>z.wbits){oe.msg="invalid window size",z.mode=Ae;break}z.dmax=1<<z.wbits,oe.adler=z.check=1,z.mode=fe&512?G:H,fe=0,ge=0;break;case L:for(;ge<16;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(z.flags=fe,(z.flags&255)!==I){oe.msg="unknown compression method",z.mode=Ae;break}if(z.flags&57344){oe.msg="unknown header flags set",z.mode=Ae;break}z.head&&(z.head.text=fe>>8&1),z.flags&512&&(Zt[0]=fe&255,Zt[1]=fe>>>8&255,z.check=g(z.check,Zt,2,0)),fe=0,ge=0,z.mode=M;case M:for(;ge<32;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}z.head&&(z.head.time=fe),z.flags&512&&(Zt[0]=fe&255,Zt[1]=fe>>>8&255,Zt[2]=fe>>>16&255,Zt[3]=fe>>>24&255,z.check=g(z.check,Zt,4,0)),fe=0,ge=0,z.mode=k;case k:for(;ge<16;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}z.head&&(z.head.xflags=fe&255,z.head.os=fe>>8),z.flags&512&&(Zt[0]=fe&255,Zt[1]=fe>>>8&255,z.check=g(z.check,Zt,2,0)),fe=0,ge=0,z.mode=w;case w:if(z.flags&1024){for(;ge<16;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}z.length=fe,z.head&&(z.head.extra_len=fe),z.flags&512&&(Zt[0]=fe&255,Zt[1]=fe>>>8&255,z.check=g(z.check,Zt,2,0)),fe=0,ge=0}else z.head&&(z.head.extra=null);z.mode=N;case N:if(z.flags&1024&&(pe=z.length,pe>Ie&&(pe=Ie),pe&&(z.head&&(Vt=z.head.extra_len-z.length,z.head.extra||(z.head.extra=new Uint8Array(z.head.extra_len)),z.head.extra.set(Y.subarray(ce,ce+pe),Vt)),z.flags&512&&(z.check=g(z.check,Y,pe,ce)),Ie-=pe,ce+=pe,z.length-=pe),z.length))break e;z.length=0,z.mode=T;case T:if(z.flags&2048){if(Ie===0)break e;pe=0;do Vt=Y[ce+pe++],z.head&&Vt&&z.length<65536&&(z.head.name+=String.fromCharCode(Vt));while(Vt&&pe<Ie);if(z.flags&512&&(z.check=g(z.check,Y,pe,ce)),Ie-=pe,ce+=pe,Vt)break e}else z.head&&(z.head.name=null);z.length=0,z.mode=O;case O:if(z.flags&4096){if(Ie===0)break e;pe=0;do Vt=Y[ce+pe++],z.head&&Vt&&z.length<65536&&(z.head.comment+=String.fromCharCode(Vt));while(Vt&&pe<Ie);if(z.flags&512&&(z.check=g(z.check,Y,pe,ce)),Ie-=pe,ce+=pe,Vt)break e}else z.head&&(z.head.comment=null);z.mode=D;case D:if(z.flags&512){for(;ge<16;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(fe!==(z.check&65535)){oe.msg="header crc mismatch",z.mode=Ae;break}fe=0,ge=0}z.head&&(z.head.hcrc=z.flags>>9&1,z.head.done=!0),oe.adler=z.check=0,z.mode=H;break;case G:for(;ge<32;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}oe.adler=z.check=Yt(fe),fe=0,ge=0,z.mode=K;case K:if(z.havedict===0)return oe.next_out=De,oe.avail_out=Le,oe.next_in=ce,oe.avail_in=Ie,z.hold=fe,z.bits=ge,p;oe.adler=z.check=1,z.mode=H;case H:if(Ce===t||Ce===i)break e;case q:if(z.last){fe>>>=ge&7,ge-=ge&7,z.mode=We;break}for(;ge<3;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}switch(z.last=fe&1,fe>>>=1,ge-=1,fe&3){case 0:z.mode=me;break;case 1:if(J(z),z.mode=He,Ce===i){fe>>>=2,ge-=2;break e}break;case 2:z.mode=Pe;break;case 3:oe.msg="invalid block type",z.mode=Ae}fe>>>=2,ge-=2;break;case me:for(fe>>>=ge&7,ge-=ge&7;ge<32;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if((fe&65535)!==(fe>>>16^65535)){oe.msg="invalid stored block lengths",z.mode=Ae;break}if(z.length=fe&65535,fe=0,ge=0,z.mode=we,Ce===i)break e;case we:z.mode=ue;case ue:if(pe=z.length,pe){if(pe>Ie&&(pe=Ie),pe>Le&&(pe=Le),pe===0)break e;de.set(Y.subarray(ce,ce+pe),De),Ie-=pe,ce+=pe,Le-=pe,De+=pe,z.length-=pe;break}z.mode=H;break;case Pe:for(;ge<14;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(z.nlen=(fe&31)+257,fe>>>=5,ge-=5,z.ndist=(fe&31)+1,fe>>>=5,ge-=5,z.ncode=(fe&15)+4,fe>>>=4,ge-=4,z.nlen>286||z.ndist>30){oe.msg="too many length or distance symbols",z.mode=Ae;break}z.have=0,z.mode=Ye;case Ye:for(;z.have<z.ncode;){for(;ge<3;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}z.lens[fi[z.have++]]=fe&7,fe>>>=3,ge-=3}for(;z.have<19;)z.lens[fi[z.have++]]=0;if(z.lencode=z.lendyn,z.lenbits=7,Rn={bits:z.lenbits},yn=h(a,z.lens,0,19,z.lencode,0,z.work,Rn),z.lenbits=Rn.bits,yn){oe.msg="invalid code lengths set",z.mode=Ae;break}z.have=0,z.mode=be;case be:for(;z.have<z.nlen+z.ndist;){for(;ft=z.lencode[fe&(1<<z.lenbits)-1],ke=ft>>>24,ze=ft>>>16&255,Gt=ft&65535,!(ke<=ge);){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(Gt<16)fe>>>=ke,ge-=ke,z.lens[z.have++]=Gt;else{if(Gt===16){for(Nn=ke+2;ge<Nn;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(fe>>>=ke,ge-=ke,z.have===0){oe.msg="invalid bit length repeat",z.mode=Ae;break}Vt=z.lens[z.have-1],pe=3+(fe&3),fe>>>=2,ge-=2}else if(Gt===17){for(Nn=ke+3;ge<Nn;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}fe>>>=ke,ge-=ke,Vt=0,pe=3+(fe&7),fe>>>=3,ge-=3}else{for(Nn=ke+7;ge<Nn;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}fe>>>=ke,ge-=ke,Vt=0,pe=11+(fe&127),fe>>>=7,ge-=7}if(z.have+pe>z.nlen+z.ndist){oe.msg="invalid bit length repeat",z.mode=Ae;break}for(;pe--;)z.lens[z.have++]=Vt}}if(z.mode===Ae)break;if(z.lens[256]===0){oe.msg="invalid code -- missing end-of-block",z.mode=Ae;break}if(z.lenbits=9,Rn={bits:z.lenbits},yn=h(r,z.lens,0,z.nlen,z.lencode,0,z.work,Rn),z.lenbits=Rn.bits,yn){oe.msg="invalid literal/lengths set",z.mode=Ae;break}if(z.distbits=6,z.distcode=z.distdyn,Rn={bits:z.distbits},yn=h(n,z.lens,z.nlen,z.ndist,z.distcode,0,z.work,Rn),z.distbits=Rn.bits,yn){oe.msg="invalid distances set",z.mode=Ae;break}if(z.mode=He,Ce===i)break e;case He:z.mode=Ke;case Ke:if(Ie>=6&&Le>=258){oe.next_out=De,oe.avail_out=Le,oe.next_in=ce,oe.avail_in=Ie,z.hold=fe,z.bits=ge,m(oe,ae),De=oe.next_out,de=oe.output,Le=oe.avail_out,ce=oe.next_in,Y=oe.input,Ie=oe.avail_in,fe=z.hold,ge=z.bits,z.mode===H&&(z.back=-1);break}for(z.back=0;ft=z.lencode[fe&(1<<z.lenbits)-1],ke=ft>>>24,ze=ft>>>16&255,Gt=ft&65535,!(ke<=ge);){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(ze&&!(ze&240)){for(dt=ke,Qn=ze,Wn=Gt;ft=z.lencode[Wn+((fe&(1<<dt+Qn)-1)>>dt)],ke=ft>>>24,ze=ft>>>16&255,Gt=ft&65535,!(dt+ke<=ge);){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}fe>>>=dt,ge-=dt,z.back+=dt}if(fe>>>=ke,ge-=ke,z.back+=ke,z.length=Gt,ze===0){z.mode=ut;break}if(ze&32){z.back=-1,z.mode=H;break}if(ze&64){oe.msg="invalid literal/length code",z.mode=Ae;break}z.extra=ze&15,z.mode=Ue;case Ue:if(z.extra){for(Nn=z.extra;ge<Nn;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}z.length+=fe&(1<<z.extra)-1,fe>>>=z.extra,ge-=z.extra,z.back+=z.extra}z.was=z.length,z.mode=ht;case ht:for(;ft=z.distcode[fe&(1<<z.distbits)-1],ke=ft>>>24,ze=ft>>>16&255,Gt=ft&65535,!(ke<=ge);){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(!(ze&240)){for(dt=ke,Qn=ze,Wn=Gt;ft=z.distcode[Wn+((fe&(1<<dt+Qn)-1)>>dt)],ke=ft>>>24,ze=ft>>>16&255,Gt=ft&65535,!(dt+ke<=ge);){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}fe>>>=dt,ge-=dt,z.back+=dt}if(fe>>>=ke,ge-=ke,z.back+=ke,ze&64){oe.msg="invalid distance code",z.mode=Ae;break}z.offset=Gt,z.extra=ze&15,z.mode=Tt;case Tt:if(z.extra){for(Nn=z.extra;ge<Nn;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}z.offset+=fe&(1<<z.extra)-1,fe>>>=z.extra,ge-=z.extra,z.back+=z.extra}if(z.offset>z.dmax){oe.msg="invalid distance too far back",z.mode=Ae;break}z.mode=st;case st:if(Le===0)break e;if(pe=ae-Le,z.offset>pe){if(pe=z.offset-pe,pe>z.whave&&z.sane){oe.msg="invalid distance too far back",z.mode=Ae;break}pe>z.wnext?(pe-=z.wnext,Se=z.wsize-pe):Se=z.wnext-pe,pe>z.length&&(pe=z.length),X=z.window}else X=de,Se=De-z.offset,pe=z.length;pe>Le&&(pe=Le),Le-=pe,z.length-=pe;do de[De++]=X[Se++];while(--pe);z.length===0&&(z.mode=Ke);break;case ut:if(Le===0)break e;de[De++]=z.length,Le--,z.mode=Ke;break;case We:if(z.wrap){for(;ge<32;){if(Ie===0)break e;Ie--,fe|=Y[ce++]<<ge,ge+=8}if(ae-=Le,oe.total_out+=ae,z.total+=ae,ae&&(oe.adler=z.check=z.flags?g(z.check,de,ae,De-ae):u(z.check,de,ae,De-ae)),ae=Le,(z.flags?fe:Yt(fe))!==z.check){oe.msg="incorrect data check",z.mode=Ae;break}fe=0,ge=0}z.mode=_t;case _t:if(z.wrap&&z.flags){for(;ge<32;){if(Ie===0)break e;Ie--,fe+=Y[ce++]<<ge,ge+=8}if(fe!==(z.total&4294967295)){oe.msg="incorrect length check",z.mode=Ae;break}fe=0,ge=0}z.mode=Rt;case Rt:yn=c;break e;case Ae:yn=d;break e;case $t:return y;case rt:default:return S}return oe.next_out=De,oe.avail_out=Le,oe.next_in=ce,oe.avail_in=Ie,z.hold=fe,z.bits=ge,(z.wsize||ae!==oe.avail_out&&z.mode<Ae&&(z.mode<We||Ce!==e))&&_e(oe,oe.output,oe.next_out,ae-oe.avail_out)?(z.mode=$t,y):(R-=oe.avail_in,ae-=oe.avail_out,oe.total_in+=R,oe.total_out+=ae,z.total+=ae,z.wrap&&ae&&(oe.adler=z.check=z.flags?g(z.check,de,ae,oe.next_out-ae):u(z.check,de,ae,oe.next_out-ae)),oe.data_type=z.bits+(z.last?64:0)+(z.mode===H?128:0)+(z.mode===He||z.mode===we?256:0),(R===0&&ae===0||Ce===e)&&yn===o&&(yn=E),yn)},"inflate"),Ne=s(oe=>{if(!oe||!oe.state)return S;let Ce=oe.state;return Ce.window&&(Ce.window=null),oe.state=null,o},"inflateEnd"),$e=s((oe,Ce)=>{if(!oe||!oe.state)return S;const z=oe.state;return z.wrap&2?(z.head=Ce,Ce.done=!1,o):S},"inflateGetHeader"),Fe=s((oe,Ce)=>{const z=Ce.length;let Y,de,ce;return!oe||!oe.state||(Y=oe.state,Y.wrap!==0&&Y.mode!==K)?S:Y.mode===K&&(de=1,de=u(de,Ce,z,0),de!==Y.check)?d:(ce=_e(oe,Ce,z,z),ce?(Y.mode=$t,y):(Y.havedict=1,o))},"inflateSetDictionary");U.exports.inflateReset=mt,U.exports.inflateReset2=pt,U.exports.inflateResetKeep=vn,U.exports.inflateInit=Ht,U.exports.inflateInit2=Qe,U.exports.inflate=Oe,U.exports.inflateEnd=Ne,U.exports.inflateGetHeader=$e,U.exports.inflateSetDictionary=Fe,U.exports.inflateInfo="pako inflate (from Nodeca project)"},542373:U=>{"use strict";const a=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),r=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),t=s((i,o,c,p,S,d,y,E)=>{const I=E.bits;let A=0,L=0,M=0,k=0,w=0,N=0,T=0,O=0,D=0,G=0,K,H,q,me,we,ue=null,Pe=0,Ye;const be=new Uint16Array(15+1),He=new Uint16Array(15+1);let Ke=null,Ue=0,ht,Tt,st;for(A=0;A<=15;A++)be[A]=0;for(L=0;L<p;L++)be[o[c+L]]++;for(w=I,k=15;k>=1&&be[k]===0;k--);if(w>k&&(w=k),k===0)return S[d++]=1<<24|64<<16|0,S[d++]=1<<24|64<<16|0,E.bits=1,0;for(M=1;M<k&&be[M]===0;M++);for(w<M&&(w=M),O=1,A=1;A<=15;A++)if(O<<=1,O-=be[A],O<0)return-1;if(O>0&&(i===0||k!==1))return-1;for(He[1]=0,A=1;A<15;A++)He[A+1]=He[A]+be[A];for(L=0;L<p;L++)o[c+L]!==0&&(y[He[o[c+L]]++]=L);if(i===0?(ue=Ke=y,Ye=19):i===1?(ue=a,Pe-=257,Ke=r,Ue-=257,Ye=256):(ue=n,Ke=e,Ye=-1),G=0,L=0,A=M,we=d,N=w,T=0,q=-1,D=1<<w,me=D-1,i===1&&D>852||i===2&&D>592)return 1;for(;;){ht=A-T,y[L]<Ye?(Tt=0,st=y[L]):y[L]>Ye?(Tt=Ke[Ue+y[L]],st=ue[Pe+y[L]]):(Tt=32+64,st=0),K=1<<A-T,H=1<<N,M=H;do H-=K,S[we+(G>>T)+H]=ht<<24|Tt<<16|st|0;while(H!==0);for(K=1<<A-1;G&K;)K>>=1;if(K!==0?(G&=K-1,G+=K):G=0,L++,--be[A]===0){if(A===k)break;A=o[c+y[L]]}if(A>w&&(G&me)!==q){for(T===0&&(T=w),we+=M,N=A-T,O=1<<N;N+T<k&&(O-=be[N+T],!(O<=0));)N++,O<<=1;if(D+=1<<N,i===1&&D>852||i===2&&D>592)return 1;q=G&me,S[q]=w<<24|N<<16|we-d|0}}return G!==0&&(S[we+G]=A-T<<24|64<<16|0),E.bits=w,0},"inflate_table");U.exports=t},362853:U=>{"use strict";U.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},391104:U=>{"use strict";function m(J){let _e=J.length;for(;--_e>=0;)J[_e]=0}s(m,"zero");const h=0,a=1,r=2,n=3,e=258,t=29,i=256,o=i+1+t,c=30,p=19,S=2*o+1,d=15,y=16,E=7,I=256,A=16,L=17,M=18,k=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),w=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O=512,D=new Array((o+2)*2);m(D);const G=new Array(c*2);m(G);const K=new Array(O);m(K);const H=new Array(e-n+1);m(H);const q=new Array(t);m(q);const me=new Array(c);m(me);function we(J,_e,Oe,Ne,$e){this.static_tree=J,this.extra_bits=_e,this.extra_base=Oe,this.elems=Ne,this.max_length=$e,this.has_stree=J&&J.length}s(we,"StaticTreeDesc");let ue,Pe,Ye;function be(J,_e){this.dyn_tree=J,this.max_code=0,this.stat_desc=_e}s(be,"TreeDesc");const He=s(J=>J<256?K[J]:K[256+(J>>>7)],"d_code"),Ke=s((J,_e)=>{J.pending_buf[J.pending++]=_e&255,J.pending_buf[J.pending++]=_e>>>8&255},"put_short"),Ue=s((J,_e,Oe)=>{J.bi_valid>y-Oe?(J.bi_buf|=_e<<J.bi_valid&65535,Ke(J,J.bi_buf),J.bi_buf=_e>>y-J.bi_valid,J.bi_valid+=Oe-y):(J.bi_buf|=_e<<J.bi_valid&65535,J.bi_valid+=Oe)},"send_bits"),ht=s((J,_e,Oe)=>{Ue(J,Oe[_e*2],Oe[_e*2+1])},"send_code"),Tt=s((J,_e)=>{let Oe=0;do Oe|=J&1,J>>>=1,Oe<<=1;while(--_e>0);return Oe>>>1},"bi_reverse"),st=s(J=>{J.bi_valid===16?(Ke(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):J.bi_valid>=8&&(J.pending_buf[J.pending++]=J.bi_buf&255,J.bi_buf>>=8,J.bi_valid-=8)},"bi_flush"),ut=s((J,_e)=>{const Oe=_e.dyn_tree,Ne=_e.max_code,$e=_e.stat_desc.static_tree,Fe=_e.stat_desc.has_stree,oe=_e.stat_desc.extra_bits,Ce=_e.stat_desc.extra_base,z=_e.stat_desc.max_length;let Y,de,ce,De,Ie,Le,fe=0;for(De=0;De<=d;De++)J.bl_count[De]=0;for(Oe[J.heap[J.heap_max]*2+1]=0,Y=J.heap_max+1;Y<S;Y++)de=J.heap[Y],De=Oe[Oe[de*2+1]*2+1]+1,De>z&&(De=z,fe++),Oe[de*2+1]=De,!(de>Ne)&&(J.bl_count[De]++,Ie=0,de>=Ce&&(Ie=oe[de-Ce]),Le=Oe[de*2],J.opt_len+=Le*(De+Ie),Fe&&(J.static_len+=Le*($e[de*2+1]+Ie)));if(fe!==0){do{for(De=z-1;J.bl_count[De]===0;)De--;J.bl_count[De]--,J.bl_count[De+1]+=2,J.bl_count[z]--,fe-=2}while(fe>0);for(De=z;De!==0;De--)for(de=J.bl_count[De];de!==0;)ce=J.heap[--Y],!(ce>Ne)&&(Oe[ce*2+1]!==De&&(J.opt_len+=(De-Oe[ce*2+1])*Oe[ce*2],Oe[ce*2+1]=De),de--)}},"gen_bitlen"),We=s((J,_e,Oe)=>{const Ne=new Array(d+1);let $e=0,Fe,oe;for(Fe=1;Fe<=d;Fe++)Ne[Fe]=$e=$e+Oe[Fe-1]<<1;for(oe=0;oe<=_e;oe++){let Ce=J[oe*2+1];Ce!==0&&(J[oe*2]=Tt(Ne[Ce]++,Ce))}},"gen_codes"),_t=s(()=>{let J,_e,Oe,Ne,$e;const Fe=new Array(d+1);for(Oe=0,Ne=0;Ne<t-1;Ne++)for(q[Ne]=Oe,J=0;J<1<<k[Ne];J++)H[Oe++]=Ne;for(H[Oe-1]=Ne,$e=0,Ne=0;Ne<16;Ne++)for(me[Ne]=$e,J=0;J<1<<w[Ne];J++)K[$e++]=Ne;for($e>>=7;Ne<c;Ne++)for(me[Ne]=$e<<7,J=0;J<1<<w[Ne]-7;J++)K[256+$e++]=Ne;for(_e=0;_e<=d;_e++)Fe[_e]=0;for(J=0;J<=143;)D[J*2+1]=8,J++,Fe[8]++;for(;J<=255;)D[J*2+1]=9,J++,Fe[9]++;for(;J<=279;)D[J*2+1]=7,J++,Fe[7]++;for(;J<=287;)D[J*2+1]=8,J++,Fe[8]++;for(We(D,o+1,Fe),J=0;J<c;J++)G[J*2+1]=5,G[J*2]=Tt(J,5);ue=new we(D,k,i+1,o,d),Pe=new we(G,w,0,c,d),Ye=new we(new Array(0),N,0,p,E)},"tr_static_init"),Rt=s(J=>{let _e;for(_e=0;_e<o;_e++)J.dyn_ltree[_e*2]=0;for(_e=0;_e<c;_e++)J.dyn_dtree[_e*2]=0;for(_e=0;_e<p;_e++)J.bl_tree[_e*2]=0;J.dyn_ltree[I*2]=1,J.opt_len=J.static_len=0,J.last_lit=J.matches=0},"init_block"),Ae=s(J=>{J.bi_valid>8?Ke(J,J.bi_buf):J.bi_valid>0&&(J.pending_buf[J.pending++]=J.bi_buf),J.bi_buf=0,J.bi_valid=0},"bi_windup"),$t=s((J,_e,Oe,Ne)=>{Ae(J),Ne&&(Ke(J,Oe),Ke(J,~Oe)),J.pending_buf.set(J.window.subarray(_e,_e+Oe),J.pending),J.pending+=Oe},"copy_block"),rt=s((J,_e,Oe,Ne)=>{const $e=_e*2,Fe=Oe*2;return J[$e]<J[Fe]||J[$e]===J[Fe]&&Ne[_e]<=Ne[Oe]},"smaller"),Ft=s((J,_e,Oe)=>{const Ne=J.heap[Oe];let $e=Oe<<1;for(;$e<=J.heap_len&&($e<J.heap_len&&rt(_e,J.heap[$e+1],J.heap[$e],J.depth)&&$e++,!rt(_e,Ne,J.heap[$e],J.depth));)J.heap[Oe]=J.heap[$e],Oe=$e,$e<<=1;J.heap[Oe]=Ne},"pqdownheap"),en=s((J,_e,Oe)=>{let Ne,$e,Fe=0,oe,Ce;if(J.last_lit!==0)do Ne=J.pending_buf[J.d_buf+Fe*2]<<8|J.pending_buf[J.d_buf+Fe*2+1],$e=J.pending_buf[J.l_buf+Fe],Fe++,Ne===0?ht(J,$e,_e):(oe=H[$e],ht(J,oe+i+1,_e),Ce=k[oe],Ce!==0&&($e-=q[oe],Ue(J,$e,Ce)),Ne--,oe=He(Ne),ht(J,oe,Oe),Ce=w[oe],Ce!==0&&(Ne-=me[oe],Ue(J,Ne,Ce)));while(Fe<J.last_lit);ht(J,I,_e)},"compress_block"),on=s((J,_e)=>{const Oe=_e.dyn_tree,Ne=_e.stat_desc.static_tree,$e=_e.stat_desc.has_stree,Fe=_e.stat_desc.elems;let oe,Ce,z=-1,Y;for(J.heap_len=0,J.heap_max=S,oe=0;oe<Fe;oe++)Oe[oe*2]!==0?(J.heap[++J.heap_len]=z=oe,J.depth[oe]=0):Oe[oe*2+1]=0;for(;J.heap_len<2;)Y=J.heap[++J.heap_len]=z<2?++z:0,Oe[Y*2]=1,J.depth[Y]=0,J.opt_len--,$e&&(J.static_len-=Ne[Y*2+1]);for(_e.max_code=z,oe=J.heap_len>>1;oe>=1;oe--)Ft(J,Oe,oe);Y=Fe;do oe=J.heap[1],J.heap[1]=J.heap[J.heap_len--],Ft(J,Oe,1),Ce=J.heap[1],J.heap[--J.heap_max]=oe,J.heap[--J.heap_max]=Ce,Oe[Y*2]=Oe[oe*2]+Oe[Ce*2],J.depth[Y]=(J.depth[oe]>=J.depth[Ce]?J.depth[oe]:J.depth[Ce])+1,Oe[oe*2+1]=Oe[Ce*2+1]=Y,J.heap[1]=Y++,Ft(J,Oe,1);while(J.heap_len>=2);J.heap[--J.heap_max]=J.heap[1],ut(J,_e),We(Oe,z,J.bl_count)},"build_tree"),Dn=s((J,_e,Oe)=>{let Ne,$e=-1,Fe,oe=_e[0*2+1],Ce=0,z=7,Y=4;for(oe===0&&(z=138,Y=3),_e[(Oe+1)*2+1]=65535,Ne=0;Ne<=Oe;Ne++)Fe=oe,oe=_e[(Ne+1)*2+1],!(++Ce<z&&Fe===oe)&&(Ce<Y?J.bl_tree[Fe*2]+=Ce:Fe!==0?(Fe!==$e&&J.bl_tree[Fe*2]++,J.bl_tree[A*2]++):Ce<=10?J.bl_tree[L*2]++:J.bl_tree[M*2]++,Ce=0,$e=Fe,oe===0?(z=138,Y=3):Fe===oe?(z=6,Y=3):(z=7,Y=4))},"scan_tree"),Yt=s((J,_e,Oe)=>{let Ne,$e=-1,Fe,oe=_e[0*2+1],Ce=0,z=7,Y=4;for(oe===0&&(z=138,Y=3),Ne=0;Ne<=Oe;Ne++)if(Fe=oe,oe=_e[(Ne+1)*2+1],!(++Ce<z&&Fe===oe)){if(Ce<Y)do ht(J,Fe,J.bl_tree);while(--Ce!==0);else Fe!==0?(Fe!==$e&&(ht(J,Fe,J.bl_tree),Ce--),ht(J,A,J.bl_tree),Ue(J,Ce-3,2)):Ce<=10?(ht(J,L,J.bl_tree),Ue(J,Ce-3,3)):(ht(J,M,J.bl_tree),Ue(J,Ce-11,7));Ce=0,$e=Fe,oe===0?(z=138,Y=3):Fe===oe?(z=6,Y=3):(z=7,Y=4)}},"send_tree"),zn=s(J=>{let _e;for(Dn(J,J.dyn_ltree,J.l_desc.max_code),Dn(J,J.dyn_dtree,J.d_desc.max_code),on(J,J.bl_desc),_e=p-1;_e>=3&&J.bl_tree[T[_e]*2+1]===0;_e--);return J.opt_len+=3*(_e+1)+5+5+4,_e},"build_bl_tree"),vn=s((J,_e,Oe,Ne)=>{let $e;for(Ue(J,_e-257,5),Ue(J,Oe-1,5),Ue(J,Ne-4,4),$e=0;$e<Ne;$e++)Ue(J,J.bl_tree[T[$e]*2+1],3);Yt(J,J.dyn_ltree,_e-1),Yt(J,J.dyn_dtree,Oe-1)},"send_all_trees"),mt=s(J=>{let _e=4093624447,Oe;for(Oe=0;Oe<=31;Oe++,_e>>>=1)if(_e&1&&J.dyn_ltree[Oe*2]!==0)return 0;if(J.dyn_ltree[9*2]!==0||J.dyn_ltree[10*2]!==0||J.dyn_ltree[13*2]!==0)return 1;for(Oe=32;Oe<i;Oe++)if(J.dyn_ltree[Oe*2]!==0)return 1;return 0},"detect_data_type");let pt=!1;const Qe=s(J=>{pt||(_t(),pt=!0),J.l_desc=new be(J.dyn_ltree,ue),J.d_desc=new be(J.dyn_dtree,Pe),J.bl_desc=new be(J.bl_tree,Ye),J.bi_buf=0,J.bi_valid=0,Rt(J)},"_tr_init"),Ht=s((J,_e,Oe,Ne)=>{Ue(J,(h<<1)+(Ne?1:0),3),$t(J,_e,Oe,!0)},"_tr_stored_block"),xt=s(J=>{Ue(J,a<<1,3),ht(J,I,D),st(J)},"_tr_align"),wn=s((J,_e,Oe,Ne)=>{let $e,Fe,oe=0;J.level>0?(J.strm.data_type===2&&(J.strm.data_type=mt(J)),on(J,J.l_desc),on(J,J.d_desc),oe=zn(J),$e=J.opt_len+3+7>>>3,Fe=J.static_len+3+7>>>3,Fe<=$e&&($e=Fe)):$e=Fe=Oe+5,Oe+4<=$e&&_e!==-1?Ht(J,_e,Oe,Ne):J.strategy===4||Fe===$e?(Ue(J,(a<<1)+(Ne?1:0),3),en(J,D,G)):(Ue(J,(r<<1)+(Ne?1:0),3),vn(J,J.l_desc.max_code+1,J.d_desc.max_code+1,oe+1),en(J,J.dyn_ltree,J.dyn_dtree)),Rt(J),Ne&&Ae(J)},"_tr_flush_block"),kt=s((J,_e,Oe)=>(J.pending_buf[J.d_buf+J.last_lit*2]=_e>>>8&255,J.pending_buf[J.d_buf+J.last_lit*2+1]=_e&255,J.pending_buf[J.l_buf+J.last_lit]=Oe&255,J.last_lit++,_e===0?J.dyn_ltree[Oe*2]++:(J.matches++,_e--,J.dyn_ltree[(H[Oe]+i+1)*2]++,J.dyn_dtree[He(_e)*2]++),J.last_lit===J.lit_bufsize-1),"_tr_tally");U.exports._tr_init=Qe,U.exports._tr_stored_block=Ht,U.exports._tr_flush_block=wn,U.exports._tr_tally=kt,U.exports._tr_align=xt},426451:U=>{"use strict";function l(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}s(l,"ZStream"),U.exports=l},729661:(U,l,f)=>{"use strict";U.exports=f(350317)},350317:(U,l,f)=>{"use strict";var u=l;u.build="minimal",u.Writer=f(905344),u.BufferWriter=f(67777),u.Reader=f(865236),u.BufferReader=f(874453),u.util=f(521695),u.rpc=f(171732),u.roots=f(411878),u.configure=g;function g(){u.util._configure(),u.Writer._configure(u.BufferWriter),u.Reader._configure(u.BufferReader)}s(g,"configure"),g()},865236:(U,l,f)=>{"use strict";U.exports=r;var u=f(521695),g,m=u.LongBits,h=u.utf8;function a(c,p){return RangeError("index out of range: "+c.pos+" + "+(p||1)+" > "+c.len)}s(a,"indexOutOfRange");function r(c){this.buf=c,this.pos=0,this.len=c.length}s(r,"Reader");var n=typeof Uint8Array<"u"?s(function(p){if(p instanceof Uint8Array||Array.isArray(p))return new r(p);throw Error("illegal buffer")},"create_typed_array"):s(function(p){if(Array.isArray(p))return new r(p);throw Error("illegal buffer")},"create_array"),e=s(function(){return u.Buffer?s(function(S){return(r.create=s(function(y){return u.Buffer.isBuffer(y)?new g(y):n(y)},"create_buffer"))(S)},"create_buffer_setup"):n},"create");r.create=e(),r.prototype._slice=u.Array.prototype.subarray||u.Array.prototype.slice,r.prototype.uint32=s(function(){var p=4294967295;return s(function(){if(p=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(p=(p|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(p=(p|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(p=(p|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(p=(p|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return p;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return p},"read_uint32")},"read_uint32_setup")(),r.prototype.int32=s(function(){return this.uint32()|0},"read_int32"),r.prototype.sint32=s(function(){var p=this.uint32();return p>>>1^-(p&1)|0},"read_sint32");function t(){var c=new m(0,0),p=0;if(this.len-this.pos>4){for(;p<4;++p)if(c.lo=(c.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return c;if(c.lo=(c.lo|(this.buf[this.pos]&127)<<28)>>>0,c.hi=(c.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return c;p=0}else{for(;p<3;++p){if(this.pos>=this.len)throw a(this);if(c.lo=(c.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return c}return c.lo=(c.lo|(this.buf[this.pos++]&127)<<p*7)>>>0,c}if(this.len-this.pos>4){for(;p<5;++p)if(c.hi=(c.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return c}else for(;p<5;++p){if(this.pos>=this.len)throw a(this);if(c.hi=(c.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return c}throw Error("invalid varint encoding")}s(t,"readLongVarint"),r.prototype.bool=s(function(){return this.uint32()!==0},"read_bool");function i(c,p){return(c[p-4]|c[p-3]<<8|c[p-2]<<16|c[p-1]<<24)>>>0}s(i,"readFixed32_end"),r.prototype.fixed32=s(function(){if(this.pos+4>this.len)throw a(this,4);return i(this.buf,this.pos+=4)},"read_fixed32"),r.prototype.sfixed32=s(function(){if(this.pos+4>this.len)throw a(this,4);return i(this.buf,this.pos+=4)|0},"read_sfixed32");function o(){if(this.pos+8>this.len)throw a(this,8);return new m(i(this.buf,this.pos+=4),i(this.buf,this.pos+=4))}s(o,"readFixed64"),r.prototype.float=s(function(){if(this.pos+4>this.len)throw a(this,4);var p=u.float.readFloatLE(this.buf,this.pos);return this.pos+=4,p},"read_float"),r.prototype.double=s(function(){if(this.pos+8>this.len)throw a(this,4);var p=u.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,p},"read_double"),r.prototype.bytes=s(function(){var p=this.uint32(),S=this.pos,d=this.pos+p;if(d>this.len)throw a(this,p);if(this.pos+=p,Array.isArray(this.buf))return this.buf.slice(S,d);if(S===d){var y=u.Buffer;return y?y.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,S,d)},"read_bytes"),r.prototype.string=s(function(){var p=this.bytes();return h.read(p,0,p.length)},"read_string"),r.prototype.skip=s(function(p){if(typeof p=="number"){if(this.pos+p>this.len)throw a(this,p);this.pos+=p}else do if(this.pos>=this.len)throw a(this);while(this.buf[this.pos++]&128);return this},"skip"),r.prototype.skipType=function(c){switch(c){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(c=this.uint32()&7)!==4;)this.skipType(c);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+c+" at offset "+this.pos)}return this},r._configure=function(c){g=c,r.create=e(),g._configure();var p=u.Long?"toLong":"toNumber";u.merge(r.prototype,{int64:s(function(){return t.call(this)[p](!1)},"read_int64"),uint64:s(function(){return t.call(this)[p](!0)},"read_uint64"),sint64:s(function(){return t.call(this).zzDecode()[p](!1)},"read_sint64"),fixed64:s(function(){return o.call(this)[p](!0)},"read_fixed64"),sfixed64:s(function(){return o.call(this)[p](!1)},"read_sfixed64")})}},874453:(U,l,f)=>{"use strict";U.exports=m;var u=f(865236);(m.prototype=Object.create(u.prototype)).constructor=m;var g=f(521695);function m(h){u.call(this,h)}s(m,"BufferReader"),m._configure=function(){g.Buffer&&(m.prototype._slice=g.Buffer.prototype.slice)},m.prototype.string=s(function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},"read_string_buffer"),m._configure()},411878:U=>{"use strict";U.exports={}},171732:(U,l,f)=>{"use strict";var u=l;u.Service=f(21776)},21776:(U,l,f)=>{"use strict";U.exports=g;var u=f(521695);(g.prototype=Object.create(u.EventEmitter.prototype)).constructor=g;function g(m,h,a){if(typeof m!="function")throw TypeError("rpcImpl must be a function");u.EventEmitter.call(this),this.rpcImpl=m,this.requestDelimited=Boolean(h),this.responseDelimited=Boolean(a)}s(g,"Service"),g.prototype.rpcCall=s(function m(h,a,r,n,e){if(!n)throw TypeError("request must be specified");var t=this;if(!e)return u.asPromise(m,t,h,a,r,n);if(!t.rpcImpl){setTimeout(function(){e(Error("already ended"))},0);return}try{return t.rpcImpl(h,a[t.requestDelimited?"encodeDelimited":"encode"](n).finish(),s(function(o,c){if(o)return t.emit("error",o,h),e(o);if(c===null){t.end(!0);return}if(!(c instanceof r))try{c=r[t.responseDelimited?"decodeDelimited":"decode"](c)}catch(p){return t.emit("error",p,h),e(p)}return t.emit("data",c,h),e(null,c)},"rpcCallback"))}catch(i){t.emit("error",i,h),setTimeout(function(){e(i)},0);return}},"rpcCall"),g.prototype.end=s(function(h){return this.rpcImpl&&(h||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},"end")},788884:(U,l,f)=>{"use strict";U.exports=g;var u=f(521695);function g(r,n){this.lo=r>>>0,this.hi=n>>>0}s(g,"LongBits");var m=g.zero=new g(0,0);m.toNumber=function(){return 0},m.zzEncode=m.zzDecode=function(){return this},m.length=function(){return 1};var h=g.zeroHash="\0\0\0\0\0\0\0\0";g.fromNumber=s(function(n){if(n===0)return m;var e=n<0;e&&(n=-n);var t=n>>>0,i=(n-t)/4294967296>>>0;return e&&(i=~i>>>0,t=~t>>>0,++t>4294967295&&(t=0,++i>4294967295&&(i=0))),new g(t,i)},"fromNumber"),g.from=s(function(n){if(typeof n=="number")return g.fromNumber(n);if(u.isString(n))if(u.Long)n=u.Long.fromString(n);else return g.fromNumber(parseInt(n,10));return n.low||n.high?new g(n.low>>>0,n.high>>>0):m},"from"),g.prototype.toNumber=s(function(n){if(!n&&this.hi>>>31){var e=~this.lo+1>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+t*4294967296)}return this.lo+this.hi*4294967296},"toNumber"),g.prototype.toLong=s(function(n){return u.Long?new u.Long(this.lo|0,this.hi|0,Boolean(n)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(n)}},"toLong");var a=String.prototype.charCodeAt;g.fromHash=s(function(n){return n===h?m:new g((a.call(n,0)|a.call(n,1)<<8|a.call(n,2)<<16|a.call(n,3)<<24)>>>0,(a.call(n,4)|a.call(n,5)<<8|a.call(n,6)<<16|a.call(n,7)<<24)>>>0)},"fromHash"),g.prototype.toHash=s(function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},"toHash"),g.prototype.zzEncode=s(function(){var n=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^n)>>>0,this.lo=(this.lo<<1^n)>>>0,this},"zzEncode"),g.prototype.zzDecode=s(function(){var n=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^n)>>>0,this.hi=(this.hi>>>1^n)>>>0,this},"zzDecode"),g.prototype.length=s(function(){var n=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?e===0?n<16384?n<128?1:2:n<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},"length")},521695:function(U,l,f){"use strict";var u=l;u.asPromise=f(218045),u.base64=f(108839),u.EventEmitter=f(824358),u.float=f(349410),u.inquire=f(291738),u.utf8=f(181447),u.pool=f(199390),u.LongBits=f(788884),u.isNode=Boolean(typeof f.g<"u"&&f.g&&f.g.process&&f.g.process.versions&&f.g.process.versions.node),u.global=u.isNode&&f.g||typeof window<"u"&&window||typeof self<"u"&&self||this,u.emptyArray=Object.freeze?Object.freeze([]):[],u.emptyObject=Object.freeze?Object.freeze({}):{},u.isInteger=Number.isInteger||s(function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a},"isInteger"),u.isString=s(function(a){return typeof a=="string"||a instanceof String},"isString"),u.isObject=s(function(a){return a&&typeof a=="object"},"isObject"),u.isset=u.isSet=s(function(a,r){var n=a[r];return n!=null&&a.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1},"isSet"),u.Buffer=function(){try{var h=u.inquire("buffer").Buffer;return h.prototype.utf8Write?h:null}catch{return null}}(),u._Buffer_from=null,u._Buffer_allocUnsafe=null,u.newBuffer=s(function(a){return typeof a=="number"?u.Buffer?u._Buffer_allocUnsafe(a):new u.Array(a):u.Buffer?u._Buffer_from(a):typeof Uint8Array>"u"?a:new Uint8Array(a)},"newBuffer"),u.Array=typeof Uint8Array<"u"?Uint8Array:Array,u.Long=u.global.dcodeIO&&u.global.dcodeIO.Long||u.global.Long||u.inquire("long"),u.key2Re=/^true|false|0|1$/,u.key32Re=/^-?(?:0|[1-9][0-9]*)$/,u.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,u.longToHash=s(function(a){return a?u.LongBits.from(a).toHash():u.LongBits.zeroHash},"longToHash"),u.longFromHash=s(function(a,r){var n=u.LongBits.fromHash(a);return u.Long?u.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))},"longFromHash");function g(h,a,r){for(var n=Object.keys(a),e=0;e<n.length;++e)(h[n[e]]===void 0||!r)&&(h[n[e]]=a[n[e]]);return h}s(g,"merge"),u.merge=g,u.lcFirst=s(function(a){return a.charAt(0).toLowerCase()+a.substring(1)},"lcFirst");function m(h){function a(r,n){if(!(this instanceof a))return new a(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&g(this,n)}return s(a,"CustomError"),a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,enumerable:!1,configurable:!0},name:{get:s(function(){return h},"get"),set:void 0,enumerable:!1,configurable:!0},toString:{value:s(function(){return this.name+": "+this.message},"value"),writable:!0,enumerable:!1,configurable:!0}}),a}s(m,"newError"),u.newError=m,u.ProtocolError=m("ProtocolError"),u.oneOfGetter=s(function(a){for(var r={},n=0;n<a.length;++n)r[a[n]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(r[e[t]]===1&&this[e[t]]!==void 0&&this[e[t]]!==null)return e[t]}},"getOneOf"),u.oneOfSetter=s(function(a){return function(r){for(var n=0;n<a.length;++n)a[n]!==r&&delete this[a[n]]}},"setOneOf"),u.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},u._configure=function(){var h=u.Buffer;if(!h){u._Buffer_from=u._Buffer_allocUnsafe=null;return}u._Buffer_from=h.from!==Uint8Array.from&&h.from||s(function(r,n){return new h(r,n)},"Buffer_from"),u._Buffer_allocUnsafe=h.allocUnsafe||s(function(r){return new h(r)},"Buffer_allocUnsafe")}},905344:(U,l,f)=>{"use strict";U.exports=t;var u=f(521695),g,m=u.LongBits,h=u.base64,a=u.utf8;function r(E,I,A){this.fn=E,this.len=I,this.next=void 0,this.val=A}s(r,"Op");function n(){}s(n,"noop");function e(E){this.head=E.head,this.tail=E.tail,this.len=E.len,this.next=E.states}s(e,"State");function t(){this.len=0,this.head=new r(n,0,0),this.tail=this.head,this.states=null}s(t,"Writer");var i=s(function(){return u.Buffer?s(function(){return(t.create=s(function(){return new g},"create_buffer"))()},"create_buffer_setup"):s(function(){return new t},"create_array")},"create");t.create=i(),t.alloc=s(function(I){return new u.Array(I)},"alloc"),u.Array!==Array&&(t.alloc=u.pool(t.alloc,u.Array.prototype.subarray)),t.prototype._push=s(function(I,A,L){return this.tail=this.tail.next=new r(I,A,L),this.len+=A,this},"push");function o(E,I,A){I[A]=E&255}s(o,"writeByte");function c(E,I,A){for(;E>127;)I[A++]=E&127|128,E>>>=7;I[A]=E}s(c,"writeVarint32");function p(E,I){this.len=E,this.next=void 0,this.val=I}s(p,"VarintOp"),p.prototype=Object.create(r.prototype),p.prototype.fn=c,t.prototype.uint32=s(function(I){return this.len+=(this.tail=this.tail.next=new p((I=I>>>0)<128?1:I<16384?2:I<2097152?3:I<268435456?4:5,I)).len,this},"write_uint32"),t.prototype.int32=s(function(I){return I<0?this._push(S,10,m.fromNumber(I)):this.uint32(I)},"write_int32"),t.prototype.sint32=s(function(I){return this.uint32((I<<1^I>>31)>>>0)},"write_sint32");function S(E,I,A){for(;E.hi;)I[A++]=E.lo&127|128,E.lo=(E.lo>>>7|E.hi<<25)>>>0,E.hi>>>=7;for(;E.lo>127;)I[A++]=E.lo&127|128,E.lo=E.lo>>>7;I[A++]=E.lo}s(S,"writeVarint64"),t.prototype.uint64=s(function(I){var A=m.from(I);return this._push(S,A.length(),A)},"write_uint64"),t.prototype.int64=t.prototype.uint64,t.prototype.sint64=s(function(I){var A=m.from(I).zzEncode();return this._push(S,A.length(),A)},"write_sint64"),t.prototype.bool=s(function(I){return this._push(o,1,I?1:0)},"write_bool");function d(E,I,A){I[A]=E&255,I[A+1]=E>>>8&255,I[A+2]=E>>>16&255,I[A+3]=E>>>24}s(d,"writeFixed32"),t.prototype.fixed32=s(function(I){return this._push(d,4,I>>>0)},"write_fixed32"),t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=s(function(I){var A=m.from(I);return this._push(d,4,A.lo)._push(d,4,A.hi)},"write_fixed64"),t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=s(function(I){return this._push(u.float.writeFloatLE,4,I)},"write_float"),t.prototype.double=s(function(I){return this._push(u.float.writeDoubleLE,8,I)},"write_double");var y=u.Array.prototype.set?s(function(I,A,L){A.set(I,L)},"writeBytes_set"):s(function(I,A,L){for(var M=0;M<I.length;++M)A[L+M]=I[M]},"writeBytes_for");t.prototype.bytes=s(function(I){var A=I.length>>>0;if(!A)return this._push(o,1,0);if(u.isString(I)){var L=t.alloc(A=h.length(I));h.decode(I,L,0),I=L}return this.uint32(A)._push(y,A,I)},"write_bytes"),t.prototype.string=s(function(I){var A=a.length(I);return A?this.uint32(A)._push(a.write,A,I):this._push(o,1,0)},"write_string"),t.prototype.fork=s(function(){return this.states=new e(this),this.head=this.tail=new r(n,0,0),this.len=0,this},"fork"),t.prototype.reset=s(function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new r(n,0,0),this.len=0),this},"reset"),t.prototype.ldelim=s(function(){var I=this.head,A=this.tail,L=this.len;return this.reset().uint32(L),L&&(this.tail.next=I.next,this.tail=A,this.len+=L),this},"ldelim"),t.prototype.finish=s(function(){for(var I=this.head.next,A=this.constructor.alloc(this.len),L=0;I;)I.fn(I.val,A,L),L+=I.len,I=I.next;return A},"finish"),t._configure=function(E){g=E,t.create=i(),g._configure()}},67777:(U,l,f)=>{"use strict";U.exports=m;var u=f(905344);(m.prototype=Object.create(u.prototype)).constructor=m;var g=f(521695);function m(){u.call(this)}s(m,"BufferWriter"),m._configure=function(){m.alloc=g._Buffer_allocUnsafe,m.writeBytesBuffer=g.Buffer&&g.Buffer.prototype instanceof Uint8Array&&g.Buffer.prototype.set.name==="set"?s(function(r,n,e){n.set(r,e)},"writeBytesBuffer_set"):s(function(r,n,e){if(r.copy)r.copy(n,e,0,r.length);else for(var t=0;t<r.length;)n[e++]=r[t++]},"writeBytesBuffer_copy")},m.prototype.bytes=s(function(r){g.isString(r)&&(r=g._Buffer_from(r,"base64"));var n=r.length>>>0;return this.uint32(n),n&&this._push(m.writeBytesBuffer,n,r),this},"write_bytes_buffer");function h(a,r,n){a.length<40?g.utf8.write(a,r,n):r.utf8Write?r.utf8Write(a,n):r.write(a,n)}s(h,"writeStringBuffer"),m.prototype.string=s(function(r){var n=g.Buffer.byteLength(r);return this.uint32(n),n&&this._push(h,n,r),this},"write_string_buffer"),m._configure()},587314:(U,l,f)=>{"use strict";f.r(l),f.d(l,{__assign:()=>m,__asyncDelegator:()=>I,__asyncGenerator:()=>E,__asyncValues:()=>A,__await:()=>y,__awaiter:()=>e,__classPrivateFieldGet:()=>w,__classPrivateFieldSet:()=>N,__createBinding:()=>i,__decorate:()=>a,__exportStar:()=>o,__extends:()=>g,__generator:()=>t,__importDefault:()=>k,__importStar:()=>M,__makeTemplateObject:()=>L,__metadata:()=>n,__param:()=>r,__read:()=>p,__rest:()=>h,__spread:()=>S,__spreadArrays:()=>d,__values:()=>c});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u=s(function(T,O){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,G){D.__proto__=G}||function(D,G){for(var K in G)G.hasOwnProperty(K)&&(D[K]=G[K])},u(T,O)},"extendStatics");function g(T,O){u(T,O);function D(){this.constructor=T}s(D,"__"),T.prototype=O===null?Object.create(O):(D.prototype=O.prototype,new D)}s(g,"__extends");var m=s(function(){return m=Object.assign||s(function(O){for(var D,G=1,K=arguments.length;G<K;G++){D=arguments[G];for(var H in D)Object.prototype.hasOwnProperty.call(D,H)&&(O[H]=D[H])}return O},"__assign"),m.apply(this,arguments)},"__assign");function h(T,O){var D={};for(var G in T)Object.prototype.hasOwnProperty.call(T,G)&&O.indexOf(G)<0&&(D[G]=T[G]);if(T!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,G=Object.getOwnPropertySymbols(T);K<G.length;K++)O.indexOf(G[K])<0&&Object.prototype.propertyIsEnumerable.call(T,G[K])&&(D[G[K]]=T[G[K]]);return D}s(h,"__rest");function a(T,O,D,G){var K=arguments.length,H=K<3?O:G===null?G=Object.getOwnPropertyDescriptor(O,D):G,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(T,O,D,G);else for(var me=T.length-1;me>=0;me--)(q=T[me])&&(H=(K<3?q(H):K>3?q(O,D,H):q(O,D))||H);return K>3&&H&&Object.defineProperty(O,D,H),H}s(a,"__decorate");function r(T,O){return function(D,G){O(D,G,T)}}s(r,"__param");function n(T,O){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(T,O)}s(n,"__metadata");function e(T,O,D,G){function K(H){return H instanceof D?H:new D(function(q){q(H)})}return s(K,"adopt"),new(D||(D=Promise))(function(H,q){function me(Pe){try{ue(G.next(Pe))}catch(Ye){q(Ye)}}s(me,"fulfilled");function we(Pe){try{ue(G.throw(Pe))}catch(Ye){q(Ye)}}s(we,"rejected");function ue(Pe){Pe.done?H(Pe.value):K(Pe.value).then(me,we)}s(ue,"step"),ue((G=G.apply(T,O||[])).next())})}s(e,"__awaiter");function t(T,O){var D={label:0,sent:function(){if(H[0]&1)throw H[1];return H[1]},trys:[],ops:[]},G,K,H,q;return q={next:me(0),throw:me(1),return:me(2)},typeof Symbol=="function"&&(q[Symbol.iterator]=function(){return this}),q;function me(ue){return function(Pe){return we([ue,Pe])}}function we(ue){if(G)throw new TypeError("Generator is already executing.");for(;D;)try{if(G=1,K&&(H=ue[0]&2?K.return:ue[0]?K.throw||((H=K.return)&&H.call(K),0):K.next)&&!(H=H.call(K,ue[1])).done)return H;switch(K=0,H&&(ue=[ue[0]&2,H.value]),ue[0]){case 0:case 1:H=ue;break;case 4:return D.label++,{value:ue[1],done:!1};case 5:D.label++,K=ue[1],ue=[0];continue;case 7:ue=D.ops.pop(),D.trys.pop();continue;default:if(H=D.trys,!(H=H.length>0&&H[H.length-1])&&(ue[0]===6||ue[0]===2)){D=0;continue}if(ue[0]===3&&(!H||ue[1]>H[0]&&ue[1]<H[3])){D.label=ue[1];break}if(ue[0]===6&&D.label<H[1]){D.label=H[1],H=ue;break}if(H&&D.label<H[2]){D.label=H[2],D.ops.push(ue);break}H[2]&&D.ops.pop(),D.trys.pop();continue}ue=O.call(T,D)}catch(Pe){ue=[6,Pe],K=0}finally{G=H=0}if(ue[0]&5)throw ue[1];return{value:ue[0]?ue[1]:void 0,done:!0}}}s(t,"__generator");function i(T,O,D,G){G===void 0&&(G=D),T[G]=O[D]}s(i,"__createBinding");function o(T,O){for(var D in T)D!=="default"&&!O.hasOwnProperty(D)&&(O[D]=T[D])}s(o,"__exportStar");function c(T){var O=typeof Symbol=="function"&&Symbol.iterator,D=O&&T[O],G=0;if(D)return D.call(T);if(T&&typeof T.length=="number")return{next:function(){return T&&G>=T.length&&(T=void 0),{value:T&&T[G++],done:!T}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}s(c,"__values");function p(T,O){var D=typeof Symbol=="function"&&T[Symbol.iterator];if(!D)return T;var G=D.call(T),K,H=[],q;try{for(;(O===void 0||O-- >0)&&!(K=G.next()).done;)H.push(K.value)}catch(me){q={error:me}}finally{try{K&&!K.done&&(D=G.return)&&D.call(G)}finally{if(q)throw q.error}}return H}s(p,"__read");function S(){for(var T=[],O=0;O<arguments.length;O++)T=T.concat(p(arguments[O]));return T}s(S,"__spread");function d(){for(var T=0,O=0,D=arguments.length;O<D;O++)T+=arguments[O].length;for(var G=Array(T),K=0,O=0;O<D;O++)for(var H=arguments[O],q=0,me=H.length;q<me;q++,K++)G[K]=H[q];return G}s(d,"__spreadArrays");function y(T){return this instanceof y?(this.v=T,this):new y(T)}s(y,"__await");function E(T,O,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=D.apply(T,O||[]),K,H=[];return K={},q("next"),q("throw"),q("return"),K[Symbol.asyncIterator]=function(){return this},K;function q(be){G[be]&&(K[be]=function(He){return new Promise(function(Ke,Ue){H.push([be,He,Ke,Ue])>1||me(be,He)})})}function me(be,He){try{we(G[be](He))}catch(Ke){Ye(H[0][3],Ke)}}function we(be){be.value instanceof y?Promise.resolve(be.value.v).then(ue,Pe):Ye(H[0][2],be)}function ue(be){me("next",be)}function Pe(be){me("throw",be)}function Ye(be,He){be(He),H.shift(),H.length&&me(H[0][0],H[0][1])}}s(E,"__asyncGenerator");function I(T){var O,D;return O={},G("next"),G("throw",function(K){throw K}),G("return"),O[Symbol.iterator]=function(){return this},O;function G(K,H){O[K]=T[K]?function(q){return(D=!D)?{value:y(T[K](q)),done:K==="return"}:H?H(q):q}:H}}s(I,"__asyncDelegator");function A(T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var O=T[Symbol.asyncIterator],D;return O?O.call(T):(T=typeof c=="function"?c(T):T[Symbol.iterator](),D={},G("next"),G("throw"),G("return"),D[Symbol.asyncIterator]=function(){return this},D);function G(H){D[H]=T[H]&&function(q){return new Promise(function(me,we){q=T[H](q),K(me,we,q.done,q.value)})}}function K(H,q,me,we){Promise.resolve(we).then(function(ue){H({value:ue,done:me})},q)}}s(A,"__asyncValues");function L(T,O){return Object.defineProperty?Object.defineProperty(T,"raw",{value:O}):T.raw=O,T}s(L,"__makeTemplateObject");function M(T){if(T&&T.__esModule)return T;var O={};if(T!=null)for(var D in T)Object.hasOwnProperty.call(T,D)&&(O[D]=T[D]);return O.default=T,O}s(M,"__importStar");function k(T){return T&&T.__esModule?T:{default:T}}s(k,"__importDefault");function w(T,O){if(!O.has(T))throw new TypeError("attempted to get private field on non-instance");return O.get(T)}s(w,"__classPrivateFieldGet");function N(T,O,D){if(!O.has(T))throw new TypeError("attempted to set private field on non-instance");return O.set(T,D),D}s(N,"__classPrivateFieldSet")},877232:function(U,l,f){var u;(function(g,m){"use strict";var h="1.0.2",a="",r="?",n="function",e="undefined",t="object",i="string",o="major",c="model",p="name",S="type",d="vendor",y="version",E="architecture",I="console",A="mobile",L="tablet",M="smarttv",k="wearable",w="embedded",N=255,T="Amazon",O="Apple",D="ASUS",G="BlackBerry",K="Browser",H="Chrome",q="Edge",me="Firefox",we="Google",ue="Huawei",Pe="LG",Ye="Microsoft",be="Motorola",He="Opera",Ke="Samsung",Ue="Sony",ht="Xiaomi",Tt="Zebra",st="Facebook",ut=s(function(mt,pt){var Qe={};for(var Ht in mt)pt[Ht]&&pt[Ht].length%2===0?Qe[Ht]=pt[Ht].concat(mt[Ht]):Qe[Ht]=mt[Ht];return Qe},"extend"),We=s(function(mt){for(var pt={},Qe=0;Qe<mt.length;Qe++)pt[mt[Qe].toUpperCase()]=mt[Qe];return pt},"enumerize"),_t=s(function(mt,pt){return typeof mt===i?Rt(pt).indexOf(Rt(mt))!==-1:!1},"has"),Rt=s(function(mt){return mt.toLowerCase()},"lowerize"),Ae=s(function(mt){return typeof mt===i?mt.replace(/[^\d\.]/g,a).split(".")[0]:m},"majorize"),$t=s(function(mt,pt){if(typeof mt===i)return mt=mt.replace(/^\s\s*/,a).replace(/\s\s*$/,a),typeof pt===e?mt:mt.substring(0,N)},"trim"),rt=s(function(mt,pt){for(var Qe=0,Ht,xt,wn,kt,J,_e;Qe<pt.length&&!J;){var Oe=pt[Qe],Ne=pt[Qe+1];for(Ht=xt=0;Ht<Oe.length&&!J;)if(J=Oe[Ht++].exec(mt),J)for(wn=0;wn<Ne.length;wn++)_e=J[++xt],kt=Ne[wn],typeof kt===t&&kt.length>0?kt.length===2?typeof kt[1]==n?this[kt[0]]=kt[1].call(this,_e):this[kt[0]]=kt[1]:kt.length===3?typeof kt[1]===n&&!(kt[1].exec&&kt[1].test)?this[kt[0]]=_e?kt[1].call(this,_e,kt[2]):m:this[kt[0]]=_e?_e.replace(kt[1],kt[2]):m:kt.length===4&&(this[kt[0]]=_e?kt[3].call(this,_e.replace(kt[1],kt[2])):m):this[kt]=_e||m;Qe+=2}},"rgxMapper"),Ft=s(function(mt,pt){for(var Qe in pt)if(typeof pt[Qe]===t&&pt[Qe].length>0){for(var Ht=0;Ht<pt[Qe].length;Ht++)if(_t(pt[Qe][Ht],mt))return Qe===r?m:Qe}else if(_t(pt[Qe],mt))return Qe===r?m:Qe;return mt},"strMapper"),en={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},on={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Dn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[y,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[y,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,y],[/opios[\/ ]+([\w\.]+)/i],[y,[p,He+" Mini"]],[/\bopr\/([\w\.]+)/i],[y,[p,He]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[p,y],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[y,[p,"UC"+K]],[/\bqbcore\/([\w\.]+)/i],[y,[p,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[y,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[y,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[y,[p,"IE"]],[/yabrowser\/([\w\.]+)/i],[y,[p,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+K],y],[/\bfocus\/([\w\.]+)/i],[y,[p,me+" Focus"]],[/\bopt\/([\w\.]+)/i],[y,[p,He+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[y,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[y,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[y,[p,He+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[y,[p,"MIUI "+K]],[/fxios\/([-\w\.]+)/i],[y,[p,me]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+K]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 "+K],y],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],y],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[p,y],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,st],y],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[p,y],[/\bgsa\/([\w\.]+) .*safari\//i],[y,[p,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[y,[p,H+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,H+" WebView"],y],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[y,[p,"Android "+K]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,y],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[y,[p,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[y,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[y,Ft,en]],[/(webkit|khtml)\/([\w\.]+)/i],[p,y],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],y],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[y,[p,me+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,y]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[E,"amd64"]],[/(ia32(?=;))/i],[[E,Rt]],[/((?:i[346]|x)86)[;\)]/i],[[E,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[E,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[E,"armhf"]],[/windows (ce|mobile); ppc;/i],[[E,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[E,/ower/,a,Rt]],[/(sun4\w)[;\)]/i],[[E,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[E,Rt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[d,Ke],[S,L]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[d,Ke],[S,A]],[/\((ip(?:hone|od)[\w ]*);/i],[c,[d,O],[S,A]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[d,O],[S,L]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[d,ue],[S,L]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[c,[d,ue],[S,A]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[d,ht],[S,A]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[d,ht],[S,L]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[d,"OPPO"],[S,A]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[d,"Vivo"],[S,A]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[d,"Realme"],[S,A]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[d,be],[S,A]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[d,be],[S,L]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[d,Pe],[S,L]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[d,Pe],[S,A]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[d,"Lenovo"],[S,L]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[d,"Nokia"],[S,A]],[/(pixel c)\b/i],[c,[d,we],[S,L]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[d,we],[S,A]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[d,Ue],[S,A]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[d,Ue],[S,L]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[d,"OnePlus"],[S,A]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[d,T],[S,L]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[d,T],[S,A]],[/(playbook);[-\w\),; ]+(rim)/i],[c,d,[S,L]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[d,G],[S,A]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[d,D],[S,L]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[d,D],[S,A]],[/(nexus 9)/i],[c,[d,"HTC"],[S,L]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[d,[c,/_/g," "],[S,A]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[d,"Acer"],[S,L]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[d,"Meizu"],[S,A]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[d,"Sharp"],[S,A]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,c,[S,A]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,c,[S,L]],[/(surface duo)/i],[c,[d,Ye],[S,L]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[d,"Fairphone"],[S,A]],[/(u304aa)/i],[c,[d,"AT&T"],[S,A]],[/\bsie-(\w*)/i],[c,[d,"Siemens"],[S,A]],[/\b(rct\w+) b/i],[c,[d,"RCA"],[S,L]],[/\b(venue[\d ]{2,7}) b/i],[c,[d,"Dell"],[S,L]],[/\b(q(?:mv|ta)\w+) b/i],[c,[d,"Verizon"],[S,L]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[d,"Barnes & Noble"],[S,L]],[/\b(tm\d{3}\w+) b/i],[c,[d,"NuVision"],[S,L]],[/\b(k88) b/i],[c,[d,"ZTE"],[S,L]],[/\b(nx\d{3}j) b/i],[c,[d,"ZTE"],[S,A]],[/\b(gen\d{3}) b.+49h/i],[c,[d,"Swiss"],[S,A]],[/\b(zur\d{3}) b/i],[c,[d,"Swiss"],[S,L]],[/\b((zeki)?tb.*\b) b/i],[c,[d,"Zeki"],[S,L]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],c,[S,L]],[/\b(ns-?\w{0,9}) b/i],[c,[d,"Insignia"],[S,L]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[d,"NextBook"],[S,L]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],c,[S,A]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],c,[S,A]],[/\b(ph-1) /i],[c,[d,"Essential"],[S,A]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[d,"Envizen"],[S,L]],[/\b(trio[-\w\. ]+) b/i],[c,[d,"MachSpeed"],[S,L]],[/\btu_(1491) b/i],[c,[d,"Rotor"],[S,L]],[/(shield[\w ]+) b/i],[c,[d,"Nvidia"],[S,L]],[/(sprint) (\w+)/i],[d,c,[S,A]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[d,Ye],[S,A]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[d,Tt],[S,L]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[d,Tt],[S,A]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,c,[S,I]],[/droid.+; (shield) bui/i],[c,[d,"Nvidia"],[S,I]],[/(playstation [345portablevi]+)/i],[c,[d,Ue],[S,I]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[d,Ye],[S,I]],[/smart-tv.+(samsung)/i],[d,[S,M]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[d,Ke],[S,M]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,Pe],[S,M]],[/(apple) ?tv/i],[d,[c,O+" TV"],[S,M]],[/crkey/i],[[c,H+"cast"],[d,we],[S,M]],[/droid.+aft(\w)( bui|\))/i],[c,[d,T],[S,M]],[/\(dtv[\);].+(aquos)/i],[c,[d,"Sharp"],[S,M]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[d,$t],[c,$t],[S,M]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[S,M]],[/((pebble))app/i],[d,c,[S,k]],[/droid.+; (glass) \d/i],[c,[d,we],[S,k]],[/droid.+; (wt63?0{2,3})\)/i],[c,[d,Tt],[S,k]],[/(quest( 2)?)/i],[c,[d,st],[S,k]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[S,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[S,A]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[S,L]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[S,L]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[S,A]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[y,[p,q+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[y,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[p,y],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[y,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,y],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[p,[y,Ft,on]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,"Windows"],[y,Ft,on]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[y,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,"Mac OS"],[y,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[y,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,y],[/\(bb(10);/i],[y,[p,G]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[y,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[y,[p,me+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[y,[p,"webOS"]],[/crkey\/([\d\.]+)/i],[y,[p,H+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[p,"Chromium OS"],y],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,y],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],y],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[p,y]]},Yt=s(function(mt,pt){if(typeof mt===t&&(pt=mt,mt=m),!(this instanceof Yt))return new Yt(mt,pt).getResult();var Qe=mt||(typeof g!==e&&g.navigator&&g.navigator.userAgent?g.navigator.userAgent:a),Ht=pt?ut(Dn,pt):Dn;return this.getBrowser=function(){var xt={};return xt[p]=m,xt[y]=m,rt.call(xt,Qe,Ht.browser),xt.major=Ae(xt.version),xt},this.getCPU=function(){var xt={};return xt[E]=m,rt.call(xt,Qe,Ht.cpu),xt},this.getDevice=function(){var xt={};return xt[d]=m,xt[c]=m,xt[S]=m,rt.call(xt,Qe,Ht.device),xt},this.getEngine=function(){var xt={};return xt[p]=m,xt[y]=m,rt.call(xt,Qe,Ht.engine),xt},this.getOS=function(){var xt={};return xt[p]=m,xt[y]=m,rt.call(xt,Qe,Ht.os),xt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Qe},this.setUA=function(xt){return Qe=typeof xt===i&&xt.length>N?$t(xt,N):xt,this},this.setUA(Qe),this},"UAParser");Yt.VERSION=h,Yt.BROWSER=We([p,y,o]),Yt.CPU=We([E]),Yt.DEVICE=We([c,d,S,I,A,M,L,k,w]),Yt.ENGINE=Yt.OS=We([p,y]),typeof l!==e?(e!=="object"&&U.exports&&(l=U.exports=Yt),l.UAParser=Yt):n==="function"&&f.amdO?(u=function(){return Yt}.call(l,f,l,U),u!==m&&(U.exports=u)):typeof g!==e&&(g.UAParser=Yt);var zn=typeof g!==e&&(g.jQuery||g.Zepto);if(zn&&!zn.ua){var vn=new Yt;zn.ua=vn.getResult(),zn.ua.get=function(){return vn.getUA()},zn.ua.set=function(mt){vn.setUA(mt);var pt=vn.getResult();for(var Qe in pt)zn.ua[Qe]=pt[Qe]}}})(typeof window=="object"?window:this)},555633:U=>{U.exports=JSON.parse(`{"name":"@aws-sdk/client-chime-sdk-messaging","description":"AWS SDK for JavaScript Chime Sdk Messaging Client for Node.js, Browser and React Native","version":"3.341.0","scripts":{"build":"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4","clean":"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo chime-sdk-messaging"},"main":"./dist-cjs/index.js","types":"./dist-types/index.d.ts","module":"./dist-es/index.js","sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.341.0","@aws-sdk/config-resolver":"3.341.0","@aws-sdk/credential-provider-node":"3.341.0","@aws-sdk/fetch-http-handler":"3.341.0","@aws-sdk/hash-node":"3.341.0","@aws-sdk/invalid-dependency":"3.341.0","@aws-sdk/middleware-content-length":"3.341.0","@aws-sdk/middleware-endpoint":"3.341.0","@aws-sdk/middleware-host-header":"3.341.0","@aws-sdk/middleware-logger":"3.341.0","@aws-sdk/middleware-recursion-detection":"3.341.0","@aws-sdk/middleware-retry":"3.341.0","@aws-sdk/middleware-serde":"3.341.0","@aws-sdk/middleware-signing":"3.341.0","@aws-sdk/middleware-stack":"3.341.0","@aws-sdk/middleware-user-agent":"3.341.0","@aws-sdk/node-config-provider":"3.341.0","@aws-sdk/node-http-handler":"3.341.0","@aws-sdk/smithy-client":"3.341.0","@aws-sdk/types":"3.341.0","@aws-sdk/url-parser":"3.341.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.341.0","@aws-sdk/util-defaults-mode-node":"3.341.0","@aws-sdk/util-endpoints":"3.341.0","@aws-sdk/util-retry":"3.341.0","@aws-sdk/util-user-agent-browser":"3.341.0","@aws-sdk/util-user-agent-node":"3.341.0","@aws-sdk/util-utf8":"3.310.0","@smithy/protocol-http":"^1.0.1","@smithy/types":"^1.0.0","tslib":"^2.5.0","uuid":"^8.3.2"},"devDependencies":{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31","@types/uuid":"^8.3.0","concurrently":"7.0.0","downlevel-dts":"0.10.1","rimraf":"3.0.2","typedoc":"0.23.23","typescript":"~4.9.5"},"engines":{"node":">=14.0.0"},"typesVersions":{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},"files":["dist-*/**"],"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","browser":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},"homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-chime-sdk-messaging","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-chime-sdk-messaging"}}`)},983393:U=>{U.exports=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{}}],"version":"1.1"}')},529313:(U,l,f)=>{"use strict";f.d(l,{A:()=>h});var u=f(359712),g=f(397153);function m(a,r){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=void 0}s(m,"LodashWrapper"),m.prototype=(0,u.A)(g.A.prototype),m.prototype.constructor=m;const h=m},397153:(U,l,f)=>{"use strict";f.d(l,{A:()=>g});function u(){}s(u,"baseLodash");const g=u},836224:(U,l,f)=>{"use strict";f.d(l,{A:()=>g});function u(m,h){return m<h}s(u,"baseLt");const g=u},783282:(U,l,f)=>{"use strict";f.d(l,{A:()=>r});var u=f(82254),g=f(925353),m=Array.prototype,h=m.splice;function a(n,e){for(var t=n?e.length:0,i=t-1;t--;){var o=e[t];if(t==i||o!==c){var c=o;(0,g.A)(o)?h.call(n,o,1):(0,u.A)(n,o)}}return n}s(a,"basePullAt");const r=a},291591:(U,l,f)=>{"use strict";f.d(l,{A:()=>a});var u=f(458043),g=f(187671),m=f(557371);function h(r,n,e){var t=r.length;if(t<2)return t?(0,m.A)(r[0]):[];for(var i=-1,o=Array(t);++i<t;)for(var c=r[i],p=-1;++p<t;)p!=i&&(o[i]=(0,u.A)(o[i]||c,r[p],n,e));return(0,m.A)((0,g.A)(o,1),n,e)}s(h,"baseXor");const a=h},583317:(U,l,f)=>{"use strict";f.d(l,{A:()=>e});var u=f(41917),g=f(818593),m=f(501694),h=f(648182),a=u.A.isFinite,r=Math.min;function n(t){var i=Math[t];return function(o,c){if(o=(0,m.A)(o),c=c==null?0:r((0,g.A)(c),292),c&&a(o)){var p=((0,h.A)(o)+"e").split("e"),S=i(p[0]+"e"+(+p[1]+c));return p=((0,h.A)(S)+"e").split("e"),+(p[0]+"e"+(+p[1]-c))}return i(o)}}s(n,"createRound");const e=n},734714:(U,l,f)=>{"use strict";f.d(l,{A:()=>fi});var u=f(929008),g=f(548712),m=g.A?function(ct,Ze){return g.A.set(ct,Ze),ct}:u.A;const h=m;var a=f(359712),r=f(523149);function n(ct){return function(){var Ze=arguments;switch(Ze.length){case 0:return new ct;case 1:return new ct(Ze[0]);case 2:return new ct(Ze[0],Ze[1]);case 3:return new ct(Ze[0],Ze[1],Ze[2]);case 4:return new ct(Ze[0],Ze[1],Ze[2],Ze[3]);case 5:return new ct(Ze[0],Ze[1],Ze[2],Ze[3],Ze[4]);case 6:return new ct(Ze[0],Ze[1],Ze[2],Ze[3],Ze[4],Ze[5]);case 7:return new ct(Ze[0],Ze[1],Ze[2],Ze[3],Ze[4],Ze[5],Ze[6])}var Xt=(0,a.A)(ct.prototype),Ot=ct.apply(Xt,Ze);return(0,r.A)(Ot)?Ot:Xt}}s(n,"createCtor");const e=n;var t=f(41917),i=1;function o(ct,Ze,Xt){var Ot=Ze&i,sn=e(ct);function En(){var On=this&&this!==t.A&&this instanceof En?sn:ct;return On.apply(Ot?Xt:this,arguments)}return s(En,"wrapper"),En}s(o,"createBind");const c=o;var p=f(32105),S=Math.max;function d(ct,Ze,Xt,Ot){for(var sn=-1,En=ct.length,On=Xt.length,Sn=-1,bn=Ze.length,xn=S(En-On,0),B=Array(bn+xn),re=!Ot;++Sn<bn;)B[Sn]=Ze[Sn];for(;++sn<On;)(re||sn<En)&&(B[Xt[sn]]=ct[sn]);for(;xn--;)B[Sn++]=ct[sn++];return B}s(d,"composeArgs");const y=d;var E=Math.max;function I(ct,Ze,Xt,Ot){for(var sn=-1,En=ct.length,On=-1,Sn=Xt.length,bn=-1,xn=Ze.length,B=E(En-Sn,0),re=Array(B+xn),Ee=!Ot;++sn<B;)re[sn]=ct[sn];for(var Me=sn;++bn<xn;)re[Me+bn]=Ze[bn];for(;++On<Sn;)(Ee||sn<En)&&(re[Me+Xt[On]]=ct[sn++]);return re}s(I,"composeArgsRight");const A=I;function L(ct,Ze){for(var Xt=ct.length,Ot=0;Xt--;)ct[Xt]===Ze&&++Ot;return Ot}s(L,"countHolders");const M=L;var k=f(887387),w=f(369395),N=(0,w.A)(h);const T=N;var O=/\{\n\/\* \[wrapped with (.+)\] \*/,D=/,? & /;function G(ct){var Ze=ct.match(O);return Ze?Ze[1].split(D):[]}s(G,"getWrapDetails");const K=G;var H=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function q(ct,Ze){var Xt=Ze.length;if(!Xt)return ct;var Ot=Xt-1;return Ze[Ot]=(Xt>1?"& ":"")+Ze[Ot],Ze=Ze.join(Xt>2?", ":" "),ct.replace(H,`{
/* [wrapped with `+Ze+`] */
`)}s(q,"insertWrapDetails");const me=q;var we=f(333373),ue=f(472641),Pe=f(383149),Ye=1,be=2,He=8,Ke=16,Ue=32,ht=64,Tt=128,st=256,ut=512,We=[["ary",Tt],["bind",Ye],["bindKey",be],["curry",He],["curryRight",Ke],["flip",ut],["partial",Ue],["partialRight",ht],["rearg",st]];function _t(ct,Ze){return(0,ue.A)(We,function(Xt){var Ot="_."+Xt[0];Ze&Xt[1]&&!(0,Pe.A)(ct,Ot)&&ct.push(Ot)}),ct.sort()}s(_t,"updateWrapDetails");const Rt=_t;function Ae(ct,Ze,Xt){var Ot=Ze+"";return(0,we.A)(ct,me(Ot,Rt(K(Ot),Xt)))}s(Ae,"setWrapToString");const $t=Ae;var rt=1,Ft=2,en=4,on=8,Dn=32,Yt=64;function zn(ct,Ze,Xt,Ot,sn,En,On,Sn,bn,xn){var B=Ze&on,re=B?On:void 0,Ee=B?void 0:On,Me=B?En:void 0,qe=B?void 0:En;Ze|=B?Dn:Yt,Ze&=~(B?Yt:Dn),Ze&en||(Ze&=~(rt|Ft));var St=[ct,Ze,sn,Me,re,qe,Ee,Sn,bn,xn],At=Xt.apply(void 0,St);return(0,k.A)(ct)&&T(At,St),At.placeholder=Ot,$t(At,ct,Ze)}s(zn,"createRecurry");const vn=zn;var mt=f(402727),pt=f(939759),Qe=f(925353),Ht=Math.min;function xt(ct,Ze){for(var Xt=ct.length,Ot=Ht(Ze.length,Xt),sn=(0,pt.A)(ct);Ot--;){var En=Ze[Ot];ct[Ot]=(0,Qe.A)(En,Xt)?sn[En]:void 0}return ct}s(xt,"reorder");const wn=xt;var kt=f(762946),J=1,_e=2,Oe=8,Ne=16,$e=128,Fe=512;function oe(ct,Ze,Xt,Ot,sn,En,On,Sn,bn,xn){var B=Ze&$e,re=Ze&J,Ee=Ze&_e,Me=Ze&(Oe|Ne),qe=Ze&Fe,St=Ee?void 0:e(ct);function At(){for(var Et=arguments.length,gt=Array(Et),Dt=Et;Dt--;)gt[Dt]=arguments[Dt];if(Me)var jt=(0,mt.A)(At),Cn=M(gt,jt);if(Ot&&(gt=y(gt,Ot,sn,Me)),En&&(gt=A(gt,En,On,Me)),Et-=Cn,Me&&Et<xn){var _n=(0,kt.A)(gt,jt);return vn(ct,Ze,oe,At.placeholder,Xt,gt,_n,Sn,bn,xn-Et)}var Bn=re?Xt:this,Gn=Ee?Bn[ct]:ct;return Et=gt.length,Sn?gt=wn(gt,Sn):qe&&Et>1&&gt.reverse(),B&&bn<Et&&(gt.length=bn),this&&this!==t.A&&this instanceof At&&(Gn=St||e(Gn)),Gn.apply(Bn,gt)}return s(At,"wrapper"),At}s(oe,"createHybrid");const Ce=oe;function z(ct,Ze,Xt){var Ot=e(ct);function sn(){for(var En=arguments.length,On=Array(En),Sn=En,bn=(0,mt.A)(sn);Sn--;)On[Sn]=arguments[Sn];var xn=En<3&&On[0]!==bn&&On[En-1]!==bn?[]:(0,kt.A)(On,bn);if(En-=xn.length,En<Xt)return vn(ct,Ze,Ce,sn.placeholder,void 0,On,xn,void 0,void 0,Xt-En);var B=this&&this!==t.A&&this instanceof sn?Ot:ct;return(0,p.A)(B,this,On)}return s(sn,"wrapper"),sn}s(z,"createCurry");const Y=z;var de=1;function ce(ct,Ze,Xt,Ot){var sn=Ze&de,En=e(ct);function On(){for(var Sn=-1,bn=arguments.length,xn=-1,B=Ot.length,re=Array(B+bn),Ee=this&&this!==t.A&&this instanceof On?En:ct;++xn<B;)re[xn]=Ot[xn];for(;bn--;)re[xn++]=arguments[++Sn];return(0,p.A)(Ee,sn?Xt:this,re)}return s(On,"wrapper"),On}s(ce,"createPartial");const De=ce;var Ie=f(396277),Le="__lodash_placeholder__",fe=1,ge=2,R=4,ae=8,pe=128,Se=256,X=Math.min;function ft(ct,Ze){var Xt=ct[1],Ot=Ze[1],sn=Xt|Ot,En=sn<(fe|ge|pe),On=Ot==pe&&Xt==ae||Ot==pe&&Xt==Se&&ct[7].length<=Ze[8]||Ot==(pe|Se)&&Ze[7].length<=Ze[8]&&Xt==ae;if(!(En||On))return ct;Ot&fe&&(ct[2]=Ze[2],sn|=Xt&fe?0:R);var Sn=Ze[3];if(Sn){var bn=ct[3];ct[3]=bn?y(bn,Sn,Ze[4]):Sn,ct[4]=bn?(0,kt.A)(ct[3],Le):Ze[4]}return Sn=Ze[5],Sn&&(bn=ct[5],ct[5]=bn?A(bn,Sn,Ze[6]):Sn,ct[6]=bn?(0,kt.A)(ct[5],Le):Ze[6]),Sn=Ze[7],Sn&&(ct[7]=Sn),Ot&pe&&(ct[8]=ct[8]==null?Ze[8]:X(ct[8],Ze[8])),ct[9]==null&&(ct[9]=Ze[9]),ct[0]=Ze[0],ct[1]=sn,ct}s(ft,"mergeData");const ke=ft;var ze=f(818593),Gt="Expected a function",dt=1,Qn=2,Wn=8,Vt=16,yn=32,Zt=64,Rn=Math.max;function Nn(ct,Ze,Xt,Ot,sn,En,On,Sn){var bn=Ze&Qn;if(!bn&&typeof ct!="function")throw new TypeError(Gt);var xn=Ot?Ot.length:0;if(xn||(Ze&=~(yn|Zt),Ot=sn=void 0),On=On===void 0?On:Rn((0,ze.A)(On),0),Sn=Sn===void 0?Sn:(0,ze.A)(Sn),xn-=sn?sn.length:0,Ze&Zt){var B=Ot,re=sn;Ot=sn=void 0}var Ee=bn?void 0:(0,Ie.A)(ct),Me=[ct,Ze,Xt,Ot,sn,B,re,En,On,Sn];if(Ee&&ke(Me,Ee),ct=Me[0],Ze=Me[1],Xt=Me[2],Ot=Me[3],sn=Me[4],Sn=Me[9]=Me[9]===void 0?bn?0:ct.length:Rn(Me[9]-xn,0),!Sn&&Ze&(Wn|Vt)&&(Ze&=~(Wn|Vt)),!Ze||Ze==dt)var qe=c(ct,Ze,Xt);else Ze==Wn||Ze==Vt?qe=Y(ct,Ze,Sn):(Ze==yn||Ze==(dt|yn))&&!sn.length?qe=De(ct,Ze,Xt,Ot):qe=Ce.apply(void 0,Me);var St=Ee?h:T;return $t(St(qe,Me),ct,Ze)}s(Nn,"createWrap");const fi=Nn},396277:(U,l,f)=>{"use strict";f.d(l,{A:()=>h});var u=f(548712),g=f(42302),m=u.A?function(a){return u.A.get(a)}:g.A;const h=m},196823:(U,l,f)=>{"use strict";f.d(l,{A:()=>r});var u={};const g=u;var m=Object.prototype,h=m.hasOwnProperty;function a(n){for(var e=n.name+"",t=g[e],i=h.call(g,e)?t.length:0;i--;){var o=t[i],c=o.func;if(c==null||c==n)return o.name}return e}s(a,"getFuncName");const r=a},402727:(U,l,f)=>{"use strict";f.d(l,{A:()=>g});function u(m){var h=m;return h.placeholder}s(u,"getHolder");const g=u},887387:(U,l,f)=>{"use strict";f.d(l,{A:()=>A});var u=f(359712),g=f(397153),m=4294967295;function h(L){this.__wrapped__=L,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}s(h,"LazyWrapper"),h.prototype=(0,u.A)(g.A.prototype),h.prototype.constructor=h;const a=h;var r=f(396277),n=f(196823),e=f(529313),t=f(292049),i=f(753098),o=f(939759);function c(L){if(L instanceof a)return L.clone();var M=new e.A(L.__wrapped__,L.__chain__);return M.__actions__=(0,o.A)(L.__actions__),M.__index__=L.__index__,M.__values__=L.__values__,M}s(c,"wrapperClone");const p=c;var S=Object.prototype,d=S.hasOwnProperty;function y(L){if((0,i.A)(L)&&!(0,t.A)(L)&&!(L instanceof a)){if(L instanceof e.A)return L;if(d.call(L,"__wrapped__"))return p(L)}return new e.A(L)}s(y,"lodash"),y.prototype=g.A.prototype,y.prototype.constructor=y;const E=y;function I(L){var M=(0,n.A)(L),k=E[M];if(typeof k!="function"||!(M in a.prototype))return!1;if(L===k)return!0;var w=(0,r.A)(k);return!!w&&L===w[0]}s(I,"isLaziable");const A=I},548712:(U,l,f)=>{"use strict";f.d(l,{A:()=>m});var u=f(753631),g=u.A&&new u.A;const m=g},762946:(U,l,f)=>{"use strict";f.d(l,{A:()=>m});var u="__lodash_placeholder__";function g(h,a){for(var r=-1,n=h.length,e=0,t=[];++r<n;){var i=h[r];(i===a||i===u)&&(h[r]=u,t[e++]=r)}return t}s(g,"replaceHolders");const m=g},615056:(U,l,f)=>{"use strict";f.d(l,{A:()=>S});var u=f(472641),g=f(152528),m=f(224326),h=f(734714),a=f(402727),r=f(762946),n=1,e=32,t=(0,m.A)(function(d,y,E){var I=n;if(E.length){var A=(0,r.A)(E,(0,a.A)(t));I|=e}return(0,h.A)(d,I,y,E,A)});t.placeholder={};const i=t;var o=f(350416),c=f(930901),p=(0,o.A)(function(d,y){return(0,u.A)(y,function(E){E=(0,c.A)(E),(0,g.A)(d,E,i(d[E],d))}),d});const S=p},267996:(U,l,f)=>{"use strict";f.d(l,{A:()=>m});var u=f(292049);function g(){if(!arguments.length)return[];var h=arguments[0];return(0,u.A)(h)?h:[h]}s(g,"castArray");const m=g},927167:(U,l,f)=>{"use strict";f.d(l,{A:()=>t});var u=f(32105),g=f(224326),m=f(28060),h=f(523149);function a(i,o,c,p,S,d){return(0,h.A)(i)&&(0,h.A)(o)&&(d.set(o,i),(0,m.A)(i,o,void 0,a,d),d.delete(o)),i}s(a,"customDefaultsMerge");const r=a;var n=f(636380),e=(0,g.A)(function(i){return i.push(void 0,r),(0,u.A)(n.A,void 0,i)});const t=e},63753:(U,l,f)=>{"use strict";f.d(l,{A:()=>g});function u(m){for(var h=-1,a=m==null?0:m.length,r={};++h<a;){var n=m[h];r[n[0]]=n[1]}return r}s(u,"fromPairs");const g=u},636380:(U,l,f)=>{"use strict";f.d(l,{A:()=>h});var u=f(28060),g=f(503767),m=(0,g.A)(function(a,r,n,e){(0,u.A)(a,r,n,e)});const h=m},286452:(U,l,f)=>{"use strict";f.d(l,{A:()=>a});var u=f(772559),g=f(836224),m=f(929008);function h(r){return r&&r.length?(0,u.A)(r,m.A,g.A):void 0}s(h,"min");const a=h},588389:(U,l,f)=>{"use strict";f.d(l,{A:()=>a});var u=f(772559),g=f(72367),m=f(836224);function h(r,n){return r&&r.length?(0,u.A)(r,(0,g.A)(n,2),m.A):void 0}s(h,"minBy");const a=h},543406:(U,l,f)=>{"use strict";f.d(l,{A:()=>h});var u=f(72367),g=f(783282);function m(a,r){var n=[];if(!(a&&a.length))return n;var e=-1,t=[],i=a.length;for(r=(0,u.A)(r,3);++e<i;){var o=a[e];r(o,e,a)&&(n.push(o),t.push(e))}return(0,g.A)(a,t),n}s(m,"remove");const h=m},120694:(U,l,f)=>{"use strict";f.d(l,{A:()=>h});var u=Array.prototype,g=u.reverse;function m(a){return a==null?a:g.call(a)}s(m,"reverse");const h=m},584960:(U,l,f)=>{"use strict";f.d(l,{A:()=>m});var u=f(583317),g=(0,u.A)("round");const m=g},351582:(U,l,f)=>{"use strict";f.d(l,{A:()=>e});var u=f(159520),g=f(199922),m=f(818593),h=9007199254740991,a=4294967295,r=Math.min;function n(t,i){if(t=(0,m.A)(t),t<1||t>h)return[];var o=a,c=r(t,a);i=(0,g.A)(i),t-=a;for(var p=(0,u.A)(c,i);++o<t;)i(o);return p}s(n,"times");const e=n},651543:(U,l,f)=>{"use strict";f.d(l,{A:()=>m});var u=f(557371);function g(h,a){return a=typeof a=="function"?a:void 0,h&&h.length?(0,u.A)(h,void 0,a):[]}s(g,"uniqWith");const m=g},721333:(U,l,f)=>{"use strict";f.d(l,{A:()=>n});var u=f(102634),g=f(224326),m=f(291591),h=f(153533),a=f(726666),r=(0,g.A)(function(e){var t=(0,a.A)(e);return t=typeof t=="function"?t:void 0,(0,m.A)((0,u.A)(e,h.A),void 0,t)});const n=r}}]);})();


//# debugId=f9d28ed2-746c-59f3-81b6-16a96feffca3