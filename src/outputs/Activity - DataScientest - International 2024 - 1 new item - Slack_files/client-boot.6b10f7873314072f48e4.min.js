(()=>{var Vi=Object.defineProperty;var l=(j,T)=>Vi(j,"name",{value:T,configurable:!0});(globalThis.webpackChunkwebapp=globalThis.webpackChunkwebapp||[]).push([["client-boot"],{426409:(j,T,e)=>{j.exports=e.p+"ava_0002-192-0ddd598.png"},59767:(j,T,e)=>{j.exports=e.p+"ava_0002-24-f65dddc.png"},815194:(j,T,e)=>{j.exports=e.p+"ava_0002-32-798f043.png"},39937:(j,T,e)=>{j.exports=e.p+"ava_0002-48-d3ba4ec.png"},841814:(j,T,e)=>{j.exports=e.p+"ava_0002-72-c702398.png"},259427:(j,T,e)=>{j.exports=e.p+"ava_0022-192-0cc433a.png"},168221:(j,T,e)=>{j.exports=e.p+"ava_0022-24-21468d4.png"},504396:(j,T,e)=>{j.exports=e.p+"ava_0022-32-7779579.png"},398027:(j,T,e)=>{j.exports=e.p+"ava_0022-48-93db11d.png"},471600:(j,T,e)=>{j.exports=e.p+"ava_0022-72-5a52d67.png"},328521:(j,T,e)=>{j.exports=e.p+"emoji_missing-39b2f0a.png"},327800:(j,T,e)=>{j.exports=e.p+"No_Background-ad3fcdb.png"},571222:(j,T,e)=>{j.exports=e.p+"beach-preview-33d7acf.jpg"},235041:(j,T,e)=>{j.exports=e.p+"beach-33258eb.jpg"},318074:(j,T,e)=>{j.exports=e.p+"gym-preview-cfff9c8.jpg"},750781:(j,T,e)=>{j.exports=e.p+"gym-4d948fc.jpg"},6984:(j,T,e)=>{j.exports=e.p+"home-preview-8baaf03.jpg"},204799:(j,T,e)=>{j.exports=e.p+"home-9e29930.jpg"},900859:(j,T,e)=>{j.exports=e.p+"huddle-in-thread-da71b0e.png"},721848:(j,T,e)=>{j.exports=e.p+"living_room-preview-1b54428.jpg"},842991:(j,T,e)=>{j.exports=e.p+"living_room-a4fba85.jpg"},260321:(j,T,e)=>{j.exports=e.p+"office-preview-de46de4.jpg"},890798:(j,T,e)=>{j.exports=e.p+"office-98668ce.jpg"},739009:(j,T,e)=>{j.exports=e.p+"remote_work-preview-5fbbc32.jpg"},643278:(j,T,e)=>{j.exports=e.p+"remote_work-f8cd791.jpg"},754175:(j,T,e)=>{j.exports=e.p+"tokyo_sight-preview-3554da9.jpg"},290856:(j,T,e)=>{j.exports=e.p+"tokyo_sight-285d851.jpg"},502372:(j,T,e)=>{j.exports=e.p+"slack-salesforce-211570d.png"},155988:(j,T,e)=>{j.exports=e.p+"slack-salesforce@2x-06b5868.png"},866405:(j,T,e)=>{j.exports=e.p+"slack_logo-ebd02d1.svg"},222071:(j,T,e)=>{j.exports=e.p+"slack_logo_white_text-3cffbf2.svg"},970003:(j,T,e)=>{j.exports=e.p+"slackbot_fancy_1024-9020761.png"},178672:(j,T,e)=>{j.exports=e.p+"slackbot_fancy_192-fc3f24d.png"},192924:(j,T,e)=>{j.exports=e.p+"slackbot_fancy_20-e2d1dcb.png"},202040:(j,T,e)=>{j.exports=e.p+"slackbot_fancy_24-e726b64.png"},562485:(j,T,e)=>{j.exports=e.p+"slackbot_fancy_32-176771b.png"},312849:(j,T,e)=>{j.exports=e.p+"slackbot_fancy_36-d921f9d.png"},651301:(j,T,e)=>{j.exports=e.p+"slackbot_fancy_360-29e9a8a.png"},800818:(j,T,e)=>{j.exports=e.p+"slackbot_fancy_48-8220eaf.png"},771412:(j,T,e)=>{j.exports=e.p+"slackbot_fancy_512-8ab1a43.png"},910521:(j,T,e)=>{j.exports=e.p+"slackbot_fancy_72-9db8807.png"},959579:(j,T,e)=>{j.exports=e.p+"slackbot_frowny_1024-f558ba5.png"},979800:(j,T,e)=>{j.exports=e.p+"slackbot_frowny_192-a0b99ba.png"},632932:(j,T,e)=>{j.exports=e.p+"slackbot_frowny_20-96acbec.png"},18464:(j,T,e)=>{j.exports=e.p+"slackbot_frowny_24-2246c7b.png"},164605:(j,T,e)=>{j.exports=e.p+"slackbot_frowny_32-8a50a23.png"},985817:(j,T,e)=>{j.exports=e.p+"slackbot_frowny_36-a7f6cbd.png"},766909:(j,T,e)=>{j.exports=e.p+"slackbot_frowny_360-1cb4740.png"},378346:(j,T,e)=>{j.exports=e.p+"slackbot_frowny_48-fdccd8c.png"},586764:(j,T,e)=>{j.exports=e.p+"slackbot_frowny_512-955a74f.png"},983905:(j,T,e)=>{j.exports=e.p+"slackbot_frowny_72-6d65a0f.png"},780865:(j,T,e)=>{j.exports=e.p+"slackbot_neutral_1024-b58a548.png"},458114:(j,T,e)=>{j.exports=e.p+"slackbot_neutral_192-e5cd9a1.png"},10938:(j,T,e)=>{j.exports=e.p+"slackbot_neutral_20-00a116e.png"},600094:(j,T,e)=>{j.exports=e.p+"slackbot_neutral_24-9a05991.png"},734615:(j,T,e)=>{j.exports=e.p+"slackbot_neutral_32-44a4c24.png"},924435:(j,T,e)=>{j.exports=e.p+"slackbot_neutral_36-c6ff0eb.png"},892347:(j,T,e)=>{j.exports=e.p+"slackbot_neutral_360-7309dbd.png"},136500:(j,T,e)=>{j.exports=e.p+"slackbot_neutral_48-9906623.png"},626094:(j,T,e)=>{j.exports=e.p+"slackbot_neutral_512-dcb310c.png"},840099:(j,T,e)=>{j.exports=e.p+"slackbot_neutral_72-79b9eaa.png"},982270:(j,T,e)=>{j.exports=e.p+"slackbot_sad_surprise_1024-337ff51.png"},629311:(j,T,e)=>{j.exports=e.p+"slackbot_sad_surprise_192-3c6a8ea.png"},288589:(j,T,e)=>{j.exports=e.p+"slackbot_sad_surprise_20-5bfbe5a.png"},506793:(j,T,e)=>{j.exports=e.p+"slackbot_sad_surprise_24-d519530.png"},988016:(j,T,e)=>{j.exports=e.p+"slackbot_sad_surprise_32-5479e94.png"},177780:(j,T,e)=>{j.exports=e.p+"slackbot_sad_surprise_36-6982f8c.png"},287438:(j,T,e)=>{j.exports=e.p+"slackbot_sad_surprise_360-aff835a.png"},887863:(j,T,e)=>{j.exports=e.p+"slackbot_sad_surprise_48-7871f8b.png"},78667:(j,T,e)=>{j.exports=e.p+"slackbot_sad_surprise_512-c8291ff.png"},79692:(j,T,e)=>{j.exports=e.p+"slackbot_sad_surprise_72-ffaf19c.png"},676780:j=>{j.exports={container:"container__oDwNj",primaryIcon:"primaryIcon__aDIDO",secondaryIcon:"secondaryIcon__KuIYv"}},27556:j=>{j.exports={dispatcherViewer:"dispatcherViewer__MqLHN",container:"container__JbqvN",dispatcherViewerIcon:"dispatcherViewerIcon__TTCBH",xDispatcher__viewer_iconPulse:"x-dispatcher__viewer_icon--pulse__rzHrs"}},104273:(j,T,e)=>{"use strict";e.d(T,{A:()=>v,T:()=>_});var t=e(296540),n=e(298559),s=e(131606),a=e(649098),c=e(934861),r=e(129318),o=e(881805),u=e(369391),m=e(156623),i=e(399667);const d=new a.Ay("enterprise_calls");var _;(function(E){E.GLOBAL="GLOBAL",E.US="US"})(_||(_={}));const h=[{label:d.t("Global",{fallbackHash:"5f1184f7df96c5928092ad9c6b550699bf887826",fallbackHashNs:"enterprise_dashboard"}),value:_.GLOBAL},{label:d.t("US",{fallbackHash:"aa3093554472fd113135bed5b63e12f84c2e9fe8",fallbackHashNs:"enterprise_dashboard"}),value:_.US}];let p=l(class extends t.Component{render(){const{appsState:f,featureCallsLocationLock:g,isLockedByOrgAdmin:y,selectedCallLocation:I,isFreeTeam:O}=this.props,M=f&&f.video&&Object.keys(f.video).find(V=>V==="A00");if(!g||!M||O)return null;const C=h.find(V=>V.value===I),P=g?d.t("Slack Calls will be restricted and routed through selected regions only."):"Slack Calls will be restricted and routed through selected regions only.",L=g?d.t("Call location options"):"Call location options",x=g?d.t("Limiting to certain regions may reduce call performance or block joining calls in some circumstances."):"Limiting to certain regions may reduce call performance or block joining calls in some circumstances.",F=g?d.t("Slack calls are restricted by Org admin"):"Slack calls are restricted by Org admin";return t.createElement(t.Fragment,null,t.createElement("div",{"data-qa":"calls-location-container",className:"border_top padding_top_100 p-calls_location_lock__container"},t.createElement("span",{className:"p-calls_location_lock__title"},g?d.t("Calls location"):"Calls location"),t.createElement("span",{className:"p-calls_location_lock__description"},P),t.createElement("div",{className:"p-calls_location_lock__options_container"},t.createElement(m.Ay,{className:"p-calls_location_lock__options",size:"medium",isDisabled:y,options:h,selectedOption:C,onOptionSelected:this.handleOptionSelected,ariaLabel:L}),y&&t.createElement("span",{className:"p-calls_location_lock__options_disable_reason"},F))),I===_.US&&t.createElement(u.Ay,{type:u.QE.boxed,level:u.A_.warning,icon:"warning",align:u.AO.left,className:"p-calls_location_lock__alert"},t.createElement("span",null,x)))}handleOptionSelected(f){this.props.setSelectedCallLocation(f.value)}constructor(f){super(f),(0,s.v)(this,["handleOptionSelected"])}},"CallsRegionLockOptions");p.displayName="CallsRegionLockOptions";const A=l(E=>{const f=(0,o.jV)(E);return{isFreeTeam:!(0,c.qR)((0,r.H7)(E))&&!f,featureCallsLocationLock:(0,i.XY)(E)}},"mapStateToProps"),v=(0,n.N)(A)(p)},387472:(j,T,e)=>{"use strict";e.d(T,{wl:()=>Ee,JG:()=>Q,uy:()=>oe,bM:()=>ce,Ox:()=>de,A9:()=>G,fD:()=>Ae});var t=e(296540),n=e(298559),s=e(991235),a=e(566401),c=e(539622),r=e(661625),o=e(54930),u=e(532395),m=e(113574),i=e(27914),d=e(166722),_=e(914872),h=e(369391),p=e(61629),A=e(140998),v=e(850108),E=e(89149),f=e(399667);const g=l(U=>!(0,f.BD)(U),"isOrgCallsAppsSettingsEnabled");var y=e(248579),I=e(381666);const O=l(U=>{let{callsApps:N,allowCalls:K,clogger:W,action:J,stepVariant:q}=U;const ie={allow_calls:K};N&&N.video&&N.video.length>0&&(ie.video_call_app_ids=N.video.map(Te=>Te.id)),N&&N.audio&&N.audio.length>0&&(ie.audio_call_app_ids=N.audio.map(Te=>Te.id)),N&&N.profile_field_options&&N.profile_field_options.length>0&&(ie.profile_field_option_ids=N.profile_field_options.map(Te=>Te.id)),W.track(u.EventId.CALLS_ADMIN_PHONE_INTEGRATION,{...ie,contexts:{ui_context:{step:u.UiStep.CALLS_ADMIN_SAVE_CALLS_APPS,action:J,entry_point:"calls-workspace-admin",step_variant:q}}})},"clogCallsApps"),M=l(U=>{let{clogger:N}=U;N.track(u.EventId.CALLS_ADMIN_PHONE_INTEGRATION,{contexts:{ui_context:{step:u.UiStep.CALLS_ADMIN_SAVE_CALLS_APPS,action:u.UiAction.LEARN_MORE,is_primary_cta:!0,ui_properties:{element_type:u.ElementType.LINK,element_name:"calls-admin-save-multiple-call-apps"}}}})},"clogLinkToPaidPlans");var C=e(674217);const P=(0,C.Ay)("Clog a standardized click event when a workspace setting is saved",(U,N,K)=>{let{eventId:W,uiStep:J,stepVariant:q}=K;(0,I.e)({getState:N}).track(W,{contexts:{ui_context:{ui_step:J,step_variant:q,ui_properties:{element_type:u.ElementType.BUTTON,element_name:"submit_button"},action:u.UiAction.CLICK,is_primary_cta:!0}}})});P.meta={name:"createThunk",key:"createThunkclogWorkspaceSettingSubmit",description:"Clog a standardized click event when a workspace setting is saved"};const L=P;var x=e(129318),F=e(934861),V=e(894940),B=e(428852),D=e(649098),S=e(104273),R=e(519543);const w=new D.Ay("calls_admin"),Y="only_available_for_paid_teams";var Q;(function(U){U.Video="video",U.Audio="audio",U.ProfileFieldOptions="profile_field_options"})(Q||(Q={}));const Z=l(U=>{let{type:N,app:K,isChecked:W,onChangeCallApp:J,isLocked:q}=U;const ie=(0,t.useCallback)(()=>J(N,K.id),[J,N,K]),Te=`${N}_${K.id}`;return t.createElement(d.A,{text:K.name,type:"inline",cursor:"pointer"},t.createElement(A.A,{id:Te,name:K.name,checked:W,onChange:ie,disabled:q,"data-qa":Te}))},"AppCheckbox");Z.displayName="AppCheckbox";const ee=l(U=>{let{appsState:N,isLocked:K,type:W}=U;return!K||!N?!1:W===Q.Video&&(0,s.A)(N.video)>0&&(0,s.A)(N.audio)===0||(W===Q.Audio&&(0,s.A)(N.audio)>0&&(0,s.A)(N.video))===0},"disableTypeCheckbox"),_e=l(U=>{let{appsState:N,isLocked:K,appId:W,type:J}=U;if(!K||!N)return!1;const q=N.video?Object.keys(N.video):[],ie=N.audio?Object.keys(N.audio):[],Te=q.length+ie.length;if(W&&Te===1){let Me,ke;return q.length===1?(Me=q[0],ke=Q.Video):ie.length===1&&(Me=ie[0],ke=Q.Audio),W===Me&&J===ke}return!1},"disableAppCheckbox"),Ee=l(U=>{let{type:N,sectionTitle:K,appsState:W,installedCallApps:J,onChangeCallType:q,onChangeCallApp:ie,isLocked:Te,dataQa:Me}=U;if(!J||!W||!J[N])return null;const ke=`enable_${N}_calls`;return t.createElement("div",{className:`p-calls_workspace_settings__${N}_container`,"data-qa":Me},t.createElement(d.A,{text:K,type:"inline",cursor:"pointer"},t.createElement(A.A,{checked:!(0,a.A)(W[N]),id:ke,name:ke,onChange:q,disabled:ee({appsState:W,isLocked:Te,type:N})})),t.createElement("p",{className:"p-calls_workspace_settings__options_title"},w.t("Calling options:")),t.createElement("div",{className:"p-calls_workspace_settings__calls_apps"},[...J[N]].map(Pe=>t.createElement(Z,{app:Pe,isChecked:(0,c.A)(W[N],Pe.id),key:`${N}_${Pe.id}`,onChangeCallApp:ie,type:N,isLocked:_e({appsState:W,isLocked:Te,appId:Pe.id,type:N})}))))},"CallSection");Ee.displayName="CallSection";const G=l(U=>{let{installedCallApps:N,appsState:K,appId:W,type:J,setAppsState:q}=U;if(!N||!K)return;const ie={...K[J]};if((0,c.A)(ie,W))delete ie[W],q({...K,[J]:ie});else{const Te=(0,r.A)(N[J],Me=>Me.id===W);Te>-1&&(ie[W]=Te,q({...K,[J]:ie}))}},"toggleCallApp"),Ae=l(U=>{let{installedCallApps:N,appsState:K,type:W,setAppsState:J}=U;if(!(!K||!N))if(!(0,a.A)(K[W]))J({...K,[W]:{}});else{var q;const ie={};(q=N[W])===null||q===void 0||q.forEach((Te,Me)=>{ie[Te.id]=Me}),J({...K,[W]:ie})}},"toggleCallType"),ce=l((U,N)=>{const K={video:{},audio:{},profile_field_options:{}};return!N||!U||[Q.Video,Q.Audio,Q.ProfileFieldOptions].forEach(W=>{N[W]&&[...N[W]].forEach(q=>{const ie=(0,r.A)(U[W],Te=>Te.id===q.id);ie>-1&&(K[W][q.id]=ie)})}),K},"reduceTeamPrefApps"),de=l(function(){let{installedCallApps:U,appsState:N}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const K={video:[],audio:[]};return!U||!N||[Q.Video,Q.Audio].forEach(W=>{if(U[W]){const J=[...U[W]],q=N[W];J.forEach(ie=>{if((0,c.A)(q,ie.id)){var Te;(Te=K[W])===null||Te===void 0||Te.push((0,o.A)(ie,"preselected"))}})}}),K},"setCallsAppsPayloadToSave"),oe=l(U=>{if(!U||!U.video)return;const N=U.video.findIndex(K=>K.id===R.rq);N>=0&&U.video.splice(N,1)},"filterNativeCallsApp"),$=l(U=>{let{isOpen:N,closeModal:K,errorMessage:W,buttonLabel:J}=U;return t.createElement(B.dW,{centered:!0,isOpen:N,closeModal:K},t.createElement(B.$m,{className:"p-calls_workspace_settings__error_modal"},t.createElement(B.qf,null,t.createElement("p",null,W))),t.createElement(B.jl,null,t.createElement(B.ox,null,t.createElement(B.s_,{type:"outline",onClick:K},J))))},"ErrorModal");$.displayName="ErrorModal";const re=l(U=>{let{installedCallApps:N,teamPrefCallsApps:K,setMultipleTeamPrefsByApi:W,clogWorkspaceSettingSubmit:J,isLocked:q,isCallsSelectorDisabled:ie,clogger:Te,isOrgCallsAppsSettingsEnabled:Me,team:ke,isCallsLocationLockedByOrgAdmin:Pe,callsLocationLocked:Ie}=U;const[X,ne]=(0,t.useState)(!1),[fe,be]=(0,t.useState)(""),Be=w.t("Save"),We=w.t("Saved"),Re=w.t("Sorry! Something went wrong. Please try again."),ve=w.t("Allow third-party calls in Slack"),xe=w.t("Allow phone number calls in Slack (only in direct messages)"),He=w.t("Ok"),je=w.t("Sorry, call selection is currently managed by your organization admin."),Ke=w.rt("First install a <a>calling app from our app directory</a> then come back here to enable it as a default calling app.",{},Mn=>{let{text:Wn}=Mn;return t.createElement(v.A,{articleId:208492868},Wn)}),ht=(0,t.useCallback)(()=>{M({clogger:Te}),(0,F.gC)(ke,(0,V.hZ)({entryPoint:"calls-admin-workspace-settings"}))},[Te,ke]),dt=w.rt("Sorry, this feature is only available to <a>paid teams</a>.",{fallbackHash:"48faa2ac6ac6d273cd7dacbe15a5b6f7e1822087"},Mn=>{let{text:Wn}=Mn;return t.createElement("a",{href:"#",onClick:ht,"data-qa":"paid_plan_page_link"},Wn)}),Ve=K?ce(N,K):{video:{},audio:{},profile_field_options:{}},[Je,Ge]=(0,t.useState)(Ve),[Le,Mt]=(0,t.useState)(!1),[Dt,pt]=(0,t.useState)(!1),Qt=Ie&&Ie.length>0?S.T.US:S.T.GLOBAL,[Nt,bt]=(0,t.useState)(Qt);(0,t.useEffect)(()=>{const Mn=ce(N,K);Ge(Mn)},[Ge,N,K]);const Yt=(0,t.useCallback)(Mn=>{pt(!1),Ae({installedCallApps:N,appsState:Je,type:Mn,setAppsState:Ge})},[N,Je,Ge]),fn=(0,t.useCallback)(()=>Yt(Q.Video),[Yt]),Tt=(0,t.useCallback)(()=>Yt(Q.Audio),[Yt]),sn=(0,t.useCallback)(()=>ne(!1),[ne]),mn=(0,t.useCallback)((Mn,Wn)=>{pt(!1),G({installedCallApps:N,appsState:Je,appId:Wn,type:Mn,setAppsState:Ge})},[N,Je,Ge]),wt=(0,t.useCallback)(Mn=>{bt(Mn),pt(!1)},[bt]),On=l(()=>{Mt(!0),J({eventId:u.EventId.ADMIN_TEAM_SETTINGS,uiStep:"change_enable_calls"});const Mn=!(0,a.A)(Je.video)||!(0,a.A)(Je.audio),Wn=de({installedCallApps:N,appsState:Je}),xn={calls_apps:Wn};(0,F.r7)(ke)||(xn.allow_calls=Mn),Pe||(xn.calls_locations=Nt===S.T.US?[Nt]:[]),W({prefs:xn}).then(()=>{pt(!0),O({callsApps:Wn,allowCalls:Mn,clogger:Te,action:u.UiAction.SAVE})}).catch(gn=>{var An;ne(!0),(gn==null||(An=gn.data)===null||An===void 0?void 0:An.error)===Y?(be(dt),O({callsApps:Wn,allowCalls:Mn,clogger:Te,action:u.UiAction.ERROR,stepVariant:Y})):(be(Re),O({callsApps:Wn,allowCalls:Mn,clogger:Te,action:u.UiAction.ERROR}))}).finally(()=>Mt(!1))},"onSubmit"),Zt=N&&(N.video&&N.video.length>0||N.audio&&N.audio.length>0);return t.createElement("div",{key:"calls_workspace_settings",className:"p-calls_workspace_settings"},ie&&Me?t.createElement(h.Ay,{type:"boxed",level:"info",icon:"info",align:"left","data-qa":"org_calls_apps_alert_selector_disabled"},t.createElement("span",null,je)):t.createElement(t.Fragment,null,!Zt&&t.createElement(h.Ay,{type:"boxed",level:"info",icon:"info",align:"left"},t.createElement("span",null,Ke)),t.createElement("div",{className:"p-calls_workspace_settings__call_options"},N&&N.video&&N.video.length>0&&t.createElement(Ee,{type:Q.Video,sectionTitle:ve,appsState:Je,installedCallApps:N,onChangeCallType:fn,onChangeCallApp:mn,isLocked:q}),N&&N.audio&&N.audio.length>0&&t.createElement(Ee,{type:Q.Audio,sectionTitle:xe,appsState:Je,installedCallApps:N,onChangeCallType:Tt,onChangeCallApp:mn,isLocked:q})),t.createElement(S.A,{appsState:Je,isLockedByOrgAdmin:Pe,selectedCallLocation:Nt,setSelectedCallLocation:wt}),t.createElement($,{closeModal:sn,isOpen:X,errorMessage:fe,buttonLabel:He}),Zt&&t.createElement(_.A,{onClick:On,loading:Le,"data-qa":"call_save_button"},Dt&&t.createElement(p.A,{type:"check-circle-o",className:"p-calls_workspace_settings_check_icon"}),Dt?We:Be)))},"CallsWorkspaceSettings");re.displayName="CallsWorkspaceSettings";const ue=l(U=>{const N=(0,m.tV)(U,"calls_apps");oe(N);const K=(0,E.x)(U,"calls_apps"),W=(0,y.SI)(U,"calls_locations");return{installedCallApps:N,teamPrefCallsApps:K,clogger:(0,I.e)({state:U}),isOrgCallsAppsSettingsEnabled:g(U),team:(0,x.H7)(U),isCallsLocationLockedByOrgAdmin:!!W&&W.length>0,callsLocationLocked:(0,E.x)(U,"calls_locations")}},"mapStateToProps"),te={setMultipleTeamPrefsByApi:i.hz,clogWorkspaceSettingSubmit:L},ae={toggleCallApp:G,toggleCallType:Ae,AppCheckbox:Z,reduceTeamPrefApps:ce,setCallsAppsPayloadToSave:de,disableTypeCheckbox:ee,disableAppCheckbox:_e},H=(0,n.N)(ue,te)(re)},258008:(j,T,e)=>{"use strict";e.d(T,{o:()=>dt});var t=e(296540),n=e(298559),s=e(46996),a=e(966528),c=e(519543),r=e(426170),o=e(110010);function u(){return u=Object.assign||function(Ve){for(var Je=1;Je<arguments.length;Je++){var Ge=arguments[Je];for(var Le in Ge)Object.prototype.hasOwnProperty.call(Ge,Le)&&(Ve[Le]=Ge[Le])}return Ve},u.apply(this,arguments)}l(u,"_extends");let m=l(class extends t.PureComponent{componentDidMount(){var Je;(Je=this.context.windowRef.deref())===null||Je===void 0||Je.document.addEventListener("mouseup",this.onMouseUp)}componentWillUnmount(){var Je;this.isDragging&&this.onMouseUp(),(Je=this.context.windowRef.deref())===null||Je===void 0||Je.document.removeEventListener("mouseup",this.onMouseUp)}onMouseDown(Je){var Ge;Je.button===0&&(this.isDragging=!0,(Ge=this.context.windowRef.deref())===null||Ge===void 0||Ge.document.addEventListener("mousemove",this.onMouseMove),this.props.onDragStart(Je))}onMouseMove(Je){Je.button===0&&this.isDragging&&this.props.onDragMove(Je)}onMouseUp(Je){if(Je&&Je.button!==0)return;const Ge=this.isDragging;if(this.isDragging=!1,Ge){var Le;(Le=this.context.windowRef.deref())===null||Le===void 0||Le.document.removeEventListener("mousemove",this.onMouseMove),this.props.onDragEnd(Je)}}render(){const{children:Je,refToForward:Ge,onDragStart:Le,onDragMove:Mt,onDragEnd:Dt,...pt}=this.props,Qt=t.Children.only(this.props.children);return t.cloneElement(Qt,{...pt,onMouseDown:bt=>this.onMouseDown(bt),ref:(0,r.N)(Ge,Qt)})}constructor(Je){super(Je),this.isDragging=!1,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this)}},"BaseDragTarget");m.displayName="BaseDragTarget",m.contextType=o.M;const i=t.forwardRef((Ve,Je)=>t.createElement(m,u({},Ve,{refToForward:Je})));var d=e(264918),_=e(674217),h=e(533456);const p=(0,h.tZ)("USER-ACTIONS"),A=(0,_.Ay)("Logs user interaction with call window",(Ve,Je,Ge)=>{p.info(Ge)});A.meta={name:"createThunk",key:"createThunklogUserAction",description:"Logs user interaction with call window"};var v=e(129822),E=e(394577);function f(Ve){y=Y(de(Ve))}l(f,"startCurve");function g(Ve){const Je=de(Ve),Ge=Q(y,Je);return Ge.update_status==V.SUCCESS?Ge:Q(y,Je)}l(g,"addToCurve");let y;const I=2,O=9,M=9,C=50,P=80,L=1,x=!0,F=!0,V={SUCCESS:1,FAIL_CORNER:2,FAIL_MAXED:3},B=l(()=>({segments:[],vdmap:[]}),"initCurve"),D=l((Ve,Je)=>({c0:{x:Ve,y:Je},c1:{x:Ve,y:Je},c2:{x:Ve,y:Je},c3:{x:Ve,y:Je}}),"initCurveSegment"),S=l(Ve=>Ve.segments[Ve.segments.length-1],"getLastSegment"),R=l(Ve=>Ve.c3,"getLastPoint"),w=l(function(Ve){return{c0:{x:Ve.c0.x,y:Ve.c0.y},c1:{x:Ve.c1.x,y:Ve.c1.y},c2:{x:Ve.c2.x,y:Ve.c2.y},c3:{x:Ve.c3.x,y:Ve.c3.y},constrain_to:Ve.constrain_to==null?void 0:{x:Ve.constrain_to.x,y:Ve.constrain_to.y},error:Ve.error||0,update_status:Ve.update_status}},"copySegment"),Y=l(function(Ve){let{x:Je,y:Ge}=Ve;const Le=B();return Le.segments.push(D(Je,Ge)),Le},"createCurve"),Q=l(function(Ve,Je){const Ge=S(Ve),Le=R(Ge);if(N(Je,R(Ge))<L)return Ge;if(V.SUCCESS!=Ge.update_status&&Ge.update_status!==void 0){let Mt;V.FAIL_CORNER==Ge.update_status?Mt=D(Le.x,Le.y):V.FAIL_MAXED==Ge.update_status&&(Mt=D(Le.x,Le.y),Mt.constrain_to=q(_e(Ge))),Ve.vdmap=[],Ve.segments.push(Mt)}return Z(Ve,Je)},"addToCurveImpl"),Z=l(function(Ve,Je){const Ge=S(Ve),{x:Le,y:Mt}=Je;let Dt=R(Ge);const pt=w(Ge);if(Ee(Ge,Je))return Ge.update_status=V.FAIL_CORNER,Ge;Ge.c3={x:Le,y:Mt},Ge.c2={x:Ge.c2.x+Le-Dt.x,y:Ge.c2.y+Mt-Dt.y};const Qt=J(Dt,Je),Nt=Ae(Qt),bt=re(Dt,Nt),Yt=re(Je,Nt),fn=ce(te(Nt,2)),Tt=W(fn),sn=ae(fn,Tt),mn=ue(Yt,bt),wt=W(mn),On=ae(mn,wt);let Zt=bt;for(let gn=0;gn<wt;gn++){let An=Zt,vt=Nt;for(let xt=0;xt<Tt;xt++){const{x:Vt,y:Se}=de(An);Ve.vdmap[Vt]||(Ve.vdmap[Vt]=[]),Ve.vdmap[Vt][Se]==null?Ve.vdmap[Vt][Se]=de(vt):Ve.vdmap[Vt][Se]=oe(Ve.vdmap[Vt][Se])<oe(de(vt))?Ve.vdmap[Vt][Se]:de(vt),vt=re(vt,sn),An=re(An,sn)}Zt=re(Zt,On)}const Mn=ue(Je,{x:O,y:O}),Wn=re(Je,{x:O,y:O});for(let gn=Mn.x;gn<Wn.x;gn++)for(let An=Mn.y;An<Wn.y;An++){Ve.vdmap[gn]||(Ve.vdmap[gn]=[]);const vt=ue({x:gn,y:An},Je);Ve.vdmap[gn][An]==null?Ve.vdmap[gn][An]=vt:Ve.vdmap[gn][An]=oe(Ve.vdmap[gn][An])<oe(vt)?Ve.vdmap[gn][An]:vt}let xn=0;for(;;){let gn={x:0,y:0},An={x:0,y:0};for(let Vt=0;Vt<M;Vt++){const Se=Vt/M,St=de(ie(Ge,Se)),Ce=ee(Ve,St),Ne=$(Ce),ze=Ce.x,Oe=Ce.y;let Fe=1;F&&(Se<.1||Se>.9)&&(Fe=10),gn.x+=Se*Math.pow(1-Se,2)*Ne*ze*Fe,gn.y+=Se*Math.pow(1-Se,2)*Ne*Oe*Fe,An.x+=Math.pow(Se,2)*(1-Se)*Ne*ze*Fe,An.y+=Math.pow(Se,2)*(1-Se)*Ne*Oe*Fe}if(F){const Vt=ue(G(Ge),Ge.c2),Se=ue(G(Ge),Ge.c1);gn=ue(gn,te(Se,.03)),An=ue(An,te(Vt,.03))}Ge.constrain_to&&(gn=te(Ge.constrain_to,U(Ge.constrain_to,gn)));const vt=1;Ge.c1.x-=vt*gn.x*6/M,Ge.c1.y-=vt*gn.y*6/M,Ge.c2.x-=vt*An.x*6/M,Ge.c2.y-=vt*An.y*6/M;let xt=0;for(let Vt=0;Vt<M;Vt++){const Se=Vt/M,St=ie(Ge,Se),Ce=ee(Ve,de(St));xt+=Math.pow(Ce.x,2)+Math.pow(Ce.y,2)}if(xt=xt/M,xn++,Ge.error=xt,Ge.steps=xn,xt<I||xn>C)break}return xn>C?(Ge.c0=pt.c0,Ge.c1=pt.c1,Ge.c2=pt.c2,Ge.c3=pt.c3,Ge.error=pt.error,Ge.constrain_to=pt.constrain_to,Ge.update_status=V.FAIL_MAXED,Ge):(Ge.update_status=V.SUCCESS,Ge)},"updateDistanceField"),ee=l(function(Ve,Je){let{x:Ge,y:Le}=Je;if(Ve.vdmap[Ge]){const Mt=Ve.vdmap[Ge][Le],Dt=Ve.vdmap[Ge][Le+1];let pt=Mt!=null?{x:Mt.x,y:Mt.y}:{x:O,y:O};return Dt&&Dt.x!=null&&Math.abs(pt.x)>Math.abs(Dt.x)&&(pt.x=Dt.x),Dt&&Dt.y!=null&&Math.abs(pt.y)>Math.abs(Dt.y)&&(pt.y=Dt.y),pt}else return{x:O,y:O}},"getDistanceFromPolyline"),_e=l(function(Ve){const Je=Ve.c3,Ge=Ve.c2;return{x:3*(Ge.x-Je.x),y:3*(Ge.y-Je.y)}},"getCurveEndTangent"),Ee=l(function(Ve,Je){if(H(Ve.c0,Ve.c3))return!1;let Ge;x?Ge=q(ue(ie(Ve,.95),Ve.c3)):Ge=q(_e(Ve));const Le=q({x:Je.x-Ve.c3.x,y:Je.y-Ve.c3.y}),Mt=U(Ge,Le);if(K(Math.acos(Mt))<P)return!0},"checkCorner"),G=l(Ve=>re(ae(ue(Ve.c3,Ve.c0),2),Ve.c0),"getSegmentMidpoint"),Ae=l(Ve=>({x:Ve.x*O,y:Ve.y*O}),"getScaledVectorDifference"),ce=l(Ve=>({x:-Ve.x,y:-Ve.y}),"negateVec"),de=l(Ve=>({x:Math.round(Ve.x),y:Math.round(Ve.y)}),"roundVec"),oe=l(Ve=>Math.pow(Ve.x,2)+Math.pow(Ve.y,2),"sumOfSquaresVec"),$=l(Ve=>Math.sqrt(oe(Ve)),"magnitudeVec"),re=l((Ve,Je)=>({x:Ve.x+Je.x,y:Ve.y+Je.y}),"addVec"),ue=l((Ve,Je)=>re(Ve,ce(Je)),"subVec"),te=l((Ve,Je)=>({x:Ve.x*Je,y:Ve.y*Je}),"multVec"),ae=l((Ve,Je)=>te(Ve,1/Je),"divVec"),H=l((Ve,Je)=>Ve.x==Je.x&&Ve.y==Je.y,"equalVec"),U=l((Ve,Je)=>Ve.x*Je.x+Ve.y*Je.y,"dotProduct"),N=l(function(Ve){let{x:Je,y:Ge}=Ve,Le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0};return Math.sqrt(Math.pow(Je-Le.x,2)+Math.pow(Ge-Le.y,2))},"getMagnitude"),K=l(Ve=>Ve*180/Math.PI,"radiansToDegrees"),W=l(Ve=>Math.max(Math.abs(Ve.x),Math.abs(Ve.y)),"getDDASteps"),J=l((Ve,Je)=>{const Ge=Je.x-Ve.x,Mt=Je.y-Ve.y,Dt=-Ge;return q({x:Mt,y:Dt})},"getPerpindicularUnitVector"),q=l(function(Ve){let{x:Je,y:Ge}=Ve;const Le=N({x:Je,y:Ge});return{x:Je/Le,y:Ge/Le}},"getUnitVector"),ie=l(function(Ve,Je){const Ge=Te(Je,Ve.c0.x,Ve.c1.x,Ve.c2.x,Ve.c3.x),Le=Te(Je,Ve.c0.y,Ve.c1.y,Ve.c2.y,Ve.c3.y);return{x:Ge,y:Le}},"getPointAlongCurve"),Te=l(function(Ve,Je,Ge,Le,Mt){return Je*Math.pow(1-Ve,3)+Ge*3*Ve*Math.pow(1-Ve,2)+Le*3*Math.pow(Ve,2)*(1-Ve)+Mt*Math.pow(Ve,3)},"singleComponentBezier");function Me(Ve,Je){return{a:Ve,b:Je}}l(Me,"makeLineSegment");function ke(Ve,Je){let[Ge,Le]=Ve,[Mt,Dt]=Je;return Math.sqrt((Ge-Mt)**2+(Le-Dt)**2)}l(ke,"magnitude");class Pe{add(Je){return this.current?ke(this.current.a,Je)>.05?(this.current=Me(this.current.b,Je),{type:DrawMessageType.New,segment:this.current}):(this.current=Me(this.current.a,Je),{type:DrawMessageType.Edit,segment:this.current}):(this.current=Me(Je,Je),{type:DrawMessageType.New,segment:this.current})}}l(Pe,"ProgressiveEqualLengthMultilineTransformer");class Ie{setTargetRect(Je){this.targetRect=Je}add(Je){if(!(0,v.Z)(this.targetRect,"Need size to transform point to curve"))throw Error();const{top:Ge,left:Le,width:Mt,height:Dt}=this.targetRect,[pt,Qt]=[Je[0]-Le,Je[1]-Ge];if(!this.current){f({x:pt,y:Qt});const sn=[pt/Mt,Qt/Dt];return this.current={a:sn,b:sn,c:sn,d:sn},{type:c.Sl.New,segment:this.current}}const Nt=this.current,{c0:bt,c1:Yt,c2:fn,c3:Tt}=g({x:pt,y:Qt});return this.current={a:[bt.x/Mt,bt.y/Dt],b:[Yt.x/Mt,Yt.y/Dt],c:[fn.x/Mt,fn.y/Dt],d:[Tt.x/Mt,Tt.y/Dt]},this.current.a[0]!==Nt.a[0]||this.current.a[1]!==Nt.a[1]?{type:c.Sl.New,segment:this.current}:{type:c.Sl.Edit,segment:this.current}}}l(Ie,"ProgressiveCurveTransformer");var X=e(574022),ne=e(836806);const fe=2e3,be=50,Be=l(Ve=>{const{onDragStart:Je,onDragMove:Ge,onDragEnd:Le,onCursorMoveStart:Mt,onCursorMove:Dt,onCursorMoveEnd:pt,children:Qt}=Ve,[Nt,bt]=(0,t.useState)(!1),[Yt,fn]=(0,t.useState)(!1),[Tt,sn]=(0,t.useState)(0),[mn,wt]=(0,t.useState)(0),On=(0,t.useCallback)(vt=>{vt.button===0&&(bt(!0),Je(vt))},[Je]),Zt=(0,t.useCallback)(()=>{fn(!1),pt()},[fn,pt]);(0,ne.Z)(()=>{Zt()},fe,[Tt,mn]);const Mn=(0,t.useCallback)(vt=>{if(vt.button===0){if(Nt){Ge(vt);return}Yt||(Mt(vt),fn(!0)),Dt(vt),sn(vt.movementX),wt(vt.movementY)}},[Yt,Nt,Dt,Mt,Ge]),Wn=(0,X.A)(Mn,be,{leading:!0}),xn=(0,t.useCallback)(vt=>{Wn(vt)},[Wn]),gn=(0,t.useCallback)(vt=>{if(vt&&vt.button!==0)return;const xt=Nt;bt(!1),xt&&Le(vt)},[Nt,Le]),An=(0,t.useCallback)(vt=>{const xt=Nt;bt(!1),xt?Le(vt):Yt&&pt()},[Nt,Le,Yt,pt]);return t.createElement("div",{onMouseDown:On,onMouseMove:xn,onMouseUp:gn,onMouseLeave:An,"aria-hidden":"true"},Qt)},"HuddlesCursorTarget");Be.displayName="HuddlesCursorTarget";const We=t.memo(Be);var Re=e(170852),ve=e(532395);function xe(){return xe=Object.assign||function(Ve){for(var Je=1;Je<arguments.length;Je++){var Ge=arguments[Je];for(var Le in Ge)Object.prototype.hasOwnProperty.call(Ge,Le)&&(Ve[Le]=Ge[Le])}return Ve},xe.apply(this,arguments)}l(xe,"target_extends");let He=l(class extends t.Component{componentDidMount(){this.onResize()}shouldComponentUpdate(Je,Ge){return!(0,s.A)(this.props,Je)||!(0,s.A)(this.state,Ge)}componentDidUpdate(Je){(0,s.A)(Je.targetRect,this.props.targetRect)||this.onResize()}onResize(){var Je;if(!(!((Je=this.props.refToForward)===null||Je===void 0)&&Je.current))return;const Ge=(0,E.n)(this.props.targetRect);this.props.refToForward.current.style.height=Ge.height,this.props.refToForward.current.style.width=Ge.width,this.props.refToForward.current.style.top=Ge.top,this.props.refToForward.current.style.left=Ge.left,this.props.refToForward.current.style.position=Ge.position}getCursorCoordinates(Je){return this.props.useHuddlesDragTarget?[Je.nativeEvent.offsetX,Je.nativeEvent.offsetY]:[Je.pageX,Je.pageY]}onDragStart(Je){this.multilineTransformer=new Ie,this.props.useHuddlesDragTarget?this.multilineTransformer.setTargetRect({top:0,left:0,width:this.props.targetRect.width,height:this.props.targetRect.height}):this.multilineTransformer.setTargetRect(this.props.targetRect),a.A.publish({id:"self",type:c.Sl.ChangeHue,hue:this.props.hue,...this.props.itemId&&{itemId:this.props.itemId}}),a.A.publish({id:"self",...this.multilineTransformer.add(this.getCursorCoordinates(Je)),...this.props.itemId&&{itemId:this.props.itemId}}),this.props.logDrawingAction("Draw start"),this.setState(()=>({showCursor:!1}))}onDragMove(Je){(0,v.Z)(this.multilineTransformer,"Need transformer to draw")&&a.A.publish({id:"self",...this.multilineTransformer.add(this.getCursorCoordinates(Je)),...this.props.itemId&&{itemId:this.props.itemId}})}onDragEnd(Je){a.A.publish({id:"self",type:c.Sl.End,...this.props.itemId&&{itemId:this.props.itemId}}),this.props.logDrawingAction("Draw stop"),this.setState(()=>({showCursor:!0})),this.props.useHuddlesDragTarget&&(0,Re.k)(ve.EventId.HUDDLES_SCREENSHARE_INTERACTION,{contexts:{ui_context:{action:ve.UiAction.CLICK,ui_properties:{element_name:"screenshare_draw"}}}})}onCursorMoveStart(){a.A.publish({id:"self",type:c.Sl.ChangeHue,hue:this.props.hue,...this.props.itemId&&{itemId:this.props.itemId}})}onCursorMove(Je){const Ge=this.getCursorCoordinates(Je),Le=Ge[0]/this.props.targetRect.width,Mt=Ge[1]/this.props.targetRect.height;a.A.publish({id:"self",type:c.Sl.Position,x:Le,y:Mt,...this.props.itemId&&{itemId:this.props.itemId}}),this.setState(()=>({showCursor:!0}))}onCursorMoveEnd(){a.A.publish({id:"self",type:c.Sl.End,...this.props.itemId&&{itemId:this.props.itemId}}),this.setState(()=>({showCursor:!1}))}render(){return this.props.useHuddlesDragTarget?t.createElement(We,{onDragStart:this.onDragStart,onDragMove:this.onDragMove,onDragEnd:this.onDragEnd,onCursorMoveStart:this.onCursorMoveStart,onCursorMove:this.onCursorMove,onCursorMoveEnd:this.onCursorMoveEnd},t.createElement("div",{ref:this.props.refToForward,className:"p-calls_draw__target_none",style:{...(0,E.n)(this.props.targetRect)}})):t.createElement(i,{onDragStart:Je=>this.onDragStart(Je),onDragMove:Je=>this.onDragMove(Je),onDragEnd:Je=>this.onDragEnd(Je)},t.createElement("div",{ref:this.props.refToForward,className:this.state.showCursor?"p-calls_draw__target":"p-calls_draw__target_none",style:{...(0,E.n)(this.props.targetRect)}}))}constructor(Je){super(Je),this.onResize=this.onResize.bind(this),this.onDragStart=this.onDragStart.bind(this),this.onDragMove=this.onDragMove.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onCursorMoveStart=this.onCursorMoveStart.bind(this),this.onCursorMove=this.onCursorMove.bind(this),this.onCursorMoveEnd=this.onCursorMoveEnd.bind(this),this.state={showCursor:!0}}},"BaseDrawTarget");He.displayName="BaseDrawTarget";const je=l((Ve,Je)=>({hue:(0,d.Ng)(Ve).drawHue}),"mapStateToProps"),Ke=l(Ve=>({logDrawingAction:Je=>Ve(A(Je))}),"mapDispatchToProps"),ht=(0,n.N)(je,Ke)(He),dt=t.forwardRef((Ve,Je)=>t.createElement(ht,xe({refToForward:Je},Ve)))},564863:(j,T,e)=>{"use strict";e.d(T,{u:()=>H});var t=e(296540),n=e(46996),s=e(54930),a=e(269592),c=e(474722),r=e(966528),o=e(519543),u=e(110010),m=e(298559),i=e(113574),d=e(177242),_=e(264918),h=e(649098);const p=new h.Ay("calls"),A=l(U=>{let{displayName:N,id:K,userId:W,color:J}=U;return t.createElement("div",{className:"p-huddles_draw__name_tag",style:J?{background:J}:{}},t.createElement(d.Ay,{className:"p-huddles_draw__name_tag_avatar",key:K,size:24,userId:W,isInteractive:!1,tabIndex:-1}),t.createElement("div",{className:"p-huddles_draw__name_tag_text"},N))},"NameTag"),v=l((U,N)=>{let{id:K}=N;return{displayName:K==="self"?p.t("You"):(0,_.iU)(U,K),userId:K==="self"?(0,i.WR)(U):(0,_.C1)(U,K).userId}},"mapStateToProps"),E=(0,m.N)(v)(A),f=-21,g=-15,y=l(U=>{let{peerId:N,width:K,height:W,leftOffset:J,topOffset:q,color:ie,renderNameTag:Te=!0,isWindowDrawMode:Me=!1,xWindowPosition:ke=0,yWindowPosition:Pe=0}=U;const Ie=(0,t.useRef)(null);let X,ne;const fe=J*K,be=q*W;X=Math.round(fe+g),ne=Math.round(be+f),Me&&(X+=ke,ne+=Pe);const Be=(0,t.useMemo)(()=>[X,ne],[X,ne]),We=l(Re=>{const ve=Ie.current;ve&&(ve.style.setProperty("transform",`translate(${Re[0]}px, ${Re[1]}px)`),ve.style.setProperty("visibility","initial"))},"updateCursorPosition");return(0,t.useEffect)(()=>{We(Be)},[Be]),t.createElement("div",{className:"p-huddles_cursor_tracking__cursor_container"},t.createElement("div",{key:`cursor-${N}`,className:"p-huddles_cursor_tracking__cursor",ref:Ie},Te&&t.createElement(E,{key:`name-tag-${N}`,id:N,color:ie})))},"HuddlesCursor");y.displayName="HuddlesCursor";const I=t.memo(y,n.A);var O=e(533456),M=e(394577),C=e(815379);function P(U,N,K,W){return`hsla(${U}, ${N}%, ${K}%, ${W})`}l(P,"makeColorString");const L=l((U,N)=>P(U,100,75,N),"makeBaseColorString"),x=l(U=>P(U,80,50,1),"makeShadowColorString"),F=3;class V{static renderBaseStyle(N){N.lineJoin="round",N.lineCap="round",N.shadowBlur=5}startFade(){this.startedFadingTimestamp=performance.now(),this.observer.requestRenderOnNextFrame()}resetFade(){this.startedFadingTimestamp&&(delete this.startedFadingTimestamp,this.width=V.initialWidth,this.opacity=1,this.color=L(this.hue,this.opacity))}setHue(N){this.hue=N,this.color=L(this.hue,this.opacity),this.shadowColor=x(this.hue),this.observer.requestRenderOnNextFrame()}render(N){this.fade(),N.lineWidth=this.width,N.strokeStyle=this.color,N.shadowColor=this.shadowColor}fade(){if(!this.startedFadingTimestamp)return;const N=Math.min(1,(performance.now()-this.startedFadingTimestamp)/V.fadeDuration);this.width=V.initialWidth-N*F,this.opacity=1-N/1,this.color=L(this.hue,this.opacity),N<1?this.observer.requestRenderOnNextFrame():this.observer.onFadeCompleted()}getColor(){return this.color}constructor(N){this.observer=N,this.width=V.initialWidth,this.opacity=1,this.hue=0,this.color=L(this.hue,this.opacity),this.shadowColor=x(this.hue)}}l(V,"LineStyle"),V.displayName="LineStyle",V.initialWidth=7,V.fadeDuration=3e3;let B=l(class{getSegments(){return this.segments}addNewSegment(N){this.segments.push(N)}editLastSegment(N){this.segments.pop(),this.segments.push(N)}constructor(){this.segments=[]}},"ProgressivePlotter");class D extends null{draw(N){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const J=this.getSegments();N.beginPath();for(let q=0;q<J.length;q++){const ie=J[q];N.moveTo(ie.a[0]*K,ie.a[1]*W),N.lineTo(ie.b[0]*K,ie.b[1]*W)}N.stroke()}}l(D,"ProgressiveLineSegmentPlotter");class S extends B{draw(N){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const J=this.getSegments();N.beginPath();for(let q=0;q<J.length;q++){const ie=J[q];N.moveTo(ie.a[0]*K,ie.a[1]*W),N.bezierCurveTo(ie.b[0]*K,ie.b[1]*W,ie.c[0]*K,ie.c[1]*W,ie.d[0]*K,ie.d[1]*W)}N.stroke()}}l(S,"ProgressiveBezierCurvePlotter");const R=700,w=5e3;class Y{onFadeCompleted(){this.plotter=new S,this.observer.onLineVisibilityChanged(!1),this.setLineVisibility({isFading:!1,isLineVisible:!1}),this.style.resetFade()}resetVestigialLineTimeout(){this.vestigialLineTimeout&&clearTimeout(this.vestigialLineTimeout),this.vestigialLineTimeout=window.setTimeout(this.onInactivity,w)}resetInactivityTimeout(){this.inactivityTimeout&&clearTimeout(this.inactivityTimeout),this.inactivityTimeout=window.setTimeout(this.onInactivity,R)}update(N){if(this.resetVestigialLineTimeout(),N.type===o.Sl.New)this.visibilityState.isLineVisible||this.observer.onLineVisibilityChanged(!0),this.setLineVisibility({isFading:!1,isLineVisible:!0}),this.plotter.addNewSegment(N.segment),this.style.resetFade(),clearTimeout(this.inactivityTimeout);else if(N.type===o.Sl.Edit)this.plotter.editLastSegment(N.segment);else if(N.type===o.Sl.End)this.resetInactivityTimeout();else if(N.type===o.Sl.ChangeHue)this.style.setHue(N.hue);else{if(N.type===o.Sl.Position)return;(0,C.Kh)(N.type)}this.observer.requestRenderOnNextFrame()}render(N,K,W){this.style.render(N),this.plotter.draw(N,K,W)}setLineVisibility(N){Object.assign(this.visibilityState,N)}getColor(){return this.style.getColor()}constructor(N){this.observer=N,this.plotter=new S,this.visibilityState={isLineVisible:!1,isFading:!1},this.onInactivity=()=>{this.inactivityTimeout&&clearTimeout(this.inactivityTimeout),this.vestigialLineTimeout&&clearTimeout(this.vestigialLineTimeout),!(this.visibilityState.isFading||!this.visibilityState.isLineVisible)&&(this.setLineVisibility({isFading:!0}),this.style.startFade())},this.style=new V({onFadeCompleted:()=>this.onFadeCompleted(),requestRenderOnNextFrame:()=>this.observer.requestRenderOnNextFrame()})}}l(Y,"DrawLine"),Y.displayName="DrawLine";const Q=l(U=>{let{refToForward:N,isHidden:K,numVisibleLines:W,top:J,left:q,width:ie,height:Te,doNotApplyTargetRect:Me}=U;if(Me){const Pe={display:K||W===0?"none":"block"};return t.createElement("canvas",{ref:N,style:Pe,"data-qa":"huddles-drawing-canvas"})}const ke={display:K||W===0?"none":"block",...(0,M.n)({left:q,top:J,width:ie,height:Te})};return t.createElement("canvas",{ref:N,style:ke,"data-qa":"huddles-drawing-canvas"})},"Canvas");Q.displayName="Canvas";const Z=t.memo(Q,n.A),ee=new h.Ay("calls"),_e=10,Ee=10,G=l(U=>{let{displayName:N,coord:[K,W]}=U;return t.createElement("div",{className:"p-calls_draw__name_tag",style:{left:`${K+_e}px`,top:`${W+Ee}px`}},N)},"name_tag_NameTag"),Ae=l((U,N)=>{let{id:K}=N;return{displayName:K==="self"?ee.t("You"):(0,_.iU)(U,K)}},"name_tag_mapStateToProps"),ce=(0,m.N)(Ae)(G),de=-33,oe=-9,$=l(U=>{let{top:N,left:K,width:W,height:J,leftOffset:q,topOffset:ie,id:Te}=U;const Me=K+q*W,ke=N+ie*J,Pe={left:`${Me+oe}px`,top:`${ke+de}px`},Ie=(0,t.useMemo)(()=>[Me,ke],[Me,ke]);return t.createElement(t.Fragment,null,Te!=="self"&&t.createElement("div",{key:`cursor-${Te}`,className:"p-calls_draw__pencil_cursor",style:Pe}),t.createElement(ce,{key:`name-tag-${Te}`,id:Te,coord:Ie}))},"Cursor");$.displayName="Cursor";const re=t.memo($,n.A);function ue(){return ue=Object.assign||function(U){for(var N=1;N<arguments.length;N++){var K=arguments[N];for(var W in K)Object.prototype.hasOwnProperty.call(K,W)&&(U[W]=K[W])}return U},ue.apply(this,arguments)}l(ue,"_extends");var te;class ae extends(te=t.Component){shouldComponentUpdate(N,K){return!(0,n.A)(this.props,N)||!(0,n.A)(this.state,K)}getOrCreatePeerLine(N){return this.peerLines[N]=this.peerLines[N]||new Y({requestRenderOnNextFrame:()=>this.requestRenderOnNextFrame(),onLineVisibilityChanged:K=>this.setState(W=>({numVisibleLines:W.numVisibleLines+(K?1:-1)}))}),this.peerLines[N]}onIncomingPeerLine(N){if(this.props.itemId&&N.itemId&&N.itemId!==this.props.itemId)return;const K=this.getOrCreatePeerLine(N.id);switch(K.update(N),N.type){case o.Sl.New:{this.setState(W=>{let{tagCoords:J,userColors:q}=W;return{tagCoords:{...J,[N.id]:N.segment.d},userColors:{...q,[N.id]:K.getColor()}}});break}case o.Sl.Edit:{this.setState(W=>{let{tagCoords:J}=W;return{tagCoords:{...J,[N.id]:N.segment.d}}});break}case o.Sl.ChangeHue:{this.setState(W=>{let{userColors:J}=W;return{userColors:{...J,[N.id]:K.getColor()}}});break}case o.Sl.End:{this.setState(W=>{let{tagCoords:J}=W;return{tagCoords:(0,s.A)(J,N.id)}});break}case o.Sl.Position:{const W=[N.x,N.y];this.setState(J=>{let{tagCoords:q}=J;return{tagCoords:{...q,[N.id]:W}}});break}default:break}}componentDidMount(){r.A.subscribe(this.onIncomingPeerLine),this.ctx=this.props.refToForward.current.getContext("2d"),this.onResize()}componentDidUpdate(N,K){N.targetRect!==this.props.targetRect&&this.onResize(),this.state.numVisibleLines<0&&(0,O.tZ)("DRAW-RENDERER").warn("Should not have a negative number of lines"),this.props.onRendererIsActive&&(this.state.numVisibleLines===0&&K.numVisibleLines>0||this.state.numVisibleLines>0&&K.numVisibleLines===0)&&this.props.onRendererIsActive(this.state.numVisibleLines!==0)}componentWillUnmount(){if(!(0,a.A)(this.rafId)){var N;(N=this.context.windowRef.deref())===null||N===void 0||N.cancelAnimationFrame(this.rafId)}r.A.unsubscribe(this.onIncomingPeerLine)}onResize(){this.ctx&&(this.ctx.canvas.width=this.props.targetRect.width,this.ctx.canvas.height=this.props.targetRect.height,V.renderBaseStyle(this.ctx),this.requestRenderOnNextFrame())}requestRenderOnNextFrame(){this.dirty||(this.dirty=!0,this.rafId=this.context.windowRef.deref().requestAnimationFrame(this.draw))}draw(){if(this.rafId=void 0,!this.ctx)return;const N=this.props.targetRect.width,K=this.props.targetRect.height;this.dirty=!1,this.ctx.clearRect(0,0,N,K);const W=Object.values(this.peerLines);for(let J=0;J<W.length;J++)W[J].render(this.ctx,N,K)}renderCursor(N,K,W){const{targetRect:J,useHuddlesCursor:q,itemId:ie,isHostDrawWindow:Te,isWindowDrawing:Me}=this.props;if(q){const ke=this.state.userColors[N],Pe=ie!=="self",Ie=Te&&Me;return t.createElement(I,{key:N,peerId:N,topOffset:K,leftOffset:W,width:J.width,height:J.height,color:ke,renderNameTag:Pe,isWindowDrawMode:Ie,xWindowPosition:J.left,yWindowPosition:J.top})}return t.createElement(re,ue({key:N,id:N,topOffset:K,leftOffset:W},J))}render(){if(this.props.setPositionToMatchTargetRect){const{targetRect:N}=this.props,K={...(0,M.n)({left:N.left,top:N.top,width:N.width,height:N.height})};return t.createElement("div",{className:"p-calls_draw__renderer",style:K},t.createElement(Z,ue({refToForward:this.props.refToForward,isHidden:this.props.isHidden,numVisibleLines:this.state.numVisibleLines},this.props.targetRect,{doNotApplyTargetRect:!0})),(0,c.A)(this.state.tagCoords,(W,J)=>{let[q,ie]=W;return this.renderCursor(J,ie,q)}))}return t.createElement("div",{className:"p-calls_draw__renderer"},t.createElement(Z,ue({refToForward:this.props.refToForward,isHidden:this.props.isHidden,numVisibleLines:this.state.numVisibleLines},this.props.targetRect)),(0,c.A)(this.state.tagCoords,(N,K)=>{let[W,J]=N;return this.renderCursor(K,J,W)}))}constructor(N){super(N),this.dirty=!1,this.peerLines={},this.onResize=this.onResize.bind(this),this.onIncomingPeerLine=this.onIncomingPeerLine.bind(this),this.draw=this.draw.bind(this),this.renderCursor=this.renderCursor.bind(this),this.state={tagCoords:{},numVisibleLines:0,userColors:{}}}}l(ae,"BaseDrawRenderer"),ae.displayName="BaseDrawRenderer",ae.contextType=u.M;const H=t.forwardRef((U,N)=>t.createElement(ae,ue({refToForward:N},U)))},924927:(j,T,e)=>{"use strict";e.d(T,{A:()=>I});var t=e(296540),n=e(298559),s=e(264918),a=e(528919),c=e(271338),r=e(426170),o=e(449552),u=e(607680),m=e(400497),i=e(52067),d=e(135713);function _(){return _=Object.assign||function(O){for(var M=1;M<arguments.length;M++){var C=arguments[M];for(var P in C)Object.prototype.hasOwnProperty.call(C,P)&&(O[P]=C[P])}return O},_.apply(this,arguments)}l(_,"_extends");let h=l(class extends t.PureComponent{componentDidMount(){this.setUpMedia(),this.updateVideoState(),this.setupInteractionObserver()}componentDidUpdate(){this.setUpMedia(),this.updateVideoState()}componentWillUnmount(){var M;const C=this.videoRef.current,{shouldAttachStream:P,tileId:L,peerId:x}=this.props;!L||!C||(this.props.unbindVideo({tileId:L,videoRef:this.videoRef,shouldDetachStream:!!P,peerId:x}),C.removeEventListener("resize",this.onResize),(M=this.interactionObserver)===null||M===void 0||M.disconnect())}setUpMedia(){const M=this.videoRef.current,{shouldAttachStream:C,tileId:P,peerId:L}=this.props;!P||!M||(this.props.bindVideo({tileId:P,videoRef:this.videoRef,shouldAttachStream:!!C,peerId:L}),M.addEventListener("resize",this.onResize))}setupInteractionObserver(){var M;if(window!=null&&window.IntersectionObserver&&this.props.unbindNonVisibleVideos&&((M=this.interactionObserver)===null||M===void 0||M.disconnect(),this.interactionObserver=new IntersectionObserver(this.interactionObserverCallback,{root:null,threshold:this.intersectionCheckThresholds}),this.videoRef.current)){var C;(C=this.interactionObserver)===null||C===void 0||C.observe(this.videoRef.current)}}interactionObserverCallback(M){const C=M[0];if(!C)return;const P=this.videoRef.current,{shouldAttachStream:L,tileId:x,peerId:F}=this.props;!x||!P||(C.intersectionRatio>this.intersectionVisibleThreshold?this.props.bindVideo({tileId:x,videoRef:this.videoRef,shouldAttachStream:!!L,peerId:F}):this.props.unbindVideo({tileId:x,videoRef:this.videoRef,shouldDetachStream:!!L,peerId:F}))}onResize(){const M=this.videoRef.current;M&&(this.props.isSharingScreen?M.style.objectFit="contain":M.style.objectFit=M.videoWidth>M.videoHeight?"cover":"contain")}updateVideoState(){const{experimentCallsPauseVideoOnScreenshareGroupTreatment:M,peerId:C,tileId:P,isActivePeerSharingScreen:L,isShroudVisible:x}=this.props;!M||!P||(C!=="self"&&L&&!x?this.props.pauseVideo({tileId:P}):this.props.unpauseVideo({tileId:P}))}render(){const{refToForward:M,shouldFlip:C,peerId:P,className:L,width:x,height:F,onLoadedData:V}=this.props;return t.createElement("video",_({className:(0,a.A)("p-calls_video",L,{flipped:C}),ref:(0,r.P)(this.videoRef,M),key:P,"data-qa":"free-willy-video-element",style:{width:x,height:F}},V?{onLoadedData:V}:{}))}constructor(M){super(M),this.videoRef=(0,t.createRef)(),this.intersectionVisibleThreshold=0,this.intersectionCheckThresholds=[0],this.onResize=M.onResize?M.onResize:this.onResize.bind(this),this.interactionObserverCallback=this.interactionObserverCallback.bind(this)}},"VideoElement");h.displayName="VideoElement";const p=l((O,M)=>{var C;const P=(0,d._Z)(O,"calls_pause_video_on_screenshare")==="treatment",L=(0,s.vz)(O),x=M.peer?(0,s.Bf)(M.peer):!1;let F;if(L)F=M.tileId;else{var V,B,D,S,R,w;F=x?(V=M.peer)===null||V===void 0||(B=V.tileIds)===null||B===void 0||(D=B.screenshare)===null||D===void 0?void 0:D.tileId:(S=M.peer)===null||S===void 0||(R=S.tileIds)===null||R===void 0||(w=R.camera)===null||w===void 0?void 0:w.tileId}return{tileId:F,peerId:(C=M.peer)===null||C===void 0?void 0:C.id,isSharingScreen:x,isShroudVisible:P&&(0,i.A)()?(0,m.pI)(O):!1,isActivePeerSharingScreen:(0,s.$Q)(O),experimentCallsPauseVideoOnScreenshareGroupTreatment:P}},"mapStateToProps"),A=l(O=>({bindVideo:M=>(0,c.A)()?(0,o.dispatchForClientStore)((0,u.d2)(M)):O((0,u.d2)(M)),unbindVideo:M=>(0,c.A)()?(0,o.dispatchForClientStore)((0,u.gJ)(M)):O((0,u.gJ)(M)),pauseVideo:M=>(0,c.A)()?(0,o.dispatchForClientStore)((0,u.WY)(M)):O((0,u.WY)(M)),unpauseVideo:M=>(0,c.A)()?(0,o.dispatchForClientStore)((0,u.D8)(M)):O((0,u.D8)(M))}),"mapDispatchToProps"),v=(0,n.N)(p,A)(h),E=t.forwardRef((O,M)=>t.createElement(v,_({refToForward:M},O)));function f(){return f=Object.assign||function(O){for(var M=1;M<arguments.length;M++){var C=arguments[M];for(var P in C)Object.prototype.hasOwnProperty.call(C,P)&&(O[P]=C[P])}return O},f.apply(this,arguments)}l(f,"peer_video_element_extends");const g=l((O,M)=>{const C=(0,s.vz)(O),P=(0,s.JZ)(O,M.id);let L;const x=M.tileId;if(!C)L=(0,s.fy)(P)&&!P.isScreenshareEnabled;else{var F,V;const B=((F=P.tileIds)===null||F===void 0||(V=F.screenshare)===null||V===void 0?void 0:V.tileId)===x;L=(0,s.fy)(P)&&!B}return{peer:P,tileId:x,shouldFlip:L}},"peer_video_element_mapStateToProps"),y=(0,n.N)(g)(E),I=t.forwardRef((O,M)=>t.createElement(y,f({},O,{refToForward:M})))},8916:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>d,Ft:()=>u});var t=e(296540),n=e(528919),s=e(298559),a=e(658336),c=e(240449),r=e(179768);const o=15;function u(_){return Math.min(1,Math.max(0,r.Ep*_))}l(u,"getClampedAudioLevel");let m=l(class extends t.PureComponent{componentDidMount(){c.A.subscribe(this.onLevelUpdated)}componentWillUnmount(){c.A.unsubscribe(this.onLevelUpdated)}onLevelUpdated(h){const p=Math.floor(this.numBubbles*u(h));this.setState(()=>({numActiveBubbles:p,numInactiveBubbles:this.numBubbles-p}))}renderBubbles(){const{numActiveBubbles:h,numInactiveBubbles:p}=this.state,{bubbleClassname:A}=this.props,v=(0,n.A)("p-audio_levels__bubble","p-audio_levels__bubble--active",A,{"p-audio_levels__bubble--dark":this.props.clientTheme==="dark"}),E=(0,n.A)("p-audio_levels__bubble","p-audio_levels__bubble--inactive",A,{"p-audio_levels__bubble--dark":this.props.clientTheme==="dark"}),f=Array.from({length:h},(y,I)=>t.createElement("span",{key:`active${I}`,className:v})),g=Array.from({length:p},(y,I)=>t.createElement("span",{key:I,className:E}));return f.concat(g)}render(){return t.createElement("div",{className:(0,n.A)("p-audio_levels",this.props.containerClassName),"data-qa":"audio-levels-bubbles"},this.renderBubbles())}constructor(h){super(h);var p;this.numBubbles=(p=this.props.initNumBubbles)!==null&&p!==void 0?p:o;var A;this.state={numInactiveBubbles:(A=h.initNumBubbles)!==null&&A!==void 0?A:o,numActiveBubbles:0},this.onLevelUpdated=this.onLevelUpdated.bind(this)}},"AudioMeter");m.displayName="AudioMeter";const i=l(_=>({clientTheme:(0,a.to)(_)}),"mapStateToProps"),d=(0,s.N)(i)(m)},80596:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>u});var t=e(612104),n=e.n(t),s=e(21879),a=e(446632);class c{constructor(){this.isInitialized=!1,this.isUsingBattery=null,this.batteryLevel=null,this.isSupported=!1,this.registerListeners=()=>{var _,h;(_=this.battery)===null||_===void 0||_.addEventListener("chargingchange",this.handleBatteryUpdate),(h=this.battery)===null||h===void 0||h.addEventListener("levelchange",this.handleBatteryUpdate)},this.removeEventListeners=()=>{var _,h;(_=this.battery)===null||_===void 0||_.removeEventListener("chargingchange",this.handleBatteryUpdate),(h=this.battery)===null||h===void 0||h.removeEventListener("levelchange",this.handleBatteryUpdate)},this.handleBatteryUpdate=()=>{this.isSupported&&this.updateBatteryState()},this.updateBatteryState=()=>{this.battery&&(this.isUsingBattery=!this.battery.charging,this.batteryLevel=this.battery.level)};var i=this;this.initialize=(0,t.coroutine)(function*(){yield i.setUp(),i.updateBatteryState()});var d=this;this.setUp=(0,t.coroutine)(function*(){if(!d.isInitialized)try{if(navigator.getBattery){const _=yield navigator.getBattery();d.battery=_,d.battery&&(d.isSupported=!0,d.updateBatteryState(),d.registerListeners())}else d.isSupported=!1}catch{d.isSupported=!1}finally{d.isInitialized=!0}}),this.cleanup=()=>{this.isSupported&&this.removeEventListeners()},this.isUsingBatteryPower=()=>{if(this.isSupported)return!!this.isUsingBattery},this.getLevel=()=>{if(!(!this.isSupported||!(0,s.A)(this.batteryLevel)))return this.batteryLevel*100},this.setUp()}}l(c,"HuddleBatteryManager");const r=(0,a.A)(()=>new c),o={getHuddleBatteryManager:r,HuddleBatteryManager:c},u=r},388077:(j,T,e)=>{"use strict";e.d(T,{$H:()=>ne,$b:()=>v,$s:()=>X,E9:()=>f,Es:()=>u,I8:()=>h,KK:()=>K,Ll:()=>ee,Ls:()=>je,QJ:()=>w,Q_:()=>Be,RM:()=>Pe,VW:()=>Ke,XL:()=>A,Xw:()=>o,ZT:()=>q,_R:()=>Me,b9:()=>E,dQ:()=>m,gi:()=>O,i3:()=>N,j3:()=>He,jp:()=>S,jq:()=>Re,kM:()=>ve,mn:()=>p,of:()=>be,px:()=>xe,uL:()=>_,vB:()=>H,w2:()=>We,wV:()=>$,xY:()=>i,xc:()=>R,z2:()=>d,zF:()=>Ee,zg:()=>ke});var t=e(612104),n=e.n(t),s=e(126325),a=e.n(s),c=e(719007),r=e.n(c);let o=s.CheckAudioConnectivityFeedback,u=s.CheckAudioInputFeedback,m=s.CheckAudioOutputFeedback,i=s.CheckCameraResolutionFeedback,d=s.CheckContentShareConnectivityFeedback,_=s.CheckNetworkTCPConnectivityFeedback,h=s.CheckNetworkUDPConnectivityFeedback,p=s.CheckVideoConnectivityFeedback,A=s.CheckVideoInputFeedback,v=s.LogLevel,E=s.MeetingSessionStatusCode,f=s.TranscriptItemType,g=null;const y=null;let I=null;const O=s.AllHighestVideoBandwidthPolicy;let M,C=null,P=null;const L=s.DefaultDeviceController;let x;const F=s.DefaultMeetingReadinessChecker;let V;const B=s.DefaultMeetingSession;let D,S=s.DefaultModality,R=s.DefaultVideoTile,w=s.MeetingSessionConfiguration,Y=null,Q=null,Z=null,ee=s.PermissionDeniedError,_e=null,Ee=s.Versioning,G=null,Ae=null,ce=null,de=null,oe=null,$=s.VoiceFocusDeviceTransformer,re=null,ue=s.DefaultVideoTransformDevice,te=s.BackgroundBlurVideoFrameProcessor,ae=null,H=s.CSPMonitor;const U=null;let N=s.VideoFxProcessor,K=s.VideoCodecCapability,W=!1,J=!1;function q(ht){return ie.apply(this,arguments)}l(q,"setUseExpSDK");function ie(){return ie=(0,t.coroutine)(function*(ht){if(W=ht,!W||J)return;const dt=yield Promise.resolve().then(e.t.bind(e,719007,23));o=dt.CheckAudioConnectivityFeedback,u=dt.CheckAudioInputFeedback,m=dt.CheckAudioOutputFeedback,i=dt.CheckCameraResolutionFeedback,d=dt.CheckContentShareConnectivityFeedback,_=dt.CheckNetworkTCPConnectivityFeedback,h=dt.CheckNetworkUDPConnectivityFeedback,p=dt.CheckVideoConnectivityFeedback,A=dt.CheckVideoInputFeedback,I=dt.ClientVideoStreamReceivingReport,C=dt.ConnectionHealthData,P=dt.DataMessage,x=dt.DefaultDeviceController,V=dt.DefaultMeetingReadinessChecker,D=dt.DefaultMeetingSession,S=dt.DefaultModality,R=dt.DefaultVideoTile,v=dt.LogLevel,w=dt.MeetingSessionConfiguration,Y=dt.MeetingSessionStatus,E=dt.MeetingSessionStatusCode,Q=dt.MeetingSessionVideoAvailability,Z=dt.MutableVideoPreferences,ee=dt.PermissionDeniedError,_e=dt.TargetDisplaySize,f=dt.TranscriptItemType,g=dt.TranscriptionStatusType,Ee=dt.Versioning,G=dt.VideoPreference,Ae=dt.VideoPreferences,ce=dt.VideoPriorityBasedPolicy,de=dt.VideoPriorityBasedPolicyConfig,oe=dt.VideoTileState,M=dt.AudioProfile,$=dt.VoiceFocusDeviceTransformer,re=dt.DefaultBrowserBehavior,ue=dt.DefaultVideoTransformDevice,te=dt.BackgroundBlurVideoFrameProcessor,ae=dt.BackgroundReplacementVideoFrameProcessor,H=dt.CSPMonitor,N=dt.VideoFxProcessor,K=dt.VideoCodecCapability,J=!0}),ie.apply(this,arguments)}l(ie,"_setUseExpSDK");function Te(){return W}l(Te,"isUsingExpSDK");function Me(){return x||L}l(Me,"getDefaultDeviceController");function ke(){return L}l(ke,"getDefaultDeviceControllerDefault");function Pe(){return x}l(Pe,"getDefaultDeviceControllerExp");function Ie(){return V||F}l(Ie,"getDefaultMeetingReadinessChecker");function X(){return F}l(X,"getDefaultMeetingReadinessCheckerDefault");function ne(){return V}l(ne,"getDefaultMeetingReadinessCheckerExp");function fe(){return D||B}l(fe,"getDefaultMeetingSession");function be(){return B}l(be,"getDefaultMeetingSessionDefault");function Be(){return D}l(Be,"getDefaultMeetingSessionExp");function We(){return $}l(We,"getVoiceFocusDeviceTransformer");function Re(){return ue}l(Re,"getDefaultVideoTransformDevice");function ve(){return te}l(ve,"getBackgroundBlurVideoFrameProcessor");function xe(){return c.BackgroundReplacementVideoFrameProcessor}l(xe,"getBackgroundReplacementVideoFrameProcessor");function He(){return s.AudioProfile}l(He,"getAudioProfileDefault");function je(){return M}l(je,"getAudioProfileExp");function Ke(ht){return!!ht.type}l(Ke,"isTranscriptEventTranscriptionStatus")},124748:(j,T,e)=>{"use strict";e.d(T,{LD:()=>r,MS:()=>o,Vd:()=>m,k0:()=>u});var t=e(269592),n=e(119110),s=e(748022);const a="4.30.79",c=[s.R.DesktopScreen,s.R.DesktopWindow];function r(){return!!(0,n.dY)(a)}l(r,"isWindowDrawingSupported");function o(i){return(0,t.A)(i)?s.f.None:i.startsWith("screen:")?s.f.Screen:i.startsWith("window:")?s.f.Window:s.f.Other}l(o,"determineContentShareTypeFromSourceId");function u(i){if(!(0,n.y3)())return s.R.BrowserContent;const d=o(i);if((0,n.y3)())switch(d){case s.f.Screen:return s.R.DesktopScreen;case s.f.Window:return s.R.DesktopWindow;default:return s.R.DesktopUnknown}return s.R.Unknown}l(u,"determineFullContentShareSourceType");function m(i){return c.includes(i)}l(m,"doesContentShareTypeSupportDrawing")},748022:(j,T,e)=>{"use strict";e.d(T,{R:()=>n,f:()=>t});var t;(function(s){s.Screen="screen",s.Window="window",s.Other="other",s.None="none"})(t||(t={}));var n;(function(s){s.DesktopScreen="desktop:screen",s.DesktopWindow="desktop:window",s.DesktopUnknown="desktop:unknown",s.BrowserContent="browser:content",s.MobileScreen="mobile:screen",s.Unknown="unknown"})(n||(n={}))},906332:(j,T,e)=>{"use strict";e.d(T,{Bm:()=>m,LL:()=>o,On:()=>p,Zy:()=>r,dx:()=>c,my:()=>u,tk:()=>d});var t=e(808058),n=e(742531),s=e(475711),a=e(319719);const c="default",r="communications",o=[s.lW.Microphone,s.lW.Camera,s.Q4];function u(A,v){let E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o;(0,t.A)(v,(f,g)=>{if(!(0,n.A)(E,g))return;if(!f.length){A.warn(`No ${g} devices available`);return}const y=new a.M(["id","label"]);f.forEach(I=>{y.add([I.id,I.label].map(String))}),A.info(`${g} devices:
${y.report()}`)})}l(u,"logDevices");function m(){return{camera:[],microphone:[],output:[]}}l(m,"createEmptyDevices");const i={audioinput:s.lW.Microphone,videoinput:s.lW.Camera,audiooutput:s.Q4};function d(A){const v=i[A.kind],E={id:A.deviceId,label:A.label||void 0,groupId:A.groupId||void 0};return _(v)?{...E,type:v}:{...E,type:v}}l(d,"makeDevice");function _(A){return A!==s.Q4}l(_,"isInputDeviceType");function h(A){return _(A.type)}l(h,"isInputDevice");function p(A){return A.replace(/ *?\([^)]*?\) *?/g,"")}l(p,"removeDeviceIdFromDeviceLabel")},839693:(j,T,e)=>{"use strict";e.d(T,{t3:()=>d,Bh:()=>v,$y:()=>I,i4:()=>g});var t=e(612104),n=e(59116),s=e(184220),a=e(621690),c=e(930679),r=e(269592);function o(){return"0.1"}l(o,"getDevicePrefsVersion");var u=e(906332),m=e(533456);const i="devicePrefs";function d(O){return(0,n.A)(O,M=>M[0])}l(d,"getPreferredDevices");function _(){return{camera:[],microphone:[u.dx,u.Zy],output:[u.dx,u.Zy]}}l(_,"createDefaultDevicePriority");function h(){return{camera:[],microphone:[],output:[]}}l(h,"createDefaultDeviceExtendedPriority");function p(){return{enableAGC:!0,enableNoiseSuppression:!0}}l(p,"createDefaultAudioPrefs");function A(){return{enableHD:!1,mirrorVideo:!1,effect:void 0}}l(A,"createDefaultVideoPrefs");function v(){const O=localStorage.getItem(i),M={version:o(),deviceIdPriorities:_(),deviceIdPrioritiesExtended:h(),video:A(),audio:p()};if(!O)return M;try{const C=JSON.parse(O);return C.version!==o()?M:{...M,...C}}catch(C){return(0,m.tZ)("DEVICES").error("Could not read device preferences from localStorage: ",C.message),M}}l(v,"readDevicePrefs");function E(O){return f.apply(this,arguments)}l(E,"updateDeviceIdPrioritiesExtended");function f(){return f=(0,t.coroutine)(function*(O){const M={},C=yield navigator.mediaDevices.enumerateDevices();for(const P of Object.keys(O)){const L=[],x=P;for(let F=0;F<O[x].length;F++){const V=O[x][F],B=C.find(D=>D.deviceId===V);B&&L.push({id:B.deviceId,groupId:B.groupId,label:B.label,labelWithoutId:(0,u.On)(B.label)})}M[P]=L}return M}),f.apply(this,arguments)}l(f,"_updateDeviceIdPrioritiesExtended");function g(O){return y.apply(this,arguments)}l(g,"writeDevicePrefs");function y(){return y=(0,t.coroutine)(function*(O){try{const M=yield E(O.deviceIdPriorities),C={...O,deviceIdPrioritiesExtended:M};localStorage.setItem(i,JSON.stringify(C))}catch(M){(0,m.tZ)("DEVICES").error("Could not write device preferences to localStorage: ",M.message)}}),y.apply(this,arguments)}l(y,"_writeDevicePrefs");function I(O,M){let C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const P=(0,s.A)(M,(0,a.A)(M.length)),L=(0,s.A)(C.map(x=>x.labelWithoutId),(0,a.A)(C.length));return(0,c.A)(O,x=>{const F=(0,u.On)(x.label);return(0,r.A)(P[x.deviceId])?(0,r.A)(L[F])?1/0:L[F]:P[x.deviceId]})}l(I,"sortDevicesByPriorityWithFallback")},475711:(j,T,e)=>{"use strict";e.d(T,{Q4:()=>t,eJ:()=>n,lW:()=>a,uT:()=>s});const t="output";var n;(function(c){c.Denied="denied",c.Granted="granted",c.NotDetermined="not-determined",c.Prompt="prompt",c.Unknown="unknown"})(n||(n={}));var s;(function(c){c.NONE="none",c.Blur="blur",c.Both="both"})(s||(s={}));var a;(function(c){c.Camera="camera",c.Microphone="microphone"})(a||(a={}))},118118:(j,T,e)=>{"use strict";e.d(T,{t:()=>t});var t;(function(n){n.Blur="blur",n.Background="bg"})(t||(t={}))},833527:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>P});var t=e(612104),n=e(475711),s=e(307520),a=e(540291),c=e(519543),r=e(119110),o=e(682520),u;(function(L){L.Granted="granted",L.Denied="denied",L.Prompt="prompt",L.NotDetermined="not-determined",L.Restricted="restricted",L.Unknown="unknown"})(u||(u={}));var m;(function(L){L.CAMERA="camera",L.MICROPHONE="microphone",L.SCREEN="display-capture"})(m||(m={}));const i={[c.mT.MICROPHONE]:m.MICROPHONE,[c.mT.CAMERA]:m.CAMERA,[c.mT.SCREEN]:m.SCREEN},d={[c.mT.MICROPHONE]:null,[c.mT.CAMERA]:null,[c.mT.SCREEN]:null},_=l(()=>({...d}),"getInitialPermissionsState");var h=e(247344),p=e(180491);let A=l(class{constructor(x){this.config=x,this.canAccessMediaResource=D=>{const S=this.wasPermissionGranted(D);return this.logger.info(`${D} permissions granted: ${S}`),{isAvailable:this.config.isElectronApiAvailable,status:this.permissions[D]}};var F=this;this.requestMediaAccess=function(){var D=(0,t.coroutine)(function*(S){return F.updatePermissionsState(S,F.getDefaultAccessResult().status),F.logger.error("Requesting media access is not implemented for this device, but it is being called. This is likely a bug."),p.S.resolve({isAvailable:F.config.isElectronApiAvailable,isGranted:!0})});return function(S){return D.apply(this,arguments)}}();var V=this;this.refreshAllPermissions=(0,t.coroutine)(function*(){try{yield V.refreshDevicePermissionStatus(c.mT.MICROPHONE),yield V.refreshDevicePermissionStatus(c.mT.CAMERA),yield V.refreshDevicePermissionStatus(c.mT.SCREEN)}catch(D){V.logger.warn("An error occurred while refreshing device permissions",D)}});var B=this;this.refreshDevicePermissionStatus=function(){var D=(0,t.coroutine)(function*(S){B.updatePermissionsState(S,B.getDefaultAccessResult().status)});return function(S){return D.apply(this,arguments)}}(),this.getDefaultAccessResult=()=>({isAvailable:this.config.isElectronApiAvailable,status:n.eJ.Granted}),this.updatePermissionsState=(D,S)=>{this.permissions[D]!==S&&(this.logger.info(`permission state for ${D} changed to ${S}`),this.permissions[D]=S,this.config.onPermissionsChange(this.permissions))},this.wasPermissionGranted=D=>{let S=!1;return this.permissions[D]&&(S=this.permissions[D]===n.eJ.Granted),S},this.hasNoKnownPermissions=D=>this.permissions[D]===null,this.logger=this.config.logger,this.permissions=this.config.initialState}},"DefaultDevicePermissions");var v=e(919758);let E=l(class extends A{constructor(x){super(x);var F=this;this.refreshDevicePermissionStatus=function(){var B=(0,t.coroutine)(function*(D){const{status:S}=yield(0,v.XBC)(D);F.logger.info(`Received ${D} access status for desktop app: ${S}`),F.updatePermissionsState(D,S)});return function(D){return B.apply(this,arguments)}}();var V=this;this.requestMediaAccess=function(){var B=(0,t.coroutine)(function*(D){const{isAvailable:S,isGranted:R}=yield(0,v.Nin)(D);return V.updatePermissionsState(D,R?n.eJ.Granted:n.eJ.Denied),{isAvailable:S,isGranted:!!R}});return function(D){return B.apply(this,arguments)}}()}},"DesktopDevicePermissions"),f=l(class extends A{constructor(x){super(x);var F=this;this.refreshDevicePermissionStatus=function(){var V=(0,t.coroutine)(function*(B){if(B===c.mT.SCREEN)return;const D=B===c.mT.MICROPHONE?"audioinput":"videoinput";try{const R=(yield navigator.mediaDevices.enumerateDevices()).filter(Y=>Y.kind===D),w=R.length>0&&R.some(Y=>Y.label.trim()!=="");F.updatePermissionsState(B,w?n.eJ.Granted:n.eJ.NotDetermined)}catch{F.logger.error('An error occurred enumerating devices. Setting access status to "granted"'),F.updatePermissionsState(B,n.eJ.NotDetermined)}});return function(B){return V.apply(this,arguments)}}()}},"FirefoxDevicePermissions"),g=l(class extends A{constructor(...x){super(...x),this.changeHandlers=_();var F=this;this.refreshDevicePermissionStatus=function(){var V=(0,t.coroutine)(function*(B){const D=yield navigator.permissions.query({name:i[B]});F.updatePermissionsState(B,D.state),F.logger.info(`Received ${B} access status for browser: ${F.permissions[B]}`),F.maybeRegisterPermissionChangeListener(B,D)});return function(B){return V.apply(this,arguments)}}(),this.maybeRegisterPermissionChangeListener=(V,B)=>{if(!this.changeHandlers[V]){const D=l(()=>this.onPermissionChangeEvent(V,B==null?void 0:B.state),"handler");B.addEventListener("change",D),this.changeHandlers[V]=D}},this.onPermissionChangeEvent=(V,B)=>{this.updatePermissionsState(V,B)}}},"BrowserDevicePermissions");var y=e(313344);const I="device-permissions-state",O=7*24*60*60*1e3,M=5*1e3;class C{isPersistedStateTrustworthy(x){return!(!x||Date.now()-x>O)}savePermissionsToLocalStorage(x){try{const F={permissions:x,timestamp:Date.now()},V=JSON.stringify(F);localStorage.setItem(I,V),this.logger.info(`Permissions saved to local storage: ${V}`)}catch(F){this.logger.error("Error saving permissions to local storage",F)}}readPermissionsFromLocalStorage(){try{const x=localStorage.getItem(I);if(x){this.logger.info(`Permissions loaded from local storage ${x}`);const F=JSON.parse(x);return this.isPersistedStateTrustworthy(F==null?void 0:F.timestamp)?F.permissions:(this.logger.warn("Permissions not considered trustworthy. Requiring refresh"),null)}}catch(x){this.logger.error("Error reading permissions from local storage",x)}return null}constructor(){this.isSSB=(0,r.y3)(),this.logger=(0,o.Wo)({label:"DEVICE-PERMISSIONS-MANAGER"}),this.initialized=!1;var x=this;this.init=(0,h.A)((0,t.coroutine)(function*(){x.logger.info("Initializing media device permissions manager"),x.initialized=!0,x.permissionsStrategy=x.getStrategy(),setTimeout(x.refreshAllPermissions,M),x.logger.info("Scheduled permissions refresh")})),this.canAccessMediaResource=D=>{var S,R;return!((S=this.permissionsStrategy)===null||S===void 0)&&S.canAccessMediaResource?this.permissionsStrategy.canAccessMediaResource(D):{isAvailable:!!(!((R=this.config)===null||R===void 0)&&R.isElectronApiAvailable),status:n.eJ.Granted}};var F=this;this.requestMediaAccess=function(){var D=(0,t.coroutine)(function*(S){var R;return!((R=F.config)===null||R===void 0)&&R.isElectronApiAvailable?F.permissionsStrategy.requestMediaAccess(S):(F.logger.warn("Permissions strategy not available"),{isAvailable:!1,isGranted:!0})});return function(S){return D.apply(this,arguments)}}(),this.getStrategy=()=>{const D={initialState:this.readPermissionsFromLocalStorage()||_(),isElectronApiAvailable:this.isSSB,onPermissionsChange:this.onPermissionsChange,logger:this.logger};return this.config=D,(0,r.y3)()?(this.logger.info("Using desktop device permissions strategy"),new E(D)):(0,r.gm)()?(this.logger.info("Using Firefox device permissions strategy"),new f(D)):this.shouldUsePermissionsApi()?(this.logger.info("Using browser device permissions strategy"),new g(D)):(this.logger.info("Using default device permissions strategy"),new A(D))},this.onPermissionsChange=D=>{this.logger.info("Permissions changed",D),(0,y.pq)(),this.savePermissionsToLocalStorage(D)};var V=this;this.refreshAllPermissions=(0,t.coroutine)(function*(){V.logger.info("Refreshing all permissions");try{yield navigator.mediaDevices.enumerateDevices(),yield V.refreshPermissions(c.mT.MICROPHONE),yield V.refreshPermissions(c.mT.CAMERA),yield V.refreshPermissions(c.mT.SCREEN)}catch(D){V.logger.warn("An error occurred while refreshing device permissions",D)}});var B=this;this.refreshPermissions=function(){var D=(0,t.coroutine)(function*(S){return B.logger.debug(`Refreshing ${S} permissions`),(0,a.IE)("media-access-update",(0,t.coroutine)(function*(){return B.permissionsStrategy.refreshDevicePermissionStatus(S)})).catch(R=>{B.logger.warn(`An error occurred while trying to check ${S} permissions`,R)})});return function(S){return D.apply(this,arguments)}}(),this.shouldUsePermissionsApi=()=>!this.isSSB&&!(0,r.gm)()&&"permissions"in s.J.navigator,this.clearAllPermissions=()=>{this.initialized&&this.savePermissionsToLocalStorage(_())}}}l(C,"DevicePermissionsManager");const P=new C},313344:(j,T,e)=>{"use strict";e.d(T,{Nj:()=>Pe,T5:()=>Te,Zy:()=>J,G0:()=>Ie,pq:()=>Me,cT:()=>ie,i_:()=>q});var t=e(612104),n=e(475711),s;(function(X){X.Microphone="audioinput",X.Camera="videoinput",X.Speakers="audiooutput"})(s||(s={}));const a=l(X=>({[n.lW.Microphone]:s.Microphone,[n.lW.Camera]:s.Camera,[n.Q4]:s.Speakers})[X],"adapter_mapDeviceTypeToDeviceKind"),c=l(X=>({[s.Microphone]:n.lW.Microphone,[s.Camera]:n.lW.Camera,[s.Speakers]:n.Q4})[X],"mapDeviceKindToDeviceType"),r=l(X=>{const ne=c(X.kind);return ne===n.Q4?{id:X.deviceId,label:X.label,groupId:X.groupId,type:n.Q4}:{id:X.deviceId,label:X.label,groupId:X.groupId,type:ne,track:void 0}},"adapter_mapMediaDeviceInfoToDevice");var o=e(211700),u=e(307520),m=e(566401),i=e(64741),d=e(808058),_=e(41343),h=e(46996),p=e(59116),A=e(682520);const E=(0,A.Wo)({label:"DEVICE-PREFS"});var f=e(119110),g=e(709703),y=e(784045),I=e(930679);const O=["ZoomAudioDevice (Virtual)"],P=["default","communications"],L=l(X=>P.includes(X),"isOSDefaultDeviceId"),x=l((X,ne)=>{if(L(X.deviceId))return!1;const fe=ne.find(be=>L(be.deviceId)&&be.kind===X.kind);return(fe==null?void 0:fe.groupId)===X.groupId&&(fe==null?void 0:fe.label.includes(X.label))},"isOSDefaultDeviceForType"),F=l(X=>{const ne=/iphone/,fe=X.label;if(!(0,g.A)(fe))return!1;const be=(0,f.cX)()&&fe&&ne.test(fe.toLowerCase()),Be=(fe==null?void 0:fe.toLowerCase().includes("display audio"))||fe.toLowerCase().includes("displayport");return be||Be},"shouldDeprioritizeDevice"),V=l(X=>!X.label||O.includes(X.label),"shouldRemoveDevice"),B=l(X=>X&&X.replace(/\([a-zA-Z0-9]{4}:[a-zA-Z0-9]{4}\)|\([^)]{20,}\)/g,"").trim(),"removeDeviceFingerprintFromLabel"),D=l(X=>X.filter(ne=>ne.label).map(ne=>({deviceId:ne.deviceId,kind:ne.kind,label:B(ne.label)||"",groupId:ne.groupId})),"scrubAvailableDevices"),S=l((X,ne)=>(0,y.A)(X,fe=>{var be;return(be=ne[fe.deviceId])===null||be===void 0?void 0:be.selected},"desc"),"sortDevicesByLastSelection"),R=l((X,ne)=>(0,y.A)(X,fe=>{var be;return(be=ne[fe.deviceId])===null||be===void 0?void 0:be.used},"desc"),"sortDevicesByLastUsed"),w=l(X=>(0,I.A)(X,ne=>ne.label),"sortDevicesByLabel");var Y=e(21879),Q=e(707980),Z=e(790973);const ee="version",_e=3,Ee={1:X=>X,2:X=>(0,p.A)(X,ne=>{if((0,Y.A)(ne))return ne;const fe={...ne},be=B(ne.deviceLabel);return be&&be!==ne.deviceLabel&&(fe.deviceLabel=be),fe}),3:X=>(0,Q.A)(X,(ne,fe,be)=>{if(!L(be)&&be!==ee){const Be=(0,Z.A)(X,(We,Re)=>L(Re)&&We.deviceInfo.kind===fe.deviceInfo.kind&&We.deviceInfo.groupId===fe.deviceInfo.groupId&&We.deviceInfo.label.includes(fe.deviceInfo.label));Be&&((!fe.used&&Be.used||fe.used&&Be.used&&fe.used<Be.used)&&(fe.used=Be.used),(!fe.selected&&Be.selected||fe.selected&&Be.selected&&fe.selected<Be.selected)&&(fe.selected=Be.selected)),ne[be]=fe}return ne},{})},G=l(X=>X[ee]!==_e,"isMigrationNeeded"),Ae=l(X=>{if(!Ee[_e])throw new Error(`No migration found for version ${_e}`);const ne=X[ee]||0;if(ne===_e)return X;let fe={...X};for(let be=ne;be<_e;be++){const Be=be+1,We=Ee[Be];fe=We(fe),fe[ee]=Be}return fe},"maybeMigrateDeviceHistory");var ce=e(54930);const de="device-selection-records",oe=E,$=l(()=>{let X;try{const ne=localStorage.getItem(de);ne?(X=JSON.parse(ne),G(X)?(oe.debug(`Migration needed for device selection history from ${X[ee]} to ${_e}`),X=Ae(X)):oe.debug("No migration needed for device selection history")):X=void 0}catch(ne){oe.error("Failed to read device selection history from local storage",ne),X=void 0}return oe.debug("Reading device selection history from local storage",X),X?(0,ce.A)(X,ee):void 0},"readSelectionHistoryFromLocalStorage"),re=l(X=>{if(X){oe.debug("Writing device selection history to local storage",X);try{const ne={...X,[ee]:_e};localStorage.setItem(de,JSON.stringify(ne))}catch(ne){oe.error("Failed to write device selection history to local storage",ne)}}},"saveDeviceSelectionRecordsToLocalStorage");var ue=e(839716),te=e(449552),ae=e(839693);class H{constructor(){var ne=this;this.logger=E,this.availableDevices=[],this.deviceSelectionRecords={},this.currentTeamId=null,this.updateTeamStoreForId=null,this.isFirstRun=!1,this.osDefaultDevices={[s.Microphone]:null,[s.Camera]:null,[s.Speakers]:null},this.prioritizedDeviceLists={[s.Microphone]:[],[s.Camera]:[],[s.Speakers]:[]};var fe=this;this.init=function(){var Re=(0,t.coroutine)(function*(ve){let{teamId:xe}=ve;if(xe!==fe.currentTeamId){fe.currentTeamId=xe,fe.dispatch=(0,te.getStoreInstanceByTeamId)(xe).dispatch;try{fe.deviceSelectionRecords=$()||{},fe.isFirstRun=(0,m.A)(fe.deviceSelectionRecords),fe.logger.info("Initializing device preferences manager from local storage",fe.deviceSelectionRecords),yield fe.updateAvailableDevices(),fe.maybeApplyLegacyDevicePrefs(),navigator.mediaDevices.addEventListener("devicechange",fe.handleDeviceListChange)}catch(He){fe.logger.error("Error initializing device preferences manager",He)}}});return function(ve){return Re.apply(this,arguments)}}();var be=this;this.refreshAvailableDevices=(0,t.coroutine)(function*(){yield be.updateAvailableDevices()}),this.getPreferredDeviceOfType=Re=>this.getPrioritizedDeviceListOfType(Re)[0],this.getPrioritizedDeviceListOfType=Re=>this.prioritizedDeviceLists[Re],this.recordDeviceSelected=(Re,ve)=>{try{const{deviceId:xe,deviceLabel:He}=this.lookupDeviceDetailsById(Re,ve);if(!xe){this.logger.warn("Device record not found for selected device id",Re);return}if(!this.deviceSelectionRecords[xe]){this.logger.warn("No device selection record found for device id",xe);return}this.logger.info("Reporting device selected",He,xe),this.deviceSelectionRecords[xe].selected=Date.now();const Ke=!0;this.maybePropagateUpdate(Ke)}catch(xe){this.logger.error("Error reporting device selected",xe)}},this.recordDeviceUsed=(Re,ve)=>{try{const{deviceId:xe,deviceLabel:He}=this.lookupDeviceDetailsById(Re,ve);if(!xe){this.logger.warn("Device record not found for used device id",Re);return}this.logger.info("Reporting device used",He,xe),this.deviceSelectionRecords[xe].used=Date.now();const je=!0;this.maybePropagateUpdate(je)}catch(xe){this.logger.error("Error reporting device used",xe)}},this.getOSDefaults=()=>this.osDefaultDevices,this.getDeviceSelectionRecords=()=>this.deviceSelectionRecords,this.clearDeviceSelectionRecords=()=>{re({})},this.lookupDeviceDetailsById=(Re,ve)=>{var xe;(0,m.A)(this.prioritizedDeviceLists[ve])&&this.updateAvailableDevices();const He={deviceId:null,deviceLabel:null},je=L(Re)?this.osDefaultDevices[ve]:Re;if(je&&L(je)&&this.logger.warn(`OS default device id (${Re}) used for details. This should not happen`),!je)return this.logger.warn("Device record not found for device id",je),He;He.deviceId=je;const Ke=(xe=this.deviceSelectionRecords[je])===null||xe===void 0?void 0:xe.deviceLabel,ht=B(Ke);return ht?(He.deviceLabel=ht,He):(this.logger.warn("Device record not found for device id",je),He)},this.createEmptyDeviceSelectionRecord=Re=>({deviceInfo:Re,deviceLabel:Re.label,selected:null,used:null});var Be=this;this.updateAvailableDevices=(0,t.coroutine)(function*(){const Re=yield u.J.navigator.mediaDevices.enumerateDevices();Be.logger.debug("Available devices",Re),Be.availableDevices=D(Re),Be.updateDeviceRecords(Be.availableDevices),Be.logger.debug("Available devices",Be.availableDevices,Be.deviceSelectionRecords),Be.maybePropagateUpdate()}),this.maybeApplyLegacyDevicePrefs=()=>{try{if(!this.isFirstRun)return;const Re=(0,ae.Bh)(),{deviceIdPriorities:ve}=Re,xe=ve==null?void 0:ve[n.lW.Microphone],He=ve==null?void 0:ve[n.lW.Camera],je=ve==null?void 0:ve[n.Q4];if(!(0,m.A)(xe)){const Ke=ve[n.lW.Microphone][0];this.recordDeviceSelected(Ke,s.Microphone)}if(!(0,m.A)(He)){const Ke=ve[n.lW.Camera][0];this.recordDeviceSelected(Ke,s.Camera)}if(!(0,m.A)(je)){const Ke=ve[n.Q4][0];this.recordDeviceSelected(Ke,s.Speakers)}this.isFirstRun=!1}catch(Re){this.logger.error("Error applying legacy device preferences",Re)}},this.updatePrioritizedDeviceLists=()=>{this.logger.debug("Updating prioritized device lists"),this.updatePrioritizedDeviceListOfType(s.Microphone),this.logger.debug("Updated mics",this.prioritizedDeviceLists[s.Microphone]),this.updatePrioritizedDeviceListOfType(s.Camera),this.logger.debug("Updated cameras",this.prioritizedDeviceLists[s.Camera]),this.updatePrioritizedDeviceListOfType(s.Speakers),this.logger.debug("Updated speakers",this.prioritizedDeviceLists[s.Speakers])};var We=this;this.handleDeviceListChange=(0,i.A)((0,t.coroutine)(function*(){try{We.logger.info(`Device list change event received at ${Date.now()}`),We.updateAvailableDevices()}catch(Re){We.logger.error("Error handling device list change event",Re)}}),1e3,{leading:!0,trailing:!0,maxWait:2e3}),this.updateDeviceRecords=Re=>{(0,d.A)(Re,ve=>{if(!ve.deviceId||L(ve.deviceId))return;const He=!!this.deviceSelectionRecords[ve.deviceId];if(x(ve,Re)&&(this.osDefaultDevices[ve.kind]=ve.deviceId,this.logger.debug(`OS default device set for ${ve.kind}`,ve)),He)this.deviceSelectionRecords[ve.deviceId].deviceInfo=ve;else{this.logger.debug("Creating new device history record",ve);const Ke=this.createEmptyDeviceSelectionRecord(ve);if(Ke.deviceLabel){const ht=Object.values(this.deviceSelectionRecords).find(dt=>dt.deviceInfo.kind===ve.kind&&dt.deviceLabel===Ke.deviceLabel);ht?(this.logger.debug("Matching device record found",ht),this.deviceSelectionRecords[ve.deviceId]=ht):this.deviceSelectionRecords[ve.deviceId]=Ke}}})},this.updatePrioritizedDeviceListOfType=Re=>{let ve=null;const xe=[],He=[],je=[],Ke=[];this.availableDevices.forEach(Ve=>{const Je=Ve.deviceId===this.osDefaultDevices[Ve.kind];if(Ve.kind!==Re||L(Ve.deviceId))return;const Ge=this.deviceSelectionRecords[Ve.deviceId];if(!Ge){this.logger.error("No selection record found for device",Ve);return}if(!V(Ge.deviceInfo)){if(Ge.selected){xe.push(Ge.deviceInfo);return}if(Ge.used){He.push(Ge.deviceInfo);return}if(F(Ge.deviceInfo)){je.push(Ge.deviceInfo);return}if(Je){ve=Ge.deviceInfo;return}Ke.push(Ge.deviceInfo)}});const ht=[];ht.push(...S(xe,this.deviceSelectionRecords)),ht.push(...R(He,this.deviceSelectionRecords)),ht.push(ve),ht.push(...w(Ke)),ht.push(...je);const dt=(0,_.A)(ht).filter(Boolean);return this.prioritizedDeviceLists[Re]=dt,dt},this.maybePropagateUpdate=function(){let Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;re(ne.deviceSelectionRecords);const ve=ne.updateTeamStoreForId===ne.currentTeamId,xe=ne.prioritizedDeviceLists;ne.updatePrioritizedDeviceLists();const He=ne.prioritizedDeviceLists;if(!Re&&(0,h.A)(xe,He)&&ve){ne.logger.info("No change in device selection history. Skipping update");return}ne.logger.info("Propagating device selection history update"),ne.dispatch((0,ue.Fb)()),ne.updateTeamStoreForId=ne.currentTeamId}}}l(H,"DevicePreferencesManager");const U=new H,N={printDeviceSelectionRecords:()=>{const X=U.getDeviceSelectionRecords(),ne=(0,p.A)(X,fe=>{var be;return{deviceId:fe.deviceInfo.deviceId,label:fe.deviceLabel,type:fe.deviceInfo.kind,"is preferred":((be=U.getPreferredDeviceOfType(fe.deviceInfo.kind))===null||be===void 0?void 0:be.deviceId)===fe.deviceInfo.deviceId,"last selected":fe.selected?fe.selected.toString():"Never selected","last used":fe.used?fe.used.toString():"Never used","is available":!!U.getPrioritizedDeviceListOfType(fe.deviceInfo.kind).find(Be=>Be.deviceId===fe.deviceInfo.deviceId),"is OS default":fe.deviceInfo.deviceId===U.getOSDefaults()[fe.deviceInfo.kind],groupId:fe.deviceInfo.groupId}});console.table(ne)},printPreferredMicrophone:()=>{const X=U.getPreferredDeviceOfType(s.Microphone);console.log("Preferred microphone",X)},printPreferredCamera:()=>{const X=U.getPreferredDeviceOfType(s.Camera);console.log("Preferred camera",X)},printPreferredSpeakers:()=>{const X=U.getPreferredDeviceOfType(s.Speakers);console.log("Preferred speakers",X)},printPrioritizedDeviceLists:()=>{const X=(0,p.A)(U.getOSDefaults(),(ne,fe)=>U.getPrioritizedDeviceListOfType(fe));(0,d.A)(X,(ne,fe)=>{const be=ne.map(Be=>({deviceId:Be.deviceId,label:Be.label,groupId:Be.groupId}));console.log(`Prioritized list for ${fe}`),console.table(be)})},printDebugInfo:()=>{N.printDeviceSelectionRecords(),N.printPrioritizedDeviceLists(),N.printPreferredMicrophone(),N.printPreferredCamera(),N.printPreferredSpeakers()},clearDeviceSelectionRecords:()=>{U.clearDeviceSelectionRecords(),u.J.location.reload()}};(0,o.ul)("devices",N);const K=U;let W=null;const J=function(){var X=(0,t.coroutine)(function*(ne){let{teamId:fe}=ne;!fe||W===fe||(W=fe,yield K.init({teamId:fe}))});return l(function(fe){return X.apply(this,arguments)},"initializeDevicePreferences")}(),q=l((X,ne)=>{if(!W)return;const fe=a(ne);K.recordDeviceUsed(X,fe)},"reportDeviceUsed"),ie=l((X,ne)=>{if(!W)return;const fe=a(ne);K.recordDeviceSelected(X,fe)},"reportDeviceSelected"),Te=l(()=>{if(!W)return;const X=K.getPrioritizedDeviceListOfType(s.Microphone)||[],ne=K.getPrioritizedDeviceListOfType(s.Camera)||[],fe=K.getPrioritizedDeviceListOfType(s.Speakers)||[];return{[n.lW.Microphone]:X.map(r),[n.lW.Camera]:ne.map(r),[n.Q4]:fe.map(r)}},"getPrioritizedDeviceLists"),Me=function(){var X=(0,t.coroutine)(function*(){W&&(yield K.refreshAvailableDevices())});return l(function(){return X.apply(this,arguments)},"refreshDeviceListsOnDevicePermissionsUpdate")}(),ke=l(X=>{if(!W)return;const ne=mapDeviceTypeToDeviceKind(X);return devicePreferencesManager.getPrioritizedDeviceListOfType(ne).map(mapMediaDeviceInfoToDevice)},"getPrioritizedDeviceListOfType"),Pe=l(X=>{if(!W)return;const ne=a(X),fe=K.getPreferredDeviceOfType(ne);if(fe)return r(fe)},"getPreferredDeviceOfType"),Ie=l(()=>!!W,"isDevicePreferencesManagerInitialized")},270868:(j,T,e)=>{"use strict";e.d(T,{k:()=>r});var t=e(388077),n=e(533456),s=e(263267),a=e(211700);const c={debug:0,info:1,warn:2,error:3,action:0};class r{debug(u){if(!(this.level>t.$b.DEBUG||!r.debugLogsEnabled))if(typeof u=="string"){const m=u;this.consoleLogger.debug(m)}else{const m=u();this.consoleLogger.debug(m)}}info(u){this.level>t.$b.INFO||this.consoleLogger.info(u)}warn(u){this.level>t.$b.WARN||this.consoleLogger.warn(u)}error(u){this.level>t.$b.ERROR||this.callLogger.error(u)}setLogLevel(u){this.level=u}getLogLevel(){return this.level}getName(){return this.name}constructor(u,m){this.name=u,this.level=m||c[(0,s.XM)()],this.consoleLogger=(0,n.Cc)(u),this.callLogger=(0,n.Jt)(u)}}l(r,"FreeWillyLogger"),r.debugLogsEnabled=!1,(0,a.ul)("toggleChimeDebugLogs",()=>{r.debugLogsEnabled=!r.debugLogsEnabled})},201288:(j,T,e)=>{"use strict";e.d(T,{Y:()=>Xn});var t=e(612104),n=e(498916),s=e(388077),a=e(306166),c=e(838426),r=e(533456),o=e(475711),u=e(521082),m=e(629452),i=e(519543),d=e(41343),_=e(790973),h=e(286942),p=e(707980),A=e(808058),v=e(566401),E=e(721333),f=e(543406),g=e(219477),y=e(119110),I=e(515456),O=e(852922),M=e(180491),C=e(345667),P=e(966064),L=e(170852),x=e(532395),F=e(179768);let V=l(class{getLevel(){return this.analyserNode.getByteTimeDomainData(this.data),(0,F.n2)(this.data)/F.Ep}constructor(b){this.analyserNode=b,this.data=new Uint8Array(this.analyserNode.fftSize)}},"AudioAnalyser");var B=e(240449);const D=300;class S{stop(){this.previewAudioAnalyser=void 0,clearTimeout(this.timeoutId)}setPreviewAudioAnalyser(b){this.previewAudioAnalyser=b}constructor(){this.timeoutId=-1,this.monitorAudioLevel=()=>{this.previewAudioAnalyser&&B.A.subscriberCount>0&&B.A.publish(this.previewAudioAnalyser.getLevel()),this.timeoutId=window.setTimeout(this.monitorAudioLevel,D)},this.monitorAudioLevel()}}l(S,"AudioLevelMonitor");function R(At,b){let{skipIntermediatePendingRuns:z=!0}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},me=!1,pe=[];const ct=function(){var ut=(0,t.coroutine)(function*(){for(var $e=arguments.length,k=new Array($e),se=0;se<$e;se++)k[se]=arguments[se];if(me){z&&(pe=[]);const nn=(0,a.u)();return pe.push({args:k,deferred:nn}),nn}me=!0;const ge=yield b.call(At,...k);me=!1;const ot=pe.shift();return ot&&ct(...ot.args).then(ot.deferred.resolve).catch(ot.deferred.reject),ge});return l(function(){return ut.apply(this,arguments)},"run")}();return ct}l(R,"serialGuard");var w=e(463031),Y=e(682520);let Q=l(class{voiceFocusInsufficientResources(){var b=this;return(0,t.coroutine)(function*(){b.logger.warn("Voice Focus insufficient resources"),b.InsufficientResourcesHandler()})()}constructor(b){this.logger=(0,Y.Wo)({label:"VOICE FOCUS OBSERVER"}),this.InsufficientResourcesHandler=b}},"VoiceFocusObserver");var Z=e(313344);class ee{initialize(){var b,z,me,pe,ct,ut,$e,k,se,ge,ot,nn,qt,vn;if(!(!((b=this.defaultDeviceController)===null||b===void 0||(z=b.activeDevices)===null||z===void 0||(me=z.audio)===null||me===void 0||(pe=me.stream)===null||pe===void 0)&&pe.getAudioTracks))return;const Ut=this.defaultDeviceController;if(!(!((ct=this.defaultDeviceController)===null||ct===void 0||(ut=ct.activeDevices)===null||ut===void 0||($e=ut.audio)===null||$e===void 0||(k=$e.stream)===null||k===void 0)&&k.getAudioTracks)){this.logger.warn("Unable to retrieve audio tracks from the default device controller");return}const Xt=Ut.activeDevices.audio.stream.getAudioTracks();if(Xt.length===1)this.audioInputTrack=Xt[0];else{this.logger.warn("No audio input tracks where found for the current audio device. Audio input tracks amount: {tracks.length}");return}(se=this.audioInputTrack)===null||se===void 0||se.addEventListener("mute",this.onMute),(ge=this.audioInputTrack)===null||ge===void 0||ge.addEventListener("unmute",this.onUnmute),(ot=this.audioInputTrack)===null||ot===void 0||ot.addEventListener("ended",this.onEnded),!((nn=this.audioInputTrack)===null||nn===void 0)&&nn.muted?this.onMute():this.onUnmute();const Sn=(vn=(qt=this.audioInputTrack)===null||qt===void 0?void 0:qt.getSettings())===null||vn===void 0?void 0:vn.deviceId;if(!Sn){this.logger.warn("No deviceId found for audio input track");return}(0,Z.i_)(Sn,o.lW.Microphone)}tearDown(){var b,z,me;(b=this.audioInputTrack)===null||b===void 0||b.removeEventListener("mute",this.onMute),(z=this.audioInputTrack)===null||z===void 0||z.removeEventListener("unmute",this.onUnmute),(me=this.audioInputTrack)===null||me===void 0||me.removeEventListener("ended",this.onEnded)}onMute(){this.isAudioInputTrackMuted=!0,this.logger.warn("Audio input track is muted. Alerting the user"),this.observer.onAudioInputTrackMuted()}onUnmute(){this.isAudioInputTrackMuted&&this.logger.info("Audio input track is unmuted. Removing alert if there is one"),this.observer.onAudioInputTrackUnMuted(),this.isAudioInputTrackMuted=!1}onEnded(){this.logger.warn("Audio input track was ended.")}constructor(b,z,me){this.defaultDeviceController=b,this.observer=z,this.logger=me,this.isAudioInputTrackMuted=!1,this.onMute=this.onMute.bind(this),this.onUnmute=this.onUnmute.bind(this),this.onEnded=this.onEnded.bind(this)}}l(ee,"AudioInputTrackHandler");var _e;(function(At){At.Blur="BLUR",At.Image="IMAGE",At.None="NONE"})(_e||(_e={}));class Ee{constructor({backgroundEffect:b}){this.filterCPUUtilizationHigh=z=>{const{cpuUtilization:me,filterMillis:pe,periodMillis:ct}=z;this.callLogger.warn(`CPU utilization by video background processor is high - cpuUtilization: ${me} - spent ${pe}ms of last ${ct}ms processing video background`)},this.filterFrameDurationHigh=z=>{const{framesDropped:me,avgFilterDurationMillis:pe,framerate:ct,periodMillis:ut}=z;this.callLogger.warn(`Frame duration by video background processor is high. framerate: ${ct}, frames dropped: ${me}, spent ${pe}ms of last ${ut}ms processing video background`)},this.callLogger=(0,r.Jt)(`VIDEO-BACKGROUND-${b}`)}}l(Ee,"VideoBackgroundObserver");const G=Ee;var Ae=e(550521),ce=e(859790),de=e(839693),oe=e(118118),$=e(906332),re=e(833527),ue;(function(At){At.START_PREVIEW="start-preview",At.STOP_PREVIEW="stop-preview",At.ENABLE="enable",At.DISABLE="disable"})(ue||(ue={}));const te=1e4,ae=30,H=5e3,U=5e3,N="medium",K=!0,W=50;let J=l(class{shutdown(){var b=this;return(0,t.coroutine)(function*(){var z,me,pe;if(b.isShuttingDown=!0,b.voiceFocusDevice){var ct;b.voiceFocusObserver&&b.voiceFocusDevice.removeObserver(b.voiceFocusObserver),yield b.voiceFocusDevice.stop(),yield(ct=b.voiceFocusManager)===null||ct===void 0?void 0:ct.tearDown(),b.voiceFocusDevice=void 0}b.audioVideoFacade.removeDeviceChangeObserver(b),b.audioVideoFacade.stopLocalVideoTile(),yield b.audioVideoFacade.stopVideoInput(),yield b.audioVideoFacade.stopAudioInput(),b.audioVideoFacade.unbindAudioElement(),b.removeAudioElementErrorHandler(),yield b.clearVideoTransformDeviceRefs(),b.audioInputDeviceRefreshTimer&&(clearTimeout(b.audioInputDeviceRefreshTimer),b.audioInputDeviceRefreshTimer=null),b.videoInputDeviceRefreshTimer&&(clearTimeout(b.videoInputDeviceRefreshTimer),b.videoInputDeviceRefreshTimer=null),b.cameraMetricsTimeout&&(clearTimeout(b.cameraMetricsTimeout),b.cameraMetricsTimeout=null),yield(me=(z=(0,s._R)())===null||z===void 0?void 0:z.getAudioContext())===null||me===void 0?void 0:me.suspend(),b.callLogger.info("Audio context suspended"),(pe=b.audioLevelMonitor)===null||pe===void 0||pe.stop(),delete b.audioLevelMonitor,b.callLogger.info("Device manager shutdown complete")})()}init(){var b=this;return(0,t.coroutine)(function*(){yield b.refreshMediaDeviceInfo(),yield b.determineInitialMicrophonePermissionState(),b.enumerateDevices(),b.logDevices(),yield b.updateMicrophone(),yield b.updateSpeaker(),b.isCameraEnabled&&(yield b.updateCamera())})()}determineInitialMicrophonePermissionState(){var b=this;return(0,t.coroutine)(function*(){if((0,y.y3)()){yield b.determineInitialMicrophonePermissionStateForDesktop();return}yield b.determineInitialMicrophonePermissionStateForBrowser()})()}determineInitialMicrophonePermissionStateForBrowser(){var b=this;return(0,t.coroutine)(function*(){const{status:z}=re.Ay.canAccessMediaResource(i.mT.MICROPHONE);return z===o.eJ.Denied&&(b.observer.onBrowserMediaDeviceAccessDenied(i.mT.MICROPHONE),b.callLogger.warn("setting microphone to muted as microphone permission was not available during initialization"),b.isStartMutedBarrierActive=!0),{isAvailable:!1,status:z}})()}determineInitialMicrophonePermissionStateForDesktop(){var b=this;return(0,t.coroutine)(function*(){const z=yield b.maybeCheckSystemMediaAccess(i.mT.MICROPHONE);(0,y.j9)()||(0,y.uF)()&&!b.options.useGetMediaAccessCheckForWindows||z&&(z==null?void 0:z.status)!==o.eJ.Granted&&(b.callLogger.warn("setting microphone to muted as microphone permission was not available during initialization"),b.isStartMutedBarrierActive=!0)})()}setAGC(b){var z=this;return(0,t.coroutine)(function*(){z.prefs.audio&&z.prefs.audio.enableAGC!==b&&(z.callLogger.info(`AGC setting changed: ${b}`),z.prefs.audio.enableAGC=b,(0,de.i4)(z.prefs),yield z.updateMicrophone())})()}setPreferredDevice(b,z){var me=this;return(0,t.coroutine)(function*(){const pe=me.prefs.deviceIdPriorities[z],ct=(0,d.A)([b,...pe]);switch(z!==o.Q4&&me.maybeRemoveIphoneFromPriorities({selectedDeviceId:b,selectedDeviceType:z,newPrioritiesForSelectedType:ct}),me.prefs.deviceIdPriorities={...me.prefs.deviceIdPriorities,[z]:ct},(0,de.i4)(me.prefs),me.enumerateDevices({id:b,type:z}),z){case o.lW.Microphone:yield me.updateMicrophone();break;case o.Q4:yield me.updateSpeaker();break;case o.lW.Camera:me.isCameraEnabled&&(yield me.updateCamera());break;default:break}})()}setPreferredCameraDeviceForPreview(b){var z=this;return(0,t.coroutine)(function*(){const me=o.lW.Camera,pe=z.prefs.deviceIdPriorities[me];z.prefs.deviceIdPriorities={...z.prefs.deviceIdPriorities,[me]:(0,d.A)([b,...pe])},(0,de.i4)(z.prefs),z.enumerateDevices({id:b,type:me}),yield z.updateCamera()})()}setVideoBackgroundEffect(b){let{effect:z,effectBgKey:me}=b;var pe=this;return(0,t.coroutine)(function*(){pe.prefs.video&&(pe.callLogger.info(`Video background effect changed: ${z}`),pe.prefs.video.effect=z,pe.prefs.video.effectBgKey=me,(0,de.i4)(pe.prefs),pe.isCameraEnabled&&(yield pe.updateCamera()))})()}setNoiseSuppression(b){var z=this;return(0,t.coroutine)(function*(){z.prefs.audio&&z.prefs.audio.enableNoiseSuppression!==b&&(z.callLogger.info(`Noise suppression setting changed: ${b}`),z.prefs.audio.enableNoiseSuppression=b,(0,de.i4)(z.prefs),yield z.updateMicrophone())})()}setStartMutedBarrier(b){var z=this;return(0,t.coroutine)(function*(){z.isStartMutedBarrierActive=b})()}setMicrophone(b){var z=this;return(0,t.coroutine)(function*(){var me;if(z.voiceFocusManager&&(yield z.voiceFocusManager.setMute(b)),!b){var pe;z.audioVideoFacade.realtimeMuteLocalAudio(),(pe=z.huddleEventsTrace)===null||pe===void 0||pe.update({name:O.p.MICROPHONE,type:O.G.STOP});return}z.isStartMutedBarrierActive&&(z.callLogger.info("Releasing start muted barrier"),z.isStartMutedBarrierActive=!1),z.audioVideoFacade.realtimeUnmuteLocalAudio(),(me=z.huddleEventsTrace)===null||me===void 0||me.update({name:O.p.MICROPHONE,type:O.G.START})})()}requestPreviewStreamForDeviceId(b,z,me){z===o.lW.Camera&&this.handleCameraChanges({type:ue.START_PREVIEW,deviceId:b,videoElement:me})}stopVideoPreviewForVideoInput(b){this.handleCameraChanges({type:ue.STOP_PREVIEW,videoElement:b||this.cameraPreviewVideoElement})}setCamera(b){b!==this.isCameraEnabled&&(this.isCameraEnabled=b,this.isCameraEnabled?(this.handleCameraChanges({type:ue.ENABLE}),this.maybeCheckSystemMediaAccess(i.mT.CAMERA),this.maybeAutoSetPreferredDevice()):this.handleCameraChanges({type:ue.DISABLE}))}setCameraQuality(b,z,me,pe){this.audioVideoFacade.chooseVideoInputQuality(b,z,me),this.audioVideoFacade.setVideoMaxBandwidthKbps(pe)}audioVideoDidStart(){return(0,t.coroutine)(function*(){})()}localVideoTileDidUpdate(b){(!b.boundVideoStream||!b.boundVideoStream.active)&&this.callLogger.info(`DeviceManager::localVideoTileDidUpdate ${b.boundVideoStream?"boundVideoStream is not active":"there is no boundVideoStream"}`),!b.isContent&&!this.isCameraEnabled?this.waitForCameraReady.reject(new Error("Camera disabled")):this.waitForCameraReady.resolve()}maybeBindAudioOutputElement(){var b=this;return(0,t.coroutine)(function*(){if(!b.isAudioOutputElementBound&&b.audioOutputElement){try{yield b.audioVideoFacade.bindAudioElement(b.audioOutputElement)}catch(z){b.callLogger.info(`bindAudioElement failed: error: ${z.name}, message: ${z.message}`);return}b.isAudioOutputElementBound=!0}})()}maybeCheckSystemMediaAccess(b){var z=this;return(0,t.coroutine)(function*(){if(!(0,y.y3)()){const{status:me}=re.Ay.canAccessMediaResource(b);if(me===o.eJ.Granted)return{isAvailable:!1,status:o.eJ.Granted}}if((0,y.cX)()||z.options.useGetMediaAccessCheckForWindows&&(0,y.uF)())try{const me=re.Ay.canAccessMediaResource(b);if(z.callLogger.info(`DeviceManager::getMediaAccessStatus ${b} electron API available: ${me.isAvailable} and status: ${me.status}`),!me.isAvailable)return{isAvailable:!1,status:o.eJ.NotDetermined};if(me.status===o.eJ.Granted)return z.observer.onDeviceAccessApproved(b),me;let pe;return me.status===o.eJ.NotDetermined&&(pe=b==="screen"?null:yield re.Ay.requestMediaAccess(b),z.callLogger.info(`DeviceManager::askForMediaAccess ${b} electron API available: ${!!(pe!=null&&pe.isAvailable)} and isConsentGranted: ${pe==null?void 0:pe.isGranted}`),b!=="screen"&&(pe!=null&&pe.isGranted))?(z.observer.onDeviceAccessApproved(b),{status:o.eJ.Granted,isAvailable:!0}):((me.status===o.eJ.Denied||pe&&!pe.isGranted)&&(z.micPermissionDenied=!0,z.observer.onCheckSystemMediaAccess(b)),me)}catch(me){z.callLogger.info(`DeviceManager::Error retrieving system access for ${b}: ${me}`)}return{isAvailable:!1,status:o.eJ.NotDetermined}})()}audioInputsChanged(b){this.callLogger.info("DeviceManager::audioInputsChanged"),this.audioInputDevices=b,this.enumerateDevices(),this.updateMicrophone(),this.logDevices([o.lW.Microphone]),this.lastAudioInputDevicesUpdateTime=Date.now(),this.observer.onClearNoMediaInput(i.mT.MICROPHONE)}audioInputMuteStateChanged(b,z){this.callLogger.info(`DeviceManager::audioInputMuteStateChanged: device: ${b}, ${z?"muted":"unmuted"}`)}audioInputStreamEnded(b){if(!b)return;this.callLogger.info("DeviceManager::audioInputStreamEnded");const z=this.audioInputDevices;this.audioInputDeviceRefreshTimer&&clearTimeout(this.audioInputDeviceRefreshTimer),this.lastAudioInputStreamEndTime=Date.now();var me=this;this.audioInputDeviceRefreshTimer=setTimeout((0,t.coroutine)(function*(){const pe=yield me.audioVideoFacade.listAudioInputDevices();me.deviceInfoArrayComparator(pe,z)&&(me.callLogger.warn("Call audio stream ended unexpectedly"),me.observer.onSetNoMediaInput(i.mT.MICROPHONE),(0,L.k)(x.EventId.CALLS_AUDIO_STREAM_ENDED_UNEXPECTEDLY,{audioInputDevicesUpdated:me.lastAudioInputDevicesUpdateTime&&me.lastAudioInputDevicesUpdateTime>me.lastAudioInputStreamEndTime})),me.audioInputDeviceRefreshTimer=null}),H)}audioOutputsChanged(b){this.callLogger.info("DeviceManager::audioOutputsChanged"),this.audioOutputDevices=b,this.enumerateDevices(),this.updateSpeaker(),this.logDevices([o.Q4]),this.observer.onClearNoAudioOutput(i.NS.AUDIO_ELEMENT_ERROR)}videoInputsChanged(b){const z=this.getPreferredDevice(o.lW.Camera),me=(0,_.A)(b,pe=>pe.deviceId===(z==null?void 0:z.id));this.callLogger.info("DeviceManager::videoInputsChanged"),this.videoInputDevices=b,this.enumerateDevices(),this.logDevices([o.lW.Camera]),this.lastVideoInputDevicesUpdateTime=Date.now(),!me&&this.isCameraEnabled?(this.callLogger.info("DeviceManager::triggering camera stop due to active camera no longer being available"),this.observer.onSetNoMediaInput(i.mT.CAMERA)):this.observer.onClearNoMediaInput(i.mT.CAMERA)}videoInputStreamEnded(b){var z=this;return(0,t.coroutine)(function*(){if(!b)return;z.callLogger.info("DeviceManager::videoInputStreamEnded"),z.observer.onSetNoMediaInput(i.mT.CAMERA);const me=z.videoInputDevices;z.videoInputDeviceRefreshTimer&&clearTimeout(z.videoInputDeviceRefreshTimer),z.lastVideoInputStreamEndTime=Date.now(),z.videoInputDeviceRefreshTimer=setTimeout((0,t.coroutine)(function*(){const pe=yield z.audioVideoFacade.listVideoInputDevices();z.deviceInfoArrayComparator(pe,me)&&(z.callLogger.warn("Call video stream ended unexpectedly"),(0,L.k)(x.EventId.CALLS_VIDEO_STREAM_ENDED_UNEXPECTEDLY,{videoInputDevicesUpdated:z.lastVideoInputDevicesUpdateTime&&z.lastVideoInputDevicesUpdateTime>z.lastVideoInputStreamEndTime})),z.videoInputDeviceRefreshTimer=null}),U)})()}logDevices(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$.LL;(0,$.my)(this.callLogger,this.devices,b)}getPreferredDevice(b){return(0,de.t3)(this.devices)[b]}enumerateDevices(b){const z=(0,h.A)((0,de.$y)(this.audioInputDevices?(0,C.P)(this.audioInputDevices):[],this.prefs.deviceIdPriorities[o.lW.Microphone],this.prefs.deviceIdPrioritiesExtended&&this.prefs.deviceIdPrioritiesExtended[o.lW.Microphone]||[]),(0,de.$y)(this.audioOutputDevices?(0,C.P)(this.audioOutputDevices):[],this.prefs.deviceIdPriorities[o.Q4],this.prefs.deviceIdPrioritiesExtended&&this.prefs.deviceIdPrioritiesExtended[o.Q4]||[]),(0,de.$y)(this.videoInputDevices?this.videoInputDevices:[],this.prefs.deviceIdPriorities[o.lW.Camera],this.prefs.deviceIdPrioritiesExtended&&this.prefs.deviceIdPrioritiesExtended[o.lW.Camera]||[])),me=(0,p.A)(z,(pe,ct)=>{const ut=(0,$.tk)(ct),$e=b&&b.id===ut.id&&b.type===ut.type,k=this.shouldDeprioritizeDevice({device:ut,isPreferredDevice:$e||this.getPreferredCameraId()===ut.id});return{...pe,[ut.type]:$e&&!k?[ut,...pe[ut.type]]:[...pe[ut.type],ut]}},(0,$.Bm)());this.devices=me,this.observer.onDevicesUpdated(me)}handleCameraChanges(b){var z=this;return(0,t.coroutine)(function*(){switch(b.type){case ue.START_PREVIEW:yield z.runCameraActivityStartPreview(b);break;case ue.STOP_PREVIEW:yield z.runCameraActivityStopPreview(b);break;case ue.ENABLE:yield z.runCameraActivityEnable();break;case ue.DISABLE:yield z.runCameraActivityDisable();break;default:break}})()}getDeviceIdAndLabelForDefaultDevice(b,z,me){if(b!==$.dx&&b!==$.Zy||me===o.lW.Camera)return{deviceId:b,deviceLabel:z};const pe=me===o.Q4?this.audioOutputDevices:this.audioInputDevices;let ct=null;if((0,A.A)(pe,k=>{if(!(!k||k.deviceId!==b))return ct=k.groupId,!1}),!ct)return{deviceId:b,deviceLabel:z};let ut=b,$e=z;return(0,A.A)(pe,k=>{if(!(!k||k.groupId!==ct||k.deviceId===$.dx||k.deviceId===$.Zy))return ut=k.deviceId,$e=k.label,!1}),{deviceId:ut,deviceLabel:$e}}updateMicrophone(){var b=this;return(0,t.coroutine)(function*(){const z=b.getPreferredDevice(o.lW.Microphone);if(!z){b.callLogger.info("No audio input device found");return}if(b.micPermissionDenied&&(b.callLogger.error("Microphone permission is denied. The user must grant permissions and fully quit and restart Slack to join the Huddle"),b.hasRetriedAudioInit))return;const{deviceId:me,deviceLabel:pe}=b.getDeviceIdAndLabelForDefaultDevice(z.id,z.label,o.lW.Microphone);b.callLogger.info(`Selected audio input device: ${z.label||z.id}, deviceId: ${me}, deviceLabel: ${pe}`),b.detectBluetoothDevices();const ut={autoGainControl:b.prefs.audio?b.prefs.audio.enableAGC:!0,deviceId:me},$e=b.shouldNoiseSuppressionBeDisabled(pe);let k=!0;if(b.voiceFocusManager&&b.voiceFocusManager.isAvailable()&&(b.prefs.audio&&b.prefs.audio.enableNoiseSuppression)&&!$e&&!b.voiceFocusCPUThrottled){if(b.voiceFocusDevice||(b.voiceFocusDevice=yield b.voiceFocusManager.getTransformDevice()),b.voiceFocusDevice){const se=yield b.voiceFocusDevice.chooseNewInnerDevice(ut);se!==b.voiceFocusDevice&&(b.voiceFocusObserver=new Q(b.handleVoiceFocusInsufficientResourcesEvent),b.voiceFocusDevice.addObserver(b.voiceFocusObserver)),b.voiceFocusDevice=se}b.voiceFocusDevice||(k=!1)}else k=!1;b.voiceFocusDevice&&(0,P.Y)({name:P.R1.VoiceFocusDevice,ref:b.voiceFocusDevice}),b.callLogger.info("Noise suppression:",k?"enabled":"disabled");try{if(b.isStartMutedBarrierActive&&(b.callLogger.info("Start muted barrier active"),b.audioVideoFacade.realtimeMuteLocalAudio()),k)if(b.voiceFocusDevice)yield b.initAudioInput(b.voiceFocusDevice);else throw new Error("Trying noise suppression with no voice focus transform device");else navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints&&Object.prototype.hasOwnProperty.call(navigator.mediaDevices.getSupportedConstraints(),"noiseSuppression")&&(ut.noiseSuppression=!0),yield b.initAudioInput(ut)}catch(se){b.callLogger.error(`chooseAudioInputDevice failed: error: ${se.name}, message: ${se.message}`),yield b.handleAudioInitError(se);return}b.hasRetriedAudioInit&&(b.callLogger.info("Microphone initialized successfully after retry"),b.hasRetriedAudioInit=!1),b.initAudioAnalyserForPreview(),b.setupAudioInputTrackHandler(),!(yield b.isMediaPermissionDeniedOnWindows(i.mT.MICROPHONE))&&b.observer.onSelfPermissionUpdated(b.micPermissionDenied,o.lW.Microphone)})()}updateSpeaker(){var b=this;return(0,t.coroutine)(function*(){const z=b.getPreferredDevice(o.Q4);if(!z){b.callLogger.info("No audio output device found");return}const{deviceId:me,deviceLabel:pe}=b.getDeviceIdAndLabelForDefaultDevice(z.id,z.label,o.Q4);b.detectBluetoothDevices(),b.callLogger.info(`Selected audio output device id: ${z.label||z.id}, deviceId: ${me}, deviceLabel: ${pe}`),yield b.audioVideoFacade.chooseAudioOutput(me),b.observer.onOutputDeviceChanged({id:z.id,type:o.Q4})})()}updateCamera(){var b=this;return(0,t.coroutine)(function*(){const z=b.getPreferredDevice(o.lW.Camera);if(!z){b.callLogger.info("No video input device found");return}b.callLogger.info(`Selected video input device id: ${z.label||z.id}`);try{yield b.setCameraVideoInputDevice(z)}catch(me){b.callLogger.info(`chooseVideoInputDevice failed: error: ${me.name}, message: ${me.message}`),me instanceof s.Ll?b.observer.onSelfPermissionUpdated(!0,o.lW.Camera):b.observer.onSelfPermissionUpdated(!1,o.lW.Camera);return}(yield b.isMediaPermissionDeniedOnWindows(i.mT.CAMERA))||b.observer.onSelfPermissionUpdated(!1,o.lW.Camera)})()}setCameraVideoInputDevice(b){var z=this;return(0,t.coroutine)(function*(){if(yield z.clearVideoTransformDeviceRefs(),z.options.backgroundVideoFilteringSetting===o.uT.NONE){yield z.initVideoInput(b.id);return}switch(z.prefs.video.effect){case oe.t.Blur:{yield z.setCameraVideoInputDeviceWithBackgroundBlurFilter(b);break}case oe.t.Background:{z.options.backgroundVideoFilteringSetting!==o.uT.Both?yield z.initVideoInput(b.id):yield z.setCameraVideoInputDeviceWithBackgroundReplacementImageFilter({videoDevice:b,selectedBackgroundImageKey:z.prefs.video.effectBgKey});break}default:{yield z.initVideoInput(b.id);break}}})()}setCameraVideoInputDeviceWithBackgroundReplacementImageFilter(b){let{videoDevice:z,selectedBackgroundImageKey:me}=b;var pe=this;return(0,t.coroutine)(function*(){const ct=z.label||z.id;if(me===void 0){pe.callLogger.info(`No background image key provided id: ${ct}`),yield pe.initVideoInput(z.id);return}const ut=(0,s.jq)(),$e=(0,s.px)(),k=[];if(!(yield s.i3.isSupported(pe.chimeLogger))&&K)return pe.handleErrorApplyVideoEffects("VideoFxProcessor is not supported on host device. Defaulting to non image replaced background",z);if(!(yield $e.isSupported())&&!K)return pe.handleErrorApplyVideoEffects("BackgroundReplacementVideoFrameProcessor is not supported on host device. Defaulting to non image replaced background",z);const ge=w.g.find(Ut=>Ut.key===me);if(ge===void 0)return pe.handleErrorApplyVideoEffects("Image could not be found, switching to default input for device",z);pe.callLogger.info(`Enabling video input device with background image filter id: ${ct}`);const nn=yield(yield fetch(ge.url)).blob();if(pe.isShuttingDown)return;const qt={...pe.defaultVideoProcessorOptions,imageBlob:nn};if(K){if(pe.videoFxConfig={backgroundBlur:{isEnabled:!1,strength:N},backgroundReplacement:{isEnabled:!0,backgroundImageURL:ge.url,defaultColor:void 0}},pe.videoFxProcessor=yield s.i3.create(pe.chimeLogger,pe.videoFxConfig,W),!pe.videoFxProcessor)return pe.handleErrorApplyVideoEffects("VideoFxProcessor could not be created defaulting to normal input for device",z);pe.callLogger.info(`VideoFxProcessor background image replacement enabled for device id: ${ct}`),k.push(pe.videoFxProcessor)}else{const Ut=yield $e.create(void 0,qt);if(Ut)pe.setupVideoBackgroundFrameProcessor({processor:Ut,backgroundEffect:_e.Image}),k.push(Ut);else return pe.handleErrorApplyVideoEffects("BackgroundReplacementVideoFrameProcessor could not be created defaulting to normal input for device",z)}pe.callLogger.info(`Enabling video input device with background image replacement id: ${ct}`);const vn=new ut(pe.chimeLogger,z.id,k);pe.setVideoTransformDeviceRefs({transformDevice:vn,processors:k}),yield pe.initVideoInput(vn),yield pe.cleanupTransformDevicesAndCameraIfShuttingdown()})()}handleErrorApplyVideoEffects(b,z){var me=this;return(0,t.coroutine)(function*(){const pe=z.label||z.id;me.callLogger.info(`${b}: ${pe}`),yield me.initVideoInput(z.id)})()}setCameraVideoInputDeviceWithBackgroundBlurFilter(b){var z=this;return(0,t.coroutine)(function*(){const me=(0,s.jq)(),pe=(0,s.kM)(),ct=b.label||b.id;z.callLogger.info(`Enabling video input device with background blur filter id: ${ct}`);const ut=[];if(K){if(!(yield s.i3.isSupported(z.chimeLogger)))return z.handleErrorApplyVideoEffects("VideoFxProcessor is not supported on host device. Defaulting to non blurred background",b);if(z.videoFxConfig={backgroundBlur:{isEnabled:!0,strength:N},backgroundReplacement:{isEnabled:!1,backgroundImageURL:"",defaultColor:void 0}},z.videoFxProcessor=yield s.i3.create(z.chimeLogger,z.videoFxConfig,W),!z.videoFxProcessor)return z.handleErrorApplyVideoEffects("VideoFxProcessor could not be created defaulting to normal input for device",b);z.callLogger.info(`VideoFxProcessor background blur enabled for device id: ${ct}`),ut.push(z.videoFxProcessor)}else{if(!(yield pe.isSupported()))return z.handleErrorApplyVideoEffects("BackgroundBlurVideoFrameProcessor is not supported on host device. Defaulting to non blurred background",b);const k={...z.defaultVideoProcessorOptions,blurStrength:15},se=yield pe.create(void 0,k);if(!se)return z.handleErrorApplyVideoEffects("BackgroundBlurVideoFrameProcessor could not be created defaulting to normal input for device",b);z.setupVideoBackgroundFrameProcessor({processor:se,backgroundEffect:_e.Blur}),ut.push(se)}z.callLogger.info(`Enabling video input device with background blur filter id: ${ct}`);const $e=new me(z.chimeLogger,b.id,ut);z.setVideoTransformDeviceRefs({transformDevice:$e,processors:ut}),yield z.initVideoInput($e),yield z.cleanupTransformDevicesAndCameraIfShuttingdown()})()}cleanupTransformDevicesAndCameraIfShuttingdown(){var b=this;return(0,t.coroutine)(function*(){b.isShuttingDown&&(b.callLogger.info("Cleaning up background video frame processor and video input because huddle has ended"),yield b.audioVideoFacade.stopVideoInput(),yield b.clearVideoTransformDeviceRefs())})()}initVideoInputDevices(){var b=this;return(0,t.coroutine)(function*(){const z=yield b.audioVideoFacade.listVideoInputDevices(),me=z.length>0;return me||b.observer.onSelfPermissionUpdated(!0,o.lW.Camera),b.videoInputDevices=z,b.prefs=(0,de.Bh)(),b.enumerateDevices(),me})()}shouldNoiseSuppressionBeDisabled(b){const z=(0,y.j9)();return z&&this.callLogger.info("Noise suppression disabled on Linux: ",b||"no device label"),z}runCameraActivityStartPreview(b){var z=this;return(0,t.coroutine)(function*(){const me=b.deviceId,pe=b.videoElement;!me||!pe||(z.cameraPreviewVideoElement=pe,yield z.setPreferredCameraDeviceForPreview(me),yield z.startCameraPreview())})()}runCameraActivityStopPreview(b){var z=this;return(0,t.coroutine)(function*(){const me=b.videoElement;me&&(me!==z.cameraPreviewVideoElement&&z.callLogger.warn("Mismatch in preview video element"),z.audioVideoFacade.hasStartedLocalVideoTile()?z.detachStreamFromCameraPreview():z.stopCameraPreview(),delete z.cameraPreviewVideoElement)})()}runCameraActivityEnable(){var b=this;return(0,t.coroutine)(function*(){var z;!b.audioVideoFacade.hasStartedLocalVideoTile()&&b.cameraPreviewVideoElement&&b.stopCameraPreview(),yield b.updateCamera(),b.audioVideoFacade.hasStartedLocalVideoTile()||(b.waitForCameraReady=(0,a.u)(),b.audioVideoFacade.startLocalVideoTile(),yield b.waitForCameraReady.catch(()=>{b.callLogger.info("Camera disabled before self video stream was properly bound. Explicitly disabling camera."),b.runCameraActivityDisable()})),b.attachStreamToCameraPreview(),(z=b.huddleEventsTrace)===null||z===void 0||z.update({name:O.p.VIDEO,type:O.G.START})})()}runCameraActivityDisable(){var b=this;return(0,t.coroutine)(function*(){var z;b.detachStreamFromCameraPreview(),yield b.audioVideoFacade.stopVideoInput(),b.audioVideoFacade.stopLocalVideoTile(),(z=b.huddleEventsTrace)===null||z===void 0||z.update({name:O.p.VIDEO,type:O.G.STOP}),b.cameraPreviewVideoElement&&(yield b.updateCamera(),yield b.startCameraPreview())})()}startCameraPreview(){var b=this;return(0,t.coroutine)(function*(){b.cameraPreviewVideoElement&&(b.waitForCameraReady=(0,a.u)(),b.audioVideoFacade.startVideoPreviewForVideoInput(b.cameraPreviewVideoElement),b.cameraPreviewVideoElement.addEventListener("canplay",z=>{b.waitForCameraReady.resolve()}),yield b.waitForCameraReady)})()}stopCameraPreview(){var b=this;return(0,t.coroutine)(function*(){b.cameraPreviewVideoElement&&(b.audioVideoFacade.stopVideoPreviewForVideoInput(b.cameraPreviewVideoElement),yield b.audioVideoFacade.stopVideoInput())})()}attachStreamToCameraPreview(){var b;if(!this.cameraPreviewVideoElement)return;const z=(b=this.audioVideoFacade.getLocalVideoTile())===null||b===void 0?void 0:b.state();z&&z.boundVideoStream&&s.xc.connectVideoStreamToVideoElement(z.boundVideoStream,this.cameraPreviewVideoElement,!0)}detachStreamFromCameraPreview(){this.cameraPreviewVideoElement&&s.xc.disconnectVideoStreamFromVideoElement(this.cameraPreviewVideoElement,!0)}addAudioElementErrorHandler(){this.audioOutputElement.addEventListener("error",this.audioElementErrorHandler)}removeAudioElementErrorHandler(){this.audioOutputElement.removeEventListener("error",this.audioElementErrorHandler)}audioElementErrorHandler(b){var z,me,pe,ct;const ut=((z=b.target)===null||z===void 0||(me=z.error)===null||me===void 0?void 0:me.code)||"unavailable",$e=((pe=b.target)===null||pe===void 0||(ct=pe.error)===null||ct===void 0?void 0:ct.message)||b.message;this.callLogger.warn(`HTML_AUDIO_ELEMENT_ERROR code: ${ut}, message: ${$e}`),this.observer.onSetNoAudioOutput(i.NS.AUDIO_ELEMENT_ERROR)}deviceInfoArrayComparator(b,z){return(0,v.A)((0,E.A)(b,z,(me,pe)=>me.deviceId===pe.deviceId&&me.groupId===pe.groupId&&me.kind===pe.kind))}isMediaPermissionDeniedOnWindows(b){var z=this;return(0,t.coroutine)(function*(){if(z.options.useGetMediaAccessCheckForWindows&&(0,y.uF)()&&(0,y.dY)("4.9.0")){const me=yield z.maybeCheckSystemMediaAccess(b);if(me&&me.status==="denied")return!0}return!1})()}initAudioAnalyserForPreview(){const b=(0,s._R)().getAudioContext();if(!b){this.callLogger.warn("Unable to get AudioContext");return}b.resume();const z=this.audioVideoFacade.createAnalyserNodeForAudioInput();if(z){var me;const pe=new V(z);(me=this.audioLevelMonitor)===null||me===void 0||me.setPreviewAudioAnalyser(pe)}}setupAudioInputTrackHandler(){this.audioInputTrackHandler&&(this.callLogger.info("Tearing down previous Audio Input Track Handler"),this.audioInputTrackHandler.tearDown(),this.audioInputTrackHandler=void 0),this.callLogger.info("Setting up new audio input track handler"),this.audioInputTrackHandler=new ee(this.defaultDeviceController,this.observer,this.callLogger),this.audioInputTrackHandler.initialize()}constructor(b,z,me,pe,ct=!1,ut,$e,k){this.audioVideoFacade=b,this.audioOutputElement=z,this.observer=me,this.options=pe,this.isStartMutedBarrierActive=ct,this.chimeLogger=ut,this.defaultDeviceController=$e,this.voiceFocusManager=k,this.callLogger=(0,r.Jt)("DEVICES"),this.devices=(0,$.Bm)(),this.waitForCameraReady=(0,a.u)(),this.lastAudioInputDevicesUpdateTime=0,this.lastVideoInputDevicesUpdateTime=0,this.lastAudioInputStreamEndTime=0,this.lastVideoInputStreamEndTime=0,this.isAudioOutputElementBound=!1,this.voiceFocusCPUThrottled=!1,this.videoFxConfig={backgroundBlur:{isEnabled:!1,strength:N},backgroundReplacement:{isEnabled:!1,backgroundImageURL:"",defaultColor:void 0}},this.continuityCameraDeviceIds={[o.lW.Camera]:null,[o.lW.Microphone]:null},this.isShuttingDown=!1,this.cameraMetricsTimeout=null,this.micPermissionDenied=!1,this.hasRetriedAudioInit=!1,this.maybeRemoveIphoneFromPriorities=Ut=>{let{selectedDeviceId:Xt,selectedDeviceType:Sn,newPrioritiesForSelectedType:Yn}=Ut;const Qe=this.continuityCameraDeviceIds[Sn];Qe&&(Xt!==Qe?((0,f.A)(Yn,yt=>yt===Qe),this.callLogger.warn(`Iphone ${Sn} no longer selected. Removing from priority device list.`)):this.callLogger.warn(`Iphone ${Sn} manually selected by user.`))},this.maybeAutoSetPreferredDevice=()=>{this.getPreferredCameraId()?this.callLogger.info("Preferred camera is already set. No need to auto-set one."):(this.callLogger.warn("No preferred camera currently set. If current camera still in use in 10s, we will automatically set it as the preferred camera"),setTimeout(()=>{var Xt;const Sn=(Xt=this.getPreferredDevice(o.lW.Camera))===null||Xt===void 0?void 0:Xt.id,Yn=this.getPreferredCameraId();!this.isCameraEnabled||!Sn||Yn||(this.callLogger.info(`Setting preferred camera to ${Sn}`),this.setPreferredDevice(Sn,o.lW.Camera))},1e4))},this.getPreferredCameraId=()=>this.prefs.deviceIdPriorities.camera[0],this.detectBluetoothDevices=()=>{var Ut,Xt;const Sn=(Ut=this.devices[o.lW.Microphone])===null||Ut===void 0?void 0:Ut[0],Yn=(Xt=this.devices[o.Q4])===null||Xt===void 0?void 0:Xt[0];if(!Sn||!Yn)return;const Qe=["bluetooth","hands-free","airpods","wireless"],yt=l(gt=>(0,g.A)(Qe,Ue=>gt==null?void 0:gt.toLowerCase().includes(Ue)),"checkDeviceLabel"),Ht=yt(Sn.label),it=yt(Yn.label),st=Sn.groupId===Yn.groupId;Ae.A.publish({type:ce.lx.BluetoothDevices,update:{isMicrophoneBluetooth:Ht,isSpeakerBluetooth:it,isMicrophoneAndSpeakerOnSameDevice:st}})},this.shouldDeprioritizeDevice=Ut=>{let{device:Xt,isPreferredDevice:Sn}=Ut;if(Sn)return!1;let Yn=!1;if(Xt.type!==o.Q4){const Qe=Xt.label;(0,y.cX)()&&Qe&&(Yn=!!/iphone/.test(Qe.toLowerCase()))}return Yn&&(this.continuityCameraDeviceIds[Xt.type]=Xt.id),Yn};var se=this;this.refreshMediaDeviceInfo=(0,t.coroutine)(function*(){se.audioInputDevices=yield se.audioVideoFacade.listAudioInputDevices(!0),se.audioOutputDevices=yield se.audioVideoFacade.listAudioOutputDevices(),se.videoInputDevices=yield se.audioVideoFacade.listVideoInputDevices(),se.enumerateDevices()});var ge=this;this.handleAudioInitError=function(){var Ut=(0,t.coroutine)(function*(Xt){let Sn=!ge.hasRetriedAudioInit;switch(Xt.name){case"NotReadableError":ge.callLogger.warn("Either a hardware error (such as an OS/program/webpage lock) is preventing access to the microphone or the selected device is no longer available. Trying again");break;case"NotFoundError":ge.callLogger.warn("No audio input devices are available. Trying again");break;case"OverconstrainedError":ge.callLogger.warn("The specified constraints resulted in no devices being found. Trying again");break;case"PermissionDeniedError":ge.callLogger.error("User denied permission to access microphone.");break;case"TypeError":ge.callLogger.error("An unexpected TypeError occured during audio input initialization",Xt),Sn=!1;break;case"GetUserMediaError":ge.callLogger.error("An unexpected GetUserMediaError occured during audio input initialization",Xt),Sn=!1;break;default:ge.callLogger.error("Unknown error during audio input initialization"),Sn=!1}const Yn=Xt instanceof s.Ll;Yn||ge.observer.onSelfPermissionUpdated(!1,o.lW.Microphone),Sn?(ge.hasRetriedAudioInit=!0,ge.callLogger.info("Retrying audio input initialization"),yield ge.refreshMediaDeviceInfo(),yield ge.updateMicrophone(),yield ge.updateSpeaker()):(Yn&&ge.observer.onSelfPermissionUpdated(!0,o.lW.Microphone),ge.callLogger.error("Audio input initialization failed. Not retrying"))});return function(Xt){return Ut.apply(this,arguments)}}(),this.handleVoiceFocusInsufficientResourcesEvent=(0,t.coroutine)(function*(){}),this.setVideoTransformDeviceRefs=Ut=>{let{transformDevice:Xt,processors:Sn}=Ut;this.currentVideoTransformDevice=Xt,this.currentVideoFrameProcessors=Sn,(0,P.Y)({name:P.R1.VideoTransformDevice,ref:Xt})},this.setupVideoBackgroundFrameProcessor=Ut=>{let{processor:Xt,backgroundEffect:Sn}=Ut;var Yn;this.clearVideoBackgroundFrameProcessor(),!K&&(this.currentVideoFrameProcessor=Xt,this.currentVideoFrameProcessorObserver=new G({backgroundEffect:Sn}),(Yn=this.currentVideoFrameProcessor)===null||Yn===void 0||Yn.addObserver(this.currentVideoFrameProcessorObserver),(0,P.Y)({name:P.R1.VideoFrameProcessor,ref:Xt}))},this.clearVideoBackgroundFrameProcessor=()=>{K||this.currentVideoFrameProcessor&&this.currentVideoFrameProcessorObserver&&(this.currentVideoFrameProcessor.removeObserver(this.currentVideoFrameProcessorObserver),this.currentVideoFrameProcessorObserver=void 0,this.currentVideoFrameProcessor=void 0)};var ot=this;this.clearVideoTransformDeviceRefs=(0,t.coroutine)(function*(){ot.clearVideoBackgroundFrameProcessor(),ot.currentVideoFrameProcessors&&(ot.currentVideoFrameProcessors.forEach(Ut=>{Ut.destroy()}),ot.currentVideoFrameProcessors.length=0,ot.currentVideoFrameProcessors=void 0),ot.currentVideoTransformDevice&&(yield ot.currentVideoTransformDevice.stop(),ot.currentVideoTransformDevice=void 0)});var nn=this;this.initAudioInput=function(){var Ut=(0,t.coroutine)(function*(Xt){Xt&&(yield nn.audioVideoFacade.startAudioInput(Xt))});return function(Xt){return Ut.apply(this,arguments)}}();var qt=this;this.initVideoInput=function(){var Ut=(0,t.coroutine)(function*(Xt){Xt&&(yield qt.audioVideoFacade.startVideoInput(Xt),qt.recordCameraResolution())});return function(Xt){return Ut.apply(this,arguments)}}(),this.initNullMicrophone=()=>M.S.resolve(),this.recordCameraResolution=()=>{this.cameraMetricsTimeout=setTimeout(()=>{try{var Ut,Xt,Sn,Yn,Qe;if(this.isShuttingDown||!((Ut=this.audioVideoFacade)===null||Ut===void 0?void 0:Ut.hasStartedLocalVideoTile()))return;const Ht=this.audioVideoFacade.getLocalVideoTile(),it=(Xt=Ht==null?void 0:Ht.state())===null||Xt===void 0?void 0:Xt.boundVideoStream,st=it==null?void 0:it.getVideoTracks()[0];if(st instanceof CanvasCaptureMediaStreamTrack){Ae.A.publish({type:ce.lx.CameraResolution,update:{isCanvasStream:!0}});return}const gt=st==null?void 0:st.getSettings(),Ue=st==null?void 0:st.getCapabilities(),Bt=gt==null?void 0:gt.width,zt=gt==null?void 0:gt.height,En=gt==null?void 0:gt.frameRate,tn=Ue==null||(Sn=Ue.width)===null||Sn===void 0?void 0:Sn.max,jt=Ue==null||(Yn=Ue.height)===null||Yn===void 0?void 0:Yn.max,on=Ue==null||(Qe=Ue.frameRate)===null||Qe===void 0?void 0:Qe.max;tn&&jt&&Ae.A.publish({type:ce.lx.CameraResolution,update:{cameraWidth:Bt,cameraHeight:zt,cameraFrameRate:En,cameraMaxWidth:tn,cameraMaxHeight:jt,cameraMaxFrameRate:on,isCanvasStream:!1}})}catch{}},5e3)},this.callLogger.info("Using device manager v2"),this.updateMicrophone=R(this,this.updateMicrophone,{skipIntermediatePendingRuns:!1}),this.updateSpeaker=R(this,this.updateSpeaker,{skipIntermediatePendingRuns:!1}),this.updateCamera=R(this,this.updateCamera,{skipIntermediatePendingRuns:!1}),this.handleCameraChanges=R(this,this.handleCameraChanges,{skipIntermediatePendingRuns:!1}),this.audioElementErrorHandler=this.audioElementErrorHandler.bind(this),this.audioVideoFacade.addDeviceChangeObserver(this),this.prefs=(0,de.Bh)(),this.addAudioElementErrorHandler(),this.audioLevelMonitor=new S,this.voiceFocusManager&&this.callLogger.info(`Voice Focus available?: ${this.voiceFocusManager.isAvailable()}`),this.prefs.audio&&this.callLogger.info(`Noise suppression setting: ${this.prefs.audio.enableNoiseSuppression}`),this.defaultVideoProcessorOptions={filterCPUUtilization:ae,reportingPeriodMillis:te,logger:this.chimeLogger};const{huddleEventsTrace:vn}=(0,I.A)().getAllTraceHandlers();this.huddleEventsTrace=vn}},"DeviceManager");var q=e(877500),ie;(function(At){At.START_PREVIEW="start-preview",At.STOP_PREVIEW="stop-preview",At.ENABLE="enable",At.DISABLE="disable"})(ie||(ie={}));const Te=1e4,Me=30,ke="medium",Pe=!0,Ie=50;let X=l(class{shutdown(){var b=this;return(0,t.coroutine)(function*(){var z,me,pe;if(b.isShuttingDown=!0,b.voiceFocusDevice){var ct;yield b.voiceFocusDevice.stop(),yield(ct=b.voiceFocusManager)===null||ct===void 0?void 0:ct.tearDown(),b.voiceFocusDevice=void 0}b.audioVideoFacade.removeDeviceChangeObserver(b),b.audioVideoFacade.stopLocalVideoTile(),yield b.audioVideoFacade.stopVideoInput(),yield b.audioVideoFacade.stopAudioInput(),b.audioVideoFacade.unbindAudioElement(),b.removeAudioElementErrorHandler(),yield b.clearVideoTransformDeviceRefs(),b.audioInputDeviceRefreshTimer&&(clearTimeout(b.audioInputDeviceRefreshTimer),b.audioInputDeviceRefreshTimer=null),b.videoInputDeviceRefreshTimer&&(clearTimeout(b.videoInputDeviceRefreshTimer),b.videoInputDeviceRefreshTimer=null),b.cameraMetricsTimeout&&(clearTimeout(b.cameraMetricsTimeout),b.cameraMetricsTimeout=null),yield(me=(z=(0,s._R)())===null||z===void 0?void 0:z.getAudioContext())===null||me===void 0?void 0:me.suspend(),b.callLogger.info("Audio context suspended"),(pe=b.audioLevelMonitor)===null||pe===void 0||pe.stop(),delete b.audioLevelMonitor,b.callLogger.info("Device manager shutdown complete")})()}init(){var b=this;return(0,t.coroutine)(function*(){yield b.refreshMediaDeviceInfo(),yield b.determineInitialMicrophonePermissionState(),b.enumerateDevices(),b.logDevices(),yield b.updateMicrophone(),yield b.updateSpeaker(),b.isCameraEnabled&&(yield b.updateCamera())})()}determineInitialMicrophonePermissionState(){var b=this;return(0,t.coroutine)(function*(){if((0,y.y3)()){yield b.determineInitialMicrophonePermissionStateForDesktop();return}yield b.determineInitialMicrophonePermissionStateForBrowser()})()}determineInitialMicrophonePermissionStateForBrowser(){var b=this;return(0,t.coroutine)(function*(){const{status:z}=re.Ay.canAccessMediaResource(i.mT.MICROPHONE);let me;(z===o.eJ.Prompt||z===o.eJ.NotDetermined||z===o.eJ.Unknown)&&(yield b.audioVideoFacade.listAudioInputDevices(!0),me=re.Ay.canAccessMediaResource(i.mT.MICROPHONE).status),(z===o.eJ.Denied||me===o.eJ.Denied)&&(b.observer.onBrowserMediaDeviceAccessDenied(i.mT.MICROPHONE),b.callLogger.warn("setting microphone to muted as microphone permission was not available during initialization"),b.isStartMutedBarrierActive=!0)})()}determineInitialMicrophonePermissionStateForDesktop(){var b=this;return(0,t.coroutine)(function*(){const z=yield b.maybeCheckSystemMediaAccess(i.mT.MICROPHONE);(0,y.j9)()||(0,y.uF)()&&!b.options.useGetMediaAccessCheckForWindows||z&&(z==null?void 0:z.status)!==o.eJ.Granted&&(b.callLogger.warn("setting microphone to muted as microphone permission was not available during initialization"),b.isStartMutedBarrierActive=!0)})()}setAGC(b){var z=this;return(0,t.coroutine)(function*(){z.prefs.audio&&z.prefs.audio.enableAGC!==b&&(z.callLogger.info(`AGC setting changed: ${b}`),z.prefs.audio.enableAGC=b,(0,de.i4)(z.prefs),yield z.updateMicrophone())})()}setPreferredDevice(b,z){var me=this;return(0,t.coroutine)(function*(){switch((0,Z.cT)(b,z),z){case o.lW.Microphone:yield me.updateMicrophone();break;case o.Q4:yield me.updateSpeaker();break;case o.lW.Camera:me.isCameraEnabled&&(yield me.updateCamera());break;default:break}})()}setPreferredCameraDeviceForPreview(b){var z=this;return(0,t.coroutine)(function*(){z.enumerateDevices(),yield z.updateCamera()})()}setVideoBackgroundEffect(b){let{effect:z,effectBgKey:me}=b;var pe=this;return(0,t.coroutine)(function*(){pe.prefs.video&&(pe.callLogger.info(`Video background effect changed: ${z}`),pe.prefs.video.effect=z,pe.prefs.video.effectBgKey=me,(0,de.i4)(pe.prefs),pe.isCameraEnabled&&(yield pe.updateCamera()))})()}setNoiseSuppression(b){var z=this;return(0,t.coroutine)(function*(){z.prefs.audio&&z.prefs.audio.enableNoiseSuppression!==b&&(z.callLogger.info(`Noise suppression setting changed: ${b}`),z.prefs.audio.enableNoiseSuppression=b,(0,de.i4)(z.prefs),yield z.updateMicrophone())})()}setStartMutedBarrier(b){var z=this;return(0,t.coroutine)(function*(){z.isStartMutedBarrierActive=b})()}setMicrophone(b){var z=this;return(0,t.coroutine)(function*(){var me;if(z.voiceFocusManager&&(yield z.voiceFocusManager.setMute(b)),!b){var pe;z.audioVideoFacade.realtimeMuteLocalAudio(),(pe=z.huddleEventsTrace)===null||pe===void 0||pe.update({name:O.p.MICROPHONE,type:O.G.STOP});return}z.isStartMutedBarrierActive&&(z.callLogger.info("Releasing start muted barrier"),z.isStartMutedBarrierActive=!1),z.audioVideoFacade.realtimeUnmuteLocalAudio(),(me=z.huddleEventsTrace)===null||me===void 0||me.update({name:O.p.MICROPHONE,type:O.G.START})})()}requestPreviewStreamForDeviceId(b,z,me){z===o.lW.Camera&&this.handleCameraChanges({type:ie.START_PREVIEW,deviceId:b,videoElement:me})}stopVideoPreviewForVideoInput(b){this.handleCameraChanges({type:ie.STOP_PREVIEW,videoElement:b||this.cameraPreviewVideoElement})}setCamera(b){b!==this.isCameraEnabled&&(this.isCameraEnabled=b,this.isCameraEnabled?(this.handleCameraChanges({type:ie.ENABLE}),this.maybeCheckSystemMediaAccess(i.mT.CAMERA)):this.handleCameraChanges({type:ie.DISABLE}))}setCameraQuality(b,z,me,pe){this.audioVideoFacade.chooseVideoInputQuality(b,z,me),this.audioVideoFacade.setVideoMaxBandwidthKbps(pe)}audioVideoDidStart(){return(0,t.coroutine)(function*(){})()}localVideoTileDidUpdate(b){(!b.boundVideoStream||!b.boundVideoStream.active)&&this.callLogger.info(`DeviceManager::localVideoTileDidUpdate ${b.boundVideoStream?"boundVideoStream is not active":"there is no boundVideoStream"}`),!b.isContent&&!this.isCameraEnabled?this.waitForCameraReady.reject(new Error("Camera disabled")):this.waitForCameraReady.resolve()}maybeBindAudioOutputElement(){var b=this;return(0,t.coroutine)(function*(){if(!b.isAudioOutputElementBound&&b.audioOutputElement){try{yield b.audioVideoFacade.bindAudioElement(b.audioOutputElement)}catch(z){b.callLogger.info(`bindAudioElement failed: error: ${z.name}, message: ${z.message}`);return}b.isAudioOutputElementBound=!0}})()}maybeCheckSystemMediaAccess(b){var z=this;return(0,t.coroutine)(function*(){if(!(0,y.y3)()){const{status:me}=re.Ay.canAccessMediaResource(b);if(me===o.eJ.Granted)return{isAvailable:!1,status:o.eJ.Granted}}if((0,y.cX)()||z.options.useGetMediaAccessCheckForWindows&&(0,y.uF)())try{const me=re.Ay.canAccessMediaResource(b);if(z.callLogger.info(`DeviceManager::getMediaAccessStatus ${b} electron API available: ${me.isAvailable} and status: ${me.status}`),!me.isAvailable)return{isAvailable:!1,status:o.eJ.NotDetermined};if(me.status===o.eJ.Granted)return z.observer.onDeviceAccessApproved(b),me;let pe;return me.status===o.eJ.NotDetermined&&(pe=b==="screen"?null:yield re.Ay.requestMediaAccess(b),z.callLogger.info(`DeviceManager::askForMediaAccess ${b} electron API available: ${!!(pe!=null&&pe.isAvailable)} and isConsentGranted: ${pe==null?void 0:pe.isGranted}`),b!=="screen"&&(pe!=null&&pe.isGranted))?(z.observer.onDeviceAccessApproved(b),{status:o.eJ.Granted,isAvailable:!0}):((me.status===o.eJ.Denied||pe&&!pe.isGranted)&&(z.micPermissionDenied=!0,z.observer.onCheckSystemMediaAccess(b)),me)}catch(me){z.callLogger.info(`DeviceManager::Error retrieving system access for ${b}: ${me}`)}return{isAvailable:!1,status:o.eJ.NotDetermined}})()}audioInputsChanged(){this.callLogger.info("DeviceManager::audioInputsChanged"),this.logDevices([o.lW.Microphone]),this.updateMicrophone(),this.observer.onClearNoMediaInput(i.mT.MICROPHONE)}audioInputMuteStateChanged(b,z){this.callLogger.info(`DeviceManager::audioInputMuteStateChanged: device: ${b}, ${z?"muted":"unmuted"}`)}audioInputStreamEnded(b){var z;b&&(this.callLogger.info("DeviceManager::audioInputStreamEnded"),((z=(0,Z.Nj)(o.lW.Microphone))===null||z===void 0?void 0:z.id)===b&&(this.callLogger.warn("Call audio stream ended unexpectedly"),this.observer.onSetNoMediaInput(i.mT.MICROPHONE)))}audioOutputsChanged(){this.callLogger.info("DeviceManager::audioOutputsChanged"),this.updateSpeaker(),this.logDevices([o.Q4]),this.observer.onClearNoAudioOutput(i.NS.AUDIO_ELEMENT_ERROR)}videoInputsChanged(){const b=this.getPreferredDevice(o.lW.Camera);this.callLogger.info("DeviceManager::videoInputsChanged"),this.logDevices([o.lW.Camera]),!b&&this.isCameraEnabled?(this.callLogger.info("DeviceManager::triggering camera stop due to active camera no longer being available"),this.observer.onSetNoMediaInput(i.mT.CAMERA)):this.observer.onClearNoMediaInput(i.mT.CAMERA)}videoInputStreamEnded(b){var z=this;return(0,t.coroutine)(function*(){b&&(z.callLogger.info("DeviceManager::videoInputStreamEnded"),z.observer.onSetNoMediaInput(i.mT.CAMERA))})()}logDevices(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$.LL;const z=(0,Z.T5)();if(!z){this.callLogger.error("No devices found");return}(0,$.my)(this.callLogger,z,b)}getPreferredDevice(b){return(0,Z.Nj)(b)}enumerateDevices(){const b=(0,Z.T5)();if(!b){this.callLogger.error("No devices found in v2 device manager");return}this.callLogger.info("V2 devices found. Updating device store"),this.observer.onDevicesUpdated(b)}handleCameraChanges(b){var z=this;return(0,t.coroutine)(function*(){switch(b.type){case ie.START_PREVIEW:yield z.runCameraActivityStartPreview(b);break;case ie.STOP_PREVIEW:yield z.runCameraActivityStopPreview(b);break;case ie.ENABLE:yield z.runCameraActivityEnable();break;case ie.DISABLE:yield z.runCameraActivityDisable();break;default:break}})()}updateMicrophone(){var b=this;return(0,t.coroutine)(function*(){const z=b.getPreferredDevice(o.lW.Microphone);if(!z){b.callLogger.info("No audio input device found");return}const{id:me,label:pe}=z;if(b.micPermissionDenied&&(b.callLogger.error("Microphone permission is denied. The user must grant permissions and fully quit and restart Slack to join the Huddle"),b.hasRetriedAudioInit))return;b.callLogger.info(`Selected audio input device: ${z.label||z.id}, deviceId: ${me}, deviceLabel: ${pe}`);const ut={autoGainControl:b.prefs.audio?b.prefs.audio.enableAGC:!0,deviceId:me};let $e=!0;if(b.voiceFocusManager&&b.voiceFocusManager.isAvailable()&&(b.prefs.audio&&b.prefs.audio.enableNoiseSuppression)){if(b.voiceFocusDevice||(b.voiceFocusDevice=yield b.voiceFocusManager.getTransformDevice()),b.voiceFocusDevice){const k=yield b.voiceFocusDevice.chooseNewInnerDevice(ut);b.voiceFocusDevice=k}b.voiceFocusDevice||($e=!1)}else $e=!1;b.voiceFocusDevice&&(0,P.Y)({name:P.R1.VoiceFocusDevice,ref:b.voiceFocusDevice}),b.callLogger.info("Noise suppression:",$e?"enabled":"disabled");try{if(b.isStartMutedBarrierActive&&(b.callLogger.info("Start muted barrier active"),b.audioVideoFacade.realtimeMuteLocalAudio()),$e)if(b.voiceFocusDevice)yield b.initAudioInput(b.voiceFocusDevice);else throw new Error("Trying noise suppression with no voice focus transform device");else navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints&&Object.prototype.hasOwnProperty.call(navigator.mediaDevices.getSupportedConstraints(),"noiseSuppression")&&(ut.noiseSuppression=!0),yield b.initAudioInput(ut)}catch(k){b.callLogger.error(`chooseAudioInputDevice failed: error: ${k.name}, message: ${k.message}`),yield b.handleAudioInitError(k);return}b.hasRetriedAudioInit&&(b.callLogger.info("Microphone initialized successfully after retry"),b.hasRetriedAudioInit=!1),b.initAudioAnalyserForPreview(),b.setupAudioInputTrackHandler(),!(yield b.isMediaPermissionDeniedOnWindows(i.mT.MICROPHONE))&&b.observer.onSelfPermissionUpdated(b.micPermissionDenied,o.lW.Microphone)})()}updateSpeaker(){var b=this;return(0,t.coroutine)(function*(){const z=b.getPreferredDevice(o.Q4);if(!z){b.callLogger.info("No audio output device found");return}const{id:me,label:pe}=z;b.callLogger.info(`Selected audio output device id: ${z.label||z.id}, deviceId: ${me}, deviceLabel: ${pe}`),yield b.audioVideoFacade.chooseAudioOutput(me),b.observer.onOutputDeviceChanged({id:z.id,type:o.Q4}),(0,Z.i_)(me,o.Q4)})()}updateCamera(){var b=this;return(0,t.coroutine)(function*(){const z=b.getPreferredDevice(o.lW.Camera);if(!z){b.callLogger.info("No video input device found");return}b.callLogger.info(`Selected video input device id: ${z.label||z.id}`);try{yield b.setCameraVideoInputDevice(z)}catch(me){b.callLogger.info(`chooseVideoInputDevice failed: error: ${me.name}, message: ${me.message}`),me instanceof s.Ll?b.observer.onSelfPermissionUpdated(!0,o.lW.Camera):b.observer.onSelfPermissionUpdated(!1,o.lW.Camera);return}(yield b.isMediaPermissionDeniedOnWindows(i.mT.CAMERA))||b.observer.onSelfPermissionUpdated(!1,o.lW.Camera)})()}setCameraVideoInputDevice(b){var z=this;return(0,t.coroutine)(function*(){if(yield z.clearVideoTransformDeviceRefs(),z.options.backgroundVideoFilteringSetting===o.uT.NONE){yield z.initVideoInput(b.id);return}switch(z.prefs.video.effect){case oe.t.Blur:{yield z.setCameraVideoInputDeviceWithBackgroundBlurFilter(b);break}case oe.t.Background:{z.options.backgroundVideoFilteringSetting!==o.uT.Both?yield z.initVideoInput(b.id):yield z.setCameraVideoInputDeviceWithBackgroundReplacementImageFilter({videoDevice:b,selectedBackgroundImageKey:z.prefs.video.effectBgKey});break}default:{yield z.initVideoInput(b.id);break}}})()}setCameraVideoInputDeviceWithBackgroundReplacementImageFilter(b){let{videoDevice:z,selectedBackgroundImageKey:me}=b;var pe=this;return(0,t.coroutine)(function*(){const ct=z.label||z.id;if(me===void 0){pe.callLogger.info(`No background image key provided id: ${ct}`),yield pe.initVideoInput(z.id);return}const ut=(0,s.jq)(),$e=(0,s.px)(),k=[];if(!(yield s.i3.isSupported(pe.chimeLogger))&&Pe)return pe.handleErrorApplyVideoEffects("VideoFxProcessor is not supported on host device. Defaulting to non image replaced background",z);if(!(yield $e.isSupported())&&!Pe)return pe.handleErrorApplyVideoEffects("BackgroundReplacementVideoFrameProcessor is not supported on host device. Defaulting to non image replaced background",z);const ge=w.g.find(Ut=>Ut.key===me);if(ge===void 0)return pe.handleErrorApplyVideoEffects("Image could not be found, switching to default input for device",z);pe.callLogger.info(`Enabling video input device with background image filter id: ${ct}`);const nn=yield(yield fetch(ge.url)).blob();if(pe.isShuttingDown)return;const qt={...pe.defaultVideoProcessorOptions,imageBlob:nn};if(Pe){if(pe.videoFxConfig={backgroundBlur:{isEnabled:!1,strength:ke},backgroundReplacement:{isEnabled:!0,backgroundImageURL:ge.url,defaultColor:void 0}},pe.videoFxProcessor=yield s.i3.create(pe.chimeLogger,pe.videoFxConfig,Ie),!pe.videoFxProcessor)return pe.handleErrorApplyVideoEffects("VideoFxProcessor could not be created defaulting to normal input for device",z);pe.callLogger.info(`VideoFxProcessor background image replacement enabled for device id: ${ct}`),k.push(pe.videoFxProcessor)}else{const Ut=yield $e.create(void 0,qt);if(Ut)pe.setupVideoBackgroundFrameProcessor({processor:Ut,backgroundEffect:_e.Image}),k.push(Ut);else return pe.handleErrorApplyVideoEffects("BackgroundReplacementVideoFrameProcessor could not be created defaulting to normal input for device",z)}pe.callLogger.info(`Enabling video input device with background image replacement id: ${ct}`);const vn=new ut(pe.chimeLogger,z.id,k);pe.setVideoTransformDeviceRefs({transformDevice:vn,processors:k}),yield pe.initVideoInput(vn),yield pe.cleanupTransformDevicesAndCameraIfShuttingdown()})()}handleErrorApplyVideoEffects(b,z){var me=this;return(0,t.coroutine)(function*(){const pe=z.label||z.id;me.callLogger.info(`${b}: ${pe}`),yield me.initVideoInput(z.id)})()}setCameraVideoInputDeviceWithBackgroundBlurFilter(b){var z=this;return(0,t.coroutine)(function*(){const me=(0,s.jq)(),pe=(0,s.kM)(),ct=b.label||b.id;z.callLogger.info(`Enabling video input device with background blur filter id: ${ct}`);const ut=[];if(Pe){if(!(yield s.i3.isSupported(z.chimeLogger)))return z.handleErrorApplyVideoEffects("VideoFxProcessor is not supported on host device. Defaulting to non blurred background",b);if(z.videoFxConfig={backgroundBlur:{isEnabled:!0,strength:ke},backgroundReplacement:{isEnabled:!1,backgroundImageURL:"",defaultColor:void 0}},z.videoFxProcessor=yield s.i3.create(z.chimeLogger,z.videoFxConfig,Ie),!z.videoFxProcessor)return z.handleErrorApplyVideoEffects("VideoFxProcessor could not be created defaulting to normal input for device",b);z.callLogger.info(`VideoFxProcessor background blur enabled for device id: ${ct}`),ut.push(z.videoFxProcessor)}else{if(!(yield pe.isSupported()))return z.handleErrorApplyVideoEffects("BackgroundBlurVideoFrameProcessor is not supported on host device. Defaulting to non blurred background",b);const k={...z.defaultVideoProcessorOptions,blurStrength:15},se=yield pe.create(void 0,k);if(!se)return z.handleErrorApplyVideoEffects("BackgroundBlurVideoFrameProcessor could not be created defaulting to normal input for device",b);z.setupVideoBackgroundFrameProcessor({processor:se,backgroundEffect:_e.Blur}),ut.push(se)}z.callLogger.info(`Enabling video input device with background blur filter id: ${ct}`);const $e=new me(z.chimeLogger,b.id,ut);z.setVideoTransformDeviceRefs({transformDevice:$e,processors:ut}),yield z.initVideoInput($e),yield z.cleanupTransformDevicesAndCameraIfShuttingdown()})()}cleanupTransformDevicesAndCameraIfShuttingdown(){var b=this;return(0,t.coroutine)(function*(){b.isShuttingDown&&(b.callLogger.info("Cleaning up background video frame processor and video input because huddle has ended"),yield b.audioVideoFacade.stopVideoInput(),yield b.clearVideoTransformDeviceRefs())})()}initVideoInputDevices(){var b=this;return(0,t.coroutine)(function*(){const me=(yield b.audioVideoFacade.listVideoInputDevices()).length>0;return me||b.observer.onSelfPermissionUpdated(!0,o.lW.Camera),b.prefs=(0,de.Bh)(),b.enumerateDevices(),me})()}runCameraActivityStartPreview(b){var z=this;return(0,t.coroutine)(function*(){const me=b.deviceId,pe=b.videoElement;!me||!pe||(z.cameraPreviewVideoElement=pe,yield z.setPreferredCameraDeviceForPreview(me),yield z.startCameraPreview())})()}runCameraActivityStopPreview(b){var z=this;return(0,t.coroutine)(function*(){const me=b.videoElement;me&&(me!==z.cameraPreviewVideoElement&&z.callLogger.warn("Mismatch in preview video element"),z.audioVideoFacade.hasStartedLocalVideoTile()?z.detachStreamFromCameraPreview():z.stopCameraPreview(),delete z.cameraPreviewVideoElement)})()}runCameraActivityEnable(){var b=this;return(0,t.coroutine)(function*(){var z;!b.audioVideoFacade.hasStartedLocalVideoTile()&&b.cameraPreviewVideoElement&&b.stopCameraPreview(),yield b.updateCamera(),b.audioVideoFacade.hasStartedLocalVideoTile()||(b.waitForCameraReady=(0,a.u)(),b.audioVideoFacade.startLocalVideoTile(),yield b.waitForCameraReady.catch(()=>{b.callLogger.info("Camera disabled before self video stream was properly bound. Explicitly disabling camera."),b.runCameraActivityDisable()})),b.attachStreamToCameraPreview(),(z=b.huddleEventsTrace)===null||z===void 0||z.update({name:O.p.VIDEO,type:O.G.START})})()}runCameraActivityDisable(){var b=this;return(0,t.coroutine)(function*(){var z;b.detachStreamFromCameraPreview(),yield b.audioVideoFacade.stopVideoInput(),b.audioVideoFacade.stopLocalVideoTile(),(z=b.huddleEventsTrace)===null||z===void 0||z.update({name:O.p.VIDEO,type:O.G.STOP}),b.cameraPreviewVideoElement&&(yield b.updateCamera(),yield b.startCameraPreview())})()}startCameraPreview(){var b=this;return(0,t.coroutine)(function*(){b.cameraPreviewVideoElement&&(b.waitForCameraReady=(0,a.u)(),b.audioVideoFacade.startVideoPreviewForVideoInput(b.cameraPreviewVideoElement),b.cameraPreviewVideoElement.addEventListener("canplay",z=>{b.waitForCameraReady.resolve()}),yield b.waitForCameraReady)})()}stopCameraPreview(){var b=this;return(0,t.coroutine)(function*(){b.cameraPreviewVideoElement&&(b.audioVideoFacade.stopVideoPreviewForVideoInput(b.cameraPreviewVideoElement),yield b.audioVideoFacade.stopVideoInput())})()}attachStreamToCameraPreview(){var b;if(!this.cameraPreviewVideoElement)return;const z=(b=this.audioVideoFacade.getLocalVideoTile())===null||b===void 0?void 0:b.state();z&&z.boundVideoStream&&s.xc.connectVideoStreamToVideoElement(z.boundVideoStream,this.cameraPreviewVideoElement,!0)}detachStreamFromCameraPreview(){this.cameraPreviewVideoElement&&s.xc.disconnectVideoStreamFromVideoElement(this.cameraPreviewVideoElement,!0)}addAudioElementErrorHandler(){this.audioOutputElement.addEventListener("error",this.audioElementErrorHandler)}removeAudioElementErrorHandler(){this.audioOutputElement.removeEventListener("error",this.audioElementErrorHandler)}audioElementErrorHandler(b){var z,me,pe,ct;const ut=((z=b.target)===null||z===void 0||(me=z.error)===null||me===void 0?void 0:me.code)||"unavailable",$e=((pe=b.target)===null||pe===void 0||(ct=pe.error)===null||ct===void 0?void 0:ct.message)||b.message;this.callLogger.warn(`HTML_AUDIO_ELEMENT_ERROR code: ${ut}, message: ${$e}`),this.observer.onSetNoAudioOutput(i.NS.AUDIO_ELEMENT_ERROR)}isMediaPermissionDeniedOnWindows(b){var z=this;return(0,t.coroutine)(function*(){if(z.options.useGetMediaAccessCheckForWindows&&(0,y.uF)()&&(0,y.dY)("4.9.0")){const me=yield z.maybeCheckSystemMediaAccess(b);if(me&&me.status==="denied")return!0}return!1})()}initAudioAnalyserForPreview(){const b=(0,s._R)().getAudioContext();if(!b){this.callLogger.warn("Unable to get AudioContext");return}b.resume();const z=this.audioVideoFacade.createAnalyserNodeForAudioInput();if(z){var me;const pe=new V(z);(me=this.audioLevelMonitor)===null||me===void 0||me.setPreviewAudioAnalyser(pe)}}setupAudioInputTrackHandler(){this.audioInputTrackHandler&&(this.callLogger.info("Tearing down previous Audio Input Track Handler"),this.audioInputTrackHandler.tearDown(),this.audioInputTrackHandler=void 0),this.callLogger.info("Setting up new audio input track handler"),this.audioInputTrackHandler=new ee(this.defaultDeviceController,this.observer,this.callLogger),this.audioInputTrackHandler.initialize()}constructor(b,z,me,pe,ct=!1,ut,$e,k){this.audioVideoFacade=b,this.audioOutputElement=z,this.observer=me,this.options=pe,this.isStartMutedBarrierActive=ct,this.chimeLogger=ut,this.defaultDeviceController=$e,this.voiceFocusManager=k,this.callLogger=(0,r.Jt)("DEVICES"),this.waitForCameraReady=(0,a.u)(),this.isAudioOutputElementBound=!1,this.videoFxConfig={backgroundBlur:{isEnabled:!1,strength:ke},backgroundReplacement:{isEnabled:!1,backgroundImageURL:"",defaultColor:void 0}},this.isShuttingDown=!1,this.cameraMetricsTimeout=null,this.micPermissionDenied=!1,this.hasRetriedAudioInit=!1;var se=this;this.refreshMediaDeviceInfo=(0,t.coroutine)(function*(){se.enumerateDevices()});var ge=this;this.handleAudioInitError=function(){var Ut=(0,t.coroutine)(function*(Xt){let Sn=!ge.hasRetriedAudioInit;switch(Xt.name){case"NotReadableError":ge.callLogger.warn("Either a hardware error (such as an OS/program/webpage lock) is preventing access to the microphone or the selected device is no longer available. Trying again");break;case"NotFoundError":ge.callLogger.warn("No audio input devices are available. Trying again");break;case"OverconstrainedError":ge.callLogger.warn("The specified constraints resulted in no devices being found. Trying again");break;case"PermissionDeniedError":ge.callLogger.error("User denied permission to access microphone.");break;case"TypeError":ge.callLogger.error("An unexpected TypeError occured during audio input initialization",Xt),Sn=!1;break;case"GetUserMediaError":ge.callLogger.error("An unexpected GetUserMediaError occured during audio input initialization",Xt),Sn=!1;break;default:ge.callLogger.error("Unknown error during audio input initialization"),Sn=!1}const Yn=Xt instanceof s.Ll;Yn||ge.observer.onSelfPermissionUpdated(!1,o.lW.Microphone),Sn?(ge.hasRetriedAudioInit=!0,ge.callLogger.info("Retrying audio input initialization"),yield ge.updateMicrophone(),yield ge.updateSpeaker()):(Yn&&ge.observer.onSelfPermissionUpdated(!0,o.lW.Microphone),ge.callLogger.error("Audio input initialization failed. Not retrying"))});return function(Xt){return Ut.apply(this,arguments)}}(),this.setVideoTransformDeviceRefs=Ut=>{let{transformDevice:Xt,processors:Sn}=Ut;this.currentVideoTransformDevice=Xt,this.currentVideoFrameProcessors=Sn,(0,P.Y)({name:P.R1.VideoTransformDevice,ref:Xt})},this.setupVideoBackgroundFrameProcessor=Ut=>{let{processor:Xt,backgroundEffect:Sn}=Ut;var Yn;this.clearVideoBackgroundFrameProcessor(),!Pe&&(this.currentVideoFrameProcessor=Xt,this.currentVideoFrameProcessorObserver=new G({backgroundEffect:Sn}),(Yn=this.currentVideoFrameProcessor)===null||Yn===void 0||Yn.addObserver(this.currentVideoFrameProcessorObserver),(0,P.Y)({name:P.R1.VideoFrameProcessor,ref:Xt}))},this.clearVideoBackgroundFrameProcessor=()=>{Pe||this.currentVideoFrameProcessor&&this.currentVideoFrameProcessorObserver&&(this.currentVideoFrameProcessor.removeObserver(this.currentVideoFrameProcessorObserver),this.currentVideoFrameProcessorObserver=void 0,this.currentVideoFrameProcessor=void 0)};var ot=this;this.clearVideoTransformDeviceRefs=(0,t.coroutine)(function*(){ot.clearVideoBackgroundFrameProcessor(),ot.currentVideoFrameProcessors&&(ot.currentVideoFrameProcessors.forEach(Ut=>{Ut.destroy()}),ot.currentVideoFrameProcessors.length=0,ot.currentVideoFrameProcessors=void 0),ot.currentVideoTransformDevice&&(yield ot.currentVideoTransformDevice.stop(),ot.currentVideoTransformDevice=void 0)});var nn=this;this.initAudioInput=function(){var Ut=(0,t.coroutine)(function*(Xt){Xt&&(yield nn.audioVideoFacade.startAudioInput(Xt))});return function(Xt){return Ut.apply(this,arguments)}}();var qt=this;this.initVideoInput=function(){var Ut=(0,t.coroutine)(function*(Xt){if(!Xt)return;yield qt.audioVideoFacade.startVideoInput(Xt),qt.recordCameraResolution();const Sn=(0,q.A)(Xt,"device",Xt);typeof Sn=="string"&&(0,Z.i_)(Sn,o.lW.Camera)});return function(Xt){return Ut.apply(this,arguments)}}(),this.recordCameraResolution=()=>{this.cameraMetricsTimeout=setTimeout(()=>{try{var Ut,Xt,Sn,Yn,Qe;if(this.isShuttingDown||!((Ut=this.audioVideoFacade)===null||Ut===void 0?void 0:Ut.hasStartedLocalVideoTile()))return;const Ht=this.audioVideoFacade.getLocalVideoTile(),it=(Xt=Ht==null?void 0:Ht.state())===null||Xt===void 0?void 0:Xt.boundVideoStream,st=it==null?void 0:it.getVideoTracks()[0];if(st instanceof CanvasCaptureMediaStreamTrack){Ae.A.publish({type:ce.lx.CameraResolution,update:{isCanvasStream:!0}});return}const gt=st==null?void 0:st.getSettings(),Ue=st==null?void 0:st.getCapabilities(),Bt=gt==null?void 0:gt.width,zt=gt==null?void 0:gt.height,En=gt==null?void 0:gt.frameRate,tn=Ue==null||(Sn=Ue.width)===null||Sn===void 0?void 0:Sn.max,jt=Ue==null||(Yn=Ue.height)===null||Yn===void 0?void 0:Yn.max,on=Ue==null||(Qe=Ue.frameRate)===null||Qe===void 0?void 0:Qe.max;tn&&jt&&Ae.A.publish({type:ce.lx.CameraResolution,update:{cameraWidth:Bt,cameraHeight:zt,cameraFrameRate:En,cameraMaxWidth:tn,cameraMaxHeight:jt,cameraMaxFrameRate:on,isCanvasStream:!1}})}catch{}},5e3)},this.callLogger.info("Using device manager v2"),this.updateMicrophone=R(this,this.updateMicrophone,{skipIntermediatePendingRuns:!1}),this.updateSpeaker=R(this,this.updateSpeaker,{skipIntermediatePendingRuns:!1}),this.updateCamera=R(this,this.updateCamera,{skipIntermediatePendingRuns:!1}),this.handleCameraChanges=R(this,this.handleCameraChanges,{skipIntermediatePendingRuns:!1}),this.audioElementErrorHandler=this.audioElementErrorHandler.bind(this),this.audioVideoFacade.addDeviceChangeObserver(this),this.prefs=(0,de.Bh)(),this.addAudioElementErrorHandler(),this.audioLevelMonitor=new S,this.voiceFocusManager&&this.callLogger.info(`Voice Focus available?: ${this.voiceFocusManager.isAvailable()}`),this.prefs.audio&&this.callLogger.info(`Noise suppression setting: ${this.prefs.audio.enableNoiseSuppression}`),this.defaultVideoProcessorOptions={filterCPUUtilization:Me,reportingPeriodMillis:Te,logger:this.chimeLogger};const{huddleEventsTrace:vn}=(0,I.A)().getAllTraceHandlers();this.huddleEventsTrace=vn}},"DeviceManager");var ne=e(270868),fe=e(444060),be=e(147089);let Be=l(class{constructor(b,z,me){this.sequenceNumber=b,this.message=z,this.timestampMs=me}},"MeetingEvent"),We=l(class po{getEventCaptureSize(){return this.eventCapture.length}startEventPublishScheduler(b){var z=this;this.intervalScheduler.start((0,t.coroutine)(function*(){if(z.getEventCaptureSize()===0)return;const me=z.eventCapture.slice(0,b);try{z.postEvents(me),z.eventCapture=z.eventCapture.slice(me.length)}catch(pe){z.log.error(pe.message)}}))}stop(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.stopped||(this.intervalScheduler.stop(),this.postEvents(this.eventCapture,b,!0),this.eventCapture=[],this.stopped=!0,this.observer=void 0)}logEvent(b,z){const{meetingHistory:me,...pe}=z;try{const ct=JSON.stringify({name:b,attributes:pe});this.eventCapture.push(new Be(this.sequenceNumber,ct,Date.now())),this.sequenceNumber+=1}catch(ct){this.log.error(ct.message)}}postEvents(b){let z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var pe;b.length===0&&!z&&!me||(pe=this.observer)===null||pe===void 0||pe.onMeetingEvents(this.meetingId,this.mediaRegion,this.attendeeId,this.callId,b,z,me)}constructor(b,z,me,pe,ct,ut=po.DEFAULT_BATCH_SIZE,$e=po.DEFAULT_INTERVAL_MS){this.observer=b,this.meetingId=z,this.mediaRegion=me,this.attendeeId=pe,this.callId=ct,this.batchSize=ut,this.intervalMs=$e,this.eventCapture=[],this.sequenceNumber=0,this.log=(0,r.tZ)("MEETING-EVENT-LOGGER"),this.stopped=!1,this.intervalScheduler=new fe.A(this.intervalMs),this.startEventPublishScheduler(this.batchSize);var k=this;(0,be.A)((0,t.coroutine)(function*(){k.stop(!0)}))}},"MeetingEventLogger");We.DEFAULT_BATCH_SIZE=100,We.DEFAULT_INTERVAL_MS=65*60*1e3;var Re=e(54930),ve=e(919758),xe=e(683669),He=e(926017),je=e(246673);const Ke=1e4,ht=3e4;class dt{observe(b){this.connections.push(b),this.intervalHandle||(this.intervalHandle=window.setInterval(()=>{this.collect()},this.collectionIntervalMs))}stopObserving(b){remove(this.connections,b),this.connections.length===0&&clearInterval(this.intervalHandle)}collect(){var b=this;this.connections.forEach(function(){var z=_bluebirdCoroutine(function*(me){const pe=me.getPeerConnection();if(!pe)return;const ct=Ve(yield pe.getStats());Ge(me,ct);const ut={...pt(ct),send:ct.sendTracks.map($e=>Qt($e,ct)),recv:ct.recvTracks.map($e=>({...Nt($e,ct),peerId:me.getPeerIdFromRemoteStreamId(ct.trackIdToStreamId[$e.id])}))};b.observer.onStats(ut)});return function(me){return z.apply(this,arguments)}}())}constructor(b,z=Ke){this.observer=b,this.collectionIntervalMs=z,this.connections=[]}}l(dt,"StatsManager");function Ve(At){const b=Array.from(At.entries()),z=reduce(b,(me,pe)=>{let[ct,ut]=pe;return sn(ut)?ut.remoteSource===!0?me.recvTracks.push(ut):me.sendTracks.push(ut):Tt(ut)||fn(ut)?ut.trackId&&(me.rtpStats[ut.trackId]=ut):mn(ut)?me.transports[ut.id]=ut:wt(ut)?me.candidates[ut.id]=ut:On(ut)?me.candidatePairs[ut.id]=ut:Zt(ut)?me.codecs[ut.id]=ut:Mn(ut)?ut.trackIds&&ut.trackIds.forEach($e=>{me.trackIdToStreamId[$e]=ut.streamIdentifier}):Wn(ut)&&ut.trackIdentifier&&(me.mediaSources[ut.trackIdentifier]=ut),me},{trackIdToStreamId:{},sendTracks:[],recvTracks:[],candidates:{},candidatePairs:{},rtpStats:{},codecs:{},transports:{},mediaSources:{}});return z.recvTracks=z.recvTracks.filter(me=>z.trackIdToStreamId[me.id]!==void 0),z}l(Ve,"groupStatsByType");function Je(At){const b=filter(At.candidatePairs,$e=>!!$e.nominated),z=maxBy(b,$e=>$e.priority);if(!z)return;const me=find(At.candidates,($e,k)=>k===z.localCandidateId);if(!me)return;let pe=me.candidateType==="relay"?me.relayProtocol:me.protocol;me.candidateType==="prflx"&&(pe+=" (unreliable)");const ct="unknown";return{candidateType:me.candidateType||ct,networkType:me.networkType||ct,transportType:pe||ct}}l(Je,"getConnectionNetworkInfo");function Ge(At,b){const z=Je(b);z&&At.maybeLogNetworkInfo(z)}l(Ge,"reportConnectionNetworkInfo");const Le={nominal:1,fair:2,serious:3,critical:4};function Mt(){return Dt.apply(this,arguments)}l(Mt,"makeAppMetricsStats");function Dt(){return Dt=(0,t.coroutine)(function*(){var At;if(!(0,y.y3)())return;let b,z,me;if(ve.vkf.isAvailable()){var pe;const se=yield(0,ve.vkf)();if(!se)return;b=se.processMetrics,z=Le[se.thermalState],me=(pe=se.speedLimit)===null||pe===void 0?void 0:pe.limit}else b=yield(0,ve.rc_)();if(!b)return;let ct=null;const ut=b.reduce((se,ge)=>{var ot,nn,qt;return ge.type==="GPU"&&(ct=ge),{cpu:se.cpu+((ge==null||(ot=ge.cpu)===null||ot===void 0?void 0:ot.percentCPUUsage)||0),memory:{workingSetSize:se.memory.workingSetSize+(0,xe.UK)((ge==null||(nn=ge.memory)===null||nn===void 0?void 0:nn.workingSetSize)||0),peakWorkingSetSize:se.memory.peakWorkingSetSize+(0,xe.UK)((ge==null||(qt=ge.memory)===null||qt===void 0?void 0:qt.peakWorkingSetSize)||0)}}},{cpu:0,memory:{workingSetSize:0,peakWorkingSetSize:0}}),$e=ct==null||(At=ct.cpu)===null||At===void 0?void 0:At.percentCPUUsage,k=$e?ut.cpu-ct.cpu.percentCPUUsage:ut.cpu;return{...ut,cpuWithoutGpu:k,gpu:$e,thermalState:z,speedLimit:me}}),Dt.apply(this,arguments)}l(Dt,"_makeAppMetricsStats");function pt(At){const[b,...z]=Object.values(At.transports);debugCheck(!z.length,"Can there be more than one transport stat in a report?");const me=b&&b.selectedCandidatePairId,pe=At.candidatePairs[me];if(!me||!pe)return;const ct=At.candidates[pe.remoteCandidateId]||{};return{availableOutgoingBitrate:pe.availableOutgoingBitrate||0,availableIncomingBitrate:pe.availableIncomingBitrate||0,totalBytesSent:pe.bytesSent,totalBytesReceived:pe.bytesReceived,currentRoundTripTime:pe.currentRoundTripTime,totalRoundTripTime:pe.totalRoundTripTime,protocol:ct.protocol==="udp"?slack.calls.analytics.Protocol.UDP:slack.calls.analytics.Protocol.TCP,pathType:ct.candidateType==="host"?slack.calls.analytics.PathType.DIRECT:slack.calls.analytics.PathType.RELAY,clientTime:Date.now()}}l(pt,"makeConnectionStats");function Qt(At,b){const z=b.rtpStats[At.id]||{},me={codec:bt(z,b),bytesSent:z.bytesSent,packetsSent:z.packetsSent};if(At.kind==="audio"){const pe=At.trackIdentifier?b.mediaSources[At.trackIdentifier]:null;return pe?{...me,audioStats:{audioLevel:pe.audioLevel,totalAudioEnergy:pe.totalAudioEnergy,totalSamplesDuration:pe.totalSamplesDuration,echoReturnLoss:pe.echoReturnLoss,echoReturnLossEnhancement:pe.echoReturnLossEnhancement}}:{...me,audioStats:{audioLevel:At.audioLevel,echoReturnLoss:At.echoReturnLoss,echoReturnLossEnhancement:At.echoReturnLossEnhancement}}}return{...me,videoStats:{frameHeight:At.frameHeight,frameWidth:At.frameWidth,framesSent:At.framesSent,hugeFramesSent:At.hugeFramesSent,framesPerSecond:z.framesPerSecond,framesEncoded:z.framesEncoded}}}l(Qt,"makeOutboundMediaStats");function Nt(At,b){const z=b.rtpStats[At.id]||{},me={codec:bt(z,b),bytesReceived:z.bytesReceived,packetsReceived:z.packetsReceived,packetsLost:z.packetsLost,fractionLost:z.fractionLost,jitter:z.jitter};return At.kind==="audio"?{...me,audioStats:{audioLevel:At.audioLevel,jitterBufferDelay:At.jitterBufferDelay,concealedSamples:At.concealedSamples,concealmentEvents:At.concealmentEvents}}:{...me,videoStats:{firCount:z.firCount,nackCount:z.nackCount,pliCount:z.pliCount,sliCount:z.sliCount,frameHeight:At.frameHeight,frameWidth:At.frameWidth,framesPerSecond:At.framesPerSecond,framesCorrupted:At.framesCorrupted,framesDecoded:At.framesDecoded,framesDropped:At.framesDropped,framesReceived:At.framesReceived}}}l(Nt,"makeInboundMediaStats");function bt(At,b){const z=At.codecId,me=get(b.codecs,z),pe=get(me,"mimeType");return Yt(pe)}l(bt,"getCodecForRtpStat");function Yt(At){switch(At){case"video/VP8":return slack.calls.analytics.Codec.VP8;case"video/VP9":return slack.calls.analytics.Codec.VP9;case"video/H264":return slack.calls.analytics.Codec.H264;case"audio/opus":return slack.calls.analytics.Codec.OPUS;default:return slack.calls.analytics.Codec.UNKNOWN}}l(Yt,"parseCodec");function fn(At){return At.type==="inbound-rtp"}l(fn,"isRecvRtpStat");function Tt(At){return At.type==="outbound-rtp"}l(Tt,"isSendRtpStat");function sn(At){return At.type==="track"}l(sn,"isTrackStat");function mn(At){return At.type==="transport"}l(mn,"isTransportStat");function wt(At){return At.type==="local-candidate"||At.type==="remote-candidate"}l(wt,"isIceCandidateStat");function On(At){return At.type==="candidate-pair"}l(On,"isIceCandidatePairStat");function Zt(At){return At.type==="codec"}l(Zt,"isCodecStat");function Mn(At){return At.type==="stream"}l(Mn,"isStreamStat");function Wn(At){return At.type==="media-source"}l(Wn,"isMediaSourceStat");const xn=5e3;let gn=l(class{constructor(b,z){this.audioVideoFacade=b,this.observer=z,this.callLogger=(0,r.Jt)("HUDDLES-STATS-MANAGER"),this.isDisconnected=!1;var me=this;this.onMetricsDidReceive=function(){var ut=(0,t.coroutine)(function*($e){if(!$e)return;const k=yield me.collectScreenshareStats();me.reportAppMetrics({clientMetricReport:$e,screenshareRtcStats:k})});return function($e){return ut.apply(this,arguments)}}(),this.reportDisconnect=()=>{this.isDisconnected=!0,this.callLogger.info("Disconnect reported. Resuming app metrics collection without client metric report."),this.reportAppMetrics();const ut=setInterval(()=>{if(!this.isDisconnected){clearInterval(ut);return}this.callLogger.info("User still disconnected. Reporting app metrics without client metric report."),this.reportAppMetrics()},xn)},this.cleanup=()=>{};var pe=this;this.collectScreenshareStats=(0,t.coroutine)(function*(){let ut;try{var $e;const k=($e=pe.audioVideoFacade.contentShareController.contentAudioVideo)===null||$e===void 0?void 0:$e.rtcPeerConnection;return k?(ut=yield k.getStats(),ut):void 0}catch(k){pe.callLogger.error("Failed to collect screenshare stats",k)}});var ct=this;this.reportAppMetrics=(0,t.coroutine)(function*(){let{clientMetricReport:ut,screenshareRtcStats:$e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!ut&&!ct.isDisconnected)return;ct.isDisconnected&&ut&&(ct.isDisconnected=!1);const k=yield ct.collectAppMetrics();ct.observer.onAppMetrics({appMetrics:k,clientMetricReport:ut,screenshareRtcStats:$e})}),this.collectAppMetrics=(0,t.coroutine)(function*(){const ut=yield Mt();if(!ut)return;let $e=ut;return ut&&($e=(0,Re.A)({...ut,cpu:ut.cpuWithoutGpu},"cpuWithoutGpu")),$e})}},"HuddlesStatsManager"),An=l(class{start(){var b;this.isSignallingOnly=!1,(b=this.videoStreamsManager)===null||b===void 0||b.addObserver(this),this.audioVideoFacade.addObserver(this),this.audioVideoFacade.start(),this.observer.onStart()}startWithSignalingOnly(){this.audioVideoFacade.start({signalingOnly:!0}),this.isSignallingOnly=!0}stop(){var b=this;return(0,t.coroutine)(function*(){b.isSignallingOnly?(b.waitForStart.resolve(),b.waitForStop.resolve(!0)):yield b.waitForStart,b.isStopRequested=!0,b.audioVideoFacade.stop()})()}audioVideoDidStartConnecting(b){if(!b)this.callLogger.info("Starting Chime session"),this.observer.onStartSessionTimeout(),this.observer.onAudioVideoDidStartConnecting(),this.isReconnecting=!1;else{var z,me,pe;this.callLogger.info("Reconnecting Chime session"),this.observer.onSelfDisconnected(),(z=this.statsManager)===null||z===void 0||(me=z.reportDisconnect)===null||me===void 0||me.call(z),(pe=this.huddleReconnectTracer)===null||pe===void 0||pe.traceReconnectAttempt(),this.isReconnecting=!0}}audioVideoDidStart(){if(this.callLogger.info("Chime audio video session started"),this.isReconnecting){var b;this.callLogger.info("Successfully re-connected to Huddle"),(b=this.huddleReconnectTracer)===null||b===void 0||b.traceReconnectAttemptOutcome({isSuccess:!0}),this.isReconnecting=!1}this.observer.onAudioVideoDidStart(),this.deviceManager.audioVideoDidStart(),this.dataChannelSubscribers.forEach(z=>z.onConnectDatachannel(this.audioVideoFacade)),this.waitForStart.resolve()}audioVideoDidStop(b){var z,me,pe,ct;const ut=s.b9[b.statusCode()],$e=`Chime session stopped. StatusCode: ${ut}`;if(this.callLogger.info($e),this.isReconnecting&&b.isFailure()){var k;this.callLogger.info("Failed to re-connect to Huddle"),(k=this.huddleReconnectTracer)===null||k===void 0||k.traceReconnectAttemptOutcome({isSuccess:!1})}this.audioVideoFacade.removeObserver(this),this.observer.onScreenShareStopped(),this.observer.onAudioVideoDidStop(),(z=this.videoStreamsManager)===null||z===void 0||z.removeObserver(this),(me=this.meetingEventLogger)===null||me===void 0||me.stop(),delete this.meetingEventLogger,(ct=(pe=this.statsManager).cleanup)===null||ct===void 0||ct.call(pe),delete this.statsManager,this.dataChannelSubscribers.forEach(se=>se.onDisconnectDataChannel()),!this.isStopRequested&&b.isTerminal()&&(this.observer.onClogError($e),this.observer.onError(i.uZ.CallEnded,ut)),this.waitForStop.resolve(this.isStopRequested)}videoTileDidUpdate(b){if(!b.boundVideoStream||!b.boundAttendeeId){b.tileId&&this.observer.onVideoTileRemoved(b.tileId);return}const z=new s.jp(b.boundAttendeeId).base();this.selfAttendeeId===z?(this.deviceManager.localVideoTileDidUpdate(b),this.observer.onSelfVideoTileUpdate(b)):this.observer.onPeerVideoTileUpdate(z,b)}videoTileWasRemoved(b){this.consoleLog.info(`Video tile removed: tileId=${b}`),this.observer.onVideoTileRemoved(b)}videoAvailabilityDidChange(b){this.consoleLog.debug(`Video availability: RemoteVideoAvailable=${b.remoteVideoAvailable}, CanStartLocalVideo=${b.canStartLocalVideo}`)}metricsDidReceive(b){var z=this;return(0,t.coroutine)(function*(){var me;(me=z.statsManager)===null||me===void 0||me.onMetricsDidReceive(b)})()}connectionDidBecomePoor(){this.callLogger.warn("SDK detected poor connection")}connectionDidSuggestStopVideo(){this.callLogger.warn("SDK suggested stop video, maybe poor connection")}videoSendDidBecomeUnavailable(){this.callLogger.warn("Video send is unavailable")}remoteVideoSourcesDidChange(b){var z;(z=this.videoStreamsManager)===null||z===void 0||z.remoteVideoSourcesDidChange(b)}tileWillBePausedByDownlinkPolicy(b){this.observer.onVideoTileWillPause(b)}tileWillBeUnpausedByDownlinkPolicy(b){this.observer.onVideoTileWillUnpause(b)}constructor(b,z,me,pe,ct,ut,$e,k,se,ge,ot=[]){this.selfAttendeeId=b,this.meetingId=z,this.mediaRegion=me,this.callId=pe,this.audioVideoFacade=ct,this.observer=ut,this.deviceManager=$e,this.videoStreamsManager=k,this.dataChannelSubscribers=ot,this.callLogger=(0,r.tZ)("FREE-WILLY-AV"),this.consoleLog=(0,r.Cc)("FREE-WILLY-AV"),this.waitForStart=(0,a.u)(),this.waitForStop=(0,a.u)(),this.isStopRequested=!1,this.isSignallingOnly=!1,this.isReconnecting=!1,se&&(this.waitForStart=se),ge&&(this.waitForStop=ge),this.statsManager=new gn(ct,ut),this.meetingEventLogger=new We(ut,this.meetingId,this.mediaRegion,this.selfAttendeeId,this.callId),{reconnectTrace:this.huddleReconnectTracer}=(0,I.A)().getAllTraceHandlers()}},"AudioVideoObserverImpl");var vt=e(269592),xt=e(615056),Vt=e(824983),Se=e(348455),St=e(643407),Ce=e(815379),Ne=e(646464);function ze(){switch((0,ve.IXB)()){case-3:return 1/.7;case-2:return 1/.8;case-1:return 1/.9;case 0:return 1;case 1:return 1/1.1;case 2:return 1/1.25;case 3:return 1/1.5;case 4:return 1/1.75;case 5:return 1/2;default:return 1}}l(ze,"getScaleFactorForCurrentZoomLevel");function Oe(At,b){const[z,me]=At;return[z*b,me*b]}l(Oe,"getScaledCoordinates");function Fe(At,b){var z;const pe=(0,y.y3)()&&!(0,y.dY)("4.18.0")?1/ze():1,ct=((z=At.itemId)===null||z===void 0?void 0:z.toString())||null,ut=At.itemId==="self"?b:ct;switch(At.type){case i.Sl.New:case i.Sl.Edit:{const[$e,k]=Oe(At.segment.a,pe),[se,ge]=Oe(At.segment.b,pe),[ot,nn]=Oe(At.segment.c,pe),[qt,vn]=Oe(At.segment.d,pe);return{itemId:ut,type:At.type===i.Sl.New?St.Y.Draw.Type.NEW:St.Y.Draw.Type.EDIT,segment:{a:{x:$e,y:k},b:{x:se,y:ge},c:{x:ot,y:nn},d:{x:qt,y:vn}}}}case i.Sl.End:return{itemId:ut,type:St.Y.Draw.Type.END};case i.Sl.ChangeHue:return{itemId:ut,type:St.Y.Draw.Type.CHANGE_HUE,hue:At.hue};case i.Sl.Position:return{itemId:ut,type:St.Y.Draw.Type.POSITION,x:At.x,y:At.y};default:return(0,Ce.Kh)(At)}}l(Fe,"convertDrawMessageToPeerMessage");function _t(At,b){const z=At.itemId===b?"self":At.itemId;switch(At.type){case St.Y.Draw.Type.NEW:case St.Y.Draw.Type.EDIT:{const pe=(0,y.y3)()&&!(0,y.dY)("4.18.0")?ze():1;return{itemId:z,type:At.type===St.Y.Draw.Type.NEW?i.Sl.New:i.Sl.Edit,segment:{a:[(At.segment.a.x||0)*pe,(At.segment.a.y||0)*pe],b:[(At.segment.b.x||0)*pe,(At.segment.b.y||0)*pe],c:[(At.segment.c.x||0)*pe,(At.segment.c.y||0)*pe],d:[(At.segment.d.x||0)*pe,(At.segment.d.y||0)*pe]}}}case St.Y.Draw.Type.END:return{itemId:z,type:i.Sl.End};case St.Y.Draw.Type.CHANGE_HUE:return{itemId:z,type:i.Sl.ChangeHue,hue:At.hue};case St.Y.Draw.Type.POSITION:return{itemId:z,type:i.Sl.Position,x:At.x,y:At.y};default:(0,je.M)("Unhandled draw message case");return}}l(_t,"convertPeerMessageToDrawMessage");function ft(At){let b=Ne.o.Standard;return At.type&&At.type===St.Y.Reacji.Type.Effect&&(b=Ne.o.Effect),At.type&&At.type===St.Y.Reacji.Type.Gif&&(b=Ne.o.Gif),b}l(ft,"convertFromPeerReactionType");function Ct(At){let b=St.Y.Reacji.Type.Standard;return At===Ne.o.Effect&&(b=St.Y.Reacji.Type.Effect),At===Ne.o.Gif&&(b=St.Y.Reacji.Type.Gif),b}l(Ct,"convertToPeerReactionType");var $t=e(129822);let rn=l(class wr{updatePresence(b,z){z?this.attendeesStates.set(b,this.initializeState()):this.attendeesStates.delete(b)}calculateScore(b,z,me){const pe=this.attendeesStates.get(b);if(!pe||(me!==null&&(pe.muted=me),pe.muted))return 0;const ct=Date.now();if(z){pe.noiseFloor=this.updateNoiseFloor(pe,z);const ut={timestamp:ct,volume:z};pe.volumeSamples.push(ut)}return this.pruneVolumeSamples(pe),this.getScore(pe,ct)}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}initializeState(){return{muted:!1,noiseFloor:0,volumeSamples:[]}}updateNoiseFloor(b,z){let me=b.noiseFloor;return z>me?me=(1-this.params.slowAttackFactor)*me+this.params.slowAttackFactor*z:me=(1-this.params.fastDecayFactor)*me+this.params.fastDecayFactor*z,Math.min(me,this.params.noiseFloorMax)}pruneVolumeSamples(b){const z=Date.now()-this.params.analysisWindowMs,me=b.volumeSamples;for(;me.length&&me[0].timestamp<z;)me.shift()}getScore(b,z){return b.volumeSamples.reduce((me,pe)=>{const ct=Math.max(1,Math.ceil((z-pe.timestamp)/1e3));return me+Math.max(0,pe.volume-b.noiseFloor)/ct},0)}constructor(){this.attendeesStates=new Map,this.params=wr.FAST_SWITCHING_PARAMS}},"WindowedActiveSpeakerPolicy");rn.DAMPED_SWITCHING_PARAMS={slowAttackFactor:.05,fastDecayFactor:.5,noiseFloorMax:.03,analysisWindowMs:3e3},rn.FAST_SWITCHING_PARAMS={slowAttackFactor:.05,fastDecayFactor:.5,noiseFloorMax:.03,analysisWindowMs:300};let un=l(class{shutdown(){window.clearTimeout(this.timerHandle),delete this.timerHandle}addDisconnectedAttendee(b){new s.jp(b).hasModality(s.jp.MODALITY_CONTENT)||this.disconnectedAttendees.has(b)||(this.disconnectedAttendees.set(b,Date.now()+this.timeoutMs),this.maybeStartTimer())}deleteDisconnectedAttendee(b){this.disconnectedAttendees.delete(b),this.disconnectedAttendees.size===0&&(window.clearTimeout(this.timerHandle),delete this.timerHandle)}hasDisconnectedAttendee(b){return this.disconnectedAttendees.has(b)}maybeStartTimer(){if(this.timerHandle||this.disconnectedAttendees.size===0)return;const b=this.disconnectedAttendees.get([...this.disconnectedAttendees.keys()][0]);b&&(this.timerHandle=window.setTimeout(this.runTimer,Math.max(b-Date.now(),10)))}runTimer(){window.clearTimeout(this.timerHandle),delete this.timerHandle;const b=[],z=Date.now();this.disconnectedAttendees.forEach((me,pe)=>{z>me&&(this.observer.onStalePeer(pe),b.push(pe))}),b.forEach(me=>{this.disconnectedAttendees.delete(me)}),this.maybeStartTimer()}constructor(b,z){this.timeoutMs=b,this.observer=z,this.runTimer=this.runTimer.bind(this),this.disconnectedAttendees=new Map}},"StaleAttendeeChecker");var hn=e(69115),pn=e(224089),Tn=e(327422),Qn=e(121332);let zn=l(class{addSelf(b){this.selfId=b,this.addPeer(b)}removeSelf(b){(0,je.M)(b===this.selfId,"Bad attendeeId when removing self"),delete this.selfId,this.removePeer(b)}addPeer(b){this.ids=(0,hn.A)(this.ids,[b]),(0,A.A)(this.cachedPeerStates[b],(me,pe)=>{this.peerStateForwarder[pe]&&!(0,vt.A)(me)&&this.peerStateForwarder[pe](b,me)}),delete this.cachedPeerStates[b];const z=[];(0,A.A)(this.cachedCallState,(me,pe)=>{this.callStateForwarder[pe]&&!(0,vt.A)(me)&&this.callStateForwarder[pe].getPeerIdFn(me)===b&&(this.callStateForwarder[pe].forwardFn(me),this.callStateForwarder[pe].isCached||z.push(pe))}),this.cachedCallState=(0,Re.A)(this.cachedCallState,z)}removePeer(b){(0,pn.A)(this.ids,b),(0,A.A)((0,Tn.A)(this.cachedCallState),z=>{if(this.callStateForwarder[z]){const me=this.callStateForwarder[z].removeFn(this.cachedCallState[z],b);if(!me){delete this.cachedCallState[z];return}this.cachedCallState[z]=me}})}getPeers(){return this.ids}hasPeer(b){return this.ids.includes(b)}hasAttendee(b){return this.hasPeer(b)||b===this.selfId}updateCallState(b){const z=b;(0,A.A)(b,(me,pe)=>{this.callStateForwarder[pe]&&(z[pe]=this.callStateForwarder[pe].updateFn(this.cachedCallState[pe],me))}),(0,A.A)(this.callStateForwarder,(me,pe)=>{this.forwardOrCacheCallState([z],pe,me)})}updatePeerStates(b){(0,A.A)(this.peerStateForwarder,(z,me)=>{this.forwardOrCachePeerState(b,me,z)})}setIncludeSelfAndNoneActiveSpeaker(b,z){b===this.includeSelf&&z===this.includeNone||(this.includeSelf=b,this.includeNone=z,(0,A.A)(this.cachedCallState,(me,pe)=>{this.callStateForwarder[pe]&&!(0,vt.A)(me)&&this.callStateForwarder[pe].forwardFn(me)}))}forwardOrCachePeerState(b,z,me){b.filter(ct=>!(0,vt.A)(ct.state[z])).map(ct=>({id:ct.peerId,value:ct.state[z]})).forEach(ct=>{let{id:ut,value:$e}=ct;this.ids.includes(ut)?me(ut,$e):this.cachedPeerStates[ut]={...this.cachedPeerStates[ut],[z]:$e}})}forwardOrCacheCallState(b,z,me){b.filter(ct=>!(0,vt.A)(ct[z])).map(ct=>({value:ct[z]})).forEach(ct=>{let{value:ut}=ct;const $e=me.getPeerIdFn(ut);let k=!1;$e&&(this.ids.includes($e)||$e===this.NO_ACTIVE_SPEAKER)?me.forwardFn(ut):k=!0,(k||me.isCached)&&(this.cachedCallState={...this.cachedCallState,[z]:ut})})}getAttendeeId(b){return new s.jp(b).base()}constructor(b){this.observer=b,this.NO_ACTIVE_SPEAKER="none",this.ids=[],this.includeSelf=!1,this.includeNone=!1,this.cachedCallState={},this.cachedPeerStates={},this.callStateForwarder={activeSpeakerList:{updateFn:(z,me)=>{const pe=z||[],ct=me&&me.length?me[0]:this.NO_ACTIVE_SPEAKER;return(0,Qn.A)(pe,[ct,this.NO_ACTIVE_SPEAKER]),pe.unshift(ct),pe},removeFn:(z,me)=>{if(z)return(0,pn.A)(z,me),z},getPeerIdFn:z=>{const me=z.filter(pe=>pe===this.NO_ACTIVE_SPEAKER?this.includeNone:this.includeSelf||this.selfId!==this.getAttendeeId(pe));if(me.length)return me[0]},forwardFn:z=>{const me=z.filter(pe=>pe===this.NO_ACTIVE_SPEAKER&&this.includeNone?!0:this.includeSelf||this.selfId!==this.getAttendeeId(pe));!me.length||me[0]===this.NO_ACTIVE_SPEAKER?this.observer.onNewActiveSpeaker(void 0):this.observer.onNewActiveSpeaker(this.selfId===me[0]?"self":me[0])},isCached:!0}},this.peerStateForwarder={isDrawEnabled:(z,me)=>{this.observer.onPeerDrawEnabled(z,me)}}}},"PeerCache");var Hn=e(124748);let Kn=l(class{destroy(){var b,z,me;(b=this.peerCache)===null||b===void 0||b.getPeers().forEach(pe=>this.audioVideoFacade.realtimeUnsubscribeFromVolumeIndicator(pe)),delete this.peerCache,(z=this.staleAttendeeChecker)===null||z===void 0||z.shutdown(),delete this.staleAttendeeChecker,this.audioVideoFacade.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceCallback),this.audioVideoFacade.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.audioVideoFacade.realtimeUnsubscribeToLocalSignalStrengthChange(this.realtimeLocalSignalStrengthChangeCallback),this.audioVideoFacade.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteLocalAudioCallback),this.audioVideoFacade.realtimeUnsubscribeToSetCanUnmuteLocalAudio(this.realtimeSetCanUnmuteLocalAudioCallback),this.audioVideoFacade.unsubscribeFromActiveSpeakerDetector(this.activeSpeakerDetectorCallback),delete this.windowedActiveSpeakerPolicy,this.audioVideoFacade.realtimeUnsubscribeFromReceiveDataMessage(this.dataChannelTopic),(me=this.audioVideoFacade.transcriptionController)===null||me===void 0||me.unsubscribeFromTranscriptEvent(this.realtimeReceiveTranscriptEventCallback),this.attendeeMuteRequests={}}selfDrawEnabled(b){this.sendPeerMessageOverDataChannel(new St.Y({capabilities:{isDrawEnabled:b},fromPeerIdString:this.selfAttendeeId}))}sendReacji(b,z){let me;z?me={emoji:b,type:Ct(z)}:me={emoji:b},this.sendPeerMessageOverDataChannel(new St.Y({reacji:me,fromPeerIdString:this.selfAttendeeId}))}sendBackground(b){this.sendPeerMessageOverDataChannel(new St.Y({background:{url:b},fromPeerIdString:this.selfAttendeeId}))}sendMuteRequest(b){this.sendPeerMessageOverDataChannel(new St.Y({muteRequest:{peerId:b},fromPeerIdString:this.selfAttendeeId}))}sendJukeboxRequest(b){this.sendPeerMessageOverDataChannel(new St.Y({jukeboxRequest:{songKey:b},fromPeerIdString:this.selfAttendeeId}))}sendJukeboxStopRequest(){this.sendPeerMessageOverDataChannel(new St.Y({jukeboxRequest:{stop:!0},fromPeerIdString:this.selfAttendeeId}))}sendDrawMessage(b){this.sendPeerMessageOverDataChannel(new St.Y({draw:Fe(b,this.selfAttendeeId),fromPeerIdString:this.selfAttendeeId}))}sendContentShareDetails(b){this.sendPeerMessageOverDataChannel(new St.Y({contentShareDetails:{sourceType:b,itemId:this.selfAttendeeId},fromPeerIdString:this.selfAttendeeId}))}sendRecordingStartNotification(){this.sendPeerMessageOverDataChannel(new St.Y({recordingStartNotification:{type:St.Y.RecordingStartNotification.Type.SUMMARY},fromPeerIdString:this.selfAttendeeId}))}onStalePeer(b){this.callLogger.info(`Removing stale peer: ${b}`),this.attendeeLeft(b),this.observer.onPeerDisconnected(b),this.observer.onPeerLeft(b)}setIncludeSelfAndNoneActiveSpeaker(b,z){var me;(me=this.peerCache)===null||me===void 0||me.setIncludeSelfAndNoneActiveSpeaker(b,z)}attendeeJoined(b){if(b===this.selfAttendeeId){var z;(z=this.peerCache)===null||z===void 0||z.addSelf(b)}else{var me;(me=this.peerCache)===null||me===void 0||me.addPeer(b)}this.audioVideoFacade.realtimeSubscribeToVolumeIndicator(b,this.realtimeVolumeIndicatorCallback),this.consoleLog.info(`Subscribed to attendee=${b} volume indicator`)}attendeeLeft(b){if(b===this.selfAttendeeId){var z;(z=this.peerCache)===null||z===void 0||z.removeSelf(b)}else{var me;(me=this.peerCache)===null||me===void 0||me.removePeer(b)}this.audioVideoFacade.removeVideoTilesByAttendeeId(b),this.audioVideoFacade.realtimeUnsubscribeFromVolumeIndicator(b),this.consoleLog.info(`Unsubscribed from attendee=${b} volume indicator`)}sendPeerMessageOverDataChannel(b){this.isDataChannelReady()?this.audioVideoFacade.realtimeSendDataMessage(this.dataChannelTopic,St.Y.encode(b).finish()):this.logFailureToSendPeerMessage(b)}isAttendeeOfTypeContent(b){return new s.jp(b).hasModality(s.jp.MODALITY_CONTENT)}realtimeAttendeeIdPresenceCallback(b,z,me,pe){var ct;if(this.consoleLog.info(`Attendee presence: attendeeId=${b}, isSelf=${this.selfAttendeeId===new s.jp(b).base()}, present=${z}, externalUserId=${me}, dropped=${pe}`),(ct=this.windowedActiveSpeakerPolicy)===null||ct===void 0||ct.updatePresence(b,z),this.isAttendeeOfTypeContent(b)){z||this.audioVideoFacade.removeVideoTilesByAttendeeId(b);return}if(!me){this.callLogger.error(`Attendee presence: no externalUserId for attendee=${b}`),this.observer.onClogError("MissingExternalUserId");return}let ut=null;if(z){var $e;pe===!1&&!(!(($e=this.peerCache)===null||$e===void 0)&&$e.hasAttendee(b))?ut="joined":ut="reconnected"}else pe===!0?ut="disconnected":ut="left";if(ut===null){this.callLogger.error("Presence callback event is null");return}if(this.selfAttendeeId===b)switch(ut){case"joined":this.observer.onSelfJoined(),this.observer.onSelfConnected();break;case"left":this.observer.onSelfDisconnected(),this.observer.onSelfLeft();break;case"disconnected":this.observer.onSelfDisconnected();break;case"reconnected":this.observer.onSelfConnected();break;default:this.callLogger.error(`unknown self event ${ut}`);return}else{const ot=(0,Se.l)(me);if(!ot){this.callLogger.error(`No externalUserId for ${b}`);return}switch(ut){case"joined":{var k;(k=this.staleAttendeeChecker)===null||k===void 0||k.deleteDisconnectedAttendee(b),this.observer.onPeerJoined(b,ot),this.observer.onPeerConnected(b),this.updatePeerVideoTile(b);break}case"left":this.observer.onPeerDisconnected(b),this.observer.onPeerLeft(b);break;case"disconnected":var se;(se=this.staleAttendeeChecker)===null||se===void 0||se.addDisconnectedAttendee(b),this.observer.onPeerDisconnected(b);break;case"reconnected":{var ge;(ge=this.staleAttendeeChecker)===null||ge===void 0||ge.deleteDisconnectedAttendee(b),this.observer.onPeerConnected(b),this.updatePeerVideoTile(b);break}default:this.callLogger.error(`unknown peer event ${ut}`);return}}ut==="joined"&&this.attendeeJoined(b),ut==="left"&&this.attendeeLeft(b)}realtimeFatalErrorCallback(b){this.callLogger.error(`Chime session fatal error: name=${b.name}, message=${b.message}`),this.observer.onClogError(`FatalError: ${b.name} - ${b.message}`)}realtimeLocalSignalStrengthChangeCallback(b){this.consoleLog.debug(`Local attendee signalStrength=${b}`)}realtimeMuteAndUnmuteLocalAudioCallback(b){this.callLogger.debug(`Local attendee mute=${b}`),this.observer.onPeerMuted("self",b)}realtimeSetCanUnmuteLocalAudioCallback(b){this.consoleLog.debug(`Local attendee can unmute = ${b}`)}realtimeVolumeIndicatorCallback(b,z,me,pe,ct){this.consoleLog.debug(`Attendee volume indicator: attendeeId=${b}, volume=${z}, muted=${me}, signalStrength=${pe}, externalUserId=${ct}`),this.selfAttendeeId!==b&&(me?this.observer.onPeerMuted(b,!0):me!==null&&me===!1&&this.observer.onPeerMuted(b,!1)),pe!==null&&(this.selfAttendeeId===b?this.observer.onSelfConnectionQualityChanged("uplink",(0,i.MK)(pe)):this.observer.onPeerConnectionQualityChanged(b,"uplink",(0,i.MK)(pe)))}activeSpeakerDetectorCallback(b){var z;(z=this.peerCache)===null||z===void 0||z.updateCallState({activeSpeakerList:b})}realtimeReceiveDataMessageCallback(b){if(this.selfAttendeeId===b.senderAttendeeId){if(!b.throttled)return;this.callLogger.info(`Data message throttled: size=${b.data.length} bytes`);return}let z;try{z=St.Y.decode(b.data)}catch(me){this.callLogger.error(`Peer Message failed during decode, ignoring peer message.
				| Error: ${me}
				| Data Sender Attendee ID: ${b.senderAttendeeId}
				| Data Sender External Attendee ID: ${b.senderExternalUserId}
				| Topic: ${b.topic}`);return}this.handlePeerMessageFromDataMessage(z,b.senderAttendeeId)}handlePeerMessageFromDataMessage(b,z){const me=z;if(b.jukeboxRequest){var pe;if(!(0,$t.Z)(me,"senderAttendeeId is not populated")||!(0,$t.Z)(b.jukeboxRequest,"message.jukeboxRequest is required in the jukebox request message"))return;if(!this.peerCache||!(!((pe=this.peerCache)===null||pe===void 0)&&pe.hasPeer(me))){this.callLogger.info(`Dropping jukeboxRequest from unknown peer: ${me}`);return}b.jukeboxRequest.songKey&&!b.jukeboxRequest.stop&&this.observer.onJukeboxRequest(b.jukeboxRequest.songKey),b.jukeboxRequest.stop&&this.observer.onJukeboxStopRequest()}else if(b.reacji){var ct;if(!(0,$t.Z)(me,"senderAttendeeId is not populated")||!(0,$t.Z)(b.reacji.emoji,"reacji.emoji is required in the reacji message"))return;if(!((ct=this.peerCache)===null||ct===void 0)&&ct.hasPeer(me)){const ge=ft(b.reacji);this.observer.onPeerReacji(me,b.reacji.emoji,!0,ge)}else this.callLogger.info(`Dropping reacji from unknown peer: ${me}`)}else if(b.draw){var ut;const ge=_t(b.draw,this.selfAttendeeId);if(!(0,$t.Z)(me,"senderAttendeeId is not populated")||!(0,$t.Z)(ge,"Draw message must be correctly formed"))return;!((ut=this.peerCache)===null||ut===void 0)&&ut.hasPeer(me)?this.observer.onPeerDrawMessage(me,ge):this.callLogger.info(`Dropping draw message from unknown peer: ${me}`)}else if(b.capabilities){if(!(0,$t.Z)(me,"senderAttendeeId is not populated"))return;if(!(0,vt.A)(b.capabilities.isDrawEnabled)){var $e;($e=this.peerCache)===null||$e===void 0||$e.updatePeerStates([{peerId:me,state:{isDrawEnabled:b.capabilities.isDrawEnabled}}])}}else if(b.muteRequest){var k;if(!(0,$t.Z)(me,"senderAttendeeId is not populated")||!(0,$t.Z)(b.muteRequest.peerId,"muteRequest.peerId is required in the background message"))return;if(!((k=this.peerCache)===null||k===void 0)&&k.hasPeer(me)){if(b.muteRequest.peerId===this.selfAttendeeId){var se;const ge=this.attendeeMuteRequests[z],ot=ge==null?void 0:ge.lastRequestTime,nn=Date.now();if(ge?(ge.lastRequestTime=nn,ge.count+=1):this.attendeeMuteRequests[z]={lastRequestTime:nn,count:1},ot&&nn-ot<=this.attendeeMuteRequestThrottleMs){this.callLogger.info(`Throttled mute request from attendee: ${z} peer: ${me}`);return}if(((se=this.attendeeMuteRequests[z])===null||se===void 0?void 0:se.count)>=this.attendeeMuteRequestMaxAllowed){this.callLogger.info(`Dropped mute request from attendee: ${z} peer: ${me}`);return}}this.observer.onPeerMuteRequest(me,b.muteRequest.peerId)}else this.callLogger.info(`Dropping mute request from unknown peer: ${me}`)}else if(b.contentShareDetails){if(!(0,$t.Z)(me,"senderAttendeeId is not populated")||!(0,$t.Z)(b.contentShareDetails.itemId,"contentShareDetails.itemId is required in the contentShareDetails message")||!(0,$t.Z)(b.contentShareDetails.sourceType,"contentShareDetails.sourceType is required in the contentShareDetails message"))return;this.callLogger.info(`Received content share details for item: ${b.contentShareDetails.itemId}, type: ${b.contentShareDetails.sourceType}`);const ge=(0,Hn.Vd)(b.contentShareDetails.sourceType);this.observer.onContentShareDetailsUpdate(me,ge,b.contentShareDetails.sourceType)}}realtimeReceiveTranscriptEventCallback(b){this.observer.onTranscriptionEvent(b)}updatePeerVideoTile(b){this.audioVideoFacade.getAllVideoTiles().filter(pe=>{const ct=pe.state();return!ct||!ct.boundAttendeeId?!1:new s.jp(ct.boundAttendeeId).base()===new s.jp(b).base()}).forEach(pe=>{const ct=(pe==null?void 0:pe.state())||null;ct&&this.observer.onPeerVideoTileUpdate(b,ct)})}constructor(b,z,me){var pe;this.selfAttendeeId=b,this.audioVideoFacade=z,this.observer=me,this.callLogger=(0,r.Jt)("AUDIO-VIDEO-FACADE-SUBS"),this.consoleLog=(0,r.Cc)("AUDIO-VIDEO-FACADE-SUBS"),this.dataChannelTopic="data-channel",this.staleAttendeeTimeoutMs=60*1e3,this.attendeeMuteRequestThrottleMs=10*1e3,this.attendeeMuteRequestMaxAllowed=50,this.attendeeMuteRequests={},this.isDataChannelReady=()=>{var ct,ut,$e;return(ct=this.audioVideoFacade.audioVideoController)===null||ct===void 0||(ut=ct.meetingSessionContext)===null||ut===void 0||($e=ut.signalingClient)===null||$e===void 0?void 0:$e.ready()},this.logFailureToSendPeerMessage=ct=>{const ut=ct.draw?"draw":"reacji",$e=l(()=>this.callLogger.error(`Failed to send ${ut} peer message. Data channel is not ready to use.`),"logError");return(0,Vt.A)(ut,$e)},(0,xt.A)(this,["realtimeAttendeeIdPresenceCallback","realtimeFatalErrorCallback","realtimeLocalSignalStrengthChangeCallback","realtimeMuteAndUnmuteLocalAudioCallback","realtimeSetCanUnmuteLocalAudioCallback","activeSpeakerDetectorCallback","realtimeVolumeIndicatorCallback","realtimeReceiveDataMessageCallback","realtimeReceiveTranscriptEventCallback"]),this.audioVideoFacade.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceCallback),this.audioVideoFacade.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.audioVideoFacade.realtimeSubscribeToLocalSignalStrengthChange(this.realtimeLocalSignalStrengthChangeCallback),this.audioVideoFacade.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteLocalAudioCallback),this.audioVideoFacade.realtimeSubscribeToSetCanUnmuteLocalAudio(this.realtimeSetCanUnmuteLocalAudioCallback),this.windowedActiveSpeakerPolicy=new rn,this.audioVideoFacade.subscribeToActiveSpeakerDetector(this.windowedActiveSpeakerPolicy,this.activeSpeakerDetectorCallback),this.audioVideoFacade.realtimeSubscribeToReceiveDataMessage(this.dataChannelTopic,this.realtimeReceiveDataMessageCallback),(pe=this.audioVideoFacade.transcriptionController)===null||pe===void 0||pe.subscribeToTranscriptEvent(this.realtimeReceiveTranscriptEventCallback),this.peerCache=new zn(this.observer),this.staleAttendeeChecker=new un(this.staleAttendeeTimeoutMs,this)}},"AudioVideoFacadeSubscriber");var os=e(539622),et=e(21879);const Et=15,we=2560,tt=1e3,Rt="text";let It=l(class{stopMusic(b){let{cleanObserver:z}=b;this.huddlesJukeboxEnabled&&this.isMusicEnabled&&(this.isMusicEnabled=!1,this.audioVideoFacade.stopContentShare(),z&&this.audioVideoFacade.removeContentShareObserver(this))}stop(){var b=this;return(0,t.coroutine)(function*(){b.isScreenshareEnabled&&(b.isStopRequested=yield b.stopContentShare()),b.huddlesJukeboxEnabled&&b.stopMusic({cleanObserver:!0}),b.isStopRequested||(b.observer.onScreenShareStopped(),b.audioVideoFacade.removeContentShareObserver(b))})()}contentShareDidStart(){this.log.info("Chime content share started"),this.waitForStart.resolve(!0),this.observer.onScreenShareStarted()}contentShareDidStop(){this.log.info("Chime content share stopped"),this.isScreenshareEnabled&&this.log.info("Screenshare stop: stream ended"),this.isScreenshareEnabled=!1,this.observer.onScreenShareStopped(),this.isStopRequested&&this.audioVideoFacade.removeContentShareObserver(this)}contentShareDidPause(){this.log.info("Chime content share paused")}contentShareDidUnpause(){this.log.info("Chime content share unpaused")}setSongStream(b){var z=this;return(0,t.coroutine)(function*(){z.huddlesJukeboxEnabled&&(z.waitForStart=(0,a.u)(),yield z.audioVideoFacade.startContentShare(b),z.isMusicEnabled=!0)})()}setScreenshare(b,z,me){var pe=this;return(0,t.coroutine)(function*(){if(b===pe.isScreenshareEnabled)return;const{huddleEventsTrace:ct}=(0,I.A)().getAllTraceHandlers();if(b){let ut=z;if(z){const k=z.split(":");k.length===3&&k[2]!=="0"&&(k[2]="0",ut=k.join(":"),pe.log.warn(`Munging screen share media source id, before: ${z}, after: ${ut}`))}let $e;try{pe.waitForStart=(0,a.u)();const k=l(se=>{throw pe.log.error(`getUserMedia error during huddle screenshare attempt: ${se.name} ${se.message}`),se},"logGetUserMediaError");if((0,ve.g9M)()&&pe.log.info(`Starting screen share with zoomLevel = ${(0,ve.IXB)()}`),(0,ve.g9M)()&&me){const{screenHeight:se,screenWidth:ge,selectedDisplayId:ot}=me;if($e={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:ut,maxFrameRate:Et}}},ge&&se){const vn=$e.video.mandatory,Ut=ge/se,Xt=we;vn.maxWidth=ge<Xt?ge:Xt,vn.maxHeight=se<Xt?se:Xt;const Sn=navigator.mediaDevices.getSupportedConstraints();(0,os.A)(Sn,"aspectRatio")&&!!Sn.aspectRatio&&(0,et.A)(Ut)&&(vn.minAspectRatio=Ut,vn.maxAspectRatio=Ut),pe.log.info(`Starting screen share with resolution constraints: ${vn.maxWidth} x ${vn.maxHeight} | resolution provided: ${ge} x ${se}`)}else pe.log.info("Starting application window share without proposed resolution");const qt=yield navigator.mediaDevices.getUserMedia($e).catch(k);(qt==null?void 0:qt.getVideoTracks().length)>0?(pe.log.debug(`Applying content hint to content share stream. Content Hint ${Rt}`),qt.getVideoTracks()[0].contentHint=Rt):pe.log.warn("No video tracks where available when starting constrained content share"),setTimeout(()=>{const vn=qt.getVideoTracks()[0].getSettings(),Ut=(0,Hn.MS)(vn==null?void 0:vn.deviceId);Ae.A.publish({type:ce.lx.ScreenshareContentType,update:{screenshareContentType:Ut}}),pe.log.info(`Created video track with resolution: ${vn.width} x ${vn.height} framerate: ${vn.frameRate} aspect ratio: ${vn.aspectRatio}`),ot&&pe.log.info(`Sharing from selected display: ${ot}`)},500),yield pe.audioVideoFacade.startContentShare(qt),setTimeout(()=>pe.applyContentShareConstraints(qt),tt),ct==null||ct.update({name:O.p.SCREENSHARE,type:O.G.START})}else{pe.log.info("Starting unconstrained content share with chime API's startContentShareFromScreenCapture");const se=yield pe.audioVideoFacade.startContentShareFromScreenCapture(ut).catch(k);if(ct==null||ct.update({name:O.p.SCREENSHARE,type:O.G.START}),setTimeout(()=>pe.applyContentShareConstraints(se),tt),(se==null?void 0:se.getVideoTracks().length)>0){pe.log.debug(`Applying content hint to content share stream. Content Hint ${Rt}`),se.getVideoTracks()[0].contentHint=Rt;const ge=se.getVideoTracks()[0].getSettings(),ot=(0,Hn.MS)(ge==null?void 0:ge.deviceId);Ae.A.publish({type:ce.lx.ScreenshareContentType,update:{screenshareContentType:ot}})}else pe.log.warn("No video tracks where available when starting unconstrained content share")}}catch(k){const se=l(()=>{delete pe.waitForStart,pe.isScreenshareEnabled=!1,pe.observer.onScreenShareStopped()},"exitScreenshare");if(k.name==="NotAllowedError"){se(),k.message==="Permission denied by system"&&pe.observer.onCheckSystemMediaAccess(i.mT.SCREEN);return}if(k.name==="OverconstrainedError"){se(),$e&&pe.log.error(`Invalid stream constraints prevented screenshare from succeeding: ${JSON.stringify($e)}`);return}if(["TypeError","AbortError","Error"].includes(k.name)){se(),pe.observer.onScreenShareError(i.lD.ERROR);return}if(k.name==="NotReadableError"){se(),pe.observer.onScreenShareError(i.lD.NOT_READABLE_ERROR);return}throw k.name==="NotFoundError"&&(se(),pe.observer.onScreenShareError(i.lD.NOT_FOUND_ERROR)),pe.log.error(`Encountered an uncaught error attempting to start screen share: ${k.name} ${k.message}`),pe.waitForStart.resolve(!1),se(),k}pe.lastEnableTimeMs=Date.now(),pe.isScreenshareEnabled=b}else pe.isScreenshareEnabled&&(yield pe.stopContentShare())})()}applyContentShareConstraints(b){var z=this;return(0,t.coroutine)(function*(){if(!z.isExperimentalSDK)return;const me=b.getVideoTracks()[0];if(!me){z.log.info("Constraints not re-applied no video track available");return}me.getSettings()||z.log.info("Constraints not re-applied no video track settings available");const ct={width:{ideal:we},height:{ideal:we},frameRate:{ideal:Et}};yield me.applyConstraints(ct),z.log.info("Constraints re-applied to content share (resolution overwrite applied)")})()}isScreenShareEnabled(){return this.isScreenshareEnabled||!1}stopContentShare(){var b=this;return(0,t.coroutine)(function*(){let z=!1;if(b.waitForStart.isPending()?Date.now()-b.lastEnableTimeMs>1e4?(z=!0,b.log.info(`Stop screen share, force: ${Date.now()-b.lastEnableTimeMs} ms since start`)):(b.log.info("Stop screen share, waiting for content share start to resolve"),z=yield b.waitForStart,b.log.info(`Stop screen share, wait for content share start resolve finished: ${z}`)):(z=b.waitForStart.value(),b.log.info(`Stop screen share, promise resolved: ${z}`)),z){b.audioVideoFacade.stopContentShare(),b.isScreenshareEnabled=!1;const{huddleEventsTrace:me}=(0,I.A)().getAllTraceHandlers();me==null||me.update({name:O.p.SCREENSHARE,type:O.G.STOP}),Ae.A.publish({type:ce.lx.ScreenshareContentType,update:null})}else b.log.warn("Screen share disable ignored as screen share was not started successfully");return z})()}constructor(b,z,me,pe){this.audioVideoFacade=b,this.observer=z,this.huddlesJukeboxEnabled=me,this.isExperimentalSDK=pe,this.log=(0,r.tZ)("FREE-WILLY-CONTENT-SHARE"),this.isStopRequested=!1,this.lastEnableTimeMs=0,this.audioVideoFacade.addContentShareObserver(this),this.setScreenshare=R(this,this.setScreenshare,{skipIntermediatePendingRuns:!1})}},"ContentShareManager"),Jt=l(class{addObserver(b){var z,me;(z=this.videoDownlinkPolicy)===null||z===void 0||(me=z.addObserver)===null||me===void 0||me.call(z,b)}removeObserver(b){var z,me;(z=this.videoDownlinkPolicy)===null||z===void 0||(me=z.removeObserver)===null||me===void 0||me.call(z,b)}remoteVideoSourcesDidChange(b){this.videoSources=b,this.updateChimeVideoPreferences()}updateChimeVideoPreferences(){if(!this.videoSources||!this.videoDownlinkPolicy)return;const b=[];this.videoSources.forEach(z=>{var me;const pe=(me=z.attendee)===null||me===void 0?void 0:me.attendeeId;pe===this.selfAttendeeId||!pe||(pe.includes("#content")||!this.isAudioOnlyMode)&&b.push(z)}),this.sendChimeVideoPreferences(b)}constructor({selfAttendeeId:b,videoDownlinkPolicy:z}){this.logger=new ne.k("Huddles Video Streams Manager"),this.isAudioOnlyMode=!1,this.toggleAllIncomingVideo=me=>{this.isAudioOnlyMode=me,this.updateChimeVideoPreferences()},this.sendChimeVideoPreferences=me=>{var pe;try{this.logger.debug(`Sending updated video preferences to chime: ${JSON.stringify(me)}`)}catch{}(pe=this.videoDownlinkPolicy)===null||pe===void 0||pe.chooseRemoteVideoSources(me)},this.videoDownlinkPolicy=z,this.selfAttendeeId=b}},"HuddlesVideoStreamsManager");const an=null;var Ft=e(250256),Vn=e(446632),Pt=e(462787);let Xe=l(class{initialize(b,z){this.gainNode=z,this.audioContext=b}onAudioLevelUpdated(b){isNaN(b.value)||b.value<this.audioLevelActivationThreshold||(this.currentDuckingEndTimeout&&clearTimeout(this.currentDuckingEndTimeout),this.startDucking())}startDucking(){if(!this.gainNode||!this.audioContext)return;const b=this.defaultVolume*this.duckingAudioAdjustmentLevel;this.gainNode.gain.cancelScheduledValues(this.audioContext.currentTime),this.gainNode.gain.exponentialRampToValueAtTime(b,this.audioContext.currentTime+this.fadeInTimeLocal),this.currentDuckingEndTimeout=setTimeout(()=>{this.endDucking()},this.waitForFadeOutTime)}endDucking(){var b;this.gainNode&&this.audioContext&&((b=this.gainNode)===null||b===void 0||b.gain.exponentialRampToValueAtTime(this.defaultVolume,this.audioContext.currentTime+this.fadeOutTime))}constructor(b){this.defaultVolume=b,this.fadeOutTime=20,this.fadeInTimeLocal=.2,this.waitForFadeOutTime=3e3,this.duckingAudioAdjustmentLevel=.2,this.audioLevelActivationThreshold=.04,this.onAudioLevelUpdated=this.onAudioLevelUpdated.bind(this),Pt.A.subscribeAll(this.onAudioLevelUpdated)}},"JukeboxDucker");const Ze="HUDDLE-JUKEBOX";let lt=l(class{startLocalJukebox(b){let{song:z,volume:me}=b;var pe=this;return(0,t.coroutine)(function*(){var ct;const ut=pe.getSongUrl({song:z});if(ut===pe.localAudioUrl)return;pe.callLogger.info(`Starting local jukebox song key: ${z.key}.`),pe.audioContext||(pe.audioContext=new AudioContext),pe.cleanup(),pe.localAudioUrl=ut;const k=yield(yield window.fetch(ut)).arrayBuffer(),se=yield pe.audioContext.decodeAudioData(k);pe.audioBufferSourceNode=pe.audioContext.createBufferSource(),pe.audioBufferSourceNode.buffer=se,pe.localAudio=new Audio,pe.localAudio.volume=me,pe.localMediaStreamAudioDestinationNode=pe.audioContext.createMediaStreamDestination(),pe.gainNode=pe.audioContext.createGain(),(ct=pe.jukeboxDucker)===null||ct===void 0||ct.initialize(pe.audioContext,pe.gainNode),pe.gainNode.gain.value=pe.defaultVolume,pe.audioBufferSourceNode.connect(pe.gainNode),pe.gainNode.connect(pe.localMediaStreamAudioDestinationNode),pe.localAudio.srcObject=pe.localMediaStreamAudioDestinationNode.stream,pe.audioBufferSourceNode.loop=!0,pe.audioBufferSourceNode.start(),pe.localAudio.play()})()}startContentShareJukebox(b){let{song:z}=b;var me=this;return(0,t.coroutine)(function*(){var pe,ct;me.audioContext||(me.audioContext=new AudioContext),me.audioDestination||(me.audioDestination=me.audioContext.createMediaStreamDestination()),me.callLogger.info(`Starting jukebox song key: ${z.key}`),me.cleanup();const ut=me.getSongUrl({song:z}),k=yield(yield window.fetch(ut)).arrayBuffer(),se=yield me.audioContext.decodeAudioData(k);return me.audioBufferSourceNode=me.audioContext.createBufferSource(),me.audioBufferSourceNode.buffer=se,me.localAudio=new Audio,me.localMediaStreamAudioDestinationNode=me.audioContext.createMediaStreamDestination(),me.gainNode=me.audioContext.createGain(),(pe=me.jukeboxDucker)===null||pe===void 0||pe.initialize(me.audioContext,me.gainNode),me.gainNode.gain.value=me.defaultVolume,me.audioBufferSourceNode.connect(me.gainNode),me.gainNode.connect(me.audioDestination),me.gainNode.connect(me.localMediaStreamAudioDestinationNode),me.localAudio.srcObject=me.localMediaStreamAudioDestinationNode.stream,me.audioBufferSourceNode.loop=!0,me.audioBufferSourceNode.start(),me.localAudio.play(),(ct=me.audioDestination)===null||ct===void 0?void 0:ct.stream})()}stopJukebox(){this.callLogger.info(`Stopping jukebox for song: ${this.localAudioUrl||""}`),this.cleanup(),this.audioContext=void 0,this.audioDestination=void 0}cleanup(){var b,z,me,pe;(b=this.audioBufferSourceNode)===null||b===void 0||b.stop(),this.audioBufferSourceNode=void 0,(z=this.localAudio)===null||z===void 0||z.pause(),this.localAudio=void 0,this.localAudioUrl=void 0,(me=this.gainNode)===null||me===void 0||me.disconnect(),this.gainNode=void 0,(pe=this.audioDestination)===null||pe===void 0||pe.disconnect()}hasAudio(){return!!this.localAudio}getVolume(){var b;return(b=this.localAudio)===null||b===void 0?void 0:b.volume}getSongUrl(b){let{song:z}=b;return z.url}constructor(){this.defaultVolume=.3,this.callLogger=(0,r.Jt)(Ze),this.callLogger.info("Huddle Jukebox Manager created."),this.jukeboxDucker=new Xe(this.defaultVolume)}},"JukeboxManager");const qe=(0,Vn.A)(()=>new lt),Kt={connectionWaitTimeMs:5*1e3,connectionUnhealthyThreshold:10,sendingAudioFailureSamplesToConsider:2,sendingAudioFailureInitialWaitTimeMs:3*1e3},ln={connectionWaitTimeMs:10*1e3,connectionUnhealthyThreshold:25,sendingAudioFailureSamplesToConsider:5,sendingAudioFailureInitialWaitTimeMs:10*1e3},Cn=l(class{constructor({enableExperimentalConfig:b}){this.enableExperimentalConfig=!1,this.getConfiguration=()=>this.enableExperimentalConfig?ln:Kt,this.enableExperimentalConfig=!!b}},"ConnectionHealthPolicyManager");var wn=e(80596),$n=e(949252),es;(function(At){At.Control="control",At.Vp8="vp8",At.Vp8Svc="vp8_svc",At.Vp9="vp9",At.Vp9Svc="vp9_svc",At.Av1="av1",At.Av1Svc="av1_svc"})(es||(es={}));const ns=(0,Y.Wo)({label:"HUDDLE-VIDEO-CODECS"}),jn=function(){var At=(0,t.coroutine)(function*(b){let{audioVideoFacade:z,h264BaselineProfileEnabled:me,disableVp9:pe}=b;var ct,ut;const $e=[];!(0,y.gm)()&&!pe&&$e.push(s.KK.vp9()),me&&$e.push(s.KK.h264BaselineProfile()),$e.push(s.KK.h264()),ns.info(`Setting preferred camera video codec to ${(ct=$e[0])===null||ct===void 0?void 0:ct.codecName}`),ns.debug("Setting camera video codec preferences",$e),(ut=z.setVideoCodecSendPreferences)===null||ut===void 0||ut.call(z,$e)});return l(function(z){return At.apply(this,arguments)},"setCameraVideoCodec")}(),ts=function(){var At=(0,t.coroutine)(function*(b){let{useAv1:z,audioVideoFacade:me,h264BaselineProfileEnabled:pe}=b;var ct,ut;const $e=[];z&&$e.push(s.KK.av1()),pe&&$e.push(s.KK.h264BaselineProfile()),$e.push(s.KK.h264()),ns.info(`Setting preferred content share video codec to ${(ct=$e[0])===null||ct===void 0?void 0:ct.codecName}`),ns.debug("Setting content share video codec preferences",$e),(ut=me.setContentShareVideoCodecPreferences)===null||ut===void 0||ut.call(me,$e)});return l(function(z){return At.apply(this,arguments)},"setScreenshareVideoCodec")}();class Xn{initialize(b,z,me,pe,ct,ut){var $e=this;return(0,t.coroutine)(function*(){var k,se,ge,ot,nn,qt,vn,Ut;ct&&($e.waitForStop=ct),ut&&($e.dataChannelSubscribers=ut),$e.observer.onInit(),$e.options=b;const{serverConfig:Xt,useChimeSdkExp:Sn,useSimulcast:Yn,useGetMediaAccessCheckForWindows:Qe}=$e.options;yield(0,s.ZT)(Sn),$e.chimeLogger=new ne.k($e.loggerName),$e.callLogger=(0,r.Jt)($e.loggerName),(k=$e.callLogger)===null||k===void 0||k.info(`user agent: ${navigator.userAgent}`);const yt=(0,c.HF)();(se=$e.callLogger)===null||se===void 0||se.info(`Version TS: ${yt}`);const Ht=(document==null||(ge=document.documentElement)===null||ge===void 0||(ot=ge.dataset)===null||ot===void 0?void 0:ot.versionHash)||"unknown";(nn=$e.callLogger)===null||nn===void 0||nn.info(`Version Hash: ${Ht}`),(qt=$e.callLogger)===null||qt===void 0||qt.info(`Chime SDK Version: ${s.zF.sdkVersion}${Sn?" (Experimental)":""}`),$e.meeting=Xt.meeting,$e.attendee=Xt.attendee,$e.selfAttendeeId=$e.attendee.AttendeeId;const it=(0,m.Y)(Xt.attendee.ExternalUserId);try{var st;const rs=JSON.stringify(b);(st=$e.callLogger)===null||st===void 0||st.debug(`Huddle SDK [${it}] initialized with options: ${rs}`)}catch(rs){var gt;(gt=$e.callLogger)===null||gt===void 0||gt.error("Error stringifying options",rs)}if($e.transportProtocols=Xt.transportProtocols,$e.isPrejoin=$e.options.isPrejoin,$e.meetingSessionConfiguration=new s.QJ($e.meeting,$e.attendee),Yn&&$e.meetingSessionConfiguration){var Ue;(Ue=$e.callLogger)===null||Ue===void 0||Ue.info("Simulcast enabled"),$e.meetingSessionConfiguration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}if($e.options.usePriorityDownlinkPolicy&&($e.videoDownlinkPolicy=new s.gi($e.selfAttendeeId),$e.meetingSessionConfiguration.videoDownlinkBandwidthPolicy=$e.videoDownlinkPolicy,$e.meetingSessionConfiguration.keepLastFrameWhenPaused=!0,$e.videoStreamsManager=new Jt({selfAttendeeId:$e.selfAttendeeId,videoDownlinkPolicy:$e.videoDownlinkPolicy})),$e.meetingSessionConfiguration.urls&&($e.meetingSessionConfiguration.urls.urlRewriter=$e.urlRewriter.bind($e)),$e.meetingSessionConfiguration&&$e.meetingSessionConfiguration.connectionHealthPolicyConfiguration&&(0,n.A)($e.options.enableExperimentalConnectionHealthPolicyConfig)){const rs=new Cn({enableExperimentalConfig:$e.options.enableExperimentalConnectionHealthPolicyConfig});Object.assign($e.meetingSessionConfiguration.connectionHealthPolicyConfiguration,rs.getConfiguration())}$e.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender=!0,yield $e.initVoiceFocus();const Bt={audio:z.includes(i.mT.MICROPHONE),video:z.includes(i.mT.CAMERA)};s.vB.disable();let zt;const En=!!(!((vn=$e.voiceFocusManager)===null||vn===void 0)&&vn.isAvailable()),tn=$e.options.disableAudioRedundancy||!1;if(Sn){const rs=(0,s.Q_)(),Jn=(0,s.RM)();if($e.defaultDeviceController=new Jn($e.chimeLogger,{enableWebAudio:En}),$e.defaultDeviceController.setDeviceLabelTrigger(()=>navigator.mediaDevices.getUserMedia(Bt)),$e.sessionExp=new rs($e.meetingSessionConfiguration,$e.chimeLogger,$e.defaultDeviceController),zt=$e.sessionExp.audioVideo,tn){const is=(0,s.Ls)();zt.setAudioProfile(new is(null,!1)),zt.setContentAudioProfile(new is(null,!1))}}else{const rs=(0,s.of)(),Jn=(0,s.zg)();if($e.defaultDeviceController=new Jn($e.chimeLogger,{enableWebAudio:En}),$e.defaultDeviceController.setDeviceLabelTrigger(()=>navigator.mediaDevices.getUserMedia(Bt)),$e.session=new rs($e.meetingSessionConfiguration,$e.chimeLogger,$e.defaultDeviceController),zt=$e.session.audioVideo,tn){const is=(0,s.j3)();zt.setAudioProfile(new is(null,!1)),zt.setContentAudioProfile(new is(null,!1))}}const jt=$e.options.useH264Baseline||!1;jn({audioVideoFacade:zt,h264BaselineProfileEnabled:jt,disableVp9:!!$e.options.disableVp9});const on=$e.options.useH264BaselineScreenshare||!1,In=$e.options.useAv1Screenshare;ts({useAv1:In,audioVideoFacade:zt,h264BaselineProfileEnabled:on});const Pn={useGetMediaAccessCheckForWindows:Qe,backgroundVideoFilteringSetting:o.uT.Both},Fn=$e.options.useDeviceManagerV2?X:J;$e.deviceManager=new Fn(zt,$e.audioOutputElement,$e.observer,Pn,me,$e.chimeLogger,$e.defaultDeviceController,$e.voiceFocusManager),(Ut=$e.dataChannelSubscribers)===null||Ut===void 0||Ut.forEach(rs=>rs.onInitializeDataChannelSubscriber()),$e.audioVideoObserver=new An($e.selfAttendeeId,$e.meeting.MeetingId,$e.meeting.MediaRegion,it,zt,$e.observer,$e.deviceManager,$e.videoStreamsManager,pe,$e.waitForStop,$e.dataChannelSubscribers);const fs=$e.options.huddlesJukeboxEnabled;if(fs){var Un;(Un=$e.callLogger)===null||Un===void 0||Un.info("Huddles Jukebox experiment enabled (prototype)")}$e.contentShareManager=new It(zt,$e.observer,!!fs,Sn),$e.audioVideoFacadeSubscriber=new Kn($e.selfAttendeeId,zt,$e.observer),(0,wn.Ay)().initialize(),$e.connect(),$e.screenManager=new u.A,$e.observer.onMeetingSessionInitialized(),$e.waitForInit.resolve()})()}shutdown(b){var z=this;return(0,t.coroutine)(function*(){var me,pe,ct,ut,$e,k;if((me=z.callLogger)===null||me===void 0||me.info("Huddles SDK shutdown initiated"),yield z.waitForInit,z.cleanupDataChannelSubscribers(),(pe=z.contentShareManager)===null||pe===void 0||pe.stop(),(ct=z.audioVideoObserver)===null||ct===void 0||ct.stop(),yield(ut=z.deviceManager)===null||ut===void 0?void 0:ut.shutdown(),$n.F.doesInstanceExist()){var se;(se=$n.F.getInstance())===null||se===void 0||se.release()}($e=z.audioVideoFacadeSubscriber)===null||$e===void 0||$e.destroy(),yield z.waitForStop,delete z.session,delete z.sessionExp,delete z.meetingSessionConfiguration,yield z.cleanupDefaultDeviceControllerRefs(),(k=z.callLogger)===null||k===void 0||k.info("Huddles SDK shutdown completed"),delete z.chimeLogger,delete z.callLogger,delete z.deviceManager,delete z.audioVideoFacadeSubscriber,delete z.audioVideoObserver,delete z.contentShareManager,delete z.screenManager,delete z.voiceFocusManager,delete z.videoStreamsManager,delete z.videoDownlinkPolicy,b&&b()})()}selfMicrophoneEnabled(b){var z;(z=this.deviceManager)===null||z===void 0||z.setMicrophone(b)}selfVideoEnabled(b,z,me,pe){var ct,ut;(ct=this.deviceManager)===null||ct===void 0||ct.setCamera(b),(ut=this.contentShareManager)===null||ut===void 0||ut.setScreenshare(z,me,pe)}startContentShareJukebox(b){let{song:z}=b;var me=this;return(0,t.coroutine)(function*(){var pe;const ct=yield qe().startContentShareJukebox({song:z});ct&&((pe=me.contentShareManager)===null||pe===void 0||pe.setSongStream(ct))})()}selfStopJukebox(){var b=this;return(0,t.coroutine)(function*(){var z;qe().stopJukebox(),(z=b.contentShareManager)===null||z===void 0||z.stopMusic({cleanObserver:!1})})()}setCameraQuality(b,z,me,pe){var ct;(ct=this.deviceManager)===null||ct===void 0||ct.setCameraQuality(b,z,me,pe)}setAGC(b){var z;(z=this.deviceManager)===null||z===void 0||z.setAGC(b)}setNewPreferredDevice(b,z){var me;(me=this.deviceManager)===null||me===void 0||me.setPreferredDevice(b,z)}setNoiseSuppression(b){var z;(z=this.deviceManager)===null||z===void 0||z.setNoiseSuppression(b)}setVideoBackgroundEffect(b){var z;(z=this.deviceManager)===null||z===void 0||z.setVideoBackgroundEffect(b)}requestPreviewStreamForDeviceId(b,z,me){var pe;(pe=this.deviceManager)===null||pe===void 0||pe.requestPreviewStreamForDeviceId(b,z,me)}stopVideoPreviewForVideoInput(b){var z;(z=this.deviceManager)===null||z===void 0||z.stopVideoPreviewForVideoInput(b)}getScreenThumbnails(b){var z=this;return(0,t.coroutine)(function*(){var me;return yield(me=z.screenManager)===null||me===void 0?void 0:me.getScreenThumbnails(b==null?void 0:b.thumbnailDimensions,b==null?void 0:b.isRefetch)})()}selfDrawEnabled(b){var z;(z=this.audioVideoFacadeSubscriber)===null||z===void 0||z.selfDrawEnabled(b)}sendReacji(b,z){var me;(me=this.audioVideoFacadeSubscriber)===null||me===void 0||me.sendReacji(b,z)}sendBackground(b){var z;(z=this.audioVideoFacadeSubscriber)===null||z===void 0||z.sendBackground(b)}sendMuteRequest(b){var z;(z=this.audioVideoFacadeSubscriber)===null||z===void 0||z.sendMuteRequest(b)}sendJukeboxRequest(b){var z;(z=this.audioVideoFacadeSubscriber)===null||z===void 0||z.sendJukeboxRequest(b)}sendJukeboxStopRequest(){var b;(b=this.audioVideoFacadeSubscriber)===null||b===void 0||b.sendJukeboxStopRequest()}sendDrawMessage(b){var z;(z=this.audioVideoFacadeSubscriber)===null||z===void 0||z.sendDrawMessage(b)}sendContentShareDetails(b){var z;(z=this.audioVideoFacadeSubscriber)===null||z===void 0||z.sendContentShareDetails(b)}sendRecordingStartNotification(){var b;(b=this.audioVideoFacadeSubscriber)===null||b===void 0||b.sendRecordingStartNotification()}maybeBindAudioOutputElement(){var b;(b=this.deviceManager)===null||b===void 0||b.maybeBindAudioOutputElement()}maybeCheckSystemMediaAccess(b){var z;return(z=this.deviceManager)===null||z===void 0?void 0:z.maybeCheckSystemMediaAccess(b)}setIncludeSelfAndNoneActiveSpeaker(b,z){var me;(me=this.audioVideoFacadeSubscriber)===null||me===void 0||me.setIncludeSelfAndNoneActiveSpeaker(b,z)}bindVideo(b,z,me){var pe;const ct=this.session||this.sessionExp;if(!ct)return;const ut=(pe=ct.audioVideo.getVideoTile(b))===null||pe===void 0?void 0:pe.state();me?ut!=null&&ut.boundVideoStream&&s.xc.connectVideoStreamToVideoElement(ut.boundVideoStream,z,!1):(this.videoDownlinkPolicy&&(ut!=null&&ut.paused)&&ct.audioVideo.unpauseVideoTile(b),ct.audioVideo.bindVideoElement(b,z))}unbindVideo(b,z,me){const pe=this.session||this.sessionExp;pe&&(me?s.xc.disconnectVideoStreamFromVideoElement(z,!0):pe.audioVideo.getVideoTile(b)&&pe.audioVideo.unbindVideoElement(b))}pauseVideo(b){const z=this.session||this.sessionExp;if(!z)return;const me=z.audioVideo.getVideoTile(b),pe=me==null?void 0:me.state();!(pe!=null&&pe.isContent)&&(pe!=null&&pe.active)&&(me==null||me.pause())}unpauseVideo(b){const z=this.session||this.sessionExp;if(!z)return;const me=z.audioVideo.getVideoTile(b),pe=me==null?void 0:me.state();pe!=null&&pe.paused&&(me==null||me.unpause())}videoTileHasStream(b){const z=this.session||this.sessionExp;if(!z)return!1;const me=z.audioVideo.getVideoTile(b);if(!me)return!1;const pe=me.state();return pe?!!pe.boundVideoStream:!1}getMeetingMediaRegion(){var b;return(b=this.meeting)===null||b===void 0?void 0:b.MediaRegion}completePrejoin(b){var z=this;return(0,t.coroutine)(function*(){const{isStartMuted:me}=b;if(z.isPrejoin){var pe,ct;return me&&((pe=z.deviceManager)===null||pe===void 0||pe.setStartMutedBarrier(me)),(ct=z.audioVideoObserver)===null||ct===void 0||ct.start(),z.maybeBindAudioOutputElement(),z.setIncludeSelfAndNoneActiveSpeaker(!0,!0),z.isPrejoin=!1,!0}return!1})()}urlRewriter(b){if(!b)return b;if(this.transportProtocols){const ct=this.transportProtocols;if(b.includes("?transport=udp")&&!ct.includes("udp")){var z;return(z=this.callLogger)===null||z===void 0||z.info("Dropping UDP transport"),""}if(b.includes("?transport=tcp")){if(b.includes("turns:")){if(!ct.includes("tls")){var me;return(me=this.callLogger)===null||me===void 0||me.info("Dropping TLS transport"),""}}else if(!ct.includes("tcp")){var pe;return(pe=this.callLogger)===null||pe===void 0||pe.info("Dropping TCP transport"),""}}}return b.replace(`:${this.TURN_PORT_UDP}`,`:${this.OVERRIDE_TURN_PORT_UDP}`)}hasSession(){return!!this.session||!!this.sessionExp}setupVideoDeviceLabelTrigger(){var b,z=this;const me=function(){var pe=(0,t.coroutine)(function*(){try{var ct;z.videoDevicePermissionStatus="IN_PROGRESS";const $e=yield navigator.mediaDevices.getUserMedia({video:!0});return(ct=z.callLogger)===null||ct===void 0||ct.info("Video device permissions granted"),z.videoDevicePermissionStatus="GRANTED",$e}catch($e){var ut;throw z.videoDevicePermissionStatus="DENIED",z.observer.onSetNoMediaInput(i.mT.CAMERA),(ut=z.callLogger)===null||ut===void 0||ut.info("Video device permissions denied"),$e}});return l(function(){return pe.apply(this,arguments)},"callback")}();(b=this.defaultDeviceController)===null||b===void 0||b.setDeviceLabelTrigger(me)}maybeEnableSelfCamera(){let{isScreenshareEnabled:b}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var z=this;return(0,t.coroutine)(function*(){if((yield z.initVideoPermission())&&(z.videoDevicePermissionStatus==="INITIAL"||z.videoDevicePermissionStatus==="GRANTED")){var pe;z.selfVideoEnabled(!0,!!b),z.observer.onPeerCameraActive("self",!0),(pe=z.callLogger)===null||pe===void 0||pe.info("maybeEnableSelfCamera:: enabling camera function executed")}})()}initVideoPermission(){var b=this;return(0,t.coroutine)(function*(){var z;return b.setupVideoDeviceLabelTrigger(),yield(z=b.deviceManager)===null||z===void 0?void 0:z.initVideoInputDevices()})()}getSelfAttendeeId(){return this.selfAttendeeId}constructor(b,z,me="FREE-WILLY-SDK"){this.observer=b,this.audioOutputElement=z,this.loggerName=me,this.TURN_PORT_UDP=3478,this.OVERRIDE_TURN_PORT_UDP=22466,this.waitForInit=(0,a.u)(),this.waitForStop=(0,a.u)();var pe=this;this.initVoiceFocus=(0,t.coroutine)(function*(){let $e=0;const k=Date.now();pe.voiceFocusManager=new Ft.A(pe.chimeLogger),yield pe.voiceFocusManager.init({configOnly:!1}),$e=Date.now()-k,pe.observer.onMaybeVoiceFocusInitialized($e)}),this.cleanupDataChannelSubscribers=()=>{this.dataChannelSubscribers&&(this.dataChannelSubscribers.forEach($e=>$e.onShutdownDataChannelSubscriber()),this.dataChannelSubscribers=void 0)};var ct=this;this.cleanupDefaultDeviceControllerRefs=(0,t.coroutine)(function*(){var $e;if(!ct.defaultDeviceController)return;yield ct.defaultDeviceController.destroy();const k=($e=ct.defaultDeviceController)===null||$e===void 0?void 0:$e.eventController;if(k){var se;const ge=(se=k.configuration)===null||se===void 0?void 0:se.urls;ge&&(ge.urlRewriter=void 0)}ct.defaultDeviceController.deviceLabelTrigger=void 0,delete ct.defaultDeviceController}),this.handleClientOffline=()=>{var $e;($e=this.audioVideoObserver)===null||$e===void 0||$e.audioVideoDidStartConnecting(!0)},this.toggleAllIncomingVideo=$e=>{var k;(k=this.videoStreamsManager)===null||k===void 0||k.toggleAllIncomingVideo($e)};var ut=this;this.connect=(0,t.coroutine)(function*(){var $e,k;if(($e=ut.audioVideoObserver)===null||$e===void 0||$e.startWithSignalingOnly(),yield(k=ut.deviceManager)===null||k===void 0?void 0:k.init(),!ut.isPrejoin){var se;if(!re.Ay.canAccessMediaResource(i.mT.MICROPHONE)){var ge;(ge=ut.callLogger)===null||ge===void 0||ge.error("Missing microphone permissions. Not connecting to huddle");return}(se=ut.audioVideoObserver)===null||se===void 0||se.start()}}),this.videoDevicePermissionStatus="INITIAL"}}l(Xn,"FreeWillySdk")},688357:(j,T,e)=>{"use strict";e.d(T,{An:()=>a,Kp:()=>u,Nb:()=>s,RN:()=>m,Sq:()=>o,ZT:()=>t,jt:()=>i,tz:()=>c,w4:()=>r,yz:()=>n});const t=10*1e3,n=1e3,s="2.5",a=450*450,c=25,r=15,o="huddles_perf",u="app_metrics",m="client_metrics",i=5},643492:(j,T,e)=>{"use strict";e.d(T,{$c:()=>O,h7:()=>M,t5:()=>A,e7:()=>d,KG:()=>P,q4:()=>v,_N:()=>p,sI:()=>V,Ap:()=>h,kq:()=>S,ik:()=>y,No:()=>F,fB:()=>D,Ye:()=>E,RI:()=>m,Fq:()=>x,oj:()=>_,qf:()=>L,Tg:()=>f});const t=30,n=300,s=300,a=30,c=10,r=30,o=1,u=l(R=>function(w){for(var Y=arguments.length,Q=new Array(Y>1?Y-1:0),Z=1;Z<Y;Z++)Q[Z-1]=arguments[Z];if(!(typeof w!="string"&&typeof w!="number"))return R(w,...Q)},"makeDeduction"),m=u(R=>R>a?R/5:void 0),i=u(R=>R>400?R/20:void 0),d=u(R=>R>1?R:void 0),_=u(R=>R>s?R/7.5:void 0),h=u(R=>R>1?R*10:void 0),p=u(R=>R>t?R/2:void 0),A=u(R=>R>r?R*1.25:void 0),v=u(R=>R>n?R/10:void 0),E=u(R=>R>r?R*1.5:void 0),f=u(R=>R>c?R*1.5:void 0),g=u(R=>R*2),y=u(R=>R&&R!=="udp"?40:void 0),I=u(R=>R&&R>500?R/100:void 0),O=u(R=>R>150?R/5:void 0),M=u(R=>R>15?R*2:void 0),C=u(R=>R>5?R:void 0),P=u(R=>R>20?R/5:void 0),L=u(R=>R>1?R*2.5:void 0),x=u(R=>!R||R==="none"?void 0:25),F=u(R=>R>0?R*20:void 0),V=u(R=>R>1?R*1.25:void 0),B=u(R=>R>300?R/10:void 0),D=u(R=>R&&R>r?R*1.5:void 0),S=u(R=>R>o?Math.round(R*7.5):void 0)},491528:(j,T,e)=>{"use strict";e.d(T,{Zr:()=>g,gR:()=>v,kB:()=>f,oB:()=>y,ws:()=>A,zT:()=>E});var t=e(358682),n=e(314878),s=e(682520),a=e(885850),c=e(113574),r=e(709703);const o=(0,s.Wo)({label:"HUDDLE-RTM-FILTER"}),u=new Set(["file_shared","file_created","file_unshared"]),m=new Set(["sh_room_join","huddle_invite_cancel","update_thread_state","thread_subscribed"]);let i=l(class{constructor(O){this.skippedCount=0,this.allowedCount=0,this.allowedTypes={},this.updateSubscribedChannels=()=>{const C=this.getState();this.mutedChannels=(0,n.m)(C);const P=(0,a.D5)(C);this.joinedChannelIds=new Set(P.map(L=>L.id)),o.info(`Huddle RTM filter initialized. XWS joined channel count: ${this.joinedChannelIds.size} - Muted channel count: ${this.mutedChannels?Object.keys(this.mutedChannels).length:0}`)},this.getTopAllowedTypes=()=>this.allowedCount?Object.entries(this.allowedTypes).sort((C,P)=>{let[,L]=C,[,x]=P;return x-L}).slice(0,5).map(C=>{let[P]=C;return P}).join(" "):"",this.getPercentSkipped=()=>Math.round(this.skippedCount/(this.skippedCount+this.allowedCount)*100),this.isChannelDm=C=>C.startsWith("D"),this.isChannelMuted=C=>!C||!this.mutedChannels?!1:!!this.mutedChannels[C],this.isChannelJoined=C=>!C||!this.joinedChannelIds?!1:!!this.joinedChannelIds.has(C),this.skipRtm=()=>(this.skippedCount+=1,!0),this.allowRtm=C=>{this.allowedCount+=1;const P=C.type==="message"?`${C.type}/${C.subtype}`:C.type;return this.allowedTypes[C.type]=(this.allowedTypes[P]||0)+1,o.debug(`Allowed RTM type: ${C.type} - subtype: ${C.subtype}`,C),!1},this.shouldSkipRtm=C=>{var P,L;if(m.has(C.type))return this.allowRtm(C);if(((P=C.user)===null||P===void 0?void 0:P.id)===this.currentUserId||C.user===this.currentUserId)return this.allowRtm(C);if(C.type==="channel_joined"||C.type==="mpim_joined"||C.type==="im_open"||C.type==="member_joined_channel"||C.type==="message"&&C.subtype==="channel_join"||C.type==="desktop_notification"&&C.is_channel_invite)return o.info("Received IM/MPDM/channel join RTM. Updating channel references",C),this.updateSubscribedChannels(),this.allowRtm(C);const x=C.channel||((L=C.item)===null||L===void 0?void 0:L.channel)||C.channel_id,F=(0,r.A)(x)?x:void 0;return F&&this.isChannelDm(F)?this.allowRtm(C):F&&this.isChannelMuted(F)?this.skipRtm():F&&!this.isChannelJoined(F)?this.skipRtm():t.Sj.has(C.type)&&!u.has(C.type)?this.skipRtm():C.type==="dnd_invalidated"?this.skipRtm():C.type==="bot_added"||C.type==="bot_changed"||C.type==="hermes_trigger_updated"||C.type==="apps_changed"||C.type==="apps_installed"||C.type==="apps_uninstalled"?this.skipRtm():this.allowRtm(C)};const M=O();this.getState=O,this.currentUserId=(0,c.WR)(M),this.updateSubscribedChannels()}},"HuddleRtmFilter"),d,_,h=0;const p=l(()=>{h=0,_=Date.now()},"clearRtmsSinceLastReport"),A=l(I=>{try{o.info("initializing Huddle RTM filter"),d||(d=new i(I),p())}catch(O){o.error("Error in initHuddleRtmFilter",O)}},"initHuddleRtmFilter"),v=l(()=>{o.info("destroying Huddle RTM filter"),d=void 0,p()},"destroyHuddleRtmFilter"),E=l(()=>{if(d)return d.getPercentSkipped()},"getRtmFilterPercentSkipped"),f=l(()=>{if(d)return d.getTopAllowedTypes()},"getRtmFilterTopAllowedTypes"),g=l(I=>{try{return h+=1,_||(_=Date.now()),d?d.shouldSkipRtm(I):!1}catch(O){return o.error("Error in shouldSkipRtmDuringHuddle",O),!1}},"shouldSkipRtmDuringHuddle"),y=l(()=>{try{if(!_||!h)return 0;const I=Date.now()-_,O=Math.round(h/(I/1e3));return p(),O}catch(I){return o.error("Error in getRtmsPerSecond",I),0}},"getRtmsPerSecond")},716685:(j,T,e)=>{"use strict";e.d(T,{Gl:()=>M,Pk:()=>I,TK:()=>O,V_:()=>P,nu:()=>C});var t=e(531251),n=e(64741),s=e(21879),a=e(389610),c=e(446632),r=e(540291),o=e(682520);const u=1e3,m=500,i=3*1e3,d=250,_=1,h=5,p=100,A=20,v=5e3,E=5,f=(0,o.Ay)({label:"HUDDLE-RTM-SCHEDULER"});let g=l(class{reportMetrics(F){const{cpuCompetitionScore:V}=F;if(!V)return;const B=p-V;if(B<A)this.decreaseDelay();else{const D=(0,t.A)(Math.floor(B/A),_,h);this.increaseDelayWithMultiplier(D)}}constructor(){var F=this;this.currentDelay=u,this.taskQueueLength=0,this.resetSchedulerState=()=>{this.currentDelay=u,this.currentQueueDrainFn=void 0,this.taskQueueLength=0},this.increaseDelayWithMultiplier=function(){const B=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*d,D=F.currentDelay+B;F.setNextDelay(D)},this.decreaseDelay=()=>{if(this.currentDelay===m)return;const V=this.currentDelay-d;this.setNextDelay(V)},this.setNextDelay=(0,n.A)(V=>{if(!(0,s.A)(V))return;const B=this.currentDelay;this.currentDelay=(0,t.A)(V,m,i),B!==this.currentDelay&&f.debug(`Updated current RTM processing delay to ${this.currentDelay}`)},v,{leading:!0,maxWait:v}),this.scheduleQueueDrain=V=>{if(!(0,a.A)(V))return;if(this.taskQueueLength>E){f.info("too many RTM tasks enqueued, executing queue drain immediately"),V(),this.taskQueueLength=0;return}f.debug(`scheduling RTM queue drain with delay of ${this.currentDelay}`);const B=Date.now();return this.taskQueueLength+=1,this.currentQueueDrainFn=V,(0,r.IE)("huddle-rtm",V,{delay:this.currentDelay}).then(()=>{f.debug(`successfully executed rtm queue drain after ${Date.now()-B}ms`)}).catch(D=>{(0,a.A)(this.currentQueueDrainFn)?this.currentQueueDrainFn():(f.error("queue drain function not defined. Attempting queue drain function in scope"),(0,a.A)(V)&&V()),f.warn(`an error occurred while processing rtm queue drain: ${D.toString()}`)}).finally(()=>{this.taskQueueLength-=1})},this.onHuddleEnd=()=>{var V,B;(B=(V=this).currentQueueDrainFn)===null||B===void 0||B.call(V),f.info("Huddle ended. Drained queue and returned scheduling control to base RTM processor"),this.resetSchedulerState()},this.getCurrentDelay=()=>this.currentDelay,this.getTaskQueueLength=()=>this.taskQueueLength,f.info(`Initialized Huddle RTM scheduler with initial delay of ${this.currentDelay}`)}},"HuddleRtmScheduler");const y=(0,c.A)(()=>new g),I=l((x,F)=>{(F||y()).reportMetrics(x)},"reportMetricsToRtmScheduler"),O=l(x=>{(x||y()).onHuddleEnd()},"reportHuddleEndToRtmScheduler"),M=l((x,F)=>{(F||y()).scheduleQueueDrain(x)},"scheduleHuddleRtmQueueDrain"),C=l(x=>(x||y()).getTaskQueueLength(),"getCurrentRtmTaskQueueLength"),P=l(x=>(x||y()).getCurrentDelay(),"getCurrentRtmSchedulerDelay"),L=null},69938:(j,T,e)=>{"use strict";e.d(T,{ZR:()=>a,jm:()=>n,s2:()=>s});let t;const n=l(c=>{t||(t={}),Object.assign(t,c)},"updateJoinTimingMetrics"),s=l(()=>t,"getJoinTimingMetrics"),a=l(()=>{t=void 0},"resetJoinTimingMetrics")},859790:(j,T,e)=>{"use strict";e.d(T,{lx:()=>u,zu:()=>o});var t;(function(m){m.UDP="udp",m.TCP="tcp"})(t||(t={}));var n;(function(m){m.RELAY="relay",m.DIRECT="direct"})(n||(n={}));var s;(function(m){m.UPLINK="uplink",m.DOWNLINK="downlink"})(s||(s={}));var a;(function(m){m.GOOD="good",m.FAIR="fair",m.BAD="bad",m.WORST="worst"})(a||(a={}));var c;(function(m){m.GOOD="good",m.FAIR="fair",m.BAD="bad",m.WORST="worst"})(c||(c={}));var r;(function(m){m[m.UPSTREAM=0]="UPSTREAM",m[m.DOWNSTREAM=1]="DOWNSTREAM"})(r||(r={}));var o;(function(m){m[m.AUDIO=0]="AUDIO",m[m.VIDEO=1]="VIDEO"})(o||(o={}));var u;(function(m){m.RtmMetrics="rtm-metrics",m.RenderTiming="render-timing",m.BluetoothDevices="bluetooth-devices",m.MemoryLeaks="memory-leaks",m.SelectedMediaRegion="selected-media-region",m.PreferredMediaRegion="preferred-media-region",m.VoiceFocusConfig="voice-focus-config",m.NetworkDisconnect="network-disconnect",m.CallId="call-id",m.ScreenshareContentType="screenshare-content-type",m.AppMetrics="app-metrics",m.NoAudio="no-audio",m.CameraResolution="max-camera-resolution",m.SetIsDebugApp="set-is-debug-app",m.TroubleshootingContactUsClicked="troubleshooting-contact-us-clicked",m.TroubleshootingEntryPoint="troubleshooting-entry-point",m.TroubleshootingExitHealthSnapshot="troubleshooting-exit-health-snapshot"})(u||(u={}))},550521:(j,T,e)=>{"use strict";e.d(T,{A:()=>n});var t=e(46935);const n=new t.G},95500:(j,T,e)=>{"use strict";e.d(T,{U:()=>a,p:()=>r});var t=e(470387),n=e(643492);const s=20,a=80,c=60,r=l(o=>{const{audioDownstreamQualityScore:u,networkQualityScore:m,networkType:i,networkProtocol:d,networkRelayProtocol:_,networkAvailableOutgoingBitrate:h,networkJitterMs:p,audioDownstreamJitterBufferDelay:A,networkCurrentRoundTripTimeMs:v,mediaRegionSelected:E,mediaRegionPreferred:f,cpuUse:g,cpuUseRelative:y,cpuCompetitionScore:I,gpuUse:O,batteryIsUsing:M,selectedMicrophone:C,selectedCamera:P,selectedSpeakers:L,cameraIsBlocked:x,cameraIsAvailable:F,microphoneIsBlocked:V,microphoneIsAvailable:B,isMicrophoneBluetooth:D,isSpeakerBluetooth:S,isMicrophoneAndSpeakerOnSameDevice:R,isHardwareAccelerationEnabled:w,isDisconnected:Y,noAudioInput:Q,osIsThrottlingCpu:Z,networkPacketLossPercent:ee}=o;let _e;switch(!0){case m<=0:_e=t.bz.Bad;break;case m<=a:_e=t.bz.Warn;break;default:_e=t.bz.Good}return{metrics:{stable:{mediaRegionSelected:E,mediaRegionPreferred:f,selectedMicrophone:C,selectedCamera:P,selectedSpeakers:L},unstable:{cpuCompetitionScore:I,cpuUse:g,gpuUse:O,cpuUseRelative:y,audioQualityScore:u,jitterMs:p,audioDelayMs:A,roundTripTimeMs:v,packetLossPercent:ee,incomingBandwidth:h,networkQualityScore:m}},warnings:{stable:{isVpnEnabled:i==="vpn",isSuboptimalProtocol:!!(0,n.ik)(d)||!!(0,n.ik)(_),isMediaRegionSuboptimal:!!E&&!!f&&E!==f,isUsingBatteryPower:M,isMicrophoneBluetooth:D,isMicrophoneAndSpeakerOnSameDevice:R,isSpeakerBluetooth:S,isCameraProbablyIphone:/iphone/.test(P==null?void 0:P.toLowerCase()),isHardwareAccelerationDisabled:w===!1,isOSThrottlingCpu:!!Z},unstable:{isCpuUsePoor:!!(0,n.$c)(g),isCpuUseRelativePoor:!!(0,n.h7)(y),isGpuUsePoor:!!(0,n.KG)(O),isJitterPoor:!!(0,n._N)(p),isRTTPoor:!!(0,n.oj)(v),isAudioDelayPoor:!!(0,n.q4)(A),isPacketLossPoor:!!(0,n.kq)(ee)}},alerts:{stable:{isCameraBlocked:x||!F,isMicrophoneBlocked:V||!B,isMicrophoneNotSendingAudio:!!Q,isDisconnected:Y},unstable:{networkQualityHealth:_e,isNetworkQualityPoor:m<=a,isAudioQualityPoor:u<=s,isCpuCompetitionPoor:I<=c}}}},"getTroubleshootingMetricsFromTags")},966064:(j,T,e)=>{"use strict";e.d(T,{N5:()=>m,R1:()=>c,Y:()=>u});var t=e(677925),n=e(533456),s=e(859790),a=e(550521),c;(function(i){i.HuddlesSdk="huddles-sdk",i.ChimeChannelListener="chime-channel-listener",i.ChimeChannelBroadcaster="chime-channel-broadcaster",i.VoiceFocusDevice="voice-focus-device",i.VideoTransformDevice="video-transform-device",i.VideoFrameProcessor="video-frame-processor"})(c||(c={}));const r=new Map([[c.HuddlesSdk,t.Y.create({name:c.HuddlesSdk})],[c.ChimeChannelListener,t.Y.create({name:c.ChimeChannelListener})],[c.ChimeChannelBroadcaster,t.Y.create({name:c.ChimeChannelBroadcaster})],[c.VoiceFocusDevice,t.Y.create({name:c.VoiceFocusDevice})],[c.VideoTransformDevice,t.Y.create({name:c.VideoTransformDevice})],[c.VideoFrameProcessor,t.Y.create({name:c.VideoFrameProcessor})]]),o=(0,n.Jt)("HUDDLE-LEAK-MONITOR"),u=l(i=>{let{name:d,ref:_}=i;const h=r.get(d);if(!h)return;const p=h.getMetrics();if(p){const{numberOfObjects:A,numberOfExpiredObjects:v}=p,E=A-v;v>3&&(o.warn(`Detected ${v} memory leak(s) for ${d}${E?` (with another ${E} instances in memory)`:""}`),a.A.publish({type:s.lx.MemoryLeaks,update:{name:d,leakCount:v}}))}h.watch(_)},"monitorObjectForMemoryLeaks"),m=l(()=>{for(const[,i]of r)i.expectGCAll()},"detectMemoryLeaks")},515456:(j,T,e)=>{"use strict";e.d(T,{A:()=>Vn});var t=e(446632),n=e(756120),s=e(682520),a=e(826),c=e(729268),r=e(167094);let o=l(class{initializeHuddleReconnectTracer(){var Xe,Ze,lt;this.reconnectSpan=(Xe=this.trace)===null||Xe===void 0?void 0:Xe.startSpan(r.xN),this.reconnectSuccessSpan=(Ze=this.trace)===null||Ze===void 0?void 0:Ze.startSpan(r.xx),this.reconnectFailureSpan=(lt=this.trace)===null||lt===void 0?void 0:lt.startSpan(r.cJ)}traceReconnectAttemptOutcome(Xe){let{isSuccess:Ze}=Xe;var lt;Ze?this.reconnectSuccessCount+=1:this.reconnectFailureCount+=1,(lt=this.logger)===null||lt===void 0||lt.info(`Registered huddle reconnect attempt outcome - isSuccess: ${Ze}`)}traceReconnectAttempt(){var Xe;this.reconnectCount+=1,(Xe=this.logger)===null||Xe===void 0||Xe.info("Counted huddle reconnect attempt")}report(){var Xe,Ze,lt,nt,qe;(Xe=this.reconnectSpan)===null||Xe===void 0||Xe.addTags({metric_value:this.reconnectCount}).close(),(Ze=this.reconnectSuccessSpan)===null||Ze===void 0||Ze.addTags({metric_value:this.reconnectSuccessCount}).close(),(lt=this.reconnectFailureSpan)===null||lt===void 0||lt.addTags({metric_value:this.reconnectFailureCount}).close(),(nt=this.tracer)===null||nt===void 0||nt.reportSpans([this.reconnectSpan,this.reconnectSuccessSpan,this.reconnectFailureSpan]),(qe=this.logger)===null||qe===void 0||qe.info("Reported reconnect attempt metric trace")}constructor({tracer:Xe,trace:Ze,logger:lt}){this.reconnectCount=0,this.reconnectSuccessCount=0,this.reconnectFailureCount=0,this.tracer=Xe,this.trace=Ze,this.logger=lt,this.initializeHuddleReconnectTracer()}},"HuddleReconnectTracer"),u=l(class{addTTIMetaTags(Xe){let{entryPoint:Ze,preferredMediaRegion:lt,isPrejoin:nt,isCreate:qe}=Xe;var Kt;(Kt=this.trace)===null||Kt===void 0||Kt.addTags({entry_point:Ze,preferred_media_region:lt,is_prejoin:nt,is_create:qe,success:!1})}createFetchCredentialsSpan(){var Xe;this.fetchCredentialsSpan=(Xe=this.trace)===null||Xe===void 0?void 0:Xe.startSpan(r.xl)}setCachedTag(Xe){let{cached:Ze}=Xe;var lt;(lt=this.trace)===null||lt===void 0||lt.addTags({cached:Ze})}closeFetchCredentialsSpan(){var Xe;(Xe=this.fetchCredentialsSpan)===null||Xe===void 0||Xe.close()}createConnectToMediaServiceSpan(){var Xe;this.connectToMediaServiceSpan=(Xe=this.trace)===null||Xe===void 0?void 0:Xe.startSpan(r.xA)}closeConnectToMediaServiceSpan(){var Xe,Ze,lt,nt;(Xe=this.connectToMediaServiceSpan)===null||Xe===void 0||Xe.close(),(Ze=this.trace)===null||Ze===void 0||Ze.addTags({success:!0}),(lt=this.tracer)===null||lt===void 0||lt.reportTrace(this.trace),this.traceReported=!0,(nt=this.logger)===null||nt===void 0||nt.info("Reported TTI metric trace")}getTTITraceId(){var Xe;return(Xe=this.trace)===null||Xe===void 0?void 0:Xe.getTraceId()}getFetchCredentialsSpanId(){var Xe;return(Xe=this.fetchCredentialsSpan)===null||Xe===void 0?void 0:Xe.getId()}setMediaRegionTag(Xe){var Ze,lt;const nt=(Ze=this.trace)===null||Ze===void 0?void 0:Ze.getTags().preferred_media_region;(lt=this.trace)===null||lt===void 0||lt.addTags({media_region:Xe,media_region_matches:Xe===nt})}report(){var Xe,Ze;if(!this.traceReported){var lt,nt;(lt=this.tracer)===null||lt===void 0||lt.reportTrace(this.trace),this.traceReported=!0,(nt=this.logger)===null||nt===void 0||nt.info("Reported TTI metric trace in final clean up")}(Xe=this.tracer)===null||Xe===void 0||Xe.clearTrace(this.trace),(Ze=this.logger)===null||Ze===void 0||Ze.info("Cleaned up TTI metric trace")}constructor({teamId:Xe,logger:Ze}){this.traceReported=!1,this.tracer=(0,a.E)({teamOrEnterpriseId:Xe}),this.trace=this.tracer.createTrace({traceName:r.bQ,samplingOptions:{sampleRate:(0,n.Cu)()?1:.05,sampleType:c.tS.SESSION}}),this.logger=Ze}},"HuddleTTITracer");var m=e(21879),i=e(785981),d=e(859790),_=e(612104),h=e(688357),p=e(391478);let A=l(class{recordAppMetrics(Xe){var Ze=this;return(0,_.coroutine)(function*(){const lt=Date.now();if(lt-Ze.lastRecordedSpanTs<Ze.reportingInterval)return;Ze.logger.debug(`Adding new ${h.Sq}:${h.Kp} span`);const qe=Ze.trace.startSpan(h.Kp),Kt=(0,p.tT)(Xe),ln=Object.keys(Kt).length;qe.addTags(Kt),qe.close(),Ze.logger.debug(`Added new ${h.Sq}:${h.Kp} span with ${ln} tags`),Ze.getSpanCount()>h.jt&&Ze.report(),Ze.lastRecordedSpanTs=lt})()}constructor({teamId:Xe,logger:Ze,callLogger:lt,enableMaxReportingFrequency:nt}){var qe=this;this.traceReported=!1,this.lastRecordedSpanTs=0,this.getMetricsCollectionInterval=()=>(0,n.Cu)()||this.enableMaxReportingFrequency?h.yz:h.ZT,this.createNewTrace=()=>(this.trace=this.tracer.createTrace({traceName:h.Sq,tags:{__dataset:h.RN},samplingOptions:{sampleType:c.tS.ALWAYS}}),this.trace),this.getSpanCount=()=>{var Kt;const ln=(Kt=this.trace)===null||Kt===void 0?void 0:Kt.getSpans();return ln?Object.keys(ln).length:0},this.report=function(){let Kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(Kt&&qe.callLogger.debug(`Huddle ${qe.callId} is ending. Reporting ${qe.getSpanCount()} remaining spans`),!qe.traceReported&&qe.getSpanCount()>0){var ln,_n;(ln=qe.tracer)===null||ln===void 0||ln.reportTrace(qe.trace),(_n=qe.tracer)===null||_n===void 0||_n.clearTrace(qe.trace),qe.logger.debug(`Cleared ${h.Sq}:${h.Kp} event trace`),Kt?qe.traceReported=!0:qe.createNewTrace()}else qe.logger.debug(`Attempted to report ${h.Sq}:${h.Kp} trace but there was nothing to report`)},this.tracer=(0,a.E)({teamOrEnterpriseId:Xe}),this.enableMaxReportingFrequency=!!nt,this.reportingInterval=this.getMetricsCollectionInterval(),this.createNewTrace(),this.logger=Ze,this.callLogger=lt}},"HuddlePerfTracer");const v=null;var E=e(59116),f=e(46996),g=e(185349),y=e(95500);const I=10*1e3,O=30*1e3;class M{constructor(Xe){this.logger=Xe,this.currentUnstableAlerts={},this.currentAlerts={networkQualityHealth:[],isNetworkQualityPoor:[],isAudioQualityPoor:[],isCpuCompetitionPoor:[]},this.updateInterval=I,this.updateIntervalIncrements=0,this.maybeIncrementUpdateInterval=()=>{this.updateIntervalIncrements+=1,this.updateIntervalIncrements%3===0&&(this.updateInterval=Math.min(O,this.updateInterval+1e3))},this.getStableAlerts=(Ze,lt)=>{const nt=l(qe=>{const Kt=Ze[qe];let ln=this.currentAlerts[qe];const _n=Date.now();ln.push({timestamp:_n,value:Kt}),ln=ln.filter(ns=>{let{timestamp:jn}=ns;return _n-jn<=O}),this.currentAlerts[qe]=ln,ln=ln.filter(ns=>{let{timestamp:jn}=ns;return _n-jn<=lt.interval});const Cn=new Map;for(const ns of ln)Cn.has(ns.value)||Cn.set(ns.value,0),Cn.set(ns.value,Cn.get(ns.value)+1);const wn=Array.from(Cn.entries());let[$n,es]=wn[0];for(const[ns,jn]of wn.slice(1))jn>es&&(es=jn,$n=ns);return wn.length?$n:this.currentUnstableAlerts[qe]},"nextAlert");return{isAudioQualityPoor:nt("isAudioQualityPoor"),isCpuCompetitionPoor:nt("isCpuCompetitionPoor"),isNetworkQualityPoor:nt("isNetworkQualityPoor"),networkQualityHealth:nt("networkQualityHealth")}},this.getStabilityConfig=()=>({interval:this.updateInterval}),this.getAlertUpdates=Ze=>{let{alerts:lt}=Ze;const nt=this.getStableAlerts(lt,this.getStabilityConfig()),qe=!(0,f.A)(nt,this.currentUnstableAlerts);if(this.maybeIncrementUpdateInterval(),qe)return this.currentUnstableAlerts=nt,this.logger.debug("Updated alerts and metrics will be dispatched to redux"),nt}}}l(M,"AlertUpdater");const C=null,P="https://slack.com/help/articles/115003538426-Troubleshoot-audio-and-video-issues-in-Slack",L={isMicrophoneBluetooth:"The user is using a Bluetooth microphone, which could cause audio delays, reduce audio quality, or cause audio and video to fall out of sync. If these problems occur, suggest they switch to a wired or built-in microphone.",isCameraProbablyIphone:'The user might be unknowingly using their iPhone camera, which could lead to issues like a black screen or missing video. To prevent this, they can disable the "Continuity Camera" feature on their device. Guide them to go to Settings > Camera > Continuity and turn off the option.',isVpnEnabled:`The user is connected via a VPN, which can increase latency or cause connectivity issues if the VPN isn't optimized for video conferencing. Suggest they disable the VPN or ask their IT team to allow Slack traffic to bypass it. More details can be found here: ${P}`,isSuboptimalProtocol:`The user's connection protocol is TLS, not TCP, which may be due to a VPN, proxy, or firewall not configured for video conferencing. Suggest they disable their VPN or proxy, or ask their IT team to allow Slack traffic to bypass it. More details can be found here: ${P}`,isHardwareAccelerationDisabled:"Hardware acceleration seems to be disabled on the user's device, which could degrade performance. Suggest they re-enable hardware acceleration in their Slack preferences. They can do this by going to Preferences > Advanced > Enable hardware acceleration.",isUsingBatteryPower:"The user's device is running on battery power, which could limit device performance and cause audio, video, or application lag. If they report such issues, suggest they connect their device to a power source.",isMediaRegionSuboptimal:"The user is in a different region from the Huddle host, potentially causing increased latency and instability. This geographical disparity can't be controlled by users but network stability and connectivity can be improved. Suggest that they move closer to their Wi-Fi router, switch to a wired connection if possible, limit other bandwidth-intensive activities on their computer or network, or try connecting with a different network.",isOSThrottlingCpu:"The operating system is throttling CPU to manage heat or conserve battery power, which could lead to degraded audio or video quality and/or a general sense that Slack is slow or unresponsive. This might manifest as video freezing frequently, audio cutting out frequently, or audio-video sync issues. In more extreme cases, it can even trigger disconnections from the Chime media server. To mitigate this, ensure the user's device is well-ventilated, that they avoid running unnecessary applications during the call, and, if they are on a laptop, they should connect it to a power source. Adjusting power settings to prefer maximum performance (even when battery is being used) can also help. For detailed steps, please refer to your device's power management settings."},V={...{isNetworkQualityPoor:"The user's network quality is poor, which can cause delays or degraded audio or video, drops in connectivity, and audio/video desynchronization. Guide them through improving network stability, for instance, moving closer to their Wi-Fi router, switching to a wired connection if possible, limiting other bandwidth-intensive activities, or trying to connect with a different network.",isCpuCompetitionPoor:"The user\u2019s device is experiencing high CPU usage, causing audio or video delays, connectivity drops, or desynchronization. Suggest they close unnecessary applications, tabs, limit other CPU-intensive activities, ensure their computer has adequate airflow around it, and check if their hardware meets the recommended specifications."},...{isDisconnected:"The user is disconnected from the Huddle and can't send or receive audio or video. This might be due to network instability, incorrect configurations, hardware issues, or connectivity problems. Guide them through checking their network connection, suggest they limit other bandwidth-intensive activities, try connecting with a different network, move closer to their router, and suggest restarting the call.",isMicrophoneBlocked:"Slack can't access the user's microphone, possibly due to permission or settings issues. Verify that Slack has been granted permission to use the microphone, and ensure no other application is using it. They can check this by going to System Preferences (on macOS) or Sound settings (on Windows) and ensuring that Slack is checked.",isMicrophoneNotSendingAudio:"The user's microphone is connected, but isn't sending any audio, possibly due to another application using it, being muted, or system-level settings. Suggest they unplug and replug their device, restart Slack, limit other CPU-intensive activities, ensure their computer has adequate airflow around it, close unnecessary applications or tabs, and check for conflicting settings.",isCameraBlocked:"Slack can't access the user's camera, likely due to settings or permissions issues. Verify that Slack has permission to use their camera, and ensure no other application is using it. They can check this by going to System Preferences (on macOS) or Camera Privacy Settings (on Windows) and ensuring that Slack is checked."},...L},B={isNetworkQualityPoor:"networkQualityScoreReasons",isCpuCompetitionPoor:"cpuCompetitionScoreReasons"};class D{constructor({callLogger:Xe,logger:Ze,dispatch:lt}){this.isDev=(0,n.Cu)(),this.isJsPath=(0,n.b3)(),this.loggedHuddleConfigInfo=!1,this.lastProcessedTagsTs=null,this.lastProcessedStats=null,this.lastUnstableMetricsUpdateTs=0,this.lastLoggedTagsTs=Date.now(),this.logHuddleConfigInfo=nt=>{if(this.loggedHuddleConfigInfo||!this.lastProcessedTagsTs)return;const{isIA4Prod:qe,isUnifiedGrid:Kt,visibleSidebarItemCount:ln,networkType:_n,networkProtocol:Cn,networkRelayProtocol:wn,isHardwareAccelerationEnabled:$n,batteryIsUsing:es}=nt;this.callLogger.info(`Initial Huddle Config: Network Type=${_n}; Network Protocol=${Cn}; Network Relay Protocol=${wn}; IA4=${qe}; Unified Grid=${Kt}; Hardware Acceleration=${$n??"unknown (browser)"}; Using Battery Power=${es}; Sidebar Size=${ln};`),this.loggedHuddleConfigInfo=!0},this.logWarningAndAlertUpdates=(nt,qe)=>{Object.entries(nt).forEach(Kt=>{let[ln,_n]=Kt;if(_n&&this.isRelevantWarning(ln,nt)&&V[ln]){let Cn;if(ln in B){const $n=B[ln];$n&&(qe!=null&&qe[$n])&&(Cn=qe[$n])}this.logger.warn(`\u{1F6A8} WARNING! ${V[ln]}${Cn?` reasons: (${Cn})`:""}`)}})},this.isRelevantWarning=(nt,qe)=>nt==="isNetworkQualityPoor"||nt==="isCpuCompetitionPoor"?"isAudioQualityPoor"in qe&&!!qe.isAudioQualityPoor:!0,this.logTags=nt=>{const qe=Date.now();this.isJsPath||this.isDev?this.logger.info(`Recorded ${h.Sq}:${h.Kp} event span tags`,nt):qe-this.lastLoggedTagsTs>10*1e3&&(this.logger.debug(`Recorded ${h.Sq}:${h.Kp} event span tags`,nt),this.lastLoggedTagsTs=qe)},this.getStatsDiff=nt=>{const qe=this.lastProcessedStats;return(0,E.A)(nt,(Kt,ln)=>{var _n,Cn;return{stable:qe?!(0,f.A)((_n=qe[ln])===null||_n===void 0?void 0:_n.stable,Kt==null?void 0:Kt.stable):null,unstable:qe?!(0,f.A)((Cn=qe[ln])===null||Cn===void 0?void 0:Cn.unstable,Kt==null?void 0:Kt.unstable):null}})},this.maybeUpdateTroubleshootingPanel=nt=>{var qe,Kt,ln,_n,Cn,wn,$n,es,ns;const jn=Date.now(),ts=(0,y.p)(nt),Xn=this.getStatsDiff(ts);if(this.lastProcessedStats=ts,(!((qe=Xn.alerts)===null||qe===void 0)&&qe.stable||((Kt=Xn.alerts)===null||Kt===void 0?void 0:Kt.stable)===null)&&ts.alerts.stable&&(this.dispatch((0,g._6)(ts.alerts.stable)),Xn.alerts.stable&&this.logWarningAndAlertUpdates(ts.alerts.stable)),(!((ln=Xn.metrics)===null||ln===void 0)&&ln.stable||((_n=Xn.metrics)===null||_n===void 0?void 0:_n.stable)===null)&&ts.metrics.stable&&this.dispatch((0,g.qO)(ts.metrics.stable)),(!((Cn=Xn.warnings)===null||Cn===void 0)&&Cn.stable||((wn=Xn.warnings)===null||wn===void 0?void 0:wn.stable)===null)&&ts.warnings.stable&&(this.dispatch((0,g.it)(ts.warnings.stable)),this.logWarningAndAlertUpdates(ts.warnings.stable)),!(($n=ts.alerts)===null||$n===void 0)&&$n.unstable){const At=this.alertUpdater.getAlertUpdates({alerts:ts.alerts.unstable});At&&(this.dispatch((0,g.Li)(At)),this.logWarningAndAlertUpdates(At,nt))}ts.metrics.unstable&&ts.warnings.unstable&&(!this.lastUnstableMetricsUpdateTs||jn-this.lastUnstableMetricsUpdateTs>1e4&&(!((es=Xn.warnings)===null||es===void 0)&&es.unstable||!((ns=Xn.metrics)===null||ns===void 0)&&ns.unstable))&&(this.dispatch((0,g.bW)({metrics:ts.metrics.unstable,warnings:ts.warnings.unstable})),this.lastUnstableMetricsUpdateTs=jn)},this.processTags=nt=>{this.maybeUpdateTroubleshootingPanel(nt),this.logHuddleConfigInfo(nt),this.logTags(nt),this.lastProcessedTagsTs=Date.now()},this.callLogger=Xe,this.logger=Ze,this.dispatch=lt,this.alertUpdater=new M(Ze),this.callLogger.info("huddle perf observer initialized")}}l(D,"HuddlePerfObserver");const S=null,R=D;var w=e(533456),Y=e(250791),Q=e(808058),Z=e(744778),ee=e(566401),_e=e(140714),Ee=e(707980),G=e(636380);const Ae=l(Pt=>{if((0,ee.A)(Pt))return;const Xe=(0,Ee.A)(Pt,(Ze,lt)=>(0,G.A)(Ze,lt,(nt,qe)=>(nt||0)+qe),{});return(0,E.A)(Xe,Ze=>Ze/Pt.length)},"calculateIncomingVideoStatsAverages"),ce=l(Pt=>{if(typeof Pt=="string"||typeof Pt=="boolean")return Pt;if(!isNaN(Pt)&&!(typeof Pt>"u"||Pt===null))return Math.round(Pt)},"getScrubbedMetricValue"),de=l(Pt=>{let{clientMetricReport:Xe,direction:Ze}=Pt;const lt=Object.keys(Xe.streamMetricReports);let nt;return lt.forEach(qe=>{const Kt=Number(qe),ln=Xe.streamMetricReports[Kt];ln.direction===Ze&&ln.mediaType===d.zu.AUDIO&&(nt=Kt)}),nt},"getAudioSsrcId"),oe=l((Pt,Xe,Ze,lt,nt)=>{const qe=Pt==null?void 0:Pt.getMetricMap(Xe,Ze)[lt];if(qe!=null&&qe.transform)return qe.transform(lt,nt)},"getNonObservedMetric"),$=l((Pt,Xe)=>{const Ze=Xe?Pt.replace(Xe,""):Pt;return Ze.charAt(0).toUpperCase()+Ze.slice(1)},"removeSubstringAndCapitalize"),re=l(function(Pt){let Xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,Ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(!(0,m.A)(Xe)||!(0,m.A)(Pt))return 0;const lt=isNaN(Ze)?0:Ze;if(Pt===Xe||Pt>Xe)return 0;const qe=(Xe-Pt)/Xe*100-lt;return Math.round(qe)},"calculateNonNetworkPacketLoss");var ue=e(483869),te;(function(Pt){Pt[Pt.UPSTREAM=0]="UPSTREAM",Pt[Pt.DOWNSTREAM=1]="DOWNSTREAM"})(te||(te={}));var ae;(function(Pt){Pt[Pt.AUDIO=0]="AUDIO",Pt[Pt.VIDEO=1]="VIDEO"})(ae||(ae={}));let H,U;const N=l(function(Pt,Xe,Ze){let lt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pt||!Xe)return;const nt=(Xe.timestamp-Pt.timestamp)/1e3,qe=Xe[Ze]-Pt[Ze];return lt?qe/nt:qe},"getNextStat"),K=l(Pt=>{let{clientMetricReport:Xe,selfAttendeeId:Ze}=Pt;const lt=Xe.getObservableVideoMetrics();if(!lt||!Ze)return;let nt=0;const qe={},Kt=[];return(0,Q.A)(lt,(ln,_n)=>{var Cn;const wn=Number((Cn=Object.keys(ln))===null||Cn===void 0?void 0:Cn[0]);if(!wn)return;const $n=ln[wn];if(_n.endsWith("#content")){var es,ns;nt+=1,(0,Q.A)($n,(z,me)=>{qe[(0,Z.A)(`screenshare_${(0,p._3)(me)}${nt>1?`${nt}_`:""}`)]=ce(z)}),Object.assign(qe,{screenshareVideoDownstreamDecoderImplementation:(es=Xe.streamMetricReports[wn])===null||es===void 0||(ns=es.currentStringMetrics)===null||ns===void 0?void 0:ns.decoderImplementation,screenshareVideoDownstreamFramesReceivedPerSecond:Xe.countPerSecond("framesReceived",wn),screenshareVideoDownstreamFramesDroppedPerSecond:oe(Xe,ae.VIDEO,te.DOWNSTREAM,"framesDropped",wn),screenshareVideoDownstreamFreezeCount:oe(Xe,ae.VIDEO,te.DOWNSTREAM,"freezeCount",wn),screenshareVideoDownstreamTotalDecodeTime:oe(Xe,ae.VIDEO,te.DOWNSTREAM,"totalDecodeTime",wn),screenshareVideoDownstreamTotalFreezesDuration:oe(Xe,ae.VIDEO,te.DOWNSTREAM,"totalFreezesDuration",wn)});return}if(Ze===_n){if($n.videoUpstreamBitrate!==0){var jn,ts;(0,Q.A)($n,(z,me)=>{qe[`self${$(me,"Upstream")}`]=ce(z)}),Object.assign(qe,{selfVideoHardwareEncoder:oe(Xe,ae.VIDEO,te.UPSTREAM,"encoderImplementation",wn),selfVideoEncoderImplementation:(jn=Xe.streamMetricReports[wn])===null||jn===void 0||(ts=jn.currentStringMetrics)===null||ts===void 0?void 0:ts.encoderImplementation,selfVideoTotalEncodeTime:oe(Xe,ae.VIDEO,te.UPSTREAM,"totalEncodeTime",wn)})}}else{var Xn,At;const z=oe(Xe,ae.VIDEO,te.DOWNSTREAM,"totalDecodeTime",wn);if(z){var b;qe.videoDownstreamTotalDecodeTime=((b=qe.videoDownstreamTotalDecodeTime)!==null&&b!==void 0?b:0)+z}Object.assign(qe,{videoDownstreamDecoderImplementation:(Xn=Xe.streamMetricReports[wn])===null||Xn===void 0||(At=Xn.currentStringMetrics)===null||At===void 0?void 0:At.decoderImplementation}),Kt.push({...$n,videoDownstreamFramesReceivedPerSecond:Xe.countPerSecond("framesReceived",wn),videoDownstreamFramesDroppedPerSecond:oe(Xe,ae.VIDEO,te.DOWNSTREAM,"framesDropped",wn)})}}),(0,ee.A)(Kt)||Object.assign(qe,Ae(Kt)),qe},"getVideoMetricTags"),W=["nackCountReceivedPerSecond","currentRoundTripTimeMs","availableOutgoingBitrate","availableIncomingBitrate"],J=l(Pt=>{let{clientMetricReport:Xe}=Pt;const{audioDecoderLoss:Ze,audioPacketLossPercent:lt,audioPacketsReceived:nt,audioPacketsReceivedFractionLoss:qe,audioPacketsSent:Kt,audioSpeakerDelayMs:ln,audioDownstreamJitterMs:_n,videoUpstreamBitrate:Cn,videoPacketSentPerSecond:wn,currentRoundTripTimeMs:$n,availableIncomingBitrate:es,availableOutgoingBitrate:ns,nackCountReceivedPerSecond:jn,audioUpstreamRoundTripTimeMs:ts,audioUpstreamJitterMs:Xn}=Xe.getObservableMetrics(),At=50,b=re(nt,At,qe),z=re(Kt,At,lt),me={audioDownstreamDecoderLoss:Ze,audioUpstreamPacketLossPercent:lt,audioDownstreamPacketsReceived:nt,audioDownstreamPacketLossPercent:qe,audioDownstreamJitterMs:_n,audioUpstreamPacketsSent:Kt,audioDownstreamNonNetworkPacketLossPercent:b,audioUpstreamNonNetworkPacketLossPercent:z,audioDownstreamJitterBufferDelay:ln,selfVideoBitrate:Cn,selfVideoPacketsSentPerSecond:wn,audioUpstreamRoundTripTimeMs:ts,audioUpstreamJitterMs:Xn,networkCurrentRoundTripTimeMs:$n,networkAvailableIncomingBitrate:es,networkAvailableOutgoingBitrate:ns,networkNackCountReceivedPerSecond:jn},pe=(0,_e.A)(me,(ge,ot)=>W.indexOf(ot)>-1?(0,Z.A)(`network_${ot}`):ot),ut={networkSocketPacketsDiscardedOnSend:Xe.globalMetricReport.currentMetrics.packetsDiscardedOnSend},$e=de({clientMetricReport:Xe,direction:te.DOWNSTREAM});let k;if($e){const ge=oe(Xe,ae.AUDIO,te.DOWNSTREAM,"concealedSamples",$e);k={audioDownstreamTotalSamplesReceived:oe(Xe,ae.AUDIO,te.DOWNSTREAM,"totalSamplesReceived",$e),audioDownstreamConcealedSamples:ge}}return(0,E.A)({...pe,...ut,...k},ge=>ce(ge))},"getAudioMetricTags"),q=l(Pt=>{const Xe={},Ze=[];let lt;if(!Pt)return H=void 0,Xe;Pt.forEach(qe=>{qe.type==="local-candidate"&&Ze.push(qe),qe.type==="media-source"&&qe.kind==="audio"&&(Xe.audioUpstreamTotalSamplesDuration=qe.totalSamplesDuration,Xe.audioUpstreamAudioLevel=qe.audioLevel,Xe.audioUpstreamTotalAudioEnergy=qe.totalAudioEnergy),qe.type==="candidate-pair"&&qe.state==="succeeded"&&qe.nominated&&qe.localCandidateId&&(lt=qe.localCandidateId),qe.type==="inbound-rtp"&&qe.kind==="audio"&&(Xe.audioDownstreamLevel=qe.audioLevel),qe.type==="outbound-rtp"&&qe.kind==="video"&&(Xe.selfVideoQualityLimitationDurations=qe.qualityLimitationDurations&&(0,ue.Zf)(qe.qualityLimitationDurations),Xe.selfVideoOutboundFramesPerSecond=qe.framesPerSecond,Xe.selfVideoPacketSendDelay=N(H,qe,"totalPacketSendDelay"),H=qe),qe.type==="media-source"&&qe.kind==="video"&&(Xe.selfVideoSourceFramesPerSecond=qe.framesPerSecond)});const nt=Ze.find(qe=>qe.id===lt);if(nt){const{networkType:qe,protocol:Kt,relayProtocol:ln}=nt;Xe.networkType=qe,Xe.networkProtocol=Kt,Xe.networkRelayProtocol=ln}return Xe},"getRtcStatsTags"),ie=l(Pt=>{if(!Pt){U=void 0;return}const Xe={};return Pt.forEach(Ze=>{if(Ze.type==="remote-inbound-rtp"&&Ze.kind==="video"){const{fractionLost:lt,jitter:nt,roundTripTime:qe}=Ze;Object.assign(Xe,{screenshareUpstreamJitter:nt*1e3,screenshareUpstreamPacketLossPercent:lt*100,screenshareUpstreamRoundTripTime:qe*1e3})}if(Ze.type==="outbound-rtp"&&Ze.kind==="video"){const{frameHeight:lt,frameWidth:nt,framesPerSecond:qe,targetBitrate:Kt,encoderImplementation:ln,scalabilityMode:_n,powerEfficientEncoder:Cn}=Ze;if(Object.assign(Xe,{screenshareUpstreamTargetBitrate:Kt,screenshareUpstreamFrameWidth:nt,screenshareUpstreamFrameHeight:lt,screenshareUpstreamFramesPerSecond:qe,screenshareUpstreamEncoderImplementation:ln,screenshareUpstreamPowerEfficientEncoder:Cn,screenshareUpstreamScalabilityMode:_n}),!U){U=Ze;return}const wn=N(U,Ze,"totalEncodeTime",!0),$n=wn&&wn*1e3;Object.assign(Xe,{screenshareUpstreamPacketsSent:N(U,Ze,"packetsSent"),screenshareUpstreamPacketSendDelay:N(U,Ze,"totalPacketSendDelay"),screenshareUpstreamKeyFramesEncoded:N(U,Ze,"keyFramesEncoded"),screenshareUpstreamBitrate:N(U,Ze,"bytesSent",!0),screenshareUpstreamTotalEncodeTime:$n}),U=Ze}}),(0,E.A)(Xe,Ze=>ce(Ze))},"getScreenshareRtcStatsTags"),Te=l(Pt=>{let{clientMetricReport:Xe,selfAttendeeId:Ze}=Pt;const lt=K({clientMetricReport:Xe,selfAttendeeId:Ze}),nt=J({clientMetricReport:Xe});return{...lt,...nt}},"getClientMetricReportTags"),Me={getVideoMetricTags:K,getAudioMetricTags:J,getClientMetricReportTags:Te,getScreenshareRtcStatsTags:ie,getRtcStatsTags:q};var ke=e(531251),Pe=e(53927),Ie=e(643492);const X=0,ne=100;function fe(Pt){return Pt.endsWith(",")?Pt.slice(0,-1):Pt}l(fe,"trimComma");const be=l(()=>{let Pt=100,Xe="";return{deductFromScoreForReason:(Ze,lt)=>{Ze&&(Pt-=Ze,Xe+=`${lt},`)},getScore:()=>(0,ke.A)(Pt,X,ne),getReasons:()=>fe(Xe)}},"trackScoreAndReasons"),Be=l(Pt=>{const{deductFromScoreForReason:Xe,getScore:Ze,getReasons:lt}=be(),{screenshareUpstreamBitrate:nt,screenshareUpstreamPacketLossPercent:qe,screenshareUpstreamJitter:Kt,screenshareUpstreamRoundTripTime:ln,screenshareUpstreamFramesPerSecond:_n,screenshareUpstreamPacketSendDelay:Cn,screenshareUpstreamQualityLimitationReason:wn}=Pt;if(nt)return Xe((0,Ie.Tg)(qe),"screenshareUpstreamPacketLossPercent"),Xe((0,Ie._N)(Kt),"screenshareUpstreamJitter"),Xe((0,Ie.oj)(ln),"screenshareUpstreamRoundTripTime"),Xe((0,Ie.RI)(Cn),"screenshareUpstreamPacketSendDelay"),Xe((0,Ie.qf)(h.w4-_n),"screenshareUpstreamFramesPerSecond"),Xe((0,Ie.Fq)(wn),"screenshareUpstreamQualityLimitationReason"),{screenshareUpstreamQualityScore:Ze(),screenshareUpstreamQualityScoreReasons:lt()}},"getScreenshareUpstreamQualityScore"),We=l(Pt=>{const{selfVideoPacketLossPercent:Xe,selfVideoFrameHeight:Ze,selfVideoFrameWidth:lt,selfVideoRoundTripTime:nt,selfVideoJitterMs:qe,selfVideoFramesEncodedPerSecond:Kt,isSelfVideoEnabled:ln}=Pt;if(!ln||!lt)return;const{deductFromScoreForReason:_n,getScore:Cn,getReasons:wn}=be();_n((0,Ie.Tg)(Xe),"selfVideoPacketLossPercent");const $n=Ze*lt;return _n((0,Ie.e7)(100-$n/h.An*100),"selfVideoFrameHeight,selfVideoFrameWidth"),_n((0,Ie._N)(qe),"selfVideoJitterMs"),_n((0,Ie.oj)(nt),"selfVideoRoundTripTime"),_n((0,Ie.qf)(h.tz-Kt),"selfVideoFramesEncodedPerSecond"),{selfVideoQualityScore:Cn(),selfVideoQualityScoreReasons:wn()}},"getSelfVideoQualityScore"),Re=l(Pt=>{const{videoDownstreamPacketLossPercent:Xe,videoDownstreamFramesDecodedPerSecond:Ze,videoDownstreamFrameHeight:lt,videoDownstreamFrameWidth:nt,videoDownstreamJitterMs:qe,videoDownstreamDelayMs:Kt}=Pt;if(!nt)return;const{deductFromScoreForReason:ln,getScore:_n,getReasons:Cn}=be();ln((0,Ie.Tg)(Xe),"videoDownstreamPacketLossPercent");const wn=lt*nt;return ln((0,Ie.e7)(h.An/wn),"videoDownstreamFrameHeight,videoDownstreamFrameWidth"),ln((0,Ie.q4)(Kt),"videoDownstreamDelayMs"),ln((0,Ie._N)(qe),"videoDownstreamJitterMs"),ln((0,Ie.qf)(h.tz-Ze),"videoDownstreamFramesDecodedPerSecond"),{videoDownstreamQualityScore:_n(),videoDownstreamQualityScoreReasons:Cn()}},"getVideoDownstreamQualityScore"),ve=l(function(Pt){let Xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{deductFromScoreForReason:Ze,getScore:lt,getReasons:nt}=be();if(Xe){const{screenshareVideoDownstreamPacketLossPercent2:Cn,screenshareVideoDownstreamJitterMs2:wn,screenshareVideoDownstreamDelayMs2:$n,screenshareVideoDownstreamFrameHeight2:es}=Pt;return es?(Ze((0,Ie.Tg)(Cn),"screenshareVideoDownstreamPacketLossPercent2"),Ze((0,Ie._N)(wn),"screenshareVideoDownstreamJitterMs2"),Ze((0,Ie.q4)($n),"screenshareVideoDownstreamDelayMs2"),{screenshareVideoDownstreamQualityScore2:lt(),screenshareVideoDownstreamQualityScoreReasons2:nt()}):void 0}const{screenshareVideoDownstreamPacketLossPercent:qe,screenshareVideoDownstreamJitterMs:Kt,screenshareVideoDownstreamDelayMs:ln,screenshareVideoDownstreamFrameHeight:_n}=Pt;if(_n)return Ze((0,Ie.Tg)(qe),"screenshareVideoDownstreamPacketLossPercent"),Ze((0,Ie._N)(Kt),"screenshareVideoDownstreamJitterMs"),Ze((0,Ie.q4)(ln),"screenshareVideoDownstreamDelayMs"),{screenshareVideoDownstreamQualityScore:lt(),screenshareVideoDownstreamQualityScoreReasons:nt()}},"getScreenshareDownstreamQualityScore"),xe=l(Pt=>{const{audioUpstreamPacketLossPercent:Xe,audioUpstreamRoundTripTimeMs:Ze,audioUpstreamJitterMs:lt,audioUpstreamNonNetworkPacketLossPercent:nt}=Pt;if(!Ze)return;const{deductFromScoreForReason:qe,getScore:Kt,getReasons:ln}=be();return qe((0,Ie.Ye)(Xe),"audioUpstreamPacketLossPercent"),qe((0,Ie.oj)(Ze),"audioUpstreamRoundTripTimeMs"),qe((0,Ie._N)(lt),"audioUpstreamJitterMs"),qe((0,Ie.fB)(nt),"audioUpstreamNonNetworkPacketLossPercent"),{audioUpstreamQualityScore:Kt(),audioUpstreamQualityScoreReasons:ln()}},"getAudioUpstreamQualityScore"),He=l(Pt=>{const Xe={};return Pt.screenshareVideoDownstreamFrameHeight2&&Object.assign(Xe,ve(Pt,!0)),{...ve(Pt),...Xe}},"getScreenshareDownstreamQualityScores"),je=l(Pt=>{const{cpuUse:Xe,gpuUse:Ze,cpuUseRelative:lt,longTasksPercentage:nt}=Pt,{deductFromScoreForReason:qe,getScore:Kt,getReasons:ln}=be();return qe((0,Ie.sI)(nt),"longTasksPercentage"),qe((0,Ie.$c)(Xe),"cpuUse"),qe((0,Ie.KG)(Ze),"gpuUse"),qe((0,Ie.h7)(lt),"cpuUseRelative"),{cpuCompetitionScore:Kt(),cpuCompetitionScoreReasons:ln()}},"getCpuCompetitionScoreTags"),Ke=l(function(){for(var Pt=arguments.length,Xe=new Array(Pt),Ze=0;Ze<Pt;Ze++)Xe[Ze]=arguments[Ze];const lt=Xe.filter(m.A);return lt.length?Math.round((0,Pe.A)(lt)):0},"getMetricAverage"),ht=l(Pt=>{const{networkCurrentRoundTripTimeMs:Xe,networkNackCountReceivedPerSecond:Ze,networkSocketPacketsDiscardedOnSend:lt,networkProtocol:nt,networkRelayProtocol:qe,audioDownstreamJitterMs:Kt,audioDownstreamPacketLossPercent:ln,audioUpstreamPacketLossPercent:_n,audioUpstreamJitterMs:Cn,videoDownstreamPacketLossPercent:wn,screenshareDownstreamPacketLossPercent:$n,screenshareUpstreamPacketLossPercent:es,selfVideoPacketLossPercent:ns}=Pt,{deductFromScoreForReason:jn,getScore:ts,getReasons:Xn}=be();jn((0,Ie.ik)(nt),"networkProtocol"),jn((0,Ie.ik)(qe),"networkRelayProtocol"),jn((0,Ie.No)(lt),"networkSocketPacketsDiscardedOnSend"),jn((0,Ie.oj)(Xe),"networkCurrentRoundTripTimeMs");const At=Ke(Kt,Cn);jn((0,Ie._N)(At),"networkJitterMs"),jn((0,Ie.Ap)(Ze),"networkNackCountReceivedPerSecond");const b=Ke(ln,wn,$n,_n,ns,es);return jn((0,Ie.kq)(b),"networkPacketLossPercent"),{networkJitterMs:At,networkPacketLossPercent:b,networkQualityScore:ts(),networkQualityScoreReasons:Xn()}},"getNetworkQualityScoreTags"),dt=l(Pt=>{const{audioDownstreamDecoderLoss:Xe,audioDownstreamJitterBufferDelay:Ze,audioDownstreamPacketLossPercent:lt}=Pt,{deductFromScoreForReason:nt,getScore:qe,getReasons:Kt}=be();return nt((0,Ie.t5)(Xe),"audioDownstreamDecoderLoss"),nt((0,Ie.q4)(Ze),"audioDownstreamJitterBufferDelay"),nt((0,Ie.Ye)(lt),"audioDownstreamPacketLossPercent"),{audioDownstreamQualityScore:qe(),audioDownstreamQualityScoreReasons:Kt()}},"getAudioDownstreamQualityTags"),Je=l(Pt=>({...dt(Pt),...ht(Pt),...xe(Pt),...We(Pt),...He(Pt),...Be(Pt),...je(Pt),...Re(Pt),qualityScoringVersion:h.Nb}),"getQualityScoreTags"),Ge=l((Pt,Xe)=>{let{type:Ze,update:lt}=Pt;switch(Ze){case d.lx.BluetoothDevices:case d.lx.PreferredMediaRegion:case d.lx.CameraResolution:case d.lx.CallId:case d.lx.ScreenshareContentType:Object.assign(Xe.sharedTags,lt);break;case d.lx.MemoryLeaks:{const nt=Xe.sharedTags.memoryLeakCount;Object.assign(Xe.sharedTags,{type:"shared",tags:{[`memoryLeaks-${lt.name}`]:lt.leakCount,memoryLeakCount:nt?nt+lt.leakCount:lt.leakCount}});break}case d.lx.SelectedMediaRegion:{const{mediaRegionPreferred:nt}=Xe.sharedTags,qe=nt&&lt.mediaRegionSelected?nt===lt.mediaRegionSelected:!0;Object.assign(Xe.sharedTags,{mediaRegionSelected:lt.mediaRegionSelected,mediaRegionMatchesPreference:qe});break}case d.lx.VoiceFocusConfig:Object.assign(Xe.sharedTags,{vfSimdSupported:lt.model.simd,vfModelVariant:lt.model.variant,vfSupported:lt.supported});break;case d.lx.NetworkDisconnect:lt.peerId==="self"&&Object.assign(Xe.transientTags,{selfDisconnectCount:(Xe.transientTags.selfDisconnectCount||0)+1});break;case d.lx.NoAudio:{const nt=lt.direction==="send"?{noAudioInput:lt.noAudio}:{noAudioOutput:lt.noAudio};Object.assign(Xe.sharedTags,nt);break}case d.lx.SetIsDebugApp:Object.assign(Xe.sharedTags,{isDebugApp:!0});break;default:{(0,w.tZ)("HUDDLES-PERF").error(new Error(`Unexpected type: ${Ze}`));break}}},"updateState"),Le=null;var Mt=e(46935);const Dt=(0,s.Wo)({label:"COMPUTE-PRESSURE"}),pt={nominal:1,fair:2,serious:3,critical:4};class Qt{constructor(){this.defaultSampleRate=.5,this.pubSub=new Mt.G,this.isObserving=!1,this.currentLevel=null;var Xe=this;this.startObserving=(0,_.coroutine)(function*(){if(!Xe.isObserving){try{var lt;Xe.isObserving=!0,yield(lt=Xe.pressureObserver)===null||lt===void 0?void 0:lt.observe("cpu")}catch(nt){Xe.isObserving=!1,Dt.error("An error occurred while attempting to observe compute pressure",nt)}Dt.info("Observing compute pressure")}}),this.getPressureLevelFromRecord=lt=>lt?pt[lt.state]:void 0,this.pressureObserverCallback=lt=>{const nt=lt.pop();if(!nt)return;const qe=this.getPressureLevelFromRecord(nt);qe&&(this.currentLevel=qe,qe===1?Dt.debug(`Compute pressure updated to ${nt.state} (${qe} of 4)`):Dt.warn(`Compute pressure updated to ${nt.state} (${qe} of 4)`),this.pubSub.publish(qe))};var Ze=this;this.subscribe=function(){var lt=(0,_.coroutine)(function*(nt){Ze.pubSub.subscribe(nt),yield Ze.startObserving()});return function(nt){return lt.apply(this,arguments)}}(),this.unsubscribe=lt=>{if(this.pubSub.unsubscribe(lt),!this.pubSub.subscriberCount)try{var nt;(nt=this.pressureObserver)===null||nt===void 0||nt.disconnect(),Dt.debug("No longer observing compute pressure.")}catch(qe){Dt.error("An error occurred attempted to disconnect from the compute pressure observer",qe)}},this.getCurrentLevel=()=>{if(this.currentLevel)return this.currentLevel;let lt;try{var nt;lt=(nt=this.pressureObserver)===null||nt===void 0?void 0:nt.takeRecords()}catch(Kt){Dt.error("An error occurred attempting to get latest compute pressure reports",Kt)}const qe=lt?this.getPressureLevelFromRecord(lt.pop()):void 0;return qe&&(this.currentLevel=qe),qe},Dt.info("Compute Pressure API is supported. Initializing pressure observer.");try{this.pressureObserver=new PressureObserver(this.pressureObserverCallback,{sampleRate:this.defaultSampleRate})}catch(lt){Dt.error("An error occurred creating a new instance of the PressureObserver",lt)}if(!this.pressureObserver){Dt.error("Compute pressure observer not created, though PressureObserver API should be supported");return}this.startObserving()}}l(Qt,"ComputePressureObserver"),Qt.isSupported=()=>"PressureObserver"in globalThis;let Nt;const bt=l(()=>{if(Nt)return Nt;if(!Qt.isSupported()){Dt.info("Compute Pressure API is not supported.");return}try{Nt=new Qt}catch(Pt){Dt.error("An error occurred while attempting to create compute pressure observer",Pt);return}return Nt},"getComputePressureObserver"),Yt=null,fn=null,Tt=bt,sn={longTasksPercentage:0,longTasksPeakDuration:0,longTasksCount:0,longTasksTotalDuration:0};let mn=l(class{initializeReport(){this.report={...sn},this.lastReportTime=performance.now()}isLongTaskTimingSupported(){return typeof PerformanceObserver<"u"&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("longtask")}start(){this.observer||!this.isSupported||(this.observer=new PerformanceObserver(this.onReceiveLongTaskList),this.observer.observe({entryTypes:["longtask"]}),this.observer.takeRecords())}stop(){this.observer&&(this.observer.disconnect(),this.observer=null)}getReportSinceLastCall(){if(!this.observer||!this.isSupported)return;const Ze=performance.now()-this.lastReportTime;this.report.longTasksCount>0&&(this.report.longTasksPercentage=Math.round(this.report.longTasksTotalDuration/Ze*100));const lt={...this.report};return this.initializeReport(),lt}constructor(){this.report={...sn},this.lastReportTime=performance.now(),this.observer=null,this.onReceiveLongTaskList=Xe=>{const Ze=Xe.getEntries();let lt=0,nt=0;Ze.forEach(qe=>{const Kt=qe.duration;lt+=Kt,Kt>nt&&(nt=Kt)}),this.report.longTasksTotalDuration+=lt,this.report.longTasksCount+=Ze.length,nt>this.report.longTasksPeakDuration&&(this.report.longTasksPeakDuration=nt)},this.isSupported=this.isLongTaskTimingSupported()}},"LongTaskObserver");const wt=null,On=mn;let Zt=0;const Mn={traceName:h.Sq},Wn="HUDDLES-PERF",xn={troubleshootingEntryPoint:null,troubleshootingContactUsClicked:!1};let gn=l(class{constructor(){var Xe;this.callLogger=(0,w.tZ)(Wn),this.logger=(0,s.Wo)({label:Wn}),this.sharedTags=Mn,this.transientTags={},this.renderTimings=[],this.rtmProcessingTimings=[],this.troubleshootingTags={...xn},this.lastAppMetricsRecordingTs=Date.now(),this.currentTags={},this.computePressure=null,this.longTaskObserver=new On,this.initSharedTags=()=>{Zt+=1,this.updateSharedTags({huddlesCountSinceRefresh:Zt})},this.initComputePressureObserver=()=>{this.computePressureObserver=Tt(),this.computePressureObserver&&this.computePressureObserver.subscribe(this.updateComputePressure).then(()=>{var Ze;const lt=(Ze=this.computePressureObserver)===null||Ze===void 0?void 0:Ze.getCurrentLevel();this.computePressure=lt})},this.updateSharedTags=Ze=>{this.sharedTags={...this.sharedTags,...Ze}},this.updateTransientTags=Ze=>{this.transientTags={...this.transientTags,...Ze}},this.updateComputePressure=Ze=>{const lt=this.computePressure;this.computePressure=Ze;let nt;switch(Ze){case 1:nt="System workload is minimal, operating at lower clock speed to conserve power.";break;case 2:nt="System is performing well but under a fair amount of pressure. Still able to take on additional workload without issues.";break;case 3:nt="System is experiencing significant pressure but remains sustainable; close to operational limits.";break;case 4:nt="System is now about to reach its operational limits; continued pressure may lead to CPU throttling.";break;default:nt="Unknown system workload condition."}Ze>2?this.callLogger.warn(`Compute pressure updated to level ${Ze} of 4. This is a measure of the strain on the user's computer's processing capacity, which may or may not be caused by Slack or Huddles, but will likely impact performance. A score of ${Ze} suggests that: ${nt}. If this warning is frequent, suggest that the user close unused tabs or applications on their computer, ensure their computer is not in battery-saving mode, and/or give other general advice around reducing CPU use.`):lt&&lt>2&&this.logger.debug(`Compute pressure updated to level ${Ze} of 4 from ${lt}. ${nt}`)},this.updateState=Ze=>{switch(Ze.type){case d.lx.RenderTiming:this.renderTimings.push(Ze.update);break;case d.lx.RtmMetrics:this.rtmProcessingTimings.push(Ze.update);break;case d.lx.AppMetrics:this.updateMetrics(Ze.update);break;case d.lx.TroubleshootingEntryPoint:this.troubleshootingTags.troubleshootingEntryPoint=Ze.update;break;case d.lx.TroubleshootingContactUsClicked:this.troubleshootingTags.troubleshootingContactUsClicked=!0;break;default:Ge(Ze,{sharedTags:this.sharedTags,transientTags:this.transientTags})}},this.updateMetrics=Ze=>{let{huddleStateSnapshot:lt,clientMetricReport:nt,screenshareRtcStats:qe}=Ze;const Kt=nt?Te({clientMetricReport:nt,selfAttendeeId:nt.selfAttendeeId}):{},ln=nt?q(nt.getRTCStatsReport()):{},_n=ie(qe),Cn={...lt,...Kt,..._n,...ln,...this.sharedTags,...this.transientTags,...this.getRtmMetricTags(),...this.getRenderTimingTags(),...this.getTimestampTags(),...this.getComputePressureTags(),...this.getLongTaskTags(),...this.getTroubleshootingTags()},wn=Je(Cn);this.currentTags={...Cn,...wn},this.clearTransientTags(),this.lastAppMetricsRecordingTs=Date.now()},this.getCurrentTags=()=>({...this.currentTags}),this.clearTransientTags=()=>{this.transientTags={}},this.getLongTaskTags=()=>{var Ze;return(Ze=this.longTaskObserver)===null||Ze===void 0?void 0:Ze.getReportSinceLastCall()},this.getTimestampTags=()=>{const{huddleStartTimestamp:Ze}=this.currentTags;return Ze?{secondsSinceJoining:Math.floor((Date.now()-Ze)/1e3)}:{}},this.getRtmMetricTags=()=>{const Ze=this.rtmProcessingTimings.length;return this.rtmProcessingTimings=[],{rtmMessagesProcessed:Ze}},this.getTroubleshootingTags=()=>{const Ze={...this.troubleshootingTags};return this.troubleshootingTags={...xn},Ze},this.getComputePressureTags=()=>({computePressure:this.computePressure}),this.getRenderTimingTags=()=>{const Ze=Date.now()-this.lastAppMetricsRecordingTs,lt=(0,Y.A)(this.renderTimings),nt=this.renderTimings.length;return!lt||!Ze?{uiRenderTimePercent:0,uiRenderTimeMs:0}:(this.renderTimings=[],{uiRenderTimePercent:Number((lt/Ze*100).toFixed(1)),uiRenderCount:nt})},this.cleanup=()=>{var Ze,lt;(Ze=this.computePressureObserver)===null||Ze===void 0||Ze.unsubscribe(this.updateComputePressure),delete this.computePressureObserver,(lt=this.longTaskObserver)===null||lt===void 0||lt.stop(),delete this.longTaskObserver},this.initSharedTags(),this.initComputePressureObserver(),(Xe=this.longTaskObserver)===null||Xe===void 0||Xe.start()}},"HuddlePerfStateInternal");const An=null,vt=gn;var xt=e(550521),Vt=e(540291),Se=e(716685),St=e(491528),Ce=e(69938),Ne=e(282233);const ze="HUDDLES-PERF",Oe=5e3,Fe=1e3;let _t=l(class{constructor({teamId:Xe,logger:Ze,dispatch:lt,getState:nt,useRtmFiltering:qe=!1}){this.logger=(0,s.Wo)({label:ze}),this.callLogger=(0,w.tZ)(ze),this.errorReported=!1,this.lastRecordedMetricsTs=0,this.reportCounts={skipped:0,recorded:0},this.reportUpdate=Kt=>{Kt.type===d.lx.AppMetrics?this.recordAppMetrics(Kt):this.huddlePerfState.updateState(Kt)},this.recordAppMetrics=Kt=>{(0,Vt.IE)("huddle-perf-metrics",()=>{var ln,_n;if(!this.shouldRecordAppMetrics({nextReportTimestamp:(ln=Kt.update)===null||ln===void 0||(_n=ln.clientMetricReport)===null||_n===void 0?void 0:_n.currentTimestampMs})){this.reportCounts.skipped+=1;return}this.logger.debug("Recording app metrics",this.reportCounts.recorded),this.huddlePerfState.updateState(Kt);const Cn=this.huddlePerfState.getCurrentTags();this.huddlePerfTrace.recordAppMetrics(Cn),this.updateRtmScheduler(Cn);try{this.huddlePerfObserver.processTags(Cn)}catch(wn){this.errorReported||(this.callLogger.error("An error occurred while processing tags",wn),this.errorReported=!0)}this.lastRecordedMetricsTs=Date.now(),this.reportCounts.recorded+=1},{delay:100})},this.shouldRecordAppMetrics=Kt=>{let{nextReportTimestamp:ln}=Kt;if(!ln)return!1;const _n=Date.now(),Cn=_n-this.lastRecordedMetricsTs;if(Cn<Fe)return this.logger.debug(`Not enough time has passed since last report was recorded (${Cn}ms). Skipping. Total skipped: ${this.reportCounts.skipped}`),!1;const $n=_n-ln;return $n>Oe?(this.logger.debug(`Too much time has passed since the current report was made (${$n}ms). Skipping. Total skipped: ${this.reportCounts.skipped}`),!1):!0},this.updateRtmScheduler=Kt=>{const{cpuCompetitionScore:ln}=Kt;(0,m.A)(ln)&&(0,Se.Pk)({cpuCompetitionScore:ln})},this.report=Kt=>{this.huddlePerfTrace.report(Kt),xt.A.unsubscribe(this.reportUpdate),this.huddlePerfState.cleanup(),(0,i.rH)(!1),(0,Ce.ZR)(),(0,Se.TK)(),this.useRtmFiltering&&(this.callLogger.info("RTM filtering will be disabled"),(0,St.gR)())},this.huddlePerfTrace=new A({teamId:Xe,logger:Ze,callLogger:this.callLogger,enableMaxReportingFrequency:(0,Ne.CN)(nt())}),this.huddlePerfObserver=new R({logger:Ze,callLogger:this.callLogger,dispatch:lt}),this.useRtmFiltering=qe,this.huddlePerfState=new vt,xt.A.subscribe(this.reportUpdate),(0,i.rH)(!0),this.callLogger.info("RTM queues will be drained as background priority tasks by Huddle RTM scheduler"),this.useRtmFiltering&&(0,St.ws)(nt)}},"HuddlePerfManager");const ft=null,Ct=_t;var $t=e(449552),rn=e(792866),un=e(852922),hn=e(437556),pn=e(113574),Tn=e(204258),Qn=e(881805),zn=e(289123),Hn=e(134309),Kn=e(81527);const os=l(Pt=>{let{teamId:Xe}=Pt;var Ze,lt;const nt=(0,$t.getStoreInstanceByTeamId)(Xe).getState(),qe=(0,$t.getClientStoreInstance)().getState(),Kt=(0,Tn.E9)(qe),ln=(0,Tn.hc)(qe),_n=(0,Qn.jV)(nt),Cn=(0,Hn.ok)(nt,{huddleId:Kt}),wn=(0,Hn.Zg)(nt,{huddleId:Kt}),$n=(0,pn.WR)(nt),es=wn?wn.timestamps.map(b=>ln?(0,zn.Ld)(nt,ln,b):void 0).filter(b=>(b==null?void 0:b.user)===$n):[],ns=(Ze=es[0])===null||Ze===void 0?void 0:Ze.ts,jn=(lt=es.slice(-1)[0])===null||lt===void 0?void 0:lt.ts,ts=es.length,Xn=(0,hn.nv)(nt,$n),At=(0,Kn.P)(Xn);return{huddleId:Kt,channelId:ln,enterpriseId:_n,threadId:Cn,threadReplyCnt:ts,threadFirstReplyTs:ns,threadLastReplyTs:jn,isGuest:At}},"getHuddleEventsStateSnapshot"),et="huddle_events",Et="huddle",we="vhq",tt={topicName:Et,userAgent:navigator.userAgent,serviceName:we};let Rt=l(class{get spansList(){var Xe;return(0,rn.A)((Xe=this.trace)===null||Xe===void 0?void 0:Xe.getSpans())||[]}report(){var Xe;let Ze;try{Ze=(0,p.tT)({...this.sharedTags,...os({teamId:this.teamId})})}catch(nt){var lt;this.logger.error(`Error while reporting huddle_events trace: ${nt}`),(lt=this.tracer)===null||lt===void 0||lt.clearTrace(this.trace);return}!this.traceReported&&this.trace&&(this.trace.addTags(Ze),this.logger.info(`Reporting huddle_events trace: ${this.trace.getTraceId()} with ${this.spansList.length} spans`),this.tracer.reportTrace(this.trace),this.traceReported=!0,this.logger.debug("Reported huddle_events trace with tags",Ze)),(Xe=this.tracer)===null||Xe===void 0||Xe.clearTrace(this.trace)}constructor({teamId:Xe,logger:Ze}){this.sharedTags=tt,this.traceReported=!1,this.getSpanByName=lt=>this.spansList.find(nt=>lt===nt.getOperationName()),this.getDataSet=()=>{if(!(0,n.Cu)())return"client_metrics"},this.addInitialSpans=()=>{this.update({name:un.p.JOIN,type:un.G.START,tags:{}}),this.update({name:un.p.MINIPLAYER_VIEW,type:un.G.START})},this.isSurfaceChange=lt=>lt===un.p.MINIPLAYER_VIEW||lt===un.p.WINDOW_COMPACT_VIEW||lt===un.p.WINDOW_FULL_VIEW,this.handleSurfaceChange=lt=>{let{name:nt,type:qe}=lt;qe===un.G.START&&this.isSurfaceChange(nt)&&this.spansList.filter(Kt=>this.isSurfaceChange(Kt.getOperationName())).forEach(Kt=>{Kt.getOperationName()!==nt&&this.closeSpan(Kt)})},this.update=lt=>{let{name:nt,type:qe,tags:Kt}=lt;if(this.trace)if(qe===un.G.START||qe===un.G.ONCE){const ln=this.trace.startSpan(nt,{parentSpanId:this.joinSpanId});Kt&&ln.addTags(Kt),nt===un.p.JOIN&&(this.joinSpanId=ln.getId()),this.isSurfaceChange(nt)&&this.handleSurfaceChange({name:nt,type:qe}),this.logger.debug(`started new span for huddle_events trace: ${nt}`),qe===un.G.ONCE&&this.closeSpan(ln)}else{const ln=this.getSpanByName(nt);this.closeSpan(ln),this.logger.debug(`closed span for huddle_events trace: ${nt}`)}},this.closeSpan=lt=>{lt&&(lt.getCloseTimeMs()||lt.close())},this.recordEntryPoint=lt=>{Object.assign(this.sharedTags,{entryPoint:lt})},this.tracer=(0,a.E)({teamOrEnterpriseId:Xe}),this.trace=this.tracer.createTrace({traceName:et,tags:{__dataset:this.getDataSet()},samplingOptions:{sampleRate:1,sampleType:c.tS.SESSION}}),this.teamId=Xe,this.logger=Ze,this.logger.info(`created huddle_events trace:${this.trace.getTraceId()}`),this.addInitialSpans()}},"HuddleEventsTracer");const It="HUDDLE-TRACE-MANAGER",Jt=(0,s.Wo)({label:It});let an=l(class{initializeTraces(Xe){let{teamId:Ze,isTinySpeck:lt,isDebugApp:nt}=Xe;const qe=(0,$t.getStoreInstanceByTeamId)(Ze),Kt=qe.getState();this.teamId=Ze,this.tracer=(0,a.E)({teamOrEnterpriseId:this.teamId}),this.trace=this.tracer.createTrace({traceName:r.ne,samplingOptions:{sampleRate:(0,n.Cu)()||lt?1:.05,sampleType:c.tS.SESSION},tags:{__dataset:"client_metrics"}}),nt||(this.reconnectTrace=new o({tracer:this.tracer,trace:this.trace,logger:Jt}),this.ttiTrace=new u({teamId:this.teamId,logger:Jt}),this.huddleEventsTrace=new Rt({teamId:this.teamId,logger:Jt})),this.huddlePerfTraceManager=new Ct({teamId:this.teamId,logger:Jt,dispatch:qe.dispatch,getState:qe.getState,useRtmFiltering:(0,Ne.DP)(Kt)})}setCallId(Xe){var Ze;this.callId=Xe,(Ze=this.trace)===null||Ze===void 0||Ze.addTags({callId:this.callId}),Xe&&xt.A.publish({type:d.lx.CallId,update:{callId:Xe}})}getAllTraceHandlers(){return{reconnectTrace:this.reconnectTrace,ttiTrace:this.ttiTrace,huddlePerfTraceManager:this.huddlePerfTraceManager,huddleEventsTrace:this.huddleEventsTrace}}cleanup(){var Xe,Ze,lt,nt,qe,Kt;(Xe=this.reconnectTrace)===null||Xe===void 0||Xe.report(),(Ze=this.ttiTrace)===null||Ze===void 0||Ze.report(),(lt=this.huddlePerfTraceManager)===null||lt===void 0||lt.report(!0),(nt=this.huddleEventsTrace)===null||nt===void 0||nt.report(),(qe=this.tracer)===null||qe===void 0||qe.reportTrace(this.trace),(Kt=this.tracer)===null||Kt===void 0||Kt.clearTrace(this.trace),Jt.info("Reported and cleared huddle parent trace"),delete this.reconnectTrace,delete this.ttiTrace,delete this.huddlePerfTraceManager,delete this.huddleEventsTrace,this.callId=null}constructor(){Jt.info("Huddle Trace Manager created")}},"HuddleTraceManager");const Vn=(0,t.A)(()=>new an)},852922:(j,T,e)=>{"use strict";e.d(T,{G:()=>t,p:()=>n});var t;(function(s){s.START="start",s.STOP="stop",s.ONCE="once"})(t||(t={}));var n;(function(s){s.JOIN="session_join",s.VIDEO="video",s.SCREENSHARE="screenshare",s.REACTION="reaction_posted",s.MESSAGE="message_posted",s.MICROPHONE="microphone",s.MINIPLAYER_VIEW="mini_player_view",s.WINDOW_COMPACT_VIEW="window_compact_view",s.WINDOW_FULL_VIEW="window_full_view",s.THREAD_VIEW="thread_flexpane_view",s.TRANSCRIPT="trxn"})(n||(n={}))},391478:(j,T,e)=>{"use strict";e.d(T,{_3:()=>a,tT:()=>c});var t=e(979340),n=e(140714),s=e(180491);const a=l(o=>(0,t.A)(o),"formatTag"),c=l(function(o){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"peer_video";return(0,n.A)(o,(m,i)=>i.indexOf(u)>-1?i:a(i))},"formatTags"),r=l(()=>new Bluebird(o=>{setTimeout(o,0)}),"waitForNextTick")},250256:(j,T,e)=>{"use strict";e.d(T,{A:()=>g});var t=e(612104),n=e(73363),s=e(180491),a=e(381666),c=e(532395),r=e(388077),o=e(533456);function u(){return 2}l(u,"getVoiceFocusCacheVersion");var m;const i="voiceFocusCache";function d(){return{userAgent:"unknown",sdkVersion:"unknown",isSupported:"unknown"}}l(d,"createDefaultVoiceFocusCapability");function _(){return{vfConfig:"unknown",lastUpdateTimeMs:0}}l(_,"createDefaultVoiceFocusCachedConfig");function h(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window==null||(m=window.navigator)===null||m===void 0?void 0:m.userAgent,I=arguments.length>1?arguments[1]:void 0;const O=localStorage.getItem(i),M={version:u(),voiceFocusCapability:d(),voiceFocusCachedConfig:_()};if(!O)return M;let C;try{C=JSON.parse(O)}catch(P){return(0,o.tZ)("VOICE-FOCUS-CACHE").error("Could not parse voice focus cache from localStorage: ",P.message),M}return C.version!==u()?M:(C.voiceFocusCapability&&(C.voiceFocusCapability.userAgent!==y||C.voiceFocusCapability.sdkVersion!==I)&&(C.voiceFocusCapability=M.voiceFocusCapability,C.voiceFocusCachedConfig=M.voiceFocusCachedConfig),{...M,...C})}l(h,"readVoiceFocusCache");function p(y){try{localStorage.setItem(i,JSON.stringify(y))}catch(I){(0,o.tZ)("VOICE-FOCUS-CACHE").error("Could not write voice focus cache to localStorage: ",I.message)}}l(p,"writeVoiceFocusCache");var A=e(859790),v=e(550521);const E=1657647210615,f=1686248081659;let g=l(class{init(I){let{configOnly:O}=I;var M=this;return(0,t.coroutine)(function*(){O||M.callLogger.info(`VF cache: ${!!M.cache}`),M.isSupported=yield M.isCapable(!!O),M.isSupported&&M.prepare(O)})()}isAvailable(){return this.isSupported}getTransformDevice(){var I=this;return(0,t.coroutine)(function*(){if(I.isSupported&&(I.voiceFocusConfigPromise&&(yield I.voiceFocusConfigPromise),!!I.voiceFocusDeviceTransformerPromise)){try{yield I.voiceFocusDeviceTransformerPromise}catch{I.callLogger.error("Could not get VoiceFocusDeviceTransformer");return}if(I.voiceFocusTransformDevicePromise)try{return yield I.voiceFocusTransformDevicePromise}catch{I.callLogger.error("Could not get VoiceFocusTransformDevice")}}})()}shouldDisable(){return!1}setMute(I){var O=this;return(0,t.coroutine)(function*(){const M=yield O.getTransformDevice();M&&(yield M.mute(I))})()}isCapable(I){var O=this;return(0,t.coroutine)(function*(){if(O.isIFramed())return I||O.callLogger.warn("not supported due to IFrame"),!1;let M=!1;switch(O.cache.voiceFocusCapability.isSupported){case"yes":I||O.callLogger.info("cache says supported"),M=!0;break;case"no":I||O.callLogger.info("cache says not supported"),M=!1;break;case"unknown":{I||O.callLogger.info("cache says unknown, determining support..."),O.cache.voiceFocusCapability.userAgent=(0,n.A)(),O.cache.voiceFocusCapability.sdkVersion=r.zF.sdkVersion,M=yield(0,r.w2)().isSupported(),M?O.cache.voiceFocusCapability.isSupported="yes":O.cache.voiceFocusCapability.isSupported="no",p(O.cache),I||O.callLogger.info(`determined supported=${O.cache.voiceFocusCapability.isSupported}, writing to cache`);break}default:O.callLogger.warn(`Voice Focus capability pref bad: ${O.cache.voiceFocusCapability.isSupported}`);break}return M})()}isIFramed(){try{var I;return((I=window.frameElement)===null||I===void 0?void 0:I.nodeName)==="IFRAME"||parent!==top}catch{return!0}}isStale(I){const M=this.cache.voiceFocusCachedConfig.lastUpdateTimeMs,C=this.allowMaxModelsToBeUsed?f:E;return M===0||I-M>6048e5||M<C}prepare(){let I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const O=Date.now(),M=this.cache.voiceFocusCachedConfig.vfConfig,C=this.isStale(O),P={},L={logger:this.chimeLogger};if(M!=="unknown"&&!C){if(I)return;if(!M.supported){this.callLogger.warn("Unsupported config was returned from the cache");return}this.setupDevice(P,L,M);return}this.voiceFocusConfigPromise||(this.callLogger.info("Initializing VoiceFocusDeviceTransformer afresh"),this.voiceFocusConfigPromise=s.S.resolve((0,r.w2)().configure(P,L)),this.voiceFocusConfigPromise.then(x=>{var F;if(!x.supported){this.callLogger.error(`VF Config was provided as unsupported Reason: ${x.reason}`);return}if(!(!(x==null||(F=x.model)===null||F===void 0)&&F.simd)){this.callLogger.error("VF not enabled because device is not expected to be able to perform adequately");return}const B=x;this.callLogger.info(`Got new config, variant: ${B.model.variant}, simd: ${B.model.simd}, executionQuanta: ${B.executionQuanta}`),this.storeVfConfig(O,B),I||this.setupDevice(P,L,B)}).catch(x=>{this.callLogger.info(`Could not get configuration of voice device transformer: ${x.name}: ${x.message}`),I||this.setupDevice(P,L)}))}storeVfConfig(I,O){this.cache.voiceFocusCachedConfig.vfConfig=O,this.cache.voiceFocusCachedConfig.lastUpdateTimeMs=I,p(this.cache)}updateCacheWithUpdatedConfig(I){var O=this;return(0,t.coroutine)(function*(){O.callLogger.info("Updating VF cache with new modified model");const M={logger:O.chimeLogger},C={variant:I},P=yield(0,r.w2)().configure(C,M);P.supported&&O.storeVfConfig(Date.now(),P)})()}setupDevice(I,O,M){const C=I;let P=M,L,x;M?(L=M.model.variant,x=!0):(this.callLogger.info("No VFConfig provided defaulting base model to c10"),L="c10",x=!1);let F=!0;this.allowMaxModelsToBeUsed&&(F=!1);const V=this.chooseModelVariant(L,x,F);if(V.modelWasAdjusted&&(C.variant=V.chosenModel,P=void 0,this.callLogger.info(`VF Model was adjusted from ${M==null?void 0:M.model.variant} to ${V.chosenModel} Reason: ${V.adjustmentReason}`),this.updateCacheWithUpdatedConfig(V.chosenModel)),M){(0,a.e)().track(c.EventId.CALLS_VOICE_FOCUS_CONFIG,{model_variant_determined:M.model.variant,model_variant_override:C.variant,simd:M.model.simd,execution_quanta:M.executionQuanta,hw_concurrency:navigator==null?void 0:navigator.hardwareConcurrency});const D={...M};D.model.variant=V.chosenModel,v.A.publish({type:A.lx.VoiceFocusConfig,update:D}),this.callLogger.info(`model_variant_determined: ${M.model.variant}, model_variant_override: ${V.chosenModel}, simd: ${M.model.simd}, execution_quanta: ${M.executionQuanta}, hw_concurrency: ${navigator==null?void 0:navigator.hardwareConcurrency}`)}this.voiceFocusDeviceTransformerPromise=s.S.resolve((0,r.w2)().create(C,O,P));var B=this;this.voiceFocusDeviceTransformerPromise.then(function(){var D=(0,t.coroutine)(function*(S){B.voiceFocusTransformDevicePromise=s.S.resolve(S.createTransformDevice(null))});return function(S){return D.apply(this,arguments)}}()).catch(D=>{this.callLogger.info(`Could not create voice device transformer exp: ${D.name}: ${D.message}`)})}chooseModelVariant(I,O,M){const C={c10:1,c20:2,c50:3,c100:4},P=navigator==null?void 0:navigator.hardwareConcurrency;if(!P)return this.callLogger.info(`Hardware concurrency not available, using self-determined model variant: ${I}`),{modelWasAdjusted:!1,chosenModel:I,adjustmentReason:""};let L;return P<=4?L="c10":P<=6?L="c20":P<=8?L="c50":L="c100",C[L]<C[I]&&!M?{modelWasAdjusted:this.wasModelAdjusted(L,I,O),chosenModel:L,adjustmentReason:"Using CPU restricted model variant which is weaker"}:C[L]>C[I]&&(this.callLogger.info(`using self-determined model variant which is weaker: ${I}`),L=I,!M)?{modelWasAdjusted:!1,chosenModel:I,adjustmentReason:""}:L==="c100"?{modelWasAdjusted:this.wasModelAdjusted("c20",I,O),chosenModel:"c20",adjustmentReason:"Model selection was determined to be c100 capping the model at C20"}:{modelWasAdjusted:this.wasModelAdjusted("c10",I,O),chosenModel:"c10",adjustmentReason:"Model selection was determined to be less than c100 capping the model at C10"}}wasModelAdjusted(I,O,M){return I===O&&!M||I!==O}tearDown(){var I=this;return(0,t.coroutine)(function*(){const O=yield I.getTransformDevice();O&&(I.callLogger.info("Attempting to destroyVoiceFocus"),r.wV.destroyVoiceFocus(O))})()}constructor(I,O){this.chimeLogger=I,this.allowMaxModelsToBeUsed=O,this.callLogger=(0,o.Jt)("VOICE-FOCUS-MANAGER"),this.isSupported=!1,this.cache=h((0,n.A)(),r.zF.sdkVersion)}},"VoiceFocusManager")},170852:(j,T,e)=>{"use strict";e.d(T,{k:()=>c});var t=e(381666),n=e(113574),s=e(400497),a=e(873002);function c(r,o){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;var i;const d=(i=(0,a.KA)())===null||i===void 0?void 0:i.getState();if(!d)return;const _=(0,t.e)({state:d}).setUser((0,n.WR)(d));if(u){const h={...o,room_id:(0,s.G0)(d)};_.track(r,h,{sendImmediately:m})}else _.track(r,o,{sendImmediately:m})}l(c,"trackCallsClog")},654280:(j,T,e)=>{"use strict";e.d(T,{w:()=>v});var t=e(612104),n=e(858545),s=e(180491),a=e(674217),c=e(437556),r=e(129318),o=e(349799),u=e(838426),m=e(144473),i=e(638819),d=e(246673);const _="screenhero.rooms.proxyLogs",h=(0,a.Ay)("Send call logs to the server",(E,f,g)=>{let{logs:y,useSendBeacon:I=!1,callId:O}=g;const M=f();let C;if(O?C=O:M.activeCall&&M.activeCall.id&&(C=M.activeCall.id),!C)return(0,d.M)(!1,"There should be an active call in progress in order to send logs."),s.S.reject(new Error("SendLogs: no call"));const P=(0,c.cA)(M),L=(0,r.H7)(M);if(!L)return s.S.reject(new Error("SendLogs: no current team"));const x={data:{room_id:C,user_id:P.id,team_id:L.id,ua:window.navigator.userAgent,event_type:"calls_js_logs",encoding:"none",logs:y}},F={data:JSON.stringify(x.data)};return I?(0,m.A)({apiUrl:"/api/",method:_,token:(0,i.F)(M),versionTs:(0,u.HF)(),versionUid:(0,u.X3)(),args:F})?s.S.resolve():s.S.reject(new Error("SendLogs: beacon failed")):E((0,o.apiCall)({method:_,reason:"calls-logging",args:F}))});h.meta={name:"createThunk",key:"createThunksendLogs",description:"Send call logs to the server"};var p=e(873002);const A=60*1e3;class v{start(f){(0,d.M)(!this.intervalHandle,"Log reporter already started."),this.callId=f,this.intervalHandle=window.setInterval(()=>this.report(!1),A),window.addEventListener("beforeunload",this.unloadHandler)}joinLogs(f){return f.map(g=>g.join(" ")).join(`
`)}constructor(f=n.t){this.buffer=f,this.isPostPending=!1,this.unloadHandler=()=>{window.Cypress||this.report(!0)};var g=this;this.stop=(0,t.coroutine)(function*(){let I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;g.intervalHandle&&window.clearInterval(g.intervalHandle),g.intervalHandle=void 0,window.removeEventListener("beforeunload",g.unloadHandler),I&&(yield g.report(O)),g.buffer.hasItems()&&(yield g.report(O)),g.callId=void 0});var y=this;this.report=(0,t.coroutine)(function*(){let I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(y.isPostPending&&!I)return;const{dispatch:O}=(0,p.KA)(),M=y.buffer.flush();if(!M.length)return;y.isPostPending=!0;const C=y.joinLogs(M);yield O(h({logs:C,useSendBeacon:I,callId:y.callId})).catch(()=>{y.buffer.replace(M.concat(y.buffer.flush()))}).finally(()=>{y.isPostPending=!1})})}}l(v,"LogReporter")},966528:(j,T,e)=>{"use strict";e.d(T,{A:()=>n});var t=e(46935);const n=new t.G},400497:(j,T,e)=>{"use strict";e.d(T,{G0:()=>Y,jl:()=>ce,pI:()=>Ae});var t=e(774165),n=e(152532),s=e(519543),a=e(246673),c=e(119110),r=e(285753),o=e(129318),u=e(934861),m=e(347737),i=e(264918);const d=(0,n.Ay)("Update part or all of the call");d.meta={name:"createAction",key:"createActionupdate",description:"Update part or all of the call"};const _=(0,n.Ay)("Update the active call token");_.meta={name:"createAction",key:"createActionsetServerToken",description:"Update the active call token"};const h=(0,n.Ay)("Update the elapsed call time");h.meta={name:"createAction",key:"createActiontickCallTime",description:"Update the elapsed call time"};const p=(0,n.Ay)("update state to notify active call window is closed");p.meta={name:"createAction",key:"createActioncallWindowClosed",description:"update state to notify active call window is closed"};const A=(0,n.Ay)("Show slow network alert");A.meta={name:"createAction",key:"createActionshowSlowNetworkAlert",description:"Show slow network alert"};const v=(0,n.Ay)("Hide slow network alert");v.meta={name:"createAction",key:"createActionhideSlowNetworkAlert",description:"Hide slow network alert"};const E=(0,n.Ay)("Set no media input from microphone or camera");E.meta={name:"createAction",key:"createActionsetNoMediaInput",description:"Set no media input from microphone or camera"};const f=(0,n.Ay)("Clear no media input from microphone or camera");f.meta={name:"createAction",key:"createActionclearNoMediaInput",description:"Clear no media input from microphone or camera"};const g=(0,n.Ay)("Set no audio output");g.meta={name:"createAction",key:"createActionsetNoAudioOutput",description:"Set no audio output"};const y=(0,n.Ay)("Clear no audio output");y.meta={name:"createAction",key:"createActionclearNoAudioOutput",description:"Clear no audio output"};const I=(0,n.Ay)("Set no or low input audio level");I.meta={name:"createAction",key:"createActionsetNoOrLowInputAudioLevel",description:"Set no or low input audio level"};const O=(0,n.Ay)("Clear no or low input audio level");O.meta={name:"createAction",key:"createActionclearNoOrLowInputAudioLevel",description:"Clear no or low input audio level"};const M=(0,n.Ay)("Start session timeout check");M.meta={name:"createAction",key:"createActionstartSessionTimeoutCheck",description:"Start session timeout check"};const C=(0,n.Ay)("Stop session timeout check");C.meta={name:"createAction",key:"createActionstopSessionTimeoutCheck",description:"Stop session timeout check"};const P=(0,n.Ay)("Maybe start peer joining timeout check");P.meta={name:"createAction",key:"createActionmaybeStartPeerJoinTimeoutCheck",description:"Maybe start peer joining timeout check"};const L=(0,n.Ay)("Stop peer joining timeout check");L.meta={name:"createAction",key:"createActionstopPeerJoinTimeoutCheck",description:"Stop peer joining timeout check"};const x=(0,n.Ay)("Store gleaned contextual information from the url");x.meta={name:"createAction",key:"createActionsetInitialContext",description:"Store gleaned contextual information from the url"};const F=(0,n.Ay)("Set call view mode");F.meta={name:"createAction",key:"createActionsetCallViewMode",description:"Set call view mode"};const V=(0,n.Ay)("Ends call");V.meta={name:"createAction",key:"createActionendCall",description:"Ends call"};const B=(0,t.vy)({},{hasJoined:!1,hasSelfConnected:!1,hasRemotePeerConnected:!1,hasVideoBeenEnabled:!1,hasScreenshareBeenEnabled:!1,elapsedDisplayTime:(0,r.A)(0),viewMode:s.ND.SPEAKER},{storeKey:"activeCall",persistenceEnabled:!1}).on(x,($,re)=>{let{viewId:ue,inviterUserId:te}=re,ae,H,U;return(0,s.cd)(ue)?ae=ue:(0,s.t1)(ue)?H=ue:(0,s.bU)(ue)&&(U=ue),{...$,id:ae,conversationId:H,incomingInviterUserId:te,incomingInviteResponse:(0,c.y3)()?void 0:s.xr.Accept,virtualRoomId:U}}).on(d,($,re)=>{let{terminalState:ue}=re;return $.terminalState&&(ue=$.terminalState),{...$,...re,terminalState:ue}}).on(p,($,re)=>{let{isCallWindowClosed:ue}=re;return{...$,isCallWindowClosed:ue}}).on(F,($,re)=>{let{callViewMode:ue}=re;return{...$,viewMode:ue}}).on(h,$=>$.callStartedTimestamp?{...$,elapsedDisplayTime:(0,r.A)(Date.now()-$.callStartedTimestamp*1e3)}:$).on(_,($,re)=>{let{token:ue,tokenExpiry:te}=re;return $.server?{...$,server:{...$.server,token:ue,tokenExpiry:te}}:((0,a.M)("Cannot set server token without a server"),$)}).on(i.kT,($,re)=>({...$,hasVideoBeenEnabled:$.hasVideoBeenEnabled||!!re.isCameraEnabled,hasScreenshareBeenEnabled:$.hasScreenshareBeenEnabled||!!((0,i.E_)(re)&&re.isScreenshareEnabled),hasSelfConnected:$.hasSelfConnected||!!((0,i.E_)(re)&&re.isConnected)})).on(i.BD,($,re)=>({...$,hasVideoBeenEnabled:$.hasVideoBeenEnabled||!re.isContent,hasScreenshareBeenEnabled:$.hasScreenshareBeenEnabled||re.isContent})).on(i.E3,($,re)=>({...$,hasRemotePeerConnected:$.hasRemotePeerConnected||!!re.isConnected})).on(i.kl,($,re)=>({...$,hasScreenshareBeenEnabled:$.hasScreenshareBeenEnabled||!!re.isScreenshareEnabled}));var D=null;const S=l($=>!!$.activeCall.incomingInviterUserId&&!$.activeCall.incomingInviteResponse,"isIncomingInvitePending"),R=l($=>!!$.activeCall.incomingInviterUserId,"wasInvitedToCall"),w=l($=>!!$.activeCall.conversationId&&isDm($.activeCall.conversationId),"wasCreatedFromDm"),Y=l($=>{var re;return $==null||(re=$.activeCall)===null||re===void 0?void 0:re.id},"getActiveCallId"),Q=l($=>$.activeCall.server,"getActiveCallServer"),Z=l($=>$.activeCall.conversationId,"getActiveConversationId"),ee=l($=>$.activeCall&&$.activeCall.dynamicSurvey,"getDynamicSurveyRates"),_e=l($=>$.activeCall.hasSelfConnected&&$.activeCall.hasRemotePeerConnected,"didSelfAndPeerConnect"),Ee=l($=>$.activeCall.terminalState,"getActiveCallTerminalState"),G=l($=>{if(!(!$.activeCall||!$.activeCall.server))return $.activeCall.server.hostname?MediaBackendType.ORCA:MediaBackendType.FREE_WILLY},"getCallMediaBackendType"),Ae=l($=>$.activeCall.isShroudVisible,"isShroudVisibleInCallWindow"),ce=l($=>{var re;return(re=$.activeCall)===null||re===void 0?void 0:re.viewMode},"getCallViewMode"),de=l($=>{var re,ue;return $==null||(re=$.activeCall)===null||re===void 0||(ue=re.sharedInConversations)===null||ue===void 0?void 0:ue[0]},"getCallSharedInConversation"),oe=l($=>{const re=getCurrentTeam($),ue=Z($)||de($);return!!ue&&isOnFreePlan(re)&&getChannelIsSponsored($,ue)},"isSponsoredConnectionsChannel")},904214:(j,T,e)=>{"use strict";e.d(T,{Iw:()=>C,LL:()=>L,Sb:()=>P,WG:()=>x,Xs:()=>D,eI:()=>M,mV:()=>I,vT:()=>E,xw:()=>B});var t=e(774165),n=e(152532),s=e(801081),a=e(264918),c=e(400497),r=e(519543),o=e(651543),u=e(930679),m=e(194092),i=e(46996),d=e(269592),_=e(991235),h=e(790973),p=e(533456),A=e(839716),v=e(166433),E;(function(S){S.Connecting="connecting",S.NoConnection="noConnection",S.NoUserAudioDevice="noUserAudioDevice",S.NoUserVideoDevice="noUserVideoDevice",S.NoSystemAudio="noSystemAudio",S.NoSystemVideo="noSystemVideo",S.NoSystemScreenShare="noSystemScreenShare",S.RemotePeerMuted="remotePeerMuted",S.PeerMuteRequest="peerMuteRequest",S.RemotePeerSlowConnection="remotePeerSlowConnection",S.DisplayDisconnected="displayDisconnected",S.UpdateSlack="updateSlack",S.ScreenShareFreeTeam="screenShareFreeTeam",S.NoGroupCallsForFreeTeam="noGroupCallsForFreeTeam",S.NoUserVideoStream="noUserVideoStream",S.NoUserAudioStream="noUserAudioStream",S.SlowNetwork="slowNetwork",S.NoAudioOutputAudioElementError="noAudioOutputAudioElementError",S.NoAudioOutputAudioLevelError="noAudioOutputAudioLevelError",S.NoOrLowInputAudioLevelError="noOrLowInputAudioLevelError",S.SpeakingWhenMuted="SpeakingWhenMuted",S.ScreenShareError="screenShareError",S.SSNotFoundError="ScreenShareNotFoundError",S.SSNotReadableError="ScreenShareNotReadableError",S.NoiseSuppressionCPUThrottled="NoiseSuppressionCPUThrottled",S.NoBrowserAudioPermission="NoBrowserAudioPermission",S.NoBrowserVideoPermission="NoBrowserVideoPermission",S.AudioInputTrackMuted="AudioInputTrackMuted",S.HiddenUserJoinedHuddle="HiddenUserJoinedHuddle",S.AudioOnlyModeRecommended="AudioOnlyRecommended",S.AudioOnlyModeActive="AudioOnlyModeActive",S.ExternalUsersInHuddle="ExternalUsersInHuddle"})(E||(E={}));const f=[E.RemotePeerMuted,E.SlowNetwork];function g(S,R){switch(S){case E.NoConnection:return{priority:0,type:S,icon:"cloud-offline",isWarning:!0};case E.Connecting:return{priority:0,type:S,isWarning:!0};case E.NoSystemAudio:return{priority:200,type:S,dismissible:!0,isWarning:!0};case E.SpeakingWhenMuted:return{priority:200,type:S,dismissible:!0};case E.AudioInputTrackMuted:return{priority:200,type:S,dismissible:!0,isWarning:!0};case E.NoUserAudioDevice:return{priority:201,type:S,dismissible:!0,isWarning:!0};case E.NoUserAudioStream:return{priority:202,type:S,dismissible:!0,isWarning:!0};case E.NoiseSuppressionCPUThrottled:return{priority:203,type:S,dismissible:!0,isWarning:!0};case E.NoBrowserAudioPermission:return{priority:204,type:S,dismissible:!0,isWarning:!0};case E.AudioOnlyModeActive:return{priority:205,type:S,dismissible:!0,isWarning:!0};case E.AudioOnlyModeRecommended:return{priority:206,type:S,dismissible:!0,isWarning:!0};case E.NoSystemScreenShare:return{priority:300,type:S,dismissible:!0,isWarning:!0};case E.ScreenShareError:return{priority:301,type:S,dismissible:!0,isWarning:!0};case E.SSNotFoundError:return{priority:302,type:S,dismissible:!0,isWarning:!0};case E.SSNotReadableError:return{priority:303,type:S,dismissible:!0,isWarning:!0};case E.NoSystemVideo:return{priority:400,type:S,dismissible:!0,isWarning:!0};case E.NoUserVideoDevice:return{priority:401,type:S,dismissible:!0,isWarning:!0};case E.NoUserVideoStream:return{priority:402,type:S,dismissible:!0,isWarning:!0};case E.NoBrowserVideoPermission:return{priority:403,type:S,dismissible:!0,isWarning:!0};case E.ScreenShareFreeTeam:return{priority:500,type:S,dismissible:!0};case E.NoGroupCallsForFreeTeam:return{priority:500,type:S,dismissible:!0};case E.HiddenUserJoinedHuddle:return{priority:600,type:S,dismissible:!0,isWarning:!0};case E.ExternalUsersInHuddle:return{priority:601,type:S,dismissible:!0,isWarning:!0};case E.SlowNetwork:return{priority:700,type:S,dismissible:!0,isWarning:!0,icon:"slow-network"};case E.NoAudioOutputAudioElementError:return{priority:701,type:S,dismissible:!0,isWarning:!0};case E.NoAudioOutputAudioLevelError:return{priority:701,type:S,dismissible:!0,isWarning:!0};case E.NoOrLowInputAudioLevelError:return{priority:701,type:S,dismissible:!0,isWarning:!0};case E.RemotePeerSlowConnection:return{priority:800,type:S,id:R};case E.RemotePeerMuted:return{priority:801,type:S,id:R,icon:"microphone-slash"};case E.PeerMuteRequest:return{priority:802,type:S,id:R,dismissible:!0,isWarning:!0};case E.DisplayDisconnected:return{priority:900,type:S,dismissible:!0};case E.UpdateSlack:default:return{priority:1e3,type:S,dismissible:!0}}}l(g,"makeAlertObject");const y={alerts:[]};function I(S,R,w){const Y=g(R,w);return w?(0,o.A)((0,u.A)([Y,...S.alerts],["priority"]),(Q,Z)=>Q.id===Z.id&&Q.type===Z.type):(0,o.A)((0,u.A)([Y,...S.alerts],["priority"]),(Q,Z)=>Q.id?Q.id===Z.id&&Q.type===Z.type:Q.type===Z.type)}l(I,"createArrayWithNewAlert");function O(S,R){return(0,m.A)(S.alerts,w=>w.type!==R)}l(O,"filterAlertType");function M(S,R){return(0,m.A)(S.alerts,w=>!R.find(Y=>w.type===Y))}l(M,"filterAlertTypes");const C=(0,n.Ay)("Add an alert from the alerts array");C.meta={name:"createAction",key:"createActionaddAlert",description:"Add an alert from the alerts array"};const P=(0,n.Ay)("Add an alert from the alerts array, specifying sender peer Id");P.meta={name:"createAction",key:"createActionaddPeerAlert",description:"Add an alert from the alerts array, specifying sender peer Id"};const L=(0,n.Ay)("Remove an alert from the alerts array");L.meta={name:"createAction",key:"createActionremoveAlert",description:"Remove an alert from the alerts array"};const x=l(()=>(0,t.vy)({},y,{storeKey:"alert",persistenceEnabled:!1}).on(C,(S,R)=>{const w=I(S,R);return(0,i.A)(S.alerts,w)?S:((0,p.tZ)("ALERTS").info(`Added alert type: '${R.toString()}'`),{alerts:w})}).on(P,(S,R)=>{let{alert:w,peerId:Y}=R;const Q=I(S,w,Y);return(0,i.A)(S.alerts,Q)?S:((0,p.tZ)("ALERTS").info(`Added peer alert type: '${w.toString()}'`),{alerts:Q})}).on(L,(S,R)=>{const w=O(S,R);return(0,i.A)(S.alerts,w)?S:((0,p.tZ)("ALERTS").info(`Removed alert type: '${R.toString()}'`),{alerts:w})}),"createDefaultAlertReducer"),F=x().on(A.Fb,(S,R)=>{let w=S.alerts;return(0,v.yp)(R)?w=(0,m.A)(S.alerts,Y=>Y.type!==E.NoUserAudioDevice):w=I(S,E.NoUserAudioDevice),{alerts:w}}).on(a.Uu,(S,R)=>{let w=S.alerts;return R.isMicrophoneEnabled===!1&&(w=I(S,E.RemotePeerMuted,R.id)),R.slowNetwork&&(w=I(S,E.RemotePeerSlowConnection,R.id)),{alerts:w}}).on(a.xx,(S,R)=>({alerts:(0,m.A)(S.alerts,Y=>Y.id!==R)})).on(a.kT,(S,R)=>{let w=S.alerts;return(0,a.E_)(R)?(0,d.A)(R.isConnected)||(R.isConnected?w=O(S,E.Connecting):w=I(S,E.Connecting,R.id)):((0,d.A)(R.isMicrophoneEnabled)||(R.isMicrophoneEnabled?w=O(S,E.RemotePeerMuted):w=I(S,E.RemotePeerMuted,R.id)),(0,d.A)(R.slowNetwork)||(R.slowNetwork===!1?w=O(S,E.RemotePeerSlowConnection):R.slowNetwork&&(w=I(S,E.RemotePeerSlowConnection,R.id)))),{alerts:w}});var V=null;const B=(0,t.Mz)(S=>S.alert.alerts);B.meta={name:"createSelector",key:"createSelectorgetAllAlerts",description:S=>S.alert.alerts};const D=(0,s.Mz)(B,a.EA,c.jl,(S,R,w)=>{let Y=S;w===r.ND.GALLERY&&(Y=(0,m.A)(S,ee=>!f.includes(ee.type)));let Q=Y[0];return(0,_.A)(R)>1&&(Q=(0,h.A)(S,ee=>!ee.id)),Q})},607680:(j,T,e)=>{"use strict";e.d(T,{D8:()=>d,WY:()=>i,cn:()=>_,d2:()=>u,gJ:()=>m});var t=e(152532);const n=(0,t.Ay)("connect to free willy media server");n.meta={name:"createAction",key:"createActionconnectToFreeWillyMediaServer",description:"connect to free willy media server"};const s=(0,t.Ay)("Set flag to indicate if experimental Chime SDK should be used");s.meta={name:"createAction",key:"createActionsetUseChimeSdkExp",description:"Set flag to indicate if experimental Chime SDK should be used"};const a=(0,t.Ay)("Set flag to indicate if simulcast should be used in a Chime call");a.meta={name:"createAction",key:"createActionsetUseSimulcast",description:"Set flag to indicate if simulcast should be used in a Chime call"};const c=(0,t.Ay)("Set flag to indicate if priority based downlink policy should be used in a Chime call");c.meta={name:"createAction",key:"createActionsetUsePriorityDownlinkPolicy",description:"Set flag to indicate if priority based downlink policy should be used in a Chime call"};const r=(0,t.Ay)("Set flag to indicate if getMediaAccess checks for Windows should be used in a Chime call");r.meta={name:"createAction",key:"createActionsetUseGetMediaAccessCheckForWindows",description:"Set flag to indicate if getMediaAccess checks for Windows should be used in a Chime call"};const o=(0,t.Ay)("Set flag to determine if a call is a readiness test call");o.meta={name:"createAction",key:"createActionsetReadinessCheck",description:"Set flag to determine if a call is a readiness test call"};const u=(0,t.Ay)("Binds video tile to a video element");u.meta={name:"createAction",key:"createActionbindVideo",description:"Binds video tile to a video element"};const m=(0,t.Ay)("Unbinds video tile from a video element");m.meta={name:"createAction",key:"createActionunbindVideo",description:"Unbinds video tile from a video element"};const i=(0,t.Ay)("Pauses video tile");i.meta={name:"createAction",key:"createActionpauseVideo",description:"Pauses video tile"};const d=(0,t.Ay)("Unpauses video tile");d.meta={name:"createAction",key:"createActionunpauseVideo",description:"Unpauses video tile"};const _=(0,t.Ay)("Returns if there in a stream associated with the tileId");_.meta={name:"createAction",key:"createActionvideoTileHasStream",description:"Returns if there in a stream associated with the tileId"}},613769:(j,T,e)=>{"use strict";e.d(T,{P:()=>t});const t={height:576,width:1024,useContentSize:!0,minContentWidth:704,minContentHeight:396,center:!0,frame:!0,titleBarStyle:"default"};function n(s){return!!has(s,"activeCall")}l(n,"isCallWindowContextState")},171353:(j,T,e)=>{"use strict";e.d(T,{Rv:()=>V,Xk:()=>F,hL:()=>x,j7:()=>Y,lp:()=>B,tO:()=>G,tw:()=>D,uI:()=>_e,vf:()=>ee});var t=e(89149),n=e(850960),s=e(536160),a=e(710596),c=e(658160),r=e(396386),o=e(439642),u=e(934861),m=e(19579),i=e(437556),d=e(126796),_=e(166747),h=e(23219),p=e(246634),A=e(129318),v=e(649098),E=e(885850),f=e(178107),g=e(735651),y=e(519543),I=e(97059),O=e(47801);const M="Slack",C=new v.Ay("calls");function P(ce){return!!(0,t.x)(ce,"allow_calls")}l(P,"isCallsAllowedByAdmin");function L(ce,de){return(0,O.pt)(ce)&&(0,O.Bn)(ce,de)}l(L,"isHuddlesAllowed");function x(ce,de,oe){const $=(0,E.Pu)(ce,de.id);return!(!P(ce)&&!L(ce,$)||(0,h.fy)(de)&&!oe||!(0,h._W)(de)||!(0,g.S)(ce,de.id)||(0,a.Mi)($))}l(x,"canCallMember");function F(ce,de){let oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const $=(0,i.nv)(ce,(0,c.e)(de)),re=oe&&Z(ce);return!P(ce)&&!L(ce,de)&&!re||(0,s.Zz)(de)||(0,r.LI)(de)&&(!$||!x(ce,$))||!(0,a.Ez)(de)?!1:(0,m.c)(ce,de)}l(F,"isCallButtonVisibleForChannel");function V(ce,de){return(0,d.Pb)(ce)?((0,a.bU)(de)||(0,n.F)(de))&&!Ae(de):!0}l(V,"isCallButtonDisabledForChannel");function B(ce,de){const oe=(0,E.OL)(ce,de);return oe&&!V(ce,oe)&&F(ce,oe)}l(B,"canStartCallInChannel");function D(ce,de,oe){const $=(0,o.V)(de),re=(0,f.q8)(ce,$),ue=(0,i.nv)(ce,oe,{preferNonExistentToNull:!1,fetchIfMissing:!0}),te=(0,h.v8)(ue),ae=(0,f.OJ)({callsApp:re,memberPhoneNumber:te,hideVideoApps:!1}),H=ae.length,U=L(ce,de);let N=H;return U&&(N+=1),N>1?C.t("{numCallApps} calling options",{numCallApps:N}):N===1?H===0?"":C.t("using {appName}",{appName:ae[0].name}):""}l(D,"getTipSubtitleForStartCall");function S(ce,de,oe){const $=(0,_.I)(ce,(0,c.e)(de));return oe?C.rt("Huddle with {name}",{name:$,fallbackHash:"8e987d72e71ed558e674143b7f1cde8c0e13d4aa",fallbackHashNs:"huddles"}):C.rt("Call {name}",{name:$})}l(S,"getTipForIm");function R(ce,de,oe){const $=(0,a.d3)(ce,de).map(ue=>(0,p.sE)(ce,ue)),re=(0,v.jd)($,{noEscape:!0}).join("");return oe?C.rt("Huddle with {listOfNamesWithConjunction}",{listOfNamesWithConjunction:re,fallbackHash:"8e987d72e71ed558e674143b7f1cde8c0e13d4aa",fallbackHashNs:"huddles"}):C.rt("Call {listOfNamesWithConjunction}",{listOfNamesWithConjunction:re})}l(R,"getTipForMpim");function w(ce,de,oe){return(0,r.LI)(de)?S(ce,de,oe):(0,r.yz)(de)?R(ce,de,oe):oe?C.t("Huddle in {channelName}",{channelName:(0,a.SB)(ce,de),fallbackHash:"2e4c8c4a478aa889a4b6fe33316b3d0a6d93301d",fallbackHashNs:"huddles"}):C.t("Start a call")}l(w,"getTipForChannel");function Y(ce,de){const oe=(0,A.H7)(ce),$=(0,u.qR)(oe),re=Z(ce),ue=$||re,te=L(ce,de)&&!ee(ce);return(0,d.Pb)(ce)?ue&&(0,n.F)(de)?C.t("Unarchive this channel to start a huddle"):ue&&(0,a.bU)(de)?C.t("Join this channel to start a huddle"):(re||Ae(de),w(ce,de,te)):C.t("Go online to start a huddle")}l(Y,"getTipForStartCall");function Q(ce,de){const oe=getCurrentTeam(ce),$=isPaidTeamRule(oe),re=isMpimRule(de),ue=Z(ce),te=$||ue;return!isClientOnline(ce)||te&&isArchived(de)||te&&isPreview(de)||ue?!1:!!(!$&&re||!$&&isNonImOrMpimChannel(de))}l(Q,"isFreeTeamAndInChannelOrMpim");function Z(ce){const de=(0,f.wZ)(ce);for(let oe=0;oe<de.length;oe++)if(de[oe].id!==y.rq)return!0;return!1}l(Z,"isThirdPartyCallEnabled");function ee(ce){return(0,f.wZ)(ce).length>0}l(ee,"isAnyCallAppEnabled");function _e(ce){const de=C.t("Start a call?",{fallbackHash:"04d5cae8ffd5cbdfd97d6ea2c1afe3e969b3eed7"}),oe=C.t("You\u2019ll be starting a call that all {count} members of this channel can join.",{count:ce,fallbackHash:"225ecb6662087bf4b09285688dc46d8ecb5ed2aa"}),$=C.t("Start Call",{fallbackHash:"291a0a58dfa6c640a90c1d868d2af190775ea219"});return{title:de,description:oe,confirm:$,cancel:C.t("Cancel")}}l(_e,"getCallConfirmationStrings");function Ee(){return!1}l(Ee,"isNativeSlackCallEnabled");function G(){return!0}l(G,"isSlackCallSlashCommandDisabled");function Ae(ce){return(0,I.ju)(ce)&&!(0,r.LI)(ce)}l(Ae,"shouldEnableForSponsoredConnections")},521082:(j,T,e)=>{"use strict";e.d(T,{A:()=>p});var t=e(612104),n=e(533456),s=e(919758),a=e(246673),c=e(119110),r=e(170852),o=e(532395),u=e(319719);const m=window.RTCPeerConnection,i=window.MediaStream,d=window.RTCIceCandidate,_=window.navigator,h={height:116,width:168};let p=l(class{getScreenThumbnails(E){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;var g=this;return(0,t.coroutine)(function*(){const y=yield(0,s.zxd)();f||A(g.log,y);const I=["screen"];I.push("window"),h.width=(E==null?void 0:E.width)||200,h.height=(E==null?void 0:E.height)||150;let O;try{O=yield(0,s.Yx3)(h,I)}catch(C){g.log.error(`Could not get screen thumbnails: ${C.message}`)}return O?O.map((C,P)=>{var L;const x=y.find(V=>parseInt(C.display_id,10)===V.id);!x&&!(0,c.tR)()&&!(0,c.cX)()&&!(!((L=C.id)===null||L===void 0)&&L.startsWith("window:"))&&g.log.error(`Could not find matching display for screen ${P} with id ${C.display_id}`);const F=x||((0,c.tR)()||(0,c.cX)()?y[P]:void 0);return{mediaSourceId:C.id,thumbnail:C.thumbnail,displayId:F&&F.id,bounds:F&&F.bounds,name:C.name}}):[]})()}getCurrentlyActiveScreenTrack(){return this.screenTrack}startCapturingScreen(E){var f=this;return(0,t.coroutine)(function*(){if((0,a.M)(!f.screenTrack,"Screen track should not already be active"),!E){if(!_.mediaDevices.getDisplayMedia)throw f.log.error("Error: getDisplayMedia unavailable while trying to screen share in browser"),new Error("browser screenshare unavailable");try{const g={audio:!1,video:{frameRate:{max:15}}},y=yield _.mediaDevices.getDisplayMedia(g);return f.screenTrack=y.getVideoTracks()[0],f.log.info(`Start screen sharing with track id: ${f.screenTrack.id} in browser`),f.screenTrack}catch(g){if(g.name!=="NotAllowedError")throw f.log.error(`Error: ${g.name} while trying to screen share in browser`),(0,r.k)(o.EventId.CALLS_GET_USER_MEDIA_ERROR_SCREEN,{error:g.name}),g;return null}}try{const g={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:E,maxFrameRate:15}}};if(!(0,c.uF)()){const I=yield f.getScreenDetailsByMediaSourceId(E);I&&I.bounds&&(g.video.mandatory.maxWidth=I.bounds.width,g.video.mandatory.maxHeight=I.bounds.height)}const y=yield _.mediaDevices.getUserMedia(g);return f.screenTrack=y.getTracks()[0],f.log.info("Start screen sharing with track id:",f.screenTrack.id,"and mediaSourceId:",E),f.screenTrack}catch(g){throw f.log.error(`Error: ${g.name} for screen ${E}`),(0,r.k)(o.EventId.CALLS_GET_USER_MEDIA_ERROR_SCREEN,{error:g.name}),g}})()}stopCapturingScreen(){if(!this.screenTrack){(0,a.M)("No screenTrack to stop.");return}this.screenTrack.stop();const E=this.screenTrack.id;return delete this.screenTrack,this.log.info("Stop screen sharing track id:",E),E}clearScreenTrack(){delete this.screenTrack}getScreenDetailsByMediaSourceId(E){var f=this;return(0,t.coroutine)(function*(){let g;const y=yield f.getScreenThumbnails();return y&&(g=y.find(I=>I.mediaSourceId===E,y)),g})()}constructor(){this.log=(0,n.tZ)("SCREENS")}},"ScreenManager");function A(v,E){if(!E.length){v.error("No screens available");return}const f=new u.M(["id","width","height","x","y","scaleFactor","rotation"]);E.forEach(g=>{f.add([g.id,g.bounds.width,g.bounds.height,g.bounds.x,g.bounds.y,g.scaleFactor,g.rotation].map(String))}),v.info(`Available screens:
${f.report()}`)}l(A,"logDisplays")},629452:(j,T,e)=>{"use strict";e.d(T,{Y:()=>t});function t(n){const s=(n||"").split("-");return s&&(s.length===3||s.length===4)?s[1]:null}l(t,"getCallIdFromExternalId")},394577:(j,T,e)=>{"use strict";e.d(T,{n:()=>t});function t(n){let{width:s,height:a,top:c,left:r}=n;return{position:"absolute",width:`${s}px`,height:`${a}px`,top:`${c}px`,left:`${r}px`}}l(t,"cssForRect")},399667:(j,T,e)=>{"use strict";e.d(T,{BD:()=>s,OV:()=>n,XY:()=>c,wn:()=>a,zq:()=>r});var t=e(135713);function n(o){return(0,t._Z)(o,"calls_chime_sdk_exp")==="enabled"}l(n,"isCallsChimeSdkExpEnabled");const s=l(o=>(0,t._Z)(o,"calls_org_app_settings")==="treatment","isCallsOrgAppsSettingsExperimentEnabled"),a=l(o=>(0,t._Z)(o,"calls_tracing_disabled")==="treatment","isCallsTracingDisabled"),c=l(o=>(0,t._Z)(o,"calls_location_lock")==="treatment","isCallsLocationLockEnabled"),r=l(o=>(0,t._Z)(o,"calls_disable_screenshare_border")==="treatment","isCallsScreenShareBorderDisabled")},345667:(j,T,e)=>{"use strict";e.d(T,{P:()=>n});const t=["ZoomAudioDevice (Virtual)"];function n(s){return s.filter(a=>t.indexOf(a.label)===-1)}l(n,"filterVirtualAudioDevices")},837584:(j,T,e)=>{"use strict";e.d(T,{$:()=>c,Y:()=>a});var t=e(52067),n=e(533456),s=e(682520);function a(r){let{direction:o,type:u,payload:m}=r;const i=(0,t.A)()?"slack":"call",d="INTER-WINDOW-MESSAGE";((0,t.A)()?(0,n.tZ)(d):(0,s.Wo)({label:d})).info(`${o==="send"?"Sending":"Received"} ${u} ${o==="send"?"to":"from"} the ${i} window${m?`, with payload: ${JSON.stringify(m)}`:""}`)}l(a,"logInterWindowMessage");function c(r){function o(u,m,i){let d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;r(m,i,d),u.sendData({type:m,payload:i})}return l(o,"sendMessage"),o}l(c,"createInterWindowMessageSender")},281061:(j,T,e)=>{"use strict";e.d(T,{A:()=>n});var t=e(119110);function n(){return!(0,t.j9)()&&(0,t.y3)()}l(n,"isDrawSupported")},46935:(j,T,e)=>{"use strict";e.d(T,{G:()=>n});var t=e(224089);class n{get subscriberCount(){return this.subscribers.length}subscribe(a){this.subscribers.push(a)}unsubscribe(a){(0,t.A)(this.subscribers,a)}publish(a){this.subscribers.forEach(c=>{c(a)})}constructor(){this.subscribers=[]}}l(n,"PubSub")},244148:(j,T,e)=>{"use strict";e.d(T,{X:()=>p,a:()=>A});var t=e(119110),n=e(502086),s=e(533456),a=e(52067),c=e(682520),r=e(399667);const o=2e3,u=6,m=0/265,i=255/265,d=53/265,_=1,h="SCREEN-SHARE",p=l((v,E)=>{!(0,t.j9)()&&(0,t.dY)("4.13.1")&&!(0,r.zq)(E)&&((0,n.$m)(v,o),(0,n.VR)(v),(0,n.D0)(u),(0,n.Mh)(m,i,d,_),(0,n.Ac)(),((0,a.A)()?(0,s.tZ)(h):(0,c.Wo)({label:h})).info("Screenshare border added"))},"showBorderForWindowOrScreenId"),A=l(()=>{!(0,t.j9)()&&(0,t.dY)("4.13.1")&&((0,n.th)(),((0,a.A)()?(0,s.tZ)(h):(0,c.Wo)({label:h})).info("Screenshare border removed"))},"hideScreenShareWindowBorder")},929251:(j,T,e)=>{"use strict";e.d(T,{R:()=>a});var t=e(246673),n=e(52067),s=e(837584);const a=(0,s.$)(function(c,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;(0,t.M)(!(0,n.A)(),"Expected to send message from the slack window"),(0,s.Y)({direction:"send",type:c,payload:o?r:"REDACTED"})})},319719:(j,T,e)=>{"use strict";e.d(T,{M:()=>n});var t=e(187980);class n{add(a){this.rows.push(a),this.adjustPadding(a)}report(){const a=this.padding.map(r=>"-".repeat(r));return(this.columnNames?[a,this.columnNames,a]:[]).concat(this.rows).reduce((r,o)=>r+o.reduce((u,m,i)=>u+(0,t.A)(m,this.padding[i])+(i!==o.length-1?` ${this.separator} `:`
`),""),"")}adjustPadding(a){this.padding=a.map((c,r)=>Math.max(c.length,this.padding[r]||0))}constructor(a,c="|"){this.columnNames=a,this.separator=c,this.padding=[],this.rows=[],this.columnNames&&this.adjustPadding(this.columnNames)}}l(n,"StringTable")},348455:(j,T,e)=>{"use strict";e.d(T,{l:()=>t});function t(n){const s=(n||"").split("-");return s&&(s.length===3||s.length===4)?s[2]:null}l(t,"getUserIdFromExternalId")},370671:(j,T,e)=>{"use strict";e.d(T,{Np:()=>A,O4:()=>_,Vr:()=>p,WT:()=>u,Wd:()=>d,we:()=>m,yh:()=>i});var t=e(881716),n=e(645518),s=e(119110),a=e(919758),c=e(271338),r=e(649098);const o=new r.Ay("calls_wrong_build");function u(){if(!(0,s.y3)())return!1;const E=(0,a.suT)();return h(E,{major:4,minor:13,patch:0})}l(u,"isWrongGantryHuddlesBuild");function m(){if(!(0,s.y3)())return!1;const E=(0,a.suT)();return E.major<4?E.minor<4?h(E,{major:3,minor:3,patch:7}):h(E,{major:3,minor:4,patch:0,prerelease:"alpha3"}):E.prerelease&&(E.prerelease.startsWith("sonic")||E.prerelease.startsWith("alpha2"))?!1:h(E,{major:4,minor:0,patch:0,prerelease:"alpha1190201"})}l(m,"isWrongGantryCallsBuild");const i=l(()=>{if((0,s.y3)())return!1;if((0,s.gm)()){if(!((0,s.cX)()||(0,s.uF)()))return!0;const f=87;return Number((0,s.JF)().split(".")[0])<f}return!(0,s.F2)()},"isWrongGantryHuddlesBrowser");function d(){return(0,s.y3)()?!1:!(0,s.F2)()}l(d,"isWrongGantryCallsBrowser");function _(){return(0,c.A)()||((0,s.y3)()?!m():!d())}l(_,"useGantryCalls");function h(E,f){const g=(0,n.Z)(E,f),y=g<0,I=g>0;return y?!0:I||!E.prerelease?!1:f.prerelease?E.prerelease<f.prerelease:!0}l(h,"isPrereleaseVersionOlder");function p(E){return v(E,o.t("Unfortunately, this version of Slack is out of date. Update your Slack app for access to calls &mdash; as well as bug fixes and an all-around smoother experience.",{fallbackHash:"15f4227e116c3dce202df6486303491344a6350d",fallbackHashNs:"utility"}))}l(p,"sendEphemeralMessageWithCorrectBuildInfo");function A(E){return v(E,o.t("Unfortunately, Slack calls aren't available in this browser. We recommend downloading the Slack desktop app, or you can switch to Chrome.",{fallbackHash:"c3316caea826cdc00385e8aca03517944038abcc",fallbackHashNs:"utility"}))}l(A,"sendEphemeralMessageWithCorrectBrowserInfo");function v(E,f){return(0,t.A)({temporary:!0,message:{text:f,channel:E}})}l(v,"sendEphemeralMessage")},5952:(j,T,e)=>{"use strict";e.d(T,{uM:()=>re,Gf:()=>$,lQ:()=>ue});var t=e(70433),n=e(612104),s=e(973553),a=e(819187),c=e(449552),r=e(388288),o=e(24880),u=e(271644),m=e(127225),i=e(465291),d=e(271338),_=e(61882),h=e(198892),p=e(63009),A=e(450768),v=e(91142),E=e(674217),f=e(469122);const g=(0,E.Ay)("Determine if fullscreen mode is enabled",(te,ae)=>{const H=ae();return(0,f.V)(H)});g.meta={name:"createThunk",key:"createThunkgetIsFullscreenEnabled",description:"Determine if fullscreen mode is enabled"};var y=e(71515),I=e(180427);const O=(0,E.Ay)("Find view container for a specific window history entry",(te,ae,H)=>{let{id:U}=H;var N;const K=ae();return(0,I.iB)(K)?(N=(0,y.G)(K).find(J=>J.id===U))===null||N===void 0?void 0:N.container:void 0});O.meta={name:"createThunk",key:"createThunkfindContainerForHistoryEntry",description:"Find view container for a specific window history entry"};var M=e(85866),C=e(997653),P=e(7811),L=e(261574);const x=l((te,ae)=>!(!(0,I.mL)(te)||(0,M.V)(te)||ae[m.jf]!==m.k6.BBM),"shouldPreventBBMHistory"),F=l((te,ae)=>{if(!(0,I.iB)(te)||(0,f.V)(te))return!1;const H=(0,c.getStateForClientStore)(),U=(0,o.jo)(H),N=ae[m.jf],K=U[m.jf];if(N!==K)return!1;const W=ae[N],J=U[K];return!!(0,L.A)(W,J)},"shouldPreventDuplicateHistory"),V=(0,E.Ay)("Maybe prevent default handling of history on pop state",(te,ae,H)=>{let{current:U,index:N}=H;const K=ae();if(!x(K,U)&&!F(K,U))return!1;const W=(0,c.getStateForClientStore)(),J=(0,o.XG)(W),q=N>J;if(q){if((0,o.yS)(W))return!0}else if((0,o.m6)(W))return!0;return te((q?C.r:P.h)()),!0});V.meta={name:"createThunk",key:"createThunkmaybePreventHistoryOnPopState",description:"Maybe prevent default handling of history on pop state"};var B=e(285955),D=e(599640);function S(te){return R.apply(this,arguments)}l(S,"onPopState");function R(){return R=(0,n.coroutine)(function*(te){const ae=te.state;if(!(ae!=null&&ae.teamId)||!(ae!=null&&ae.id))return;const H=(0,c.getClientStoreInstance)();if(!H)return;const U=H.getState,N=H.dispatch;if(!U||!N)return;const K=(0,o.jR)(U()),W=K.findIndex(be=>be.id===ae.id);if(W<0)return;const J=(0,o.XG)(U()),q=K[J],ie=ae.state[m.jf];if((0,c.dispatchForTeamId)(ae.teamId,V({current:ae.state,index:W})))return;var Me;const ke=(Me=ae.state[ie])!==null&&Me!==void 0?Me:(0,m.DP)(ie),Pe=(0,p.H)(q)?q[m.jf]:void 0,Ie=(0,p.H)(q)&&Pe?q[Pe]:void 0,{viewSet:X}=yield(0,c.dispatchForTeamId)(ae.teamId,(0,v.F)({context:A.b.HistoryStack,prevViewSet:Ie,prevTab:Pe,nextViewSet:ke,nextTab:ie,windowId:m.N2}));ae.state[ie]=X??ke,N((0,u.cM)({windowId:m.N2,index:W,previousIndex:J})),(0,c.dispatchForTeamId)(ae.teamId,(0,i.cQ)(ae.state)),(B.getFocusedWorkspace===null||B.getFocusedWorkspace===void 0?void 0:(0,B.getFocusedWorkspace)(U()))!==ae.teamId&&N(D.b===null||D.b===void 0?void 0:(0,D.b)({teamId:ae.teamId,fromNavigation:!0}));const fe=(0,c.dispatchForTeamId)(ae.teamId,g())?(0,c.dispatchForTeamId)(ae.teamId,O({id:ae.id})):void 0;(0,c.dispatchForTeamId)(ae.teamId,(0,_.C)({prevViewSet:Ie,prevTab:Pe,nextViewSet:ke,nextTab:ie,windowId:m.N2,navigateParams:{destinationContainer:fe},triggerType:h.w.HISTORY_NAVIGATION}))}),R.apply(this,arguments)}l(R,"_onPopState");function w(te){if(!isSonic())return;const ae=te.state;if(!(ae!=null&&ae.id))return;const H=getClientStoreInstance();if(!H)return;const U=H.getState,N=H.dispatch;if(!U||!N)return;const W=getHistoryForMainWindow(U()).findIndex(q=>q.id===ae.id);if(W<0)return;const J=getHistoryIndexForMainWindow(U());N(updateIndexForMainWindow({windowId:MainWindowId,index:W,previousIndex:J}))}l(w,"onIA3PopState");var Y=e(877752),Q=e(384564),Z=e(2819),ee=e(682520);function _e(te){return Ee.apply(this,arguments)}l(_e,"navigateAfterPopState");function Ee(){return Ee=(0,n.coroutine)(function*(te){var ae;if(!(0,s.A)())return;if(!(te==null||(ae=te.state)===null||ae===void 0)&&ae.isIA4){Z.p.prevNavigatedTeamOrEnterpriseId=te.state.teamId,S(te);return}const H=(0,Y.oI)(),U=(0,Q.f)(),N=(0,t.A_)(),K=(0,c.getStoreInstanceByTeamId)(Z.p.prevNavigatedTeamOrEnterpriseId),W=K?(0,r.oY)(K.getState()):!1,J=(0,a.A)().slice(0,8);if((0,ee.Wo)().info("ROUTES",`[${J}]`,`[${U.routeName}]`,"Attempting to popstate navigate to new route",U.params),(yield(0,t.$C)({prevTeamOrEnterpriseId:Z.p.prevNavigatedTeamOrEnterpriseId,nextTeamOrEnterpriseId:H,prevRouteInfo:Z.p.popstatePrevRouteInfo,routeName:U.routeName,params:U.params,reason:t.GB,uuid:J}))===!1||W===!0){(0,ee.Wo)().info("ROUTES",`[${J}]`,`[${U.routeName}]`,"willNavigateListener caused early exit"),window.history.forward();return}if((0,t.OX)({prevTeamOrEnterpriseId:Z.p.prevNavigatedTeamOrEnterpriseId,nextTeamOrEnterpriseId:H,prevRouteInfo:Z.p.popstatePrevRouteInfo,routeName:U.routeName,params:U.params,reason:t.GB,uuid:J}),(0,ee.Wo)().info("ROUTES",`[${J}]`,`[${U.routeName}]`,"Navigated to new route"),Z.p.prevNavigatedTeamOrEnterpriseId=H,N&&typeof N.onEnter=="function"){const ie=(0,c.getStoreInstanceByTeamId)(H);N.onEnter.call(null,ie.getState,null,window.location.pathname)}}),Ee.apply(this,arguments)}l(Ee,"_navigateAfterPopState");const G=l(()=>{window.addEventListener("popstate",_e)},"addPopStateListener");var Ae=e(119501),ce=e(405728),de=e(501569),oe=e(776016);G();function $(){let{store:te,shouldSetFocus:ae}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const H=(0,Q.f)(window.location.pathname,{throwOnNoRoute:!1});if(H&&ae&&H.routeName!==ce.o)return H;if(!te)return null;const U=(0,oe.D8)(te.getState()),N=(0,oe.MC)(te.getState()),K={routeName:U,params:N};return(0,t.EB)(K)?K:null}l($,"determineCurrentView");function re(){return(0,t.Dd)(te=>{let{nextTeamId:ae,routeName:H,params:U}=te;(0,c.getStoreInstanceByTeamId)(ae)&&(0,c.dispatchForTeamId)(ae,(0,de.w)({routeName:H,params:U}))})}l(re,"configureUpdateCurrentRoute");function ue(te){const ae=(0,Ae._z)(te,"lastRoute");return(0,t.EB)(ae)?ae:null}l(ue,"getLastRouteFromLocalConfig")},501569:(j,T,e)=>{"use strict";e.d(T,{T:()=>s,w:()=>n});var t=e(152532);const n=(0,t.Ay)("Navigate to a route");n.meta={name:"createAction",key:"createActionupdateCurrentRoute",description:"Navigate to a route"};const s=(0,t.Ay)("Set a value that represents whether the user navigated during a warm boot");s.meta={name:"createAction",key:"createActionsetUserNavigatedDuringWarmBoot",description:"Set a value that represents whether the user navigated during a warm boot"}},420641:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(449552),n=e(129318),s=e(285955);function a(c,r){const o=(0,t.getClientStoreInstance)();if(o){const m=o.getState(),i=(0,s.getWorkspaceMetaBySubdomain)(m,r);if(i)return i.id}const u=(0,n.lL)(c,r);if(u)return u.id}l(a,"findWorkspaceIdForSubdomain")},943661:(j,T,e)=>{"use strict";e.d(T,{A:()=>u});var t=e(296540),n=e(566401),s=e(917780),a=e(168776),c=e(275770),r=e(157903);function o(m){let{memberId:i,className:d,emoji:_,emojiSize:h,showTooltips:p,stopAnimations:A}=m;const v=(0,s.F3)(g=>(0,c.A)(g,i));if(!i||!_)return null;const{name:E=_,url:f=void 0}=v?(0,r.H)(_,(0,n.A)(v)?void 0:v):{};return t.createElement(a.Ay,{className:d,emojiSize:h||a.lw.SMALL,iconInTextMode:!0,isEmojiInlineWithText:!0,showTooltip:!!p,stopAnimations:!!A,text:E,url:f})}l(o,"CustomStatusEmoji"),o.displayName="CustomStatusEmoji";const u=t.memo(o)},484548:(j,T,e)=>{"use strict";e.d(T,{A:()=>i});var t=e(296540),n=e(649098),s=e(220720),a=e(298559),c=e(10591),r=e(921055);const o=new n.Ay("current_status");function u(d){let{className:_,expiration:h,time24:p}=d;if(!h)return null;const A=h*1e3,v=o.t("Until {expirationDate}",{expirationDate:(0,s.A)(A,"{status_expiration}",{do24hrTime:p,shouldCapitalize:!1})});return t.createElement("span",{className:_,"data-qa-status-expiration":h},v)}l(u,"CustomStatusExpiration"),u.displayName="CustomStatusExpiration";function m(d,_){let{memberId:h}=_;return{expiration:(0,c.A)(d,h||"")||0,time24:!!(0,r.ty)(d,"time24")}}l(m,"mapStateToProps");const i=(0,a.N)(m)(u)},237330:(j,T,e)=>{"use strict";e.d(T,{A:()=>o});var t=e(296540),n=e(917780),s=e(168776),a=e(275770),c=e(133426);function r(u){let{memberId:m,className:i,emojiSize:d,showTooltips:_,stopAnimations:h,text:p}=u;const A=(0,n.F3)(v=>m?(0,a.A)(v,m):void 0);return p?t.createElement("span",{className:i,"data-qa":"custom_status_text"},t.createElement(c.A,{text:p,inputIsEscaped:!0,emojiSize:d||s.lw.MEDIUM,showTooltips:!!_,stopAnimations:!!h,emojiDisplayInfo:A})):null}l(r,"CustomStatusText"),r.displayName="CustomStatusText";const o=t.memo(r)},91509:(j,T,e)=>{"use strict";e.d(T,{A:()=>g});var t=e(296540),n=e(917780),s=e(528919),a=e(711482),c=e(744199),r=e(168776),o=e(943661),u=e(473897),m=e(437556),i=e(23219),d=e(45798),_=e(237330);function h(){return h=Object.assign||function(y){for(var I=1;I<arguments.length;I++){var O=arguments[I];for(var M in O)Object.prototype.hasOwnProperty.call(O,M)&&(y[M]=O[M])}return y},h.apply(this,arguments)}l(h,"_extends");const p={noLinking:!1},A=l(y=>{let{stopAnimations:I=!1,noText:O=!1,className:M,memberId:C="",noLinking:P,showEmojiTooltip:L=!1,insertTextSpacing:x=!1,displayInMemberProfile:F=!1,emoji:V}=y;const B=(0,n.d4)(R=>(0,u.A)(R,C)),D=(0,n.d4)(R=>(0,i.fy)((0,m.nv)(R,C)));let S=d.t0;return P===!1&&(S=p),F?t.createElement("span",{className:M},t.createElement(o.A,{memberId:C,emoji:V,stopAnimations:I,showTooltips:L,emojiSize:r.lw.MEDIUM,className:"c-custom_status__emoji_in_member_profile"}),B&&t.createElement(_.A,h({memberId:C,className:(0,s.A)("margin_left_50","padding_right_50",{margin_right_100:D}),emojiSize:r.lw.SMALL,stopAnimations:I,text:O?"":B},S))):t.createElement("span",{className:M},t.createElement(o.A,{memberId:C,showTooltips:L,emojiSize:r.lw.SMALL,emoji:V,stopAnimations:I}),B&&t.createElement(_.A,h({memberId:C,className:x?"margin_left_50":"margin_left_25",emojiSize:r.lw.SMALL,stopAnimations:I,text:O?"":B},S)))},"CustomStatusTooltipContent");A.displayName="CustomStatusTooltipContent";const v=t.memo(A);var E=e(484548);const f=l(y=>{let{animated:I=!1,tooltip:O=!0,tipPosition:M,noText:C=!1,className:P,memberId:L="",noLinking:x,showEmojiTooltip:F=!1,insertTextSpacing:V=!1,displayInMemberProfile:B=!1}=y;const D=(0,n.d4)(R=>(0,a.A)(R,L)),S=(0,t.useCallback)(()=>t.createElement(t.Fragment,null,t.createElement(v,{className:"c-custom_status__tooltip",noText:C,memberId:L,noLinking:x,showEmojiTooltip:F,insertTextSpacing:V,displayInMemberProfile:B,emoji:D}),t.createElement(E.A,{className:"c-custom_status__expiration",memberId:L})),[L,C,x,F,V,B,D]);return D?O?t.createElement(c.Ay,{tip:S,position:M,zIndex:"above_fs","data-qa":"custom_status_tooltip"},t.createElement("span",{className:(0,s.A)("c-custom_status",P),"data-qa":"custom_status"},t.createElement(o.A,{memberId:L,showTooltips:!1,emojiSize:r.lw.SMALL,emoji:D,stopAnimations:!I}))):t.createElement(v,{className:(0,s.A)(P,"c-custom_status","c-custom_status--inline",{display_flex:B}),stopAnimations:!I,noText:C,memberId:L,noLinking:x,showEmojiTooltip:F,insertTextSpacing:V,displayInMemberProfile:B,emoji:D}):null},"CustomStatus");f.displayName="CustomStatus";const g=t.memo(f)},584564:(j,T,e)=>{"use strict";e.d(T,{A:()=>s,j:()=>n.A});var t=e(91509),n=e(484548);const s=t.A},529351:(j,T,e)=>{"use strict";e.d(T,{E:()=>c,a:()=>r});var t=e(917392),n=e(197832),s=e(674217),a=e(623024);const c=(0,s.Ay)("Opens the AddCustomEmojiModal for importing a custom emoji",(o,u,m)=>{let{emojiName:i,emojiUrl:d}=m;var _;o((0,n.A)({emojiNameSuggestion:i&&((_=(0,t.A)(i))===null||_===void 0?void 0:_.name),emojiUrl:d}))});c.meta={name:"createThunk",key:"createThunkopenImportExternalEmojiModal",description:"Opens the AddCustomEmojiModal for importing a custom emoji"};const r=(0,s.Ay)("Opens the AddCustomEmojiModal if an emoji can be imported",(o,u,m)=>{const i=u(),{event:d,emojiName:_,emojiUrl:h}=m;h&&(0,a.LU)(i,h,_)&&(d==null||d.preventDefault(),d==null||d.stopPropagation(),o(c(m)))});r.meta={name:"createThunk",key:"createThunkmaybeOpenImportExternalEmojiModal",description:"Opens the AddCustomEmojiModal if an emoji can be imported"}},627581:(j,T,e)=>{"use strict";e.d(T,{K:()=>r});var t=e(296540),n=e(649098),s=e(616125),a=e(623024);const c=new n.Ay("import-external-emoji");function r(o){let{emojiUrl:u,emojiName:m}=o;return(0,a.tJ)(u,m)?t.createElement("div",{className:"margin_top_50"},t.createElement(s.A,{name:"right-click",inline:!0,size:"18"}),t.createElement("span",{className:"margin_left_25"},c.t("Right click to add to your organization"))):null}l(r,"ImportExternalEmojiTooltipInfo"),r.displayName="ImportExternalEmojiTooltipInfo"},623024:(j,T,e)=>{"use strict";e.d(T,{$N:()=>V,LU:()=>C,tJ:()=>P});var t=e(123175),n=e(800427),s=e(917392),a=e(45798),c=e(820447),r=e(87715),o=e(129318),u=e(789103),m=e(934861),i=e(113574),d=e(394045),_=e(917780),h=e(774165),p=e(289123),A=e(470757),v=e(204769),E=e(388063),f=e(399284);const g=l(B=>{var D;return Array.isArray((D=B)===null||D===void 0?void 0:D.elements)},"hasElements"),y=l((B,D)=>(0,t.Ay)(B.emojiName,D.emojiName),"emojiNameSort"),I=new Set(["black_square","bowtie","cubimal_chick","dusty_stick","glitch_crab","piggy","pride","shipit","slack_call","slack","squirrel","thumbsup_all","white_square","simple_smile"]);function O(B){var D;const S=(D=(0,s.A)(B))===null||D===void 0?void 0:D.name;return!!S&&I.has(S)}l(O,"isBuiltInEmoji");function M(B,D,S){return decodeURIComponent(D).includes((0,u.w)())?!1:!(S&&((0,n.A)(B,S)||O(S)))}l(M,"isCustomEmoji");const C=(0,h.Mz)((B,D,S)=>{if(!(D&&(0,i.TZ)(B)&&M(B,D,S)&&(0,c.D)(B)))return!1;const w=(0,o.Yc)(B);var Y;const Q=(Y=w==null?void 0:w.id)!==null&&Y!==void 0?Y:"",Z=(0,m.Ic)(w);return!!Z&&D.indexOf((0,m.k7)(Q,Z))===-1&&D.indexOf(Q.slice(1))===-1});C.meta={name:"createSelector",key:"createSelectorcanUserImportEmoji",description:(B,D,S)=>{if(!(D&&(0,i.TZ)(B)&&M(B,D,S)&&(0,c.D)(B)))return!1;const w=(0,o.Yc)(B);var Y;const Q=(Y=w==null?void 0:w.id)!==null&&Y!==void 0?Y:"",Z=(0,m.Ic)(w);return!!Z&&D.indexOf((0,m.k7)(Q,Z))===-1&&D.indexOf(Q.slice(1))===-1}};function P(B,D){return(0,_.d4)(S=>C(S,B,D))}l(P,"useCanImportThisEmoji");function L(B,D){for(const S of D||[])(0,E.E)(S)?S.display_url&&B.set(S.display_url,{emojiName:S.name,emojiUrl:S.display_url}):g(S)&&L(B,S.elements)}l(L,"collectMessageEmojis");function x(B,D){for(const{name:S,url:R}of D||[])R&&B.set(R,{emojiName:S,emojiUrl:R})}l(x,"collectMessageReactjis");const F=(0,r.F)((B,D)=>D,(B,D)=>(0,v.bk)(B,(0,A.J)(D)),(B,D)=>{const S=new Map;return x(S,D),L(S,B.blocks),[...S.values()].sort(y)}),V=(0,f.eI)((B,D)=>{let{channelId:S,ts:R}=D;if(!(0,c.D)(B)||!(0,i.TZ)(B))return a.Ml;const w=(0,p.Ld)(B,S,R);return!w||(0,d.aK)(w)?a.Ml:F(B,w).filter(Y=>{let{emojiName:Q,emojiUrl:Z}=Y;return C(B,Z,Q)})})},681276:(j,T,e)=>{"use strict";e.d(T,{D7:()=>I,EN:()=>f,G_:()=>p,Iq:()=>d,MZ:()=>r,Ny:()=>O,TD:()=>i,U6:()=>u,Vp:()=>o,ZJ:()=>v,bA:()=>m,bf:()=>c,dd:()=>a,eR:()=>y,eS:()=>A,kA:()=>_,n2:()=>M,uB:()=>n,wG:()=>E,we:()=>t,x4:()=>s,yE:()=>g,zH:()=>h});const t="012000000000000AAA",n=2e3,s=30,a=60*1e3,c=60*s*1e3,r=250,o=200,u=3,m=1,i=12,d=100;var _;(function(C){C.Fetching="fetching",C.Fetched="fetched",C.Saving="saving",C.Saved="saved",C.Error="error",C.Synced="synced"})(_||(_={}));var h;(function(C){C.default="default",C.collision="collision_detected",C.field_level_error="field_level_error",C.validation_error="validation_error",C.additional_fields_error="additional_fields_error",C.validation_go_to_salesforce_error="validation_go_to_salesforce_error"})(h||(h={}));const p=6;var A;(function(C){C.LOADING="loading",C.SUCCESS="success",C.ERROR="error",C.REQUEST_LIMIT_EXCEEDED="request_limit_exceeded",C.JOB_RUNNING="job_running"})(A||(A={}));const v=100,E="https://trailhead.salesforce.com/content/learn/modules/opportunities-list-view-step-by-step/work-with-opportunity-list-views",f="https://trailhead.salesforce.com/content/learn/modules/list-views-quick-look/get-to-know-list-views",g=1,y=10,I={aggregations:[],grouping:void 0,sorts:[],filters:[],hiddenColumns:[],searchQuery:void 0},O=1,M=50},569525:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(681276),n=e(946699);const a=l(c=>{if(!c)return!1;const r=(0,n.A)(c)?t.bA:t.U6;return c.replace(/[*?"]/g,"").length>=r},"isValidListViewSearchQuery")},821807:(j,T,e)=>{"use strict";e.d(T,{Ep:()=>d,sc:()=>_});var t=e(842842),n=e(963662),s=e(396386);const a={name:"sf-opportunity",variation:"filled"},c={name:"sf-account",variation:"filled"},r={name:"sf-case",variation:"filled"},o={name:"sf-lead",variation:"filled"},u={name:"sf-contact",variation:"filled"},m={name:"sf-cloud",variation:"filled"},i={name:"headphones",variation:"filled"};function d(h){switch(h){case t.hM.Opportunity:return a;case t.hM.Account:return c;case t.hM.Lead:return o;case t.hM.Case:return r;case t.hM.Contact:return u;case t.hM.Org:default:return m}}l(d,"getSalesforceObjectTypeIconProps");function _(h){if(!(0,s.rI)(h))return null;const p=(0,n.LJ)(h);switch((0,n.fI)(p==null?void 0:p.record_id)){case t.B4.Huddle:return i;default:return null}}l(_,"getRecordChannelOverrideIconProps")},632468:(j,T,e)=>{"use strict";e.d(T,{b:()=>n});var t=e(756120);function n(){return(0,t.b3)()}l(n,"isSlackKitPlaygroundEnabled")},811326:(j,T,e)=>{"use strict";e.d(T,{AO:()=>o,CC:()=>s,Fv:()=>a,NY:()=>c,P:()=>r,n0:()=>u,zr:()=>m});var t=e(85979),n=e(135713);function s(i){return(0,n._Z)(i,"solutions")==="on"}l(s,"isSolutionsEnabled");function a(i){return(0,n._Z)(i,"workflow_composer")==="on"||s(i)}l(a,"isWorkflowComposerEnabled");function c(i){return(0,n._Z)(i,"workflow_file_dialog")==="on"||s(i)}l(c,"isWorfklowFileDialogEnabled");function r(i){return(0,n._Z)(i,"solutions_add_to_channel")==="on"&&s(i)&&(0,t.U6)(i)}l(r,"isSolutionsAddToChannelEnabled");function o(i){return s(i)&&(0,t.U6)(i)&&(0,n._Z)(i,"solutions_channel_create_templates")==="on"}l(o,"isSolutionsChannelCreateTemplatesEnabled");function u(i){return(s(i)||(0,t.U6)(i))&&(0,n._Z)(i,"solutions_tidy_up")==="on"}l(u,"isSolutionsTidyUpEnabled");function m(i){return s(i)&&(0,n._Z)(i,"custom_solution_creation")==="on"}l(m,"isCustomSolutionCreationEnabled")},752836:(j,T,e)=>{"use strict";e.d(T,{K8:()=>s,Q1:()=>t,b8:()=>n});const t=20,n={FETCH:"activity_fetch",VIEW_LOAD:"activity_view_load",VIEW_UPDATED:"activity_view_updated"},s={PREF:"activity_view",PAGE:"page",FLEXPANE:"flexpane"}},824770:(j,T,e)=>{"use strict";e.d(T,{A:()=>m});var t=e(296540),n=e(528919),s=e(649098),a=e(917780),c=e(699918);function r(){return r=Object.assign||function(i){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var h in _)Object.prototype.hasOwnProperty.call(_,h)&&(i[h]=_[h])}return i},r.apply(this,arguments)}l(r,"_extends");const o=new s.Ay("members");function u(i){let{className:d,inverse:_=!1,isWorkflow:h=!1,...p}=i;const A=(0,a.d4)(c.TX);let v=o.t("WORKFLOW",{fallbackHash:"aa16061e7815ca19a57c9db8f84c9601b739f570"});A&&h?v=o.t("BETA"):h||(v=o.t("APP"));const E=(0,n.A)(d,"c-app_badge",{"c-app_badge--inverse":_});return t.createElement("span",r({},p,{className:E,"data-stringify-suffix":" "}),v)}l(u,"AppBadge"),u.displayName="AppBadge";const m=(0,t.memo)(u)},339146:(j,T,e)=>{"use strict";e.d(T,{A:()=>n});var t=e(199140);function n(s){if((0,t.P)(s)){const a=s&&s.text&&s.text.trim();if(a)return a.length}return 0}l(n,"__WEBPACK_DEFAULT_EXPORT__")},230319:(j,T,e)=>{"use strict";e.d(T,{A:()=>i});var t=e(661625),n=e(906005),s=e(388063),a=e(199140),c=e(272831),r=e(443040),o=e(339146);const{_EMOJI_GROUP:u}=c.Lv;function m(d,_,h,p,A,v,E){const f=d.slice(v,E),g=v+(0,t.A)(f,s.E),y=v+(0,n.A)(f,s.E)+1;d.splice(g,y-g,{type:u,name:_,size:h,displayAlias:p,skinTone:A,elements:d.slice(g,y)})}l(m,"insertEmojiGroup");function i(d){let _,h,p,A,v,E=d.length-1;for(;E>=-1;){const g=d[E];if(p=p??E,h=h??0,(0,s.E)(g))g.name===_&&g.displayAlias===A&&g.skinTone===v?h+=1:(h>=r.uz&&m(d,_,h,A,v,E+1,p+1),_=g.name,A=g.displayAlias,v=g.skinTone,p=E,h=1);else if(!(0,a.P)(g)||(0,o.A)(g)!==0){var f;h>=r.uz&&m(d,_,h,A,v,E+1,p+1),_=void 0,A=void 0,v=void 0,p=void 0,h=void 0,!((f=g)===null||f===void 0)&&f.elements&&i(g.elements)}E-=1}return d}l(i,"groupEmojis")},717951:(j,T,e)=>{"use strict";e.d(T,{B:()=>m,R:()=>i});var t=e(579026);const n=".develop",s=".my.salesforce.com",a=".lightning.force.com",c=s.replace(/\./g,"\\."),r=a.replace(/\./g,"\\."),o=new RegExp(`https://[\\w-]+?(\\${n})?${c}/[\\w-]+$`),u=new RegExp(`https://[\\w-]+?(\\${n})?${r}/[\\w/-_%]+$`);function m(d){return o.test(d)||u.test(d)}l(m,"isSfdcRecordUrl");function i(d){const _=(0,t.Ay)(d),h=_.hostname,p=_.pathname;if(u.test(d)){const v=h.substring(0,h.indexOf(a)),E=decodeURIComponent(p).substring(1).split("/"),f=`${v}${s}`;return E.length===1?{domain:f,id:E[0]}:p.startsWith("/lightning/_classic")?{domain:f,id:E[E.length-1]}:{domain:`${v}${s}`,id:E.length>1?E[E.length-2]:""}}const A=p.substring(1);return{domain:h,id:A}}l(i,"extractSfdcRecordParams")},471856:(j,T,e)=>{"use strict";e.d(T,{Zq:()=>r,zF:()=>n,zf:()=>o});var t=e(905480),n;(function(u){u.PARAGRAPH="paragraph",u.H1="h1",u.H2="h2",u.H3="h3",u.CHECK_LIST="check-list",u.CHECK_LIST_TOGGLE="check-list-toggle",u.ORDERED_LIST="ordered-list",u.BULLET_LIST="bullet-list",u.BLOCKQUOTE="blockquote",u.CODE_BLOCK="code-block"})(n||(n={}));const s=[[t.DocBlockStyle.PLAIN,n.PARAGRAPH],[t.DocBlockStyle.H1,n.H1],[t.DocBlockStyle.H2,n.H2],[t.DocBlockStyle.H3,n.H3],[t.DocBlockStyle.LIST_CHECKLIST,n.CHECK_LIST],[t.DocBlockStyle.LIST_NUMBERED,n.ORDERED_LIST],[t.DocBlockStyle.LIST_BULLET,n.BULLET_LIST],[t.DocBlockStyle.BLOCKQUOTE,n.BLOCKQUOTE],[t.DocBlockStyle.CODE,n.CODE_BLOCK]],a=new Map(s),c=new Map(s.map(u=>[u[1],u[0]]));function r(u){return a.get(u)}l(r,"blockStyleToFormat");function o(u){return c.get(u)}l(o,"formatToBlockStyle")},877525:(j,T,e)=>{"use strict";e.d(T,{P:()=>s});var t=e(254666),n=e(136078);const s=l(a=>{switch(a){case t.r.FILE:return{name:"attachment"};case t.r.IMAGE:return{name:"image"};case t.r.CHECK_LIST:return{name:"checkbox"};case t.r.CHECK_LIST_TOGGLE:return{name:"checkbox"};case t.r.BULLET_LIST:return{name:"bulleted-list"};case t.r.ORDERED_LIST:return{name:"numbered-list"};case t.r.VIDEO_CLIP:return{name:"video"};case t.r.AUDIO_CLIP:return{name:"microphone"};case t.r.DIVIDER:return{name:"divider"};case t.r.TABLE:return{name:"spreadsheet"};case t.r.LAYOUT_2_COLUMNS:return{name:"column-two"};case t.r.LAYOUT_3_COLUMNS:return{name:"column-three"};case t.r.PINS:return{name:"pin"};case t.r.SMART_SUMMARY:return{name:"magic-wand"};case t.r.BLOCKQUOTE:return{name:"quote"};case t.r.CODE_BLOCK:return{name:"code-block"};case n.L.CODE:return{name:"code"};case t.r.PARAGRAPH:return{name:"paragraph"};case t.r.H1:return{name:"heading-1"};case t.r.H2:return{name:"heading-2"};case t.r.H3:return{name:"heading-3"};case t.r.CANVAS:return{name:"canvas"};case t.r.WORKFLOW:return{name:"play"};case t.r.LIST:return{name:"lists"};case t.r.LIST_DYNAMIC:return{name:"lists"};case t.r.WIDGET:return{name:"blocks"};case t.r.SALESFORCE_RECORD:return{name:"sf-cloud"};case t.r.USER_PROFILE_UNFURL:return{name:"user"};case t.r.PLACEHOLDER_CARD_SUBMENU:return{name:"add-placeholder"};case t.r.PLACEHOLDER_CARD_VIDEO:return{name:"video"};case t.r.PLACEHOLDER_CARD_PROFILE:return{name:"user"};case t.r.PLACEHOLDER_CARD_AUDIO:return{name:"microphone"};case t.r.PLACEHOLDER_CARD_WORKFLOW:return{name:"play"};case t.r.PLACEHOLDER_CARD_IMAGE:return{name:"image"};case t.r.PLACEHOLDER_CARD_CANVAS:return{name:"canvas"};case t.r.PLACEHOLDER_CARD_FILE:return{name:"attachment"};case t.r.PLACEHOLDER_CARD_LINK:return{name:"link"};case t.r.PLACEHOLDER_CARD_LIST:return{name:"lists"};case t.r.PLACEHOLDER_CARD_SALESFORCE_RECORD:return{name:"sf-cloud"};case t.r.DATE_MENTION:return{name:"calendar"};default:return{name:"help"}}},"getQuipButtonIcon")},453752:(j,T,e)=>{"use strict";e.d(T,{O:()=>c});var t=e(649098),n=e(254666),s=e(136078);const a=new t.Ay("slack_docs"),c=l(function(r){let{experimentCanvasInsertWorkflowMenuGroupOn:o,experimentCanvasSmartCardsGroupOn:u,experimentWidgetsGroupOn:m,experimentCanvasSalesTemplatesGroupOn:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(r){case n.r.FILE:return a.t("File");case n.r.IMAGE:return a.t("Image");case n.r.CHECK_LIST:return a.t("Check list");case n.r.CHECK_LIST_TOGGLE:return a.t("Check list");case n.r.BULLET_LIST:return a.t("Bulleted list");case n.r.ORDERED_LIST:return a.t("Ordered list");case n.r.VIDEO_CLIP:return a.t("Record video clip");case n.r.AUDIO_CLIP:return a.t("Record audio clip");case n.r.DIVIDER:return a.t("Divider");case n.r.PINS:return a.t("Pins");case n.r.SMART_SUMMARY:return u?a.t("AI Channel Summary"):"";case n.r.BLOCKQUOTE:return a.t("Blockquote");case n.r.CODE_BLOCK:return a.t("Code block");case n.r.PARAGRAPH:return a.t("Paragraph");case n.r.H1:return a.t("Big heading");case n.r.H2:return a.t("Medium heading");case n.r.H3:return a.t("Small heading");case n.r.CANVAS:return a.t("Canvas");case n.r.WORKFLOW:return o?a.t("Workflow"):"";case s.L.CODE:return a.t("Code");case n.r.TABLE:return a.t("Table");case n.r.LAYOUT_2_COLUMNS:return a.t("2 columns",{fallbackHash:"8d8f0f25822179c33b917613ec2d022ef593c340",fallbackHashNs:"quip_shortcut_handlers"});case n.r.LAYOUT_3_COLUMNS:return a.t("3 columns",{fallbackHash:"b505f5f09f70ff9d216f1c3cbb5c1a8a4e82179b",fallbackHashNs:"quip_shortcut_handlers"});case n.r.LIST:return a.t("List");case n.r.WIDGET:return m?a.t("Widget"):"Widget";case n.r.USER_PROFILE_UNFURL:return a.t("Profile",{fallbackHash:"ff4fc0276e960c348647b647235f68200887c9d2",fallbackHashNs:"menu"});case n.r.SALESFORCE_RECORD:return i?a.t("Salesforce record"):"";case n.r.PLACEHOLDER_CARD_VIDEO:return a.t("Video",{fallbackHash:"bc17c1f0179a888f2a7e8389f67d4f2cf5cf4531",fallbackHashNs:"slack_kit_video"});case n.r.PLACEHOLDER_CARD_PROFILE:return a.t("Profile",{fallbackHash:"ff4fc0276e960c348647b647235f68200887c9d2",fallbackHashNs:"menu"});case n.r.PLACEHOLDER_CARD_AUDIO:return a.t("Audio",{fallbackHash:"acdac205f5e24cb75113c4b281a2c13f08b75159",fallbackHashNs:"files"});case n.r.PLACEHOLDER_CARD_WORKFLOW:return a.t("Workflow",{fallbackHash:"d7a484140f5f9f7f5427e1f2c44dbfc1d3ad9eea",fallbackHashNs:"slack_docs"});case n.r.PLACEHOLDER_CARD_IMAGE:return a.t("Image");case n.r.PLACEHOLDER_CARD_CANVAS:return a.t("Canvas");case n.r.PLACEHOLDER_CARD_FILE:return a.t("File");case n.r.PLACEHOLDER_CARD_LINK:return a.t("Link");case n.r.PLACEHOLDER_CARD_LIST:return a.t("List");case n.r.PLACEHOLDER_CARD_SALESFORCE_RECORD:return i?a.t("Salesforce record"):"";case n.r.LIST_DYNAMIC:return a.t("Editable list",{fallbackHash:"a1fffaaafb7cc996685bceb829c053cc4f7de43d"});case n.r.DATE_MENTION:return a.t("Date",{fallbackHash:"eb9a4bc1c0c153e4e4b042a79113b815b7e3021d",fallbackHashNs:"calendar"});default:return r}},"getQuipButtonLabel")},136078:(j,T,e)=>{"use strict";e.d(T,{B:()=>a,L:()=>n});var t=e(905480),n;(function(c){c.BOLD="bold",c.STRIKE="strike",c.ITALIC="italic",c.CODE="code",c.LINK="link",c.UNDERLINE="underline"})(n||(n={}));const s=new Map([[t.DocInlineStyle.BOLD,n.BOLD],[t.DocInlineStyle.STRIKETHROUGH,n.STRIKE],[t.DocInlineStyle.ITALIC,n.ITALIC],[t.DocInlineStyle.CODE,n.CODE],[t.DocInlineStyle.LINK,n.LINK]]);function a(c){return s.get(c)}l(a,"inlineStyleToFormat")},254666:(j,T,e)=>{"use strict";e.d(T,{r:()=>s});var t=e(471856),n;(function(a){a.UNKNOWN="unknown",a.TITLE="title",a.FILE="file",a.IMAGE="image",a.VIDEO_CLIP="video-clip",a.AUDIO_CLIP="audio-clip",a.DIVIDER="divider",a.TABLE="table",a.SHORTCUT="shortcut",a.MENU_SEPARATOR="menu-separator",a.PINS="pins",a.BOOKMARKS="bookmarks",a.USER_UNFURL="user-unfurl",a.CANVAS_UNFURL="canvas-unfurl",a.MESSAGE_UNFURL="message-unfurl",a.PUBLIC_LINK_UNFURL="public-link-unfurl",a.SHORTCUT_UNFURL="shortcut-unfurl",a.USER_PROFILE_UNFURL="user-profile-unfurl",a.UNFURL="unfurl",a.CANVAS="canvas",a.GENERIC="generic",a.WORKFLOW="workflow",a.FILE_UPLOAD_BLOCKED_MESSAGE_BANNER="file-upload-blocked-message-banner",a.SMART_SUMMARY="smart-summary",a.LIST="list",a.WIDGET="widget",a.LAYOUT_2_COLUMNS="layout-2-columns",a.LAYOUT_3_COLUMNS="layout-3-columns",a.PLACEHOLDER_CARD_SUBMENU="placeholder-card-submenu",a.PLACEHOLDER_CARD_VIDEO="placeholder-card-video",a.PLACEHOLDER_CARD_PROFILE="placeholder-card-profile",a.PLACEHOLDER_CARD_AUDIO="placeholder-card-audio",a.PLACEHOLDER_CARD_WORKFLOW="placeholder-card-workflow",a.PLACEHOLDER_CARD_IMAGE="placeholder-card-image",a.PLACEHOLDER_CARD_CANVAS="placeholder-card-canvas",a.PLACEHOLDER_CARD_FILE="placeholder-card-file",a.PLACEHOLDER_CARD_LINK="placeholder-card-link",a.PLACEHOLDER_CARD_LIST="placeholder-card-list",a.PLACEHOLDER_CARD_SALESFORCE_RECORD="placeholder-card-salesforce-record",a.LIST_DYNAMIC="list-dynamic",a.SALESFORCE_RECORD="salesforce-record",a.DATE_MENTION="date-mention"})(n||(n={}));const s={...t.zF,...n}},107828:(j,T,e)=>{"use strict";e.d(T,{D:()=>t});var t;(function(n){n.SpecificMembers="add-specific-members",n.AllMembers="add-all-members"})(t||(t={}))},814882:(j,T,e)=>{"use strict";e.d(T,{v:()=>r});var t=e(296540),n=e(528919),s=e(778953),a=e(616125),c=e(61629);const r=l(o=>{let{type:u,spacing:m="medium"}=o;const i=(0,n.A)("three_fourths_opacity",{margin_right_0:m==="none",margin_right_25:m==="small",margin_right_50:m==="medium"});return u===s.Es||u===s.Dv?t.createElement(c.A,{type:"channel",size:"inherit",className:i}):u===s.gj?t.createElement(c.A,{type:"dm",size:"inherit",className:i}):u===s.kk?t.createElement(c.A,{type:"gn-menu",size:"inherit",className:i}):u===s.aw||u===s.oX?t.createElement(c.A,{type:"shared-channels-outline",size:"inherit",className:i}):u===s.VH?t.createElement(c.A,{type:"star-o",size:"inherit",className:i}):u===s.VZ.UserGroup?t.createElement("div",{className:(0,n.A)("c-icon","c-icon--inherit",i)},t.createElement(a.A,{variation:"filled",name:"user-groups"})):t.createElement(c.A,{type:"star-o",size:"inherit",className:i})},"InlineChannelSectionFallbackIcon");r.displayName="InlineChannelSectionFallbackIcon"},796857:(j,T,e)=>{"use strict";e.d(T,{A:()=>d});var t=e(296540),n=e(463329),s=e(528919),a=e(573182),c=e(168776),r=e(778953),o=e(445656),u=e(245796),m=e(814882);function i(_){let{channelSection:h,className:p,spacing:A="medium",showIcon:v=!0}=_;const f=(0,n.wA)()((0,u.i1)({channelSection:h})),g=f&&f.split(" "),y=g&&g[0],I=g&&(g.length>1?` ${g.slice(1).join(" ")}`:null),O=l(()=>{if(!v)return null;if(h.type===r.VZ.UserGroup)return t.createElement(m.v,{type:h.type,spacing:A});const M=(0,s.A)({margin_right_0:A==="none",margin_right_25:A==="small",margin_right_50:A==="medium"});return h.emoji?t.createElement(c.Ay,{className:M,shouldFallbackOnLoadError:!0,text:h.emoji,stopAnimations:!0,emojiSize:c.lw.SMALL,forceDisplay:!0,isEmojiInlineWithText:!0,renderEmojiFallback:!0}):h.type===r.VZ.ExternalWorkspace?t.createElement(a.A,{workspaceId:(0,o.de)(h.id),size:15,className:M}):t.createElement(m.v,{type:h.type,spacing:A})},"getIcon");return O.displayName="getIcon",t.createElement("span",{className:(0,s.A)("p-inline_channel_section",p)},t.createElement("span",{className:"p-inline_channel_section__lockup"},O(),y),I)}l(i,"InlineChannelSection"),i.displayName="InlineChannelSection";const d=i},573182:(j,T,e)=>{"use strict";e.d(T,{A:()=>E});var t=e(296540),n=e(528919),s=e(917780),a=e(63332),c=e(247384),r=e(820709),o=e(675365),u=e(129318),m=e(676780),i=e.n(m);const d=20,_=.8,h=.2,p={width:"auto"};function A(f){let{id:g,size:y,spacing:I}=f;const O=`${Math.ceil(y/2-1)}px`,M=`${y}px`,C=`${I}px`;return t.createElement("svg",{className:"sr-only"},t.createElement("mask",{id:g},t.createElement("rect",{x:O,y:O,width:M,height:M,rx:C,ry:C,fill:"white"})))}l(A,"SecondaryIconMask"),A.displayName="SecondaryIconMask";function v(f){let{size:g=d,className:y,workspaceId:I,externalWorkspaceHostId:O}=f;const M=(0,t.useMemo)(()=>`scw-icon-mask-${(0,r.r9)()}`,[]),C=(0,t.useMemo)(()=>({mask:`url(#${M}) exclude, linear-gradient(#000 0 0)`}),[M]),P=Math.floor(g*_),L=Math.floor(g*h),x=(0,t.useMemo)(()=>({marginRight:`-${L}px`,marginBottom:`-${L}px`}),[L]);return t.createElement("span",{style:p,className:(0,n.A)(y,i().container)},t.createElement("span",{style:C,className:i().primaryIcon},t.createElement(c.A,{id:I,size:g,allowTeamInitials:!0})),t.createElement("span",{style:x,className:i().secondaryIcon},t.createElement(c.A,{id:O,size:P,allowTeamInitials:!0})),t.createElement(A,{id:M,size:P,spacing:L}))}l(v,"ExternalWorkspaceIconStack"),v.displayName="ExternalWorkspaceIconStack";function E(f){let{size:g=d,className:y,workspaceId:I}=f;const O=(0,s.d4)(C=>(0,u._J)(C,I)),M=(0,s.d4)(C=>(0,o.m)(C,O));return(0,a.N)(O)?M?t.createElement(v,{workspaceId:I,externalWorkspaceHostId:M,size:g,className:y}):t.createElement(c.A,{id:I,size:g,className:y,allowTeamInitials:!0}):null}l(E,"ExternalWorkspaceIcon"),E.displayName="ExternalWorkspaceIcon"},271593:(j,T,e)=>{"use strict";e.d(T,{AV:()=>u,Cu:()=>_,Gu:()=>o,g4:()=>i,qn:()=>m});var t=e(211700),n=e(682520),s=e(70433);let a=1,c=1;const r=(0,n.Wo)({label:"HISTORY-NAVIGATION"}),o=l(()=>{c!==a&&(r.info("Incrementing the users current position in the history stack"),c+=1)},"onNavigateForward"),u=l(()=>{c!==1&&(r.info("Decrementing the users current position in the history stack"),c-=1)},"onNavigateBack"),m=l(()=>c===1,"isBackDisabled"),i=l(()=>c===a,"isForwardDisabled");function d(){r.info("Adding route to the history stack"),c+=1,a=c}l(d,"incrementHistoryLength");function _(p){let{shouldReplaceState:A,reason:v}=p;A||v!==s.GB&&d()}l(_,"maybeIncrementHistoryLength"),(0,t.ul)("history",{getHistoryLength:()=>a,getHistoryIndex:()=>c});const h={maybeIncrementHistoryLength:_}},178107:(j,T,e)=>{"use strict";e.d(T,{Hu:()=>h,OJ:()=>C,q8:()=>O,vU:()=>M,wZ:()=>P});var t=e(679946),n=e(649098),s=e(399284),a=e(89149),c=e(519543),r=e(253782),o=e(387472),u=e(403460),m=e(129318),i=e(47801),d=e(560397),_=e(87715);const h={video:"video",audio:"audio",profileFieldOptions:"profile_field_options"},p=new n.Ay("huddles"),A=l((L,x)=>({video:[...L&&L.video?L.video:[]],audio:[...!x&&L&&L.audio?L.audio:[]],profile_field_options:[]}),"getInnerCallsAppsFromTeamPref"),v=l(L=>{const x=L.reduce((V,B)=>(Object.entries(B).forEach(D=>{let[S,R]=D;(S==="video"||S==="audio")&&(V[S]=V[S]?[...V[S],...R]:[...R])}),V),{}),F={video:[],audio:[]};return Object.entries(x).forEach(V=>{let[B,D]=V;(B==="video"||B==="audio")&&(F[B]=D.filter((S,R,w)=>R===w.findIndex(Y=>Y.id===S.id&&Y.id!==void 0)))}),F},"combineCallApps"),E=l(L=>{const F=(0,m.FR)(L).map(B=>(0,a.x)(L,"calls_apps",B.id)).filter(d.b);return v(F)},"retrieveCallsAppsForUnifiedOrg"),f=l(L=>(0,u.ss)(L)?E(L):(0,a.x)(L,"calls_apps"),"retrieveCallsAppsFromPrefs"),g=l((L,x)=>{const F=f(L);if(x){var V;const B=F==null||(V=F.video)===null||V===void 0?void 0:V.findIndex(D=>D.id===c.rq);B>=0&&F.video.splice(B,1)}return F},"filterCallsAppsFromTeamPref"),y=(0,s.ik)((L,x)=>g(L,x),L=>A(L,!1)),I=(0,s.ik)((L,x)=>g(L,x),L=>A(L,!0)),O=l(function(L){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?I(L,!0):y(L,!0)},"getCallsAppsFromTeamPref"),M=(0,_.F)(O,i.pt,(L,x)=>{const F={},V=L&&L.video?L.video:[],B=L&&L.audio?L.audio:[],D=p.t("Start a huddle"),S=x?[{id:"A01",name:D,image:"/marketing/img/homepage/icons/huddle-icon.png"}]:[];return[...V,...B,...S].forEach(R=>{let w;R.id===c.rq?w={id:R.id,name:R.name,image:R.image}:["A5GE9BMQC","A649AA069","A5W4BRDNX","ARQS1U88Y","ARUFE7YMU"].findIndex(Y=>R.id===Y)!==-1?w={id:R.id,name:R.name,image:"/marketing/img/homepage/icons/zoom-icon.png"}:w=R,F[w.id]=w}),F}),C=l(L=>{let{callsApp:x,memberPhoneNumber:F,hideVideoApps:V=!1}=L;const B=[];return x&&(!V&&x.video&&B.push(...x.video.map(D=>({...D,type:o.JG.Video}))),x.audio&&(0,r.A)((0,t.A)(F))&&B.push(...x.audio.map(D=>({...D,type:o.JG.Audio})))),B},"getCallAppList"),P=l(L=>{const x=g(L,!0),F=x&&x.video?x.video:[],V=x&&x.audio?x.audio:[];return[...F,...V]},"getFlattenTeamPrefCallsApps")},296993:(j,T,e)=>{"use strict";e.d(T,{A:()=>d});var t=e(296540),n=e(59116),s=e(42302),a=e(919758),c=e(819187),r=e(293752),o=e(218961),u=e(136590);function m(){return m=Object.assign||function(_){for(var h=1;h<arguments.length;h++){var p=arguments[h];for(var A in p)Object.prototype.hasOwnProperty.call(p,A)&&(_[A]=p[A])}return _},m.apply(this,arguments)}l(m,"_extends");let i=l(class extends t.Component{onDesktopContextMenu(h){const{getTemplate:p,overrideDefaultMenu:A}=this.props,v=l(y=>({...y,id:(0,c.A)(),submenu:y.submenu&&y.submenu.map(v)}),"addIdsToItem"),E=p?p().map(v):[];if(!E.length)return;const{x:f,y:g}=(0,n.A)(this.getCoordinatesForContextMenu(h),y=>(0,a.xhB)()*y);(0,a.O0f)(E,{x:f,y:g,overrideDefaultMenu:A}),this.props.onClick&&this.props.onClick()}getCoordinatesForContextMenu(h){if(!this.props.hasKeyboardFocus||!h)return{};const{left:p,top:A,width:v,height:E}=h.currentTarget.getBoundingClientRect(),f=p+v/2,g=A+E/2;return{x:f,y:g}}renderMenuFromTemplate(h){const{getTemplate:p,width:A,showSlackKitContextMenuOnDesktop:v,menuAriaLabel:E}=this.props;function f(y){return y.replace(/&([\w&])/g,(I,O)=>O)}l(f,"removeKeyboardAccelerators");const g=p?p().map(y=>!y.label||v?y:{...y,label:f(y.label)}):[];return g.length?t.createElement(r.a,m({"aria-label":E,width:A},h,{template:g,isContextMenu:!0,stripTerminalSeparators:!0})):null}render(){if((0,a.g9M)()&&!this.props.showSlackKitContextMenuOnDesktop)return(0,u.A)(this.props.children,{onContextMenu:this.onDesktopContextMenu});const{forceOpen:h,onClick:p,onClose:A,isDisabled:v,renderMenu:E,preventScroll:f}=this.props;return this.props.desktopAppOnly?(0,u.A)(this.props.children):t.createElement(r.cQ,{isContextMenu:!0,position:"right-bottom",tryOppositePosition:!0,forceOpen:h,shouldFade:!1,renderMenu:E||this.renderMenuFromTemplate,onClick:p,onClose:A,isDisabled:v,preventScroll:f},this.props.children)}constructor(h){super(h),this.onDesktopContextMenu=this.onDesktopContextMenu.bind(this),this.renderMenuFromTemplate=this.renderMenuFromTemplate.bind(this)}},"ContextMenuTrigger");i.displayName="ContextMenuTrigger",i.defaultProps={overrideDefaultMenu:!1,desktopAppOnly:!0,hasKeyboardFocus:!1,showSlackKitContextMenuOnDesktop:!1,onClick:s.A,onClose:s.A,isDisabled:!1,forceOpen:!1,stripTerminalSeparators:!1};const d=(0,o.A)(i)},283991:(j,T,e)=>{"use strict";e.d(T,{$g:()=>y,Mo:()=>v,rp:()=>g});var t=e(930679),n=e(712050),s=e(801081),a=e(915773),c=e(649098),r=e(590671),o=e(934861),u=e(63332),m=e(988727),i=e(437556),d=e(129318),_=e(881805),h=e(251246),p=e(65338);const A=new c.Ay("create_channel_modal"),v=(0,a.Ay)(I=>{const O=(0,i.cA)(I),M=(0,m.HI)(O),C=(0,d.H7)(I);if(!C)return[];const P=(0,_.VO)(I)||[],L=[C.id,...M,...P],x=[...new Set(L)].filter(F=>!(0,r.JV)(F)).map(F=>(0,d._J)(I,F)).filter(F=>!!F&&!(0,o.Zx)(F));return(0,t.A)(x,F=>(0,o.F1)(F))});v.meta={name:"createSelector",key:"createSelectorgetAllInvitableWorkspaces",description:I=>{const O=(0,i.cA)(I),M=(0,m.HI)(O),C=(0,d.H7)(I);if(!C)return[];const P=(0,_.VO)(I)||[],L=[C.id,...M,...P],x=[...new Set(L)].filter(F=>!(0,r.JV)(F)).map(F=>(0,d._J)(I,F)).filter(F=>!!F&&!(0,o.Zx)(F));return(0,t.A)(x,F=>(0,o.F1)(F))}};const E=l((I,O)=>{const M=O==null?void 0:O.map(C=>C.id);return I.map(C=>{var P,L;return{label:(0,o.F1)(C),value:C,optgroup:C.enterprise_name,key:C.id,isDisabled:!!(M!==void 0&&M.includes(C.id)),displayReason:(L=(P=O==null?void 0:O.find(x=>x.id===C.id))===null||P===void 0?void 0:P.displayReason)!==null&&L!==void 0?L:""}})},"mapWorkspacesToSelectOptionItems"),f=l((I,O)=>{let{ineligibleWorkspaces:M,excludeExternalWorkspaces:C}=O;const[P,L]=(0,n.A)(I,F=>(0,u.N)(F)),x={value:void 0,label:"",type:"divider"};return[...E(L,M),...!C&&P.length>0?[x,...E(P,M)]:[]]},"mapInvitableWorkspacesToSelectOptions"),g=(0,a.Ay)(I=>{const O=(0,h.y5)(I),M=(0,p.S)(I),C=v(I),P=C.filter(L=>!O.includes(L.id)&&!M.includes(L.id)).map(L=>({id:L.id,displayReason:A.t("You don\u2019t have access to this")}));return f(C,{ineligibleWorkspaces:P})});g.meta={name:"createSelector",key:"createSelectorgetAllInvitableWorkspaceSelectOptions",description:I=>{const O=(0,h.y5)(I),M=(0,p.S)(I),C=v(I),P=C.filter(L=>!O.includes(L.id)&&!M.includes(L.id)).map(L=>({id:L.id,displayReason:A.t("You don\u2019t have access to this")}));return f(C,{ineligibleWorkspaces:P})}};const y=(0,s.Mz)(v,I=>I.length>1)},384434:(j,T,e)=>{"use strict";e.d(T,{D:()=>Ce,A:()=>ze});var t=e(296540),n=e(463329),s=e(917780),a=e(528919),c=e(846850),r=e(428852),o=e(96432);function u(Oe){return Oe&&Oe.id}l(u,"getEmojiCollectionId");var m=e(215215);function i(Oe){return Oe&&Oe.author}l(i,"getEmojiCollectionAuthor");var d=e(369908);function _(Oe){return Oe&&Oe.localEmoji}l(_,"getEmojiCollectionLocalEmoji");var h=e(649098),p=e(135713),A=e(566401),v=e(194092),E=e(792866),f=e(930679),g=e(991235),y=e(57957),I=e(605556),O=e.n(I),M=e(695939),C=e(929611);function P(Oe){return Oe&&Oe.date_create}l(P,"getEmojiCollectionDateCreate");var L=e(415540),x=e(921055),F=e(258768),V=e(474722),B=e(84230),D=e(61629),S=e(704189),R=e(3972);const w=new h.Ay("custom_emoji_list"),Y="emoji_packs_clicked_collection_cta",Q=l(Oe=>{let{id:Fe,name:_t,author:ft,emoji:Ct,installed:$t,onClick:rn}=Oe;const un=(0,n.wA)(),hn=(0,s.d4)(Et=>(0,x.ty)(Et,Y)),pn=(0,s.d4)(M.fl),Tn=(0,s.d4)(M._J);if(!Ct)return null;const zn=u(Tn)===Fe&&pn&&!hn;function Hn(){zn&&un((0,F.AZ)({pref:Y,value:!0})),rn()}l(Hn,"handleOnClick");const Kn=(0,V.A)(Ct,(Et,we)=>({name:we,url:Et})),os=(0,y.A)(Kn,4),et=w.t("by {author}",{author:ft});return t.createElement(R.A,{className:"p-emoji_pack_card p-emoji_pack_card--clickable",onClick:Hn},t.createElement("div",{className:"display_flex align_items_center margin_bottom_100"},t.createElement("div",{className:"flex_one"},t.createElement("div",{className:"p-emoji_pack_card__header"},_t,zn&&t.createElement("span",{className:"margin_left_25"},t.createElement(S.A,null,w.t("NEW")))),t.createElement("div",{className:"p-emoji_pack_card__subheader"},et)),$t&&!zn&&t.createElement("div",{className:"flex_none"},t.createElement(D.A,{size:"inherit",type:"circle-checkbox-checked",className:"p-emoji_pack_card__checkmark"}))),t.createElement("div",{className:"p-emoji_pack_card_rows"},os.map(Et=>t.createElement("div",{key:Et.map(we=>`${we.name}-card-`).join(),className:"p-emoji_pack_card__row"},Et.map(we=>t.createElement(B.Ay,{key:`emoji-pack-${we.name}`,showTooltip:!1,text:`:${we.name}:`,url:we.url,emojiSize:B.lw.LARGE})),[...new Array(4-Et.length)].map((we,tt)=>`emoji-pack-spacer-${tt}`).map(we=>t.createElement("div",{key:we,className:"p-emoji_pack_card__spacer"}))))))},"EmojiPackCard");Q.displayName="EmojiPackCard";const Z=Q,ee=new h.Ay("custom_emoji_list"),_e=l(()=>{const Oe=ee.t("STAY TUNED"),Fe=ee.t("More emoji packs are on the way");return t.createElement("div",{className:"p-emoji_pack_card p-emoji_pack_coming_soon"},t.createElement(S.A,{className:"p-emoji_pack_coming_soon__pill"},Oe),t.createElement("div",{className:"p-emoji_pack_coming_soon__text"},Fe),t.createElement("div",{className:"p-emoji_pack_coming_soon__illustrations"},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"198",height:"30",viewBox:"0 0 198 30",fill:"none"},t.createElement("g",{opacity:"0.8"},t.createElement("g",{clipPath:"url(#clip0)"},t.createElement("path",{d:"M22.7 30C35.2 30 45.3 19.9 45.3 7.3 45.3-5.2 35.2-15.3 22.7-15.3 10.1-15.3 0-5.2 0 7.3 0 19.9 10.1 30 22.7 30Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M24 20C25.5 20 26.7 18.5 26.7 16.7 26.7 14.8 25.5 13.3 24 13.3 22.5 13.3 21.3 14.8 21.3 16.7 21.3 18.5 22.5 20 24 20Z",fill:"#664500"}),t.createElement("path",{d:"M10.8 10.5C10.6 10.5 10.3 10.4 10.1 10.3 9.5 9.9 9.3 9.1 9.7 8.5 10.9 6.5 14.6 3.2 19.9 4.5 20.7 4.7 21.1 5.4 20.9 6.1 20.7 6.8 20 7.3 19.3 7.1 14.5 5.9 12 9.8 11.9 9.9 11.7 10.3 11.3 10.5 10.8 10.5V10.5ZM26.8 5.5C26.4 5.5 26 5.4 25.7 5 25.3 4.5 25.4 3.6 25.9 3.2 30.2-0.3 34.9 1.1 36.9 2.3 37.5 2.7 37.7 3.5 37.3 4.1 36.9 4.8 36.1 4.9 35.5 4.6 35.3 4.4 31.4 2.1 27.6 5.2 27.4 5.4 27.1 5.5 26.8 5.5Z",fill:"#664500"}),t.createElement("path",{d:"M17.8 23.7C17.7 23.7 17.6 23.7 17.5 23.7 17 23.5 16.7 23 16.8 22.4 17.4 20.4 17.2 18.4 16.2 17 15.5 16 14.6 15.5 13.6 15.4 13 15.4 12.6 14.9 12.7 14.3 12.7 13.8 13.2 13.3 13.7 13.4 15.3 13.5 16.8 14.4 17.8 15.8 19.2 17.7 19.5 20.3 18.8 23 18.6 23.4 18.2 23.7 17.8 23.7ZM32.5 19.6C32.3 19.6 32.1 19.6 32 19.5 30.4 18.4 29.5 16.6 29.6 14.5 29.6 12.3 30.7 10.3 32.2 9.4 32.7 9.1 33.3 9.2 33.6 9.7 33.9 10.2 33.7 10.8 33.3 11.1 32.3 11.7 31.6 13.1 31.6 14.6 31.5 16 32.1 17.1 33.1 17.8 33.5 18.1 33.6 18.7 33.3 19.2 33.2 19.5 32.8 19.6 32.5 19.6V19.6Z",fill:"#E2A62D"}),t.createElement("path",{d:"M22.9-14.4C22.8-14.4 22.8-14.5 22.7-14.5 22.7-14.5 1.4-18.5 0.5-17.7 -0.4-16.9 1 4.7 1 4.7 1 4.8 1 4.9 1.1 4.9 1.9 5.8 7.4 2.3 13.4-3.1 19.5-8.4 23.7-13.5 22.9-14.4V-14.4Z",fill:"#DD2E44"}),t.createElement("path",{d:"M0.5-17.6C0.4-17.6 0.4-17.5 0.4-17.5 0.6-15.6 2.7-0.6 4 4.1 5.9 3 7.8 1.6 10.1-0.2 8.2-3.8 1.5-17.8 0.5-17.6Z",fill:"#EA596E"}),t.createElement("path",{d:"M39.9 21L25.8 19.2C24.3 19.1 21.6 19.1 21.8 16.7 21.9 14.5 24.5 14.9 26.4 15.2L40.6 17.5 39.9 21V21Z",fill:"#3B88C3"}),t.createElement("path",{d:"M40.6 17.5L34.9 16.6C34.3 16.4 33.7 17.4 33.7 18.5 33.6 19.6 34 20.2 34.6 20.3L40.2 21 40.6 17.5V17.5Z",fill:"#88C9F9"}),t.createElement("path",{d:"M46.6 17.1L43.1 20.3 36.8 13.5 40.3 10.3C42.1 8.7 45 8.8 46.6 10.6L46.8 10.8C48.5 12.6 48.4 15.5 46.6 17.1Z",fill:"#3B88C3"}),t.createElement("path",{d:"M43.1 20.3C44.6 19 44.4 16.3 42.7 14.4 40.9 12.6 38.3 12.2 36.8 13.5 35.3 14.9 35.5 17.6 37.2 19.4 38.9 21.3 41.6 21.7 43.1 20.3Z",fill:"#88C9F9"}),t.createElement("path",{d:"M41.8 19C42.6 18.3 42.3 16.8 41.3 15.7 40.3 14.6 38.8 14.2 38.1 14.9 37.3 15.6 37.5 17.1 38.6 18.2 39.6 19.3 41.1 19.7 41.8 19Z",fill:"#269"}),t.createElement("path",{d:"M3.3 28.7C4.4 28.7 5.3 27.8 5.3 26.7 5.3 25.6 4.4 24.7 3.3 24.7 2.2 24.7 1.3 25.6 1.3 26.7 1.3 27.8 2.2 28.7 3.3 28.7Z",fill:"#55ACEE"}),t.createElement("path",{d:"M6.5 21L3.4 13.5 0.5 21.6 6.5 21ZM34.7-11.3L29.3-10 30.7-15.3 34.7-11.3Z",fill:"#EA596E"}))),t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M123 6C123 19.3 112.3 30 99 30 85.7 30 75 19.3 75 6 75-7.3 85.7-18 99-18 112.3-18 123-7.3 123 6Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M99 11.3C94.2 11.3 91 10.8 87 10 86.1 9.8 84.3 10 84.3 12.7 84.3 18 90.5 24.7 99 24.7 107.5 24.7 113.7 18 113.7 12.7 113.7 10 111.9 9.8 111 10 107 10.8 103.8 11.3 99 11.3Z",fill:"#664500"}),t.createElement("path",{d:"M87 12.7C87 12.7 91 14 99 14 107 14 111 12.7 111 12.7 111 12.7 108.3 18 99 18 89.7 18 87 12.7 87 12.7Z",fill:"white"}),t.createElement("path",{d:"M115.8 6.3C115.6 6.2 113.2 4.4 109.6 3.1 109.6 3 109.7 2.8 109.7 2.7 109.7 2.2 109.5 1.7 109.2 1.4 111.6 0.7 113.6 0.7 113.7 0.7 114.4 0.7 115 0.1 115-0.7 115-1.4 114.4-2 113.7-2 113.4-2 106.4-1.9 102.1 2.4 101.7 2.8 101.6 3.3 101.8 3.8 102 4.3 102.5 4.7 103 4.7 109.1 4.7 114.2 8.4 114.2 8.4 114.4 8.6 114.7 8.7 115 8.7 115.4 8.7 115.8 8.5 116.1 8.1 116.5 7.5 116.4 6.7 115.8 6.3V6.3ZM95.9 2.4C91.6-1.9 84.6-2 84.3-2 83.6-2 83-1.4 83-0.7 83 0.1 83.6 0.7 84.3 0.7 84.4 0.7 86.4 0.7 88.8 1.4 88.5 1.7 88.3 2.2 88.3 2.7 88.3 2.8 88.4 3 88.4 3.1 84.8 4.4 82.4 6.2 82.2 6.3 81.6 6.7 81.5 7.5 81.9 8.1 82.2 8.5 82.6 8.7 83 8.7 83.3 8.7 83.6 8.6 83.8 8.4 83.8 8.4 88.8 4.7 95 4.7 95.5 4.7 96 4.3 96.2 3.8 96.4 3.3 96.3 2.8 95.9 2.4V2.4Z",fill:"#664500"})),t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M198 6C198 19.3 187.3 30 174 30 160.7 30 150 19.3 150 6 150-7.3 160.7-18 174-18 187.3-18 198-7.3 198 6Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M188.7 19.3C192.3 19.3 195.3 16.3 195.3 12.7 195.3 9 192.3 6 188.7 6 185 6 182 9 182 12.7 182 16.3 185 19.3 188.7 19.3Z",fill:"#FF7892"}),t.createElement("path",{d:"M159.3 19.3C163 19.3 166 16.3 166 12.7 166 9 163 6 159.3 6 155.7 6 152.7 9 152.7 12.7 152.7 16.3 155.7 19.3 159.3 19.3Z",fill:"#FF7892"}),t.createElement("path",{d:"M182.7 11.3C186.7 11.3 190 8.1 190 4 190-0.1 186.7-3.3 182.7-3.3 178.6-3.3 175.3-0.1 175.3 4 175.3 8.1 178.6 11.3 182.7 11.3Z",fill:"#F5F8FA"}),t.createElement("path",{d:"M165.3 11.3C169.4 11.3 172.7 8.1 172.7 4 172.7-0.1 169.4-3.3 165.3-3.3 161.3-3.3 158-0.1 158 4 158 8.1 161.3 11.3 165.3 11.3Z",fill:"#F5F8FA"}),t.createElement("path",{d:"M165.3 7.3C167.2 7.3 168.7 5.8 168.7 4 168.7 2.2 167.2 0.7 165.3 0.7 163.5 0.7 162 2.2 162 4 162 5.8 163.5 7.3 165.3 7.3Z",fill:"#664500"}),t.createElement("path",{d:"M182.7 7.3C184.5 7.3 186 5.8 186 4 186 2.2 184.5 0.7 182.7 0.7 180.8 0.7 179.3 2.2 179.3 4 179.3 5.8 180.8 7.3 182.7 7.3Z",fill:"#664500"}),t.createElement("path",{d:"M179.3 22H168.7C167.9 22 167.3 21.4 167.3 20.7 167.3 19.9 167.9 19.3 168.7 19.3H179.3C180.1 19.3 180.7 19.9 180.7 20.7 180.7 21.4 180.1 22 179.3 22ZM190-3.3C189.6-3.3 189.2-3.5 188.9-3.9 185.4-8.6 180.9-8.7 180.7-8.7 179.9-8.7 179.3-9.3 179.3-10 179.3-10.7 179.9-11.3 180.7-11.3 180.9-11.3 186.7-11.3 191.1-5.5 191.5-4.9 191.4-4 190.8-3.6 190.6-3.4 190.3-3.3 190-3.3V-3.3ZM158-3.3C157.7-3.3 157.4-3.4 157.2-3.6 156.6-4 156.5-4.9 156.9-5.5 161.3-11.3 167.1-11.3 167.3-11.3 168.1-11.3 168.7-10.7 168.7-10 168.7-9.3 168.1-8.7 167.3-8.7 167.1-8.7 162.6-8.6 159.1-3.9 158.8-3.5 158.4-3.3 158-3.3Z",fill:"#664500"})),t.createElement("defs",null,t.createElement("clipPath",null,t.createElement("rect",{y:"-18",width:"48",height:"48",fill:"white"})))),t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"198",height:"30",viewBox:"0 0 198 30",fill:"none"},t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M48 24C48 37.3 37.3 48 24 48 10.7 48 0 37.3 0 24 0 10.7 10.7 0 24 0 37.3 0 48 10.7 48 24Z",fill:"#DA2F47"}),t.createElement("path",{d:"M34 39.8C33.9 39.6 32.4 34 24 34 15.6 34 14.1 39.6 14 39.8 13.9 40.1 14.1 40.4 14.3 40.6 14.6 40.7 14.9 40.7 15.1 40.5 15.2 40.4 17.7 38 24 38 30.3 38 32.8 40.4 32.9 40.5 33 40.6 33.2 40.7 33.3 40.7 33.4 40.7 33.6 40.6 33.7 40.6 33.9 40.4 34.1 40.1 34 39.8V39.8ZM20.9 23.1C16.6 18.7 9.6 18.7 9.3 18.7 8.6 18.7 8 19.3 8 20 8 20.7 8.6 21.3 9.3 21.3 9.4 21.3 11.9 21.4 14.6 22.3 13.9 23.2 13.3 24.5 13.3 26 13.3 28.6 14.8 30.7 16.7 30.7 18.5 30.7 20 28.6 20 26 20 25.8 20 25.5 20 25.3 20 25.3 20 25.3 20 25.3 20.3 25.3 20.7 25.2 20.9 24.9 21.5 24.4 21.5 23.6 20.9 23.1V23.1ZM38.7 18.7C38.4 18.7 31.4 18.7 27.1 23.1 26.5 23.6 26.5 24.4 27.1 24.9 27.3 25.2 27.7 25.3 28 25.3 28 25.3 28 25.3 28 25.3 28 25.5 28 25.8 28 26 28 28.6 29.5 30.7 31.3 30.7 33.2 30.7 34.7 28.6 34.7 26 34.7 24.5 34.1 23.2 33.4 22.3 36.1 21.4 38.6 21.3 38.7 21.3 39.4 21.3 40 20.7 40 20 40 19.3 39.4 18.7 38.7 18.7V18.7Z",fill:"#292F33"})),t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M198 24C198 37.3 187.3 48 174 48 160.7 48 150 37.3 150 24 150 10.7 160.7 0 174 0 187.3 0 198 10.7 198 24Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M174 28C169.2 28 166 27.4 162 26.7 161.1 26.5 159.3 26.7 159.3 29.3 159.3 34.7 165.5 41.3 174 41.3 182.5 41.3 188.7 34.7 188.7 29.3 188.7 26.7 186.9 26.5 186 26.7 182 27.4 178.8 28 174 28Z",fill:"#664500"}),t.createElement("path",{d:"M162 29.3C162 29.3 166 30.7 174 30.7 182 30.7 186 29.3 186 29.3 186 29.3 183.3 34.7 174 34.7 164.7 34.7 162 29.3 162 29.3Z",fill:"white"}),t.createElement("path",{d:"M170.9 5.9L164.9 7 161.7 1.3C161.4 0.7 160.7 0.3 160 0.4 159.3 0.6 158.7 1.1 158.6 1.8L157.6 8.2 151.6 9.3C150.9 9.4 150.3 10 150.2 10.7 150.1 11.4 150.5 12.1 151.2 12.4L156.6 15 155.6 21.4C155.5 22.1 155.8 22.9 156.5 23.2 156.7 23.3 157 23.4 157.2 23.4 157.7 23.4 158.1 23.2 158.4 22.9L163.1 18.1 169.1 21C169.8 21.3 170.6 21.1 171.1 20.6 171.5 20.1 171.6 19.3 171.3 18.7L168.2 13 172.4 8.7C172.9 8.2 173 7.4 172.7 6.8 172.3 6.1 171.6 5.8 170.9 5.9V5.9ZM177.1 5.9L183.1 7 186.3 1.3C186.6 0.7 187.3 0.3 188 0.4 188.7 0.6 189.3 1.1 189.4 1.8L190.4 8.2 196.4 9.3C197.1 9.4 197.7 10 197.8 10.7 197.9 11.4 197.5 12.1 196.8 12.4L191.4 15 192.4 21.4C192.5 22.1 192.2 22.9 191.5 23.2 191.3 23.3 191 23.4 190.8 23.4 190.3 23.4 189.9 23.2 189.6 22.9L184.9 18.1 178.9 21C178.2 21.3 177.4 21.1 176.9 20.6 176.5 20.1 176.4 19.3 176.7 18.7L179.8 13 175.6 8.7C175.1 8.2 175 7.4 175.3 6.8 175.7 6.1 176.4 5.8 177.1 5.9V5.9Z",fill:"#E95F28"})),t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M99 48C112.3 48 123 37.3 123 24 123 10.7 112.3 0 99 0 85.7 0 75 10.7 75 24 75 37.3 85.7 48 99 48Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M98.1 22.1C97.8 22 97.5 22 97.3 22.1 97.3 22.1 95.6 23.3 92.3 23.3 89.1 23.3 87.4 22.1 87.4 22.1 87.2 22 86.8 22 86.6 22.1 86.3 22.3 86.3 22.7 86.4 22.9 86.5 23.1 88.4 27.3 92.3 27.3 96.3 27.3 98.2 23.1 98.3 22.9 98.4 22.7 98.3 22.3 98.1 22.1V22.1ZM111.4 22.1C111.2 22 110.8 22 110.6 22.1 110.6 22.1 108.9 23.3 105.7 23.3 102.4 23.3 100.7 22.1 100.7 22.1 100.5 22 100.2 22 99.9 22.1 99.7 22.3 99.6 22.7 99.7 22.9 99.8 23.1 101.7 27.3 105.7 27.3 109.6 27.3 111.5 23.1 111.6 22.9 111.7 22.7 111.7 22.3 111.4 22.1V22.1Z",fill:"#664500"}),t.createElement("path",{d:"M120.9 16.7C120.9 16.7 120.9 16.6 120.9 16.5 120.9 15.5 120.2 15 119.3 15H114.5L120.2 7C120.5 6.6 120.6 6.4 120.6 5.9 120.6 4.9 119.8 4.8 119.4 4.8H112.3L112.3 3.8C112.3 3.8 110.4 5 110.3 5 110.1 5.1 109.6 5.5 109.6 6.3 109.6 7.3 110.3 7.9 111.2 7.9H115.4L109.7 15.9C109.6 16.1 109.4 16.5 109.4 16.9 109.4 17.7 110.1 18.1 110.9 18.1H119.3C119.6 18.1 120 18 120.2 17.9L122.2 16.7H120.9V16.7Z",fill:"#FFAC33"}),t.createElement("path",{d:"M117.4 6.8H113.2C112.3 6.8 111.5 6.2 111.5 5.2 111.5 4.2 112.3 3.6 113.2 3.6H121.4C121.7 3.6 122.6 3.8 122.6 4.7 122.6 5.2 122.5 5.4 122.2 5.8L116.5 13.8H121.3C122.2 13.8 122.9 14.4 122.9 15.4 122.9 16.4 122.2 17 121.3 17H112.8C112 17 111.4 16.6 111.4 15.7 111.4 15.3 111.6 15 111.7 14.8L117.4 6.8V6.8Z",fill:"#2A6797"}),t.createElement("path",{d:"M108.2 10C108.2 9.9 108.2 9.9 108.2 9.9 108.2 9.1 107.7 8.7 107 8.7H103.4L107.7 2.7C107.9 2.4 108 2.2 108 1.9 108 1.1 107.3 1 107.1 1H101.7L101.7 0.3C101.7 0.3 100.3 1.2 100.2 1.2 100.1 1.3 99.7 1.6 99.7 2.2 99.7 3 100.2 3.4 100.9 3.4H104.1L99.8 9.4C99.7 9.5 99.6 9.8 99.6 10.1 99.6 10.7 100.1 11 100.7 11H107C107.2 11 107.5 11 107.7 10.9L109.2 10H108.2V10Z",fill:"#FFAC33"}),t.createElement("path",{d:"M105.5 2.5H102.4C101.7 2.5 101.2 2.1 101.2 1.4 101.2 0.6 101.7 0.2 102.4 0.2H108.5C108.8 0.2 109.4 0.3 109.4 1 109.4 1.4 109.3 1.5 109.1 1.8L104.9 7.8H108.4C109.1 7.8 109.7 8.2 109.7 9 109.7 9.7 109.1 10.2 108.4 10.2H102.1C101.5 10.2 101 9.9 101 9.3 101 9 101.2 8.7 101.3 8.5L105.5 2.5V2.5Z",fill:"#2A6797"}),t.createElement("path",{d:"M98.7 13.9C98.7 13.9 98.7 13.8 98.7 13.8 98.7 13.2 98.2 12.8 97.6 12.8H94.6L98.2 7.7C98.4 7.4 98.5 7.3 98.5 7 98.5 6.3 97.9 6.2 97.7 6.2H93.1L93.1 5.7 91.8 6.4C91.7 6.5 91.4 6.7 91.4 7.3 91.4 7.9 91.9 8.3 92.4 8.3H95.1L91.5 13.4C91.4 13.5 91.3 13.8 91.3 14 91.3 14.6 91.7 14.8 92.2 14.8H97.6C97.8 14.8 98.1 14.7 98.2 14.7L99.5 13.9H98.7Z",fill:"#FFAC33"}),t.createElement("path",{d:"M96.4 7.5H93.7C93.1 7.5 92.6 7.2 92.6 6.5 92.6 5.9 93.1 5.5 93.7 5.5H99C99.2 5.5 99.7 5.6 99.7 6.2 99.7 6.5 99.7 6.7 99.5 6.9L95.8 12H98.9C99.5 12 99.9 12.4 99.9 13.1 99.9 13.7 99.5 14.1 98.9 14.1H93.5C93 14.1 92.5 13.8 92.5 13.3 92.5 13 92.7 12.8 92.7 12.7L96.4 7.5V7.5Z",fill:"#2A6797"})))))},"EmojiPackComingSoon");_e.displayName="EmojiPackComingSoon";const Ee=_e,G=new h.Ay("custom_emoji_list");function Ae(Oe){let{row:Fe,className:_t,onPackClick:ft}=Oe;return t.createElement("div",{key:Fe.map(Ct=>`${u(Ct)}-row`).join(),className:_t},Fe.map(Ct=>{if(Ct.type==="coming_soon")return t.createElement(Ee,{key:"emoji-pack-coming-soon"});if(Ct.type==="spacer")return t.createElement("div",{key:"emoji-pack-spacer",className:"p-emoji_pack__spacer"});const $t=(0,L.j)(Ct);return t.createElement(Z,{key:`emoji-pack-${u(Ct)}`,installed:$t,id:u(Ct)||void 0,name:(0,m.M)(Ct),author:i(Ct),emoji:(0,d.H)(Ct),onClick:()=>ft(Ct,{installed:$t})})}))}l(Ae,"Row"),Ae.displayName="Row",Ae.propTypes={row:O().arrayOf(O().object),className:O().string,onPackClick:O().func.isRequired},Ae.defaultProps={row:[],className:void 0};function ce(Oe){let{orgName:Fe,onPackClick:_t}=Oe;const ft=(0,n.wA)(),Ct=(0,s.d4)(M.uI);if((0,t.useEffect)(()=>{ft((0,C.H)({reason:"emojiPack:dialog"}))},[ft]),(0,A.A)(Ct))return null;const $t=(0,v.A)(Ct,pn=>(0,L.j)(pn)).length;let rn=(0,E.A)(Ct);rn=(0,f.A)(rn,pn=>-1*P(pn)),(0,g.A)(Ct)<2&&rn.push({type:"coming_soon"}),rn.length%2!==0&&rn.push({type:"spacer"});const un=(0,y.A)(rn,2);let hn;return Fe?hn=G.rt("Emoji packs let you add a whole set new of emoji to every {orgName} workspace. They\u2019ll appear in the custom tab of the emoji picker (the one with the Slack icon!).",{orgName:t.createElement("b",null,Fe)}):hn=G.t("Emoji packs let you add a whole set new of emoji for your team. They\u2019ll appear in the custom tab of the emoji picker (the one with the Slack icon!)."),t.createElement(r.$m,null,t.createElement(r.qf,null,t.createElement("div",null,$t>0&&t.createElement("div",{className:"p-emoji_pack__header"},G.t("Added"),t.createElement("div",{className:"p-emoji_pack__pill"},$t)),t.createElement("div",{className:"p-emoji_pack__list"},un.map(pn=>t.createElement(Ae,{key:pn.map(Tn=>`${u(Tn)}-rp-`).join(),className:"p-emoji_pack__pack_row",row:pn,onPackClick:_t}))),t.createElement("div",{className:"p-emoji_pack__help"},hn))))}l(ce,"AddEmojiPackDialogContent"),ce.displayName="AddEmojiPackDialogContent";const de=ce;var oe=e(298559),$=e(877500),re=e(42302),ue=e(64741),te=e(131606),ae=e(381666),H=e(229513),U=e(168776),N=e(120229),K=e(369391),W=e(927675),J=e(488455),q=e(113574),ie=e(749036),Te=e(258362),Me=e(532395),ke=e(292049),Pe=e(454346),Ie=e(349799),X=e(789123),ne=e(630992),fe=e(915773);const be=(0,fe.Ay)(Oe=>!Oe||!Oe.customizeEmoji||!Oe.customizeEmoji.customEmojiData||!Oe.customizeEmoji.customEmojiData.length?[]:Oe.customizeEmoji.customEmojiData);be.meta={name:"createSelector",key:"createSelectorgetCustomEmojiData",description:Oe=>!Oe||!Oe.customizeEmoji||!Oe.customizeEmoji.customEmojiData||!Oe.customizeEmoji.customEmojiData.length?[]:Oe.customizeEmoji.customEmojiData};const Be=(0,fe.Ay)(Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.customEmojiTotalCount?Oe.customizeEmoji.customEmojiTotalCount:0);Be.meta={name:"createSelector",key:"createSelectorgetCustomEmojiTotalCount",description:Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.customEmojiTotalCount?Oe.customizeEmoji.customEmojiTotalCount:0};const We=(0,fe.Ay)(Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.currentPage?Oe.customizeEmoji.currentPage:0);We.meta={name:"createSelector",key:"createSelectorgetLastPageRetrieved",description:Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.currentPage?Oe.customizeEmoji.currentPage:0};const Re=(0,fe.Ay)(Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.totalPages?Oe.customizeEmoji.totalPages:0);Re.meta={name:"createSelector",key:"createSelectorgetTotalPages",description:Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.totalPages?Oe.customizeEmoji.totalPages:0};const ve=(0,fe.Ay)(Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.isLoadingNewPage?Oe.customizeEmoji.isLoadingNewPage:!1);ve.meta={name:"createSelector",key:"createSelectorgetIsLoadingNewPage",description:Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.isLoadingNewPage?Oe.customizeEmoji.isLoadingNewPage:!1};const xe=(0,fe.Ay)(Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.isLoadingNewSearchQuery?Oe.customizeEmoji.isLoadingNewSearchQuery:!1);xe.meta={name:"createSelector",key:"createSelectorgetIsLoadingNewSearchQuery",description:Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.isLoadingNewSearchQuery?Oe.customizeEmoji.isLoadingNewSearchQuery:!1};const He=(0,fe.Ay)(Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.deletedEmojiList?Oe.customizeEmoji.deletedEmojiList:[]);He.meta={name:"createSelector",key:"createSelectorgetDeletedEmojiList",description:Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.deletedEmojiList?Oe.customizeEmoji.deletedEmojiList:[]};const je=(0,fe.Ay)(Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.disabledEmoji?Oe.customizeEmoji.disabledEmoji:{});je.meta={name:"createSelector",key:"createSelectorgetDisabledEmoji",description:Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.disabledEmoji?Oe.customizeEmoji.disabledEmoji:{}};const Ke=(0,fe.Ay)(Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.sortDir?Oe.customizeEmoji.sortDir:"asc");Ke.meta={name:"createSelector",key:"createSelectorgetSortDirection",description:Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.sortDir?Oe.customizeEmoji.sortDir:"asc"};const ht=(0,fe.Ay)(Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.sortBy?Oe.customizeEmoji.sortBy:"name");ht.meta={name:"createSelector",key:"createSelectorgetSortBy",description:Oe=>Oe&&Oe.customizeEmoji&&Oe.customizeEmoji.sortBy?Oe.customizeEmoji.sortBy:"name"};const dt=(0,X.A)("Load the next page of custom emoji data",function(Oe,Fe){let{count:_t=100,queries:ft,userIds:Ct,reason:$t="customize-emoji-next-page"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const rn=Fe();Oe((0,ne.en)(!0));const hn={page:We(rn)+1,count:_t,sort_by:ht(rn),sort_dir:Ke(rn)};return ft&&(hn.queries=JSON.stringify(ft)),Ct&&(hn.user_ids=JSON.stringify(Ct)),Oe((0,Ie.apiCall)({method:"emoji.adminList",reason:$t,args:hn})).then(pn=>{Oe((0,ne.en)(!1));const Tn=(0,ke.A)(pn.disabled_emoji)?(0,Pe.A)(pn.disabled_emoji,"name"):pn.disabled_emoji;Oe((0,ne.X8)({newCustomEmojiData:pn.emoji,disabledEmoji:Tn,customEmojiTotalCount:pn.custom_emoji_total_count,customEmojiSearchCount:pn.paging.total,currentPage:pn.paging.page,totalPages:pn.paging.pages}))}).catch(pn=>{throw pn})});dt.meta={name:"createFetcher",key:"createFetcherfetchCustomEmojiNextPage",description:"Load the next page of custom emoji data"},dt.propTypes={queries:O().array,userIds:O().array};const Ve=(0,X.A)("Load custom emoji data with a new search query",function(Oe,Fe){let{queries:_t,page:ft=1,count:Ct=100,sortBy:$t,sortDir:rn,userIds:un,reason:hn="customize-emoji-new-query"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Oe((0,ne.d$)(!0));const pn={page:ft,count:Ct};return _t&&(pn.queries=JSON.stringify(_t)),un&&(pn.user_ids=JSON.stringify(un)),$t&&rn&&(pn.sort_by=$t,pn.sort_dir=rn),Oe((0,Ie.apiCall)({method:"emoji.adminList",reason:hn,args:pn})).then(Tn=>{Oe((0,ne.d$)(!1));const Qn=(0,ke.A)(Tn.disabled_emoji)?(0,Pe.A)(Tn.disabled_emoji,"name"):Tn.disabled_emoji;Oe((0,ne.Ot)({newCustomEmojiData:Tn.emoji,disabledEmoji:Qn,customEmojiTotalCount:Tn.custom_emoji_total_count,customEmojiSearchCount:Tn.paging.total,currentPage:Tn.paging.page,totalPages:Tn.paging.pages,sortBy:$t,sortDir:rn}))}).catch(Tn=>{throw Tn})});Ve.meta={name:"createFetcher",key:"createFetcherfetchResetCustomEmoji",description:"Load custom emoji data with a new search query"},Ve.propTypes={queries:O().array,page:O().number,count:O().number,sortBy:O().oneOf(["created","name"]),sortDir:O().oneOf(["asc","desc"]),userIds:O().array};const Je=(0,X.A)("Deletes the given custom emoji",function(Oe,Fe){let{emojiName:_t,isPrimaryEmoji:ft=!1,synonyms:Ct=[],reason:$t="customize-emoji-remove"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Oe((0,ne.gx)({emojiName:_t,isPrimaryEmoji:ft,synonyms:Ct})),Oe((0,Ie.apiCall)({method:"emoji.remove",reason:$t,args:{name:_t}})).then(rn=>rn).then(()=>{(0,ae.e)({state:Fe()}).track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"delete",action:"remove",action_status:"success"}}})}).catch(rn=>{throw(0,ae.e)({state:Fe()}).track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"delete",action:"remove",action_status:"fail"}}}),rn})});Je.meta={name:"createFetcher",key:"createFetchersubmitRemoveCustomEmoji",description:"Deletes the given custom emoji"},Je.propTypes={emojiName:O().string,isPrimaryEmoji:O().bool,synonyms:O().array};const Ge=(0,X.A)("Creates a new custom emoji or alias",function(Oe,Fe){let{mode:_t,name:ft,aliasFor:Ct,image:$t,searchArgs:rn={},reason:un="customize-emoji-add"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Oe((0,Ie.apiCall)({method:"emoji.add",reason:un,args:{mode:_t,name:ft,alias_for:Ct,image:$t}})).then(hn=>hn).then(()=>{Oe(Ve(rn))}).catch(hn=>{throw hn})});Ge.meta={name:"createFetcher",key:"createFetchersubmitAddCustomEmoji",description:"Creates a new custom emoji or alias"},Ge.propTypes={mode:O().string,name:O().string,aliasFor:O().string,image:O().object};const Le=(0,X.A)("Gets the emoji data for a given emoji",function(Oe,Fe){let{name:_t,reason:ft="customize-emoji-get-info"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Oe((0,Ie.apiCall)({method:"emoji.getInfo",reason:ft,args:{name:_t}})).then(Ct=>Ct).catch(Ct=>{throw Ct})});Le.meta={name:"createFetcher",key:"createFetchergetEmojiInfo",description:"Gets the emoji data for a given emoji"},Le.propTypes={name:O().string};const Mt=(0,X.A)("Renames the custom emoji with the new name",function(Oe,Fe){let{oldName:_t,newName:ft,reason:Ct="customize-emoji-rename"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Oe((0,Ie.apiCall)({method:"emoji.rename",reason:Ct,args:{name:_t,new_name:ft}})).then($t=>$t).then(()=>{Oe(Ve()),Oe((0,ne.S9)(_t))}).catch($t=>{throw $t})});Mt.meta={name:"createFetcher",key:"createFetchersubmitRenameEmoji",description:"Renames the custom emoji with the new name"},Mt.propTypes={oldName:O().string,newName:O().string};var Dt=e(202116),pt=e(629),Qt=e(619563),Nt=e(487044);const bt=new h.Ay("custom_emoji_list"),Yt={ADD_DIALOG_INPUT:"customize_emoji_add_dialog_input",ADD_DIALOG_ERROR:"customize_emoji_add_dialog_error",ADD_DIALOG_FILE_INPUT:"customize_emoji_add_dialog_file_input",ADD_DIALOG_FILE_INFO:"customize_emoji_add_dialog_file_info",ADD_DIALOG_IMAGE_PREVIEW:"customize_emoji_add_dialog_image_preview",ADD_DIALOG_IMAGE_PREVIEW_ERROR:"customize_emoji_add_dialog_image_preview_error",ADD_DIALOG_MESSAGE:"customize_emoji_add_dialog_message",ADD_DIALOG_UPLOAD:"customize_emoji_add_dialog_upload",ADD_DIALOG_UPLOAD_IMAGE_PROMPT:"customize_emoji_add_dialog_upload_image_prompt",ADD_DIALOG_UPLOAD_PREVIEW:"customize_emoji_add_dialog_upload_preview",ADD_DIALOG:"customize_emoji_add_dialog",ADD_DIALOG_DUPLICATE_PREVIEW:"customize_emoji_add_dialog_duplicate_preview"};let fn=l(class extends t.PureComponent{componentDidMount(){const{clogger:Fe}=this.props;Fe.track(this.eventId,{contexts:{ui_context:{step:"add_custom_emoji",action:"impression",ui_component:"dialog",ui_properties:{element_type:"dialog",element_name:"add_custom_emoji_dialog"}}}}),this.maybeLoadEmojiPreviewFromUrl(),this.props.emojiNameSuggestion&&this.state.newEmojiName&&this.checkIfEmojiNameAlreadyExistsImmediate(this.props.emojiNameSuggestion)}shouldPreventSubmit(){const{newEmojiName:Fe,uploadedImage:_t,nameErrorText:ft}=this.state,{emojiUrl:Ct}=this.props,$t=Fe.length>100;return!Fe||$t||!!ft||!Ct&&!_t}onDragOver(Fe){Fe.preventDefault(),Fe.dataTransfer.dropEffect="copy"}onDrop(Fe){Fe.preventDefault();const _t=Fe.dataTransfer.files[0];if(_t){const ft=_t.name,Ct=URL.createObjectURL(_t);this.updateAfterUpload({uploadedImage:_t,fileName:ft,previewImageUrl:Ct})}else this.setState(()=>({uploadedImage:null,fileName:"",previewImageUrl:"",imagePreviewError:!1}))}onEmojiNameChange(Fe){const{standardEmojiData:_t}=this.props;let ft="";this.setState(()=>({newEmojiName:Fe})),/[A-Z]/.test(Fe)||/[ .,;`\u2013~!@#$%^&*(){}=\\:"<>?|]/.test(Fe)?ft=bt.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation."):Fe in _t?ft=bt.t("An emoji with this name already exists. Check if the existing emoji is a duplicate, or try a different name."):(0,pt.q)(Fe)?this.checkIfEmojiNameAlreadyExists(Fe):ft=bt.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation."),this.setState(()=>({nameErrorText:ft}))}onImagePreviewError(){this.setState(()=>({imagePreviewError:!0}))}onSubmit(Fe){Fe&&Fe.preventDefault();const{newEmojiName:_t,uploadedImage:ft}=this.state,{emojiUrl:Ct,experimentAddEmojiFiletypesGroupOn:$t}=this.props;if(this.shouldPreventSubmit())return;this.setState(()=>({goButtonIsPending:!0}));const un={...{reason:"add-custom-emoji-dialog-content",name:_t},...Ct?{mode:"url",url:Ct}:{mode:"data",searchArgs:this.props.searchArgs,...ft?{image:ft}:{}}};this.props.addCustomEmoji(un).then(()=>{this.props.closeModal();const hn=this.renderToastMessage();this.props.enqueueToast({element:hn}),this.setState(()=>({goButtonIsPending:!1})),this.props.clogger.track(this.eventId,{contexts:{ui_context:{step:Ct?"import_custom_emoji":"add_custom_emoji",action:Ct?"import":"add",action_status:"success",ui_component:"dialog",ui_properties:{element_type:"button",element_name:"save"}}}})}).catch(hn=>{let pn;const Tn=(0,$.A)(hn,"data.error");(Tn===Dt.W.NoUrlProvided||Tn===Dt.W.NoUrlImage)&&(pn=bt.t("Something happened that prevented the image from being imported. Try again?")),Tn==="error_bad_upload"?pn=bt.t("Something happened that prevented your file from being uploaded. Try again?"):Tn==="error_bad_format"?pn=$t?bt.t("Please make sure your file is a GIF, JPEG, PNG, or WEBP."):bt.t("Please make sure your file is a GIF, JPEG, or PNG."):Tn==="resized_but_still_too_large"||Tn==="too_many_frames"?pn=bt.t("This image is a bit too big, even after resizing. A smaller file might help?"):Tn==="error_too_big"?pn=bt.t("Please choose an image smaller than 64KB."):Tn==="error_name_taken_i18n"?pn=bt.rt("Unfortunately, the international emoji set already includes an emoji named <b>{newEmojiName}</b>. Mind trying a different name?",{newEmojiName:_t}):Tn==="error_name_taken"?pn=bt.rt("The name <b>{newEmojiName}</b> is already in use by another emoji.",{newEmojiName:_t}):(Tn==="error_bad_name"||Tn==="error_bad_name_i18n")&&(pn=bt.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation.")),this.setState(()=>({apiErrorText:pn,goButtonIsPending:!1})),this.props.clogger.track(this.eventId,{contexts:{ui_context:{step:"add_custom_emoji",action:"add",action_status:"fail",ui_component:"dialog",ui_properties:{element_type:"button",element_name:"save"}}}})})}onTextBlur(){this.setState(()=>({placeholder:!0}))}onTextFocus(){this.setState(()=>({placeholder:!1}))}onUploadChange(){var Fe,_t;const ft=!((Fe=this.fileInput)===null||Fe===void 0||(_t=Fe.current)===null||_t===void 0)&&_t.files?this.fileInput.current.files[0]:null;if(ft){const Ct=ft.name,$t=URL.createObjectURL(ft);this.updateAfterUpload({uploadedImage:ft,fileName:Ct,previewImageUrl:$t})}else this.setState(()=>({uploadedImage:null,fileName:"",previewImageUrl:"",imagePreviewError:!1}))}maybeLoadEmojiPreviewFromUrl(){const{emojiUrl:Fe}=this.props;Fe&&this.setState(()=>({previewImageUrl:Fe,imagePreviewError:!1}))}convertFileNameToEmojiName(Fe){if(!Fe)return null;const _t=Fe.lastIndexOf("."),ft=_t>0?Fe.substring(0,_t):Fe;return ft?ft.toLowerCase().replace(/\s/g,"-").replace(/[ .,;`\u2013~!@#$%^&*(){}=\\:"<>?|]/g,""):null}updateAfterUpload(Fe){let{uploadedImage:_t,fileName:ft,previewImageUrl:Ct}=Fe;const{newEmojiName:$t,fileName:rn}=this.state;let un=$t;(!$t||$t===this.convertFileNameToEmojiName(rn))&&(un=this.convertFileNameToEmojiName(ft)||un),this.setState(()=>({uploadedImage:_t,fileName:ft,previewImageUrl:Ct,imagePreviewError:!1}),()=>this.onEmojiNameChange(un))}fileUpload(){var Fe;const _t=(Fe=this.props.windowRef.deref())===null||Fe===void 0?void 0:Fe.document.getElementById("emojiimg");_t==null||_t.click(),this.props.clogger.track(this.eventId,{contexts:{ui_context:{step:"add_custom_emoji",action:"click",ui_component:"dialog",ui_properties:{element_type:"button",element_name:"upload_image"}}}})}renderChooseNamePrompt(){const{newEmojiName:Fe,nameErrorText:_t}=this.state;return t.createElement("ol",{className:"black margin_bottom_0",start:2},t.createElement("li",{className:"margin_bottom_0"},t.createElement("div",null," ",bt.t("Give it a name")," "),t.createElement("div",{className:"normal sk_foreground_max p-add_custom_emoji_dialog__choose_name_container"},bt.t("This is also what you\u2019ll type to add this emoji to your messages.")),t.createElement("div",{className:"p_add_custom_emoji_dialog__name_input"},t.createElement(H.A,{id:"emojiname",name:"name",value:Fe,onChange:this.onEmojiNameChange,onFocus:this.onTextFocus,onBlur:this.onTextBlur,placeholder:this.renderPlaceholderText(),prefix:":",suffix:":",maxCharacterLimit:100,counterMinimumCharacters:101,errorText:_t,"data-qa":Yt.ADD_DIALOG_INPUT,useInlineAlert:!0}))))}maybeRenderDuplicateNameErrorPreview(){const{newEmojiName:Fe,nameErrorText:_t}=this.state,ft=bt.t("An emoji with this name already exists. Check if the existing emoji is a duplicate, or try a different name.");return _t===ft?t.createElement("div",{className:"inline_flex full_width","data-qa":Yt.ADD_DIALOG_DUPLICATE_PREVIEW},t.createElement(U.Ay,{text:Fe,alt:Fe,emojiSize:"larger",className:"flex_shrink_none"}),t.createElement("div",{className:"padding_left_50 overflow_hidden"},t.createElement("strong",null,bt.t("Existing emoji")),t.createElement("span",{className:"block normal overflow_ellipsis"},":",Fe,":"))):null}renderDialogMessage(){const{orgName:Fe}=this.props;let _t;return Fe?_t=bt.rt("Your custom emoji will be available in every <b>{orgName}</b> workspace. You\u2019ll find it in the custom tab of the emoji picker. (Hint: it\u2019s the one with the Slack icon!)",{orgName:Fe}):_t=bt.t("Your custom emoji will be available to everyone in your workspace. You\u2019ll find it in the custom tab of the emoji picker. (Hint: it\u2019s the one with the Slack icon!)"),t.createElement("div",{className:"p-add_custom_emoji_dialog","data-qa":Yt.ADD_DIALOG_MESSAGE},t.createElement("div",null,_t),t.createElement("div",null,this.renderErrorMessage()),t.createElement("form",{className:"p-add_custom_emoji_dialog__form",onSubmit:this.onSubmit},this.renderUploadImagePrompt(),t.createElement("hr",null),this.renderChooseNamePrompt(),this.maybeRenderDuplicateNameErrorPreview()))}renderErrorMessage(){const{apiErrorText:Fe}=this.state;return Fe?t.createElement(K.Ay,{level:"error",className:"margin_top_50 margin_bottom_100","data-qa":Yt.ADD_DIALOG_ERROR},t.createElement("span",null," ",Fe," ")):null}renderImagePreview(){const{previewImageUrl:Fe}=this.state,_t=t.createElement("img",{src:Fe,alt:bt.t("image preview"),className:"p-add_custom_emoji_dialog__image",onError:this.onImagePreviewError,draggable:!1}),{imagePreviewError:ft}=this.state;return ft?t.createElement("div",{className:"p-add_custom_emoji_dialog__icon_container","data-qa":Yt.ADD_DIALOG_IMAGE_PREVIEW_ERROR},t.createElement(J.Ay,{tip:bt.t("We couldn't preview your image. Make sure it's a GIF, JPEG, or PNG."),zIndex:"above_fs"},t.createElement(D.A,{type:"exclamation-circle",size:"inherit",className:"p-add_custom_emoji_dialog__icon_broken block"}))):t.createElement("div",{className:"align_center p-add_custom_emoji_dialog__image_container","data-qa":Yt.ADD_DIALOG_IMAGE_PREVIEW},_t)}renderPlaceholderText(){const{placeholder:Fe}=this.state;let _t;return Fe?_t=bt.t("avocado"):_t="",_t}renderToastMessage(){const{newEmojiName:Fe,previewImageUrl:_t}=this.state,ft=t.createElement(U.Ay,{text:Fe,url:_t,emojiSize:U.lw.MEDIUM}),Ct=bt.rt("{emoji} :{newEmojiName}: has been added and is ready for use.",{emoji:ft,newEmojiName:Fe});return t.createElement(N.Ay,{toastClasses:"p-customize_emoji_list__toast"},t.createElement("span",null,Ct))}renderUploadImagePrompt(){const{emojiUrl:Fe}=this.props,_t=bt.t("Square images under 128KB and with transparent backgrounds work best. If your image is too large, we\u2019ll try to resize it for you."),ft=t.createElement(t.Fragment,null,t.createElement("div",{className:"p-add_custom_emoji_dialog__upload_preview rounded bordered"},this.renderUploadPreview()),t.createElement("div",{className:"p-add_custom_emoji_dialog__upload_preview p-add_custom_emoji_dialog__upload_preview--dark rounded bordered margin_left_50"},this.renderUploadPreview())),Ct=Fe?bt.t("Import external emoji"):bt.t("Upload an image");return t.createElement("ol",{className:"black",onDragOver:this.onDragOver,onDrop:this.onDrop,"data-qa":Yt.ADD_DIALOG_UPLOAD_IMAGE_PROMPT},t.createElement("li",{className:"large_bottom_margin"},t.createElement("div",null," ",Ct," "),!Fe&&t.createElement("div",{className:"normal sk_foreground_max"},_t),t.createElement("div",{className:"normal p-add_custom_emoji_dialog__upload_container"},ft,!Fe&&t.createElement("div",{className:"p-add_custom_emoji_dialog__upload_button margin_left_100"},this.renderUploadedFileText(),t.createElement("input",{type:"file",className:"p-add_custom_emoji_dialog__upload_input",id:"emojiimg",name:"img",accept:"image/*;capture=camera",ref:this.fileInput,onChange:this.onUploadChange,"data-qa":Yt.ADD_DIALOG_FILE_INPUT}),t.createElement(W.Ay,{type:"outline",size:"medium",onClick:this.fileUpload,"data-qa":Yt.ADD_DIALOG_UPLOAD}," ",bt.t("Upload Image")," ")))))}renderUploadPreview(){const{fileName:Fe}=this.state,{emojiUrl:_t}=this.props;let ft;return Fe||_t?ft=this.renderImagePreview():ft=t.createElement("div",{className:"p-add_custom_emoji_dialog__icon_container","data-qa":Yt.ADD_DIALOG_UPLOAD_PREVIEW},t.createElement(D.A,{type:"file-image",size:"inherit",className:"p-add_custom_emoji_dialog__icon block "})),ft}renderUploadedFileText(){const{fileName:Fe}=this.state;let _t;return Fe?_t=t.createElement("div",{className:"margin_bottom_25 p-add_custom_emoji_dialog__filename"}," ",Fe," "):_t=t.createElement("div",{className:"sk_foreground_max margin_bottom_25"}," ",bt.t("Select an image")," "),_t}render(){const{goButtonIsPending:Fe}=this.state,_t=this.shouldPreventSubmit();return t.createElement(t.Fragment,null,t.createElement(r.$m,null,t.createElement(r.qf,{"data-qa":`${Yt.ADD_DIALOG}_body`},this.renderDialogMessage())),t.createElement(r.jl,null,t.createElement(r.ox,null,t.createElement(r.s_,{type:"outline"},bt.t("Cancel")),t.createElement(W.lV,{type:"primary",onClick:this.onSubmit,loading:Fe,disabled:_t,"data-qa":`${Yt.ADD_DIALOG}_go`},bt.t("Save")))))}constructor(Fe){super(Fe),this.fileInput=t.createRef(),this.checkIfEmojiNameAlreadyExistsImmediate=_t=>{this.props.getEmojiInfo({name:_t}).then(()=>{this.state.newEmojiName===_t&&this.setState(()=>({nameErrorText:bt.t("An emoji with this name already exists. Check if the existing emoji is a duplicate, or try a different name.")}))}).catch(re.A)},this.checkIfEmojiNameAlreadyExists=(0,ue.A)(this.checkIfEmojiNameAlreadyExistsImmediate,200),this.state={uploadedImage:null,newEmojiName:this.props.emojiNameSuggestion,fileName:"",previewImageUrl:this.props.emojiUrl||"",placeholder:!0,nameErrorText:"",apiErrorText:null,imagePreviewError:!1,goButtonIsPending:!1},this.fileInput=t.createRef(),this.eventId=Fe.clientApp?Me.EventId.ADD_CUSTOM_EMOJI_IN_CLIENT:Me.EventId.PAGE_CUSTOMIZE_EMOJI,(0,te.v)(this,["onEmojiNameChange","onTextFocus","onTextBlur","onUploadChange","onImagePreviewError","onSubmit","renderUploadedFileText","renderUploadPreview","renderUploadImagePrompt","renderPlaceholderText","renderChooseNamePrompt","renderDialogMessage","renderToastMessage","renderErrorMessage","renderImagePreview","fileUpload","onDrop","onDragOver","maybeLoadEmojiPreviewFromUrl","maybeRenderDuplicateNameErrorPreview"])}},"AddCustomEmojiDialogContent");fn.displayName="AddCustomEmojiDialogContent",fn.defaultProps={standardEmojiData:{},addCustomEmoji:re.A,enqueueToast:re.A,clientApp:!1,closeModal:re.A,getEmojiInfo:re.A,searchArgs:{},emojiNameSuggestion:"",experimentAddEmojiFiletypesGroupOn:!1,windowRef:(0,Nt.O)(window)};const Tt=l(Oe=>({addCustomEmoji:Fe=>Oe((0,Dt.l)(Fe)),enqueueToast:function(){for(var Fe=arguments.length,_t=new Array(Fe),ft=0;ft<Fe;ft++)_t[ft]=arguments[ft];return Oe((0,ie.M)(..._t))},closeModal:()=>Oe((0,c.O)()),getEmojiInfo:function(){for(var Fe=arguments.length,_t=new Array(Fe),ft=0;ft<Fe;ft++)_t[ft]=arguments[ft];return Oe(Le(..._t))}}),"mapDispatchToProps"),sn=l(Oe=>({standardEmojiData:(0,Te.O)(Oe),clientApp:(0,q.TZ)(Oe),clogger:(0,ae.e)({state:Oe})}),"mapStateToProps"),mn=(0,oe.N)(sn,Tt)((0,Qt.A)(fn));var wt=e(813955),On=e(912922),Zt=e(704534),Mn=e(899421),Wn=e(358057),xn=e(443040);const gn=new h.Ay("custom_emoji_list"),An=l(Oe=>{let{adding:Fe,name:_t}=Oe;const ft=(0,n.wA)();return t.createElement(N.Ay,{onCloseComplete:()=>{Fe&&ft((0,On.su)())}},t.createElement("span",{"data-qa":"emoji-pack-action"},Fe&&gn.rt("The {name} emoji pack has been added to your workspace.",{name:t.createElement("b",null,_t)}),!Fe&&gn.rt("The {name} emoji pack has been removed from your workspace.",{name:t.createElement("b",null,_t)})))},"InstallToast");An.displayName="InstallToast";const vt=l(Oe=>{let{name:Fe,url:_t,index:ft,copyToClipboard:Ct,onClose:$t}=Oe;const rn=(0,n.wA)(),un=t.createElement(B.Ay,{showTooltip:!0,text:Fe,url:_t,emojiSize:B.lw.LARGE});function hn(){(0,Mn.x3)(Fe),$t&&$t(),rn((0,c.O)()),rn((0,ie.M)({element:t.createElement(N.Ay,null,t.createElement("span",null,gn.rt("Emoji copied to clipboard",{name:Fe})))}))}return l(hn,"onClick"),hn.displayName="onClick",Ct&&(0,Mn.tD)()?t.createElement(R.A,{className:"p-emoji_pack_details__button","data-color-index":ft%xn.dX,onClick:hn},un):un},"EmojiButton");vt.displayName="EmojiButton";const xt=l(Oe=>{let{collectionId:Fe,name:_t,author:ft,installed:Ct,emoji:$t,onCancelClick:rn,onClose:un}=Oe;const hn=(0,n.wA)(),pn=(0,s.d4)(Zt.h3),[Tn,Qn]=(0,t.useState)(!1),zn=(0,t.useCallback)(()=>{Qn(!0),hn((0,wt._J)({collectionId:Fe,reason:"emojiPack:dialog"})).then(()=>{Qn(!1),un&&un(),hn((0,c.O)()),hn((0,ie.M)({element:t.createElement(An,{adding:!0,name:_t})}))})},[hn,Fe,_t,un]),[Hn,Kn]=(0,t.useState)(!1),os=(0,t.useCallback)(()=>{Kn(!0),hn((0,wt.zx)({collectionId:Fe,reason:"emojiPack:dialog"})).then(()=>{Kn(!1),un&&un(),hn((0,c.O)()),hn((0,ie.M)({element:t.createElement(An,{adding:!1,name:_t})}))})},[hn,Fe,_t,un]);if(!$t)return null;const et=(0,V.A)($t,(Jt,an)=>({name:an,url:Jt})).map((Jt,an)=>({...Jt,index:an})),Et=(0,y.A)(et,5),we=gn.t("{emojiCount, plural, =1 {# emoji} other {# emoji}}",{emojiCount:(0,g.A)($t)}),tt=gn.t("by {author}",{author:ft}),Rt=t.createElement(t.Fragment,null,t.createElement("span",{className:"p-emoji_pack_details__subtitle_author"},tt),we),It=t.createElement(Wn.A,{"aria-label":gn.t("Go back"),icon:"chevron-large-left",onClick:()=>rn()});return t.createElement("div",{className:"p-emoji_pack_details"},t.createElement(r.rQ,null,t.createElement(r.Rc,{icon:It,title:_t,subtitle:Rt})),t.createElement(r.$m,{className:"p-emoji_pack_details__content"},t.createElement(r.qf,null,Et.map(Jt=>t.createElement("div",{key:Jt.map(an=>an.name).join("-details-"),className:"p-emoji_pack_details__emoji_row"},Jt.map(an=>t.createElement(vt,{key:`emoji-pack-details-${an.name}`,name:`:${an.name}:`,url:an.url,index:an.index,copyToClipboard:Ct,onClose:un})),[...new Array(5-Jt.length)].map((an,Ft)=>`emoji-pack-details-spacer-${Ft}`).map(an=>t.createElement("div",{key:an,className:"p-emoji_pack_details__emoji_spacer"})))))),t.createElement(r.jl,null,Ct&&(0,Mn.tD)()&&t.createElement("span",{className:"p-emoji_pack_details__tip"},gn.t("Click an emoji to copy to clipboard")),t.createElement(r.ox,null,Ct&&pn&&t.createElement(W.lV,{autoFocus:!0,type:"danger",loading:Hn,onClick:os},gn.t("Remove pack")),!Ct&&t.createElement(W.lV,{autoFocus:!0,loading:Tn,onClick:zn},gn.t("Add pack")))))},"EmojiPackDetails");xt.displayName="EmojiPackDetails";const Vt=xt;var Se=e(242098);const St=new h.Ay("custom_emoji_list"),Ce={CUSTOM:"custom",PACKS:"packs"},Ne=l(Oe=>{let{orgName:Fe="",searchArgs:_t={},showEmojiPacks:ft,initialTab:Ct=Ce.CUSTOM,emojiNameSuggestion:$t="",emojiUrl:rn,megaphoneEventOnClose:un}=Oe;const hn=(0,n.wA)(),pn=(0,s.d4)(Xe=>(0,p._Z)(Xe,"add_emoji_filetypes")==="on"),[Tn,Qn]=(0,t.useState)(Ct),[zn,Hn]=(0,t.useState)(!1),[Kn,os]=(0,t.useState)(null),et=rn?St.t("Add emoji to your organization"):void 0,Et=ft?St.t("Add emoji"):St.t("Add custom emoji"),we=et??Et,tt=St.t("Emoji packs"),Rt=St.t("Custom emoji"),It=(0,t.useMemo)(()=>[{title:Rt,id:Ce.CUSTOM,onClick:()=>Qn(Ce.CUSTOM),"data-qa":"add_emoji_dialog_tab_custom"},{title:tt,id:Ce.PACKS,onClick:()=>Qn(Ce.PACKS),"data-qa":"add_emoji_dialog_tab_packs"}],[Rt,tt]),Jt=(0,t.useCallback)(()=>{un&&hn((0,Se.iR)({event:{type:un}}))},[hn,un]),an=(0,t.useCallback)(()=>{Jt(),hn((0,c.O)())},[hn,Jt]),Ft=ft&&Tn===Ce.PACKS,Vn=ft?t.createElement(o.A,{tabs:It,currentTabId:Tn,className:"p-add_custom_emoji_dialog__tabs"}):null,Pt=(0,a.A)("p-add_emoji_dialog",{"p-add_emoji_dialog--without_tabs":!ft});return ft&&Kn?t.createElement(r.dW,{closeModal:an,isOpen:!0,className:Pt},t.createElement(Vt,{collectionId:u(Kn),name:(0,m.M)(Kn),author:i(Kn),emoji:zn?_(Kn):(0,d.H)(Kn),installed:zn,onCancelClick:()=>{os(null)},onClose:Jt})):t.createElement(r.dW,{overlayClassName:"p-add_emoji_dialog_overlay",closeModal:an,isOpen:!0,className:Pt},t.createElement(r.rQ,null,t.createElement(r.Rc,{title:we,className:"no_min_height padding_bottom_50"}),Vn),Ft&&t.createElement(de,{orgName:Fe,onPackClick:(Xe,Ze)=>{let{installed:lt}=Ze;Hn(lt),os(Xe)}}),!Ft&&t.createElement(mn,{orgName:Fe,searchArgs:_t,emojiNameSuggestion:$t,emojiUrl:rn,experimentAddEmojiFiletypesGroupOn:pn}))},"AddEmojiDialog");Ne.displayName="AddEmojiDialog";const ze=Ne},84230:(j,T,e)=>{"use strict";e.d(T,{lw:()=>V,Ay:()=>w});var t=e(328521),n=e.n(t),s=e(296540),a=e(917780),c=e(298559),r=e(528919),o=e(921055),u=e(795669),m=e(881805),i=e(873645),d=e(459296),_=e(190145),h=e(649098),p=e(616884),A=e(128263),v=e(800427),E=e(306276),f=e(975979),g=e(488455),y=e(61629),I=e(682520);function O(){return O=Object.assign||function(Y){for(var Q=1;Q<arguments.length;Q++){var Z=arguments[Q];for(var ee in Z)Object.prototype.hasOwnProperty.call(Z,ee)&&(Y[ee]=Z[ee])}return Y},O.apply(this,arguments)}l(O,"_extends");function M(Y){return class extends s.PureComponent{componentDidCatch(Q,Z){this.setState(()=>({hasError:!0})),(0,I.Wo)().error({label:"Error rendering emoji component",error:Q,message:Z})}render(){return this.state.hasError?s.createElement("span",{"data-qa":"missing_emoji",className:"c-emoji c-emoji__medium c-emoji--inline"},s.createElement("img",{src:n()})):s.createElement(Y,O({},this.props))}constructor(Q){super(Q),this.state={hasError:!1}}}}l(M,"withEmojiErrorBoundary"),M.displayName="withEmojiErrorBoundary";const C=M;var P=e(529351),L=e(627581),x=e(917392);function F(){return F=Object.assign||function(Y){for(var Q=1;Q<arguments.length;Q++){var Z=arguments[Q];for(var ee in Z)Object.prototype.hasOwnProperty.call(Z,ee)&&(Y[ee]=Z[ee])}return Y},F.apply(this,arguments)}l(F,"emoji_extends");const V={SMALL:"small",MEDIUM:"medium",LARGE:"large",LARGER:"larger",XLARGE:"xlarge"},B=l(Y=>{const Q=(0,a.d4)(Z=>{if(!Y.isStandard)return Y.url;var ee;const _e=(ee=Y.sourceTeamId)!==null&&ee!==void 0?ee:(0,m.ZT)(Z);return Y.isStandard?(0,i.Ez)(Z,{text:Y.text||"",teamId:_e,emojiMode:(0,d.w)(Z,{forceDisplay:!!Y.forceDisplay}),emojiSize:V.XLARGE}):Y.url});return s.createElement(D,{shouldFallbackOnLoadError:!0,renderAsText:!1,showTooltip:!1,emojiSize:V.LARGER,text:Y.text,displayText:Y.displayText,url:Q||"",sourceTeamId:Y.sourceTeamId,ariaLabel:Y.ariaLabel,alt:Y.alt,unicode:Y.unicode,emojiNameFromText:Y.emojiNameFromText,dispatch:Y.dispatch,stopAnimations:Y.stopAnimations,fallbackUrl:Y.fallbackUrl,isStandard:Y.isStandard})},"EmojiTooltipEmoji");B.displayName="EmojiTooltipEmoji";let D=l(class extends s.PureComponent{onLoadError(){this.setState(()=>({isLoadError:!0}))}renderIconFallback(){return s.createElement(y.A,{legacy:!0,className:"c-emoji__text_mode_icon",type:"info-circle",align:"top",inherit:!0})}isImportable(){const{isLoadError:Q}=this.state,{isImportAllowed:Z,isStandard:ee}=this.props;return Z&&!ee&&!Q}renderEmojiElement(){const{text:Q,displayText:Z,url:ee,emojiSize:_e,isEmojiInlineWithText:Ee,className:G,shouldFallbackOnLoadError:Ae,fallbackUrl:ce,ariaLabel:de,alt:oe}=this.props,{isLoadError:$}=this.state,re=(0,r.A)("c-emoji",`c-emoji__${_e}`,G,{"c-emoji--inline":Ee}),ue=de??(Z&&(0,A.A)(Z)),te={"data-stringify-type":"emoji","data-stringify-emoji":Q},ae=this.isImportable()?this.handleEmojiImport:void 0;return Ee?s.createElement("span",{className:re,"data-qa":($||!ee)&&Ae?"emoji-fallback":"emoji"},s.createElement("img",F({src:($||!ee)&&Ae?ce:ee,onError:this.onLoadError,onContextMenu:ae,"aria-label":ue,alt:Z},te))):s.createElement("img",F({src:($||!ee)&&Ae?ce:ee,onError:this.onLoadError,"aria-label":ue,alt:oe??Z,className:re,onContextMenu:ae,"data-qa":($||!ee)&&Ae?"emoji-fallback":"emoji"},te))}renderUnicodeAsEmoji(Q){if(Q&&(0,E.d)(Q)){const{emojiSize:Z}=this.props,ee=(0,f.z)({codePointLikeString:Q});return s.createElement("span",{className:(0,r.A)("c-emoji__unicode",{"c-emoji__unicode--large":Z===V.LARGE})},ee)}}renderTooltip(){const{renderAsText:Q,displayText:Z,text:ee,isStandard:_e,url:Ee,unicode:G,sourceTeamId:Ae,ariaLabel:ce,alt:de,emojiNameFromText:oe,stopAnimations:$,fallbackUrl:re,forceDisplay:ue}=this.props;if(Q)return Z;const te=_e?void 0:Ee;return s.createElement(s.Fragment,null,s.createElement("div",{className:"c-emoji__emoji-tooltip"},s.createElement(B,{text:ee,displayText:Z,url:te,sourceTeamId:Ae,ariaLabel:ce,alt:de,unicode:G,emojiNameFromText:oe,dispatch:this.props.dispatch,stopAnimations:$,fallbackUrl:re,isStandard:_e,forceDisplay:ue})),Z,this.isImportable()&&s.createElement(L.K,{emojiName:Z,emojiUrl:Ee}))}render(){const{displayText:Q,url:Z,renderAsText:ee,showTooltip:_e,iconInTextMode:Ee,renderEmojiFallback:G,unicode:Ae,emojiNameFromText:ce}=this.props;if(!Z&&!Q&&!Ae)return null;if((ee||!Z)&&!G&&!Ae)return Ee?this.renderIconFallback():Q;if(Ae&&!ce){var de;return(de=this.renderUnicodeAsEmoji(Ae))!==null&&de!==void 0?de:Q}return _e?s.createElement(g.Ay,{tip:this.renderTooltip,delay:g.PK,zIndex:"above_fs"},this.renderEmojiElement()):this.renderEmojiElement()}constructor(Q){super(Q),this.handleEmojiImport=Z=>{if(Z!=null&&Z.altKey)return;const{url:ee,dispatch:_e,displayText:Ee}=this.props;_e((0,P.a)({emojiName:Ee,emojiUrl:ee,event:Z}))},this.onLoadError=this.onLoadError.bind(this),this.renderTooltip=this.renderTooltip.bind(this),this.state={isLoadError:!1}}},"Emoji");D.displayName="Emoji",D.defaultProps={text:"",showTooltip:!1,className:void 0,stopAnimations:!1,iconInTextMode:!1,url:void 0,emojiSize:V.MEDIUM,isEmojiInlineWithText:!1,isImportAllowed:!1,displayText:"",sourceTeamId:void 0,shouldFallbackOnLoadError:!1,renderEmojiFallback:!1,ariaLabel:void 0,alt:void 0};const S=l((Y,Q)=>{const{stopAnimations:Z,forceDisplay:ee,emojiSize:_e=V.MEDIUM,url:Ee,unicode:G}=Q;let{text:Ae}=Q,ce=(0,i.qJ)(Y,G??"");ce&&ce.charAt(ce.length-1)!==":"&&ce.charAt(0)!==":"&&(ce=`:${ce}:`),Ae=ce||Ae||"";let de=Ee;const oe=(0,m.ZT)(Y)||"",$=!(0,o.ty)(Y,"a11y_animations"),re=Z||$,ue=(0,h.Yp)({teamOrEnterpriseId:oe,recalc:!1}),te=(0,u.bR)({state:Y,locale:ue,name:Ae}),ae=!ee&&(0,_.P)(Y),H=(0,x.A)(Ae),U=(0,v.R)(Y,H);if(!ae&&!de){const W=(0,d.w)(Y,{forceDisplay:!!ee});var N;const J=(N=Q.sourceTeamId)!==null&&N!==void 0?N:oe;de=(0,i.Ez)(Y,{text:Ae,parsedEmoji:H,teamId:J,emojiMode:W,emojiSize:_e===V.LARGER?V.XLARGE:_e})||void 0}if(re&&!U){var K;de=(K=(0,p.Ay)(Y,{url:de,stopAnimations:re,isEmoji:!0}))!==null&&K!==void 0?K:void 0}return{text:Ae,url:de,renderAsText:ae,emojiSize:_e,displayText:te||"",stopAnimations:re,fallbackUrl:n(),isStandard:U,emojiNameFromText:ce}},"mapStateToProps"),R={mapStateToProps:S},w=C((0,c.N)(S)(D))},168776:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>n,lw:()=>t.lw});var t=e(84230);const n=t.Ay},910322:(j,T,e)=>{"use strict";e.d(T,{A:()=>I});var t=e(296540),n=e(298559),s=e(528919),a=e(251999),c=e(973553),r=e(756120),o=e(649098),u=e(927675),m=e(292443),i=e(682520),d=e(786191),_=e(656453),h=e(241697),p=e(416921),A=e(32279),v=e(751353),E=e(226219);const f=new o.Ay("error_boundary"),g="REB";let y=l(class extends t.Component{componentDidUpdate(M){this.state.hasError&&M.id!==this.props.id&&this.resetHasError()}componentDidCatch(M,C){let P=null;try{P=`${g}${(0,a.B)((0,v.A)(M.message)).substr(0,9).toUpperCase()}`}catch{}if(this.setState(()=>({hasError:!0,errCode:P}),()=>{var L,x;return(x=(L=this.props).onError)===null||x===void 0?void 0:x.call(L,M)}),!(0,r.Cu)()){const L=C.componentStack.split(`
`).slice(0,Error.stackTraceLimit).join(`
`);this.props.logger.error("ERROR-BOUNDARY",M,P,L,{subtype:this.props.subtype||"component_error_boundary"})}}onClickReloadButton(M){M.preventDefault();let C=window.location.href;this.props.telemeter.count("react_error_boundary_reload_click"),(0,c.A)()?(C=(0,d.M6)(window.location.href,"force_cold_boot",1),this.props.logger.info("GANTRY",`Reloading at ${C} after hitting ErrorBoundary`),(0,E.Lz)().finally(()=>{window.location.href=C})):(this.props.logger.info("LEGACY",`Reloading at ${C} after hitting ErrorBoundary`),window.location.href=C)}resetHasError(){this.setState(()=>({hasError:!1,errCode:null}))}renderReloadLinkMsg(){const M=l(C=>{let{text:P,key:L}=C;return t.createElement(m.A,{href:`https://${(0,h.qF)()}/help/contact`,rel:"noopener noreferrer",key:L},P)},"renderLink");return this.state.errCode==="REBD7A8C1099"?f.rt("This particular hiccup is something we know about and are working to fix. Please reload and things should be cleared up. If this issue persists, please <a>drop us a line.</a>",{fallbackHash:"e429542887f26442dba7a085bd05bea15803edd9",fallbackHashNs:"error_boundary"},M):f.rt("Reloading Slack might clear things up. If it doesn\u2019t, <a>drop us a line.</a>",null,M)}render(){if(this.state.hasError){if(this.props.telemeter.count("react_error_boundary_rendered"),this.props.renderError)return this.props.renderError({errCode:this.state.errCode});const M=(0,s.A)("p-error_boundary",this.props.className,{"p-error_boundary--short":this.props.variant==="short"});return t.createElement("div",{className:M},t.createElement("div",{className:"p-error_boundary__content"},t.createElement("div",{className:"p-error_boundary__message"},t.createElement("h1",{className:"p-error_boundary__heading"},t.createElement("span",null,f.t("Something went wrong")),t.createElement("span",{className:"p-error_boundary__icon p-error_boundary__icon--turtle",role:"img","aria-label":f.t("Something went wrong")},"\u{1F422}")),t.createElement("p",{className:"p-error_boundary__contact_msg"},this.renderReloadLinkMsg())),this.state.errCode&&t.createElement(A.A,{errCode:this.state.errCode}),t.createElement(u.Ay,{type:"primary",className:"margin_right_50",onClick:this.onClickReloadButton,"data-qa":"error_reload"},f.t("Reload"))))}return this.props.children}constructor(M){super(M),this.state={hasError:!1,errCode:null},this.onClickReloadButton=this.onClickReloadButton.bind(this)}},"ErrorBoundary");y.displayName="ErrorBoundary";const I=(0,n.N)(O=>({logger:(0,p.A)(O)?(0,i.Ay)({state:O}):(0,i.Wo)(),telemeter:(0,p.A)(O)?(0,_.Cy)({state:O}):(0,_.rh)()}))(y)},32279:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(296540),n=e(649098);const s=new n.Ay("error_boundary");function a(c){let{errCode:r}=c;return t.createElement("p",{className:"p-error_boundary__error_code_container"},t.createElement("span",{className:"p-error_boundary__error_code","data-qa":"error_code"},s.t("Error: "),r))}l(a,"ErrorCode")},90242:(j,T,e)=>{"use strict";e.d(T,{H:()=>r,A:()=>o});var t=e(910322),n=e(296540);function s(){return s=Object.assign||function(u){for(var m=1;m<arguments.length;m++){var i=arguments[m];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(u[d]=i[d])}return u},s.apply(this,arguments)}l(s,"_extends");const a=l(()=>null,"renderError"),r=l(u=>n.createElement(t.A,s({renderError:a},u)),"QuietErrorBoundary"),o=t.A},751353:(j,T,e)=>{"use strict";e.d(T,{A:()=>m});const t=/\bA[A-Z0-9]{8,}\b/g,n=/\bB[A-Z0-9]{8,}\b/g,s=/\b(C|G|D)[A-Z0-9]{8,}\b/g,a=/\bF[A-Z0-9]{8,}\b/g,c=/\b(U|W)[A-Z0-9]{8,}\b/g,r=/\b[\d]{10}\.[\d]{6}\b/g,o=/\bS[A-Z0-9]{8,}\b/g,u=/\bT[A-Z0-9]{8,}\b/g;function m(i){return String(i).replace(t,"[APP_ID]").replace(n,"[BOT_ID]").replace(s,"[CHANNEL_ID]").replace(a,"[FILE_ID]").replace(c,"[MEMBER_ID]").replace(r,"[MESSAGE_TS]").replace(o,"[USER_GROUP_ID]").replace(u,"[TEAM_ID]")}l(m,"normalizeError")},454452:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(649098),n=e(673843),s=e(135713);const a=new t.Ay("files");function c(r,o){if(!r.is_external)return null;if((0,s._Z)(o,"file_consistency")==="treatment"){let m="File";switch(r.external_type){case"gdrive":switch(r.filetype){case"gsheet":m=a.t("Google Sheet");break;case"gdoc":m=a.t("Google Doc");break;case"gpres":m=a.t("Google Slide");break;case"gdraw":m=a.t("Google Drawing");break;default:m=a.t("Google {fileType}",{fileType:r.pretty_type})}break;case"dropbox":case"box":case"onedrive":case"app":m=a.t("{fileType}",{fileType:r.pretty_type});break;default:m=a.t("File")}return m}switch(r.external_type){case"gdrive":switch(r.filetype){case"gsheet":return a.t("Spreadsheet from Google Drive");case"gdoc":return a.t("Document from Google Drive");case"gpres":return a.t("Presentation from Google Drive");case"gdraw":return a.t("Drawing from Google Drive");default:return a.t("{fileType} from Google Drive",{fileType:r.pretty_type})}case"dropbox":return a.t("{fileType} from Dropbox",{fileType:r.pretty_type});case"box":return a.t("{fileType} from Box",{fileType:r.pretty_type});case"onedrive":return a.t("{fileType} from OneDrive",{fileType:r.pretty_type});case"app":return a.t("{fileType} from {appName}",{fileType:r.pretty_type,appName:(0,n.Y)(o,r)||""});default:return a.t("File")}}l(c,"getExternalFiletypeDescription")},377:(j,T,e)=>{"use strict";e.d(T,{A:()=>o});var t=e(612104),n=e.n(t),s=e(674217),a=e(999635),c=e(428527);const r=(0,s.Ay)("Opens a member profile in a tile",function(){var u=(0,t.coroutine)(function*(m,i,d){(0,c.wC)(i(),d)&&m((0,a.s)({viewId:"rimeto_profile",params:{memberId:d}}))});return function(m,i,d){return u.apply(this,arguments)}}());r.meta={name:"createThunk",key:"createThunkopenProfileInWindow",description:"Opens a member profile in a tile"};const o=r},253782:(j,T,e)=>{"use strict";e.d(T,{A:()=>t});function t(n){return!!(n&&n!=="-")}l(t,"isValidFieldValue")},133426:(j,T,e)=>{"use strict";e.d(T,{A:()=>o});var t=e(296540),n=e(310901),s=e(994730),a=e(168776),c=e(157903);function r(u){let{text:m="",inputIsEscaped:i=!1,emojiSize:d=a.lw.SMALL,showTooltips:_=!0,stopAnimations:h=!1,emojiDisplayInfo:p={}}=u;const A=[];let v=0;const E=i?(0,n.A)(m??""):m??"";if(E.replace((0,s.A)(),(f,g,y)=>{if(y>v){const M=E.slice(v,y);A.push(t.createElement(t.Fragment,{key:`${y}-${M}`},M))}const{name:I=f,url:O=void 0}=(0,c.H)(f,p);return A.push(t.createElement(a.Ay,{text:I,emojiSize:d,key:`${y}-${I}`,showTooltip:_,stopAnimations:h,isEmojiInlineWithText:!0,url:O})),v=y+f.length,""}),!A.length)return t.createElement(t.Fragment,null,E);if(v<E.length){const f=E.substr(v);A.push(t.createElement(t.Fragment,{key:`last-${f}`},f))}return t.createElement(t.Fragment,null,A)}l(r,"FormatTextWithEmoji"),r.displayName="FormatTextWithEmoji";const o=t.memo(r)},476802:(j,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(296540),n=e(310901),s=e(133426);const a=/\ue000([^\ue001]*)\ue001/g;function c(o){let{text:u="",inputIsEscaped:m=!1,showTooltips:i=!0,stopAnimations:d=!1}=o;const _=[];let h=0;const p=m?(0,n.A)(u??""):u??"";if(p.replace(a,(A,v,E)=>{if(E>h){const f=p.slice(h,E);_.push(t.createElement(s.A,{key:`${E}-${f}`,text:f,showTooltips:i,inputIsEscaped:m,stopAnimations:d}))}_.push(t.createElement("span",{className:"c-mrkdwn__highlight",key:`${E}-${v}`},t.createElement(s.A,{text:v,showTooltips:i,inputIsEscaped:m,stopAnimations:d}))),h=E+A.length}),!_.length&&u)return t.createElement(t.Fragment,null,t.createElement(s.A,{text:u,showTooltips:i,inputIsEscaped:m,stopAnimations:d}));if(u&&h<u.length){const A=p.substr(h);_.push(t.createElement(s.A,{key:`last-${A}`,text:A,showTooltips:i,inputIsEscaped:m,stopAnimations:d}))}return t.createElement(t.Fragment,null,_)}l(c,"FormatTextWithHighlightMarkers"),c.displayName="FormatTextWithHighlightMarkers";const r=t.memo(c)},850108:(j,T,e)=>{"use strict";e.d(T,{A:()=>n});var t=e(173874);const n=t.A},852225:(j,T,e)=>{"use strict";e.d(T,{A:()=>_,U:()=>p});var t=e(442157),n=e(999751),s=e(682520),a=e(446632);const c=l(A=>{const{functionTriggerId:v,workflowId:E,title:f,description:g,isWorkflowApp:y,salesHomeWorkflowAppType:I,owningTeamId:O,developerTraceId:M,botUserId:C,appCollaborators:P,appId:L,shareUrl:x}=(0,n.t)(A);return{triggerId:v,workflowId:E,title:f,description:g,isWorkflowApp:y,salesHomeWorkflowAppType:I,owningTeamId:O,developerTraceId:M,botUserId:C,appCollaborators:P,appId:L,shareUrl:x}},"getCommonMetadataFromBlock"),r=l(A=>A.url?{...c(A),triggerType:t.M.Shortcut,url:A.url}:{...c(A),triggerType:t.M.Shortcut,url:""},"createLinkShortcutFromBlock"),o=l(A=>({...c(A),triggerType:t.M.Webhook}),"createWebhookShortcutFromBlock"),u=l(A=>({...c(A),triggerType:t.M.External}),"createExternalShortcutFromBlock"),m=l(A=>{const{triggerSubtype:v}=A,E={eventType:v||""};return{...c(A),triggerType:t.M.Event,event:E}},"createEventShortcutFromBlock"),i=l(A=>c(A),"createUnknownShortcutFromBlock"),d=l(A=>{const v={startTime:""};return{...c(A),triggerType:t.M.Scheduled,schedule:v}},"createScheduledShortcutFromBlock"),_=l(A=>{switch(A.triggerType){case t.M.Event:return m(A);case t.M.Scheduled:return d(A);case t.M.Shortcut:return r(A);case t.M.Webhook:return o(A);case t.M.External:return u(A);case void 0:return r(A);default:return i(A)}},"createShortcutFromBlock"),h=l(A=>{try{return JSON.stringify(A)}catch(v){throw(0,s.Wo)().error("stringify failed for workflow/trigger obj shortcut info"),v}},"memoizeCacheKeyResolver"),p=(0,a.A)(_,h)},926492:(j,T,e)=>{"use strict";e.d(T,{V:()=>v,j:()=>p});var t=e(446632),n=e(172552),s=e(442157),a=e(999751),c=e(682520),r=e(726204);const o=l((E,f,g)=>{var y,I,O,M;return{triggerId:(E==null?void 0:E.id)||"",workflowId:(E==null?void 0:E.workflow.workflow_id)||(f==null?void 0:f.id),isWorkflowPublished:(E==null||(y=E.workflow_details)===null||y===void 0?void 0:y.is_published)||(f==null?void 0:f.is_published),appId:(E==null?void 0:E.workflow.app_id)||((I=E==null?void 0:E.workflow.app)===null||I===void 0?void 0:I.id),app:E==null?void 0:E.workflow.app,inputs:E==null?void 0:E.inputs,owningTeamId:E==null?void 0:E.owning_team_id,isWorkflowApp:(O=E==null?void 0:E.workflow.app)===null||O===void 0?void 0:O.is_workflow_app,salesHomeWorkflowAppType:(M=E==null?void 0:E.workflow.app)===null||M===void 0?void 0:M.sales_home_workflow_app_type,title:(E==null?void 0:E.name)||(E==null?void 0:E.workflow.title)||(f==null?void 0:f.title)||(g==null?void 0:g.title),description:(E==null?void 0:E.description)||(E==null?void 0:E.workflow.description)||(f==null?void 0:f.description)||(g==null?void 0:g.description),appCollaborators:(f==null?void 0:f.collaborators)||(g==null?void 0:g.appCollaborators),shareUrl:(E==null?void 0:E.share_url)||(g==null?void 0:g.shareUrl)}},"getCommonMetadataFromTriggerAndWorkflow"),u=l((E,f,g)=>({...o(E,f,g),triggerType:s.M.Shortcut,url:E.shortcut_url}),"createLinkShortcut"),m=l((E,f,g)=>({...o(E,f,g),triggerType:s.M.Webhook}),"createWebhookShortcut"),i=l((E,f,g)=>({...o(E,f,g),triggerType:s.M.External}),"createExternalShortcut"),d=l((E,f,g)=>{const{eventType:y,channelIds:I,teamIds:O,filter:M}=(0,a.t)(E),C={eventType:y,channelIds:I,teamIds:O,filter:M};return{...o(E,f,g),triggerType:s.M.Event,event:C}},"createEventShortcut"),_=l((E,f,g)=>{const y=(0,a.t)(E.schedule);return{...o(E,f,g),triggerType:s.M.Scheduled,schedule:y}},"createScheduledShortcut"),h=l((E,f,g)=>o(E,f,g),"createUnknownShortcut"),p=l(E=>{let{passedShortcutInfo:f,trigger:g,workflow:y}=E;return(0,r.G)(g)?(0,n.BI)(g)?u(g,y,f):(0,n.QW)(g)?d(g,y,f):(0,n.uS)(g)?_(g,y,f):(0,n.A4)(g)?i(g,y,f):(0,n.cS)(g)?m(g,y,f):h(g,y,f):h(void 0,y,f)},"createShortcutFromTriggerAndWorkflow"),A=l(E=>{try{return JSON.stringify(E)}catch(f){throw(0,c.Wo)().error("stringify failed for workflow/trigger obj shortcut info"),f}},"memoizeCacheKeyResolver"),v=(0,t.A)(p,A)},10709:(j,T,e)=>{"use strict";e.d(T,{i:()=>P});var t=e(296540),n=e(245915),s=e(528919),a=e(42302),c=e(820709),r=e(917780),o=e(881805),u=e(448368),m=e(449552),i=e(47801),d=e(177242),_=e(488455),h=e(204258),p=e(85509),A=e(741323),v=e(616125),E=e(990096);const f=t.memo(L=>{let{id:x}=L;return t.createElement("svg",{className:"sr-only"},t.createElement("clipPath",{id:x,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M0.03,1 h0.742 a0.258,0.2,0,0,0,0.258,-0.2 V0.2 a0.258,0.2,0,0,0,-0.258,-0.2 H0.03 a0.385,0.299,0,0,1,0.098,0.2 v0.6 A0.385,0.299,0,0,1,0.03,1"})))});var g=e(396386),y=e(885850);function I(){return I=Object.assign||function(L){for(var x=1;x<arguments.length;x++){var F=arguments[x];for(var V in F)Object.prototype.hasOwnProperty.call(F,V)&&(L[V]=F[V])}return L},I.apply(this,arguments)}l(I,"_extends");const O=2;function M(L){let{channelId:x,withTooltip:F,className:V,excludeIcon:B,excludeMemberOverflowCount:D,maxMembers:S=O,avatarSize:R=d.RG.verySmall,includeChannelNameInTooltip:w=!1,excludeSelf:Y=!1}=L;const Q=(0,t.useMemo)(()=>`huddles-mask-${(0,c.r9)()}`,[]),Z=(0,t.useMemo)(()=>({"--huddles-mask":`url(#${Q})`,"--huddles-avatar-size":`${R}px`}),[Q,R]),ee=(0,r.d4)(U=>(0,i.pt)(U)||(0,p.s)(U)),_e=(0,r.d4)(U=>(0,y.OL)(U,x)),Ee=(0,u.cw)(h.hc),G=(0,u.cw)(h.vO),ce=Ee===x&&(0,i.pZ)(G),de=(0,r.Z2)(U=>(0,A.A7)(U,x,Y)),oe=de.length,$=oe>S,re=$?oe-2:0,ue=$?de.slice(0,S):de,te=(0,t.useMemo)(()=>t.createElement(E.A,{channelId:x,includeChannelName:w&&!(0,g.PC)(_e)}),[x,w,_e]);if(!ee||!oe)return null;const ae=t.createElement("div",{className:(0,s.A)("p-huddle_avatar_stack",V),"data-qa":"huddle_avatar_stack__avatars_container",style:Z},t.createElement(f,{id:Q}),!B&&t.createElement("div",{className:"p-huddle_avatar_stack__icon_container"},t.createElement(v.A,{name:"headphones",size:"18"})),ue.map((U,N)=>t.createElement(d.Ay,{key:U,"data-qa":"huddle_avatar_stack__member",className:(0,s.A)("p-huddle_avatar_stack__avatar",{"p-huddle_avatar_stack__avatar--first":N===0}),userId:U,size:R,renderCustomBadge:a.A,isInteractive:!1})),!D&&$&&t.createElement("div",{className:"p-huddle_avatar_stack__plus-member-count","data-qa":"huddle_avatar_stack__plus_member_count"},`+${re}`)),H=F?t.createElement(_.Ay,{tip:te},ae):ae;return ce?null:H}l(M,"HuddleAvatarStackContent"),M.displayName="HuddleAvatarStackContent";const C=t.memo(M),P=t.memo(L=>{const{channelId:x}=L,F=(0,r.d4)(S=>(0,A.LY)(S,x)),V=(0,u.cw)(h.l4),B=(0,u.cw)(h.hc),D=(0,r.d4)(o.ZT);if(!F)return null;if(B===x){const S=(0,m.getStoreInstanceByTeamId)(V||D);return t.createElement(n.Kq,{store:S},t.createElement(C,I({},L)))}return t.createElement(C,I({},L))})},463031:(j,T,e)=>{"use strict";e.d(T,{A:()=>Q,g:()=>w});var t=e(296540),n=e(649098),s=e(235041),a=e.n(s),c=e(571222),r=e.n(c),o=e(890798),u=e.n(o),m=e(260321),i=e.n(m),d=e(204799),_=e.n(d),h=e(6984),p=e.n(h),A=e(327800),v=e.n(A),E=e(750781),f=e.n(E),g=e(318074),y=e.n(g),I=e(290856),O=e.n(I),M=e(754175),C=e.n(M),P=e(643278),L=e.n(P),x=e(739009),F=e.n(x),V=e(842991),B=e.n(V),D=e(721848),S=e.n(D);const R=new n.Ay("huddles"),w=[{key:"NONE",preview:v()},{key:"BLUR",preview:v()},{key:"LIVING_ROOM",url:B(),preview:S()},{key:"REMOTE_WORK",url:L(),preview:F()},{key:"TOKYO_SIGHT",url:O(),preview:C()},{key:"GYM",url:f(),preview:y()},{key:"HOME",url:_(),preview:p()},{key:"OFFICE",url:u(),preview:i()},{key:"BEACH",url:a(),preview:r()}],Q=l(()=>(0,t.useMemo)(()=>w.map(ee=>{let _e,Ee;switch(ee.key){case"NONE":_e=R.t("No Background",{fallbackHash:"e47fc484f6e2f4bb4d93eff83f6dd16ed8da67a6",fallbackHashNs:"canvas"});break;case"BLUR":_e=R.t("Blur",{fallbackHash:"900aa998d3550d438fc20a414d3938fc3a1630ab",fallbackHashNs:"canvas"});break;case"LIVING_ROOM":_e=R.t("Living Room",{fallbackHash:"c7b60f3edf3318e80575d5e28c1ce24aa99a9025",fallbackHashNs:"canvas"}),Ee=R.t("Art by Haley Tippmann",{fallbackHash:"e81e1f67d7c01d9dd464871bece52a2c87443190",fallbackHashNs:"canvas"});break;case"REMOTE_WORK":_e=R.t("Remote Work",{fallbackHash:"42a38f6c51f22fed5086c12e2e747c90b17a2201",fallbackHashNs:"canvas"}),Ee=R.t("Art by Hudson Christie",{fallbackHash:"4f5fdc61766b987aced4c5fc5854a0401f8e44ea",fallbackHashNs:"canvas"});break;case"TOKYO_SIGHT":_e=R.t("Tokyo Sight",{fallbackHash:"eccff2285de126d6179c36b1fbc60c06b039a6e0",fallbackHashNs:"canvas"}),Ee=R.t("Art by Luis Mendo",{fallbackHash:"4c1b393549c87100c23c7fe3e258fb7380736dfa",fallbackHashNs:"canvas"});break;case"GYM":_e=R.t("Gym",{fallbackHash:"bc4359231d615dc65e372bac1bb5e0f2bf37639f",fallbackHashNs:"canvas"}),Ee=R.t("Art by Hudson Christie",{fallbackHash:"4f5fdc61766b987aced4c5fc5854a0401f8e44ea",fallbackHashNs:"canvas"});break;case"HOME":_e=R.t("Home",{fallbackHash:"70f8bb9a8a5393ef080507a89e4b98d139000d65",fallbackHashNs:"canvas"});break;case"OFFICE":_e=R.t("Office",{fallbackHash:"6c3a72eaf6235dfa967f2bba4dfc3e431c3e1180",fallbackHashNs:"canvas"});break;case"BEACH":_e=R.t("Beach",{fallbackHash:"911fbb65335023a0800e5bf4a2dcc3ff13b2f9e3",fallbackHashNs:"canvas"});break;default:_e="NO_NAME",Ee="NO_DESCRIPTION"}return{...ee,name:_e,description:Ee}}),[]),"useGetVideoBackgrounds")},812754:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>d,Hi:()=>m,uV:()=>i});var t=e(296540),n=e(463329),s=e(917780),a=e(448368),c=e(134309),r=e(458380),o=e(204258),u=e(47801),m;(function(_){_.CANVAS_OPEN="canvas_open",_.CANVAS_JOIN="canvas_join",_.CANVAS_LEAVE="canvas_leave",_.CANVAS_TOOLBAR="canvas_toolbar",_.EMOJI_PICKER_OPEN="emoji_picker_open",_.EMOJI_SENT="emoji_sent",_.LINK_OPEN="link_open",_.FOCUS_OPEN="focus_open",_.FOCUS_CLOSE="focus_close",_.MINI_PLAYER_THREAD_BUTTON="mini_player_thread_button",_.MINI_PLAYER_OPEN_WINDOW_BUTTON="mini_player_open_window_button",_.MINI_PLAYER_VIEW_START="mini_player_view_start",_.MINI_PLAYER_VIEW_END="mini_player_view_end",_.SCREENSHARE_START="screenshare_start",_.SCREENSHARE_END="screenshare_end",_.THREAD_FLEXPANE_VIEW_START="thread_flexpane_view_start",_.THREAD_FLEXPANE_VIEW_END="thread_flexpane_view_end",_.THREAD_WINDOW_VIEW_START="thread_window_view_start",_.THREAD_WINDOW_VIEW_END="thread_window_view_end",_.THREAD_OPEN="thread_open",_.THREAD_CLOSE="thread_close",_.SELF_VIDEO="self_video",_.WINDOW_COMPACT_VIEW_START="window_compact_view_start",_.WINDOW_COMPACT_VIEW_END="window_compact_view_end",_.WINDOW_FULL_VIEW_START="window_full_view_start",_.WINDOW_FULL_VIEW_END="window_full_view_end",_.WINDOW_RESIZE_BUTTON="window_resize_button",_.BACKGROUND_CHANGED="background_changed",_.JUKEBOX_SONG_SELECTED="huddles_jukebox_song_selected",_.JUKEBOX_STOP_MUSIC="huddles_jukebox_stop_music",_.CAPTIONS_START="huddles_captions_start",_.CAPTIONS_STOP="huddles_captions_stop",_.INVITATION_SENT="invitation_sent",_.MUSIC_PLAYER_STARTED="huddles_music_player_start_music",_.MUSIC_PLAYER_SONG_SELECTED="huddles_music_player_song_selected",_.MUSIC_PLAYER_STOP="huddles_music_player_stop_music",_.NOTES_OPEN="notes_open",_.NOTES_CLOSE="notes_close",_.CHANNEL_SPACE_OPEN="channel_space_open",_.CHANNEL_SPACE_CLOSE="channel_space_close",_.CHANNEL_SPACE_AUTO_OPEN="channel_space_auto_open"})(m||(m={}));var i;(function(_){_.HUDDLE_MINI_PLAYER_BADGE_ICON="huddle_mini_player_badge_icon",_.HUDDLE_MINI_PLAYER_SCREENSHARE="huddle_mini_player_screenshare",_.HUDDLE_MINI_PLAYER_PEER_TILES="huddle_mini_player_peer_tiles",_.HUDDLE_MINI_PLAYER_OVERFLOW_BUTTON="huddle_mini_player_overflow_button",_.HUDDLE_MINI_PLAYER_OPEN_WINDOW_BUTTON="huddle_mini_player_open_window_button",_.HUDDLE_MINI_PLAYER_THREAD_BUTTON="huddle_mini_player_thread_button",_.CANVAS_WINDOW="canvas_window",_.LEAVE_CALL="leave_call",_.CLOSE_MODAL="close_modal",_.EMOJI_PICKER="emoji_picker",_.JUKEBOX_MENU="jukebox_menu",_.JUKEBOX_MUSIC_BANNER="jukebox_menu_banner",_.REACTION_BUBBLE="reaction_bubble",_.CHANGE_BACKGROUND_DIALOG="change_background_dialog",_.CONNECT_WITH_HUDDLES_CANVAS_EDUCATION="connect_with_huddles_canvas_education",_.HUDDLE_MINI_PLAYER_MUSIC_PLAYER="huddle_music_player",_.HUDDLE_WINDOW_MUSIC_PLAYER="huddle_window_music_player"})(i||(i={}));function d(){const _=(0,a.cw)(o.E9),h=(0,s.Z2)(g=>(0,u.$t)(g,{huddleId:_})),p=(0,a.cw)(u.kn,n.bN),A=(0,a.cw)(u.UE,n.bN),v=(0,s.d4)(g=>(0,c.Ec)(g,{huddleId:_})),E=(0,s.d4)(r.Tk);return(0,t.useMemo)(()=>({canvasThreadChannelId:h.canvas_thread_channel_id,canvasThreadId:h.canvas_thread_id,canvasHuddleSessionId:p.canvas_huddle_session_id,callsRoomId:A.room_id,callsChannelId:A.channel_id,uiPage:v?v.toString():null,fileId:E}),[h.canvas_thread_channel_id,h.canvas_thread_id,p.canvas_huddle_session_id,A.room_id,A.channel_id,v,E])}l(d,"useHuddleClogContext")},709349:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(296540),n=e(199291);function s(c){let{slackId:r,displayName:o}=c;return!r&&!o?null:r?t.createElement(n.A,{isBold:!1,id:r}):t.createElement("span",null,o)}l(s,"HuddleMsgTextUser"),s.displayName="HuddleMsgTextUser";const a=s},798640:(j,T,e)=>{"use strict";e.d(T,{LD:()=>a,O9:()=>c,Qs:()=>n,cg:()=>o,hX:()=>s});var t=e(211700);const n=450,s=450,a=25,c=500;let r;const o=l(()=>r||[s,n,a,c],"getHuddleCameraQualityConstants");(0,t.ul)("huddlesVideoConstants",{resetCameraQualityToDefaults:()=>{r=void 0},overrideCameraQuality:function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:c;r=[u,m,i,d]},maxOutCameraQuality:()=>{r=[1280,720,30,2500]}})},167094:(j,T,e)=>{"use strict";e.d(T,{$s:()=>Ae,Bq:()=>M,CY:()=>C,Cu:()=>Ee,K7:()=>g,Nh:()=>_,OC:()=>p,Pg:()=>_e,Qp:()=>L,Rv:()=>G,VD:()=>r,W_:()=>h,XG:()=>de,aN:()=>E,aW:()=>a,bQ:()=>V,bW:()=>c,bv:()=>P,cJ:()=>R,cP:()=>A,ck:()=>d,dP:()=>m,dk:()=>i,iE:()=>o,ir:()=>I,ne:()=>B,pz:()=>f,qK:()=>u,qb:()=>v,qr:()=>s,sQ:()=>O,xA:()=>x,xN:()=>D,xl:()=>F,xx:()=>S,yL:()=>ce});var t=e(649098);const n=new t.Ay("huddles"),s="huddle_start_mark",a="huddle_rooms_join_start_mark",c="huddle_rooms_join_end_mark",r="huddle_render_player_tti",o="huddle_time_rooms_join",u="huddle_time_audio_session_started",m="huddle_time_first_presence_received",i="huddle_time_chime_session_started_connecting",d="huddle_time_chime_session_started",_="huddle_time_audio_video_observer_start",h="huddle_time_meeting_session_initialized",p="huddle_time_you_joined_sound",A="huddle_time_free_willy_sdk_init",v="huddle_time_voice_focus_loaded",E="huddle_time_voice_focus_start_loading",f="huddle_time_voice_focus_loading_time",g="huddle_quick_join",y="huddle_quick_join_failure",I="huddle_quick_join_credentials_received",O="huddle_quick_join_credentials_cleared",M="huddle_chime_credentials_received_mark",C="huddle_chime_sdk_bootstrap_time",P="huddle_chime_voice_focus_init_time",L=150,x="connect_to_media_service",F="fetch_credentials",V="huddles:time_to_interactive",B="huddles_metrics",D="reconnect_count",S="reconnect_count:success",R="reconnect_count:failure",w="start_attempt",Y="huddles:start_attempt",Q="start_huddle",Z="huddles:no_audio_input",ee="no_audio_input",_e="A01",Ee="prog_disc_huddles_explainer_tip_text",G=l(oe=>{let{experimentHuddlesLoungeMusicPlayerGroupOn:$}=oe;return[{label:$?n.t("Right when I join"):"",value:1,key:"when_joining"},{label:$?n.t("After 30 seconds"):"",value:30,key:"after_30_secs"},{label:$?n.t("After 1 minute"):"",value:60,key:"after_1_min"}]},"getMusicTimeoutPickerOptions"),Ae=50,ce=250,de=50},406176:(j,T,e)=>{"use strict";e.d(T,{Mz:()=>s,VW:()=>n,_q:()=>t});const t="huddles_play_music_when_last",n="huddles_play_music_timeout",s="huddles_music_player_song_key"},606527:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(296540),n=e(133426),s=e(168776);const a=l(r=>{let{text:o,emojiSize:u=s.lw.SMALL}=r;return t.createElement(t.Fragment,null,t.createElement(n.A,{text:o,emojiSize:u}))},"FormattedHuddleTopic");a.displayName="FormattedHuddleTopic";const c=a},103608:(j,T,e)=>{"use strict";e.d(T,{A:()=>c,H:()=>a});var t=e(296540),n=e(917780),s=e(47801),a;(function(r){r.HUDDLES_SCHEDULED_ADD="huddles_scheduled_add",r.HUDDLES_SCHEDULED_NUX="huddles_scheduled_nux",r.HUDDLES_SCHEDULED_CANCEL="huddles_scheduled_cancel"})(a||(a={}));function c(r){const o=(0,n.Z2)(u=>r?(0,s.w1)(u,r):{});return(0,t.useMemo)(()=>({callsChannelId:o.channel_id,callsChannelType:o.channel_type,callsNumParticipants:o.num_participants,callsRoomId:o.room_id}),[o.channel_id,o.channel_type,o.num_participants,o.room_id])}l(c,"useHuddlesClogContext")},727201:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(296540),n=e(245915),s=e(574022);const a=l(r=>{let{store:o,children:u}=r;const m=(0,t.useMemo)(()=>({...o,subscribe:i=>o.subscribeImmediate((0,s.A)(i,16))}),[o]);return t.createElement(n.Kq,{store:m}," ",u," ")},"BackgroundableProvider");a.displayName="BackgroundableProvider";const c=a},990096:(j,T,e)=>{"use strict";e.d(T,{A:()=>y,z:()=>g});var t=e(296540),n=e(917780),s=e(578089),a=e(741323),c=e(85509),r=e(868842),o=e(113574),u=e(177242),m=e(606527),i=e(47801),d=e(246634),_=e(123175),h=e(649098),p=e(885850),A=e(710596);const v=new h.Ay("huddles"),E=5,f=8,g=l(I=>{let{channelId:O}=I;const M=(0,n.Z2)(x=>(0,a.A7)(x,O,!1)),C=M.length,P=C>E,L=P?M.slice(0,E):M;return C===0?null:t.createElement("div",{className:"p-huddle_channel_tooltip__avatar_stack"},L.map((x,F)=>{const V=F===L.length-1;return t.createElement("div",{key:x,className:"p-huddle_channel_tooltip__avatar_container",style:{width:V?"auto":u.RG.medium-f}},t.createElement(u.Ay,{className:"p-huddle_channel_tooltip__avatar",userId:x,size:u.RG.medium,renderCustomBadge:s.Q,isInteractive:!1,additionalOverlay:P&&V?C-L.length+1:void 0}))}))},"HuddleTooltipAvatarStack");g.displayName="HuddleTooltipAvatarStack";function y(I){let{channelId:O,includeChannelName:M=!1}=I;const C=(0,n.d4)(Z=>(0,p.OL)(Z,O)),P=(0,n.d4)(Z=>(0,i.Bn)(Z,C)||(0,c.s)(Z)),L=(0,n.d4)(o.WR),x=(0,n.Z2)(Z=>(0,a.ft)(Z,O)),F=(0,n.d4)(i.df),V=(0,A.Mn)(C),B=x.length,S=B>E?x.slice(0,E):x,R=(0,n.Z2)(Z=>S.map(ee=>({id:ee.id,name:ee.id===L?v.t("you",{fallbackHash:"8af56de68279cb6f5ed022f31af18b9fcdcc2e92",fallbackHashNs:"a11y"}):(0,d.sE)(Z,ee)})).sort((ee,_e)=>ee.id===L?1:_e.id===L?-1:(0,_.Ay)(ee.name,_e.name)).map(ee=>{let{name:_e}=ee;return _e})),w=(0,n.d4)(Z=>(0,r.o)(Z,O)),Y=(0,t.useMemo)(()=>M?R.length===1?x[0].id===L?v.rt("Just you in the huddle #{channelName}",{fallbackHash:"9c06151657f5f165820e8137ffe359a9f128d6a4",channelName:V}):v.rt("{name} is in the huddle #{channelName}",{name:R[0],fallbackHash:"296abf823386caa202e6d84323121c5454a50ff0",channelName:V}):v.rt("{memberCount} people in the huddle #{channelName}",{memberCount:B,fallbackHash:"d8a4c5ef1bc88840241821fced733296db51cc36",channelName:V}):R.length===1?x[0].id===L?v.rt("Just you in the huddle"):v.rt("{name} is in the huddle",{name:R[0]}):v.rt("{memberCount} people in the huddle",{memberCount:B}),[M,R,B,V,x,L]);let Q;return Q=w?t.createElement(m.A,{text:w}):null,x.length>=F&&(Q=v.t("Only {maxParticipants} people can join a huddle",{maxParticipants:F})),P?t.createElement("div",{className:"p-huddle_channel_tooltip"},t.createElement(g,{channelId:O}),t.createElement("div",{className:"margin_bottom_25","data-qa":"tooltip_action_text"},Q),t.createElement("div",{className:"c-tooltip__subtitle","data-qa":"tooltip_member_text"},Y)):null}l(y,"HuddleChannelTooltip")},708878:(j,T,e)=>{"use strict";e.d(T,{A:()=>m,g:()=>u});var t=e(296540),n=e(463329),s=e(883646),a=e(3704),c=e(90242),r=e(533456);const o=(0,r.tZ)("HUDDLE-ERROR");var u;(function(i){i.Huddles="huddles",i.Sidebar="huddles_pro_max-sidebar",i.Flexpane="huddles_pro_max-flexpane",i.CompactWindow="huddles_pro_max-compact_window",i.LargeWindow="huddles_pro_max-large_window",i.WindowFooter="huddles_pro_max-window_footer",i.AlertBanner="huddles_pro_max-alert_banner",i.InviteWindow="huddles_invite_window",i.ControlStripButton="huddles_control_strip_button",i.ChannelHeader="huddles_channel_header",i.Composer="huddles_composer",i.HuddleSpecialReactions="huddle_special_reactions"})(u||(u={}));function m(i){let{children:d,onError:_,isQuiet:h=!0,shouldStopHuddle:p=!1,subtype:A=u.Huddles}=i;const v=(0,n.wA)(),E=(0,t.useCallback)(()=>{p&&v((0,s.A)({terminalState:a.M6.ClientUIError}))},[v,p]),f=(0,t.useCallback)(y=>{o.error(`${A} ${y}`),_?_():E()},[E,_,A]),g=h?c.H:c.A;return t.createElement(g,{subtype:A,onError:f},d)}l(m,"HuddleErrorBoundary")},189681:(j,T,e)=>{"use strict";e.d(T,{A:()=>M});var t=e(296540),n=e(463329),s=e(519543),a=e(917780),c=e(30029),r=e(292443),o=e(47801),u=e(3704),m=e(649098),i=e(911764),d=e(885850),_=e(710596),h=e(831730),p=e(204258),A=e(780076),v=e(439642),E=e(448368),f=e(282233);const g=new m.Ay("huddles");function y(C){let{errorCode:P,isJoinError:L,closeModal:x}=C;var F;const V=(0,n.wA)(),B=(F=(0,E.cw)(p.Qn))===null||F===void 0?void 0:F.channelId,D=(0,a.d4)(f.TM),S=(0,a.d4)(f.Bd),R=(0,a.d4)(de=>(0,d.OL)(de,B)),w=(0,a.d4)(de=>(0,A.uz)(R)?(0,_.SB)(de,R,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}):void 0),Y=(0,a.d4)(o.df),Q=g.rt("This huddle already has {maxAmount} people, which is the maximum allowed.",{maxAmount:Y}),Z=(0,t.useCallback)(()=>{V((0,h.RX)())},[V]),ee=(0,t.useCallback)(()=>{V((0,h.e$)())},[V]),_e=(0,v.V)(R);if(!(0,a.d4)(o.pl)&&!D)return null;if(P===u.M6.FreemiumMaxParticipants)return Z(),null;const G=(()=>{switch(P){case u.M6.MaxParticipants:return Q;case u.M6.AudioJoinedFromAnotherDevice:return g.rt("To keep things nice and neat, you\u2019re no longer in the huddle here.");case u.M6.ChimeMeetingEnded:return L?g.rt("The Huddle has ended."):_e?g.rt("We ended the huddle since you were the only one there for a bit."):g.rt("We ended your huddle since you were the only one there for a bit.");case u.M6.PermissionDenied:return D?g.rt("You are unable to join the Huddle as you do not have permission to join Huddles."):null;case s.uZ.CallEnded:return g.rt("The Huddle has ended.");case u.M6.DeviceLocked:return g.rt("When your computer locks, you automatically leave any huddle you\u2019re in. You can change this in <a>Preferences</a>.",null,de=>{let{text:oe,tag:$}=de;return $==="a"?t.createElement(r.A,{onClick:ee},oe):null});case u.M6.FailedStartingRecording:return S?g.rt("This is likely due to an external member being present."):t.createElement(t.Fragment,null,"This is likely due to an external member being present.");default:return g.rt("You\u2019ll have to go back and give it another try.")}})(),Ae=(()=>L?g.t("Can\u2019t join the huddle"):P===u.M6.AudioJoinedFromAnotherDevice?g.t("You\u2019ve joined the huddle on a different device"):P===u.M6.ChimeMeetingEnded&&!L?_e?g.t("You\u2019re no longer in a huddle in #{channelDisplayName}",{channelDisplayName:w}):g.t("You\u2019re no longer in a huddle"):P===u.M6.DeviceLocked?g.t("You\u2019re no longer in a huddle"):P===u.M6.FailedStartingRecording?S?g.rt("Failed to start recording."):t.createElement(t.Fragment,null,"Failed to start recording."):g.t("Something went wrong with your huddle"))(),ce=(()=>P===u.M6.AudioInputStreamEnded||P===u.M6.MaxParticipants||P===u.M6.ChimeMeetingEnded&&!L?g.t("Got It"):g.t("OK"))();return t.createElement(c.A,{overlayClassName:"p-huddle_error_modal__overlay",onClose:x,onSubmit:x,showCancelButton:!1,showSubmitButton:!0,title:Ae,submitButtonText:ce},G)}l(y,"HuddleErrorModal"),y.displayName="HuddleErrorModal";const I={HuddleErrorModal:y},O="huddle_error_modal",M=(0,i.A)(y,{modalName:O,allowMultiple:!1,isStackable:!0})},304510:(j,T,e)=>{"use strict";e.d(T,{Wx:()=>w,YM:()=>V});var t=e(877500),n=e(296540),s=e(463329),a=e(649098),c=e(917780),r=e(30029),o=e(911764),u=e(396386),m=e(885850),i=e(324331),d=e(566254),_=e(900859),h=e.n(_),p=e(435932),A=e(129318),v=e(934861),E=e(355689),f=e(532395),g=e(238798),y=e(89207),I=e(787781),O=e(89286),M=e(269806),C=e(418698);function P(){return P=Object.assign||function(Y){for(var Q=1;Q<arguments.length;Q++){var Z=arguments[Q];for(var ee in Z)Object.prototype.hasOwnProperty.call(Z,ee)&&(Y[ee]=Z[ee])}return Y},P.apply(this,arguments)}l(P,"_extends");const L=new a.Ay("huddles"),x={elementName:"cancel",onClick:{enableClogAction:!0}},F={elementName:"start-huddle",onClick:{enableClogAction:!0}},V=l(Y=>{let{channelId:Q,channelType:Z,channelMembersCount:ee,isTeamOnTrial:_e,isFreeTeam:Ee,trialExpirationTS:G,handleOnSubmit:Ae,closeModal:ce,UNSAFE_parentSelector:de,isCurrentTeamSponsoredInSlackConnectChannel:oe=!1}=Y;const $=L.t("Continue this conversation in a huddle",{fallbackHash:"e5dda045c4edc7e85d1a347f7051533c494e1904"}),re=n.createElement(i.A,{channelId:Q});let ue,te;switch(Z){case u.Cu.mpim:_e?(ue=L.rt("Use this message as a jumping off point for a huddle with anyone in this conversation. Huddles with more than 2 people are a paid feature, available with your free trial through {trialEndDate}.",{trialEndDate:(0,E.Pd)(G),fallbackHash:"2955534d96227983f0f85447fb8f3f044131c94f"}),te=f.UiComponentVariant.TRIAL_TEAM):Ee?(ue=L.rt("Use this message as a jumping off point for a huddle. On the free version of Slack, one other person from the conversation will be able to join."),te=f.UiComponentVariant.FREE_TEAM):(ue=L.rt("Use this message as a jumping off point for a huddle. All <strong>{channelMembersCount}</strong> members of this conversation will be able to join.",{channelMembersCount:ee}),te=f.UiComponentVariant.PAID_TEAM);break;case u.Cu.im:ue=L.t("Use this message as a jumping off point for a huddle.",{fallbackHash:"563c2f46cf094d773cfedd52e582a385faea3753"});break;default:_e&&!oe?(ue=L.rt("Use this message as a jumping off point for a huddle with anyone in <strong>{channelName}</strong>. Huddles with more than 2 people are a paid feature, available with your free trial through {trialEndDate}.",{channelName:re,trialEndDate:(0,E.Pd)(G)}),te=f.UiComponentVariant.TRIAL_TEAM):Ee&&!oe?(ue=L.rt("Use this message as a jumping off point for a huddle. On the free version of Slack, one other person from <strong>{channelName}</strong> will be able to join.",{channelName:re}),te=f.UiComponentVariant.FREE_TEAM):(ue=L.rt("Use this message as a jumping off point for a huddle. All <strong>{channelMembersCount}</strong> members of <strong>{channelName}</strong> will be able to join.",{channelMembersCount:ee,channelName:re}),te=f.UiComponentVariant.PAID_TEAM)}return n.createElement(g.A,{uiComponentName:f.UiComponentName.HUDDLES_IN_THREAD_SPEEDBUMP,eventId:f.EventId.CANVAS_EVENT,uiComponentVariant:te},n.createElement(r.A,{onClose:ce,"data-qa":"huddle_in_thread_speed_bump_modal",submitButtonText:L.t("Start huddle"),title:$,onSubmit:Ae,submitAutoClogProps:F,onCancel:ce,cancelAutoClogProps:x,headerImageSrc:h(),className:"p-huddle_in_thread_speed_bump_modal",headerImageAlt:L.t("Brainstorm, make decisions or have a lightweight catch-up with whoever\u2019s online."),UNSAFE_parentSelector:de},n.createElement("p",{className:"p-huddle_in_thread_speed_bump_modal__body_text",id:"huddle-in-thread-speed-bump-modal-body-text"},ue)))},"BaseHuddleInThreadSpeedBumpModalBase");V.displayName="BaseHuddleInThreadSpeedBumpModalBase";const B=l(Y=>{let{channelId:Q,onConfirm:Z,closeModal:ee}=Y;const _e=(0,s.wA)(),Ee=(0,c.d4)(te=>(0,m.OL)(te,Q)),G=(0,u.mz)(Ee),Ae=(0,c.d4)(te=>(0,d.q8)(te,Q)),ce=(0,t.A)(Ae,"counts.member_count")||0,de=(0,v.tc)((0,c.d4)(A.H7)),oe=(0,c.d4)(p.iH),$=(0,c.d4)(p.Sk),re=(0,c.d4)(te=>(0,C.u)(te,Ee));(0,n.useEffect)(()=>(_e((0,y.A)({notificationName:I.ze.HUDDLE_FROM_THREAD_EDUCATIONAL_MODAL,action:I.hw.IMPRESSION})),()=>{_e((0,M.A)({spaceName:I.xu.LAUNCH_MODAL,action:I.hw.DISMISS}))}),[_e]);const ue=(0,n.useCallback)(()=>{Z(),ee==null||ee()},[ee,Z]);return n.createElement(V,{channelType:G,channelMembersCount:ce,isFreeTeam:de,isTeamOnTrial:oe,trialExpirationTS:$,handleOnSubmit:ue,channelId:Q,onConfirm:Z,closeModal:ee,isCurrentTeamSponsoredInSlackConnectChannel:re})},"HuddleInThreadSpeedBumpModalBase");B.displayName="HuddleInThreadSpeedBumpModalBase";const D={spaceName:I.xu.LAUNCH_MODAL,notifications:{[I.ze.HUDDLE_FROM_THREAD_EDUCATIONAL_MODAL]:{component:B}}},S=l(Y=>{let{channelId:Q,onConfirm:Z,closeModal:ee}=Y;return n.createElement(O.Ay,P({},D,{channelId:Q,onConfirm:Z,closeModal:ee}))},"HuddleInThreadSpeedBumpModal");S.displayName="HuddleInThreadSpeedBumpModal";var R=null;const w=(0,o.A)(S)},907633:(j,T,e)=>{"use strict";e.d(T,{D7:()=>d,Lk:()=>p,Vp:()=>A,g6:()=>h});var t=e(296540),n=e(674217),s=e(449552),a=e(211700),c=e(463329),r=e(917780),o=e(577741),u=e(212628),m=e(276881);let i=1;const d=l((v,E)=>{let{experimentHuddlesDiscoveryCallsGroupTreatment:f=!1,component:g=m.G7.HuddleCallNudgesBanner}=E;if(!f||!(0,u.kI)(v,g,m.X8.Click)&&!(0,u.kI)(v,g,m.X8.Dismiss))return!1;var y;const I=(y=(0,u.ky)(v,g,m.X8.Click))!==null&&y!==void 0?y:0;var O;const M=(O=(0,u.ky)(v,g,m.X8.Dismiss))!==null&&O!==void 0?O:0;return!(I>=i||M>=i)},"shouldShowHuddleDiscoveryBanner"),_=l(function(){let{experimentHuddlesDiscoveryCallsGroupTreatment:v=!1,component:E=UiComponent.HuddleCallNudgesBanner}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{experimentHuddlesDiscoveryCallsGroupTreatment:!1,component:UiComponent.HuddleCallNudgesBanner};const f=useDispatch();useEffect(()=>{v&&f(loadUserInteractions({interactions:[{component:E,type:InteractionType.Click},{component:E,type:InteractionType.Dismiss}],useCache:!0,cacheFilter:hasLoadedInteraction,reason:"huddle-discovery-calls"}))},[f,v,E])},"useHuddleDiscoveryCallsUserInteractions"),h=(0,n.Ay)("Send interaction to dismiss nudge",(v,E,f)=>{let{experimentHuddlesDiscoveryCallsGroupTreatment:g,interactionType:y}=f;if(!g)return;const I=E();(0,u.ky)(I,m.G7.HuddleCallNudgesBanner,y)>i||v((0,o.z)({component:m.G7.HuddleCallNudgesBanner,type:y,reason:"huddle-discovery-calls"}))});h.meta={name:"createThunk",key:"createThunkincrementUserInteractionCount",description:"Send interaction to dismiss nudge"};const p=l(v=>{let{component:E,type:f}=v;const g=(0,c.wA)();return(0,t.useEffect)(()=>{g((0,o.b)({interactions:[{component:E,type:f}],reason:E}))},[g,E,f]),(0,r.d4)(y=>(0,u.kI)(y,E,f)?(0,u.PU)(y,E):null)},"useTrialProBannerInteraction"),A=(0,n.Ay)("Record trial pro banner interaction",(v,E,f)=>{let{component:g,type:y}=f;return v((0,o.z)({component:g,type:y,reason:g}))});A.meta={name:"createThunk",key:"createThunkrecordTrialProBannerInteraction",description:"Record trial pro banner interaction"},(0,a.ul)("huddleInteractionUtils",{addOneMoreThanClickCount:v=>{const E=(0,s.getStateByTeamId)(v);i=(0,u.ky)(E,m.G7.HuddleCallNudgesBanner,m.X8.Click)+1},addOneMoreThanDismissCount:v=>{const E=(0,s.getStateByTeamId)(v);i=(0,u.ky)(E,m.G7.HuddleCallNudgesBanner,m.X8.Dismiss)+1}})},817075:(j,T,e)=>{"use strict";e.d(T,{G$:()=>L,Oe:()=>B,Y6:()=>F});var t=e(296540),n=e(463329),s=e(780076),a=e(917780),c=e(324331),r=e(310717),o=e(166722),u=e(140998),m=e(238798),i=e(396386),d=e(911764),_=e(113574),h=e(885850),p=e(566254),A=e(710596),v=e(658160),E=e(166747),f=e(532395),g=e(649098),y=e(258768),I=e(921055);function O(){return O=Object.assign||function(D){for(var S=1;S<arguments.length;S++){var R=arguments[S];for(var w in R)Object.prototype.hasOwnProperty.call(R,w)&&(D[w]=R[w])}return D},O.apply(this,arguments)}l(O,"_extends");const M=new g.Ay("huddles"),C={elementName:"huddles_confirmation_dialog_ok",eventId:f.EventId.HUDDLES_JOIN_CONFIRM,onClick:{enableClogAction:!0}},P={elementName:"huddles_confirmation_dialog_cancel",eventId:f.EventId.HUDDLES_JOIN_CANCEL,onClick:{enableClogAction:!0}},L=l(D=>{let{children:S,closeModal:R,onConfirm:w,uiComponentName:Y,...Q}=D;const Z=(0,t.useCallback)(()=>{w(),R==null||R()},[R,w]);return t.createElement(m.A,{uiComponentName:Y,eventId:f.EventId.HUDDLES_CONFIRM_DIALOG_SHOWN,clogImpression:!0},t.createElement(r.A,O({overlayClassName:"p-huddle_join_modal__overlay","data-qa":"huddle_join_modal",onCancel:R,onClose:R,onSubmit:Z,submitButtonText:M.t("OK"),submitAutoClogProps:C,cancelAutoClogProps:P},Q),S))},"HuddleJoinModal");L.displayName="HuddleJoinModal";const x=l(D=>{let{prevChannelId:S,nextChannelId:R,onConfirm:w,closeModal:Y}=D;const Q=(0,a.d4)(Ae=>(0,h.OL)(Ae,S)),Z=(0,a.Z2)(Ae=>{if(!Q)return[];let ce=[];if((0,i.LI)(Q))ce=[(0,v.e)(Q)];else if((0,i.yz)(Q)){const de=(0,A.Ug)(Q);if(de&&de.length){const oe=(0,_.WR)(Ae);ce=de.filter($=>$!==oe)}}return ce.map(de=>(0,E.I)(Ae,de))}),ee=(0,a.d4)(Ae=>(0,h.OL)(Ae,R)),_e=(0,a.Z2)(Ae=>{if(!ee)return[];let ce=[];if((0,i.LI)(ee))ce=[(0,v.e)(ee)];else if((0,i.yz)(ee)){const de=(0,A.Ug)(ee);if(de&&de.length){const oe=(0,_.WR)(Ae);ce=de.filter($=>$!==oe)}}return ce.map(de=>(0,E.I)(Ae,de))});let Ee=M.rt("You\u2019re already in a huddle.");Z.length?Ee=M.rt("You\u2019re already in a huddle with {listOfPersons}.",{listOfPersons:(0,g.jd)(Z).join("")}):Q&&(0,s.uz)(Q)&&(Ee=M.rt("You\u2019re already in a huddle in {channel}.",{channel:t.createElement(c.A,{channel:Q,channelId:S})}));let G=M.rt("Would you like to leave it and join this one instead?");return _e.length?G=M.rt("Would you like to leave it and join a huddle with {listOfPersons} instead?",{listOfPersons:t.createElement("strong",null,(0,g.jd)(_e).join(""))}):ee&&(0,s.uz)(ee)&&(G=M.rt("Would you like to leave it and join a huddle in {channel} instead?",{channel:t.createElement("strong",null,t.createElement(c.A,{channel:ee,channelId:R}))})),t.createElement(L,{uiComponentName:f.UiComponentName.HUDDLES_CONFIRMATION_DIALOG,title:M.t("Switch to this huddle?"),onConfirm:w,closeModal:Y},t.createElement("p",null,Ee," ",G))},"HuddleSwitchModal");x.displayName="HuddleSwitchModal";const F=(0,d.A)(x),V=l(D=>{let{channelId:S,onConfirm:R,closeModal:w}=D;const Y=(0,a.d4)(oe=>(0,h.OL)(oe,S));var Q;const Z=(0,a.d4)(oe=>{var $,re;return(Q=($=(0,p.q8)(oe,S))===null||$===void 0||(re=$.counts)===null||re===void 0?void 0:re.member_count)!==null&&Q!==void 0?Q:0}),ee=(0,a.d4)(oe=>(0,I.ty)(oe,"huddles_show_shouty_rooster")),[_e,Ee]=(0,t.useState)(ee),G=(0,n.wA)(),Ae=Y&&(0,s.uz)(Y)&&t.createElement("strong",null,t.createElement(c.A,{channelId:S,channel:Y})),ce=Z>1?M.rt("You\u2019ll be starting a huddle that all {count} members of {channel} can join.",{count:t.createElement("strong",null,Z),channel:Ae}):M.rt("You\u2019ll be starting a huddle that every member of {channel} can join.",{channel:Ae}),de=(0,t.useCallback)(()=>{const oe=!_e;Ee(oe),G((0,y.AZ)({pref:"huddles_show_shouty_rooster",value:oe}))},[_e,G]);return t.createElement(L,{uiComponentName:f.UiComponentName.HUDDLES_SHOUTY_ROOSTER_DIALOG,title:M.t("Start a huddle in this channel?"),onConfirm:R,closeModal:w},t.createElement("p",null,ce),t.createElement(o.A,{text:M.t("Don\u2019t show this message again."),type:"inline",cursor:"pointer"},t.createElement(u.A,{name:"ns",checked:!_e,onChange:de,"data-qa":"huddle_join_modal_show_checkbox"})))},"HuddleShoutyRoosterModal");V.displayName="HuddleShoutyRoosterModal";const B=(0,d.A)(V)},220050:(j,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(296540),n=e(528919);const s=t.memo(o=>{let{className:u,iconClassName:m,allowMuteAnimation:i,wasMicEverEnabled:d,isMicStrikethroughRed:_}=o;return t.createElement("div",{className:(0,n.A)("p-huddle_mic_icon p-huddle_mic_icon__container",u),"data-qa":"huddle_mic_icon_unmute"},t.createElement("svg",{className:m,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},t.createElement("path",{d:"M5.35086 10.3436C5.12445 9.77312 5 9.15109 5 8.5V8.25C5 7.83579 4.66421 7.5 4.25 7.5C3.83579 7.5 3.5 7.83579 3.5 8.25V8.5C3.5 9.60794 3.7772 10.6511 4.26603 11.564L5.35086 10.3436ZM7.62904 14.554C8.36362 14.8419 9.16335 15 10 15C13.5899 15 16.5 12.0899 16.5 8.5V8.25C16.5 7.83579 16.1642 7.5 15.75 7.5C15.3358 7.5 15 7.83579 15 8.25V8.5C15 11.2614 12.7614 13.5 10 13.5C9.55549 13.5 9.12453 13.442 8.71427 13.3331L7.62904 14.554Z",fill:"currentColor"}),t.createElement("path",{d:"M10 14.25V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),t.createElement("path",{d:"M12.25 17.25L7.75 17.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),t.createElement("path",{d:"M12.1271 2.72031C11.5376 2.2685 10.8001 2 10 2C8.067 2 6.5 3.567 6.5 5.5V8.5C6.5 8.67302 6.51255 8.84311 6.5368 9.0094L8 7.3633V5.5C8 4.39543 8.89543 3.5 10 3.5C10.4175 3.5 10.8051 3.62793 11.1258 3.84674L12.1271 2.72031ZM9.90052 11.9986C9.93357 11.9995 9.96673 12 10 12C11.933 12 13.5 10.433 13.5 8.5V7.9492L9.90052 11.9986Z",fill:"currentColor"}),t.createElement("path",{className:(0,n.A)({"p-huddle_mic_icon__microphone--slash_animated":i&&d,"p-huddle_mic_icon__microphone--slash":_}),d:"M4 15.25L15.5 2.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})))}),a=t.memo(o=>{let{volumeLevel:u=0,className:m,iconClassName:i}=o;const[d,_]=(0,t.useState)(0);return(0,t.useEffect)(()=>{if(u!=="auto"){_(Math.min(1,u||0));return}const h=setInterval(()=>{const p=(Math.floor(Math.random()*100)+1)/100;_(p)},100);return()=>{clearInterval(h)}},[u]),t.createElement("div",{className:(0,n.A)("p-huddle_mic_icon p-huddle_mic_icon__container",m),"data-qa":"huddle_mic_icon_mute"},t.createElement("svg",{className:i,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},t.createElement("path",{className:"p-huddle_mic_icon__microphone--input_level",style:{transform:`scaleY(${d})`},d:"M10 11V3",stroke:"currentColor",strokeWidth:"4"}),t.createElement("path",{d:"M7.25 5.5C7.25 3.98122 8.48122 2.75 10 2.75V2.75C11.5188 2.75 12.75 3.98122 12.75 5.5V8.5C12.75 10.0188 11.5188 11.25 10 11.25V11.25C8.48122 11.25 7.25 10.0188 7.25 8.5V5.5Z",stroke:"currentColor",strokeWidth:"1.5"}),t.createElement("path",{d:"M4.25 8.25V8.5C4.25 11.6756 6.82436 14.25 10 14.25V14.25C13.1756 14.25 15.75 11.6756 15.75 8.5V8.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),t.createElement("path",{d:"M10 14.25V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),t.createElement("path",{d:"M12.25 17.25L7.75 17.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})))}),c=l(o=>{let{type:u,volumeLevel:m,className:i,iconClassName:d,allowMuteAnimation:_=!1,isMicStrikethroughRed:h=!1}=o;const[p,A]=(0,t.useState)(u==="unmuted");return(0,t.useEffect)(()=>{u==="unmuted"&&A(!0)},[u]),u==="unmuted"?t.createElement(a,{className:i,iconClassName:d,volumeLevel:m}):t.createElement(s,{className:i,iconClassName:d,allowMuteAnimation:_,wasMicEverEnabled:p,isMicStrikethroughRed:h})},"HuddleMicIcon");c.displayName="HuddleMicIcon";const r=t.memo(c)},494643:(j,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(296540),n=e(42302),s=e(462787),a=e(8916),c=e(220050);function r(o){let{peerId:u,isMicrophoneEnabled:m,className:i,allowMuteIconAnimation:d=!1,isMicStrikethroughRed:_=!1}=o;const[h,p]=(0,t.useState)(0);return(0,t.useEffect)(()=>{if(!m)return n.A;const A=l(v=>{const E=(0,a.Ft)(v);p(E)},"onLevelUpdated");return s.A.subscribe(u,A),()=>{s.A.unsubscribe(u,A)}},[u,m]),t.createElement(c.A,{type:m?"unmuted":"muted",volumeLevel:h,className:i||"",allowMuteAnimation:d,isMicStrikethroughRed:_})}l(r,"HuddleMicVolumeIndicator")},55004:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>N,e3:()=>te,lc:()=>ae});var t=e(612104),n=e.n(t),s=e(296540),a=e(528919),c=e(463329),r=e(917780),o=e(448368),u=e(513394),m=e(780076),i=e(285955),d=e(492630),_=e(113574),h=e(885850),p=e(204258),A=e(959905),v=e(3704),E=e(868842),f=e(282233),g=e(134309),y=e(237163),I=e(238798),O=e(606527),M=e(103608),C=e(854878),P=e(31214),L=e(396386),x=e(658160),F=e(710596),V=e(47801),B=e(616125),D=e(863467),S=e(177242),R=e(855645),w=e(914872),Y=e(324331),Q=e(890401),Z=e(934423),ee=e(649098),_e=e(532395),Ee=e(607728),G=e(308548),Ae=e(127225),ce=e(190905);function de(){return de=Object.assign||function(K){for(var W=1;W<arguments.length;W++){var J=arguments[W];for(var q in J)Object.prototype.hasOwnProperty.call(J,q)&&(K[q]=J[q])}return K},de.apply(this,arguments)}l(de,"_extends");const oe=new ee.Ay("huddles"),$={elementName:"huddles_invite_decline",eventId:_e.EventId.CANVAS_EVENT,onClick:{enableClogAction:!0}},re={elementName:"huddles_invite_joining_soon",eventId:_e.EventId.CANVAS_EVENT,onClick:{enableClogAction:!0}},ue={elementName:"huddles_invite_join",eventId:_e.EventId.CANVAS_EVENT,onClick:{enableClogAction:!0}},te=l(K=>{let{topic:W,formattedTopic:J,channel:q,channelName:ie,otherMemberNamesString:Te,imMemberName:Me,experimentHuddlesLaterGroupOn:ke}=K;if(!ke)return s.createElement(s.Fragment,null);let Pe=W?oe.rt("Join the scheduled huddle about {topic}",{topic:J}):oe.rt("Join the scheduled huddle");return(0,L.LI)(q)&&Me?Pe=W?oe.rt("Join the scheduled huddle with {imMemberName} about {topic}",{topic:J,imMemberName:Me}):oe.rt("Join the scheduled huddle with {imMemberName}",{imMemberName:Me}):(0,L.yz)(q)?Pe=W?oe.rt("Join the scheduled huddle about {topic} with {otherMemberNamesString}",{topic:J,otherMemberNamesString:Te}):oe.rt("Join the scheduled huddle with {otherMemberNamesString}",{otherMemberNamesString:Te}):(0,m.uz)(q)&&!(0,L.LI)(q)&&(Pe=W?oe.rt("Join the scheduled huddle in {channelName} about {topic}",{topic:J,channelName:ie}):oe.rt("Join the scheduled huddle in {channelName}",{channelName:ie})),Pe},"getScheduledHuddleInviteCopy");function ae(K){let{channelId:W,senderUserId:J,callId:q,teamId:ie,isInviter:Te}=K;const Me=(0,c.wA)(),{shouldUseNavigate:ke,activeTab:Pe}=(0,s.useContext)(G.A),Ie=(0,r.d4)(f.MJ),X=(0,r.d4)(_.WR),ne=(0,r.d4)(mn=>(0,P.A)(mn,J)),fe=(0,r.d4)(mn=>(0,h.OL)(mn,W)),be=(0,r.d4)(mn=>{if(!fe||!Ie||!(0,L.LI)(fe))return;const wt=(0,x.e)(fe);if(wt)return(0,P.A)(mn,wt)}),Be=(0,r.Z2)(mn=>(0,L.yz)(fe)?((0,F.Ug)(fe)||[]).filter(On=>On!==J&&On!==X).map(On=>(0,P.A)(mn,On)).filter(On=>On):[]),We=(0,o.cw)(p.vO),Re=(0,V.eu)(We),xe=(0,r.d4)(mn=>(0,d.Ck)(mn,q,X))==="joining_soon",He=(0,r.d4)(mn=>(0,d.H6)(mn,q));var je;const Ke=(je=He==null?void 0:He.isScheduled)!==null&&je!==void 0?je:!1,ht=(0,r.d4)(y.A),dt=(0,r.d4)(mn=>{if(ke){var wt;return(wt=(0,ce.F8)(mn,{tab:Pe,container:Ae.mq.Primary}))===null||wt===void 0?void 0:wt.id}return ht}),Ve=(0,o.cw)(i.getFocusedWorkspace),Je=W===dt&&Ve&&ie&&Ve===ie,Ge=(0,s.useCallback)(()=>{Me((0,C.A)({callId:q,channelId:W,inviteResponse:C.J.DECLINE}))},[q,W,Me]),[Le,Mt]=(0,s.useState)(!1),[Dt,pt]=(0,s.useState)(!1),Qt=(0,s.useCallback)(()=>{(function(){var wt=(0,t.coroutine)(function*(){pt(!0),Mt(!1);const On=Me((0,C.A)({callId:q,channelId:W,inviteResponse:C.J.JOINING_SOON}));if(On)try{yield On}catch{Mt(!0)}finally{pt(!1)}else pt(!1)});return l(function(){return wt.apply(this,arguments)},"respondToInvite")})()()},[q,W,Me]),Nt=(0,s.useCallback)(()=>{Me((0,A.A)({channelId:W,callId:q,entryPoint:v.su.SIDEBAR_HUDDLE_INVITE}))},[W,q,Me]),bt=(0,r.d4)(mn=>W&&(0,E.o)(mn,W))||"",Yt=bt?s.createElement("span",{className:"p-huddle_invite__topic"},s.createElement(O.A,{text:bt})):null,fn=s.createElement("span",{className:"p-huddle_invite__sender_name"},ne);let Tt;if(Ke){const mn=s.createElement(Y.A,{channelId:W,boldIcon:!0});Tt=te({topic:bt,formattedTopic:Yt,channel:fe,channelName:mn,experimentHuddlesLaterGroupOn:!0})}else if((0,L.LI)(fe))Te?Tt=te({topic:bt,formattedTopic:Yt,channel:fe,imMemberName:be,experimentHuddlesLaterGroupOn:Ie}):Tt=oe.rt("Join huddle with {senderName}",{senderName:fn});else if((0,L.yz)(fe)){const mn=(0,Ee.A)(Be,{react:!0}).join("");if(Te)Tt=te({topic:bt,formattedTopic:Yt,channel:fe,otherMemberNamesString:mn,experimentHuddlesLaterGroupOn:Ie});else{const wt=(0,Ee.A)([ne].concat(Be),{react:!0}).join(""),On=s.createElement("span",{className:"p-huddle_invite__all_member_names"},wt);Tt=oe.rt("Join huddle with {allMemberNames}",{allMemberNames:On})}}else{const mn=s.createElement(Y.A,{channelId:W,boldIcon:!0});Te?Tt=te({topic:bt,formattedTopic:Yt,channel:fe,channelName:mn,experimentHuddlesLaterGroupOn:Ie}):Je?Tt=oe.rt("{senderName} is inviting you to a huddle in this channel",{senderName:fn}):Tt=oe.rt("{senderName} is inviting you to a huddle in {channelName}",{senderName:fn,channelName:mn})}return{avatarOverflowBadgeCount:(0,L.yz)(fe)?Be.length+1:0,didRespondingToInviteFail:Le,formattedTopic:Yt,handleDecline:Ge,handleJoiningSoon:Qt,handleJoin:Nt,inviteText:Tt,isCurrentUserJoiningSoon:xe,isJoiningSoonResponsePending:Dt,isLoading:Re}}l(ae,"useHuddleInviteProps"),ae.displayName="useHuddleInviteProps";const H={name:"warning"},U=l(K=>{let{channelId:W,senderUserId:J,callId:q,teamId:ie}=K;const Te=(0,r.d4)(f.MJ),Me=(0,r.d4)(_.WR),ke=Te&&Me===J,Pe=(0,M.A)(W),{avatarOverflowBadgeCount:Ie,didRespondingToInviteFail:X,formattedTopic:ne,handleDecline:fe,handleJoiningSoon:be,handleJoin:Be,inviteText:We,isCurrentUserJoiningSoon:Re,isJoiningSoonResponsePending:ve,isLoading:xe}=ae({channelId:W,senderUserId:J,callId:q,teamId:ie,isInviter:ke}),He=(0,s.useRef)(null),je=(0,s.useCallback)(()=>{var pt;(pt=He.current)===null||pt===void 0||pt.focus()},[]);(0,u.A)(Q.Ay.HUDDLE_INVITE_JOIN,je);const Ke="huddle-invite-text",ht=s.createElement(R.Ay,{type:"outline",className:"p-huddle_invite__button",onClick:fe,"data-qa":"huddle_invite_declined",disabled:xe,autoClogProps:$},s.createElement("span",{className:"p-huddle_invite__label"},oe.t("Decline"))),dt=s.createElement(w.A,{type:"outline",className:"p-huddle_invite__button p-huddle_invite__button--joining_soon",loading:ve,onClick:be,disabled:xe,autoClogProps:re},s.createElement("span",{className:"p-huddle_invite__label"},oe.t("Be there soon"))),[Ve,Je]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let pt=0;return Re&&(Je(!0),pt=window.setTimeout(()=>{Je(!1)},6e3)),()=>{pt&&clearTimeout(pt)}},[Re]);const Ge=Ve?s.createElement("div",{className:"p-huddle_invite__header_notif"},s.createElement("div",{className:"p-huddle_invite__header_notif_content"},s.createElement(B.A,{name:"clock",size:"20"}),s.createElement("span",{className:"margin_left_50"},oe.t("Join when you\u2019re ready!")))):null,Le=s.createElement(w.A,{ref:He,type:"primary",className:"p-huddle_invite__button p-huddle_invite__button--accept",loading:xe,onClick:Be,"data-qa":"huddle_invite_join",autoClogProps:ue},s.createElement("span",{className:"p-huddle_invite__label p-huddle_invite__label--join"},oe.t("Join"))),Mt=(0,r.d4)(g.jI),Dt=Mt?{width:Mt}:null;return s.createElement(I.A,de({eventId:_e.EventId.CANVAS_EVENT,uiComponentName:_e.UiComponentName.HUDDLES_INVITE,clogImpression:!0},Pe),s.createElement("div",de({className:(0,a.A)("p-huddle_invite",{"p-huddle_invite--with_header":!!ne})},Dt&&{style:Dt}),s.createElement("div",{className:"p-huddle_invite__content"},Ge,ne&&s.createElement("div",{className:"p-huddle_invite__message_header"},ne),s.createElement("div",{className:"p-huddle_invite__message"},!ke&&s.createElement("div",{className:(0,a.A)("p-huddle_invite__avatar_container",{"p-huddle_invite__avatar_container--with_overflow":!!Ie})},s.createElement(S.Ay,{key:J,className:"p-huddle_invite__avatar",size:Ie?14:20,userId:J,isInteractive:!1}),!!Ie&&s.createElement("div",{className:"p-huddle_invite__avatar_overflow_overlay"},Ie)),s.createElement(D.z,null,s.createElement("div",{className:"p-huddle_invite__text",id:Ke},We,s.createElement("span",{className:"offscreen"},oe.rt("Press {key} to join",{key:(0,V.$z)(),fallbackHash:"bd062cb22cea3388535c0f834ebf6df702757691",fallbackHashNs:"keyboard_keys"}))))),s.createElement("div",{className:"p-huddle_invite__buttons",role:"group","aria-labelledby":Ke},Le,!Re&&dt,ht)),X&&s.createElement(Z.A,{svgIconProps:H},oe.t("Something went wrong responding to the invite."))))},"HuddleInvite");U.displayName="HuddleInvite";const N=U},854878:(j,T,e)=>{"use strict";e.d(T,{A:()=>m,J:()=>o});var t=e(674217),n=e(449552),s=e(561303),a=e(205288),c=e(765926),r=e(978742),o;(function(i){i.ACCEPT="accept",i.DECLINE="decline",i.JOINING_SOON="joining_soon"})(o||(o={}));const u=(0,t.Ay)("Respond to an invitation to a huddle",(i,d,_)=>{let{channelId:h,inviteResponse:p,callId:A}=_;i((0,c.z)());let v;return p!==o.ACCEPT&&(v=i((0,r.Q)({response:p,channelId:h,roomId:A,reason:"respond-to-huddle-invite"}))),p===o.DECLINE&&((0,n.dispatchForClientStore)((0,s.u8)(h)),i((0,a.V3)(h))),v});u.meta={name:"createThunk",key:"createThunkrespondToHuddleInvite",description:"Respond to an invitation to a huddle"};const m=u},196548:(j,T,e)=>{"use strict";e.d(T,{x:()=>o});var t=e(180491),n=e(674217),s=e(205288),a=e(56473),c=e(3704),r=e(587839);const o=(0,n.Ay)("Creates a new huddle in mpim where all huddle participants are channel members",(u,m,i)=>{let{channelId:d,memberIds:_}=i;return u((0,r.r)({memberIds:_})).then(h=>{u((0,s.Ay)(d)),u((0,a.A)({channelId:h.id,entryPoint:c.su.CREATE_NEW_MPIM}))}).catch(h=>t.S.reject(h))});o.meta={name:"createThunk",key:"createThunkcreateNewHuddleInMpimWithUsers",description:"Creates a new huddle in mpim where all huddle participants are channel members"}},207288:(j,T,e)=>{"use strict";e.d(T,{A:()=>F});var t=e(296540),n=e(927675),s=e(463329),a=e(846850),c=e(917780),r=e(135713),o=e(448368),u=e(629669),m=e(369391),i=e(428852),d=e(885850),_=e(204258),h=e(649098),p=e(705091),A=e(324331),v=e(911764),E=e(140592),f=e(500928),g=e(786347),y=e(567693),I=e(404296),O=e(881805);const M=new h.Ay("huddles"),C=l(V=>{let{numOfExternalMembers:B,members:D}=V;const S=(0,c.d4)(O.Kc),R=(0,o.cw)(_.hc)||"",w=(0,c.d4)(K=>(0,d.OL)(K,R)),Y=(0,c.d4)(K=>(0,r._Z)(K,"invite_to_channel_permission")==="on"),Q=(0,c.d4)(K=>(0,r._Z)(K,"restrict_channel_manager_ext_invites")==="on"),Z=(0,c.d4)(K=>(0,g.Q)(K,w)),ee=(0,c.d4)(K=>(0,y.q)(K,w));if(!Q)return null;const _e=!Y&&Q,Ee=Y&&Q,G=B===D.length,Ae=B>0,ce=!B,de=D.length-B>0,oe=!(D.length-B),$=M.rt("They can join the huddle, but since you are not allowed to invite external people to this channel, they won\u2019t be able to see messages or reply to the thread."),re=t.createElement(t.Fragment,null,t.createElement("p",null,M.t("Everyone you\u2019ve added can join the huddle but won\u2019t be able to see messages or reply to the thread.")),t.createElement("p",null,M.rt("You can add people from {org} to {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{org:t.createElement(I.A,{id:S}),channelName:t.createElement(A.A,{className:"bold",channel:w})})),t.createElement("p",null,M.t("You don\u2019t have permission to add external people to this channel."))),ue=t.createElement(t.Fragment,null,t.createElement("p",null,M.t("Everyone you\u2019ve added can join the huddle but won\u2019t be able to see messages or reply to the thread.")),t.createElement("p",null,M.rt("You can add people from {org} to {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{org:t.createElement(I.A,{id:S}),channelName:t.createElement(A.A,{className:"bold",channel:w})}))),te=M.rt("They can join the huddle, but since you are not allowed to invite people from {org} to this channel, they won\u2019t be able to see messages or reply to the thread.",{org:t.createElement(I.A,{id:S})}),ae=t.createElement(t.Fragment,null,t.createElement("p",null,M.t("Everyone you\u2019ve added can join the huddle but won\u2019t be able to see messages or reply to the thread.")),t.createElement("p",null,M.rt("You can add external people (not from {org}) to {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{org:t.createElement(I.A,{id:S}),channelName:t.createElement(A.A,{className:"bold",channel:w})})),t.createElement("p",null,M.t("You don\u2019t have permission to add internal people to this channel."))),H=t.createElement(t.Fragment,null,t.createElement("p",null,M.t("Everyone you\u2019ve added can join the huddle but won\u2019t be able to see messages or reply to the thread.")),t.createElement("p",null,M.rt("You can add external people (not from {org}) to {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{org:t.createElement(I.A,{id:S}),channelName:t.createElement(A.A,{className:"bold",channel:w})}))),U=M.rt("They can join the huddle, but since you are not allowed to invite people to this channel, they won\u2019t be able to see messages or reply to the thread."),N=M.rt("They can join the huddle but won\u2019t be able to see messages or reply to the thread unless they are members of {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{channelName:t.createElement(A.A,{className:"bold",channel:w})});switch(!0){case(_e&&!ee&&G):return $;case(_e&&!ee&&Ae):return re;case(_e&&!ee&&ce):return ue;case(_e&&ee):return N;case(Ee&&Z&&!ee&&G):return $;case(Ee&&Z&&!ee&&Ae):return re;case(Ee&&Z&&!ee&&ce):return ue;case(Ee&&!Z&&ee&&ce):return te;case(Ee&&!Z&&ee&&de):return ae;case(Ee&&!Z&&ee&&oe):return H;case(Ee&&!Z&&!ee):return U;default:return N}},"DisallowedHuddleInviteSubtitle");C.displayName="DisallowedHuddleInviteSubtitle";const P=C,L=new h.Ay("huddles");function x(V){let{members:B}=V;const D=(0,s.wA)(),[S,R]=(0,t.useState)(null),[w,Y]=(0,t.useState)([]),[Q,Z]=(0,t.useState)(!1),ee=(0,o.cw)(_.hc)||"",_e=(0,c.d4)(Te=>(0,d.OL)(Te,ee)),Ee=(0,t.useCallback)(()=>D((0,a.O)()),[D]),G=(0,t.useCallback)(()=>D((0,a.O)({closeAll:!0})),[D]),Ae=(0,t.useCallback)(Te=>{R(Te),D((0,p.Cw)({channelId:ee,users:Te})).then(()=>{w.push(Te),Y(w),R(null)}).catch(()=>{R(null),Z(!0)})},[ee,D,w]),ce=(0,c.d4)(Te=>(0,r._Z)(Te,"invite_to_channel_permission")==="on"),de=(0,c.d4)(Te=>(0,r._Z)(Te,"restrict_channel_manager_ext_invites")==="on"),oe=(0,c.d4)(Te=>(0,E.Z)(Te,B)),$=(0,t.useMemo)(()=>({addedToChannel:L.t("Added to channel"),notInChannel:L.t("Not in channel"),added:L.t("Added"),inviteToChannel:L.t("Invite to channel"),cantBeInvitedToChannel:de?L.t("Can\u2019t be invited to channel"):""}),[de]),re=(0,c.d4)(Te=>(0,g.Q)(Te,_e)),ue=(0,c.d4)(Te=>(0,y.q)(Te,_e)),te=(0,c.Z2)(Te=>B.filter(Me=>(0,f.i)(Te,Me))),ae=te.length,H=!ce&&de,U=ce&&de,N=H&&!ue,K=U&&re&&!ue,W=ae===B.length,J=!ae,q=(0,t.useMemo)(()=>de?L.rt("{count, plural, =1 {This person is not a member} other {These people are not members}} of {channelName}",{count:B.length,channelName:t.createElement(A.A,{channel:_e})}):L.rt("These people are not a member of {channelName}",{channelName:t.createElement(A.A,{channel:_e})}),[de,_e,B]),ie=(0,t.useCallback)((Te,Me)=>{switch(!0){case((N||K)&&W):return null;case((N||K)&&te.includes(Te)):return t.createElement("span",{className:"p-huddle_invite_add_to_channel__user_list_no_invite_text"},$.cantBeInvitedToChannel);case(U&&!re&&ue&&J):return null;case(U&&!re&&ue&&!te.includes(Te)):return t.createElement("span",{className:"p-huddle_invite_add_to_channel__user_list_no_invite_text"},$.cantBeInvitedToChannel);case(U&&!re&&!ue):return null;default:return t.createElement(n.lV,{type:"outline",size:"small",disabled:Me,loading:S===Te,onClick:()=>Ae(Te)},Me?$.added:$.inviteToChannel)}},[N,K,W,te,$.cantBeInvitedToChannel,$.added,$.inviteToChannel,U,re,ue,J,S,Ae]);return t.createElement(i.dW,{overlayClassName:"p-huddle_invite_modal_shared_styles__overlay",closeModal:Ee,contentLabel:q,shouldReturnFocusAfterClose:!0},t.createElement(i.rQ,null,t.createElement(i.Rc,{title:q,subtitle:de?null:L.rt("They can join the huddle but won\u2019t be able to see messages or reply to the thread unless they are members of {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{channelName:t.createElement(A.A,{className:"bold",channel:_e})})}),de&&t.createElement("div",{className:"p-huddle_invite_add_to_channel__subtitle"},t.createElement(P,{numOfExternalMembers:ae,members:B}))),t.createElement(i.$m,null,t.createElement(i.qf,null,Q&&t.createElement(m.Ay,{className:"margin_bottom_150",level:m.A_.error,type:m.QE.inline},L.t("Oops, something went wrong. Please try again.",{fallbackHash:"92c404bc05c04cc6c63491f463f0ec39688f741a",fallbackHashNs:"client"})),(de?oe:B).map(Te=>{const Me=w.includes(Te);return t.createElement("div",{className:"p-huddle_invite_add_to_channel__user_list",key:Te},t.createElement(u.Ay,{id:Te,useShortMode:!0,showPresence:!0,showStatus:!0,showSubtext:!0,subtext:t.createElement("small",{className:"sk_dark_gray"},Me?$.addedToChannel:$.notInChannel)}),de?ie(Te,Me):t.createElement(n.lV,{type:"outline",size:"small",disabled:Me,loading:S===Te,onClick:()=>Ae(Te)},Me?$.added:$.inviteToChannel))}),de?null:t.createElement(m.Ay,{className:"margin_top_50",level:m.A_.info,type:m.QE.custom},L.t("If you don\u2019t add them, they won\u2019t be able to see messages in the huddle.")))),t.createElement(i.jl,null,t.createElement(i.ox,null,de?null:t.createElement(i.s_,{onClick:Ee,type:"outline"},L.t("Cancel")),t.createElement(n.Ay,{onClick:G,type:"primary"},ce&&!re||de&&!ue?L.t("OK"):L.t("Done")))))}l(x,"HuddleInviteAddToChannel"),x.displayName="HuddleInviteAddToChannel";const F=(0,v.A)(x,{isStackable:!0})},325303:(j,T,e)=>{"use strict";e.d(T,{A:()=>Ge});var t=e(612104),n=e(296540),s=e(463329),a=e(41343),c=e(177242),r=e(927675),o=e(369391),u=e(199291),m=e(488455),i=e(917780),d=e(94689),_=e(45798),h=e(428852),p=e(793434),A=e(113574),v=e(282233),E=e(47801),f=e(587839),g=e(649098),y=e(36911),I=e(163177),O=e(396386),M=e(959905),C=e(3704),P=e(238798),L=e(532395),x=e(435932),F=e(129318),V=e(934861),B=e(741323),D=e(329981),S=e(850108),R=e(89286),w=e(787781),Y=e(994319),Q=e(448368),Z=e(885850),ee=e(204258),_e=e(324331),Ee=e(246634),G=e(437556),Ae=e(259822),ce=e(56185);function de(Le){let{memberId:Mt}=Le;const Dt=(0,i.d4)(Qt=>(0,G.nv)(Qt,Mt)),pt=(0,i.d4)(Qt=>(0,Ee.sE)(Qt,Dt,!1,!1));return(0,ce.mX)(Dt)?n.createElement(Ae.A,{type:"unknown"}):(0,ce.lv)(Dt)?n.createElement(Ae.A,{type:"non-existent"}):n.createElement("span",null,pt)}l(de,"DeprecatedHuddleName"),de.displayName="DeprecatedHuddleName";const oe=new g.Ay("huddles");function $(Le){let{unknownMemberIds:Mt}=Le;const Dt=(0,Q.cw)(ee.hc),pt=(0,i.d4)(bt=>(0,Z.OL)(bt,Dt)),Qt=(0,n.useMemo)(()=>Dt?Mt:[],[Dt,Mt]);let Nt;if(Qt.length===1)Nt=oe.rt("{name1} is not a member of {channel}.",{name1:n.createElement(de,{memberId:Qt[0]}),channel:n.createElement(_e.A,{channel:pt})});else if(Qt.length===2)Nt=oe.rt("{name1} and {name2} are not a member of {channel}.",{name1:n.createElement(de,{memberId:Qt[0]}),name2:n.createElement(de,{memberId:Qt[1]}),channel:n.createElement(_e.A,{channel:pt})});else if(Qt.length===3)Nt=oe.rt("{name1}, {name2}, and {name3} are not a member of {channel}.",{name1:n.createElement(de,{memberId:Qt[0]}),name2:n.createElement(de,{memberId:Qt[1]}),name3:n.createElement(de,{memberId:Qt[2]}),channel:n.createElement(_e.A,{channel:pt})});else if(Qt.length>3){const[bt,Yt,fn,...Tt]=Qt,sn=Tt.map(mn=>n.createElement(de,{key:mn,memberId:mn}));Nt=oe.rt("{name1}, {name2}, {name3} and {numOthers} more are not a member of {channel}.",{name1:n.createElement(de,{memberId:bt}),name2:n.createElement(de,{memberId:Yt}),name3:n.createElement(de,{memberId:fn}),channel:n.createElement(_e.A,{channel:pt}),numOthers:Qt.length-3},mn=>{let{text:wt}=mn;return n.createElement(m.Ay,{tip:(0,g.jd)(sn,{noEscape:!0})},n.createElement("span",null,wt))})}return n.createElement("small",null,Nt)}l($,"HuddleInviteNotAMember"),$.displayName="HuddleInviteNotAMember";const re=$;var ue=e(207288),te=e(749206),ae=e(655523),H=e(709802),U=e(466390),N=e(213954),K=e(24064),W=e(671566),J=e(957188),q=e(96432),ie=e(697807),Te=e(850960),Me=e(23219),ke=e(974576),Pe=e(43335),Ie=e(183469);const X=new g.Ay("huddles");var ne;(function(Le){Le.CHANNEL="channel",Le.PEOPLE="people"})(ne||(ne={}));const fe=l(Le=>{let{isFreeTeam:Mt,onSuggestedChannelSelected:Dt,onSuggestedUserSelected:pt,selectedChannelId:Qt,selectedMemberIds:Nt}=Le;const bt=(0,i.d4)(A.WR),Yt=(0,i.wz)(Ie.b5),fn=(0,i.wz)(Ie.mc),Tt=(0,i.wz)(Se=>{if(!Yt)return[];if(Nt.length)return[];const St=[];return Yt.forEach(Ce=>{if(Ce.id===Qt)return;const Ne=(0,Z.OL)(Se,Ce.id);(0,Te.F)(Ne)||St.push(Ce)}),St}),sn=(0,n.useMemo)(()=>Tt.map(Se=>Se.id),[Tt]),mn=(0,i.wz)(Se=>{if(!fn)return[];if(Qt)return[];const St=[];return fn.forEach(Ce=>{if(Ce.id===bt||Nt.includes(Ce.id))return;const Ne=(0,G.nv)(Se,Ce.id);(0,ke.A)(Ne)||(0,Me.oy)(Ne)||St.push(Ce)}),St}),wt=(0,n.useMemo)(()=>mn.map(Se=>Se.id),[mn]),On=(0,n.useMemo)(()=>{const Ce=wt.length*60,Ne=32,ze=sn.length*Ne;return Math.min(Math.max(Ce,ze),240)},[sn,wt]),Zt=(0,n.useCallback)(Se=>{if(!Se.id)return;(0,Pe.A)(Se.id)?Dt(Se.id):pt(Se.id)},[Dt,pt]),Mn=(0,n.useCallback)(Se=>{const St=Tt[Se];if(St)return n.createElement("div",{className:"p-huddle_start_suggestion_tabs__menu_item_button__list_entity"},n.createElement(J.A,{channelId:St.id}))},[Tt]),Wn=(0,n.useCallback)(()=>n.createElement(K.A,{disableHeight:!0},Se=>{let{width:St}=Se;return n.createElement(ie.A,{"aria-label":X.t("Channel"),keys:sn,rowRenderer:Mn,onItemClick:Zt,width:St,height:On})}),[Zt,Mn,sn,On]),xn=(0,n.useCallback)(Se=>{const St=mn[Se];if(St)return n.createElement("div",{className:"p-huddle_start_suggestion_tabs__menu_item_button__list_entity"},n.createElement(W.A,{id:St.id}))},[mn]),gn=(0,n.useCallback)(()=>n.createElement(K.A,{disableHeight:!0},Se=>{let{width:St}=Se;return n.createElement(ie.A,{"aria-label":X.t("People"),keys:wt,rowRenderer:xn,onItemClick:Zt,width:St,height:On})}),[Zt,xn,wt,On]),[An,vt]=(0,n.useState)(ne.PEOPLE),xt=(0,n.useCallback)(Se=>{vt(Se)},[]);(0,n.useEffect)(()=>{An===ne.PEOPLE&&Qt?vt(ne.CHANNEL):An===ne.CHANNEL&&Nt.length&&vt(ne.PEOPLE)},[An,Qt,Nt]);const Vt=(0,n.useMemo)(()=>{const Se=[];return wt.length&&Se.push({title:X.t("People"),id:ne.PEOPLE,content:gn()}),sn.length&&Se.push({title:X.t("Channels",{fallbackHash:"879f0b1bef59eeebf78cfd3a22f6f8077810cecf"}),id:ne.CHANNEL,content:Wn()}),Se},[sn,wt,Wn,gn]);return Mt?null:n.createElement("div",{className:"p-huddle_start_suggestion_tabs"},n.createElement(q.A,{fullHeight:!0,tabs:Vt,currentTabId:An,onTabChange:xt,tabMenuClassnames:"p-huddle_start_suggestion_tabs__tab_menu"}))},"HuddleStartSuggestionTabs");fe.displayName="HuddleStartSuggestionTabs";const be=n.memo(fe);var Be=e(10709),We=e(649695),Re=e(761326),ve=e(963275);const xe=new g.Ay("huddles"),He=n.memo(Le=>{let{error:Mt}=Le;const Dt=(0,i.d4)(bt=>(0,G.nv)(bt,Mt.invitedMemberId)),pt=(0,i.d4)(bt=>(0,Ee.sE)(bt,Dt));if(!(0,i.d4)(v.TM))return null;let Nt=xe.t("{userName} could not be invited to the Huddle.",{userName:pt});return Mt.inviteRejectionReason===ve.g.RecipientHuddlesDisabled&&(Nt=xe.t("{userName} could not be invited as Huddles is not enabled for them.",{userName:pt})),n.createElement(o.Ay,{level:"error"},Nt)});function je(){return je=Object.assign||function(Le){for(var Mt=1;Mt<arguments.length;Mt++){var Dt=arguments[Mt];for(var pt in Dt)Object.prototype.hasOwnProperty.call(Dt,pt)&&(Le[pt]=Dt[pt])}return Le},je.apply(this,arguments)}l(je,"_extends");var Ke;(function(Le){Le.COMPOSER="composer",Le.PUBLIC_CHANNEL="public_channel",Le.PRIVATE_CHANNEL="private_channel"})(Ke||(Ke={}));function ht(Le){let{channel:Mt}=Le;return Mt?Mt&&(0,O.Zp)(Mt)?Ke.PRIVATE_CHANNEL:Ke.PUBLIC_CHANNEL:Ke.COMPOSER}l(ht,"getModalContext");const dt=new g.Ay("huddles"),Ve={[w.ze.SUPPORT_UPGRADE_DECISION_TRIAL_EXPIRING_SOON_HUDDLES_BANNER]:{component:n.lazy(()=>Promise.resolve().then(e.bind(e,791762)))}};function Je(Le){let{closeModal:Mt,callId:Dt,channel:pt,channelSuggestion:Qt,memberSuggestionId:Nt,selectedMemberIds:bt=_.Ml}=Le;const Yt=(0,s.wA)(),fn=(0,d.A)(),Tt=ht({channel:pt}),sn=Tt===Ke.PRIVATE_CHANNEL,mn=Tt===Ke.COMPOSER,[wt,On]=(0,n.useState)(bt),[Zt,Mn]=(0,n.useState)(),[Wn,xn]=(0,n.useState)(!1),[gn,An]=(0,n.useState)(!1),vt=(0,i.d4)(v.TM),[xt,Vt]=(0,n.useState)(void 0),Se=(0,i.d4)(A.WR),St=(0,i.d4)(F.H7),Ce=(0,V.tc)(St),Ne=(0,i.d4)(x.iH),ze=(0,i.d4)(nt=>(0,We.$)(nt,(pt==null?void 0:pt.id)||"")),Oe=(0,i.d4)(v.Si),Fe=(0,i.d4)(Re.SX),_t=Fe===Re.mF.TREATMENT_1,ft=Fe===Re.mF.TREATMENT_2,Ct=_t||ft,$t=(0,i.d4)(nt=>(0,D.Hp)(nt,w.xu.HUDDLE_INVITE_MODAL)),rn=(0,i.Z2)(nt=>(0,B.ft)(nt,pt==null?void 0:pt.id).filter(qe=>qe.id!==Se).map(qe=>qe.id)),un=(0,i.d4)(E.pl),hn=(0,i.Z2)(nt=>sn?wt.filter(qe=>{const Kt=pt&&(0,y.Sv)(nt,pt.id,qe);return Kt&&Kt.isKnown&&!(Kt!=null&&Kt.isMember)}):[]);(0,n.useEffect)(()=>{Qt&&Mn({id:Qt.id,isCurrentSuggestedChannel:!0})},[Qt]),(0,n.useEffect)(()=>{Nt&&On([Nt])},[Nt]);const pn=(0,n.useCallback)(nt=>On(nt),[]),Tn=(0,n.useCallback)(nt=>{if(nt===(Zt==null?void 0:Zt.id)&&(Zt!=null&&Zt.isCurrentSuggestedChannel)){Mn({id:nt,isCurrentSuggestedChannel:!0});return}Mn({id:nt,isCurrentSuggestedChannel:!1})},[Zt==null?void 0:Zt.id,Zt==null?void 0:Zt.isCurrentSuggestedChannel]),Qn=(0,n.useCallback)(nt=>{On(wt.concat(nt))},[wt]),zn=(0,n.useCallback)(()=>{Mn({id:pt==null?void 0:pt.id,isCurrentSuggestedChannel:!0})},[pt==null?void 0:pt.id]),Hn=(0,n.useCallback)(()=>{Zt!=null&&Zt.id&&(Yt((0,M.A)({channelId:Zt.id,entryPoint:C.su.COMPOSER_HUDDLE_START})),Mt())},[Zt,Yt,Mt]),Kn=(0,n.useCallback)((0,t.coroutine)(function*(){xn(!0),yield Yt((0,f.r)({memberIds:wt})).then(nt=>{Yt((0,M.A)({channelId:nt.id,entryPoint:C.su.COMPOSER_HUDDLE_START})),Mt(),xn(!1),An(!1)}).catch(nt=>{fn.error(nt),xn(!1);const{message:qe}=nt;(qe==null?void 0:qe.indexOf(p.O3.INVALID_USER_COMBINATION))!==-1&&An(!0)})}),[wt,Yt,fn,Mt]),os=(0,n.useCallback)((0,t.coroutine)(function*(){if(!pt)return;xn(!0);let nt=wt;(Zt==null?void 0:Zt.id)===pt.id&&(Zt!=null&&Zt.isCurrentSuggestedChannel)&&(nt=(0,a.A)([...wt,...ze])),yield Yt((0,I.A)({channelId:pt.id,userIds:nt})).then(()=>{xn(!1),hn&&hn.length>0&&sn?Yt((0,ue.A)({members:hn})):Mt()}).catch(qe=>{fn.error(qe),xn(!1),vt&&Vt(qe)})}),[pt,ze,Mt,Yt,vt,sn,fn,Zt==null?void 0:Zt.id,Zt==null?void 0:Zt.isCurrentSuggestedChannel,wt,hn]),et=(0,n.useMemo)(()=>Tt===Ke.COMPOSER?Zt!=null&&Zt.id?Hn:Kn:os,[os,Kn,Tt,Zt,Hn]),Et={[Ke.COMPOSER]:{eventId:L.EventId.HUDDLES_COMPOSER_HEADER_CLICKED,uiStep:L.UiStep.HUDDLE_COMPOSER_INVITES_SENT,elementName:"huddle_composer_dialog",entryPoint:"composer"},[Ke.PUBLIC_CHANNEL]:{eventId:L.EventId.HUDDLES_PUBLIC_CHANNEL_INVITE,elementName:"huddle_public_channel_invite"},[Ke.PRIVATE_CHANNEL]:{eventId:L.EventId.HUDDLES_PRIVATE_CHANNEL_INVITE,elementName:"huddle_private_channel_invite"}},we=l(()=>{if(Ce&&!Oe)return n.createElement(te.A,null);if(Ne&&!Ct)return n.createElement(Y.A,null);if(Ct){const nt=$t===w.ze.SUPPORT_UPGRADE_DECISION_TRIAL_EXPIRING_SOON_HUDDLES_BANNER;if(Ne&&!nt)return n.createElement(Y.A,null)}return null},"maybeRenderBanner");we.displayName="maybeRenderBanner";const tt=Et[Tt],Rt=(0,n.useMemo)(()=>mn?dt.t("Start a Huddle"):wt.length>1?dt.t("Send Invites"):dt.t("Send Invite"),[mn,wt]);if(!un)return null;const It=dt.t("You can invite people from outside this private conversation, but they may have restricted access to messages."),Jt=l(nt=>n.createElement(S.A,{articleId:4402059015315,ariaLabel:dt.t("Learn more about Huddles"),forceOpenInBrowser:!0},nt),"renderLearnMoreLink");let an,Ft,Vn,Pt;const Xe=l(nt=>{const qe=nt.map(Kt=>n.createElement(u.A,{key:Kt,isBold:!1,id:Kt}));return qe&&(0,g.jd)(qe)},"listifiedOverflowMembers");if(Xe.displayName="listifiedOverflowMembers",Ce&&Oe)Ft=dt.t("Invite someone to your huddle"),an=sn?dt.rt("You\u2019re on the free version of Slack, so only one other person can join you in a huddle. You can invite anyone until someone joins \u2014 they won\u2019t be added to {channelName}. <a>Learn more</a>",{channelName:n.createElement(_e.A,{channel:pt}),"<a>":nt=>{let{text:qe}=nt;return Jt(qe)}}):dt.rt("You\u2019re on the free version of Slack, so only one other person can join you in a huddle. They\u2019ll receive a notification to join. <a>Learn more</a>",{"<a>":nt=>{let{text:qe}=nt;return Jt(qe)}});else if(mn?(Ft=dt.t("Start a Huddle"),Vn=dt.t("Find a person or channel to huddle with")):(Ft=dt.t("Invite people to your huddle"),Vn=sn?It:dt.t("You can invite whomever you\u2019d like to the huddle, and they\u2019ll receive a notification to join.")),pt!=null&&pt.id&&rn.length){const nt=dt.rt("{participants, plural, =0 {{firstParticipant} and <b>you</b> are} =1 {{firstParticipant}, {secondParticipant}, and <b>you</b> are} other {{firstParticipant}, {secondParticipant}, <a>and # others</a> are}} in this huddle.",{participants:rn.length-1,firstParticipant:n.createElement(u.A,{isBold:!0,id:rn[0]}),secondParticipant:n.createElement(u.A,{isBold:!0,id:rn[1]}),"<a>":qe=>{let{text:Kt}=qe;return n.createElement(m.Ay,{zIndex:"above_fs",tip:Xe(rn.slice(2))},n.createElement("span",null,Kt))}});Pt=n.createElement("div",{className:"p-huddle_invite_channel_or_start__active_members_container"},n.createElement(Be.i,{channelId:pt.id,className:"p-huddle_invite_channel_or_start__avatar_stack",avatarSize:c.RG.tiny,excludeIcon:!0,excludeMemberOverflowCount:!0,maxMembers:3}),n.createElement("div",null,nt))}const Ze=vt&&xt!==void 0,lt="huddle-invite-description";return n.createElement(h.dW,{overlayClassName:"p-huddle_invite_modal_shared_styles__overlay",closeModal:Mt,contentLabel:Ft,describedby:lt,shouldReturnFocusAfterClose:!0,dataQa:"huddle_invite_channel_modal"},n.createElement(h.rQ,null,n.createElement(h.Rc,{title:Ft,subtitle:Vn})),n.createElement(h.$m,null,n.createElement(h.qf,null,Pt,an&&n.createElement("p",{id:lt},an),n.createElement(H.A,{isFreeTeam:Ce,experimentHuddlesInviteModalFreemiumImprovementsGroupOn:Oe,channel:pt,otherMembersInHuddle:rn,onSelectedMembersChange:pn,onSelectedChannelChange:Tn,selectedMemberIds:wt,selectedChannel:Zt}),sn&&hn&&hn.length>0&&n.createElement(re,{unknownMemberIds:hn}),gn&&n.createElement(o.Ay,{"data-qa":"huddle-invite-invalid-user-combo-alert",level:"error"},dt.t("All external people must already be in at least one channel together to send this invitation.")),Ze&&n.createElement(He,{error:xt})),Dt&&n.createElement(N.A,{activeHuddleCallId:Dt,channel:pt,isFreeTeam:Ce,onSuggestedUserSelected:Qn,otherMembersInHuddle:rn,selectedMemberIds:wt,onChannelSelected:zn,channelSuggestionOptionSelected:Zt==null?void 0:Zt.isCurrentSuggestedChannel}),!Dt&&n.createElement(be,{isFreeTeam:Ce,onSuggestedChannelSelected:Tn,onSuggestedUserSelected:Qn,selectedChannelId:Zt==null?void 0:Zt.id,selectedMemberIds:wt}),we(),n.createElement(R.Ay,{spaceName:w.xu.HUDDLE_INVITE_MODAL,notifications:Ve})),n.createElement(h.jl,null,n.createElement(h.ox,{className:"p-huddle_invite_channel_or_start_footer_actions"},n.createElement(U.A,{channelId:pt==null?void 0:pt.id}),n.createElement(h.s_,{type:"outline",className:"p-huddle_invite_channel_or_start_footer_actions_close"},dt.t("Cancel")),n.createElement(P.A,je({},tt,{clogImpression:!0}),n.createElement(r.lV,{"data-qa":"send_invite_button",loading:Wn,onClick:et,type:"primary",disabled:!wt.length&&!(Zt!=null&&Zt.id)},Rt)))),Oe&&Ce&&n.createElement(ae.A,{selectedMemberIds:wt}))}l(Je,"HuddleInviteChannelOrStart"),Je.displayName="HuddleInviteChannelOrStart";const Ge=Je},466390:(j,T,e)=>{"use strict";e.d(T,{A:()=>u});var t=e(296540),n=e(463329),s=e(649098),a=e(927675),c=e(813436);const r=new s.Ay("huddles"),o=l(m=>{let{channelId:i}=m;const d=(0,n.wA)(),_=(0,t.useCallback)(()=>{d((0,c.r)({channelId:i}))},[d,i]);return i?t.createElement(a.Ay,{onClick:_,type:"outline",className:"p-huddle_invite_link_button__copy_link"},r.t("Copy Huddle Link")):null},"HuddleInviteLinkButton");o.displayName="HuddleInviteLinkButton";const u=o},655523:(j,T,e)=>{"use strict";e.d(T,{A:()=>P});var t=e(238798),n=e(532395),s=e(45798),a=e(649098),c=e(296540),r=e(917780),o=e(292443),u=e(894940),m=e(463329),i=e(121714),d=e(945756),_=e(275154),h=e(187824),p=e(282233),A=e(831730),v=e(435932),E=e(197603),f=e(586869),g=e(413033),y=e(364009);const I=new a.Ay("trials_highlight_paid_features"),O={onClick:{enableClogAction:!0},elementName:"start_trial"},M={elementName:"upgrade_link",onClick:{enableClogAction:!0}},C=l(L=>{let{selectedMemberIds:x=s.Ml}=L;const F=(0,m.wA)(),V=u.ZO.PaidFeatureTrial,B=u.zG.Vhq,D=(0,r.d4)(Z=>(0,v.hq)(Z,V,B)),S=(0,r.d4)(Z=>(0,v.bp)(Z,V,B)),R=(0,r.d4)(p.Si),w=(0,c.useCallback)(()=>{F((0,A.Ov)(x))},[F,x]),Y=(0,c.useCallback)(()=>{F((0,d.A)({uiComponentVariant:n.UiComponentVariant.HUDDLES_INVITE_MODAL_FOOTER,onSpeedbumpContinue:w}))},[F,w]);if((0,c.useEffect)(()=>{F((0,E.A)({campaignType:V,campaignSubType:B,reason:"huddle_invite_modal",context:f.y.huddleInviteModal}))},[F,V,B]),!R||S)return null;const Q=D?I.rt("To use huddles with more people, <a>start a free trial.</a>",{"<a>":Z=>{let{text:ee}=Z;return c.createElement(o.A,{"data-qa":"huddle_invite_modal_footer_banner_cta",onClick:Y,autoClogProps:O},ee)}}):I.rt("To use huddles with more people, <a>see upgrade options.</a>",{"<a>":Z=>{let{text:ee}=Z;return c.createElement(i.A,{"data-qa":"huddle_invite_modal_footer_banner_cta",autoClogProps:M,useLink:!0},ee)}});return c.createElement(t.A,{eventId:n.EventId.UPGRDEXP_HIGHLIGHT_PAID_FEATURES,uiComponentName:n.UiComponentName.HUDDLE_INVITE_MODAL_FREE_BANNER,clogImpression:!0},c.createElement("div",{className:"p-huddle_invite_modal_footer_banner"},c.createElement(_.A,{variant:h.G.HuddlesFreemium,promoType:V,promoSubtype:B,uiComponentVariant:n.UiComponentVariant.HUDDLES_INVITE_MODAL_FOOTER,toolTipZIndex:g.m.AboveFullScreen,toolTipPosition:y.yX.Bottom}),c.createElement("span",{className:"margin_left_50"},Q)))},"HuddleInviteModalFooterBanner");C.displayName="HuddleInviteModalFooterBanner";const P=C},749206:(j,T,e)=>{"use strict";e.d(T,{A:()=>d});var t=e(296540),n=e(649098),s=e(532395),a=e(238798),c=e(850108),r=e(393586),o=e(64942);const u=new n.Ay("trials_highlight_paid_features"),m=l(_=>{let{text:h}=_;return t.createElement(c.A,{articleId:4402059015315,ariaLabel:u.t("Learn more about Huddles")},h)},"AlertBannerHelpLink"),d=l(()=>t.createElement(a.A,{eventId:s.EventId.UPGRDEXP_HIGHLIGHT_PAID_FEATURES,uiComponentName:s.UiComponentName.HUDDLE_INVITE_MODAL_FREE_BANNER,clogImpression:!0},t.createElement("div",{className:"p-huddle_invite_modal_banner"},t.createElement(r.A,{theme:o.B.NONE,"data-qa":"huddle_invite_modal_free_banner"},u.rt("You\u2019re on the free version of Slack, so only one other person can join you in a huddle. <a>Learn more</a>",{"<a>":m,fallbackHash:"302b7b76d1085ff1532e888a72d2b35f253d5e82"})))),"HuddleInviteModalFreeBanner")},709802:(j,T,e)=>{"use strict";e.d(T,{A:()=>M});var t=e(296540),n=e(917780),s=e(649098),a=e(957188),c=e(439886),r=e(396386),o=e(36911),u=e(492630),m=e(43335),i=e(325846);const d=new s.Ay("huddles");var _;(function(C){C.CHANNEL="channel",C.MEMBER="member"})(_||(_={}));function h(C){let{id:P,entity:L,channel:x,huddleId:F}=C,V;(0,m.A)(P)?V=_.CHANNEL:(0,i.A)(P)&&(V=_.MEMBER);const B=(0,n.d4)(Z=>x&&(0,o.Sv)(Z,x.id,P)),D=B&&B.isKnown&&(B==null?void 0:B.isMember),S=x&&(0,r.JM)(x),R=(0,n.d4)(Z=>(0,u.Ck)(Z,F,P)),w=!!R&&R==="joining_soon";let Y=null;if(R?Y=w?d.t("Joining soon"):d.t("Invited"):x&&S&&!D?Y=d.t("Not in conversation"):x&&!S&&!D&&(Y=d.t("Not in channel")),!V)return null;let Q;return V===_.CHANNEL?Q=t.createElement(a.A,{channelId:P,channel:L}):V===_.MEMBER&&(Q=t.createElement(c.A,{id:P,member:L,showPresence:!0,secondaryContent:Y})),t.createElement("div",{className:"display_flex"},Q)}l(h,"HuddleInviteMultiSelectRenderOption"),h.displayName="HuddleInviteMultiSelectRenderOption";const p=(0,t.memo)(h);var A=e(13513),v=e(449156),E=e(448368),f=e(204258),g=e(45798);function y(){return y=Object.assign||function(C){for(var P=1;P<arguments.length;P++){var L=arguments[P];for(var x in L)Object.prototype.hasOwnProperty.call(L,x)&&(C[x]=L[x])}return C},y.apply(this,arguments)}l(y,"_extends");const I=new s.Ay("huddles"),O=l(C=>{let{isFreeTeam:P,experimentHuddlesInviteModalFreemiumImprovementsGroupOn:L,channel:x,otherMembersInHuddle:F,onSelectedMembersChange:V,onSelectedChannelChange:B,selectedMemberIds:D=g.Ml,selectedChannel:S}=C;const R=(0,E.cw)(f.E9),w=(0,t.useMemo)(()=>B&&!x&&!P&&!(D!=null&&D.length),[x,P,B,D]),Y=(0,t.useMemo)(()=>S!=null&&S.id&&S.isCurrentSuggestedChannel?!0:!(S!=null&&S.id),[S]),Q=(0,t.useMemo)(()=>({entities:{...w&&{channels:{canPost:!0,includeArchived:!1}},...Y&&{members:{includeSelf:!1,includeSlackbot:!1,includeBots:!1},userGroups:!1}},sort:{frecency:!0,preferChannelMembers:!0,preferChannelsUserBelongsTo:!0,currentChannel:x},allowEmptyQuery:!0,filter:ce=>!F.includes(ce.id)}),[w,Y,x,F]),Z=(0,t.useCallback)(ce=>{B&&(0,m.A)(ce.value)?B(ce.value):V([ce.value])},[B,V]),ee=(0,t.useCallback)(ce=>{const de=[];let oe;ce.forEach($=>{(0,m.A)($.value)?(!oe||$.value!==(S==null?void 0:S.id))&&(oe=$.value):de.push($.value)}),B==null||B(oe),V(de)},[B,V,S]),_e=(0,t.useCallback)(ce=>{let{value:de,entity:oe}=ce;return t.createElement(p,{channel:x,id:de,entity:oe,huddleId:R})},[x,R]),Ee=(0,t.useCallback)(ce=>{let{value:de}=ce;return(0,m.A)(de)?t.createElement(a.A,{channelId:de}):t.createElement(c.A,{id:de,showAvatar:!0})},[]),G=(0,t.useMemo)(()=>({className:"padding_top_50 padding_bottom_50",searcherOptions:Q,renderOption:_e,selectId:"invite_participants",size:"medium",width:"100%",expandOnFocus:P,focusOnMount:!0}),[Q,_e,P]),Ae=(0,t.useMemo)(()=>{const ce=D.map(de=>({value:de}));return S!=null&&S.id&&ce.push({value:S.id}),ce},[S,D]);return P&&L?t.createElement(v.uR,y({},G,{onOptionSelected:Z,placeholderText:I.t("Find someone to invite\u2026"),renderSelectedOption:Ee,selectedOption:Ae[0]})):t.createElement(A.h7,y({},G,{onSelectedItemsChange:ee,selectedOptions:Ae,placeholderText:I.t("Search by name")}))},"HuddleInviteModalSelect");O.displayName="HuddleInviteModalSelect";const M=O},90869:(j,T,e)=>{"use strict";e.d(T,{A:()=>N});var t=e(296540),n=e(917780),s=e(448368),a=e(42302),c=e(45798),r=e(911764),o=e(885850),u=e(204258),m=e(47801),i=e(396386),d=e(325303),_=e(612104),h=e(69115),p=e(463329),A=e(927675),v=e(94689),E=e(36911),f=e(163177),g=e(488455),y=e(199291),I=e(428852),O=e(741323),M=e(113574),C=e(282233),P=e(649098),L=e(710596),x=e(369391),F=e(246634),V=e(437556),B=e(292443),D=e(709349);const S=new P.Ay("huddles");function R(K){let{members:W,createNewMpim:J}=K;var q,ie,Te;const Me=(0,n.Z2)(Ie=>W.map(X=>(0,F.sE)(Ie,(0,V.nv)(Ie,X.slackId))));if(!W)return null;const ke=Me&&Me.slice(3),Pe=S.rt("{unknownMembers, plural, =1 {<strong>{name1}</strong>} =2 {<strong>{name1}</strong> and <strong>{name2}</strong>} =3 {<strong>{name1}</strong>, <strong>{name2}</strong>, and <strong>{name3}</strong>} other {<strong>{name1}</strong>, <strong>{name2}</strong>, <strong>{name3}</strong> and <strong>{numOthers}</strong> more}} won\u2019t be able to see messages sent in thread because this huddle began in a direct message. You can <a>start a new huddle</a> instead.",{unknownMembers:W.length,name1:t.createElement(D.A,{slackId:(q=W[0])===null||q===void 0?void 0:q.slackId}),name2:t.createElement(D.A,{slackId:(ie=W[1])===null||ie===void 0?void 0:ie.slackId}),name3:t.createElement(D.A,{slackId:(Te=W[2])===null||Te===void 0?void 0:Te.slackId}),numOthers:t.createElement(g.Ay,{zIndex:"above_fs",position:"top",tip:(0,P.jd)(ke)},t.createElement("span",null,W.length-3))},Ie=>{let{text:X,tag:ne}=Ie;return ne==="a"?t.createElement(B.A,{onClick:J},X):null});return t.createElement(x.Ay,{level:x.A_.info,type:x.QE.custom},Pe)}l(R,"HuddleInviteMpimAlert"),R.displayName="HuddleInviteMpimAlert";const w=R;var Y=e(435932),Q=e(129318),Z=e(934861),ee=e(196548),_e=e(238798),Ee=e(532395),G=e(850108),Ae=e(994319),ce=e(749206),de=e(655523),oe=e(709802),$=e(466390),re=e(213954);const ue=new P.Ay("huddles"),te={elementName:"learn_more",onClick:{enableClogAction:!0}};function ae(K){let{closeModal:W,callId:J,channelId:q,selectedMemberIds:ie=c.Ml}=K;const Te=(0,p.wA)(),Me=(0,v.A)(),ke=(0,n.d4)(M.WR),Pe=(0,n.d4)(m.pl),Ie=(0,n.d4)(bt=>(0,o.OL)(bt,q)),X=(0,n.d4)(C.Si),ne=(0,n.Z2)(bt=>(0,O.ft)(bt,q).filter(Yt=>Yt.id!==ke).map(Yt=>Yt.id)),[fe,be]=(0,t.useState)(ie),[Be,We]=(0,t.useState)(!1),Re=(0,n.Z2)(bt=>!q||!(fe!=null&&fe.length)?[]:fe.filter(fn=>{const Tt=(0,E.Sv)(bt,q,fn);return Tt&&Tt.isKnown&&!(Tt!=null&&Tt.isMember)?fn:!1})),ve=(0,n.d4)(Q.H7),xe=(0,Z.tc)(ve),He=(0,n.d4)(Y.iH),je=(0,t.useCallback)(bt=>{be(bt)},[]),Ke=(0,t.useCallback)(bt=>{be(fe.concat(bt))},[fe]),ht=(0,t.useMemo)(()=>{const bt=(0,L.Hd)(Ie);return Array.isArray(bt)?bt:[]},[Ie]),dt=ht.filter(bt=>bt!==ke),Ve=(0,t.useCallback)((0,_.coroutine)(function*(){if(!q)return;let bt=fe.concat(ne);return ht&&(bt=(0,h.A)(bt,ht)),Te((0,ee.x)({channelId:q,memberIds:bt})).then(()=>{W()}).catch(Yt=>{Me.error(Yt),We(!1)})}),[q,fe,ne,ht,Te,W,Me]),Je=(0,t.useCallback)((0,_.coroutine)(function*(){if(!q)return;We(!0);const bt=fe.concat(ne);return Te((0,f.A)({channelId:q,userIds:bt})).then(()=>{W()}).catch(Yt=>{Me.error(Yt),We(!1)})}),[q,W,Te,Me,ne,fe]),Ge=l(()=>xe&&!X?t.createElement(ce.A,null):He?t.createElement(Ae.A,null):null,"maybeRenderBanner");Ge.displayName="maybeRenderBanner";let Le,Mt,Dt,pt;const Qt=l(bt=>{const Yt=bt.map(fn=>t.createElement(y.A,{key:fn,isBold:!1,id:fn}));return Yt&&(0,P.jd)(Yt)},"listifiedOverflowMembers");Qt.displayName="listifiedOverflowMembers",xe&&X?(Le=ue.t("Invite someone else to your huddle"),Dt=ue.rt("{participants, plural, =0 {<b>{firstParticipant}</b> is} =1 {<b>{firstParticipant}</b> and <b>{secondParticipant}</b> were} other {<b>{firstParticipant}</b> <a>and # others</a> were}} already invited, but {participants, plural, =0 {hasn\u2019t} =1 {haven\u2019t} other {haven\u2019t}} joined. ",{participants:(dt==null?void 0:dt.length)-1,firstParticipant:t.createElement(y.A,{isBold:!1,id:dt[0]}),secondParticipant:t.createElement(y.A,{isBold:!1,id:dt[1]}),"<a>":bt=>{let{text:Yt}=bt;return t.createElement(g.Ay,{zIndex:"above_fs",tip:Qt(dt==null?void 0:dt.slice(1))},t.createElement("span",null,Yt))},"<b>":bt=>{let{text:Yt}=bt;return t.createElement("b",null,Yt)}}),pt=ue.rt("You\u2019re on the free version of Slack, so only one other person can join you in a huddle. Invite anyone until someone joins. <a>Learn more</a>",{"<a>":bt=>{let{text:Yt}=bt;return t.createElement(G.A,{articleId:4402059015315,ariaLabel:ue.t("Learn more about Huddles"),forceOpenInBrowser:!0,autoClogProps:te},Yt)},fallbackHash:"53e44c4bd8bcf67461de7b54ef1ec275b05f4829"})):(Le=ue.t("Invite people to your huddle"),Mt=ue.t("You can invite people from outside this private conversation, but they may have restricted access to messages."));const Nt=(0,t.useMemo)(()=>fe.length>1?ue.t("Send Invites"):ue.t("Send Invite"),[fe]);return!Pe||!q?null:t.createElement(I.dW,{overlayClassName:"p-huddle_invite_modal_shared_styles__overlay",closeModal:W,contentLabel:Le,shouldReturnFocusAfterClose:!0},t.createElement(I.rQ,null,t.createElement(I.Rc,{title:Le,subtitle:Mt})),t.createElement(I.$m,null,t.createElement(I.qf,null,(Dt||pt)&&t.createElement("p",null,Dt,pt),t.createElement(oe.A,{isFreeTeam:xe,experimentHuddlesInviteModalFreemiumImprovementsGroupOn:X,channel:Ie,otherMembersInHuddle:ne,onSelectedMembersChange:je,selectedMemberIds:fe}),(Re==null?void 0:Re.length)>0&&t.createElement(w,{members:Re.map(bt=>({slackId:bt})),createNewMpim:Ve})),t.createElement(re.A,{activeHuddleCallId:J,channel:Ie,isFreeTeam:xe,onSuggestedUserSelected:Ke,otherMembersInHuddle:ne,selectedMemberIds:fe}),Ge()),t.createElement(I.jl,null,t.createElement($.A,{channelId:q}),t.createElement(I.ox,null,t.createElement(I.s_,{type:"outline"},ue.t("Cancel")),t.createElement(_e.A,{clogImpression:!0,eventId:Ee.EventId.HUDDLES_MPIM_INVITE},t.createElement(A.lV,{loading:Be,onClick:Je,type:"primary",disabled:!fe.length},Nt)))),X&&xe&&t.createElement(de.A,{selectedMemberIds:fe}))}l(ae,"HuddleInviteMpim"),ae.displayName="HuddleInviteMpim";const H=ae;function U(K){let{closeModal:W=a.A,selectedMemberIds:J=c.Ml}=K;const q=(0,n.d4)(m.pl),ie=(0,s.cw)(u.E9),Te=(0,s.cw)(u.hc),Me=(0,n.d4)(ke=>(0,o.OL)(ke,Te));return q?(0,i.JM)(Me)?t.createElement(H,{callId:ie,channelId:Te,closeModal:W,selectedMemberIds:J}):t.createElement(d.A,{callId:ie,channel:Me,closeModal:W,selectedMemberIds:J}):null}l(U,"HuddleInviteOrStartModal"),U.displayName="HuddleInviteOrStartModal";const N=(0,r.A)(U,{isStackable:!0})},213954:(j,T,e)=>{"use strict";e.d(T,{A:()=>_e});var t=e(296540),n=e(877500),s=e(454346),a=e(24064),c=e(917780),r=e(113574),o=e(36911),u=e(437556),m=e(492630),i=e(671566),d=e(96432),_=e(697807),h=e(616125),p=e(710596),A=e(396386),v=e(658160),E=e(974576),f=e(23219),g=e(832859),y=e(183469),I=e(649098),O=e(157056),M=e(470670);const C=new I.Ay("huddles");var P;(function(Ee){Ee[Ee.Channel=0]="Channel",Ee[Ee.Here=1]="Here"})(P||(P={}));const L=l(Ee=>{let{variation:G}=Ee;const Ae=(0,t.useMemo)(()=>{const ce=G===P.Channel?C.t("@channel",{fallbackHash:"879f0b1bef59eeebf78cfd3a22f6f8077810cecf"}):C.t("@here",{fallbackHash:"879f0b1bef59eeebf78cfd3a22f6f8077810cecf"}),de=G===P.Channel?C.t("Invite every member in this channel",{fallbackHash:"356143f00ea36746c3a9c41765b940644ca651cf",fallbackHashNs:"broadcast_keywords"}):C.t("Invite every online member in this channel",{fallbackHash:"d6f32ea27e0fd9186b386de54a63fc72a17a2075",fallbackHashNs:"broadcast_keywords"});return t.createElement("div",{className:"p-huddle_invite_channel_list_entity"},t.createElement("div",{className:"p-huddle_invite_channel_list_entity__icon_container"},t.createElement(h.A,{name:"mentions",size:"24",variation:"large"})),t.createElement("div",{className:"p-huddle_invite_channel_list_entity_text_container"},t.createElement("span",{className:"c-base_entity__text p-huddle_invite_channel_list_entity__title"},ce),t.createElement("span",{className:"c-base_entity__subtext"},de)))},[G]);return t.createElement("div",{className:"p-huddle_invite_suggestion_tabs__menu_item_button__list_entity"},t.createElement(O.A,{size:M.ny.medium,padding:M.FK.normal,primaryContent:Ae}))},"HuddleInviteChannelListEntity");L.displayName="HuddleInviteChannelListEntity";const x=L;var F=e(566254),V=e(741323),B=e(45798),D=e(167094),S=e(47801);const R=new I.Ay("huddles");var w;(function(Ee){Ee.SUGGESTIONS="suggestions",Ee.INVITED="invited"})(w||(w={}));function Y(Ee,G,Ae,ce,de,oe,$){return!(!Ee||G||Ae||Ee===ce||de.includes(Ee)||oe.includes(Ee)||$.includes(Ee))}l(Y,"shouldSuggestMember");const Q="channelEntityId",Z="channelHereEntityId",ee=l(Ee=>{let{activeHuddleCallId:G,channel:Ae,isFreeTeam:ce,onSuggestedUserSelected:de,onChannelSelected:oe,onChannelHereSelected:$,otherMembersInHuddle:re,selectedMemberIds:ue,channelSuggestionOptionSelected:te=!1}=Ee;const ae=(0,c.d4)(r.WR),H=(0,c.d4)(Ge=>(0,F.q8)(Ge,Ae==null?void 0:Ae.id)),U=(0,c.d4)(S.df),N=(0,n.A)(H,"counts.member_count")||void 0,K=(0,A.JM)(Ae),W=(0,c.d4)(V.Sx),J=(0,c.d4)(Ge=>(0,m.k9)(Ge,G)),q=(0,c.d4)(Ge=>(0,m.I1)(Ge,G)),Te=W+1+J+q,Me=(0,c.Z2)(Ge=>(0,m.Kx)(Ge,G)),ke=(0,t.useMemo)(()=>Me?Object.keys(Me):[],[Me]),Pe=ke.length,Ie=25,X=(0,c.Z2)(Ge=>(0,g.A)(Ge,(Ae==null?void 0:Ae.id)||"",Ie,Ie,!0).map(Mt=>Mt.id));let ne=[];if((0,A.LI)(Ae)){const Ge=(0,v.e)(Ae);Ge&&ne.push(Ge)}else if((0,A.yz)(Ae)){const Ge=(0,p.Ug)(Ae);Ge&&Ge.length&&(ne=[...Ge])}else ne=X;const fe=(0,c.wz)(Ge=>{if(te||!ne||!ne.length)return B.Ml;const Le=[];return ne.forEach(Mt=>{const Dt=(0,u.nv)(Ge,Mt);Y(Mt,(0,E.A)(Dt),(0,f.oy)(Dt),ae,re,ke,ue)&&Le.push({id:Mt,isMemberOfChannel:!0})}),Le}),be=(0,c.wz)(y.mc),Be=(0,c.wz)(Ge=>{if(!be||!be.length)return B.Ml;const Le=[];return be.forEach(Mt=>{const Dt=(0,u.nv)(Ge,Mt.id);if(!Y(Mt.id,(0,E.A)(Dt),(0,f.oy)(Dt),ae,re,ke,ue)||ne.includes(Mt.id))return;const pt=Ae&&(0,o.Sv)(Ge,Ae.id,Mt.id),Qt=pt&&pt.isKnown&&pt.isMember;Le.push({id:Mt.id,isMemberOfChannel:Qt})}),Le}),We=(0,t.useMemo)(()=>!oe||(0,A.PC)(Ae)?!1:N<=D.XG&&Te+N<=U&&!te,[N,te,Te,U,oe,Ae]),Re=(0,t.useMemo)(()=>fe.length>=Ie?fe.slice(0,Ie):[...fe,...Be].slice(0,Ie),[fe,Be]),ve=(0,t.useMemo)(()=>Re.map(Ge=>Ge.id),[Re]),xe=(0,t.useMemo)(()=>(0,s.A)(Re,"id"),[Re]),He=(0,t.useMemo)(()=>Math.min(60*Math.max(Pe,ve.length),240),[ve,Pe]),je=(0,t.useCallback)((Ge,Le)=>{if(Le.key===Q)return t.createElement(x,{variation:P.Channel});if(Le.key===Z)return t.createElement(x,{variation:P.Here});const Mt=xe[Le.key];if(!Mt)return;let Dt=null;return Mt.isMemberOfChannel===!1&&(K?Dt=R.t("Not in conversation"):Dt=R.t("Not in channel")),t.createElement("div",{className:"p-huddle_invite_suggestion_tabs__menu_item_button__list_entity"},t.createElement(i.A,{id:Mt.id,secondaryContent:Dt}))},[K,xe]),Ke=(0,t.useCallback)(Ge=>{if(Ge.id){if(Ge.id===Q){oe&&oe();return}if(Ge.id===Z){$&&$();return}de(Ge.id)}},[$,oe,de]),ht=(0,t.useCallback)(()=>{let Ge=ve;return We&&(Ge=[Q,...ve]),t.createElement(a.A,{disableHeight:!0},Le=>{let{width:Mt}=Le;return t.createElement(_.A,{"aria-label":R.t("Suggested"),keys:Ge,rowRenderer:je,onItemClick:Ke,width:Mt,height:He})})},[We,je,ve,Ke,He]),dt=(0,t.useCallback)(Ge=>{const Le=ke[Ge],Mt=Me==null?void 0:Me[Le];if(!Mt)return null;const Dt=Mt==="joining_soon",pt=t.createElement("div",{className:"p-huddle_invite_suggestion_tabs__menu_item__pending_status_container"},t.createElement(h.A,{name:Dt?"clock":"paper-plane",size:"20"}),t.createElement("span",null,Dt?R.t("Joining soon"):R.t("Invited")));return t.createElement("div",{className:"p-huddle_invite_suggestion_tabs__menu_item__list_entity"},t.createElement(i.A,{id:Le,secondaryContent:pt}))},[ke,Me]),Ve=(0,t.useCallback)(()=>t.createElement(a.A,{disableHeight:!0},Ge=>{let{width:Le}=Ge;return t.createElement(_.A,{"aria-label":R.t("Invited"),keys:ke,rowRenderer:dt,width:Le,height:He})}),[ke,dt,He]),Je=(0,t.useMemo)(()=>{const Ge=[];return ve.length&&Ge.push({title:R.t("Suggested"),id:w.SUGGESTIONS,content:ht()}),Ge.push({title:R.t("Invited"),id:w.INVITED,titleCount:Pe,content:Ve()}),Ge},[ve,Pe,Ve,ht]);return!G||ce?null:t.createElement("div",{className:"p-huddle_invite_suggestion_tabs"},t.createElement(d.A,{fullHeight:!0,tabs:Je,tabMenuClassnames:"p-huddle_invite_suggestion_tabs__tab_menu"}))},"HuddleInviteSuggestionTabs");ee.displayName="HuddleInviteSuggestionTabs";const _e=t.memo(ee)},433290:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>E,Gr:()=>v,Lv:()=>i,jc:()=>p,z2:()=>A});var t=e(612104),n=e.n(t),s=e(649098),a=e(944780),c=e(622800),r=e(114946),o=e(921055),u=e(406176);const m=new s.Ay("huddles"),i="LOUNGE_MUSIC_PLAYER",d=[r.N3,r._4,r.j1,r._V,r.PM,r.tn,r.uu,r.jc];var _;(function(f){f.WaitingRoom="waiting",f.Subway="subway",f.Whistle="whistle",f.Jazz="jazz",f.Focus="focus",f.DiscoParty="disco",f.Zen="zen",f.Nature="nature"})(_||(_={}));const h=_.Jazz,p=l(f=>f?!!Object.values(_).includes(f):!1,"isValidSongKey"),A=l(f=>(0,o.ty)(f,u.Mz)||h,"getSongKeyFromUserPref"),v=l(()=>({[_.WaitingRoom]:{key:_.WaitingRoom,urlName:"waitingRoom",url:r.tn,displayName:m.t("Waiting Room")},[_.Subway]:{key:_.Subway,urlName:"subwayMusic",url:r.PM,displayName:m.t("Subway Music")},[_.Whistle]:{key:_.Whistle,urlName:"whistleTune",url:r.jc,displayName:m.t("Whistle Tune")},[_.Jazz]:{key:_.Jazz,urlName:"waitingMuzak",url:r.uu,displayName:m.t("Smooth Jazz")},[_.Focus]:{key:_.Focus,urlName:"focusBeats",url:r._4,displayName:m.t("Focus Beats")},[_.DiscoParty]:{key:_.DiscoParty,urlName:"discoParty",url:r.N3,displayName:m.t("Happy Bass")},[_.Zen]:{key:_.Zen,urlName:"momentOfZen",url:r.j1,displayName:m.t("Sound Bath")},[_.Nature]:{key:_.Nature,urlName:"natureMeditation",url:r._V,displayName:m.t("Nature Meditation")}}),"getSongsMetadata");let E=l(class $s{static getInstance(g){let{experimentHuddlesLoungeMusicPlayerGroupOn:y}=g;return $s.instance||($s.instance=new $s({experimentHuddlesLoungeMusicPlayerGroupOn:y})),$s.instance}constructor({experimentHuddlesLoungeMusicPlayerGroupOn:g}){this.getCurrentTrackDisplayName=()=>{const I=d[this.activeTrackIndex],O=v(),M=Object.values(O).find(C=>C.url===I);return M==null?void 0:M.displayName};var y=this;this.playMusic=(0,t.coroutine)(function*(){let{songKey:I,registerOnEndedCallback:O,audioOutputDeviceId:M,logger:C,fromFirstTrack:P,loopSong:L}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{registerOnEndedCallback:!1,fromFirstTrack:!0,loopSong:!1};P&&(y.activeTrackIndex=0),O&&d.forEach(B=>{(0,c.TQ)(B,{ended:y.playNextTrack})});let x=d[y.activeTrackIndex];const F=(0,c.Dd)(x);if(I){var V;F&&(0,c.ds)(x);const D=(V=v()[I])===null||V===void 0?void 0:V.url,S=D?d.findIndex(R=>R===D):-1;S>-1&&(x=D,y.activeTrackIndex=S)}if(M&&F)try{yield F.setSinkId(M),C==null||C.info(a.o7,`setSinkId success for lounge music on deviceID: ${M}`)}catch{C==null||C.info(a.o7,`setSinkId failed for lounge music on deviceID: ${M}`)}(0,c.ZH)(x,{loop:!!L})}),this.stopMusic=I=>{let{clearOnEndedCallback:O,logger:M,logContext:C}=I;O&&d.forEach(P=>{(0,c.Rj)(P,"ended",this.playNextTrack)}),(0,c.ds)(d[this.activeTrackIndex],{logFailure:!1}),M.info(a.o7,`stopped lounge music [${C}]`)},this.incrementActiveTrackIndex=()=>{this.activeTrackIndex<d.length-1?this.activeTrackIndex+=1:this.activeTrackIndex=0},this.playNextTrack=()=>{(0,c.ds)(d[this.activeTrackIndex]),this.incrementActiveTrackIndex(),(0,c.ZH)(d[this.activeTrackIndex],{loop:!1})},this.activeTrackIndex=0,this.experimentHuddlesLoungeMusicPlayerGroupOn=g}},"HuddleLoungeMusicManager")},143658:(j,T,e)=>{"use strict";e.d(T,{A:()=>h});var t=e(296540),n=e(298559),s=e(605556),a=e.n(s),c=e(449677),r=e(539044),o=e(494030),u=e(730563),m=e(846850);const i={className:a().string,closeModal:a().func.isRequired},d={className:void 0};function _(p){return t.createElement(c.A,{className:p.className,closeModal:p.closeModal},t.createElement(r.A,null,t.createElement(o.A,null,t.createElement("div",{className:"c-lazy_modal"},t.createElement(u.A,null)))))}l(_,"LoadingModal"),_.displayName="LoadingModal",_.propTypes=i,_.defaultProps=d;const h=(0,n.N)(null,p=>({closeModal:function(){for(var A=arguments.length,v=new Array(A),E=0;E<A;E++)v[E]=arguments[E];return p((0,m.O)(...v))}}))(_)},622:(j,T,e)=>{"use strict";e.d(T,{WJ:()=>m,eW:()=>u,fJ:()=>h,g2:()=>_,kY:()=>i,oE:()=>o});var t=e(795093),n=e.n(t),s=e(68975),a=e(649098),c=e(535518);const r=new a.Ay("lists");var o;(function(p){p.Today="today",p.Yesterday="yesterday",p.Tomorrow="tomorrow",p.ThisWeek="this_week",p.NextWeek="next_week",p.LastWeek="last_week",p.SinceILastViewed="since_i_last_viewed"})(o||(o={}));const u=l(p=>!p.options||p.options.dateFormat===s.cf.Default?c.Wl:p.options.dateFormat,"getDateFormat"),m=l(p=>Object.values(o).includes(p),"isDateFilterOption"),i=l(p=>{switch(p){case o.Today:return r.t("Today");case o.Yesterday:return r.t("Yesterday");case o.Tomorrow:return r.t("Tomorrow");case o.ThisWeek:return r.t("This week");case o.NextWeek:return r.t("Next week");case o.LastWeek:return r.t("Last week");case o.SinceILastViewed:return r.t("Since last time you viewed");default:return p}},"formatDateForMenu"),d=l(p=>{const A=n()(p).startOf("isoWeek"),v=n()(p).endOf("isoWeek"),E=[];let f=A;for(;f<=v;)E.push(f),f=f.clone().add(1,"days");return E},"getWeekdays"),_=l(p=>{let A;switch(p){case o.Today:A=n()().format(c.DX);break;case o.Yesterday:A=n()().subtract(1,"days").format(c.DX);break;case o.Tomorrow:A=n()().add(1,"days").format(c.DX);break;case o.ThisWeek:A=d(n()()).map(v=>v.format(c.DX));break;case o.NextWeek:A=d(n()().add(1,"weeks")).map(v=>v.format(c.DX));break;case o.LastWeek:A=d(n()().subtract(1,"weeks")).map(v=>v.format(c.DX));break;case o.SinceILastViewed:A=n()().format(c.DX);break;default:A=p}return A},"getStaticDateValue"),h=n()().format(c.DX)},24175:(j,T,e)=>{"use strict";e.d(T,{OQ:()=>v,PL:()=>u,R8:()=>y,UE:()=>p,Ui:()=>A,aI:()=>h,aN:()=>E,bV:()=>_,bw:()=>d,lx:()=>f,nM:()=>g,rD:()=>i});var t=e(54930),n=e(46996),s=e(6970),a=e(784295),c=e(389703),r=e(649098);const o=new r.Ay("lists"),u=l((I,O)=>I.indexOf(O)===-1?[...I,O]:I.filter(C=>C!==O),"toggleValueInFilterValues"),m=l(I=>{if(!I.length)return I;const O=I==null?void 0:I.flatMap(C=>C.split("|"));return[...new Set(O)]},"parseUserIdsAndRemoveDupes"),i=l((I,O)=>{const M=[];return Object.values(I).forEach(P=>{if(P.fields&&P.fields[O]){const L=P.fields[O];M.push(L.trim())}}),[s._4,...m(M)]},"getUserIdsInUserColumns"),d=l((I,O,M)=>{const C=I.map(L=>(0,t.A)(L,[M])),P=O.map(L=>(0,t.A)(L,[M]));return(0,n.A)(C,P)},"isLocalAndServerFilterSortsEqual"),_=l((I,O)=>{var M;const C=O.get((M=I.key)!==null&&M!==void 0?M:"");return C?!(0,n.A)(C.operator,I.operator)||!(0,n.A)(new Set(C.values),new Set(I.values)):!0},"isFilterUnsavedOrModified"),h=l(I=>{let O=I;return Boolean(O.find(C=>C.type===a.$.CreatedTime))||(O=[...O,{id:a.$.CreatedTime,name:"Created time",key:a.$.CreatedTime,type:a.$.CreatedTime,isPrimaryColumn:!1}]),O},"appendCreatedTimeDataColumn"),p=l(I=>{switch(I.type){case a.$.Checkbox:case a.$.Completed:case a.$.Message:return[c.t.IsEmpty,c.t.IsNotEmpty];case a.$.Assignee:case a.$.CreatedBy:case a.$.LastEditedBy:case a.$.Rating:case a.$.Select:case a.$.User:case a.$.Text:return[c.t.Contains,c.t.DoesNotContain,c.t.IsEmpty,c.t.IsNotEmpty];case a.$.Currency:case a.$.Number:return[c.t.Equal,c.t.NotEqual,c.t.GreaterThan,c.t.LessThan,c.t.IsEmpty,c.t.IsNotEmpty];default:return[c.t.Equal,c.t.NotEqual,c.t.IsEmpty,c.t.IsNotEmpty]}},"getOperatorsFromColumn"),A=l(I=>I.type===a.$.Checkbox,"isCheckboxFilter"),v=l(I=>I.type===a.$.Completed,"isCompletedFilter"),E=l(I=>I.operator===c.t.IsEmpty||I.operator===c.t.IsNotEmpty,"isEmptyOperator"),f=l(I=>I.operator===c.t.IsMe||I.operator===c.t.IsNotMe,"isMeOperator"),g=l(I=>I.type===a.$.Date||I.type===a.$.DueDate||I.type===a.$.CreatedTime||I.type===a.$.LastEditedTime,"isDateFilter"),y=l((I,O)=>{switch(I){case c.t.IsEmpty:return A(O)?o.t("is not checked"):v(O)?o.t("Not completed"):o.t("is empty");case c.t.IsNotEmpty:return A(O)?o.t("is checked"):v(O)?o.t("Completed"):o.t("is not empty");case c.t.Equal:return g(O)?o.t("is"):o.t("is equal to");case c.t.NotEqual:return g(O)?o.t("is not"):o.t("is not equal to");case c.t.GreaterThan:return g(O)?o.t("is after"):o.t("is greater than");case c.t.LessThan:return g(O)?o.t("is before"):o.t("is less than");case c.t.GreaterThanOrEqual:return o.t("is greater than or equal to");case c.t.LessThanOrEqual:return o.t("is less than or equal to");case c.t.Contains:return o.t("includes");case c.t.DoesNotContain:return o.t("does not include");case c.t.IsMe:return o.t("is me");case c.t.IsNotMe:return o.t("is not me");default:return""}},"getFilterOperatorLabel")},81350:(j,T,e)=>{"use strict";e.d(T,{AO:()=>ce,Hs:()=>ae,Jn:()=>I,M1:()=>$,Nh:()=>Ae,Po:()=>D,Q6:()=>R,Rw:()=>H,Sb:()=>oe,c$:()=>ue,g2:()=>te,iT:()=>re,kv:()=>Y,u1:()=>de,us:()=>Ee});var t=e(784045),n=e(219477),s=e(23514),a=e(194092),c=e(795093),r=e.n(c),o=e(6970),u=e(622),m=e(784295),i=e(389703),d=e(3477),_=e(838942),h=e(888260),p=e(68975),A=e(787789),v=e(824680),E=e(342604),f=e(323795),g=e(535518),y=e(289123);const I=l(U=>{let{record:N,colKey:K}=U;var W,J,q,ie,Te;return!(N==null||(W=N.fallback)===null||W===void 0)&&W[K]?N.fallback[K]:!(N==null||(J=N.fields)===null||J===void 0||(q=J.fallback)===null||q===void 0)&&q[K]?N==null||(ie=N.fields)===null||ie===void 0||(Te=ie.fallback)===null||Te===void 0?void 0:Te[K]:N[K]?(0,A.A)(N[K])?N[K][0].elements[0].elements[0].text:N[K].toString():""},"getStringValue"),O=l(U=>{const N=r()(U).startOf("isoWeek"),K=r()(U).endOf("isoWeek"),W=[];let J=N;for(;J<=K;)W.push(J),J=J.clone().add(1,"days");return W},"getWeekdays"),M=l((U,N)=>{const K="YYYY-MM-DD";let W;switch(U){case u.oE.Today:W=r()().format(K);break;case u.oE.Yesterday:W=r()().subtract(1,"days").format(K);break;case u.oE.Tomorrow:W=r()().add(1,"days").format(K);break;case u.oE.ThisWeek:W=O(r()()).map(q=>q.format(K));break;case u.oE.NextWeek:W=O(r()().add(1,"weeks")).map(q=>q.format(K));break;case u.oE.LastWeek:W=O(r()().subtract(1,"weeks")).map(q=>q.format(K));break;case u.oE.SinceILastViewed:return W=r().unix(N),W;default:W=r()(U,K).format(K)}return Array.isArray(W)?W.map(q=>r()(q,K)):r()(W,K)},"convertDynamicDateToStatic"),C=l(function(U,N,K){let W=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const J=W?N:N==null?void 0:N.clone().startOf("day"),q=W?K:K==null?void 0:K.clone().startOf("day");switch(U){case i.t.NotEqual:return!(J!=null&&J.isSame(q));case i.t.GreaterThan:return J==null?void 0:J.isBefore(q);case i.t.GreaterThanOrEqual:return J==null?void 0:J.isSameOrBefore(q);case i.t.LessThan:return J==null?void 0:J.isAfter(q);case i.t.LessThanOrEqual:return J==null?void 0:J.isSameOrAfter(q);case i.t.Equal:default:return J==null?void 0:J.isSame(q)}},"multiDateOperatorFilterValueCheck"),P=l((U,N,K,W,J)=>{if(!N.values[0])return U;let q=K;const ie=N.values[0]===u.oE.SinceILastViewed;return ie&&(q=i.t.GreaterThan),U.filter(Te=>{if(J!=null&&J.has(Te.id))return!0;const Me=Te[N.key];let ke=Me?r()(Me).startOf("day"):void 0;return isNaN(Me)||(ke=r().unix(Me)),N.values.some(Pe=>{if(!Pe)return!1;const Ie=M(Pe.toString(),W);return Array.isArray(Ie)?q===i.t.NotEqual?!Ie.some(X=>X&&ke?X.clone().startOf("day").isSame(ke):!1):Ie.some(X=>X&&ke?C(q,X,ke):!1):Ie&&ke?C(q,Ie,ke,ie):!1})})},"multiDateFilter"),L=l((U,N,K,W)=>{const J=N.values[0]||"";return U.filter(q=>{if(W!=null&&W.has(q.id))return!0;const ie=q[N.key]||"";switch(K){case i.t.DoesNotContain:return!ie.toLowerCase().includes(J.toString().toLowerCase());case i.t.Contains:default:return ie.toLowerCase().includes(J.toString().toLowerCase())}})},"textFilter"),x=l((U,N,K,W)=>{const J=N.values[0]||"";return U.filter(q=>{if(W!=null&&W.has(q.id))return!0;const ie=I({record:q,colKey:N.key});switch(K){case i.t.DoesNotContain:return!ie.toLowerCase().includes(J.toString().toLowerCase());case i.t.Contains:default:return ie.toLowerCase().includes(J.toString().toLowerCase())}})},"richTextFilter"),F=l((U,N,K,W)=>{if(!N.values.length)return U;var J;const q=Number((J=N.values[0])!==null&&J!==void 0?J:"");return U.filter(ie=>{if(W!=null&&W.has(ie.id))return!0;var Te;const Me=Number((Te=ie[N.key])!==null&&Te!==void 0?Te:"");if(!(q&&!Me))switch(K){case i.t.NotEqual:return Me!==q;case i.t.GreaterThan:return Me>q;case i.t.GreaterThanOrEqual:return Me>=q;case i.t.LessThan:return Me<q;case i.t.LessThanOrEqual:return Me<=q;case i.t.Equal:default:return Me===q}})},"numberFilter"),V=l((U,N,K,W)=>{const J=new Set(N.values);return J.size?U.filter(q=>{if(W!=null&&W.has(q.id))return!0;var ie;const Te=String((ie=q[N.key])!==null&&ie!==void 0?ie:"");switch(K){case i.t.Contains:return J.has(Te);case i.t.DoesNotContain:return!J.has(Te);case i.t.IsEmpty:return Te===null;case i.t.IsNotEmpty:return Te!==null;default:return!0}}):U},"multiRatingFilter"),B=l((U,N,K,W,J,q)=>{const ie=N.values.map(Me=>Me===o._4&&q?q:Me),Te=new Set(ie);return Te.size?U.filter(Me=>{if(J!=null&&J.has(Me.id))return!0;const ke=Me[N.key],Pe=(ke??"").split(o.eY).filter(Boolean);let Ie=!1;for(const X of Pe){if(Te.has(X)){Ie=!0;break}if(!W)break}return K===i.t.Equal?Ie:K===i.t.NotEqual?!Ie:K===i.t.Contains?Ie:K===i.t.DoesNotContain?!Ie:!0}):U},"multiOptionFilter");function D(U){return U===0?!1:!U||Array.isArray(U)&&U.length===0}l(D,"isEmptyValue");const S=l((U,N,K,W,J,q)=>{let ie=U;return N.forEach(Te=>{const Me=K.find(X=>X.key===Te.key);if(!Me)return;const ke=Te.operator;if(ke===i.t.IsEmpty){ie=ie.filter(X=>q!=null&&q.has(X.id)?!0:D(X[Te.key]));return}if(ke===i.t.IsNotEmpty){ie=ie.filter(X=>q!=null&&q.has(X.id)?!0:!D(X[Te.key]));return}switch(Me.type){case m.$.Text:ie=x(ie,Te,ke,q);break;case m.$.Email:case m.$.Phone:ie=L(ie,Te,ke,q);break;case m.$.Number:case m.$.Currency:ie=F(ie,Te,ke,q);break;case m.$.Rating:ie=V(ie,Te,ke,q);break;case m.$.Date:case m.$.DueDate:case m.$.CreatedTime:case m.$.LastEditedTime:ie=P(ie,Te,ke,J,q);break;case m.$.Checkbox:case m.$.Completed:return;case m.$.Select:var Pe;ie=B(ie,Te,ke,((Pe=Me.options)===null||Pe===void 0?void 0:Pe.format)===p.YP.MultiSelect,q);break;case m.$.Channel:case m.$.Canvas:case m.$.User:case m.$.Assignee:case m.$.CreatedBy:case m.$.LastEditedBy:switch(ke){case i.t.IsMe:ie=ie.filter(X=>{var ne;return q!=null&&q.has(X.id)?!0:(ne=X[Te.key])===null||ne===void 0?void 0:ne.includes(W)});break;case i.t.IsNotMe:ie=ie.filter(X=>{var ne;return q!=null&&q.has(X.id)?!0:!(!((ne=X[Te.key])===null||ne===void 0)&&ne.includes(W))});break;default:var Ie;ie=B(ie,Te,ke,((Ie=Me.options)===null||Ie===void 0?void 0:Ie.format)===p.hx.MultiEntity,q,W)}break;default:ie=L(ie,Te,ke,q);break}}),ie},"applyFiltersToRecords"),R=new Map([[m.$.Text,""],[m.$.Email,""],[m.$.Date,""],[m.$.Checkbox,!1],[m.$.Completed,!1],[m.$.Number,0],[m.$.Rating,0],[m.$.CreatedTime,0],[m.$.LastEditedTime,0],[m.$.Channel,""],[m.$.User,""],[m.$.CreatedBy,""],[m.$.LastEditedBy,""]]);function w(U){if(!Array.isArray(U)||U.length===0)return"";const N=l(K=>{for(const W of K){if(W.type==="text"&&W.text)return W.text;if(W.elements&&Array.isArray(W.elements)){const J=N(W.elements);if(J)return J}}return""},"findTextRecursively");for(const K of U)if(K.elements&&Array.isArray(K.elements)){const W=N(K.elements);if(W)return W}return""}l(w,"extractFirstTextElement");const Y=l((U,N,K,W)=>{const J=N.map(Me=>Me.ascending?"asc":"desc"),q=new Map;for(const Me of K)if(Me.type===m.$.Select){var ie;const ke=((ie=Me.options)===null||ie===void 0?void 0:ie.choices)||[];for(let Pe=0;Pe<ke.length;Pe++){const Ie=ke[Pe],X=`${Me.key}:${Ie.value}`;q.set(X,Pe)}}const Te=N.map(Me=>ke=>{const Pe=K.find(Be=>Be.key===Me.key),Ie=Me.ascending;if(!Pe)return"";const X=ke[Me.key];let ne=X??R.get(Pe.type||m.$.Text);if(ne==null&&(ne=Ie?Number.MAX_SAFE_INTEGER:-1/0),Pe.type===m.$.Select){var fe;const Be=(((fe=Pe.options)===null||fe===void 0?void 0:fe.choices)||[]).length,We=(X??"").split(o.eY).filter(Boolean);if(Be===0||We.length===0)ne=Ie?Number.MAX_SAFE_INTEGER:-1/0;else{let Re=Be;for(const ve of We){const xe=`${Pe.key}:${ve}`;var be;const He=(be=q.get(xe))!==null&&be!==void 0?be:Be;Re=Math.min(Re,He)}Re<Be?ne=Re:ne=Ie?Number.MAX_SAFE_INTEGER:-1/0}}if(Pe.type===m.$.User&&W&&(X==null||X===""?ne=Ie?"zzzzzzzz":"":W[X]?ne=W[X].toLowerCase():ne=Ie?"zzzzzzzz":""),Pe.type===m.$.Text&&(X==null||X===""||Array.isArray(X)&&X.length===0?ne=Ie?"zzzzzzzz":"":typeof X=="string"?ne=X.toLowerCase():ne=w(X).toLowerCase()),Pe.type===m.$.Vote){const Be=(X??"").split(o.eY).filter(Boolean);Be.length>0?ne=Be.length:Ie?ne=Number.MAX_SAFE_INTEGER:ne=-1/0}if((Pe.type===m.$.Number||Pe.type===m.$.Currency||Pe.type===m.$.Rating)&&(X==null||X===""?ne=Ie?Number.MAX_SAFE_INTEGER:-1/0:ne=Number(X)),Pe.type===m.$.Date||Pe.type===m.$.DueDate||Pe.type===m.$.CreatedTime||Pe.type===m.$.LastEditedTime){const Be=new Date(X);X==null||X===""?ne=Ie?Number.MAX_SAFE_INTEGER:-1/0:isNaN(Be.getTime())||(ne=Be.getTime())}return ne});return(0,t.A)(U,Te,J)},"applySortToRecords"),Q=new Set([m.$.Text,m.$.Email,m.$.Phone,m.$.Number,m.$.Rating,m.$.Select,m.$.User]),Z=l((U,N,K,W)=>{const J=N.filter(ke=>Q.has(ke.type)),q=new Map;for(const ke of J)if(ke.type===m.$.Select){var ie,Te;const Pe=(Te=(ie=ke.options)===null||ie===void 0?void 0:ie.choices)!==null&&Te!==void 0?Te:[];for(const{value:Ie,label:X}of Pe){const ne=`${ke.key}:${Ie}`;q.set(ne,X)}}const Me=K.toLowerCase();return U.filter(ke=>(0,n.A)(J,Pe=>{const Ie=I({record:ke,colKey:Pe.key});if(Pe.type===m.$.Select){var X;let be=Ie.split(o.eY).filter(Boolean);((X=Pe.options)===null||X===void 0?void 0:X.format)===p.YP.MultiSelect||(be=be.slice(0,1));for(const We of be){const Re=`${Pe.key}:${We}`;var ne;if(((ne=q.get(Re))!==null&&ne!==void 0?ne:Ie).toLowerCase().includes(Me))return!0}}if(Pe.type===m.$.User&&W){var fe;const be=(fe=W[Ie])!==null&&fe!==void 0?fe:"";return be&&be.toLowerCase().includes(Me)}return Ie.toLowerCase().includes(Me)}))},"applySearchStringToRecords"),ee=l(U=>{let{listRecords:N,records:K}=U;return K.map(W=>{const J=N==null?void 0:N[W.id];return{...W,highlightAsNew:J==null?void 0:J.highlightAsNew}})},"applyHighlightAsNew"),_e=l(U=>{let{listRecords:N,records:K}=U;return K.map(W=>{const J=N==null?void 0:N[W.id];return{...W,isOpenInFlexpane:J==null?void 0:J.isOpenInFlexpane}})},"applyIsOpenInFlexpane"),Ee=l(U=>{let{listRecords:N,records:K,schema:W,filterObj:J,sorts:q,searchString:ie,lastReadTimestamp:Te,bottomRecordIds:Me,userNames:ke}=U,Pe=K;if(J){const{filters:Ie,currentUserId:X}=J;Pe=S(Pe,Ie,W,X,Te,Me)}return q&&(Pe=Y(Pe,q,W,ke)),ie&&(Pe=Z(Pe,W,ie,ke)),Pe=ee({listRecords:N,records:Pe}),Pe=_e({listRecords:N,records:Pe}),Pe},"applyModifiersToRecords");function G(U,N,K){const W=(0,y.Ld)(U,N,K);return W&&!(0,h.A)(W)&&!(0,_.aw)(W)&&!(0,_.aH)(W)}l(G,"isValidMarkedMessageForListThread");function Ae(U,N,K){return(0,s.A)((0,a.A)(K,W=>G(U,N,W)))}l(Ae,"maxRealTsForListThread");function ce(U,N,K,W){const J=(0,g.Dv)(W,Object.values(K)),q=J.get(U==null?void 0:U.id),ie=J.get(N==null?void 0:N.id);let Te=null,Me=null;if(U&&N){if(q)Te=q;else{var ke,Pe;Te=!((ke=K[U.id])===null||ke===void 0)&&ke.position?`${(Pe=K[U.id])===null||Pe===void 0?void 0:Pe.position}`:null}if(ie)Me=ie;else{var Ie,X;Me=!((Ie=K[N.id])===null||Ie===void 0)&&Ie.position?`${(X=K[N.id])===null||X===void 0?void 0:X.position}`:null}}else if(U)if(q)Te=q;else{var ne,fe;Te=!((ne=K[U.id])===null||ne===void 0)&&ne.position?`${(fe=K[U.id])===null||fe===void 0?void 0:fe.position}`:null}else if(N)if(ie)Me=ie;else{var be,Be;Me=!((be=K[N.id])===null||be===void 0)&&be.position?`${(Be=K[N.id])===null||Be===void 0?void 0:Be.position}`:null}return(0,E.TU)(Te,Me)}l(ce,"calculateFractionalRecordPosition");const de=l(U=>{var N;const K=(0,f.A)({input:U});return K&&K[0]&&K[0].offset===0&&((N=K[0].url)===null||N===void 0?void 0:N.length)===(U==null?void 0:U.length)?[{type:"rich_text",elements:[{type:"rich_text_section",elements:[{type:"link",url:K[0].url||""}]}]}]:[{type:"rich_text",elements:[{type:"rich_text_section",elements:[{type:"text",text:U||""}]}]}]},"convertStringToBlocks"),oe=l(U=>{if(U instanceof HTMLElement){if(U instanceof HTMLInputElement&&["checkbox","radio"].includes(U.type))return!0;if(["input","textarea","select"].includes(U.tagName.toLowerCase())||U.isContentEditable)return!1}return!0},"shouldHandleUndoFrom"),$=l((U,N)=>{const K=[];var W;const J=(W=(0,d.Df)(U))!==null&&W!==void 0?W:[],q=(0,d.Jq)(U).length||(0,d.Si)(U);return N.forEach((ie,Te)=>{const Me=J.some(fe=>(fe==null?void 0:fe.user_id)===(ie==null?void 0:ie.id));var ke;const Pe=(ke=ie==null?void 0:ie.is_profile_only_user)!==null&&ke!==void 0?ke:!1;var Ie;const X=(Ie=ie==null?void 0:ie.is_self)!==null&&Ie!==void 0?Ie:!1;!Pe&&!X&&!Me&&!q&&K.push(Te)}),K},"getRestrictedSelectedTokenIndexes"),re=l(U=>["created_time","created_by","last_edited_time","last_edited_by"].includes(U.type),"isMetaColumn"),ue=l((U,N)=>{if(!U)return"";const K=I({record:U,colKey:"name"});if(!K)return"";let W=(0,v.Kx)(K==null?void 0:K.toLowerCase().split(/[ :/-]/).filter(Boolean).join("-"));return W=W.split("-").filter(Boolean).join("-"),N&&!W.startsWith(N)&&(W=`${N}${W}`),W.slice(0,(0,v.zU)())},"generateChannelNameFromRecordName"),te=l((U,N)=>((N==null?void 0:N.editors)||[]).filter(K=>K!==U),"getListRecordChannelInitialInvitedMemberIds"),ae=l((U,N)=>{var K,W;return U?N&&(N.type===m.$.MultiSelect||N.type===m.$.Select&&(N==null||(K=N.options)===null||K===void 0?void 0:K.format)===p.YP.MultiSelect||(N.type===m.$.User||N.type===m.$.Channel||N.type===m.$.Canvas)&&(N==null||(W=N.options)===null||W===void 0?void 0:W.format)===p.hx.MultiEntity)?new Set(U.split(o.eY).filter(Boolean)):new Set([U]):new Set},"splitMultiValueField"),H=l(U=>U==null?void 0:U.includes("/lists/"),"isListLink")},759554:(j,T,e)=>{"use strict";e.d(T,{e:()=>r});var t=e(296540),n=e(528919),s=e(917780),a=e(180491),c=e(921055);const r=t.memo(t.forwardRef((o,u)=>{let{getAnimationImport:m,className:i,height:d,svgClassName:_,loadingClassName:h,errorClassName:p,loop:A=!1,autoplay:v=!1,renderLoading:E,renderError:f}=o;const g=(0,s.d4)(F=>(0,c.ty)(F,"a11y_animations")),[y,I]=(0,t.useState)(!0),[O,M]=(0,t.useState)(!1),C=(0,t.useRef)(null),P=(0,t.useRef)(null),L=(0,t.useRef)(null);L.current||(L.current=a.S.all([e.e("gantry-v2-async-lottie-web").then(e.t.bind(e,149891,23)),m()]).then(F=>{let[V,B]=F;if(!C.current)throw new Error("Lottie animation missing container");return I(!1),P.current=V.loadAnimation({container:C.current,renderer:"svg",loop:A,autoplay:!!(g&&v),animationData:B,rendererSettings:{className:(0,n.A)("p-lottie__svg",_)}}),a.S.resolve(P.current)}).catch(F=>(M(!0),a.S.reject(F)))),(0,t.useEffect)(()=>()=>{L.current&&L.current.cancel(),P.current&&P.current.destroy()},[L,P]),(0,t.useImperativeHandle)(u,()=>L.current,[L]);const x=(0,t.useMemo)(()=>y&&E?E():O&&f?f():null,[E,f,y,O]);return t.createElement("div",{ref:C,style:d!==void 0?{height:d}:void 0,className:(0,n.A)("p-lottie",i,y&&h,O&&p)},x)}))},603338:(j,T,e)=>{"use strict";e.d(T,{A:()=>m});var t=e(296540),n=e(42302),s=e(57957),a=e(46996),c=e(21879),r=e(337316);const o=4;function u(i){let{children:d,fallbackWidth:_=void 0,onResize:h=n.A}=i;const[p,A]=(0,t.useState)({width:0,height:0}),[v,E]=(0,t.useState)(!1),f=(0,t.useRef)([]);function g(I){let{width:O}=I;if(f.current.unshift(O),f.current.length<o)return!1;f.current.length>o&&(f.current.length=o);const M=(0,s.A)(f.current,2);return M.slice(1).every(C=>(0,a.A)(C,M[0]))}l(g,"looksLikeResizeLoop");const y=(0,t.useCallback)(I=>{h(I),A(I.bounds),(0,c.A)(_)&&!v&&E(g(I.bounds))},[_,h,v]);return t.createElement(r.A,{bounds:!0,onResize:y},I=>{let{measureRef:O}=I;return d({...p,width:v&&_?_:p.width,measureRef:O})})}l(u,"Measure"),u.displayName="Measure";const m=u},89286:(j,T,e)=>{"use strict";e.d(T,{$W:()=>D,sl:()=>R,Ay:()=>w});var t=e(296540),n=e(463329),s=e(917780),a=e(329981),c=e(787781),r=e(587365),o=e(89207),u=e(242098),m=e(269806),i=e(232120),d=e(238798),_=e(388288),h=e(452096),p=e(145511),A=e(135713),v=e(729268),E=e(313788),f=e(756120),g=e(619563),y=e(58324),I=e(131606),O=e(27556),M=e.n(O);const C={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",transform:"translate(-50%, -50%)",border:0,padding:0,background:"transparent"},overlay:{backgroundColor:"rgba(208, 208, 208, 0.4)",zIndex:1e4}};let P=l(class extends t.PureComponent{openModal(){this.setState(()=>({isModalOpen:!0}))}closeModal(){this.setState(()=>({isModalOpen:!1}))}render(){const{style:Q,isModalOpen:Z}=this.state;return t.createElement("div",{className:M().container,style:Q},t.createElement("span",{className:M().dispatcherViewerIcon,role:"button",tabIndex:0,"aria-label":"Open Viewer Modal",onClick:this.openModal}),t.createElement(y.A,{isOpen:Z,onRequestClose:this.closeModal,style:C}))}constructor(Q){super(Q),this.state={style:Q.style||{},isModalOpen:!1},(0,I.v)(this,["openModal","closeModal"])}},"DispatcherViewer");P.displayName="DispatcherViewer";const L=(0,g.A)(P),x=l(Y=>{const{children:Q}=Y,Z=!(0,f.KV)()||(0,f.b3)(),ee=(0,s.d4)(a.y$),_e=(0,n.wA)();return(0,t.useEffect)(()=>{const Ee=l(G=>{Z&&G.ctrlKey&&G.shiftKey&&G.key==="M"&&_e((0,h.cv)(!ee))},"handleKeydown");return window.addEventListener("keydown",Ee),()=>{window.removeEventListener("keydown",Ee)}},[ee,Z,_e]),t.createElement(t.Fragment,null,ee&&t.createElement("div",{className:M().dispatcherViewer},t.createElement(L,null)),Q)},"DispatcherToggle");x.displayName="DispatcherToggle";const F=(0,g.A)(x),V={isInMegaphoneContainerContext:!0},B={isInMegaphoneContainerContext:!1},D=(0,t.createContext)(B),S=l(Y=>{let{fetchDataOnMount:Q,notifications:Z,spaceName:ee,children:_e,shouldAlwaysRenderChildren:Ee,shouldPassPropsToChildren:G,channelScopedId:Ae,componentClassName:ce,...de}=Y;var oe;const $=(0,n.wA)(),re=(0,E.x)(),ue=(0,s.d4)(_.oY),te=(0,s.d4)(a.up),ae=(0,s.d4)(Me=>(0,A._Z)(Me,"megaphone_coachmark_suppression")==="on"),{isInsideModal:H}=(0,p.k)(),U=(0,s.d4)(Me=>(0,a.Hp)(Me,ee,Ae)),N=(0,s.d4)(Me=>(0,a.OL)(Me,ee,Ae)),K=(0,t.useCallback)(()=>{$((0,o.A)({notificationName:U,action:c.hw.IMPRESSION}))},[$,U]),W=(0,t.useCallback)(Me=>{$((0,m.A)({spaceName:ee,action:Me}))},[$,ee]),J=(0,t.useCallback)(()=>{$((0,u.iR)({event:{type:c.jo.REQUEST_SPACES,spaces:[ee]}}))},[$,ee]),q=l(()=>Ee?G&&t.isValidElement(_e)?t.cloneElement(_e,{...de}):t.createElement(F,null,_e):t.createElement(F,null,null),"maybeRenderChildren");q.displayName="maybeRenderChildren",(0,t.useEffect)(()=>{ee&&Q&&J()},[Q,ee,J]);const ie=Z==null||(oe=Z[U])===null||oe===void 0?void 0:oe.component,Te=ae&&ie&&!H&&ue&&ee===c.xu.IN_PRODUCT_COACHMARK;if(Te&&!te){$((0,h.co)(!0));const Me=re.createMetricsTrace({label:"megaphone",samplingOptions:{sampleType:v.tS.SESSION,sampleRate:.1}}),ke=Me.count({name:"megaphone_coachmark_suppress"});ke.addTags({notification:U}),ke.close(),re.reportTrace(Me)}return!ee||!U||ae&&ee===c.xu.IN_PRODUCT_COACHMARK&&te||Te?q():ie?t.createElement(d.A,{megaphoneSpaceName:ee,megaphoneNotificationName:U},t.createElement(D.Provider,{value:V},t.createElement(F,null,null),t.createElement(t.Suspense,{fallback:null},t.createElement(ie,{...N,recordNotificationEventImpression:K,recordAndClearNotificationEvent:W,notificationName:U,className:ce,channelScopedId:Ae,...de},_e)))):(Z||(0,r.h)({spaceName:ee,notificationName:U}),q())},"MegaphoneContainer");S.displayName="MegaphoneContainer";const R=(0,i.Ay)(S),w=S},715890:(j,T,e)=>{"use strict";e.d(T,{C:()=>t});const t={showStrangerProfile:!1,hideRestriction:!0,maybeShowPresenceIndicator:!1,maybeShowTitle:!1,maybeShowVerifiedFooter:!0,maybeShowEmailField:{showLabel:!1,showValue:!0},showFullProfileLink:!1,showOrganizationField:{showLabel:!0,showValue:!0},showProfilePicture:!0,showMemberProfileFields:!1,showMemberProfileButtons:!1}},868578:(j,T,e)=>{"use strict";e.d(T,{V:()=>n});var t=e(296540);class n extends t.PureComponent{render(){return t.createElement(t.Fragment,null,this.props.children)}}l(n,"PassThrough"),n.displayName="PassThrough"},999635:(j,T,e)=>{"use strict";e.d(T,{s:()=>E});var t=e(612104),n=e.n(t),s=e(674217),a=e(692232),c=e(20328),r=e(698645),o=e(127225),u=e(204505),m=e(544555),i=e(372135),d=e(54774),_=e(682520),h=e(78892),p=e(529734),A=e(286916),v=e(113956);const E=(0,s.Ay)("Opens a view in a new child window",function(){var f=(0,t.coroutine)(function*(g,y,I){let{viewId:O,params:M,clogParams:C}=I;if(!(0,h.M2)())return;const P=y();if((0,p.yZ)(P)&&(0,A.Xy)(O)){g((0,v.$)({viewId:O,params:M}));return}let L=!1;if((0,i.A)(P,O)){let x,F={[o.mq.Primary]:{id:O,params:M,viewType:(0,u.A)(O)}};F=g((0,r.VO)({viewSet:F,windowId:o.N2}));const V=(0,d.w2)(O),B=V;if(O==="thread"&&(M!=null&&M.threadId)){const D=(0,m.Sb)(M==null?void 0:M.threadId).channelId;L=!0,F={[o.mq.Primary]:{id:D||(M==null?void 0:M.entityId),params:void 0,viewType:a.D.Channel},[o.mq.Secondary]:{id:O,params:M,viewType:a.D.Thread}},x=o.mq.Secondary}O==="channel_canvas"&&(F={[o.mq.Primary]:{id:M==null?void 0:M.channelId,params:void 0,viewType:a.D.Channel},[o.mq.Secondary]:{id:"channel_canvas",params:M,viewType:a.D.ChannelCanvas}}),g((0,c.Bb)({viewSet:F,shouldNavigateInContext:V,shouldShowSearch:B,...x&&{containerOrigin:x},clogParams:C??{uiComponentName:origin,entryPoint:"cmd_click"},forceSingleColumnMode:L}))}else(0,_.Ay)({getState:y}).action("CHILD-WINDOWS","skipped opening a Conversation View because the ID is not supported:",O)});return function(g,y,I){return f.apply(this,arguments)}}());E.meta={name:"createThunk",key:"createThunkmaybeOpenInWindow",description:"Opens a view in a new child window"}},76084:(j,T,e)=>{"use strict";e.d(T,{O:()=>m});var t=e(296540),n=e(35113),s=e.n(n),a=e(110010),c=e(111330);function r(){return r=Object.assign||function(i){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var h in _)Object.prototype.hasOwnProperty.call(_,h)&&(i[h]=_[h])}return i},r.apply(this,arguments)}l(r,"_extends");const o=(0,c.eF)(c.vt.REACT_VIRTUALIZED,i=>s()(i));function u(i){let{refToForward:d,..._}=i;const{windowRef:h}=(0,t.useContext)(a.M),p=o(h.deref()).List;return t.createElement(p,r({ref:d},_))}l(u,"PortableReactVirtualizedList"),u.displayName="PortableReactVirtualizedList";const m=t.forwardRef((i,d)=>t.createElement(u,r({refToForward:d},i)))},307720:(j,T,e)=>{"use strict";e.d(T,{IM:()=>u,Mq:()=>i,VK:()=>r,XD:()=>o,av:()=>s,bI:()=>p,fd:()=>a,p6:()=>t,qA:()=>n,qH:()=>h,sS:()=>d,t2:()=>_,tH:()=>c,xA:()=>m});const t="use-theme-font",n="San Francisco Pro",s="Segoe UI",a='-apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"',c="Slack-Lato, Slack-Fractions,appleLogo,sans-serif",r="Arial",o="Courier",u="Open Dyslexic",m='"Comic Sans MS", cursive, sans-serif',i="Georgia",d="Noto Sans, sans-serif",_="Verdana",h="Lato",p={default:!0,fontFamily:c,label:h,value:"lato"}},515822:(j,T,e)=>{"use strict";e.d(T,{A:()=>o});var t=e(296540),n=e(934861),s=e(404296),a=e(744199),c=e(241697);const r=l(u=>{let{invitingTeam:m}=u;const i=m.domain&&`${(0,n.k7)(m.id,m.domain)}.${(0,c.Xk)()}`,d=t.createElement(s.A,{id:m.id,team:m,shouldMaybeOpenOrgCard:!0,shouldMaybeShowVerified:!0,bold:!0,tabIndex:i?0:void 0});return i?t.createElement(a.Ay,{tip:i},t.createElement("span",null,d)):d},"InvitingTeamName");r.displayName="InvitingTeamName";const o=r},12532:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(296540),n=e(787917),s=e(744199);const a=l(r=>{let{invitingUser:o,showEmailTooltip:u=!0}=r;var m;const i=o==null||(m=o.profile)===null||m===void 0?void 0:m.email,d=u&&i,_=t.createElement(n.A,{member:o,skipPrefCompliance:!0,tabIndex:d?0:void 0});return d?t.createElement(s.Ay,{tip:i},_):_},"InvitingUserName");a.displayName="InvitingUserName";const c=a},89832:(j,T,e)=>{"use strict";e.d(T,{n:()=>m});var t=e(296540),n=e(715890),s=e(177242),a=e(247384),c=e(923814);let r=null;const u=l(()=>(r===null&&(r=document&&document.documentElement&&document.documentElement.hasAttribute("data-primer")),r),"isPrimer");class m extends t.PureComponent{render(){var d,_;const{className:h,team:p,user:A,size:v,allowDefaultProfileImage:E,fallbackUserIcon:f,fallbackUserIcon2x:g,isInteractive:y,hideUserIcon:I}=this.props,O=!!(!((d=A.profile)===null||d===void 0)&&d.is_custom_image),M=!!f||!!g,C=!(!((_=p.icon)===null||_===void 0)&&_.image_default),{imageUrl:P,imageUrl2x:L}=this.getProfileImages();if((O||E||M)&&!I){const x=A.profile.real_name;return t.createElement(s.f1,{className:h,imageUrl:O||E?P:f,imageUrl2x:O||E?L:g,memberOrBotName:x,size:v,teamId:p.id,team:p,isInteractive:y&&!u()&&!!A.id,renderCustomBadge:this.renderTeamBadge,showCard:!0,userId:A.id,profileCardProps:{allowOutsideOfSonic:!0,maybeAllowInteract:!1,...n.C}})}return C?t.createElement(a.U,{teamName:p.name,icon:p.icon,size:v,className:h}):null}constructor(d){super(d),this.renderTeamBadge=()=>null,this.getProfileImages=()=>{var v;const{team:E,user:f,size:g}=this.props,y=(0,c.Ay)({size:g,teamOrEnterpriseId:E.id,memberId:f.id,avatarHash:(v=f.profile)===null||v===void 0?void 0:v.avatar_hash}),I=(y==null?void 0:y.imageUrl)||"",O=y!=null&&y.imageUrl2x?`${y.imageUrl2x} 2x`:"";return{imageUrl:I,imageUrl2x:O}};const{team:_,allowTeamInitials:h,shouldRenderTeamBadge:p,teamIconSize:A}=d;p&&(this.renderTeamBadge=(0,s.fp)({isExternal:!0,team:_,teamId:_.id,allowTeamInitials:h,teamIconSize:A}))}}l(m,"UserIcon"),m.displayName="UserIcon",m.defaultProps={shouldRenderTeamBadge:!1,allowTeamInitials:!1,allowDefaultProfileImage:!1,className:"p-shared_channel_invite_header__avatar",isInteractive:!0,hideUserIcon:!1}},451793:(j,T,e)=>{"use strict";e.d(T,{B:()=>s});var t=e(774165),n=e(135713);const s=(0,t.Mz)(a=>(0,n._Z)(a,"shortcuts_workspace_picker")==="on");s.meta={name:"createSelector",key:"createSelectorshouldShowShortcutsSpeedbump",description:a=>(0,n._Z)(a,"shortcuts_workspace_picker")==="on"}},99768:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(296540),n=e(364009);const s=l(c=>{let{width:r=20,height:o=20,className:u="",theme:m}=c;const i=m===n.Sx.Dark?"/img/slack_logo_white_text.svg":"/img/slack_logo.svg";return t.createElement("div",{role:"banner"},t.createElement("img",{className:u,src:i,alt:"Slack",width:r,height:o}))},"SlackLogo");s.displayName="SlackLogo";const a=s},490364:(j,T,e)=>{"use strict";e.d(T,{A:()=>i});var t=e(296540),n=e(917780),s=e(437556),a=e(166747),c=e(23219),r=e(649098),o=e(259822);const u=new r.Ay("channel_token"),m=l(d=>{let{userId:_,isFirst:h,isSelf:p}=d;var A;const v=(A=(0,n.d4)(f=>(0,s.nv)(f,_)))!==null&&A!==void 0?A:void 0;let E=(0,n.d4)(f=>(0,a.I)(f,_));return(0,c.t8)(v)?t.createElement(o.A,{type:"unknown",subtler:!0}):(0,c.QR)(v)?t.createElement(o.A,{type:"non-existent",subtler:!0}):(p&&(E=h?u.t("You"):u.t("you")),t.createElement(t.Fragment,null,E))},"TooltipMemberName");m.displayName="TooltipMemberName";const i=t.memo(m)},666044:(j,T,e)=>{"use strict";e.d(T,{A:()=>s});var t=e(477659),n=e(586529);function s(a){let{inputText:c,inputDelta:r,channelId:o,threadTs:u}=a;const m=(0,t.zC)({viewContext:n.Y.THREAD,channelId:o,threadTs:u});m&&(r?m.setContents({contents:r.ops}):m.setText(c));const i=(0,t.zC)({viewContext:n.Y.THREADS_VIEW,channelId:o,threadTs:u});i&&(r?i.setContents({contents:r.ops}):i.setText(c))}l(s,"populateThreadInputs")},639332:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(296540),n=e(528919),s=e(58139);const a=t.forwardRef((r,o)=>{let{children:u,lines:m,breakWords:i=!0,withTooltip:d,shouldForceTooltipVisible:_,customTooltipText:h,tooltipClassName:p}=r;const A={"--lines":m},v=t.createElement("span",{className:(0,n.A)("c-truncate",{"c-truncate--break_words":i}),style:A,ref:o},u);return d?t.createElement(s.A,{tip:h||u,zIndex:"above_fs",shouldForceVisible:_,tipClassName:p},v):v});a.displayName="Truncate";const c=a},121714:(j,T,e)=>{"use strict";e.d(T,{A:()=>f});var t=e(296540),n=e(649098),s=e(298559),a=e(532395),c=e(894940),r=e(917780),o=e(129318),u=e(435932),m=e(238798),i=e(855645),d=e(292443),_=e(744199);function h(){return h=Object.assign||function(g){for(var y=1;y<arguments.length;y++){var I=arguments[y];for(var O in I)Object.prototype.hasOwnProperty.call(I,O)&&(g[O]=I[O])}return g},h.apply(this,arguments)}l(h,"_extends");const p=new n.Ay("plan_change"),A=l(g=>{let{children:y,planLevel:I,entryPoint:O,feature:M,hash:C,action:P,useLink:L,refToForward:x,productId:F,productLevel:V,team:B,isTeamInTrial:D,tooltipProps:S,...R}=g;const w=(0,r.d4)(Z=>(0,c.m6)(Z,{entryPoint:O,productId:F,productLevel:V,action:P,feature:M,hash:C,planLevel:I})),Y=L?d.A:i.z9,Q=t.createElement(Y,h({ref:x},R,{href:w}),y);return t.createElement(m.A,{eventId:a.EventId.UPGRDEXP_UPSELL_PROMPTS,clogImpression:!0},S?t.createElement(_.Ay,h({tip:p.t("Upgrade")},S),Q):Q)},"PlansPageCTABase");A.displayName="PlansPageCTABase";const v=l(g=>({team:(0,o.H7)(g),isTeamInTrial:(0,u.iH)(g)}),"mapStateToProps"),E=(0,s.N)(v)(A),f=t.forwardRef((g,y)=>t.createElement(E,h({},g,{refToForward:y})))},781026:(j,T,e)=>{"use strict";e.d(T,{A:()=>g});var t=e(296540),n=e(463329),s=e(917780),a=e(649098),c=e(532395),r=e(135713),o=e(846850),u=e(238798),m=e(62447),i=e(64942),d=e(850108);const _=new a.Ay("msg_input"),h={elementName:"learn_more",onClick:{enableClogAction:!0}},p=l(y=>{let{isScheduledMessage:I}=y;const O=(0,n.wA)(),M=(0,t.useCallback)(()=>{O((0,o.O)())},[O]);if(!(0,s.d4)(x=>(0,r._Z)(x,"upgrd_5684")==="on"))return null;const P=I?_.t("Message not scheduled"):_.t("Message not sent"),L=_.rt("Your team isn\u2019t able to send messages right now. Review any apps or webhooks that may be sending a high-volume of messages. <learnMoreLink>Learn more</learnMoreLink> about message limits.",{fallbackHash:"a15c5b3859af53dcefc79016b421009c7adc9bf6","<learnMoreLink>":x=>{let{text:F}=x;return t.createElement(d.A,{"data-qa":"Message-limit-error-modal-learn-more-link",articleId:115002422943,hash:"message-and-file-visibility-limit",autoClogProps:h,forceOpenInBrowser:!0},F)}});return t.createElement(u.A,{eventId:c.EventId.UPGRDEXP_HIGHLIGHT_PAID_FEATURES,clogImpression:!0,uiComponentName:c.UiComponentName.MESSAGE_LIMIT_ERROR_MODAL},t.createElement(m.A,{"data-qa":"message-limit-error-modal",title:P,titleIcon:"warning",bodyContent:L,onRequestClose:M,theme:i.B.ERROR}))},"MessageLimitErrorModal");p.displayName="MessageLimitErrorModal";const A=p;var v=e(674217),E=e(37124);const f=(0,v.Ay)("Open modal when a message send fails due to team having hit the message limit",function(y,I){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return y((0,E.q)({element:t.createElement(A,O)}))});f.meta={name:"createThunk",key:"createThunkopenMessageLimitErrorModal",description:"Open modal when a message send fails due to team having hit the message limit"};const g=f},761326:(j,T,e)=>{"use strict";e.d(T,{J6:()=>A,SX:()=>p,mF:()=>_});var t=e(135713),n=e(129318),s=e(934861),a=e(894940),c=e(435932),r=e(791834),o=e(329981),u=e(787781),m=e(609095);const i=l(v=>isShowcaseBestPracticesEnabled(v,!1),"isShowcaseBestPracticesEnabledWithoutExposures"),d=l(v=>[{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.V3},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.MessageLimit},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.Vhq},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.Canvas},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.WorkflowBuilder},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.SharedChannels},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.SharedChannels14Days},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.MessageLimit14Days},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.Vhq14Days},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.Canvas14Days},{promoType:a.ZO.ImmediateStartTrial,promoSubtype:a.zG.ImmediateStartTrial14Days},{promoType:a.ZO.SharedChannelsFreeTrial,promoSubtype:a.zG.Inviter14},{promoType:a.ZO.BringBackSlackToWorkTrial},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.WorkflowBuilder14Days}].some(f=>{let{promoType:g,promoSubtype:y}=f;return(0,c.hq)(v,g,y)}),"checkIfEligibleForShorterGuidedTrial"),_={CONTROL:"control",TREATMENT_1:"treatment1",TREATMENT_2:"treatment2"},h=l(v=>{const E=[{spaceName:u.xu.SIDEBAR_MENU_HEADER,notificationName:u.ze.SUPPORT_UPGRADE_DECISION_TRIAL_USAGE_SIDEBAR_MENU_HEADER},{spaceName:u.xu.SYNTHETIC_CANVAS_HEADER,notificationName:u.ze.SUPPORT_UPGRADE_DECISION_CANVAS_PAGE_BANNER},{spaceName:u.xu.MESSAGE_PANE,notificationName:u.ze.SUPPORT_UPGRADE_DECISION_SHARED_CHANNEL_BANNER}];for(let f=0;f<E.length;f++){const{spaceName:g,notificationName:y}=E[f];if((0,o.Hp)(v,g)===y){const O=(0,o.OL)(v,g)||null,M=O?O.experimentGroup:null;if(M===_.TREATMENT_1||M===_.TREATMENT_2)return M}}return null},"getExperimentGroupFromMegaPhone"),p=l(function(v,E){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const g=(0,n.H7)(v);return(0,s.tc)(g)&&(E||d(v))?(0,t._Z)(v,"shorter_guided_trials",f):(0,c.iH)(v)?h(v)||(0,r.ax)(v,"shorter_guided_trials"):null},"isInExperimentShorterGuidedTrialsGroup"),A=l(function(v,E){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return p(v,E,f)===_.TREATMENT_2?a.ew.SHORTENED_FEATURE_TRIAL:a.ew.PAID_FEATURE_TRIAL},"getTrialLength")},791762:(j,T,e)=>{"use strict";e.r(T),e.d(T,{HuddleInviteModalTrialBannerV2:()=>E,default:()=>f});var t=e(296540),n=e(649098),s=e(894940),a=e(532395),c=e(238798),r=e(917780),o=e(927675),u=e(121714),m=e(176965),i=e(275154),d=e(140573),_=e(413033),h=e(355689);const p=new n.Ay("guided_trials"),A={elementName:"upgrade_now_cta",onClick:{enableClogAction:!0}},v={elementName:"see_upgrade_options_cta",onClick:{enableClogAction:!0}},E=l(g=>{let{trialEndDate:y,canUserPurchase:I}=g;const O=(0,r.d4)(C=>(0,s.m6)(C,{action:s.um.CHECKOUT,productLevel:s.i6.standard.id,entryPoint:"guided_trials_peek_upgrade_cta"})),M=l(()=>I?t.createElement(o.z9,{autoClogProps:A,href:O,className:"p-huddle_invite_modal__cta_upgrade",size:"small","data-qa":"huddle-invite-modal-upgrade-cta"},p.t("Upgrade Now")):t.createElement(u.A,{feature:s.c4.SLACK_HUDDLES,autoClogProps:v,size:"small",type:"outline"},p.t("See Upgrade Options")),"getCTA");return M.displayName="getCTA",t.createElement(c.A,{eventId:a.EventId.UPGRDEXP_TRIAL,uiComponentName:a.UiComponentName.HUDDLE_INVITE_MODAL_TRIAL_BANNER,clogImpression:!0},t.createElement(d.A,{"data-qa":"huddle_invite_modal_trial_banner",primaryCTA:M(),withMargins:!0},t.createElement("div",null,p.rt("<strong>Group huddles aren\u2019t available for much longer</strong>",{fallbackHash:"8537d8568b35f2305ac4d9e650f9c5a9cca955b8"}),t.createElement(i.A,{className:"p-huddle_invite_modal_trial_banner_v2__pro_tooltip",uiComponentVariant:a.UiComponentVariant.HUDDLES_INVITE_MODAL_FOOTER,toolTipZIndex:_.m.MenuAboveFullScreen,badgeSize:m.vj.Small})),p.rt("If you choose not to upgrade by {trialEndDate}, your team won\u2019t be able to huddle with more than one other person.",{trialEndDate:(0,h.Pd)(y),fallbackHash:"e680e704766e6c0c74ca66a78c581927a4b36bdf"})))},"HuddleInviteModalTrialBannerV2");E.displayName="HuddleInviteModalTrialBannerV2";const f=E},994319:(j,T,e)=>{"use strict";e.d(T,{A:()=>_,x:()=>i});var t=e(296540),n=e(917780),s=e(649098),a=e(532395),c=e(435932),r=e(355689),o=e(238798),u=e(393586);const m=new s.Ay("trials_highlight_paid_features"),i=l(h=>{let{trialEndTs:p}=h;return t.createElement(o.A,{eventId:a.EventId.UPGRDEXP_TRIAL,uiComponentName:a.UiComponentName.HUDDLE_INVITE_MODAL_TRIAL_BANNER,clogImpression:!0},t.createElement("div",{className:"p-huddle_invite_modal_banner"},t.createElement(u.A,{iconType:"clock-o","data-qa":"huddle_invite_modal_trial_banner"},m.rt("<strong>Huddles with more than two people is a paid feature,</strong> available with your free trial through {trialExpirationDate}.",{trialExpirationDate:(0,r.Pd)(p),fallbackHash:"5848c5eb4b061ac0a4abef27be6bc8b2c736d087"}))))},"HuddleInviteModalTrialBanner"),d=l(()=>{const h=(0,n.d4)(c.Sk);return t.createElement(i,{trialEndTs:h})},"ConnectedHuddleInviteModalTrialBanner");d.displayName="ConnectedHuddleInviteModalTrialBanner";const _=d},945756:(j,T,e)=>{"use strict";e.d(T,{A:()=>y});var t=e(612104),n=e(296540),s=e(674217),a=e(894940),c=e(37124),r=e(435932),o=e(459681),u=e(649098),m=e(121714),i=e(711392),d=e(759554),_=e(917780),h=e(761326);const p=new u.Ay("huddles"),A=l(I=>{let{startTrialContext:O=o.M.huddlesTrialEntryPointModal,uiComponentVariant:M,onSpeedbumpContinue:C,promoType:P,promoSubtype:L,isEligibleForTrial:x}=I;const F=l(Q=>{let{text:Z}=Q;return n.createElement(m.A,{"data-qa":"huddles_trial_entry_point-plans_page_link",useLink:!0},Z)},"renderPlansPageLink"),V=(0,_.d4)(Q=>(0,h.J6)(Q,x,!0)),B=p.t("Try huddles with more people"),D=x?p.rt("Get access to huddles with more than two people, and other <plansPageLink>premium collaboration tools</plansPageLink> with a free, {trialLength}-day trial of Slack Pro.",{trialLength:V,"<plansPageLink>":F}):p.rt("Get access to huddles with more than two people, and other <plansPageLink>premium collaboration tools</plansPageLink> when you upgrade to a paid plan.",{"<plansPageLink>":F}),S=p.t("With more people, you can:"),R=(0,n.useCallback)(()=>[p.t("Host a team brainstorm from anywhere"),p.t("Get the group\u2019s feedback with a live screenshare"),p.t("Touch base on the go, without all the typing")],[]),w=(0,n.useCallback)(()=>e.e("gantry-v2-async-lottie-huddles-trial").then(e.t.bind(e,152701,23)),[]),Y=(0,n.useMemo)(()=>n.createElement(d.e,{getAnimationImport:w,autoplay:!0,loop:!0}),[w]);return n.createElement(i.A,{modalTitle:B,modalSubtitle:D,modalLottieAnimation:Y,modalBannerBackgroundColor:"#fdd37f",modalChecklistHeading:S,modalChecklistItems:R(),promoType:P,promoSubtype:L,startTrialContext:O,uiComponentVariant:M,onSpeedbumpContinue:C,isEligibleForTrial:x})},"HuddleTrialEntryPointModal");A.displayName="HuddleTrialEntryPointModal";const v=A;var E=e(866995);function f(){return f=Object.assign||function(I){for(var O=1;O<arguments.length;O++){var M=arguments[O];for(var C in M)Object.prototype.hasOwnProperty.call(M,C)&&(I[C]=M[C])}return I},f.apply(this,arguments)}l(f,"_extends");const g=(0,s.Ay)("Open huddles trial entry point modal",function(){var I=(0,t.coroutine)(function*(O,M,C){const P=a.ZO.PaidFeatureTrial,L=a.zG.Vhq;yield O((0,E.A)({campaignType:P,campaignSubType:L,reason:"huddle_trial_entry_point_modal"}));const x=(0,r.hq)(M(),P,L);return O((0,c.q)({element:n.createElement(v,f({},C,{promoType:P,promoSubtype:L,isEligibleForTrial:x}))}))});return function(O,M,C){return I.apply(this,arguments)}}());g.meta={name:"createThunk",key:"createThunkopenHuddlesTrialEntryPointModal",description:"Open huddles trial entry point modal"};const y=g},866995:(j,T,e)=>{"use strict";e.d(T,{A:()=>m});var t=e(612104),n=e.n(t),s=e(296540),a=e(674217),c=e(197603),r=e(37124),o=e(143658);const u=(0,a.Ay)("Display loading modal and fetch data for trial entry point modal",function(){var i=(0,t.coroutine)(function*(d,_,h){return d((0,r.q)({element:s.createElement(o.A,{className:"p-trial_entry_point_modal__loading_modal"})})),d((0,c.A)(h))});return function(d,_,h){return i.apply(this,arguments)}}());u.meta={name:"createThunk",key:"createThunkopenTrialLoadingModal",description:"Display loading modal and fetch data for trial entry point modal"};const m=u},176965:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>h,Vu:()=>m,vj:()=>i});var t=e(296540),n=e(566401),s=e(528919),a=e(649098),c=e(238798),r=e(532395);function o(){return o=Object.assign||function(p){for(var A=1;A<arguments.length;A++){var v=arguments[A];for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&(p[E]=v[E])}return p},o.apply(this,arguments)}l(o,"_extends");const u=new a.Ay("trials"),m={Purple:"purple",White:"white"},i={Small:"small",Medium:"medium",Large:"large"},d={eventId:r.EventId.UPGRDEXP_TRIAL,uiComponentName:r.UiComponentName.TRIAL_PRO_BADGE,clogImpression:!0},_=l(p=>{let{ariaHidden:A=!1,className:v,autoClogProps:E,badgeTheme:f=m.Purple,size:g=i.Medium}=p;const y=A?{"aria-hidden":!0}:{"aria-label":u.t("Pro feature",{fallbackHash:"f3b218b5b69cf46f83217a4c553335005e49633f"}),role:"img"},I=t.createElement("div",o({className:(0,s.A)("p-pro_badge",`p-pro_badge--${f}`,`p-pro_badge--${g}`,v),"data-qa":"pro_badge"},y),u.t("PRO"));return(0,n.A)(E)?I:t.createElement(c.A,o({},d,E),I)},"ProBadge");_.displayName="ProBadge";const h=_},275154:(j,T,e)=>{"use strict";e.d(T,{A:()=>p});var t=e(296540),n=e(528919),s=e(649098),a=e(917780),c=e(934861),r=e(129318),o=e(435932),u=e(894940),m=e(176965),i=e(309920);function d(){return d=Object.assign||function(A){for(var v=1;v<arguments.length;v++){var E=arguments[v];for(var f in E)Object.prototype.hasOwnProperty.call(E,f)&&(A[f]=E[f])}return A},d.apply(this,arguments)}l(d,"_extends");const _=new s.Ay("trials"),h=l(A=>{let{badgeTheme:v=m.Vu.Purple,badgeSize:E=m.vj.Medium,className:f,hideTooltip:g,uiComponentVariant:y,...I}=A;const O=(0,a.d4)(L=>(0,c.tc)((0,r.H7)(L))),M=(0,a.d4)(L=>(0,o.tu)(L)===u.i6.standard.id),C=(0,t.useMemo)(()=>({uiComponentVariant:y}),[y]);if(!(O||M))return null;const P=_.t("PRO");return g?t.createElement(m.Ay,{autoClogProps:C,badgeTheme:v,className:f,size:E}):t.createElement(i.A,d({ariaLabel:P,uiComponentVariant:y},I),t.createElement("span",{className:(0,n.A)("p-trial_pro_badge",f),"data-qa":"trial_pro_badge"},t.createElement(m.Ay,{autoClogProps:C,badgeTheme:v,size:E})))},"TrialProBadge");h.displayName="TrialProBadge";const p=h},187824:(j,T,e)=>{"use strict";e.d(T,{A:()=>d,G:()=>m});var t=e(296540),n=e(917780),s=e(463329),a=e(649098),c=e(435932),r=e(197603),o=e(761326);const u=new a.Ay("trials");var m;(function(_){_.HuddlesFreemium="huddles_freemium"})(m||(m={}));const d=l(_=>{let{isFreemium:h,tooltipText:p,promoType:A,promoSubtype:v,variant:E}=_;const f=(0,s.wA)(),g=(0,n.d4)(c.iH);(0,t.useEffect)(()=>{A&&f((0,r.A)({campaignType:A,campaignSubType:v,reason:"trial_tooltip"}))},[f,A,v]);const y=(0,n.d4)(L=>A?(0,c.bp)(L,A,v):!1),I=(0,n.d4)(L=>A?(0,c.hq)(L,A,v):!1),O=(0,n.d4)(L=>(0,o.J6)(L,I)),M=l(()=>{if(g)switch(E){case m.HuddlesFreemium:return u.t("Huddles with more than two people are a paid feature, available with your free trial");default:return u.t("This is a paid feature, available with your free trial")}if(I)switch(E){case m.HuddlesFreemium:return u.t("Huddles with more than two people are a paid feature, available with a free, {trialLength}-day trial",{trialLength:O});default:return u.t("This is a paid feature, available with a free, {trialLength}-day trial",{trialLength:O})}switch(E){case m.HuddlesFreemium:return u.t("Huddles with more than two people are a paid feature, available with an upgrade");default:return u.t("This is a paid feature, available with an upgrade")}},"getTooltipText"),C=l(()=>g?u.t("This feature is unlimited with your free trial"):I?u.t("This feature is unlimited with a free trial, {trialLength}-day trial",{trialLength:O}):u.t("This feature is unlimited with an upgrade"),"getFreemiumTooltipText");if(y)return{};const P=h?C():M();return p?{tooltipTitle:p,tooltipBody:P}:{tooltipTitle:P}},"useTrialProBadgeTooltipText")},711392:(j,T,e)=>{"use strict";e.d(T,{A:()=>S});var t=e(612104),n=e(296540),s=e(463329),a=e(917780),c=e(649098),r=e(532395),o=e(355689),u=e(846850),m=e(242098),i=e(787781),d=e(956323),_=e(62447),h=e(295296),p=e(616125);const v=l(R=>{let{checklistItems:w,checklistHeading:Y}=R;return n.createElement("div",{className:"p-modal_content_checklist__checklist"},n.createElement("div",{className:"p-modal_content_checklist__heading"},Y),w.map(Q=>n.createElement("div",{key:Q,className:"p-modal_content_checklist__checklist_item"},n.createElement("div",{className:"p-modal_content_checklist__checklist_check"},n.createElement(p.A,{name:"check",size:"16",variation:"filled"})),n.createElement("div",null,Q))))},"ModalContentChecklist");var E=e(763974),f=e(238798),g=e(121714),y=e(687993),I=e(551755),O=e(428852),M=e(619674),C=e(883518),P=e(654183),L=e(45798),x=e(761326);const F=new c.Ay("trials"),V={elementName:"start_trial",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},B={elementName:"upgrade_link",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},D=l(R=>{let{modalClassName:w,modalCloseButtonTheme:Y,modalSubtitle:Q,modalTitle:Z,modalType:ee=h.H.VERTICAL_BANNER,modalVideoClassName:_e,modalVideoFileName:Ee,modalLottieAnimation:G,modalVideoPosterExtension:Ae="",modalBannerBackgroundColor:ce="",modalChecklistHeading:de="",modalChecklistItems:oe=L.Ml,promoType:$,promoSubtype:re,imgSrc:ue,isEligibleForTrial:te,startTrialContext:ae,uiPage:H,uiComponentVariant:U,uiStep:N,onSpeedbumpContinue:K,onSpeedbumpContinueLabel:W,onTrialStart:J,skipSpeedbump:q,"data-qa":ie,omitSecondaryCTA:Te=!1}=R;const Me=(0,s.wA)(),ke=(0,a.d4)(d.F),Pe=(0,a.d4)(x.SX),Ie=Pe===x.mF.TREATMENT_1,X=Pe===x.mF.TREATMENT_2,ne=Ie||X,[fe,be]=(0,n.useState)(!1),Be=(0,n.useRef)(""),We=(0,n.useCallback)(()=>{Me((0,u.O)())},[Me]),Re=(0,n.useCallback)((0,t.coroutine)(function*(){let{trialExpirationDate:Ge}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ge&&(Be.current=Ge,yield Me((0,m.iR)({event:{type:i.jo.REQUEST_SPACES,spaces:[i.xu.SIDEBAR_FOOTER]}})),J==null||J(),q?We():be(!0))}),[Me,We,J,q]),ve=(0,n.useCallback)(()=>{We(),Me((0,M.o)((0,C.ZF)(P.c.PaidBenefits)))},[Me,We]),xe=(0,n.useCallback)(()=>{We(),K==null||K()},[We,K]),He=n.createElement(v,{checklistHeading:de,checklistItems:oe}),je=n.createElement(y.A,{"data-qa":"trial_entry_point_modal_start_trial_button",autoClogProps:V,reason:"start_trial_from_trial_entry_point_modal",context:ae,promoType:$,promoSubtype:re,onRequestComplete:Re},F.t("Start Free Trial")),Ke=n.createElement(g.A,{"data-qa":"trial_entry_point_modal_plans_page_button",type:"primary",autoClogProps:B,onClick:We},F.t("See Upgrade Options")),ht=te?je:Ke,dt=l(()=>{if(!Be.current)return null;const Ge=n.createElement("div",{className:"display_flex"},n.createElement(E.A,{className:"p-trial_entry_point_modal__speedbump_icon",type:"sparkles-filled"}),F.t("Ta-da! Your team\u2019s on a free trial")),Le=n.createElement("div",{className:"p-trial_entry_point_modal__speedbump_description"},F.rt("You\u2019re on the most popular premium plan, Slack Pro \u2014 with features designed to help teams work better, together \u2014 through {trialExpirationDate}, absolutely free.",{trialExpirationDate:(0,o.Pd)(Be.current)})),Dt=l(()=>W||(K?F.t("Continue"):F.t("Find Out More")),"getContinueButtonLabel")();let pt=F.t("Dismiss"),Qt=ve,Nt=We,bt="speedbump_learn_more",Yt="speedbump_dismiss";return K&&(pt=F.t("Learn More"),Qt=xe,Nt=ve,bt="speedbump_continue",Yt="speedbump_learn_more"),n.createElement(O.ty,{className:"p-trial_entry_point_modal__speedbump","data-qa":"trial_entry_point_modal_speedbump",heading:Ge,description:Le,continueButtonLabel:Dt,cancelButtonLabel:pt,onCancel:Te?void 0:Nt,onContinue:Qt,continueButtonType:"primary",autoFocusContinueButton:!0,autoClogProps:{continueButton:{elementName:bt,onClick:{enableClogAction:!0}},cancelButton:{elementName:Yt,onClick:{enableClogAction:!0}}}})},"renderSpeedbump");dt.displayName="renderSpeedbump";const Ve=n.createElement("div",{className:"p-trial_entry_point_modal__footer_text","data-qa":"trial_entry_point_modal_footer_text"},F.t("No credit card required.")),Je=n.createElement("div",{className:"p-trial_entry_point_modal__footer"},ht,te&&Ve,te&&ne&&n.createElement(I.A,{shouldShow:ke}),fe&&dt());return n.createElement(f.A,{eventId:r.EventId.UPGRDEXP_TRIAL,clogImpression:!0,uiComponentName:r.UiComponentName.TRIAL_ENTRY_POINT_MODAL,uiComponentVariant:U,uiStep:N,uiPage:H},n.createElement(_.A,{bannerBackgroundColor:ce,"data-qa":ie,imgSrc:ue,title:Z,subtitle:Q,bodyContent:He,footerContent:Je,onRequestClose:We,maxWidth:"586px",className:w,closeButtonTheme:Y,type:ee,videoFilename:Ee,videoPosterExtension:Ae,videoClassName:_e,lottieAnimation:G}))},"TrialEntryPointModal");D.displayName="TrialEntryPointModal";const S=D},551755:(j,T,e)=>{"use strict";e.d(T,{A:()=>u});var t=e(296540),n=e(463329),s=e(917780),a=e(759554),c=e(921055),r=e(749005);const u=t.memo(m=>{let{shouldShow:i=!1}=m;const d=(0,n.wA)(),[_,h]=(0,t.useState)(),[p,A]=(0,t.useState)(!1),v=(0,t.useCallback)(g=>{g&&g.then(y=>h(y))},[h]),E=(0,s.d4)(g=>!(0,c.ty)(g,"a11y_animations")),f=(0,t.useCallback)(()=>e.e("trial-celebration-confetti.json").then(e.t.bind(e,732270,23)),[]);return!i||E||p?null:(_&&_._cbs&&_.addEventListener("complete",()=>{d((0,r.DJ)(!1)),A(!0)}),t.createElement(a.e,{autoplay:!0,className:"p-trial_start_confetti",getAnimationImport:f,ref:v}))})},687993:(j,T,e)=>{"use strict";e.d(T,{A:()=>I});var t=e(296540),n=e(463329),s=e(42302),a=e(649098),c=e(532395),r=e(776987),o=e(749005),u=e(238798),m=e(927675),i=e(292443),d=e(120229),_=e(917780),h=e(761326),p=e(242098),A=e(787781);function v(){return v=Object.assign||function(O){for(var M=1;M<arguments.length;M++){var C=arguments[M];for(var P in C)Object.prototype.hasOwnProperty.call(C,P)&&(O[P]=C[P])}return O},v.apply(this,arguments)}l(v,"_extends");const E=new a.Ay("trials"),f={name:"warning"},g=l(O=>{let{children:M,reason:C,context:P,promoType:L,promoSubtype:x,onClick:F,onRequestComplete:V=s.A,useLink:B,refToForward:D,...S}=O;const R=(0,n.wA)(),[w,Y]=(0,t.useState)(!1),[Q,Z]=(0,t.useState)(!1),ee=(0,_.d4)(h.SX),_e=ee===h.mF.TREATMENT_1||ee===h.mF.TREATMENT_2,Ee=l(()=>{Y(!0),Z(!1)},"handleError"),G=(0,t.useCallback)(()=>{Q||(Z(!0),Y(!1),R((0,r.a)({reason:C,campaignType:L,campaignSubType:x,context:P})).then(de=>{let{trial_expiration_date:oe}=de;R((0,o.DJ)(!0)),V({trialExpirationDate:oe}),_e&&R((0,p.iR)({event:{type:A.jo.REQUEST_SPACES,spaces:[A.xu.SIDEBAR_MENU_HEADER]}})),oe||Ee()}).catch(Ee))},[R,C,L,x,P,V,Q,_e]),Ae=(0,t.useCallback)(()=>{G(),F==null||F()},[F,G]),ce=B?t.createElement(i.A,v({ref:D},S,{onClick:Ae}),M):t.createElement(m.lV,v({ref:D},S,{onClick:Ae,loading:Q}),M);return t.createElement(u.A,{eventId:c.EventId.UPGRDEXP_TRIAL_START,clogImpression:!0},ce,w&&t.createElement(d.Ay,{svgIconProps:f,svgIconClassName:"align_self_start",shouldAutoFade:!1},E.t("Something went wrong. Try again later.",{fallbackHash:"248cbe7878bb83237a17ae6abe635e6251a6517a",fallbackHashNs:"channel_modal"})))},"TrialStartCTABase");g.displayName="TrialStartCTABase";const I=t.forwardRef((O,M)=>t.createElement(g,v({},O,{refToForward:M})))},64942:(j,T,e)=>{"use strict";e.d(T,{B:()=>n,D:()=>t});var t;(function(s){s.SMALL="small",s.MEDIUM="medium",s.LARGE="large"})(t||(t={}));var n;(function(s){s.NONE="none",s.PURPLE="purple",s.LIGHT_PURPLE="light_purple",s.BLUE="blue",s.ERROR="error",s.HORCHATA="horchata"})(n||(n={}))},140573:(j,T,e)=>{"use strict";e.d(T,{A:()=>h});var t=e(296540),n=e(528919),s=e(649098),a=e(369391),c=e(358057),r=e(730563),o=e(927675),u=e(532395),m=e(64942);const i=new s.Ay("upgrades_kit"),d={action:u.UiAction.CLOSE,onClick:{enableClogAction:!0},elementName:"close",elementType:u.ElementType.X},_=l(p=>{let{className:A,image:v,heading:E,isLoading:f,children:g,onDismiss:y,useRoundedCorners:I=!0,showBorder:O=!0,size:M=m.D.MEDIUM,theme:C=m.B.HORCHATA,primaryCTA:P,secondaryCTA:L,withMargins:x,"data-qa":F}=p;const V=l(()=>t.createElement(c.A,{className:"p-upgrades_alert_banner_v2__close_icon",icon:"times",size:"small","aria-label":i.t("Dismiss"),onClick:y,autoClogProps:d}),"renderCloseIcon"),B=l(()=>t.createElement("div",{className:"p-upgrades_alert_banner_v2__content"},f?t.createElement(r.A,{color:"white",inline:!0}):t.createElement("div",null,t.createElement("div",{className:"p-upgrades_alert_banner_v2__heading"},E),t.createElement("div",{className:"p-upgrades_alert_banner_v2__body"},g))),"renderContent"),D=l(()=>!P&&!L?null:t.createElement("div",{className:"p-upgrades_alert_banner_v2__button_container"},f?t.createElement(o.lV,{loading:!0}):t.createElement(t.Fragment,null,P,L)),"renderButtons");D.displayName="renderButtons";const S=(0,n.A)("p-upgrades_alert_banner_v2",`p-upgrades_alert_banner_v2--${M}`,`p-upgrades_alert_banner_v2--${C}`,A,{"p-upgrades_alert_banner_v2--with_close_icon":!!y,"p-upgrades_alert_banner_v2--rounded_corners":I,"p-upgrades_alert_banner_v2--no_border":!O,"p-upgrades_alert_banner_v2--with_image":!!v,"p-upgrades_alert_banner_v2--with_margins":x});return t.createElement("div",{className:"full_width"},t.createElement(a.Ay,{className:S,type:a.QE.inline,"data-qa":F},t.createElement("div",{className:"p-upgrades_alert_banner_v2__content"},B(),D(),y&&V())))},"AlertBannerV2");_.displayName="AlertBannerV2";const h=_},393586:(j,T,e)=>{"use strict";e.d(T,{A:()=>_});var t=e(296540),n=e(528919),s=e(649098),a=e(532395),c=e(369391),r=e(358057),o=e(763974),u=e(64942);const m=new s.Ay("upgrades_kit"),i={action:a.UiAction.CLOSE,onClick:{enableClogAction:!0},elementName:"close",elementType:a.ElementType.X},d=l(h=>{let{className:p,iconType:A,customIcon:v,image:E,heading:f,children:g,onDismiss:y,useRoundedCorners:I=!0,showBorder:O=!0,size:M=u.D.MEDIUM,theme:C=u.B.PURPLE,"data-qa":P="",primaryCTA:L,secondaryCTA:x}=h;const F=l(()=>{let R;const w="p-upgrades_alert_banner__icon";return v?R=t.createElement("div",{className:w},v):E?R=t.createElement("div",{className:(0,n.A)(w,"p-upgrades_alert_banner__icon--image")},E):A&&(R=t.createElement(o.A,{className:w,size:M,theme:C,type:A})),R},"renderIcon");F.displayName="renderIcon";const V=l(()=>t.createElement(r.A,{className:"p-upgrades_alert_banner__close_icon","data-qa":"alert_banner_close_button",icon:"times",size:"small","aria-label":m.t("Dismiss",{fallbackHash:"70afe9eff3f2888493d9b5169fec8331af1810de",fallbackHashNs:"trials_highlight_paid_features"}),onClick:y,autoClogProps:i}),"renderCloseIcon");V.displayName="renderCloseIcon";const B=l(()=>!L&&!x?null:t.createElement("div",{className:"p-upgrades_alert_banner__button_container"},L,x),"renderButtons");B.displayName="renderButtons";const D=F(),S=(0,n.A)("p-upgrades_alert_banner",`p-upgrades_alert_banner--${M}`,`p-upgrades_alert_banner--${C}`,p,{"p-upgrades_alert_banner--with_close_icon":!!y,"p-upgrades_alert_banner--rounded_corners":I,"p-upgrades_alert_banner--no_border":!O,"p-upgrades_alert_banner--with_image":!!E});return t.createElement("div",{className:"full_width"},t.createElement(c.Ay,{className:S,"data-qa":P,customIcon:D,heading:f,type:D?c.QE.boxed:c.QE.custom},t.createElement("div",{className:"p-upgrades_alert_banner__body"},g),B(),y&&V()))},"AlertBanner");d.displayName="AlertBanner";const _=d},295296:(j,T,e)=>{"use strict";e.d(T,{H:()=>t});var t;(function(n){n.MULTI_PANE="multi_pane",n.SINGLE_PANE="single_pane",n.VERTICAL_BANNER="vertical_banner",n.HORIZONTAL_BANNER="horizontal_banner"})(t||(t={}))},763974:(j,T,e)=>{"use strict";e.d(T,{A:()=>m});var t=e(296540),n=e(528919),s=e(61629);const c=t.memo(i=>{let{animationDelay:d,size:_="large"}=i;const h=48,p=h-(_==="large"?48:36),A=h*2,v="#1D9BD1",E="#F2C744",f="#007A5A",g="#E01E5A",y={animationDelay:`${d||0}s`},I=l((P,L)=>t.createElement("path",{d:"M2 10.3L6 10.39C8.2 10.4 10 8.6 10 6.3C10 4 8.2 2.1 6 2C3.79 2 2 3.85 2 6.15L2 10.3Z",fill:L,className:P,style:y}),"renderDrop"),O=l((P,L)=>t.createElement("circle",{r:"4",fill:L,className:P,style:y}),"renderCircle"),M=l((P,L)=>t.createElement("path",{d:"M6.47 1.27C6.3 0.83 5.69 0.83 5.53 1.27L4.46 4.16C4.4 4.3 4.3 4.41 4.16 4.46L1.27 5.53C0.83 5.69 0.831 6.3 1.27 6.47L4.16 7.5C4.3 7.59 4.41 7.7 4.46 7.84L5.53 10.73C5.69 11.17 6.31 11.17 6.47 10.73L7.54 7.84C7.59 7.7 7.7 7.59 7.84 7.54L10.73 6.47C11.17 6.31 11.17 5.69 10.73 5.53L7.84 4.46C7.7 4.41 7.59 4.3 7.54 4.16L6.47 1.27Z",fill:L,className:P,style:y}),"renderStar"),C=l((P,L)=>t.createElement("path",{d:"M1 5.5C1 4.12 2.12 3 3.5 3H8.5C9.88 3 11 4.12 11 5.5V5.5C11 6.88 9.88 8 8.5 8H3.5C2.12 8 1 6.88 1 5.5V5.5Z",fill:L,className:P,style:y}),"renderSprinkle");return t.createElement("svg",{className:(0,n.A)("position_absolute",`p-upgrades_icon_celebration_animation--${_}`),style:{top:`-${h/2+p/2}px`,left:`-${h/2+p/2}px`},width:A,height:A,viewBox:`0 0 ${A} ${A}`,fill:"none",xmlns:"http://www.w3.org/2000/svg"},I("p-upgrades_icon_celebration_animation__drop_top_right",v),O("p-upgrades_icon_celebration_animation__circle_top_right",E),O("p-upgrades_icon_celebration_animation__circle_right",f),M("p-upgrades_icon_celebration_animation__star_bottom_right",E),O("p-upgrades_icon_celebration_animation__circle_bottom_right",E),C("p-upgrades_icon_celebration_animation__sprinkle_bottom_left",g),I("p-upgrades_icon_celebration_animation__drop_left",E),O("p-upgrades_icon_celebration_animation__circle_top_left",v),M("p-upgrades_icon_celebration_animation__star_top_left",f),C("p-upgrades_icon_celebration_animation__sprinkle_top_left",g))});var r=e(64942);function o(){return o=Object.assign||function(i){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var h in _)Object.prototype.hasOwnProperty.call(_,h)&&(i[h]=_[h])}return i},o.apply(this,arguments)}l(o,"_extends");const u=l(i=>{let{className:d,animationProps:_,hasBorder:h,type:p,size:A=r.D.MEDIUM,theme:v=r.B.PURPLE,showAnimation:E}=i;const f=(0,n.A)(`p-upgrades_icon--${A}`,`p-upgrades_icon--${v}`,d),g=t.createElement(s.A,{className:f,size:"inherit",type:p});if(!h)return g;const y=(0,n.A)("p-upgrades_icon_container",`p-upgrades_icon_container--${A}`,`p-upgrades_icon_container--${v}`,{"p-upgrades_icon_container--with_animation":E});return t.createElement("div",{className:y},g,E&&t.createElement(c,o({size:A},_)))},"UpgradesIcon");u.displayName="UpgradesIcon";const m=u},334167:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(296540),n=e(528919),s=e(428852);const c=l(r=>{let{children:o,className:u}=r;return t.createElement(s.qf,{className:(0,n.A)("p-upgrades_modal__content_section",u)},o)},"ModalBody")},614723:(j,T,e)=>{"use strict";e.d(T,{N:()=>v,A:()=>f});var t=e(296540),n=e(528919),s=e(428852),a=e(247041),c=e(295296),r=e(176965),o=e(677364),u=e(642751),m=e(334167),i=e(375294);const _=l(g=>{let{banner:y,bodyContent:I,footerContent:O,showProBadge:M=!0,subtitle:C,title:P}=g;return t.createElement(t.Fragment,null,t.createElement("div",{className:"p-upgrades_modal_with_banner_horizontal__left_panel"},t.createElement(o.A,{headerClassName:"p-upgrades_modal_with_banner_horizontal__header",titleClassName:"padding_top_0",title:P},M&&t.createElement(r.Ay,{className:"p-upgrades_modal_with_banner_horizontal__pro_badge"})),t.createElement(s.$m,null,C&&t.createElement(u.A,{className:"p-upgrades_modal_with_banner_horizontal__subtitle",subtitle:C}),t.createElement(m.A,{className:"p-upgrades_modal_with_banner_horizontal__body"},I)),t.createElement(i.A,{className:"p-upgrades_modal_with_banner_horizontal__footer"},O)),y)},"ModalContentHorizontalBanner"),h=l(g=>{let{banner:y,bodyContent:I,footerContent:O,showProBadge:M=!0,subtitle:C,title:P}=g;const L=t.createElement(t.Fragment,null,P,M&&t.createElement(r.Ay,{className:"p-upgrades_modal_with_banner_vertical__pro_badge"}));return t.createElement(t.Fragment,null,t.createElement(o.A,{titleClassName:"p-upgrades_modal_with_banner_vertical__title",title:L},y),t.createElement(s.$m,null,C&&t.createElement(u.A,{className:"p-upgrades_modal_with_banner_vertical__subtitle",subtitle:C}),t.createElement(m.A,{className:"p-upgrades_modal_with_banner_vertical__body"},I)),t.createElement(i.A,null,O))},"ModalContentVerticalBanner");h.displayName="ModalContentVerticalBanner";const p=h;function A(){return A=Object.assign||function(g){for(var y=1;y<arguments.length;y++){var I=arguments[y];for(var O in I)Object.prototype.hasOwnProperty.call(I,O)&&(g[O]=I[O])}return g},A.apply(this,arguments)}l(A,"_extends");var v;(function(g){g.LIGHT="light",g.DARK="dark",g.GOLD="gold",g.GRAY="gray"})(v||(v={}));const E=l(g=>{let{bannerBackgroundColor:y,bodyContent:I,centered:O,className:M,closeButtonTheme:C=v.DARK,closeModal:P,dataQa:L,footerContent:x,imgSrc:F,maxWidth:V,shouldCloseOnOverlayClick:B,showProBadge:D=!0,subtitle:S,title:R,type:w,videoFilename:Y,videoPosterExtension:Q="png",videoClassName:Z,lottieAnimation:ee,..._e}=g;const Ee=(0,a.JK)(),G=`${Y}${Ee==="en-US"?"":`.${Ee}`}`,Ae=`p-upgrades_modal_with_banner__banner--${w}`,ce=l(()=>F?t.createElement("img",{className:Ae,alt:"",src:F}):Y?t.createElement("video",{playsInline:!0,autoPlay:!0,muted:!0,className:(0,n.A)(Ae,Z),poster:`${G}.${Q}`},t.createElement("source",{type:"video/mp4",src:`${G}.mp4`}),t.createElement("source",{type:"video/webm",src:`${G}.webm`})):ee?t.createElement("div",{className:"p-upgrades_modal__lottie_container"},ee):null,"getModalBanner");ce.displayName="getModalBanner";const de=t.createElement("div",{style:{backgroundColor:y},className:`p-upgrades_modal_with_banner__banner_container--${w}`},ce());return t.createElement(s.dW,A({className:(0,n.A)("p-upgrades_modal_with_banner",`p-upgrades_modal_with_banner__base_modal--${w}`,`p-upgrades_modal_with_banner--close_button_${C}`,"p-upgrades_modal_with_banner--close_button",M),centered:O,closeModal:P,dataQa:L,maxWidth:V,shouldCloseOnOverlayClick:B},_e),w===c.H.VERTICAL_BANNER?t.createElement(p,{banner:de,bodyContent:I,footerContent:x,showProBadge:D,subtitle:S,title:R}):t.createElement(_,{banner:de,bodyContent:I,footerContent:x,showProBadge:D,subtitle:S,title:R}))},"ModalContentWithBanner");E.displayName="ModalContentWithBanner";const f=E},375294:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(296540),n=e(528919),s=e(428852);const c=l(r=>{let{children:o,className:u}=r;return t.createElement(s.jl,{className:"p-upgrades_modal__footer"},t.createElement(s.ox,{className:(0,n.A)("p-upgrades_modal__footer_actions",u)},o))},"ModalFooter")},677364:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(296540),n=e(528919),s=e(428852);const c=l(r=>{let{headerClassName:o,titleClassName:u,children:m,title:i}=r;return t.createElement(s.rQ,{className:(0,n.A)("p-upgrades_modal__header",o)},m,t.createElement(s.Rc,{className:(0,n.A)("p-upgrades_modal__title",u),title:i}))},"ModalHeader")},642751:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(296540),n=e(528919);const a=l(c=>{let{className:r,subtitle:o}=c;return t.createElement("div",{className:(0,n.A)("p-upgrades_modal__subtitle",r)},o)},"ModalSubtitle")},62447:(j,T,e)=>{"use strict";e.d(T,{A:()=>E});var t=e(296540),n=e(528919),s=e(428852),a=e(608614),c=e(677364),r=e(334167),o=e(642751),u=e(375294),m=e(763974),i=e(64942);const _=l(f=>{let{subtitle:g,bodyContent:y,footerContent:I,title:O,titleImage:M,titleVideo:C,titleVideoClassName:P,titleIcon:L,showTitleIconAnimation:x,headerClassName:F,footerActionsClassName:V,theme:B}=f;return t.createElement(t.Fragment,null,t.createElement(c.A,{headerClassName:(0,n.A)(F,{"p-upgrades_modal__header--with_animation":x}),title:O},M,C&&t.createElement("div",{className:(0,n.A)(P)},C),L&&t.createElement("div",{className:"p-upgrades_modal__icon"},t.createElement(m.A,{hasBorder:!0,size:i.D.LARGE,type:L,showAnimation:!!x,theme:B}))),g&&t.createElement(o.A,{subtitle:g}),y&&t.createElement(s.$m,null,t.createElement(r.A,null,y)),t.createElement(u.A,{className:V},I))},"ModalContent");var h=e(614723),p=e(295296);function A(){return A=Object.assign||function(f){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var I in y)Object.prototype.hasOwnProperty.call(y,I)&&(f[I]=y[I])}return f},A.apply(this,arguments)}l(A,"_extends");const v=l(f=>{const{className:g,maxWidth:y,onRequestClose:I,type:O,"data-qa":M,UNSAFE_parentSelector:C}=f,L={className:(0,n.A)("p-upgrades_modal__container",g),closeModal:I,shouldCloseOnOverlayClick:!0,centered:!0,maxWidth:y,dataQa:M,UNSAFE_parentSelector:C};return O===p.H.MULTI_PANE?t.createElement(a.A,A({},f,L)):O===p.H.VERTICAL_BANNER||O===p.H.HORIZONTAL_BANNER?t.createElement(h.A,A({},f,L)):t.createElement(s.dW,A({},L),t.createElement(_,A({},f)))},"Modal");v.displayName="Modal";const E=v},309920:(j,T,e)=>{"use strict";e.d(T,{A:()=>_});var t=e(296540),n=e(917780),s=e(528919),a=e(744199),c=e(435932),r=e(187824),o=e(238798),u=e(176965),m=e(532395);function i(){return i=Object.assign||function(h){for(var p=1;p<arguments.length;p++){var A=arguments[p];for(var v in A)Object.prototype.hasOwnProperty.call(A,v)&&(h[v]=A[v])}return h},i.apply(this,arguments)}l(i,"_extends");const d=l(h=>{let{ariaLabel:p,tooltipText:A,children:v,onClick:E,isFreemium:f,promoType:g,promoSubtype:y,showProBadge:I,tooltipClassName:O,uiComponentVariant:M,variant:C,toolTipZIndex:P,toolTipPosition:L,...x}=h;const{tooltipTitle:F,tooltipBody:V}=(0,r.A)({isFreemium:f,tooltipText:A,promoType:g,promoSubtype:y,variant:C}),B=(0,n.d4)(R=>(0,c.bp)(R,g,y)),D=V?`${F} - ${V}`:F;if(B)return v;const S=t.createElement(o.A,{clogImpression:!0,eventId:m.EventId.UPGRDEXP_TRIAL,uiComponentName:m.UiComponentName.TRIAL_FEATURE_TOOLTIP,uiComponentVariant:M},t.createElement("div",{className:"p-trial_feature_tooltip"},t.createElement("span",{className:"p-trial_feature_tooltip__title"},I&&t.createElement(u.Ay,{badgeTheme:u.Vu.White,className:"p-trial_feature_tooltip__pro_badge"}),t.createElement("div",{className:"p-trial_feature_tooltip__title_text"},F)),t.createElement("div",{className:"p-trial_feature_tooltip__body"},V)));return t.createElement(a.Ay,i({tipClassName:(0,s.A)("p-trial_feature_tooltip__container",O),tip:S,onClick:E,zIndex:P,position:L,"aria-label":p?`${p}: ${D}`:`${D}`},x),v)},"TrialFeatureTooltip");d.displayName="TrialFeatureTooltip";const _=d},502086:(j,T,e)=>{"use strict";e.d(T,{$m:()=>c,AH:()=>E,Ac:()=>o,D0:()=>h,Mh:()=>A,VR:()=>d,th:()=>m});var t=e(612104),n=e.n(t),s=e(192964);const a=(0,s.Nh)(["callsScreenshare","createBorderWindow"]),c=function(){var f=(0,t.coroutine)(function*(g,y){a.isAvailable()&&a(g,y)});return l(function(y,I){return f.apply(this,arguments)},"createBorderWindow")}(),r=(0,s.Nh)(["callsScreenshare","showBorder"]),o=function(){var f=(0,t.coroutine)(function*(){r.isAvailable()&&r()});return l(function(){return f.apply(this,arguments)},"showBorder")}(),u=(0,s.Nh)(["callsScreenshare","hideBorder"]),m=function(){var f=(0,t.coroutine)(function*(){u.isAvailable()&&u()});return l(function(){return f.apply(this,arguments)},"hideBorder")}(),i=(0,s.Nh)(["callsScreenshare","setWindowOrScreenId"]),d=function(){var f=(0,t.coroutine)(function*(g){i.isAvailable()&&i(g)});return l(function(y){return f.apply(this,arguments)},"setWindowOrScreenId")}(),_=(0,s.Nh)(["callsScreenshare","setWindowBorderWidth"]),h=function(){var f=(0,t.coroutine)(function*(g){_.isAvailable()&&_(g)});return l(function(y){return f.apply(this,arguments)},"setWindowBorderWidth")}(),p=(0,s.Nh)(["callsScreenshare","setWindowBorderColor"]),A=function(){var f=(0,t.coroutine)(function*(g,y,I,O){p.isAvailable()&&p(g,y,I,O)});return l(function(y,I,O,M){return f.apply(this,arguments)},"setWindowBorderColor")}(),v=(0,s.Nh)(["callsScreenshare","getWindowPositionAndDimensions"]),E=function(){var f=(0,t.coroutine)(function*(){if(v.isAvailable())return v()});return l(function(){return f.apply(this,arguments)},"getWindowPositionAndDimensions")}()},381787:(j,T,e)=>{"use strict";e.d(T,{Ce:()=>d,Pe:()=>m,fI:()=>_,zS:()=>c});var t=e(919758),n=e(119110),s=e(649098);const a=new s.Ay("prefs"),c=(0,t.g9M)()?(0,t.MD7)():"nightly",r={PROD:"prod",BETA:"beta",DOGFOOD:c},o=[r.PROD,r.BETA],u=[r.PROD,r.BETA,r.DOGFOOD];function m(h){return(h?u:o).map(A=>({value:A,label:i(A)}))}l(m,"getReleaseChannelOptions");function i(h){switch(h){case r.PROD:return a.t("Production");case r.BETA:return a.t("Beta");case r.DOGFOOD:return a.t("Dogfood",{fallbackHash:"c9e429b1798d0142b8b31e82c1f9da5d8e0c9420"});default:return a.t("Unknown")}}l(i,"getReleaseChannelDisplayName");function d(){return(0,t.g9M)()&&!(0,t.Z9F)()&&!(0,n.j9)()}l(d,"canSeeReleaseChannel");function _(){return d()&&["MSI","SlackSonic","SlackPilot"].every(h=>!navigator.userAgent.includes(h))}l(_,"canModifyReleaseChannel")},360191:(j,T,e)=>{"use strict";e.d(T,{Jd:()=>m,X6:()=>i,bO:()=>c,c6:()=>o,fD:()=>p,lJ:()=>h,ve:()=>r,zb:()=>u});var t=e(446632),n=e(119110),s=e(919758);const a="sunroof_init",c="fullscreen-ui",r=(0,t.A)(()=>!1),o=(0,t.A)(()=>(0,n.sK)("25.1.1")),u=(0,t.A)(()=>(0,s.Z9F)()?(0,n.dY)("38.0.0"):!0),m=(0,t.A)(()=>{if(!(0,n.y3)())return!1;const{titleBarStyle:A}=(0,s.oQe)("environment")||{},{debugFeatures:v}=(0,s.oQe)("settings")||{};return A==="custom-extension"||(v==null?void 0:v.includes("window-chrome"))}),i=(0,t.A)(()=>(0,n.WB)()&&(0,n.dY)("4.33.90")),d=l(()=>{if(!i())return!1;const{useHwAcceleration:A,windowVibrancy:v}=(0,s.oQe)("settings")||{};return A&&v},"shouldEnableWindowSunroof"),_=(0,t.A)(()=>!(0,n.dY)("4.35.97")),h=l(()=>d()?(0,n.cX)()?{transparent:_(),vibrancy:c,backgroundColor:null}:{}:{},"maybeGetSunroofWindowOptions");function p(A){const{windowVibrancy:v}=(0,s.oQe)("settings")||{};if(typeof v>"u")return;if(v&&(!A.experimentDesktopIa4SunroofEnabled||!d())){(0,s.cGU)({name:"windowVibrancy",value:!1});try{localStorage.removeItem(a)}catch{}return}const E=!!localStorage.getItem(a);if(A.experimentDesktopIa4SunroofEnabled&&!E&&!v&&i()){(0,s.cGU)({name:"windowVibrancy",value:!0});try{localStorage.setItem(a,"1")}catch{}}}l(p,"maybeToggleSunroof")},947942:(j,T,e)=>{"use strict";e.d(T,{d:()=>r,j:()=>c});var t=e(180491),n=e(756120),s=e(682520),a=e(271338);function c(o,u,m){const i="noversion",d=Date.now()/1e3,_=`/api/${o}?_x_id=${i}-${d}`,h=new XMLHttpRequest;h.onreadystatechange=()=>{if(h.readyState===4){h.onreadystatechange=null;let E;if(h.status===200||h.status===429)try{E=JSON.parse(h.responseText)}catch{(0,s.Wo)().warn("API","Unable to do anything with api response")}E=E||{ok:!1},m?m(E.ok,E,u):(0,n.Cu)()&&((0,s.Wo)().warn("API","No callback provided. Printing response"),(0,s.Wo)().warn("API",E.ok,E,u))}};const p=!0;h.open("POST",_,p);const A=new FormData;let v=!1;u?Object.keys(u).forEach(E=>{E[0]!=="_"&&(A.append(E,u[E]),v=!0)}):(0,n.Cu)()&&(0,s.Wo)().warn("API","No args provided. Bold, very bold."),v?h.send(A):h.send()}l(c,"callSlackApiUnauthed");const r=l((o,u)=>new t.S(m=>{c(o,u,(i,d)=>{m(d)})}),"callSlackApiUnauthedAsync");(0,a.A)()||(window.callSlackAPIUnauthed=(o,u,m)=>{(0,s.Wo)().warn("API","Don't use me directly! Please import callSlackApiUnauthed from api-unauthed.ts"),c(o,u,m)})},501021:(j,T,e)=>{"use strict";e.d(T,{Db:()=>m,O3:()=>i,OB:()=>d,TE:()=>h,xB:()=>_});var t=e(194092),n=e(109943),s=e(774165),a=e(349799),c=e(180491),r=e(682520),o=e(519543),u=e(612812);const m=(0,s.C6)("Get call info from callId",(p,A,v)=>{let{callIds:E,reason:f}=v;const g=(0,r.Ay)({getState:A});return E.length>3&&g.warn(`fetchCallByIds being called for unexpectedly many calls at once: ${E.length}`),c.S.map(E,y=>p((0,a.apiCall)({method:"screenhero.rooms.info",args:{room:y},reason:f||"huddles-call-info"})).then(I=>{let{room:O}=I;return(0,n.Q)(O)}).catch(I=>(g.error(I,`Error while fetching call: ${y}`),null))).then(t.A)});m.meta={name:"createFetcher",key:"createFetcherfetchCallsByIds",description:"Get call info from callId"};const i=(0,s.C6)("Join a calls / huddle room",(p,A,v)=>{let{channelId:E,roomId:f,threadTs:g,shouldFetchRegion:y,teamId:I,traceId:O,parentSpanId:M,reason:C,isMultiDevice:P=!1}=v;return(y?u.A.getInstance().getNearestChimeMediaRegion(I):c.S.resolve("")).then(L=>p((0,a.apiCall)({method:"rooms.join",args:{...f&&{id:f},...E&&{channel_id:E},...g&&{thread_ts:g},regions:L,multidevice:P},traceId:O,parentSpanId:M,reason:C||"calls-api/joinRoom"})).then(x=>{var F;return{server:(0,o.YY)(x.call),roomId:x.call.call_id,regions:"",inviteResponses:void 0,virtualRoomId:f,channelId:(F=x.huddle)===null||F===void 0?void 0:F.channels[0],...x.canvas&&x.canvas.root_thread_ts&&{rootThreadTs:x.canvas.root_thread_ts},...x.canvas&&x.canvas.canvas_file_id&&{canvasFileId:x.canvas.canvas_file_id}}}))});i.meta={name:"createFetcher",key:"createFetcherjoinRoom",description:"Join a calls / huddle room"};const d=(0,s.C6)("Notify member to join huddle",(p,A,v)=>{let{reason:E,channelId:f,userId:g}=v;return p((0,a.apiCall)({method:"rooms.notifyMember",args:{channel_id:f,user_id:g},reason:E}))});d.meta={name:"createFetcher",key:"createFetchernotifyMember",description:"Notify member to join huddle"};const _=(0,s.C6)("Set a huddle topic / rename the call",(p,A,v)=>{let{roomId:E,name:f}=v;return p((0,a.apiCall)({method:"screenhero.rooms.rename",reason:"huddles-topic",args:{room:E,room_name:f}}))});_.meta={name:"createFetcher",key:"createFetcherrenameCall",description:"Set a huddle topic / rename the call"};const h=(0,s.C6)("Get a link to a huddle",(p,A,v)=>{let{reason:E,channelId:f}=v;return p((0,a.apiCall)({method:"rooms.getLink",reason:E,args:{channel_id:f}}))});h.meta={name:"createFetcher",key:"createFetchergetLink",description:"Get a link to a huddle"}},609976:(j,T,e)=>{"use strict";e.d(T,{A:()=>d});var t=e(605556),n=e.n(t),s=e(789123),a=e(349799),c=e(146583),r=e(211700),o=e(180491),u=e(758808);let m=!1;const i=(0,s.A)("Sends a message",function(h,p){let{message:A,traceId:v,parentSpanId:E}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const f={...A},g=p();return A.blocks&&typeof A.blocks=="object"&&(f.blocks=JSON.stringify(A.blocks)),A.unfurl&&typeof A.unfurl=="object"&&(f.unfurl=JSON.stringify(A.unfurl)),m?new o.K((y,I)=>{setTimeout(()=>{I(new Error({data:{error:"testing"},message:"testing"}))},2e3)}):(0,u.A)(g)?h((0,c.apiCallPersisted)({method:"chat.postMessage",args:f,reason:"webapp_message_send_offline",EXPEDITED:!0,traceId:v,parentSpanId:E})):h((0,a.apiCall)({method:"chat.postMessage",args:f,reason:"webapp_message_send",EXPEDITED:!0,traceId:v,parentSpanId:E}))});i.meta={name:"createFetcher",key:"createFetcherchatPostMessage",description:"Sends a message"},i.propTypes={message:n().shape({channel:n().string.isRequired,client_msg_id:n().string}).isRequired,traceId:n().string,parentSpanId:n().string};const d=i,_=l(h=>{m=!!h},"setForceMessageFailure");(0,r.ul)("setForceMessageFailure",_)},517632:(j,T,e)=>{"use strict";e.d(T,{O:()=>i});var t=e(474722),n=e(605556),s=e.n(n),a=e(789123),c=e(349799),r=e(682520),o=e(547651),u=e(113574),m=e(116633);const i=(0,a.A)("Calls client.counts endpoint",function(d,_){let{reason:h="client-counts-api/fetchClientCounts"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return d((0,c.apiCall)({method:"client.counts",args:{thread_counts_by_channel:!0,org_wide_aware:!0,include_file_channels:!0},reason:h})).then(p=>{if(!p||!p.ok)return{};try{const C=["U0620EL8G","WFKHTCZ29","WKLQEGRRB"],P=(0,u.WR)(_());if(C.indexOf(P)>-1){const L=(0,t.A)(p.ims,F=>({id:F.id})),x=(0,t.A)(p.mpims,F=>({id:F.id}));(0,r.Ay)({getState:_}).error("guest_to_guest_visibility",{type:"client_counts_api_results",im_list:L,mpim_list:x})}}catch(C){(0,r.Ay)({getState:_}).error("guest_to_guest_visibility",{type:"client_counts_api_results",error:C})}const{activity:A={},channels:v=[],ims:E=[],mpims:f=[],threads:g={},file_channels:y={has_unreads:!1,mention_count:0},channel_badges:I={},alerts:O=null}=p,M={activity:A,channels:v,ims:E.map(C=>({...C,is_im:!0})),mpims:f.map(C=>({...C,is_mpim:!0})),threads:g,alerts:O,fileChannels:y,channelBadges:I};return(0,m.c3)(_())&&p.saved&&(M.saved=(0,o.XK)(p.saved)),M})});i.meta={name:"createFetcher",key:"createFetcherfetchClientCounts",description:"Calls client.counts endpoint"},i.propTypes={reason:s().string}},813955:(j,T,e)=>{"use strict";e.d(T,{KO:()=>r,_J:()=>o,zx:()=>u});var t=e(605556),n=e.n(t),s=e(349799),a=e(789123),c=e(912922);const r=(0,a.A)("Fetch all available and installed emoji collections from the API",function(m,i){let{reason:d}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return m((0,s.apiCall)({method:"emoji.collections.list",reason:d,args:{installed_only:"0"}}))});r.meta={name:"createFetcher",key:"createFetcherfetchEmojiCollections",description:"Fetch all available and installed emoji collections from the API"},r.propTypes={reason:n().string.isRequired};const o=(0,a.A)("Add an emoji collection",(m,i,d)=>{let{collectionId:_,reason:h}=d;return m((0,s.apiCall)({method:"emoji.addCollection",args:{collection_id:_},reason:h})).catch(p=>{if(p.name!=="already_installed")throw p})});o.meta={name:"createFetcher",key:"createFetcheraddEmojiCollection",description:"Add an emoji collection"},o.propTypes={collectionId:n().string.isRequired,reason:n().string.isRequired};const u=(0,a.A)("Remove an emoji collection",(m,i,d)=>{let{collectionId:_,reason:h}=d;return m((0,c.$x)({collectionId:_})),m((0,s.apiCall)({method:"emoji.removeCollection",reason:h,args:{collection_id:_}}))});u.meta={name:"createFetcher",key:"createFetcherremoveEmojiCollection",description:"Remove an emoji collection"},u.propTypes={collectionId:n().string.isRequired,reason:n().string.isRequired}},914319:(j,T,e)=>{"use strict";e.d(T,{Cl:()=>m,Is:()=>i,af:()=>u});var t=e(612104),n=e.n(t),s=e(789123),a=e(846709),c=e(881805),r=e(965148),o=e(951734);const u=(0,s.A)("Queries Flannel for a list of external connected orgs/teams",(d,_,h)=>{let{count:p,filter:A,marker:v}=h;return(0,r.P)((0,c.JY)(_()),{method:r.J8.EXTERNAL_TEAMS_LIST,args:{count:p,filter:A,marker:v}}).then(E=>E)});u.meta={name:"createFetcher",key:"createFetcherfetchExternalTeamsList",description:"Queries Flannel for a list of external connected orgs/teams"};const m=(0,s.A)("Queries Flannel for channel counts of external connected orgs/teams",(d,_,h)=>{let{teamIds:p,count:A,marker:v}=h;return(0,r.P)((0,c.JY)(_()),{method:r.J8.EXTERNAL_TEAMS_COUNTS,args:{team_ids:p,count:A,marker:v}}).then(E=>E)});m.meta={name:"createFetcher",key:"createFetcherfetchExternalTeamsCounts",description:"Queries Flannel for channel counts of external connected orgs/teams"};const i=(0,s.A)("Fetches and upserts external teams that match a query",function(){var d=(0,t.coroutine)(function*(_,h,p){const A=(0,c.JY)(h());return(0,o.Cj)(A,p).then(v=>{let{objects:E,next_marker:f}=v;return _((0,a.OU)({teams:E})),{externalTeams:E,nextMarker:f}})});return function(_,h,p){return d.apply(this,arguments)}}());i.meta={name:"createFetcher",key:"createFetcherfetchAndUpsertExternalTeamsWithQuery",description:"Fetches and upserts external teams that match a query"}},456966:(j,T,e)=>{"use strict";e.d(T,{Rs:()=>_,eS:()=>d,xs:()=>i});var t=e(605556),n=e.n(t),s=e(596034),a=e(269592),c=e(789123),r=e(349799),o=e(365389),u=e(885850);const m={"pins.list":{}},i=(0,c.A)("Get pinned items for channel",function(p,A){let{channelId:v,reason:E}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const f=m["pins.list"];return f[v]||(f[v]=p((0,r.apiCall)({method:"pins.list",args:{channel:v},reason:E})),f[v].then(g=>{const y=A(),I=(0,u.OL)(y,v);I&&(0,o.YJ)(g,I)}),f[v].finally(()=>delete f[v])),f[v]});i.meta={name:"createFetcher",key:"createFetcherpinsList",description:"Get pinned items for channel"},i.propTypes={channelId:n().string.isRequired,reason:n().string.isRequired};const d=(0,c.A)("Pin Message to channel",(p,A,v)=>{let{ts:E,fileId:f,fileCommentId:g,channelId:y,reason:I}=v;return p((0,r.apiCall)({method:"pins.add",reason:I,args:(0,s.A)({channel:y,timestamp:E,file:f,file_comment:g},a.A)}))});d.meta={name:"createFetcher",key:"createFetcherpinsAdd",description:"Pin Message to channel"},d.propTypes={channelId:n().string.isRequired,ts:n().string,fileId:n().string,fileCommentId:n().string,reason:n().string.isRequired};const _=(0,c.A)("Unpin Message from channel",(p,A,v)=>{let{ts:E,fileId:f,fileCommentId:g,channelId:y,reason:I}=v;return p((0,r.apiCall)({method:"pins.remove",reason:I,args:(0,s.A)({channel:y,timestamp:E,file:f,file_comment:g},a.A)}))});_.meta={name:"createFetcher",key:"createFetcherpinsRemove",description:"Unpin Message from channel"},_.propTypes={channelId:n().string.isRequired,ts:n().string,fileId:n().string,fileCommentId:n().string,reason:n().string.isRequired};const h={resetActiveCalls:()=>{Object.keys(m).forEach(p=>{m[p]={}})}}},138085:(j,T,e)=>{"use strict";e.d(T,{lp:()=>It,SI:()=>qt,DC:()=>se,Yb:()=>ge,aw:()=>Ut,g2:()=>b,U7:()=>Kt,eR:()=>lt,sr:()=>nt,Do:()=>es,EM:()=>wn,AC:()=>an,FF:()=>At,A$:()=>Xn,mi:()=>Ft,mK:()=>ts,bE:()=>ln,AQ:()=>Cn,Cs:()=>ot,J6:()=>Vn,LR:()=>Pt,cD:()=>jn,jl:()=>ct,QH:()=>qe,DF:()=>ns,UC:()=>Xe,fx:()=>Ze,lS:()=>z,A1:()=>_n,H9:()=>$n,ZD:()=>Sn,$P:()=>ut,G2:()=>$e,S:()=>Yn});var t=e(269592),n=e(42302),s=e(742531),a=e(792866),c=e(834098),r=e(219477),o=e(566401),u=e(292049),m=e(339993),i=e(59116),d=e(927167),_=e(180491),h=e(819187),p=e(518320),A=e(451793),v=e(256075),E=e(614175),f=e(569525),g=e(799372),y=e(362887),I=e(705091),O=e(250558),M=e(817871),C=e(914319),P=e(18906),L=e(884920),x=e(442157),F=e(873406),V=e(211700),B=e(417250),D=e(649098),S=e(119110),R=e(440863),w=e(129318),Y=e(961496),Q=e(934861),Z=e(734724);const ee=new D.Ay("modals");function _e(Qe){return[{id:"downloads",name:ee.t("Downloads"),icon:"download",isEnabled:()=>(0,S.y3)()},{id:"invite_to_workspace",name:ee.t("Invite people to {workspaceName}",{workspaceName:(0,Q.F1)((0,w.H7)(Qe))}),icon:"add-user",isEnabled:()=>(0,R.Lz)(Qe)},{id:"create_a_channel",name:ee.t("Create a Channel"),icon:"plus",isEnabled:()=>(0,Z.MM)(Qe)},{id:"create_a_canvas",name:ee.t("Create a canvas",{fallbackHash:"6ac4a1edc6d12317e9fc711b1fd00c073b191bdd",fallbackHashNs:"classic_nav"}),icon:"plus",isEnabled:()=>(0,Y.l)(Qe)}]}l(_e,"getAllModals");function Ee(Qe){return _e(Qe).filter(yt=>yt.isEnabled())}l(Ee,"getAllEnabledModals");var G=e(654183),Ae=e(671706),ce=e(455967),de=e(710596),oe=e(396386),$=e(46186),re=e(588830),ue=e(643816),te=e(850960),ae=e(170044),H=e(56239),U=e(3477),N=e(151488),K=e(23219),W=e(974576),J=e(965112),q=e(81527),ie=e(475746),Te=e(988727),Me=e(16e3),ke=e(755717),Pe=e(232150),Ie=e(97059),X=e(20967),ne=e(825047),fe=e(88748),be=e(19579),Be=e(713587),We=e(458939),Re=e(463561),ve=e(277387),xe=e(374615),He=e(555759),je=e(532395),Ke=e(45798),ht=e(20328),dt=e(656453),Ve=e(798160),Je=e(946699),Ge=e(529734),Le=e(692232);const Mt=new D.Ay("ia4"),Dt={get[Le.D.BrowseCanvases](){return Mt.t("All canvases",{fallbackHash:"50a279de829f2dc398ac2ac7c9367508ea4b5df5",fallbackHashNs:"channel_sidebar"})},get[Le.D.BrowseChannels](){return Mt.t("All channels",{fallbackHash:"50a279de829f2dc398ac2ac7c9367508ea4b5df5",fallbackHashNs:"channel_sidebar"})},get[Le.D.BrowsePeople](){return Mt.t("All people",{fallbackHash:"7aeeec03f7c076af275e9b7c0e187a40bd193acc",fallbackHashNs:"enterprise_dashboard"})},get[Le.D.BrowseFiles](){return Mt.t("All files",{fallbackHash:"f7857dcc71d3ce6a9095d1fbca5acb8cc9319005",fallbackHashNs:"search"})},get[Le.D.ExternalWorkspaceAllowedOrgPane](){return Mt.t("Organization",{fallbackHash:"519255ae1f74ffc5ddd29979295c7572f048ad81",fallbackHashNs:"member_profile"})},get[Le.D.RecentFiles](){return Mt.t("Recently Viewed Files",{fallbackHash:"6ce6c512ea433a7fc5c8841628e7696cd0ff7f2b"})},get[Le.D.FilesSharedWithYou](){return Mt.t("Files shared with you",{fallbackHash:"72f2b0dfa1e68a34813db5999ff8098f60ef699d",fallbackHashNs:"search"})},get[Le.D.FilesCreatedByYou](){return Mt.t("Files created by you",{fallbackHash:"8c292710d9aa5d3b598cf24b70f804cb0341e24e",fallbackHashNs:"search"})},get[Le.D.RecentCanvases](){return Mt.t("Recently Viewed Canvases",{fallbackHash:"6ce6c512ea433a7fc5c8841628e7696cd0ff7f2b"})},get[Le.D.CanvasesSharedWithYou](){return Mt.t("Canvases shared with you",{fallbackHash:"6ce6c512ea433a7fc5c8841628e7696cd0ff7f2b"})},get[Le.D.CanvasesCreatedByYou](){return Mt.t("Canvases created by you",{fallbackHash:"6ce6c512ea433a7fc5c8841628e7696cd0ff7f2b"})},[Le.D.DmsList]:void 0,[Le.D.LaterList]:void 0,[Le.D.Channel]:void 0,[Le.D.AppSpace]:void 0,[Le.D.Quip]:void 0,[Le.D.BrowseApps]:void 0,get[Le.D.ExternalOrganizations](){return Mt.t("External organizations",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},get[Le.D.ExternalOrganization](){return Mt.t("External organization",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},get[Le.D.ExternalPeople](){return Mt.t("External people",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},get[Le.D.SlackConnectChannels](){return Mt.t("Slack Connect channels",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},get[Le.D.SlackConnectInvitations](){return Mt.t("Slack Connect invitations",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},[Le.D.BrowseExternalWorkspace]:void 0,[Le.D.PostEvent]:void 0,[Le.D.BrowseShortcuts]:void 0,[Le.D.BrowseWorkflowsManagedByYou]:void 0,[Le.D.BrowseYourWorkflowTemplates]:void 0,[Le.D.BrowseWorkflowTemplates]:void 0,[Le.D.BrowseUserGroups]:void 0,[Le.D.OrgDirectory]:void 0,get[Le.D.RecentPlatform](){return Mt.t("Recently used workflows",{fallbackHash:"f97d1ab1f281e78d5e61024eee5be84679fd60ac",fallbackHashNs:"search"})},[Le.D.SlackConnect]:void 0,[Le.D.Page]:void 0,[Le.D.Threads]:void 0,[Le.D.Thread]:void 0,[Le.D.Profile]:void 0,[Le.D.FileDetails]:void 0,[Le.D.Help]:void 0,[Le.D.UserGroup]:void 0,[Le.D.KeyboardShortcuts]:void 0,[Le.D.WhatsNew]:void 0,[Le.D.Feedback]:void 0,[Le.D.List]:void 0,[Le.D.ListRecord]:void 0,[Le.D.ListRecordDetails]:void 0,[Le.D.ListRecordThread]:void 0,[Le.D.ListRecordHistory]:void 0,[Le.D.ComposeList]:void 0,[Le.D.Compose]:void 0,[Le.D.QuipCommentThread]:void 0,[Le.D.QuipCommentStream]:void 0,[Le.D.QuipActivityHistory]:void 0,[Le.D.QuipAutomationsOverview]:void 0,[Le.D.Canvas]:void 0,[Le.D.ChannelCanvas]:void 0,[Le.D.CanvasBrowser]:void 0,[Le.D.PaidBenefits]:void 0,[Le.D.Setup]:void 0,[Le.D.SearchEmpty]:void 0,[Le.D.AboutWorkspace]:void 0,[Le.D.Unknown]:void 0,[Le.D.MorePeopleSidebar]:void 0,[Le.D.MoreCanvasesSidebar]:void 0,[Le.D.AppPopout]:void 0,[Le.D.MorePlatformSidebar]:void 0,[Le.D.Search]:void 0,[Le.D.ChannelList]:void 0,[Le.D.BrowseLists]:void 0,[Le.D.MyItems]:void 0,[Le.D.BrowseList]:void 0,[Le.D.ActivityList]:void 0,[Le.D.MoreFilesSidebar]:void 0,[Le.D.MoreListsSidebar]:void 0,[Le.D.FilesPrototypeSidebar]:void 0,[Le.D.MoreChannelsSidebar]:void 0,[Le.D.MoreHuddlesSidebar]:void 0,[Le.D.MoreExternalConnectionsSidebar]:void 0,[Le.D.HelpBrowser]:void 0,[Le.D.Huddle]:void 0,[Le.D.BrowseHuddles]:void 0,[Le.D.KeyboardShortcutsBrowser]:void 0,[Le.D.WhatsNewBrowser]:void 0,[Le.D.FeedbackBrowser]:void 0,[Le.D.ExternalWorkspaceSidebar]:void 0,[Le.D.ExternalWorkspacePeopleBrowser]:void 0,[Le.D.ExternalWorkspaceChannelBrowser]:void 0,[Le.D.AiSummaryDetails]:void 0,[Le.D.DailyDigest]:void 0,[Le.D.MoreAiSummarySidebar]:void 0,[Le.D.SearchSummary]:void 0,[Le.D.AssistantList]:void 0,[Le.D.BrowseFilesPrototype]:void 0,[Le.D.Today]:void 0,[Le.D.Record]:void 0,[Le.D.RecordChannelCreate]:void 0,[Le.D.SalesAdministration]:void 0,[Le.D.SalesBulkGrid]:void 0,[Le.D.SalesHome]:void 0,[Le.D.SalesListViewBrowser]:void 0,[Le.D.SalesLogActivity]:void 0,[Le.D.SalesNotifications]:void 0,[Le.D.SalesSidebar]:void 0,[Le.D.AssistantThread]:void 0,[Le.D.Solutions]:void 0,[Le.D.ChannelFiles]:void 0,[Le.D.SlackKitPlayground]:void 0,[Le.D.AiApp]:void 0,[Le.D.CatchUpCards]:void 0,[Le.D.CatchUpList]:void 0,[Le.D.BookmarksFolder]:void 0,[Le.D.InboxList]:void 0,[Le.D.ActionItems]:void 0,[Le.D.Inbox]:void 0,[Le.D.SolutionsAddToChannel]:void 0,get[Le.D.WorkflowDetails](){return Mt.t("Workflow details",{fallbackHash:"badd385121c5861ac693b59ad8c160fdf7994344",fallbackHashNs:"channel_details"})},[Le.D.BBMMain]:void 0,[Le.D.BBMWorkspaceSwitcher]:void 0,[Le.D.SearchInChannel]:void 0},Qt=l(Qe=>Qe in Dt?Dt[Qe]:"","getDisplayNameForViewType");var Nt=e(581659),bt=e(996537),Yt=e(927892),fn=e(271338),Tt=e(962597),sn=e(352353),mn=e(824963),wt=e(31564),On=e(974651),Zt=e(671721),Mn=e(890849),Wn=e(103310),xn=e(684897),gn=e(674217),An=e(881805),vt=e(111171),xt=e(449552),Vt=e(412480),Se=e(606306),St=e(113574),Ce=e(846860),Ne=e(977408),ze=e(778953),Oe=e(843997),Fe=e(885850),_t=e(126796),ft=e(873645),Ct=e(135713),$t=e(969924),rn=e(934569),un=e(944881),hn=e(96120),pn=e(194478),Tn=e(437556),Qn=e(988482),zn=e(613748),Hn=e(921055),Kn=e(119589),os=e(431031),et=e(46712);const Et=(0,gn.Ay)("Search for Salesforce Records",(Qe,yt,Ht)=>Qe((0,os.C)(Ht)).then(it=>{let{records:st}=it;return Qe((0,et.ao)(st)),st}));Et.meta={name:"createThunk",key:"createThunksearchRecords",description:"Search for Salesforce Records"};var we=e(846709),tt=e(149038),Rt=e(6336);const It={entities:{channels:{includePublic:!0,includePrivate:!0,includeFromAnotherTeam:!1,includeMpims:!1,includeIms:!1,includeArchived:!0,onlyIfMember:!1,onlyVisibleMpims:!1,onlyVisibleIms:!1,includeExternallyShared:!0,includeOnlyExternallyShared:!0,allowedInternalTeams:void 0,shouldAllowedInternalTeamsMatchAny:void 0,onlyExternallyShared:!1,onlyFromTeamId:void 0,includeRecordChannels:!0},members:{includeSelf:!1,includeSlackbot:!0,includeBots:!0,includeWorkflows:!1,includeExternal:!0,includeAllExternal:!1,onlyLocalTeam:!1,includeGuests:!0,includeProfileOnlyUsers:!1,onlyExternalFromTeams:void 0,onlyFromExternalTeamId:void 0},userGroups:{includeDeleted:!1,includeFromAnotherTeam:!1},channelSections:{includeTypes:{[ze.lR]:!0,[ze.VH]:!0}}},limit:24,sort:{preferExactMatch:!0,frecency:!0,preferChannelsUserBelongsTo:!0,preferMpimsWithActiveMembers:!0,model:xn.KV},fuzzyLimit:3,fuzzyJumpLimit:20,fuzzyCJK:!0,returnMetadata:!1};function Jt(Qe){let{query:yt,options:Ht}=Qe;var it,st,gt;const Ue=(gt=Ht==null?void 0:Ht.entities)!==null&&gt!==void 0?gt:{},Bt=Ue==null?void 0:Ue.members;let zt=!1;return Bt&&Bt!==!0&&(zt=!!(Bt!=null&&Bt.matchEmailField)),{source:Ht==null||(it=Ht.sort)===null||it===void 0?void 0:it.source,tiered:Ht==null?void 0:Ht.tiered,is_searcher_sessions:!1,entities:Object.keys(Ue).filter(En=>!!Ue[En]).sort().toString(),query_length:yt.length,is_member_email_search:(Ht==null||(st=Ht.sort)===null||st===void 0?void 0:st.source)==="use-team-and-people-search"&&zt}}l(Jt,"getTraceTags");function an(Qe,yt){var Ht,it;const{excludeElmChannels:st,includePublic:gt,includePrivate:Ue,includeFromAnotherTeam:Bt,allowedInternalTeams:zt,shouldAllowedInternalTeamsMatchAny:En}=(it=(Ht=yt.entities)===null||Ht===void 0?void 0:Ht.channels)!==null&&it!==void 0?it:{};let tn=[];return gt&&(tn=[...tn,...(0,Fe.Wr)(Qe,{includeFromAnotherTeam:!!Bt})]),Ue&&(tn=[...tn,...(0,Fe.sE)(Qe,{includeFromAnotherTeam:!!Bt})]),st&&(tn=tn.filter(jt=>!(0,Re.A)(Qe,jt))),zt&&(tn=tn.filter(jt=>{if((0,ae.O)(jt))return!!En;const on=(0,re.R)(Qe,jt),In=En?on==null?void 0:on.some(Pn=>zt.includes(Pn)):on==null?void 0:on.every(Pn=>zt.includes(Pn));return(on==null?void 0:on.length)&&In})),tn}l(an,"getLocalChannels");function Ft(Qe,yt){var Ht;const it=(0,An.ZT)(Qe),st=yt==null||(Ht=yt.entities)===null||Ht===void 0?void 0:Ht.teams;var gt;const Ue=Object.values((gt=Rt._===null||Rt._===void 0?void 0:(0,Rt._)())!==null&&gt!==void 0?gt:{}).filter(jt=>jt.id!==it);if(st!=null&&st.onlyNavigable){const jt=(0,w._C)(Qe);return jt.length?[...Ue,...jt]:Ue}var Bt;const zt=(Bt=(0,w.iK)(Qe))!==null&&Bt!==void 0?Bt:{},En=Ue.map(jt=>jt.id),tn=Object.values(zt).filter(jt=>!En.includes(jt.id));return[...Ue,...tn].filter(_n(Qe,st))}l(Ft,"getLocalTeams");const Vn=(0,gn.Ay)("Get channels from flannel by query",(Qe,yt,Ht)=>{let{query:it,options:st}=Ht;var gt,Ue,Bt,zt;const{includeFromAnotherTeam:En,includeExternallyShared:tn,includeOnlyExternallyShared:jt,onlyExternallyShared:on,onlyFromTeamId:In,onlyFromExternalWorkspaceId:Pn,allowedInternalTeams:cn,shouldAllowedInternalTeamsMatchAny:Fn,includeRecordChannels:fs}=(zt=(gt=st.entities)===null||gt===void 0?void 0:gt.channels)!==null&&zt!==void 0?zt:{},Un=((Ue=st.entities)===null||Ue===void 0||(Bt=Ue.channels)===null||Bt===void 0?void 0:Bt.remoteLimit)||st.limit,rs=yt(),Jn=[],is=" AND ",Dn={query:it,count:Un||It.limit||24,fuzz:(0,Ct._Z)(rs,"fuzzy_no_fuzz")==="fuzzy_no_fuzz"?0:1,uax29_tokenizer:(0,Ct._Z)(rs,"searcher_flannel_cjk")==="cjk"};return En&&Jn.push("xws"),!(0,t.A)(tn)&&!tn&&Jn.push("NOT shared"),!(0,t.A)(jt)&&!jt&&Jn.push("NOT external"),!(0,t.A)(on)&&on&&Jn.push("shared"),Jn.length&&(Dn.filter=Jn.join(is)),In&&(Dn.external_team=In),Pn&&(Dn.external_team=Pn),cn&&(Dn.allowed_internal_teams=cn),Fn&&(Dn.should_allowed_internal_teams_match_any=Fn),fs&&!(0,g.Ht)(rs)&&(Dn.include_record_channels=!0),Qe((0,I.hq)({query:Dn})).timeout(2e3).catch(n.A)});Vn.meta={name:"createThunk",key:"createThunkgetRemoteChannels",description:"Get channels from flannel by query"};const Pt=(0,gn.Ay)("Get emoji from flannel by query",(Qe,yt,Ht)=>{let{query:it,options:st}=Ht;var gt,Ue;const Bt=((gt=st.entities)===null||gt===void 0||(Ue=gt.emoji)===null||Ue===void 0?void 0:Ue.remoteLimit)||st.limit;return Qe((0,M.l8)({query:{query:it,count:Bt}})).timeout(2e3).catch(n.A)});Pt.meta={name:"createThunk",key:"createThunkgetRemoteEmoji",description:"Get emoji from flannel by query"};const Xe=(0,gn.Ay)("Get user groups from the search.team endpoint by query",(Qe,yt,Ht)=>{let{query:it,options:st}=Ht;var gt,Ue,Bt,zt,En,tn;const jt=((gt=st.entities)===null||gt===void 0||(Ue=gt.userGroups)===null||Ue===void 0?void 0:Ue.remoteLimit)||st.limit;return Qe((0,L.cn)({query:{query:it,count:jt,org_wide:(Bt=st.entities)===null||Bt===void 0||(zt=Bt.userGroups)===null||zt===void 0?void 0:zt.includeFromAnotherTeam,channel:(En=st.entities)===null||En===void 0||(tn=En.userGroups)===null||tn===void 0?void 0:tn.channel}})).timeout(2e3).catch(n.A)});Xe.meta={name:"createThunk",key:"createThunkgetRemoteUserGroups",description:"Get user groups from the search.team endpoint by query"};const Ze=(0,gn.Ay)("Get remote triggers with query",(Qe,yt,Ht)=>{let{query:it}=Ht;return Qe((0,un.tP)({query:it}))});Ze.meta={name:"createThunk",key:"createThunkgetRemoteWorkflowTriggers",description:"Get remote triggers with query"};const lt=(0,gn.Ay)("Get bulk user groups from the userGroups.searchBulk endpoint by query",(Qe,yt,Ht)=>{let{queries:it,options:st}=Ht;var gt,Ue,Bt,zt,En,tn;const jt=((gt=st.entities)===null||gt===void 0||(Ue=gt.userGroups)===null||Ue===void 0?void 0:Ue.remoteLimit)||st.limit;return Qe((0,L.MZ)({query:{queries:it,count:jt,org_wide:(Bt=st.entities)===null||Bt===void 0||(zt=Bt.userGroups)===null||zt===void 0?void 0:zt.includeFromAnotherTeam,channel:(En=st.entities)===null||En===void 0||(tn=En.userGroups)===null||tn===void 0?void 0:tn.channel}})).timeout(2e3).catch(n.A)});lt.meta={name:"createThunk",key:"createThunkgetBulkRemoteUserGroups",description:"Get bulk user groups from the userGroups.searchBulk endpoint by query"};function nt(Qe,yt){const{includeArchived:Ht,includeRequired:it,onlyIfMember:st,canPost:gt,includeExternallyShared:Ue,includeOnlyExternallyShared:Bt,onlyExternallyShared:zt,onlyFromTeamId:En,onlyFromExternalWorkspaceId:tn}=yt??{};return jt=>{let on=!0;if(Ht||(on=on&&!(0,te.F)(jt)),!(0,t.A)(it)&&!it&&(on=on&&!(0,oe.gx)(jt)),zt&&(on=on&&(0,Ie.ju)(jt)),(!Ue||!Bt)&&(on=on&&!(0,Ie.ju)(jt)),st&&(on=on&&(0,de.bl)(jt)),gt&&(on=on&&(0,be.E)(Qe,jt.id)),En){var In;on=on&&(((In=(0,$.A)(Qe,jt))===null||In===void 0?void 0:In.includes(En))||!1)}return tn&&(on=on&&(0,de.ne)(Qe,jt)===tn),on}}l(nt,"getChannelFilterFunction");const qe=(0,gn.Ay)("Get members from flannel by query",(Qe,yt,Ht)=>{let{query:it,options:st}=Ht;var gt,Ue,Bt;const{includeDeleted:zt,matchEmailField:En,onlyExternal:tn,includeExternal:jt,includeAllExternal:on,includeBots:In,onlyFromExternalTeamId:Pn,onlyFromExternalWorkspaceId:cn}=(Bt=st.entities.members)!==null&&Bt!==void 0?Bt:{},Fn=((gt=st.entities)===null||gt===void 0||(Ue=gt.members)===null||Ue===void 0?void 0:Ue.remoteLimit)||st.limit,fs=yt(),Un=[],rs=(0,Q.r7)((0,w.H7)(fs))||!!(0,An.jV)(fs),Jn=rs?["NOT org"]:["NOT team"],is=rs?["org"]:["team"],Dn=!zt,us=" AND ",Ln={query:it,count:Fn||It.limit||24,fuzz:(0,Ct._Z)(fs,"fuzzy_no_fuzz")==="fuzzy_no_fuzz"||st.fuzzyLimit===0?0:1,uax29_tokenizer:(0,Ct._Z)(fs,"searcher_flannel_cjk")==="cjk"};return Dn&&Un.push("NOT deactivated"),(tn||Pn)&&Un.push(...Jn),(Pn||cn)&&(Ln.external_team=Pn||cn),In||Un.push("NOT bots"),jt||Un.push(...is),jt&&on&&(Ln.include_all_external=!0),En&&(Ln.search_email=!0),Un.length&&(Ln.filter=Un.join(us)),Qe((0,P.Wr)({query:Ln})).timeout(2e3).catch(n.A)});qe.meta={name:"createThunk",key:"createThunkgetRemoteMembers",description:"Get members from flannel by query"};const Kt=(0,gn.Ay)("Get members from flannel by query",(Qe,yt,Ht)=>{let{queries:it,options:st}=Ht;var gt,Ue,Bt,zt;const{includeDeleted:En,matchEmailField:tn}=(zt=(gt=st.entities)===null||gt===void 0?void 0:gt.members)!==null&&zt!==void 0?zt:{},jt=((Ue=st.entities)===null||Ue===void 0||(Bt=Ue.members)===null||Bt===void 0?void 0:Bt.remoteLimit)||st.limit||24,on=yt(),In=[],Pn=!En,cn=" AND ",Fn={queries:it,count:jt,fuzz:(0,Ct._Z)(on,"fuzzy_no_fuzz")==="fuzzy_no_fuzz"?0:1,uax29_tokenizer:(0,Ct._Z)(on,"searcher_flannel_cjk")==="cjk"};return Pn&&In.push("NOT deactivated"),tn&&(Fn.match_email=!0),In.length&&(Fn.filter=In.join(cn)),Qe((0,P.W9)({query:Fn})).timeout(2e3).catch(n.A)});Kt.meta={name:"createThunk",key:"createThunkgetBulkRemoteMembers",description:"Get members from flannel by query"};function ln(Qe,yt){const{includeSelf:Ht,includeSlackbot:it,includeBots:st,includeWorkflows:gt,includeDeleted:Ue,includeExternal:Bt,includeGuests:zt,includeProfileOnlyUsers:En,onlyLocalTeam:tn,onlyExternal:jt,onlyExternalFromTeams:on,onlyFromExternalTeamId:In}=yt??{};return Pn=>{let cn=!0;if(jt&&(cn=cn&&(0,J.g)(Pn)&&!(0,W.A)(Pn)),Ht||(cn=cn&&!(0,K.fy)(Pn)),it||(cn=cn&&!(0,ie.U)(Pn)),on)return(0,s.A)(on,(0,Te.dQ)(Pn));if(In)return Ht&&(0,K.fy)(Pn)?!0:(0,J.g)(Pn)&&(0,Te.dQ)(Pn)===In;if(st||(cn=cn&&!(0,W.A)(Pn)&&!(0,ie.U)(Pn)),gt||(cn=cn&&!(0,K.v3)(Pn)),Ue||(cn=cn&&!(0,K.oy)(Pn)),Bt||(cn=cn&&!(0,J.g)(Pn)),zt||(cn=cn&&!(0,q.P)(Pn)),En||(cn=cn&&!(0,K.hh)(Pn)),En&&(0,K.hh)(Pn)&&(cn=cn&&!(0,K.oy)(Pn)),tn){const Fn=(0,An.ZT)(Qe);(0,K.hh)(Pn)&&En||(cn=cn&&(0,Te.nO)(Pn,Fn))}return cn}}l(ln,"getMemberFilterFunction");function _n(Qe,yt){var Ht;const{includeCurrentTeam:it,includeExternal:st,onlyExternal:gt,onlyCurrentOrg:Ue,onlyAvailableToCurrentOrg:Bt,onlyMemberOnCurrentOrg:zt}=yt??{},En=(0,An.Kc)(Qe),tn=(0,St.WR)(Qe),jt=(0,Tn.nv)(Qe,tn),on=(jt==null||(Ht=jt.enterprise_user)===null||Ht===void 0?void 0:Ht.teams)||[];return In=>!(!it&&In.id===(0,An.ZT)(Qe)||gt&&!(0,ne.z)(Qe,In)||!st&&!gt&&!Bt&&(0,ne.z)(Qe,In)||Ue===!0&&In.id!==En&&(0,Q.Ss)(In)!==En||Bt===!0&&In.id!==En&&(0,Q.Ss)(In)!==En&&!(0,ne.z)(Qe,In)||zt===!0&&!on.includes(In.id))}l(_n,"getTeamFilterFunction");function Cn(Qe,yt){const{onlyVisibleMpims:Ht,onlyExternallyShared:it,includeExternallyShared:st,onlyFromTeamId:gt}=yt??{};return Ue=>{let Bt=!0;if(Ht&&(Bt=Bt&&(0,de.w6)(Qe,Ue)),it&&(Bt=Bt&&(0,Ie.ju)(Ue)),st===!1&&(Bt=Bt&&!(0,Ie.ju)(Ue)),gt){var zt;Bt=Bt&&(((zt=(0,$.A)(Qe,Ue))===null||zt===void 0?void 0:zt.includes(gt))||!1)}return Bt}}l(Cn,"getMpimFilterFunction");function wn(Qe,yt){const{onlyExternallyShared:Ht,includeExternallyShared:it,onlyFromTeamId:st,onlyVisibleIms:gt}=yt??{};return Ue=>{let Bt=!0;if(gt&&(Bt=Bt&&(0,de.PE)(Qe,Ue)),Ht&&(Bt=Bt&&(0,Ie.ju)(Ue)),it||(Bt=Bt&&!(0,Ie.ju)(Ue)),st){var zt;Bt=Bt&&(((zt=(0,$.A)(Qe,Ue))===null||zt===void 0?void 0:zt.includes(st))||!1)}return Bt}}l(wn,"getImFilterFunction");function $n(Qe,yt){const{includeDeleted:Ht,includeFromAnotherTeam:it,onlyFromExternalWorkspaceId:st}=yt??{};return gt=>{let Ue=!0;return it||(Ue=Ue&&!(0,tt.dk)(Qe,gt.id)),Ht||(Ue=Ue&&(0,fe.V1)(gt)),st&&(Ue=Ue&&(0,fe.$Q)(gt)===st),Ue}}l($n,"getUserGroupFilterFunction");function es(Qe,yt){const{onlyCanvases:Ht=!1,onlyLists:it=!1,onlyWriteable:st=!1,onlyChannelCanvases:gt=!1,onlyTemplateCanvases:Ue=!1,includeChannelCanvases:Bt=!1,excludeTemplateCanvases:zt=!1}=yt??{},En=(0,ke.hq)(Qe),tn=(0,An.Kc)(Qe),jt=(0,w._J)(Qe,tn),on=jt&&!(0,Q.qR)(jt);return In=>{let Pn=!0;return Ht&&(Pn=Pn&&((0,U.wL)(In)&&!on||En&&Bt&&(0,U.O8)(In)),(0,U.dE)(In)&&zt)?!1:(En&&(gt||on)&&(Pn=Pn&&!(0,U.wL)(In)&&(0,U.O8)(In)),Ue&&(Pn=Pn&&(0,U.dE)(In)),it&&(Pn=Pn&&(0,U.l7)(In)),st&&(Pn=Pn&&(0,U.mW)(In)),Pn)}}l(es,"getFileFilterFunction");const ns=(0,gn.Ay)("Get teams via API by query",(Qe,yt,Ht)=>{let{query:it,options:st}=Ht;var gt,Ue;const{onlyExternal:Bt,includeExternal:zt,remoteLimit:En}=(Ue=(gt=st.entities)===null||gt===void 0?void 0:gt.teams)!==null&&Ue!==void 0?Ue:{},tn=yt();if((0,We.DM)(tn))return _.S.resolve();if(Bt||zt)return Qe((0,C.Is)(it)).timeout(2e3).catch(n.A);const jt=En||st.limit||24;return Qe((0,we.vB)({query:it,count:jt})).timeout(2e3).catch(n.A)});ns.meta={name:"createThunk",key:"createThunkgetRemoteTeams",description:"Get teams via API by query"};const jn=(0,gn.Ay)("Get files via API by query",(Qe,yt,Ht)=>{let{query:it,options:st}=Ht;var gt,Ue;const{onlyCanvases:Bt,onlyChannelCanvases:zt,onlyTemplateCanvases:En,onlyLists:tn,excludeTemplateCanvases:jt,bypassCache:on}=(Ue=(gt=st.entities)===null||gt===void 0?void 0:gt.files)!==null&&Ue!==void 0?Ue:{};let In=it;return En?In=`type:canvas_template ${it}`:Bt||zt?In=`${jt?"type:quip -type:canvas_template":"type:quip"} ${it}`:tn&&(In=`type:list ${it}`),Qe((0,O.yF)({query:In,includeShares:!0,bypassCache:on})).timeout(2e3).catch(n.A)});jn.meta={name:"createThunk",key:"createThunkgetRemoteFiles",description:"Get files via API by query"};function ts(Qe){const yt=(0,Ge.cc)(Qe),Ht=(0,ce.A4)(),it={},st=[];yt&&(p.cw.forEach(Ue=>{const Bt=(0,Nt.A)({tab:Ue,experimentDesktopIa4GroupOn:yt});(0,bt.A)(Qe,Ue)&&Bt&&!(Bt in it)&&(st.push({id:Ue,name:Bt,is_view:!0,is_tab_view:!0}),it[Bt]=Bt)}),p.g5.forEach(Ue=>{const Bt=Qt(Ue);(0,Yt.A)(Qe,Ue)&&Bt&&!(Bt in it)&&(st.push({id:Ue,name:Bt,is_view:!0,is_mva_view:!0}),it[Bt]=Bt)})),Ht.forEach(Ue=>{if(!(0,ce.cH)(Qe,Ue)&&!(Ue.id==="Pslack-connect"&&!(0,v.A)(Qe))&&!(Ue.id==="Pactivity"&&yt)&&!(Ue.id===G.c.Apps&&!yt&&!(0,Pe.t)(Qe))&&!(Ue.id===G.c.Shortcuts&&!(0,Me.Bf)(Qe))&&!(Ue.id===G.c.BrowseWorkflowTemplates&&!(0,Me.fh)(Qe))&&!(Ue.id===G.c.BrowseWorkflowsManagedByYou&&!(0,Me.EH)(Qe))&&!(Ue.id===G.c.BrowseYourWorkflowTemplates&&!(0,Me.M7)(Qe))&&((0,ce.l1)(Qe,Ue)||Ue.id==="Punreads"&&(0,Hn.ty)(Qe,"enable_unread_view"))){const Bt=(0,Ae.yb)(Qe,Ue);Bt&&!(Bt in it)&&(st.push({...Ue,name:Bt,is_view:!0,is_page_view:!0}),it[Bt]=Bt)}});const gt=(0,Tt.lI)("Vall_threads");return gt&&(!yt||(0,Hn.ty)(Qe,"enable_threads_view"))&&!(0,y.R)(Qe)&&st.push(gt),st}l(ts,"getLocalViews");function Xn(Qe){return Ee(Qe)}l(Xn,"getLocalModals");function At(Qe){return(0,ve.xf)(Qe)?[{id:Qe,score:0,item:{id:Qe,value:Qe,isEmail:!0}}]:[]}l(At,"getLocalEmails");function b(Qe,yt){const Ht=!yt;let it=Ke.Ml;if(yt){const st=(0,Fe.OL)(Qe,yt);it=st&&(0,ue.f)(Qe,st)||Ke.Ml}return(0,Vt.PL)(Qe).flatMap(st=>{if((0,Ge.cc)(Qe)&&st.teams&&(it.length||Ht)&&!st.isWorkspaceAgnostic){const gt=Ht?st.teams:st.teams.filter(Ue=>it.includes(Ue));if(gt.length>1)return gt.map(Ue=>{const Bt=(0,w._J)(Qe,Ue),zt=(0,Q.F1)(Bt);return{...st,name:`${st.name} ${zt}`,applicableTeamId:Ue}})}return[st]})}l(b,"getAppActionsWithEntriesPerApplicableTeam");function z(Qe,yt,Ht){const it=(0,Fe.OL)(Qe,yt),st=it?(0,ue.f)(Qe,it)||[]:[];return(0,ht.A_)(Qe,yt,!!Ht,!0).flatMap(gt=>{if((0,Ge.cc)(Qe)&&gt.teams&&st.length&&gt.appName!=="Slack"&&!gt.isWorkspaceAgnostic){const Ue=gt.teams.filter(Bt=>st.includes(Bt));if(Ue.length>1)return Ue.map(Bt=>({...gt,id:(0,X.Bs)(gt),isSlashCommand:!0,applicableTeamId:Bt}))}return[{...gt,id:(0,X.Bs)(gt),isSlashCommand:!0}]})}l(z,"getSlashCommandsListWithEntriesPerApplicableTeam");function me(Qe,yt){let Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";Sn(yt);const it={},{members:st,channels:gt,teams:Ue,userGroups:Bt,appActions:zt,views:En,broadcastKeywords:tn,emoji:jt,files:on,links:In,lists:Pn,channelSections:cn,emails:Fn,modals:fs,shortcuts:Un,workflowTriggers:rs,helpArticles:Jn,salesforceRecords:is,salesListViews:Dn}=yt.entities;if(gt&&(gt.includePublic||gt.includePrivate)&&(it.channels=an(Qe,yt)),gt&&gt.includeMpims&&(it.mpims=(0,Fe.FS)(Qe)),gt&&gt.includeIms&&(it.ims=(0,Fe._B)(Qe)),st&&(it.members=st.onlyFromExternalWorkspaceId?Ke.Ml:(0,Tn.I_)(Qe).filter(as=>(0,Ce.zP)(Qe,as.id))),Ue&&(it.teams=Ft(Qe,yt)),Bt&&(it.userGroups=(0,tt.jJ)(Qe)),zt&&(it.appActions=(0,A.B)(Qe)?(0,Vt.PL)(Qe):b(Qe,zt.channel)),on&&(it.files=(0,$t.Gn)(Qe)),In&&(it.links=(0,hn.EH)(Qe)),Pn&&(it.lists=(0,pn.C0)(Qe)),En&&(it.views=ts(Qe)),fs&&(it.modals=Xn(Qe)),tn){var us;if(tn.includeAll)it.broadcastKeywords=(0,xe.A)();else if(!(tn==null||(us=tn.currentChannel)===null||us===void 0)&&us.id){var Ln;it.broadcastKeywords=(0,He.A)(Qe,tn==null||(Ln=tn.currentChannel)===null||Ln===void 0?void 0:Ln.id)}else it.broadcastKeywords=[]}if(jt&&(it.emoji=(0,ft.Gt)(Qe)),cn&&(it.channelSections=(0,a.A)((0,Oe.jV)(Qe))),(Un!=null&&Un.slashCommands||Un!=null&&Un.fakeGlobalActions)&&!(Un!=null&&Un.isAnnounceOnly)&&(it.slashCommands=(0,ht.A_)(Qe,Un.channel,!!Un.threadTs,!0).map(as=>({...as,id:(0,X.Bs)(as),isSlashCommand:!0}))),Un!=null&&Un.slackGlobalActions&&(it.slackGlobalActions=(0,ht.Yk)(Qe,Un.channel,Un.threadTs)),Un!=null&&Un.quipShortcutCommands&&(it.quipShortcutCommands=(0,vt.Aw)(Qe,!!Ht)),Un!=null&&Un.channelActions&&(it.channelActions=(0,Ne.fo)(Qe,Un.channel)),Un!=null&&Un.fakeGlobalActions&&(it.fakeGlobalActions=(0,ht.JL)(Qe,Un.channel,Un.threadTs)),Un!=null&&Un.callActions&&(it.callActions=(0,ht.Uw)(Qe,Un.channel,Un.threadTs,Un.isAnnounceOnly)),rs){const as=(0,ht.NJ)(Qe);rs.includeAutomated?it.workflowTriggers=as:it.workflowTriggers=as.filter(_s=>_s.type===x.M.Shortcut)}Fn&&(it.emails=At(Ht));const ss=(0,Ve.dL)(Qe);if(Jn&&ss&&(it.helpArticles=(0,rn.Fb)(Qe,"searcher/fetch_all_articles")),is&&(0,g.Ht)(Qe)&&(it.salesforceRecords=Object.values((0,Kn.nI)(Qe))),Dn){const{objectType:as,salesforceOrgId:_s}=Dn,ms=(0,Qn.Up)(Qe),cs=as?(0,Qn.Zs)(Qe,_s,as):(0,c.A)(Object.values((0,Qn.m3)(Qe,_s)));it.salesListViews=cs.map(As=>ms[As])}return Yn(),it}l(me,"fetchLocal");const pe=(0,gn.Ay)("Search for local entities within Slack based on options",(Qe,yt,Ht)=>{let{query:it,options:st,autoTraceId:gt,parentSpanId:Ue}=Ht;var Bt;const zt=yt(),En=(Bt=B.LI.get({label:B.gC.Searcher,id:gt}))===null||Bt===void 0?void 0:Bt.createChildSpan({name:"searcher:fetch_remote",additionalSpanOptions:{parentSpanId:Ue}}),tn=[],jt=[],{channels:on,files:In,members:Pn,teams:cn,userGroups:Fn,appActions:fs,emoji:Un,helpArticles:rs,workflowTriggers:Jn,salesforceRecords:is,salesListViews:Dn}=st.entities;if(Pn){const Ln=Qe(qe({query:it,options:st}));Pn.runaway?jt.push(Ln):tn.push(Ln)}if(on){const Ln=Qe(Vn({query:it,options:st}));on.runaway?jt.push(Ln):tn.push(Ln)}if(Un){const Ln=Qe(Pt({query:it,options:st}));Un.runaway?jt.push(Ln):tn.push(Ln)}if(In&&((0,Je.A)(it)||it.length>3)){const Ln=(0,sn.G)(yt());if(!Ln.contains(it)&&!Ln.isRequestInFlight()){Ln.add(it),Ln.setRequestInFlight();const ss=Qe(jn({query:it,options:st}));In.runaway?jt.push(ss):tn.push(ss)}}if(Fn){const Ln=Qe(Xe({query:it,options:st}));Fn.runaway?jt.push(Ln):tn.push(Ln)}if(cn&&((0,N.k)(zt)||cn.onlyExternal||cn.includeExternal)&&!cn.onlyLocal){const Ln=Qe(ns({query:it,options:st}));cn.runaway?jt.push(Ln):tn.push(Ln)}if(Jn){const Ln=(0,mn.X)(zt);if(!Ln.contains(it)&&!Ln.isRequestInFlight()){Ln.add(it),Ln.setRequestInFlight();const ss=Qe(Ze({query:it}));ss&&(Jn.runaway?jt.push(ss):tn.push(ss))}}if((0,Be.e)(zt)&&fs){const Ln=Qe((0,Se.G)()).timeout(2e3).catch(n.A);fs.runaway?jt.push(Ln):tn.push(Ln)}const us=(0,Ve.dL)(zt);if(rs&&us&&(0,rn.Fb)(zt,"searcher/fetch_all_articles"),(0,f.A)(it)){if(is){const Ln=Qe(Et({query:it,limit:10,reason:"Searcher"}));tn.push(Ln)}if(Dn){const{objectType:Ln,salesforceOrgId:ss}=Dn;tn.push(Qe((0,zn.b)({query:it,objectType:Ln,salesforceOrgId:ss})))}}return _.S.all(tn).then(Ln=>{const ss=yt(),as=me(ss,st,it);if(as.remoteIds=ct(Ln),Pn&&Pn.onlyFromExternalWorkspaceId){var _s,ms;as.members=(ms=(_s=Ln.find(As=>!!As.members))===null||_s===void 0?void 0:_s.members)!==null&&ms!==void 0?ms:Ke.Ml}const cs=(0,r.A)((0,a.A)(as),"length");return jt.length&&!cs?_.S.all(jt).then(()=>me(yt(),st)):(En==null||En.close(),as)})});pe.meta={name:"createThunk",key:"createThunkfetchRemote",description:"Search for local entities within Slack based on options"};function ct(Qe){const yt={};return Qe.forEach(Ht=>{Ht&&(Ht.appActions&&(yt.appActions=new Set(Ht.appActions.map(it=>it.id))),Ht.channels&&(yt.channels=new Set(Ht.channels.map(it=>it.id))),Ht.emoji&&(yt.emoji=new Set(Ht.emoji.map(it=>it.name))),Ht.files&&(yt.files=new Set(Ht.files.map(it=>it.id))),Ht.members&&(yt.members=new Set(Ht.members.map(it=>it.id))),Ht.userGroups&&(yt.userGroups=new Set(Ht.userGroups.map(it=>it.id))),Ht.teams&&(yt.teams=new Set(Ht.teams.map(it=>it.id))))}),yt}l(ct,"getRemoteIds");const ut=(0,gn.Ay)("Search for entities within Slack by query",(Qe,yt,Ht)=>{let{query:it="",options:st=It}=Ht;var gt;if(!it.length&&!st.allowEmptyQuery)return _.S.resolve([]);const Ue=yt(),Bt=(0,dt.Cy)({state:Ue}),zt=(0,h.A)();Bt.mark(`modern-searcher-search-mark-${zt}`);const En=(0,wt.O)(it,{shouldTrimEmoji:!1,shouldTrimDocument:!1});var tn;B.LI.start({label:B.gC.Searcher,id:zt,options:{teamId:(tn=(0,An.ZT)(Ue))!==null&&tn!==void 0?tn:null,tags:Jt({query:En,options:st})}});const jt=(gt=B.LI.get({label:B.gC.Searcher,id:zt}))===null||gt===void 0?void 0:gt.createChildSpan({name:"searcher:search"}),on=Ut(st,It,it);if((0,o.A)(on))return _.S.resolve([]);if((0,H.x)(Ue)!==_t.M9.ONLINE||!(st!=null&&st.allowEmptyQueryRemoteSearch)&&!En.length&&(0,fn.A)()&&(0,Ct._Z)(Ue,"searcher_local_empty_string")==="treatment")return _.S.resolve($e(Ue,{query:En,options:on,autoTraceId:zt,parentSpanId:jt==null?void 0:jt.getId()}));const In=_.S.delay(0).then(()=>Qe(pe({query:En,options:on,autoTraceId:zt,parentSpanId:jt==null?void 0:jt.getId()}))).then(Pn=>{const cn=yt();return nn(cn,{query:En,data:Pn,options:on,autoTraceId:zt,parentSpanId:jt==null?void 0:jt.getId()})});if(on.tiered){const Pn=$e(Ue,{query:En,options:on,autoTraceId:zt,parentSpanId:jt==null?void 0:jt.getId()}),cn=In.finally(()=>{jt==null||jt.close(),B.LI.stop({label:B.gC.Searcher,id:zt})}),Fn=Object.assign(Pn,{promise:cn});return _.S.resolve(Fn).finally(()=>{Bt.measureAndClear(`modern-searcher-search-mark-${zt}`,"modern-searcher-search-tiered")})}return In.finally(()=>{Bt.measureAndClear(`modern-searcher-search-mark-${zt}`,"modern-searcher-search"),jt==null||jt.close(),B.LI.stop({label:B.gC.Searcher,id:zt})})});ut.meta={name:"createThunk",key:"createThunksearch",description:"Search for entities within Slack by query"};function $e(Qe,yt){let{query:Ht="",options:it,autoTraceId:st,parentSpanId:gt}=yt;var Ue;let Bt=st;if(!Bt){Bt=(0,h.A)();var zt;B.LI.start({label:B.gC.Searcher,id:Bt,options:{teamId:(zt=(0,An.ZT)(Qe))!==null&&zt!==void 0?zt:null,tags:Jt({query:Ht,options:it})}})}const En=(Ue=B.LI.get({label:B.gC.Searcher,id:Bt}))===null||Ue===void 0?void 0:Ue.createChildSpan({name:"searcher:search_local",additionalSpanOptions:{parentSpanId:gt}});if(!Ht.length&&!it.allowEmptyQuery)return[];const tn=Ut(it,It,Ht);if((0,o.A)(tn))return[];const jt=(0,wt.O)(Ht,{shouldTrimEmoji:!1}),on=me(Qe,tn),In=nn(Qe,{query:jt,data:on,options:tn,autoTraceId:Bt,parentSpanId:En==null?void 0:En.getId()});return En==null||En.close(),In}l($e,"searchLocal");const k=15,se=l(Qe=>{let{clogger:yt,data:Ht}=Qe;const{source:it,query:st,results:gt,selectedItemId:Ue,displayedItemIds:Bt,openMethod:zt}=Ht,En=Bt?Bt.length:gt.length,tn=Bt&&Ue?Bt.indexOf(Ue):gt.findIndex(Jn=>Jn.item.id===Ue);if(tn<0)return;const jt=gt.find(Jn=>Jn.item.id===Ue);if(!jt)return;const on=jt.type||"other",In=(0,wt.O)(st),Pn=jt.source||"local";let cn;jt.type==="mpim"?cn=jt.scoreDetailsByMember:jt.type==="member"&&Ue?cn={[Ue]:{is_exact_match:jt.isExactMatch,exact_match_details:jt.exactMatchDetails,score_details:jt.scoreDetails}}:jt.type==="emoji"&&Ue&&(cn={[Ue]:{is_exact_match:jt.isExactMatch}});let Fn=[];gt.some(Jn=>Jn.featureVector)&&(Bt?Fn=Bt.map(Jn=>{const is=gt.find(Dn=>Dn.item.id===Jn);return is&&is.featureVector.serialize()||""}):Fn=gt.map(Jn=>{var is,Dn;return Jn==null||(is=Jn.featureVector)===null||is===void 0||(Dn=is.serialize)===null||Dn===void 0?void 0:Dn.call(is)}));let Un;(0,u.A)(st)?Un=st.reduce((Jn,is)=>Jn+ot((0,wt.O)(is)),0):Un=ot(In);const rs={source:it,query_length:In.length?In.length:0,query_terms_length:Un,results_length:En,selected_position:tn,selected_type:on,selected_source:Pn,selected_match_details:cn,feature_vector_list:Fn.slice(0,k),open_method:zt};yt.track(je.EventId.SEARCHER_ACCEPT,rs)},"clogSearcherAccept"),ge=l(Qe=>{let{clogger:yt,data:Ht}=Qe;const{source:it,query:st,results:gt,displayedItemIds:Ue}=Ht,Bt=Ue!==void 0?Ue.length:gt.length,zt=(0,wt.O)(st);let En;(0,u.A)(st)?En=st.reduce((jt,on)=>jt+ot((0,wt.O)(on)),0):En=ot(zt);const tn={source:it,query_length:zt.length?zt.length:0,query_terms_length:En,results_length:Bt};yt.track(je.EventId.SEARCHER_REJECT,tn)},"clogSearcherReject");function ot(Qe){return Qe?Qe.split(On.u).filter(yt=>yt.length).length:0}l(ot,"getQueryTermsLength");function nn(Qe,yt){let{query:Ht,data:it,options:st,autoTraceId:gt,parentSpanId:Ue}=yt;var Bt,zt,En,tn,jt;const on=(Bt=B.LI.get({label:B.gC.Searcher,id:gt}))===null||Bt===void 0?void 0:Bt.createChildSpan({name:"searcher:process",additionalSpanOptions:{parentSpanId:Ue}});Sn(st);const In=(0,Ct._Z)(Qe,"searcher_avoid_exact_member_match")==="treatment",Pn=(0,Ct._Z)(Qe,"nerf_email_fuzzy_match")==="treatment",cn={},Fn=new Zt.A({query:Ht,options:{...st,sort:{...st.sort,avoidExactMatchForMembers:In},fuzzyEmailSearchForwardOnly:Pn}}),fs=(0,dt.Cy)({state:Qe});fs.mark("modern-searcher-matching-mark");const Un=(zt=B.LI.get({label:B.gC.Searcher,id:gt}))===null||zt===void 0?void 0:zt.createChildSpan({name:"searcher:searcher_match",additionalSpanOptions:{parentSpanId:on==null?void 0:on.getId()}});it.channels&&(cn.channels=Fn.filterChannels(Qe,it.channels,nt(Qe,st.entities.channels))),it.members&&(cn.members=Fn.filterMembers(Qe,it.members,ln(Qe,st.entities.members))),it.emails&&it.members&&!(!(cn==null||(En=cn.members)===null||En===void 0)&&En.length)&&(cn.emails=it.emails),it.mpims&&(cn.mpims=Fn.filterMpims(Qe,it.mpims,Cn(Qe,st.entities.channels))),it.ims&&(cn.ims=Fn.filterIms(Qe,it.ims,wn(Qe,st.entities.channels))),it.userGroups&&(cn.userGroups=Fn.filterUserGroups(Qe,it.userGroups,$n(Qe,st.entities.userGroups))),it.teams&&(cn.teams=Fn.filterTeams(Qe,it.teams,_n(Qe,st.entities.teams))),it.views&&(cn.views=Fn.filterViews(Qe,it.views)),it.modals&&(cn.modals=Fn.filterModals(Qe,it.modals)),it.appActions&&(cn.appActions=Fn.filterAppActions(Qe,it.appActions)),it.slashCommands&&(cn.slashCommands=Fn.filterShortcuts(Qe,it.slashCommands,!0)),it.slackGlobalActions&&(cn.slackGlobalActions=Fn.filterShortcuts(Qe,it.slackGlobalActions)),it.quipShortcutCommands&&(cn.quipShortcutCommands=Fn.filterShortcuts(Qe,it.quipShortcutCommands)),it.channelActions&&(cn.channelActions=Fn.filterShortcuts(Qe,it.channelActions)),it.fakeGlobalActions&&(cn.fakeGlobalActions=Fn.filterShortcuts(Qe,it.fakeGlobalActions)),it.callActions&&(cn.callActions=Fn.filterShortcuts(Qe,it.callActions)),it.workflowTriggers&&(cn.workflowTriggers=Fn.filterWorkflowTriggers(Qe,it.workflowTriggers)),it.appActions&&(!(st==null||(tn=st.entities)===null||tn===void 0||(jt=tn.shortcuts)===null||jt===void 0)&&jt.apps)&&(cn.apps=Fn.filterApps(Qe,it.appActions,it.fakeGlobalActions,it.slashCommands)),it.broadcastKeywords&&(cn.broadcastKeywords=Fn.filterBroadcastKeywords(Qe,it.broadcastKeywords)),it.emoji&&(cn.emoji=Fn.filterEmoji(Qe,it.emoji)),it.channelSections&&(cn.channelSections=Fn.filterChannelSections(Qe,it.channelSections,ms=>{var cs,As;return!!(!((cs=st.entities.channelSections)===null||cs===void 0||(As=cs.includeTypes)===null||As===void 0)&&As[ms.type])})),it.files&&(cn.files=Fn.filterFiles(Qe,it.files,es(Qe,st.entities.files))),it.links&&(cn.links=Fn.filterLinks(Qe,it.links)),it.lists&&(cn.lists=Fn.filterLists(Qe,it.lists));const rs=(0,Ve.dL)(Qe);it.helpArticles&&rs&&(cn.helpArticles=Fn.filterHelpArticles(Qe,it.helpArticles)),it.salesforceRecords&&(0,g.Ht)(Qe)&&(cn.salesforceRecords=Fn.filterSalesforceRecordSuggestions(Qe,it.salesforceRecords)),it.salesListViews&&(0,E.hx)(Qe)&&(cn.salesListViews=Fn.filterSalesListViews(Qe,it.salesListViews)),fs.measureAndClear("modern-searcher-matching-mark","modern-searcher-matching"),Un==null||Un.close();const Jn=qt(cn,it.remoteIds||{}),is=500,Dn=3;var us;const Ln=Math.min(((us=st==null?void 0:st.limit)!==null&&us!==void 0?us:1)*Dn,is);let ss=(0,c.A)(Object.values(Jn));if(st.sort&&!st.sort.bypassSorting){var as;let ms=!1;ss.length<Ln&&(ms=!0);const cs=new Mn.A({query:Ht,options:{modelOnly:ms,...st.sort}}),As=(as=B.LI.get({label:B.gC.Searcher,id:gt}))===null||as===void 0?void 0:as.createChildSpan({name:"searcher:searcher_sort",additionalSpanOptions:{parentSpanId:on==null?void 0:on.getId()}});ss=cs.sort(Qe,Jn),As==null||As.close()}if(st.sort&&st.sort.frecency&&!st.sort.bypassSorting){var _s;const ms=(_s=B.LI.get({label:B.gC.Searcher,id:gt}))===null||_s===void 0?void 0:_s.createChildSpan({name:"searcher:sorter_sort",additionalSpanOptions:{parentSpanId:on==null?void 0:on.getId()}});ss=new Wn.A({query:Ht,options:{...st.sort},teamId:(0,An.ZT)(Qe),enterpriseId:(0,N.k)(Qe)&&(0,An.jV)(Qe)?(0,An.jV)(Qe):void 0}).sort(Qe,ss.slice(0,Ln)),ms==null||ms.close()}return st.limit&&(ss=(0,m.A)(ss,st.limit)),st.returnMetadata||(ss=ss.map(ms=>ms.item)),Yn(),ss||[]}l(nn,"processFetchedEntities");function qt(Qe,yt){return(0,i.A)(Qe,(Ht,it)=>{const st=vn(it),gt=yt[it];return Ht.map(Ue=>{const Bt=gt&&gt.has(Ue.item.id)?"remote":"local";return{...Ue,type:st,source:Bt}})})}l(qt,"addResultMetadata");function vn(Qe){switch(Qe){case"channels":return"channel";case"members":return"member";case"mpims":return"mpim";case"ims":return"ims";case"userGroups":return"userGroup";case"teams":return"team";case"views":return"view";case"modals":return"modal";case"appActions":return"appAction";case"apps":return"app";case"broadcastKeywords":return"broadcastKeyword";case"emoji":return"emoji";case"files":return"file";case"links":return"link";case"slashCommands":return"slashCommand";case"quipShortcutCommands":return"quipShortcutCommand";case"slackGlobalActions":return"globalAction";case"channelActions":return"channelAction";case"fakeGlobalActions":return"appAction";case"callActions":return"channelAction";case"workflowTriggers":return"workflowTrigger";case"helpArticles":return"helpArticles";case"salesforceRecords":return"salesforceRecord";case"salesListViews":return"salesListViews";default:return"other"}}l(vn,"getTypeFromGroup");function Ut(Qe,yt,Ht){const{files:it,members:st,channels:gt,userGroups:Ue,broadcastKeywords:Bt,emoji:zt}=Qe.entities,{members:En,channels:tn,userGroups:jt}=yt.entities;let on={},In="";Ht!=null&&Ht.length&&(In=Array.isArray(Ht)?"@":Ht.charAt(0)),(In==="@"||In==="\uFF20")&&(st||Ue||Bt||it)?(st&&(on.members=Xt(st,En)),Ue&&(on.userGroups=Xt(Ue,jt)),Bt&&(on.broadcastKeywords=Xt(Bt,{})),it&&(on.files=Xt(it,{}))):(In==="#"||In==="\uFF03")&&gt?on.channels=Xt(gt,tn):In===":"&&zt?on.emoji=Xt(zt,{}):on=Object.keys(Qe.entities).reduce((_s,ms)=>{const cs=Qe.entities[ms];return cs&&(_s[ms]=Xt(cs,yt.entities[ms])),_s},{});var Pn;const cn=Xt((Pn=Qe==null?void 0:Qe.sort)!==null&&Pn!==void 0?Pn:{},yt.sort);var Fn;const fs=(Fn=Qe.limit)!==null&&Fn!==void 0?Fn:yt.limit;var Un;const rs=(Un=Qe.fuzzyLimit)!==null&&Un!==void 0?Un:yt.fuzzyLimit;var Jn;const is=(Jn=Qe.fuzzyJumpLimit)!==null&&Jn!==void 0?Jn:yt.fuzzyJumpLimit,Dn=Qe.fuzzyCJK||yt.fuzzyCJK,us=Qe.tiered,Ln=Qe.filter,ss=Qe.allowEmptyQuery,as=Qe.returnMetadata||yt.returnMetadata;return cn&&(cn.model=cn.model||(0,xn.In)()),{entities:on,sort:cn,limit:fs,tiered:us,filter:Ln,allowEmptyQuery:ss,fuzzyLimit:rs,fuzzyJumpLimit:is,fuzzyCJK:Dn,returnMetadata:as}}l(Ut,"getAllOptions");function Xt(Qe,yt){if(!yt||Qe===!1)return Qe;const Ht=Qe===!0?{}:Qe,it=yt===!0?{}:yt;return(0,d.A)(Ht,it)}l(Xt,"mergeOptions");function Sn(Qe){const{members:yt,channels:Ht,teams:it,userGroups:st,appActions:gt,files:Ue}=Qe.entities;(yt||Ht||it||st||gt||Ue)&&F.Ay.pauseRefetchIndefinitely()}l(Sn,"pauseConditionalFetching");function Yn(){F.Ay.unpauseRefetchImmediately()}l(Yn,"unpauseConditionalFetching"),(0,V.ul)("searcher",{search:(Qe,yt)=>(0,xt.dispatchForTeamId)(Qe,ut({options:yt})),searchLocal:(Qe,yt)=>{const Ht=(0,xt.getStateByTeamId)(Qe);return $e(Ht,{options:yt})}})},166371:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(296540),n=e(308548);function s(){return s=Object.assign||function(r){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(r[m]=u[m])}return r},s.apply(this,arguments)}l(s,"_extends");function a(r){const o=r,u=t.forwardRef((m,i)=>t.createElement(n.A.Consumer,null,d=>{let{view:_,closeView:h,windowId:p,container:A,isMainWindow:v,isChildWindow:E,shouldUseNavigate:f,activeTab:g,forceTabWhenNavigating:y,getSiblingView:I,getPrimaryView:O,getSecondaryView:M,getViewSet:C}=d;return t.createElement(o,s({ref:i},m,{view:_,closeView:h,windowId:p,container:A,isMainWindow:v,isChildWindow:E,shouldUseNavigate:f,activeTab:g,forceTabWhenNavigating:y,getSiblingView:I,getPrimaryView:O,getSecondaryView:M,getViewSet:C}))}));return u.displayName=`withViewContainerContext(${o.displayName})`,u}l(a,"withViewContainerContext"),a.displayName="withViewContainerContext";const c=a},513394:(j,T,e)=>{"use strict";e.d(T,{A:()=>s});var t=e(296540),n=e(16923);function s(a,c){const{addFocusTransitionListener:r,removeFocusTransitionListener:o}=(0,t.useContext)(n.Ay);(0,t.useEffect)(()=>(r(a,c),()=>{o(a,c)}),[r,c,o,a])}l(s,"useFocusTransitionListener")},836806:(j,T,e)=>{"use strict";e.d(T,{Z:()=>n});var t=e(296540);const n=l(function(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const r=(0,t.useRef)(),o=(0,t.useCallback)(()=>{const u=r.current;u&&(window.clearTimeout(u),r.current=void 0)},[]);return(0,t.useEffect)(()=>(o(),r.current=window.setTimeout(s,a),o),[s,o,a].concat(c)),o},"useTimeout")},313788:(j,T,e)=>{"use strict";e.d(T,{x:()=>s});var t=e(463329),n=e(826);function s(){const{getState:a}=(0,t.Pj)();return(0,n.E)({getState:a})}l(s,"useTracer")},147089:(j,T,e)=>{"use strict";e.d(T,{A:()=>t});function t(n){const s=l(()=>{window.Cypress||n()},"unloadHandler");window.addEventListener("beforeunload",s)}l(t,"addUnloadHandler")},179768:(j,T,e)=>{"use strict";e.d(T,{Ep:()=>c,n2:()=>o,Ay:()=>m});var t=e(707980),n=e(246673);const s=window.AudioContext||window.webkitAudioContext,a=window.AnalyserNode,c=6;function r(i){let d=1;for(;d*2<i;)d*=2;return d}l(r,"getPowerof2LessThan");function o(i){let _=.01;for(const p of i)_=Math.max(_,(p-128)/128);const h=(Math.log(.01)-Math.log(_))/Math.log(.01);return Math.min(Math.max(h,0),1)}l(o,"computeStrength");function u(i){return(0,t.A)(i,(d,_)=>{const h=_.getSettings().sampleRate;return h!==void 0&&d!==void 0?Math.max(d,h):h},void 0)}l(u,"getMaxTrackSampleRate");let m=l(class{getLevel(){var d;return(d=this.analyserNode)===null||d===void 0||d.getByteTimeDomainData(this.data),o(this.data)/c}stop(){var d;if(this.analyserNode){var _;(_=this.audioNode)===null||_===void 0||_.disconnect(this.analyserNode)}delete this.audioNode,this.audioNode=void 0,delete this.analyserNode,this.analyserNode=void 0,(d=this.audioCtx)===null||d===void 0||d.close(),delete this.audioCtx,this.audioCtx=void 0}constructor(d,_){(0,n.M)(_>=0,"Level poll interval must be positive"),this.audioCtx=new s;const h=d.getAudioTracks();(0,n.M)(!!h.length,"Need audio tracks to run analyser");const A=(u(h)||48e3)*_/1e3,v=Math.max(32,Math.min(32768,r(A)));this.data=new Uint8Array(v),this.analyserNode=this.audioCtx.createAnalyser(),this.analyserNode.fftSize=v,this.audioNode=this.audioCtx.createMediaStreamSource(d),this.audioNode.connect(this.analyserNode)}},"AudioAnalyser")},462787:(j,T,e)=>{"use strict";e.d(T,{A:()=>s});var t=e(46935);class n{createPublisher(c){return this.publishers[c]=new t.G,this.publishers[c]}createAllPublisher(){return this.allPublisher=new t.G,this.allPublisher}publish(c,r){const o=this.publishers[c];o&&o.publish(r)}publishAll(c,r){var o;const u={peerId:c,value:r};(o=this.allPublisher)===null||o===void 0||o.publish(u)}subscribe(c,r){(this.publishers[c]||this.createPublisher(c)).subscribe(r)}subscribeAll(c){this.createAllPublisher().subscribe(c)}unsubscribe(c,r){const o=this.publishers[c];o&&o.unsubscribe(r)}constructor(){this.publishers={}}}l(n,"PeerPubSub");const s=new n},240449:(j,T,e)=>{"use strict";e.d(T,{A:()=>n});var t=e(46935);const n=new t.G},144473:(j,T,e)=>{"use strict";e.d(T,{A:()=>s});var t=e(631261);const n=window.navigator&&typeof window.navigator.sendBeacon=="function";function s(a){let{apiUrl:c,method:r,token:o,args:u={},versionTs:m="",versionUid:i=""}=a,d=!1;const _=(0,t.DI)();let h=`${c}${r}?_x_id=${i.substring(0,8)}-${Date.now()/1e3}`;_!==null&&(h+=`&fp=${_}`);const p=new FormData;if(p.append("token",o),Object.keys(u).forEach(A=>p.append(A,u[A])),n)d=navigator.sendBeacon(h,p);else{const A=new XMLHttpRequest;A.addEventListener("load",()=>{const{readyState:v,status:E,DONE:f}=A;v===f&&E===200&&(d=!0)}),A.open("POST",h,!0),A.setRequestHeader("X-Slack-Version-Ts",m),A.send(p)}return d}l(s,"beaconApiCall")},612812:(j,T,e)=>{"use strict";e.d(T,{A:()=>h});var t=e(612104),n=e(688974),s=e(226472);function a(p){return c.apply(this,arguments)}l(a,"fetchNearestChimeMediaRegion");function c(){return c=(0,t.coroutine)(function*(p){const A=new n.A({url:p?"https://nearest-us-gov-media-region.l.chime.aws/":"https://nearest-media-region.l.chime.aws"});try{const v=yield new s.Ay().q(A);return JSON.parse(v).region}catch{return""}}),c.apply(this,arguments)}l(c,"_fetchNearestChimeMediaRegion");var r=e(180491),o=e(444060),u=e(147089),m=e(374715),i=e(188288),d=e(682520);let _=l(class Fs{writeRegions(A,v){const E=v?Fs.GOV_REGION_STORAGE_KEY:Fs.REGION_STORAGE_KEY,f={regions:A,timestamp:Date.now(),version:Fs.VERSION};try{localStorage.setItem(E,JSON.stringify(f))}catch(g){(0,d.Wo)({label:"REGION-PROVIDER"}).error("Could not write chime media regions to localStorage: ",g.message)}}readRegions(A){const v=A?Fs.GOV_REGION_STORAGE_KEY:Fs.REGION_STORAGE_KEY,E=localStorage.getItem(v);if(!E)return null;let f=null;try{f=JSON.parse(E)}catch(g){return(0,d.Wo)({label:"REGION-PROVIDER"}).error("Could not parse chime media regions from localStorage: ",g.message),null}return f.version!==Fs.VERSION||this.ttl&&Date.now()-f.timestamp>this.ttl?null:f}constructor(A){this.ttl=A}},"ChimeRegionStorage");_.REGION_STORAGE_KEY="ChimeRegionStorage-chimeRegionCache",_.GOV_REGION_STORAGE_KEY="ChimeRegionStorageGov-chimeRegionCache",_.VERSION=1;let h=l(class Os{static getInstance(){return Os.instance||(Os.instance=new Os),Os.instance}getNearestChimeMediaRegion(A){var v=this;return(0,t.coroutine)(function*(){return(A?(0,i.H)(A):!1)?v.getNearestChimeGovMediaRegion():v.getNearestChimeCommercialMediaRegion()})()}getNearestChimeCommercialMediaRegion(){var A=this;return(0,t.coroutine)(function*(){if(!A.commercialRegions){const v=A.storage.readRegions(!1);v&&(A.commercialRegions=v.regions)}return A.commercialRegions?A.commercialRegions:A.remoteGetNearestChimeMediaRegion(!1)})()}getNearestChimeGovMediaRegion(){var A=this;return(0,t.coroutine)(function*(){if(!A.govRegions){const v=A.storage.readRegions(!0);v&&(A.govRegions=v.regions)}return A.govRegions?A.govRegions:A.remoteGetNearestChimeMediaRegion(!0)})()}remoteGetNearestChimeMediaRegion(A){var v=this;return(0,t.coroutine)(function*(){const E=yield r.S.resolve(a(A));return A?v.govRegions=E:v.commercialRegions=E,v.storage.writeRegions(E,A),E})()}init(){if(this.initialized)return 0;this.initialized=!0;const A=(0,m.z)();let v=Os.INITIAL_LOAD_DELAY;const E=this.storage.readRegions(A);E&&(A?this.govRegions=E.regions:this.commercialRegions=E.regions,v=Math.max(Os.INITIAL_LOAD_DELAY,Os.REFRESH_INTERVAL-(Date.now()-E.timestamp)));var f=this;const g=setTimeout((0,t.coroutine)(function*(){yield f.remoteGetNearestChimeMediaRegion(A);const y=new o.A(Os.REFRESH_INTERVAL);y.start((0,t.coroutine)(function*(){yield f.remoteGetNearestChimeMediaRegion(A)})),(0,u.A)(()=>{y.stop()})}),v);return(0,u.A)(()=>{clearTimeout(g)}),v}getRawRegions(){return this.commercialRegions}clear(){this.commercialRegions=null,this.govRegions=null,this.initialized=!1}constructor(){this.commercialRegions=null,this.govRegions=null,this.initialized=!1,this.storage=new _(Os.REFRESH_INTERVAL)}},"ChimeRegionProvider");h.REFRESH_INTERVAL=3*24*60*60*1e3,h.INITIAL_LOAD_DELAY=5*1e3},444060:(j,T,e)=>{"use strict";e.d(T,{A:()=>t});let t=l(class{start(s){this.stop(),this.timer=setInterval(s,this.intervalMs)}stop(){this.timer!==null&&(clearInterval(this.timer),this.timer=null)}constructor(s){this.intervalMs=s,this.timer=null}},"IntervalScheduler")},822107:(j,T,e)=>{"use strict";e.d(T,{F4:()=>x,GC:()=>S,lP:()=>D,no:()=>P});var t=e(566401),n=e(449552),s=e(211700),a=e(881805),c=e(469566),r=e(826),o=e(810225),u=e(682520),m=e(629386),i=e(736477),d=e(786626),_=e(729268);const h="RTM-EVENT-METRICS",p=4;let A=!1,v;const E=50;function f(){return A?!0:(0,c.A)()?(v===void 0&&(v=(0,i.A)(E),v&&(0,u.Wo)({label:h}).info("Metrics collection enabled for the current interval.")),v):!1}l(f,"shouldSampleForInterval");let g={},y={},I={},O={},M={},C={};function P(Z){let{teamOrEnterpriseId:ee,rtmEventType:_e,rtmEventSubtype:Ee,duration:G,msgs:Ae,fromEvtLog:ce}=Z;var de;if(!f())return;const oe=(0,a.Kc)((de=(0,n.getStoreOrSharedStoreInstanceByTeamOrEnterpriseId)(ee))===null||de===void 0?void 0:de.getState());if(!oe)return;const $=_e==="message"?`message/${Ee}`:_e;ce&&L({bucket:M,teamOrEnterpriseId:oe,eventType:$,value:Ae.length}),L({bucket:y,teamOrEnterpriseId:oe,eventType:$,value:1}),L({bucket:I,teamOrEnterpriseId:oe,eventType:$,value:Ae.length}),L({bucket:O,teamOrEnterpriseId:oe,eventType:$,value:G})}l(P,"incrementMetrics");function L(Z){let{bucket:ee,teamOrEnterpriseId:_e,eventType:Ee,value:G}=Z;var Ae;const ce=(Ae=ee[_e])!==null&&Ae!==void 0?Ae:{};var de;const oe=(de=ce[Ee])!==null&&de!==void 0?de:0;ce[Ee]=oe+G,ee[_e]=ce}l(L,"incrementBucket");function x(Z,ee){if((0,t.A)(I)&&(0,t.A)(g)){R();return}const _e=Object.keys({...I,...g}),Ee=setInterval(()=>{const G=(0,u.Wo)({label:h}),Ae=_e.pop();if(!Ae){G.info("Completed metrics aggregation",{traceId:Z.getTraceId()}),clearInterval(Ee);return}G.info(`Sending metric report for id: ${Ae}`),B({teamOrEnterpriseId:Ae,clientMetricsTrace:Z,performanceTracingTags:ee}),V({teamOrEnterpriseId:Ae,clientMetricsTrace:Z,performanceTracingTags:ee}),w(Ae)},1e3)}l(x,"reportRtmMetrics");function F(Z,ee){const _e=(0,m.Bx)(Z),Ee=(0,n.getStateByTeamId)(_e);return{...ee,metric_version:p,slow_connection_count:(0,d.d4)(Ee)}}l(F,"getMetricsTraceMetatags");function V(Z){let{teamOrEnterpriseId:ee,clientMetricsTrace:_e,performanceTracingTags:Ee}=Z;const G=g[ee];if(!G)return;const Ae=(0,r.E)({teamOrEnterpriseId:ee}),ce=Ae.createMetricsTrace({label:"rtm_incoming",tags:F(ee,Ee),traceId:_e.getTraceId(),parentSpanId:_e.getRootSpanId()});var de;const oe=(de=C[ee])!==null&&de!==void 0?de:{};let $=0,re=0;Object.entries(G).forEach(ue=>{let[te,ae=0]=ue;var H;const U=(H=oe[te])!==null&&H!==void 0?H:0;$+=ae,re+=U,ce.store({name:"rtm_incoming:event_count",value:ae}).addTags({event_type:te,eventlog_count:U,socket_count:ae-U})}),ce.store({name:"rtm_incoming:total_event_count",value:$}),ce.store({name:"rtm_incoming:total_event_count:socket",value:$-re}),ce.store({name:"rtm_incoming:total_event_count:eventlog",value:re}),(0,u.Wo)({label:h}).info(`${ee} total incoming event count: ${$}`),Ae.reportTrace(ce)}l(V,"maybeReportRawEventCount");function B(Z){let{teamOrEnterpriseId:ee,clientMetricsTrace:_e,performanceTracingTags:Ee}=Z;const G=I[ee];if(!G)return;const Ae=(0,r.E)({teamOrEnterpriseId:ee}),ce=Ae.createMetricsTrace({label:"rtm_dispatch",tags:F(ee,Ee),traceId:_e.getTraceId(),parentSpanId:_e.getRootSpanId()});var de;const oe=(de=y[ee])!==null&&de!==void 0?de:{};var $;const re=($=O[ee])!==null&&$!==void 0?$:{};var ue;const te=(ue=M[ee])!==null&&ue!==void 0?ue:{};let ae=0,H=0;Object.entries(G).forEach(U=>{let[N,K]=U;const W=oe[N],J=re[N];if(W===void 0||J===void 0)return;var q;const ie=(q=te[N])!==null&&q!==void 0?q:0;ae+=K,H+=ie,ce.store({name:"rtm_dispatch:duration",value:J}).addTags({event_type:N,total_events:K,total_batches:W,per_event_duration:J/K,eventlog_count:ie,socket_count:K-ie})}),ce.store({name:"rtm_dispatch:total_event_count",value:ae}),ce.store({name:"rtm_dispatch:total_event_count:socket",value:ae-H}),ce.store({name:"rtm_dispatch:total_event_count:eventlog",value:H}),(0,u.Wo)({label:h}).info(`${ee} total dispatch event count: ${ae}`),Ae.reportTrace(ce)}l(B,"maybeReportEventMetrics");function D(Z){let{teamId:ee,msgs:_e}=Z;if(!f())return;const Ee=(0,n.getStateByTeamId)(ee);var G;const Ae=(G=(0,a.Kc)(Ee))!==null&&G!==void 0?G:ee,ce=_e.reduce((de,oe)=>(!oe||!oe.type||(de[oe.type]?de[oe.type]+=1:de[oe.type]=1),de),{});Object.entries(ce).forEach(de=>{let[oe,$]=de;L({bucket:g,teamOrEnterpriseId:Ae,eventType:oe,value:$}),L({bucket:C,teamOrEnterpriseId:Ae,eventType:oe,value:$})})}l(D,"countRawEventsVolumeFromEventLog");function S(Z){let{teamId:ee,msg:_e}=Z;if(!f()||!_e||!_e.type)return;const Ee=(0,n.getStateByTeamId)(ee);var G;const Ae=(G=(0,a.Kc)(Ee))!==null&&G!==void 0?G:ee;L({bucket:g,teamOrEnterpriseId:Ae,eventType:_e.type,value:1})}l(S,"countRawEventVolume");function R(){v=void 0,g={},I={},y={},O={},M={},C={},(0,u.Wo)({label:h}).info("Metrics collection sampling has been reset.")}l(R,"resetAllCollections");function w(Z){v=void 0,delete g[Z],delete I[Z],delete y[Z],delete O[Z],delete M[Z],delete C[Z],(0,u.Wo)({label:h}).info(`Metrics collection sampling has been reset for id: ${Z}`)}l(w,"resetCollections");const Y=l(()=>({rawEventCountBuckets:g,eventCountBuckets:I,batchCountBuckets:y,durationBuckets:O,eventLogEventCountBuckets:M,eventLogRawEventCountBuckets:C}),"debugGetBuckets");(0,s.ul)("rtmEventMetrics",{debugGetBuckets:Y,debugToggleSampling:()=>{A=!A,R(),(0,u.Wo)({label:h}).info(`Interval sampling: ${A?"ON":"OFF"}`)},debugReportMetrics:()=>{const Z=(0,o.F)(),ee=Z.createMetricsTrace({samplingOptions:{sampleType:_.tS.ALWAYS}});x(ee,{}),Z.reportTrace(ee)}}),Object.defineProperty({resetAllCollections:R,debugGetBuckets:Y,reportRtmMetrics:x,intervalSampleCache:v},"intervalSampleCache",{get:()=>v,set:Z=>{v=Z}})},785981:(j,T,e)=>{"use strict";e.d(T,{dj:()=>bt,d1:()=>Yt,uH:()=>Nt,bo:()=>Tt,lI:()=>zn,sw:()=>Kn,mt:()=>Hn,rH:()=>He});var t=e(612104),n=e(180491),s=e(446632),a=e(42302),c=e(682520),r=e(674217),o=e(449552),u=e(881805),m=e(113574),i=e(468857),d=e(961024),_=e(211700),h=e(873406),p=e(271338),A=e(695823),v=e(822107),E=e(629386),f=e(709703),g=e(885850),y=e(149270),I=e(705091),O=e(43335),M=e(838942),C=e(396386),P=e(710596);function L(we,tt,Rt){return!we.text||!(M.$2.test(we.text)||M.Oh.test(we.text)||M.K0.test(we.text)||M.y7.test(we.text))||!(0,g.hh)(Rt(),we.channel)?n.K.resolve():tt((0,y.L)({channelId:we.channel})).catch(a.A)}l(L,"maybeEnsureMemberCount");let x=function(){var we=(0,t.coroutine)(function*(tt,Rt){const It=Rt(),Jt=l(function(){for(var Pt=arguments.length,Xe=new Array(Pt),Ze=0;Ze<Pt;Ze++)Xe[Ze]=arguments[Ze];return(0,o.dispatchForTeamId)((0,u.ZT)(It),...Xe)},"dispatch"),an=tt.subtype?`preprocess-rtm-message/ensureModelObsInMessageArePresent for type: ${tt.type} and subtype: ${tt.subtype}`:`preprocess-rtm-message/ensureModelObsInMessageArePresent for type: ${tt.type}`,Vn=(0,f.A)(tt.channel)&&(0,O.A)(tt.channel)&&!(0,g.hh)(It,tt.channel)?Jt((0,I.pX)({ids:[tt.channel],reason:an,callSource:I.aI.EnsureModelObsArePresent})):n.K.resolve();yield n.K.all([Vn,L(tt,Jt,Rt)]).catch(a.A)});return l(function(Rt,It){return we.apply(this,arguments)},"ensureModelObsInMessageArePresent")}();function F(we,tt){return V.apply(this,arguments)}l(F,"ensureModelObsInMessageAreOpen");function V(){return V=(0,t.coroutine)(function*(we,tt){if(we.subtype)return;const Rt=!1,It=(0,g.OL)(tt(),we.channel,Rt);It&&(0,C.JM)(It)&&((0,P.nT)(It)||(yield(0,o.dispatchForTeamId)((0,u.ZT)(tt()),(0,I.jP)({channel:It.id,reason:"preprocess-rtm-message/ensureModelObsInMessageAreOpen"}))))}),V.apply(this,arguments)}l(V,"_ensureModelObsInMessageAreOpen");function B(we,tt){return D.apply(this,arguments)}l(B,"preprocessRtmMessage");function D(){return D=(0,t.coroutine)(function*(we,tt){if(we.type==="message")try{yield x(we,tt),yield F(we,tt)}catch{}}),D.apply(this,arguments)}l(D,"_preprocessRtmMessage"),Object.defineProperty({maybeEnsureMemberCount:L,ensureModelObsInMessageAreOpen:F},"ensureModelObsInMessageArePresent",{get:()=>x,set:we=>{x=we}});var R=e(584960),w=e(53927),Y=e(23514),Q=e(250791),Z=e(656453),ee=e(810225),_e=e(736477),Ee=e(729268),G=e(853660);const Ae=7;let ce;const de=[],oe=[];let $,re;(0,_.zv)("rtmMetrics",()=>({enqueuedEventCounts:{allTeams:de.concat($),backgroundTeams:oe.concat(re)}}));const ue=(0,s.A)(()=>(0,_e.A)(1)||(0,G.c)());function te(){let we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!(0,p.A)()||!ue())return;const tt=Math.floor(Date.now()/1e3);if(ce!==tt){let Rt=0;if(ce){const It=tt-ce;It>60?($=void 0,re=void 0,de.length=0,oe.length=0):It>1&&(Rt=tt-ce)}if(ce=tt,$!==void 0){de.push($),oe.push(re);for(let Jt=0;Jt<Rt;Jt++)de.push(0),oe.push(0);const It=15*60;if(de.length>=It){const Jt=(0,Z.rh)(),an=(0,R.A)((0,w.A)(de),1),Ft=(0,Y.A)(de)||0,Vn=(0,Q.A)(de);(0,c.Wo)({label:"RTM-ENQUEUE-STATS"}).info(`Enqueue times (all teams): ${Vn} total, ${Ft} per second at peak, ${an} per second average`);const Xe={is_count:!0,allow_zero:!0};Jt.store(`rtm_nq_at${Ae}_avg`,an,Xe),Jt.store(`rtm_nq_at${Ae}_max`,Ft,Xe),Jt.store(`rtm_nq_at${Ae}_total`,Vn,Xe),de.length=0,oe.length=0}}$=0,re=0}$=($||0)+we}l(te,"maybeMeasureEnqueueVelocity");let ae=0,H=0,U=Date.now(),N=Date.now();const K=5*60*1e3;function W(we){const tt=Date.now();ae=Math.max(ae,we.length),U+K<tt&&((0,Z.rh)().count("rtm_queue_length_max",ae),ae=0,U=tt)}l(W,"maybeMeasureMaxQueueLength");function J(we){const Rt=we[0]._enqueuedAt,It=Date.now(),Jt=Rt&&It-Rt;if(H=Jt?Math.max(H,Jt):H,N+K<It){const an=(0,ee.F)(),Ft=an.createMetricsTrace({label:"rtm_queue"});Ft.store({name:"rtm_queue_delay_max",value:H}),an.reportTrace(Ft),H=0,N=It}}l(J,"maybeMeasureMaxQueueDelay");function q(we,tt){const Rt=(0,ee.F)(),It=Rt.createMetricsTrace({label:"rtm_state_modified",samplingOptions:{sampleType:Ee.tS.CALL,sampleRate:.01}}),Jt=tt?`${we}/${tt}`:we;It.count({name:`rtm_state_modified:${Jt}`}),Rt.reportTrace(It)}l(q,"countRTMStateModified");var ie=e(358682),Te=e(550521),Me=e(859790),ke=e(716685),Pe=e(135713),Ie=e(486699),X=e(491528),ne=e(570398);const fe="RTM",be=100;let Be={};const We=l(function(){let we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return Be[`${we}${tt?`_${tt}`:""}`]||1},"getCurrentMaxBatchSize"),Re=l(function(){let we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;Be[`${we}${tt?`_${tt}`:""}`]=Rt},"setCurrentMaxBatchSize");let ve=!1;const xe={},He=l(we=>{ve=we},"setIsActiveHuddle"),je=l(we=>{let{teamOrEnterpriseId:tt,msg:Rt}=we;xe[tt]||(xe[tt]=[]),xe[tt].push(Rt)},"queueUntilHuddleEnds"),Ke=l(we=>{const tt=xe[we];xe[we]=[],tt.length&&zn(we,tt)},"drainHuddleQueue"),ht=16;let dt={},Ve={},Je={},Ge={};function Le(we){var tt;return(tt=Ve[we])!==null&&tt!==void 0?tt:dt[we]}l(Le,"getHandler");function Mt(we){return we.__isShared}l(Mt,"isSharedHandler");function Dt(we){return we.teamOrEnterpriseId}l(Dt,"getTeamOrEnterpriseId");function pt(we){let{messages:tt,teamOrEnterpriseId:Rt}=we;if(tt.msgs.length===0)return;const It=Le(tt.rtmEventType);if(It)return{handler:It,messages:tt,teamOrEnterpriseId:Rt}}l(pt,"getRoutedHandler");function Qt(we,tt){if(Je[we]){const It=isJasmine()||isJest()?`addRtmErrorHandler: duplicate call to add a handler for ${we}; this is probably caused by using inject-loader/import mocking. If so, \`import { test as rtmTest } from '@slack/infra/rtm/rtm'; mockProperty(rtmTest, 'handlers', {});\` to work around it.`:`addRtmErrorHandler: a handler is already registered for ${we}`;throw new Error(It)}Je[we]=tt}l(Qt,"addRtmErrorHandler");function Nt(we,tt){fn({functionName:"addSharedRtmHandler",handlersName:"sharedHandlers",rtmEventType:we});const Rt=Object.assign(tt,{__isShared:!0});Ve[we]=Rt}l(Nt,"addSharedRtmHandler");function bt(we,tt){fn({functionName:"addBatchRtmHandler",handlersName:"handlers",rtmEventType:we}),dt[we]=tt}l(bt,"addBatchRtmHandler");function Yt(we,tt){bt(we,(Rt,It,Jt)=>{for(const an of Rt)tt(an,It,Jt)})}l(Yt,"addRtmHandler");function fn(we){let{functionName:tt,handlersName:Rt,rtmEventType:It}=we;if(!dt[It]&&!Ve[It])return;const an=(0,i.A)()||(0,d.A)()?`${tt}: duplicate call to add a handler for ${It}; this is probably caused by using inject-loader/import mocking. If so, \`import { test as rtmTest } from '@slack/infra/rtm/rtm'; mockProperty(rtmTest, '${Rt}', {});\` to work around it.`:`${tt}: a handler is already registered for ${It}`;throw new Error(an)}l(fn,"throwIfHandlerRegistered");function Tt(we){return!!dt[we]}l(Tt,"doesHandlerExist");function sn(){return dt}l(sn,"debugGetHandlers");function mn(){return Ge}l(mn,"debugGetPendingMessages");const wt=(0,s.A)(we=>{var tt;if(!(0,ne.M)())return!1;const Rt=(tt=(0,o.getStoreInstanceByTeamId)(we))===null||tt===void 0?void 0:tt.getState();return Rt&&(0,Pe._Z)(Rt,"profile_rtm")==="on"});let On=null,Zt={},Mn=null;function Wn(){Zt={},On=new Profiler({maxBufferSize:1e4,sampleInterval:0}),On.addEventListener("samplebufferfull",l(function(){const tt=this.sampleInterval,Rt=Zt;this.stop().then(It=>{const Jt=performance.timeOrigin;for(const[an,Ft]of Object.entries(Rt)){if(!Ft.length)continue;const Vn=new Date(Jt+Ft[0].start),Pt=new Date(Jt+Ft[Ft.length-1].end);(0,Ie.l)("rtm",an,(0,ne.W)(It,Ft),{from:Vn,until:Pt,sample_interval:tt})}}),Wn()},"samplebufferfull"))}l(Wn,"startProfiling");let xn=!1;function gn(we){try{if(xn||!wt(we))return;On||Wn(),Mn=performance.now()}catch(tt){xn=!0,(0,c.Ay)({label:fe,teamOrEnterpriseId:we}).warn("Unable to begin profiled section",tt)}}l(gn,"beginProfiledSection");function An(we){!On||Mn===null||(we in Zt||(Zt[we]=[]),Zt[we].push({start:Mn,end:performance.now()}),Mn=null)}l(An,"endProfiledSection");function vt(we){const{rtmEventType:tt,rtmEventSubtype:Rt,msgs:It,fromEvtLog:Jt}=we.messages,an=Dt(we),Ft=(0,c.Ay)({label:fe,teamOrEnterpriseId:an});gn(an);const Vn=performance.now();try{h.Ay.pauseRefetchIndefinitely();const Ze=we.handler,lt=(0,o.getStoreInstanceByTeamId)(we.teamOrEnterpriseId),nt=lt==null?void 0:lt.getState();Mt(Ze)?Ze(It,we.teamOrEnterpriseId):Ze(It,lt.dispatch,lt.getState);const qe=lt==null?void 0:lt.getState();nt!==qe&&q(tt,Rt)}catch(Ze){throw Ft.error(`Error processing ${tt}: ${Ze.message}`),Ze}finally{h.Ay.unpauseRefetchImmediately()}const Pt=performance.now();An(an);const Xe=Pt-Vn;try{(0,v.no)({teamOrEnterpriseId:an,rtmEventType:tt,rtmEventSubtype:Rt,duration:Xe,msgs:It,fromEvtLog:Jt}),Te.A.publish({type:Me.lx.RtmMetrics,update:Xe})}catch{}if(Xe>ht){let Ze=`Processed ${It.length} ${tt}`;Rt&&(Ze+=`:${Rt}`),Ze+=" event(s)";const lt=[];It.forEach(nt=>{var qe;const Kt=(qe=nt)===null||qe===void 0?void 0:qe.channel;Kt&&lt.push(Kt)}),lt.length&&(Ze+=` in channel(s) ${lt.join(",")}`),Ze+=` over ${Xe.toFixed(2)}ms`,Ft.info(Ze)}}l(vt,"dispatchMessages");const xt=50,Vt=100,Se=.75,St=1.1;function Ce(we){return we>xt}l(Ce,"shouldDefer");function Ne(we){return ze.apply(this,arguments)}l(Ne,"preprocessRtmMessagesWithTimeout");function ze(){return ze=(0,t.coroutine)(function*(we){let{msgs:tt,getState:Rt}=we;const It={},Jt=3e4,an=n.S.delay(Jt,It),Ft=n.S.map(tt,Pt=>B(Pt,Rt).catch(a.A),{concurrency:1});(yield n.S.race([Ft,an]))===It&&(0,c.Ay)({getState:Rt}).warn("Preprocessing messages took too long; continue to process queue")}),ze.apply(this,arguments)}l(ze,"_preprocessRtmMessagesWithTimeout");function Oe(we){return Fe.apply(this,arguments)}l(Oe,"routeMessages");function Fe(){return Fe=(0,t.coroutine)(function*(we){let{messages:tt,teamOrEnterpriseId:Rt,elapsed:It}=we;const Jt=pt({messages:tt,teamOrEnterpriseId:Rt});return!Jt||os(Rt)?It:_t({routedHandler:Jt,elapsed:It})}),Fe.apply(this,arguments)}l(Fe,"_routeMessages");function _t(we){return ft.apply(this,arguments)}l(_t,"dispatchMessagesWithPreprocessing");function ft(){return ft=(0,t.coroutine)(function*(we){let{routedHandler:tt,elapsed:Rt}=we;const It=performance.now(),Jt=(0,o.getStoreInstanceByTeamId)(tt.teamOrEnterpriseId);yield Ne({msgs:tt.messages.msgs,getState:Jt.getState});const an=performance.now();vt(tt);let Ft=Rt;return an-It>xt&&(Ft=0),Ft+=performance.now()-an,Ft}),ft.apply(this,arguments)}l(ft,"_dispatchMessagesWithPreprocessing");function Ct(we){return $t.apply(this,arguments)}l(Ct,"handleNextMessageFromQueue");function $t(){return $t=(0,t.coroutine)(function*(we){let{queue:tt,teamOrEnterpriseId:Rt,elapsed:It=0}=we;for(var Jt;tt&&tt.length>0&&!(!((Jt=tt[0])===null||Jt===void 0)&&Jt.type);)tt.shift();if(!tt||!tt.length)return n.S.resolve();const an=(0,c.Ay)({teamOrEnterpriseId:Rt,label:fe});try{W(tt),J(tt)}catch{}const Ft=tt[0].type,Vn=tt[0].subtype,Pt=(0,ie.Wu)(tt[0]);let Xe=We(Ft,Vn);const Ze=[tt[0]],lt=[];for(let _n=1;_n<tt.length&&Ze.length<Xe&&lt.length<Xe;_n++)if(tt[_n].type===Ft&&tt[_n].subtype===Vn)Ze.push(tt[_n]);else if(ie.Sj.has(tt[_n].type))lt.push(tt[_n]);else break;const nt=Ze.length;nt>1&&an.debug(fe,`Batch processing ${nt} of type ${Ft}, skipping ${lt.length} interleaved events ${lt.map(_n=>_n.type).join(",")}`);let qe=It;try{qe=yield Oe({messages:{rtmEventType:Ft,rtmEventSubtype:Vn,msgs:Ze,fromEvtLog:Pt},teamOrEnterpriseId:Rt,elapsed:qe})}catch(_n){an.error(`Error while processing ${nt} ${Ft} event(s)`,_n)}finally{nt!==Ze.length&&(an.error(`Message batch size for type (${Ft}) changed during handling`),an.warn(`Original batch size: ${nt} Post-handler batch size: ${Ze.length}`));const _n=nt+lt.length;tt.splice(0,_n,...lt)}const Kt=Ce(qe),ln=document.visibilityState==="visible";return Xe=We(Ft,Vn),ln&&(Kt?Xe>1&&qe>Vt&&(Re(Ft,Vn,Math.max(1,Math.floor(Xe*Se))),an.debug(fe,`Maximum batch size decreased to ${We(Ft,Vn)}`)):Xe<be&&Ze.length===Xe&&(Re(Ft,Vn,Math.min(be,Math.ceil(Xe*St))),an.debug(fe,`Maximum batch size increased to ${We(Ft,Vn)}`))),tt.length?ln&&Kt?n.S.delay(xt).then(()=>{Qn(Rt)}):Ct({queue:tt,teamOrEnterpriseId:Rt,elapsed:qe}):n.S.resolve()}),$t.apply(this,arguments)}l($t,"_handleNextMessageFromQueue");let rn=0,un,hn=100;function pn(){let we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:(0,c.Wo)();if(un)return;const tt=Date.now()-rn;if(tt<hn){const Rt=Math.min(hn-tt,hn),It=(0,p.A)()&&!(0,A.ko)((0,o.getStateForClientStore)());It&&we.info(fe,`Setting a timeout of ${Rt} ms to process more rtm events`),un=window.setTimeout(()=>{un=void 0,It&&we.info(fe,`Waited ${Rt} ms, processing more rtm events now`),Tn()},Rt);return}Tn()}l(pn,"maybeDrainQueues");function Tn(){rn=Date.now();const we=l(()=>{const tt=Object.keys(Ge);for(const Rt of tt)Qn(Rt)},"drainQueuesFn");ve?(0,ke.Gl)(we):we()}l(Tn,"drainQueues");function Qn(we){!Ge[we]||!Ge[we].length||Ct({queue:Ge[we],teamOrEnterpriseId:we})}l(Qn,"drainQueue");function zn(we,tt){var Rt;let It=0;const Jt=tt.filter(Vn=>Vn!=null&&Vn.type?ve&&(0,X.Zr)(Vn)?(je({teamOrEnterpriseId:we,msg:Vn}),!1):((0,ie.Wu)(Vn)||(It+=1),!0):((0,c.Ay)({teamOrEnterpriseId:we,label:fe}).warn("Received attempt to enqueue an invalid message; dropping it",Vn),!1));try{te(It)}catch{}Ge[we]=Ge[we]||[];const an=Ge[we].length,Ft=Date.now();for(const Vn of Jt)Vn._enqueuedAt=Ft;Ge[we].push(...Jt),!an&&Ge[we].length>0&&pn(),!ve&&(!((Rt=xe[we])===null||Rt===void 0)&&Rt.length)&&Ke(we)}l(zn,"enqueueMessages");const Hn=(0,r.Ay)("Calls the relevant rtm handlers with the given rtm message, skipping the queue and without preprocessing (this is intended for degraded mode usage only)",(we,tt,Rt)=>{const It=(0,u.ZT)(tt()),Jt=pt({messages:{rtmEventType:Rt.type,rtmEventSubtype:Rt.subtype,msgs:[Rt],fromEvtLog:(0,ie.Wu)(Rt)},teamOrEnterpriseId:It});Jt&&vt(Jt)});Hn.meta={name:"createThunk",key:"createThunkhandleMessageImmediatelyWithoutPreprocessing",description:"Calls the relevant rtm handlers with the given rtm message, skipping the queue and without preprocessing (this is intended for degraded mode usage only)"};const Kn=(0,r.Ay)("Calls the relevant handler for the given message",(we,tt,Rt)=>{if(!Je[Rt]){if(Rt&&Rt.includes&&Rt.includes("started_with_org_token")){var It;(0,c.Ay)({getState:tt}).error(new Error(`Unexpected start error: ${Rt}`),JSON.stringify({error:Rt,pathname:window==null||(It=window.location)===null||It===void 0?void 0:It.pathname}),{subtype:"gs_start_error"})}else(0,c.Ay)({getState:tt}).error(new Error(`Unexpected start error: ${Rt}`),JSON.stringify({error:Rt}),{subtype:"gs_start_error"});return}Je[Rt](Rt,we,tt)});Kn.meta={name:"createThunk",key:"createThunkhandleErrorMessage",description:"Calls the relevant handler for the given message"};function os(we){const tt=(0,o.getStateByTeamId)((0,E.Bx)(we));return(0,m.wx)(tt)&&!(0,m.$U)(tt)}l(os,"shouldIgnoreRtmStream");const et=(0,r.Ay)("Fake an RTM event for testing only",(we,tt,Rt)=>{const It=(0,u.ZT)(tt()),Jt=pt({messages:{rtmEventType:Rt[0].type,rtmEventSubtype:Rt[0].subtype,msgs:Rt,fromEvtLog:(0,ie.Wu)(Rt[0])},teamOrEnterpriseId:It});Jt&&vt(Jt)});et.meta={name:"createThunk",key:"createThunkhandleMessagesForTest",description:"Fake an RTM event for testing only"};const Et={handleNextMessageFromQueue:Ct,shouldIgnoreRtmStream:os,errorHandlers:Je,handlers:dt,sharedHandlers:Ve,currentMaxBatchSize:Be,drainQueues:Tn,drainQueue:Qn,maybeDrainQueues:pn,queueDrainTimeout:un,lastQueueDrainTimestamp:rn,pendingMessages:Ge};Object.defineProperty(Et,"handleNextMessageFromQueue",{get:()=>Ct,set:we=>{Ct=we}}),Object.defineProperty(Et,"errorHandlers",{get:()=>Je,set:we=>{Je=we}}),Object.defineProperty(Et,"handlers",{get:()=>dt,set:we=>{dt=we}}),Object.defineProperty(Et,"sharedHandlers",{get:()=>Ve,set:we=>{Ve=we}}),Object.defineProperty(Et,"currentMaxBatchSize",{get:()=>Be,set:we=>{Be=we}}),Object.defineProperty(Et,"drainQueues",{get:()=>Tn,set:we=>{Tn=we}}),Object.defineProperty(Et,"drainQueue",{get:()=>Qn,set:we=>{Qn=we}}),Object.defineProperty(Et,"maybeDrainQueues",{get:()=>pn,set:we=>{pn=we}}),Object.defineProperty(Et,"queueDrainTimeout",{get:()=>un,set:we=>{un=we}}),Object.defineProperty(Et,"lastQueueDrainTimestamp",{get:()=>rn,set:we=>{rn=we}}),Object.defineProperty(Et,"pendingMessages",{get:()=>Ge,set:we=>{Ge=we}}),(0,_.ul)("rtm",{handlers:dt,errorHandlers:Je,interceptHandler:(we,tt)=>{const Rt=dt[we];dt[we]=function(){for(var It=arguments.length,Jt=new Array(It),an=0;an<It;an++)Jt[an]=arguments[an];tt(Rt,...Jt)}},getPendingMessages:()=>Ge,globalQueue:{drainQueues:Tn,drainQueue:Qn,maybeDrainQueues:pn,getCurrentMaxBatchSize:()=>Be,setCurrentMaxBatchSize:we=>{Be=we},setQueueDrainInterval:we=>{hn=we}}})},540291:(j,T,e)=>{"use strict";e.d(T,{IE:()=>p});var t=e(389610),n=e(307520),s=e(682520),a=e(906308),c=e.n(a),r;(function(A){A.Background="background",A.UserVisible="user-visible",A.UserBlocking="user-blocking"})(r||(r={}));const o=(0,s.Wo)({label:"SCHEDULER"}),u="scheduler"in n.J&&(0,t.A)(n.J.scheduler.postTask),m=50;let i=0,d=null;const _=l((A,v)=>{let{label:E,priority:f,delay:g}=v;if(!u)return A();i+=1;const y=performance.now();return n.J.scheduler.postTask(()=>{const I=performance.now(),O=I-y,M=d?I-d:0;d=I,O-g>m&&o.debug(`${E} task (${f}) executed with delay of ${Math.round(O)}ms and a configured delay of ${g}ms - time since last task: ${M}ms - Task queue length: ${i}`);const P=A();return i-=1,P},{priority:f,delay:g})},"runWithPriority"),h=l(()=>{if(u)return i},"getTaskQueueLength"),p=l((A,v,E)=>_(v,{label:A,priority:r.Background,delay:(E==null?void 0:E.delay)||0}),"runWithBackgroundPriority")},425317:(j,T,e)=>{"use strict";e.d(T,{A:()=>E});var t=e(296540),n=e(528919),s=e(156635),a=e(973553),c=e(649098),r=e(171873),o=e(61629),u=e(927675),m=e(372848),i=e(99768),d=e(483869),_=e(786191);function h(){return h=Object.assign||function(f){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var I in y)Object.prototype.hasOwnProperty.call(y,I)&&(f[I]=y[I])}return f},h.apply(this,arguments)}l(h,"_extends");const p=new c.Ay("find_team");function A(f,g){if((0,a.A)())return(0,_.M6)(location.href,"locale",g);const y=location.href.replace(`${location.protocol}//${location.hostname}`,"").replace(/^\/intl\/[^/]+\//,"/");return f==="en-us"?y:`/intl/${f}${y}`}l(A,"getUrlForLocale");let v=l(class extends t.Component{render(){const{hideRegionPicker:g,showLogo:y,govSlackTheme:I,joinerRedesignTreatment:O}=this.props,M=(0,n.A)("p-refreshed_page__footer_link p-refreshed_page__footer_link--main",{"p-refreshed_page__footer_link--gov_slack":I}),C=(0,n.A)("full_width",{"p-refreshed_page__full_width_footer":O}),P=t.createElement("footer",{className:"p-refreshed_page__footer"},t.createElement(u.jV,{href:(0,s.v)("/legal"),className:M,autoClogProps:{elementName:"get_started_footer_link_legal",onClick:{enableClogAction:!0}}},p.rt("Privacy & Terms")),t.createElement(u.jV,{href:(0,s.v)("/help/requests/new"),className:M,autoClogProps:{elementName:"get_started_footer_link_contact",onClick:{enableClogAction:!0}}},p.rt("Contact Us")),!g&&t.createElement(m.Wv,{allowanceX:0,overlayClassName:"p-refreshed_page__footer_overlay",position:"top",renderPopover:L=>t.createElement(m.AM,h({offsetX:-9,offsetY:-5,modalBodyOpenClassName:"p-refreshed_page__footer_modal--open",ariaLabel:p.t("Change region"),ariaRole:"dialog",shouldAnchorAtInitialPosition:!0},L),t.createElement("div",{className:"p-refreshed_page__footer_locales"},t.createElement("div",{className:"bold margin_bottom_50"},p.rt("Change region")),t.createElement("div",{className:"margin_bottom_100"},p.rt("Selecting a different region will change the language and content of Slack.com.")),t.createElement("div",{className:"display_flex"},[{title:p.t("Americas"),locales:[{locale:"es-LA",geocode:"es-la",name:"Latinoam\xE9rica (Espa\xF1ol)"},{locale:"pt-BR",geocode:"pt-br",name:"Brasil (Portugu\xEAs)"},{locale:"en-US",geocode:"en-us",name:"United States (English)"}]},{title:p.t("Europe"),locales:[{locale:"de-DE",geocode:"de-de",name:"Deutschland (Deutsch)"},{locale:"es-ES",geocode:"es-es",name:"Espa\xF1a (Espa\xF1ol)"},{locale:"fr-FR",geocode:"fr-fr",name:"France (Fran\xE7ais)"},{locale:"it-IT",geocode:"it-it",name:"Italia (italiano)"},{locale:"en-GB",geocode:"en-gb",name:"United Kingdom (English)"}]},{title:p.t("Asia Pacific"),locales:[{locale:"zh-CN",geocode:"zh-cn",name:"\u7B80\u4F53\u4E2D\u6587"},{locale:"zh-TW",geocode:"zh-tw",name:"\u7E41\u9AD4\u4E2D\u6587"},{locale:"en-IN",geocode:"en-in",name:"India (English)"},{locale:"ja-JP",geocode:"ja-jp",name:"\u65E5\u672C (\u65E5\u672C\u8A9E)"},{locale:"ko-KR",geocode:"ko-kr",name:"\uD55C\uAD6D\uC5B4"}]}].map(x=>{let{title:F,locales:V}=x;return t.createElement("div",{className:"margin_right_50 display_flex flex_direction_column",key:F},t.createElement("div",{className:"bold margin_bottom_50"},F),V.map(B=>{let{locale:D,geocode:S,name:R}=B;return t.createElement(u.jV,{key:D,href:A(S,D),target:"_self",className:"p-refreshed_page__footer_link margin_bottom_50",autoClogProps:{elementName:"get_started_footer_link_change_region_locale",elementValue:D,onClick:{enableClogAction:!0}},onClick:this.onClickLocale({locale:D,geocode:S})},R)}))}))))},t.createElement("div",null,t.createElement(u.jV,{onClick:this.onClickChangeRegion,href:"#",className:M,autoClogProps:{elementName:"get_started_footer_link_change_region",onClick:{enableClogAction:!0}}},t.createElement(o.A,{type:"globe",size:"inherit",className:"margin_right_25"}),p.rt("Change region"),t.createElement(o.A,{type:"chevron-medium-down",size:"inherit"})))));return t.createElement("div",{className:C},t.createElement("div",{className:(0,n.A)("p-refreshed_page__footer_container",{"p-refreshed_page__footer_container--gov_slack":I})},t.createElement(t.Fragment,null,y&&t.createElement(i.A,{width:80,height:20,className:"p-app_slack_logo"}),P)))}constructor(g){super(g),this.onClickChangeRegion=y=>{y.preventDefault()},this.onClickLocale=y=>{let{locale:I,geocode:O}=y;return()=>{const M=(0,d.LL)((0,r.v8)("c")||"")||{};M.geocode=O;const C=(0,d.Zf)(M,{space:""});(0,r.n0)("i18n_locale",I,365*10,"slack.com"),C&&(0,r.n0)("c",C,365*10,"slack.com")}},this.popoverTriggerRef=t.createRef(),this.state={}}},"RefreshedFooter");v.displayName="RefreshedFooter";const E=v},542138:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(296540),n=e(528919);const s=l(c=>{let{children:r,heading:o,subHeading:u,titleImage:m,headingClassName:i,subHeadingClassName:d,dataQa:_,showFullWidthContent:h,className:p,isSharedWorkspaceInvite:A}=c;return t.createElement("div",{className:(0,n.A)("p-refreshed_page",{"p-refreshed_page--workspace":A,full_width:h},p),"data-qa":_},m&&m,o&&t.createElement("h1",{className:(0,n.A)("p-refreshed_page__heading",i,{margin_bottom_200:!u,full_width:h,"p-refreshed_page__heading--workspace":A})},o),u&&t.createElement("div",{className:(0,n.A)("p-refreshed_page__sub_heading",d,{full_width:h})},u),r)},"RefreshedPageContent");s.displayName="RefreshedPageContent";const a=s},514919:(j,T,e)=>{"use strict";e.d(T,{EU:()=>n});var t=e(532395),n;(function(o){o.Start="/",o.Find="/find",o.Create="/create",o.CreateNew="/createnew",o.Confirm="/confirm",o.Check="/check",o.FindAgain="/find_again",o.Email="/email",o.Error="/error",o.ConfirmationCode="/confirmemail",o.DomainClaimed="/domain",o.Landing="/landing",o.ConfirmTrust="/confirmtrust",o.IgnoreInvite="/ignoreinvite",o.SignIn="/signin",o.Workspaces="/workspaces",o.SharedInviteLoggedOut="/sharedinvite",o.SharedInviteLanding="/sharedinvitelanding",o.SelectWorkspaces="/select",o.AppleSignIn="/apple",o.AddName="/addname"})(n||(n={}));var s;(function(o){o.SharedChannelInviteAlreadyAccepted="invite_used",o.SharedChannelInviteInvlidLink="invalid_link",o.DirectMessageInviteInactive="inactive_invite",o.Generic="generic"})(s||(s={}));const a={[n.Start]:t.UiStep.START_WITH_A_WORKSPACE,[n.Create]:t.UiStep.CREATE_NEW_WORKSPACE,[n.CreateNew]:t.UiStep.CREATE_NEW_WORKSPACE,[n.Find]:t.UiStep.FIND_YOUR_WORKSPACE,[n.Check]:t.UiStep.CHECK_YOUR_EMAIL,[n.FindAgain]:t.UiStep.FIND_YOUR_WORKSPACE,[n.Email]:t.UiStep.ENTER_EMAIL,[n.Confirm]:t.UiStep.ENTER_EMAIL,[n.Error]:t.UiStep.GET_STARTED_ERROR,[n.ConfirmationCode]:t.UiStep.GET_STARTED_CONFIRM_CODE,[n.DomainClaimed]:t.UiStep.GET_STARTED_DOMAIN_CLAIMED,[n.Landing]:t.UiStep.GET_STARTED_CREATOR_LANDING,[n.SignIn]:t.UiStep.GET_STARTED_SIGN_IN,[n.Workspaces]:t.UiStep.GET_STARTED_WORKSPACES,[n.SharedInviteLoggedOut]:t.UiStep.SHARED_INVITE_LOGGED_OUT,[n.SharedInviteLanding]:t.UiStep.SHARED_INVITE_LANDING,[n.SelectWorkspaces]:t.UiStep.GET_STARTED_SELECT_WORKSPACES,[n.AppleSignIn]:t.UiStep.GET_STARTED_APPLE_SIGN_IN,[n.ConfirmTrust]:t.UiStep.GET_STARTED_CONFIRM_TRUST,[n.IgnoreInvite]:t.UiStep.GET_STARTED_IGNORE_INVITE,[n.AddName]:t.UiStep.GET_STARTED_ADD_NAME};var c;(function(o){o.Invited="invited",o.Joined="joined",o.Whitelisted="whitelisted"})(c||(c={}));var r;(function(o){o.Email="email",o.GoogleIdToken="google_id_token",o.Apple="apple_id_token"})(r||(r={}))},682919:(j,T,e)=>{"use strict";e.d(T,{$:()=>n,A:()=>t});function t(s){return s>=48&&s<=57}l(t,"isNumericKey");function n(s){const a=String.fromCharCode(s);return!!/[a-zA-Z0-9]/.test(a)}l(n,"isAlphaNumericKey")},671706:(j,T,e)=>{"use strict";e.d(T,{K_:()=>M,XR:()=>I,yb:()=>O});var t=e(649098),n=e(284606),s=e(256929),a=e(654183),c=e(682520),r=e(182013),o=e(595863),u=e(645798),m=e(812499),i=e(495717),d=e(457754);const _=new t.Ay("channel_sidebar"),h=new t.Ay("lists"),p=new t.Ay("app_launcher"),A=new t.Ay("setup_page"),v=new t.Ay("client"),E=new t.Ay("search"),f=new t.Ay("solution_guide"),g={[a.c.Composer]:()=>_.t("New message",{fallbackHash:"1ed2e7b50fa1dbbf1693d1c38adf270c04db10c6",fallbackHashNs:"view"}),[a.c.Notifications]:()=>(0,n.i)()?"Notifications":"Activity",[a.c.Reactions]:()=>"Reactions",[a.c.Drafts]:()=>_.t("Drafts & sent",{fallbackHash:"50f1964d008cc3f1974523c1ac7b5a555460f87a",fallbackHashNs:"channel_sidebar"}),[a.c.ScheduledMessages]:()=>_.t("Scheduled",{ns:"channel_sidebar"}),[a.c.Sent]:()=>_.t("Sent",{fallbackHash:"35f49dcfbfb2e03fdce327671e82bf173b1ccb8b",fallbackHashNs:"sent-page"}),Pthread:()=>_.t("Thread",{fallbackHash:"7863f7503e5377891a3b7452c7d6cc377d443fe7",fallbackHashNs:"thread"}),[a.c.Empty]:()=>{},[a.c.Unreads]:()=>_.t("Unreads"),[a.c.CatchUp]:()=>_.t("Catch up",{fallbackHashNs:"channel_sidebar",fallbackHash:"5c94fe183a5a31d5b035f3beb7fff89bcf64e7f3"}),[a.c.Apps]:()=>p.t("Apps",{fallbackHash:"d9a36850b7f3f78365a998cb16cb68b6fd79400d",fallbackHashNs:"channel_sidebar"}),[a.c.Shortcuts]:()=>p.t("Workflows",{fallbackHash:"d9a36850b7f3f78365a998cb16cb68b6fd79400d",fallbackHashNs:"channel_sidebar"}),[a.c.BrowseWorkflowsManagedByYou]:C=>(0,o.oF)(C)?_.t("Workflows managed by you"):"",[a.c.BrowseYourWorkflowTemplates]:()=>_.t("Your workflow templates",{fallbackHash:"f25b700ed9f092123a43acb205a6869342cf9dd6",fallbackHashNs:"workflow_builder"}),[a.c.BrowseWorkflowTemplates]:()=>p.t("Templates",{fallbackHash:"f25b700ed9f092123a43acb205a6869342cf9dd6",fallbackHashNs:"workflow_builder"}),[a.c.Activity]:()=>_.t("Activity"),[a.c.Saved]:()=>_.t("Saved items",{fallbackHash:"c0ae8f6ea84111498894729659051ce9713aab42"}),[a.c.PaidBenefits]:()=>_.t("Paid Plan Benefits"),[a.c.BrowseChannels]:()=>_.t("All channels",{fallbackHash:"844df142c62832a202548680d3385ca47676ab85",fallbackHashNs:"channel_browser"}),[a.c.SetupTeamName]:()=>A.t("Setup Team Name"),[a.c.SetupProfile]:()=>A.t("Profile"),[a.c.SetupChannels]:()=>A.t("Setup Channels"),[a.c.SetupInvites]:()=>A.t("Setup Invites"),[a.c.SetupCalendarContactImport]:()=>"Setup Contact Import",[a.c.SetupTada]:()=>"Setup Tada",[a.c.SetupWelcome]:()=>A.t("Setup Welcome"),[a.c.SetupPeople]:()=>A.t("Setup People"),[a.c.SetupStraightToPaidPlans]:()=>A.t("Setup Plans"),[a.c.JoinerLaunchpad]:()=>_.t("Get started"),[a.c.ResurrectedUserWelcome]:C=>(0,u.Yo)(C)?_.t("Welcome back"):"",[a.c.SolutionGuide]:C=>(0,m.qV)(C)?f.t("Set up your workspace"):"","Pbrowse-channels-prototype":()=>_.t("All channels"),[a.c.BrowseFiles]:()=>E.t("All files"),[a.c.Calendar]:C=>(0,s.A)(C)?_.t("Calendar"):"",[a.c.BrowsePeople]:()=>_.t("All people",{fallbackHash:"7aeeec03f7c076af275e9b7c0e187a40bd193acc",fallbackHashNs:"ia4"}),[a.c.BrowseExternalContacts]:()=>_.t("External people",{fallbackHash:"3a2342a03de3fb3994d9c4fbdb18d17ec0367c35"}),[a.c.BrowseUserGroups]:()=>_.t("User groups"),[a.c.BrowseExternalWorkspaces]:C=>(0,i.mc)(C)?_.t("External workspaces"):"",[a.c.AllDms]:()=>_.t("Direct messages"),[a.c.Search]:()=>v.t("Search Results",{fallbackHash:"bce06414177f72ab70e6387b6af9f8ceef0d6049",fallbackHashNs:"search"}),[a.c.SlackConnect]:()=>_.t("Slack Connect",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"}),[a.c.SlackConnectInvitation]:()=>_.t("Slack Connect Invitation",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"}),[a.c.OfflineOutbox]:()=>"Offline outbox",[a.c.Huddles]:()=>"Huddles",[a.c.BrowseHuddles]:()=>"Huddles",[a.c.Today]:()=>"Today",[a.c.Later]:()=>_.t("Later",{fallbackHash:"1d9c1a090774d038318b145c9edd2301568bdd93"}),[a.c.BrowseOrgChart]:()=>E.t("Org chart"),[a.c.Items]:C=>(0,r.isListsMyItemsEnabled)(C)?h.t("Items"):"Items","Pasync-modals":()=>"Modals",[a.c.BrowseCanvases]:()=>_.t("Canvases"),[a.c.BrowseLists]:()=>"Lists",[a.c.Recents]:()=>E.t("Recently viewed"),[a.c.DailyDigest]:()=>_.t("Recap",{fallbackHash:"47fdd58bee4dc86df2b978107102a22b9c44345b"}),[a.c.ActionItems]:C=>(0,d.y)(C)?_.t("Action items"):"Action items",[a.c.Inbox]:C=>(0,d.y)(C)?_.t("Inbox"):"Inbox"},y={Pdms:()=>_.t("All direct messages",{fallbackHash:"781373373e6fe8d45de2a1edd8dd880aaff75bce"})};function I(C){return!C||!g[C]?((0,c.Wo)().error(`getLabelFunctionForPage called with invalid pageId: ${C}`),null):g[C]}l(I,"getLabelFunctionForPage");const O=l((C,P)=>I(P.id)(C),"getPageLabel");function M(C){if(C)return y[C]}l(M,"getAriaLabelFunctionForPage")},243382:(j,T,e)=>{"use strict";e.d(T,{A:()=>R});var t=e(674217),n=e(127850),s=e(287187),a=e(933010),c=e(766998),r=e(881805),o=e(838942),u=e(95129),m=e(629386),i=e(449552),d=e(271338),_=e(396386),h=e(186153),p=e(113574),A=e(885850),v=e(452096),E=e(601026),f=e(425537),g=e(237163),y=e(2889),I=e(915773);const O=(0,I.Ay)((w,Y)=>{var Q,Z;return(w==null||(Q=w.messageActivity)===null||Q===void 0||(Z=Q.recentActivity)===null||Z===void 0?void 0:Z[Y])||[]});O.meta={name:"createSelector",key:"createSelectorselectMessageActivityForType",description:(w,Y)=>{var Q,Z;return(w==null||(Q=w.messageActivity)===null||Q===void 0||(Z=Q.recentActivity)===null||Z===void 0?void 0:Z[Y])||[]}};var M;(function(w){w.DM="dm"})(M||(M={}));var C=e(285955);function P(){if(!(0,d.A)()||!C.getFocusedWorkspace)return!1;const w=(0,i.getStateForClientStore)(),Y=(0,C.getFocusedWorkspace)(w);return(0,g.A)((0,i.getStateByTeamId)(Y))}l(P,"getFocusedWorkspacePrimaryView");const L=(0,t.Ay)("process dm messages for Megaphone client event",(w,Y,Q)=>{const Z=Y();if(!(0,_.LI)((0,A.OL)(Z,(0,o.WY)(Q))))return;const _e=5,Ee=1,G=60*3,Ae=Date.now()/1e3,ce=M.DM,de=O(Z,ce);de.push(Q);const oe=(0,p.WR)(Z),$=P();let re,ue=0,te=0,ae=[];de.forEach(H=>{const U=(0,o.WY)(H);if($!==U)return;const N=+(0,h.j)(H);if(Ae-N>G)return;const K=(0,o.F6)(H);oe===K?ue+=1:(te+=1,re=K),ae.push(H)}),ue+te>=_e&&ue>=Ee&&te>=Ee&&(0,E.gd)(Z,re)===f.hR&&(w((0,v.JL)({type:"messaging_activity"})),ae=[]),w((0,y.m)({type:ce,messages:ae}))});L.meta={name:"createThunk",key:"createThunkprocessDmMegaphoneClientEvent",description:"process dm messages for Megaphone client event"};const x=L,F=(0,t.Ay)("Process received/sent messages",(w,Y,Q)=>{if(!(0,d.A)()||!C.isFocusedWorkspaceInTeamOrEnterprise)return;const Z=(0,r.JY)(Y());if(!Z)return;const ee=(0,m.Bx)(Z),_e=(0,i.getStateForClientStore)();if(!(0,C.isFocusedWorkspaceInTeamOrEnterprise)(_e,Z))return;const Ee=P();Ee&&Q.forEach(G=>{const Ae=G,ce=(0,o.WY)(Ae);!ce||Ee!==ce||(0,u.A)(Ae)||(0,i.dispatchForTeamId)(ee,x(Ae))})});F.meta={name:"createThunk",key:"createThunkprocessIncomingMessages",description:"Process received/sent messages"};const V=F;var B=e(78808),D=e(544555);const S=(0,t.Ay)("Appends raw / unprocessed messages to the messages and history stores",(w,Y,Q)=>{const Z=w((0,a.A)({imsgs:Q}));w((0,c.Kc)(Z));const ee=(0,r.JY)(Y());if(!ee)return;w(V(Z));const _e=new Map;for(const G of Q)G.channel!=null&&(_e.has(G.channel)||_e.set(G.channel,[]),_e.get(G.channel).push(G.ts));for(const[G,Ae]of _e.entries()){const ce={channelId:G,timestamps:Ae,oldest:Ae[0],hasMore:!1,append:!0};w((0,n.VG)(ce)),(0,s.mY)(ee,G,Ae)}const Ee=new Map;for(const G of Q){if(!(0,B.n)(G))continue;const Ae=(0,D.Iu)(G.channel,G.thread_ts);Ae!=null&&(Ee.has(Ae)||Ee.set(Ae,[]),Ee.get(Ae).push(G.ts))}for(const[G,Ae]of Ee.entries())w((0,n.VG)({channelId:G,timestamps:Ae,oldest:Ae[0],hasMore:!1,append:!0}));return Z});S.meta={name:"createThunk",key:"createThunkappendMessages",description:"Appends raw / unprocessed messages to the messages and history stores"};const R=S},437714:(j,T,e)=>{"use strict";e.d(T,{KH:()=>V,MC:()=>R,PL:()=>S,SV:()=>B,a$:()=>L,gO:()=>x});var t=e(612104),n=e.n(t),s=e(785981),a=e(464144),c=e(786626),r=e(682520),o=e(449552),u=e(143679),m=e(276265),i=e(113574),d=e(18216),_=e(836417),h=e(785103),p=e(643407),A=e(674217),v=e(282233);const E="AWARENESS-MANAGER",f="AWARENESS-MANAGER-CHIME",g=`[${E}] unknown awareness subtype`,y=3e4,I=250,O=5e3,M=15,C=(0,A.Ay)("Query for awareness state from other users who are subscribed to the topic",function(){var Y=(0,t.coroutine)(function*(Q,Z,ee){const _e=Z();if(!(0,c.ON)(_e))return;const Ee=(0,i.WR)(_e),G={channel:ee,type:"awareness",subtype:u.Pz.QUERY,user:Ee};try{Q((0,a.tN)(G))}catch(Ae){(0,r.Ay)({getState:Z}).warn("Failed to send awareness query: ",Ae)}});return function(Q,Z,ee){return Y.apply(this,arguments)}}());C.meta={name:"createThunk",key:"createThunkmaybeSendAwarenessQuery",description:"Query for awareness state from other users who are subscribed to the topic"};const P=(0,A.Ay)("Send awareness state to other users who are subscribed to the topic",function(){var Y=(0,t.coroutine)(function*(Q,Z,ee){const _e=Z();if(!(0,c.ON)(_e))return;const Ee=(0,i.WR)(_e),G=(0,d.fL)(_e,ee,Ee),Ae={channel:ee,type:"awareness",subtype:u.Pz.BROADCAST,user:Ee,awareness_state:G};try{Q((0,a.tN)(Ae))}catch(ce){(0,r.Ay)({getState:Z}).warn("Failed to send awareness query: ",ce)}});return function(Q,Z,ee){return Y.apply(this,arguments)}}());P.meta={name:"createThunk",key:"createThunkmaybeSendCurrentAwarenessState",description:"Send awareness state to other users who are subscribed to the topic"};const L=(0,A.Ay)("Temporarily subscribe to a topic for updates",(Y,Q,Z)=>{const ee=Q();if((0,c.ON)(ee))try{Y((0,a.tN)({channel_id:Z,type:"temp_channel_sub"}))}catch(_e){(0,r.Ay)({getState:Q}).warn("Failed to subscribe to awareness topic: ",_e)}});L.meta={name:"createThunk",key:"createThunksubscribeToAwarenessTopic",description:"Temporarily subscribe to a topic for updates"};const x=(0,A.Ay)("Temporarily unsubscribe from topic updates",(Y,Q,Z)=>{const ee=Q();if((0,c.ON)(ee))try{Y((0,a.tN)({channel_id:Z,type:"temp_channel_unsub"}))}catch(_e){(0,r.Ay)({getState:Q}).warn("Failed to unsubscribe from awareness topic: ",_e)}});x.meta={name:"createThunk",key:"createThunkunsubscribeFromAwarenessTopic",description:"Temporarily unsubscribe from topic updates"};const F=(0,A.Ay)("Alert other users who are subscribed to the topic that a subscriber has left",function(){var Y=(0,t.coroutine)(function*(Q,Z,ee){const _e=Z();if(!(0,c.ON)(_e))return;const Ee=(0,i.WR)(_e),G={channel:ee,type:"awareness",subtype:u.Pz.CLOSE,user:Ee};try{Q((0,a.tN)(G))}catch(Ae){(0,r.Ay)({getState:Z}).warn("Failed to send awareness query: ",Ae)}});return function(Q,Z,ee){return Y.apply(this,arguments)}}());F.meta={name:"createThunk",key:"createThunkmaybeSendCloseState",description:"Alert other users who are subscribed to the topic that a subscriber has left"};class V{maybeSendCurrentAwarenessState(Q){const Z=(0,o.getStoreInstanceByTeamId)(this.teamId);return Z?(Z.dispatch(P(Q)),!0):!1}maybeSendAwarenessQuery(Q){const Z=(0,o.getStoreInstanceByTeamId)(this.teamId);return Z?(Z.dispatch(C(Q)),!0):!1}maybeSendAwarenessCloseState(Q){const Z=(0,o.getStoreInstanceByTeamId)(this.teamId);return Z?(Z.dispatch(F(Q)),!0):!1}constructor({teamId:Q}){this.onShutdownDataChannelSubscriber=()=>{},this.teamId=Q}}l(V,"RtmBroadcaster");class B{onDisconnectDataChannel(){var Q;(Q=this.audioVideoFacade)===null||Q===void 0||Q.realtimeUnsubscribeFromReceiveDataMessage(this.dataChannelTopic),this.connected=!1}onConnectDatachannel(Q){this.audioVideoFacade=Q,this.audioVideoFacade.realtimeSubscribeToReceiveDataMessage(this.dataChannelTopic,this.realtimeReceiveDataMessageCallback),this.connected=!0,(0,r.Wo)().warn(f,`broadcaster connected ${this.peerId}`),this.maybeSendAwarenessQuery(this.topicId)}onInitializeDataChannelSubscriber(){}realtimeReceiveDataMessageCallback(Q){}maybeSendCurrentAwarenessState(Q){var Z;if(!this.connected)return(0,r.Wo)().info(f,`${this.connected} ${Q} Can't send yet, not connected`),!1;const ee=(0,o.getStoreInstanceByTeamId)(this.teamId);if(!ee)return(0,r.Wo)().warn(f,`${this.connected} ${Q} Can't find teamstore for ${this.teamId}, not sending awareness state`),!1;const _e=ee.getState(),Ee=(0,i.WR)(_e);ee.dispatch((0,m.c6)({topicId:Q,userId:Ee}));const G=(0,v.pL)(_e),ce=(0,d.fL)(_e,Q,Ee,G?"self":void 0).map(oe=>new p.Y.AwarenessPayload({fieldName:oe.field_name,fieldValue:oe.field_value,...this.isHuddlesAwarenessTimestampEnabled&&!!oe.field_timestamp_ms&&{fieldTimestampMs:oe.field_timestamp_ms}})),de=new p.Y.AwarenessBroadcast({channel:Q,user:(0,i.WR)(ee.getState()),awarenessState:ce});return(Z=this.audioVideoFacade)===null||Z===void 0||Z.realtimeSendDataMessage(this.dataChannelTopic,p.Y.encode(new p.Y({awarenessBroadcast:de})).finish()),!0}maybeSendAwarenessQuery(Q){var Z;if(!this.connected)return(0,r.Wo)().info(f,`${this.connected} ${Q} Can't send yet, not connected`),!1;(0,r.Wo)().warn(f,`${this.connected} ${Q} Sending awareness query`);const ee=(0,o.getStoreInstanceByTeamId)(this.teamId);if(!ee)return(0,r.Wo)().warn(f,`${this.connected} ${Q} Can't find teamstore for ${this.teamId}, not sending awareness query`),!1;const _e=new p.Y.AwarenessQuery({channel:Q,user:(0,i.WR)(ee.getState())});return(Z=this.audioVideoFacade)===null||Z===void 0||Z.realtimeSendDataMessage(this.dataChannelTopic,p.Y.encode(new p.Y({awarenessQuery:_e})).finish()),!0}maybeSendAwarenessCloseState(Q){var Z;if(!this.connected)return(0,r.Wo)().info(f,`${this.connected} ${Q} Can't send yet, not connected`),!1;(0,r.Wo)().warn(f,`${this.connected} ${Q} Sending awareness query`);const ee=(0,o.getStoreInstanceByTeamId)(this.teamId);if(!ee)return(0,r.Wo)().warn(f,`${this.connected} ${Q} Can't find teamstore for ${this.teamId}, not sending awareness query`),!1;const _e=new p.Y.AwarenessClose({channel:Q,user:(0,i.WR)(ee.getState())});return(Z=this.audioVideoFacade)===null||Z===void 0||Z.realtimeSendDataMessage(this.dataChannelTopic,p.Y.encode(new p.Y({awarenessClose:_e})).finish()),!0}constructor({teamId:Q,peerId:Z,topicId:ee,isHuddlesAwarenessTimestampEnabled:_e}){this.dataChannelTopic="awareness-sync-channel",this.isHuddlesAwarenessTimestampEnabled=!1,this.onShutdownDataChannelSubscriber=()=>{this.maybeSendAwarenessCloseState(this.topicId),this.connected=!1},this.teamId=Q,this.peerId=Z,this.connected=!1,this.topicId=ee,this.isHuddlesAwarenessTimestampEnabled=!!_e}}l(B,"ChimeChannelBroadcaster");class D{maybeTTL(){[...new Set(this.topicToTeamMap.values())].forEach(Z=>{(0,r.Wo)().debug(E,`Running TTL for ${Z}`);const ee=(0,o.getStoreInstanceByTeamId)(Z);ee&&ee.dispatch((0,m._y)())}),this.watchedTopics.size===0&&((0,r.Wo)().info(E,"Stopping the TTL timer, nothing to watch"),clearInterval(this.periodicTTLId),this.periodicTTLId=null)}broadcastChanges(){if(Date.now()-this.lastDirtyBroadcastTime<500)return;const Q=(0,_.A)(M,-.25,.25);this.dirtyTopics.forEach(Z=>{(0,h.A)(()=>{const ee=this.dataChannels.get(Z);ee&&ee.maybeSendCurrentAwarenessState(Z)&&this.dirtyTopics.delete(Z)},Q)}),this.lastDirtyBroadcastTime=Date.now(),this.watchedTopics.size===0&&((0,r.Wo)().info(E,"Stopping the dirty broadcast timer, nothing to watch"),clearInterval(this.dirtyBroadcastTimeoutId),this.dirtyBroadcastTimeoutId=null)}broadcastPerodicallyToWatchedTopics(){this.watchedTopics.forEach(Q=>{const Z=this.dataChannels.get(Q);Z&&Z.maybeSendCurrentAwarenessState(Q)&&this.dirtyTopics.delete(Q)}),this.watchedTopics.size===0&&((0,r.Wo)().info(E,"Stopping the periodic broadcast timer, nothing to watch"),clearInterval(this.perodicBroadcastTimeoutId),this.perodicBroadcastTimeoutId=null)}query(){Date.now()-this.lastQueryTime<15e3||(this.watchedTopics.forEach(Q=>{if(this.topicToTeamMap.get(Q)){const ee=this.dataChannels.get(Q);ee&&ee.maybeSendAwarenessQuery(Q)&&this.dirtyTopics.delete(Q)}}),this.broadcastChanges(),this.lastQueryTime=Date.now())}markTopicChanged(Q){if(!this.watchedTopics.has(Q)){(0,r.Wo)().info(E,`Ignoring topic change for unwatched topic ${Q}`);return}this.dirtyTopics.add(Q),this.dirtyBroadcastTimeoutId||((0,r.Wo)().info(E,"Starting the dirty broadcast timer"),this.dirtyBroadcastTimeoutId=setInterval(this.broadcastChanges.bind(this),I)),this.perodicBroadcastTimeoutId||((0,r.Wo)().info(E,"Starting the periodic broadcast timer"),this.perodicBroadcastTimeoutId=setInterval(this.broadcastPerodicallyToWatchedTopics.bind(this),y)),this.periodicTTLId||((0,r.Wo)().info(E,"Starting the TTL timer"),this.periodicTTLId=setInterval(this.maybeTTL.bind(this),O))}removeTopicId(Q){this.dirtyTopics.delete(Q),this.watchedTopics.delete(Q)}watch(Q,Z,ee){this.watchedTopics.add(Z),this.topicToTeamMap.set(Z,Q),this.dataChannels.set(Z,ee),this.markTopicChanged(Z),this.query()}unwatch(Q){this.broadcastChanges(),this.removeTopicId(Q)}unwatchAll(){if(this.watchedTopics.size){const Q=[...this.watchedTopics].join(" ");(0,r.Wo)().warn(E,`Clearing unexpected remaining topics: ${Q}`),this.broadcastChanges(),this.watchedTopics.clear()}this.dataChannels.clear()}constructor(){this.dirtyTopics=new Set,this.watchedTopics=new Set,this.topicToTeamMap=new Map,this.dataChannels=new Map,this.lastDirtyBroadcastTime=0,this.lastQueryTime=0}}l(D,"AwarenessManager");const S=new D;class R{onConnectDatachannel(Q){this.audioVideoFacade=Q,this.audioVideoFacade.realtimeSubscribeToReceiveDataMessage(this.dataChannelTopic,this.realtimeReceiveDataMessageCallback.bind(this)),(0,r.Wo)().warn(f,"listener connected")}onDisconnectDataChannel(){}onInitializeDataChannelSubscriber(){}onShutdownDataChannelSubscriber(){}realtimeReceiveDataMessageCallback(Q){let Z;try{Z=p.Y.decode(Q.data)}catch(ee){(0,r.Wo)().debug(f,`Peer Message failed during decode, ignoring peer message.
				| Error: ${ee}
				| Data Sender Attendee ID: ${Q.senderAttendeeId}
				| Data Sender External Attendee ID: ${Q.senderExternalUserId}
				| Topic: ${Q.topic}`);return}if(Z.awarenessQuery&&Z.awarenessQuery.channel)S.markTopicChanged(Z.awarenessQuery.channel);else if(Z.awarenessBroadcast){const ee=(0,o.getStoreInstanceByTeamId)(this.teamId),_e=(0,v.pL)(ee.getState()),Ee=Z.awarenessBroadcast.user,G=Z.awarenessBroadcast.channel,Ae=Z.awarenessBroadcast.awarenessState;if(Ee&&G&&Ae){const ce=Ae.map(oe=>{var $,re;return{field_name:($=oe.fieldName)!==null&&$!==void 0?$:"unknown_field",field_value:(re=oe.fieldValue)!==null&&re!==void 0?re:"unknown_value",...!!oe.fieldTimestampMs&&{field_timestamp_ms:oe.fieldTimestampMs}}}),de={user:Ee,channel:G,awarenessEntries:ce,..._e&&{uniqueId:Q.senderAttendeeId}};ee&&ee.dispatch((0,m.zZ)(de))}}else if(Z.awarenessClose){const ee=(0,o.getStoreInstanceByTeamId)(this.teamId),_e=(0,v.pL)(ee.getState()),Ee=Z.awarenessClose.user,G=Z.awarenessClose.channel;Ee&&G&&ee&&ee.dispatch((0,m.DQ)({topicId:G,userId:Ee,..._e&&{uniqueId:Q.senderAttendeeId}}))}}constructor({teamId:Q}){this.dataChannelTopic="awareness-sync-channel",this.teamId=Q}}l(R,"ChimeChannelListener");const w=l((Y,Q,Z)=>{const ee=Z(),_e=(0,i.WR)(ee),Ee=Y.awareness_state;switch(Y.subtype){case"query":_e!==Y.user&&S.markTopicChanged(Y.channel);break;case"broadcast":if(Ee&&_e!==Y.user){const G={user:Y.user,channel:Y.channel,awarenessEntries:Ee};Q((0,m.zZ)(G))}break;case"close":_e!==Y.user&&Q((0,m.DQ)({topicId:Y.channel,userId:Y.user}));break;default:throw new Error(g)}},"onAwarenessEvent");(0,s.d1)("awareness",w)},324949:(j,T,e)=>{"use strict";e.d(T,{A:()=>f});var t=e(605556),n=e.n(t),s=e(780076),a=e(674217),c=e(885850),r=e(314878),o=e(437556),u=e(850960),m=e(536160),i=e(710596),d=e(658160),_=e(396386),h=e(23219),p=e(659973),A=e(532395),v=e(381666);const E=(0,a.Ay)("Clog DM_OPEN event with current stat",function(g,y){let{channelId:I,tabId:O}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const M=y(),C=(0,v.e)({state:M}),P=(0,c.OL)(M,I);if(!(0,s.uz)(P)||!(0,_.LI)(P))return;const L=(0,d.e)(P),x=(0,o.nv)(M,L),F=(0,p.A)(M,x)||void 0,V=(0,h.PV)(x)||void 0;C.track(A.EventId.DM_OPEN,{item_type:I[0],item_id:I,bot_id:F,app_id:V,is_muted:(0,r.B)(M,I),is_starred:(0,i.m2)(M,P),has_unreads:!!(0,i.$M)(P),is_archived:(0,u.F)(P),is_frozen:(0,m.Zz)(P),badge_count:(0,c.TJ)(M,P),tab:O||"messages"})});E.meta={name:"createThunk",key:"createThunkclogDMOpen",description:"Clog DM_OPEN event with current stat"},E.propTypes={channelId:n().string.isRequired,tabId:n().oneOf(["messages","app","about"])};const f=E},895257:(j,T,e)=>{"use strict";e.d(T,{A:()=>m});var t=e(674217),n=e(76742),s=e(790310),a=e(396386),c=e(885850),r=e(381666),o=e(532395);const u=(0,t.Ay)("Clogs a message sent or resent",function(i,d){let{channelId:_,msgTs:h,resent:p=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const A=d(),v=_?(0,c.OL)(A,_):null;let E={message_timestamp:h,channel_id:_,channel_type:_?_.charAt(0):null,channel_privacy_type:v?(0,a.K5)(v):null,is_file_channel:v?(0,s.jT)(v):null};const f=(0,n.ZR)(A);f!==null&&(E={...E,channel_session_id:f});const g=(0,r.e)({state:A}),y=p?o.EventId.MSG_RESENT:o.EventId.MSG_SENT;g.track(y,E)});u.meta={name:"createThunk",key:"createThunkclogMessageSent",description:"Clogs a message sent or resent"};const m=u},813436:(j,T,e)=>{"use strict";e.d(T,{r:()=>d});var t=e(296540),n=e(674217),s=e(501021),a=e(899421),c=e(452551),r=e(749036),o=e(934423),u=e(649098),m=e(282233);const i=new u.Ay("huddles"),d=(0,n.Ay)("Copies Huddle link by Channel Id",(_,h,p,A)=>{let{channelId:v,suppressToast:E}=p;const{windowRef:f}=A(c.S),g=(0,m.Eo)(h());if(v&&(_((0,s.TE)({reason:"copy",channelId:v})).then(y=>{(0,a.x3)(y.link,f.deref())}),g&&!E)){const y={name:"check"};_((0,r.M)({element:t.createElement(o.A,{svgIconProps:y,duration:3e3},i.rt("Huddle link copied"))}))}});d.meta={name:"createThunk",key:"createThunkcopyHuddleLinkByChannelId",description:"Copies Huddle link by Channel Id"}},247245:(j,T,e)=>{"use strict";e.d(T,{A:()=>Q});var t=e(612104),n=e(566401),s=e(474722),a=e(674217),c=e(292049),r=e(194092),o=e(885850),u=e(918097),m=e(562237);const i=(0,a.Ay)(m.rd.BULK_UPDATE_CHANNELS,function(Z,ee){let{channels:_e}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const Ee=ee();if(!_e||!_e.length||!(0,c.A)(_e))return;const G=(0,r.A)(_e,"id"),Ae=[],ce=!1;G.length&&(G.forEach(de=>{const oe=(0,o.OL)(Ee,de.id,ce);Ae.push({...oe,...de})}),Z((0,u.U)({channels:Ae,reason:m.rd.BULK_UPDATE_CHANNELS})))});i.meta={name:"createThunk",key:"createThunkbulkUpdateChannels",description:m.rd.BULK_UPDATE_CHANNELS};var d=e(318010),_=e(672385),h=e(705091),p=e(774102),A=e(601994),v=e(718908),E=e(124054),f=e(786626),g=e(215603);const y=(0,a.Ay)("Update the unread counts in response to client.counts",(Z,ee,_e)=>{if(!_e)return;const Ee=ee(),G={},Ae={},ce={};_e.forEach(de=>{const{id:oe,unread_cnt:$,unread_highlight_cnt:re}=de;G[oe]={unreadCnt:$||0,unreadHighlightCnt:re||0};const ue=(0,o.OL)(Ee,oe);if(!$&&!re||!(0,v.F)(Ee,ue))return;(0,E.d$)(Ee,ue)&&(ce[oe]=!0);const te=(0,v.v)(Ee,ue)?$:re,{reachedEnd:ae}=(0,p.tp)(Ee,oe),H=(0,f.UJ)(Ee);ae&&H?Ae[oe]=(0,g.Lh)(Ee,oe):Ae[oe]={unreadCnt:$,unreadHighlightCnt:te||re}}),Z((0,A.SO)({initialUnreads:G,countsPerChannel:Ae,channelsToSuppress:ce}))});y.meta={name:"createThunk",key:"createThunkinitializeUnreadCountsFromChannels",description:"Update the unread counts in response to client.counts"};var I=e(494696),O=e(850960),M=e(710596),C=e(790310),P=e(396386),L=e(682520),x=e(526197);const F=(0,x.Ay)("TS.ensureFullyBooted",()=>{throw new Error("Not implemented (and only ever intended for use in non-Sonic Land)")});var V=e(271338),B=e(377846),D=e(240122),S=e(120170),R=e(529734);const w="COUNTS",Y=(0,a.Ay)("Apply counts to channel objects and update stores",function(){var Z=(0,t.coroutine)(function*(ee,_e){let{counts:Ee=[]}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,V.A)()||(yield F());let G=_e();const Ae=[],ce={},de={},oe=[],$=(0,f.UJ)(G),re=(0,f.yf)(G),ue=(0,R.lc)(G);(0,L.Ay)({state:G}).info(w,`Applying counts to channels. wasLastConnectFast: ${re} isConnected: ${$}`);const te=Ee.filter(H=>{let{has_unreads:U,mention_count:N}=H;return U||N}).filter(function(){let{id:H}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return!(0,o.hh)(G,H)}).map(function(){let{id:H}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return H});te.length&&(yield ee((0,h.pX)({ids:te,reason:"apply-counts-to-channels/ensure-channels",callSource:h.aI.ApplyCounts})),G=_e());const ae=(0,p.jg)(G);Ee.forEach(H=>{const U=(0,o.OL)(G,H.id,!1);if(!U||(0,P.QR)(U)){if(!H.has_unreads&&!H.mention_count)return;(0,L.Ay)({state:G}).warn(w,{id:H.id,has_unreads:H.has_unreads,nonExistent:(0,P.QR)(U)},"applyCountsToChannels_missing_channel");return}if((0,O.F)(U)||(0,P.rW)(U)&&!(0,M.bl)(U))return;if((0,C.jT)(U)){ee((0,I.k)({channelId:U.id,mentionCount:H.mention_count,shouldSuppress:(0,E.d$)(G,U)}));return}const N={},{reachedEnd:K}=(0,p.tp)(G,U.id),J=H.has_unreads?1:0;let q=0,ie=0,Te=!1;(0,P.LI)(U)||(0,P.LI)(H)||(0,P.yz)(U)||(0,P.yz)(H)?q=H.mention_count||J:(Te=!0,q=J,ie=H.mention_count||0),!q&&ie&&((0,L.Ay)({state:G}).warn(w,`Ignoring positive mention_count_display because has_unreads == false for ${U.id}`,{subtype:"ignoring_positive_mention_count_display"}),ie=0),de[U.id]={unreadCnt:q,unreadHighlightCnt:ie},!ue&&K&&$?oe.push(U.id):(q!==(0,M.$M)(U)&&(N.unread_cnt=q),Te&&ie!==(0,M.BP)(U)&&(N.unread_highlight_cnt=ie)),H.updated&&H.history_invalid&&(ce[U.id]={historyInvalidTs:H.history_invalid,updatedTs:H.updated},ae!=null&&ae[U.id]&&ee((0,D.A)({channelId:U.id,newHistoryInvalidTs:H.history_invalid,newUpdatedTs:H.updated}))),(0,n.A)(N)||(N.id=U.id,Ae.push(N))}),(0,n.A)(Ae)||ee(i({channels:Ae})),(0,n.A)(ce)||ee((0,B.ih)({updates:ce})),ee((0,d.M)(Ee)),ee((0,_.f)(Ee.map(H=>({channelId:H.id,ts:H.last_read})))),ee((0,A.iz)(de)),ee(y((0,s.A)(de,function(){let{unreadCnt:H,unreadHighlightCnt:U}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{id:arguments.length>1?arguments[1]:void 0,unread_cnt:H,unread_highlight_cnt:U}}))),oe.forEach(H=>{ee((0,S.A)({channelId:H}));const U=(0,o.OL)(_e(),H,!1);if(U){const N={unreadCnt:(0,M.$M)(U),unreadHighlightCnt:(0,M.BP)(U)};(0,L.Ay)({state:G}).info(w,`Recounted ${H}; initial: ${JSON.stringify(de[H])}; after: ${JSON.stringify(N)}`)}})});return function(ee,_e){return Z.apply(this,arguments)}}());Y.meta={name:"createThunk",key:"createThunkapplyCountsToChannels",description:"Apply counts to channel objects and update stores"};const Q=Y},53356:(j,T,e)=>{"use strict";e.d(T,{oE:()=>d.A,Q7:()=>A,TE:()=>v.A,Uf:()=>x});var t=e(180491),n=e(339241),s=e(286942),a=e(674217),c=e(113574),r=e(601994),o=e(900431),u=e(103413),m=e(682520),i=e(639171),d=e(247245);const _="COUNTS",h=(0,a.Ay)("Apply counts to channels and threads",function(F,V){let{channels:B,groups:D,ims:S,mpims:R,threads:w,alerts:Y,saved:Q,fileChannels:Z,channelBadges:ee}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const _e=V();if(!(0,c.TZ)(_e))return t.S.resolve();F((0,r.iz)({})),F((0,u.y)(Y||{}));const Ee=p(Z),G=(0,n.A)((0,s.A)(B,D,S,R,Ee));return F((0,d.A)({counts:G})).then(()=>{const Ae=(0,m.Ay)({getState:V});w&&(Ae.info(_,`Threads has_unreads:${w.has_unreads} mention_count:${w.mention_count}`),F((0,o._)({threadsHasUnreads:w.has_unreads,threadsUnreadCountByChannel:w.unread_count_by_channel,threadsMentionCountByChannel:w.mention_count_by_channel}))),Q&&F((0,i.yO)(Q)),ee&&F((0,r.$m)(ee)),Ae.info(_,"Completed counts processing")})});h.meta={name:"createThunk",key:"createThunkapplyCountsToChannelsAndThreads",description:"Apply counts to channels and threads"};function p(F){if(!F||!F.quip)return[];const V=F.quip.mention_count_by_channel;return Object.keys(V).map(S=>({id:S,mention_count:V[S],has_unreads:!0}))}l(p,"transformFileChannels");const A=h;var v=e(120170),E=e(601026),f=e(209137),g=e(885850),y=e(289123),I=e(437556),O=e(245843),M=e(896792),C=e(308373);const P="COUNTS",L=(0,a.Ay)("Update unread counts",function(F,V){let{channelId:B,messageTs:D}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const S=V(),R=!1,w=(0,g.OL)(S,B,R);if(!w||!(0,C.A)(w,{countFileChannels:!0}))return t.S.resolve(!0);const Y=(0,I.cA)(S),Q=(0,E.gd)(S,Y.id)==="away",Z=Y._presence_last_changed||(0,c.tV)(S,"start_ms"),ee=(0,M.A)({state:S,messages:[(0,y.Ld)(S,w.id,D)],channel:w,currentUserId:Y.id,userIsAway:Q,userPresenceLastChanged:Z,highlightWords:(0,O.A)(S)}),_e=ee==null?void 0:ee.unreadHighlightCnt;return _e!==w.unread_highlight_cnt&&((0,m.Ay)({state:S}).info(P,`Updated unread_highlight_cnt for ${w.id}: ${_e}`),F((0,f.b)({id:w.id,unread_highlight_cnt:_e}))),t.S.resolve(!1)});L.meta={name:"createThunk",key:"createThunkupdateUnreadCountsForThreadMentionBroadcasts",description:"Update unread counts"};const x=L},240122:(j,T,e)=>{"use strict";e.d(T,{A:()=>m});var t=e(674217),n=e(881805),s=e(66703),a=e(774102),c=e(287187),r=e(682520),o=e(127850);const u=(0,t.Ay)("Possibly purge or invalidate channel history .",(i,d,_)=>{let{channelId:h,newHistoryInvalidTs:p,newUpdatedTs:A}=_;const v=d(),E=(0,s.Kq)(v,h),f=(0,s.QO)(v,h);p!=="0000000000.000000"&&(!E||p>E)?((0,r.Ay)({state:v}).info("COUNTS",`purging cached history for channel ${h} since counts history_invalid ${p} > cached historyInvalidTs ${E}`),i((0,o.bz)({channelId:h,includeThreads:!0}))):A!=="0000000000.000000"&&(!f||A>f)&&((0,r.Ay)({state:v}).info("COUNTS",`invalidating history for channel ${h} since counts updated ${A} > cached updatedTs ${f}`),(0,c.D1)((0,n.ZT)(v),h,(0,a.m3)(v,h)))});u.meta={name:"createThunk",key:"createThunkmaybePurgeChannelHistoryAfterMutations",description:"Possibly purge or invalidate channel history ."};const m=u},197832:(j,T,e)=>{"use strict";e.d(T,{A:()=>h});var t=e(296540),n=e(674217),s=e(37124),a=e(129318),c=e(381666),r=e(532395),o=e(384434),u=e(881805),m=e(590671),i=e(113574),d=e(934861);const _=(0,n.Ay)("Opens the apps browser modal",function(p,A){let{initialTab:v,emojiNameSuggestion:E,elementName:f,emojiUrl:g,megaphoneEventOnClose:y}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const I=A(),O=(0,u.JY)(I);let M;O&&(0,m.JV)(O)?M=(0,a.H2)(I):(0,i.u8)(I)&&(M=(0,d.mf)((0,a.H7)(I))),(0,c.e)({getState:A}).track(r.EventId.ADD_CUSTOM_EMOJI_IN_CLIENT,{contexts:{ui_context:{step:"add_custom_emoji",action:"click",ui_properties:{element_type:"button",element_name:f}}}}),p((0,s.q)({element:t.createElement(o.A,{showEmojiPacks:!g,orgName:M,initialTab:v,emojiNameSuggestion:E,emojiUrl:g,megaphoneEventOnClose:y}),isStackable:!0}))});_.meta={name:"createThunk",key:"createThunkopenAddCustomEmojiModal",description:"Opens the apps browser modal"};const h=_},976725:(j,T,e)=>{"use strict";e.d(T,{U:()=>d});var t=e(674217),n=e(428527),s=e(427399),a=e(881805),c=e(539900),r=e(388413),o=e(437556),u=e(619674),m=e(883518);const i=(0,t.Ay)("Shows message pane for bots",function(_,h){let{memberId:p,serviceId:A,botProfile:v}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var E;const{member:f,bot:g,memberIsHuman:y}=(0,n.Od)(h(),{userId:p,botId:A,botProfile:v}),I=(0,a.ZT)(h())||"",O=!y||A?(0,c.AW)({member:f||void 0,bot:g,botProfile:v,currentTeamId:I}):void 0,M=(0,r.G2)(h(),{serviceId:A,homeWorkspaceId:O,memberId:p});var C;const P=(0,o.nv)(h(),p||((C=M==null||(E=M.app_user)===null||E===void 0?void 0:E.id)!==null&&C!==void 0?C:void 0));var L;return _((0,s.Z)({memberId:(L=P==null?void 0:P.id)!==null&&L!==void 0?L:void 0}))});i.meta={name:"createThunk",key:"createThunkopenMessagesForBot",description:"Shows message pane for bots"};const d=(0,t.Ay)("Shows the flexpane profile for humans or messages for bots",(_,h,p)=>{let{memberId:A,serviceId:v,botProfile:E}=p;return A&&(0,n.wC)(h(),A)?_((0,u.o)((0,m.Fo)({memberId:A}))):_(i({memberId:A,serviceId:v,botProfile:E}))});d.meta={name:"createThunk",key:"createThunkopenProfile",description:"Shows the flexpane profile for humans or messages for bots"}},940284:(j,T,e)=>{"use strict";e.d(T,{ET:()=>v,Fd:()=>f,Wb:()=>g,xz:()=>E});var t=e(605556),n=e.n(t),s=e(574022),a=e(674217),c=e(464144),r=e(682520),o=e(881805),u=e(211700),m=e(368827),i=e(786626);const d="PRESENCE-MANAGER",_={},h=l((O,M)=>{const C=(0,o.ZT)(M()),P=Object.keys(_[C]),L={type:"presence_sub",ids:P},x=(0,r.Ay)({getState:M});x.debug(d,`Sending a 'presence_sub' event with the following ids: ${P}`),O((0,c.tN)(L)).catch(F=>{F&&F.message===m.qk||x.error(`Received an error while trying to send 'presence_sub' with the following ids: ${P}, error = ${F}`)})},"sendMessageEvent");let p;function A(){return p||(p=(0,s.A)(h,100,{leading:!1})),p}l(A,"getThrottledSendMessageEvent");const v=(0,a.Ay)("Send a presence_sub event with the list of members we want to subscribe to receive presence_change events for",(O,M)=>{if(!(0,i.ON)(M())){(0,r.Ay)({getState:M}).debug(d,"The presence subscription changed while the WebSocket disconnected; will send the updated subscription once we are connected");return}A()(O,M)});v.meta={name:"createThunk",key:"createThunksendPresenceSubEvent",description:"Send a presence_sub event with the list of members we want to subscribe to receive presence_change events for"};const E=(0,a.Ay)("Adds the member to the presence subscription or increments the associated count",function(O,M){let{memberId:C}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!C||C==="USLACKBOT")return;const P=(0,o.ZT)(M());if(_[P]||(_[P]={}),_[P][C]){(0,r.Ay)({getState:M}).debug(d,`Increasing the count for ${C} by 1`),_[P][C]+=1;return}(0,r.Ay)({getState:M}).debug(d,`Adding ${C} to the presence subscription`),_[P][C]=1,O(v())});E.meta={name:"createThunk",key:"createThunkaddMemberToPresenceSubscription",description:"Adds the member to the presence subscription or increments the associated count"},E.propTypes={memberId:n().string.isRequired};const f=(0,a.Ay)("Removes the member from the presence subscription or decrements the associated count",function(O,M){let{memberId:C}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!C)return;const P=(0,o.ZT)(M());if(!(!_[P]||!_[P][C])){if(_[P][C]>1){(0,r.Ay)({getState:M}).debug(d,`Decreasing the count for ${C} by 1`),_[P][C]-=1;return}(0,r.Ay)({getState:M}).debug(d,`Removing ${C} from the presence subscription`),delete _[P][C],O(v())}});f.meta={name:"createThunk",key:"createThunkremoveMemberFromPresenceSubscription",description:"Removes the member from the presence subscription or decrements the associated count"},f.propTypes={memberId:n().string.isRequired};const g=l(O=>_[O],"getPresenceSubscriptionByTeamId"),y=l(O=>{delete _[O]},"deletePresenceSubscriptionByTeamId"),I={sendMessageEvent:h};(0,u.ul)("presenceManager",{getPresenceSubscriptionByTeamId:g})},172889:(j,T,e)=>{"use strict";e.d(T,{Ap:()=>a,Pv:()=>n,Ui:()=>s});var t=e(676426);const n=new t.a;function s(){return n.entries().filter(c=>c.value&&!c.value.isRejected()&&!c.value.isCancelled()).length}l(s,"getActiveCollabClientCount");const a=l(c=>{const r=n.get(c);return r!=null&&r.isFulfilled()?r.value():void 0},"getInitializedClient")},111171:(j,T,e)=>{"use strict";e.d(T,{Aw:()=>E,Zj:()=>h,vK:()=>p});var t=e(801081),n=e(649098),s=e(247041),a=e(135713),c=e(453752),r=e(254666),o=e(136078),u=e(877525),m=e(905480),i=e(129318),d=e(934861);const _=new n.Ay("quip_shortcut_handlers");var h;(function(f){f[f.BASICS=0]="BASICS",f[f.MEDIA=1]="MEDIA",f[f.SLACK=2]="SLACK",f[f.LAYOUT=3]="LAYOUT"})(h||(h={}));const p=l(()=>({[h.BASICS]:_.t("Basics"),[h.MEDIA]:_.t("Media"),[h.SLACK]:_.t("Slack"),[h.LAYOUT]:_.t("Layout")}),"getCategoryDetailsV2"),A=l(f=>{let{currentTeam:g,experimentCanvasInsertWorkflowMenuGroupOn:y,experimentCanvasDateMentionsGroupOn:I}=f;const O=(0,d.qR)(g),M=p(),C=M[h.BASICS],P=M[h.MEDIA],L=M[h.SLACK],x=M[h.LAYOUT],F=l((V,B,D,S)=>({id:V,name:B,canonicalName:D,hideOnEmptyQuery:S,autocomplete:!0,icon:(0,u.P)(r.r.DATE_MENTION).name,category:h.BASICS}),"dateShortcut");return[{id:m.SlackShortcutCommandType.CANVAS,name:(0,c.O)(r.r.CANVAS),canonicalName:"/canvas",autocomplete:!0,icon:(0,u.P)(r.r.CANVAS).name,category:h.BASICS,aliases:[C]},{id:m.SlackShortcutCommandType.CHECKLIST,name:(0,c.O)(r.r.CHECK_LIST),canonicalName:"/checklist",autocomplete:!0,icon:(0,u.P)(r.r.CHECK_LIST).name,category:h.BASICS,aliases:[C]},{id:m.SlackShortcutCommandType.H1,name:(0,c.O)(r.r.H1),canonicalName:"/largeheading",autocomplete:!0,icon:(0,u.P)(r.r.H1).name,category:h.BASICS,aliases:["h1",C]},{id:m.SlackShortcutCommandType.H2,name:(0,c.O)(r.r.H2),canonicalName:"/mediumheading",autocomplete:!0,icon:(0,u.P)(r.r.H2).name,category:h.BASICS,aliases:["h2",C]},{id:m.SlackShortcutCommandType.H3,name:(0,c.O)(r.r.H3),canonicalName:"/smallheading",autocomplete:!0,icon:(0,u.P)(r.r.H3).name,category:h.BASICS,aliases:["h3",C]},{id:m.SlackShortcutCommandType.PLAIN,name:(0,c.O)(r.r.PARAGRAPH),canonicalName:"/paragraph",autocomplete:!0,icon:(0,u.P)(r.r.PARAGRAPH).name,category:h.BASICS,aliases:[_.t("plain"),C]},{id:m.SlackShortcutCommandType.TABLE,name:(0,c.O)(r.r.TABLE),canonicalName:"/table",autocomplete:!0,icon:(0,u.P)(r.r.TABLE).name,category:h.BASICS,aliases:[_.t("grid"),_.t("spreadsheet"),C]},{id:m.SlackShortcutCommandType.DIVIDER,name:(0,c.O)(r.r.DIVIDER),canonicalName:"/divider",autocomplete:!0,icon:(0,u.P)(r.r.DIVIDER).name,category:h.BASICS,aliases:[_.t("horizontal line"),C]},{id:m.SlackShortcutCommandType.BULLET_LIST,name:(0,c.O)(r.r.BULLET_LIST),canonicalName:"/bulletedlist",autocomplete:!0,icon:(0,u.P)(r.r.BULLET_LIST).name,category:h.BASICS,aliases:[C]},{id:m.SlackShortcutCommandType.ORDERED_LIST,name:(0,c.O)(r.r.ORDERED_LIST),canonicalName:"/orderedlist",autocomplete:!0,icon:(0,u.P)(r.r.ORDERED_LIST).name,category:h.BASICS,aliases:[C]},{id:m.SlackShortcutCommandType.BLOCKQUOTE,name:(0,c.O)(r.r.BLOCKQUOTE),canonicalName:"/blockquote",autocomplete:!0,icon:(0,u.P)(r.r.BLOCKQUOTE).name,category:h.BASICS,aliases:[C]},{id:m.SlackShortcutCommandType.CODE,name:(0,c.O)(o.L.CODE),canonicalName:"/code",autocomplete:!0,icon:(0,u.P)(o.L.CODE).name,category:h.BASICS,aliases:[C]},...I?[{...F(m.SlackShortcutCommandType.DATE_GENERIC,(0,c.O)(r.r.DATE_MENTION),"/date"),aliases:[C]},F(m.SlackShortcutCommandType.DATE_TODAY,_.t("Today"),"/today",!0),F(m.SlackShortcutCommandType.DATE_TOMORROW,_.t("Tomorrow"),"/tomorrow",!0),F(m.SlackShortcutCommandType.DATE_YESTERDAY,_.t("Yesterday"),"/yesterday",!0)]:[],{id:m.SlackShortcutCommandType.VIDEO,name:(0,c.O)(r.r.VIDEO_CLIP),canonicalName:"/videoclip",autocomplete:!0,icon:(0,u.P)(r.r.VIDEO_CLIP).name,category:h.MEDIA,aliases:[P]},{id:m.SlackShortcutCommandType.AUDIO,name:(0,c.O)(r.r.AUDIO_CLIP),canonicalName:"/audioclip",autocomplete:!0,icon:(0,u.P)(r.r.AUDIO_CLIP).name,category:h.MEDIA,aliases:[P]},{id:m.SlackShortcutCommandType.IMAGE,name:(0,c.O)(r.r.IMAGE),canonicalName:"/image",autocomplete:!0,icon:(0,u.P)(r.r.IMAGE).name,category:h.MEDIA,aliases:[P]},{id:m.SlackShortcutCommandType.FILE,name:(0,c.O)(r.r.FILE),canonicalName:"/file",autocomplete:!0,icon:"file",category:h.MEDIA,aliases:[P]},...y&&O?[{id:m.SlackShortcutCommandType.WORKFLOW,name:(0,c.O)(r.r.WORKFLOW,{experimentCanvasInsertWorkflowMenuGroupOn:y}),canonicalName:"/workflow",autocomplete:!0,icon:(0,u.P)(r.r.WORKFLOW).name,category:h.SLACK,aliases:[L]}]:[],{id:m.SlackShortcutCommandType.PROFILE,name:_.t("Profile"),canonicalName:"/profile",autocomplete:!0,icon:"user",category:h.SLACK,aliases:[L,_.t("user"),_.t("mention")]},{id:m.SlackShortcutCommandType.CHANNEL,name:_.t("Channel"),canonicalName:"/channel",autocomplete:!0,icon:"channel-add",category:h.SLACK,aliases:[L]},{id:m.SlackShortcutCommandType.TWO_COLUMNS,name:(0,c.O)(r.r.LAYOUT_2_COLUMNS),canonicalName:"/twocolumns",autocomplete:!0,icon:(0,u.P)(r.r.LAYOUT_2_COLUMNS).name,category:h.LAYOUT,aliases:[x]},{id:m.SlackShortcutCommandType.THREE_COLUMNS,name:(0,c.O)(r.r.LAYOUT_3_COLUMNS),canonicalName:"/threecolumns",autocomplete:!0,icon:(0,u.P)(r.r.LAYOUT_3_COLUMNS).name,category:h.LAYOUT,aliases:[x]},{id:m.SlackShortcutCommandType.CODEBLOCK,name:(0,c.O)(r.r.CODE_BLOCK),canonicalName:"/codeblock",autocomplete:!0,icon:(0,u.P)(r.r.CODE_BLOCK).name,category:h.LAYOUT,aliases:[x]}]},"getCommandsV2");function v(f){return{...f,type:"client"}}l(v,"formatShortcut");const E=(0,t.Mz)([i.H7,f=>(0,a._Z)(f,"canvas_insert_workflow_menu")==="on",f=>(0,a._Z)(f,"canvas_date_mentions")==="on",()=>(0,s.JK)(),(f,g)=>g],(f,g,y,I,O)=>A({currentTeam:f,experimentCanvasInsertWorkflowMenuGroupOn:g,experimentCanvasDateMentionsGroupOn:y}).map(v).filter(C=>O||!C.hideOnEmptyQuery))},418558:(j,T,e)=>{"use strict";e.d(T,{A:()=>u});var t=e(674217),n=e(127850),s=e(766998),a=e(289123),c=e(409140),r=e(544555);const o=(0,t.Ay)("Remove a message and its timestamp",function(m,i){let{channelId:d,ts:_,threadTs:h,broadcastDelete:p=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!d||!_))if(p)m((0,s.E$)({channelId:d,ts:_}));else{m((0,n.Np)({channelId:d,timestamp:_}));const A=!1,v=(0,a.Ld)(i(),d,_,A),E=v&&v.thread_ts||h;if(E){const f=(0,r.Iu)(d,E)||"";m((0,n.Np)({channelId:f,timestamp:_}))}m((0,s.QN)({message:{channel:d,ts:_}})),m((0,c.A)({channelId:d,item:v}))}});o.meta={name:"createThunk",key:"createThunkremoveMessageAndTimestamp",description:"Remove a message and its timestamp"};const u=o},409140:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(605556),n=e.n(t),s=e(152532);const a=(0,s.Ay)("(noop) Remove a pinned item via side-effect");a.meta={name:"createAction",key:"createActionremovePinnedItemCircular",description:"(noop) Remove a pinned item via side-effect"},a.propTypes=n().shape({item:n().object.isRequired,channelId:n().string.isRequired}).isRequired;const c=a},851581:(j,T,e)=>{"use strict";e.d(T,{A:()=>F});var t=e(180491),n=e(21879),s=e(790973),a=e(545),c=e(446632),r=e(574022),o=e(674217),u=e(449552),m=e(113574),i=e(881805),d=e(840122),_=e(297287),h=e(885850),p=e(127850),A=e(396386),v=e(972186),E=e(544555),f=e(766998),g=e(233431),y=e(371051),I=e(682520),O=e(786626);const M=1e3,C=l((B,D,S)=>{if(D==="Vall_threads")return(0,u.dispatchForTeamId)(B,(0,g.r8)()),t.K.resolve();const R=!1,w=(0,h.OL)((0,u.getStateByTeamId)(B),D,R);if(!w)return t.K.resolve();if(S)return P(B,D,S);const Y=(0,A.mz)(w);return(0,u.dispatchForTeamId)(B,(0,d.Ay)({channelId:D,type:Y,oldest:null,latest:null,reason:"requestOfflineHistory"})).then(function(){let{msgs:Q,hasMore:Z,isLimited:ee,pinCount:_e,deleted:Ee}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const G=(0,u.getStateByTeamId)(B);(0,O.UJ)(G)&&!(0,y.N)(G,D)&&!(0,y.N)(G,(0,m.WR)(G))||((0,u.dispatchForTeamId)(B,(0,p.Jt)({channelId:D})),(0,u.dispatchForTeamId)(B,(0,_.A)({msgs:Q,channelId:D,isLimited:ee,pinCount:_e,hasMore:{hasMoreStart:Z,hasMoreEnd:!1},oldest:null,latest:null,deleted:Ee})),(0,n.A)(_e)&&(0,u.dispatchForTeamId)(B,(0,v.K)({channelId:D,count:_e})))}).catch(Q=>{(0,I.Ay)({state:(0,u.getStateByTeamId)(B)}).error(`Failed to fetch offline history for ${D}: ${Q}`)})},"fetchOfflineHistory");function P(B,D,S){const R=(0,E.Iu)(D,S);return(0,u.dispatchForTeamId)(B,(0,d.$b)({channelId:D,threadTs:S,oldest:null,latest:null,reason:"requestOfflineHistory"})).then(function(){let{msgs:w,deleted:Y,hasMore:Q}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const Z=(0,u.getStateByTeamId)(B);if((0,O.UJ)(Z)&&!(0,y.N)(Z,D)&&!(0,y.N)(Z,(0,m.WR)(Z)))return;let ee=w;const _e=(0,s.A)(w,{ts:S});Q&&(ee=(0,a.A)(w,{ts:S})),(0,u.dispatchForTeamId)(B,(0,p.Jt)({channelId:R})),(0,u.dispatchForTeamId)(B,(0,_.A)({msgs:ee,channelId:R,hasMore:{hasMoreStart:Q,hasMoreEnd:!1},oldest:null,latest:null,deleted:Y})),_e&&(0,u.dispatchForTeamId)(B,(0,f.Kc)([_e]))})}l(P,"fetchOfflineHistoryForThread");const L=(()=>{const B=(0,c.A)(()=>(0,r.A)(C,M),function(){for(var D=arguments.length,S=new Array(D),R=0;R<D;R++)S[R]=arguments[R];return JSON.stringify(S)});return function(){for(var D=arguments.length,S=new Array(D),R=0;R<D;R++)S[R]=arguments[R];return B(...S)(...S)}})(),x=(0,o.Ay)("Request offline history",function(B,D){let{channelId:S,threadTs:R}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return L((0,i.ZT)(D()),S,R)});x.meta={name:"createThunk",key:"createThunkrequestOfflineHistory",description:"Request offline history"},x.propTypes={};const F=x,V={fetchOfflineHistory:C,fetchOfflineHistoryForThread:P}},17343:(j,T,e)=>{"use strict";e.d(T,{e8:()=>N,Ay:()=>Pe,IY:()=>Te});var t=e(877500),n=e(742531),s=e(962315),a=e(54930),c=e(544555),r=e(113574),o=e(881805),u=e(127850),m=e(885850),i=e(766998),d=e(455792),_=e(371051),h=e(674217),p=e(682520),A=e(656453),v=e(826),E=e(736477),f=e(42302),g=e(526197);const y=(0,g.Ay)("TS.channels.read_only.stashAndFetchChannelPostingUpdates",f.A);var I=e(819187),O=e(931179),M=e(418558),C=e(851581),P=e(180491),L=e(609976),x=e(449552),F=e(646592);const V={},B="cse-message-send",D="cse-message-send";let S=l(class{_send(){var X;const{message:ne,trace:fe,parentSpanId:be}=this._activeRequest||{};(0,p.Ay)({teamId:this._teamId}).action("MESSAGE-Q",`Sending message with clientMsgId ${ne==null?void 0:ne.client_msg_id}`);const Be=l(()=>{var We;return(We=this._store)===null||We===void 0?void 0:We.dispatch((0,L.A)({message:ne,traceId:fe==null?void 0:fe.getTraceId(),parentSpanId:be}))},"postMessageP");return(X=this._maybeTraceMessageSend(Be))===null||X===void 0?void 0:X.then(this._activeRequest?this._activeRequest.resolve:f.A).catch(this._activeRequest?this._activeRequest.reject:f.A).finally(()=>this.resolve(ne))}_next(){if(this._activeRequest||!this._queue.length)return!1;this._activeRequest=this._queue.shift();const{messageEnqueueSpan:X}=this._activeRequest||{};return X==null||X.addTags({count:this._queue.length}),X==null||X.close(),this._send(),(0,p.Ay)({teamId:this._teamId}).action("MESSAGE-Q",`Shifting queue, now has ${this._queue.length} messages`),!0}_maybeTraceMessageSend(X){var ne;if(!this.shouldTraceMessageSend())return X();const fe=(ne=this._tracer)===null||ne===void 0?void 0:ne.createTrace({traceName:B,tags:{event_type:"/api/chat.postMessage"},samplingOptions:{sampleType:F.nl.ALWAYS}}),be=l(()=>{var We;fe&&((We=this._tracer)===null||We===void 0||We.clearTrace(fe))},"onResolve"),Be=l((We,Re)=>{var ve;const xe={state:F.$m.ERROR};Re.status&&(xe.status=Re.status),Re.message&&(xe.message=Re.message),Re.data&&Re.data.error&&(xe.reason=Re.data.error),We==null||We.addTags(xe),We==null||We.close(),fe&&((ve=this._tracer)===null||ve===void 0||ve.reportTrace(fe))},"onError");return fe==null?void 0:fe.traceFn({name:D,onError:Be,onResolve:be},X)}enqueue(X){let{trace:ne,parentSpanId:fe}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new P.S((be,Be)=>{const We=ne==null?void 0:ne.startSpan("message_send_attempt:enqueue",{parentSpanId:fe});this._queue.push({message:X,messageEnqueueSpan:We,trace:ne,parentSpanId:fe,resolve:be,reject:Be}),(0,p.Ay)({teamId:this._teamId}).action("MESSAGE-Q",`Enqueueing message with clientMsgId ${X.client_msg_id}, queue has ${this._queue.length} messages`),this._next()})}resolve(X){return!X||!this._activeRequest||!this._activeRequest.message||X.client_msg_id!==this._activeRequest.message.client_msg_id?!1:((0,p.Ay)({teamId:this._teamId}).action("MESSAGE-Q",`Resolving active request with clientMsgId ${X.client_msg_id}`),this._activeRequest=null,this._next())}shouldTraceMessageSend(){return this._tracer}constructor(X){if(!X)throw new Error("MessageQueue requires a teamId.");if(this._teamId=X,this._activeRequest=null,this._queue=[],this._store=(0,x.getStoreInstanceByTeamId)(X),!this._store)throw new Error(`MessageQueue requires a store; No store matching ${X} found.`);const ne=this._store.getState();this._tracer=(0,v.E)({state:ne})}},"MessageQueue");function R(Ie){return V[Ie]||(V[Ie]=new S(Ie)),V[Ie]}l(R,"getInstance");const w={MESSAGE_SEND_TRACE_LABEL:B,MESSAGE_SEND_SPAN_LABEL:D};var Y=e(895257),Q=e(786626),Z=e(350662),ee=e(916990),_e=e(781026),Ee=e(22960),G=e(135713);const Ae=6,ce=7,de=8,oe="restricted_action_read_only_channel",$="restricted_action_thread_only_channel",re="restricted_action_non_threadable_channel",ue="ekm_access_denied",te="slack_connect_file_link_sharing_blocked",ae="dlp_user_warning",H="message_limit_exceeded",U="slack_connect_canvas_contain_file_sharing_blocked";var N;(function(Ie){Ie.SLACK_CONNECT_CANVAS_SHARING_BLOCKED="slack_connect_canvas_sharing_blocked",Ie.SLACK_CONNECT_FILE_UPLOAD_SHARING_BLOCKED="slack_connect_file_upload_sharing_blocked",Ie.SLACK_CONNECT_TEAM_BLOCKED="slack_connect_team_blocked"})(N||(N={}));const K={[oe]:Ae,[$]:ce,[re]:de};function W(Ie,X){Ie((0,i.Kc)([X]));const ne={channelId:X.channel,timestamps:[X.ts],oldest:X.ts,hasMore:!1,append:!0};if(Ie((0,u.VG)(ne)),X.thread_ts){const fe=(0,c.Iu)(X.channel,X.thread_ts);Ie((0,u.VG)({...ne,channelId:fe}))}}l(W,"addMsgToEnd");const J={};function q(Ie,X,ne){J[Ie]||(J[Ie]={}),J[Ie][X]=ne}l(q,"addResolutionTimer");function ie(Ie,X){!J[Ie]||!J[Ie][X]||(clearTimeout(J[Ie][X]),delete J[Ie][X])}l(ie,"cancelResolutionTimer");function Te(Ie,X,ne,fe){const be=(0,o.ZT)(Ie())||"",Be=(0,ee.I)(Ie(),fe.client_msg_id);if(Be){(0,p.Ay)({getState:Ie}).action("MESSAGE",`Resolved a message with clientMsgId ${fe.client_msg_id} in ${ne.channel} with ts ${fe.ts}`),X((0,Z.s)(Be.clientMsgId)),ie(be,Be.clientMsgId),X((0,M.A)({channelId:Be.channelId,ts:Be.ts}));const We=!1;(0,m.OL)(Ie(),ne.channel,We)&&X((0,Y.A)({channelId:ne.channel,msgTs:ne.ts,resent:!1}))}R(be).resolve(fe)}l(Te,"resolveMessage");const Me="cse-message-send:send",ke=(0,h.Ay)("Send a message",(Ie,X,ne)=>{let{messageSendTrace:fe,notificationTracePassthroughData:be,skipDLPUserWarning:Be,...We}=ne;const Re=(0,v.E)({getState:X});let ve,xe;fe&&(ve=fe.startSpan("message_send_attempt:send"),xe=fe.startSpan("message_send_attempt:placeholder",{parentSpanId:ve==null?void 0:ve.getId()}));const He=Re.createMetricsTrace({label:"cse-message-send"});He.count({name:Me,label:"pending"}),Re.reportTrace(He);const je=(0,E.A)(1),{channel:Ke,reply_broadcast:ht,thread_ts:dt,client_msg_id:Ve,xArgs:Je}=We,Ge=(0,p.Ay)({getState:X}),Le=(0,o.ZT)(X())||"",Mt=dt?{_hidden_reply:!0,_was_reply_broadcast:ht}:null,Dt=Ve||(0,I.A)();be&&(0,O.qe)(X(),{notificationTracePassthroughData:be,clientMsgId:Dt});const pt=(0,G._Z)(X(),"fe_message_rendering_perf_m1")==="on",Qt=We.blocks,Nt={...We,...Mt,user:(0,r.WR)(X()),showResend:!1,showCancel:!1,is_pending:!0,client_msg_id:Dt,blocksProcessed:(0,Ee.R)({blocks:Qt,experimentFeMessageRenderingPerfM1GroupOn:pt})};Ge.action("MESSAGE",`Sent a message to ${Ke} via HTTP, clientMsgId: ${Dt}`);const bt={...We,...Je,include_channel_perm_error:!0,client_msg_id:Dt,skip_dlp_user_warning:Be};je&&q(Le,Dt,window.setTimeout(()=>{if((0,ee.I)(X(),Nt.client_msg_id)){const Tt=X();(0,Q.UJ)(Tt)&&(0,A.Cy)({state:Tt}).count("msg_send_placeholder_not_resolved_connected_60s")}},1e3*60));const Yt=R((0,o.ZT)(X())||"").enqueue(bt,{trace:fe,parentSpanId:ve==null?void 0:ve.getId()});W(Ie,Nt),Ie((0,Z.T)({clientMsgId:Nt.client_msg_id,channelId:Nt.channel,ts:Nt.ts})),dt||Ie((0,d.A)({ts:null})),xe==null||xe.close();const fn=(0,G._Z)(X(),"ecompl_custom_dlp_text")==="on";return Yt.tap(()=>{const Tt=X();(!(0,Q.UJ)(Tt)||(0,_.N)(Tt,Ke)||(0,_.N)(Tt,(0,r.WR)(Tt)))&&(Ie((0,C.A)({channelId:Ke,threadTs:dt})),ht&&Ie((0,C.A)({channelId:Ke}))),He.count({name:Me,label:"success"}),Re.reportTrace(He),fe&&(fe.addTags({success:!0}),ve==null||ve.close(),Re.reportTrace(fe))}).catch(Tt=>{const sn=(0,t.A)(Tt,"data.error"),mn=fn?(0,t.A)(Tt,"data.dlp_custom_message"):void 0;He.count({name:Me,label:"failure"}).setTag("error",sn||(Tt==null?void 0:Tt.message)),Re.reportTrace(He);const wt=sn===ue,On=sn===te,Zt=sn===ae,Mn=sn===H,Wn=Object.values(N).includes(sn)?sn:void 0,xn=sn===U;if(!sn&&!(0,ee.I)(X(),Nt.client_msg_id)){Ge.info("MESSAGE","Ignoring non-backend chat.postMessage error since the message already came in over socket");return}const gn=K[sn];let An=!0;const vt=!0,xt=[Ae,ce,de,oe,$,re];(0,n.A)(xt,sn)&&(y(Ke,gn,"send-message/sendMessage.catch"),An=!1),wt&&(An=!1),(On||xn)&&(An=!1),Mn&&(An=!1,Ie((0,_e.A)())),Wn&&(An=!1);const Vt="Message failed to send",Se=(0,s.A)(Tt,["status","retryAfter","attempts","data.ok","data.error","args._x_reason","args.channel","args.ts","args.thread_ts","args.reply_broadcast"]);Se.client_msg_id=Dt,Se.channel=Ke,Se.thread_ts=dt;const St=Tt&&Tt.status===429?"message_send_ratelimit":"message_send_fail";Ge.error(Se instanceof Error?Se:new Error(Vt),`${Vt}: ${sn} | ${JSON.stringify(Se)}`,{subtype:St});const Ce=sn?(0,a.A)(Se,["response"]):Tt;Ge.error("MESSAGE",Vt,sn,Ce);const Ne={...Nt,showResend:An,showCancel:vt,isEKMError:wt,isBlockFilesError:On,isDLPUserWarningError:Zt,canvasSharingError:Wn,isBlockCanvasWithFilesShareError:xn,...fn?{dlpCustomMessage:mn}:{}};(0,ee.I)(X(),Nt.client_msg_id)?Ie((0,i.Kc)([Ne])):W(Ie,Ne),!An&&je&&ie(Le,Nt.client_msg_id),fe&&(An?(fe.addTags({success:!1}),ve==null||ve.close(),Re.reportTrace(fe)):Re.clearTrace(fe))})});ke.meta={name:"createThunk",key:"createThunksendMessage",description:"Send a message"};const Pe=ke},911764:(j,T,e)=>{"use strict";e.d(T,{A:()=>h});var t=e(296540),n=e(245915),s=e(674217),a=e(449552),c=e(881805),r=e(388288),o=e(37124),u=e(32032),m=e(452551),i=e(307520);function d(){return d=Object.assign||function(p){for(var A=1;A<arguments.length;A++){var v=arguments[A];for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&(p[E]=v[E])}return p},d.apply(this,arguments)}l(d,"_extends");const h=l((p,A)=>(0,s.Ay)(`XWS open ${p.displayName} modal`,(v,E,f,g)=>{const{modalName:y,allowMultiple:I=!0,isStackable:O=!1,renderInChildWindow:M=!1}=A||{};let C,P=M;const L=g(m.S);if((L==null?void 0:L.windowRef.deref())!==i.J&&(L!=null&&L.windowId)&&(P=!0,C=L.windowId),!I&&y&&(0,r.wc)(E(),C).find(w=>{let{name:Y}=w;return Y===y}))return;const x=(0,c.ZT)(E()),F=(0,u.vB)(E()),V=(0,a.getStoreInstanceByTeamId)(x);let B,D=t.createElement(p,d({},f,{closeModal:()=>B==null?void 0:B()}));P||(D=t.createElement(n.Kq,{store:V},D));let S;return P?S=v((0,o.q)({element:D,name:y||void 0,isStackable:O})):S=(0,a.dispatchForTeamId)(F,(0,o.q)({element:D,name:y||void 0,isStackable:O})),B=S.close,S}),"createXWSModalThunk")},648290:(j,T,e)=>{"use strict";e.d(T,{z:()=>B,D:()=>D});var t=e(46996),n=e(674217),s=e(17604),a=e(519213),c=e(244283),r=e(848411),o=e(462837),u=e(298228),m=e(129055),i=e(579560),d=e(140189),_=e(779756),h=e(115333),p=e(752123);const A=l((S,R,w)=>S&&Object.values(R).includes(S)?S:R[w],"validateMessageSearchSort"),v=l((S,R,w)=>S&&Object.values(R).includes(S)?S:R[w],"validateFileSearchSort"),E=l((S,R,w)=>S&&Object.values(R).includes(S)?S:R[w],"validateChannelSearchSort"),f=l((S,R,w)=>S&&Object.values(R).includes(S)?S:R[w],"validatePeopleSearchSort"),g=l((S,R,w)=>S&&Object.values(R).includes(S)?S:R[w],"validateResultCountToggle");var y=e(389210),I=e(493284),O=e(413427),M=e(786071),C=e(980258),P=e(276721),L=e(57350),x=e(881805),F=e(518320),V=e(776016);const B=(0,n.Ay)("Runs search from given encoded search state string",(S,R,w)=>{let{encodedSearchString:Y}=w;if(!Y)return;const Q=R(),Z=(0,C.$)(R()),ee=(0,L.GJ)(Q),_e=p.Jx.OMNISWITCHER;if(ee&&Y===Z)return;const Ee=(0,s.Wj)(Y),{displayQuery:G,requestQuery:Ae,tab:ce,page:de,messageAndFileSearchExcludeBots:oe,messageAndFileSearchOnlyMyChannels:$,activeEnterpriseTeamIdFilter:re,channelSearchFilterType:ue,channelSearchOrgFilters:te,channelSearchHideMemberChannels:ae,peopleSearchFilterType:H,peopleSearchOrgFilters:U,peopleSearchHideDeactivatedUsers:N,messageSearchSort:K,fileSearchSort:W,channelSearchSort:J,peopleSearchSort:q,resultCountToggle:ie,peopleSearchLocationFilters:Te,peopleSearchDivisionFilters:Me,peopleSearchDepartmentFilters:ke,peopleSearchTitleFilters:Pe,peopleSearchCelebrationFilters:Ie}=Ee;S((0,h.N9)({query:G,inputId:_e}));const X=(0,O.vA)(Q,Ae);S((0,d.c3)({queryFilter:X}));const ne=A(K,p.kK,"relevantMessages"),fe=v(W,p.VU,"relevant"),be=E(J,p.aJ,"relevant"),Be=f(q,p.iO,"relevant"),We=g(ie,p.LV,20);ne!==(0,r.WJ)(Q)&&S((0,o.g)({sort:ne})),fe!==(0,u.r)(Q,p.c5.FILES)&&S((0,m.f)({sort:fe})),be!==(0,r.Kn)(Q)&&S((0,c.Ak)({sort:be})),Be!==(0,r.y6)(Q)&&S((0,c.Yn)({sort:Be})),We!==(0,r.jn)(Q)&&S((0,c.BS)({count:We})),S((0,a.O6)({tab:ce})),S((0,a.BL)({moduleType:ce,page:de}));const{displayQuery:Re,requestQuery:ve,messageAndFileSearchExcludeBots:xe,messageAndFileSearchOnlyMyChannels:He,activeEnterpriseTeamIdFilter:je,channelSearchFilterType:Ke,channelSearchOrgFilters:ht,channelSearchHideMemberChannels:dt,peopleSearchFilterType:Ve,peopleSearchOrgFilters:Je,peopleSearchHideDeactivatedUsers:Ge,messageSearchSort:Le,fileSearchSort:Mt,channelSearchSort:Dt,peopleSearchSort:pt,resultCountToggle:Qt,peopleSearchDepartmentFilters:Nt,peopleSearchDivisionFilters:bt,peopleSearchLocationFilters:Yt,peopleSearchTitleFilters:fn,peopleSearchCelebrationFilters:Tt}=(0,s.Wj)(Z||""),sn=(0,_._G)(Q,{module:ce});if(ce===p.gs.CHANNELS&&(ue&&S((0,a.Ev)({type:ue})),te&&S((0,a.H)({orgFilters:te}))),ce===p.gs.PEOPLE&&(H&&S((0,a.kC)({type:H})),U&&S((0,a.XT)({orgFilters:U})),Te&&S((0,a.Ic)({locations:Te})),Pe&&S((0,a.t_)({titles:Pe})),ke&&S((0,a.Vm)({departments:ke})),Me&&S((0,a.qV)({divisions:Me})),Ie&&S((0,a.H4)({celebrations:Ie}))),oe!==xe&&S((0,c.V1)({value:!!oe})),$!==He&&S((0,c.le)({value:!!$})),re!==je&&re&&S((0,a.y0)({selectedEnterpriseTeamId:re})),H===p.Dx.guests){const Mn=(0,x.s_)(Q);Mn&&S((0,a.y0)({selectedEnterpriseTeamId:Mn}))}ae!==dt&&S((0,c.kZ)({value:!!ae})),N!==Ge&&S((0,c.sA)({value:!!N})),ne!==Le&&S((0,o.g)({sort:ne})),fe!==Mt&&S((0,m.f)({sort:fe})),be!==Dt&&S((0,c.Ak)({sort:be})),Be!==pt&&S((0,c.Yn)({sort:Be})),We!==Qt&&S((0,c.BS)({count:We}));const mn=oe!==xe||$!==He||re!==je||ue!==Ke||!(0,t.A)(te,ht)||ae!==dt||H!==Ve||!(0,t.A)(U,Je)||N!==Ge||!(0,t.A)(Te,Yt)||!(0,t.A)(Pe,fn)||!(0,t.A)(Me,bt)||!(0,t.A)(ke,Nt)||!(0,t.A)(Ie,Tt);let wt=null;Ae!==ve||G!==Re?wt=S((0,i.A)({query:Ae,page:de,encodedSearchString:Y})):sn!=null&&sn.items&&(sn!=null&&sn.items[de])?mn?(wt=(0,y.d1)(S,R,"search-filters-history-stack"),S((0,M.b)({value:Y}))):ne!==Le?(wt=S((0,I.u3)({module:"messages",reason:"search-message-sort-changed-history-stack",context:F.Oj.MessagesTab})),S((0,M.b)({value:Y}))):fe!==Mt?(wt=S((0,I.u3)({module:"files",reason:"search-files-sort-changed-history-stack",context:F.Oj.FilesTab})),S((0,M.b)({value:Y}))):be!==Dt?(wt=S((0,I.u3)({module:"channels",reason:"search-channels-sort-changed-history-stack",context:F.Oj.ChannelsTab})),S((0,M.b)({value:Y}))):Be!==pt?(wt=S((0,I.u3)({module:"people",reason:"search-people-sort-changed-history-stack",context:F.Oj.PeopleTab})),S((0,M.b)({value:Y}))):We!==Qt?((0,y.d1)(S,R,"result-count-toggle-history-stack"),S((0,M.b)({value:Y}))):S((0,M.b)({value:Y})):wt=S((0,i.A)({query:Ae,module:ce,page:de,encodedSearchString:Y}));const Zt=P.dn.fromString(Q,Ae).toTextyString();wt?wt.then(()=>{G!==Zt&&S((0,h.N9)({query:Zt,inputId:_e}))}):G!==Zt&&S((0,h.N9)({query:Zt,inputId:_e}))});B.meta={name:"createThunk",key:"createThunkrunSearchFromEncodedSearchState",description:"Runs search from given encoded search state string"};const D=(0,n.Ay)("Runs search from current URL param",(S,R)=>{const w=R(),Y=(0,V.MC)(w);Y.entityId===p.d$&&S(B({encodedSearchString:Y.searchQuery}))});D.meta={name:"createThunk",key:"createThunkrunSearchFromURL",description:"Runs search from current URL param"}},27406:(j,T,e)=>{"use strict";e.d(T,{L:()=>u});var t=e(674217),n=e(786071),s=e(848463),a=e(17604),c=e(529734),r=e(619674),o=e(883518);const u=(0,t.Ay)("Adds a search history item and updates the url with its id",(m,i)=>{const d=i(),_=(0,a._t)(d),h=(0,c.cc)(d);_&&(m((0,n.b)({value:_})),m(h?(0,r.o)((0,o.oV)(_)):(0,s.A)({id:"Psearch",routeParams:{searchQuery:_}})))});u.meta={name:"createThunk",key:"createThunkrunSearchFromReduxState",description:"Adds a search history item and updates the url with its id"}},389210:(j,T,e)=>{"use strict";e.d(T,{AW:()=>D,CK:()=>_e,F5:()=>P,HE:()=>ee,HX:()=>Z,Hj:()=>B,J0:()=>G,Jv:()=>y,O7:()=>Q,OH:()=>R,T9:()=>C,VX:()=>I,V_:()=>S,YV:()=>re,_I:()=>M,ap:()=>de,bQ:()=>x,cI:()=>oe,cf:()=>w,d1:()=>g,g:()=>L,iX:()=>V,m0:()=>te,s7:()=>ce,sf:()=>F,v6:()=>Ae,w2:()=>O,wr:()=>$,yH:()=>Ee,yU:()=>Y});var t=e(674217),n=e(493284),s=e(140189),a=e(779756),c=e(466779),r=e(752123),o=e(462837),u=e(129055),m=e(430954),i=e(567740),d=e(519213),_=e(244283),h=e(817223),p=e(881805),A=e(27406),v=e(919273),E=e(683525),f=e(518320);function g(H,U,N){let K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const W=(0,a.iq)(U()),J=W?W.query:"";return H((0,s.p4)({windowId:v.I})),K&&H((0,c.z)()),H((0,n.Ad)({query:J,reason:N,fetchSuggestions:(0,h.A)()}))}l(g,"refetchAllSearchResults");const y=(0,t.Ay)("Message/file search: exclude bots checkbox changed",(H,U,N)=>{let{value:K}=N;H((0,_.V1)({value:K})),g(H,U,"search-exclude-bots-changed"),H((0,A.L)())});y.meta={name:"createThunk",key:"createThunkmessageAndFileSearchExcludeBotsChanged",description:"Message/file search: exclude bots checkbox changed"};const I=(0,t.Ay)("Message/file search: only my channels checkbox changed",(H,U,N)=>{let{value:K}=N;H((0,_.le)({value:K})),K&&H((0,_.kZ)({value:!1})),g(H,U,"search-only-my-channels-changed"),H((0,A.L)())});I.meta={name:"createThunk",key:"createThunksearchOnlyMyChannelsChanged",description:"Message/file search: only my channels checkbox changed"};const O=(0,t.Ay)("Channel search: hide member channels flag changed",(H,U,N)=>{let{value:K,refetch:W=!0}=N;H((0,_.kZ)({value:K})),K&&H((0,_.le)({value:!1})),W&&g(H,U,"search-hide-member-channels-changed"),H((0,A.L)())});O.meta={name:"createThunk",key:"createThunkchannelSearchHideMemberChannelsChanged",description:"Channel search: hide member channels flag changed"};const M=(0,t.Ay)("Message search: sort changed",(H,U,N)=>{let{sort:K,shouldUpdateUrl:W=!0,shouldClogSearchSort:J=!0}=N;J&&H((0,m.Yj)({sortValue:K,entity:"messages"})),H((0,o.g)({sort:K})),H((0,n.u3)({module:"messages",reason:"search-messages-sort-changed",context:f.Oj.MessagesTab})),W&&H((0,A.L)())});M.meta={name:"createThunk",key:"createThunkmessageSearchSortChanged",description:"Message search: sort changed"};const C=(0,t.Ay)("File search: sort changed",(H,U,N)=>{let{sort:K,shouldUpdateUrl:W=!0,shouldClogSearchSort:J=!0}=N;J&&H((0,m.Yj)({sortValue:K,entity:"files"})),H((0,u.f)({sort:K})),H((0,n.u3)({module:"files",reason:"search-files-sort-changed",context:f.Oj.FilesTab})),W&&H((0,A.L)())});C.meta={name:"createThunk",key:"createThunkfileSearchSortChanged",description:"File search: sort changed"};const P=(0,t.Ay)("Canvas search: sort changed",(H,U,N)=>{let{sort:K,shouldUpdateUrl:W=!0,shouldClogSearchSort:J=!0}=N;J&&H((0,m.Yj)({sortValue:K,entity:"files"})),H((0,u.f)({sort:K})),H((0,n.u3)({module:"canvases",reason:"search-canvases-sort-changed",context:f.Oj.CanvasesTab})),W&&H((0,A.L)())});P.meta={name:"createThunk",key:"createThunkcanvasSearchSortChanged",description:"Canvas search: sort changed"};const L=(0,t.Ay)("Lists search: sort changed",(H,U,N)=>{let{sort:K,shouldUpdateUrl:W=!0,shouldClogSearchSort:J=!0}=N;J&&H((0,m.Yj)({sortValue:K,entity:"lists"})),H((0,u.f)({sort:K})),H((0,n.u3)({module:"lists",reason:"search-lists-sort-changed",context:f.Oj.ListsTab})),W&&H((0,A.L)())});L.meta={name:"createThunk",key:"createThunklistsSearchSortChanged",description:"Lists search: sort changed"};const x=(0,t.Ay)("List records search: sort changed",(H,U,N)=>{let{sort:K,shouldUpdateUrl:W=!0,shouldClogSearchSort:J=!0}=N;J&&H((0,m.Yj)({sortValue:K,entity:"listRecords"})),H((0,u.f)({sort:K})),H((0,n.u3)({module:"listRecords",reason:"search-list-records-sort-changed",context:f.Oj.ListsTab})),W&&H((0,A.L)())});x.meta={name:"createThunk",key:"createThunklistRecordsSearchSortChanged",description:"List records search: sort changed"};const F=(0,t.Ay)("Channel search: sort changed",(H,U,N)=>{let{sort:K,shouldUpdateUrl:W=!0,shouldClogSearchSort:J=!0}=N;J&&H((0,m.Yj)({sortValue:K,entity:"channels"})),H((0,_.Ak)({sort:K})),H((0,n.u3)({module:"channels",reason:"search-channels-sort-changed",context:f.Oj.ChannelsTab})),W&&H((0,A.L)())});F.meta={name:"createThunk",key:"createThunkchannelSearchSortChanged",description:"Channel search: sort changed"};const V=(0,t.Ay)("People search: sort changed",(H,U,N)=>{let{sort:K,shouldUpdateUrl:W=!0,shouldClogSearchSort:J=!0}=N;J&&H((0,m.Yj)({sortValue:K,entity:"people"})),H((0,_.Yn)({sort:K})),H((0,n.u3)({module:"people",reason:"search-people-sort-changed",context:f.Oj.PeopleTab})),W&&H((0,A.L)())});V.meta={name:"createThunk",key:"createThunkpeopleSearchSortChanged",description:"People search: sort changed"};const B=(0,t.Ay)("result count toggle changed",(H,U,N)=>{let{count:K}=N;H((0,_.BS)({count:K})),g(H,U,"result-count-toggle-changed",!1),H((0,d.Cr)({windowId:v.I})),H((0,d.Di)({windowId:v.I})),H((0,A.L)())});B.meta={name:"createThunk",key:"createThunkresultCountToggleChanged",description:"result count toggle changed"};const D=(0,t.Ay)("Channel search: filter type changed",(H,U,N)=>{let{type:K}=N;H((0,d.Ev)({type:K})),g(H,U,"search-channels-filter-type-changed"),H((0,A.L)())});D.meta={name:"createThunk",key:"createThunkchannelSearchFilterTypeChanged",description:"Channel search: filter type changed"};const S=(0,t.Ay)("All of search: search by selected enterprise team id",(H,U,N)=>{let{value:K,refetch:W=!0}=N;H((0,d.y0)({selectedEnterpriseTeamId:K})),W&&g(H,U,"search-only-by-enterprise-team-id"),H((0,A.L)())});S.meta={name:"createThunk",key:"createThunksearchOnlyByEnterpriseTeamId",description:"All of search: search by selected enterprise team id"};const R=(0,t.Ay)("Channel search: bulk update an external org filter",(H,U,N)=>{let{teamIds:K}=N;const W=U(),J=(0,i.tL)(W);H((0,d.RR)({teamIds:Array.from(new Set([...J,...K]))})),H((0,d.H)({orgFilters:K})),g(H,U,"search-channels-org-filter-bulk-changed"),H((0,A.L)())});R.meta={name:"createThunk",key:"createThunksetChannelSearchOrgFilter",description:"Channel search: bulk update an external org filter"};const w=(0,t.Ay)("Channel search: update an external org filter",(H,U,N)=>{let{teamId:K,value:W}=N;const J=U();let q=[...(0,i.lB)(J)];const ie=(0,i.tL)(J);W?q.push(K):q=q.filter(Te=>Te!==K),H((0,d.RR)({teamIds:Array.from(new Set([...ie,K]))})),H((0,d.H)({orgFilters:q})),g(H,U,"search-channels-org-filter-changed"),H((0,A.L)())});w.meta={name:"createThunk",key:"createThunktoggleChannelSearchOrgFilter",description:"Channel search: update an external org filter"};const Y=(0,t.Ay)("People search: bulk update an external org filter",(H,U,N)=>{let{teamIds:K}=N;const W=U(),J=(0,i.tw)(W);H((0,d.PZ)({teamIds:Array.from(new Set([...J,...K]))})),H((0,d.XT)({orgFilters:K})),g(H,U,"search-people-org-filter-changed"),H((0,A.L)())});Y.meta={name:"createThunk",key:"createThunksetPeopleSearchOrgFilter",description:"People search: bulk update an external org filter"};const Q=(0,t.Ay)("People search: update an external org filter",(H,U,N)=>{let{teamId:K,value:W}=N;const J=U();let q=[...(0,i.fL)(J)];const ie=(0,i.tw)(J);W?q.push(K):q=q.filter(Te=>Te!==K),H((0,d.PZ)({teamIds:Array.from(new Set([...ie,K]))})),H((0,d.XT)({orgFilters:q})),g(H,U,"search-people-org-filter-changed"),H((0,A.L)())});Q.meta={name:"createThunk",key:"createThunktogglePeopleSearchOrgFilter",description:"People search: update an external org filter"};const Z=(0,t.Ay)("People search: bulk update location filter",(H,U,N)=>{let{values:K}=N;H((0,d.Ic)({locations:K})),g(H,U,"search-people-location-filter-changed"),H((0,A.L)())});Z.meta={name:"createThunk",key:"createThunksetPeopleSearchLocationFilter",description:"People search: bulk update location filter"};const ee=(0,t.Ay)("People search: update location filter",(H,U,N)=>{let{location:K,value:W}=N;const J=U();let q=[...(0,i.aJ)(J)];W?q.push(K):q=q.filter(ie=>ie!==K),H((0,d.Ic)({locations:q})),g(H,U,"search-people-location-filter-changed"),H((0,A.L)())});ee.meta={name:"createThunk",key:"createThunktogglePeopleSearchLocationFilter",description:"People search: update location filter"};const _e=(0,t.Ay)("People search: bulk update title filter",(H,U,N)=>{let{values:K}=N;H((0,d.t_)({titles:K})),g(H,U,"search-people-title-filter-changed"),H((0,A.L)())});_e.meta={name:"createThunk",key:"createThunksetPeopleSearchTitleFilter",description:"People search: bulk update title filter"};const Ee=(0,t.Ay)("People search: update title filter",(H,U,N)=>{let{title:K,value:W}=N;const J=U();let q=[...(0,i.LX)(J)];W?q.push(K):q=q.filter(ie=>ie!==K),H((0,d.t_)({titles:q})),g(H,U,"search-people-title-filter-changed"),H((0,A.L)())});Ee.meta={name:"createThunk",key:"createThunktogglePeopleSearchTitleFilter",description:"People search: update title filter"};const G=(0,t.Ay)("People search: bulk update division filter",(H,U,N)=>{let{values:K}=N;H((0,d.qV)({divisions:K})),g(H,U,"search-people-division-filter-changed"),H((0,A.L)())});G.meta={name:"createThunk",key:"createThunksetPeopleSearchDivisionFilter",description:"People search: bulk update division filter"};const Ae=(0,t.Ay)("People search: update division filter",(H,U,N)=>{let{division:K,value:W}=N;const J=U();let q=[...(0,i.YM)(J)];W?q.push(K):q=q.filter(ie=>ie!==K),H((0,d.qV)({divisions:q})),g(H,U,"search-people-division-filter-changed"),H((0,A.L)())});Ae.meta={name:"createThunk",key:"createThunktogglePeopleSearchDivisionFilter",description:"People search: update division filter"};const ce=(0,t.Ay)("People search: bulk update department filter",(H,U,N)=>{let{values:K}=N;H((0,d.Vm)({departments:K})),g(H,U,"search-people-department-filter-changed"),H((0,A.L)())});ce.meta={name:"createThunk",key:"createThunksetPeopleSearchDepartmentFilter",description:"People search: bulk update department filter"};const de=(0,t.Ay)("People search: update department filter",(H,U,N)=>{let{department:K,value:W}=N;const J=U();let q=[...(0,i.DL)(J)];W?q.push(K):q=q.filter(ie=>ie!==K),H((0,d.Vm)({departments:q})),g(H,U,"search-people-department-filter-changed"),H((0,A.L)())});de.meta={name:"createThunk",key:"createThunktogglePeopleSearchDepartmentFilter",description:"People search: update department filter"};const oe=(0,t.Ay)("People search: bulk update celebration filter",(H,U,N)=>{let{values:K}=N;H((0,d.H4)({celebrations:K})),g(H,U,"search-people-celebration-filter-changed"),H((0,A.L)())});oe.meta={name:"createThunk",key:"createThunksetPeopleSearchCelebrationFilter",description:"People search: bulk update celebration filter"};const $=(0,t.Ay)("People search: update celebration filter",(H,U,N)=>{let{celebration:K,value:W}=N;const J=U();let q=[...(0,i.Lq)(J)];W?q.push(K):q=q.filter(ie=>ie!==K),H((0,d.H4)({celebrations:q})),g(H,U,"search-people-celebration-filter-changed"),H((0,A.L)())});$.meta={name:"createThunk",key:"createThunktogglePeopleSearchCelebrationFilter",description:"People search: update celebration filter"};const re=(0,t.Ay)("People search: filter type changed",(H,U,N)=>{let{type:K,refetch:W=!0}=N;const J=U(),q=(0,p.s_)(J),ie=(0,i.Xh)(J);H((0,d.kC)({type:K})),K===r.Dx.guests&&q?H((0,d.y0)({selectedEnterpriseTeamId:q})):K===E.Qg.ORG_OWNERS||K===E.Qg.ORG_ADMINS?H((0,d.y0)({selectedEnterpriseTeamId:""})):(K===E.Qg.WORKSPACE_OWNERS||K===E.Qg.WORKSPACE_ADMINS)&&!ie&&q&&H((0,d.y0)({selectedEnterpriseTeamId:q})),W&&g(H,U,"search-people-filter-type-changed"),H((0,A.L)())});re.meta={name:"createThunk",key:"createThunkpeopleSearchFilterTypeChanged",description:"People search: filter type changed"};const ue=(0,t.Ay)("People search: custom filter changed",(H,U,N)=>{let{id:K,value:W,checked:J}=N;H((0,d.FI)({id:K,value:W,checked:J})),g(H,U,"search-people-custom-filter-changed")});ue.meta={name:"createThunk",key:"createThunkpeopleSearchCustomFilterChanged",description:"People search: custom filter changed"};const te=(0,t.Ay)("People search: hide deactivated users pref changed",(H,U,N)=>{let{value:K,refetch:W=!0}=N;H((0,_.sA)({value:K})),W&&g(H,U,"search-people-hide-deactivated-users-changed"),H((0,A.L)())});te.meta={name:"createThunk",key:"createThunkpeopleSearchHideDeactivatedUsersChanged",description:"People search: hide deactivated users pref changed"};const ae=(0,t.Ay)("People search: timezone filter changed",(H,U,N)=>{let{label:K,value:W,checked:J}=N;H((0,d.pU)({label:K,value:W,checked:J})),g(H,U,"search-people-timezone-filter-changed")});ae.meta={name:"createThunk",key:"createThunkpeopleSearchTimezoneFilterChanged",description:"People search: timezone filter changed"}},244283:(j,T,e)=>{"use strict";e.d(T,{Ak:()=>c,BS:()=>o,V1:()=>m,Yn:()=>r,kZ:()=>a,le:()=>i,sA:()=>u});var t=e(674217),n=e(258768),s=e(752123);const a=(0,t.Ay)("Channel search: set hide my channels",(d,_,h)=>{let{value:p}=h;d((0,n.AZ)({pref:s.gT,value:p}))});a.meta={name:"createThunk",key:"createThunksetChannelSearchHideMemberChannels",description:"Channel search: set hide my channels"};const c=(0,t.Ay)("Channel Search: set sort method",(d,_,h)=>{let{sort:p}=h;d((0,n.AZ)({pref:s.UB,value:p}))});c.meta={name:"createThunk",key:"createThunksetChannelSearchSort",description:"Channel Search: set sort method"};const r=(0,t.Ay)("People Search: set sort method",(d,_,h)=>{let{sort:p}=h;d((0,n.AZ)({pref:s.gZ,value:p}))});r.meta={name:"createThunk",key:"createThunksetPeopleSearchSort",description:"People Search: set sort method"};const o=(0,t.Ay)("Setting result Count Toggle",(d,_,h)=>{let{count:p}=h;d((0,n.AZ)({pref:"result_count_toggle",value:p}))});o.meta={name:"createThunk",key:"createThunksetResultCountToggle",description:"Setting result Count Toggle"};const u=(0,t.Ay)("People search: set hiding deactivated users",(d,_,h)=>{let{value:p}=h;d((0,n.AZ)({pref:s.Sj,value:p}))});u.meta={name:"createThunk",key:"createThunksetPeopleSearchHideDeactivatedUsers",description:"People search: set hiding deactivated users"};const m=(0,t.Ay)("Message/File search: set exclude bots",(d,_,h)=>{let{value:p}=h;d((0,n.AZ)({pref:s.jv,value:p}))});m.meta={name:"createThunk",key:"createThunksetMessageAndFileSearchExcludeBots",description:"Message/File search: set exclude bots"};const i=(0,t.Ay)("Message/File search: search only my channels",(d,_,h)=>{let{value:p}=h;d((0,n.AZ)({pref:s.wA,value:p}))});i.meta={name:"createThunk",key:"createThunksetSearchOnlyMyChannelsChanged",description:"Message/File search: search only my channels"}},462837:(j,T,e)=>{"use strict";e.d(T,{g:()=>r});var t=e(674217),n=e(258768),s=e(682520);const a="IMPROVED_SEARCH",c="search_sort",r=(0,t.Ay)("Message Search: set sort method",(o,u,m)=>{let{sort:i}=m;(0,s.Ay)({getState:u}).info(a,`Set message sort method. messageSort: ${i}`),o((0,n.AZ)({pref:c,value:i}))});r.meta={name:"createThunk",key:"createThunksetMessageSort",description:"Message Search: set sort method"}},37240:(j,T,e)=>{"use strict";e.d(T,{A:()=>o});var t=e(269592),n=e(721395),s=e(263267),a=e(333672),c=e(974078);const r=(0,a.Ay)("Logs helpful messages to the console if you do something incorrect",(u,m,i)=>{if((0,t.A)(i)||(0,n.A)(i))return c.Qs&&(0,s.z3)("It looks like you dispatched null or undefined, instead of an action or a thunk. Check the stack trace of this error to see where this mistake is occurring."),null;if(i.isThunkCreator||i.isActionCreator){if(c.Qs){const d=i.isThunkCreator?"thunk":"action",_=i.meta?i.meta.name:`${d}Creator`;(0,s.z3)(`
	It looks like you dispatched a ${d} creator instead of the ${d} itself!
	This is a common mistake, and the solution is to call dispatch(${_}(payload)) instead of just dispatch(${_}), note the extra parens at the end.
				`)}return null}return(0,c.ZR)(i),m(i)});r.meta={name:"createMiddleware",key:"createMiddlewarehelpfulMessagingMiddleware",description:"Logs helpful messages to the console if you do something incorrect"};const o=r},726428:(j,T,e)=>{"use strict";e.d(T,{A:()=>m});var t=e(389610),n=e(682520),s=e(756120),a=e(333672),c=e(211700);let r=[];const o=(0,n.Wo)(),u=(0,a.Ay)("Allows devs to get console logging or trigger breakpoints when state they care about changes",(_,h,p)=>{const A=[],v=_.getState();r.forEach(g=>{A.push(g(v,p))});const E=h(p),f=_.getState();return r.forEach((g,y)=>{const I=g(f,p);if(A[y]!==I){const O=["Redux Watcher:",`Value has changed! 
Action: `,p,`
Before: `,A[y],`
After:  `,I];if(A[y]!==void 0&&I!==void 0){const M=A[y]===void 0?{}:A[y],C=I===void 0?{}:I;O.push(`
Diff: `,Object.keys({...M,...C}).filter(P=>M[P]!==C[P]).map(P=>({key:P,before:M[P],after:C[P]})))}if(o.warn(...O),(0,s.Cu)()||(0,s.b3)())debugger}}),E});u.meta={name:"createMiddleware",key:"createMiddlewarereduxWatcherMiddleware",description:"Allows devs to get console logging or trigger breakpoints when state they care about changes"};const m=u;function i(_){if(!(0,t.A)(_)){o.error("watcherFn passed in to addWatcher must be a function");return}r.push(_)}l(i,"addWatcher");function d(){r=[]}l(d,"clearAllWatchers"),(0,c.ul)("reduxWatcher",{addWatcher:i,clearAllWatchers:d})},28366:(j,T,e)=>{"use strict";e.d(T,{N:()=>p,A:()=>h});var t=e(333672),n=e(206246),s=e(915773);const a=(0,s.Ay)(A=>{var v;return A==null||(v=A.sideEffects)===null||v===void 0?void 0:v.sideEffectsMap});a.meta={name:"createSelector",key:"createSelectorgetSideEffectsMap",description:A=>{var v;return A==null||(v=A.sideEffects)===null||v===void 0?void 0:v.sideEffectsMap}};const c=(0,s.Ay)(A=>{var v;return A==null||(v=A.sideEffects)===null||v===void 0?void 0:v.orgSharedSideEffectsMap});c.meta={name:"createSelector",key:"createSelectorgetOrgSharedSideEffectsMap",description:A=>{var v;return A==null||(v=A.sideEffects)===null||v===void 0?void 0:v.orgSharedSideEffectsMap}};const r=(0,s.Ay)(A=>{var v;return A==null||(v=A.clientSideEffects)===null||v===void 0?void 0:v.clientSideEffectsMap});r.meta={name:"createSelector",key:"createSelectorgetClientSideEffectsMap",description:A=>{var v;return A==null||(v=A.clientSideEffects)===null||v===void 0?void 0:v.clientSideEffectsMap}};var o=e(682520),u=e(180491),m=e(929782);function i(){return(0,t.Ay)("Handle client side effects",(A,v,E)=>{var f;if(!((f=E.__test)===null||f===void 0)&&f.disableSideEffects)return v(E);const g=A.getState(),y=r(g);return _({store:A,action:E,sideEffectsMap:y}),v(E)})}l(i,"createClientSideEffectsMiddleware");function d(){return(0,t.Ay)("Handle side effects",(A,v,E)=>{var f;if(!((f=E.__test)===null||f===void 0)&&f.disableSideEffects)return v(E);const g=A.getState(),y=a(g);if(_({store:A,action:E,sideEffectsMap:y}),!E[m.y4]){const I=c(g);_({store:A,sideEffectsMap:I,action:E})}return v(E)})}l(d,"createSideEffectsMiddleware");function _(A){let{store:v,action:E,sideEffectsMap:f}=A;const g=f&&f[E.type],y=l(I=>((0,n.S$)(E,I),v.dispatch(I)),"wrappedDispatch");g!=null&&g.length&&u.S.resolve().then(()=>{g.forEach(I=>{if(!I)return;const{thunk:O}=I;try{y(O(E))}catch(M){(0,o.Ay)({getState:v.getState}).error("SIDE-EFFECTS",`Error in side effect for '${E.type}'`,M,{subtype:"side_effect_error"})}})})}l(_,"runSideEffects");const h=d(),p=i()},661876:(j,T,e)=>{"use strict";e.d(T,{A:()=>m});var t=e(895081),n=e(756120),s=e(973553),a=e(701295);const c=l(i=>{switch(i.type){case a.f0.getType():return{...i,payload:"Channel bulk add payload is too big to output to redux devtools"};default:return i}},"actionSanitizer"),r=(0,s.A)()?void 0:()=>({apologies:"Serializing our large state kept crashing redux devtools. I hope to bring it back someday, but for now you can see the state by using `TS.redux.getState()` in the console"}),u={autoPause:!0,actionSanitizer:c,stateSanitizer:r,maxAge:1e3,features:{pause:!0}};function m(i){let{teamOrEnterpriseId:d,appName:_="",customEnhancers:h,middlewares:p,disableDevTools:A}=i;return(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&!A&&((0,n.Cu)()||(0,n.b3)())?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({...u,name:["Slack",d,_].filter(f=>f&&f.length>0).join("-")}):t.Zz)((0,t.Tw)(...p??[]),...h??[])}l(m,"configureEnhancers")},218970:(j,T,e)=>{"use strict";e.d(T,{g:()=>n});var t=e(717154);function n(s){const o={sideEffectsMap:{},orgSharedSideEffectsMap:{},clientSideEffectsMap:{}};return!s||!s.length?o:s.reduce((u,m)=>{const{actions:i,scope:d}=m;let _;switch(d){case t.RE.orgShared:_=u.orgSharedSideEffectsMap;break;case t.RE.client:_=u.clientSideEffectsMap;break;default:case t.RE.workspace:_=u.sideEffectsMap;break}return i.forEach(h=>{var p;const A=h==null||(p=h.getType)===null||p===void 0?void 0:p.call(h);A&&(_[A]=_[A]||[],_[A].push(m))}),u},o)}l(n,"generateSideEffectsMaps")},808783:(j,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(373314),n=e(717154),s=e(734264);const a={hasKeyboardFocus:!1},r=(0,t.Ay)({},a,{storeKey:"accessibilityPersistent",persistenceEnabled:!0,persistImmediately:!0,scope:n.nt.orgShared}).on(s.w,function(o){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return o.hasKeyboardFocus===u?o:{...o,hasKeyboardFocus:u}})},812922:(j,T,e)=>{"use strict";e.d(T,{As:()=>c,N9:()=>n,V_:()=>s,WB:()=>i,X8:()=>a,bb:()=>u,dH:()=>o,lf:()=>m,og:()=>t,rf:()=>r});const t="(prefers-contrast: more)",n="useAriaApplicationForListViews",s="composerUpArrowShortcutBehavior",a="messageTextLineSpacing",c="messageSpacing",r="messageTextWordSpacing",o="conversationIncomingMessageSound",u="conversationSentMessageSound",m="conversationIncomingMessageAnnouncement",i="peeksEnabledOnMouseEnter"},553127:(j,T,e)=>{"use strict";e.d(T,{A:()=>M});var t=e(919758),n=e(180427),s=e(373314),a=e(198538),c=e(812922),r=e(934528),o=e(119501);let u=!1;(0,n.Nu)()?u=window.matchMedia(c.og).matches:(0,n.hk)()&&(u=(0,t.oQe)("settings","shouldUseHighContrastColors"));let m=!1;try{m=!!(0,o.W6)(c.N9)}catch{}let i;try{i=(0,o.W6)(c.V_)}catch{}let d;try{d=(0,o.W6)(c.X8)||1}catch{}let _;try{_=(0,o.W6)(c.As)||1}catch{}let h;try{h=(0,o.W6)(c.rf)||"0"}catch{}let p;try{var A;p=(A=(0,o.W6)(c.dH))!==null&&A!==void 0?A:""}catch{p=""}let v;try{var E;v=(E=(0,o.W6)(c.bb))!==null&&E!==void 0?E:""}catch{v=""}let f;try{f=(0,o.W6)(c.lf)}catch{f=void 0}let g;try{var y;g=(y=(0,o.W6)(c.WB))!==null&&y!==void 0?y:!0}catch{g=!0}const I={screenReaderEnabled:!1,shouldUseHighContrastColors:u,useARIAApplicationForListViews:m,composerUpArrowShortcutBehavior:i,messageTextLineSpacing:d,messageSpacing:_,messageTextWordSpacing:h,conversationIncomingMessageSound:p,conversationSentMessageSound:v,conversationIncomingMessageAnnouncement:f,peeksEnabledOnMouseEnter:g},M=(0,s.Ay)({},I,{storeKey:"accessibility",persistenceEnabled:!1}).on(r.rl,(C,P)=>P!=null&&P.message?{...C,announcerAPIAnnouncement:P}:C).on(r.Jq,(C,P)=>typeof P!="boolean"||P===C.screenReaderEnabled?C:{...C,screenReaderEnabled:P}).on(r.N,function(C){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return typeof P!="boolean"||P===C.shouldUseHighContrastColors?C:{...C,shouldUseHighContrastColors:P}}).on(r.KQ,function(C){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{...C,useARIAApplicationForListViews:P}}).on(r.Tv,function(C){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.v.LIST;return{...C,composerUpArrowShortcutBehavior:P}}).on(r.C_,function(C){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return{...C,messageTextLineSpacing:P}}).on(r.XE,function(C){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return{...C,messageSpacing:P}}).on(r.Mq,function(C){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0";return{...C,messageTextWordSpacing:P}}).on(r.Sr,(C,P)=>({...C,conversationIncomingMessageSound:P})).on(r.mw,(C,P)=>({...C,conversationSentMessageSound:P})).on(r.Ap,(C,P)=>({...C,conversationIncomingMessageAnnouncement:P})).on(r.V_,(C,P)=>({...C,peeksEnabledOnMouseEnter:P}))},932426:(j,T,e)=>{"use strict";e.d(T,{T:()=>r});var t=e(674217),n=e(861173),s=e(812922),a=e(934528),c=e(119501);const r=(0,t.Ay)("Set the behavior of the up arrow shortcut when focus is in the MessageInput",(o,u,m)=>{if((0,n.A)(u()))try{(0,c.q9)(s.V_,m)}catch{}o((0,a.Tv)(m))});r.meta={name:"createThunk",key:"createThunksetComposerUpArrowShortcutBehavior",description:"Set the behavior of the up arrow shortcut when focus is in the MessageInput"}},557681:(j,T,e)=>{"use strict";e.d(T,{p:()=>r});var t=e(674217),n=e(861173),s=e(812922),a=e(934528),c=e(119501);const r=(0,t.Ay)("Set the pref for the sound that plays when a message arrives to the focused conversation",(o,u,m)=>{if((0,n.A)(u()))try{(0,c.q9)(s.lf,m)}catch{}o((0,a.Ap)(m))});r.meta={name:"createThunk",key:"createThunksetPersistentConversationIncomingMessageAnnouncement",description:"Set the pref for the sound that plays when a message arrives to the focused conversation"}},287274:(j,T,e)=>{"use strict";e.d(T,{R:()=>r,r:()=>o});var t=e(674217),n=e(861173),s=e(812922),a=e(934528),c=e(119501);const r=(0,t.Ay)("Set the pref for the sound that plays when a message arrives to the focused conversation",(u,m,i)=>{if((0,n.A)(m()))try{(0,c.q9)(s.dH,i)}catch{}u((0,a.Sr)(i))});r.meta={name:"createThunk",key:"createThunksetPersistentConversationIncomingMessageSound",description:"Set the pref for the sound that plays when a message arrives to the focused conversation"};const o=(0,t.Ay)("Set the pref for the sound that plays when a message is sent to the focused conversation",(u,m,i)=>{if((0,n.A)(m()))try{(0,c.q9)(s.bb,i)}catch{}u((0,a.mw)(i))});o.meta={name:"createThunk",key:"createThunksetPersistentConversationSentMessageSound",description:"Set the pref for the sound that plays when a message is sent to the focused conversation"}},198538:(j,T,e)=>{"use strict";e.d(T,{v:()=>t});var t;(function(n){n[n.LIST=1]="LIST",n[n.LIST_IF_EMPTY=2]="LIST_IF_EMPTY",n[n.EDIT=3]="EDIT"})(t||(t={}))},233431:(j,T,e)=>{"use strict";e.d(T,{FX:()=>r,X5:()=>c,ZY:()=>h,cD:()=>m,cQ:()=>i,cw:()=>u,dj:()=>d,fe:()=>a,lB:()=>_,qK:()=>n,r8:()=>o,s2:()=>s});var t=e(152532);const n=(0,t.Ay)("Set the thread root keys");n.meta={name:"createAction",key:"createActionsetThreads",description:"Set the thread root keys"};const s=(0,t.Ay)("Append more thread root keys");s.meta={name:"createAction",key:"createActionappendThreads",description:"Append more thread root keys"};const a=(0,t.Ay)("Insert a thread at the beginning");a.meta={name:"createAction",key:"createActionprependThread",description:"Insert a thread at the beginning"};const c=(0,t.Ay)("Increments totalUnreadReplies");c.meta={name:"createAction",key:"createActionincrementTotalUnreadReplies",description:"Increments totalUnreadReplies"};const r=(0,t.Ay)("Sets totalNewThreads to 0");r.meta={name:"createAction",key:"createActionclearTotalNewThreads",description:"Sets totalNewThreads to 0"};const o=(0,t.Ay)("Increments allThreadsRefreshCounter");o.meta={name:"createAction",key:"createActionincrementAllThreadsRefreshCounter",description:"Increments allThreadsRefreshCounter"};const u=(0,t.Ay)("Set the thread key that should be focused");u.meta={name:"createAction",key:"createActionsetFocusRequestedThreadKey",description:"Set the thread key that should be focused"};const m=(0,t.Ay)("Set the thread timestamp that should be focused");m.meta={name:"createAction",key:"createActionsetFocusRequestedReplyTs",description:"Set the thread timestamp that should be focused"};const i=(0,t.Ay)("Add a thread key to an array of threads that were manually marked unread");i.meta={name:"createAction",key:"createActionappendThreadToManuallyMarkedUnread",description:"Add a thread key to an array of threads that were manually marked unread"};const d=(0,t.Ay)("set object of threads that have been manually marked as unread");d.meta={name:"createAction",key:"createActionsetManuallyMarkedThreads",description:"set object of threads that have been manually marked as unread"};const _=(0,t.Ay)("Remove a thread key from an array of threads that were manually marked unread");_.meta={name:"createAction",key:"createActionremoveThreadFromManuallyMarkedUnread",description:"Remove a thread key from an array of threads that were manually marked unread"};const h=(0,t.Ay)("Sets manuallyMarkedUnread to empty");h.meta={name:"createAction",key:"createActionclearThreadsFromManuallyMarkedUnread",description:"Sets manuallyMarkedUnread to empty"}},373374:(j,T,e)=>{"use strict";e.d(T,{P:()=>s,s:()=>n});var t=e(152532);const n=(0,t.Ay)("add an app profile to the store");n.meta={name:"createAction",key:"createActionaddAppProfile",description:"add an app profile to the store"};const s=(0,t.Ay)("add multiple app profiles to the store");s.meta={name:"createAction",key:"createActionbulkAddAppProfiles",description:"add multiple app profiles to the store"}},431654:(j,T,e)=>{"use strict";e.d(T,{mY:()=>m,D1:()=>i,ez:()=>_});var t=e(446632),n=e(629386),s=e(873406),a=e(93122),c=e(749856);function r(h,p){return(0,a.A)(h,p).then(A=>(0,c.A)(h,A))}l(r,"fetchAndUpsertAppProfilesForTeam");const o=l(h=>(0,n.g2)(h,"appProfiles"),"computeEffectiveTeamOrEnterpriseId"),u=(0,t.A)(()=>new s.Ay({storeKey:"appProfiles",fetch:r,isEnabled:()=>!0})),m=l((h,p)=>u().markObjectsAsFresh(o(h),p),"markObjectsAsFresh"),i=l((h,p)=>u().markObjectsAsStale(o(h),p),"markObjectsAsStale"),d=l(h=>u().getFreshObjects(o(h)),"getFreshObjects"),_=l((h,p)=>u().maybeRefetch(o(h),p),"maybeRefetch")},127071:(j,T,e)=>{"use strict";e.d(T,{O:()=>n,g:()=>s});const t=":";function n(a){let{serviceId:c,homeWorkspaceId:r}=a;return[r,c].join(t)}l(n,"getFetchId");function s(a){const[c,r]=a.split(t);return{serviceId:r,homeWorkspaceId:c}}l(s,"splitFetchId")},93122:(j,T,e)=>{"use strict";e.d(T,{A:()=>d});var t=e(449552),n=e(194092),s=e(180491),a=e(674217),c=e(682520),r=e(309703),o=e(59949),u=e(127071);const m=(0,a.Ay)("Fetch multiple app profiles by combined IDs",(_,h,p)=>{const A=(0,c.Ay)({getState:h});return s.S.all(p.map(v=>{const{serviceId:E,homeWorkspaceId:f}=(0,u.g)(v);return E?_((0,r.M)({serviceId:E,homeWorkspaceId:f})).then(g=>({...(0,o.F)(E,g),id:v})).catch(g=>(A.warn(g,`Error while fetching profile ${v}`),null)):s.S.resolve(null)})).then(n.A)});m.meta={name:"createThunk",key:"createThunkfetchAppProfiles",description:"Fetch multiple app profiles by combined IDs"};const i=m;function d(_,h){return(0,t.dispatchForTeamId)(_,i(h))}l(d,"fetchAppProfilesForTeamId")},749856:(j,T,e)=>{"use strict";e.d(T,{A:()=>h});var t=e(449552),n=e(41343),s=e(54930),a=e(674217),c=e(881805),r=e(780076),o=e(388413),u=e(431654),m=e(373374),i=e(127071);const d=(0,a.Ay)("Upsert app profiles and mark as fresh in CFM",(p,A,v)=>{const E=A(),f=(0,c.JY)(E),g=[],y=[];v.forEach(I=>{if(!I||!I.service_id)return;const O=(0,o.qY)(E,I.service_id);if(!(0,r.uz)(I)&&(0,r.uz)(O))return;const M={...I};I&&O&&(0,r.lv)(I)&&(0,r.lv)(O)&&(M.failed_home_workspace_ids=(0,n.A)((I.failed_home_workspace_ids||[]).concat(O.failed_home_workspace_ids||[]))),g.push(M.id?(0,s.A)(M,["id"]):M);const C=(0,i.O)({serviceId:M.service_id,homeWorkspaceId:M.home_workspace_id||f});y.push(C)}),g.length&&(p((0,m.P)(g)),(0,u.mY)(f,y))});d.meta={name:"createThunk",key:"createThunkbulkUpsertAppProfiles",description:"Upsert app profiles and mark as fresh in CFM"};const _=d;function h(p,A){return(0,t.dispatchForTeamId)(p,_(A))}l(h,"upsertAppProfilesForTeamId")},388413:(j,T,e)=>{"use strict";e.d(T,{UH:()=>C,GS:()=>O,G2:()=>I,qY:()=>y,pc:()=>g});var t=e(915773),n=e(885850),s=e(539900),a=e(658160),c=e(354187),r=e(659973),o=e(881805),u=e(127071),m=e(437556),i=e(431654),d=e(446632),_=e(780076),h=e(749856),p=e(93122);const A=(0,d.A)(()=>new _.Ay({fetch:p.A,upsertKnown:h.A,upsertNonExistent:h.A,makeUnknownObject:v,makeNonExistentObject:E}));function v(L){const{serviceId:x,homeWorkspaceId:F}=(0,u.g)(L);return{id:L,isUnknown:!0,service_id:x,home_workspace_id:F,failed_home_workspace_ids:[]}}l(v,"makeUnknownAppProfileStub");function E(L){const{serviceId:x,homeWorkspaceId:F}=(0,u.g)(L);return{id:L,isNonExistent:!0,service_id:x,home_workspace_id:F,failed_home_workspace_ids:[F]}}l(E,"makeNonExistentAppProfileStub");var f=e(682520);const g=(0,t.Ay)(L=>L==null?void 0:L.appProfiles);g.meta={name:"createSelector",key:"createSelectorgetAppProfilesState",description:L=>L==null?void 0:L.appProfiles};const y=(0,t.Ay)((L,x)=>{var F;return x&&((F=g(L))===null||F===void 0?void 0:F[x])||null});y.meta={name:"createSelector",key:"createSelectorgetAppProfileByServiceId",description:(L,x)=>{var F;return x&&((F=g(L))===null||F===void 0?void 0:F[x])||null}};const I=(0,t.Ay)(function(L){let{serviceId:x,homeWorkspaceId:F,memberId:V}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const B=y(L,x),D=(0,o.JY)(L),S=F||D,R=(0,u.O)({serviceId:x,homeWorkspaceId:S}),w=B&&(0,_.lv)(B)&&!B.failed_home_workspace_ids.includes(S);if(!B||w)return A().fetchObjectWithId(D,R);if((0,i.ez)(D,R),V&&!B.app_user){const Y=(0,m.nv)(L,V);return{...B,app_user:{id:Y.id,username:(0,c.Gt)(Y)}}}return B});I.meta={name:"createSelector",key:"createSelectorgetAppProfileByIds",description:function(L){let{serviceId:x,homeWorkspaceId:F,memberId:V}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const B=y(L,x),D=(0,o.JY)(L),S=F||D,R=(0,u.O)({serviceId:x,homeWorkspaceId:S}),w=B&&(0,_.lv)(B)&&!B.failed_home_workspace_ids.includes(S);if(!B||w)return A().fetchObjectWithId(D,R);if((0,i.ez)(D,R),V&&!B.app_user){const Y=(0,m.nv)(L,V);return{...B,app_user:{id:Y.id,username:(0,c.Gt)(Y)}}}return B}};const O=(0,t.Ay)((L,x)=>{if(!x){(0,f.Wo)().error("Channel Id is undefined");return}const F=(0,n.OL)(L,x),V=(0,a.e)(F),B=(0,m.nv)(L,V),D=(0,r.A)(L,B),S=(0,o.JY)(L),R=(0,s.cl)(B,S);return I(L,{serviceId:D,homeWorkspaceId:R,memberId:V})});O.meta={name:"createSelector",key:"createSelectorgetAppProfileByChannelId",description:(L,x)=>{if(!x){(0,f.Wo)().error("Channel Id is undefined");return}const F=(0,n.OL)(L,x),V=(0,a.e)(F),B=(0,m.nv)(L,V),D=(0,r.A)(L,B),S=(0,o.JY)(L),R=(0,s.cl)(B,S);return I(L,{serviceId:D,homeWorkspaceId:R,memberId:V})}};var M;const C=(0,t.Ay)((L,x)=>{var F;return(F=Object.values((M=g(L))!==null&&M!==void 0?M:{}).filter(V=>V.app_id===x))===null||F===void 0?void 0:F[0]});var P;C.meta={name:"createSelector",key:"createSelectorgetAppProfileByAppId",description:(L,x)=>{var F;return(F=Object.values((P=g(L))!==null&&P!==void 0?P:{}).filter(V=>V.app_id===x))===null||F===void 0?void 0:F[0]}}},276265:(j,T,e)=>{"use strict";e.d(T,{DQ:()=>c,Lm:()=>o,RZ:()=>m,S:()=>h,X$:()=>a,_y:()=>i,c6:()=>d,fv:()=>r,rk:()=>s,yT:()=>_,z7:()=>u,zZ:()=>n});var t=e(152532);const n=(0,t.Ay)("Set Awareness State for another user");n.meta={name:"createAction",key:"createActionsetAwarenessStateForOtherUser",description:"Set Awareness State for another user"};const s=(0,t.Ay)("Set Awareness State for me");s.meta={name:"createAction",key:"createActionsetMyAwarenessState",description:"Set Awareness State for me"};const a=(0,t.Ay)("Remove Awareness State for me");a.meta={name:"createAction",key:"createActionremoveMyAwarenessState",description:"Remove Awareness State for me"};const c=(0,t.Ay)("Clear the full awareness state for a user");c.meta={name:"createAction",key:"createActionclearUserAwarenessState",description:"Clear the full awareness state for a user"};const r=(0,t.Ay)("Set my screenshare view");r.meta={name:"createAction",key:"createActionsetMyScreenshareView",description:"Set my screenshare view"};const o=(0,t.Ay)("Remove my screenshare view");o.meta={name:"createAction",key:"createActionremoveMyScreenshareView",description:"Remove my screenshare view"};const u=(0,t.Ay)("Set my sticky reaction");u.meta={name:"createAction",key:"createActionsetMyStickyReaction",description:"Set my sticky reaction"};const m=(0,t.Ay)("Remove my sticky reaction");m.meta={name:"createAction",key:"createActionremoveMyStickyReaction",description:"Remove my sticky reaction"};const i=(0,t.Ay)("Clear any stale awareness entries");i.meta={name:"createAction",key:"createActionttlAwarenessEntries",description:"Clear any stale awareness entries"};const d=(0,t.Ay)("Sets updatedTimestamp for my awareness entries to current time");d.meta={name:"createAction",key:"createActionrenewMyUpdatedTimestamps",description:"Sets updatedTimestamp for my awareness entries to current time"};const _=(0,t.Ay)("Set my active song");_.meta={name:"createAction",key:"createActionsetMyActiveSong",description:"Set my active song"};const h=(0,t.Ay)("Remove my active song");h.meta={name:"createAction",key:"createActionremoveMyActiveSong",description:"Remove my active song"}},18216:(j,T,e)=>{"use strict";e.d(T,{$G:()=>g,Ae:()=>O,Fb:()=>f,M3:()=>v,b1:()=>I,fL:()=>E,gV:()=>y,sW:()=>A,xP:()=>p});var t=e(915773),n=e(801081),s=e(386234),a=e(46996),c=e(566401),r=e(45798),o=e(143679),u=e(74683);const m=(0,n.Ad)(s.UI,a.A),i=l(C=>{var P;return(C==null||(P=C.awareness)===null||P===void 0?void 0:P.awarenessEntries)||r.Ml},"selectAwarenessEntries"),d=(0,n.Mz)([i,(C,P)=>P,(C,P,L)=>L,(C,P,L,x)=>x],(C,P,L,x)=>{if(P===void 0)return r.t0;const F=C.filter(B=>{const D=B.channel===P,S=B.fieldName===L,R=x?B.uniqueId===x:!0,w=!(0,u.h)(B);return D&&S&&R&&w}).map(B=>[B.user,B.fieldValue]),V=Object.fromEntries(F);return(0,c.A)(V)?r.t0:V}),_=(0,n.Mz)([i,(C,P)=>P,(C,P,L)=>L],(C,P,L)=>{if(P===void 0)return r.t0;const x=C.filter(V=>{const B=V.channel===P,D=V.fieldName===L,S=!(0,u.h)(V);return B&&D&&S}).map(V=>[V.uniqueId,[V.user,V.fieldValue]]),F=Object.fromEntries(x);return(0,c.A)(F)?r.t0:F}),h=(0,n.Mz)([i,(C,P)=>P,(C,P,L)=>L],(C,P,L)=>{if(P===void 0)return r.t0;var x,F;const V=C.filter(D=>{const S=D.channel===P,R=D.fieldName===L,w=!(0,u.h)(D);return S&&R&&w}).sort((D,S)=>((x=D.fieldTimestampMs)!==null&&x!==void 0?x:Number.MAX_SAFE_INTEGER)-((F=S.fieldTimestampMs)!==null&&F!==void 0?F:Number.MAX_SAFE_INTEGER)).map(D=>[D.user,D.fieldValue]);return Object.fromEntries(V)}),p=(0,t.Ay)((C,P)=>{const L=h(C,P,o.p4.STICKYEMOJI);return(0,c.A)(L)?r.t0:L});p.meta={name:"createSelector",key:"createSelectorgetStickyEmojisForTopicByUser",description:(C,P)=>{const L=h(C,P,o.p4.STICKYEMOJI);return(0,c.A)(L)?r.t0:L}};const A=(0,t.Ay)((C,P)=>d(C,P,o.p4.CONTENTVIEW));A.meta={name:"createSelector",key:"createSelectorgetContentViewsForTopicByUser",description:(C,P)=>d(C,P,o.p4.CONTENTVIEW)};const v=(0,t.Ay)((C,P)=>_(C,P,o.p4.CONTENTVIEW));v.meta={name:"createSelector",key:"createSelectorgetContentViewsKeyedByPeerId",description:(C,P)=>_(C,P,o.p4.CONTENTVIEW)};const E=(0,t.Ay)((C,P,L,x)=>{var F;return(C==null||(F=C.awareness)===null||F===void 0?void 0:F.awarenessEntries).filter(D=>{const S=D.channel===P,R=D.user===L,w=!x||(0,u.I)(D.fieldName)?!0:D.uniqueId===x,Y=!(0,u.h)(D);return S&&R&&w&&Y}).map(D=>({field_name:D.fieldName,field_value:D.fieldValue,...!!D.fieldTimestampMs&&{field_timestamp_ms:D.fieldTimestampMs}}))});E.meta={name:"createSelector",key:"createSelectorgetAwarenessForMe",description:(C,P,L,x)=>{var F;return(C==null||(F=C.awareness)===null||F===void 0?void 0:F.awarenessEntries).filter(D=>{const S=D.channel===P,R=D.user===L,w=!x||(0,u.I)(D.fieldName)?!0:D.uniqueId===x,Y=!(0,u.h)(D);return S&&R&&w&&Y}).map(D=>({field_name:D.fieldName,field_value:D.fieldValue,...!!D.fieldTimestampMs&&{field_timestamp_ms:D.fieldTimestampMs}}))}};const f=(0,t.Ay)((C,P,L,x)=>{const F=E(C,P,L,x);for(const V of F)if(V.field_name===o.p4.STICKYEMOJI)return V;return null});f.meta={name:"createSelector",key:"createSelectorgetAwarenessStickyEmoji",description:(C,P,L,x)=>{const F=E(C,P,L,x);for(const V of F)if(V.field_name===o.p4.STICKYEMOJI)return V;return null}};const g=(0,t.Ay)((C,P)=>{let{callId:L,userId:x,uniqueId:F}=P;return L?d(C,L,o.p4.STICKYEMOJI,F)[x]:void 0});g.meta={name:"createSelector",key:"createSelectorgetStickyReactionsByUserId",description:(C,P)=>{let{callId:L,userId:x,uniqueId:F}=P;return L?d(C,L,o.p4.STICKYEMOJI,F)[x]:void 0}};const y=(0,t.Ay)((C,P)=>{let{callId:L,userId:x}=P;if(!L)return;const F=d(C,L,o.p4.HUDDLE_ACTIVE_SONG);if((0,c.A)(F))return;if(x)return F[x];const V=Object.values(F);if(V.length!==0)return V[0]});y.meta={name:"createSelector",key:"createSelectorgetRequestedSong",description:(C,P)=>{let{callId:L,userId:x}=P;if(!L)return;const F=d(C,L,o.p4.HUDDLE_ACTIVE_SONG);if((0,c.A)(F))return;if(x)return F[x];const V=Object.values(F);if(V.length!==0)return V[0]}};const I=(0,t.Ay)((C,P)=>{let{callId:L,userId:x,uniqueId:F}=P;return L?d(C,L,o.p4.STEPS,F)[x]:void 0});I.meta={name:"createSelector",key:"createSelectorgetStepsByUserId",description:(C,P)=>{let{callId:L,userId:x,uniqueId:F}=P;return L?d(C,L,o.p4.STEPS,F)[x]:void 0}};const O=m([i,(C,P,L,x,F)=>`${P},${L},${x},${F}`],(C,P)=>{const[L,x,F,V]=P.split(","),B=C.filter(D=>{const S=D.channel===L,R=D.user!==x,w=D.fieldName===o.p4.ACTIVE_CELL&&D.fieldValue&&D.fieldValue.rowId===F&&D.fieldValue.colId===V,Y=!(0,u.h)(D);return S&&R&&w&&Y}).map(D=>[[`${D.fieldValue.rowId},${D.fieldValue.colId}`],D.user]);return B.length?Object.fromEntries(B):r.t0}),M=(0,n.Mz)([i,(C,P)=>P],(C,P)=>P===void 0?r.Ml:C.filter(x=>{const F=x.channel===P,V=x.fieldName===o.p4.ACTIVE_CELL;return F&&V}).map(x=>x.user))},143679:(j,T,e)=>{"use strict";e.d(T,{Pz:()=>t,mO:()=>s,p4:()=>n});var t;(function(a){a.BROADCAST="broadcast",a.QUERY="query",a.CLOSE="close"})(t||(t={}));var n;(function(a){a.CONTENTVIEW="contentView",a.STICKYEMOJI="stickyEmoji",a.ACTIVE_CELL="activeCell",a.HUDDLE_ACTIVE_SONG="huddleActiveSong",a.STEPS="steps"})(n||(n={}));const s=60*1e3},74683:(j,T,e)=>{"use strict";e.d(T,{I:()=>s,h:()=>n});var t=e(143679);const n=l(a=>{const c=Date.now();var r;return c-((r=a.updatedTimestamp)!==null&&r!==void 0?r:c)>=t.mO},"isAwarenessEntryExpired"),s=l(a=>a?[t.p4.HUDDLE_ACTIVE_SONG].includes(a):!1,"skipUniquenessCheck")},41455:(j,T,e)=>{"use strict";e.d(T,{K:()=>s,z:()=>n});var t=e(152532);const n=(0,t.Ay)("Enable big button mode");n.meta={name:"createAction",key:"createActionenableBBM",description:"Enable big button mode"};const s=(0,t.Ay)("Disable big button mode");s.meta={name:"createAction",key:"createActiondisableBBM",description:"Disable big button mode"}},459804:(j,T,e)=>{"use strict";e.d(T,{Y:()=>c});var t=e(373314),n=e(717154),s=e(41455);const a={enabled:!1},c=(0,t.Ay)({},a,{storeKey:"bbm",persistenceEnabled:!0,persistImmediately:!0,scope:n.nt.orgShared}).on(s.z,r=>({...r,enabled:!0})).on(s.K,r=>({...r,enabled:!1}))},428527:(j,T,e)=>{"use strict";e.d(T,{pO:()=>A,AF:()=>p,E6:()=>g,vu:()=>f,wC:()=>v,Od:()=>E});var t=e(780076),n=e(915773),s=e(659973),a=e(749877),c=e(881805),r=e(281261),o=e(437556);const u=["B01","BSLACKBOT","B03"];var m=e(606797),i=e(974576);function d(y){return!!(y&&(0,t.uz)(y)&&!(0,i.A)(y))}l(d,"isMemberHuman");var _=e(544253),h=e(143443);const p=(0,n.Ay)(function(y,I){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const M=(0,c.ZT)(y);if(!I)return!1;const C=(0,_.o)(y,I);return!C&&(0,a.A)(I)&&O&&u.indexOf(I)<0?(0,m.Ss)().fetchObjectWithId(M,I):((0,m.ez)(M,I),C||!1)});p.meta={name:"createSelector",key:"createSelectorgetBotById",description:function(y,I){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const M=(0,c.ZT)(y);if(!I)return!1;const C=(0,_.o)(y,I);return!C&&(0,a.A)(I)&&O&&u.indexOf(I)<0?(0,m.Ss)().fetchObjectWithId(M,I):((0,m.ez)(M,I),C||!1)}};const A=(0,n.Ay)((y,I)=>{if(!I)return;const O=(0,h.iO)(y);let M;return O&&(M=Object.values(O).find(C=>C.app_id===I)),M});A.meta={name:"createSelector",key:"createSelectorgetBotByAppId",description:(y,I)=>{if(!I)return;const O=(0,h.iO)(y);let M;return O&&(M=Object.values(O).find(C=>C.app_id===I)),M}};const v=(0,n.Ay)((y,I)=>{const O=(0,o.nv)(y,I);return d(O)});v.meta={name:"createSelector",key:"createSelectorgetMemberIsHuman",description:(y,I)=>{const O=(0,o.nv)(y,I);return d(O)}};const E=(0,n.Ay)(function(y){let{userId:I,botId:O,botProfile:M}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},C,P;I&&(C=(0,o.nv)(y,I)),O&&(P=p(y,O)||void 0);const L=C?d(C):!1;let x;!(0,t.uz)(P)&&(0,t.uz)(C)&&(x=(0,s.A)(y,C),x&&x!==O&&(P=p(y,x)||void 0));let F;if(!(0,t.uz)(P)&&M&&(F=M.id,F&&F!==x&&F!==O&&(P=p(y,F)||void 0),(0,t.uz)(P)||(P=M)),!(0,t.uz)(C)&&(0,t.uz)(P)&&P.app_id){const V=(0,r.sO)(y,P.app_id);if((0,t.uz)(V)){const B=V.app_user_id;B&&B!==I&&(C=(0,o.nv)(y,B))}}return{bot:P,member:C,memberIsHuman:L}});E.meta={name:"createSelector",key:"createSelectormaybeGetBotAndMemberByIds",description:function(y){let{userId:I,botId:O,botProfile:M}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},C,P;I&&(C=(0,o.nv)(y,I)),O&&(P=p(y,O)||void 0);const L=C?d(C):!1;let x;!(0,t.uz)(P)&&(0,t.uz)(C)&&(x=(0,s.A)(y,C),x&&x!==O&&(P=p(y,x)||void 0));let F;if(!(0,t.uz)(P)&&M&&(F=M.id,F&&F!==x&&F!==O&&(P=p(y,F)||void 0),(0,t.uz)(P)||(P=M)),!(0,t.uz)(C)&&(0,t.uz)(P)&&P.app_id){const V=(0,r.sO)(y,P.app_id);if((0,t.uz)(V)){const B=V.app_user_id;B&&B!==I&&(C=(0,o.nv)(y,B))}}return{bot:P,member:C,memberIsHuman:L}}};const f=(0,n.Ay)((y,I)=>{const O=p(y,I);if(O&&O.name)return O.name});f.meta={name:"createSelector",key:"createSelectorgetBotNameById",description:(y,I)=>{const O=p(y,I);if(O&&O.name)return O.name}};const g=(0,n.Ay)((y,I)=>{if(!y||!I)return null;const O=(0,o.nv)(y,I.user),M=I.bot_id||(0,s.A)(y,O);if(!M)return null;if(I.bot_profile)return I.bot_profile.id!==M?{...I.bot_profile,id:M}:I.bot_profile;const C=p(y,M);return C||null});g.meta={name:"createSelector",key:"createSelectorgetBotByMsg",description:(y,I)=>{if(!y||!I)return null;const O=(0,o.nv)(y,I.user),M=I.bot_id||(0,s.A)(y,O);if(!M)return null;if(I.bot_profile)return I.bot_profile.id!==M?{...I.bot_profile,id:M}:I.bot_profile;const C=p(y,M);return C||null}}},676959:(j,T,e)=>{"use strict";e.d(T,{O:()=>t,U:()=>n});const t="A01126R8Y2X",n="A0112L5RZ5E"},11650:(j,T,e)=>{"use strict";e.d(T,{B1:()=>o,EA:()=>r,Jw:()=>u,Nx:()=>a,a_:()=>c});var t=e(756120),n=e(649098),s=e(676959);const a=l((m,i)=>{let d=null,_="",h={},p=!1;const{conversation_email_address:A,conversation_email_addresses:v}=m;if(A)d=A.address,_=A.name,h=A.icons,p=!0;else if(v&&v.length>0){const[E]=v;d=E.address,_=E.name,h=E.icons}return d&&i?{address:d,channelId:i,name:_,icons:h,createdNew:p,id:i}:{channelId:i}},"extractChannelEmailAddressFromApi"),c=l(()=>(0,t.KV)()||(0,t.Yl)()?s.U:s.O,"getChannelEmailAddressesAppId"),r=l(m=>{if(m&&m.icons){const{image_36:i,image_48:d,image_72:_,image_original:h}=m.icons,p=i||d||_||h||null;if(p)return{url:p,src:p}}return null},"maybeExtractChannelEmailAddressIcon"),o=l(m=>m&&m.icons&&m.icons.emoji?m.icons.emoji:null,"maybeExtractChannelEmailAddressEmoji"),u=l(m=>[{type:"section",block_id:"cea_ephemeral_msg_blk",text:{type:"plain_text",text:new n.Ay("channel-email-addresses").t("Now that you have set an email address for {channelDisplayName}, would you like me to share it with everyone else in this channel? They\u2019ll see it along with some brief instructions for how to use it.",{channelDisplayName:m})}},{type:"actions",block_id:"cea_actions_blk",elements:[{type:"button",text:{type:"plain_text",text:"Dismiss"},value:"dismiss",action_id:"cea_dismiss_cta"},{type:"button",style:"primary",text:{type:"plain_text",text:"Share Email Address"},value:"share_email",action_id:"cea_share_email_cta"}]}],"createCeaEphemeralBlocks")},287187:(j,T,e)=>{"use strict";e.d(T,{Hw:()=>re,e3:()=>H,mY:()=>de,D1:()=>oe,Zc:()=>ae,ez:()=>ce});var t=e(446632),n=e(42302),s=e(449552),a=e(873406);function c(U,N){return`${U}:${N}`}l(c,"serialize_serialize");function r(U){const[N,K]=U.split(":");return{channelId:N,ts:K}}l(r,"deserialize");var o=e(211700),u=e(629386),m=e(808058),i=e(219477),d=e(698448),_=e(747360),h=e(726666),p=e(180491),A=e(674217),v=e(682520),E=e(838942),f=e(394045),g=e(888260),y=e(903144),I=e(78808),O=e(544555),M=e(289123),C=e(43335),P=e(840122),L=e(545),x=e(297287);const F="HISTORY-CFM";function V(U,N){return l(function K(){let{channelId:W,oldest:J,latest:q,cursor:ie="",msgsInRange:Te=[],deletedInRange:Me=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const ke={channelId:W,oldest:J,latest:q,cursor:ie,inclusive:!0,includePinCount:!1,reason:"channel-history-store.CFM.fetch"};return U((0,P.Ay)(ke)).then(function(){let{msgs:Pe=[],deleted:Ie=[],isLimited:X,hasMore:ne,responseMetadata:fe={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Te.push(...Pe),Me.push(...Ie),ne&&!X&&fe.next_cursor?K({channelId:W,oldest:J,latest:q,cursor:fe.next_cursor,msgsInRange:Te,deletedInRange:Me}):(U((0,x.A)({msgs:Te,channelId:W,isLimited:X,latest:q,oldest:J,deletedInRange:Me})),p.S.resolve())})},"fetchHistoryRangeHelper")(N)}l(V,"fetchHistoryRange");function B(U,N){return l(function K(){let{channelId:W,threadTs:J,oldest:q,latest:ie,cursor:Te="",msgsInRange:Me=[],deletedInRange:ke=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const Pe={channelId:W,threadTs:J,oldest:q,latest:ie,cursor:Te,inclusive:!0,reason:"channel-history-store.CFM.fetch"};return U((0,P.$b)(Pe)).then(function(){let{msgs:Ie=[],deleted:X=[],hasMore:ne,responseMetadata:fe={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Me.push(...Te?(0,L.A)(Ie,{ts:J}):Ie),ke.push(...X),ne&&fe.next_cursor)return K({channelId:W,threadTs:J,oldest:q,latest:ie,cursor:fe.next_cursor,msgsInRange:Me,deletedInRange:ke});const Be=q===J||ie===J?Me:(0,L.A)(Me,{ts:J});return U((0,x.A)({msgs:Be,channelId:(0,O.Iu)(W,J),latest:ie,oldest:q,deletedInRange:ke})),p.S.resolve()})},"fetchRepliesRangeHelper")(N)}l(B,"fetchRepliesRange");const D=(0,A.Ay)("Fetches a range of messages",(U,N,K)=>{let{channelId:W,oldest:J,latest:q}=K;return(0,v.Ay)({getState:N,label:F}).info(`Re-fetching ${W} ${J} - ${q}`),(0,C.A)(W)?V(U,{channelId:W,oldest:J,latest:q}):B(U,{...(0,O.Sb)(W),oldest:J,latest:q})});D.meta={name:"createThunk",key:"createThunkfetchRange",description:"Fetches a range of messages"};var S=e(774102);function R(U){const N={};return U.forEach(K=>{const{channelId:W,ts:J}=r(K);N[W]=N[W]||[],N[W].push(J)}),N}l(R,"groupTimestampsByChannel");function w(U){let N,K;return(0,m.A)(U,(W,J)=>{N===void 0&&(N=J),K===void 0&&(K=J),J<N&&(N=J),J>K&&(K=J)}),{minTs:N,maxTs:K}}l(w,"getMinAndMaxTs");function Y(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,i.A)(N,(K,W)=>U[W])}l(Y,"hasIntersection");function Q(U,N){return(0,d.A)(N,(K,W)=>U[W])}l(Q,"isSuperset");function Z(U){let{ranges:N={},tsMaps:K=[]}=U;const W={...N};let J=K[0];return K.forEach(q=>{J!==q&&(Y(J,q)?Q(J,q)?delete W[q.rangeId]:Q(q,J)?(delete W[J.rangeId],J=q):(0,m.A)(q,(ie,Te)=>delete J[Te]):J=q)}),Object.values(W)}l(Z,"dedupe");function ee(U,N){let K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const W=(0,v.Ay)({state:U,label:F}),J={},q=[];return K.sort().forEach(ie=>{const Me=(0,M.Ld)(U,N,ie,!1);if(!Me){W.warn(`No message for ${ie} in ${N}`);return}if((0,E.aw)(Me)||(0,g.A)(Me))return;const ke=[];(!(0,I.n)(Me)||(0,E.jX)(Me)||(0,f.SM)(Me))&&ke.push(N),((0,E.jX)(Me)||(0,I.n)(Me))&&ke.push((0,O.Iu)(N,(0,y.L)(Me))),ke.forEach(Pe=>{if(!Pe)return;const Ie=(0,S.tp)(U,Pe,ie);if(!Ie||Ie===S.Vl)return;const{start:X,end:ne,timestamps:fe}=Ie,be=`${X}-${ne}`;if(!J[be]){const We={};Object.defineProperty(We,"rangeId",{enumerable:!1,value:be}),J[be]={id:Pe,firstTs:(0,_.A)(fe),lastTs:(0,h.A)(fe),start:X,end:ne,tsMap:We},q.push(We)}const Be=J[be];Be.tsMap[ie]=!0})}),{ranges:J,tsMaps:q}}l(ee,"segment");function _e(U,N){let K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return(Z(ee(U,N,K))||[{}]).map(J=>{let{id:q,firstTs:ie,lastTs:Te,start:Me,end:ke,tsMap:Pe}=J;const{minTs:Ie,maxTs:X}=w(Pe);return{id:q,oldest:Ie===ie?Me:Ie,latest:X===Te?ke:X}})}l(_e,"rangify");const Ee=(0,A.Ay)("Fetches chunks of channel history for the given message IDs",(U,N,K)=>{let{ids:W}=K;const J=R(W),q={};return(0,m.A)(J,(ie,Te)=>{const Me=_e(N(),Te,ie);q[Te]=p.S.map(Me,ke=>{let{oldest:Pe,latest:Ie,id:X}=ke;return U(D({channelId:X,oldest:Pe,latest:Ie}))})}),p.S.all(Object.values(q))});Ee.meta={name:"createThunk",key:"createThunkrefetchChannelHistory",description:"Fetches chunks of channel history for the given message IDs"};const G=Ee,Ae=(0,t.A)(()=>new a.Ay({storeKey:"channelHistory",fetch:(U,N)=>(0,s.dispatchForTeamId)(U,G({ids:N})),metricsName:"channel-history",isEnabled:()=>!0,markStaleAfterSlowReconnect:()=>!1})),ce=l((U,N,K)=>Ae().maybeRefetch((0,u.g2)(U,"channelHistory"),c(N,K)),"maybeRefetch"),de=l((U,N,K)=>Ae().markObjectsAsFresh((0,u.g2)(U,"channelHistory"),K.map(W=>c(N,W))),"markObjectsAsFresh"),oe=l((U,N,K)=>Ae().markObjectsAsStale((0,u.g2)(U,"channelHistory"),K.map(W=>c(N,W))),"markObjectsAsStale"),$=l((U,N,K)=>Ae().isObjectFresh(computeEffectiveTeamIdForReducer(U,"channelHistory"),serialize(N,K)),"isObjectFresh"),re=l(U=>Ae().getFreshObjects((0,u.g2)(U,"channelHistory")).map(r),"getFreshObjects");(0,o.zv)("conditionalFetchManagerChannelHistory",Ae);const ue="reachedEnd",te=(0,t.A)(()=>new a.Ay({storeKey:"channelHistory",fetch:n.A,metricsName:"channel-history-reached-end",isEnabled:()=>!0})),ae=l(U=>te().markObjectsAsFresh((0,u.g2)(U,"channelHistory"),[ue]),"markReachedEndAsFresh"),H=l(U=>te().isObjectFresh((0,u.g2)(U,"channelHistory"),[ue]),"isReachedEndFresh")},571858:(j,T,e)=>{"use strict";e.d(T,{Y:()=>s,r:()=>n});var t=e(13125);const{addObjects:n,removeObjects:s}=t.o1},13125:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>o,Tp:()=>r,o1:()=>c});var t=e(794867),n=e(717154);const s={storeKey:"channelLoading",persistenceEnabled:!1,scope:n.nt.orgShared},{reducer:a,actions:c,selectors:r}=(0,t.A)(s,{idKey:"channelId",transform:u=>{const{channelId:m,...i}=u;return{id:m,object:i}}}),o=a},28971:(j,T,e)=>{"use strict";e.d(T,{Ah:()=>a,Qr:()=>c,c:()=>r});var t=e(915773),n=e(13125);const{getObjectById:s}=n.Tp,a=l((u,m)=>s(u,m),"innerGetChannelLoadingDataById"),c=(0,t.Ay)((u,m)=>{var i;return!!(!((i=a(u,m))===null||i===void 0)&&i.loading)});c.meta={name:"createSelector",key:"createSelectorisChannelLoading",description:(u,m)=>{var i;return!!(!((i=a(u,m))===null||i===void 0)&&i.loading)}};const r=(0,t.Ay)((u,m)=>{const i=a(u,m);return!!(i!=null&&i.loading&&(i!=null&&i.loadingOlder))});r.meta={name:"createSelector",key:"createSelectorisChannelLoadingOlder",description:(u,m)=>{const i=a(u,m);return!!(i!=null&&i.loading&&(i!=null&&i.loadingOlder))}};const o={innerGetChannelLoadingDataById:a}},120962:(j,T,e)=>{"use strict";e.d(T,{f:()=>s});var t=e(674217),n=e(571858);const s=(0,t.Ay)("Finished loading history for a channel",(a,c,r)=>{const{channelId:o}=r||{};a((0,n.Y)({ids:[o]}))});s.meta={name:"createThunk",key:"createThunkdoneLoading",description:"Finished loading history for a channel"}},778042:(j,T,e)=>{"use strict";e.d(T,{v:()=>a});var t=e(674217),n=e(28971),s=e(571858);const a=(0,t.Ay)("Started loading history for a channel",(c,r,o)=>{const{channelId:u,loadingOlder:m,request:i}=o||{},d=(0,n.Ah)(r(),u);d&&d.loading&&d.request&&d.request.cancel(),c((0,s.r)({objects:[{channelId:u,loading:!0,loadingOlder:m,request:i}]}))});a.meta={name:"createThunk",key:"createThunkstartLoading",description:"Started loading history for a channel"}},377846:(j,T,e)=>{"use strict";e.d(T,{U:()=>s,ih:()=>a,k9:()=>n});var t=e(152532);const n=(0,t.Ay)("Set the history invalid timestamp for a channel");n.meta={name:"createAction",key:"createActionsetHistoryInvalidTimestamp",description:"Set the history invalid timestamp for a channel"};const s=(0,t.Ay)("Set the updated timestamp for a channel");s.meta={name:"createAction",key:"createActionsetUpdatedTimestamp",description:"Set the updated timestamp for a channel"};const a=(0,t.Ay)("Bulk update the history invalid timestamps for a channel");a.meta={name:"createAction",key:"createActionbulkUpdateMutationTimestamps",description:"Bulk update the history invalid timestamps for a channel"}},66703:(j,T,e)=>{"use strict";e.d(T,{Kq:()=>c,QO:()=>a});var t=e(915773);const n=(0,t.Ay)(r=>r==null?void 0:r.channelMutationTimestamps);n.meta={name:"createSelector",key:"createSelectorgetAllMutationTimestamps",description:r=>r==null?void 0:r.channelMutationTimestamps};const s=(0,t.Ay)((r,o)=>{var u;return(u=n(r))===null||u===void 0?void 0:u[o]});s.meta={name:"createSelector",key:"createSelectorgetMutationTimestampsByChannelId",description:(r,o)=>{var u;return(u=n(r))===null||u===void 0?void 0:u[o]}};const a=(0,t.Ay)((r,o)=>{var u;return(u=s(r,o))===null||u===void 0?void 0:u.updatedTs});a.meta={name:"createSelector",key:"createSelectorgetUpdatedTimestamp",description:(r,o)=>{var u;return(u=s(r,o))===null||u===void 0?void 0:u.updatedTs}};const c=(0,t.Ay)((r,o)=>{var u;return(u=s(r,o))===null||u===void 0?void 0:u.historyInvalidTs});c.meta={name:"createSelector",key:"createSelectorgetHistoryInvalidTimestamp",description:(r,o)=>{var u;return(u=s(r,o))===null||u===void 0?void 0:u.historyInvalidTs}}},146070:(j,T,e)=>{"use strict";e.d(T,{B:()=>a});var t=e(674217),n=e(900682),s=e(562237);const a=(0,t.Ay)(s.rd.ADD_CHANNEL,function(c,r){let{channel:o}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};!o||!o.id||c((0,n.F)({channel:o,reason:s.rd.ADD_CHANNEL}))});a.meta={name:"createThunk",key:"createThunkaddChannel",description:s.rd.ADD_CHANNEL}},390938:(j,T,e)=>{"use strict";e.d(T,{t:()=>i});var t=e(180491),n=e(674217),s=e(705091),a=e(848463),c=e(900682),r=e(562237),o=e(619674),u=e(883518),m=e(158565);const i=(0,n.Ay)("Archives a private channel, creates and upserts a new one with the same name, then adds users",(d,_,h,p)=>{let{channelId:A,users:v,subteams:E,inviteAll:f,force:g,propagateInviteResult:y}=h;return d((0,s.wb)({channelId:A,reason:r.rd.CHILD_CHANNEL_CREATED})).then(function(){let{channel:I}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{shouldUseNavigate:O}=p(m.U);return d((0,c.F)({channel:I,reason:r.rd.CHILD_CHANNEL_CREATED})),d(O?(0,o.o)((0,u.pr)(I.id)):(0,a.A)({id:I.id})),y?f||v||E?d((0,s.Cw)({channelId:I.id,users:v,subteams:E,inviteAll:f,force:g})).then(M=>({channel:I,inviteResult:M})):t.S.resolve({channel:I,inviteResult:{ok:!0}}):(d((0,s.Cw)({channelId:I.id,users:v,subteams:E})),t.S.resolve({channel:I}))})});i.meta={name:"createThunk",key:"createThunkcreateChildChannelAndAddMembers",description:"Archives a private channel, creates and upserts a new one with the same name, then adds users"}},427399:(j,T,e)=>{"use strict";e.d(T,{Z:()=>s});var t=e(674217),n=e(587839);const s=(0,t.Ay)("Create or open an IM",function(a,c){let{memberId:r,shouldNavigateToChannel:o=!0,shouldOpenInTile:u=!1,reason:m}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=r?[r]:[];return a((0,n.r)({memberIds:i,shouldNavigateToChannel:o,shouldOpenInTile:u,reason:m}))});s.meta={name:"createThunk",key:"createThunkstartImByMemberId",description:"Create or open an IM"}},587839:(j,T,e)=>{"use strict";e.d(T,{r:()=>g});var t=e(180491),n=e(566401),s=e(41343),a=e(674217),c=e(113574),r=e(710596),o=e(705091),u=e(848463),m=e(883518),i=e(885850),d=e(934861),_=e(129318),h=e(900682),p=e(158565),A=e(619674),v=e(20328),E=e(515722),f=e(999635);const g=(0,a.Ay)("Create or open an MPIM",function(y,I){let{memberIds:O,shouldNavigateToChannel:M=!0,isQuiet:C=!1,shouldOpenInTile:P=!1,reason:L="startMpimByMemberIds"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},x=arguments.length>3?arguments[3]:void 0;if((0,n.A)(O))return t.S.resolve();const{shouldUseNavigate:F}=x(p.U),V=I(),B=l(R=>{if(F)return y((0,A.o)((0,m.pr)(R.id))),t.S.resolve(R);let w;return P?w=y((0,f.s)({viewId:R.id})):(0,c.TZ)(V)?w=y((0,u.A)({id:R.id})):w=y((0,v._J)({permalink:(0,d.Zl)((0,_.H7)(V),(0,E.iu)({channelId:R.id}))})),w.then(()=>R)},"navigateToChannel");let D,S;if(O.length===1)S=O,D=(0,i.Pu)(V,O[0]);else{const R=(0,c.WR)(V);S=(0,s.A)([R,...O]),D=(0,i.FB)(V,S)}return(0,r.nT)(D)?M?B(D):t.S.resolve(D):y((0,o.jP)({isQuiet:C,memberIds:S,reason:L})).then(R=>!R||!R.channel?t.S.reject(new Error("missing-channel")):(y((0,h.F)({channel:R.channel})),M?B(R.channel):t.S.resolve(R.channel)))});g.meta={name:"createThunk",key:"createThunkstartMpimByMemberIds",description:"Create or open an MPIM"}},814353:(j,T,e)=>{"use strict";e.d(T,{LA:()=>a,Th:()=>c,kl:()=>s,yg:()=>n});var t=e(152532);const n=(0,t.Ay)("Set the current theme field in redux (do not use this)");n.meta={name:"createAction",key:"createActionsetClientThemeInternal",description:"Set the current theme field in redux (do not use this)"};const s=(0,t.Ay)("Set the OS system sync field in redux (do not use this)");s.meta={name:"createAction",key:"createActionsetSystemSyncInternal",description:"Set the OS system sync field in redux (do not use this)"};const a=(0,t.Ay)("Set the OS system theme field in redux (do not use this)");a.meta={name:"createAction",key:"createActionsetSystemTheme",description:"Set the OS system theme field in redux (do not use this)"};const c=(0,t.Ay)("Set the client typeface");c.meta={name:"createAction",key:"createActionsetClientTypeface",description:"Set the client typeface"}},320087:(j,T,e)=>{"use strict";e.d(T,{C3:()=>s,k4:()=>t,u7:()=>n});const t="slack-client-theme",n="slack-client-theme-os-sync",s="client-typeface"},718602:(j,T,e)=>{"use strict";e.d(T,{A:()=>y});var t=e(219477),n=e(682520),s=e(271338),a=e(837283),c=e(919758),r=e(373314),o=e(449552),u=e(320087),m=e(814353),i=e(658336),d=e(41464),_=e(307720),h=e(285955),p=e(119501);let A="light",v=!1,E="light",f;try{f=(0,p.W6)(u.C3)||void 0}catch{}try{a.w2&&(0,s.A)()&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addListener(I=>{const O=I.matches?"dark":"light";E=O,v&&(A=E);const M=(0,o.getClientStoreInstance)();if(M){const C=M.getState(),P=(0,h.getBootedWorkspaces)(C),L=(0,t.A)(P.map(x=>(0,a.Ay)((0,o.getStateByTeamId)(x))));M.dispatch((0,m.LA)(O)),L&&(0,i.FW)(C)&&M.dispatch((0,d.P)(O))}})}catch(I){(0,n.Wo)().warn("CLIENT-THEME-STORE","window.matchMedia hook failed; system theme will not be updated.",I)}try{const I=window.localStorage.getItem(u.k4),O=window.localStorage.getItem(u.u7);A=I||"light",a.w2&&(O?v=O==="true":v=!I,window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(E="dark"),v&&(A=E)),(0,c.g9M)()&&((0,c.cGU)({name:"userTheme",value:A}),(0,c.cGU)({name:"systemThemeSyncEnabled",value:v}))}catch(I){(0,n.Wo)().warn("CLIENT-THEME-STORE","localStorage read failed; client theme will not be persisted.",I)}const y=(0,r.Ay)({},{clientTheme:A,systemSync:v,systemTheme:E,clientTypeface:f},{storeKey:"clientTheme",persistenceEnabled:!1}).on(m.yg,function(I){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"light";return{...I,clientTheme:O}}).on(m.kl,function(I){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{...I,systemSync:O}}).on(m.LA,function(I){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"light";return{...I,systemTheme:O}}).on(m.Th,function(I){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_.bI;return{...I,clientTypeface:O}})},41464:(j,T,e)=>{"use strict";e.d(T,{P:()=>r});var t=e(682520),n=e(919758),s=e(674217),a=e(320087),c=e(814353);const r=(0,s.Ay)("Set the current theme for the device",function(o,u){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"light";try{window.localStorage.setItem(a.k4,m)}catch{(0,t.Wo)().warn("CLIENT-THEME-STORE","localStorage write failed; client theme will not be persisted.")}o((0,c.yg)(m)),(0,n.cGU)({name:"userTheme",value:m})});r.meta={name:"createThunk",key:"createThunksetClientTheme",description:"Set the current theme for the device"}},215777:(j,T,e)=>{"use strict";e.d(T,{$_:()=>p,Ci:()=>c,Dn:()=>a,F8:()=>i,N2:()=>u,No:()=>_,RX:()=>o,ij:()=>s,nC:()=>h,qE:()=>r,sR:()=>n,vN:()=>m,zQ:()=>d});var t=e(152532);const n=(0,t.Ay)("Resets Slack Connect Invites to the provided inbound/outbound connect invites");n.meta={name:"createAction",key:"createActionresetConnectInvites",description:"Resets Slack Connect Invites to the provided inbound/outbound connect invites"};const s=(0,t.Ay)("Resets Slack Connect Invites to the provided inbound/outbound pending connect invites");s.meta={name:"createAction",key:"createActionresetPendingConnectInvites",description:"Resets Slack Connect Invites to the provided inbound/outbound pending connect invites"};const a=(0,t.Ay)("Upserts a Slack Connect Invite");a.meta={name:"createAction",key:"createActionupsertConnectInvite",description:"Upserts a Slack Connect Invite"};const c=(0,t.Ay)("Upserts a Slack Connect Invite that is pending");c.meta={name:"createAction",key:"createActionupsertPendingConnectInvite",description:"Upserts a Slack Connect Invite that is pending"};const r=(0,t.Ay)("Removes a Slack Connect Invite");r.meta={name:"createAction",key:"createActionremoveConnectInvite",description:"Removes a Slack Connect Invite"};const o=(0,t.Ay)("Removes a pending Slack Connect Invite");o.meta={name:"createAction",key:"createActionremovePendingConnectInvite",description:"Removes a pending Slack Connect Invite"};const u=(0,t.Ay)("Set freshness flag for Slack Connect invites");u.meta={name:"createAction",key:"createActionsetAreInvitesFresh",description:"Set freshness flag for Slack Connect invites"};const m=(0,t.Ay)("Set if logged in member email has be verified for Slack Connect visibility purposes");m.meta={name:"createAction",key:"createActionsetIsEmailVerified",description:"Set if logged in member email has be verified for Slack Connect visibility purposes"};const i=(0,t.Ay)("Set if logged-in member's email verification has failed");i.meta={name:"createAction",key:"createActionsetIsUserVerificationFetchError",description:"Set if logged-in member's email verification has failed"};const d=(0,t.Ay)("Upserts a channel acceptance eligibility result for a specific invite");d.meta={name:"createAction",key:"createActionupsertChannelAcceptanceEligibility",description:"Upserts a channel acceptance eligibility result for a specific invite"};const _=(0,t.Ay)("Upserts a SCDM acceptance eligibility result for a specific invite");_.meta={name:"createAction",key:"createActionupsertSCDMAcceptanceEligibility",description:"Upserts a SCDM acceptance eligibility result for a specific invite"};const h=(0,t.Ay)("Upserts whether an acceptance attempt has failed for a specific invite");h.meta={name:"createAction",key:"createActionupsertHasAcceptanceAttemptFailed",description:"Upserts whether an acceptance attempt has failed for a specific invite"};const p=(0,t.Ay)("Set whether we are currently switching workspaces");p.meta={name:"createAction",key:"createActionsetIsSwitchingWorkspaces",description:"Set whether we are currently switching workspaces"}},324116:(j,T,e)=>{"use strict";e.d(T,{d:()=>u});var t=e(612104),n=e.n(t),s=e(674217),a=e(968277),c=e(503721),r=e(770442),o=e(215777);const u=(0,s.Ay)("Fetch and reset the result of connectInvites.listPending for inbound/outbound invites",function(){var m=(0,t.coroutine)(function*(i,d,_){let{reason:h}=_;const A=(yield i((0,a.B)({reason:h}))).connect_invites,v=A.filter(c.Ef),E=A.filter(c.I4);return i((0,r.R)({connectInvites:A})),i((0,o.ij)({pendingInboundConnectInvites:v,pendingOutboundConnectInvites:E})),A});return function(i,d,_){return m.apply(this,arguments)}}());u.meta={name:"createThunk",key:"createThunkfetchAndResetAllPendingConnectInvites",description:"Fetch and reset the result of connectInvites.listPending for inbound/outbound invites"}},791556:(j,T,e)=>{"use strict";e.d(T,{p:()=>i});var t=e(612104),n=e.n(t),s=e(674217),a=e(994639),c=e(180491),r=e(744875),o=e(868384),u=e(770442),m=e(215777);const i=(0,s.Ay)("Fetch and upsert the result of connectInvites.list for inbound/outbound invites",function(){var d=(0,t.coroutine)(function*(_,h,p){let{reason:A,direction:v}=p;const[E,f]=yield c.S.all([_((0,r.O)({inviteType:o.k.Channel,direction:v,reason:A})),_((0,r.O)({inviteType:o.k.Im,direction:v,reason:A}))]),g=[...E.connect_invites,...f.connect_invites];_((0,u.R)({connectInvites:g}));const y={inboundConnectInvites:v===a.D.Incoming?g:void 0,outboundConnectInvites:v===a.D.Outgoing?g:void 0};return _((0,m.sR)(y)),g});return function(_,h,p){return d.apply(this,arguments)}}());i.meta={name:"createThunk",key:"createThunkfetchAndResetConnectInvites",description:"Fetch and upsert the result of connectInvites.list for inbound/outbound invites"}},770442:(j,T,e)=>{"use strict";e.d(T,{R:()=>c});var t=e(612104),n=e.n(t),s=e(674217),a=e(828342);const c=(0,s.Ay)("Upsert any non-local members referenced in the specified connect invites",function(){var r=(0,t.coroutine)(function*(o,u,m){let{connectInvites:i}=m;const d=[];i.forEach(_=>{if(_.direction==="outgoing"&&_.acceptances&&_.acceptances.forEach(p=>{d.push(p.accepting_user)}),_.direction==="incoming"){var h;d.push(_.invite.inviting_user),!(_==null||(h=_.invite)===null||h===void 0)&&h.introducing_user&&d.push(_.invite.introducing_user)}}),o((0,a.Ay)({members:d}))});return function(o,u,m){return r.apply(this,arguments)}}());c.meta={name:"createThunk",key:"createThunkupsertMembersFromConnectInvites",description:"Upsert any non-local members referenced in the specified connect invites"}},324830:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(373314),n=e(272765);const s={serviceOnline:!0,lastSocketActivity:0,clientOnline:!0,lastClientConnection:Date.now(),lastSocketConnection:0},c=(0,t.Ay)({},s,{storeKey:"connectivity",persistenceEnabled:!1}).on(n.pm,(r,o)=>({...r,serviceOnline:!!o})).on(n.Uj,r=>r===s?{...r,lastSocketActivity:Date.now()}:(r.lastSocketActivity=Date.now(),r)).on(n.p9,(r,o)=>({...r,clientOnline:!!o,lastClientConnection:Date.now()})).on(n.hM,r=>({...r,lastSocketConnection:Date.now()}))},34424:(j,T,e)=>{"use strict";e.d(T,{b:()=>s,k:()=>n});var t=e(152532);const n=(0,t.Ay)("Set a value that represents whether we are currently in the boot phase");n.meta={name:"createAction",key:"createActionsetBootInFlight",description:"Set a value that represents whether we are currently in the boot phase"};const s=(0,t.Ay)("Set a value that represents whether we are currently performing a warm boot");s.meta={name:"createAction",key:"createActionsetWarmBootInFlight",description:"Set a value that represents whether we are currently performing a warm boot"}},630992:(j,T,e)=>{"use strict";e.d(T,{Ot:()=>s,S9:()=>c,X8:()=>n,d$:()=>o,d1:()=>u,en:()=>r,gx:()=>a});var t=e(152532);const n=(0,t.Ay)("Adds the new set of custom emoji to the existing store");n.meta={name:"createAction",key:"createActionaddCustomEmoji",description:"Adds the new set of custom emoji to the existing store"};const s=(0,t.Ay)("Resets the array of custom emoji in the store");s.meta={name:"createAction",key:"createActionsetNewCustomEmojiData",description:"Resets the array of custom emoji in the store"};const a=(0,t.Ay)("Removes the specified custom emoji from the store");a.meta={name:"createAction",key:"createActionremoveCustomEmoji",description:"Removes the specified custom emoji from the store"};const c=(0,t.Ay)("Renames a disabled custom emoji");c.meta={name:"createAction",key:"createActionrenameCustomEmoji",description:"Renames a disabled custom emoji"};const r=(0,t.Ay)("Set the loading status for the API request when a new page is loading");r.meta={name:"createAction",key:"createActionsetIsLoadingNewPage",description:"Set the loading status for the API request when a new page is loading"};const o=(0,t.Ay)("Set the loading status for the API request when a user searches for emojis");o.meta={name:"createAction",key:"createActionsetIsLoadingNewSearchQuery",description:"Set the loading status for the API request when a user searches for emojis"};const u=(0,t.Ay)("Set the current sort category and direction for the table");u.meta={name:"createAction",key:"createActionsetSort",description:"Set the current sort category and direction for the table"}},365478:(j,T,e)=>{"use strict";e.d(T,{o:()=>n});var t=e(152532);const n=(0,t.Ay)("Record that a message was deleted");n.meta={name:"createAction",key:"createActionrecordMessageDeleted",description:"Record that a message was deleted"}},454399:(j,T,e)=>{"use strict";e.d(T,{k:()=>n});var t=e(915773);const n=(0,t.Ay)((s,a)=>{let{channelId:c,ts:r}=a;return s&&s.deletedMessages&&s.deletedMessages[c]&&!!s.deletedMessages[c][r]});n.meta={name:"createSelector",key:"createSelectorwasMessageDeleted",description:(s,a)=>{let{channelId:c,ts:r}=a;return s&&s.deletedMessages&&s.deletedMessages[c]&&!!s.deletedMessages[c][r]}}},170012:(j,T,e)=>{"use strict";e.d(T,{$3:()=>u,Bt:()=>r,Ez:()=>s,LS:()=>i,Mk:()=>a,NN:()=>_,XF:()=>c,Y$:()=>h,Yv:()=>n,_F:()=>m,jC:()=>d,n9:()=>p,oR:()=>v,um:()=>A,yz:()=>o});var t=e(152532);const n=(0,t.Ay)("Sets the highlight property of a download");n.meta={name:"createAction",key:"createActioninternalSetDownloadHighlight",description:"Sets the highlight property of a download"};const s=(0,t.Ay)("An update of the desktop state from the desktop app");s.meta={name:"createAction",key:"createActionupdateFromDesktop",description:"An update of the desktop state from the desktop app"};const a=(0,t.Ay)("An update of the window frame state");a.meta={name:"createAction",key:"createActionupdateWindowFrameState",description:"An update of the window frame state"};const c=(0,t.Ay)("Starts a download on the desktop app");c.meta={name:"createAction",key:"createActionstartDesktopDownload",description:"Starts a download on the desktop app"};const r=(0,t.Ay)("Pauses a download on the desktop app");r.meta={name:"createAction",key:"createActionpauseDesktopDownload",description:"Pauses a download on the desktop app"};const o=(0,t.Ay)("Resumes a download on the desktop app");o.meta={name:"createAction",key:"createActionresumeDesktopDownload",description:"Resumes a download on the desktop app"};const u=(0,t.Ay)("Cancels a download on the desktop app");u.meta={name:"createAction",key:"createActioncancelDesktopDownload",description:"Cancels a download on the desktop app"};const m=(0,t.Ay)("Clears all stopped downloads for the active team");m.meta={name:"createAction",key:"createActionclearTeamDesktopDownloads",description:"Clears all stopped downloads for the active team"};const i=(0,t.Ay)("Removes a download on the desktop app");i.meta={name:"createAction",key:"createActionremoveDesktopDownload",description:"Removes a download on the desktop app"};const d=(0,t.Ay)("Retries a download on the desktop app");d.meta={name:"createAction",key:"createActionretryDesktopDownload",description:"Retries a download on the desktop app"};const _=(0,t.Ay)("Opens a file downloaded by the desktop app");_.meta={name:"createAction",key:"createActionopenDesktopDownload",description:"Opens a file downloaded by the desktop app"};const h=(0,t.Ay)("Shows the folder that contains the downloaded file");h.meta={name:"createAction",key:"createActionshowDesktopDownload",description:"Shows the folder that contains the downloaded file"};const p=(0,t.Ay)("Toggles the performance monitor");p.meta={name:"createAction",key:"createActiontogglePerformanceMonitor",description:"Toggles the performance monitor"};const A=(0,t.Ay)("Sets the currently active team in the SSB");A.meta={name:"createAction",key:"createActionsetActiveTeam",description:"Sets the currently active team in the SSB"};const v=(0,t.Ay)("Update canvas system text settings in the SSB");v.meta={name:"createAction",key:"createActionsetCanvasSystemTextSettings",description:"Update canvas system text settings in the SSB"}},452059:(j,T,e)=>{"use strict";e.d(T,{A:()=>_});var t=e(373314),n=e(59116),s=e(962315),a=e(877500),c=e(42302),r=e(919758),o=e(170012);const u=l((h,p)=>(0,n.A)(h,(A,v)=>(0,n.A)(A,(E,f)=>p(v,f,E))),"mapDownloads"),m=l(h=>({...{app:{},environment:{},settings:{},...(0,s.A)(h,["app","settings","environment"]),windows:(0,n.A)((h==null?void 0:h.windows)||{},A=>({frame:(0,s.A)(A.frame,["isFullScreen","isFocused","isVisible","hasVibrancy","isCurrentlyAudible"])})),downloads:u((h==null?void 0:h.downloads)||{},(A,v,E)=>({...E,highlight:!1})),debug:{isPerformanceMonitorEnabled:!1}},activeTeamId:(0,a.A)(window,"desktop.reduxHelper.state.selectedTeamId")}),"initializeState"),i=(0,r.g9M)()?m((0,a.A)(window,"desktop.redux.getState",c.A)()):null,_=(0,t.Ay)({},i,{storeKey:"desktop",persistenceEnabled:!1}).on(o.Ez,(h,p)=>{const A=p.downloads?u(p.downloads,(v,E,f)=>({...f,highlight:(0,a.A)(h.downloads,[v,E,"highlight"],!1)})):h.downloads;return{...h,...p,downloads:A}}).on(o.Mk,(h,p)=>{let{windowId:A,property:v,value:E}=p;var f,g,y;return{...h,windows:{...h.windows,[A]:{...((f=h.windows)===null||f===void 0?void 0:f[A])||{},frame:{...((g=h.windows)===null||g===void 0||(y=g[A])===null||y===void 0?void 0:y.frame)||{},[v]:E}}}}}).on(o.Yv,(h,p)=>{let{fileId:A,teamId:v,highlight:E}=p;return(0,a.A)(h.downloads,[v,A])?{...h,downloads:{...h.downloads,[v]:{...h.downloads[v],[A]:{...h.downloads[v][A],highlight:E}}}}:h}).on(o.n9,h=>({...h,debug:{...h.debug,isPerformanceMonitorEnabled:!h.debug.isPerformanceMonitorEnabled}})).on(o.um,(h,p)=>p?{...h,activeTeamId:p}:h)},839716:(j,T,e)=>{"use strict";e.d(T,{AS:()=>s,Fb:()=>n,J3:()=>f,NH:()=>E,Oh:()=>u,Yr:()=>v,ZY:()=>d,cH:()=>i,e$:()=>g,er:()=>A,in:()=>_,lW:()=>h,px:()=>m,tG:()=>p,u7:()=>o});var t=e(152532);const n=(0,t.Ay)("Add an array of devices to the device store",O=>O);n.meta={name:"createAction",key:"createActionclobberDevices",description:"Add an array of devices to the device store"};const s=(0,t.Ay)("Set the sink device for media elements");s.meta={name:"createAction",key:"createActionsetSinkDevice",description:"Set the sink device for media elements"};const a=(0,t.Ay)("Notify middleware of a new preferred device");a.meta={name:"createAction",key:"createActionsetNewPreferredDevice",description:"Notify middleware of a new preferred device"};const c=(0,t.Ay)("");c.meta={name:"createAction",key:"createActionrequestPreviewStreamForDeviceId",description:""};const r=(0,t.Ay)("Stop preview streams");r.meta={name:"createAction",key:"createActionstopPreviewStreams",description:"Stop preview streams"};const o=(0,t.Ay)("");o.meta={name:"createAction",key:"createActionsetPreviewStreams",description:""};const u=(0,t.Ay)("Get screen thumbnails");u.meta={name:"createAction",key:"createActiongetScreenThumbnails",description:"Get screen thumbnails"};const m=(0,t.Ay)("The browser has blocked getUserMedia for cameras");m.meta={name:"createAction",key:"createActionsetCameraIsBlockedByBrowser",description:"The browser has blocked getUserMedia for cameras"};const i=(0,t.Ay)("The browser has blocked getUserMedia for microphones");i.meta={name:"createAction",key:"createActionsetMicrophoneIsBlockedByBrowser",description:"The browser has blocked getUserMedia for microphones"};const d=(0,t.Ay)("The browser has granted getUserMedia access for microphones");d.meta={name:"createAction",key:"createActionsetMicrophoneIsGrantedByBrowser",description:"The browser has granted getUserMedia access for microphones"};const _=(0,t.Ay)("The browser has granted getUserMedia access for cameras");_.meta={name:"createAction",key:"createActionsetCameraIsGrantedByBrowser",description:"The browser has granted getUserMedia access for cameras"};const h=(0,t.Ay)("The browser has blocked getUserMedia for screen recording");h.meta={name:"createAction",key:"createActionsetScreenRecordingIsBlockedByBrowser",description:"The browser has blocked getUserMedia for screen recording"};const p=(0,t.Ay)("The system has blocked getUserMedia access for microphones");p.meta={name:"createAction",key:"createActionsetMicrophoneIsBlockedBySystem",description:"The system has blocked getUserMedia access for microphones"};const A=(0,t.Ay)("The system has granted getUserMedia access for microphones");A.meta={name:"createAction",key:"createActionsetMicrophoneIsGrantedBySystem",description:"The system has granted getUserMedia access for microphones"};const v=(0,t.Ay)("The system has blocked getUserMedia access for cameras");v.meta={name:"createAction",key:"createActionsetCameraIsBlockedBySystem",description:"The system has blocked getUserMedia access for cameras"};const E=(0,t.Ay)("The system has granted getUserMedia access for cameras");E.meta={name:"createAction",key:"createActionsetCameraIsGrantedBySystem",description:"The system has granted getUserMedia access for cameras"};const f=(0,t.Ay)("The system has blocked screen recording");f.meta={name:"createAction",key:"createActionsetScreenshareRecordingIsBlockedBySystem",description:"The system has blocked screen recording"};const g=(0,t.Ay)("Check for system media access");g.meta={name:"createAction",key:"createActionmaybeCheckSystemMediaAccess",description:"Check for system media access"};const y=(0,t.Ay)("Notify middleware that automatic gain control setting has changed");y.meta={name:"createAction",key:"createActionsetAGC",description:"Notify middleware that automatic gain control setting has changed"};const I=(0,t.Ay)("Notify middleware that noise suppression setting has changed");I.meta={name:"createAction",key:"createActionsetNoiseSuppression",description:"Notify middleware that noise suppression setting has changed"}},166433:(j,T,e)=>{"use strict";e.d(T,{AZ:()=>d,Ae:()=>h,Hc:()=>O,IO:()=>P,JM:()=>L,SR:()=>M,aA:()=>x,f3:()=>_,ly:()=>i,oG:()=>r,ql:()=>u,yp:()=>E});var t=e(747360),n=e(219477),s=e(801081),a=e(475711),c=e(774165);const r=(0,c.Mz)(F=>F.device.devices);r.meta={name:"createSelector",key:"createSelectorgetDevices",description:F=>F.device.devices};const o=(0,c.Mz)(F=>F.device.sinkDevice);o.meta={name:"createSelector",key:"createSelectorgetSinkDevice",description:F=>F.device.sinkDevice};const u=(0,c.Mz)((F,V)=>(0,t.A)(F.device.devices[V]));u.meta={name:"createSelector",key:"createSelectorgetPreferredDevice",description:(F,V)=>(0,t.A)(F.device.devices[V])};const m=(0,c.Mz)(F=>F.device.isMicrophoneBlockedByBrowser);m.meta={name:"createSelector",key:"createSelectorisMicrophoneBlockedByBrowser",description:F=>F.device.isMicrophoneBlockedByBrowser};const i=(0,c.Mz)(F=>F.device.isCameraBlockedByBrowser);i.meta={name:"createSelector",key:"createSelectorisCameraBlockedByBrowser",description:F=>F.device.isCameraBlockedByBrowser};const d=(0,s.Mz)(r,m,(F,V)=>A(F)&&!V),_=(0,s.Mz)(r,i,(F,V)=>v(F)&&!V),h=(0,s.Mz)(r,i,(F,V)=>{var B,D;if(!(!v(F)||V))return F==null||(B=F.camera)===null||B===void 0||(D=B[0])===null||D===void 0?void 0:D.id}),p=(0,c.Mz)(F=>F.device.previewStreams);p.meta={name:"createSelector",key:"createSelectorgetPreviewStreams",description:F=>F.device.previewStreams};function A(F){return F.microphone.length>0}l(A,"isMicrophoneAvailableInDevices");function v(F){return F.camera.length>0}l(v,"isCameraAvailableInDevices");function E(F){return F.microphone.some(V=>V.label!==void 0)}l(E,"isMicrophoneAvailableForCapturingInDevices");function f(F){return F.camera.some(V=>V.label!==void 0)}l(f,"isCameraAvailableForCapturingInDevices");function g(F){return F.output.some(V=>V.label!==void 0)}l(g,"isOutputAvailableForDisplay");const y=(0,c.Mz)(F=>F.device.isMicrophoneBlockedBySystem);y.meta={name:"createSelector",key:"createSelectorisMicrophoneBlockedBySystem",description:F=>F.device.isMicrophoneBlockedBySystem};const I=(0,c.Mz)(F=>F.device.isCameraBlockedBySystem);I.meta={name:"createSelector",key:"createSelectorisCameraBlockedBySystem",description:F=>F.device.isCameraBlockedBySystem};const O=(0,s.Mz)(m,y,(F,V)=>F||V),M=(0,s.Mz)(i,I,(F,V)=>F||V),C=l(F=>{if(!F)return!1;const V=["bluetooth","hands-free","airpods","wireless"];return(0,n.A)(V,B=>F==null?void 0:F.toLowerCase().includes(B))},"doesLabelHintBluetooth"),P=(0,c.Mz)(F=>{const V=F.device.devices,B=(0,t.A)(V[a.lW.Microphone]);return C(B==null?void 0:B.label)});P.meta={name:"createSelector",key:"createSelectorisSelectedMicrophoneBluetooth",description:F=>{const V=F.device.devices,B=(0,t.A)(V[a.lW.Microphone]);return C(B==null?void 0:B.label)}};const L=(0,c.Mz)(F=>{const V=F.device.devices,B=(0,t.A)(V[a.Q4]);return C(B==null?void 0:B.label)});L.meta={name:"createSelector",key:"createSelectorisSelectedSpeakerBluetooth",description:F=>{const V=F.device.devices,B=(0,t.A)(V[a.Q4]);return C(B==null?void 0:B.label)}};const x=(0,c.Mz)(F=>{const V=F.device.devices,B=(0,t.A)(V[a.lW.Microphone]),D=(0,t.A)(V[a.Q4]);return!!B&&!!D&&B.groupId===D.groupId});x.meta={name:"createSelector",key:"createSelectorisAudioOnSameDevice",description:F=>{const V=F.device.devices,B=(0,t.A)(V[a.lW.Microphone]),D=(0,t.A)(V[a.Q4]);return!!B&&!!D&&B.groupId===D.groupId}}},176861:(j,T,e)=>{"use strict";e.d(T,{y:()=>n});var t=e(468231);const n=l((s,a)=>(0,t.I$)(s,a),"getIsMemberDisconnectedById")},912922:(j,T,e)=>{"use strict";e.d(T,{$x:()=>c,H9:()=>n,at:()=>o,j_:()=>m,jy:()=>u,o2:()=>a,qw:()=>s,su:()=>r});var t=e(152532);const n=(0,t.Ay)("Mark emoji collections as fetch (or not fetched");n.meta={name:"createAction",key:"createActionsetEmojiCollectionsFetched",description:"Mark emoji collections as fetch (or not fetched"};const s=(0,t.Ay)("Set and replace emoji collections");s.meta={name:"createAction",key:"createActionsetEmojiCollections",description:"Set and replace emoji collections"};const a=(0,t.Ay)("Signals that an emoji collection has been installed");a.meta={name:"createAction",key:"createActioninstallEmojiCollection",description:"Signals that an emoji collection has been installed"};const c=(0,t.Ay)("Signals that an emoji collection has been uninstalled");c.meta={name:"createAction",key:"createActionuninstallEmojiCollection",description:"Signals that an emoji collection has been uninstalled"};const r=(0,t.Ay)("Signals that badges should be added post-install");r.meta={name:"createAction",key:"createActionbadgeEmojiCollection",description:"Signals that badges should be added post-install"};const o=(0,t.Ay)("Signals that the message input badge should be removed");o.meta={name:"createAction",key:"createActionremoveEmojiCollectionInputBadge",description:"Signals that the message input badge should be removed"};const u=(0,t.Ay)("Signals that the message tab badge should be removed from the emoji picker");u.meta={name:"createAction",key:"createActionremoveEmojiCollectionTabBadge",description:"Signals that the message tab badge should be removed from the emoji picker"};const m=(0,t.Ay)("Increments emoji click count");m.meta={name:"createAction",key:"createActionincrementEmojiClickCount",description:"Increments emoji click count"}},695939:(j,T,e)=>{"use strict";e.d(T,{Cs:()=>_,Ur:()=>v,_J:()=>E,_o:()=>p,fl:()=>f,nQ:()=>h,pG:()=>A,uI:()=>d});var t=e(194092),n=e(566401),s=e(792866),a=e(998047),c=e(21879),r=e(915773),o=e(801081),u=e(921055);const m=60*60*24*14,i=(0,r.Ay)((g,y)=>g&&g.emojiCollections&&g.emojiCollections.collections&&g.emojiCollections.collections[y]);i.meta={name:"createSelector",key:"createSelectorgetEmojiCollection",description:(g,y)=>g&&g.emojiCollections&&g.emojiCollections.collections&&g.emojiCollections.collections[y]};const d=(0,r.Ay)(g=>g&&g.emojiCollections&&g.emojiCollections.collections);d.meta={name:"createSelector",key:"createSelectorgetEmojiCollections",description:g=>g&&g.emojiCollections&&g.emojiCollections.collections};const _=(0,o.Mz)(d,g=>(0,t.A)(g,y=>y.installed)),h=(0,r.Ay)(g=>g&&g.emojiCollections&&g.emojiCollections.hasFetched);h.meta={name:"createSelector",key:"createSelectorhasFetchedEmojiCollections",description:g=>g&&g.emojiCollections&&g.emojiCollections.hasFetched};const p=(0,r.Ay)(g=>g&&g.emojiCollections&&g.emojiCollections.inputBadge);p.meta={name:"createSelector",key:"createSelectorgetInputBadge",description:g=>g&&g.emojiCollections&&g.emojiCollections.inputBadge};const A=(0,r.Ay)(g=>g&&g.emojiCollections&&g.emojiCollections.tabBadge);A.meta={name:"createSelector",key:"createSelectorgetTabBadge",description:g=>g&&g.emojiCollections&&g.emojiCollections.tabBadge};const v=(0,r.Ay)(g=>g&&g.emojiCollections&&g.emojiCollections.emojiClickCount);v.meta={name:"createSelector",key:"createSelectorgetEmojiClickCount",description:g=>g&&g.emojiCollections&&g.emojiCollections.emojiClickCount};const E=(0,r.Ay)(g=>{const y=d(g);if((0,n.A)(y))return null;const I=(0,s.A)(y);return(0,a.A)(I,O=>O.date_create)});E.meta={name:"createSelector",key:"createSelectorgetMostRecentPack",description:g=>{const y=d(g);if((0,n.A)(y))return null;const I=(0,s.A)(y);return(0,a.A)(I,O=>O.date_create)}};const f=(0,r.Ay)(g=>{const y=(0,u.ty)(g,"emoji_packs_most_recent_available_time");if(!(0,c.A)(y))return!1;const I=y+m;return Date.now()/1e3<I});f.meta={name:"createSelector",key:"createSelectorisWithinExpirationDateOfNewPack",description:g=>{const y=(0,u.ty)(g,"emoji_packs_most_recent_available_time");if(!(0,c.A)(y))return!1;const I=y+m;return Date.now()/1e3<I}}},929611:(j,T,e)=>{"use strict";e.d(T,{H:()=>h});var t=e(454346),n=e(674217),s=e(813955),a=e(756120),c=e(695939),r=e(912922),o=e(998047),u=e(921055),m=e(704534),i=e(258768);const d=(0,n.Ay)("handle updating prefs if new emoji pack has become available",(p,A,v)=>{let{collections:E}=v;const f=A(),g=(0,m.h3)(f),y=(0,u.ty)(f,"emoji_packs_most_recent_available_time")||0,I=(0,o.A)(E,P=>P.date_create),{date_create:O,installed:M}=I||{};(g||M)&&O>y&&p((0,i.Hj)({emoji_packs_most_recent_available_time:Date.now()/1e3,emoji_packs_clicked_picker_cta:!1,emoji_packs_clicked_picker_post_install_cta:!1,emoji_packs_clicked_collection_cta:!1}))});d.meta={name:"createThunk",key:"createThunkhandlePotentialNewPack",description:"handle updating prefs if new emoji pack has become available"};const _=d,h=(0,n.Ay)("Process and add emoji collections",(p,A,v)=>{let{reason:E}=v;const f=A();(0,c.nQ)(f)||(p((0,r.H9)({hasFetched:!0})),p((0,s.KO)({reason:E})).then(g=>{const y=g.installed||[],I=g.available||[],O=(0,t.A)(y,"id"),M=I.map(C=>({...C,installed:!!O[C.id],localEmoji:O[C.id]?O[C.id].emoji:C.emoji}));p(_({collections:M})),(0,a.Cu)()?p((0,r.qw)({collections:M.filter(C=>!["1044122771874","11"].includes(C.id))})):p((0,r.qw)({collections:M}))}).catch(()=>{p((0,r.H9)({hasFetched:!1}))}))});h.meta={name:"createThunk",key:"createThunkfetchAllEmojiCollections",description:"Process and add emoji collections"}},811312:(j,T,e)=>{"use strict";e.d(T,{D:()=>n,V:()=>s});var t=e(152532);const n=(0,t.Ay)("Add ephemeral message reference to store");n.meta={name:"createAction",key:"createActionaddToEphemeralMessageMap",description:"Add ephemeral message reference to store"};const s=(0,t.Ay)("Remove ephemeral message reference");s.meta={name:"createAction",key:"createActionremoveFromEphemeralMessageMap",description:"Remove ephemeral message reference"}},281002:(j,T,e)=>{"use strict";e.d(T,{F:()=>t});const t={disconnectedFeedback:"disconnected_feedback",createdGoogleDriveDocument:"created_google_drive_document",enablePopups:"enable_popups",generalPostingRestricted:"general_posting_restricted",genericPostingRestricted:"generic_posting_restricted",fileTypeHasNoHandler:"file_type_has_no_handler",boxFilePickerError:"box_file_picker_error",gdriveShareFileError:"gdrive_share_file_error",onedriveSdkError:"onedrive_sdk_error",tempSlashCmdFeedback:"temp_slash_cmd_feedback",threadsTempSlashCmdFeedback:"threads_temp_slash_cmd_feedback",uncaughtThirdPartyCallError:"uncaught_third_party_call_error",findAnAdminPrompt:"find_an_admin_prompt",unhandledGdriveCreate:"unhandled_gdrive_create",fileCreatedViaBookmark:"file_created_via_bookmark",scheduleSendError:"schedule_send_error"}},236589:(j,T,e)=>{"use strict";e.d(T,{H:()=>m});var t=e(707980),n=e(962315),s=e(808058),a=e(915773),c=e(682520),r=e(289123);const o="EPHEMERAL MESSAGES",u=(0,a.Ay)(i=>i.ephemeralMessages);u.meta={name:"createSelector",key:"createSelectorgetEphemeralMessagesState",description:i=>i.ephemeralMessages};const m=(0,a.Ay)((i,d)=>{const{ephemeralType:_,channelId:h,threadTs:p}=d,A=(0,c.Ay)({state:i});if(p&&!h)return A.error(o,"Can't remove ephemeral messages by thread without channel ID"),[];d.channel&&!h&&A.warn(o,"`channel` passed to `getEphemeralMessagesByType`. Did you mean `channelId`?");const E=u(i)[_];return(0,t.A)(h?(0,n.A)(E,[h]):E,(f,g,y)=>((0,s.A)(g,(I,O)=>{if(!I)return;const M=(0,r.Ld)(i,y,O);M&&(!p||M.thread_ts===p)&&f.push(M)}),f),[])});m.meta={name:"createSelector",key:"createSelectorgetEphemeralMessagesByType",description:(i,d)=>{const{ephemeralType:_,channelId:h,threadTs:p}=d,A=(0,c.Ay)({state:i});if(p&&!h)return A.error(o,"Can't remove ephemeral messages by thread without channel ID"),[];d.channel&&!h&&A.warn(o,"`channel` passed to `getEphemeralMessagesByType`. Did you mean `channelId`?");const E=u(i)[_];return(0,t.A)(h?(0,n.A)(E,[h]):E,(f,g,y)=>((0,s.A)(g,(I,O)=>{if(!I)return;const M=(0,r.Ld)(i,y,O);M&&(!p||M.thread_ts===p)&&f.push(M)}),f),[])}}},60108:(j,T,e)=>{"use strict";e.d(T,{F:()=>o});var t=e(674217),n=e(306172),s=e(243382),a=e(811312),c=e(453426);const r=(0,t.Ay)("Add an ephemeral message to messages-store and ephemeral message map",(u,m,i)=>{let{ephemeralType:d,message:_}=i;const h=m(),p=(0,c.$)(h,_);p.ts||(p.ts=(0,n.A)()),d&&(p._ephemeral_type=d),u((0,s.A)([p])),d&&u((0,a.D)({ephemeralType:d,channelId:p.channel,ts:p.ts}))});r.meta={name:"createThunk",key:"createThunkaddEphemeralMessage",description:"Add an ephemeral message to messages-store and ephemeral message map"};const o=(0,t.Ay)("Add an ephemeral message from a bot (defaults to Slackbot)",(u,m,i)=>{let{ephemeralType:d,message:_}=i,h;_.username?h={..._,subtype:"bot_message"}:h={..._,user:"USLACKBOT"},u(r({ephemeralType:d,message:h}))});o.meta={name:"createThunk",key:"createThunkaddEphemeralBotMessage",description:"Add an ephemeral message from a bot (defaults to Slackbot)"}},151571:(j,T,e)=>{"use strict";e.d(T,{w:()=>o});var t=e(726666),n=e(674217),s=e(766998),a=e(453426),c=e(60108),r=e(236589);const o=(0,n.Ay)("Add or update the last ephemeral message of a certain type",(u,m,i)=>{let{ephemeralType:d,message:_,ignoreExistingMessage:h=!1}=i;const p=m(),A=_.channel,v=_.thread_ts;if(d){const E=d&&(0,t.A)((0,r.H)(p,{ephemeralType:d,channelId:A,threadTs:v}));if(E&&E.ts&&!h){u((0,s.Kc)([{...(0,a.$)(p,_),ts:E.ts,channel:A,thread_ts:v}]));return}}u((0,c.F)({ephemeralType:d,message:_}))});o.meta={name:"createThunk",key:"createThunkaddOrFlashEphemeralBotMsg",description:"Add or update the last ephemeral message of a certain type"}},181899:(j,T,e)=>{"use strict";e.d(T,{P:()=>c});var t=e(674217),n=e(418558),s=e(236589),a=e(811312);const c=(0,t.Ay)("Remove ephemeral messages by type, channel, and/or thread",(r,o,u)=>{const m=o();(0,s.H)(m,u).forEach(d=>{r((0,n.A)({channelId:d.channel,ts:d.ts||""})),r((0,a.V)({ephemeralType:u.ephemeralType,channelId:d.channel,ts:d.ts}))})});c.meta={name:"createThunk",key:"createThunkremoveEphemeralMsgsByType",description:"Remove ephemeral messages by type, channel, and/or thread"}},453426:(j,T,e)=>{"use strict";e.d(T,{$:()=>n});var t=e(409295);const n=l((s,a)=>{const c={...a,type:"message",is_ephemeral:!0,text:(0,t.A)(s,a.text,{isInternalMessage:!0})};return c.username?c.subtype="bot_message":c.user="USLACKBOT",c},"buildBotMessage")},104620:(j,T,e)=>{"use strict";e.d(T,{N:()=>n,Y:()=>s});var t=e(152532);const n=(0,t.Ay)("Overwrites our store of the teams in a given externally shared channel");n.meta={name:"createAction",key:"createActionupdateExtSharedChannelTeams",description:"Overwrites our store of the teams in a given externally shared channel"};const s=(0,t.Ay)("Updates whether or not disconnect is in progress for the given team");s.meta={name:"createAction",key:"createActionupdateIsDisconnectInProgressForTeam",description:"Updates whether or not disconnect is in progress for the given team"}},632608:(j,T,e)=>{"use strict";e.d(T,{D1:()=>u,ap:()=>m,ez:()=>o});var t=e(180491),n=e(446632),s=e(873406),a=e(449552),c=e(733807);const r=(0,n.A)(()=>new s.Ay({storeKey:"extSharedChannelTeams",fetch:(i,d)=>{const _=d.slice(0,5);return t.S.map(_,h=>(0,a.dispatchForTeamId)(i,(0,c.N)({channelId:h})))},isEnabled:()=>!0,metricsName:"team-connections"})),o=l((i,d)=>{!i||!d||r().maybeRefetch(i,d)},"maybeRefetch"),u=l((i,d)=>r().markObjectsAsStale(i,d),"markObjectsAsStale"),m=l((i,d)=>r().isObjectFresh(i,d),"isObjectFresh")},347737:(j,T,e)=>{"use strict";e.d(T,{NQ:()=>o,dE:()=>u,df:()=>r,kz:()=>m,s3:()=>a,xT:()=>c});var t=e(915773),n=e(881805),s=e(632608);const a=(0,t.Ay)((i,d)=>{var _,h;return(0,s.ez)((0,n.ZT)(i),d),(i==null||(_=i.extSharedChannelTeams)===null||_===void 0||(h=_[d])===null||h===void 0?void 0:h.connections)||[]});a.meta={name:"createSelector",key:"createSelectorgetTeamConnectionsForChannelId",description:(i,d)=>{var _,h;return(0,s.ez)((0,n.ZT)(i),d),(i==null||(_=i.extSharedChannelTeams)===null||_===void 0||(h=_[d])===null||h===void 0?void 0:h.connections)||[]}};const c=(0,t.Ay)((i,d)=>{var _,h;return(0,s.ez)((0,n.ZT)(i),d),(i==null||(_=i.extSharedChannelTeams)===null||_===void 0||(h=_[d])===null||h===void 0?void 0:h.pendingConnections)||[]});c.meta={name:"createSelector",key:"createSelectorgetPendingTeamConnectionsForChannelId",description:(i,d)=>{var _,h;return(0,s.ez)((0,n.ZT)(i),d),(i==null||(_=i.extSharedChannelTeams)===null||_===void 0||(h=_[d])===null||h===void 0?void 0:h.pendingConnections)||[]}};const r=(0,t.Ay)((i,d)=>{var _,h;return(0,s.ez)((0,n.ZT)(i),d),(i==null||(_=i.extSharedChannelTeams)===null||_===void 0||(h=_[d])===null||h===void 0?void 0:h.previousConnections)||[]});r.meta={name:"createSelector",key:"createSelectorgetPreviousTeamConnectionsForChannelId",description:(i,d)=>{var _,h;return(0,s.ez)((0,n.ZT)(i),d),(i==null||(_=i.extSharedChannelTeams)===null||_===void 0||(h=_[d])===null||h===void 0?void 0:h.previousConnections)||[]}};const o=(0,t.Ay)((i,d)=>{var _,h;return(0,s.ez)((0,n.ZT)(i),d),i==null||(_=i.extSharedChannelTeams)===null||_===void 0||(h=_[d])===null||h===void 0?void 0:h.conversationHostId});o.meta={name:"createSelector",key:"createSelectorgetConversationHostTeamIdForChannelId",description:(i,d)=>{var _,h;return(0,s.ez)((0,n.ZT)(i),d),i==null||(_=i.extSharedChannelTeams)===null||_===void 0||(h=_[d])===null||h===void 0?void 0:h.conversationHostId}};const u=(0,t.Ay)((i,d)=>{var _,h;return d?((0,s.ez)((0,n.ZT)(i),d),!!(!(i==null||(_=i.extSharedChannelTeams)===null||_===void 0||(h=_[d])===null||h===void 0)&&h.isChannelSponsored)):!1});u.meta={name:"createSelector",key:"createSelectorgetChannelIsSponsored",description:(i,d)=>{var _,h;return d?((0,s.ez)((0,n.ZT)(i),d),!!(!(i==null||(_=i.extSharedChannelTeams)===null||_===void 0||(h=_[d])===null||h===void 0)&&h.isChannelSponsored)):!1}};const m=(0,t.Ay)((i,d)=>{var _,h,p,A,v,E,f,g,y;(0,s.ez)((0,n.ZT)(i),d);const I=(i==null||(_=i.extSharedChannelTeams)===null||_===void 0||(h=_[d])===null||h===void 0||(p=h.connections)===null||p===void 0?void 0:p.length)||0,O=(i==null||(A=i.extSharedChannelTeams)===null||A===void 0||(v=A[d])===null||v===void 0||(E=v.pendingConnections)===null||E===void 0?void 0:E.length)||0,M=(i==null||(f=i.extSharedChannelTeams)===null||f===void 0||(g=f[d])===null||g===void 0||(y=g.previousConnections)===null||y===void 0?void 0:y.length)||0;return I>1||O>0||M>0});m.meta={name:"createSelector",key:"createSelectordoesChannelHaveExternalTeamConnections",description:(i,d)=>{var _,h,p,A,v,E,f,g,y;(0,s.ez)((0,n.ZT)(i),d);const I=(i==null||(_=i.extSharedChannelTeams)===null||_===void 0||(h=_[d])===null||h===void 0||(p=h.connections)===null||p===void 0?void 0:p.length)||0,O=(i==null||(A=i.extSharedChannelTeams)===null||A===void 0||(v=A[d])===null||v===void 0||(E=v.pendingConnections)===null||E===void 0?void 0:E.length)||0,M=(i==null||(f=i.extSharedChannelTeams)===null||f===void 0||(g=f[d])===null||g===void 0||(y=g.previousConnections)===null||y===void 0?void 0:y.length)||0;return I>1||O>0||M>0}}},733807:(j,T,e)=>{"use strict";e.d(T,{N:()=>o});var t=e(674217),n=e(180491),s=e(104620),a=e(43335),c=e(682520),r=e(14524);const o=(0,t.Ay)("Fetch teams connected to a shared channel and upsert into frontend store.",(u,m,i)=>{let{channelId:d,reason:_="fetchAndUpsertSharedChannelTeamConnections"}=i;return(0,a.A)(d)?u((0,r.I)({reason:_,channel:d})).then(h=>{const{channel:p,connections:A=[],pending_connections:v=[],previous_connections:E=[]}=h;return u((0,s.N)({id:p.id,conversationHostId:p.conversation_host_id,isChannelSponsored:p.is_sponsored,connections:A,pendingConnections:v,previousConnections:E})),h}).catch(h=>{throw h}):((0,c.Ay)({getState:m}).warn(`fetchAndUpsertSharedChannelTeamConnections called with incorrect channelId type: ${d}`),n.S.resolve())});o.meta={name:"createThunk",key:"createThunkfetchAndUpsertSharedChannelTeamConnections",description:"Fetch teams connected to a shared channel and upsert into frontend store."}},353341:(j,T,e)=>{"use strict";e.d(T,{R:()=>n,t:()=>a});var t=e(915773);const n=(0,t.Ay)((r,o)=>{var u;return!!(!((u=r.externalTeamIds)===null||u===void 0)&&u[o])});n.meta={name:"createSelector",key:"createSelectorisTeamExternalById",description:(r,o)=>{var u;return!!(!((u=r.externalTeamIds)===null||u===void 0)&&u[o])}};var s;const a=(0,t.Ay)(r=>!!Object.keys((s=r.externalTeamIds)!==null&&s!==void 0?s:{}).length);var c;a.meta={name:"createSelector",key:"createSelectorhasAnyExternalTeam",description:r=>!!Object.keys((c=r.externalTeamIds)!==null&&c!==void 0?c:{}).length}},673843:(j,T,e)=>{"use strict";e.d(T,{Y:()=>p});var t=e(566401),n=e(915773),s=e(3477),a=e(437556),c=e(428527),r=e(23219),o=e(659973),u=e(539900),m=e(218828),i=e(388413),d=e(881805),_=e(649098);const h=new _.Ay("files"),p=(0,n.Ay)((A,v)=>{if(!v||!(0,s.Vx)(v))return null;let E=h.t("External App");const f=(v==null?void 0:v.bot_user_id)||(v==null?void 0:v.user);if(f){var g;const y=(g=(0,a.nv)(A,f))!==null&&g!==void 0?g:void 0;if((0,r.po)(y)){const I=(0,o.A)(A,y),O=(0,c.AF)(A,I)||void 0,M=(0,u.Hg)(O);if(E=M||E,(0,t.A)(M)&&I){const C=(0,i.G2)(A,{serviceId:I,homeWorkspaceId:(0,u.AW)({bot:O,member:y,currentTeamId:(0,d.ZT)(A)})});E=(0,m.fj)(C)||E}}}return E});p.meta={name:"createSelector",key:"createSelectorgetAppNameForRemoteFile",description:(A,v)=>{if(!v||!(0,s.Vx)(v))return null;let E=h.t("External App");const f=(v==null?void 0:v.bot_user_id)||(v==null?void 0:v.user);if(f){var g;const y=(g=(0,a.nv)(A,f))!==null&&g!==void 0?g:void 0;if((0,r.po)(y)){const I=(0,o.A)(A,y),O=(0,c.AF)(A,I)||void 0,M=(0,u.Hg)(O);if(E=M||E,(0,t.A)(M)&&I){const C=(0,i.G2)(A,{serviceId:I,homeWorkspaceId:(0,u.AW)({bot:O,member:y,currentTeamId:(0,d.ZT)(A)})});E=(0,m.fj)(C)||E}}}return E}}},818386:(j,T,e)=>{"use strict";e.d(T,{Y:()=>u,r:()=>o});var t=e(915773),n=e(885850),s=e(180727),a=e(57238),c=e(612204),r=e(195804);const o=l(m=>{if((0,c.Ay)(m)){const{fileIdOrQuipThreadId:_=null}=(0,r.EX)(m)||{};if(_&&(0,a.A)(_)){const h=_,p=(0,s.p)(h);return{fileId:h,channelId:p}}}if((0,a.A)(m)){const _=m,h=(0,s.p)(_);return{fileId:_,channelId:h}}const i=m;return{fileId:(0,s.l)(i),channelId:i}},"getIds"),u=(0,t.Ay)(function(m,i){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const{channelId:_}=o(i);return(0,n.OL)(m,_,d)});u.meta={name:"createSelector",key:"createSelectorgetFileChannelById",description:function(m,i){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const{channelId:_}=o(i);return(0,n.OL)(m,_,d)}}},52032:(j,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(790973),n=e(962315),s=e(930679),a=e(905582),c=e(875818);function r(o,u){if(!o||!u)return u;const m=u.comments||[],i=(0,t.A)(m,E=>E.id===o.id),d=(0,n.A)(i,["is_starred","_rxn_key"]),_={...i,...o,...d},h=(0,s.A)((0,a.A)([_,...m],"id"),"timestamp"),p=u.initial_comment&&o.id===u.initial_comment.id,A=p?_:u.initial_comment;i||(0,c.bG)(u,o),p&&(0,c.Sx)(u);const v={...u,comments:h};return A&&(v.initial_comment=A),v}l(r,"addCommentToFile")},809844:(j,T,e)=>{"use strict";e.d(T,{G:()=>a});var t=e(373314),n=e(349495);const s={enabled:!1,container:void 0},a=(0,t.Ay)({},s,{storeKey:"fullscreen",persistenceEnabled:!1}).on(n.K$,c=>({...c,enabled:!0})).on(n.sM,c=>({...c,enabled:!1,container:void 0})).on(n.Hm,(c,r)=>c.container===r?c:{...c,container:r})},53955:(j,T,e)=>{"use strict";e.d(T,{r:()=>t,u:()=>n});const t={openCount:0,unreadCount:0},n={issues:{},stats:t,locale:"",zdLocale:"",helpSearchArticles:[],productReleaseCards:[],recommendedArticles:{articles:[],requestId:""},helpSections:[],helpCategories:[],helpNavigation:{categoryId:null},helpTour:null,anchorId:null,isArticleLoaded:!1,isHelpTipHistoryTourActive:!1}},934569:(j,T,e)=>{"use strict";e.d(T,{fE:()=>de,ZL:()=>re,Fb:()=>Q,wB:()=>Ae,Cb:()=>Ee,sv:()=>G,wg:()=>ce,tL:()=>oe,aN:()=>ue,Mu:()=>$,Kb:()=>Z,cN:()=>_e,ZO:()=>ee,Eq:()=>te,PN:()=>ae});var t=e(915773),n=e(881805),s=e(446632),a=e(792866),c=e(873406),r=e(449552),o=e(235699),u=e(674217),m=e(795514),i=e(60573),d=e(999751);const _=(0,u.Ay)("Fetch product release cards into the store",(U,N,K)=>{let{locale:W}=K;return U((0,m.l)({count:3,type:"product_release_card",locale:W,reason:"client/fetch_published_product_release_cards"})).then(J=>{let{cards:q}=J;U((0,i.M0)((0,d.t)(q)))})});_.meta={name:"createThunk",key:"createThunkfetchProductReleaseCards",description:"Fetch product release cards into the store"};var h=e(372425);const p=(0,u.Ay)("Fetch helpdesk articles into the store",(U,N,K)=>{let{locale:W,reason:J}=K;return U((0,h.a)({locale:W,reason:J})).then(q=>{let{articles:ie}=q;U((0,i.NX)((0,d.t)(ie))),U((0,i.a4)(W))})});p.meta={name:"createThunk",key:"createThunkfetchHelpArticles",description:"Fetch helpdesk articles into the store"};var A=e(612104),v=e(436838),E=e(665124),f=e(180491);const g=(0,u.Ay)("Fetch recommended articles into the store",(U,N,K)=>{let{locale:W,reason:J}=K;return U((0,E.H)({reason:J})).then(function(){var q=(0,A.coroutine)(function*(ie){let{articles:Te,request_id:Me}=ie;const ke=yield f.S.all(Te.map(function(){var Pe=(0,A.coroutine)(function*(Ie){return U((0,v.w)({articleId:Ie.id,locale:W,reason:J})).then(X=>{let{article:ne}=X;return{id:ne.article_id,title:ne.title}})});return function(Ie){return Pe.apply(this,arguments)}}()));U((0,i.LV)({articles:ke,requestId:Me??""}))});return function(ie){return q.apply(this,arguments)}}())});g.meta={name:"createThunk",key:"createThunkfetchRecommendedArticles",description:"Fetch recommended articles into the store"};var y=e(449173);const I=(0,u.Ay)("Fetch help sections into the store",(U,N,K)=>{let{categoryId:W,locale:J,reason:q}=K;return U((0,y.h)({categoryId:W,locale:J,reason:q})).then(ie=>{let{sections:Te}=ie;return U((0,i.CK)((0,d.t)(Te)))})});I.meta={name:"createThunk",key:"createThunkfetchHelpSections",description:"Fetch help sections into the store"};var O=e(508625);const M=(0,u.Ay)("Fetch help categories into the store",(U,N,K)=>{let{locale:W,reason:J}=K;return U((0,O.G)({locale:W,reason:J})).then(q=>{let{categories:ie}=q;U((0,i.KO)((0,d.t)(ie))),U((0,i.WL)(W))})});M.meta={name:"createThunk",key:"createThunkfetchHelpCategories",description:"Fetch help categories into the store"};const C=(0,s.A)(()=>new c.Ay({storeKey:"help",fetch:U=>(0,r.dispatchForTeamId)(U,(0,o.w)()),isEnabled:()=>!0})),P=(0,s.A)(U=>new c.Ay({storeKey:"help",fetch:N=>(0,r.dispatchForTeamId)(N,_({locale:U})),isEnabled:()=>!0})),L=(0,s.A)((U,N)=>new c.Ay({storeKey:"help",fetch:K=>(0,r.dispatchForTeamId)(K,p({locale:U,reason:N})),isEnabled:()=>!0})),x=(0,s.A)((U,N)=>new c.Ay({storeKey:"help",fetch:K=>(0,r.dispatchForTeamId)(K,g({locale:U,reason:N})),isEnabled:()=>!0,maxAge:()=>86400})),F=(0,s.A)((U,N,K)=>new c.Ay({storeKey:"help",fetch:W=>(0,r.dispatchForTeamId)(W,I({categoryId:U,locale:N,reason:K})),isEnabled:()=>!0}),(U,N)=>(0,a.A)([U,N]).join("_")),V=(0,s.A)((U,N)=>new c.Ay({storeKey:"help",fetch:K=>(0,r.dispatchForTeamId)(K,M({locale:U,reason:N})),isEnabled:()=>!0}));var B=e(53955),D=e(649098),S=e(756512);const R=new D.Ay("help"),w="",Y=(0,t.Ay)(U=>U&&U.help||B.u);Y.meta={name:"createSelector",key:"createSelectorgetHelpState",description:U=>U&&U.help||B.u};const Q=(0,t.Ay)((U,N)=>{const K=(0,n.ZT)(U),W=(0,S.db)();return Y(U).zdLocale!==W&&L(W,N).markObjectsAsStale(K,[W]),L(W,N).maybeRefetch(K,W),Y(U).helpSearchArticles||[]});Q.meta={name:"createSelector",key:"createSelectorgetHelpArticles",description:(U,N)=>{const K=(0,n.ZT)(U),W=(0,S.db)();return Y(U).zdLocale!==W&&L(W,N).markObjectsAsStale(K,[W]),L(W,N).maybeRefetch(K,W),Y(U).helpSearchArticles||[]}};const Z=(0,t.Ay)(U=>{const N=(0,n.ZT)(U),K=(0,D.Yp)();return Y(U).locale!==K&&P(K).markObjectsAsStale(N,[K]),P(K).maybeRefetch(N,K),Y(U).productReleaseCards||[]});Z.meta={name:"createSelector",key:"createSelectorgetProductReleaseCards",description:U=>{const N=(0,n.ZT)(U),K=(0,D.Yp)();return Y(U).locale!==K&&P(K).markObjectsAsStale(N,[K]),P(K).maybeRefetch(N,K),Y(U).productReleaseCards||[]}};const ee=(0,t.Ay)((U,N)=>{var K;const W=(0,n.ZT)(U),J=(0,D.Yp)();return Y(U).locale!==J&&x(J,N).markObjectsAsStale(W,[J]),x(J,N).maybeRefetch(W,J),((K=Y(U).recommendedArticles)===null||K===void 0?void 0:K.articles)||[]});ee.meta={name:"createSelector",key:"createSelectorgetRecommendedArticles",description:(U,N)=>{var K;const W=(0,n.ZT)(U),J=(0,D.Yp)();return Y(U).locale!==J&&x(J,N).markObjectsAsStale(W,[J]),x(J,N).maybeRefetch(W,J),((K=Y(U).recommendedArticles)===null||K===void 0?void 0:K.articles)||[]}};const _e=(0,t.Ay)(U=>{var N;return((N=Y(U).recommendedArticles)===null||N===void 0?void 0:N.requestId)||""});_e.meta={name:"createSelector",key:"createSelectorgetRecommendArticlesRequestId",description:U=>{var N;return((N=Y(U).recommendedArticles)===null||N===void 0?void 0:N.requestId)||""}};const Ee=(0,t.Ay)(U=>Y(U).helpNavigation||B.u.helpNavigation);Ee.meta={name:"createSelector",key:"createSelectorgetHelpNavigation",description:U=>Y(U).helpNavigation||B.u.helpNavigation};const G=(0,t.Ay)((U,N,K)=>{var W,J;const q=(0,n.ZT)(U),ie=(0,D.Yp)(),Te=Y(U).locale,Me=K??((W=Y(U).helpNavigation)===null||W===void 0?void 0:W.categoryId),ke=(J=Y(U).helpSections[0])===null||J===void 0?void 0:J.categoryId;return Me?(ke&&Me!==ke?(F(Me,ie,N).markObjectsAsStale(q,[Me.toString()]),F(Me,ie,N).maybeRefetch(q,Me.toString())):Te!==ie&&F(Me,ie,N).markObjectsAsStale(q,[ie]),F(Me,ie,N).maybeRefetch(q,ie),Y(U).helpSections||[]):Y(U).helpSections||[]});G.meta={name:"createSelector",key:"createSelectorgetHelpSections",description:(U,N,K)=>{var W,J;const q=(0,n.ZT)(U),ie=(0,D.Yp)(),Te=Y(U).locale,Me=K??((W=Y(U).helpNavigation)===null||W===void 0?void 0:W.categoryId),ke=(J=Y(U).helpSections[0])===null||J===void 0?void 0:J.categoryId;return Me?(ke&&Me!==ke?(F(Me,ie,N).markObjectsAsStale(q,[Me.toString()]),F(Me,ie,N).maybeRefetch(q,Me.toString())):Te!==ie&&F(Me,ie,N).markObjectsAsStale(q,[ie]),F(Me,ie,N).maybeRefetch(q,ie),Y(U).helpSections||[]):Y(U).helpSections||[]}};const Ae=(0,t.Ay)((U,N)=>{const K=(0,n.ZT)(U),W=(0,D.Yp)();return Y(U).locale!==W&&V(W,N).markObjectsAsStale(K,[W]),V(W,N).maybeRefetch(K,W),Y(U).helpCategories||[]});Ae.meta={name:"createSelector",key:"createSelectorgetHelpCategories",description:(U,N)=>{const K=(0,n.ZT)(U),W=(0,D.Yp)();return Y(U).locale!==W&&V(W,N).markObjectsAsStale(K,[W]),V(W,N).maybeRefetch(K,W),Y(U).helpCategories||[]}};const ce=(0,t.Ay)(U=>Y(U).helpTour||B.u.helpTour);ce.meta={name:"createSelector",key:"createSelectorgetHelpTour",description:U=>Y(U).helpTour||B.u.helpTour};const de=(0,t.Ay)(U=>Y(U).anchorId||B.u.anchorId);de.meta={name:"createSelector",key:"createSelectorgetAnchorId",description:U=>Y(U).anchorId||B.u.anchorId};const oe=(0,t.Ay)(U=>Y(U).isArticleLoaded||B.u.isArticleLoaded);oe.meta={name:"createSelector",key:"createSelectorgetIsHelpArticleLoaded",description:U=>Y(U).isArticleLoaded||B.u.isArticleLoaded};const $=(0,t.Ay)(U=>{var N,K;if(!((N=U.desktop)===null||N===void 0||(K=N.app)===null||K===void 0)&&K.updateInfo){var W;const{releaseName:J}=U.desktop.app.updateInfo;if(!((W=U.desktop)===null||W===void 0)&&W.environment){const{appVersion:q}=U.desktop.environment;if(J.endsWith(q))return null}return J}return null});$.meta={name:"createSelector",key:"createSelectorgetPendingAppUpdateReleaseName",description:U=>{var N,K;if(!((N=U.desktop)===null||N===void 0||(K=N.app)===null||K===void 0)&&K.updateInfo){var W;const{releaseName:J}=U.desktop.app.updateInfo;if(!((W=U.desktop)===null||W===void 0)&&W.environment){const{appVersion:q}=U.desktop.environment;if(J.endsWith(q))return null}return J}return null}};const re=(0,t.Ay)(U=>{if(U.desktop&&U.desktop.app&&U.desktop.app.updateInfo){const{releaseName:N,releaseNotes:K,releaseDate:W}=U.desktop.app.updateInfo;return{timestamp:W?W.getTime():Date.now(),title:N,description:R.t("A new version of the app is available.",{fallbackHash:"6d9f3bb92920feceb484bca2ce4e062b5024208e",fallbackHashNs:"whats_new"}),url:K,url_title:R.t("See release notes",{fallbackHash:"6d9f3bb92920feceb484bca2ce4e062b5024208e",fallbackHashNs:"whats_new"}),is_app_update:!0}}return null});re.meta={name:"createSelector",key:"createSelectorgetAppUpdate",description:U=>{if(U.desktop&&U.desktop.app&&U.desktop.app.updateInfo){const{releaseName:N,releaseNotes:K,releaseDate:W}=U.desktop.app.updateInfo;return{timestamp:W?W.getTime():Date.now(),title:N,description:R.t("A new version of the app is available.",{fallbackHash:"6d9f3bb92920feceb484bca2ce4e062b5024208e",fallbackHashNs:"whats_new"}),url:K,url_title:R.t("See release notes",{fallbackHash:"6d9f3bb92920feceb484bca2ce4e062b5024208e",fallbackHashNs:"whats_new"}),is_app_update:!0}}return null}};const ue=(0,t.Ay)(U=>{const N=re(U)||null;return N?N.timestamp:-1});ue.meta={name:"createSelector",key:"createSelectorgetLatestAppUpdateTimeStamp",description:U=>{const N=re(U)||null;return N?N.timestamp:-1}};const te=(0,t.Ay)(U=>{const N=(0,n.ZT)(U);return C().maybeRefetch(N,w),Y(U).stats||B.r});te.meta={name:"createSelector",key:"createSelectorgetTicketStats",description:U=>{const N=(0,n.ZT)(U);return C().maybeRefetch(N,w),Y(U).stats||B.r}};const ae=(0,t.Ay)(U=>te(U).unreadCount);ae.meta={name:"createSelector",key:"createSelectorgetUnreadTickets",description:U=>te(U).unreadCount};const H=(0,t.Ay)(U=>Y(U).isHelpTipHistoryTourActive||B.u.isHelpTipHistoryTourActive);H.meta={name:"createSelector",key:"createSelectorgetIsHelpTipHistoryTourActive",description:U=>Y(U).isHelpTipHistoryTourActive||B.u.isHelpTipHistoryTourActive}},235699:(j,T,e)=>{"use strict";e.d(T,{w:()=>a});var t=e(674217),n=e(470470),s=e(60573);const a=(0,t.Ay)("Fetch and upsert ticket stats into the store",c=>c((0,n.I)({reason:"fetchAndUpsertTicketStats"})).then(r=>{const o={unreadCount:r.unread_count||0,openCount:r.open_count||0};return c((0,s.SX)(o)),o}));a.meta={name:"createThunk",key:"createThunkfetchAndUpsertTicketStats",description:"Fetch and upsert ticket stats into the store"}},155665:(j,T,e)=>{"use strict";e.d(T,{NJ:()=>Ee,Yl:()=>oe,pM:()=>ee,N6:()=>Z,zZ:()=>_e,bn:()=>F,Rz:()=>G,nd:()=>V,_4:()=>B,ad:()=>D,i8:()=>S,qC:()=>Y,Iy:()=>Ae,VT:()=>Q,jo:()=>w});var t=e(194092),n=e(792866),s=e(211700),a=e(915773),c=e(399284),r=e(801081),o=e(881805),u=e(491740),m=e(280743),i=e(56185),d=e(612104),_=e(180491),h=e(446632),p=e(780076),A=e(449552),v=e(309828),E=e(202740),f=e(679704);const g=(0,h.A)(()=>new p.Ay({fetch:y,metricsName:"hermesTriggers",upsertKnown:I,upsertNonExistent:I}));function y($){let re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return _.S.map(re,function(){var ue=(0,d.coroutine)(function*(te){try{return(yield(0,A.dispatchForTeamId)($,(0,v.B)({triggerId:te,includeWorkflowDetails:!0,reason:"hermes_triggers_ufm"}))).trigger}catch(ae){return{id:te,error:ae.name}}});return function(te){return ue.apply(this,arguments)}}())}l(y,"fetchTriggersForTeamId");function I($,re){const ue=re.map(te=>te.id);(0,f.X)().markObjectsAsFresh($,ue),(0,A.dispatchForTeamId)($,(0,E.z4)({triggers:re}))}l(I,"upsertTriggersForTeamId");var O=e(45798),M=e(852225),C=e(926492),P=e(726204);const L=(0,a.Ay)($=>{var re;return $==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.triggersById});L.meta={name:"createSelector",key:"createSelectorgetTriggersById",description:$=>{var re;return $==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.triggersById}};const x=(0,a.Ay)($=>{var re;return $==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.recentlyRunTriggerIds});x.meta={name:"createSelector",key:"createSelectorgetRecentlyRunTriggerIds",description:$=>{var re;return $==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.recentlyRunTriggerIds}};const F=(0,a.Ay)(($,re,ue)=>{let{triggerId:te}=re;var ae,H;const U=$==null||(ae=$.hermesTriggers)===null||ae===void 0||(H=ae.triggersById)===null||H===void 0?void 0:H[te],N=(0,o.ZT)($);return N?U?((0,f.X)().maybeRefetch(N,te),U):ue?g().fetchObjectWithId(N,te):(0,i.WQ)(te):(0,i.WQ)(te)});F.meta={name:"createSelector",key:"createSelectorgetTriggerById",description:($,re,ue)=>{let{triggerId:te}=re;var ae,H;const U=$==null||(ae=$.hermesTriggers)===null||ae===void 0||(H=ae.triggersById)===null||H===void 0?void 0:H[te],N=(0,o.ZT)($);return N?U?((0,f.X)().maybeRefetch(N,te),U):ue?g().fetchObjectWithId(N,te):(0,i.WQ)(te):(0,i.WQ)(te)}};const V=(0,c.eI)(($,re)=>{let{triggerIds:ue}=re;const te=(0,o.ZT)($);return te?ue.length?ue.map(ae=>{var H,U;const N=$==null||(H=$.hermesTriggers)===null||H===void 0||(U=H.triggersById)===null||U===void 0?void 0:U[ae];return N?((0,f.X)().maybeRefetch(te,ae),N):g().fetchObjectWithId(te,ae)}):O.Ml:ue.map(ae=>(0,i.WQ)(ae))}),B=(0,a.Ay)($=>{var re;return($==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.workflowPickerSearchInput)||""});B.meta={name:"createSelector",key:"createSelectorgetWorkflowPickerSearchInput",description:$=>{var re;return($==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.workflowPickerSearchInput)||""}};const D=(0,a.Ay)($=>{var re;return($==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.workflowPickerSearchResults)||[]});D.meta={name:"createSelector",key:"createSelectorgetWorkflowPickerSearchResults",description:$=>{var re;return($==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.workflowPickerSearchResults)||[]}};const S=(0,a.Ay)(($,re)=>{const ue=L($)||{},te=new RegExp(re,"i"),ae=Object.keys(ue).map(U=>ue[U]||{});return(0,t.A)(ae,U=>U&&((U==null?void 0:U.name)||"").match(te))||[]});S.meta={name:"createSelector",key:"createSelectorgetWorkflowPickerSearchResultsCached",description:($,re)=>{const ue=L($)||{},te=new RegExp(re,"i"),ae=Object.keys(ue).map(U=>ue[U]||{});return(0,t.A)(ae,U=>U&&((U==null?void 0:U.name)||"").match(te))||[]}};const R=(0,a.Ay)($=>{var re;return($==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.openTourId)||null});R.meta={name:"createSelector",key:"createSelectorgetGuidedTourCoachmark",description:$=>{var re;return($==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.openTourId)||null}};const w=(0,a.Ay)($=>{var re;const ue=($==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.openTourId)||"";return ue==="platform-coachmark-tour"||ue==="announce-only-platform-coachmark-tour"});w.meta={name:"createSelector",key:"createSelectorisWorkflowCoachmarkOpen",description:$=>{var re;const ue=($==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.openTourId)||"";return ue==="platform-coachmark-tour"||ue==="announce-only-platform-coachmark-tour"}};const Y=(0,a.Ay)($=>{var re;return(($==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.openTourId)||"")==="announce-only-platform-coachmark-tour"});Y.meta={name:"createSelector",key:"createSelectorisAnnounceOnlyWorkflowCoachmarkOpen",description:$=>{var re;return(($==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.openTourId)||"")==="announce-only-platform-coachmark-tour"}};const Q=(0,a.Ay)($=>{var re;return(($==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.openTourId)||"")==="slash-commands-coachmark-tour"});Q.meta={name:"createSelector",key:"createSelectorisSlashCommandsCoachmarkOpen",description:$=>{var re;return(($==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.openTourId)||"")==="slash-commands-coachmark-tour"}};const Z=(0,a.Ay)($=>{var re;return(re=x($))===null||re===void 0?void 0:re.map(ue=>F($,{triggerId:ue}))});Z.meta={name:"createSelector",key:"createSelectorgetRecentlyRunTriggers",description:$=>{var re;return(re=x($))===null||re===void 0?void 0:re.map(ue=>F($,{triggerId:ue}))}};const ee=(0,a.Ay)($=>{var re;return($==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.recentlyRunTriggerTimestamps)||{}});ee.meta={name:"createSelector",key:"createSelectorgetRecentlyRunTriggerTimestamps",description:$=>{var re;return($==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.recentlyRunTriggerTimestamps)||{}}};const _e=(0,a.Ay)($=>{var re;return $==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.recentlyRunTriggerWorkflowActivity});_e.meta={name:"createSelector",key:"createSelectorgetRecentlyRunTriggersWorkflowActivity",description:$=>{var re;return $==null||(re=$.hermesTriggers)===null||re===void 0?void 0:re.recentlyRunTriggerWorkflowActivity}};const Ee=(0,r.Mz)($=>L($),$=>{if(!$)return O.Ml;const re=(0,n.A)($);return(0,t.A)(re,te=>!(!(0,P.G)(te)||te.workflow_details&&!te.workflow_details.is_published))}),G=(0,a.Ay)(($,re)=>{let{appId:ue}=re;const te=L($)||{};return Object.values(te).find(H=>{var U;return(H==null||(U=H.workflow)===null||U===void 0?void 0:U.app_id)===ue})});G.meta={name:"createSelector",key:"createSelectorgetTriggerFromSlackAppId",description:($,re)=>{let{appId:ue}=re;const te=L($)||{};return Object.values(te).find(H=>{var U;return(H==null||(U=H.workflow)===null||U===void 0?void 0:U.app_id)===ue})}};const Ae=(0,a.Ay)(($,re)=>{const ue=(0,m.$N)($,re);return ue?(ue==null?void 0:ue.type)===m.im.SHORTCUT_LINK_TRIGGER:!1});Ae.meta={name:"createSelector",key:"createSelectorisHermesLinkTriggerFormat",description:($,re)=>{const ue=(0,m.$N)($,re);return ue?(ue==null?void 0:ue.type)===m.im.SHORTCUT_LINK_TRIGGER:!1}};const ce=(0,a.Ay)(($,re)=>{let{triggerId:ue}=re;const te=F($,{triggerId:ue},!1);return te==null?void 0:te.shortcut_url});ce.meta={name:"createSelector",key:"createSelectorgetShortcutUrl",description:($,re)=>{let{triggerId:ue}=re;const te=F($,{triggerId:ue},!1);return te==null?void 0:te.shortcut_url}};const de=(0,a.Ay)(($,re)=>{let{triggerId:ue}=re;var te;return!!(!($==null||(te=$.hermesTriggers)===null||te===void 0)&&te.triggersMarkedStaleInSession[ue])});de.meta={name:"createSelector",key:"createSelectorhasTriggerBeenMarkedStaleInSession",description:($,re)=>{let{triggerId:ue}=re;var te;return!!(!($==null||(te=$.hermesTriggers)===null||te===void 0)&&te.triggersMarkedStaleInSession[ue])}};const oe=(0,a.Ay)(($,re)=>{let{block:ue}=re;var te;const ae=ue.functionTriggerId,H=(0,M.U)(ue);if(!de($,{triggerId:ae}))return H;const N=F($,{triggerId:ae},!0),K=N==null||(te=N.workflow)===null||te===void 0?void 0:te.workflow_id,W=K?(0,u.g)($,K):void 0;return(0,i.mX)(N)||!W||(0,i.mX)(W)?H:(0,C.V)({passedShortcutInfo:H,trigger:N,workflow:W})});oe.meta={name:"createSelector",key:"createSelectorgetFreshShortcutInfoForShareShortcutBlock",description:($,re)=>{let{block:ue}=re;var te;const ae=ue.functionTriggerId,H=(0,M.U)(ue);if(!de($,{triggerId:ae}))return H;const N=F($,{triggerId:ae},!0),K=N==null||(te=N.workflow)===null||te===void 0?void 0:te.workflow_id,W=K?(0,u.g)($,K):void 0;return(0,i.mX)(N)||!W||(0,i.mX)(W)?H:(0,C.V)({passedShortcutInfo:H,trigger:N,workflow:W})}},(0,s.ul)("hermesTriggers",function($,re){let{triggerId:ue}=re,te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return F($,{triggerId:ue},te)})},944881:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>E,tP:()=>v});var t=e(612104),n=e.n(t),s=e(474722),a=e(64741),c=e(408422),r=e(674217),o=e(679704),u=e(881805),m=e(202740),i=e(682520),d=e(824963),_=e(155665);const h=(0,r.Ay)("Fetch triggers with query",function(){var g=(0,t.coroutine)(function*(y,I,O){let{query:M,currentChannelId:C,isWorkflowPickerSearch:P=!1,fetchShortcutsOnly:L=!1}=O;const x=I(),F=(0,u.ZT)(x),V=(0,d.X)(x),D=!P,S=P||!L;if(V.containsPrefixOf(M)){if(P){const R=(0,_.i8)(x,M);return y((0,m.we)({results:R})),R}}else try{const w=(yield y((0,c.v)({query:M,currentChannelId:C,strictExposureRules:D,triggerTypes:S?["shortcut","event","webhook","scheduled","service"]:["shortcut"],reason:"hermes_triggers_store:fetch_and_upsert_triggers"}))).triggers,Y=5;return w.length<Y&&(V.addAsPrefix(M),V.clearRequestInFlight()),F&&(0,o.X)().markObjectsAsFresh(F,(0,s.A)(w,"id")),y((0,m.z4)({triggers:w})),P&&y((0,m.we)({results:w})),w}catch(R){return(0,i.Wo)().error(R,"There was an issue fetching triggers with query"),[]}return[]});return function(y,I,O){return g.apply(this,arguments)}}());h.meta={name:"createThunk",key:"createThunkfetchAndUpsertTriggersWithQuery",description:"Fetch triggers with query"};const p=500,A=(0,a.A)((g,y)=>g(h({query:y})),p,{leading:!0,trailing:!0}),v=(0,r.Ay)("debounced fetch and upsert triggers with query",(g,y,I)=>{let{query:O}=I;return A(g,O)});v.meta={name:"createThunk",key:"createThunkdebouncedFetchAndUpsertTriggersWithQuery",description:"debounced fetch and upsert triggers with query"};const E=h,f={DEBOUNCE_MS:p}},491740:(j,T,e)=>{"use strict";e.d(T,{g:()=>E,R:()=>f});var t=e(915773),n=e(56185),s=e(881805),a=e(23985),c=e(612104),r=e(446632),o=e(474722),u=e(180491),m=e(780076),i=e(449552),d=e(645864),_=e(324659);const h=(0,r.A)(()=>new m.Ay({fetch:p,upsertKnown:A,upsertNonExistent:A,isEnabled:()=>!0}));function p(g,y){return u.S.map(y,function(){var I=(0,c.coroutine)(function*(O){try{return(yield(0,i.dispatchForTeamId)(g,(0,d.D)({workflowId:O,reason:"hermes_workflows_store"}))).workflow}catch{var M;const P=(M=(0,i.getStateByTeamId)(g).hermesWorkflows)===null||M===void 0?void 0:M[O];return(0,m.GU)(P)?null:P}});return function(O){return I.apply(this,arguments)}}()).filter(I=>I)}l(p,"fetchWorkflowsForTeamId");function A(g,y){(0,a.G)().markObjectsAsFresh(g,(0,o.A)(y,"id")),(0,i.dispatchForTeamId)(g,(0,_.uY)({workflows:y}))}l(A,"upsertWorkflowsForTeamId");const v={fetchWorkflowsForTeamId:p,upsertWorkflowsForTeamId:A},E=(0,t.Ay)(function(g,y){let I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;var O;const M=(0,s.ZT)(g),C=(O=g.hermesWorkflows)===null||O===void 0?void 0:O[y];return M?C?((0,a.G)().maybeRefetch(M,y),C):I?h().fetchObjectWithId(M,y):(0,n.WQ)(y):(0,n.WQ)(y)});E.meta={name:"createSelector",key:"createSelectorgetWorkflowById",description:function(g,y){let I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;var O;const M=(0,s.ZT)(g),C=(O=g.hermesWorkflows)===null||O===void 0?void 0:O[y];return M?C?((0,a.G)().maybeRefetch(M,y),C):I?h().fetchObjectWithId(M,y):(0,n.WQ)(y):(0,n.WQ)(y)}};const f=(0,t.Ay)((g,y)=>{const I=E(g,y);return(0,n.GU)(I)?[]:I.steps});f.meta={name:"createSelector",key:"createSelectorgetWorkflowStepsById",description:(g,y)=>{const I=E(g,y);return(0,n.GU)(I)?[]:I.steps}}},458380:(j,T,e)=>{"use strict";e.d(T,{GF:()=>m,Tk:()=>i,UI:()=>v,X_:()=>d,iN:()=>A,pm:()=>h,t6:()=>E,vc:()=>_,xA:()=>p});var t=e(801081),n=e(3477),s=e(969924),a=e(646464),c=e(264918);const r=l((f,g)=>{var y;return g?(y=(0,s.Lp)(f,g))===null||y===void 0?void 0:y.localUpdated:null},"getFileLocalUpdated"),o=l(f=>(0,c.lt)(f),"getFileId"),u=l(f=>(0,t.Mz)([g=>(0,c.JC)(g),g=>{const y=o(g);return r(g,y)},g=>{const y=o(g);return y?(0,s.Lp)(g,y):null}],(g,y,I)=>I!=null&&I.id&&(g===a.cM.CanvasFile||g===a.cM.QuipFile)?f(I):null),"selectFromUpdatedFile"),m=u(f=>f),i=u(f=>f==null?void 0:f.id),d=u(f=>f?(0,n.sJ)(f):!1),_=u(f=>f?(0,n.uO)(f):!1),h=u(f=>f?(0,n.WP)(f):null),p=u(f=>f==null?void 0:f.user),A=u(f=>!!f),v=u(f=>f?(0,n.l7)(f):!1),E=u(f=>f?(0,n.wL)(f):!1)},8684:(j,T,e)=>{"use strict";e.d(T,{x:()=>f});var t=e(997859),n=e(674217),s=e(449552),a=e(561303),c=e(204258),r=e(264918),o=e(646464),u=e(199207),m=e(134309),i=e(812754),d=e(819187),_=e(47801),h=e(532395),p=e(381666),A=e(477659),v=e(586529);const E=l((y,I,O,M)=>{const C=(0,s.getStateForClientStore)(),P=(0,c.E9)(C),L=(0,_.$t)(I,{huddleId:P}),x=(0,_.kn)(C),F=(0,_.UE)(C),V=(0,m.Ec)(I,{huddleId:P});let B,D,S=null,R=null,w=null;if(O===o.cM.None)B=i.Hi.FOCUS_CLOSE,D=(0,m.U7)(I,{key:i.Hi.FOCUS_OPEN});else{var Y;switch(B=i.Hi.FOCUS_OPEN,D=(0,d.A)(),w=(M==null||(Y=M.item)===null||Y===void 0?void 0:Y.id)||null,O){case o.cM.Screenshare:S="focus_screenshare",R="screenshare";break;default:S="focus_file",R="file"}y((0,u.Mn)({key:i.Hi.FOCUS_OPEN,value:D}))}(0,p.e)({state:I}).track(h.EventId.CANVAS_EVENT,{contexts:{ui_context:{ui_page:V?V.toString():null,ui_properties:{element_name:B},action:h.UiAction.IMPRESSION},calls:F},...L,...x,interaction_id:D,canvas_dimension_marker:S,type:R,item_file_id:w})},"clogCanvasEvent"),f=(0,n.Ay)("Sets a user content view which represents what the user is focused on in the canvas",(y,I,O)=>{if(!O||(0,t.A)(O.contentViewType))return;const M=I(),C=O.contentViewType,P=!1;if(C===o.cM.Screenshare){const x=(0,r.JC)(M),F=g(M);x===o.cM.None&&!F&&y((0,u.fI)({isThreadOpen:!1})),y((0,u.Zx)({userId:""}))}y((0,u.YC)({isFullscreen:P})),y((0,u.s7)({isNotesOpen:C===o.cM.QuipFile}));const L=O.contentViewType===o.cM.None||!O.contentViewConfig?{}:O.contentViewConfig;y((0,r.sK)({id:O.peerId,contentViewType:C,contentViewConfig:L})),(0,s.dispatchForClientStore)((0,a.xq)({contentViewType:C,contentViewConfig:L})),E(y,M,C,L)});f.meta={name:"createThunk",key:"createThunksetContentView",description:"Sets a user content view which represents what the user is focused on in the canvas"};function g(y){const I=(0,s.getStateForClientStore)(),O=(0,c.E9)(I),M=(0,c.hc)(I),C=(0,m.fG)(y,{huddleId:O});if(!(C!=null&&C.ts)||!M)return!1;const P=(0,A.zC)({viewContext:v.Y.HUDDLE_THREADS,channelId:M,threadTs:C.ts});return(P==null?void 0:P.hasFocus())||!1}l(g,"doesThreadInputHaveFocus")},896486:(j,T,e)=>{"use strict";e.d(T,{Lm:()=>a,T3:()=>s,U$:()=>c,WO:()=>n,dD:()=>o,h2:()=>r,jL:()=>u});var t=e(152532);const n=(0,t.Ay)("Enable huddle event log");n.meta={name:"createAction",key:"createActionenableEventLog",description:"Enable huddle event log"};const s=(0,t.Ay)("Disable huddle event log");s.meta={name:"createAction",key:"createActiondisableEventLog",description:"Disable huddle event log"};const a=(0,t.Ay)("Set loading state for huddle event log");a.meta={name:"createAction",key:"createActionsetEventLogLoading",description:"Set loading state for huddle event log"};const c=(0,t.Ay)("Add non-transcription event");c.meta={name:"createAction",key:"createActionpushNonTranscriptionEvent",description:"Add non-transcription event"};const r=(0,t.Ay)("Update with latest transcription events");r.meta={name:"createAction",key:"createActionupdateTranscriptions",description:"Update with latest transcription events"};const o=(0,t.Ay)("Set enabled state for huddle captions side-by-side view");o.meta={name:"createAction",key:"createActionsetSideBySideEnabled",description:"Set enabled state for huddle captions side-by-side view"};const u=(0,t.Ay)("Set enabled state for huddle closed captions view");u.meta={name:"createAction",key:"createActionsetClosedCaptionsEnabled",description:"Set enabled state for huddle closed captions view"}},104960:(j,T,e)=>{"use strict";e.d(T,{u:()=>n,y:()=>t});const t=2e3,n=2e3},845375:(j,T,e)=>{"use strict";e.d(T,{Cb:()=>d,M3:()=>u,TP:()=>r,VN:()=>m,gL:()=>o,iv:()=>_});var t=e(801081),n=e(915773),s=e(104960),a=e(84484);const c=(0,n.Ay)(h=>h.huddleEvents);c.meta={name:"createSelector",key:"createSelectorgetHuddleEventsData",description:h=>h.huddleEvents};const r=(0,n.Ay)(h=>c(h).enabled);r.meta={name:"createSelector",key:"createSelectorareHuddleEventsEnabled",description:h=>c(h).enabled};const o=(0,n.Ay)(h=>c(h).isLoading);o.meta={name:"createSelector",key:"createSelectorareHuddleEventsLoading",description:h=>c(h).isLoading};const u=(0,n.Ay)(h=>h.huddleEvents.isSideBySideEnabled);u.meta={name:"createSelector",key:"createSelectorisHuddleSideBySideCaptionsEnabled",description:h=>h.huddleEvents.isSideBySideEnabled};const m=(0,n.Ay)(h=>h.huddleEvents.isClosedCaptionsEnabled);m.meta={name:"createSelector",key:"createSelectorisHuddleClosedCaptionsEnabled",description:h=>h.huddleEvents.isClosedCaptionsEnabled};const i=(0,n.Ay)(h=>h.huddleEvents.isClosedCaptionsEnabled);i.meta={name:"createSelector",key:"createSelectorHuddlesPersistTranscriptToggle",description:h=>h.huddleEvents.isClosedCaptionsEnabled};const d=(0,t.Mz)(h=>c(h).events,h=>{const p=[];let A,v=[];const E=l(()=>{A&&p.push({...A,content:v.join(" ")})},"maybeCommit");return h.forEach(f=>{A&&f.type===a.v.TRANSCRIBE&&A.memberId===f.memberId&&f.timestampMs-A.endTimeMs<s.y?(v.push(f.content),A.endTimeMs=f.endTimeMs):(E(),f.type===a.v.TRANSCRIBE?(A={type:a.v.TRANSCRIBE,resultId:"",memberId:f.memberId,content:"",timestampMs:f.timestampMs,endTimeMs:f.endTimeMs},v=[f.content]):(A=null,v=[],p.push(f)))}),E(),p}),_=(0,t.Mz)(h=>d(h),h=>h.filter(p=>p.type===a.v.TRANSCRIBE||p.type===a.v.START_TRANSCRIPTION).slice(-5))},285597:(j,T,e)=>{"use strict";e.d(T,{A:()=>g});var t=e(612104),n=e.n(t),s=e(674217),a=e(68080),c=e(180491),r=e(178249),o=e(890401),u=e(896486),m=e(845375),i=e(930885),d=e(449552),_=e(682520),h=e(204258),p=e(84484),A=e(566173),v=e(515456),E=e(852922);const f=(0,s.Ay)("Start transcription for current huddle",function(){var y=(0,t.coroutine)(function*(I,O){if((0,m.TP)(O())||(0,m.gL)(O()))return c.S.resolve();const M=(0,d.getStateForClientStore)(),C=(0,h.E9)(M);return C?(I((0,u.WO)()),I((0,u.Lm)(!0)),yield(0,i.A)(),I((0,A.e)({clearOnEndedCallback:!0,logContext:"huddles-captions-turned-on",isStoppedByUser:!0})),I((0,a.i)({reason:"start-event-log",callId:C})).catch(P=>{var L;if(((L=P.data)===null||L===void 0?void 0:L.error)==="permission_denied")return c.S.delay(5e3).then(()=>I((0,a.i)({reason:"start-event-log/retry",callId:C})));throw P}).catch(P=>{(0,_.Ay)({getState:O}).error(P),I((0,u.T3)())}).finally(()=>{I((0,u.Lm)(!1)),I((0,r.H)({focusKey:o.Ay.HUDDLE_CAPTIONS_TAB})),I((0,u.U$)({type:p.v.START_TRANSCRIPTION,memberId:"USLACKBOT",timestampMs:Date.now()}));const{huddleEventsTrace:P}=(0,v.A)().getAllTraceHandlers();P==null||P.update({name:E.p.TRANSCRIPT,type:E.G.START})})):c.S.reject(new Error("No active call ID for huddle"))});return function(I,O){return y.apply(this,arguments)}}());f.meta={name:"createThunk",key:"createThunkstartEventLog",description:"Start transcription for current huddle"};const g=f},892285:(j,T,e)=>{"use strict";e.d(T,{A:()=>d});var t=e(674217),n=e(100100),s=e(180491),a=e(896486),c=e(845375),r=e(449552),o=e(204258),u=e(515456),m=e(852922);const i=(0,t.Ay)("Stop transcription for current huddle",(_,h)=>{if(!(0,c.TP)(h())||(0,c.gL)(h()))return s.S.resolve();const p=(0,r.getStateForClientStore)(),A=(0,o.E9)(p);return A?(_((0,a.T3)()),_((0,a.Lm)(!0)),_((0,n.W)({reason:"stop-event-log",callId:A})).finally(()=>{_((0,a.Lm)(!1));const{huddleEventsTrace:v}=(0,u.A)().getAllTraceHandlers();v==null||v.update({name:m.p.TRANSCRIPT,type:m.G.STOP})})):s.S.reject(new Error("No active call ID for huddle"))});i.meta={name:"createThunk",key:"createThunkstopEventLog",description:"Stop transcription for current huddle"};const d=i},84484:(j,T,e)=>{"use strict";e.d(T,{v:()=>t});var t;(function(n){n.JOIN="JOIN",n.LEAVE="LEAVE",n.SCREENSHARE_START="SCREENSHARE_START",n.SCREENSHARE_STOP="SCREENSHARE_STOP",n.TRANSCRIBE="TRANSCRIBE",n.SEND_REACTION="SEND_REACTION",n.START_TRANSCRIPTION="START_TRANSCRIPTION"})(t||(t={}))},561303:(j,T,e)=>{"use strict";e.d(T,{Ag:()=>Z,B5:()=>q,Bk:()=>F,Db:()=>N,Dj:()=>Pe,Gx:()=>oe,HC:()=>C,HF:()=>M,Hg:()=>Te,I9:()=>m,JM:()=>ue,Jc:()=>A,Ko:()=>V,Lx:()=>H,M4:()=>d,OA:()=>U,QZ:()=>I,Rb:()=>x,Rh:()=>p,Rr:()=>O,Sd:()=>c,Sn:()=>g,TK:()=>Me,VU:()=>s,WB:()=>D,WM:()=>Y,WY:()=>ae,YA:()=>y,Yi:()=>B,_H:()=>ce,_I:()=>r,_U:()=>_e,_u:()=>te,aO:()=>w,bV:()=>Ee,bk:()=>re,cx:()=>$,f2:()=>R,fP:()=>f,hB:()=>v,kg:()=>ie,kn:()=>a,nI:()=>J,nU:()=>i,nw:()=>K,o9:()=>W,og:()=>xe,ol:()=>P,pl:()=>u,qW:()=>o,qr:()=>G,so:()=>_,t2:()=>ke,u8:()=>E,xf:()=>h,xq:()=>ee,yR:()=>L,yi:()=>de});var t=e(152532),n=e(674217);const s=(0,t.Ay)("Set flag to indicate if Huddles is enabled.");s.meta={name:"createAction",key:"createActionsetIsHuddlesEnabled",description:"Set flag to indicate if Huddles is enabled."};const a=(0,t.Ay)("Stores audio reference that will be passed to SDK");a.meta={name:"createAction",key:"createActionstoreHuddlesAudioRef",description:"Stores audio reference that will be passed to SDK"};const c=(0,t.Ay)("Start video shariing");c.meta={name:"createAction",key:"createActionstartVideoSharing",description:"Start video shariing"};const r=(0,t.Ay)("Stop video shariing");r.meta={name:"createAction",key:"createActionstopVideoSharing",description:"Stop video shariing"};const o=(0,t.Ay)("Connect to Huddle media server");o.meta={name:"createAction",key:"createActionconnectToHuddlesMediaServer",description:"Connect to Huddle media server"};const u=(0,t.Ay)("Leave the huddle and stop media transmission");u.meta={name:"createAction",key:"createActiondisconnectHuddlesFromMediaServer",description:"Leave the huddle and stop media transmission"};const m=(0,t.Ay)("Enable or disable local microphone");m.meta={name:"createAction",key:"createActionenableSelfMicrophone",description:"Enable or disable local microphone"};const i=(0,t.Ay)("Send an emoji reaction");i.meta={name:"createAction",key:"createActionsendReactionMessage",description:"Send an emoji reaction"};const d=(0,t.Ay)("Send a sticky emoji reaction");d.meta={name:"createAction",key:"createActionsendStickyReactionMessage",description:"Send a sticky emoji reaction"};const _=(0,t.Ay)("Send a mute request");_.meta={name:"createAction",key:"createActionsendMuteRequestMessage",description:"Send a mute request"};const h=(0,t.Ay)("Insert new active huddle reference with teamId channelId, etc.");h.meta={name:"createAction",key:"createActionaddActiveHuddleReference",description:"Insert new active huddle reference with teamId channelId, etc."};const p=(0,t.Ay)("Upsert existing active huddle reference");p.meta={name:"createAction",key:"createActionupdateActiveHuddleReference",description:"Upsert existing active huddle reference"};const A=(0,t.Ay)("Upsert existing active huddle channel");A.meta={name:"createAction",key:"createActionupdateActiveHuddleChannel",description:"Upsert existing active huddle channel"};const v=(0,t.Ay)("Set active huddle invite");v.meta={name:"createAction",key:"createActionupsertInvite",description:"Set active huddle invite"};const E=(0,t.Ay)("Clear invite for given channel ID");E.meta={name:"createAction",key:"createActionclearInviteForChannelId",description:"Clear invite for given channel ID"};const f=(0,t.Ay)("Mark invite notifications as viewed by clearing them.");f.meta={name:"createAction",key:"createActionmarkInvitesSeenForTeam",description:"Mark invite notifications as viewed by clearing them."};const g=(0,n.Ay)("Mark invite notifications as viewed by clearing them after a delay",(He,je,Ke)=>{let{delay:ht,teamId:dt}=Ke;setTimeout(()=>{He(f({teamId:dt,markBeforeMs:Date.now()-ht}))},ht)});g.meta={name:"createThunk",key:"createThunkmarkInvitesReadOnDelay",description:"Mark invite notifications as viewed by clearing them after a delay"};const y=(0,t.Ay)("Start screen share for current user with given mediaSourceId");y.meta={name:"createAction",key:"createActionstartScreenShare",description:"Start screen share for current user with given mediaSourceId"};const I=(0,t.Ay)("Stop screen share for current user");I.meta={name:"createAction",key:"createActionstopScreenShare",description:"Stop screen share for current user"};const O=(0,t.Ay)("Notify peers of changes to isDrawEnabled");O.meta={name:"createAction",key:"createActionpropagateDrawEnabled",description:"Notify peers of changes to isDrawEnabled"};const M=(0,t.Ay)("Enabled annotations for screen share host");M.meta={name:"createAction",key:"createActionpropagateHostDrawEnabled",description:"Enabled annotations for screen share host"};const C=(0,t.Ay)("Notify middleware that a new preferred device was selected");C.meta={name:"createAction",key:"createActionsetNewPreferredDevice",description:"Notify middleware that a new preferred device was selected"};const P=(0,t.Ay)("Notify middleware that automatic gain control setting has changed");P.meta={name:"createAction",key:"createActionsetAGC",description:"Notify middleware that automatic gain control setting has changed"};const L=(0,t.Ay)("Notify middleware that noise suppression setting has changed");L.meta={name:"createAction",key:"createActionsetNoiseSuppression",description:"Notify middleware that noise suppression setting has changed"};const x=(0,t.Ay)("Notify middleware that video background setting has changed");x.meta={name:"createAction",key:"createActionsetVideoBackgroundEffect",description:"Notify middleware that video background setting has changed"};const F=(0,t.Ay)("Toggle global keyboard shortcut support for muting / unmuting a huddle");F.meta={name:"createAction",key:"createActiontoggleGlobalMuteShortcut",description:"Toggle global keyboard shortcut support for muting / unmuting a huddle"};const V=(0,t.Ay)("Internal store update for mini-panel visibility");V.meta={name:"createAction",key:"createActioninternalUpdateMiniPanelVisibility",description:"Internal store update for mini-panel visibility"};const B=(0,t.Ay)("Upsert join credentials for a channel");B.meta={name:"createAction",key:"createActionupsertJoinCredentialsForChannel",description:"Upsert join credentials for a channel"};const D=(0,t.Ay)("Clear the join credentials for a specific channel");D.meta={name:"createAction",key:"createActionclearJoinCredentialsForChannel",description:"Clear the join credentials for a specific channel"};const S=(0,t.Ay)("Store and/or remote push Chime meeting events");S.meta={name:"createAction",key:"createActionhandleMeetingEvents",description:"Store and/or remote push Chime meeting events"};const R=(0,t.Ay)("Transition from the prejoin state to started");R.meta={name:"createAction",key:"createActiontransitionFromPrejoinToStarted",description:"Transition from the prejoin state to started"};const w=(0,t.Ay)("Action to update the store to either show or hide discovery banner");w.meta={name:"createAction",key:"createActionupdateDiscoveryBannerVisibility",description:"Action to update the store to either show or hide discovery banner"};const Y=(0,t.Ay)("Toggle Video");Y.meta={name:"createAction",key:"createActiontoggleVideo",description:"Toggle Video"};const Q=(0,t.Ay)("Reporting CPU and memory usage stats");Q.meta={name:"createAction",key:"createActionreportAppMetrics",description:"Reporting CPU and memory usage stats"};const Z=(0,t.Ay)("Set true to specify that lounge music is playing, false otherwise.");Z.meta={name:"createAction",key:"createActionsetIsLoungeMusicPlaying",description:"Set true to specify that lounge music is playing, false otherwise."};const ee=(0,t.Ay)("Set current focused view type");ee.meta={name:"createAction",key:"createActionsetContentView",description:"Set current focused view type"};const _e=(0,t.Ay)("Set last huddle start time");_e.meta={name:"createAction",key:"createActionsetLastHuddleStartTs",description:"Set last huddle start time"};const Ee=(0,t.Ay)("Set last huddle end time");Ee.meta={name:"createAction",key:"createActionsetLastHuddleEndTs",description:"Set last huddle end time"};const G=(0,t.Ay)("Set last huddle duration time");G.meta={name:"createAction",key:"createActionsetLastHuddleDurationTs",description:"Set last huddle duration time"};const Ae=(0,t.Ay)("Toggle video background filter");Ae.meta={name:"createAction",key:"createActiontoggleVideoBackgroundFilter",description:"Toggle video background filter"};const ce=(0,t.Ay)("Starts the video preview on the video element using the specified device");ce.meta={name:"createAction",key:"createActionstartVideoPreview",description:"Starts the video preview on the video element using the specified device"};const de=(0,t.Ay)("Stops the video preview on the video element");de.meta={name:"createAction",key:"createActionstopVideoPreview",description:"Stops the video preview on the video element"};const oe=(0,t.Ay)("Identifies which screenshare is being viewed in the mini-player");oe.meta={name:"createAction",key:"createActionsetScreenshareActivePanel",description:"Identifies which screenshare is being viewed in the mini-player"};const $=(0,t.Ay)("Resets the store");$.meta={name:"createAction",key:"createActionresetClientHuddleStore",description:"Resets the store"};const re=(0,t.Ay)("Start the canvas jukebox using content share");re.meta={name:"createAction",key:"createActionstartContentShareJukebox",description:"Start the canvas jukebox using content share"};const ue=(0,t.Ay)("Stop the canvas jukebox");ue.meta={name:"createAction",key:"createActionstopJukebox",description:"Stop the canvas jukebox"};const te=(0,t.Ay)("Set selected song");te.meta={name:"createAction",key:"createActionsetSongPlaying",description:"Set selected song"};const ae=(0,t.Ay)("Send jukebox active song");ae.meta={name:"createAction",key:"createActionsendJukeboxActiveSong",description:"Send jukebox active song"};const H=(0,t.Ay)("Request a jukebox song");H.meta={name:"createAction",key:"createActionrequestJukeboxSong",description:"Request a jukebox song"};const U=(0,t.Ay)("Request the jukebox stops");U.meta={name:"createAction",key:"createActionrequestJukeboxStop",description:"Request the jukebox stops"};const N=(0,t.Ay)("Send recording start notification");N.meta={name:"createAction",key:"createActionsendRecordingStartNotification",description:"Send recording start notification"};const K=(0,t.Ay)("Sets whether the active invite card in the sidebar can be rendered");K.meta={name:"createAction",key:"createActionsetCanRenderActiveInviteCardInSidebar",description:"Sets whether the active invite card in the sidebar can be rendered"};const W=(0,t.Ay)("Sets whether the huddle window of an active huddle is in focus or not.");W.meta={name:"createAction",key:"createActionsetIsHuddleWindowFocused",description:"Sets whether the huddle window of an active huddle is in focus or not."};const J=(0,t.Ay)("Sets whether the huddle window of an active huddle is open or not.");J.meta={name:"createAction",key:"createActiontoggleAllIncomingVideo",description:"Sets whether the huddle window of an active huddle is open or not."};const q=(0,t.Ay)("Reports to the SDK when the client is offline");q.meta={name:"createAction",key:"createActionreportClientOffline",description:"Reports to the SDK when the client is offline"};const ie=(0,t.Ay)("Sets whether audio only mode is active or not.");ie.meta={name:"createAction",key:"createActionsetIsAudioOnlyMode",description:"Sets whether audio only mode is active or not."};const Te=(0,t.Ay)("Sets whether the camera was enabled when audio only mode was activated.");Te.meta={name:"createAction",key:"createActionsetAudioOnlyModeCameraWasEnabled",description:"Sets whether the camera was enabled when audio only mode was activated."};const Me=(0,t.Ay)("Sets whether the huddle window of an active huddle is open or not.");Me.meta={name:"createAction",key:"createActionsetIsHuddleWindowOpen",description:"Sets whether the huddle window of an active huddle is open or not."};const ke=(0,t.Ay)("True if huddle mini player is hidden, false if shown.");ke.meta={name:"createAction",key:"createActionsetIsHuddleMiniPlayerHidden",description:"True if huddle mini player is hidden, false if shown."};const Pe=(0,t.Ay)("Asks for video permission and enumerates devices");Pe.meta={name:"createAction",key:"createActioninitVideoPermission",description:"Asks for video permission and enumerates devices"};const Ie=(0,t.Ay)("Execute readiness check for audio input");Ie.meta={name:"createAction",key:"createActionexecuteHuddlesAudioInputReadinessCheck",description:"Execute readiness check for audio input"};const X=(0,t.Ay)("Execute readiness check for audio output");X.meta={name:"createAction",key:"createActionexecuteHuddlesAudioOutputReadinessCheck",description:"Execute readiness check for audio output"};const ne=(0,t.Ay)("Execute readiness check for video input");ne.meta={name:"createAction",key:"createActionexecuteHuddlesVideoInputReadinessCheck",description:"Execute readiness check for video input"};const fe=(0,t.Ay)("Execute readiness check for a particular camera resolution");fe.meta={name:"createAction",key:"createActionexecuteHuddlesCameraResolutionReadinessCheck",description:"Execute readiness check for a particular camera resolution"};const be=(0,t.Ay)("Execute readiness check for audio connectivity");be.meta={name:"createAction",key:"createActionexecuteHuddlesAudioConnectivityReadinessCheck",description:"Execute readiness check for audio connectivity"};const Be=(0,t.Ay)("Execute readiness check for video connectivity");Be.meta={name:"createAction",key:"createActionexecuteHuddlesVideoConnectivityReadinessCheck",description:"Execute readiness check for video connectivity"};const We=(0,t.Ay)("Execute readiness check for content share connectivity");We.meta={name:"createAction",key:"createActionexecuteHuddlesContentShareConnectivityReadinessCheck",description:"Execute readiness check for content share connectivity"};const Re=(0,t.Ay)("Execute readiness check for network UDP connectivity");Re.meta={name:"createAction",key:"createActionexecuteHuddlesNetworkUDPConnectivityReadinessCheck",description:"Execute readiness check for network UDP connectivity"};const ve=(0,t.Ay)("Execute readiness check for network TCP connectivity");ve.meta={name:"createAction",key:"createActionexecuteNetworkTCPConnectivityReadinessCheck",description:"Execute readiness check for network TCP connectivity"};const xe=(0,t.Ay)("Sets that the Huddle was joined via prejoin");xe.meta={name:"createAction",key:"createActionsetHuddleWasJoinedFromPrejoin",description:"Sets that the Huddle was joined via prejoin"}},170130:(j,T,e)=>{"use strict";e.d(T,{A:()=>c,p:()=>r});var t=e(204258),n=e(561303),s=e(674217);let a;const c=(0,s.Ay)("Temporarily show mini-panel",function(o,u){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2500;clearTimeout(a),o((0,n.Ko)(!0)),a=setTimeout(()=>o((0,n.Ko)(!1)),m)});c.meta={name:"createThunk",key:"createThunkshowMiniPanelForDuration",description:"Temporarily show mini-panel"};const r=(0,s.Ay)("Temporarily pause mini-panel visibility transition",(o,u)=>{const m=u();(0,t.Ae)(m)&&clearTimeout(a)});r.meta={name:"createThunk",key:"createThunkpauseMiniPanelTimeout",description:"Temporarily pause mini-panel visibility transition"}},944780:(j,T,e)=>{"use strict";e.d(T,{WS:()=>s,nq:()=>n,o7:()=>t});const t="HUDDLES",n=864e5,s=2},565526:(j,T,e)=>{"use strict";e.d(T,{A:()=>Pe});var t=e(612104),n=e(446632),s=e(264918),a=e(492630),c=e(519543),r=e(449552),o=e(113574),u=e(921055),m=e(285597),i=e(896486),d=e(561303),_=e(831730),h=e(674217),p=e(797448);const A=(0,h.Ay)("Fetch channel membership info for huddle member",(Ie,X,ne)=>{let{channelId:fe,userId:be}=ne;return Ie((0,p.z)({channelId:fe,userIds:[be]})).then(Be=>{let{membershipInfo:We}=Be;return We[be]&&"isMember"in We[be]?!We[be].isMember:!0})});A.meta={name:"createThunk",key:"createThunkisUserNotHuddleChannelMember",description:"Fetch channel membership info for huddle member"};var v=e(944780),E=e(199207),f=e(741323),g=e(282233),y=e(129318),I=e(631965),O=e(272286),M=e(3704),C=e(167094),P=e(189681),L=e(501021),x=e(180491),F=e(47801),V=e(934861),B=e(381666),D=e(532395),S=e(306166),R=e(984836),w=e(448031),Y=e(204258),Q=e(211700),Z=e(792866),ee=e(836417),_e=e(682520),Ee=e(656453),G=e(522559),Ae=e(819187),ce=e(949252),de=e(406176);const oe=60*1e3,$=15*1e3,re=1e3*10,ue=1e3*60,te=5e3;let ae=!1;const H=500,U=25;let N=l(class{setTargetState(X){var ne=this;return(0,t.coroutine)(function*(){ne.targetState=X;const{huddleState:fe,huddleSubState:be}=ne.targetState;ne.isValidHuddleSubState(fe,be)||(ne.targetState.huddleSubState=ne.getInitialSubStateForHuddleState(fe)),(0,r.dispatchForClientStore)((0,d.Rh)(ne.getOptimisticState(X))),yield ne.process()})()}setTargetChannel(X){this.targetState.channelId=X}setTargetSubState(X){var ne=this;return(0,t.coroutine)(function*(){ne.isValidHuddleSubState(ne.targetState.huddleState,X)&&(ne.targetState.huddleSubState=X,yield ne.process())})()}transitionFromPrejoinToStarted(){this.setTargetState({huddleState:M.RJ.STARTED,teamId:this.targetState.teamId,channelId:this.targetState.channelId,muted:this.targetState.muted,callId:this.targetState.callId,experimentHuddlesLoungeMusicPlayerGroupOn:this.targetState.experimentHuddlesLoungeMusicPlayerGroupOn})}getTimeOfLastStateChange(){return this.timeOfLastStateChange}getTimeOfLastSubStateChange(){return this.timeOfLastSubStateChange}waitForStartStop(){var X=this;return(0,t.coroutine)(function*(){return X.startStopDeferred||x.S.resolve()})()}isProcessing(){var X;return(X=this.startStopDeferred)===null||X===void 0?void 0:X.isPending()}isTargetState(){const{teamId:X,channelId:ne,huddleState:fe}=this.getClientHuddleState();return(0,F.Ft)(this.targetState.huddleState)?fe===this.targetState.huddleState:X===this.targetState.teamId&&ne===this.targetState.channelId&&fe===this.targetState.huddleState}isTargetSubState(){return this.getClientHuddleState().huddleSubState===this.targetState.huddleSubState}hasBeenInSubStateForAtLeastApproxTime(X){return this.timeOfLastSubStateChange?Date.now()-this.timeOfLastSubStateChange>X-H:!1}isValidHuddleSubState(X,ne){return X===M.RJ.STARTED?ne===void 0?!1:(0,Z.A)(M.J_).includes(ne):ne===void 0}getInitialSubStateForHuddleState(X){if(X===M.RJ.STARTED)return M.J_.INITIAL_ALONE}process(){var X=this;return(0,t.coroutine)(function*(){if(X.isProcessing())return X.waitForStartStop();X.startStopDeferred=(0,S.u)();const ne=setTimeout((0,t.coroutine)(function*(){var fe;if(!((fe=X.startStopDeferred)===null||fe===void 0)&&fe.isPending()){const be=new x.S.TimeoutError("HuddleStateManager timeout");yield X.handleErrorAndDisconnect(be)}}),X.startStopTimeout);try{yield X.runLoop(),clearTimeout(ne),X.startStopDeferred.resolve()}catch(fe){yield X.handleErrorAndDisconnect(fe)}finally{clearTimeout(ne)}X.startStopDeferred=null})()}runLoop(){var X=this;return(0,t.coroutine)(function*(){let ne=0;for(;!X.isTargetState();){if(!X.isProcessing())return;if(ne+=1,ne>U)throw new Error("runLoop was stuck");const{teamId:Be,channelId:We,huddleState:Re}=X.getClientHuddleState(),{teamId:ve,channelId:xe,huddleState:He,callId:je}=X.targetState;if(Be!==ve&&(delete X.clogger,delete X.logger,delete X.telemeter),[M.RJ.STARTED,M.RJ.PRE_JOINED].includes(He)){if(Be!==ve||We!==xe){switch(Re){case M.RJ.PENDING:case M.RJ.STARTED:case M.RJ.PRE_JOINED:yield X.goToNext(M.RJ.ENDING);break;default:yield X.goToNext(M.RJ.STARTING)}continue}switch(Re){case M.RJ.NOT_STARTED:yield X.goToNext(M.RJ.STARTING);break;case M.RJ.STARTING:try{yield X.goToNext(M.RJ.PENDING)}catch(Ke){var fe;if(!((fe=X.credentials)===null||fe===void 0)&&fe.isQuickJoinCredentials){if(delete X.credentials,yield X.clearQuickJoinCredentials(),Ke.message===M.M6.ChimeMeetingEnded)throw Ke;if(je){const ht=(0,f.P_)(X.getState(),je);if(ht&&ht.hasEnded)throw new Error(M.M6.ChimeMeetingEnded)}if((0,g.ZG)(X.getState())){const ht=Date.now(),dt=!0;yield X.safelyDisconnect(dt);const Je=Date.now()-ht;X.getLogger().info(`Disconnecting after failed attempt to join huddle added ${Je}ms to TTI`)}else X.getLogger().warn("Initializing a new huddle without disconnecting the last one");yield X.goToNext(M.RJ.STARTING)}else throw Ke}break;case M.RJ.PENDING:yield X.goToNext(X.targetState.huddleState);break;case M.RJ.PRE_JOINED:yield X.goToNext(M.RJ.COMPLETING_PRE_JOIN);break;case M.RJ.COMPLETING_PRE_JOIN:yield X.completePrejoin({isStartMuted:X.targetState.muted}),yield X.goToNext(M.RJ.STARTED);break;case M.RJ.STARTED:throw new Error("This should not be possible");case M.RJ.ENDING:case M.RJ.SURVEY:case M.RJ.SURVEY_GOOD:default:yield X.goToNext(M.RJ.STARTING);break}continue}if([M.RJ.PENDING,M.RJ.STARTED,M.RJ.PRE_JOINED].includes(Re)){yield X.goToNext(M.RJ.ENDING);continue}yield X.goToNext(He)}let be=0;for(;!X.isTargetSubState();){if(be+=1,be>U)throw new Error("runLoop() for huddle substate was stuck");const{huddleState:Be,huddleSubState:We}=X.getClientHuddleState(),{huddleSubState:Re}=X.targetState;if(!X.isValidHuddleSubState(Be,Re)){const ve=X.getInitialSubStateForHuddleState(Be);X.targetState.huddleSubState=ve,yield X.goToNextSubState(ve),X.getLogger().warn(v.o7,`attempted to reach invalid huddleSubstate (${Re}) for the given huddleState (${Be})`);continue}if(Be===M.RJ.STARTED){switch(We){case M.J_.INITIAL_ALONE:if(Re===M.J_.INITIAL_ALONE_NOTICE_ACTIVE){yield X.goToNextSubState(Re);break}yield X.goToNextSubState(M.J_.IN_PROGRESS_TOGETHER);break;case M.J_.INITIAL_ALONE_NOTICE_ACTIVE:if(Re===M.J_.INITIAL_ALONE_NOTICE_DISMISSED){yield X.goToNextSubState(Re);break}yield X.goToNextSubState(M.J_.IN_PROGRESS_TOGETHER);break;case M.J_.INITIAL_ALONE_NOTICE_DISMISSED:yield X.goToNextSubState(M.J_.IN_PROGRESS_TOGETHER);break;case M.J_.IN_PROGRESS_TOGETHER:yield X.goToNextSubState(M.J_.IN_PROGRESS_ALONE);break;case M.J_.IN_PROGRESS_ALONE:if(Re===M.J_.IN_PROGRESS_ALONE_NOTICE_ACTIVE){yield X.goToNextSubState(Re);break}yield X.goToNextSubState(M.J_.IN_PROGRESS_TOGETHER);break;case M.J_.IN_PROGRESS_ALONE_NOTICE_ACTIVE:if(Re===M.J_.IN_PROGRESS_ALONE_NOTICE_DISMISSED){yield X.goToNextSubState(Re);break}yield X.goToNextSubState(M.J_.IN_PROGRESS_TOGETHER);break;case M.J_.IN_PROGRESS_ALONE_NOTICE_DISMISSED:yield X.goToNextSubState(M.J_.IN_PROGRESS_TOGETHER);break;default:yield X.goToNextSubState(M.J_.INITIAL_ALONE)}continue}yield X.goToNextSubState(void 0)}})()}goToNext(X){var ne=this;return(0,t.coroutine)(function*(){var fe,be,Be,We;ne.getLogger().info(`Marking huddle as ${X} [${(Be=(fe=ne.targetState)===null||fe===void 0?void 0:fe.teamId)!==null&&Be!==void 0?Be:"N/A"}, ${(We=(be=ne.targetState)===null||be===void 0?void 0:be.channelId)!==null&&We!==void 0?We:"N/A"}]`);const Re=Date.now();ne.timeOfLastStateChange=Re,ne.timeOfLastSubStateChange=Re;const ve=ne.getInitialSubStateForHuddleState(X);if(X===M.RJ.STARTING){var xe,He;const ht=ne.assertTargetTeamAndChannel(M.RJ.STARTING),dt=ne.getOptimisticState(ne.targetState);ne.getLogger().info(`Optimistic state: ${dt.optimisticHuddleState}`),(0,r.dispatchForClientStore)((0,d.xf)({huddleState:X,huddleSubState:ve,...ht,...dt,isPrejoin:((xe=ne.targetState)===null||xe===void 0?void 0:xe.huddleState)===M.RJ.PRE_JOINED,sessionId:(0,Ae.A)()})),ne.credentials=yield ne.fetchCredentials(),(He=ne.getTelemeter())===null||He===void 0||He.mark(C.Bq);return}if(X===M.RJ.PENDING){const ht=ne.assert(ne.credentials,"Expected credentials to be set before PENDING");(0,r.dispatchForClientStore)((0,d.Rh)({huddleState:X,huddleSubState:ve,...ne.assertTargetTeamAndChannel(M.RJ.PENDING),callId:ht.roomId})),yield ne.connectToChime(ht,ne.targetState),delete ne.credentials;return}if(X===M.RJ.STARTED){var je;const ht=ne.assertTargetTeamAndChannel(M.RJ.STARTED);(0,r.dispatchForClientStore)((0,d.Rh)({huddleState:X,huddleSubState:ve,optimisticHuddleState:null,...ht,isPrejoin:!1})),(0,u.ty)(ne.getState(),"huddles_set_status")&&ne.scheduleHuddleStateExpirationIncrement(),ne.setCoachmarkTimeout(ve),(je=ce.F.getInstance())===null||je===void 0||je.request()}else{var Ke;(Ke=ce.F.getInstance())===null||Ke===void 0||Ke.release()}if(X===M.RJ.PRE_JOINED&&(0,r.dispatchForClientStore)((0,d.Rh)({huddleState:X,huddleSubState:ve,optimisticHuddleState:null,...ne.assertTargetTeamAndChannel(M.RJ.PRE_JOINED)})),X===M.RJ.ENDING){(0,r.dispatchForClientStore)((0,d.Rh)({huddleState:X,huddleSubState:ve})),yield ne.safelyDisconnect();return}(0,r.dispatchForClientStore)((0,d.Rh)({huddleState:X,huddleSubState:ve,optimisticHuddleState:null}))})()}goToNextSubState(X){var ne=this;return(0,t.coroutine)(function*(){X===M.J_.IN_PROGRESS_ALONE&&setTimeout(()=>{var fe;((fe=ne.getClientHuddleState())===null||fe===void 0?void 0:fe.huddleSubState)===M.J_.IN_PROGRESS_ALONE&&ne.hasBeenInSubStateForAtLeastApproxTime(re)&&(ne.isMicEnabled()||ne.targetState.experimentHuddlesLoungeMusicPlayerGroupOn)&&ne.setTargetSubState(M.J_.IN_PROGRESS_ALONE_NOTICE_ACTIVE)},re),ne.timeOfLastSubStateChange=Date.now(),(0,r.dispatchForClientStore)((0,d.Rh)({huddleSubState:X}))})()}handleErrorAndDisconnect(X){var ne=this;return(0,t.coroutine)(function*(){var fe;ne.getLogger().error(X);const{huddleState:be}=ne.getClientHuddleState();if([M.RJ.PENDING,M.RJ.STARTED].includes(be))try{yield x.S.race([new x.S((Be,We)=>{setTimeout(()=>We(new Error("HuddleStateManager disconnect timeout")),ne.disconnectTimeout)}),ne.safelyDisconnect()])}catch(Be){ne.getLogger().error(Be)}(0,r.dispatchForClientStore)((0,d.Rh)({huddleState:M.RJ.NOT_STARTED,optimisticHuddleState:null})),yield x.S.resolve(ne.handleError(X,be)),(fe=ne.startStopDeferred)===null||fe===void 0||fe.reject(X)})()}getInitialAloneInHuddleTimeOutValue(){if(ae)return te;if(!this.targetState.experimentHuddlesLoungeMusicPlayerGroupOn)return ue;const X=this.getState(),ne=(0,u.ty)(X,de.VW);return ne?ne*1e3:(this.getLogger().info("User pref 'huddles_play_music_timeout' is undefined, using default 60 seconds"),ue)}setCoachmarkTimeout(X){X===M.J_.INITIAL_ALONE&&(setTimeout(()=>{var ne;((ne=this.getClientHuddleState())===null||ne===void 0?void 0:ne.huddleSubState)===M.J_.INITIAL_ALONE&&this.hasBeenInSubStateForAtLeastApproxTime(this.getInitialAloneInHuddleTimeOutValue())&&(this.isMicEnabled()||this.targetState.experimentHuddlesLoungeMusicPlayerGroupOn)&&(this.setTargetSubState(M.J_.INITIAL_ALONE_NOTICE_ACTIVE),this.getLogger().info("setTimeout executed on substate: initial_alone"))},this.getInitialAloneInHuddleTimeOutValue()),this.getLogger().info("setTimeout started on substate: initial_alone"))}isMicEnabled(){var X;return!!(!((X=(0,s.Ng)(this.getState()))===null||X===void 0)&&X.isMicrophoneEnabled)}getClientHuddleState(){const X=(0,r.getStateForClientStore)(),ne=(0,Y.EG)(X),{channelId:fe,teamId:be}=(0,Y.Qn)(X)||{};if(!ne||ne===M.RJ.NOT_STARTED)return{huddleState:M.RJ.NOT_STARTED,channelId:fe,teamId:be};const Be=(0,Y.EO)(X);return{huddleState:ne,huddleSubState:Be,channelId:fe,teamId:be}}assertTargetTeamAndChannel(X){const{teamId:ne,channelId:fe}=this.targetState;return{teamId:this.assert(ne,`Expected teamId to be set for ${X}`),channelId:this.assert(fe,`Expeted channelId to be set for ${X}`)}}getChannelIdOrDie(){const{channelId:X}=this.getClientHuddleState(),{channelId:ne}=this.targetState,fe=X||ne;return this.assert(fe,"No channel ID or active huddle")}getThreadTsOrNothing(){const{threadTs:X}=this.getClientHuddleState(),{threadTs:ne}=this.targetState;return X||ne}getIsMultiDevice(){return!!this.targetState.isMultiDevice}getIsExperimentStandaloneHuddlesOn(){return!!this.targetState.experimentStandaloneHuddlesOn}getTeamIdOrDie(){const{teamId:X}=this.getClientHuddleState(),{teamId:ne}=this.targetState,fe=X||ne;return this.assert(fe,"No team ID or active huddle")}getCallIdOrDie(){const X=(0,r.getStateForClientStore)(),ne=(0,Y.E9)(X);return this.assert(ne,"No call ID or active huddle")}getHuddleState(){const{huddleState:X}=this.getClientHuddleState();return X}dispatch(X){const ne=this.getTeamIdOrDie();return(0,r.dispatchForTeamId)(ne,X)}getState(X){const ne=X||this.getTeamIdOrDie();return(0,r.getStateByTeamId)(ne)}assert(X,ne){if(X==null)throw new Error(ne);return X}getClogger(){if(this.clogger)return this.clogger;const{teamId:X}=this.getClientHuddleState();return this.clogger=X?(0,B.e)({state:(0,r.getStateByTeamId)(X)}):(0,B.e)(),this.clogger}getLogger(){return this.logger?this.logger:(this.logger=(0,_e.Wo)({label:this.logLabel}),this.logger)}getTelemeter(){if(this.telemeter)return this.telemeter;const{teamId:X}=this.getClientHuddleState();return X?this.telemeter=(0,Ee.Cy)({state:(0,r.getStateByTeamId)(X)}):this.telemeter=(0,Ee.rh)(),this.telemeter}constructor({logLabel:X=v.o7,startStopTimeout:ne=oe,disconnectTimeout:fe=$}={}){this.targetState={huddleState:M.RJ.NOT_STARTED},this.startStopDeferred=null;var be=this;this.safelyDisconnect=(0,t.coroutine)(function*(){let We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;try{yield be.disconnect(We)}catch(Re){be.getLogger().error("Failed to disconnect from the Huddle. This may mean the user is still connected to the media server",Re)}});var Be=this;this.scheduleHuddleStateExpirationIncrement=(0,t.coroutine)(function*(){if(Be.isTargetState()&&Be.targetState.huddleState!==M.RJ.STARTED)return;const We=60*5,Re={huddle_state_expiration_ts:new Date().getTime()/1e3+We};yield Be.dispatch((0,G.c)({profile:Re,reason:"increment-huddle-state-expiration-ts"})),setTimeout(Be.scheduleHuddleStateExpirationIncrement,(0,ee.A)(12e4,-.1,.1))}),this.logLabel=X,this.startStopTimeout=ne,this.disconnectTimeout=fe,this.timeOfLastStateChange=null,this.timeOfLastSubStateChange=null}},"BaseHuddleStateManager");(0,Q.ul)("baseHuddleStateManager",{setShortTimeoutValue:()=>{ae=!0},resetShortTimeoutValue:()=>{ae=!1}}),Object.defineProperty({shouldUseDebugTimeout:ae},"shouldUseDebugTimeout",{get:()=>ae,set:()=>{ae=!0}});var W=e(930885),J=e(489632),q=e(134309),ie=e(69938),Te=e(515456);class Me extends N{start(X,ne,fe,be,Be,We,Re,ve){var xe=this;return(0,t.coroutine)(function*(){yield xe.startHuddleWithTargetState(M.RJ.STARTED,X,ne,fe,be,Be,We,Re,ve)})()}prejoin(X,ne,fe,be,Be){var We=this;return(0,t.coroutine)(function*(){yield We.startHuddleWithTargetState(M.RJ.PRE_JOINED,X,ne,fe,be,void 0,Be)})()}setOthersInHuddle(){var X=this;return(0,t.coroutine)(function*(){yield X.setTargetSubState(M.J_.IN_PROGRESS_TOGETHER)})()}setAloneInHuddle(){var X=this;return(0,t.coroutine)(function*(){yield X.setTargetSubState(M.J_.IN_PROGRESS_ALONE)})()}dismissAloneInHuddleWarning(X){var ne=this;return(0,t.coroutine)(function*(){const fe=X?M.J_.INITIAL_ALONE_NOTICE_DISMISSED:M.J_.IN_PROGRESS_ALONE_NOTICE_DISMISSED;yield ne.setTargetSubState(fe)})()}startHuddleWithTargetState(X,ne,fe,be,Be,We,Re,ve,xe){var He=this;return(0,t.coroutine)(function*(){var je;!((je=He.currentHuddleDeferred)===null||je===void 0)&&je.isPending()||(He.currentHuddleDeferred=(0,S.u)()),yield He.setTargetState({huddleState:X,teamId:ne,channelId:fe,muted:be,callId:Be,threadTs:We,experimentHuddlesLoungeMusicPlayerGroupOn:Re,isMultiDevice:ve,experimentStandaloneHuddlesOn:xe})})()}stop(){var X=this;return(0,t.coroutine)(function*(){var ne;const fe=X.getState(),be=X.getHuddleState()!==M.RJ.PRE_JOINED&&(0,f.Cd)(fe)&&!X.isProcessing();be&&(X.getLogger().info(`Show huddle survey in ${X.getChannelIdOrDie()}`),X.dispatch((0,O.Cd)({timeSeen:new Date().toISOString()}))),yield X.setTargetState({huddleState:be?M.RJ.SURVEY:M.RJ.NOT_STARTED}),X.getHuddleState()===M.RJ.NOT_STARTED&&(!((ne=X.currentHuddleDeferred)===null||ne===void 0)&&ne.isPending())&&X.currentHuddleDeferred.resolve()})()}enterTerminalState(X){var ne=this;return(0,t.coroutine)(function*(){var fe;!((fe=ne.pendingHuddleStart)===null||fe===void 0)&&fe.isPending()?ne.pendingHuddleStart.reject(X):yield ne.handleErrorAndDisconnect(X)})()}waitForHuddleToEnd(){return x.S.resolve(this.currentHuddleDeferred)}handleError(X,ne){var fe;this.getLogger().error(X);const be=ne===M.RJ.STARTING||ne===M.RJ.PENDING;this.dispatch((0,P.A)({errorCode:(0,M.dJ)(X.name)?X.name:X.message,isJoinError:be})),!((fe=this.currentHuddleDeferred)===null||fe===void 0)&&fe.isPending()&&this.currentHuddleDeferred.resolve()}getOptimisticState(X){let{teamId:ne,channelId:fe,huddleState:be}=X;if([M.RJ.NOT_STARTED].includes(be))return{optimisticHuddleState:M.RJ.ENDING};if([M.RJ.SURVEY].includes(be))return{optimisticHuddleState:null};if(be===M.RJ.PRE_JOINED)return{optimisticHuddleState:M.RJ.PRE_JOINED,isPrejoin:!0};if(be===M.RJ.STARTED&&ne){var Be,We;const Re=(0,r.getStateByTeamId)(ne),ve=(0,r.getStateForClientStore)(),xe=(0,Y.aQ)(ve),He=(xe==null?void 0:xe.channelId)===fe||!((Be=(0,f.Yw)(Re,fe))===null||Be===void 0||(We=Be.activeParticipants)===null||We===void 0)&&We.length?null:M.RJ.STARTED;return(0,u.ty)(Re,"huddles_global_mute")&&(0,r.dispatchForClientStore)((0,d.Bk)(!0)),{isPrejoin:!1,optimisticHuddleState:He}}return{}}fetchCredentials(){var X=this;return(0,t.coroutine)(function*(){const ne=X.getTeamIdOrDie(),fe=X.getChannelIdOrDie(),be=X.getThreadTsOrNothing(),Be=(0,r.getStateForClientStore)(),We=(0,f.Yw)(X.getState(),fe),{ttiTrace:Re}=(0,Te.A)().getAllTraceHandlers(),ve=(0,Y.WL)(Be,fe),xe=X.getIsMultiDevice(),He=(0,J.x)(X.getState());if(Re==null||Re.createFetchCredentialsSpan(),ve){Re==null||Re.setCachedTag({cached:!0});const je=(We==null?void 0:We.id)||(0,F.RW)(ve.credentials);if(je){const Ke=(0,f.P_)(X.getState(),je);if(Ke&&Ke.hasEnded)throw yield X.clearQuickJoinCredentials(),new Error(M.M6.ChimeMeetingEnded)}return X.getTelemeter().count(C.K7),Re==null||Re.closeFetchCredentialsSpan(),{roomId:je,server:ve.credentials,isQuickJoinCredentials:!0}}if((0,g.CI)(X.getState(ne))){const je=(0,q._6)(X.getState(),{channelId:fe});if(je)return{roomId:(0,F.RW)(je),server:je,isQuickJoinCredentials:!1}}return X.getTelemeter().mark(C.aW),Re==null||Re.setCachedTag({cached:!1}),X.dispatch((0,L.O3)({teamId:ne,channelId:fe,shouldFetchRegion:!We,traceId:Re==null?void 0:Re.getTTITraceId(),parentSpanId:Re==null?void 0:Re.getFetchCredentialsSpanId(),...be&&{threadTs:be},...xe&&{isMultiDevice:xe}})).then(je=>{var Ke,ht;if(!(!(je==null||(Ke=je.server)===null||Ke===void 0)&&Ke.meeting)||!(!(je==null||(ht=je.server)===null||ht===void 0)&&ht.attendee))throw new Error("create_meeting_failed");Re==null||Re.closeFetchCredentialsSpan(),X.getTelemeter().mark(C.bW);const dt=X.getTelemeter().measure(C.aW,C.iE,C.bW);X.getTelemeter().count(C.iE,dt),(0,ie.jm)({roomsJoinTime:dt});let Ve=fe;return X.getIsExperimentStandaloneHuddlesOn()&&je.channelId&&(Ve=je.channelId,X.setTargetChannel(Ve),(0,r.dispatchForClientStore)((0,d.Jc)(Ve))),(0,r.dispatchForClientStore)((0,d.Yi)({channelId:Ve,joinCredentials:je.server,expiry:Date.now()+v.nq,fromInvite:!1})),je.rootThreadTs&&je.roomId&&(X.dispatch((0,E.ZL)({huddleId:je.roomId,thread:{channelId:Ve,ts:je.rootThreadTs}})),X.dispatch((0,I.KN)({channelId:Ve,threadTs:je.rootThreadTs,lastRead:je.rootThreadTs,reason:"canvas-rooms-join-api"})),X.dispatch(He?(0,w.a)({channelId:Ve,threadTs:je.rootThreadTs,oldest:je.rootThreadTs}):(0,R.a)({channelId:Ve,threadTs:je.rootThreadTs,oldest:je.rootThreadTs}))),je})})()}connectToChime(X,ne){let{server:fe,roomId:be}=X,{muted:Be,huddleState:We}=ne;var Re=this;return(0,t.coroutine)(function*(){const{ttiTrace:ve}=(0,Te.A)().getAllTraceHandlers();return ve==null||ve.createConnectToMediaServiceSpan(),(0,r.dispatchForClientStore)((0,d.qW)({callResult:{server:fe,roomId:be,regions:"",inviteResponses:[],virtualRoomId:""},isStartMuted:Be,waitForHuddleStart:(0,S.u)(),isPrejoin:We===M.RJ.PRE_JOINED})),Re.pendingHuddleStart=(0,S.u)(),We===M.RJ.PRE_JOINED?x.S.resolve():Re.pendingHuddleStart})()}resolvePendingJoin(X){var ne=this;return(0,t.coroutine)(function*(){try{var fe;const Be=ne.getChannelIdOrDie(),{ttiTrace:We}=(0,Te.A)().getAllTraceHandlers(),Re=ne.getState(),ve=(0,r.getStateForClientStore)(),{callId:xe,optimisticHuddleState:He}=(0,Y.Qn)(ve)||{},je=(0,f.dy)(Re);if(ne.getLogger().info(`Resolve pending huddle (${Be}, optimisticHuddleState: ${He}, has optimisticTopic: ${!!je})`),!(!((fe=ne.pendingHuddleStart)===null||fe===void 0)&&fe.isPending()))throw new Error("No pending huddle start in resolvePendingJoin");const Ke=ne.assert(xe,"Room ID is not defined for pending join"),ht=(0,u.ty)(Re,"huddles_cc_by_default");if((0,F.UA)(Re,Be)&&ht&&(ne.dispatch((0,m.A)()),ne.dispatch((0,i.dD)(!0)),ne.dispatch((0,i.jL)(!0))),je){try{yield ne.dispatch((0,L.xB)({roomId:Ke,name:je})),ne.dispatch((0,a.oU)({id:Ke,name:je}))}catch(Ve){ne.getLogger().error(Ve)}ne.dispatch((0,_.Jc)(null))}(0,r.dispatchForClientStore)((0,d.u8)(Be)),We==null||We.closeConnectToMediaServiceSpan(),(0,B.e)({state:Re}).track(D.EventId.HUDDLES_TIME_AUDIO_SESSION_STARTED,{contexts:{calls:{room_id:Ke,duration_ms:Math.round(X),channel_id:Be}}}),(0,ie.jm)({audioConnectedTime:X}),(0,r.dispatchForClientStore)((0,d.Rh)({isSelfJoined:!0})),ne.pendingHuddleStart.resolve()}catch(Be){var be;(be=ne.pendingHuddleStart)===null||be===void 0||be.reject(Be)}})()}completePrejoin(X){var ne=this;return(0,t.coroutine)(function*(){const fe=ne.getChannelIdOrDie(),be=(0,r.getStateForClientStore)(),{ttiTrace:Be}=(0,Te.A)().getAllTraceHandlers(),We=(0,Y.WL)(be,fe);return Be==null||Be.setCachedTag({cached:!!We}),Be==null||Be.createConnectToMediaServiceSpan(),(0,r.dispatchForClientStore)((0,d.f2)({...X}))})()}clearQuickJoinCredentials(){return(0,t.coroutine)(function*(){const X=(0,r.getStateForClientStore)(),{channelId:ne}=(0,Y.Qn)(X)||{};return(0,r.dispatchForClientStore)((0,d.WB)({channelId:ne}))})()}disconnect(){let X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;var ne=this;return(0,t.coroutine)(function*(){var fe;const be=ne.getState(),Be=(0,r.getStateForClientStore)(),{channelId:We,teamId:Re}=(0,Y.Qn)(Be)||{};if(!X)try{(0,Te.A)().cleanup()}catch(ve){ne.getLogger().error(`Error cleaning up huddle tracing: ${ve}`)}try{(0,r.dispatchForClientStore)((0,d.Bk)(!1)),(0,g.lV)(be)&&((0,r.dispatchForClientStore)((0,d.JM)()),(0,r.dispatchForClientStore)((0,d._u)({song:void 0}))),(0,r.dispatchForClientStore)((0,d.Rh)({isSelfJoined:!1}));const xe=(0,o.WR)(be),He=We&&(0,f.Yw)(be,We);if(He&&We){const je=(He.activeParticipants||[]).filter(ht=>!((0,c.MZ)(ht)&&ht.slackId===xe));ne.dispatch((0,a.oU)({id:He.id,activeParticipants:je}));const Ke=(0,a.H6)(ne.getState(),He.id);Ke&&ne.dispatch((0,_.mr)({call:Ke,channelId:We}))}if(We){const je=yield(0,r.dispatchForTeamId)(Re,A({channelId:We,userId:xe})),Ke=(0,y.H7)(be),ht=(0,V.tc)(Ke);(je||ht)&&(yield ne.clearQuickJoinCredentials()),(0,r.dispatchForClientStore)((0,d.u8)(We))}}catch(ve){ne.getLogger().error("An error occurred cleaning up huddle redux state. Proceeding to disconnect from media server.",ve)}try{const ve=(0,S.u)();(0,r.dispatchForClientStore)((0,d.pl)({waitForHuddleEnd:ve})),yield ve}catch(ve){ne.getLogger().error("An error occurred while disconnecting from the media server.",ve)}ne.dispatch((0,s.VL)({huddlesVideoActive:!1})),ne.dispatch((0,E.np)()),(0,r.dispatchForClientStore)((0,d.cx)()),!((fe=ne.pendingHuddleStart)===null||fe===void 0)&&fe.isPending()&&ne.pendingHuddleStart.reject(new Error("HuddleStateManager shutdown"))})()}}l(Me,"HuddleStateManager");const Pe=(0,n.A)(()=>{const Ie=new Me;return(0,W.R)(Ie.waitForStartStop.bind(Ie)),Ie})},930885:(j,T,e)=>{"use strict";e.d(T,{A:()=>a,R:()=>s});var t=e(180491);let n;const s=l(c=>{n=c},"setWaitForStartStop"),a=l(()=>n?n():t.S.resolve(),"__WEBPACK_DEFAULT_EXPORT__")},913164:(j,T,e)=>{"use strict";e.d(T,{CE:()=>r,Gu:()=>o,vT:()=>n.vT});var t=e(674217),n=e(904214);const s=3*1e3,a={[n.vT.NoUserAudioStream]:!0,[n.vT.NoUserVideoStream]:!0,[n.vT.NoAudioOutputAudioElementError]:!0,[n.vT.NoAudioOutputAudioLevelError]:!0,[n.vT.SlowNetwork]:!0,[n.vT.PeerMuteRequest]:!0};let c={};const r=(0,t.Ay)("Display alert message for huddle call",(m,i,d)=>{let{alert:_,peerId:h}=d;if(!c[_]){if(a[_]){c[_]=setTimeout(()=>{c[_]&&(clearTimeout(c[_]),delete c[_]),m((0,n.Sb)({alert:_,peerId:h}))},s);return}m((0,n.Sb)({alert:_,peerId:h}))}});r.meta={name:"createThunk",key:"createThunkdisplayAlertMessage",description:"Display alert message for huddle call"};const o=(0,t.Ay)("Undisplay an alert message for huddle call",(m,i,d)=>{c[d]&&(clearTimeout(c[d]),delete c[d]),m((0,n.LL)(d))});o.meta={name:"createThunk",key:"createThunkhideAlertMessage",description:"Undisplay an alert message for huddle call"},Object.defineProperty({alertTimeouts:c},"alertTimeouts",{get:()=>c,set:m=>{c=m}})},883646:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(674217),n=e(565526);const s=(0,t.Ay)("Handle huddle error",(c,r,o)=>(0,n.A)().enterTerminalState(new Error(o.terminalState)));s.meta={name:"createThunk",key:"createThunkenterTerminalState",description:"Handle huddle error"};const a=s},272909:(j,T,e)=>{"use strict";e.d(T,{N$:()=>be,KD:()=>X,kq:()=>Ie,HU:()=>ne});var t=e(612104),n=e(674217),s=e(449552),a=e(264918),c=e(897990),r=e(540788),o=e(68859),u=e(919758),m=e(944780),i=e(326340),d=e(420727),_=e(237163),h=e(296540),p=e(448368),A=e(780076),v=e(449677),E=e(534216),f=e(521665),g=e(539044),y=e(494030),I=e(455970),O=e(503948),M=e(855645),C=e(914872),P=e(61629),L=e(238798),x=e(917780),F=e(911764),V=e(204258),B=e(885850),D=e(710596),S=e(166747),R=e(396386),w=e(532395),Y=e(649098),Q=e(55004),Z=e(103608);function ee(){return ee=Object.assign||function(Be){for(var We=1;We<arguments.length;We++){var Re=arguments[We];for(var ve in Re)Object.prototype.hasOwnProperty.call(Re,ve)&&(Be[ve]=Re[ve])}return Be},ee.apply(this,arguments)}l(ee,"_extends");const _e=new Y.Ay("huddles"),Ee={elementName:"huddles_invite_confirmation_dialog_cancel",eventId:w.EventId.HUDDLES_JOIN_CANCEL,onClick:{enableClogAction:!0}},G={elementName:"huddles_invite_confirmation_dialog_ok",eventId:w.EventId.HUDDLES_JOIN_CONFIRM,onClick:{enableClogAction:!0}};function Ae(Be){let{closeModal:We,...Re}=Be;const{channelId:ve,senderUserId:xe}=Re,He=(0,Z.A)(ve),{handleDecline:je,handleJoin:Ke,isLoading:ht,inviteText:dt}=(0,Q.lc)(Re),Ve=(0,x.d4)(Qt=>(0,S.I)(Qt,xe));let Je=_e.t("Huddle with {dmPersons}",{dmPersons:Ve,fallbackHash:"a0767c2e0145a0f1159ecf41452f3cf03b376fe1"});const Ge=(0,x.d4)(Qt=>(0,B.OL)(Qt,ve)),Le=(0,x.d4)(Qt=>(0,A.uz)(Ge)?(0,D.SB)(Qt,Ge,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}):void 0);Le&&(Je=(0,R.JM)(Ge)?_e.t("Huddle with {dmPersons}",{dmPersons:Le,fallbackHash:"a0767c2e0145a0f1159ecf41452f3cf03b376fe1"}):_e.t("Huddle in {channelName}",{channelName:Le,fallbackHash:"a0767c2e0145a0f1159ecf41452f3cf03b376fe1"}));const Mt=(0,p.cw)(V.hc)===ve;(0,h.useEffect)(()=>{Mt&&!ht&&(We==null||We())},[Mt,ht,We]);const Dt=(0,h.useCallback)(()=>{je(),We==null||We()},[We,je]),pt="huddle-invite-join-modal";return h.createElement(L.A,ee({uiComponentName:w.UiComponentName.HUDDLES_INVITE_CONFIRMATION_DIALOG},He),h.createElement(v.A,{labelledby:pt,dataQa:pt,closeModal:We,role:"dialog",className:"p-huddle_invite_join_modal",overlayClassName:"p-huddle_invite_join_modal__overlay",shouldReturnFocusAfterClose:!0},h.createElement(E.A,null,h.createElement(f.A,{title:Je,id:pt})),h.createElement(g.A,null,h.createElement(y.A,null,dt)),h.createElement(I.A,null,h.createElement(O.A,null,h.createElement(M.Ay,{type:"outline",onClick:Dt,"data-qa":"huddle_invite_join_cancel",autoClogProps:Ee},_e.t("Not Now")),h.createElement(C.A,{type:"primary",loading:ht,onClick:Ke,"data-qa":"huddle_invite_join_go",autoClogProps:G,autoFocus:!0},h.createElement(P.A,{type:"headphones"}),h.createElement("span",{className:"p-huddle_invite_join_modal__join_label"},_e.t("Join")))))))}l(Ae,"HuddleInviteJoinModal"),Ae.displayName="HuddleInviteJoinModal";const ce={HuddleInviteJoinModal:Ae},de=(0,F.A)(Ae);var oe=e(90869),$=e(180491),re=e(682520),ue=e(43335),te=e(612204),ae=e(818386),H=e(47801),U=e(381666),N=e(119110),K=e(959905),W=e(3704),J=e(170130),q=e(190905),ie=e(127225),Te=e(529734),Me=e(158565),ke=e(692232);const Pe=l((Be,We,Re)=>{(0,U.e)({state:Be}).track(We,{contexts:{calls:(0,H.gG)(Be,Re),ui_context:{action:w.UiAction.KEYDOWN}}})},"clogHuddlesEvent"),Ie=(0,n.Ay)("Start huddle in highlighted channel or current primary view",function(){var Be=(0,t.coroutine)(function*(We,Re,ve){let{highlightedChannelId:xe}=ve;const He=(0,s.getStateForClientStore)(),je=Re(),Ke=(0,Te.cc)(je),ht=Ke,dt=(0,q.e6)(je),Ve=(0,_.A)(je),Je=ht?(0,q.F8)(je,{tab:dt,container:ie.mq.Primary}):null,Ge=ht?Je==null?void 0:Je.id:Ve,Le=xe||Ge,{channelId:Mt,teamId:Dt}=(0,V.Ak)(He)||{};if(Mt&&Dt&&(!xe||xe===Mt)){(0,s.dispatchForTeamId)(Dt,(0,i.A)()),Pe(je,w.EventId.HUDDLES_LEAVE,Mt);return}const pt=(0,V.aQ)(He);if(pt&&!xe){const{channelId:Nt,senderUserId:bt,callId:Yt,teamId:fn}=pt;(0,s.dispatchForTeamId)(fn,de({channelId:Nt,senderUserId:bt,callId:Yt}));return}if(!Le||!(0,ue.A)(Le)&&!(0,te.Ay)(Le)){Ke&&We((0,oe.A)());return}const Qt=(0,ae.Y)(je,Le);Qt&&(0,H.Bn)(je,Qt)&&(Pe(je,w.EventId.HUDDLES_JOIN,Qt.id),We((0,K.A)({channelId:Qt.id,forceFocus:!0,entryPoint:W.su.KEYBOARD_SHORTCUT_JOIN_HUDDLE})))});return function(We,Re,ve){return Be.apply(this,arguments)}}());Ie.meta={name:"createThunk",key:"createThunktoggleHuddleInHighlightedChannel",description:"Start huddle in highlighted channel or current primary view"};const X=(0,n.Ay)("Start huddle in the current view",function(){var Be=(0,t.coroutine)(function*(We,Re,ve,xe){var He,je;const Ke=Re(),{shouldUseNavigate:ht,isChildWindow:dt,getViewSet:Ve}=xe(Me.U),Je=Ve(Ke);(!ht||!dt||(Je==null||(He=Je[ie.mq.Primary])===null||He===void 0?void 0:He.viewType)!==ke.D.Channel)&&We(Ie({highlightedChannelId:void 0}));const Ge=Je==null||(je=Je[ie.mq.Primary])===null||je===void 0?void 0:je.id;We(Ie({highlightedChannelId:Ge}))});return function(We,Re,ve,xe){return Be.apply(this,arguments)}}());X.meta={name:"createThunk",key:"createThunktoggleHuddleInCurrentView",description:"Start huddle in the current view"};const ne=(0,n.Ay)("Toggle microphone from current value to opposite value",(Be,We)=>{const Re=(0,s.getStateForClientStore)(),{teamId:ve,channelId:xe}=(0,V.Ak)(Re)||{};if(!ve)return;const He=(0,s.getStateByTeamId)(ve),je=(0,a.Ng)(He),Ke=je==null?void 0:je.isMicrophoneEnabled;(0,s.dispatchForTeamId)(ve,(0,d.A)(!Ke)),Be(Ke?(0,c.Ho)():(0,c.qc)()),(0,re.Ay)({state:He}).info(m.o7,`Keyboard shortcut invoked -- toggling mic to ${Ke?w.EventId.HUDDLES_MUTE:w.EventId.HUDDLES_UNMUTE}`),xe&&Pe(He,Ke?w.EventId.HUDDLES_MUTE:w.EventId.HUDDLES_UNMUTE,xe)});ne.meta={name:"createThunk",key:"createThunktoggleSelfMicrophone",description:"Toggle microphone from current value to opposite value"};let fe=!1;const be=l(Be=>{var We;return(0,N.dY)("4.13.0")?(Be&&!fe&&((0,u.zin)(o.Sr.TOGGLE_MUTE,(0,t.coroutine)(function*(){const Re=(0,s.getStateForClientStore)(),{teamId:ve}=(0,V.Ak)(Re)||{};ve&&((0,s.dispatchForTeamId)(ve,ne()),(0,r.Sr)((0,s.getStateForClientStore)())||(0,s.dispatchForClientStore)((0,J.A)()))})),fe=!0),(We=(0,u.wzE)(o.Sr.TOGGLE_MUTE,Be))===null||We===void 0?void 0:We.then(()=>Be)):$.S.resolve(!1)},"maybeToggleGlobalMuteShortcut")},272286:(j,T,e)=>{"use strict";e.d(T,{uZ:()=>$,Tn:()=>ue,Cd:()=>re});var t=e(682520),n=e(674217),s=e(449552),a=e(258768),c=e(944780),r=e(561303),o=e(3704),u=e(180491),m=e(144473),i=e(638819),d=e(838426),_=e(246673),h;(function(te){te.HuddleSurvey="huddle-survey",te.ListsSurvey="lists-survey"})(h||(h={}));var p;(function(te){te.NoAudioInput="no-audio-input",te.NoAudioOutput="no-audio-output",te.LowVideoQuality="low-video-quality",te.LowAudioQuality="low-audio-quality",te.VideoNotWorking="video-not-working",te.DeviceSelectionError="device-selection-error",te.Disconnected="disconnected",te.SomethingElse="something-else",te.Dismiss="dismiss"})(p||(p={}));function A(te){return te.isOk}l(A,"isOkResult");const v=(0,n.Ay)("Send survey results",(te,ae,H)=>{var U,N;const K=ae();var W;const J=(W=H.callId)!==null&&W!==void 0?W:K.activeCall.id;if(!J)return(0,_.M)(!1,"There should have been a call in order to send survey results."),u.S.reject(new Error("SendSurveyResult: No call"));var q;const ie=(q=H.type)!==null&&q!==void 0?q:"vo-survey",Te=A(H)?void 0:{response_requested:!1,comments:H.comments,is_video:(U=K.activeCall)===null||U===void 0?void 0:U.hasVideoBeenEnabled,is_ss:(N=K.activeCall)===null||N===void 0?void 0:N.hasScreenshareBeenEnabled,list_id:H==null?void 0:H.listId,list_entry_point:H==null?void 0:H.listEntryPoint},Me=A(H)||ie===h.ListsSurvey?"ok":H.notOkResponses.join(","),ke={room:J,event_type:ie,event_value:Me,event_metadata:JSON.stringify(Te)};return(0,m.A)({apiUrl:"/api/",method:"screenhero.rooms.userEvent",token:(0,i.F)(K),versionTs:(0,d.HF)(),versionUid:(0,d.X3)(),args:ke})?u.S.resolve():u.S.reject(new Error("SendSurveyResult: beacon failed"))});v.meta={name:"createThunk",key:"createThunksendSurveyResult",description:"Send survey results"};var E=e(296540),f=e(917780),g=e(707980),y=e(463329),I=e(927675),O=e(140998),M=e(11869),C=e(688357),P=e(826),L=e(729268),x=e(715431),F=e(391478);const V="survey";var B;(function(te){te.Good="good",te.Bad="bad",te.Dismiss="dismiss"})(B||(B={}));const D="HUDDLES-SURVEY-TRACE",S=l(te=>{let{teamId:ae,callId:H,results:U}=te;const N=ae?(0,t.Ay)({label:D,teamId:ae}):(0,t.Wo)({label:D});if(!ae){N.warn("Missing team id. Exiting early");return}const K=(0,P.E)({teamOrEnterpriseId:ae}),W=K.createTrace({traceName:C.Sq,tags:{__dataset:C.RN},samplingOptions:{sampleRate:1,sampleType:L.tS.SESSION}}),J=W.startSpan(V),q={...U};(0,M.A)(q,"comments");const{notOkResponses:ie,summary:Te}=q||{};if(!H){N.warn("Missing callId. Exiting early");return}if(!Te){N.warn("Missing summary. Exiting early");return}try{N.info(`Processing huddle survey response. callId: ${H} - traceId: ${W.getTraceId()} - results: ${JSON.stringify(q)}`)}catch(Pe){N.error(Pe)}const Me={teamId:ae,callId:H,surveySummary:Te,surveyResponseCount:(ie==null?void 0:ie.length)||0,surveyResponses:ie==null?void 0:ie.join(" ")},ke=(0,F.tT)({...Me,...(0,x.vP)()});J.addTags(ke),J.close(),N.info(`Reporting huddle survey trace with ${Object.keys(ke).length} tags (${W.getTraceId()})`),N.debug("Tags attached",ke),K.reportTrace(W),K.clearTrace(W)},"reportHuddleSurveyResultsTrace");var R=e(881805),w=e(428852),Y=e(166722),Q=e(549749),Z=e(649098),ee=e(292443),_e=e(911764),Ee=e(241697);const G=new Z.Ay("huddles");function Ae(te){return(0,g.A)(te,(ae,H,U)=>(H&&ae.push(U),ae),[])}l(Ae,"collectResponses");const ce=l(te=>{let{closeModal:ae,callId:H}=te;const U=(0,f.d4)(R.ZT),[N,K]=(0,E.useState)({}),[W,J]=(0,E.useState)(""),[q,ie]=(0,E.useState)(!1),Te=`https://${(0,Ee.qF)()}`,Me=(0,y.wA)(),ke=[{value:p.NoAudioInput,text:G.t("Others couldn\u2019t hear me")},{value:p.NoAudioOutput,text:G.t("I couldn\u2019t hear others")},{value:p.DeviceSelectionError,text:G.t("Slack selected the wrong microphone/speaker, or couldn\u2019t find my device")},{value:p.LowAudioQuality,text:G.t("Audio was low quality (e.g., it lagged or sounded choppy/robotic)")},{value:p.LowVideoQuality,text:G.t("Video was low quality (e.g., slow, not in sync with audio, or pixelated)")},{value:p.VideoNotWorking,text:G.t("Video didn\u2019t work at all")},{value:p.Disconnected,text:G.t("I got disconnected from the Huddle")},{value:p.SomethingElse,text:G.t("Something else went wrong")}],Pe=h.HuddleSurvey,Ie=(0,E.useCallback)(()=>{ie(!0);const Be={isOk:!1,notOkResponses:Ae(N),comments:W,callId:H,type:Pe};Me(v(Be)).then(()=>{U&&S({teamId:U,callId:H,results:{summary:B.Bad,...Be}}),ie(!1),ae==null||ae()})},[H,N,ae,U,W,Me,Pe]),X=(0,E.useCallback)(()=>{Me(v({isOk:!1,notOkResponses:[p.Dismiss],callId:H,type:Pe})),ae==null||ae()},[ae,H,Pe,Me]),ne=(0,E.useCallback)(Be=>J(Be),[]),be=!!N[p.SomethingElse];return E.createElement(w.dW,{closeModal:X,showCloseButton:!0,centered:!0,maxWidth:600},E.createElement(E.Fragment,null,E.createElement(w.rQ,null,E.createElement(w.Rc,{title:G.t("What went wrong?")})),E.createElement(w.$m,null,E.createElement(w.qf,null,ke.map(Be=>{let{value:We,text:Re}=Be;return E.createElement(Y.A,{text:Re,key:We,id:We,type:"inline",cursor:"pointer",className:"p-huddle_survey_modal_checkbox"},E.createElement(O.A,{name:We,value:We,checked:!!N[We],onChange:ve=>K(xe=>({...xe,[We]:ve.target.checked}))}))}),be&&E.createElement(Y.A,{className:"padding_top_75",text:G.t("If you\u2019d like, please share any other details here:"),id:"details",optional:!0},E.createElement(Q.A,{name:"details",id:"details",onChange:ne,value:W})))),E.createElement(w.jl,null,E.createElement(ee.A,{href:`${Te}/privacy-policy`,target:"_blank"},G.t("Privacy Policy")),E.createElement(w.ox,null,E.createElement(I.$n,{onClick:X,type:"outline"},G.t("Dismiss")),E.createElement(I.lV,{loading:q,onClick:Ie},G.t("Send"))))))},"HuddleSurveyModal");ce.displayName="HuddleSurveyModal";const de=(0,_e.A)(ce);var oe=e(204258);const $=(0,n.Ay)("Close the mini survey after a postive response",(te,ae,H)=>{let{channelId:U}=H;(0,s.dispatchForClientStore)((0,r.Rh)({channelId:U,optimisticHuddleState:null,huddleState:o.RJ.NOT_STARTED}))});$.meta={name:"createThunk",key:"createThunkcloseMiniSurvey",description:"Close the mini survey after a postive response"};const re=(0,n.Ay)("Set the date for when the user last saw the huddle survey",(te,ae,H)=>{let{timeSeen:U}=H;te((0,a.AZ)({pref:"huddle_survey_last_seen",value:U}))});re.meta={name:"createThunk",key:"createThunksetHuddleLastSeenSurvey",description:"Set the date for when the user last saw the huddle survey"};const ue=(0,n.Ay)("Record the result of the mini survey we first display the user after a huddle ends.",(te,ae,H)=>{let{result:U}=H;const N=(0,s.getStateForClientStore)(),K=(0,oe.E9)(N),W=(0,oe.hc)(N),J=(0,oe.l4)(N),q=h.HuddleSurvey;let ie=o.RJ.NOT_STARTED,Te;switch(U){case"bad":K&&te(de({callId:K}));break;case"good":ie=o.RJ.SURVEY_GOOD,te(v({isOk:!0,callId:K,type:q})),Te=B.Good;break;case"dismiss":Te=B.Dismiss,te(v({isOk:!1,callId:K,notOkResponses:[p.Dismiss]}));break;default:}Te&&S({teamId:J,callId:K,results:{summary:Te}}),(0,s.dispatchForClientStore)((0,r.Rh)({channelId:W,optimisticHuddleState:null,huddleState:ie})),(0,t.Ay)({getState:ae}).info(c.o7,`Marking huddle as ${ie} in component: huddle-survey`)});ue.meta={name:"createThunk",key:"createThunkrecordMiniSurvey",description:"Record the result of the mini survey we first display the user after a huddle ends."}},469988:(j,T,e)=>{"use strict";e.d(T,{GD:()=>p,Ss:()=>v,iz:()=>f});var t=e(446632),n=e(492630),s=e(501021),a=e(180491),c=e(780076),r=e(873406),o=e(674217),u=e(449552),m=e(178249),i=e(890401),d=e(204258),_=e(831730);const h=l((y,I)=>(0,u.dispatchForTeamId)(y,(0,s.Db)({callIds:I,reason:"all-calls-store/conditional-fetch"})).then(O=>O.map(M=>(0,u.dispatchForTeamId)(y,(0,n.oU)(M)))),"fetchAndUpsert"),p=(0,t.A)(()=>new r.Ay({storeKey:"allCalls",fetch:h,isEnabled:()=>!0})),A=l((y,I)=>{const O=I.map(M=>((0,u.dispatchForTeamId)(y,(0,n.oU)(M)),M.id));p().markObjectsAsFresh(y,O)},"upsertCalls"),v=(0,t.A)(()=>new c.Ay({fetch:(y,I)=>(0,u.dispatchForTeamId)(y,(0,s.Db)({callIds:I,reason:"all-calls-store/unknown-fetch"})),upsertKnown:A,upsertNonExistent:(y,I)=>A(y,I.map(O=>{let{id:M}=O;return{id:M,name:""}}))}));let E=0;const f=(0,o.Ay)("Set a huddle topic",(y,I,O)=>{let{channelId:M,topic:C}=O;const P=(0,u.getStateForClientStore)();if((0,d.aS)(P))return y((0,_.Jc)(C)),a.S.resolve();const L=(0,d.E9)(P);if(!L)return a.S.reject(new Error(`No callId for channel ${M}`));y((0,_.Jc)(C)),E+=1;const x=E;return y((0,s.xB)({roomId:L,name:C})).then(()=>y((0,n.oU)({id:L,name:C}))).finally(()=>{x===E&&y((0,_.Jc)(null)),y((0,m.H)({focusKey:i.Ay.HUDDLE_SIDEBAR_TOPIC,forceFocus:!0}))})});f.meta={name:"createThunk",key:"createThunksetHuddleTopic",description:"Set a huddle topic"};const g={fetchAndUpsert:h}},163177:(j,T,e)=>{"use strict";e.d(T,{A:()=>p});var t=e(612104),n=e.n(t),s=e(501021),a=e(180491),c=e(674217),r=e(264918),o=e(449552),u=e(741323),m=e(812754),i=e(532395),d=e(381666),_=e(47801);const h=(0,c.Ay)("Notify members to join huddle",function(){var A=(0,t.coroutine)(function*(v,E,f){let{channelId:g,userIds:y}=f;const I=[];if(y&&y.length>0){y.forEach(F=>{v((0,r.oN)({userId:F})),I.push(new a.S((V,B)=>{v((0,s.OB)({userId:F,channelId:g,reason:"huddle-notify-member"})).then(V).catch(D=>{const S=new Error(D.message);S.invitedMemberId=F,S.inviteRejectionReason=D.name,B(S)})}))});const O=(0,o.getStateForClientStore)(),M=E(),C=(0,u.Yw)(M,g),P=(0,_.$t)(M,{huddleId:C==null?void 0:C.id}),L=(0,_.kn)(O),x=(0,_.UE)(O);(0,d.e)({state:M}).track(i.EventId.CANVAS_EVENT,{contexts:{ui_context:{ui_properties:{element_name:m.Hi.INVITATION_SENT},action:i.UiAction.INVITE_PEOPLE},calls:x},invited_user_ids:y,...P,...L})}return a.S.all(I).then(O=>O)});return function(v,E,f){return A.apply(this,arguments)}}());h.meta={name:"createThunk",key:"createThunkinviteMembers",description:"Notify members to join huddle"};const p=h},205288:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>u,V3:()=>r,kb:()=>o});var t=e(674217),n=e(449552),s=e(326340),a=e(204258);const c=(0,t.Ay)("End huddle for channelId if any",(m,i,d)=>{const _=(0,n.getStateForClientStore)(),h=(0,a.hc)(_);h&&h===d&&m((0,s.A)())});c.meta={name:"createThunk",key:"createThunkmaybeEndHuddle",description:"End huddle for channelId if any"};const r=(0,t.Ay)("End last active huddle for channelId if any",(m,i,d)=>{var _;const h=(0,n.getStateForClientStore)(),p=(_=(0,a.Qn)(h))===null||_===void 0?void 0:_.channelId,A=(0,a.Ak)(h);(p&&p===d||A===null&&p&&p!==d)&&m((0,s.A)())});r.meta={name:"createThunk",key:"createThunkmaybeEndLastActiveHuddleByChannelId",description:"End last active huddle for channelId if any"};const o=(0,t.Ay)("End huddle for call Id and channelId if any",(m,i,d)=>{let{channelId:_,callId:h}=d;const p=(0,n.getStateForClientStore)(),{channelId:A,callId:v}=(0,a.Qn)(p)||{};A&&A===_&&v===h&&m((0,s.A)())});o.meta={name:"createThunk",key:"createThunkmaybeEndHuddleByChannelAndCallId",description:"End huddle for call Id and channelId if any"};const u=c},897990:(j,T,e)=>{"use strict";e.d(T,{Gt:()=>B,Ho:()=>L,LW:()=>P,Md:()=>O,Ux:()=>F,dr:()=>v,fH:()=>M,gA:()=>C,gV:()=>S,qc:()=>x,rV:()=>V,s5:()=>D});var t=e(247344),n=e(574022),s=e(674217),a=e(944780),c=e(682520),r=e(622800),o=e(114946),u=e(921055),m=e(631299),i=e(433776),d=e(282233),_=e(853660),h=e(540291);const p=(0,c.Wo)({label:"HUDDLE-SOUNDS"}),A=[o.o8,o.CZ,o.Ji,o.PV,o.wg,o.sQ,o.o3,o.nP,o.zd,o.qP],v=(0,t.A)(()=>{(0,h.IE)("pre-cache-huddles-sounds",()=>{A.forEach(R=>{p.info(`Adding huddle sound effect to in-memory cache: ${R}`),(0,r.qG)(R)})},{delay:1e3})}),E=(0,n.A)(function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(0,r.ZH)(R?o.Ji:o.o8,{loop:!1})},7e3,{leading:!0,trailing:!1}),f=(0,n.A)(function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(0,r.ZH)(R?o.PV:o.CZ,{loop:!1})},7e3,{leading:!0,trailing:!1}),g=(0,n.A)(function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(0,r.ZH)(R?o.DT:o.o,{loop:!1})},0,{leading:!0,trailing:!1}),y=(0,n.A)((R,w,Y)=>{let Q=w?o.sQ:o.wg;const Z=.25,ee=(0,_.L)(Y),_e=(0,d.DR)(Y);w&&R==="gong"&&_e&&ee&&(Q=o.o3);const Ee=(0,d.Ey)(Y);w&&R==="duck"&&Ee&&ee&&(Q=o.nP),(0,r.ZH)(Q,{loop:!1,volume:Z})},5e3,{leading:!0,trailing:!1}),I=l(R=>!(0,u.ty)(R,"mute_huddle_sounds"),"canPlayHuddleSound"),O=(0,s.Ay)("Play sound when user joins",(R,w)=>{I(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playSoundOnUserJoin"),E(!1))});O.meta={name:"createThunk",key:"createThunkplaySoundOnUserJoin",description:"Play sound when user joins"};const M=(0,s.Ay)("Play sound when user leaves",(R,w)=>{I(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playSoundOnUserLeft"),f(!1))});M.meta={name:"createThunk",key:"createThunkplaySoundOnUserLeft",description:"Play sound when user leaves"};const C=(0,s.Ay)("Play sound when you join",(R,w)=>{I(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playSoundOnYouJoin"),E(!0))});C.meta={name:"createThunk",key:"createThunkplaySoundOnYouJoin",description:"Play sound when you join"};const P=(0,s.Ay)("Play sound when you leave",(R,w)=>{I(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playSoundOnYouLeft"),f(!0))});P.meta={name:"createThunk",key:"createThunkplaySoundOnYouLeft",description:"Play sound when you leave"};const L=(0,s.Ay)("Play sound when user mutes the mic using keyboard shortcut",(R,w)=>{I(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playSoundOnMicMute"),g(!0))});L.meta={name:"createThunk",key:"createThunkplaySoundOnMicMute",description:"Play sound when user mutes the mic using keyboard shortcut"};const x=(0,s.Ay)("Play sound when user unmutes the mic using keyboard shortcut",(R,w)=>{I(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playSoundOnMicUnmute"),g(!1))});x.meta={name:"createThunk",key:"createThunkplaySoundOnMicUnmute",description:"Play sound when user unmutes the mic using keyboard shortcut"};const F=(0,s.Ay)("Play sound when reaction is received",(R,w,Y)=>{let{emoji:Q,isEffect:Z}=Y;const ee=w();(0,u.ty)(ee,"huddles_reactions_play_sound")&&I(ee)?((0,c.Ay)({getState:w}).info(a.o7,"playSoundOnReaction"),y(Q,Z,ee)):(0,c.Ay)({getState:w}).info(a.o7,"did not playSoundOnReaction")});F.meta={name:"createThunk",key:"createThunkplaySoundOnReaction",description:"Play sound when reaction is received"};const V=(0,s.Ay)("Plays the huddle invite sound",(R,w)=>{const Y=w();(0,m.YX)(Y)||!I(Y)||(0,r.ZH)((0,i.qF)(Y))});V.meta={name:"createThunk",key:"createThunkplayHuddleInviteSound",description:"Plays the huddle invite sound"};const B=(0,s.Ay)("Plays the huddle new requester sound",(R,w)=>{I(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playHuddleNewRequesterSound"),(0,r.ZH)(o.rT,{loop:!1}))});B.meta={name:"createThunk",key:"createThunkplayHuddleNewRequesterSound",description:"Plays the huddle new requester sound"};const D=(0,s.Ay)("Plays the huddle request accepted sound",(R,w)=>{I(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playHuddleNewRequestAcceptedSound"),(0,r.ZH)(o.rT,{loop:!1}))});D.meta={name:"createThunk",key:"createThunkplayHuddleNewRequestAcceptedSound",description:"Plays the huddle request accepted sound"};const S=(0,s.Ay)("Plays the huddle request expired sound",(R,w)=>{I(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playHuddleNewRequestExpiredSound"),(0,r.ZH)(o.xE,{loop:!1}))});S.meta={name:"createThunk",key:"createThunkplayHuddleNewRequestExpiredSound",description:"Plays the huddle request expired sound"}},420097:(j,T,e)=>{"use strict";e.d(T,{a:()=>_});var t=e(674217),n=e(449552),s=e(561303),a=e(199207),c=e(84484),r=e(896486),o=e(646464),u=e(264918),m=e(515456),i=e(852922),d=e(113574);const _=(0,t.Ay)("Dispatch a reaction to the middleware and the current store to notify user has sent a reaction",(h,p,A)=>{let{emoji:v,reactionType:E=o.o.Standard}=A;if(E===o.o.Sticker)h((0,a.Kp)({emoji:v})),(0,n.dispatchForClientStore)((0,s.M4)(v));else{(0,n.dispatchForClientStore)((0,s.nU)({emoji:v,reactionType:E})),h((0,u._x)({peerId:"self",emoji:v,isEmoji:!0,reactionType:E}));const{huddleEventsTrace:g}=(0,m.A)().getAllTraceHandlers();g==null||g.update({name:i.p.REACTION,type:i.G.ONCE,tags:{reactionType:E}})}const f=(0,d.WR)(p());f&&h((0,r.U$)({type:c.v.SEND_REACTION,memberId:f,timestampMs:Date.now(),emoji:v}))});_.meta={name:"createThunk",key:"createThunksendReaction",description:"Dispatch a reaction to the middleware and the current store to notify user has sent a reaction"}},420727:(j,T,e)=>{"use strict";e.d(T,{A:()=>I});var t=e(612104),n=e.n(t),s=e(269592),a=e(674217),c=e(449552),r=e(881805),o=e(944780),u=e(561303),m=e(566173),i=e(204258),d=e(119110),_=e(682520),h=e(519543),p=e(199207),A=e(134309),v=e(264918),E=e(166433),f=e(913164),g=e(839716);const y=(0,a.Ay)("Enable or disable local microphone",function(){var O=(0,t.coroutine)(function*(M,C,P){const L=(0,c.getStateForClientStore)(),x=C(),F=(0,_.Ay)({state:x}),V=(0,E.Hc)(x);if((0,A.RT)(x)||M((0,p.G4)({canShowMutedBanner:!0})),(0,d.y3)()||(yield(0,c.dispatchForClientStore)((0,g.e$)({mediaResourceType:h.mT.MICROPHONE}))),F.info(o.o7,`Set microphone to ${P}`),V&&P){F.warn(o.o7,"Microphone could not be set to enabled as access to the device was blocked"),(0,d.y3)()?M((0,f.CE)({alert:f.vT.NoSystemAudio})):M((0,f.CE)({alert:f.vT.NoBrowserAudioPermission}));return}const{teamId:D}=(0,i.Qn)(L)||{};if(D&&D!==(0,r.ZT)(x)){(0,c.dispatchForTeamId)(D,y(P));return}(0,s.A)(P)||((0,c.dispatchForClientStore)((0,u.I9)(P)),P&&(0,i.wQ)(L)&&M((0,m.e)({clearOnEndedCallback:!0,logContext:"huddle-set-self-microphone"}))),M((0,v.kT)({id:"self",isMicrophoneEnabled:P}))});return function(M,C,P){return O.apply(this,arguments)}}());y.meta={name:"createThunk",key:"createThunksetSelfMicrophone",description:"Enable or disable local microphone"};const I=y},959905:(j,T,e)=>{"use strict";e.d(T,{A:()=>I});var t=e(674217),n=e(180491),s=e(682520),a=e(656453),c=e(56473),r=e(765926),o=e(449552),u=e(47801),m=e(204258),i=e(304510),d=e(167094),_=e(817075),h=e(787781),p=e(329981),A=e(242098),v=e(282233),E=e(831730),f=e(3704);const g=(0,t.Ay)("Join/start huddle, but confirm with shouty rooster modal first",(O,M,C)=>{let{channelId:P,threadTs:L,muted:x,callId:F,forceFocus:V,entryPoint:B,forceConfirmation:D,markTelemeter:S,isMultiDevice:R,isStandaloneHuddle:w}=C;const Y=l(()=>{var Q;S&&(0,a.Cy)({state:M()}).mark(d.qr),(Q=O((0,c.A)({channelId:P,threadTs:L,muted:x,callId:F,forceFocus:V,entryPoint:B,isMultiDevice:R,isStandaloneHuddle:w})))===null||Q===void 0||Q.catch(Z=>{(0,s.Ay)({getState:M}).error("Could not start huddle",Z)})},"onConfirm");if((0,u.Qj)(M(),P,L)||D){L?O((0,A.iR)({event:{type:h.jo.HUDDLE_STARTED_FROM_THREAD}})).then(()=>{(0,p.Hp)(M(),h.xu.LAUNCH_MODAL)===h.ze.HUDDLE_FROM_THREAD_EDUCATIONAL_MODAL?O((0,i.Wx)({channelId:P??"",onConfirm:Y})):Y()}):O((0,_.Oe)({channelId:P??"",onConfirm:Y}));return}Y()});g.meta={name:"createThunk",key:"createThunkstartHuddleWithShoutyRooster",description:"Join/start huddle, but confirm with shouty rooster modal first"};const y=(0,t.Ay)("Join/start huddle, but confirm if already in another huddle",(O,M,C)=>{const{channelId:P}=C,L=M(),x=(0,v.pL)(L),F=(0,o.getStateForClientStore)(),V=(0,m.hc)(F),B=(0,m.EG)(F),D=(0,m.$V)(F),S=(0,u.r5)(L,{channelId:P});if(O((0,r.z)()),V&&P!==V&&!D)return O((0,_.Y6)({prevChannelId:V,nextChannelId:P??"",onConfirm:()=>{O(g({...C,markTelemeter:!1}))}}));if(x&&S){O((0,E.$Z)({channelId:P??"",onConfirm:R=>{let{isMultiDevice:w}=R;return O(g({...C,markTelemeter:!1,isMultiDevice:w}))}}));return}return V&&P===V&&B===f.RJ.STARTED?n.S.resolve():O(g({...C,markTelemeter:!0}))});y.meta={name:"createThunk",key:"createThunkstartHuddleWithConfirmation",description:"Join/start huddle, but confirm if already in another huddle"};const I=y},56473:(j,T,e)=>{"use strict";e.d(T,{A:()=>te});var t=e(612104),n=e(370671);let s=null;const a=l(()=>s,"getOpenChannelId"),c=l(ae=>{s=ae},"setOpenChannelId");var r=e(296540),o=e(917780),u=e(705930),m=e(30029),i=e(292443),d=e(238798),_=e(532395),h=e(241697),p=e(649098),A=e(659891),v=e(135713);const E=new p.Ay("huddles");function f(ae){let{closeModal:H}=ae;const U=(0,o.d4)(A.A),N=(0,o.d4)(J=>(0,v._Z)(J,"adoption_instant_slack"))==="treatment";let K,W;if((0,n.yh)())K=E.t("Your browser does not support Huddles"),W=U&&N?E.rt("Unfortunately, Huddles aren\u2019t available in this browser. We recommend switching to <chrome-link>Chrome</chrome-link>.",{},J=>{let{text:q}=J;return r.createElement(i.A,{href:"https://www.google.com/chrome"},q)}):E.rt("Unfortunately, Huddles aren\u2019t available in this browser. We recommend downloading the <desktop-link>Slack desktop app</desktop-link>, or you can switch to <chrome-link>Chrome</chrome-link>.",{},J=>{let{tag:q,text:ie}=J;switch(q){case"desktop-link":return r.createElement(i.A,{href:`https://${(0,h.qF)()}/downloads`},ie);case"chrome-link":return r.createElement(i.A,{href:"https://www.google.com/chrome"},ie);default:return null}});else if((0,n.WT)())K=E.t("Please update Slack"),W=E.t("Unfortunately, this version of Slack is out of date. Update your Slack app for access to Huddles \u2014 as well as bug fixes and an all-around smoother experience.");else return null;return r.createElement(d.A,{eventId:_.EventId.HUDDLES_ALERT_SHOWN,uiComponentName:_.UiComponentName.HUDDLES_UNSUPPORTED_ALERRT,clogImpression:!0},r.createElement(m.A,{onClose:H,onSubmit:H,showCancelButton:!1,showSubmitButton:!0,title:K,submitButtonText:E.t("OK")},W))}l(f,"HuddleUnsupportedAlert"),f.displayName="HuddleUnsupportedAlert";const g=(0,u.e)(f);var y=e(180491),I=e(674217),O=e(831730),M=e(565526),C=e(896486),P=e(881805),L=e(492630),x=e(929251);const F=(0,I.Ay)("End active call",(ae,H)=>{const U=(0,L.J2)(H());if(U){const N=(0,L.Ms)(U);N&&!N.isClosed()&&(0,x.R)(N,"endActiveCall")}});F.meta={name:"createThunk",key:"createThunkmaybeEndActiveCall",description:"End active call"};var V=e(178249),B=e(890401),D=e(276881),S=e(907633),R=e(449552),w=e(741323),Y=e(612812),Q=e(282233),Z=e(113574),ee=e(853660),_e=e(204258),Ee=e(3704),G=e(812754),Ae=e(381666),ce=e(47801),de=e(859790),oe=e(550521),$=e(561303),re=e(515456);const ue=(0,I.Ay)("Start huddle",function(){var ae=(0,t.coroutine)(function*(H,U,N){let{channelId:K,threadTs:W,muted:J,callId:q,forceFocus:ie,entryPoint:Te=Ee.su.UNKNOWN,isMultiDevice:Me,isStandaloneHuddle:ke}=N;(0,R.dispatchForClientStore)((0,$.t2)(!1));const Pe=U();if(H(F()),H((0,C.Lm)(!1)),H((0,C.T3)()),(0,n.WT)()||(0,n.yh)())return H(g()),y.S.resolve();H((0,S.g6)({experimentHuddlesDiscoveryCallsGroupTreatment:(0,Q.Ms)(Pe),interactionType:D.X8.Click})),a()!==K&&H((0,O.Es)({channelId:K??"",open:!1}));const Ie=(0,ee.L)(Pe),X=(0,P.ZT)(Pe);(0,re.A)().initializeTraces({teamId:X,isTinySpeck:Ie});const ne=!!(0,_e.gj)((0,R.getStateForClientStore)()),fe=yield Y.A.getInstance().getNearestChimeMediaRegion(X),{ttiTrace:be,huddleEventsTrace:Be}=(0,re.A)().getAllTraceHandlers();be.addTTIMetaTags({entryPoint:Te,preferredMediaRegion:fe,isPrejoin:ne,isCreate:!(0,w.Yw)(Pe,K)}),Be==null||Be.recordEntryPoint(Te),oe.A.publish({type:de.lx.PreferredMediaRegion,update:{mediaRegionPreferred:fe}});const We=(0,M.A)(),Re=(0,Q.Q3)(Pe),ve=(0,Z.WR)(Pe);return We.start(X,K??"",J,q,W,Re,Me,ke).then((0,t.coroutine)(function*(){const xe=(0,R.getStateForClientStore)(),He=(0,ce.$t)(Pe,{huddleId:q}),je=(0,ce.kn)(xe),Ke=(0,ce.UE)(xe);(0,Ae.e)({state:Pe}).track(_.EventId.CANVAS_EVENT,{contexts:{ui_context:{entry_point:Te,ui_properties:{element_name:G.Hi.CANVAS_JOIN},action:_.UiAction.TOGGLE},calls:Ke},...He,...je}),H((0,V.H)({focusKey:B.Ay.HUDDLE_SIDEBAR_FOOTER,forceFocus:ie})),H((0,O.xb)(!1)),q&&H((0,L.r_)({callId:q,userId:ve}))}))});return function(H,U,N){return ae.apply(this,arguments)}}());ue.meta={name:"createThunk",key:"createThunkstartHuddle",description:"Start huddle"};const te=ue},765926:(j,T,e)=>{"use strict";e.d(T,{z:()=>a});var t=e(674217),n=e(433776),s=e(622800);const a=(0,t.Ay)("Stop the huddle invite sound",(c,r)=>{(0,s.ds)((0,n.qF)(r()),{logFailure:!1})});a.meta={name:"createThunk",key:"createThunkstopHuddleInviteSound",description:"Stop the huddle invite sound"}},566173:(j,T,e)=>{"use strict";e.d(T,{e:()=>i});var t=e(674217),n=e(682520),s=e(433290),a=e(561303),c=e(449552),r=e(282233),o=e(204258),u=e(199207),m=e(134309);const i=(0,t.Ay)("Stops huddle lounge music from playing",(d,_,h)=>{let{clearOnEndedCallback:p,logContext:A,isStoppedByUser:v}=h;const E=_(),f=(0,n.Ay)({state:E}),g=(0,r.Q3)(E),y=(0,r.CI)(E),I=(0,m.jr)(E),O=(0,m.K8)(E),M=(0,c.getStateForClientStore)(),C=(0,o.E9)(M);s.Ay.getInstance({experimentHuddlesLoungeMusicPlayerGroupOn:g}).stopMusic({clearOnEndedCallback:p,logger:f,logContext:A}),(0,c.dispatchForClientStore)((0,a.Ag)(!1)),v&&C&&d((0,u.sH)({huddleId:C,hasUserStoppedLoungeMusic:v})),y&&(v||O)&&I&&d((0,u.ju)({stopMusic:!0}))});i.meta={name:"createThunk",key:"createThunkstopHuddleLoungeMusic",description:"Stops huddle lounge music from playing"}},326340:(j,T,e)=>{"use strict";e.d(T,{A:()=>i});var t=e(674217),n=e(565526),s=e(449552),a=e(566173),c=e(892285),r=e(282233),o=e(561303),u=e(904214);const m=(0,t.Ay)("Stop the active huddle",(d,_)=>{const h=_(),p=(0,r.lV)(h);return(0,s.dispatchForClientStore)((0,o.yi)({})),d((0,c.A)()),d((0,a.e)({clearOnEndedCallback:!0,logContext:"stop-huddle-thunk"})),p&&(0,s.dispatchForClientStore)((0,o.JM)()),d((0,u.LL)(u.vT.HiddenUserJoinedHuddle)),(0,n.A)().stop()});m.meta={name:"createThunk",key:"createThunkstopHuddle",description:"Stop the active huddle"};const i=m},715431:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>N,vP:()=>ae});var t=e(707980),n=e(744778),s=e(446632),a=e(164841),c=e(21879),r=e(307520),o=e(741323),u=e(695823),m=e(47801),i=e(919758),d=e(204258),_=e(845375),h=e(285955),p=e(885850),A=e(449552),v=e(275610),E=e(388077),f=e(190905),g=e(264918),y=e(646464),I=e(166433),O=e(399667),M=e(475711),C=e(80596),P=e(282233),L=e(134309),x=e(139076),F=e(119110),V=e(118118),B=e(839693),D=e(127225),S=e(934861);function R(K){return K?(0,S.tc)(K)?"free":(0,S.r7)(K)?"enterprise":"pro":"unknown"}l(R,"getTeamTier");var w=e(129318),Y=e(756120),Q=e(716685),Z=e(135713),ee=e(491528),_e=e(69938),Ee=e(113574),G=e(904214);const Ae=navigator.hardwareConcurrency,ce=navigator.platform,de=(0,F.zS)(),oe=(0,Y.b3)(),$=(0,Y.$i)(),re=l(K=>(0,t.A)(K,(W,J,q)=>{if(q===D.N2)return W;const ie=q.split(/-|_/).slice(0,-1).join("-"),Te=(0,n.A)(`windows-${ie}-count`);return W[Te]?W[Te]+=1:W[Te]=1,W},{}),"countWindowsByType"),ue=l(K=>{if(!K)return"";let W=K;const J=/Default -/g;W=K.replace(J,"");const q=/ *?\([^)]*?\) *?/g;return W=W.replace(q,""),W=W.trim(),W},"scrubDeviceLabelForReporting");let te;const ae=l(()=>te,"getMostRecentStableTags"),H=(0,s.A)((K,W)=>{let{teamState:J,clientState:q}=K;var ie,Te,Me,ke,Pe,Ie,X;const ne=(0,d.E9)(q),fe=(0,d.hc)(q),be=(0,O.OV)(J),Be=(0,P.MJ)(J),We=(0,P.nC)(J),Re=(0,P.Mv)(J),ve=(0,P.TN)(J),xe=(0,P.DP)(J),He=(0,Z._Z)(J,"huddles_disable_audio_red"),je=(0,Z._Z)(J,"huddles_h264_baseline",!1),Ke=(0,Z._Z)(J,"huddles_h264_baseline_screenshare",!1),ht=(0,P.Cu)(J),dt=E.zF.sdkVersion,Ve=(0,m.R8)(J),Je=(0,P.Qq)(J),Ge=(0,d.sQ)(q),Le=(0,d.l4)(q),Mt=(0,w.H7)(J),Dt=R(Mt);var pt;const Qt=(pt=(ie=(0,h.getBootedWorkspaces)(q))===null||ie===void 0?void 0:ie.length)!==null&&pt!==void 0?pt:0,Nt=(0,B.Bh)(),bt=(Nt==null||(Te=Nt.deviceIdPriorities)===null||Te===void 0||(Me=Te.camera)===null||Me===void 0?void 0:Me.length)||0,Yt=(Nt==null||(ke=Nt.deviceIdPriorities)===null||ke===void 0||(Pe=ke.microphone)===null||Pe===void 0?void 0:Pe.length)||0,fn=(Nt==null||(Ie=Nt.deviceIdPriorities)===null||Ie===void 0||(X=Ie.output)===null||X===void 0?void 0:X.length)||0,Tt=(0,p.D5)(J),sn=(Tt==null?void 0:Tt.length)||0,mn=(0,_e.s2)()||{},wt={teamId:Le,huddleId:ne,huddleChannelId:fe,workspaceCount:Qt,chimeSdkVersion:dt,teamTier:Dt,isPreWarmed:Je,isPrejoin:Ge,isHuddlesIncreaseMaxParticipantsEnabled:We,isTranscriptAllowed:Ve,isChimeSdkExpEnabled:be,isHuddlesLaterEnabled:Be,disableAudioRedundancyGroup:He,h264BaselineGroup:je,h264BaselineScreenshareGroup:Ke,isDeviceManagementV2:Re,isDeviceManagementV2FriendsOf:ve,isRtmFilteringEnabled:xe,osPlatform:ce,osVersion:de,devicePriorityListCameraCount:bt,devicePriorityListMicrophoneCount:Yt,devicePriorityListSpeakerCount:fn,envIsJsPath:oe,envIsQa:$,xwsChannelCount:sn,isAv1ScreenshareEnabled:ht,...mn};return te=wt,wt},(K,W)=>W),N=l(K=>{let{state:W,appMetrics:J}=K;var q,ie,Te,Me,ke,Pe,Ie,X;const ne=(0,A.getClientStoreInstance)().getState(),fe=(0,d.cN)(ne),be=(0,d.E9)(ne),Be=`${fe}${be??""}`,We=H({teamState:W,clientState:ne},Be),{huddleId:Re,huddleChannelId:ve,workspaceCount:xe,isRtmFilteringEnabled:He}=We,je={},Ke=(0,f.e6)(W),ht=Ke?(0,f.Le)(W,{tab:Ke}):{},{primary:dt,secondary:Ve,sidebar:Je}=ht||{};Object.assign(je,{viewPrimary:dt==null?void 0:dt.viewType,viewSecondary:Ve==null?void 0:Ve.viewType,viewSidebar:Je==null?void 0:Je.viewType,viewTab:Ke});const Ge=(0,I.Hc)(W),Le=(0,I.AZ)(W),Mt=(0,I.IO)(W),Dt=(0,I.JM)(W),pt=(0,I.SR)(W),Qt=(0,I.f3)(W),Nt=(0,I.aA)(W),bt={microphoneIsBlocked:Ge,microphoneIsAvailable:Le,cameraIsBlocked:pt,cameraIsAvailable:Qt,isMicrophoneBluetooth:Mt,isSpeakerBluetooth:Dt,isMicrophoneAndSpeakerOnSameDevice:Nt},Yt=(0,u.fq)(W),fn={};if(Yt){const _n=Object.keys(Yt);Object.assign(fn,{windowsTotalOpen:_n.length,windowsOpenTypes:_n.length?_n.join(" "):"",windowsTypeWithFocus:(0,a.A)(Yt,Cn=>!!Cn.isFocused),...re(Yt)})}const Tt=(0,m.Fm)(W),sn=Tt&&Tt.type===G.vT.AudioOnlyModeRecommended,mn=(0,x._R)(W),wt=mn!==null,On={isTroubleshootingPanelOpen:wt,isAudioOnlyModeEnabled:(0,d.Rv)(ne),troubleshootingPanelTab:wt?(0,x.Eh)(W):null,troubleshootingPillPage:(0,x.Wg)(W),troubleshootingEntryPointWas:(0,x.qV)(W),troubleshootingSessionId:wt?`${(0,Ee.WR)(W)}${Re}:${(0,x.$i)(W)}`:null,troubleshootingBannerInView:sn,troubleshootingSource:mn},Zt=(0,o.UK)(W),Mn=(q=(0,I.ql)(W,M.lW.Camera))===null||q===void 0?void 0:q.label,Wn=(ie=(0,I.ql)(W,M.lW.Microphone))===null||ie===void 0?void 0:ie.label,xn=(Te=(0,I.ql)(W,M.Q4))===null||Te===void 0?void 0:Te.label,{isScreenshareEnabled:gn,isHostDrawEnabled:An,isHostDrawRendererActive:vt,isCameraEnabled:xt,isMicrophoneEnabled:Vt,isConnected:Se}=(0,g.Ng)(W),St=!!gn,Ce=!!xt,Ne=(0,g.fU)(W,{id:"self"}),ze=(0,g.MY)(W),Oe=ze==="self",Fe=Zt.filter(_n=>_n.isCameraEnabled).length,_t=(0,v.H)(ve),ft=(0,B.Bh)(),Ct=Ce&&(ft==null||(Me=ft.video)===null||Me===void 0?void 0:Me.effect)===V.t.Blur,$t=!!(!(ft==null||(ke=ft.audio)===null||ke===void 0)&&ke.enableNoiseSuppression),rn=$t&&Oe,un=Ce&&(ft==null||(Pe=ft.video)===null||Pe===void 0?void 0:Pe.effect)===V.t.Background&&(ft==null||(Ie=ft.video)===null||Ie===void 0?void 0:Ie.effectBgKey)!==void 0,hn=!!ze,pn=!!Fe,Qn=(0,g.nD)(W).length,zn=!!Qn,Hn=Qn+(St?1:0),Kn=Hn===2,os=zn||St,et=(0,x.gA)(W),Et=(0,_.VN)(W),we=(0,_.M3)(W),tt=hn?(X=Zt.find(_n=>_n.id===ze))===null||X===void 0?void 0:X.userId:void 0,Rt=r.J.document.visibilityState==="visible",It={isBackgroundBlurActive:Ct,isNoiseSuppressionEnabled:$t,isNoiseSuppressionActive:rn,isCustomVideoBackgroundActive:un,isClosedCaptionsEnabled:Et,isSideBySideCaptionsEnabled:we},Jt=(0,Q.V_)(),an=(0,Q.nu)(),Ft=He?(0,ee.zT)():void 0,Vn=He?(0,ee.kB)():void 0,Pt=(0,ee.oB)(),Xe={callId:be,isMicrophoneEnabled:Vt,isActiveSpeaker:Oe,isSomeoneSpeaking:hn,isSomeoneSharingScreen:os,isVideoEnabledForSomeone:et,isSharingScreen:St,isHostDrawEnabled:An,isHostDrawActive:vt,isSelfVideoEnabled:Ce,isPeerVideoEnabled:pn,isHuddleWindowVisible:_t,selectedCamera:ue(Mn),selectedMicrophone:ue(Wn),selectedSpeakers:ue(xn),activeSpeakerUserId:tt,isPeerSharingScreen:zn,isDualScreenshareActive:Kn,cpuCount:Ae,remotePeerCount:Zt.length,remotePeersWithVideoCount:Fe,peersScreensharingCount:Qn,activeScreenshareCount:Hn,workspaceCount:xe,huddleStartTimestamp:fe,isDisconnected:Se===!1,isMainWindowVisible:Rt,rtmTaskQueueLength:an,rtmProcessingDelay:Jt,rtmPercentSkipped:Ft,rtmTopAllowedTypes:Vn,rtmRatePerSecond:Pt};let Ze={};if(J){const{cpu:_n,memory:Cn,gpu:wn,thermalState:$n,speedLimit:es}=J,ns=(0,c.A)(_n)?Math.round(_n*Ae):void 0,jn=(0,c.A)(wn)?Math.round(wn*Ae):void 0,{useHwAcceleration:ts}=(0,i.oQe)("settings")||{};Ze={cpuUseRelative:_n?Math.round(_n):void 0,cpuUse:ns,gpuUse:jn,memoryUse:(Cn==null?void 0:Cn.workingSetSize)||void 0,isHardwareAccelerationEnabled:ts,osThermalState:$n,osSpeedLimit:es,osIsThrottlingCpu:es&&es!==0?es<30:void 0}}let lt={};if(_t){var nt;const _n=(0,L.Ec)(W,{huddleId:Re}),Cn=(0,L.SC)(W,{huddleId:Re,surface:_n});lt={huddleWindowSurface:_n,huddleWindowFocusedContentType:(Ne==null||(nt=Ne.item)===null||nt===void 0?void 0:nt.type)||y.cM.None,huddleWindowIsFullscreen:(0,L.g0)(W),huddleWindowIsSelfDrawingEnabled:(0,L.ny)(W),huddleWindowWindowHeight:Cn==null?void 0:Cn.height,huddleWindowWindowWidth:Cn==null?void 0:Cn.width}}const qe=(0,C.Ay)(),Kt={batteryIsUsing:qe.isUsingBatteryPower(),batteryPercentRemaining:qe.getLevel()};return{...Xe,...It,...Ze,...lt,...je,...bt,...Kt,...On,...fn,...We}},"getHuddleStateSnapshot")},868842:(j,T,e)=>{"use strict";e.d(T,{o:()=>c});var t=e(774165),n=e(741323),s=e(881805),a=e(469988);const c=(0,t.Mz)((r,o)=>{const u=(0,n.dy)(r);if(u)return u;const m=(0,n.Yw)(r,o);if(!m)return null;const i=(0,s.ZT)(r);return m.name===void 0?((0,a.Ss)().fetchObjectWithId(i,m.id),null):((0,a.GD)().maybeRefetch(i,m.id),m.name)});c.meta={name:"createSelector",key:"createSelectorgetHuddleTopic",description:(r,o)=>{const u=(0,n.dy)(r);if(u)return u;const m=(0,n.Yw)(r,o);if(!m)return null;const i=(0,s.ZT)(r);return m.name===void 0?((0,a.Ss)().fetchObjectWithId(i,m.id),null):((0,a.GD)().maybeRefetch(i,m.id),m.name)}}},85509:(j,T,e)=>{"use strict";e.d(T,{I:()=>i,s:()=>m});var t=e(446632),n=e(129318),s=e(97059),a=e(396386),c=e(934861),r=e(347737),o=e(885850);const u=(0,t.A)((d,_)=>(0,c.tc)(d)&&(_==null?void 0:_.some(h=>(0,s.ju)(h)&&!(0,a.JM)(h)))),m=l(d=>{const _=(0,n.H7)(d),h=(0,o.DM)(d);return u(_,h)},"isHuddlesEnabledForSponsoredTeam"),i=l((d,_)=>{const h=(0,n.H7)(d);return!!_&&(0,c.tc)(h)&&(0,r.dE)(d,_)},"isHuddlesEnabledForSponsoredChannel")},949252:(j,T,e)=>{"use strict";e.d(T,{F:()=>o});var t=e(612104),n=e.n(t),s=e(269592),a=e(180491),c=e(682520),r=e(944780);class o{static getInstance(){if(!o.wakeLockManager)try{o.wakeLockManager=new o}catch(m){(0,c.Wo)({label:r.o7}).warn("Error instantiating WakeLockManager,",m.message)}return o.wakeLockManager}static doesInstanceExist(){return!(0,s.A)(o.wakeLockManager)}request(){var m=this;return(0,t.coroutine)(function*(){if(m.wakeLockSentinel)return a.S.resolve();m.wakeLockSentinel=yield m.wakeLock.request("screen").catch(i=>(m.logger.warn("WakeLock acquire failed",i.message),null)),m.addHandlers()})()}release(){var m=this;return(0,t.coroutine)(function*(){if(!m.wakeLockSentinel)return a.S.resolve();m.shouldRemoveVisibilityHandler=!0,yield m.wakeLockSentinel.release(),m.logger.info("WakeLock released")})()}addHandlers(){this.wakeLockSentinel&&(this.wakeLockSentinel.addEventListener("release",this.handleWakeLockReleased),document.addEventListener("visibilitychange",this.handleDocumentVisibilityChange))}cleanupHandlers(){this.wakeLockSentinel&&(this.wakeLockSentinel.removeEventListener("release",this.handleWakeLockReleased),this.wakeLockSentinel=null,this.shouldRemoveVisibilityHandler&&(document.removeEventListener("visibilitychange",this.handleDocumentVisibilityChange),this.shouldRemoveVisibilityHandler=!1))}handleWakeLockReleased(){var m=this;return(0,t.coroutine)(function*(){m.logger.info("WakeLock released by browser"),m.cleanupHandlers()})()}handleDocumentVisibilityChange(){var m=this;return(0,t.coroutine)(function*(){document.visibilityState==="visible"&&m.request()})()}constructor(){if(this.logger=(0,c.Wo)({label:r.o7}),this.shouldRemoveVisibilityHandler=!1,!navigator.wakeLock)throw Error("navigator.wakeLock undefined");this.wakeLock=navigator.wakeLock,this.handleDocumentVisibilityChange=this.handleDocumentVisibilityChange.bind(this),this.handleWakeLockReleased=this.handleWakeLockReleased.bind(this)}}l(o,"WakeLockManager")},185349:(j,T,e)=>{"use strict";e.d(T,{Li:()=>h,ML:()=>c,Rt:()=>o,_6:()=>_,aS:()=>u,al:()=>r,bW:()=>i,it:()=>d,qO:()=>m});var t=e(152532),n=e(674217),s=e(550521),a=e(859790);const c=(0,t.Ay)("Update the state of the active tab in the huddle troubleshooting panel");c.meta={name:"createAction",key:"createActionupdateTroubleshootingActiveAccordionViewTrace",description:"Update the state of the active tab in the huddle troubleshooting panel"};const r=(0,t.Ay)("Makes troubleshoot panel V2 visible in source view or clears it");r.meta={name:"createAction",key:"createActionsetTroubleshootingSource",description:"Makes troubleshoot panel V2 visible in source view or clears it"};const o=(0,n.Ay)("Set the screen sharing of a peer.",(p,A,v)=>{s.A.publish({type:a.lx.TroubleshootingEntryPoint,update:(v==null?void 0:v.entryPoint)||null}),p(r(v))});o.meta={name:"createThunk",key:"createThunksetTroubleshootingSourceWithTrace",description:"Set the screen sharing of a peer."};const u=(0,t.Ay)("Sets active pill page for tracing.");u.meta={name:"createAction",key:"createActionsetTroubleshootingPillPageTrace",description:"Sets active pill page for tracing."};const m=(0,t.Ay)("Update stable metrics state");m.meta={name:"createAction",key:"createActionupdateStableMetrics",description:"Update stable metrics state"};const i=(0,t.Ay)("Update unstable metrics and warnings state");i.meta={name:"createAction",key:"createActionupdateUnstableMetricsAndWarnings",description:"Update unstable metrics and warnings state"};const d=(0,t.Ay)("Update stable warnings state");d.meta={name:"createAction",key:"createActionupdateStableWarnings",description:"Update stable warnings state"};const _=(0,t.Ay)("Update stable alert state");_.meta={name:"createAction",key:"createActionupdateStableAlerts",description:"Update stable alert state"};const h=(0,t.Ay)("Update unstable alert state");h.meta={name:"createAction",key:"createActionupdateUnstableAlerts",description:"Update unstable alert state"}},139076:(j,T,e)=>{"use strict";e.d(T,{$i:()=>i,Eh:()=>o,FP:()=>E,Ku:()=>g,Wf:()=>v,Wg:()=>m,Z8:()=>r,_R:()=>u,cB:()=>p,gA:()=>y,h:()=>A,m:()=>f,qV:()=>d});var t=e(915773),n=e(45798),s=e(87715),a=e(470387),c=e(264918);const r=3,o=(0,t.Ay)(I=>I.huddleTroubleshooting.view.activeAccordionView);o.meta={name:"createSelector",key:"createSelectorgetTroubleshootingPanelActiveAccordionView",description:I=>I.huddleTroubleshooting.view.activeAccordionView};const u=(0,t.Ay)(I=>I.huddleTroubleshooting.view.source);u.meta={name:"createSelector",key:"createSelectorgetTroubleshootingPanelSource",description:I=>I.huddleTroubleshooting.view.source};const m=(0,t.Ay)(I=>I.huddleTroubleshooting.view.activePillPage);m.meta={name:"createSelector",key:"createSelectorgetTroubleshootingPillPageTrace",description:I=>I.huddleTroubleshooting.view.activePillPage};const i=(0,t.Ay)(I=>I.huddleTroubleshooting.view.source?I.huddleTroubleshooting.view.openCounter:-1);i.meta={name:"createSelector",key:"createSelectorgetTroubleshootingSessionCounterIdTrace",description:I=>I.huddleTroubleshooting.view.source?I.huddleTroubleshooting.view.openCounter:-1};const d=(0,t.Ay)(I=>I.huddleTroubleshooting.view.entryPoint);d.meta={name:"createSelector",key:"createSelectorgetTroubleshootingEntryPointTrace",description:I=>I.huddleTroubleshooting.view.entryPoint};const _=(0,t.Ay)(I=>I.huddleTroubleshooting.view.alertCount>=r);_.meta={name:"createSelector",key:"createSelectorshouldDisplaySupportLink",description:I=>I.huddleTroubleshooting.view.alertCount>=r};const h=(0,t.Ay)(I=>I.huddleTroubleshooting.metrics.stable);h.meta={name:"createSelector",key:"createSelectorgetStableMetrics",description:I=>I.huddleTroubleshooting.metrics.stable};const p=(0,t.Ay)(I=>I.huddleTroubleshooting.metrics.unstable);p.meta={name:"createSelector",key:"createSelectorgetUnstableMetrics",description:I=>I.huddleTroubleshooting.metrics.unstable};const A=(0,t.Ay)(I=>I.huddleTroubleshooting.warnings.stable);A.meta={name:"createSelector",key:"createSelectorgetStableWarnings",description:I=>I.huddleTroubleshooting.warnings.stable};const v=(0,t.Ay)(I=>I.huddleTroubleshooting.warnings.unstable);v.meta={name:"createSelector",key:"createSelectorgetUnstableWarnings",description:I=>I.huddleTroubleshooting.warnings.unstable};const E=(0,t.Ay)(I=>I.huddleTroubleshooting.alerts.stable);E.meta={name:"createSelector",key:"createSelectorgetStableAlerts",description:I=>I.huddleTroubleshooting.alerts.stable};const f=(0,t.Ay)(I=>I.huddleTroubleshooting.alerts.unstable);f.meta={name:"createSelector",key:"createSelectorgetUnstableAlerts",description:I=>I.huddleTroubleshooting.alerts.unstable};const g=(0,s.F)(I=>E(I)||n.t0,I=>f(I)||n.t0,I=>A(I)||n.t0,(I,O,M)=>{const{isMicrophoneBlocked:C,isCameraBlocked:P,isDisconnected:L,isMicrophoneNotSendingAudio:x}=I,{isAudioQualityPoor:F,isCpuCompetitionPoor:V,isNetworkQualityPoor:B,networkQualityHealth:D}=O,{isCameraProbablyIphone:S,isSpeakerBluetooth:R}=M,w=!!(F&&B),Y=!!(F&&V),Q=!!(R&&F||P||C||x||S),Z=!!(w||Y||P||C||x||L),ee=F||L?a.bz.Bad:D;return{shouldSurfaceGeneralWarning:Z,shouldSurfaceSystemWarning:Y,shouldSurfaceDevicesWarning:Q,aggregateNetworkHealth:ee}}),y=(0,s.F)(c.Ng,c.nt,(I,O)=>{const{isCameraEnabled:M}=I;return!!(M||O)})},470387:(j,T,e)=>{"use strict";e.d(T,{ML:()=>n,bz:()=>s,pK:()=>t});var t;(function(a){a.Network="network",a.System="system",a.Devices="devices",a.Overview="overview"})(t||(t={}));var n;(function(a){a.EnlargedWindow="EnlargedWindow",a.CompactWindow="CompactWindow",a.MiniPlayer="MiniPlayer"})(n||(n={}));var s;(function(a){a.Good="good",a.Warn="warn",a.Bad="bad"})(s||(s={}))},96120:(j,T,e)=>{"use strict";e.d(T,{EH:()=>u});var t=e(87715),n=e(915773),s=e(45798),a;const c=(0,n.Ay)(m=>(a=m==null?void 0:m.links)!==null&&a!==void 0?a:s.t0);var r;c.meta={name:"createSelector",key:"createSelectorgetLinksState",description:m=>(r=m==null?void 0:m.links)!==null&&r!==void 0?r:s.t0};const o=(0,n.Ay)((m,i)=>c(m)[i]);o.meta={name:"createSelector",key:"createSelectorgetLinkByUrl",description:(m,i)=>c(m)[i]};const u=(0,t.F)(c,m=>Object.values(m).filter(i=>!i.fileId).sort((i,d)=>(d.timestamp||0)-(i.timestamp||0)))},776789:(j,T,e)=>{"use strict";e.d(T,{$W:()=>u,$o:()=>p,Am:()=>h,At:()=>re,C2:()=>O,CO:()=>i,Cj:()=>A,DB:()=>Ae,Dx:()=>M,EX:()=>w,Fm:()=>d,GI:()=>m,IC:()=>F,I_:()=>r,KF:()=>ce,KJ:()=>_e,Lu:()=>Ee,OG:()=>_,Ot:()=>oe,Qk:()=>s,RL:()=>L,RS:()=>P,Sb:()=>C,TD:()=>$,TW:()=>D,Tt:()=>Q,U_:()=>v,Uo:()=>Z,XB:()=>x,_L:()=>y,_R:()=>S,ab:()=>I,d0:()=>Y,fg:()=>R,g:()=>E,qD:()=>de,tK:()=>n,w$:()=>V,wW:()=>ee,w_:()=>B,yw:()=>o,zD:()=>g,zl:()=>G});var t=e(152532);const n=(0,t.Ay)("Remove a list");n.meta={name:"createAction",key:"createActionremoveList",description:"Remove a list"};const s=(0,t.Ay)("trigger animation for view");s.meta={name:"createAction",key:"createActiontriggerAnimationForViewId",description:"trigger animation for view"};const a=(0,t.Ay)("Add / update a list column");a.meta={name:"createAction",key:"createActionupsertColumn",description:"Add / update a list column"};const c=(0,t.Ay)("Remove a list column");c.meta={name:"createAction",key:"createActionremoveColumn",description:"Remove a list column"};const r=(0,t.Ay)("Fill column with info data or default value");r.meta={name:"createAction",key:"createActionfillColumnData",description:"Fill column with info data or default value"};const o=(0,t.Ay)("Add / update multiple records");o.meta={name:"createAction",key:"createActionbulkUpsertRecords",description:"Add / update multiple records"};const u=(0,t.Ay)("Add / update a list record");u.meta={name:"createAction",key:"createActionupsertRecord",description:"Add / update a list record"};const m=(0,t.Ay)("Remove a list record");m.meta={name:"createAction",key:"createActionremoveRecord",description:"Remove a list record"};const i=(0,t.Ay)("Add/update a record position in a view");i.meta={name:"createAction",key:"createActionupsertRecordPosition",description:"Add/update a record position in a view"};const d=(0,t.Ay)("Add / update multiple templates");d.meta={name:"createAction",key:"createActionbulkUpsertTemplates",description:"Add / update multiple templates"};const _=(0,t.Ay)("Add / update multiple starter templates");_.meta={name:"createAction",key:"createActionbulkUpsertStarterTemplates",description:"Add / update multiple starter templates"};const h=(0,t.Ay)("Remove a starter template by ID");h.meta={name:"createAction",key:"createActionremoveStarterTemplate",description:"Remove a starter template by ID"};const p=(0,t.Ay)("Set the list's banner message");p.meta={name:"createAction",key:"createActionsetBannerMessageForList",description:"Set the list's banner message"};const A=(0,t.Ay)("Clear the specified type of banner message for this list");A.meta={name:"createAction",key:"createActionclearBannerMessageForList",description:"Clear the specified type of banner message for this list"};const v=(0,t.Ay)("Add / update a list record field");v.meta={name:"createAction",key:"createActionupsertField",description:"Add / update a list record field"};const E=(0,t.Ay)("Add / update a list cell");E.meta={name:"createAction",key:"createActionupsertCell",description:"Add / update a list cell"};const f=(0,t.Ay)("Add / update a workflow for a list");f.meta={name:"createAction",key:"createActionupsertWorkflow",description:"Add / update a workflow for a list"};const g=(0,t.Ay)("Apply an edit action to a list");g.meta={name:"createAction",key:"createActionapplyEditAction",description:"Apply an edit action to a list"};const y=(0,t.Ay)("Clear edit history for a list");y.meta={name:"createAction",key:"createActionclearEditHistory",description:"Clear edit history for a list"};const I=(0,t.Ay)("Update local filters");I.meta={name:"createAction",key:"createActionchangeViewLocalFilters",description:"Update local filters"};const O=(0,t.Ay)("Update local sorts");O.meta={name:"createAction",key:"createActionchangeViewLocalSorts",description:"Update local sorts"};const M=(0,t.Ay)("Update local collapsed grids");M.meta={name:"createAction",key:"createActionchangeViewLocalCollapsedGrids",description:"Update local collapsed grids"};const C=(0,t.Ay)("Update the current viewId set by refine");C.meta={name:"createAction",key:"createActionsetRefineViewId",description:"Update the current viewId set by refine"};const P=(0,t.Ay)("Set filter pill to auto open");P.meta={name:"createAction",key:"createActionsetFilterPillKey",description:"Set filter pill to auto open"};const L=(0,t.Ay)("Set group by pill to auto open");L.meta={name:"createAction",key:"createActionsetGroupByPillAutoOpen",description:"Set group by pill to auto open"};const x=(0,t.Ay)("Set search query for list");x.meta={name:"createAction",key:"createActionsetListSearchQuery",description:"Set search query for list"};const F=(0,t.Ay)("Destroy local refinements");F.meta={name:"createAction",key:"createActiondestroyLocalRefinements",description:"Destroy local refinements"};const V=(0,t.Ay)("Add / update my items");V.meta={name:"createAction",key:"createActionupsertMyItems",description:"Add / update my items"};const B=(0,t.Ay)("Add / update a list cell edit");B.meta={name:"createAction",key:"createActionupsertCellEdit",description:"Add / update a list cell edit"};const D=(0,t.Ay)("set refinement pill to auto open in view");D.meta={name:"createAction",key:"createActionsetRefinePillAutoOpenByViewId",description:"set refinement pill to auto open in view"};const S=(0,t.Ay)("Add / update last read timestamp by list ID");S.meta={name:"createAction",key:"createActionupsertLastReadTimestampById",description:"Add / update last read timestamp by list ID"};const R=(0,t.Ay)("Mark records as new to highlight it");R.meta={name:"createAction",key:"createActionhighlightRecordsAsNew",description:"Mark records as new to highlight it"};const w=(0,t.Ay)("Mark record read to unhighlight it");w.meta={name:"createAction",key:"createActionremoveRecordHighlight",description:"Mark record read to unhighlight it"};const Y=(0,t.Ay)("Set record as open in flexpane");Y.meta={name:"createAction",key:"createActionrecordFlexpaneOpen",description:"Set record as open in flexpane"};const Q=(0,t.Ay)("Set record flexpane closed");Q.meta={name:"createAction",key:"createActionrecordFlexpaneClosed",description:"Set record flexpane closed"};const Z=(0,t.Ay)("Load all recently viewed lists");Z.meta={name:"createAction",key:"createActionloadRecentlyViewedLists",description:"Load all recently viewed lists"};const ee=(0,t.Ay)("Add recently opened list to the store");ee.meta={name:"createAction",key:"createActionaddToRecentlyViewedLists",description:"Add recently opened list to the store"};const _e=(0,t.Ay)("Remove deleted lists from the store");_e.meta={name:"createAction",key:"createActionremoveFromRecentlyViewedLists",description:"Remove deleted lists from the store"};const Ee=(0,t.Ay)("Update local field visibility");Ee.meta={name:"createAction",key:"createActionchangeLocalViewFieldVisibility",description:"Update local field visibility"};const G=(0,t.Ay)("Update local view type");G.meta={name:"createAction",key:"createActionchangeLocalViewType",description:"Update local view type"};const Ae=(0,t.Ay)("Update local group by");Ae.meta={name:"createAction",key:"createActionchangeLocalViewGroupBy",description:"Update local group by"};const ce=(0,t.Ay)("Subscribe/unsubscribe a list record");ce.meta={name:"createAction",key:"createActionsetRecordIsSubscribed",description:"Subscribe/unsubscribe a list record"};const de=(0,t.Ay)("Set new view ids for badging");de.meta={name:"createAction",key:"createActionsetListNewViewBadgingById",description:"Set new view ids for badging"};const oe=(0,t.Ay)("Set highlight column in the item flexpane");oe.meta={name:"createAction",key:"createActionsetHighlightColumnId",description:"Set highlight column in the item flexpane"};const $=(0,t.Ay)("Clear highlight column in the item flexpane");$.meta={name:"createAction",key:"createActionclearHighlightColumnId",description:"Clear highlight column in the item flexpane"};const re=(0,t.Ay)("Set local views for optimistic updates");re.meta={name:"createAction",key:"createActionsetLocalViewsByListId",description:"Set local views for optimistic updates"}},194478:(j,T,e)=>{"use strict";e.d(T,{w9:()=>N,uu:()=>xt,mJ:()=>je,vg:()=>w,K0:()=>xe,rm:()=>Ee,kS:()=>G,E4:()=>mn,Yq:()=>pt,k7:()=>bt,$8:()=>wt,nh:()=>On,Jc:()=>ie,$N:()=>Dt,zH:()=>Le,LV:()=>We,Te:()=>X,YI:()=>Pe,dR:()=>Mn,iP:()=>Vt,hA:()=>vt,Tj:()=>Ve,jv:()=>Je,vS:()=>D,PZ:()=>An,I9:()=>K,DU:()=>Z,C0:()=>$,C5:()=>Wn,vD:()=>re,Rl:()=>S,jH:()=>Tt,P6:()=>R,Mr:()=>Q,bA:()=>Qt,ot:()=>xn,Bj:()=>St,qO:()=>He,df:()=>Zt,iM:()=>ht,dE:()=>dt,EI:()=>ee,kG:()=>Ae,_H:()=>gn,wx:()=>_e,Xb:()=>U,nZ:()=>H,X0:()=>Ke,Qg:()=>Re,BO:()=>Ge,K1:()=>ke,gu:()=>sn,aY:()=>fe,XR:()=>be,WE:()=>Be,x2:()=>oe,$F:()=>ce,yv:()=>de,n7:()=>Ie,iX:()=>Y,Es:()=>Yt,TF:()=>Se,I$:()=>J,FG:()=>q});var t=e(46996),n=e(801081),s=e(24175),a=e(81350),c=e(710596),r=e(3477),o=e(843421),u=e(182013),m=e(704478),i=e(280743),d=e(544555),_=e(151586),h=e(793434),p=e(45798),A=e(682520),v=e(535518),E=e(915773),f=e(881805),g=e(399284),y=e(774102),I=e(969924),O=e(818386),M=e(397293),C=e(289123),P=e(388288),L=e(566401);const x=(0,E.Ay)(Ce=>!(0,L.A)(Ce.overlays));x.meta={name:"createSelector",key:"createSelectorisOverlayOpen",description:Ce=>!(0,L.A)(Ce.overlays)};var F=e(921055);const V=1e3*60*60*24,B=l(Ce=>Ce.lists,"getListsState"),D=(0,E.Ay)((Ce,Ne)=>(0,I.Lp)(Ce,Ne));D.meta={name:"createSelector",key:"createSelectorgetList",description:(Ce,Ne)=>(0,I.Lp)(Ce,Ne)};const S=(0,E.Ay)((Ce,Ne)=>{var ze;return Ne&&((ze=B(Ce).listsById[Ne])===null||ze===void 0?void 0:ze.records)||p.t0});S.meta={name:"createSelector",key:"createSelectorgetListRecords",description:(Ce,Ne)=>{var ze;return Ne&&((ze=B(Ce).listsById[Ne])===null||ze===void 0?void 0:ze.records)||p.t0}};const R=(0,n.Mz)(D,Ce=>Ce==null?void 0:Ce.title),w=(0,E.Ay)(Ce=>B(Ce).clock);w.meta={name:"createSelector",key:"createSelectorgetClock",description:Ce=>B(Ce).clock};const Y=(0,E.Ay)(Ce=>B(Ce).triggerAnimationForViewId);Y.meta={name:"createSelector",key:"createSelectorgetViewToAnimate",description:Ce=>B(Ce).triggerAnimationForViewId};const Q=(0,E.Ay)(Ce=>(0,I.Im)(Ce));Q.meta={name:"createSelector",key:"createSelectorgetLists",description:Ce=>(0,I.Im)(Ce)};const Z=(0,E.Ay)((Ce,Ne)=>Ce.files[Ne].list_limits);Z.meta={name:"createSelector",key:"createSelectorgetListLimits",description:(Ce,Ne)=>Ce.files[Ne].list_limits};const ee=(0,E.Ay)((Ce,Ne,ze)=>{var Oe,Fe;return(Oe=B(Ce).listsById[Ne])===null||Oe===void 0||(Fe=Oe.records)===null||Fe===void 0?void 0:Fe[ze]});ee.meta={name:"createSelector",key:"createSelectorgetRecord",description:(Ce,Ne,ze)=>{var Oe,Fe;return(Oe=B(Ce).listsById[Ne])===null||Oe===void 0||(Fe=Oe.records)===null||Fe===void 0?void 0:Fe[ze]}};const _e=(0,E.Ay)((Ce,Ne,ze)=>{var Oe,Fe;return(0,_.A)(Ce,(Oe=ee(Ce,Ne,ze))===null||Oe===void 0||(Fe=Oe.fields)===null||Fe===void 0?void 0:Fe.name)});_e.meta={name:"createSelector",key:"createSelectorgetRecordNameAsPlainText",description:(Ce,Ne,ze)=>{var Oe,Fe;return(0,_.A)(Ce,(Oe=ee(Ce,Ne,ze))===null||Oe===void 0||(Fe=Oe.fields)===null||Fe===void 0?void 0:Fe.name)}};const Ee=(0,E.Ay)((Ce,Ne,ze)=>{const Oe=D(Ce,Ne),Fe=(0,o.uA)(Oe);return Fe==null?void 0:Fe.find(_t=>_t.key===ze)});Ee.meta={name:"createSelector",key:"createSelectorgetColumnByKey",description:(Ce,Ne,ze)=>{const Oe=D(Ce,Ne),Fe=(0,o.uA)(Oe);return Fe==null?void 0:Fe.find(_t=>_t.key===ze)}};const G=(0,E.Ay)((Ce,Ne,ze)=>{var Oe;return(Oe=Ee(Ce,Ne,ze))===null||Oe===void 0?void 0:Oe.id});G.meta={name:"createSelector",key:"createSelectorgetColumnIdByColumnKey",description:(Ce,Ne,ze)=>{var Oe;return(Oe=Ee(Ce,Ne,ze))===null||Oe===void 0?void 0:Oe.id}};const Ae=(0,E.Ay)((Ce,Ne,ze)=>{var Oe;const Fe=(Oe=B(Ce).listsById[Ne])===null||Oe===void 0?void 0:Oe.records;if(Fe)return Object.values(Fe).find(_t=>_t.threadTs===ze)});Ae.meta={name:"createSelector",key:"createSelectorgetRecordByThreadTs",description:(Ce,Ne,ze)=>{var Oe;const Fe=(Oe=B(Ce).listsById[Ne])===null||Oe===void 0?void 0:Oe.records;if(Fe)return Object.values(Fe).find(_t=>_t.threadTs===ze)}};const ce=(0,E.Ay)((Ce,Ne)=>B(Ce).templatesById[Ne]);ce.meta={name:"createSelector",key:"createSelectorgetTemplate",description:(Ce,Ne)=>B(Ce).templatesById[Ne]};const de=(0,E.Ay)(Ce=>B(Ce).templatesById);de.meta={name:"createSelector",key:"createSelectorgetTemplates",description:Ce=>B(Ce).templatesById};const oe=(0,E.Ay)(Ce=>B(Ce).starterTemplatesById);oe.meta={name:"createSelector",key:"createSelectorgetStarterTemplates",description:Ce=>B(Ce).starterTemplatesById};const $=(0,E.Ay)(Ce=>{const Ne=[],ze=Q(Ce);for(const Fe of ze){var Oe;const _t={id:Fe.id,title:(Oe=Fe.title)!==null&&Oe!==void 0?Oe:""};Ne.push(_t)}return Ne});$.meta={name:"createSelector",key:"createSelectorgetListMentions",description:Ce=>{const Ne=[],ze=Q(Ce);for(const Fe of ze){var Oe;const _t={id:Fe.id,title:(Oe=Fe.title)!==null&&Oe!==void 0?Oe:""};Ne.push(_t)}return Ne}};const re=(0,E.Ay)((Ce,Ne)=>{const ze=Q(Ce),Oe=(0,v.V3)(Ne);if(!Oe)return[];const{listTitle:Fe}=Oe,_t=(0,v.xL)(ze,Fe);if(!_t)return[];const ft=(0,I.Lp)(Ce,_t.id),Ct=ue(_t),$t=[],rn=S(Ce,_t.id);for(const pn of Object.values(rn??{})){var un;const Tn=(un=pn.fields[Ct])!==null&&un!==void 0?un:[];var hn;const Qn={id:pn.id,name:(0,_.A)(Ce,Tn),blocks:Tn,listId:ft.id,listTitle:(hn=ft.title)!==null&&hn!==void 0?hn:""};$t.push(Qn)}return $t});re.meta={name:"createSelector",key:"createSelectorgetListRecordMentions",description:(Ce,Ne)=>{const ze=Q(Ce),Oe=(0,v.V3)(Ne);if(!Oe)return[];const{listTitle:Fe}=Oe,_t=(0,v.xL)(ze,Fe);if(!_t)return[];const ft=(0,I.Lp)(Ce,_t.id),Ct=ue(_t),$t=[],rn=S(Ce,_t.id);for(const pn of Object.values(rn??{})){var un;const Tn=(un=pn.fields[Ct])!==null&&un!==void 0?un:[];var hn;const Qn={id:pn.id,name:(0,_.A)(Ce,Tn),blocks:Tn,listId:ft.id,listTitle:(hn=ft.title)!==null&&hn!==void 0?hn:""};$t.push(Qn)}return $t}};function ue(Ce){let Ne;const ze=(0,o.uA)(Ce);for(const Oe of ze??[])if(Oe.type==="text"&&(Ne||(Ne=Oe),Oe.key.toUpperCase()==="NAME"))return Oe.key;return Ne?Ne.key:"name"}l(ue,"findColumnKeyForMention");const te=(0,E.Ay)(Ce=>(0,u.isListsEnabled)(Ce)?!!(0,F.ty)(Ce,"seen_onboarding_lists"):!0);te.meta={name:"createSelector",key:"createSelectorhasSeenOnboardingLists",description:Ce=>(0,u.isListsEnabled)(Ce)?!!(0,F.ty)(Ce,"seen_onboarding_lists"):!0};const ae=(0,E.Ay)((Ce,Ne)=>{var ze;const Oe=D(Ce,Ne);return(ze=(0,o.uA)(Oe))===null||ze===void 0?void 0:ze.find(Fe=>(Fe==null?void 0:Fe.key)==="name")});ae.meta={name:"createSelector",key:"createSelectorgetListDefaultColumn",description:(Ce,Ne)=>{var ze;const Oe=D(Ce,Ne);return(ze=(0,o.uA)(Oe))===null||ze===void 0?void 0:ze.find(Fe=>(Fe==null?void 0:Fe.key)==="name")}};const H=(0,E.Ay)((Ce,Ne,ze)=>{const Oe=ee(Ce,Ne,ze),Fe=(0,O.Y)(Ce,Ne),_t=(0,c.FB)(Fe),ft=Oe!=null&&Oe.threadTs?(0,C.Ld)(Ce,_t,Oe.threadTs):void 0;var Ct;return(Ct=ft==null?void 0:ft.reply_count)!==null&&Ct!==void 0?Ct:null});H.meta={name:"createSelector",key:"createSelectorgetRecordThreadReplyCount",description:(Ce,Ne,ze)=>{const Oe=ee(Ce,Ne,ze),Fe=(0,O.Y)(Ce,Ne),_t=(0,c.FB)(Fe),ft=Oe!=null&&Oe.threadTs?(0,C.Ld)(Ce,_t,Oe.threadTs):void 0;var Ct;return(Ct=ft==null?void 0:ft.reply_count)!==null&&Ct!==void 0?Ct:null}};const U=(0,E.Ay)((Ce,Ne,ze)=>{const Oe=ee(Ce,Ne,ze),Fe=(0,O.Y)(Ce,Ne),_t=(0,c.FB)(Fe),ft=Oe!=null&&Oe.threadTs?(0,C.Ld)(Ce,_t,Oe.threadTs):void 0,Ct=(0,d.Iu)(_t,Oe==null?void 0:Oe.threadTs),$t=ft&&Ct?(0,y.r7)(Ce,Ct)||{timestamps:[],reachedStart:!0}:null,rn=ft?(0,a.Nh)(Ce,_t,($t==null?void 0:$t.timestamps)||[])||(ft==null?void 0:ft.ts):"";var un;const hn=(un=ft==null?void 0:ft._subscribed)!==null&&un!==void 0?un:!1;var pn;const Tn=(pn=ft==null?void 0:ft._last_read)!==null&&pn!==void 0?pn:"0";return hn?rn>Tn:!1});U.meta={name:"createSelector",key:"createSelectorgetRecordThreadIsUnread",description:(Ce,Ne,ze)=>{const Oe=ee(Ce,Ne,ze),Fe=(0,O.Y)(Ce,Ne),_t=(0,c.FB)(Fe),ft=Oe!=null&&Oe.threadTs?(0,C.Ld)(Ce,_t,Oe.threadTs):void 0,Ct=(0,d.Iu)(_t,Oe==null?void 0:Oe.threadTs),$t=ft&&Ct?(0,y.r7)(Ce,Ct)||{timestamps:[],reachedStart:!0}:null,rn=ft?(0,a.Nh)(Ce,_t,($t==null?void 0:$t.timestamps)||[])||(ft==null?void 0:ft.ts):"";var un;const hn=(un=ft==null?void 0:ft._subscribed)!==null&&un!==void 0?un:!1;var pn;const Tn=(pn=ft==null?void 0:ft._last_read)!==null&&pn!==void 0?pn:"0";return hn?rn>Tn:!1}};const N=(0,E.Ay)((Ce,Ne)=>B(Ce).listBannerMessagesbyId[Ne]);N.meta={name:"createSelector",key:"createSelectorgetBannerMessagesForList",description:(Ce,Ne)=>B(Ce).listBannerMessagesbyId[Ne]};const K=(0,E.Ay)((Ce,Ne)=>{const ze=(0,m.A)(Ce),Oe=(0,I.Lp)(Ce,Ne);return!Oe||!Oe.access||!(0,r.mW)(Oe)||!ze});K.meta={name:"createSelector",key:"createSelectorgetListIsViewOnly",description:(Ce,Ne)=>{const ze=(0,m.A)(Ce),Oe=(0,I.Lp)(Ce,Ne);return!Oe||!Oe.access||!(0,r.mW)(Oe)||!ze}};const W=(0,E.Ay)(Ce=>(0,f.ZT)(Ce)==="T024BE7LD");W.meta={name:"createSelector",key:"createSelectoronTinySpeckDevOrg",description:Ce=>(0,f.ZT)(Ce)==="T024BE7LD"};const J=(0,E.Ay)(Ce=>(0,f.jV)(Ce)===h.uh);J.meta={name:"createSelector",key:"createSelectoronTinySpeckOrg",description:Ce=>(0,f.jV)(Ce)===h.uh};const q=(0,E.Ay)(Ce=>(0,u.teamHasFullListsAccess)(Ce)&&(0,f.jV)(Ce)!==h.kp);q.meta={name:"createSelector",key:"createSelectorshouldShowFeedbackModal",description:Ce=>(0,u.teamHasFullListsAccess)(Ce)&&(0,f.jV)(Ce)!==h.kp};const ie=(0,E.Ay)((Ce,Ne)=>B(Ce).historyById[Ne]);ie.meta={name:"createSelector",key:"createSelectorgetEditHistory",description:(Ce,Ne)=>B(Ce).historyById[Ne]};const Te=(0,E.Ay)((Ce,Ne)=>{const ze=D(Ce,Ne),Oe=S(Ce,Ne);if(!ze||!Oe)return null;let Fe="";for(const _t of Object.values(Oe)){_t.position&&Fe<_t.position&&(Fe=_t.position);for(const ft of Object.values(_t.viewPositions))Fe<ft&&(Fe=ft)}return Fe||null});Te.meta={name:"createSelector",key:"createSelectorgetBiggestRecordPosition",description:(Ce,Ne)=>{const ze=D(Ce,Ne),Oe=S(Ce,Ne);if(!ze||!Oe)return null;let Fe="";for(const _t of Object.values(Oe)){_t.position&&Fe<_t.position&&(Fe=_t.position);for(const ft of Object.values(_t.viewPositions))Fe<ft&&(Fe=ft)}return Fe||null}};const Me=(0,E.Ay)((Ce,Ne,ze)=>{const Oe=(0,M.z)({listId:Ne,viewId:ze});return B(Ce).localFiltersById[Oe]});Me.meta={name:"createSelector",key:"createSelectorgetLocalFiltersByViewId",description:(Ce,Ne,ze)=>{const Oe=(0,M.z)({listId:Ne,viewId:ze});return B(Ce).localFiltersById[Oe]}};const ke=(0,g.ow)((Ce,Ne,ze)=>{const Oe=D(Ce,Ne),Fe=(0,o.Qq)(Oe,ze);var _t;const ft=(_t=Fe==null?void 0:Fe.filters)!==null&&_t!==void 0?_t:[];var Ct;return ft.concat((Ct=Fe==null?void 0:Fe.infoColumnFilters)!==null&&Ct!==void 0?Ct:[])}),Pe=(0,n.Mz)(Me,ke,(Ce,Ne)=>Ce?Ce.length!==(Ne==null?void 0:Ne.length)?!0:!(0,s.bw)(Ce,Ne,"columnId"):!1),Ie=(0,n.Mz)(Me,ke,(Ce,Ne)=>{if(!Ce)return new Set;const ze=new Map(Ne==null?void 0:Ne.map(Fe=>[Fe.key,Fe])),Oe=Ce.filter(Fe=>(0,s.bV)(Fe,ze)).map(Fe=>Fe.key);return new Set(Oe)}),X=(0,n.Mz)(Me,ke,(Ce,Ne)=>Ce!==void 0?Ce:Ne||[]),ne=(0,E.Ay)((Ce,Ne,ze)=>{const Oe=(0,M.z)({listId:Ne,viewId:ze});return B(Ce).localSortsById[Oe]});ne.meta={name:"createSelector",key:"createSelectorgetLocalSortsByViewId",description:(Ce,Ne,ze)=>{const Oe=(0,M.z)({listId:Ne,viewId:ze});return B(Ce).localSortsById[Oe]}};const fe=(0,g.ow)((Ce,Ne,ze)=>{const Oe=D(Ce,Ne),Fe=(0,o.Qq)(Oe,ze);return(Fe==null?void 0:Fe.sorts)||[]}),be=(0,n.Mz)(ne,fe,(Ce,Ne)=>Ce!==void 0?Ce:Ne||[]),Be=(0,n.Mz)(ne,fe,(Ce,Ne)=>Ce?Ce.length!==(Ne==null?void 0:Ne.length)?!0:!(0,s.bw)(Ce,Ne,"columnId"):!1),We=(0,E.Ay)(Ce=>{var Ne;return(Ne=B(Ce))===null||Ne===void 0?void 0:Ne.filterPillKey});We.meta={name:"createSelector",key:"createSelectorgetFilterPillKey",description:Ce=>{var Ne;return(Ne=B(Ce))===null||Ne===void 0?void 0:Ne.filterPillKey}};const Re=(0,E.Ay)(Ce=>{var Ne;return(Ne=B(Ce))===null||Ne===void 0?void 0:Ne.refineViewId});Re.meta={name:"createSelector",key:"createSelectorgetRefineViewId",description:Ce=>{var Ne;return(Ne=B(Ce))===null||Ne===void 0?void 0:Ne.refineViewId}};const ve=(0,E.Ay)(Ce=>{var Ne;return(Ne=B(Ce))===null||Ne===void 0?void 0:Ne.groupByPillAutoOpen});ve.meta={name:"createSelector",key:"createSelectorgetGroupByPillAutoOpen",description:Ce=>{var Ne;return(Ne=B(Ce))===null||Ne===void 0?void 0:Ne.groupByPillAutoOpen}};const xe=(0,E.Ay)((Ce,Ne,ze)=>{const Oe=(0,M.z)({listId:Ne,viewId:ze});return B(Ce).localCollapsedGridsById[Oe]});xe.meta={name:"createSelector",key:"createSelectorgetCollapsedGridsByViewId",description:(Ce,Ne,ze)=>{const Oe=(0,M.z)({listId:Ne,viewId:ze});return B(Ce).localCollapsedGridsById[Oe]}};const He=(0,E.Ay)(Ce=>B(Ce).myItemMap);He.meta={name:"createSelector",key:"createSelectorgetMyItemMap",description:Ce=>B(Ce).myItemMap};const je=(0,E.Ay)((Ce,Ne)=>B(Ce).editActivityMap[Ne]);je.meta={name:"createSelector",key:"createSelectorgetCellEditByTimestamp",description:(Ce,Ne)=>B(Ce).editActivityMap[Ne]};const Ke=(0,E.Ay)((Ce,Ne)=>{var ze;return(ze=B(Ce).refinePillAutoOpenByViewId)===null||ze===void 0?void 0:ze[Ne]});Ke.meta={name:"createSelector",key:"createSelectorgetRefinePillAutoOpenByViewId",description:(Ce,Ne)=>{var ze;return(ze=B(Ce).refinePillAutoOpenByViewId)===null||ze===void 0?void 0:ze[Ne]}};const ht=(0,E.Ay)(Ce=>B(Ce).recentlyViewedLists);ht.meta={name:"createSelector",key:"createSelectorgetRecentlyViewedLists",description:Ce=>B(Ce).recentlyViewedLists};const dt=(0,E.Ay)(Ce=>B(Ce).recentlyViewedListsLastLoadedMs);dt.meta={name:"createSelector",key:"createSelectorgetRecentlyViewedListsLastLoadedMs",description:Ce=>B(Ce).recentlyViewedListsLastLoadedMs};const Ve=(0,E.Ay)(Ce=>{const Ne=dt(Ce);return Ne?Date.now()-Ne>V:!0});Ve.meta={name:"createSelector",key:"createSelectorgetIsRecentlyViewedListsExpired",description:Ce=>{const Ne=dt(Ce);return Ne?Date.now()-Ne>V:!0}};const Je=(0,E.Ay)((Ce,Ne)=>{var ze;return(ze=B(Ce).lastReadTimestampById)===null||ze===void 0?void 0:ze[Ne]});Je.meta={name:"createSelector",key:"createSelectorgetLastReadTimestampByListId",description:(Ce,Ne)=>{var ze;return(ze=B(Ce).lastReadTimestampById)===null||ze===void 0?void 0:ze[Ne]}};const Ge=(0,n.Mz)((Ce,Ne,ze)=>{const Oe=D(Ce,Ne);return(0,o.cv)(Oe,ze)},Ce=>{var Ne;return Ce==null||(Ne=Ce.columns)===null||Ne===void 0?void 0:Ne.reduce((Oe,Fe)=>{let{key:_t,visible:ft}=Fe;return ft!==void 0&&(Oe[_t]=ft),Oe},{})}),Le=(0,E.Ay)((Ce,Ne,ze)=>{const Oe=(0,M.z)({listId:Ne,viewId:ze}),Fe=B(Ce).localFieldVisibilityByViewId[Oe];if(!Fe)return;const _t=Ge(Ce,Ne,ze);return Object.entries(Fe).filter(Ct=>{let[$t,rn]=Ct;return rn!==(_t==null?void 0:_t[$t])}).map(Ct=>{let[$t,rn]=Ct;return{key:$t,visible:rn}})});Le.meta={name:"createSelector",key:"createSelectorgetFieldsThatChangedVisibility",description:(Ce,Ne,ze)=>{const Oe=(0,M.z)({listId:Ne,viewId:ze}),Fe=B(Ce).localFieldVisibilityByViewId[Oe];if(!Fe)return;const _t=Ge(Ce,Ne,ze);return Object.entries(Fe).filter(Ct=>{let[$t,rn]=Ct;return rn!==(_t==null?void 0:_t[$t])}).map(Ct=>{let[$t,rn]=Ct;return{key:$t,visible:rn}})}};const Mt=(0,g.eI)((Ce,Ne,ze)=>{const Oe=(0,M.z)({listId:Ne,viewId:ze}),Fe=B(Ce).localFieldVisibilityByViewId[Oe],_t=Ge(Ce,Ne,ze);return Fe&&{..._t,...Fe}}),Dt=(0,n.Mz)(Mt,Ge,(Ce,Ne)=>Ce?!(0,t.A)(Ce,Ne):!1),pt=(0,E.Ay)((Ce,Ne,ze)=>{const Oe=Mt(Ce,Ne,ze);return Oe||Ge(Ce,Ne,ze)});pt.meta={name:"createSelector",key:"createSelectorgetCurrentViewFieldVisibilityByViewId",description:(Ce,Ne,ze)=>{const Oe=Mt(Ce,Ne,ze);return Oe||Ge(Ce,Ne,ze)}};const Qt=(0,E.Ay)((Ce,Ne,ze)=>{const Oe=(0,M.z)({listId:Ne,viewId:ze});return B(Ce).localViewTypeByViewId[Oe]});Qt.meta={name:"createSelector",key:"createSelectorgetLocalViewType",description:(Ce,Ne,ze)=>{const Oe=(0,M.z)({listId:Ne,viewId:ze});return B(Ce).localViewTypeByViewId[Oe]}};const Nt=(0,g.ow)((Ce,Ne,ze)=>{const Oe=D(Ce,Ne),Fe=(0,o.Qq)(Oe,ze);return Fe==null?void 0:Fe.type}),bt=(0,E.Ay)((Ce,Ne,ze)=>{const Oe=Qt(Ce,Ne,ze);return Oe!==void 0?Oe:Nt(Ce,Ne,ze)});bt.meta={name:"createSelector",key:"createSelectorgetCurrentViewTypeByViewId",description:(Ce,Ne,ze)=>{const Oe=Qt(Ce,Ne,ze);return Oe!==void 0?Oe:Nt(Ce,Ne,ze)}};const Yt=(0,E.Ay)((Ce,Ne,ze)=>{const Oe=Qt(Ce,Ne,ze);if(!Oe)return!1;const Fe=Nt(Ce,Ne,ze);return Oe!==Fe});Yt.meta={name:"createSelector",key:"createSelectorgetViewTypeHasChanged",description:(Ce,Ne,ze)=>{const Oe=Qt(Ce,Ne,ze);if(!Oe)return!1;const Fe=Nt(Ce,Ne,ze);return Oe!==Fe}};const fn=(0,E.Ay)((Ce,Ne,ze)=>{const Oe=(0,M.z)({listId:Ne,viewId:ze});return B(Ce).localGroupByViewId[Oe]});fn.meta={name:"createSelector",key:"createSelectorgetLocalGroupBy",description:(Ce,Ne,ze)=>{const Oe=(0,M.z)({listId:Ne,viewId:ze});return B(Ce).localGroupByViewId[Oe]}};const Tt=(0,E.Ay)((Ce,Ne)=>{var ze;return(ze=B(Ce))===null||ze===void 0?void 0:ze.listSearchQueriesByWindowId[Ne]});Tt.meta={name:"createSelector",key:"createSelectorgetListSearchQuery",description:(Ce,Ne)=>{var ze;return(ze=B(Ce))===null||ze===void 0?void 0:ze.listSearchQueriesByWindowId[Ne]}};const sn=(0,g.ow)((Ce,Ne,ze)=>{const Oe=D(Ce,Ne),Fe=(0,o.Qq)(Oe,ze);return Fe==null?void 0:Fe.grouping}),mn=(0,E.Ay)((Ce,Ne,ze)=>{const Oe=fn(Ce,Ne,ze);return Oe||sn(Ce,Ne,ze)});mn.meta={name:"createSelector",key:"createSelectorgetCurrentGroupByViewId",description:(Ce,Ne,ze)=>{const Oe=fn(Ce,Ne,ze);return Oe||sn(Ce,Ne,ze)}};const wt=(0,E.Ay)(Ce=>(0,F.ty)(Ce,"lists_add_to_list_default_list"));wt.meta={name:"createSelector",key:"createSelectorgetDefaultListForAddToList",description:Ce=>(0,F.ty)(Ce,"lists_add_to_list_default_list")};const On=(0,n.Mz)(Ce=>(0,F.ty)(Ce,"lists_default_view"),Ce=>{try{return JSON.parse(Ce||"{}")}catch(Ne){return(0,A.Ay)({label:"lists"}).error("error parsing default lists view prefs",Ne),{}}}),Zt=(0,n.Mz)(Ce=>(0,F.ty)(Ce,"lists_my_items"),function(){let Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"{}";const Ne={starred:{},completed:{}};let ze={};try{ze=JSON.parse(Ce)}catch(Oe){(0,A.Ay)({label:"lists"}).error("error parsing my items prefs",Oe)}return{...Ne,...ze}}),Mn=(0,E.Ay)((Ce,Ne,ze)=>{const Oe=fn(Ce,Ne,ze);if(!Oe)return!1;const Fe=sn(Ce,Ne,ze);return(Oe==null?void 0:Oe.groupBy)!==(Fe==null?void 0:Fe.groupBy)});Mn.meta={name:"createSelector",key:"createSelectorgetHasGroupByChanged",description:(Ce,Ne,ze)=>{const Oe=fn(Ce,Ne,ze);if(!Oe)return!1;const Fe=sn(Ce,Ne,ze);return(Oe==null?void 0:Oe.groupBy)!==(Fe==null?void 0:Fe.groupBy)}};const Wn=(0,E.Ay)((Ce,Ne)=>B(Ce).listNewViewBadgingById[Ne]);Wn.meta={name:"createSelector",key:"createSelectorgetListNewViewBadgingById",description:(Ce,Ne)=>B(Ce).listNewViewBadgingById[Ne]};const xn=(0,E.Ay)((Ce,Ne)=>{var ze;return((ze=B(Ce).localViewsByListId)===null||ze===void 0?void 0:ze[Ne])||[]});xn.meta={name:"createSelector",key:"createSelectorgetLocalViewsByListId",description:(Ce,Ne)=>{var ze;return((ze=B(Ce).localViewsByListId)===null||ze===void 0?void 0:ze[Ne])||[]}};const gn=(0,E.Ay)((Ce,Ne,ze)=>{var Oe,Fe,_t;return(Oe=B(Ce).listsById[Ne])===null||Oe===void 0||(Fe=Oe.records)===null||Fe===void 0||(_t=Fe[ze])===null||_t===void 0?void 0:_t.isSubscribed});gn.meta={name:"createSelector",key:"createSelectorgetRecordIsSubscribed",description:(Ce,Ne,ze)=>{var Oe,Fe,_t;return(Oe=B(Ce).listsById[Ne])===null||Oe===void 0||(Fe=Oe.records)===null||Fe===void 0||(_t=Fe[ze])===null||_t===void 0?void 0:_t.isSubscribed}};const An=(0,E.Ay)((Ce,Ne)=>{var ze;if(K(Ce,Ne))return!1;const Oe=(0,I.Lp)(Ce,Ne);if(!Oe||!((ze=Oe.editors)===null||ze===void 0)&&ze.length)return!1;const Fe=ie(Ce,Ne);if(Fe!=null&&Fe.undoStack.length||Fe!=null&&Fe.redoStack.length)return!1;const _t=S(Ce,Ne);for(const ft of Object.values(_t??{}))if(String(ft.dateCreated)!==ft.updatedTimestamp)return!1;return!0});An.meta={name:"createSelector",key:"createSelectorgetListIsEditableAndNeverUpdated",description:(Ce,Ne)=>{var ze;if(K(Ce,Ne))return!1;const Oe=(0,I.Lp)(Ce,Ne);if(!Oe||!((ze=Oe.editors)===null||ze===void 0)&&ze.length)return!1;const Fe=ie(Ce,Ne);if(Fe!=null&&Fe.undoStack.length||Fe!=null&&Fe.redoStack.length)return!1;const _t=S(Ce,Ne);for(const ft of Object.values(_t??{}))if(String(ft.dateCreated)!==ft.updatedTimestamp)return!1;return!0}};const vt=(0,E.Ay)(Ce=>(0,F.ty)(Ce,"lists_template_sidebar_collapsed"));vt.meta={name:"createSelector",key:"createSelectorgetIsListsTemplateSidebarCollapsedUserPref",description:Ce=>(0,F.ty)(Ce,"lists_template_sidebar_collapsed")};const xt=(0,E.Ay)((Ce,Ne)=>{const ze=D(Ce,Ne);return An(Ce,Ne)&&(0,o.BS)(ze)});xt.meta={name:"createSelector",key:"createSelectorgetCanShowListEmptyStateSidebar",description:(Ce,Ne)=>{const ze=D(Ce,Ne);return An(Ce,Ne)&&(0,o.BS)(ze)}};const Vt=(0,E.Ay)((Ce,Ne,ze,Oe)=>{const Fe=(0,M.p)(Ne,ze,Oe);return B(Ce).highlightColumnMap[Fe]});Vt.meta={name:"createSelector",key:"createSelectorgetHighlightColumnId",description:(Ce,Ne,ze,Oe)=>{const Fe=(0,M.p)(Ne,ze,Oe);return B(Ce).highlightColumnMap[Fe]}};const Se=(0,E.Ay)(Ce=>(0,P.oY)(Ce)||x(Ce));Se.meta={name:"createSelector",key:"createSelectorisModalOrOverlayOpen",description:Ce=>(0,P.oY)(Ce)||x(Ce)};const St=(0,E.Ay)((Ce,Ne)=>{if(!Ne)return null;const ze=(0,i.$N)(Ce,Ne);return!ze||ze.type!==i.im.MESSAGE||!ze.channelId||!ze.ts?null:(0,C.Ld)(Ce,ze.channelId,ze.ts)});St.meta={name:"createSelector",key:"createSelectorgetMessageFromCellValue",description:(Ce,Ne)=>{if(!Ne)return null;const ze=(0,i.$N)(Ce,Ne);return!ze||ze.type!==i.im.MESSAGE||!ze.channelId||!ze.ts?null:(0,C.Ld)(Ce,ze.channelId,ze.ts)}}},473586:(j,T,e)=>{"use strict";e.d(T,{E:()=>i});var t=e(612104),n=e.n(t),s=e(518320),a=e(250558),c=e(493284),r=e(682520),o=e(674217),u=e(327271),m=e(752123);const i=(0,o.Ay)("Fetch lists",function(){var d=(0,t.coroutine)(function*(_,h){let{query:p,sort:A,reason:v}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{const E=yield p?_((0,a.yz)({query:`type:list ${p}`,includeShares:!0,reason:v||"get-lists",bypassCache:!0})):_((0,c.jQ)({module:"files",query:"type:list",sort:A||m.VU.lastRead,reason:v||"get-lists",context:s.Oj.ListsDefault})).then(f=>{let{items:g}=f;return g});_((0,u.b)({files:E}))}catch(E){(0,r.Ay)({label:"lists"}).error("error fetching lists",E)}});return function(_,h){return d.apply(this,arguments)}}());i.meta={name:"createThunk",key:"createThunkfetchLists",description:"Fetch lists"}},251321:(j,T,e)=>{"use strict";e.d(T,{D:()=>u});var t=e(612104),n=e.n(t),s=e(725238),a=e(682520),c=e(535518),r=e(674217),o=e(776789);const u=(0,r.Ay)("Fetch list records",function(){var m=(0,t.coroutine)(function*(i,d,_){let{listId:h,currentUserId:p}=_;try{const v=(yield i((0,s.z)({listId:h,reason:"get-list-records"}))).records.map(E=>{var f,g,y,I,O;return(0,c.jG)({id:E.id,fields:E.fields,dateCreated:E.date_created,createdBy:(f=E.created_by)!==null&&f!==void 0?f:"",threadTs:(g=E.thread_ts)!==null&&g!==void 0?g:"",position:(y=E.position)!==null&&y!==void 0?y:"",updatedTimestamp:(I=E.updated_timestamp)!==null&&I!==void 0?I:"",updatedBy:(O=E.updated_by)!==null&&O!==void 0?O:"",viewPositions:E.view_positions,platformRefs:E.platform_refs,saved:E.saved,savedFields:E.saved_fields})});i((0,o.yw)({listId:h,records:v})),i((0,o.fg)({listId:h,currentUserId:p}))}catch(A){(0,a.Ay)({label:"lists"}).error("error fetching list records",A)}});return function(i,d,_){return m.apply(this,arguments)}}());u.meta={name:"createThunk",key:"createThunkfetchRecords",description:"Fetch list records"}},397293:(j,T,e)=>{"use strict";e.d(T,{p:()=>n,z:()=>t});const t=l(s=>{let{listId:a,viewId:c}=s;return`${a}-${c}`},"getLocalRefinementsId"),n=l((s,a,c)=>`${s.toString()}-${a}-${c}`,"makeHighlightStoreKey")},269806:(j,T,e)=>{"use strict";e.d(T,{A:()=>i});var t=e(682520),n=e(674217),s=e(180491),a=e(787781),c=e(329981),r=e(452096),o=e(89207),u=e(590671);const m=(0,n.Ay)("record a dismissal on a megaphone notification",(d,_,h)=>{const{spaceName:p,...A}=h,v=h.channelId||h.entityId,E=(0,t.Wo)();if(!p)return E.error(a.cK,"spaceName is required when dispatching recordAndClearNotification."),s.S.resolve();const f=_(),g=(0,c.Hp)(f,p,v);return(0,u.Ay)(v)&&h.entityType==="team"?d((0,r.pn)({spaceName:p,channelId:v})):d((0,r.KT)({spaceName:p,channelId:v})),d((0,o.A)({notificationName:g,...A}))});m.meta={name:"createThunk",key:"createThunkrecordAndClearNotification",description:"record a dismissal on a megaphone notification"};const i=m},89207:(j,T,e)=>{"use strict";e.d(T,{A:()=>d,j:()=>i});var t=e(682520),n=e(674217),s=e(249375),a=e(957018),c=e(180491),r=e(787781);const o=(0,n.Ay)("record an event (e.g. dismissal, impression, etc) on a megaphone notification",(_,h,p)=>{const{notificationName:A,...v}=p,E=(0,t.Wo)();var f;const g=(f=p.reason)!==null&&f!==void 0?f:"record-notification-event";if(!A)return E.error(r.cK,"notificationName is required when dispatching recordNotificationEvent."),c.S.resolve();const y={notification:A,...v,reason:g};return _((0,a.a)(y))});o.meta={name:"createThunk",key:"createThunkrecordNotificationEvent",description:"record an event (e.g. dismissal, impression, etc) on a megaphone notification"};const u=6e4,m=!1,i=(0,s.A)(o,u,m,void 0,!1),d=o},587365:(j,T,e)=>{"use strict";e.d(T,{h:()=>a});var t=e(682520),n=e(787781);const s=(0,t.Wo)(),a=l(c=>{let{spaceName:r,notificationName:o}=c;o&&s.error(n.cK,`${o} is not a recognized notification name for space ${r}.`)},"maybeLogUnrecognizedNotification")},275770:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(915773),n=e(437556);const s=(0,t.Ay)((c,r)=>(0,n.nv)(c,r).profile.statusEmojiDisplayInfo||void 0);s.meta={name:"createSelector",key:"createSelectorgetMemberCustomStatusEmojiDisplayInfo",description:(c,r)=>(0,n.nv)(c,r).profile.statusEmojiDisplayInfo||void 0};const a=s},10591:(j,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(915773),n=e(23219),s=e(437556),a=e(713348);const c=(0,t.Ay)((o,u)=>{const m=(0,s.nv)(o,u),{status_text_canonical:i}=m.profile;return i?(0,n.UM)(m):(0,a.K)(o,m)?0:(0,n.UM)(m)});c.meta={name:"createSelector",key:"createSelectorgetMemberCustomStatusExpiration",description:(o,u)=>{const m=(0,s.nv)(o,u),{status_text_canonical:i}=m.profile;return i?(0,n.UM)(m):(0,a.K)(o,m)?0:(0,n.UM)(m)}};const r=c},473897:(j,T,e)=>{"use strict";e.d(T,{A:()=>o});var t=e(790973),n=e(915773),s=e(437556),a=e(577978),c=e(713348);const r=(0,n.Ay)((u,m)=>{const i=(0,s.nv)(u,m),{status_text_canonical:d}=i.profile;if(d){let _;const h=(0,a.A)(u);return h&&(_=((0,t.A)(h,p=>p.canonical===d)||{}).text||null),d.toLowerCase()==="on a call"&&(_=s.Ru.t("On a call")),_||i.profile.status_text||""}return(0,c.K)(u,i)?s.Ru.t("In a huddle"):i.profile.status_text||""});r.meta={name:"createSelector",key:"createSelectorgetMemberCustomStatusText",description:(u,m)=>{const i=(0,s.nv)(u,m),{status_text_canonical:d}=i.profile;if(d){let _;const h=(0,a.A)(u);return h&&(_=((0,t.A)(h,p=>p.canonical===d)||{}).text||null),d.toLowerCase()==="on a call"&&(_=s.Ru.t("On a call")),_||i.profile.status_text||""}return(0,c.K)(u,i)?s.Ru.t("In a huddle"):i.profile.status_text||""}};const o=r},522559:(j,T,e)=>{"use strict";e.d(T,{c:()=>r});var t=e(523149),n=e(674217),s=e(180491),a=e(409295),c=e(320770);const r=(0,n.Ay)("Submits changes to the current user\u2019s profile",(o,u,m)=>{let{profile:i,reason:d="submitProfileChange"}=m;if(!(0,t.A)(i))return s.S.resolve();const _={...i},h=u();return i.status_text&&(_.status_text=(0,a.A)(h,i.status_text)),o((0,c.n)({profile:JSON.stringify(_),reason:d}))});r.meta={name:"createThunk",key:"createThunksubmitProfileChange",description:"Submits changes to the current user\u2019s profile"}},148294:(j,T,e)=>{"use strict";e.d(T,{p:()=>n});var t=e(152532);const n=(0,t.Ay)("Upsert fetched ordered membership list for channel");n.meta={name:"createAction",key:"createActionupsertFetchedChannelOrderedMemberList",description:"Upsert fetched ordered membership list for channel"}},885618:(j,T,e)=>{"use strict";e.d(T,{GD:()=>p,Nd:()=>v});var t=e(446632),n=e(873406),s=e(180491),a=e(449552),c=e(793434),r=e(723300),o=e(881805),u=e(148294),m=e(674217),i=e(249375),d=e(836417),_=e(682520);const h=1e4,p=(0,t.A)(()=>new n.Ay({storeKey:"membershipOrdered",fetch:(f,g)=>s.S.all(g.map(y=>(0,a.dispatchForTeamId)(f,E({channelId:y,count:c.Ql})))),isEnabled:()=>!0,metricsName:"member-list"})),A=(0,m.Ay)("marks objects as stale via CFM for Membership List",function(f,g){let{teamId:y,channelId:I}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};p().markObjectsAsStale(y,[I])});A.meta={name:"createThunk",key:"createThunkmarkObjectsAsStale",description:"marks objects as stale via CFM for Membership List"};const v=(0,i.A)(A,(0,d.A)(h,0,.5)),E=(0,m.Ay)("Fetches top members for the channel",function(f,g){let{channelId:y,count:I}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(0,r.ds)(f,g,y,I).then(O=>{const M=(0,o.ZT)(g());if(!M){(0,_.Wo)().info("MOS","No teamId found");return}return p().markObjectsAsFresh(M,[y]),f((0,u.p)({channelId:y,memberList:O}))})});E.meta={name:"createThunk",key:"createThunkfetchAndUpsertFirstNMembersForChannel",description:"Fetches top members for the channel"}},649695:(j,T,e)=>{"use strict";e.d(T,{$:()=>c});var t=e(915773),n=e(881805),s=e(885618),a=e(45798);const c=(0,t.Ay)((r,o)=>{const u=(0,n.ZT)(r);return u&&(0,s.GD)().maybeRefetch(u,o),r&&r.membershipOrdered&&r.membershipOrdered[o]?r.membershipOrdered[o]:a.Ml});c.meta={name:"createSelector",key:"createSelectorgetMemberListForChannel",description:(r,o)=>{const u=(0,n.ZT)(r);return u&&(0,s.GD)().maybeRefetch(u,o),r&&r.membershipOrdered&&r.membershipOrdered[o]?r.membershipOrdered[o]:a.Ml}}},797448:(j,T,e)=>{"use strict";e.d(T,{z:()=>h});var t=e(180491),n=e(712050),s=e(224089),a=e(674217),c=e(396386),r=e(658160),o=e(449552),u=e(113574),m=e(881805),i=e(885850),d=e(36911),_=e(561229);const h=(0,a.Ay)("Gets the channel membership for a set of users and returns a promise when the store is updated accordingly",function(p,A){let{channelId:v,userIds:E}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const f=A(),[g,y]=(0,n.A)(E,M=>(0,d.wr)(f,v,M)),I=(0,i.OL)(f,v);if((0,c.LI)(I)){const M=(0,r.e)(I),C=(0,u.WR)(f);(0,s.A)(y,M,C),E!=null&&E.includes(M)&&g.push(M),E!=null&&E.includes(C)&&g.push(C)}const O={};return g.forEach(M=>{O[M]=(0,d.Ql)(f,v,M)}),y.length?(0,o.dispatchForTeamId)((0,m.ZT)(f),(0,_.R)({channelId:v,userIds:y})).then(M=>M&&M.payload&&M.payload.membershipInfo?{membershipInfo:{...M.payload.membershipInfo,...O}}:{membershipInfo:O}):t.S.resolve({membershipInfo:O})});h.meta={name:"createThunk",key:"createThunkgetChannelMembershipInfoForUsers",description:"Gets the channel membership for a set of users and returns a promise when the store is updated accordingly"}},2889:(j,T,e)=>{"use strict";e.d(T,{m:()=>n});var t=e(152532);const n=(0,t.Ay)("Updates latest message activity for a specified type");n.meta={name:"createAction",key:"createActionupdateMessageActivity",description:"Updates latest message activity for a specified type"}},350662:(j,T,e)=>{"use strict";e.d(T,{T:()=>n,s:()=>s});var t=e(152532);const n=(0,t.Ay)("Add a placeholder to the store");n.meta={name:"createAction",key:"createActionaddPlaceholder",description:"Add a placeholder to the store"};const s=(0,t.Ay)("Remove a placeholder from the store by client_msg_id");s.meta={name:"createAction",key:"createActionremovePlaceholder",description:"Remove a placeholder from the store by client_msg_id"}},950669:(j,T,e)=>{"use strict";e.d(T,{A:()=>n});var t=e(915773);const n=(0,t.Ay)(s=>s==null?void 0:s.messagePlaceholders);n.meta={name:"createSelector",key:"createSelectorgetAllPlaceholders",description:s=>s==null?void 0:s.messagePlaceholders}},916990:(j,T,e)=>{"use strict";e.d(T,{I:()=>s});var t=e(915773),n=e(950669);const s=(0,t.Ay)((a,c)=>{var r;return(r=(0,n.A)(a))===null||r===void 0?void 0:r[c]});s.meta={name:"createSelector",key:"createSelectorgetPlaceholderByClientMsgId",description:(a,c)=>{var r;return(r=(0,n.A)(a))===null||r===void 0?void 0:r[c]}}},530682:(j,T,e)=>{"use strict";e.d(T,{o:()=>n});var t=e(152532);const n=(0,t.Ay)("Start delete animation for a message");n.meta={name:"createAction",key:"createActionanimateDeleteMessage",description:"Start delete animation for a message"}},459171:(j,T,e)=>{"use strict";e.d(T,{h:()=>c});var t=e(915773),n=e(45798);const s=(0,t.Ay)(o=>o==null?void 0:o.messagesMeta);s.meta={name:"createSelector",key:"createSelectorgetMessagesMetaState",description:o=>o==null?void 0:o.messagesMeta};var a;const c=(0,t.Ay)((o,u)=>{let{channelId:m,ts:i}=u;var d,_;return(a=(d=s(o))===null||d===void 0||(_=d[m])===null||_===void 0?void 0:_[i])!==null&&a!==void 0?a:n.t0});var r;c.meta={name:"createSelector",key:"createSelectorgetMessageMetaData",description:(o,u)=>{let{channelId:m,ts:i}=u;var d,_;return(r=(d=s(o))===null||d===void 0||(_=d[m])===null||_===void 0?void 0:_[i])!==null&&r!==void 0?r:n.t0}}},97748:(j,T,e)=>{"use strict";e.d(T,{j:()=>f});var t=e(674217),n=e(289123),s=e(885850),a=e(747360),c=e(32032),r=e(695823),o=e(530682),u=e(418558),m=e(158565),i=e(271338),d=e(544555);const _=(0,t.Ay)("Checks if the message is in an active view before doing the animation",function(g,y){let{channelId:I,ts:O,threadTs:M}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},C=arguments.length>3?arguments[3]:void 0;const P=y(),{getViewSet:L}=C(m.U),x=!(0,i.A)()||(0,c.T2)(P),F=(0,r.ko)(P)&&x,V=(0,c.Qm)(P);var B;const{primary:D,secondary:S}=(B=L(P))!==null&&B!==void 0?B:{},R=D==null?void 0:D.id,w=S==null?void 0:S.id,Y=l(()=>g((0,o.o)({channelId:I,ts:O})),"doAnimation");if(F){if(M&&(w==="convo"||w==="thread")&&(0,a.A)(V)===(0,d.Iu)(I,M)){Y();return}if(R===I){Y();return}}g((0,u.A)({channelId:I,ts:O,threadTs:M}))});_.meta={name:"createThunk",key:"createThunkmaybeAnimateDeleteMessage",description:"Checks if the message is in an active view before doing the animation"};const h=_;var p=e(365478),A=e(371815),v=e(459171),E=e(682520);const f=(0,t.Ay)("Delete a message by channel ID and timestamp",function(g,y){let{deleted_ts:I,channel:O,_from_evt_log:M,previous_message:C}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var P;const L=y(),x=(0,E.Ay)({state:L});if(!I){x.error("Error in messageDeleted: no deleted_ts");return}const F=(0,s.gT)(L,O)&&(0,s.OL)(L,O);if(!F){x.error(`Unknown channelId: ${O}`);return}if((P=(0,v.h)(L,{channelId:O,ts:I}))===null||P===void 0?void 0:P.isDeleting)return;(0,A.yj)(F,{deleted_ts:I});const B=!1,S=(0,n.Ld)(L,O,I,B)||C;g(S?h({channelId:O,ts:I,threadTs:S.thread_ts,fromEvtLog:M}):(0,u.A)({channelId:O,ts:I})),g((0,p.o)({channelId:O,ts:I}))});f.meta={name:"createThunk",key:"createThunksetMessageDeleted",description:"Delete a message by channel ID and timestamp"}},613748:(j,T,e)=>{"use strict";e.d(T,{b:()=>o});var t=e(681276),n=e(674217),s=e(688887),a=e(988482),c=e(85231),r=e(166861);const o=(0,n.Ay)("Search list views by query",(u,m,i)=>{let{isFullSearch:d=!1,objectType:_,query:h,salesforceOrgId:p}=i;const A=m(),v=d?t.Iq:t.TD;let E;return _?E=[_]:E=(0,a.qj)(A).map(g=>g.sobject_api_name),u((0,c.A)({limit:v,listviewObjectScopes:E,query:h,sobjects:[{sobjectApiName:"ListView",fields:["Name","LastViewedDate","SobjectType"]}],salesforceOrgId:p})).then(f=>{const g=f.map(I=>({id:I.value,label:I.label,lastViewedDate:I.extras.LastViewedDate,objectType:I.extras.SobjectType,salesforceOrgId:p})),y=u((0,r.x)({listViews:g,salesforceOrgId:p}));return d&&u((0,s.hA)(y)),g})});o.meta={name:"createThunk",key:"createThunksearchListViews",description:"Search list views by query"}},85231:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(512706),n=e(674217);const s=(0,n.Ay)("Search SalesForce objects by query",(c,r,o)=>c((0,t.K)({...o,reason:"sales-home"})).then(u=>{let{records:m}=u;return m?m.map(i=>{var d,_,h;const p=(d=o.sobjects.find(A=>A.sobjectApiName===i.type))===null||d===void 0||(_=d.fields)===null||_===void 0?void 0:_[0];return{key:i.id,label:i.name||((h=i.additional_fields)===null||h===void 0?void 0:h[`${p}`])||`Salesforce ${i.type}`,value:i.id,type:i.type,extras:i.additional_fields}}):[]}).catch(()=>[]));s.meta={name:"createThunk",key:"createThunksearchObjects",description:"Search SalesForce objects by query"};const a=s},166861:(j,T,e)=>{"use strict";e.d(T,{x:()=>s});var t=e(674217),n=e(688887);const s=(0,t.Ay)("Upsert list views fetched by search or other API",(a,c,r)=>{let{listViews:o,salesforceOrgId:u}=r;const m=[],i={},d={};return o.forEach(_=>{const h=_.id,p=_.objectType;i[h]={id:h,label:_.label,lastViewedDate:_.lastViewedDate,objectType:p,salesforceOrgId:u},d[p]=d[p]||[],d[p].push(h),m.push(h)}),a((0,n.TO)(i)),a((0,n.KT)({salesforceOrgId:u,listViewObjMap:d})),m});s.meta={name:"createThunk",key:"createThunkupsertFetchedListViews",description:"Upsert list views fetched by search or other API"}},178783:(j,T,e)=>{"use strict";e.d(T,{A:()=>m});var t=e(211700),n=e(373314),s=e(152532);const a=(0,s.Ay)("NOOP");a.meta={name:"createAction",key:"createActionnoopAction",description:"NOOP"};var c=e(449552),r=e(877752);const o=0,m=(0,n.Ay)({},o,{storeKey:"noop",persistenceEnabled:!1}).on(a,i=>i+1);(0,t.ul)("dispatchNoop",()=>{(0,c.dispatchForTeamId)((0,r.oI)(),a())})},535355:(j,T,e)=>{"use strict";e.d(T,{l:()=>n});var t=e(152532);const n=(0,t.Ay)("Relay observed overlays state from OverlaysContextProvider to Redux");n.meta={name:"createAction",key:"createActionrelayOverlays",description:"Relay observed overlays state from OverlaysContextProvider to Redux"}},195168:(j,T,e)=>{"use strict";e.d(T,{y:()=>o});var t=e(717154),n=e(774165),s=e(535355),a=e(45798);const c=a.t0,r={persistenceEnabled:!1,scope:t.nt.orgShared,storeKey:"overlays"},o=(0,n.vy)({},c,r).on(s.l,(u,m)=>m)},818678:(j,T,e)=>{"use strict";e.d(T,{OI:()=>r,cg:()=>s,kK:()=>n,ot:()=>c,us:()=>a});var t=e(152532);const n=(0,t.Ay)("Sets the current loading state for a channel");n.meta={name:"createAction",key:"createActionsetLoadingState",description:"Sets the current loading state for a channel"};const s=(0,t.Ay)("Adds pinned item identifiers for files and messages to list of pinned items");s.meta={name:"createAction",key:"createActionaddPinnedItems",description:"Adds pinned item identifiers for files and messages to list of pinned items"};const a=(0,t.Ay)("Remove an item from the pinned items list for a channel");a.meta={name:"createAction",key:"createActionremovePinnedItem",description:"Remove an item from the pinned items list for a channel"};const c=(0,t.Ay)("Clears the existing pinned items for a channel and sets the loading state");c.meta={name:"createAction",key:"createActionclearPinnedItems",description:"Clears the existing pinned items for a channel and sets the loading state"};const r=(0,t.Ay)("Sets the scrollTop value of the pins popover so that it can be opened to the same spot again");r.meta={name:"createAction",key:"createActionsetPopoverScrollTop",description:"Sets the scrollTop value of the pins popover so that it can be opened to the same spot again"}},584834:(j,T,e)=>{"use strict";e.d(T,{G:()=>o});var t=e(446632),n=e(180491),s=e(873406),a=e(449552),c=e(818678),r=e(269605);const o=(0,t.A)(()=>new s.Ay({storeKey:"pins",fetch:(u,m)=>n.S.map(m,i=>((0,a.dispatchForTeamId)(u,(0,c.ot)({channelId:i})),(0,a.dispatchForTeamId)(u,(0,r.b)({channelId:i})))),isEnabled:()=>!0,metricsName:"pins"}))},116816:(j,T,e)=>{"use strict";e.d(T,{R:()=>t,b:()=>n});const t={FILE:"file",FILE_COMMENT:"file_comment",MESSAGE:"message"},n={NOT_LOADED:void 0,LOADING:"loading",LOADED:"loaded"}},617935:(j,T,e)=>{"use strict";e.d(T,{$U:()=>i,A_:()=>d,Wt:()=>_,YG:()=>p,c7:()=>h,jR:()=>m});var t=e(774165),n=e(881805),s=e(289123),a=e(394045),c=e(969924),r=e(584834),o=e(116816),u=e(399284);const m=(0,t.Mz)(function(v,E){let{refetchIfNeeded:f=!0}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(f){const g=(0,n.ZT)(v);(0,r.G)().maybeRefetch(g,E)}return v&&v.pins&&v.pins.pinsByChannel[E]});m.meta={name:"createSelector",key:"createSelectorgetPinnedItemsForChannel",description:function(v,E){let{refetchIfNeeded:f=!0}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(f){const g=(0,n.ZT)(v);(0,r.G)().maybeRefetch(g,E)}return v&&v.pins&&v.pins.pinsByChannel[E]}};const i=(0,t.Mz)((v,E)=>{var f,g;return v&&v.pins&&v.pins.pinsByChannel[E]?(f=v.pins.pinsByChannel)===null||f===void 0||(g=f[E])===null||g===void 0?void 0:g.length:0});i.meta={name:"createSelector",key:"createSelectorgetPinCountForChannel",description:(v,E)=>{var f,g;return v&&v.pins&&v.pins.pinsByChannel[E]?(f=v.pins.pinsByChannel)===null||f===void 0||(g=f[E])===null||g===void 0?void 0:g.length:0}};const d=(0,t.Mz)((v,E)=>v&&v.pins&&v.pins.loadingStateByChannel[E]);d.meta={name:"createSelector",key:"createSelectorgetLoadingState",description:(v,E)=>v&&v.pins&&v.pins.loadingStateByChannel[E]};const _=(0,t.Mz)((v,E)=>{let{channelId:f,ts:g}=E;const y=!1,I=(0,s.Ld)(v,f,g,y);if(!I)return!1;if((0,a.m)(I)&&I.comment){const O=(0,c.yd)(v,I.file,I.comment.id);return O?!!(O.pinned_to&&O.pinned_to.includes(f)):!1}return!!(I.pinned_to&&I.pinned_to.includes(f))});_.meta={name:"createSelector",key:"createSelectorisMessagePinned",description:(v,E)=>{let{channelId:f,ts:g}=E;const y=!1,I=(0,s.Ld)(v,f,g,y);if(!I)return!1;if((0,a.m)(I)&&I.comment){const O=(0,c.yd)(v,I.file,I.comment.id);return O?!!(O.pinned_to&&O.pinned_to.includes(f)):!1}return!!(I.pinned_to&&I.pinned_to.includes(f))}};const h=l((v,E)=>{switch(E.type){case o.R.MESSAGE:return{...(0,s.Ld)(v,E.channel,E.ts),type:o.R.MESSAGE};case o.R.FILE:return{...(0,c.Lp)(v,E.id),type:o.R.FILE};case o.R.FILE_COMMENT:return{...(0,c.yd)(v,E.fileId,E.id),fileId:E.fileId,type:o.R.FILE_COMMENT};default:return{}}},"getItemWithPinIdentifier"),p=(0,u.eI)((v,E)=>{const f=m(v,E);return f?f.map(g=>h(v,g)):[]}),A=(0,t.Mz)(v=>v&&v.pins&&v.pins.popoverScrollTop);A.meta={name:"createSelector",key:"createSelectorgetPopoverScrollTop",description:v=>v&&v.pins&&v.pins.popoverScrollTop}},269605:(j,T,e)=>{"use strict";e.d(T,{b:()=>p});var t=e(682520),n=e(456966),s=e(327271),a=e(674217),c=e(881805),r=e(52032),o=e(933010),u=e(766998),m=e(116816),i=e(818678),d=e(972186),_=e(584834),h=e(232007);const p=(0,a.Ay)("Fetch pinned items list for channel",(A,v,E)=>{const f=E.channelId;return A((0,i.kK)({loadingState:m.b.LOADING,channelId:f})),A((0,n.xs)({reason:"fetchPinsList",...E})).then(function(){let{items:g}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const y=g.filter(M=>M.type.includes(m.R.FILE)).map(M=>{if(M.type===m.R.FILE_COMMENT){const{comment:C,file:P,...L}=M,x=(0,r.A)(C,P);return{...L,file:x}}return M}),I=g.filter(M=>M.type===m.R.MESSAGE);if(y.length){const M=y.filter(P=>P.type!==m.R.FILE_COMMENT),C=y.filter(P=>P.type===m.R.FILE_COMMENT);A((0,s.b)({files:M.map(P=>P.file)})),A((0,s.b)({files:C.map(P=>P.file)}))}if(I.length){const M=I.map(P=>{let{message:L}=P;return L}),C=A((0,o.A)({imsgs:M,channelId:f}));A((0,u.Kc)(C))}A((0,d.K)({channelId:f,count:g.length})),A((0,i.cg)({items:g.map(h.B),channelId:f})),A((0,i.kK)({loadingState:m.b.LOADED,channelId:f}));const O=(0,c.ZT)(v());(0,_.G)().markObjectsAsFresh(O,[f])}).catch(g=>{throw A((0,i.kK)({loadingState:m.b.NOT_LOADED,channelId:f})),(0,t.Ay)({getState:v}).error(`Error in fetchPinsList: ${JSON.stringify(g)}`),g})});p.meta={name:"createThunk",key:"createThunkfetchPinsList",description:"Fetch pinned items list for channel"}},972186:(j,T,e)=>{"use strict";e.d(T,{K:()=>u});var t=e(674217),n=e(146070),s=e(885850),a=e(682520),c=e(365389),r=e(116816),o=e(617935);const u=(0,t.Ay)("update a pin count for a channel",(m,i,d)=>{let{channelId:_,count:h,forceUpdate:p=!1}=d;const A=i(),v={...(0,s.OL)(A,_)},E=(0,o.jR)(A,_,{refetchIfNeeded:!1}),f=(0,o.A_)(A,_),g=!p&&f===r.b.LOADED?E==null?void 0:E.length:h;if(g===v.pinned_items_count)return;(0,a.Ay)({state:A}).info("PINS",`Pins count updated for channel ${_}: ${g}`);const y={...v,pinned_items_count:g};m((0,n.B)({channel:y})),(0,c.L6)(v,h)});u.meta={name:"createThunk",key:"createThunkupdatePinCount",description:"update a pin count for a channel"}},232007:(j,T,e)=>{"use strict";e.d(T,{B:()=>n});var t=e(116816);const n=l(s=>{switch(s.type){case t.R.MESSAGE:var a;return{type:s.type,channel:s.channel,ts:(a=s.message)===null||a===void 0?void 0:a.ts};case t.R.FILE:var c,r;return{type:s.type,id:s.file?s.file.id:(c=s.files)===null||c===void 0||(r=c[0])===null||r===void 0?void 0:r.id};case t.R.FILE_COMMENT:var o;return{type:s.type,id:s.comment.id,fileId:(o=s.file)===null||o===void 0?void 0:o.id};default:return{}}},"formatPinFromAPI")},862855:(j,T,e)=>{"use strict";e.d(T,{d:()=>n});var t=e(915773);const n=(0,t.Ay)((s,a,c)=>{var r,o,u;return s==null||(r=s.prefs)===null||r===void 0||(o=r.channel)===null||o===void 0||(u=o[a])===null||u===void 0?void 0:u[c]});n.meta={name:"createSelector",key:"createSelectorgetChannelPref",description:(s,a,c)=>{var r,o,u;return s==null||(r=s.prefs)===null||r===void 0||(o=r.channel)===null||o===void 0||(u=o[a])===null||u===void 0?void 0:u[c]}}},222035:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(915773),n=e(921055);const s=(0,t.Ay)(c=>(0,n.ty)(c,"messages_theme")==="dense"?"dense":"light");s.meta={name:"createSelector",key:"createSelectorgetUserMessagesTheme",description:c=>(0,n.ty)(c,"messages_theme")==="dense"?"dense":"light"};const a=s},535553:(j,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(915773),n=e(190145),s=e(921055),a=e(222035);const c=(0,t.Ay)(o=>!(0,n.P)(o)&&!!(0,s.ty)(o,"jumbomoji")&&(0,a.A)(o)!=="dense");c.meta={name:"createSelector",key:"createSelectorshouldDisplayJumbomoji",description:o=>!(0,n.P)(o)&&!!(0,s.ty)(o,"jumbomoji")&&(0,a.A)(o)!=="dense"};const r=c},956323:(j,T,e)=>{"use strict";e.d(T,{F:()=>n});var t=e(915773);const n=(0,t.Ay)(s=>s&&s.promo&&s.promo.showTrialStartedCelebration);n.meta={name:"createSelector",key:"createSelectorgetShowTrialStartedCelebration",description:s=>s&&s.promo&&s.promo.showTrialStartedCelebration}},197603:(j,T,e)=>{"use strict";e.d(T,{A:()=>_});var t=e(180491),n=e(674217),s=e(249375),a=e(586869),c=e(749005),r=e(129318),o=e(831127),u=e(934861),m=e(682520);const i=(0,n.Ay)("Fetch promo campaign eligibility",(p,A,v)=>{let{campaignType:E,campaignSubType:f,context:g,reason:y}=v;const I=(0,r.H7)(A());return(0,u.tc)(I)?(p((0,c.zg)({campaignType:E,campaignSubType:f,isFetching:!0})),p((0,o.V)({campaignType:E,campaignSubType:f,context:g,reason:y})).then(M=>{const{isEligible:C,discountPercent:P,expirationTimestamp:L,discountDuration:x}=M;return p((0,c.xt)({campaignType:E,campaignSubType:f,isEligible:C,discountPercent:P,expirationTimestamp:L,discountDuration:x})),p((0,c.zg)({campaignType:E,campaignSubType:f,isFetching:!1})),M}).catch(M=>((0,m.Ay)({state:A()}).error(M.message),p((0,c.zg)({campaignType:E,campaignSubType:f,isFetching:!1})),M))):t.S.resolve({isEligible:!1})});i.meta={name:"createThunk",key:"createThunkfetchPromoEligibility",description:"Fetch promo campaign eligibility"};const _=(0,s.A)(i,a.C,!0,["context","reason"]),h={fetchPromoEligibility:i}},586869:(j,T,e)=>{"use strict";e.d(T,{C:()=>t,y:()=>n});const t=3e5,n={shareChannelPaywall:"share_channel_paywall",sharedChannelsIntro:"shared_channels_intro",trialStart:"trial_start",limitedHistoryForeword:"limited_history_foreword",slackConnectHub:"slack_connect_hub",slackConnectHubHeader:"slack_connect_hub_header",slackConnectDMBanner:"slack_connect_dm_banner",addMoreItemsLink:"add_more_items_link",connectionsChannelSection:"connections_channel_section",paidBenefitsPage:"paid_benefits_page",adminBillingOverview:"admin_billing_overview",channelInviteModal:"channel_invite_modal",huddleChannelJoinMsgText:"huddle_channel_join_msg_text",fileStorageWarning:"file_storage_warning",huddleInviteModal:"huddle_invite_modal",canvasPageSyntheticView:"canvas_page_synthetic_view",workflowBuilderFreemiumBanner:"workflow_builder_freemium_banner",workflowPublishButton:"workflow_publish_button",workflowBuilderSidebar:"workflow_builder_sidebar"}},530397:(j,T,e)=>{"use strict";e.d(T,{A:()=>h});var t=e(612104),n=e.n(t),s=e(334238),a=e(337927),c=e(158565),r=e(127225),o=e(195804),u=e(107921),m=e(190905),i=e(465291),d=e(674217);const _=(0,d.Ay)("Open a document on a specific version",function(){var p=(0,t.coroutine)(function*(A,v,E,f){const{fileId:g,windowId:y,version:I,isFromCloseActivityHistory:O,replaceHistoryState:M}=E,C=v(),{versionId:P,sequence:L}={...I};if(!g)return;const{isMainWindow:x,closeView:F,getViewSet:V}=f(c.U),B=(0,m.e6)(C),D=(0,a.xu)(C,y),{versionId:S,sequence:R}={...D},w=O?void 0:P||S,Y=O?void 0:L||R;if(O||A((0,s.fw)({windowId:y,versionId:P||S})),M){const Q=x?V(C):(0,m.hZ)(C,{windowId:y});if(Q){const Z=Q[r.mq.Primary];if(Z){const ee={...Q,[r.mq.Primary]:{...Q[r.mq.Primary],params:{...Z.params,versionId:w,sequence:Y}}};A(x?(0,u.A)({windowId:r.N2,tab:B,viewSet:ee}):(0,u.A)({windowId:y.toString(),viewSet:ee}))}}}else{const Q={id:(0,o.Lo)({id:g}),versionId:w,sequence:Y,preserveExistingSecondaryView:!O};A(x?(0,i.IZ)({windowId:r.N2,tab:B,container:r.mq.Primary,params:Q}):(0,i.IZ)({windowId:y.toString(),container:r.mq.Primary,params:Q})),O&&F(r.mq.Secondary)}O&&A((0,s.NA)({windowId:y}))});return function(A,v,E,f){return p.apply(this,arguments)}}());_.meta={name:"createThunk",key:"createThunkopenDocVersion",description:"Open a document on a specific version"};const h=_},249564:(j,T,e)=>{"use strict";e.d(T,{Bi:()=>s,d0:()=>c,oj:()=>a});var t=e(915773);const n=(0,t.Ay)(r=>r==null?void 0:r.quipDocEmbeds);n.meta={name:"createSelector",key:"createSelectorgetQuipDocEmbedsStoreState",description:r=>r==null?void 0:r.quipDocEmbeds};const s=(0,t.Ay)(r=>{const o=n(r);return o&&Object.keys(o).length>0});s.meta={name:"createSelector",key:"createSelectorisSpaceOpen",description:r=>{const o=n(r);return o&&Object.keys(o).length>0}};const a=(0,t.Ay)(r=>{const o=n(r);return Object.keys(o)});a.meta={name:"createSelector",key:"createSelectorgetOpenSpaces",description:r=>{const o=n(r);return Object.keys(o)}};const c=(0,t.Ay)((r,o)=>{const u=n(r);var m;return((m=u[o])!==null&&m!==void 0?m:0)>0});c.meta={name:"createSelector",key:"createSelectorisSpaceOpenForThreadId",description:(r,o)=>{const u=n(r);var m;return((m=u[o])!==null&&m!==void 0?m:0)>0}}},494696:(j,T,e)=>{"use strict";e.d(T,{N:()=>u,al:()=>r,jw:()=>c,k:()=>n,uo:()=>s,yw:()=>a,z5:()=>o});var t=e(152532);const n=(0,t.Ay)("Store/replace client.counts for this channel");n.meta={name:"createAction",key:"createActionsetQuipUnreadCount",description:"Store/replace client.counts for this channel"};const s=(0,t.Ay)("increment mention count for the channel");s.meta={name:"createAction",key:"createActionincQuipUnreadCountForChannel",description:"increment mention count for the channel"};const a=(0,t.Ay)("decrement mention count for the channel");a.meta={name:"createAction",key:"createActiondecQuipUnreadCountForChannel",description:"decrement mention count for the channel"};const c=(0,t.Ay)("Add canvases to hide on undo");c.meta={name:"createAction",key:"createActionsetCanvasesToHideOnClearAll",description:"Add canvases to hide on undo"};const r=(0,t.Ay)("clear new mention flag for the channel");r.meta={name:"createAction",key:"createActionclearNewMentionFlagForChannel",description:"clear new mention flag for the channel"};const o=(0,t.Ay)("Set the list of enterprise file channels (canvases) to exclude from total counts");o.meta={name:"createAction",key:"createActionsetCanvasesToSuppress",description:"Set the list of enterprise file channels (canvases) to exclude from total counts"};const u=(0,t.Ay)("Set the last seen timestamp for a badged channel canvas animation");u.meta={name:"createAction",key:"createActionsetLastSeenChannelCanvasAnimationTimestamp",description:"Set the last seen timestamp for a badged channel canvas animation"}},46712:(j,T,e)=>{"use strict";e.d(T,{Hg:()=>a,V9:()=>n,ao:()=>s});var t=e(152532);const n=(0,t.Ay)("Add records to the store");n.meta={name:"createAction",key:"createActionupsertRecordDetails",description:"Add records to the store"};const s=(0,t.Ay)("Add record suggestions to the store");s.meta={name:"createAction",key:"createActionupsertRecordSuggestions",description:"Add record suggestions to the store"};const a=(0,t.Ay)("Delete all locally cached records by Salesforce org id");a.meta={name:"createAction",key:"createActiondeleteCachedRecordsBySalesforceOrgId",description:"Delete all locally cached records by Salesforce org id"}},402356:(j,T,e)=>{"use strict";e.d(T,{CK:()=>R,D1:()=>C,Eh:()=>L,F3:()=>g,FB:()=>B,H9:()=>S,Mo:()=>D,Ss:()=>I,_s:()=>F,ez:()=>O,pV:()=>h,x6:()=>x});var t=e(612104),n=e.n(t),s=e(780076),a=e(873406),c=e(180491),r=e(449552),o=e(446632),u=e(46712),m=e(56185),i=e(915047);const d="records",_=60*10;function h(w){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i.c.RecordNotFound;return{...(0,m.WQ)(w),error:Y}}l(h,"makeNonExistentRecord");function p(w,Y){return A.apply(this,arguments)}l(p,"fetchRecordDetailForTeamId");function A(){return A=(0,t.coroutine)(function*(w,Y){try{return(yield(0,r.dispatchForTeamId)(w,(0,i.H)({record:Y,reason:"record-detail-conditional-fetch"}))).record}catch(Q){return h(Y,Q.name)}}),A.apply(this,arguments)}l(A,"_fetchRecordDetailForTeamId");function v(w,Y){return c.S.map(Y,Q=>p(w,Q))}l(v,"fetchRecordDetailsForTeamId");function E(w,Y){(0,r.dispatchForTeamId)(w,(0,u.V9)(Y))}l(E,"upsertRecords");const f=l((w,Y)=>v(w,Y).then(Q=>E(w,Q)),"fetchAndUpsertKnownRecords"),g=l((w,Y)=>p(w,Y).then(Q=>(E(w,[Q]),Q)),"fetchAndUpsertKnownRecord"),y=(0,o.A)(()=>new a.Ay({storeKey:"recordDetails",maxAge:()=>_,metricsName:d,fetch:f})),I=(0,o.A)(()=>new s.Ay({fetch:v,upsertNonExistent:E,upsertKnown:(w,Y)=>{E(w,Y);const Q=Y.filter(m.uz).map(Z=>Z.id);y().markObjectsAsFresh(w,Q)}})),O=l((w,Y)=>y().maybeRefetch(w,Y),"maybeRefetch"),M=l((w,Y)=>y().markObjectsAsFresh(w,Y),"markObjectsAsFresh"),C=l((w,Y)=>y().markObjectsAsStale(w,Y),"markObjectsAsStale"),P=l((w,Y)=>y().isObjectFresh(w,Y),"isObjectFresh");function L(w){return(0,m.mX)(w)}l(L,"isUnknownRecord");function x(w){return(0,m.lv)(w)}l(x,"isNonExistentRecord");function F(w){return(0,m.uz)(w)}l(F,"isExistentRecord");function V(w){return Y=>x(Y)&&(Y==null?void 0:Y.error)===w}l(V,"createRecordErrorHelper");const B=V(i.c.RecordNotFound),D=V(i.c.TokenNotFound),S=V(i.c.InsufficientRecordAccess),R=V(i.c.SalesHomeUserConfigNotFound)},119589:(j,T,e)=>{"use strict";e.d(T,{Of:()=>E,PQ:()=>p,nI:()=>v,zO:()=>A});var t=e(915773),n=e(717951),s=e(881805),a=e(402356),c=e(666243),r=e(87715),o=e(708201),u=e(2551),m=e(56185);const i=Object.freeze((0,a.pV)("INVALID_RECORD_ID")),d=Object.freeze((0,m.VI)("UNKNOWN_RECORD_ID"));function _(f,g){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;var I,O;const M=(0,s.JY)(f)||"",C=g&&((I=f.recordDetails)===null||I===void 0||(O=I.records)===null||O===void 0?void 0:O[g]);return C?((0,a.ez)(M,g),C):g&&y?(0,a.Ss)().fetchObjectWithId(M,g):y?i:null}l(_,"getRecordDetailByIdSelector");function h(f,g){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!(0,n.B)(g))return y?i:null;const{domain:I,id:O}=(0,n.R)(g),M=(0,u.V)(f,I);if((0,m.uz)(M)){const C=(0,c.z)(M.id,O);return _(f,C,y)}return y&&(0,m.mX)(M)?d:y?i:null}l(h,"getRecordDetailByUrlSelector");const p=(0,t.Ay)(_);p.meta={name:"createSelector",key:"createSelectorgetRecordDetailById",description:_};const A=(0,t.Ay)(h);A.meta={name:"createSelector",key:"createSelectorgetRecordDetailByUrl",description:h};const v=(0,t.Ay)(f=>f.recordDetails.suggestions);v.meta={name:"createSelector",key:"createSelectorgetRecordSuggestions",description:f=>f.recordDetails.suggestions};const E=(0,r.F)(f=>f.recordDetails.records,(f,g)=>g,(f,g)=>Object.keys(f).filter(y=>{var I;return((I=(0,o.B)(y))===null||I===void 0?void 0:I.orgId)===g}))},786071:(j,T,e)=>{"use strict";e.d(T,{b:()=>n,q:()=>s});var t=e(152532);const n=(0,t.Ay)("Set the last executed encoded search string");n.meta={name:"createAction",key:"createActionsetLastExecutedEncodedSearchString",description:"Set the last executed encoded search string"};const s=(0,t.Ay)("Clear the last executed encoded search string");s.meta={name:"createAction",key:"createActionclearLastExecutedEncodedSearchString",description:"Clear the last executed encoded search string"}},980258:(j,T,e)=>{"use strict";e.d(T,{$:()=>s});var t=e(915773),n=e(919273);const s=(0,t.Ay)(function(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.I;var r,o;return a==null||(r=a.searchHistory)===null||r===void 0||(o=r[c])===null||o===void 0?void 0:o.lastExecutedEncodedSearchString});s.meta={name:"createSelector",key:"createSelectorgetLastExecutedEncodedSearchString",description:function(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.I;var r,o;return a==null||(r=a.searchHistory)===null||r===void 0||(o=r[c])===null||o===void 0?void 0:o.lastExecutedEncodedSearchString}}},579560:(j,T,e)=>{"use strict";e.d(T,{A:()=>I});var t=e(674217),n=e(140189),s=e(237163),a=e(519213),c=e(413427),r=e(679946),o=e(538768),u=e(707980),m=e(598157),i=e(961131),d=e(802631),_=e(437886);function h(O){let{highlightWords:M,shouldRenderEmojiAsText:C,emojiNames:P,locale:L}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const x=(0,m.A)(O,{highlightWords:M,shouldRenderEmojiAsText:C,emojiNames:P,locale:L,useChannelTagging:!1});return(0,u.A)(x.contents,(F,V)=>{if(V.attributes&&V.attributes.slackmention){const B=V.attributes.slackmention.id;return(0,i.A)(B)?`${F}@${(0,_.A)(B)}`:(0,d.A)(B)?`${F}${V.attributes.slackmention.label}`:B.charAt(0)==="S"?`${F}<!subteam^${B}|${V.attributes.slackmention.label}>`:`${F}<@${B}>`}return V.insert&&V.insert.slackemoji?F+V.insert.slackemoji.text:F+V.insert},"")}l(h,"convertContentsStringForEncodedMembers");function p(O,M,C){let P=(0,r.A)(C);return P=h(P,{shouldRenderEmojiAsText:!0}),(0,o.O)(O,M,P)}l(p,"convertClientQueryToAPIQuery");var A=e(389824),v=e(919273),E=e(158565),f=e(692232),g=e(724060);const y=(0,t.Ay)("Set the query in the request which is being edited",(O,M,C,P)=>{let{query:L,mode:x,module:F,page:V,encodedSearchString:B,preventQueryRewrite:D}=C;const S=M(),R=!!B,{shouldUseNavigate:w}=P(E.U);let Y=!1;w?Y=(0,g.A)(S,{viewType:f.D.Search}):Y=(0,s.A)(S)==="Psearch",O((0,n.p4)({windowId:v.I})),!R&&!Y&&O((0,a.Vx)({windowId:v.I})),O((0,a.Cr)({windowId:v.I})),O((0,a.Di)({windowId:v.I})),O((0,a.FS)({moduleType:"messages",loading:!0})),O((0,a.FS)({moduleType:"files",loading:!0})),O((0,a.FS)({moduleType:"canvases",loading:!0}));const Q=(0,c.vA)(S,L);return O((0,n.c3)({queryFilter:Q})),p(O,M,L).then(Z=>(O((0,n.Rm)({query:Z})),O((0,A.A)({query:Z,fetchSuggestions:!0,mode:x,module:F,page:V,preventQueryRewrite:D}))))});y.meta={name:"createThunk",key:"createThunksetEditableRequestQueryThenRequest",description:"Set the query in the request which is being edited"};const I=y},389824:(j,T,e)=>{"use strict";e.d(T,{A:()=>g});var t=e(674217),n=e(180491),s=e(140189),a=e(493284),c=e(779756),r=e(682520),o=e(440363),u=e(567740),m=e(17604),i=e(786071),d=e(848463),_=e(519213),h=e(529734),p=e(919273),A=e(619674),v=e(883518),E=e(518320);const f=(0,t.Ay)("Set a request from the editable request",(y,I,O)=>{let{query:M,fetchSuggestions:C=!0,module:P,mode:L,page:x,preventQueryRewrite:F=!1}=O;y((0,s.qo)({windowId:p.I}));const V=I(),B=M||(0,c.Uz)(V)||"",D=(0,r.Ay)({getState:I}),S=(0,c.nI)(V);let R;if(P){D.info(o.Y,`Retrying previous search for ${P} module`);const Y=(0,u.oL)(V,P)||{};R=y((0,a.u3)({page:x??Y.page,module:P,reason:"search-retry-module",context:(0,E.qU)(P)}))}else D.info(o.Y,"Starting new search"),y((0,s.p4)({windowId:p.I})),R=y((0,a.Ad)({query:B,reason:"search-new-query",fetchSuggestions:C,preventQueryRewrite:F}));const w=(0,m._t)(V);return w?(y((0,i.b)({value:w})),(0,h.cc)(V)?y((0,A.o)((0,v.oV)(w))):y((0,d.A)({id:"Psearch",routeParams:{searchQuery:w}})),y((0,_.WI)({view:P||"all",position:0})),B&&y((0,a.Q3)({query:B,type:L||"unknown"})),S&&y((0,s.aZ)({windowId:p.I})),R):n.S.reject(new Error("Error getting route param from search state"))});f.meta={name:"createThunk",key:"createThunksetRequestFromEditableRequest",description:"Set a request from the editable request"};const g=f},599913:(j,T,e)=>{"use strict";e.d(T,{_:()=>a});var t=e(674217),n=e(116171),s=e(919273);const a=(0,t.Ay)("Sets a new ID for the query session",c=>{c((0,n.Ko)({windowId:s.I}))});a.meta={name:"createThunk",key:"createThunkendQuerySession",description:"Sets a new ID for the query session"}},473607:(j,T,e)=>{"use strict";e.d(T,{u:()=>m});var t=e(674217),n=e(135713),s=e(519213),a=e(599913),c=e(116171),r=e(919273),o=e(682520),u=e(440363);const m=(0,t.Ay)("Sets a new ID for the search and query sessions",(i,d)=>{const _=(0,o.Ay)({getState:d}),h=(0,n._Z)(d(),"search_sort_reset")==="treatment";i((0,a._)()),i((0,c.gA)({windowId:r.I})),i((0,c.Z8)({windowId:r.I})),i((0,s.bZ)({windowId:r.I})),i((0,s.pQ)({windowId:r.I})),h&&i((0,s.Dl)({windowId:r.I})),_.info(u.Y,"Ending search session")});m.meta={name:"createThunk",key:"createThunkendSearchSession",description:"Sets a new ID for the search and query sessions"}},278302:(j,T,e)=>{"use strict";e.d(T,{s:()=>C,w:()=>P});var t=e(674217),n=e(567740),s=e(673473),a=e(57350),c=e(682520),r=e(440363),o=e(466779),u=e(389252),m=e(140189),i=e(519213),d=e(473607),_=e(599913),h=e(115333),p=e(752123),A=e(919273),v=e(786071);const E=(0,t.Ay)("Clear query session data on session expiration",L=>{L((0,i.LM)({querySessionTimeoutId:null})),L((0,_._)()),L((0,m.Pz)({windowId:A.I})),L((0,h.o2)({inputId:p.Jx.OMNISWITCHER})),L((0,i.Vx)({windowId:A.I}))});E.meta={name:"createThunk",key:"createThunkclearQuerySessionData",description:"Clear query session data on session expiration"};const f=(0,t.Ay)("Clear search session data on session expiration",L=>{L((0,i.jT)({sessionTimeoutId:null})),L((0,d.u)()),L((0,m.Pz)({windowId:A.I})),L((0,h.o2)({inputId:p.Jx.OMNISWITCHER})),L((0,i.Vx)({windowId:A.I})),L((0,v.q)({windowId:A.I}))});f.meta={name:"createThunk",key:"createThunkclearSearchSessionData",description:"Clear search session data on session expiration"};var g=e(482873),y=e(430954),I=e(890401),O=e(178249),M=e(529734);const C=(0,t.Ay)("Clear session timeouts on search mount",(L,x)=>{const F=x(),V=(0,M.cc)(F);(0,n.nj)(F)?((0,c.Ay)({getState:x}).info(r.Y,"Navigated to search page and session is already active: Clearing timer"),L((0,s.A)())):(0,a.G0)(F)||((0,c.Ay)({getState:x}).info(r.Y,"Navigated to search page without active session: Starting new session"),L((0,o.N)())),(0,n.a1)(F)||L((0,i.O3)({lastOpenMethod:"history"})),L((0,y.Ih)()),L((0,O.H)({focusKey:V?I.Ay.Search:I.Ay.PAGE_CONTENT_SEARCH_PAGE,forceFocus:!0}))});C.meta={name:"createThunk",key:"createThunkclearSessionTimeoutsOnSearchMount",description:"Clear session timeouts on search mount"};const P=(0,t.Ay)("Start session timeouts on search unmount",(L,x)=>{const F=x(),V=p.Jx.OMNISWITCHER;if(!(0,u.N)(F,V))return;(0,c.Ay)({getState:x}).info(r.Y,"Navigated from search page with active query: Starting timeout to clear session");const B=setTimeout(()=>{const S=x();(0,n.hz)(S)===B&&L(E())},g.R);L((0,i.LM)({querySessionTimeoutId:B}));const D=setTimeout(()=>{const S=x();(0,n.nj)(S)===D&&L(f())},g.l);L((0,i.jT)({sessionTimeoutId:D})),L((0,y.yW)()),L((0,i.O3)({lastOpenMethod:null}))});P.meta={name:"createThunk",key:"createThunkstartSessionTimeoutsOnSearchUnmount",description:"Start session timeouts on search unmount"}},673473:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(674217),n=e(567740),s=e(519213);const a=(0,t.Ay)("Reset session timeout ids when someone returns to their search",(r,o)=>{clearTimeout((0,n.nj)(o())),r((0,s.jT)({sessionTimeoutId:null})),r((0,s.LM)({querySessionTimeoutId:null}))});a.meta={name:"createThunk",key:"createThunkresetSessionTimeoutIds",description:"Reset session timeout ids when someone returns to their search"};const c=a},548050:(j,T,e)=>{"use strict";e.d(T,{_:()=>s});var t=e(915773),n=e(791834);const s=(0,t.Ay)(a=>{var c;return(c=(0,n.ax)(a,"is_new_human"))!==null&&c!==void 0?c:!1});s.meta={name:"createSelector",key:"createSelectorisNewHuman",description:a=>{var c;return(c=(0,n.ax)(a,"is_new_human"))!==null&&c!==void 0?c:!1}}},935630:(j,T,e)=>{"use strict";e.d(T,{i:()=>n});var t=e(152532);const n=(0,t.Ay)("Adds a list of salesforce orgs to the store");n.meta={name:"createAction",key:"createActionupsertSalesforceOrgs",description:"Adds a list of salesforce orgs to the store"}},76746:(j,T,e)=>{"use strict";e.d(T,{Ob:()=>E,jt:()=>i,lF:()=>f,qp:()=>p});var t=e(612104),n=e.n(t),s=e(873406),a=e(780076),c=e(454346),r=e(446632),o=e(449552),u=e(122498),m=e(935630);const i="SFDC_ORG_INFO_FETCH_ID";function d(g,y){(0,o.dispatchForTeamId)(g,(0,m.i)(y))}l(d,"upsertSalesforceOrgList");function _(g){return h.apply(this,arguments)}l(_,"fetchSalesforceOrgList");function h(){return h=(0,t.coroutine)(function*(g){const y=yield(0,o.dispatchForTeamId)(g,(0,u.k)({reason:"sfdc-org-info-conditional-fetch"}));return[{id:i,orgs:(0,c.A)(y.salesforce_orgs,"id")}]}),h.apply(this,arguments)}l(h,"_fetchSalesforceOrgList");function p(g){return _(g).then(y=>((0,o.dispatchForTeamId)(g,(0,m.i)(y)),y))}l(p,"fetchAndUpsertSalesforceOrgList");const A=(0,r.A)(()=>new s.Ay({fetch:p,metricsName:"sfdc-org-info",storeKey:"sfdcOrgInfo"})),v=(0,r.A)(()=>new a.Ay({fetch:_,upsertNonExistent:d,upsertKnown:(g,y)=>{d(g,y),A().markObjectsAsFresh(g,[i])}})),E=l(g=>{A().maybeRefetch(g,i)},"maybeRefetchSalesforceOrgs"),f=l(g=>v().fetchObjectWithId(g,i),"fetchSalesforceOrgs")},2551:(j,T,e)=>{"use strict";e.d(T,{V:()=>i,k:()=>m});var t=e(915773),n=e(579026),s=e(881805),a=e(56185),c=e(76746);const r=Object.freeze((0,a.WQ)("INVALID_ORG_ID")),o=Object.freeze((0,a.WQ)("MISSING_ORG_ID"));function u(d){function _(h,p){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const v=(0,s.JY)(h)||"",E=h.sfdcOrgInfo.orgInfos[c.jt];return E?((0,c.Ob)(v),p&&(0,a.uz)(E)&&d(E.orgs,p)||o):A?p?(0,c.lF)(v):r:null}return l(_,"getSalesforceOrgInfoInner"),(0,t.Ay)(_)}l(u,"createSalesforceOrgInfoSelector");const m=u((d,_)=>d[_]),i=u((d,_)=>Object.values(d).find(h=>(0,n.Ay)(h.instance_url).hostname===_))},86328:(j,T,e)=>{"use strict";e.d(T,{ds:()=>r,fG:()=>c,m6:()=>a,m8:()=>n,rm:()=>s,st:()=>o,vU:()=>m,wr:()=>u});var t=e(152532);const n=(0,t.Ay)("Upserts inbound shared workspace invitations that are pending");n.meta={name:"createAction",key:"createActionupsertPendingInboundSharedWorkspaceInvitations",description:"Upserts inbound shared workspace invitations that are pending"};const s=(0,t.Ay)("Upserts outbound shared workspace invitations that are pending");s.meta={name:"createAction",key:"createActionupsertPendingOutboundSharedWorkspaceInvitations",description:"Upserts outbound shared workspace invitations that are pending"};const a=(0,t.Ay)("Upserts all inbound shared workspace invitations");a.meta={name:"createAction",key:"createActionupsertAllInboundSharedWorkspaceInvitations",description:"Upserts all inbound shared workspace invitations"};const c=(0,t.Ay)("Upserts all outbound shared workspace invitations");c.meta={name:"createAction",key:"createActionupsertAllOutboundSharedWorkspaceInvitations",description:"Upserts all outbound shared workspace invitations"};const r=(0,t.Ay)("Upserts a SharedWorkspace Invite");r.meta={name:"createAction",key:"createActionupsertSharedWorkspaceInvite",description:"Upserts a SharedWorkspace Invite"};const o=(0,t.Ay)("Upserts a SharedWorkspace Invite that is pending");o.meta={name:"createAction",key:"createActionupsertPendingSharedWorkspaceInvite",description:"Upserts a SharedWorkspace Invite that is pending"};const u=(0,t.Ay)("Removes a Shared Workspace Invite");u.meta={name:"createAction",key:"createActionremoveSharedWorkspaceInvite",description:"Removes a Shared Workspace Invite"};const m=(0,t.Ay)("Removes a Shared Workspace Invite that is pending");m.meta={name:"createAction",key:"createActionremovePendingSharedWorkspaceInvite",description:"Removes a Shared Workspace Invite that is pending"}},500802:(j,T,e)=>{"use strict";e.d(T,{A:()=>d});var t=e(612104),n=e.n(t),s=e(674217),a=e(495717),c=e(180491),r=e(751875),o=e(507998),u=e(86328),m=e(569191);const i=(0,s.Ay)("Fetch and reset the results for pending all shared connection invites",function(){var _=(0,t.coroutine)(function*(h,p,A){let{reason:v}=A;if(!(0,a.zp)(p()))return c.S.resolve({inboundConnectInvites:[],outboundConnectInvites:[]});let f,g;if((0,a.iQ)(p())){const O=yield h((0,o.M)({reason:v,limit:100,state:"pending"}));O!=null&&O.invites&&(h((0,u.m8)({pendingInboundSharedWorkspaceInvites:O.invites})),f=O.invites)}if((0,m.YM)(p())){const O=yield h((0,r.N)({reason:v,limit:100,state:"pending"}));O!=null&&O.invites&&(h((0,u.rm)({pendingOutboundSharedWorkspaceInvites:O.invites})),g=O.invites)}return{inboundConnectInvites:f||[],outboundConnectInvites:g||[]}});return function(h,p,A){return _.apply(this,arguments)}}());i.meta={name:"createThunk",key:"createThunkfetchAndResetAllPendingSharedWorkspaceInvites",description:"Fetch and reset the results for pending all shared connection invites"};const d=i},432836:(j,T,e)=>{"use strict";e.d(T,{A:()=>d});var t=e(612104),n=e.n(t),s=e(674217),a=e(495717),c=e(180491),r=e(751875),o=e(507998),u=e(86328),m=e(569191);const i=(0,s.Ay)("Fetch and reset the results for all shared connection invites",function(){var _=(0,t.coroutine)(function*(h,p,A){let{reason:v}=A;if(!(0,a.zp)(p()))return c.S.resolve({inboundConnectInvites:[],outboundConnectInvites:[]});let f,g;if((0,a.iQ)(p())){const O=yield h((0,o.M)({reason:v,limit:100}));O!=null&&O.invites&&(h((0,u.m6)({inboundSharedWorkspaceInvites:O.invites})),f=O.invites)}if((0,m.YM)(p())){const O=yield h((0,r.N)({reason:v,limit:100}));O!=null&&O.invites&&(h((0,u.fG)({outboundSharedWorkspaceInvites:O.invites})),g=O.invites)}return{inboundConnectInvites:f||[],outboundConnectInvites:g||[]}});return function(h,p,A){return _.apply(this,arguments)}}());i.meta={name:"createThunk",key:"createThunkfetchAndResetAllSharedWorkspaceInvites",description:"Fetch and reset the results for all shared connection invites"};const d=i},601494:(j,T,e)=>{"use strict";e.d(T,{AD:()=>s,VZ:()=>n,dr:()=>t});const t="summaryDetailListener",n="channelCanvasAutoOpen",s=10},193611:(j,T,e)=>{"use strict";e.d(T,{C7:()=>n,Ln:()=>a,Mb:()=>s,UM:()=>c});var t=e(152532);const n=(0,t.Ay)("Have we already sent boot metrics");n.meta={name:"createAction",key:"createActionsetShouldLogAppBootMetrics",description:"Have we already sent boot metrics"};const s=(0,t.Ay)("Should we log team switch metrics");s.meta={name:"createAction",key:"createActionsetShouldLogTeamSwitchMetrics",description:"Should we log team switch metrics"};const a=(0,t.Ay)("Set whether we should continue logging time to visible metrics");a.meta={name:"createAction",key:"createActionsetShouldLogTTVMetrics",description:"Set whether we should continue logging time to visible metrics"};const c=(0,t.Ay)("Set whether we should continue logging time to usable metrics");c.meta={name:"createAction",key:"createActionsetShouldLogTTUMetrics",description:"Set whether we should continue logging time to usable metrics"}},448031:(j,T,e)=>{"use strict";e.d(T,{a:()=>h});var t=e(790973),n=e(545),s=e(905582),a=e(41343),c=e(286942),r=e(286452),o=e(23514),u=e(297287),m=e(180491),i=e(674217),d=e(544555),_=e(840122);const h=(0,i.Ay)("gets thread replies from the API",(p,A,v)=>{const{channelId:E,threadTs:f,oldest:g,limit:y}=v;let I=v.latest;g===I&&I===v.threadTs&&(I=null);const O=(0,d.Iu)(E,f);return g&&I?m.S.all([p((0,_.$b)({channelId:E,threadTs:f,latest:I,limit:y})),p((0,_.$b)({channelId:E,threadTs:f,oldest:g,limit:y}))]).then(M=>{let[C,P]=M;const L=(0,t.A)(C.msgs,{ts:f})||(0,t.A)(P.msgs,{ts:f}),x=(0,n.A)(C.msgs,{ts:f}),F=(0,n.A)(P.msgs,{ts:f}),V=C.deleted,B=P.deleted,D=(0,s.A)(x.concat(F),"ts"),S=(0,a.A)((0,c.A)(V,B));!C.hasMore&&L&&D.unshift(L);const R=D.map(w=>w.ts);return p((0,u.A)({msgs:D,channelId:O,hasMore:{hasMoreStart:C.hasMore,hasMoreEnd:P.hasMore},oldest:(0,r.A)([g,(0,r.A)(R)]),latest:(0,o.A)([I,(0,o.A)(R)]),deleted:S})),{msgs:D}}):p((0,_.$b)({channelId:E,threadTs:f,oldest:g,latest:I,limit:y})).then(function(){let{msgs:M,deleted:C,hasMore:P}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const L=I&&!P||g===f||I===f||!g&&!I&&!P;let x=M;L||(x=(0,n.A)(M,{ts:f}));let F=P;!g&&!I&&(F={hasMoreStart:P,hasMoreEnd:!1}),p((0,u.A)({msgs:x,channelId:O,hasMore:F,oldest:g,latest:I,deleted:C}));const V=(0,t.A)(M,{ts:f});return V&&g===f&&p((0,u.A)({msgs:[V],channelId:O,hasMore:!1,latest:f})),{msgs:x}})});h.meta={name:"createThunk",key:"createThunkrequestReplies",description:"gets thread replies from the API"}},984836:(j,T,e)=>{"use strict";e.d(T,{a:()=>h});var t=e(790973),n=e(545),s=e(905582),a=e(41343),c=e(286942),r=e(286452),o=e(23514),u=e(297287),m=e(180491),i=e(674217),d=e(544555),_=e(840122);const h=(0,i.Ay)("gets thread replies from the API",(p,A,v)=>{const{channelId:E,threadTs:f,oldest:g,limit:y}=v;let I=v.latest;g===I&&I===v.threadTs&&(I=null);const O=(0,d.Iu)(E,f);return g&&I?m.S.all([p((0,_.$b)({channelId:E,threadTs:f,latest:I,limit:y})),p((0,_.$b)({channelId:E,threadTs:f,oldest:g,limit:y}))]).then(M=>{let[C,P]=M;const L=(0,t.A)(C.msgs,{ts:f})||(0,t.A)(P.msgs,{ts:f}),x=(0,n.A)(C.msgs,{ts:f}),F=(0,n.A)(P.msgs,{ts:f}),V=C.deleted,B=P.deleted,D=(0,s.A)(x.concat(F),"ts"),S=(0,a.A)((0,c.A)(V,B));!C.hasMore&&L&&D.unshift(L);const R=D.map(w=>w.ts);return p((0,u.A)({msgs:D,channelId:O,hasMore:{hasMoreStart:C.hasMore,hasMoreEnd:P.hasMore},oldest:(0,r.A)([g,(0,r.A)(R)]),latest:(0,o.A)([I,(0,o.A)(R)]),deleted:S})),{msgs:D}}):p((0,_.$b)({channelId:E,threadTs:f,oldest:g,latest:I,limit:y})).then(function(){let{msgs:M,deleted:C,hasMore:P}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const L=I&&!P||g===f||I===f||!g&&!I&&!P;let x=M;L||(x=(0,n.A)(M,{ts:f}));let F=P;!g&&!I&&(F={hasMoreStart:P,hasMoreEnd:!1}),p((0,u.A)({msgs:x,channelId:O,hasMore:F,oldest:g,latest:I,deleted:C}));const V=(0,t.A)(M,{ts:f});return V&&g===f&&p((0,u.A)({msgs:[V],channelId:O,hasMore:!1,latest:f})),{msgs:x}})});h.meta={name:"createThunk",key:"createThunkrequestReplies",description:"gets thread replies from the API"}},900431:(j,T,e)=>{"use strict";e.d(T,{_:()=>u});var t=e(292049),n=e(250791),s=e(194092),a=e(124054),c=e(674217),r=e(885850),o=e(601994);const u=(0,c.Ay)("Update the unread count for the all threads view",(m,i,d)=>{let{threadsHasUnreads:_,threadsUnreadCountByChannel:h,threadsMentionCountByChannel:p,threadsLastUpdatedTimestamp:A}=d;const v=(0,t.A)(p)?{}:p,E=i(),f=(0,n.A)((0,s.A)(v,(y,I)=>{const O=(0,r.OL)(E,I);return(0,a.WK)(E,O)&&!(0,a.fA)(E,O)}));let g=0;h?g=(0,n.A)((0,s.A)(h,(y,I)=>{const O=(0,r.OL)(E,I);return(0,a.WK)(E,O)})):g=_?1:0,m((0,o.LI)({threadsUnreadCount:g,threadsUnreadCountByChannel:h,threadsMentionCount:f,threadsMentionCountByChannel:v,threadsLastUpdatedTimestamp:A,suppressThreads:(0,a.dQ)(E)}))});u.meta={name:"createThunk",key:"createThunkthreadsUnreadCountChanged",description:"Update the unread count for the all threads view"}},103413:(j,T,e)=>{"use strict";e.d(T,{g:()=>n,y:()=>s});var t=e(152532);const n=(0,t.Ay)("Update unread counts for the specified user alert types");n.meta={name:"createAction",key:"createActionupdateUserAlertsUnreadCount",description:"Update unread counts for the specified user alert types"};const s=(0,t.Ay)("Reset the user alerts store to the specified alert counts map");s.meta={name:"createAction",key:"createActionresetAllUserAlertsUnreadCounts",description:"Reset the user alerts store to the specified alert counts map"}},577741:(j,T,e)=>{"use strict";e.d(T,{b:()=>o,z:()=>u});var t=e(180491),n=e(383150),s=e(70156),a=e(674217),c=e(33173),r=e(212628);const o=(0,a.Ay)("Fetches and updates user interactions for the given types and subtypes",(m,i,d)=>{const _=i();let h;if(d.useCache){var p;const v=(p=d.cacheFilter)!==null&&p!==void 0?p:r.Tn;h=d.interactions.filter(E=>!v(_,E.component,E.type))}else h=d.interactions;if(h.length===0)return t.S.resolve();const A={components:h.map(v=>v.component),types:h.map(v=>v.type),reason:d.reason};return m((0,n.l)(A)).then(v=>{m((0,c.kB)(h)),v.interactions.length&&m((0,c.po)(v.interactions))})});o.meta={name:"createThunk",key:"createThunkloadUserInteractions",description:"Fetches and updates user interactions for the given types and subtypes"};const u=(0,a.Ay)("Record that a user has taken an action on a UI component",(m,i,d)=>(m((0,c.tp)(d)),m((0,s.H)(d))));u.meta={name:"createThunk",key:"createThunkrecordUserInteraction",description:"Record that a user has taken an action on a UI component"}},234065:(j,T,e)=>{"use strict";e.d(T,{A:()=>i});var t=e(498916),n=e(16700),s=e(373314),a=e(689798),c=e(343290),r=e(119501);const o={persistenceEnabled:!1,storeKey:"viewLayout"},u={sidebarWidthIntent:void 0,sidebarWidthMode:c.tR.AUTO,sidebarWideWidthIntent:void 0,sidebarWideWidthMode:c.tR.AUTO,sidebarExtraWideWidthIntent:void 0,sidebarExtraWideWidthMode:c.tR.AUTO,secondaryWidthIntent:void 0,secondaryWidthMode:c.tR.AUTO,splitWidthIntent:void 0,splitWidthMode:c.tR.AUTO,isSidebarVisible:!0,isSidebarVisibleWhenFloating:!1,isWorkspaceSwitcherVisible:!1,isCompactModeEnabled:!1};try{u.sidebarWidthIntent=(0,r.W6)(n.ke)||void 0,u.sidebarWideWidthIntent=(0,r.W6)(n.u1)||void 0,u.sidebarExtraWideWidthIntent=(0,r.W6)(n.jt)||void 0,u.secondaryWidthIntent=(0,r.W6)(n.gN)||void 0,u.sidebarWidthMode=(0,r.W6)(n.ts)||c.tR.AUTO,u.splitWidthIntent=(0,r.W6)(n.qD)||void 0,u.splitWidthMode=(0,r.W6)(n.$D)||c.tR.AUTO,u.sidebarWidthMode=(0,r.W6)(n.ts)||c.tR.AUTO,u.sidebarWideWidthMode=(0,r.W6)(n.r1)||c.tR.AUTO,u.sidebarExtraWideWidthMode=(0,r.W6)(n.OR)||c.tR.AUTO,u.secondaryWidthMode=(0,r.W6)(n.Ts)||c.tR.AUTO;const d=(0,r.W6)(n.jG);u.isSidebarVisible=(0,t.A)(d)?d:!0;const _=(0,r.W6)(n.WU);u.isWorkspaceSwitcherVisible=(0,t.A)(_)?_:!1;const h=(0,r.W6)(n.RC);u.isCompactModeEnabled=(0,t.A)(h)?h:!1}catch{}const i=(0,s.Ay)({},u,o).on(a.SP,(d,_)=>{let{sidebarWidthIntent:h,sidebarWidthMode:p}=_;return{...d,sidebarWidthIntent:h,sidebarWidthMode:p}}).on(a.hk,(d,_)=>{let{sidebarWideWidthIntent:h,sidebarWideWidthMode:p}=_;return{...d,sidebarWideWidthIntent:h,sidebarWideWidthMode:p}}).on(a.$t,(d,_)=>{let{sidebarExtraWideWidthIntent:h,sidebarExtraWideWidthMode:p}=_;return{...d,sidebarExtraWideWidthIntent:h,sidebarExtraWideWidthMode:p}}).on(a.ie,(d,_)=>{let{secondaryWidthIntent:h,secondaryWidthMode:p}=_;return{...d,secondaryWidthIntent:h,secondaryWidthMode:p}}).on(a.yL,(d,_)=>{let{splitWidthIntent:h,splitWidthMode:p}=_;return{...d,splitWidthIntent:h,splitWidthMode:p}}).on(a.KY,(d,_)=>({...d,isSidebarVisible:_})).on(a.Eo,(d,_)=>({...d,isSidebarVisibleWhenFloating:_})).on(a.mV,(d,_)=>({...d,isWorkspaceSwitcherVisible:_})).on(a.Fe,(d,_)=>({...d,isCompactModeEnabled:_}))},545878:(j,T,e)=>{"use strict";e.d(T,{F:()=>r});var t=e(16700),n=e(674217),s=e(449552),a=e(689798),c=e(119501);const r=(0,n.Ay)("Sets whether or not the sidebar is part of the grid layout at normal window sizes",(o,u,m)=>{(0,c.q9)(t.jG,m),o((0,a.KY)(m)),(0,s.dispatchForClientStore)((0,a.KY)(m))});r.meta={name:"createThunk",key:"createThunksetIsSidebarVisible",description:"Sets whether or not the sidebar is part of the grid layout at normal window sizes"}},269367:(j,T,e)=>{"use strict";e.d(T,{J:()=>r});var t=e(16700),n=e(674217),s=e(689798),a=e(449552),c=e(119501);const r=(0,n.Ay)("Set the user-specified secondary width and mode",(o,u,m)=>{let{secondaryWidthIntent:i,secondaryWidthMode:d}=m;(0,c.q9)(t.gN,i),(0,c.q9)(t.Ts,d),o((0,s.ie)({secondaryWidthIntent:i,secondaryWidthMode:d})),(0,a.dispatchForClientStore)((0,s.ie)({secondaryWidthIntent:i,secondaryWidthMode:d}))});r.meta={name:"createThunk",key:"createThunksetSecondaryColumn",description:"Set the user-specified secondary width and mode"}},658381:(j,T,e)=>{"use strict";e.d(T,{R:()=>r});var t=e(16700),n=e(674217),s=e(689798),a=e(449552),c=e(119501);const r=(0,n.Ay)("Set the user-specified sidebar width and mode",(o,u,m)=>{let{sidebarWidthIntent:i,sidebarWidthMode:d}=m;(0,c.q9)(t.ke,i),(0,c.q9)(t.ts,d),o((0,s.SP)({sidebarWidthIntent:i,sidebarWidthMode:d})),(0,a.dispatchForClientStore)((0,s.SP)({sidebarWidthIntent:i,sidebarWidthMode:d}))});r.meta={name:"createThunk",key:"createThunksetSidebarColumn",description:"Set the user-specified sidebar width and mode"}},923296:(j,T,e)=>{"use strict";e.d(T,{a:()=>r});var t=e(16700),n=e(674217),s=e(689798),a=e(449552),c=e(119501);const r=(0,n.Ay)("Set the user-specified extra wide sidebar width and mode",(o,u,m)=>{let{sidebarExtraWideWidthIntent:i,sidebarExtraWideWidthMode:d}=m;(0,c.q9)(t.jt,i),(0,c.q9)(t.OR,d),o((0,s.$t)({sidebarExtraWideWidthIntent:i,sidebarExtraWideWidthMode:d})),(0,a.dispatchForClientStore)((0,s.$t)({sidebarExtraWideWidthIntent:i,sidebarExtraWideWidthMode:d}))});r.meta={name:"createThunk",key:"createThunksetSidebarExtraWideColumn",description:"Set the user-specified extra wide sidebar width and mode"}},333279:(j,T,e)=>{"use strict";e.d(T,{q:()=>r});var t=e(16700),n=e(674217),s=e(689798),a=e(449552),c=e(119501);const r=(0,n.Ay)("Set the user-specified wide sidebar width and mode",(o,u,m)=>{let{sidebarWideWidthIntent:i,sidebarWideWidthMode:d}=m;(0,c.q9)(t.u1,i),(0,c.q9)(t.r1,d),o((0,s.hk)({sidebarWideWidthIntent:i,sidebarWideWidthMode:d})),(0,a.dispatchForClientStore)((0,s.hk)({sidebarWideWidthIntent:i,sidebarWideWidthMode:d}))});r.meta={name:"createThunk",key:"createThunksetSidebarWideColumn",description:"Set the user-specified wide sidebar width and mode"}},460586:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(774165),n=e(190905);const s=(0,t.Mz)((c,r)=>{let{viewType:o}=r;const u=(0,n.e6)(c),m=(0,n.Le)(c,{tab:u});return m?Object.keys(m).some(_=>{var h;return((h=m[_])===null||h===void 0?void 0:h.viewType)===o}):!1});s.meta={name:"createSelector",key:"createSelectorisViewTypeVisibleInMainWindow",description:(c,r)=>{let{viewType:o}=r;const u=(0,n.e6)(c),m=(0,n.Le)(c,{tab:u});return m?Object.keys(m).some(_=>{var h;return((h=m[_])===null||h===void 0?void 0:h.viewType)===o}):!1}};const a=s},724060:(j,T,e)=>{"use strict";e.d(T,{A:()=>o});var t=e(774165),n=e(190905);const s=(0,t.Mz)((u,m)=>{let{viewType:i}=m;const d=(0,n.zi)(u);return Object.keys(d).map(A=>d[A]).some(A=>Object.keys(A).some(E=>{var f;return((f=A[E])===null||f===void 0?void 0:f.viewType)===i}))});s.meta={name:"createSelector",key:"createSelectorisViewTypeVisibleInChildWindow",description:(u,m)=>{let{viewType:i}=m;const d=(0,n.zi)(u);return Object.keys(d).map(A=>d[A]).some(A=>Object.keys(A).some(E=>{var f;return((f=A[E])===null||f===void 0?void 0:f.viewType)===i}))}};const a=s;var c=e(460586);const r=(0,t.Mz)((u,m)=>{let{viewType:i}=m;return a(u,{viewType:i})||(0,c.A)(u,{viewType:i})});r.meta={name:"createSelector",key:"createSelectorisViewTypeVisible",description:(u,m)=>{let{viewType:i}=m;return a(u,{viewType:i})||(0,c.A)(u,{viewType:i})}};const o=r},204505:(j,T,e)=>{"use strict";e.d(T,{A:()=>d});var t=e(692232),n=e(687695),s=e(612204),a=e(43335),c=e(756216),r=e(981927),o=e(389375),u=e(455967);const m={activity:t.D.ActivityList,threads:t.D.Threads,rimeto_profile:t.D.Profile,files:t.D.FileDetails,help:t.D.Help,shortcuts:t.D.KeyboardShortcuts,whats_new:t.D.WhatsNew,feedback:t.D.Feedback,comment_thread:t.D.QuipCommentThread,comment_stream:t.D.QuipCommentStream,activity_history:t.D.QuipActivityHistory,quip_automations_overview:t.D.QuipAutomationsOverview,channel_canvas:t.D.ChannelCanvas,thread:t.D.Thread,ai_summary_details:t.D.AiSummaryDetails,search_summary:t.D.SearchSummary,channel_files:t.D.ChannelFiles,ai_app:t.D.AiApp,workflow_details:t.D.WorkflowDetails},d=l(_=>_?(0,n.A)(_)?t.D.AppSpace:(0,s.Ay)(_)?t.D.Quip:(0,a.A)(_)?t.D.Channel:(0,o.T)(_)?(0,u.F8)(_):_&&_[0]==="V"?t.D.Threads:(0,c.A)(_)?t.D.Thread:(0,r.A)(_)?t.D.UserGroup:m[_]?m[_]:t.D.Unknown:t.D.Unknown,"convertIdToViewType")},359188:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>v,cB:()=>h,ds:()=>_,w9:()=>p,wg:()=>d});var t=e(566401),n=e(720903),s=e(879595),a=e(54930),c=e(373314),r=e(127225),o=e(293335);const u=100,m={},i={persistenceEnabled:!1,storeKey:"windowHistory"};function d(E){let{windowState:f,entry:g}=E;const y=f?f.stack:[],I=(0,t.A)(y)?null:1;return{stack:[(0,n.A)(g)].concat(y).slice(0,u),index:0,previousIndex:I}}l(d,"handlePushHistoryEntryForWindow");function _(E){let{windowState:f,index:g,previousIndex:y}=E;return{stack:f.stack,index:g,previousIndex:y}}l(_,"handleUpdateIndexForWindow");function h(E){let{windowState:f,index:g}=E;return{stack:(0,s.A)(f.stack,g),index:f.index,previousIndex:null}}l(h,"handlePopHistoryAboveIndexForWindow");function p(E){let{windowState:f,entry:g}=E;const y=[...f.stack];return y[f.index]=(0,n.A)(g),{...f,stack:y}}l(p,"handleReplaceCurrentHistoryEntryForWindowInternal");const v=(0,c.Ay)({},m,i).on(o.xU,(E,f)=>{let{windowId:g,entry:y}=f;return!g||!y?E:{...E,[g]:d({windowState:E[g],entry:y})}}).on(o.aV,(E,f)=>{let{windowId:g}=f;return(0,a.A)(E,g)}).on(o.Nr,(E,f)=>{let{windowId:g,index:y,previousIndex:I}=f;return{...E,[g]:_({windowState:E[g],index:y,previousIndex:I})}}).on(o.o1,(E,f)=>{let{windowId:g,viewSet:y}=f;return{...E,[g]:{stack:[(0,n.A)(y)],index:0,previousIndex:null}}}).on(o.s0,(E,f)=>{let{windowId:g,index:y}=f;return E[g]?{...E,[g]:h({windowState:E[g],index:y})}:E}).on(o.iV,(E,f)=>{let{windowId:g,entry:y}=f;return E[g]?{...E,[g]:p({windowState:E[g],entry:y})}:E}).on(o.$Z,(E,f)=>{let{windowId:g,viewParams:y,index:I}=f;if(!E[g])return E;const M=[...E[g]?E[g].stack:[]];if(!M[I])return E;const C=(0,n.A)(M[I]),P=C[r.mq.Primary];if(!(P!=null&&P.id))return E;const L={...C,[r.mq.Primary]:{...P,params:{...P.params,...y}}};return M[I]=L,{...E,[g]:{...E[g],stack:M}}})},476897:(j,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(373314),n=e(602934),s=e(127225);const a={[s.N2]:{isFocused:void 0,isUnloading:!1,timeCreation:0,timeLastBlurEvent:0,timeLastFocusEvent:0}},r=(0,t.Ay)({},a,{storeKey:"window",persistenceEnabled:!1}).on(n._p,(o,u)=>{let{windowId:m=s.N2,...i}=u;if(!o[m])return o;const d={[s.N2]:{...o[s.N2]}};return d[m]={...o[m],...i},Reflect.ownKeys(o).forEach(_=>{_!==m&&i.isFocused&&(d[_]={...o[_],isFocused:!1})}),{...o,...d}}).on(n.w3,(o,u)=>{let{windowId:m=s.N2,...i}=u;return o[m]?{...o,[m]:{...o[m],isUnloading:i.isUnloading}}:o}).on(n.d1,(o,u)=>{let{windowId:m=s.N2,...i}=u;return{...o,[m]:{...o[m],...i,windowId:m}}}).on(n.pb,(o,u)=>{let{windowId:m=s.N2,...i}=u;return o[m]?{...o,[m]:{...o[m],bootType:i.bootType}}:o}).on(n.jO,(o,u)=>{let{windowId:m}=u;if(m===s.N2||!o[m])return o;const i={...o};return delete i[m],i}).on(n.NV,(o,u)=>{let{windowId:m,viewport:i}=u;return o[m]?{...o,[m]:{...o[m],viewport:i}}:o})},117776:(j,T,e)=>{"use strict";e.d(T,{FO:()=>a,KY:()=>c,SP:()=>n,iJ:()=>o,lT:()=>s,vm:()=>r});var t=e(152532);const n=(0,t.Ay)("Set the user-specified sidebar width and mode (use setSidebarColumn instead)");n.meta={name:"createAction",key:"createActionsetSidebarColumnInternal",description:"Set the user-specified sidebar width and mode (use setSidebarColumn instead)"};const s=(0,t.Ay)("Set the user-specified sidebar width and mode (use setInspectorColumn instead)");s.meta={name:"createAction",key:"createActionsetInspectorColumnInternal",description:"Set the user-specified sidebar width and mode (use setInspectorColumn instead)"};const a=(0,t.Ay)("Sets whether or not the team sidebar is part of the grid layout (use setIsTeamSidebarVisible instead)");a.meta={name:"createAction",key:"createActionsetIsTeamSidebarVisibleInternal",description:"Sets whether or not the team sidebar is part of the grid layout (use setIsTeamSidebarVisible instead)"};const c=(0,t.Ay)("Sets whether or not the sidebar is part of the grid layout at normal window sizes (use setIsSidebarVisible instead)");c.meta={name:"createAction",key:"createActionsetIsSidebarVisibleInternal",description:"Sets whether or not the sidebar is part of the grid layout at normal window sizes (use setIsSidebarVisible instead)"};const r=(0,t.Ay)("Sets whether or not the sidebar is currently visible when in collapsed mode");r.meta={name:"createAction",key:"createActionsetIsSidebarVisibleWhenFloating",description:"Sets whether or not the sidebar is currently visible when in collapsed mode"};const o=(0,t.Ay)("Sets whether the user prefers a responsive sidebar");o.meta={name:"createAction",key:"createActionsetUserPrefersResponsiveSidebarInternal",description:"Sets whether the user prefers a responsive sidebar"}},963863:(j,T,e)=>{"use strict";e.d(T,{A:()=>m});var t=e(498916),n=e(343290),s=e(373314),a=e(117776),c=e(119501);const r={persistenceEnabled:!1,storeKey:"workspaceLayout"},o={inspectorWidthIntent:null,inspectorWidthMode:n.tR.AUTO,isSidebarVisible:!0,isSidebarVisibleWhenFloating:!1,isTeamSidebarVisible:!0,sidebarWidthIntent:null,sidebarWidthMode:n.tR.AUTO,userPrefersResponsiveSidebar:!0};try{o.sidebarWidthIntent=(0,c.W6)(n.ke)||null,o.inspectorWidthIntent=(0,c.W6)(n.j0)||null,o.sidebarWidthMode=(0,c.W6)(n.ts)||"auto",o.inspectorWidthMode=(0,c.W6)(n.mu)||"auto";const i=(0,c.W6)(n.jG);o.isSidebarVisible=(0,t.A)(i)?i:!0;const d=(0,c.W6)(n.Xg);o.isTeamSidebarVisible=(0,t.A)(d)?d:!0;const _=(0,c.W6)(n.Lb);o.userPrefersResponsiveSidebar=(0,t.A)(_)?_:!0}catch{}const m=(0,s.Ay)({},o,r).on(a.SP,(i,d)=>{let{sidebarWidthIntent:_,sidebarWidthMode:h}=d;return{...i,sidebarWidthIntent:_,sidebarWidthMode:h}}).on(a.lT,(i,d)=>{let{inspectorWidthIntent:_,inspectorWidthMode:h}=d;return{...i,inspectorWidthIntent:_,inspectorWidthMode:h}}).on(a.KY,(i,d)=>({...i,isSidebarVisible:d})).on(a.vm,(i,d)=>({...i,isSidebarVisibleWhenFloating:d})).on(a.FO,(i,d)=>({...i,isTeamSidebarVisible:d})).on(a.iJ,(i,d)=>({...i,userPrefersResponsiveSidebar:d}))},745677:(j,T,e)=>{"use strict";e.d(T,{In:()=>u,Vo:()=>r,r8:()=>o,xx:()=>m});var t=e(915773);const n=(0,t.Ay)(i=>{var d;return i==null||(d=i.workspaceLayout)===null||d===void 0?void 0:d.sidebarWidthIntent});n.meta={name:"createSelector",key:"createSelectorgetSidebarWidthIntent",description:i=>{var d;return i==null||(d=i.workspaceLayout)===null||d===void 0?void 0:d.sidebarWidthIntent}};const s=(0,t.Ay)(i=>{var d;return i==null||(d=i.workspaceLayout)===null||d===void 0?void 0:d.sidebarWidthMode});s.meta={name:"createSelector",key:"createSelectorgetSidebarWidthMode",description:i=>{var d;return i==null||(d=i.workspaceLayout)===null||d===void 0?void 0:d.sidebarWidthMode}};const a=(0,t.Ay)(i=>{var d;return i==null||(d=i.workspaceLayout)===null||d===void 0?void 0:d.inspectorWidthIntent});a.meta={name:"createSelector",key:"createSelectorgetInspectorWidthIntent",description:i=>{var d;return i==null||(d=i.workspaceLayout)===null||d===void 0?void 0:d.inspectorWidthIntent}};const c=(0,t.Ay)(i=>{var d;return i==null||(d=i.workspaceLayout)===null||d===void 0?void 0:d.inspectorWidthMode});c.meta={name:"createSelector",key:"createSelectorgetInspectorWidthMode",description:i=>{var d;return i==null||(d=i.workspaceLayout)===null||d===void 0?void 0:d.inspectorWidthMode}};const r=(0,t.Ay)(i=>{var d;return i==null||(d=i.workspaceLayout)===null||d===void 0?void 0:d.isSidebarVisible});r.meta={name:"createSelector",key:"createSelectorgetIsSidebarVisible",description:i=>{var d;return i==null||(d=i.workspaceLayout)===null||d===void 0?void 0:d.isSidebarVisible}};const o=(0,t.Ay)(i=>{var d;return i==null||(d=i.workspaceLayout)===null||d===void 0?void 0:d.isSidebarVisibleWhenFloating});o.meta={name:"createSelector",key:"createSelectorgetIsSidebarVisibleWhenFloating",description:i=>{var d;return i==null||(d=i.workspaceLayout)===null||d===void 0?void 0:d.isSidebarVisibleWhenFloating}};const u=(0,t.Ay)(i=>{var d;return i==null||(d=i.workspaceLayout)===null||d===void 0?void 0:d.isTeamSidebarVisible});u.meta={name:"createSelector",key:"createSelectorgetIsTeamSidebarVisible",description:i=>{var d;return i==null||(d=i.workspaceLayout)===null||d===void 0?void 0:d.isTeamSidebarVisible}};const m=(0,t.Ay)(i=>{var d;return i==null||(d=i.workspaceLayout)===null||d===void 0?void 0:d.userPrefersResponsiveSidebar});m.meta={name:"createSelector",key:"createSelectorgetUserPrefersResponsiveSidebar",description:i=>{var d;return i==null||(d=i.workspaceLayout)===null||d===void 0?void 0:d.userPrefersResponsiveSidebar}}},848463:(j,T,e)=>{"use strict";e.d(T,{A:()=>$});var t=e(180491),n=e(742531),s=e(698448),a=e(566401),c=e(596034),r=e(674217),o=e(324949),u=e(687695),m=e(885850),i=e(437556),d=e(816165),_=e(682520),h=e(43335),p=e(325846),A=e(271338),v=e(710596),E=e(658160),f=e(396386),g=e(23219),y=e(659973),I=e(727140),O=e(455967),M=e(962597),C=e(752123),P=e(70433),L=e(881805),x=e(877752),F=e(449552),V=e(193074),B=e(344606),D=e(417250),S=e(449388),R=e(612204),w=e(909440),Y=e(756216),Q=e(237163),Z=e(683525),ee=e(862838),_e=e(615571),Ee=e(32032),G=e(35397);function Ae(re){switch(re){case G.r.APP:return G.r.APP;case G.r.MESSAGES:return;case G.r.ABOUT:return G.r.ABOUT;default:return}}l(Ae,"tabIdToRouteParam");var ce=e(285955),de=e(776016);const oe=(0,r.Ay)("Sets the primary view of a workspace to a conversation or synthetic view",function(re,ue){let{id:te,startTs:ae,teamId:H=(0,x.oI)(),fromDeepLink:U=!1,forceMessagesTab:N=!1,routeParams:K={},reason:W="set-primary-view",replaceHistoryState:J=!1,openThread:q=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(0,h.A)(te)&&!(0,u.A)(te)&&!(0,p.A)(te)&&!(0,n.A)(M.EN,te)&&!(0,O.z)(ue(),te)&&!(0,R.Ay)(te)&&te!==Z.eE.QUIP_FILES)return(0,_.Ay)({getState:ue}).error("setPrimaryView Error: invalid-params"),t.S.reject(new Error("invalid-params"));re((0,w.e)());const ie=ue(),Te=(0,Ee.ky)(ie),Me=(0,Q.A)(ie);let ke=!0;if(de.MC){const We=(0,de.MC)(ie);ke=(0,s.A)(K,(Re,ve)=>Re===We[ve]),We.entityId==="lists"&&(0,a.A)(K)&&We.listsViewName&&(ke=!1)}if(te===Me&&ke&&!ae&&!U&&(!(0,A.A)()||H===(0,L.ZT)(ie)))return t.S.resolve();if(D.LI.isEnabled()&&(0,D.mt)(te)&&D.LI.start({label:D.gC[te],options:{teamId:H}}),!(0,V.VA)()&&H!==(0,L.ZT)(ie)){const We=(0,P.M5)(I._G,{entityId:M.F$[te]||te,teamId:H}),Re=(0,F.getStateForClientStore)(),ve=(0,ce.getWorkspacesMeta)(Re),xe=ve&&ve[H]&&ve[H].subdomain,He=(0,V.eb)(xe);return(0,B.A)(We,He),t.S.resolve()}const Ie=(0,F.getStoreInstanceByTeamId)(H).getState();let X=(0,de.D8)(Ie)||I._G;q&&K&&(0,Y.A)(K==null?void 0:K.threadId)&&(X=I.lM);const ne=Ie&&(0,O.z)(Ie,te)&&(0,O.MD)(te).path,fe=(0,S.xq)()===S.yS.USER_TEAM?"teamOrEnterpriseId":"teamId",be=(0,c.A)({...(0,de.MC)(Ie),channelCanvasId:void 0,...K,[fe]:H,tabId:void 0,entityId:ne||M.F$[te]||te,timestamp:ae},We=>We===void 0);be.listsViewName&&be.entityId==="lists"&&(0,a.A)(K)&&(be.listsViewName=void 0,be.focusRecordId=void 0,be.listViewId=void 0),be.draftId&&be.entityId!=="composer"&&(be.draftId=void 0),be.invitationsTabId&&be.entityId!=="slack-connect"&&(be.invitationsTabId=void 0),be.outboxTabId&&be.entityId!=="outbox"&&(be.outboxTabId=void 0),be.searchQuery&&be.entityId!==C.d$&&(be.searchQuery=void 0),be.channelFilesId&&be.entityId!=="browse-channel-files"&&(be.channelFilesId=void 0),be.itemId&&be.entityId!=="later"&&(be.itemId=void 0),!(ee.L===null||ee.L===void 0)&&ee.L.includes(be.viewName)&&be.entityId!=="slack-connect"&&(be.viewName=void 0),be.listsViewName&&be.entityId!=="lists"&&(be.listsViewName=void 0,be.focusRecordId=void 0,be.listViewId=void 0),(0,h.A)(te)&&be.viewingFromChannelBrowser&&(be.viewingFromChannelBrowser=void 0),!(0,R.Ay)(te)&&be.canvasOpenedFromId&&(be.canvasOpenedFromId=void 0);const Be=(0,m.OL)(ie,te);if((0,f.LI)(Be)){const We=(0,E.e)(Be),Re=(0,i.nv)(ie,We),ve=(0,y.A)(ie,Re)||void 0,xe=(0,g.PV)(Re)||void 0,He=Be&&Te?(0,Ee.FA)(ie,Be.id):null;ve||xe?!N&&!be.timestamp&&!(0,v.$M)(Be)&&Me!==be.entityId&&(be.tabId=He?Ae(He):"app"):re((0,o.A)({channelId:te,tabId:be.tabId}))}if(be.quipDocId&&X===I.mj){const We=(0,_e.H)(Be);(We==null?void 0:We.quipDocId)!==be.quipDocId&&(be.quipDocId=void 0,K!=null&&K.threadId&&(0,Y.A)(K==null?void 0:K.threadId)?X=I.lM:X=I._G)}return(0,F.dispatchForClientStore)((0,d.nb)({ts:Date.now(),teamId:H,primaryView:te,routeParams:K})),U&&K.tabId&&(be.tabId=K.tabId),(0,P._U)(X,be,{reason:W,shouldReplaceState:J}).then(We=>We||t.S.reject(new Error("setPrimaryView: navigateToRoute did not navigate")))});oe.meta={name:"createThunk",key:"createThunksetPrimaryView",description:"Sets the primary view of a workspace to a conversation or synthetic view"};const $=oe},801425:(j,T,e)=>{"use strict";e.d(T,{Gy:()=>i,HO:()=>n,Hu:()=>r,K$:()=>o,Lo:()=>c,fw:()=>u,j0:()=>_,k0:()=>d,lH:()=>h,nG:()=>a,ne:()=>m,xW:()=>p});var t=e(152532);const n=(0,t.Ay)("Sets the primary view in workspace store");n.meta={name:"createAction",key:"createActionsetPrimaryViewInternal",description:"Sets the primary view in workspace store"};const s=n.getType(),a=(0,t.Ay)("Sets the secondary view in workspace store");a.meta={name:"createAction",key:"createActionsetSecondaryViewInternal",description:"Sets the secondary view in workspace store"};const c=(0,t.Ay)("Sets the flexpane origin store");c.meta={name:"createAction",key:"createActionsetFlexOriginInternal",description:"Sets the flexpane origin store"};const r=(0,t.Ay)("Sets the flexpane restore store");r.meta={name:"createAction",key:"createActionsetFlexRestoreInternal",description:"Sets the flexpane restore store"};const o=(0,t.Ay)("Sets the focused workspaces from the client-store");o.meta={name:"createAction",key:"createActionsetRecentlyFocusedWorkspaces",description:"Sets the focused workspaces from the client-store"};const u=(0,t.Ay)("Sets an object where the key is a workspace id and the value is the timestamp reflecting the last time the workspace was focused");u.meta={name:"createAction",key:"createActionsetRecentlyFocusedWorkspacesTimestamps",description:"Sets an object where the key is a workspace id and the value is the timestamp reflecting the last time the workspace was focused"};const m=(0,t.Ay)("Sets the props we need to re-open the last flexpane");m.meta={name:"createAction",key:"createActionsetPreviousFlexpane",description:"Sets the props we need to re-open the last flexpane"};const i=(0,t.Ay)("Sets channelDetailsOpen");i.meta={name:"createAction",key:"createActionsetChannelDetailsOpen",description:"Sets channelDetailsOpen"};const d=(0,t.Ay)("Sets flexpane highlight state");d.meta={name:"createAction",key:"createActionsetFlexpaneHighlight",description:"Sets flexpane highlight state"};const _=(0,t.Ay)("Sets flexpane section currently docked");_.meta={name:"createAction",key:"createActionsetDockedFlexpaneSection",description:"Sets flexpane section currently docked"};const h=(0,t.Ay)("Add or remove from list expanded inputs");h.meta={name:"createAction",key:"createActionsetMessageInputExpanded",description:"Add or remove from list expanded inputs"};const p=(0,t.Ay)("Sets the last tab for a given channel id");p.meta={name:"createAction",key:"createActionsetLastTabForChannelId",description:"Sets the last tab for a given channel id"}},881716:(j,T,e)=>{"use strict";e.d(T,{A:()=>_,U:()=>i});var t=e(666044),n=e(674217),s=e(281002),a=e(60108),c=e(151571),r=e(181899),o=e(477659),u=e(586529),m=e(934528),i;(function(h){h.fancy="fancy",h.frowny="frowny",h.neutral="neutral",h.sadSurprise="sad_surprise"})(i||(i={}));const d=(0,n.Ay)("Add ephemeral feedback message to channel or thread",(h,p,A)=>{const{message:v,inputText:E,inputDelta:f,ephemeralType:g,ignoreExistingMessage:y}=A,I=A.temporary!==!1,O=v.channel,M=v.thread_ts,C=M?s.F.threadsTempSlashCmdFeedback:s.F.tempSlashCmdFeedback;if((E||f)&&O)if(M)(0,t.A)({inputText:E,inputDelta:f,channelId:O,threadTs:M});else{const P=(0,o.zC)({viewContext:u.Y.MESSAGE_PANE,channelId:O});P&&(f?P.setContents({contents:f.ops}):E&&P.setText(E))}I?h((0,c.w)({ephemeralType:g||C,message:v,ignoreExistingMessage:y})):(h((0,r.P)({ephemeralType:g||C,channelId:O})),h((0,a.F)({message:v}))),v!=null&&v.text&&h((0,m.rl)({message:v.text}))});d.meta={name:"createThunk",key:"createThunkaddEphemeralFeedback",description:"Add ephemeral feedback message to channel or thread"};const _=d},297287:(j,T,e)=>{"use strict";e.d(T,{A:()=>I});var t=e(194092),n=e(474722),s=e(498916),a=e(674217),c=e(127850),r=e(287187),o=e(766998),u=e(97748),m=e(881805),i=e(544555),d=e(43335),_=e(454399),h=e(853660),p=e(17343),A=e(682520),v=e(656453),E=e(778042),f=e(120962),g=e(45798);const y=(0,a.Ay)("Add messages from history",(O,M,C)=>{let{msgs:P,channelId:L,isLimited:x,latest:F,oldest:V,hasMore:B,loading:D,forceUnreadCount:S,deleted:R=[]}=C;const w=M(),Y=(0,v.Cy)({getState:M});(0,h.L)(w)&&Y.mark("rmsgs_addMessagesFromHistory");const Q=(0,t.A)(P,Ee=>{const G=(0,_.k)(w,{channelId:L,ts:Ee.ts});return G&&(0,A.Ay)({getState:M}).warn(`Filtering out ${Ee.ts} in ${L} history response because it was deleted`),!G}),Z=x?P.filter(Ee=>Ee.is_beyond_free_limit).map(Ee=>Ee.ts):g.Ml,ee=(0,n.A)(Q,"ts"),_e=(0,d.A)(L)?L:(0,i.Sb)(L).channelId;_e&&(0,r.mY)((0,m.ZT)(w),_e,ee),O((0,o.tT)(Q)),O((0,c.VG)({channelId:L,timestamps:ee,isLimited:x,blurredMessages:Z,latest:F,oldest:V,hasMore:B,loading:D,forceUnreadCount:S})),(0,s.A)(D)&&O(D?(0,E.v)({channelId:L,loadingOlder:!!F}):(0,f.f)({channelId:L})),(0,h.L)(w)&&Y.measureAndClear("rmsgs_addMessagesFromHistory","rmsgs_addMessagesFromHistory"),R.forEach(Ee=>O((0,u.j)({deleted_ts:Ee,channel:_e}))),Q.forEach(Ee=>(0,p.IY)(M,O,Ee,Ee))});y.meta={name:"createThunk",key:"createThunkaddMessagesFromHistory",description:"Add messages from history"};const I=y},64926:(j,T,e)=>{"use strict";e.d(T,{Fj:()=>V,Vq:()=>F});var t=e(612104),n=e.n(t),s=e(180491),a=e(107828),c=e(705091),r=e(46186),o=e(671550),u=e(23219),m=e(965112),i=e(538146),d=e(988727),_=e(88748),h=e(640180),p=e(793434),A=e(325846),v=e(981927),E=e(674217),f=e(390938),g=e(135713),y=e(437556),I=e(36911);const O=l((B,D)=>D.map(S=>S.pasted&&!S.entity?{value:S.value,entity:(0,y.nv)(B,S.value)}:S),"getMemberInfoForPastedMembers"),M=l(B=>{const D=B.entity||{};return(0,A.A)(B==null?void 0:B.value)||(0,u.NB)(D)},"isAMember"),C=l(B=>{const D=B.entity||{};return(0,v.A)(B.value)||(0,_.PH)(D)},"isAUserGroup"),P={[p.IS.ALREADY_IN_CHANNEL]:!0,[p.IS.CANNOT_INVITE_SELF]:!0,[p.IS.ALREADY_IN_CHANNEL_UG]:!0},L={},x=l(B=>{let{shouldPreserve:D,teamId:S}=B;L[S]=D},"setShouldPreserveModalsOnNavigation"),F=l(B=>{let{teamId:D}=B;return L[D]},"getShouldPreserveModalsOnNavigation"),V=(0,E.Ay)("Add users and user groups to channel",function(){var B=(0,t.coroutine)(function*(D,S,R){let{selectedMembers:w,addMemberMode:Y,channel:Q,keepChannelHistory:Z,teamId:ee,shouldSkipInitialStage:_e}=R;const Ee={channelId:Q.id,force:!0,reason:"submit-invite-channel-invite-modal"};let G,Ae;if(Y===a.D.AllMembers)Ee.inviteAll=!0,G=[],Ae=[];else{const te=O(S(),w),ae=(0,r.A)(S(),Q),H=(0,o.R)(S(),Q);G=te.reduce((U,N)=>{if(N&&M(N)&&N.entity){const K=N,W=(0,I.Sv)(S(),Q.id,K.value);if(!W.isKnown||!W.isMember){const J=(0,d.dQ)(K.entity),q=(0,i.S)(S(),K.entity,Q);(H||(0,m.g)(K.entity)&&J&&ae.includes(J)||q)&&U.push(K.value)}}return U},[]),Ee.users=G.join(","),Ae=w.reduce((U,N)=>(N&&C(N)&&U.push(N.value),U),[]),Ee.subteams=Ae.join(",")}const ce=Ee.inviteAll||!!Ee.users||!!Ee.subteams,de=(0,g._Z)(S(),"shared_channel_invite_requested_event")==="on",oe={addedExistingMembers:ce,userInviteResults:G.map(te=>({ok:!0,invitee:te,inviteeType:h.T0.User,accessType:h.BD.Member,error:""})),groupInviteResults:Ae.map(te=>({ok:!0,invitee:te,inviteeType:h.T0.UserGroup,accessType:h.BD.Member})),newChannelId:void 0};let $;try{if(Z)ce&&(yield D((0,c.Cw)(Ee)).then(te=>{const{requested_invites:ae=[]}=te;$=ae}),de&&(oe.userInviteResults=oe.userInviteResults.map(te=>{const ae=$.find(H=>H.user_id===te.invitee);return{...te,accessType:ae?h.BD.SharedChannel:te.accessType,inviteeType:ae?h.T0.Email:te.inviteeType,...de&&{isRequestedInvite:!!ae}}})));else{x({shouldPreserve:!_e,teamId:ee}),Ee.propagateInviteResult=!0;const{channel:te}=yield D((0,f.t)(Ee));oe.newChannelId=te.id,x({shouldPreserve:!1,teamId:ee})}}catch(te){var re;x({shouldPreserve:!1,teamId:ee});const ae=te==null||(re=te.data)===null||re===void 0?void 0:re.errors;if(!ae){var ue;if(!P[te==null||(ue=te.data)===null||ue===void 0?void 0:ue.error])throw te}ae==null||ae.forEach(H=>{if(P[H.error])return;const U=oe.userInviteResults.filter(K=>K.invitee===H.user);if(U.length)U[0].ok=!1,U[0].error=H.error;else if(w.length===1&&!H.user&&_e){var N;oe.userInviteResults=[{ok:!1,invitee:(N=w[0])===null||N===void 0?void 0:N.value,inviteeType:h.T0.User,error:H.error,accessType:h.BD.Member}]}else oe.userInviteResults.push({ok:!1,invitee:H.user,inviteeType:h.T0.User,error:H.error,accessType:h.BD.Member})})}return s.S.resolve(oe)});return function(D,S,R){return B.apply(this,arguments)}}());V.meta={name:"createThunk",key:"createThunkaddUsersAndGroupsToChannel",description:"Add users and user groups to channel"}},997653:(j,T,e)=>{"use strict";e.d(T,{r:()=>m});var t=e(674217),n=e(360256),s=e(449552),a=e(529734),c=e(469122),r=e(180427);const o=(0,t.Ay)("Go back in history in fullscreen mode",(i,d)=>{window.history.back()});o.meta={name:"createThunk",key:"createThunkgoBackInFullscreenMode",description:"Go back in history in fullscreen mode"};var u=e(188175);const m=(0,t.Ay)("Go back in history",(i,d)=>{const _=d(),h=(0,a.yZ)(_),p=(0,r.iB)(_),A=(0,c.V)(_);if(p&&A)return i(o());if(h){(0,u.ud)((0,s.getStateForClientStore)())||(0,s.dispatchForClientStore)((0,n.oX)());return}window.history.back()});m.meta={name:"createThunk",key:"createThunkgoBackInWindowHistory",description:"Go back in history"}},7811:(j,T,e)=>{"use strict";e.d(T,{h:()=>s});var t=e(674217),n=e(529734);const s=(0,t.Ay)("Go forward in history",(a,c)=>{const r=c();(0,n.yZ)(r)||window.history.forward()});s.meta={name:"createThunk",key:"createThunkgoForwardInWindowHistory",description:"Go forward in history"}},566133:(j,T,e)=>{"use strict";e.d(T,{I:()=>c,u:()=>a});var t=e(45798),n=e(643816),s=e(885850);const a=l(r=>(r==null?void 0:r.name)||"","getActionName"),c=l((r,o,u)=>{const m=!u;let i=t.Ml;if(u){const d=(0,s.OL)(r,u);i=d&&(0,n.f)(r,d)||t.Ml}return o.teams&&(i.length||m)&&!o.isWorkspaceAgnostic?m?o.teams:o.teams.filter(_=>i.includes(_)):t.Ml},"getActionRelatedWorkspaces")},218828:(j,T,e)=>{"use strict";e.d(T,{EL:()=>Ae,eI:()=>ce,Sy:()=>te,i1:()=>W,hY:()=>H,zq:()=>_e,jM:()=>oe,R7:()=>V,fj:()=>B,LS:()=>de,W_:()=>Y,wW:()=>re,Ij:()=>S,DT:()=>Ee,yN:()=>U,Ov:()=>w,tY:()=>be,AP:()=>$,C9:()=>Ie,DH:()=>Q,UV:()=>N,We:()=>q,BX:()=>Pe,FN:()=>J,E8:()=>ue,KH:()=>M,p7:()=>F,pj:()=>P,Nw:()=>x,x$:()=>ie,nK:()=>Te,FY:()=>K,vu:()=>Re,JE:()=>fe,xb:()=>ne,qc:()=>Be,iV:()=>We,KN:()=>ke,w_:()=>X});var t=e(780076),n=e(985324),s=e(459296),a=e(23219),c=e(885850),r=e(846860);function o(ve,xe){const He=(0,c.Pu)(ve,xe&&xe.id);return!(!(0,r.zP)(ve,xe&&xe.id||"")&&!He)&&!(0,a.Pd)(ve,xe)}l(o,"isActionable");var u=e(81527),m=e(934861),i=e(458939),d=e(525261),_=e(149159);const p=l(ve=>ve.trim().split(/\s+/).length,"getWordCount");function A(ve,xe){if(ve.length<=xe)return ve;const He="\u2026",je=ve.substring(0,xe),Ke=je.lastIndexOf(" ");return Ke>0&&Ke>xe-15?je.substring(0,Ke)+He:je.substring(0,je.length-1)+He}l(A,"truncateToNearestWordBoundary");const v=A;var E=e(881805),f=e(11650),g=e(873645),y=e(15864),I=e(437556),O=e(129318);const M=l(ve=>!!(ve&&ve.installation&&ve.installation.is_active),"isAppActive"),C=l(ve=>!!(ve&&ve.app_type===d.u.Slack),"isAppSlackIntegration"),P=l(ve=>!!(ve&&ve.app_type===d.u.CustomIntegration),"isAppCustomIntegration"),L=l(ve=>!!(ve&&ve.directory_profile&&ve.directory_profile.is_published),"isAppPublished"),x=l(ve=>!!(ve&&ve.directory_profile&&ve.directory_profile.is_distributed),"isAppDistributed"),F=l(ve=>!!(ve&&ve.directory_profile&&ve.directory_profile.is_approved),"isAppApproved"),V=l(ve=>ve&&ve.app_id,"getAppId"),B=l(ve=>{var xe,He;return(xe=ve)===null||xe===void 0||(He=xe.profile)===null||He===void 0?void 0:He.name},"getAppName"),D=l(ve=>ve&&ve.profile&&ve.profile.color,"getAppColor"),S=l(ve=>ve&&ve.profile&&ve.profile.tagline,"getAppTagline"),R=l(ve=>ve&&ve.profile&&ve.profile.custom_integration_type,"getAppCustomIntegrationType"),w=l(ve=>ve&&ve.app_type,"getAppType"),Y=l(ve=>ve&&ve.service_id,"getAppServiceId"),Q=l(ve=>ve&&ve.installation&&ve.installation.installer_user_id,"getInstalledUserId"),Z=l(ve=>ve&&ve.installation&&ve.installation.memberships_count||0,"getAppMembershipsCount"),ee=l(ve=>ve&&ve.installation&&ve.installation.date_created,"getAppDateCreated"),_e=l(ve=>ve&&ve.home_workspace_id,"getAppHomeWorkspaceId"),Ee=l(ve=>ve&&(ve.home_enterprise_id||ve.home_workspace_id),"getAppTopLevelTeamId"),G=l(ve=>ve&&P(ve)&&ve.profile&&ve.profile.icons&&ve.profile.icons.emoji?ve.profile.icons.emoji:null,"getAppEmojiIcon"),Ae=l((ve,xe)=>{const He=_e(xe)||(0,O.H7)(ve).id,je=G(xe);return je?(0,g.Ez)(ve,{text:je,teamId:He,emojiMode:(0,s.w)(ve,{forceDisplay:!0}),emojiSize:y.lw.LARGE}):(0,_.A)(xe.profile,192)},"getAppAvatarUrl"),ce=l(ve=>ve&&ve.commands||[],"getAppCommands"),de=l(ve=>ve&&ve.directory_profile&&ve.directory_profile.screenshots||[],"getAppScreenshots"),oe=l(ve=>ve&&ve.directory_profile&&ve.directory_profile.home_url,"getAppHomepageUrl"),$=l(ve=>ve&&ve.directory_profile&&ve.directory_profile.youtube_url,"getAppYoutubeUrl"),re=l(ve=>ve&&ve.directory_profile&&ve.directory_profile.support_url,"getAppSupportUrl"),ue=l(ve=>{const xe=ve.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/);return xe[2]!==void 0?xe[2].split(/[^0-9a-z_-]/i)[0]:""},"getYoutubeIdFromUrl"),te=l(ve=>ve&&ve.profile&&ve.profile.description||"","getAppDescription"),ae=l(ve=>ve&&ve.profile&&ve.profile.formattedDescription||"","getAppFormattedDescription"),H=l((ve,xe)=>{let He=Ie(ve,xe);if(!He&&Te(ve,xe)){const je=_e(xe);je&&(He=(0,O._J)(ve,je))}return(0,t.uz)(He)?(0,m.F1)(He):void 0},"getAppHomeTeamDisplayName"),U=l(ve=>v(te(ve),350),"getAppTruncatedDescription");function N(ve,xe){const He=(0,I.cA)(ve),je=Q(xe);return He.id===je}l(N,"getInstallerIsYou");function K(ve){const xe=!ce(ve),He=de(ve)&&$(ve);return C(ve)&&xe||p(te(ve)||"")<350||!He&&xe}l(K,"shouldHideDescriptionExpansion");function W(ve,xe){if(!xe)return"";const He=V(xe);if(He===(0,f.a_)())return"";const je=P(xe),Ke=C(xe);if(!je&&!Ke){const ht=ie(ve,xe),dt=L(xe),Ve=x(xe);if(!(ht?dt:Ve))return""}return(0,m.Zl)((0,O.H7)(ve),`/apps/${He}`)}l(W,"getAppDirectoryUrl");function J(ve,xe){if(!xe)return"";const He=_e(xe),je=Y(xe),Ke=(0,O._J)(ve,He),ht=(0,I.cA)(ve),dt=(0,u.Ez)(ht);return ie(ve,xe)||(0,t.GU)(Ke)||!je||dt||V(xe)===(0,f.a_)()?"":(0,m.Zl)(Ke,`/services/${je}?settings=1`)}l(J,"getSettingsUrl");function q(ve,xe){if(!xe)return"";const He=V(xe),je=_e(xe),Ke=(0,O._J)(ve,je);return Ke&&He&&(0,m.Zl)(Ke,`/apps/${He}`)}l(q,"getManageUrl");function ie(ve,xe){const He=(0,E.Kc)(ve),je=Ee(xe);return He!==je}l(ie,"isAppExternal");function Te(ve,xe){const He=(0,E.ZT)(ve);if(_e(xe)===He)return!1;const je=(0,E.Kc)(ve);return Ee(xe)===je}l(Te,"isAppOrgShared");function Me(ve){return ve&&ve.installation&&ve.installation.is_installed}l(Me,"isAppInstalled");function ke(ve,xe){return!xe||(0,i.DM)(ve)||ie(ve,xe)||(0,n.fg)(xe)?!1:Me(xe)&&!!(J(ve,xe)||V(xe))}l(ke,"shouldShowSettingsButton");function Pe(ve,xe,He){const je=J(ve,xe);if(je)return je;const Ke=V(xe);if(Ke){const ht=`/apps/${Ke}?settings=1`;if(He){const dt=(0,O._J)(ve,He);return(0,m.Zl)(dt,ht)}return ht}}l(Pe,"getSettingsButtonUrl");function Ie(ve,xe){if(!xe)return null;const He=ie(ve,xe),je=Ee(xe);return He?(0,O._J)(ve,je):null}l(Ie,"getExternalTopLevelTeam");function X(ve,xe){return!(!M(xe)||ie(ve,xe)||Te(ve,xe))}l(X,"shouldShowSlashCommands");function ne(ve,xe){const He=M(xe),je=Te(ve,xe),Ke=(0,I.cA)(ve),ht=(0,u.Ez)(Ke);return(He||je)&&!ht}l(ne,"shouldShowAppSettings");function fe(ve,xe){return!!W(ve,xe)}l(fe,"shouldShowAppDirectoryLink");function be(ve,xe){var He;if((0,t.GU)(xe))return null;const je=(He=xe.app_user)===null||He===void 0?void 0:He.id;if(je){const Ke=(0,I.nv)(ve,je);return(0,a.QR)(Ke)?null:Ke}if(!je&&!ie(ve,xe)){const Ke=V(xe);return(0,I.Eq)(ve,Ke)}return null}l(be,"getAppUser");function Be(ve,xe){if((0,t.GU)(xe))return!1;const He=be(ve,xe);return ie(ve,xe)?He&&xe.app_type===d.u.Xoxp&&M(xe):!!He}l(Be,"shouldShowAppSpace");function We(ve,xe){if((0,t.GU)(xe))return!1;var He;const je=(He=be(ve,xe))!==null&&He!==void 0?He:void 0,Ke=o(ve,je);return ie(ve,xe)?Ke&&xe.app_type===d.u.Xoxp:Ke}l(We,"shouldShowDirectMessageItem");function Re(ve,xe){return(0,t.GU)(xe)||V(xe)===(0,f.a_)()?!1:ie(ve,xe)?L(xe)||We(ve,xe):!0}l(Re,"shouldShowAboutApp")},539900:(j,T,e)=>{"use strict";e.d(T,{AW:()=>i,Hg:()=>o,cl:()=>m});var t=e(742531),n=e(590671),s=e(682520),a=e(824983),c=e(23219),r=e(475746);function o(d){return d==null?void 0:d.name}l(o,"getBotName");function u(d){return d==null?void 0:d.real_name}l(u,"getBotRealName");function m(d,_){if(!d||!d.team_id&&!d.enterprise_user||(0,r.U)(d))return _;if(d.team_id&&(0,n.Ay)(d.team_id))return d.team_id;if(d.team_id&&(0,n.JV)(d.team_id)&&(0,c.oy)(d))return _;const h=d.enterprise_user&&d.enterprise_user.teams||[];if(h.length>0)return(0,t.A)(h,_)?_:h[0];if(_){const p=d.id;(0,a.A)(p,()=>{(0,s.Ay)({teamId:_}).warn("Cannot find workspace for app or bot user in this org.")})}return _}l(m,"getTeamIdFromBotAppUser");function i(){let{member:d,bot:_,botProfile:h,currentTeamId:p}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return _!=null&&_.team_id&&(0,n.Ay)(_.team_id)?_.team_id:h!=null&&h.team_id&&(0,n.Ay)(h.team_id)?h.team_id:m(d,p)}l(i,"getTeamIdFromBotOrUser")},303818:(j,T,e)=>{"use strict";e.d(T,{s:()=>u});var t=e(881805),n=e(129318),s=e(934861),a=e(388413),c=e(590671),r=e(218828),o=e(950251);function u(m){let{member:i,bot:d,botProfile:_,botId:h}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i!=null&&i.team_id)return i.team_id;const p=(d==null?void 0:d.team_id)||(_==null?void 0:_.team_id);if(p){if((0,c.JV)(p))return p;const A=(0,n._J)(m,p);if(A&&(0,s.hc)(A))return A.enterprise_id||A.id;if(h&&(0,s.QR)(A)){const v=(0,a.G2)(m,{serviceId:h,homeWorkspaceId:p});if(v&&!(0,o.r)(v))return(0,r.DT)(v)}return p}return(0,t.Kc)(m)}l(u,"getTopLevelTeamIdForBotOrUser")},601226:(j,T,e)=>{"use strict";e.d(T,{O4:()=>a,OB:()=>r});var t=e(969924),n=e(89149);const s="canvas_version_history_enabled",a=l(o=>(0,n.x)(o,s),"getCanvasVersionHistoryEnabledTeamPref"),c=l((o,u)=>{const m=(0,t.Lp)(o,u);return m?m.team_pref_version_history_enabled:!1},"getOwnerCanvasVersionHistoryEnabledTeamPref"),r=l((o,u)=>u?!!a(o)&&!!c(o,u):!1,"isCanvasVersionHistoryEnabled")},4990:(j,T,e)=>{"use strict";e.d(T,{Z:()=>a});var t=e(396386),n=e(850960),s=e(250100);const a=l((c,r)=>!(0,t.JM)(r)&&!(0,n.F)(r)&&!(0,s.N)(r),"canBeExternallyShared")},682583:(j,T,e)=>{"use strict";e.d(T,{B2:()=>o,Bw:()=>p,CM:()=>_,FA:()=>m,Jr:()=>h,Kg:()=>g,QS:()=>r,Vp:()=>E,bS:()=>f,bw:()=>u,oP:()=>d});var t=e(709703),n=e(649098),s=e(756120),a=e(682520);const c=new n.Ay("channels"),r=250,o=250;function u(I){return(0,t.A)(I)?I.length>r:((0,s.Cu)()&&(0,a.Wo)().warn("Argument `topic` passed to `channelTopicExceedsLimit()` is not a string"),!1)}l(u,"channelTopicExceedsLimit");const m="too_long",i="restricted_action",d="user_is_restricted",_="method_not_supported_for_channel_type",h="method_not_supported_for_dm";function p(I){switch(I){case m:return c.t("Channel topics can only include up to {max} characters \u2014 please make this topic shorter.",{max:r});case i:case d:return c.t("It looks like you don\u2019t have permission to change the channel topic. Please check with your workspace admin.");case _:return c.t("It\u2019s not possible to set a topic here, unfortunately.");case h:return c.t("Regrettably, direct messages do not have topics.");default:return c.t("It looks like setting the channel topic didn\u2019t work, for some reason. Try again?")}}l(p,"getChannelTopicError");const A="too_long",v="restricted_action",E="user_is_restricted",f="method_not_supported_for_channel_type",g="method_not_supported_for_dm";function y(I){switch(I){case A:return c.t("That purpose is too long. Please try again with fewer than {max} characters.",{max:o});case v:case E:return c.t("Uh oh! You don\u2019t have permission to change the purpose. Talk to your workspace admin.");case f:return c.t("It\u2019s not possible to set a purpose here, unfortunately.");case g:return c.t("Regrettably, direct messages do not have purposes.");default:return c.t("Uh oh! Something went wrong with setting the purpose. Please try again.")}}l(y,"getChannelPurposeError")},895707:(j,T,e)=>{"use strict";e.d(T,{i:()=>s});var t=e(710596),n=e(396386);const s=l((a,c)=>{if((0,n.JM)(c)||!a)return!1;const r=(0,t.mG)(c),o=r?a.get(r):null;return o?(o==null?void 0:o.length)>1:!1},"doesChannelHaveNonUniqueName")},140592:(j,T,e)=>{"use strict";e.d(T,{Z:()=>u,Y:()=>m});var t=e(45798),n=e(123175),s=e(166747),a=e(437556),c=e(780076),r=e(354187);function o(i,d,_){const h=!_;var p;const A=(p=(0,a.nv)(i,d,{preferNonExistentToNull:!1,fetchIfMissing:h}))!==null&&p!==void 0?p:void 0;return!A||_&&(0,c.mX)(A)?d:(0,r.wg)(A)}l(o,"getRealMemberNameById");const u=l((i,d)=>d?d.map(_=>({id:_,name:(0,s.I)(i,_)})).sort((_,h)=>(0,n.Ay)(_.name,h.name)).map(_=>_.id):t.Ml,"getAlphabeticallySortedMemberIds"),m=l((i,d)=>!d||!d.length?t.Ml:d.map(_=>({id:_,name:o(i,_)})).sort((_,h)=>(0,n.Ay)(_.name,h.name)).map(_=>_.id),"getRealNameAlphabeticallySortedMemberIds")},369908:(j,T,e)=>{"use strict";e.d(T,{H:()=>t});function t(n){return n&&n.emoji}l(t,"getEmojiCollectionEmoji")},215215:(j,T,e)=>{"use strict";e.d(T,{M:()=>t});function t(n){return n&&n.name}l(t,"getEmojiCollectionName")},415540:(j,T,e)=>{"use strict";e.d(T,{j:()=>t});function t(n){return n&&n.installed}l(t,"isEmojiCollectionInstalled")},459296:(j,T,e)=>{"use strict";e.d(T,{w:()=>s});var t=e(119110),n=e(190145);function s(a){let{forceDisplay:c}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,n.P)(a)&&!c?"as_text":(0,t.cX)()?"apple":"google"}l(s,"getEmojiMode")},825280:(j,T,e)=>{"use strict";e.d(T,{Y:()=>t});const t=l(n=>n&&n.name,"getEmojiName")},746940:(j,T,e)=>{"use strict";e.d(T,{x:()=>n});var t=e(135713);const n=l(s=>(0,t._Z)(s,"a11y_emoji_group")==="on","isEmojiGroupEnabled")},629:(j,T,e)=>{"use strict";e.d(T,{q:()=>t});function t(n){return/^[a-zA-Z0-9\u00E0\u00E1\u00E2\u00E4\u00E3\u00E8\u00E9\u00EA\u00EB\u00ED\u00EE\u00EF\u00F3\u00F6\u00F4\u00F5\u0153\u00FA\u00F9\u00FB\u00FC\u00FF\u00E7\u00DF\u00F1\u00C0\u00C1\u00C2\u00C4\u00C3\u00C8\u00C9\u00CA\u00CB\u00CD\u00CE\u00CF\u00D3\u00D6\u00D4\u00D5\u0152\u00DA\u00D9\u00DB\u00DC\u0178\u00C7\u00D1\uFF41-\uFF5A\uFF10-\uFF19-_+'\uFF3F\uFF0B\u30FC\u3005\u3041-\u3096\u30A0-\u30FF\uFF61-\uFF9F\u3400-\u4DB5\u4E00-\u9FFF\u2E80-\u2FD5\u1100-\u11FF\uA960-\uA97F\uAC00-\uD7A3\uD7B0-\uD7FF\u3139-\u318F\uF900-\uFAFF\u0400-\u04FF\u0500-\u052F]*$/.test(n)}l(t,"isValidEmojiName")},190145:(j,T,e)=>{"use strict";e.d(T,{P:()=>n});var t=e(921055);function n(s){return(0,t.ty)(s,"emoji_mode")==="as_text"}l(n,"shouldRenderEmojiAsText")},526104:(j,T,e)=>{"use strict";e.d(T,{Fh:()=>m,Iz:()=>u,gC:()=>o});var t=e(915773),n=e(969924),s=e(57238),a=e(195804),c=e(56185);const r=(0,t.Ay)((i,d)=>{const{fileIdOrQuipThreadId:_}=(0,a.EX)(d);if((0,s.A)(_)){var h;return(h=(0,n.Lp)(i,_))!==null&&h!==void 0?h:null}return null});r.meta={name:"createSelector",key:"createSelectormaybeGetFileByCompoundId",description:(i,d)=>{const{fileIdOrQuipThreadId:_}=(0,a.EX)(d);if((0,s.A)(_)){var h;return(h=(0,n.Lp)(i,_))!==null&&h!==void 0?h:null}return null}};const o=(0,t.Ay)((i,d)=>{const _=r(i,d);return _&&(0,c.uz)(_)?_:null});o.meta={name:"createSelector",key:"createSelectormaybeGetExistentFileByCompoundId",description:(i,d)=>{const _=r(i,d);return _&&(0,c.uz)(_)?_:null}};function u(i){return i.linked_channel_id}l(u,"getLinkedChannelId");function m(i){return["spaces-example-onboarding-canvas","spaces-example-team-meeting"].includes(i)}l(m,"isSampleCanvas")},47801:(j,T,e)=>{"use strict";e.d(T,{$t:()=>_t,$z:()=>Qt,A5:()=>On,Bn:()=>Ie,F7:()=>ze,Fm:()=>Be,Ft:()=>ht,Gf:()=>Re,J6:()=>un,Lb:()=>fn,MY:()=>Le,NZ:()=>Me,Pn:()=>W,Qj:()=>Dt,R1:()=>Mt,R8:()=>Yt,RW:()=>Je,Rc:()=>gn,S9:()=>Nt,TA:()=>Wn,U6:()=>zn,UA:()=>bt,UE:()=>Ct,Ul:()=>Hn,VQ:()=>pn,Vh:()=>Mn,WH:()=>mn,Wd:()=>Kn,Xx:()=>X,ZP:()=>Ge,bD:()=>Ve,cq:()=>hn,df:()=>pt,eu:()=>He,gG:()=>xe,gO:()=>Qn,hp:()=>Zt,hv:()=>Vt,kn:()=>ft,oz:()=>dt,pZ:()=>Ke,pl:()=>ke,pt:()=>ie,pw:()=>St,qp:()=>xn,r5:()=>xt,rl:()=>os,sp:()=>Ne,sx:()=>je,uc:()=>Tn,uz:()=>$t,vw:()=>J,w1:()=>ve,wc:()=>Se,wu:()=>vt,xe:()=>An,xv:()=>rn,xz:()=>Te});var t=e(566401),n=e(269592),s=e(219477),a=e(194092),c=e(742531),r=e(56185),o=e(113574),u=e(23219),m=e(354187),i=e(475746),d=e(885850),_=e(540788),h=e(135713),p=e(99194),A=e(89149),v=e(921055),E=e(862855),f=e(264918),g=e(741323),y=e(134309),I=e(3704),O=e(850960),M=e(790310),C=e(536160),P=e(582063),L=e(710596),x=e(658160),F=e(396386),V=e(19579),B=e(449552),D=e(282233),S=e(370671),R=e(437556),w=e(566254),Y=e(695823),Q=e(904214),Z=e(646464),ee=e(167094),_e=e(949427),Ee=e(119110),G=e(649098),Ae=e(166747),ce=e(204258),de=e(519543),oe=e(203699),$=e(186943),re=e(403460),ue=e(171403),te=e(85509),ae=e(685592),H=e(586529),U=e(628874),N=e(581112),K=e(362887),W;(function(et){et.EXTERNALLY_SHARED_CHANNEL="externally_shared_channel",et.ADMIN_DISABLED="admin_disabled",et.UNSUPPORTED_BROWSER="unsupported_browser"})(W||(W={}));var J;(function(et){et[et.BROWSER=1]="BROWSER",et[et.MAC=2]="MAC",et[et.WINDOWS=3]="WINDOWS"})(J||(J={}));const q=new G.Ay("huddles"),ie=(0,ae.A)(et=>{const Et=(0,K.R)(et);return(((0,re.ss)(et)?Fe(et,"allow_huddles"):(0,A.x)(et,"allow_huddles"))||!1)&&!Et});function Te(et,Et){if(!Et)return[!1,void 0];if((0,M.jT)(Et))return[!1,void 0];const we=ie(et),tt=we||(0,te.I)(et,Et.id);if(!we&&!(0,te.I)(et,Et.id))return[!1,W.ADMIN_DISABLED];if(!(0,r.uz)(Et)||(0,P.V)(et,Et)||(0,L.Gh)(et,Et.id)||!(0,V.E)(et,Et.id)&&!(0,F.PC)(Et)||(0,L.bU)(Et)||(0,O.F)(Et)||(0,C.Zz)(Et)||(0,oe.M)(Et)||(0,L.dq)(et,Et)||!tt)return[!1,void 0];if((0,S.yh)())return[!1,W.UNSUPPORTED_BROWSER];const Rt=(0,h._Z)(et,"huddles_channel_properties")==="on";let It=!1;if(Rt){var Jt;It=!!(!(Et==null||(Jt=Et.properties)===null||Jt===void 0)&&Jt.huddles_restricted)}else{const Ft=(0,E.d)(et,Et.id,"can_huddle");It=Ft&&(Ft==null?void 0:Ft.enabled)===!1}const an=Ce(et,Et.id);return It?[!1,W.ADMIN_DISABLED]:an===!1?[!1,W.ADMIN_DISABLED]:[!0,void 0]}l(Te,"doesChannelSupportHuddlesWithReason");const Me=l(()=>{const et=(0,B.getClientStoreInstance)();if(!et)return!1;const Et=et.getState(),we=(0,ce.Ak)(Et);return!(0,t.A)(we)},"hasActiveHuddleReferenceInClientStore"),ke=l(et=>{const Et=ie(et),we=Me();return Et||we},"isHuddleEnabledOrHasActiveHuddle");function Pe(et,Et){var we;const tt=(we=getMemberById(et,Et))!==null&&we!==void 0?we:void 0;return!isBotUser(tt)&&!isSlackbot(tt)&&!isExternal(tt)}l(Pe,"canUserBeInvitedToHuddle");function Ie(et,Et){return Te(et,Et)[0]}l(Ie,"doesChannelSupportHuddles");function X(et,Et){return ie(et)?(0,g.LY)(et,Et)>0:!1}l(X,"doesChannelHaveHuddle");function ne(et,Et){const we=getDisplayNameForChannel(et,Et,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1});let tt=[],Rt="";if(isMpim(Et))tt=getMpimMembersInAlphabeticalOrder(et,Et)||[],Rt="Waiting for others...";else if(isIm(Et)){const an=getMemberIdFromIm(Et);an&&tt.push(an),Rt=`Waiting for ${we}`}else return we;const It=getAllConnectedPeers(et)||[];if(It.length===0)return Rt;const Jt=It.map(an=>an.userId);return tt.filter(an=>Jt.includes(an)).map(an=>getPrefCompliantMemberNameById(et,an)).join(", ")}l(ne,"getDisplayNameActiveParticipants");const fe=new Set([Q.vT.SpeakingWhenMuted,Q.vT.UpdateSlack,Q.vT.RemotePeerMuted,Q.vT.RemotePeerSlowConnection,Q.vT.ScreenShareFreeTeam,Q.vT.NoGroupCallsForFreeTeam,Q.vT.PeerMuteRequest]),be=new Set([Q.vT.SpeakingWhenMuted,Q.vT.UpdateSlack,Q.vT.RemotePeerMuted,Q.vT.RemotePeerSlowConnection,Q.vT.ScreenShareFreeTeam,Q.vT.NoGroupCallsForFreeTeam]);function Be(et){return(0,Q.xw)(et).find(we=>!fe.has(we.type))}l(Be,"getAlertForHuddlesBanner");function We(et){return ke(et)&&!!Be(et)}l(We,"shouldShowHuddlesBanner");function Re(et){const Et=(0,B.getStateForClientStore)();return We(et)&&!(0,ce.j)(Et)}l(Re,"shouldShowHuddlesBannerInWorkspace");function ve(et,Et,we){const tt=(0,g.LY)(et,Et),Rt=(0,d.OL)(et,Et),It=(0,F.mz)(Rt)||void 0,Jt=(0,B.getStateForClientStore)(),{callId:an}=(0,ce.Qn)(Jt)||{};return{channel_id:Et,channel_type:It,num_participants:tt,is_recommended:we,room_id:an}}l(ve,"getHuddlesClogContext");function xe(et,Et){return{...ve(et,Et),window_focused:(0,Y.ko)(et),window_visible:(0,_.Sr)(et)}}l(xe,"getHuddlesClogContextForBackgroundActions");function He(et){return[I.RJ.STARTING,I.RJ.PENDING,I.RJ.COMPLETING_PRE_JOIN].includes(et)}l(He,"isHuddleLoadingState");function je(et){return He(et)||et===I.RJ.STARTED}l(je,"isHuddleActiveState");function Ke(et){return He(et)||et===I.RJ.ENDING}l(Ke,"isHuddleTransitionState");function ht(et){return[I.RJ.NOT_STARTED,I.RJ.SURVEY,I.RJ.SURVEY_GOOD].includes(et)}l(ht,"isHuddleEndState");function dt(et){return[I.RJ.SURVEY,I.RJ.SURVEY_GOOD].includes(et)}l(dt,"isHuddleSurveyState");function Ve(et,Et){const we=(0,o.WR)(et);return!!(0,g.ft)(et,Et).find(tt=>{let{id:Rt}=tt;return Rt===we})}l(Ve,"isUserHuddlingInChannel");function Je(et){var Et;const we=et==null||(Et=et.meeting)===null||Et===void 0?void 0:Et.ExternalMeetingId;var tt;return(tt=we==null?void 0:we.split("-")[1])!==null&&tt!==void 0?tt:null}l(Je,"getRoomIdFromCredentials");function Ge(et,Et,we){if(!Et)return!1;const tt=(0,L.Mi)((0,d.Pu)(et,Et.id));return!(!ie(et)||!(0,r.uz)(Et)||(0,u.fy)(Et)&&!we||!(0,u.ls)(Et)||tt)}l(Ge,"canHuddleWithMember");function Le(et){return et===I.J_.IN_PROGRESS_ALONE_NOTICE_ACTIVE||et===I.J_.INITIAL_ALONE_NOTICE_ACTIVE}l(Le,"isAloneInHuddleCoachmarkOpen");function Mt(et){return et===I.J_.INITIAL_ALONE_NOTICE_DISMISSED||et===I.J_.IN_PROGRESS_ALONE_NOTICE_DISMISSED}l(Mt,"isAloneInHuddleCoachmarkDismissed");function Dt(et,Et,we){var tt,Rt;if(Et===null||(0,g.LY)(et,Et)>0||((tt=(0,ce.aQ)((0,B.getStateForClientStore)()))===null||tt===void 0?void 0:tt.channelId)===Et)return!1;const It=(0,d.OL)(et,Et);if(!It||!(0,r.uz)(It))return!1;if(we)return!0;if(!It||(0,F.JM)(It))return!1;const Jt=(0,w.q8)(et,Et),an=(0,v.ty)(et,"huddles_show_shouty_rooster"),Ft=Jt==null||(Rt=Jt.counts)===null||Rt===void 0?void 0:Rt.member_count;return!(!Ft||Ft<=ee.Qp||an===!1)}l(Dt,"shouldShowHuddlesShoutyRoosterWarning");function pt(et){return(0,D.nC)(et)?ee.yL:ee.$s}l(pt,"getParticipantLimit");function Qt(){return(0,Ee.cX)()?(0,Ee.y3)()?q.t("Command + Shift + H"):q.t("Command + Shift + Option + H"):(0,Ee.y3)()?q.t("Ctrl + Shift + H"):q.t("Ctrl + Shift + Alt + H")}l(Qt,"getHuddleToggleKeyboardShortcutString");const Nt=l((et,Et,we)=>{const tt=ie(et)&&(0,D.Ms)(et);if(Et)return tt&&Ge(et,Et);if(we){const Rt=(0,d.OL)(et,we),It=Rt&&Ie(et,Rt);return tt&&It}return tt},"shouldShowCallMenuHuddleDiscoveryLink"),bt=l((et,Et)=>(0,n.A)(Et)?(0,A.x)(et,"allow_huddles_transcriptions")||!1:(0,re.ss)(et)?Oe(et,"allow_huddles_transcriptions",Et):(0,A.x)(et,"allow_huddles_transcriptions")||!1,"isHuddlesTranscriptionsEnabledForChannel"),Yt=l(et=>(0,re.ss)(et)?Fe(et,"allow_huddles_transcriptions"):(0,A.x)(et,"allow_huddles_transcriptions")||!1,"isHuddlesTranscriptionsEnabledForOrgWorkspaces"),fn=l((et,Et)=>{const we=(0,o.WR)(et);return(0,R.nv)(et,(0,f.fy)(Et)?we:Et.userId)},"getMemberFromPeer"),Tt=l((et,Et)=>(0,p.a)(et,Et==null?void 0:Et.id)?q.t("Name hidden"):(0,m.wg)(Et)||(0,m.Fh)(Et),"getMemberName"),sn=l((et,Et)=>{const we=getCurrentUserId(et);if(isSelfPeerId({id:Et}))return getMemberById(et,we);const tt=getPeerById(et,Et);if(tt)return fn(et,tt)},"getMemberFromPeerId"),mn=l((et,Et)=>{const we=fn(et,Et);return Tt(et,we)},"getMemberNameFromPeer"),wt=l((et,Et)=>{if(!Et)return;const we=sn(et,Et);return Tt(et,we)},"getMemberNameFromPeerId"),On=l((et,Et)=>{const we=(0,R.nv)(et,Et);return Tt(et,we)},"getMemberNameFromUserId"),Zt=l((et,Et)=>{const we=(0,R.nv)(et,Et);return(0,u.fD)(we)},"getMemberPronounsFromUserId"),Mn=l(et=>{let{state:Et,roomId:we}=et;const tt=(0,g.P_)(Et,we);return!tt||tt.hasEnded?!1:tt.allParticipants.length===0?!0:!(tt.allParticipants.length>0&&tt.activeParticipants.length===0)},"isHuddleActive"),Wn=l(et=>{let{state:Et,roomId:we,userId:tt}=et;if(!we||!tt||!Mn({state:Et,roomId:we}))return!1;const Rt=(0,g.P_)(Et,we);return Rt?(0,s.A)(Rt.activeParticipants,It=>(0,de.MZ)(It)&&It.slackId===tt):!1},"isUserInActiveHuddle"),xn=l(et=>{let{state:Et,roomId:we,userId:tt}=et;if(!we||!tt||Mn({state:Et,roomId:we}))return!1;const Rt=(0,g.P_)(Et,we);return Rt?(0,s.A)(Rt.allParticipants,It=>(0,de.MZ)(It)&&It.slackId===tt):!1},"wasUserInEndedHuddle"),gn=l(et=>{let{participantsIds:Et,userIdsToExclude:we}=et;return!Et||!Et.length?[]:(0,a.A)(Et,tt=>!(0,c.A)(we,tt))},"getParticipantIdsFiltered"),An=l(et=>{let{state:Et,channel:we,roomId:tt}=et;if(!we||!tt||!(0,F.LI)(we))return!1;const Rt=(0,x.e)(we),It=(0,g.P_)(Et,tt);return It?!Wn({state:Et,roomId:tt,userId:Rt})&&(0,s.A)(It.allParticipants,Jt=>(0,de.MZ)(Jt)&&Jt.slackId===Rt):!1},"hasImUserJoinedAndLeft"),vt=l((et,Et)=>{if(!Et)return!1;const we=(0,d.OL)(et,Et);if(!we)return!1;const tt=Ie(et,we);return!!we&&!(0,L.Ur)(we)&&!(0,P.V)(et,we)&&!!tt},"isValidChannelForHuddleNux"),xt=l((et,Et)=>{let{channelId:we}=Et;if(!we)return!1;const tt=(0,B.getStateForClientStore)(),It=(0,ce.hc)(tt)===we;return Ve(et,we)&&!It},"isUserHuddlingOnAnotherDevice"),Vt=l(et=>{let{isDM:Et,escImOrMpimMemberIds:we,huddlesDisabledUserIds:tt}=et;return Et&&we&&tt&&tt.length===1&&tt[0]===we[0]},"isHuddleDisabledForDM"),Se=l(et=>{let{isMPDM:Et,escImOrMpimMemberIds:we,huddlesDisabledUserIds:tt}=et;return Et&&we&&tt&&tt.length===we.length-1},"isHuddleDisabledForMPDM"),St=l(()=>(0,ue.xY)()?(0,Ee.cX)()?J.MAC:J.WINDOWS:J.BROWSER,"getTitlebarVariant");function Ce(et,Et){return Oe(et,"allow_huddles",Et)}l(Ce,"getIsHuddlesAllowedTeamPrefForChannel");function Ne(et,Et){return(0,n.A)(Et)?(0,A.x)(et,"allow_huddles_video")||!1:(0,re.ss)(et)?Oe(et,"allow_huddles_video",Et):(0,A.x)(et,"allow_huddles_video")||!1}l(Ne,"isHuddlesVideoEnabledForChannel");function ze(et){return(0,re.ss)(et)?Fe(et,"allow_huddles_video"):(0,A.x)(et,"allow_huddles_video")||!1}l(ze,"isHuddlesVideoEnabledForOrgWorkspaces");function Oe(et,Et,we){if((0,re.ss)(et)){const tt=(0,d.OL)(et,we);return(0,F.QR)(tt)?(0,$.p$)(et,Et):(0,$.Bx)(et,Et,we)}return(0,A.x)(et,Et)||!1}l(Oe,"getIsHuddlesOrgAllowedPrefEnabledForChannel");function Fe(et,Et){return(0,$.p$)(et,Et)}l(Fe,"isCurrentUserWhoCanDoTeamPrefOnSelfWorkspaces");function _t(et,Et){let{huddleId:we}=Et;var tt;const Rt=(0,y.fG)(et,{huddleId:we});return{canvas_thread_channel_id:Rt==null?void 0:Rt.channelId,canvas_thread_id:Rt==null||(tt=Rt.ts)===null||tt===void 0?void 0:tt.replace(".","")}}l(_t,"getHuddleClogContext");function ft(et){return{canvas_huddle_session_id:(0,ce.oK)(et)}}l(ft,"getHuddleClogClientContext");function Ct(et){const Et=(0,ce.E9)(et),we=(0,ce.hc)(et);return{room_id:Et,channel_id:we}}l(Ct,"getHuddleClogCallsContext");function $t(){const et=(0,B.getStateForClientStore)();return(0,ce.j)(et)}l($t,"isHuddleWindowOpenInClientStore");function rn(et){return!et||et.closed?null:et.innerWidth<=_e.m3?Z.yG.WINDOW_COMPACT:Z.yG.WINDOW_FULL}l(rn,"getHuddleSurfaceFromWindowSize");function un(et){const we=et.screen.availTop,tt=isNaN(we)?!0:Math.abs(we-et.screenTop)<=20,Rt=et.screen.availLeft,It=isNaN(Rt)?!0:Math.abs(Rt-et.screenLeft)<=20,Jt=Math.abs(et.screen.availHeight-et.outerHeight)<=20,an=Math.abs(et.screen.availWidth-et.outerWidth)<=20;return tt&&It&&(Jt&&an)}l(un,"isHuddleWindowMaximized");function hn(et){let{self:Et,peers:we}=et;const Rt=we.filter(Jt=>Jt.isCameraEnabled).length||Et.isCameraEnabled&&!Et.isHidingSelf,It=we.length+(Et.isHidingSelf?0:1);if(Rt){if(It>=5)return _e.ef;if(It===4)return _e.oP;if(It===3)return _e.v2}return _e.v_}l(hn,"getCompactWindowDefaultHeight");const pn=l(et=>(0,ue.qp)()?!!et.document.fullscreenEnabled:!1,"isFullscreenEnabled"),Tn=l(et=>!!et.document.fullscreenElement,"isWindowFullscreen"),Qn=l((et,Et)=>Et?et.document.body.requestFullscreen():et.document.exitFullscreen(),"setFullscreen");function zn(et){let{message:Et,parentMessage:we,viewContext:tt}=et;return!!(we&&we.room_id&&(!tt||H.Y.MESSAGE_PANE===tt)&&(Et==null?void 0:Et.ts)!==(Et==null?void 0:Et.thread_ts))}l(zn,"isMessageHuddleRecapMessage");function Hn(et){if((0,U.Si)(et))return!1;const we=(0,N.H)(et);return we?we<=5:!0}l(Hn,"isSelfUserNewToHuddles");function Kn(et){return!!ie(et)}l(Kn,"isHuddlesPageEnabled");function os(et){const we=(0,d.h3)(et),tt=[];return we.forEach(Rt=>{tt.length<3&&Ie(et,Rt)&&tt.push(Rt)}),tt}l(os,"getChannelHuddleSuggestionsForNUX")},440863:(j,T,e)=>{"use strict";e.d(T,{eY:()=>y,QX:()=>M,dL:()=>I,oG:()=>C,Lz:()=>O,L7:()=>B,J5:()=>V,XH:()=>P,nY:()=>L});var t=e(283991),n=e(362887),s=e(643816),a=e(81527),c=e(658907),r=e(747360);function o(D){return D&&{...D,type:(0,r.A)(D==null?void 0:D.type)==="owner"?["org_admin"]:["admin"]}}l(o,"mapToWhoCanStyle");function u(D,S){return(0,c.g)(D,"who_can_manage_guests",[S],o)}l(u,"canUserDoManageGuestsTeamPrefForTeamId");const m={mapToWhoCanStyle:o};var i=e(390638),d=e(934861),_=e(303878),h=e(640180),p=e(374715),A=e(885850),v=e(437556),E=e(397664),f=e(89149),g=e(129318);function y(D){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const R=(0,v.cA)(D),w=S??(0,g.H7)(D);if(!w)return!1;const Y=(0,_.Me)(D,w.id),Q=(0,E.tx)(D,{teamOrEnterpriseIds:[w.id]});if(Y||Q)return!0;if((0,a.P)(R))return!1;if(!(0,f.x)(D,"invites_only_admins",S==null?void 0:S.id))return!0;if((0,d.r7)(w)){const ee=(0,E.wr)(D,{teamOrEnterpriseIds:[w.id]});return u(D,w.id)||ee}return!1}l(y,"canUserInviteMembersToWorkspace");function I(D,S,R){const w=S||(0,v.cA)(D),Y=R||(0,g.H7)(D);return!(!Y&&!Y||(0,a.P)(w)||!(0,f.x)(D,"invite_requests_enabled",Y.id))}l(I,"canUserRequestToInvite");function O(D){const S=(0,v.cA)(D),R=(0,g.H7)(D);return!R||(0,n.R)(D)?!1:(0,d.r7)(R)?!!(0,t.Mo)(D).filter(Y=>I(D,S,Y)||y(D,Y)).length:!!(I(D,S,R)||y(D))}l(O,"canUserSeeInviteModal");function M(D,S){const R=(0,g.H7)(D);if(!R)return!1;const w=(0,A.OL)(D,S),Y=(0,d.tc)(R),Q=(0,d.r7)(R),Z=(0,i.D7)(D,S),ee=Q?!L(D,w):O(D);return Y&&ee||!Y&&(ee||Z)}l(M,"canUserInviteToChannelByEmail");function C(D,S){const R=(0,v.cA)(D),w=S?(0,g._J)(D,S):(0,g.H7)(D);if(!w||(0,d.tc)(w))return!1;if(I(D,R,w))return!0;if((0,d.r7)(w)){const Y=(0,E.wr)(D,{teamOrEnterpriseIds:[w.id]});return u(D,w.id)||Y}return(0,_.Me)(D,w.id)}l(C,"canUserSeeAccountTypeOptions");function P(D,S){let{ignoreGuestSettings:R}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const w=(0,v.cA)(D),Y=S?(0,g._J)(D,S):(0,g.H7)(D);if(!(0,d.r7)(Y))return!1;const Q=(0,_.Me)(D,Y.id),Z=(0,E.tx)(D,{teamOrEnterpriseIds:[Y.id]});if(Q||Z||!(0,f.x)(D,"invites_only_admins",Y.id)||I(D,w,Y))return!1;if(R)return!0;const _e=(0,E.wr)(D,{teamOrEnterpriseIds:[Y.id]});return u(D,Y.id)||_e}l(P,"shouldDisableFullMemberInviteOption");function L(D,S){const R=(0,s.f)(D,S);return!!(R!=null&&R.every(w=>P(D,w,{ignoreGuestSettings:!0})))}l(L,"shouldDisableFullMemberInviteOptionForChannel");function x(D){let{state:S,team:R,inviteType:w}=D,Y=R;if(!R&&(Y=getCurrentTeam(S),!Y))return!1;const Q=getTeamPref(S,"auth_mode"),Z=Q==="google"||Q==="saml";return isEnterpriseOrEnterpriseWorkspace(Y)&&w===AccessType.Member||Z&&getTeamPref(S,"sso_auth_restrictions")===0}l(x,"shouldShowSsoAlert");function F(D){let{state:S,inviteType:R}=D;const w=getTeamPref(S,"auth_mode"),Y=getTeamPref(S,"sso_auth_restrictions");return w==="google"?R===AccessType.Member&&(Y===0||Y===1)||(R===AccessType.MultiChannelGuest||R===AccessType.SingleChannelGuest)&&Y===0:!1}l(F,"shouldShowGoogleDomainsNotice");function V(D){let{state:S,inviteType:R,team:w}=D;if(!R||!(0,h.LX)(R))throw new Error(`Invalid invite type: ${R}`);const Y=w||(0,g.H7)(S);if(!Y)return!1;const Q=(0,f.x)(S,"invites_only_admins",Y==null?void 0:Y.id),Z=(0,d.r7)(Y),ee=(0,_.Me)(S,Y.id),_e=(0,E.tx)(S,{teamOrEnterpriseIds:[Y.id]});switch(R){case h.BD.Member:return ee||_e?!1:!!Q;case h.BD.MultiChannelGuest:case h.BD.SingleChannelGuest:if(Z){const Ee=(0,E.wr)(S,{teamOrEnterpriseIds:[Y.id]});return!u(S,Y.id)&&!Ee}return!ee;default:return!0}}l(V,"isRequestingInvitesForType");function B(D){let{state:S}=D;const R=(0,g.H7)(S);return(0,p.z)()?!0:(0,d.r7)(R)?!!(0,f.x)(S,"hide_gsuite_invite_option"):!1}l(B,"isGoogleDirectoryDisabled")},711474:(j,T,e)=>{"use strict";e.d(T,{A:()=>s});var t=e(885850),n=e(710596);function s(a,c){const r=(0,t.Pu)(a,c&&c.id);return r?(0,n.$M)(r):null}l(s,"getImUnreadCountByMember")},502669:(j,T,e)=>{"use strict";e.d(T,{P:()=>r});var t=e(877500),n=e(965112),s=e(881805),a=e(988727),c=e(23219);function r(o,u){if(!o||!u||(0,n.g)(u))return!1;const m=(0,a.QI)(u);return(0,c.dk)(u)&&(m===(0,s.jV)(o)||m===(0,t.A)(u,"enterprise_user.enterprise_id"))}l(r,"isMemberFromOrg")},538146:(j,T,e)=>{"use strict";e.d(T,{S:()=>u});var t=e(368606),n=e(588830),s=e(988727),a=e(965112),c=e(13736),r=e(502669),o=e(988575);const u=l((m,i,d)=>{if((0,a.g)(i))return!1;if((0,r.P)(m,i)){if((0,c.S)(d))return!0;if((0,t.t)(d))return(0,n.R)(m,d).some(p=>(0,s.nO)(i,p))}const _=(0,o.c)(d);return(0,s.nO)(i,_)},"isMemberOnSomeChannelWorkspace")},832859:(j,T,e)=>{"use strict";e.d(T,{A:()=>v});var t=e(774102),n=e(840122),s=e(289123),a=e(36911),c=e(113574),r=e(437556),o=e(23219),u=e(974576),m=e(838942),i=e(672480),d=e(208925),_=e(649695),h=e(601026),p=e(923658);const A=23;function v(E,f,g){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Math.max((0,n.UL)(),g),I=arguments.length>4?arguments[4]:void 0;if(!(0,t.si)(E,f))return[];const O=(0,t.r7)(E,f);if(!O||!O.timestamps)return[];const M=(0,s.h8)(E,f),C=O.timestamps.slice(-y),P=(0,c.WR)(E);let L=[],x=[],F=!1;const V=[],B=[],D=[],S=[],R=[],w=[];let Y=!1;for(let Z=C.length-1;Z>=0;Z--){const ee=M[C[Z]],_e=(0,m.Hr)(ee);if(!_e)continue;if(I&&_e===P){Y=!0;continue}if(!(I?V.includes(_e)||D.includes(_e)||R.includes(_e):L.includes(_e))&&!(0,d.A)(ee)&&(0,i.A)(ee,P)){const G=(0,a.Sv)(E,f,_e),Ae=(0,r.nv)(E,_e);if(F||(F=!(G!=null&&G.isKnown)||(0,o.t8)(Ae)),!F&&(G!=null&&G.isKnown)&&(G!=null&&G.isMember)&&!(0,u.A)(Ae)&&!(0,o.oy)(Ae)){if(I){if((0,h.gd)(E,_e)==="active"?(0,p.Vd)(E,_e)?(D.push(_e),S.push(Ae)):(V.push(_e),B.push(Ae)):(R.push(_e),w.push(Ae)),B.length===g||D.length+w.length===A-g)break}else if(L.push(_e),x.push(Ae),x.length===g)break}}}if(F)return[];if(I&&(B.length===g?(x=B,L=V):(x=B.concat(S.slice(0,g-B.length)),L=V.concat(D.slice(0,g-R.length)),x.length<g&&(x=x.concat(w.slice(0,g-B.length)),L=L.concat(R.slice(0,g-R.length))))),x.length>=g)return x;const Q=(0,_.$)(E,f);if(!Q.length)return[];for(let Z=0;Z<Q.length;Z++){const ee=Q[Z];if(ee&&!L.includes(ee)&&(I&&ee===P?Y=!0:(L.push(ee),x.push((0,r.nv)(E,ee)))),x.length===g)break}return x.length===0&&Y&&(L.push(P),x.push((0,r.nv)(E,P))),x}l(v,"getLastNRelevantMembersInChannel")},95129:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(838942),n=e(208925),s=e(394045);const c=l(r=>!!((0,t.dK)(r)||(0,t.aw)(r)||(0,s.ys)(r)||(0,n.A)(r)),"isNonHumanMessage")},208925:(j,T,e)=>{"use strict";e.d(T,{A:()=>s});var t=e(838942),n=e(793434);function s(a){return(0,t.Hr)(a)===n.Q$}l(s,"isSlackbotMessage")},280743:(j,T,e)=>{"use strict";e.d(T,{$N:()=>I,Tg:()=>M,WJ:()=>C,Wm:()=>g,XN:()=>O,im:()=>E});var t=e(339241),n=e(885850),s=e(129318),a=e(919781),c=e(850540),r=e(579026),o=e(57238),u=e(325846),m=e(327408),i=e(946073),d=e(43335),_=e(273563),h=e(519543),p=e(70433),A=e(727140),v=e(420641),E;(function(P){P.MESSAGE="message",P.FILE="file",P.MEMBER="member",P.ROOM="room",P.FREE_WILLY="free-willy",P.QUIP="quip",P.SEARCH="search",P.SLACKHELP="slackhelp",P.SHORTCUT_LINK_TRIGGER="shortcuts",P.HUDDLE="huddle",P.LIST="list",P.CHANNEL_CANVAS="canvas",P.ORG_CHART="org_chart",P.WIDGETS="widgets"})(E||(E={}));function f(P,L){if(!L)return null;const x=!1;return(0,n.OL)(P,L,x)||(0,n.Pu)(P,L.replace(/^@/,""))||(0,n.Os)(P,L)}l(f,"findChannelByIdentifier");function g(P){switch(P){case"archives":case"messages":case"conversation":return E.MESSAGE;case"file":case"files":return E.FILE;case"team":return E.MEMBER;case"calls":return E.ROOM;case"free-willy":return E.FREE_WILLY;case"docs":return E.QUIP;case"search":return E.SEARCH;case"slackhelp":return E.SLACKHELP;case"shortcuts":return E.SHORTCUT_LINK_TRIGGER;case"huddle":return E.HUDDLE;case"lists":return E.LIST;case"canvas":return E.CHANNEL_CANVAS;case"org_chart":return E.ORG_CHART;case"widgets":return E.WIDGETS;default:return null}}l(g,"getPermalinkType");function y(P,L,x,F){const V=(0,t.A)(L.split("/")),B=g(V[0]);switch(B){case E.MESSAGE:{var D;const Ee=V[1],G=f(P,Ee),Ae=G&&G.id||Ee;if(!Ae)return null;if(V[2]==="tabs"){var S;return{type:B,channelId:Ae,tabId:(S=V[3])===null||S===void 0?void 0:S.toString()}}const ce=(0,a.nT)(x),de=(0,_.A)(V[2]),oe=(0,_.A)((D=ce.thread_ts)===null||D===void 0?void 0:D.toString());return{type:B,channelId:Ae,ts:de,threadTs:oe}}case E.HUDDLE:{if(!V[1])return null;let Ee=null,G;if((0,d.A)(V[1])?Ee=V[1]:(0,d.A)(V[2])&&(G=V[1],Ee=V[2]),Ee){const Ae=f(P,Ee),ce=Ae&&Ae.id||Ee;return ce?{type:B,channelId:ce,teamId:G}:null}return(0,h.bU)(V[1])?{type:B,roomId:V[1]}:null}case E.FILE:{const Ee=V[2];return(0,o.A)(Ee)?{type:B,fileId:Ee}:null}case E.MEMBER:{const Ee=V[1];return(0,u.A)(Ee)?{type:B,memberId:Ee}:null}case E.ROOM:{const Ee=V[1];if(Ee&&(0,h.bU)(Ee))return{type:B,roomId:Ee};const G=V.length>2?V[2]:null;return G&&(0,h.cd)(G)?{type:B,callId:G,channelId:V[1]}:G&&(0,h.bU)(G)?{type:B,roomId:G,teamId:V[1]}:null}case E.FREE_WILLY:{const Ee=V[2];return Ee&&(0,h.cd)(Ee)?{type:B,callId:Ee,channelId:V[1]}:Ee&&(0,h.bU)(Ee)?{type:B,roomId:Ee,teamId:V[1]}:null}case E.QUIP:{const Ee=V[1],G=V[2];if(G&&(0,o.A)(G)&&F!=="app"){var R,w;const Ae=(0,a.nT)(x),ce=(0,_.A)((R=Ae.focus_thread_ts)===null||R===void 0?void 0:R.toString())||"";return{type:B,fileId:G,teamId:Ee,focusThreadTs:ce,focusSectionId:((w=Ae.focus_section_id)===null||w===void 0?void 0:w.toString())||""}}return null}case E.LIST:{const Ee=V[2];if(Ee&&(0,o.A)(Ee)){var Y,Q,Z;const G=(0,a.nT)(x),Ae=(0,_.A)((Y=G.focus_thread_ts)===null||Y===void 0?void 0:Y.toString())||"";return{type:B,fileId:Ee,recordId:((Q=G.record_id)===null||Q===void 0?void 0:Q.toString())||"",viewId:((Z=G.view_id)===null||Z===void 0?void 0:Z.toString())||"",focusThreadTs:Ae}}return null}case E.SEARCH:{const Ee=V[1];return{type:B,encodedSearchString:Ee}}case E.SLACKHELP:{if(V.length>=2){if((0,m.A)(V[2]))return{type:B,articleId:V[2]};if(V[1]==="whats_new")return{type:B,articleId:"whats_new"}}return{type:B}}case E.SHORTCUT_LINK_TRIGGER:return(0,i.A)(V[1])?{type:B,triggerId:V[1]}:null;case E.CHANNEL_CANVAS:{var ee,_e;const Ee=V[1],G=f(P,Ee),Ae=G&&G.id||Ee;if(!Ae)return null;const ce={type:B,channelId:Ae},de=(0,a.nT)(x),oe=(ee=de.focus_section_id)===null||ee===void 0?void 0:ee.toString(),$=(_e=de.last_read_ts)===null||_e===void 0?void 0:_e.toString();if(oe&&(ce.focusSectionId=oe),$){const re=$.length<13?1e3:1;ce.lastReadTs=Number($)*re}return ce}case E.ORG_CHART:{const Ee=V[1];return(0,u.A)(Ee)?{type:B,memberId:Ee}:null}case E.WIDGETS:return{type:B,widgetId:V[1]};default:return null}}l(y,"getPermalinkParams");function I(P,L){if(!L)return null;const x=(0,r.Ay)(L);return O(P,x)}l(I,"parsePermalink");function O(P,L){const{hostname:x,pathname:F,search:V}=L;if(!x||!F||!(0,c.A)(x))return null;let B;x!=="slack.com"&&(B=x.split(".")[0]);const D=y(P,F,V,B);return D?{subdomain:B,...D}:null}l(O,"parsePermalinkFromParsedUrl");function M(P,L){const x={channel:null,team:null};if(!P||!L)return x;const F=I(P,L);if(!F)return x;const{subdomain:V,channelId:B}=F,D=(0,n.OL)(P,B),S=(0,s.lL)(P,V);return{channel:D,team:S}}l(M,"getTeamAndChannelFromPermalink");function C(P,L){const x=(0,v.A)(P,L.subdomain);if(x)switch(L.type){case E.FILE:if(L.channelId&&L.fileId)return(0,p.M5)(A.De,{teamId:x,entityId:L.channelId,fileId:L.fileId});break;case E.MEMBER:if(L.channelId&&L.memberId)return L.ts?(0,p.M5)(A.Q$,{teamId:x,entityId:L.channelId,memberId:L.memberId,timestamp:L.ts}):(0,p.M5)(A.Q$,{teamId:x,entityId:L.channelId,memberId:L.memberId});break;case E.MESSAGE:if(L.channelId)return L.ts&&L.threadTs?(0,p.M5)(A.lM,{teamId:x,entityId:L.channelId,threadId:`${L.channelId}-${L.threadTs}`,replyTs:L.threadTs}):L.ts?(0,p.M5)(A._G,{teamId:x,entityId:L.channelId,timestamp:L.ts}):(0,p.M5)(A._G,{teamId:x,entityId:L.channelId});break;default:}}l(C,"getSonicUrlForPermalink")},217840:(j,T,e)=>{"use strict";e.d(T,{_:()=>m});var t=e(566401),n=e(742531),s=e(154442),a=e(23219),c=e(458939),r=e(437556),o=e(704534),u=e(248579);const m=l((i,d)=>{let{prefName:_}=d;if((0,t.A)(_))return!1;const h=(0,r.cA)(i);if((0,a.QR)(h)||(0,c.sV)(i))return!1;const{type:p,user:A}=(0,u.SI)(i,_)||{};if((0,n.A)(A,h.id))return!0;switch(p==null?void 0:p[0]){case"PRIMARY_OWNER":return(0,s.nA)(h);case"ORG_OWNERS":return(0,s.rr)(h);case"ORG_ADMINS_AND_OWNERS":return(0,s.n5)(h);default:return(0,o.$G)(i)}},"checkChannelMgmtPrefCascade")},658907:(j,T,e)=>{"use strict";e.d(T,{L:()=>m,g:()=>o});var t=e(436802),n=e(84165),s=e(881805),a=e(643816),c=e(885850),r=e(127904);const o=l((i,d,_,h)=>{if((0,r.X)(i))return!0;const p=(0,t.p)(i,d,_);return Object.entries(p).map(A=>{let[v,E]=A;return[v,h(E)]}).some(A=>{let[v,E]=A;return(0,n.Ic)(i,E,v)})},"canUserDoCustomTeamPrefForTeamIds"),u=l((i,d,_,h)=>{if(!_)return!1;const p=(0,a.f)(i,_);return p?o(i,d,p,h):!1},"canUserDoCustomTeamPrefForChannel"),m=l(i=>({getWorkspaceIdsOnWhichUserCanDoCustomTeamPref:(d,_)=>(0,s.VO)(d).filter(p=>o(d,_,[p],i)),canUserDoCustomTeamPrefInSomeWorkspace:(d,_)=>{const h=(0,s.VO)(d);return o(d,_,h,i)},canUserDoCustomTeamPrefForChannel:(d,_,h)=>u(d,_,h,i),canUserDoCustomTeamPrefForChannelById:(d,_,h)=>{const p=(0,c.OL)(d,h);return u(d,_,p,i)}}),"createUserCanDoCustomTeamPrefRules")},417747:(j,T,e)=>{"use strict";e.d(T,{Cr:()=>c,DH:()=>a});var t=e(658907),n=e(84165);const s=l(u=>u?n.eT.ADMIN:n.eT.RA,"mapOnlyAdminToWhoCanStyle"),{getWorkspaceIdsOnWhichUserCanDoCustomTeamPref:a,canUserDoCustomTeamPrefInSomeWorkspace:c,canUserDoCustomTeamPrefForChannel:r,canUserDoCustomTeamPrefForChannelById:o}=(0,t.L)(s)},562667:(j,T,e)=>{"use strict";e.d(T,{V:()=>c,X:()=>a});var t=e(885850),n=e(643816),s=e(84165);const a=l((r,o,u)=>{if(!u)return!1;const m=(0,n.f)(r,u);return m?(0,s.TE)(r,o,m):!1},"canUserDoTeamPrefForChannel"),c=l((r,o,u)=>{const m=(0,t.OL)(r,u);return a(r,o,m)},"canUserDoTeamPrefForChannelById")},961496:(j,T,e)=>{"use strict";e.d(T,{l:()=>a});var t=e(3280),n=e(934861),s=e(129318);const a=l(c=>(0,t.F)(c)&&!(0,n.tc)((0,s.H7)(c)),"teamCanCreateStandaloneCanvas")},470757:(j,T,e)=>{"use strict";e.d(T,{J:()=>s});var t=e(120119),n=e(320391);const s=l((a,c)=>{var r,o;let u,m,i;a&&(a.subtype==="file_comment"?[m,u]=["file_comment",a.comment]:(0,t.A)(a.subtype)?[m,u]=["file",c]:[m,u,i]=["message",a,a.channel]);const d=m==="message"?(r=u)===null||r===void 0?void 0:r.ts:(o=u)===null||o===void 0?void 0:o.id;return u&&(u._rxn_key||(0,n.B)(m,d,i))},"getReactionKey")},232150:(j,T,e)=>{"use strict";e.d(T,{t:()=>s});var t=e(915773),n=e(16e3);const s=(0,t.Ay)(a=>!((0,n.Bf)(a)||!(0,n.pr)(a)));s.meta={name:"createSelector",key:"createSelectorshouldShowAppsLink",description:a=>!((0,n.Bf)(a)||!(0,n.pr)(a))}},446719:(j,T,e)=>{"use strict";e.d(T,{R:()=>m});var t=e(129318),n=e(396386),s=e(97059),a=e(250100);const c=l((i,d)=>!(0,n.JM)(d)&&(0,s.ju)(d)&&!(0,a.N)(d),"canBeDisconnected");var r=e(809617),o=e(934861),u=e(324053);function m(i,d){if(d&&!c(i,d))return!1;if(d&&(0,u.M)(i,d))return!0;const _=(0,t.H7)(i);return(0,o.tc)(_)?!0:(0,r.I)(i,d)}l(m,"canUserDisconnectExternalSharedChannel")},390638:(j,T,e)=>{"use strict";e.d(T,{D7:()=>g,JO:()=>v,NU:()=>f,wi:()=>d});var t=e(857456),n=e(885850),s=e(129318),a=e(4990),c=e(643816),r=e(396386),o=e(151488),u=e(91153),m=e(934861),i=e(881006);const d={InvalidParams:Symbol("invalid_params"),FreeTeam:Symbol("free_team"),CannotRequest:Symbol("cannot_request_ext_shared"),InvalidChannel:Symbol("invalid_channel")},_={ok:!1,reason:d.InvalidParams},h={ok:!1,reason:d.FreeTeam},p={ok:!1,reason:d.CannotRequest},A={ok:!1,reason:d.InvalidChannel},v=l((y,I)=>{if(!(0,r.jq)(I))return _;const O=(0,o.k)(y),M=(0,m.qR)((0,s.H7)(y));if(!O&&!M)return h;const P=(0,u.lR)(y,{mustEveryWorkspaceBeAllowed:!0,teamIds:(0,c.f)(y,I)});return!(P!=null&&P.ok)&&(0,t.A)(P==null?void 0:P.reasons,u.jM.UserCannotCreateChannel,u.jM.AllowedWorkspacePref).length>0?p:(0,a.Z)(y,I)?i.O:A},"canUserInviteExternalMembersToChannelWithReason"),E=l((y,I)=>{const M=(0,n.OL)(y,I,!1);return M?v(y,M):_},"canUserInviteExternalMembersToChannelWithReasonById"),f=l((y,I)=>v(y,I).ok,"canUserInviteExternalMembersToChannel"),g=l((y,I)=>E(y,I).ok,"canUserInviteExternalMembersToChannelById")},809617:(j,T,e)=>{"use strict";e.d(T,{I:()=>A,r:()=>p});var t=e(437556),n=e(129318),s=e(208053),a=e(151488),c=e(154442),r=e(81527),o=e(728596),u=e(804892),m=e(934861),i=e(303878),d=e(704534),_=e(742531),h=e(217239);function p(v){const E=(0,t.cA)(v),f=(0,n.H7)(v),g=(0,u.u)(v);if(!(g!=null&&g.value))return!1;if((0,a.k)(v)){let y=[];switch(g.value){case o.GX.ALL_ADMINS_AND_OWNERS:return(0,i.EC)(v)||(0,c.n5)(E)||(0,c.rr)(E);case o.GX.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED:return(0,c.n5)(E)||(0,c.rr)(E)?!0:(y=(0,s.QF)(v),!!((0,_.A)(g.users,E==null?void 0:E.id)||(0,h.A)(g.userGroups,y).length));case o.GX.EVERYONE:return!(0,r.Ez)(E);case o.GX.TOPLEVEL_ADMINS_AND_OWNERS:default:return(0,c.n5)(E)||(0,c.rr)(E)}}if((0,m.qR)(f))switch(g.value){case o.GX.TOPLEVEL_OWNERS:return(0,d.p2)(v);case o.GX.EVERYONE:return!(0,r.Ez)(E);case o.GX.TOPLEVEL_ADMINS_AND_OWNERS:default:return(0,d.p2)(v)||(0,d.Zo)(v)}return!1}l(p,"canUserManageExternalSharedChannels");function A(v,E){const f=(0,t.cA)(v),g=(0,n.H7)(v),y=(0,u.u)(v);if(!(y!=null&&y.value))return!1;if((0,a.k)(v)){let I=[];switch(y.value){case o.GX.ALL_ADMINS_AND_OWNERS:return(0,i.S4)(v,E);case o.GX.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED:return(0,c.n5)(f)||(0,c.rr)(f)?!0:(I=(0,s.QF)(v),!!((0,_.A)(y.users,f==null?void 0:f.id)||(0,h.A)(y.userGroups,I).length));case o.GX.EVERYONE:return!(0,r.Ez)(f);case o.GX.TOPLEVEL_ADMINS_AND_OWNERS:default:return(0,c.n5)(f)||(0,c.rr)(f)}}if((0,m.qR)(g))switch(y.value){case o.GX.TOPLEVEL_OWNERS:return(0,d.p2)(v);case o.GX.EVERYONE:return!(0,r.Ez)(f);case o.GX.TOPLEVEL_ADMINS_AND_OWNERS:default:return(0,d.p2)(v)||(0,d.Zo)(v)}return!1}l(A,"canUserManageSlackConnectChannel")},418698:(j,T,e)=>{"use strict";e.d(T,{u:()=>c});var t=e(129318),n=e(97059),s=e(934861),a=e(4990);const c=l((r,o)=>{const u=(0,t.H7)(r);return(0,s.tc)(u)&&(0,n.ju)(o)&&(0,a.Z)(r,o)},"getIsCurrentTeamSponsoredInSlackConnectChannel")},735651:(j,T,e)=>{"use strict";e.d(T,{S:()=>r});var t=e(176861),n=e(437556),s=e(965112),a=e(23219),c=e(846860);const r=l((o,u)=>{const m=(0,n.nv)(o,u);return(0,a.Zx)(m)?!1:(0,s.g)(m)?!!((0,c.bo)(o,u)&&(0,c.zP)(o,u)&&!(0,t.y)(o,u)):!0},"isMemberConnectedById")},804892:(j,T,e)=>{"use strict";e.d(T,{u:()=>s});var t=e(728596),n=e(89650);const s=l(a=>{const c=t.yY.WHO_CAN_MANAGE_SHARED_CHANNELS;return(0,n.o)(a,c)},"getWhoCanManageSharedChannelsPref")},20967:(j,T,e)=>{"use strict";e.d(T,{DP:()=>ae,qc:()=>W,RN:()=>q,qA:()=>ie,Bs:()=>K,Hv:()=>U,fK:()=>H,tY:()=>Te,GE:()=>J,b:()=>N,iH:()=>Me,mE:()=>Ie});var t=e(742531),n=e(919758),s=e(89149),a=e(437556),c=e(885850),r=e(81527),o=e(793434),u=e(853660),m=e(526797),i=e(887530),d=e(699069),_=e(710596),h=e(368606),p=e(97059),A=e(446719),v=e(397664),E=e(396386),f=e(278406),g=e(65695),y=e(790310);const I={...g.u9,CantDisconnectExtShared:Symbol("cant_disconnect_ext_shared"),WhoCanManagePref:Symbol("who_can_manage_shared_channels")},O={ok:!1,reason:I.ChannelNotFound},M={ok:!1,reason:I.ChannelTypeNotSupported},C={ok:!1,reason:I.CantDisconnectExtShared},P={ok:!1,reason:I.WhoCanManagePref},L={ok:!0},x=l((ne,fe)=>{if(!(0,E.jq)(fe))return O;if((0,y.K3)(ne,fe))return M;if((0,p.ju)(fe)&&!(0,A.R)(ne,fe))return C;const be=(0,_.FB)(fe),Be=(0,v.Om)(ne,{channelId:be});if((0,h.t)(fe)){if(Be)return L;if(!(0,f.E)(ne))return P}return(0,g.iz)(ne,fe)},"canUserArchiveChannelWithReasons"),F=l((ne,fe)=>x(ne,fe).ok,"canUserArchiveChannel");var V=e(896431),B=e(440863),D=e(682583),S=e(119110),R=e(649098),w=e(171353),Y=e(135713);const Q=l(ne=>ne&&(0,Y._Z)(ne,"feedback_disabled_orgs")==="treatment","isOrgInFeedbackDisabledList");var Z=e(488722),ee=e(643816),_e=e(310731);const Ee=new R.Ay("cmd_handlers"),{UNKNOWN_COMMAND:G,UNSUPPORTED_IN_THREAD:Ae,UNSUPPORTED_IN_SHORTCUTS_MENU:ce,CUSTOM_ERROR:de}=o.gu,oe=["/away","/collapse","/color","/colour","/dm","/expand","/feedback","/keys","/me","/msg","/s","/search","/shortcuts","/shrug","/slack_diagnostic_report","/slackdevtools","/star","/gif","/active","/giphy","/iamcal","/mute","/remind"],$=["/away","/active","/keys","/shortcuts","/apps","/rename","/feedback","/mute","/dnd","/leave","/part","/close","/call"],re=["/slackdebugunreads","/slackgov","/slackjspath","/slackstaging"],ue=["/slackaccessibility","/slackgov"],te=["/leave","/close","/part","/archive","/topic"],ae=l(ne=>ne&&ne.alias_of,"getCommandAliasOf"),H=l(ne=>ne&&ne.name,"getCommandName"),U=l(ne=>ne&&(ne.desc||ne.description),"getCommandDesc"),N=l(ne=>ne&&ne.usage,"getCommandUsage"),K=l(ne=>ne&&(ne.canonical_name||ne.name),"getCommandCanonicalName"),W=l(ne=>ne&&ne.aliases,"getCommandAliases"),J=l(ne=>ne&&ne.type,"getCommandType"),q=l(ne=>ne&&ne.app,"getCommandApp"),ie=l(ne=>ne==null?void 0:ne.appName,"getCommandAppName"),Te=l((ne,fe,be)=>{const Be=(0,c.OL)(ne,be),We=Be?(0,ee.f)(ne,Be)||[]:[];return fe.teams&&We.length&&fe.appName!=="Slack"&&!fe.isWorkspaceAgnostic?fe.teams.filter(ve=>We.includes(ve)):[]},"getCommandRelatedWorkspaces"),Me=l(function(ne,fe){let{channelId:be}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!fe)return!1;const Be=K(fe);return Be==="/leave"?(0,i.Y9)(ne,be):Be==="/remove"?(0,m.Vj)(ne,be):["/topic","/search","/invite","/invite_people","/status","/dm","/msg"].indexOf(Be)>-1?!1:!!fe.autocomplete},"isAutocompleteCommand"),ke=l(ne=>!!(ne&&ne.isServer),"isServerCommand"),Pe=l(function(ne){let fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;switch(ne){case V.a_.InvalidDm:return Ee.t("Direct messages don\u2019t even have a name! Ergo, regrettably, you can\u2019t change it.");case V.a_.OwnerRequired:return Ee.t("Only Workspace Admins (or the channel creator) are allowed to rename channels.");case V.a_.InvalidParams:return fe?Ee.t("Channel names can\u2019t contain spaces, periods, or most punctuation. Try again?"):Ee.t("You don\u2019t have permission to rename.");case V.a_.RestrictedUser:return fe?Ee.t("Your admins have limited who can rename multi-workspace channels."):Ee.t("You don\u2019t have permission to rename.");case V.a_.OrgSharedSettings:return fe?Ee.t("Your admins have limited who can rename multi-workspace channels."):Ee.t("You don\u2019t have permission to rename.");case V.a_.InvalidChannelType:return Ee.t("This channel can\u2019t be renamed.",{fallbackHash:"796ff139eccb4a046e980e400012eb16b22449d8"});default:return Ee.t("You don\u2019t have permission to rename.")}},"getRenameDisabledFeedback"),Ie=l(function(ne,fe){let{channelId:be,isThread:Be,isShortcutsMenu:We}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!ne||!fe)return{isEnabled:!1,reason:G};const Re=K(fe),ve=J(fe),xe=(0,c.OL)(ne,be);if(!(0,u.L)(ne)&&(0,t.A)(re,Re))return{isEnabled:!1,reason:G};if(!(0,S.y3)()&&(0,t.A)(ue,Re))return{isEnabled:!1,reason:G};if((0,y.jT)(xe)&&(0,t.A)(te,Re))return{isEnabled:!1,reason:G};if(Be&&!(0,t.A)(oe,Re))return{isEnabled:!1,reason:Ae};if(We&&(0,t.A)($,Re))return{isEnabled:!1,reason:ce};if(ve==="custom"||ve==="service"){const je=(0,s.x)(ne,"commands_only_regular"),Ke=(0,a.cA)(ne);if(je&&(0,r.Ez)(Ke))return{isEnabled:!1,reason:G}}if(fe.teams){const je=(0,ee.f)(ne,xe)||[];if(!fe.teams.filter(ht=>je.includes(ht)).length){const ht=`Command not run. No intersection found between channel teams (${je}) and command teams (${fe.teams})`;return{isEnabled:!1,reason:de,logString:ht,feedback:Ee.t("This command is not available in this channel")}}}if(Re==="/open"||Re==="/feed"){const je=(0,a.cA)(ne);if((0,r.Ez)(je))return{isEnabled:!1,reason:G}}else if(Re==="/topic"){const{ok:je,reason:Ke}=(0,d.X)(ne,be);if(!je)return{isEnabled:!1,reason:de,feedback:(0,D.Bw)(Ke)}}else if(Re==="/invite"){const je=(0,a.cA)(ne);if((0,r.Yd)(je))return{isEnabled:!1,reason:G};if(!(0,_.bl)(xe))return{isEnabled:!1,reason:de,feedback:Ee.t("You don\u2019t have permission to invite people.")};if((0,r.Ez)(je)&&!(0,E.Zp)(xe)||(0,Z.A)(ne,je,xe))return{isEnabled:!1,reason:de,feedback:Ee.t("You don\u2019t have permission to invite people.")}}else if(Re==="/invite_people"){if(!(0,B.Lz)(ne))return{isEnabled:!1,reason:de,feedback:Ee.t("You don\u2019t have permission to invite people.")}}else if(Re==="/rename"){const{ok:je,reason:Ke}=(0,V.be)(ne,be);if(!je)return{isEnabled:!1,reason:de,feedback:Pe(Ke)}}else if(Re==="/archive"){if(!F(ne,xe))return{isEnabled:!1,reason:G}}else if(Re==="/call"){if(!(0,w.lp)(ne,be)||(0,w.tO)(ne))return{isEnabled:!1,reason:G}}else if(Re==="/slacktrace"){if(!(0,n.Rg4)())return{isEnabled:!1,reason:de,feedback:Ee.t("Please run /slacktrace in the latest version of the Slack desktop app.")}}else if(Re==="/feedback"){if(Q(ne))return{isEnabled:!1,reason:G}}else if(Re==="/gif"){if(!(0,_e.R4)(ne))return{isEnabled:!1,reason:G};if(!(0,_e.BH)(ne))return{isEnabled:!1,reason:de,feedback:Ee.t("Attach a GIF is not enabled.")}}return{isEnabled:!0}},"isSlashCommandEnabled"),X={getRenameDisabledFeedback:Pe,TS_ONLY_COMMANDS:re,DESKTOP_APP_ONLY_COMMANDS:ue}},825047:(j,T,e)=>{"use strict";e.d(T,{z:()=>a});var t=e(881805),n=e(353341),s=e(934861);function a(c,r){if(!c||!r)return!1;const o=(0,s.ZT)(r);if((0,t.Kc)(c)===o||(0,t.ZT)(c)===o)return!1;const u=(0,t.jV)(c);return u&&u===r.enterprise_id?!1:(0,n.R)(c,r.id)}l(a,"isTeamExternal")},837283:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>E,w2:()=>A});var t=e(915773),n=e(973553),s=e(271338),a=e(433719),c=e(925827),r=e(52067),o=e(321486),u=e(645518);const i=l(()=>(0,n.A)(),"isDarkModeFeatureEnabled");var d=e(119110),_=e(66686),h=e.n(_);const p=l(()=>{var g;const y=(0,d.y3)()||((g=window.matchMedia)===null||g===void 0?void 0:g.call(window,"(prefers-color-scheme)").media)!=="not all",I=(0,d.cX)()&&(0,u.Z)((0,u.P)(h().osversion),(0,u.P)("10.14"))>=0,O=(0,d.jy)(),M=(0,d.j9)()&&(0,d.dY)("4.36.136"),C=I||O||M,P=(0,d.y3)()||(0,s.A)()||(0,a.A)()||(0,c.A)()||(0,r.A)()||(0,o.A)();return(0,n.A)()&&y&&C&&P},"computeSystemSyncIsSupportedOnBoot"),A=p(),v=(0,t.Ay)(g=>!!A&&!!i(g));v.meta={name:"createSelector",key:"createSelectorgetSystemSyncIsSupported",description:g=>!!A&&!!i(g)};const E=v,f={computeSystemSyncIsSupportedOnBoot:p}},197059:(j,T,e)=>{"use strict";e.d(T,{i:()=>c});var t=e(437556),n=e(113574),s=e(154442),a=e(562667);const c=l((r,o)=>{const u=(0,t.cA)(r);return(0,n.u8)(r)&&(0,s.n5)(u)?!0:(0,a.V)(r,"who_can_at_channel",o)},"canNonAdminsAtChannelOrGroupBySettings")},545482:(j,T,e)=>{"use strict";e.d(T,{g:()=>n});var t=e(562667);const n=l((s,a)=>(0,t.V)(s,"who_can_at_everyone",a),"canNonAdminsAtMentionEveryoneBySettings")},820447:(j,T,e)=>{"use strict";e.d(T,{D:()=>c});var t=e(458939),n=e(417747),s=e(135713),a=e(397664);const c=l(r=>(0,s._Z)(r,"light_read_emoji_only_admins_pref_migration")==="on"?(0,a.eq)(r):!(0,t.sV)(r)&&(0,n.Cr)(r,"emoji_only_admins"),"canUserAddEmoji")},161792:(j,T,e)=>{"use strict";e.d(T,{S:()=>u});var t=e(885850),n=e(197059),s=e(693761),a=e(303878),c=e(135713),r=e(397664);const o=l(m=>(0,c._Z)(m,"light_read_who_can_at_channel_pref_migration")==="on","shouldUsePermissions");function u(m,i){const d=(0,t.gT)(m,i)&&(0,t.OL)(m,i)||void 0;return o(m)?(0,r.E2)(m,{channelId:i})&&!(0,s.i)(m,d==null?void 0:d.id,{allowToAdmins:!0}):(0,a.yG)(m,d)?!0:(0,n.i)(m,i)&&!(0,s.i)(m,d==null?void 0:d.id,{allowToAdmins:!0})}l(u,"canUserAtChannelInChannelById")},630686:(j,T,e)=>{"use strict";e.d(T,{W:()=>r});var t=e(545482),n=e(885850),s=e(693761),a=e(250100),c=e(113574);const r=l((o,u)=>{const m=(0,n.gT)(o,u)&&(0,n.OL)(o,u)||void 0;return!u||!m||!(0,a.N)(m)?!1:(0,c.u8)(o)?(0,t.g)(o,u)&&!(0,s.i)(o,m==null?void 0:m.id,{allowToAdmins:!0}):(0,t.g)(o,u)},"canUserAtEveryoneInChannelById")},567693:(j,T,e)=>{"use strict";e.d(T,{i:()=>m,q:()=>u});var t=e(710596),n=e(303878),s=e(396386),a=e(885850),c=e(135713),r=e(397664),o=e(640100);const u=l((i,d)=>{const _=(0,c._Z)(i,"restrict_channel_manager_ext_invites");if(!(0,s.jq)(d))return!1;const h=(0,t.FB)(d),p=(0,o.D)(i,d);return _?p&&((0,n.S4)(i,d)||(0,t.bl)(d)&&(0,r.MN)(i,{channelId:h})):p},"canUserInviteExternalUsersToChannel"),m=l((i,d)=>{const h=(0,a.OL)(i,d,!1);return h?u(i,h):!1},"canUserInviteExternalUsersToChannelById")},786347:(j,T,e)=>{"use strict";e.d(T,{Q:()=>u,e:()=>m});var t=e(710596),n=e(396386),s=e(303878),a=e(885850),c=e(135713),r=e(397664),o=e(640100);const u=l((i,d)=>{const _=(0,c._Z)(i,"invite_to_channel_permission")==="on";if(!(0,n.jq)(d))return!1;const h=(0,t.FB)(d),p=(0,o.D)(i,d);return _&&(0,n.Zp)(d)?p&&((0,s.S4)(i,d)||(0,t.bl)(d)&&(0,r.oo)(i,{channelId:h})):p},"canUserInviteInternalUsersToChannel"),m=l((i,d)=>{const h=(0,a.OL)(i,d,!1);return h?u(i,h):!1},"canUserInviteInternalUsersToChannelById")},640100:(j,T,e)=>{"use strict";e.d(T,{D:()=>_,X:()=>h});var t=e(362887),n=e(710596),s=e(396386),a=e(850960),c=e(671550),r=e(439642),o=e(303878),u=e(458939),m=e(885850),i=e(135713),d=e(397664);const _=l((p,A)=>{const v=(0,i._Z)(p,"invite_to_channel_permission")==="on",E=(0,i._Z)(p,"restrict_channel_manager_ext_invites")==="on";if(!(0,s.jq)(A))return!1;const f=(0,n.FB)(A);if((0,u.AB)(p)||(0,a.F)(A)||!(0,r.V)(A)||(0,t.R)(p)&&(0,c.R)(p,A))return!1;const g=E?(0,d.MN)(p,{channelId:f}):!0;return v&&(0,s.Zp)(A)?(0,o.S4)(p,A)||(0,n.bl)(A)&&((0,d.oo)(p,{channelId:f})||g):(0,o.S4)(p,A)||(0,n.bl)(A)},"canUserInviteToChannel"),h=l((p,A)=>{const E=(0,m.OL)(p,A,!1);return E?_(p,E):!1},"canUserInviteToChannelById")},526797:(j,T,e)=>{"use strict";e.d(T,{CE:()=>v,Vj:()=>O,VJ:()=>I});var t=e(885850),n=e(135713),s=e(397664),a=e(396386),c=e(850960),r=e(881006);const o={InvalidDm:Symbol("invalid_dm"),ArchivedChannel:Symbol("archived_channel"),RequiredChannel:Symbol("required_channel")},u={ok:!1,reason:o.ArchivedChannel},m={ok:!1,reason:o.InvalidDm},i={ok:!1,reason:o.RequiredChannel};function d(M,C){const P=(0,t.gT)(M,C)?(0,t.OL)(M,C):null;return(0,c.F)(P)?u:(0,a.LI)(P)||(0,a.yz)(P)?m:(0,a.gx)(P)?i:r.O}l(d,"isChannelKickableWithReason");function _(M,C){return d(M,C).ok}l(_,"isChannelKickable");var h=e(458939),p=e(562667),A=e(185779);const v={...o,InvalidParams:Symbol("invalid_params"),UserIsRestricted:Symbol("user_is_restricted"),RestrictedPublicChannel:Symbol("restricted_public_channel"),RestrictedPrivateChannel:Symbol("restricted_private_channel")},E={ok:!1,reason:v.InvalidParams},f={ok:!1,reason:v.UserIsRestricted},g={ok:!1,reason:v.RestrictedPublicChannel},y={ok:!1,reason:v.RestrictedPrivateChannel};function I(M,C){const P=(0,t.gT)(M,C)?(0,t.OL)(M,C):null;if(!(0,a.jq)(P))return E;if((0,h.sV)(M))return f;const L=d(M,C);if(!L.ok)return{ok:!1,reason:L.reason};const x=(0,s.ou)(M,{channelId:C}),F=(0,s.sX)(M,{channelId:C});if((0,n._Z)(M,"channel_manager_enhancements")==="on"&&(0,a.rW)(P)&&x)return r.O;const B=(0,n._Z)(M,"light_read_who_can_kick_channels_migration")==="on",D=(0,n._Z)(M,"light_read_who_can_kick_groups_pref_migration")==="on",S=(0,a.rW)(P)?"public":"private",R=S==="private"?A.Po:A.LI,w=S==="private"?A.tU:A.H7,Y=R(M)||w(M);let Q;if(B&&S==="public")Q=x;else if(D&&S==="private")Q=F;else{const Z=S==="private"?"who_can_kick_groups":"who_can_kick_channels";Q=(0,p.X)(M,Z,P)}return!Y&&!Q?S==="private"?y:g:r.O}l(I,"canUserKickFromChannelWithReason");function O(M,C){return I(M,C).ok}l(O,"canUserKickFromChannel")},185779:(j,T,e)=>{"use strict";e.d(T,{H7:()=>h,LI:()=>d,Po:()=>_,tU:()=>p});var t=e(742531),n=e(437556),s=e(89149),a=e(129318),c=e(151488),r=e(217840),o=e(934861),u=e(704534),m=e(135713),i=e(397664);const d=l(A=>(0,c.k)(A)?(0,m._Z)(A,"light_read_who_can_manage_public_channels_pref_migration")==="on"?(0,i.E1)(A):(0,r._)(A,{prefName:"who_can_manage_public_channels"}):!1,"canUserManagePublicChannelsInOrgDash"),_=l(A=>(0,c.k)(A)?(0,r._)(A,{prefName:"who_can_manage_private_channels"}):!1,"canUserManagePrivateChannelsInOrgDash"),h=l(A=>{const v=(0,a.H7)(A);return(0,o.Ny)(v)?(0,u.h3)(A):!1},"canUserManagePublicChannelsInTeamSite"),p=l(A=>{const v=(0,a.H7)(A);if(!(0,o.Ny)(v)||(0,o.NB)(v)&&!(0,s.x)(A,"has_compliance_export"))return!1;const E=(0,s.x)(A,"who_can_manage_private_channels_at_workspace_level");if(!E)return!1;const f=(0,n.cA)(A);if((0,t.A)(E.user,f.id))return(0,u.h3)(A);const g=E.type;switch(g&&g.length!==0?g[0]:null){case"NO_ONE":return!1;case"WORKSPACE_PRIMARY_OWNER":return(0,u.$G)(A);case"WORKSPACE_OWNERS":return(0,u.p2)(A);default:return!1}},"canUserManagePrivateChannelsInTeamSite")},896431:(j,T,e)=>{"use strict";e.d(T,{JJ:()=>C,a_:()=>h,be:()=>O,rY:()=>M});var t=e(885850),n=e(397664),s=e(735135),a=e(113574),c=e(185779),r=e(368606),o=e(396386),u=e(458939),m=e(303878),i=e(324053),d=e(278406),_=e(881006);const h={InvalidChannelType:Symbol("invalid_channel_type"),InvalidDm:Symbol("invalid_dm"),InvalidParams:Symbol("invalid_params"),OrgSharedSettings:Symbol("org_shared_settings"),OwnerRequired:Symbol("owner_required"),RestrictedUser:Symbol("restricted_user"),RestrictedAction:Symbol("restricted_action"),UserHasNoPermissions:Symbol("user_has_no_permissions")},p={ok:!1,reason:h.InvalidParams},A={ok:!1,reason:h.InvalidDm},v={ok:!1,reason:h.InvalidChannelType},E={ok:!1,reason:h.RestrictedUser},f={ok:!1,reason:h.OrgSharedSettings},g={ok:!1,reason:h.OwnerRequired},y={ok:!1,reason:h.UserHasNoPermissions},I=l((P,L)=>{if(!(0,o.jq)(L))return p;if((0,o.LI)(L)||(0,o.yz)(L))return A;if((0,o.rI)(L))return v;const x=(0,a.TZ)(P),F=(0,s.s)(P),V=(0,s.R)(P);if(!x)return F&&((0,o.Zp)(L)&&(0,c.Po)(P)||(0,o.rW)(L)&&(0,c.LI)(P))||V&&((0,o.Zp)(L)&&(0,c.tU)(P)||(0,o.rW)(L)&&(0,c.H7)(P))?_.O:y;const B=(0,d.E)(P)||(0,n.LN)(P);return(0,r.t)(L)&&!B?f:(0,i.M)(P,L)||(0,n.eC)(P,{channelId:L.id})?_.O:(0,u.sV)(P)||(0,u.AB)(P)?E:(0,m.S4)(P,L)?_.O:g},"canUserRenameChannelWithReason"),O=l((P,L)=>{const F=(0,t.OL)(P,L,!1);return F?I(P,F):p},"canUserRenameChannelWithReasonById"),M=l((P,L)=>I(P,L).ok,"canUserRenameChannel"),C=l((P,L)=>O(P,L).ok,"canUserRenameChannelById")},65695:(j,T,e)=>{"use strict";e.d(T,{NG:()=>P,iz:()=>C,u9:()=>_});var t=e(278406),n=e(135713),s=e(397664),a=e(710596),c=e(396386),r=e(850960),o=e(368606),u=e(97059),m=e(735090),i=e(303878),d=e(446719);const _={ChannelNotFound:Symbol("channel_not_found"),ChannelTypeNotSupported:Symbol("channel_type_not_supported"),CantArchiveGeneral:Symbol("cant_archive_general"),NotInChannel:Symbol("not_in_channel"),AlreadyArchived:Symbol("already_archived"),NotAllowedHomeExternallyShared:Symbol("not_allowed_home_ext_shared"),AwayExternallyShared:Symbol("away_ext_shared"),UserHasNoPermissions:Symbol("user_has_no_permissions"),DefaultOrgWideChannel:Symbol("default_org_wide_channel"),WhoCanManagePref:Symbol("who_can_manage_shared_channels")},h={ok:!1,reason:_.ChannelNotFound},p={ok:!1,reason:_.ChannelTypeNotSupported},A={ok:!1,reason:_.CantArchiveGeneral},v={ok:!1,reason:_.NotInChannel},E={ok:!1,reason:_.AlreadyArchived},f={ok:!1,reason:_.NotAllowedHomeExternallyShared},g={ok:!1,reason:_.AwayExternallyShared},y={ok:!1,reason:_.UserHasNoPermissions},I={ok:!1,reason:_.DefaultOrgWideChannel},O={ok:!1,reason:_.WhoCanManagePref},M={ok:!0},C=l((L,x)=>{const F=(0,n._Z)(L,"restrict_channel_permission_archive_channel")==="on";if(!(0,c.jq)(x))return h;if((0,c.LI)(x)||(0,c.yz)(x))return p;if((0,c.gx)(x))return A;if((0,r.F)(x))return E;if((0,m.b)(L,x))return g;if(!(0,i.S4)(L,x)&&!(0,a.bl)(x))return v;const B=(0,a.FB)(x);if(F&&(0,u.ju)(x)&&!(0,m.b)(L,x)&&!(0,d.R)(L,x))return f;const D=(0,s.Om)(L,{channelId:B});return(0,o.t)(x)&&!(0,t.E)(L)&&!(0,s.LN)(L,{channelId:B})?O:D?M:y},"canUserSeeArchiveChannelOptionWithReasons"),P=l((L,x)=>C(L,x).ok,"canUserSeeArchiveChannelOption")},699069:(j,T,e)=>{"use strict";e.d(T,{P:()=>f,X:()=>E});var t=e(885850),n=e(135713),s=e(710596),a=e(682583),c=e(396386),r=e(850960),o=e(458939),u=e(97059),m=e(19579),i=e(303878),d=e(671550),_=e(397664);const h={ok:!0},p={ok:!1,reason:a.CM},A={ok:!1,reason:a.Jr},v={ok:!1,reason:a.oP},E=l((g,y)=>{const I=(0,t.gT)(g,y)&&(0,t.OL)(g,y);return I?(0,c.JM)(I)&&(0,u.ju)(I)?A:(0,r.F)(I)?v:(0,n._Z)(g,"channel_manager_enhancements")==="on"&&(0,_.ig)(g,{channelId:y})?h:!(0,s.bl)(I)||!(0,m.c)(g,I)||(0,o.sV)(g)||(0,o.AB)(g)||(0,d.R)(g,I)&&!(0,i.S4)(g,I)?v:h:p},"canUserSetTopicForChannelWithReasonById"),f=l((g,y)=>E(g,y).ok,"canUserSetTopicForChannelById")},324053:(j,T,e)=>{"use strict";e.d(T,{M:()=>s});var t=e(437556),n=e(710596);const s=l((a,c)=>{const r=(0,t.cA)(a);return c?r.id===(0,n.Wb)(c):!1},"isCurrentUserChannelCreator")},277387:(j,T,e)=>{"use strict";e.d(T,{XT:()=>m,Xw:()=>n,gU:()=>c,l0:()=>o,xf:()=>s});var t=e(579026);const n=new RegExp("^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$","i");function s(i){const d=typeof i=="string"&&i.match(n);return d&&d.length===1&&d[0]===i||!1}l(s,"isEmail");function a(i){const{pathname:d,protocol:_}=parseUrl(i);return _==="mailto:"&&s(d)}l(a,"isEmailUrl");function c(i){const{pathname:d,protocol:_}=i;return _==="mailto:"&&s(d)}l(c,"isEmailUrlFromUrlObject");const r=/^[\w.-]+(?:\.[\w.-]+)+[\w\-.]+$/i;function o(i){const d=typeof i=="string"&&i.match(r);return d&&d.length===1&&d[0]===i||!1}l(o,"isDomain");function u(i){return i.includes("@slack-bots.com")}l(u,"isSlackBotEmail");function m(i){let{csv:d,min:_=0,max:h=10}=i;const p=d.split(/\s*,\s*/).length;return{minViolation:p<_,maxViolation:p>h}}l(m,"validateCSV")},650189:(j,T,e)=>{"use strict";e.d(T,{BM:()=>d,IN:()=>o});var t=e(296540),n=e(574022),s=e(603338),a=e(110010),c=e(135713);function r(){return r=Object.assign||function(_){for(var h=1;h<arguments.length;h++){var p=arguments[h];for(var A in p)Object.prototype.hasOwnProperty.call(p,A)&&(_[A]=p[A])}return _},r.apply(this,arguments)}l(r,"_extends");const o=l(_=>(0,c._Z)(_,"sk_responsive_menus")==="on","isSkResponsiveMenusEnabled");function u(_){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250;const{windowRef:p}=(0,t.useContext)(a.M),A=l(E=>{!Array.isArray(E)||!E.length||requestAnimationFrame(()=>_(E))},"observer"),v=p.deref();return new v.ResizeObserver((0,n.A)(A,h))}l(u,"useResizeObserver");const m=l(()=>{var _,h,p;const{windowRef:A}=(0,t.useContext)(a.M),v=(0,t.useRef)((_=A.deref())===null||_===void 0?void 0:_.document.body),E=((h=v.current)===null||h===void 0?void 0:h.clientWidth)||0,f=((p=v.current)===null||p===void 0?void 0:p.clientHeight)||0,[g,y]=(0,t.useState)(E),[I,O]=(0,t.useState)(f),M=u(()=>{var C,P;y(((C=v.current)===null||C===void 0?void 0:C.clientWidth)||0),O(((P=v.current)===null||P===void 0?void 0:P.clientHeight)||0)},100);return(0,t.useEffect)(()=>{const C=v.current;return C&&M.observe(C),()=>{A&&C&&M.unobserve(C)}},[M,A]),{width:g,height:I}},"useWindowSize");function i(_){return h=>{const p=m();return t.createElement(_,r({},h,{windowSize:p}))}}l(i,"withWindowSize"),i.displayName="withWindowSize";function d(_){return h=>h.experimentSkResponsiveMenusGroupOn?t.createElement(s.A,null,p=>{let{measureRef:A,width:v,height:E}=p;return t.createElement(_,r({},h,{measureRef:A,containerSize:{width:v,height:E}}))}):t.createElement(_,r({},h))}l(d,"withContainerSize"),d.displayName="withContainerSize"},56131:(j,T,e)=>{"use strict";e.d(T,{RG:()=>L,f1:()=>V,fp:()=>F});var t=e(296540),n=e(528919),s=e(42302),a=e(168776),c=e(883518),r;(function(B){B.BaseHeart="mask__base-heart",B.SmallHeart="mask__small-heart",B.BaseSingleChannelGuestDnd="mask__base-single-channel-guest-dnd",B.BaseSingleChannelGuest="mask__base-single-channel-guest",B.SmallSingleChannelGuestDnd="mask__small-single-channel-guest-dnd",B.SmallSingleChannelGuest="mask__small-single-channel-guest",B.BaseGuestDnd="mask__base-guest-dnd",B.BaseGuest="mask__base-guest",B.SmallGuestDnd="mask__small-guest-dnd",B.SmallGuest="mask__small-guest",B.BaseMemberDnd="mask__base-member-dnd",B.BaseMember="mask__base-member",B.SmallMemberDnd="mask__small-member-dnd",B.SmallMember="mask__small-member"})(r||(r={}));function o(B){let{size:D="base",userType:S="member",isDnd:R=!1}=B;return t.createElement("svg",{className:"sr-only"},S==="slackbot"&&(D==="base"?t.createElement("clipPath",{id:r.BaseHeart,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M0,0 H1 V0.673 C0.986,0.669,0.971,0.667,0.954,0.667 C0.929,0.667,0.907,0.673,0.889,0.682 C0.87,0.673,0.849,0.667,0.824,0.667 C0.764,0.667,0.719,0.697,0.694,0.736 C0.672,0.77,0.667,0.807,0.667,0.832 C0.667,0.854,0.669,0.894,0.696,0.942 C0.707,0.962,0.721,0.981,0.739,1 H0 V0"})):t.createElement("clipPath",{id:r.SmallHeart,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.801 C0.75,0.958,0.714,0.915,0.69,0.872 C0.653,0.807,0.65,0.753,0.65,0.723 C0.65,0.689,0.658,0.64,0.687,0.594 C0.721,0.541,0.781,0.5,0.862,0.5 C0.896,0.5,0.925,0.508,0.95,0.521 C0.965,0.513,0.982,0.507,1,0.504 V0"}))),S==="ura"&&(D==="base"?R?t.createElement("clipPath",{id:r.BaseSingleChannelGuestDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.688 C0.673,0.958,0.68,0.907,0.718,0.87 L0.825,0.763 C0.821,0.752,0.819,0.741,0.819,0.729 C0.819,0.672,0.866,0.625,0.924,0.625 H1 V0"})):t.createElement("clipPath",{id:r.BaseSingleChannelGuest,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.688 C0.673,0.958,0.68,0.907,0.718,0.87 L0.87,0.718 C0.907,0.68,0.958,0.673,1,0.688 V0"})):R?t.createElement("clipPath",{id:r.SmallSingleChannelGuestDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.707 C0.657,0.937,0.652,0.841,0.719,0.774 L0.864,0.63 C0.859,0.615,0.856,0.6,0.856,0.584 C0.856,0.507,0.919,0.444,0.997,0.444 H1 V0"})):t.createElement("clipPath",{id:r.SmallSingleChannelGuest,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.707 C0.657,0.937,0.652,0.841,0.719,0.774 L0.924,0.569 C0.947,0.546,0.973,0.532,1,0.525 V0"}))),(S==="ra"||S==="external")&&(D==="base"?R?t.createElement("clipPath",{id:r.BaseGuestDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.704 C0.698,0.985,0.694,0.969,0.694,0.951 V0.826 C0.694,0.754,0.753,0.695,0.825,0.694 C0.84,0.654,0.878,0.625,0.924,0.625 H1 V0"})):t.createElement("clipPath",{id:r.BaseGuest,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.704 C0.698,0.985,0.694,0.969,0.694,0.951 V0.826 C0.694,0.754,0.754,0.694,0.826,0.694 H0.951 C0.969,0.694,0.985,0.698,1,0.704 V0"})):R?t.createElement("clipPath",{id:r.SmallGuestDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.73 C0.704,0.969,0.688,0.929,0.688,0.884 V0.716 C0.688,0.617,0.767,0.538,0.866,0.538 H1 V0"})):t.createElement("clipPath",{id:r.SmallGuest,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.73 C0.704,0.969,0.688,0.929,0.688,0.884 V0.716 C0.688,0.617,0.767,0.538,0.866,0.538 H1 V0"}))),S==="member"&&(D==="base"?R?t.createElement("clipPath",{id:r.BaseMemberDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.713 C0.692,0.968,0.681,0.93,0.681,0.889 C0.681,0.795,0.742,0.716,0.827,0.69 C0.843,0.652,0.88,0.625,0.924,0.625 H1 V0"})):t.createElement("clipPath",{id:r.BaseMember,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.713 C0.692,0.968,0.681,0.93,0.681,0.889 C0.681,0.774,0.774,0.681,0.889,0.681 C0.93,0.681,0.968,0.692,1,0.713 V0"})):R?t.createElement("clipPath",{id:r.SmallMemberDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.752 C0.701,0.949,0.669,0.878,0.669,0.8 C0.669,0.674,0.752,0.567,0.867,0.531 C0.888,0.48,0.938,0.444,0.997,0.444 H1 V0"})):t.createElement("clipPath",{id:r.SmallMember,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.752 C0.701,0.949,0.669,0.878,0.669,0.8 C0.669,0.645,0.795,0.519,0.95,0.519 C0.967,0.519,0.984,0.52,1,0.523 V0"}))))}l(o,"AvatarMasks");var u=e(220375),m=e(393028),i=e(3972),d=e(61629),_=e(931881),h=e(364095),p=e(247384),A=e(79669),v=e(488455),E=e(20328),f=e(649098),g=e(78892),y=e(39937),I=e.n(y),O=e(841814),M=e.n(O);function C(){return C=Object.assign||function(B){for(var D=1;D<arguments.length;D++){var S=arguments[D];for(var R in S)Object.prototype.hasOwnProperty.call(S,R)&&(B[R]=S[R])}return B},C.apply(this,arguments)}l(C,"_extends");const P=new f.Ay("avatar"),L={xlarge:72,large:56,medium:36,small:24,verySmall:20,tiny:16},x=t.memo(B=>{let{botEmoji:D,canRenderEmoji:S}=B;return D?S?t.createElement(a.Ay,{className:"c-avatar__emoji",text:D,emojiSize:a.lw.LARGE,stopAnimations:!0,forceDisplay:!0}):t.createElement("img",{className:"c-avatar__image c-avatar__image--fallback",src:I(),srcSet:`${M()} 2x`,alt:""}):null});function F(B){let{isExternal:D,teamId:S,team:R,showTooltip:w,badgeIconType:Y,badgeIconClassName:Q,allowTeamInitials:Z=!0}=B;if(Y){const ee=Q?{[Q]:!!Q}:{};return()=>t.createElement(d.A,{className:(0,n.A)("c-avatar__icon c-avatar__nonteam_icon",{...ee}),type:Y})}return D&&S?()=>t.createElement(p.A,{className:"c-avatar__icon c-avatar__team_icon",id:S,team:R,size:16,showTooltip:w,allowTeamInitials:Z,ariaHidden:!0}):()=>null}l(F,"getCustomBadgeIconRenderer"),F.displayName="getCustomBadgeIconRenderer";const V=l(B=>{let{size:D,userId:S,isAdHocMember:R,botId:w,botProfile:Y=void 0,imageUrl:Q,imageUrl2x:Z,additionalOverlay:ee,onClick:_e=void 0,className:Ee,teamId:G,isExternal:Ae=!1,isRestricted:ce=!1,isUltraRestricted:de=!1,isInToken:oe=!1,isDeleted:$=!1,tokenSize:re=void 0,memberOrBotName:ue=void 0,showTooltip:te=!1,showCard:ae=!1,showBadge:H=!0,showPresence:U=!1,badgeIconType:N=void 0,badgeIconClassName:K=void 0,isInteractive:W=!0,clogLinkClick:J=s.A,tabIndex:q=0,ariaHidden:ie=void 0,team:Te=void 0,botEmoji:Me=void 0,canRenderEmoji:ke=void 0,renderCustomBadge:Pe=void 0,autoClogProps:Ie=void 0,openProfile:X=s.A,showMemberProfileInWindow:ne=s.A,propagateClickEvent:fe=!1,fromQuipDoc:be=!1,allowTeamInitials:Be=!0,disableLink:We=!1,isUserHidden:Re=!1,onLoad:ve=s.A,onError:xe=s.A,navigate:He,resetIA:je,userType:Ke,isDnd:ht,isSlackbot:dt,"data-qa":Ve,"data-stringify-ignore":Je}=B;const Ge=(0,t.useCallback)(St=>(St.preventDefault(),W?(fe||St.stopPropagation(),J(),be||((0,g.Cz)(St)?ne(S):He&&S?He((0,c.Fo)({memberId:S})):X({memberId:S,serviceId:w,botProfile:Y})),_e?_e(St):null):null),[S,w,Y,J,be,_e,W,He,X,fe,ne]),Le=l(()=>S?`/team/${S}`:w&&!We?`/services/${w}`:"","getHrefAttr"),Mt=l(()=>Z?`${Z} 2x`:"","getSrcSetAttribute"),Dt=l(()=>{if(ee){const St=ee>9?"9+":`+${ee}`;return t.createElement("div",{className:"c-avatar__additional_overlay"},St)}return null},"renderAdditionalOverlay");Dt.displayName="renderAdditionalOverlay";const pt=l(St=>{let{tooltipText:Ce,className:Ne}=St,ze=t.createElement("span",{className:"c-avatar__badge_inner"});te&&(ze=t.createElement(v.Ay,{tip:Ce},ze));const Oe=(0,n.A)("c-avatar__badge",Ne);return t.createElement("span",{className:Oe},ze)},"renderBadgeElement");pt.displayName="renderBadgeElement";const Qt=l(()=>{const St=re?A.n[re]:D;if(Pe!==void 0&&St>=32){const Ce=Pe();if(Ce)return Ce}if(Pe===void 0&&St>=32){const Ce=F({isExternal:Ae,teamId:G,team:Te,showTooltip:te,badgeIconType:N,badgeIconClassName:K,allowTeamInitials:Be})();if(Ce)return Ce}return U?t.createElement(h.A,{memberId:S,inline:!1,className:"c-avatar__presence",inheritIconSize:!0}):de&&St>=32?pt({tooltipText:l(()=>P.rt("Single-Channel Guests <span>see a partial directory and can only access messages and files from the channel they belong to.</span>",null,Ne=>{let{text:ze}=Ne;return t.createElement("span",{className:"c-avatar__tooltip_detail"},ze)}),"tooltipText"),className:"c-avatar__badge--ultra_restricted"}):ce&&St>=32?pt({tooltipText:l(()=>P.rt("Multi-Channel Guests <span>see only a partial directory and can only access messages and files from selected channels.</span>",null,Ne=>{let{text:ze}=Ne;return t.createElement("span",{className:"c-avatar__tooltip_detail"},ze)}),"tooltipText"),className:"c-avatar__badge--restricted"}):null},"renderBadgeOrPresence");Qt.displayName="renderBadgeOrPresence";const Nt=l(()=>{let St=Q||Z;return re?(re==="large"&&Z&&(St=Z),t.createElement(m.A,{image:St,classes:"c-base_icon--token",srcSet:Mt(),size:A.n[re],ariaHidden:!0,ariaRole:"img",widthOnly:!0,onLoad:ve,onError:xe,resetIA:je})):null},"renderTokenAvatar");Nt.displayName="renderTokenAvatar";const bt=l(()=>Q||Z?re||oe?Nt():t.createElement(m.A,{image:Q||Z,size:D,srcSet:Mt(),ariaHidden:!0,widthOnly:!0,onLoad:ve,onError:xe,resetIA:je}):null,"renderImageTag");bt.displayName="renderImageTag";const Yt=l(St=>{let{fallback:Ce=null}=St,Ne=Ce;return(Q||Z)&&(Ne=bt()),Ne},"renderImageOrFallback"),fn=Me?t.createElement(x,{botEmoji:Me,canRenderEmoji:ke}):null,Tt=D>26?"base":"small",sn=Ke==="member",mn=Ke==="ra"||Ke==="external",wt=Ke==="ura",On=t.useMemo(()=>U?dt&&Tt==="base"?r.BaseHeart:dt&&Tt==="small"?r.SmallHeart:sn&&Tt==="base"&&ht?r.BaseMemberDnd:sn&&Tt==="base"?r.BaseMember:sn&&Tt==="small"&&ht?r.SmallMemberDnd:sn&&Tt==="small"?r.SmallMember:mn&&Tt==="base"&&ht?r.BaseGuestDnd:mn&&Tt==="base"?r.BaseGuest:mn&&Tt==="small"&&ht?r.SmallGuestDnd:mn&&Tt==="small"?r.SmallGuest:wt&&Tt==="base"&&ht?r.BaseSingleChannelGuestDnd:wt&&Tt==="base"?r.BaseSingleChannelGuest:wt&&Tt==="small"&&ht?r.SmallSingleChannelGuestDnd:wt&&Tt==="small"?r.SmallSingleChannelGuest:"":"",[U,ht,Tt,mn,sn,wt,dt]),Zt=(0,n.A)(Ee,"c-avatar",{"c-avatar--no_image":!(Q||Z||fn),"c-avatar--interactive":W&&!R&&!We,"c-avatar--ad_hoc_member":R,"c-avatar--deleted_member":$,"c-avatar--resetIA":je}),Mn=re?A.n[re]:D,Wn={height:`${Mn}px`,width:`${Mn}px`};let xn;w&&(xn=W&&Le());const gn=ue&&(W||xn)?P.t("View {name}\u2019s Profile",{name:ue}):void 0,An=Yt({fallback:fn}),vt={...Wn,"--avatar-image-size":`${Mn}px`},xt=dt?"slackbot":Ke,Vt=U||H;let Se=t.createElement(t.Fragment,null,U&&Ke&&t.createElement(o,{isDnd:ht,userType:xt,size:Tt}),Re?t.createElement(u.A,{className:Ee,size:Mn}):An,Vt&&Qt(),Dt());return xn?Se=t.createElement(_.A,{href:xn,target:"_blank",rel:"noopener noreferrer",style:Wn,className:Zt,onClick:Ge,tabIndex:q,"aria-hidden":ie,"aria-label":gn,autoClogProps:Ie,"data-qa":Ve,"data-stringify-ignore":Je},Se):W&&!We?Se=t.createElement(i.A,{style:Wn,className:Zt,"data-qa":Ve,"data-stringify-ignore":Je,"aria-hidden":ie,"aria-label":gn,tabIndex:q,onClick:Ge,autoClogProps:Ie},Se):Se=t.createElement("span",C({style:vt,className:Zt},On?{"data-mask":On}:{},{"data-qa":Ve,"data-stringify-ignore":Je,"aria-hidden":ie}),Se),W&&ae&&D>=L.medium?(0,E.yN)({memberId:S,serviceId:w,botProfile:Y,children:Se}):Se},"BaseAvatar");V.displayName="BaseAvatar"},645909:(j,T,e)=>{"use strict";e.d(T,{A:()=>B});var t=e(296540),n=e(463329),s=e(377),a=e(619674),c=e(166371),r=e(539900),o=e(303818),u=e(23219),m=e(246634),i=e(974576),d=e(988727),_=e(56131),h=e(793434),p=e(756120),A=e(923814),v=e(326023),E=e(251772),f=e(881805),g=e(976725),y=e(917780),I=e(428527),O=e(676959),M=e(873645),C=e(135713),P=e(99194),L=e(129318);function x(){return x=Object.assign||function(D){for(var S=1;S<arguments.length;S++){var R=arguments[S];for(var w in R)Object.prototype.hasOwnProperty.call(R,w)&&(D[w]=R[w])}return D},x.apply(this,arguments)}l(x,"_extends");const F=(0,t.forwardRef)((D,S)=>{const R=(0,n.wA)();t.useImperativeHandle(S,()=>({props:D}),[D]);const{user:w,userId:Y,botId:Q,botProfile:Z,size:ee,icons:_e,emoji:Ee,team:G,slackbotFeels:Ae,isUnknown:ce,showPresence:de,isExternal:oe}=D;let $=null,re=null,ue,te,ae,H,U,N=Ee,K,W;const{member:J,bot:q,memberIsHuman:ie}=(0,y.Z2)(Ke=>(0,I.Od)(Ke,{userId:Y,botId:Q,botProfile:Z})),Te=w||Y||ce,Me=Te?w||J:void 0,ke=Me&&!Me.isUnknown&&!Me.is_unknown,Pe=(0,y.d4)(Ke=>(0,C._Z)(Ke,"bot_team_id_from_member")==="on");if(ke){var Ie;Q||(K=q==null?void 0:q.id);let Ke;Pe?Ke=(0,d.dQ)(Me):Ke=(0,i.A)(Me)?(0,d.D5)(Me):(0,d.dQ)(Me);const ht=(0,A.Ay)({size:ee,teamOrEnterpriseId:Ke,memberId:Me==null?void 0:Me.id,avatarHash:Me==null||(Ie=Me.profile)===null||Ie===void 0?void 0:Ie.avatar_hash,slackbotFeels:Ae});$=ht==null?void 0:ht.imageUrl,re=ht==null?void 0:ht.imageUrl2x,ue=oe||(Me==null?void 0:Me.isExternal),te=Me==null?void 0:Me.is_restricted,ae=Me.is_ultra_restricted,H=Me.id,U=(0,u.oy)(Me)}W=(0,y.d4)(Ke=>ke&&ue?(0,d.Ux)(Ke,Me):void 0);let X=Te?void 0:_e||Z&&Z.icons;if(!Te){if(q){X=X||q.icons;const Ke=(0,p.Cu)()?O.O:O.U;(q==null?void 0:q.app_id)===Ke&&(X=(q==null?void 0:q.icons)||X)}if(!N&&X&&(N=X.emoji),!N){const Ke=(0,A.Ay)({size:ee,botImages:X,isBot:!0});$=Ke.imageUrl,re=Ke.imageUrl2x}}W=(0,y.d4)(Ke=>Te?W:(G==null?void 0:G.id)||(0,o.s)(Ke,{bot:q,botProfile:Z,botId:Q})||void 0),ue=(0,y.d4)(Ke=>Te?ue:W?W!==(0,f.Kc)(Ke):!1);const ne=(0,y.d4)(Ke=>{if(ke)return(0,m.sE)(Ke,Me);if(!Te)return(0,r.Hg)(q)}),fe=(0,y.d4)(Ke=>{let ht=N&&W&&(0,M.ux)(Ke,{text:N,teamId:W});if(!ht&&N&&W===(0,f.Kc)(Ke)){const dt=(0,L.H7)(Ke),Ve=dt&&dt.id;Ve&&Ve!==W&&(ht=(0,M.ux)(Ke,{text:N,teamId:Ve}))}return ht}),be=(0,y.d4)(Ke=>de?(0,v.d)(Ke,Y):void 0),Be=(0,y.d4)(Ke=>de?(0,E.h)(Ke,Y):!1);var We;const Re=(We=Y??H)!==null&&We!==void 0?We:"",ve=(0,y.d4)(Ke=>Re?(0,P.a)(Ke,Re):!1),xe=(0,t.useCallback)(Ke=>R((0,g.U)(Ke)),[R]),He=(0,t.useCallback)(Ke=>R((0,s.A)(Ke)),[R]),je=(0,t.useCallback)(Ke=>R((0,a.o)(Ke)),[R]);return t.createElement(_.f1,x({},D,{userId:Y,imageUrl:$||void 0,imageUrl2x:re||void 0,botEmoji:N,canRenderEmoji:!!fe,teamId:W,isRestricted:te,isUltraRestricted:ae,isDeleted:U,memberOrBotName:ne,botId:K||Q,disableLink:!ie&&(!q||(0,u.v3)(q)),isExternal:ue,isUserHidden:ve,userType:be,isDnd:Be,isSlackbot:Y===h.Q$,size:ee,openProfile:xe,showMemberProfileInWindow:He,navigate:je}))}),V=(0,c.A)(t.memo(F));V.displayName="ConnectedAvatar";const B=V},177242:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>s,RG:()=>n.RG,f1:()=>n.f1,fp:()=>n.fp});var t=e(645909),n=e(56131);const s=t.A},220375:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(296540),n=e(528919),s=e(616125);function a(r){let{className:o="",size:u,"data-qa":m}=r;return t.createElement("span",{className:(0,n.A)(o,"c-hidden_user_avatar",{"c-hidden_user_avatar--small":u===16}),style:{width:`${u}px`,height:`${u}px`},"data-qa":m},t.createElement("span",{className:"c-hidden_user_avatar--icon"},t.createElement(s.A,{size:u<=24?"16":"24",name:"user-hide"})))}l(a,"HiddenUserAvatar"),a.displayName="HiddenUserAvatar";const c=t.memo(a)},393028:(j,T,e)=>{"use strict";e.d(T,{A:()=>_});var t=e(296540),n=e(528919),s=e(446632),a=e(42302),c=e(61629);const r=(0,s.A)(h=>({height:`${h}px`,width:`${h}px`}));function o(h){let{icon:p,classes:A=null,size:v=20,ariaHidden:E=void 0,ariaRole:f="img",ariaLabel:g=void 0}=h;const y=(0,n.A)("c-base_font_icon",A);return t.createElement("div",{className:y,style:r(v),"aria-hidden":E,role:f,"aria-label":g},t.createElement(c.A,{type:p}))}l(o,"BaseFontIcon"),o.displayName="BaseFontIcon";const u=o,m=(0,s.A)(h=>({height:`${h}px`,width:`${h}px`})),i=(0,s.A)(h=>({width:`${h}px`}));function d(h){let{image:p=void 0,size:A=20,srcSet:v="",classes:E=void 0,icon:f=void 0,ariaHidden:g=!1,ariaRole:y="img",ariaLabel:I=void 0,widthOnly:O=!1,onLoad:M=a.A,onError:C=a.A,resetIA:P,"data-qa":L}=h;if(p&&f)throw Error("Cannot pass in both image and icon!");if(!g&&!I)throw Error("If ariaHidden is false, we must have an ariaLabel for a11y!");const x=(0,n.A)("c-base_icon",E,{"c-base_icon--unknown":!p&&!f,"c-base_icon--image":p,"c-base_icon--resetIA":P});if(f)return t.createElement(u,{icon:f,classes:x,size:A,ariaHidden:g,ariaRole:y,ariaLabel:I});const F=t.createElement("img",{src:p,srcSet:v,className:x,style:O?i(A):m(A),"aria-hidden":g,role:y,"aria-label":I,alt:"",onLoad:M,onError:C,"data-qa":L});return O?t.createElement("span",{className:(0,n.A)("c-base_icon__width_only_container",{"c-base_icon--resetIA":P}),style:m(A)},F):F}l(d,"BaseIcon"),d.displayName="BaseIcon";const _=d},787917:(j,T,e)=>{"use strict";e.d(T,{A:()=>E});var t=e(296540),n=e(54930),s=e(605556),a=e.n(s),c=e(354187),r=e(166747),o=e(246634),u=e(649098),m=e(298559),i=e(99194);function d(){return d=Object.assign||function(f){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var I in y)Object.prototype.hasOwnProperty.call(y,I)&&(f[I]=y[I])}return f},d.apply(this,arguments)}l(d,"_extends");const _=new u.Ay("files"),h={name:a().string.isRequired,isChannelFiles:a().bool,showMemberNameIfHidden:a().bool},p={isChannelFiles:!1,showMemberNameIfHidden:!1},A=l(f=>{const g=(0,n.A)(f,["id","name","dispatch","firstName","skipPrefCompliance","isChannelFiles","showMemberNameIfHidden"]);let y=f.name;if(f.isChannelFiles){const I=f.name;y=_.t("Shared by {memberName}",{memberName:I})}return t.createElement("span",d({},g),y)},"MemberName");A.displayName="MemberName",A.propTypes=h,A.defaultProps=p;const v=l((f,g)=>{const{id:y,member:I,skipPrefCompliance:O,showMemberNameIfHidden:M}=g;if(O)return{name:(0,c.wg)(I)};let C;return!M&&(0,i.a)(f,y)?C=_.t("Name hidden"):C=I?(0,o.sE)(f,I,!1,!1,O,!1):(0,r.I)(f,y,!1,!1,!1,!1),{name:C}},"mapStateToProps"),E=(0,m.N)(v)(A)},310717:(j,T,e)=>{"use strict";e.d(T,{A:()=>p});var t=e(296540),n=e(42302),s=e(927675),a=e(449677),c=e(539044),r=e(494030),o=e(455970),u=e(503948),m=e(534216),i=e(521665),d=e(649098);const _=new d.Ay("generic_dialog"),h=l(A=>{let{title:v,children:E,submitButtonType:f="primary",submitButtonText:g=_.t("Confirm"),submitButtonIsDisabled:y=!1,submitButtonIsLoading:I=!1,showCancelButton:O=!0,showCloseButton:M=!0,showSubmitButton:C=!0,cancelButtonText:P=_.t("Cancel"),onSubmit:L=n.A,onCancel:x=n.A,onClose:F=n.A,"aria-describedby":V,"data-qa":B="dialog",className:D,overlayClassName:S,submitAutoClogProps:R,cancelAutoClogProps:w,shouldReturnFocusAfterClose:Y=!0}=A;return t.createElement(a.A,{describedby:V,closeModal:F,role:"dialog",className:D,overlayClassName:S,dataQa:B,shouldReturnFocusAfterClose:Y,showCloseButton:M},t.createElement(m.A,null,t.createElement(i.A,{title:v,"data-qa":`${B}_header`})),t.createElement(c.A,null,t.createElement(r.A,{"data-qa":`${B}_body`},E)),(O||C)&&t.createElement(o.A,{"data-qa":`${B}_footer`},t.createElement(u.A,null,O&&t.createElement(s.Ay,{type:"outline",onClick:x,"data-qa":`${B}_cancel`,autoClogProps:w},P),C&&t.createElement(s.lV,{type:f,onClick:L,loading:I,disabled:y,"data-qa":`${B}_go`,autoClogProps:R},g))))},"DialogModalProps");h.displayName="DialogModalProps";const p=h},324331:(j,T,e)=>{"use strict";e.d(T,{A:()=>I,k:()=>v});var t=e(296540),n=e(528919),s=e(396386),a=e(895707),c=e(850960),r=e(757848),o=e(635670),u=e(69994),m=e(586030),i=e(470670),d=e(813795),_=e(682520),h=e(298559),p=e(885850);function A(){return A=Object.assign||function(O){for(var M=1;M<arguments.length;M++){var C=arguments[M];for(var P in C)Object.prototype.hasOwnProperty.call(C,P)&&(O[P]=C[P])}return O},A.apply(this,arguments)}l(A,"_extends");function v(O){return!(0,s.LI)(O)&&!(0,s.yz)(O)}l(v,"shouldUseInlineChannelEntity");const E="INLINE-CHANNEL-ENTITY";function f(O){let{className:M,channel:C,bestFormerName:P,displayFormerNames:L=i.P.false,logger:x,boldIcon:F=!1,showTeam:V=!0,truncate:B=!1,truncateWidth:D,overrideHiddenName:S,overrideHiddenIcon:R,withTruncationTooltip:w,channelNameClassName:Y,omitNonExistentTooltip:Q,channelHasNonUniqueName:Z=!1,showDisambiguatingTeamName:ee=!1}=O;const _e=(0,s.t8)(C),Ee=(0,s.QR)(C||null),G=(0,t.useCallback)(ue=>{let{className:te,...ae}=ue;return(!Ee||R)&&t.createElement(u.A,A({},ae,{bold:F,className:te,channel:C,overrideHiddenIcon:R}))},[C,F,Ee,R]);if(!v(C||null))return x==null||x.warn(E,"InlineChannelEntity should not display IMs or MPIMs"),null;const Ae=(0,n.A)(M,"c-inline_channel_entity"),ce=(0,c.F)(C)?i.pI.dim:void 0,de=C&&S?{...C,name:S}:C||void 0,oe=(0,n.A)(Y,"c-inline_channel_entity__content"),$=Z&&ee,re=(_e||Ee)&&!S?t.createElement(d.A,{"data-qa":"inline_channel_entity__missing",type:_e?"unknown":"non-existent",size:"small",width:D,omitNonExistentTooltip:Q}):t.createElement("span",{className:oe},t.createElement(r.A,{bold:F,channel:de,bestFormerName:P,displayFormerNames:L,showTeam:V,showTeamForLocalChannel:$,width:D,"data-qa":"inline_channel_entity__name",overrideHiddenName:S}));return t.createElement(m.A,{avatar:G,className:Ae,"data-qa":"inline_channel_entity","data-channel-id":C&&C.id,style:ce,truncate:B,truncateWidth:D,withTruncationTooltip:w,primaryContent:re,secondaryContent:D&&t.createElement(t.Fragment,null,V&&t.createElement(o.A,{className:"c-inline_channel_entity__team",iconSize:14,channel:de,"data-qa":"inline_channel_entity__team"}))})}l(f,"InlineChannelEntity"),f.displayName="InlineChannelEntity";function g(O){return Object.prototype.hasOwnProperty.call(O,"channel")}l(g,"propsContainsChannel");function y(O,M){const C=g(M)?M.channel:(0,p.OL)(O,M.channelId);let P;return M.showDisambiguatingTeamName&&(P=(0,a.i)((0,p.MS)(O),C)),{channel:C,channelHasNonUniqueName:P,logger:(0,_.Ay)({state:O})}}l(y,"mapStateToProps");const I=(0,h.N)(y)(f)},280099:(j,T,e)=>{"use strict";e.d(T,{A:()=>C});var t=e(296540),n=e(528919),s=e(21879),a=e(710596),c=e(396386),r=e(895707),o=e(850960),u=e(950746),m=e(757848),i=e(412213),d=e(470670),_=e(813795),h=e(682520),p=e(649098),A=e(298559),v=e(885850),E=e(566254);function f(){return f=Object.assign||function(P){for(var L=1;L<arguments.length;L++){var x=arguments[L];for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(P[F]=x[F])}return P},f.apply(this,arguments)}l(f,"_extends");const g=new p.Ay("channel_entity"),y="SMALL-CHANNEL-ENTITY";function I(P){let{className:L,channel:x,bestFormerName:F,inlineNameSuffix:V,invert:B=!1,logger:D,displayFormerNames:S=d.P.false,showTeamForLocalChannel:R,showDraftIcon:w=!1,showFilledIcon:Y=!1,showTeam:Q,memberCount:Z,onlyBoldIfUnread:ee=!1,showTruncatedChannelNameTooltip:_e=!1,"data-qa":Ee="small_channel_entity",channelHasNonUniqueName:G=!1,showDisambiguatingTeamName:Ae=!1}=P;const ce=(0,t.useCallback)(K=>t.createElement(u.A,f({},K,{className:"c-small_channel_entity__icon",channel:x,size:d.RG.small,showDraftIcon:w,showFilledIcon:Y})),[x,w,Y]);if((0,c.LI)(x)||(0,c.yz)(x))return D==null||D.warn(y,"SmallChannelEntity should not display IMs or MPIMs"),null;const de=(0,n.A)(L,"c-small_channel_entity"),oe=!ee||(0,a.KJ)(x),$=(0,c.t8)(x),re=(0,c.QR)(x);let ue=(0,o.F)(x)?d.pI.dim:void 0;B&&(ue=d.pI.highlightDark);let te=null;if((0,s.A)(Z)){const K=g.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:Z,fallbackHash:"c8e3bc8a761a13ce8f87cea7ebb3009bccee1a21",fallbackHashNs:"user_group_entity"});te=t.createElement("span",{className:"c-small_channel_entity__inline_name_suffix normal","aria-label":K},"(",Z,")")}const ae=G&&Ae,H=t.createElement(m.A,{channel:x,bestFormerName:F,inlineNameSuffix:V,displayFormerNames:S,showTeamForLocalChannel:R||ae,showTeam:Q,bold:!!oe}),U=_e?t.createElement(i.CG,{withTruncationTooltip:!0},H):H,N=(0,n.A)("c-small_channel_entity__content","c-small_channel_entity__content--xws",{"c-small_channel_entity__content--show-truncated-tooltip":_e});return t.createElement(i.Ay,{avatar:ce,className:de,"data-qa":Ee,size:"small",style:ue,text:t.createElement(i.CG,null,$||re?t.createElement(_.A,{type:$?"unknown":"non-existent",invert:B,size:"small"}):t.createElement("span",{className:N},U,V&&t.createElement("span",{className:"c-small_channel_entity__inline_name_suffix"},V),te))})}l(I,"SmallChannelEntity"),I.displayName="SmallChannelEntity";function O(P){return Object.prototype.hasOwnProperty.call(P,"channel")}l(O,"propsContainsChannel");function M(P,L){let x;if(L.showMemberCounts){var F;const D=(0,E.q8)(P,O(L)?(0,a.FB)(L.channel):L.channelId);x=D?D==null||(F=D.counts)===null||F===void 0?void 0:F.member_count:null}const V=O(L)?L.channel:(0,v.OL)(P,L.channelId);let B;return L.showDisambiguatingTeamName&&(B=(0,r.i)((0,v.MS)(P),V)),{memberCount:x,channel:V,logger:(0,h.Ay)({state:P,label:y}),channelHasNonUniqueName:B}}l(M,"mapStateToProps");const C=(0,A.N)(M)(I)},957188:(j,T,e)=>{"use strict";e.d(T,{A:()=>h});var t=e(296540),n=e(280099),s=e(157056),a=e(470670),c=e(359733),r=e(298559),o=e(885850);function u(){return u=Object.assign||function(p){for(var A=1;A<arguments.length;A++){var v=arguments[A];for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&(p[E]=v[E])}return p},u.apply(this,arguments)}l(u,"_extends");function m(p,A,v){if(p)return A||v?a.pI.highlightDim:a.pI.highlightDark;if(A||v)return a.pI.dim}l(m,"getBaseStyle");function i(p){let{className:A,secondaryContent:v,isActive:E=!1,isDeactivated:f=!1,isDisabled:g=!1,showUnreadBadge:y=!1,badgeCount:I=0,onlyBoldIfUnread:O=!1,...M}=p,C=v;y&&(C=t.createElement("div",{className:"c-small_channel_entity__secondary-content-badge"},v,t.createElement(c.A,{count:I,className:"c-channel_entity__mentions",style:E?"white":"red"})));const P=m(E,g,f);return t.createElement(s.A,{className:A,primaryContent:t.createElement(n.A,u({invert:P===a.pI.highlightDark,onlyBoldIfUnread:O},M)),secondaryContent:C,size:"small",style:P})}l(i,"SmallChannelListEntity"),i.displayName="SmallChannelListEntity";function d(p){return Object.prototype.hasOwnProperty.call(p,"channel")}l(d,"propsContainsChannel");function _(p,A){const v=d(A)?A.channel:(0,o.OL)(p,A.channelId),E=A.showUnreadBadge?A.badgeCount||(0,o.TJ)(p,v):0;return{channel:v,badgeCount:E}}l(_,"mapStateToProps");const h=(0,r.N)(_)(i)},950746:(j,T,e)=>{"use strict";e.d(T,{A:()=>i});var t=e(296540),n=e(528919),s=e(396386),a=e(359796),c=e(470670),r=e(616125),o=e(917780);function u(){return u=Object.assign||function(d){for(var _=1;_<arguments.length;_++){var h=arguments[_];for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(d[p]=h[p])}return d},u.apply(this,arguments)}l(u,"_extends");function m(d){let{size:_=c.RG.medium,className:h,channel:p,showDraftIcon:A=!1,showFilledIcon:v=!1}=d;const E=(0,s.t8)(p),f=(0,o.d4)(g=>(0,a.Ay)(g,p,{filled:v,showDraftIcon:A}));return _!==c.RG.small&&(f.inline=!0),t.createElement("span",{className:(0,n.A)("c-channel_icon",{"c-channel_icon--unknown":E,"c-channel_icon--with-background":_!==c.RG.small},h),"data-channel-type-icon":(f==null?void 0:f.name)||"unknown"},!E&&t.createElement(r.A,u({},_===c.RG.small?{size:"18"}:{},f)))}l(m,"ChannelIcon"),m.displayName="ChannelIcon";const i=m},757848:(j,T,e)=>{"use strict";e.d(T,{A:()=>I});var t=e(296540),n=e(528919),s=e(566401),a=e(476802),c=e(710596),r=e(850960),o=e(536160),u=e(934861),m=e(635670),i=e(69994),d=e(470670),_=e(979307),h=e(649098),p=e(298559),A=e(129318);function v(){return v=Object.assign||function(O){for(var M=1;M<arguments.length;M++){var C=arguments[M];for(var P in C)Object.prototype.hasOwnProperty.call(C,P)&&(O[P]=C[P])}return O},v.apply(this,arguments)}l(v,"_extends");const E=new h.Ay("search"),f=new h.Ay("inline_channel");function g(O){const{bestFormerName:M,bold:C=!0,channel:P,channelName:L,overrideHiddenName:x,width:F,displayFormerNames:V=d.P.true,isChannelFrozenAndInGracePeriod:B,showTeam:D=!0,showTeamForLocalChannel:S=!1,showTeamName:R}=O,w=(0,r.F)(P)&&!B;let Y=`${x??L}${w?` ${E.t("(archived)")}`:""}`,Q;if(V)if(M){const ee=t.createElement(i.A,{bold:C,className:"c-channel_name__former_channel_icon",channel:P}),_e=t.createElement("span",{className:"c-channel_name__former_name_text"},t.createElement(a.A,{text:M,showTooltips:!1}));Q=M&&t.createElement("span",{className:"c-channel_name__suffix"},f.rt(" (formerly {icon}{name})",{icon:ee,name:_e,note:'Shown when a user is typing the old name of a channel, e.g. "#dogs (formerly #cats)" or "#dogs (archived) (formerly #cats)"',fallbackHash:"b574996f0134b62e0fae6797e7d969b04de6b482"}))}else{let ee;const _e=(0,c.Hx)(P);if(_e&&!(0,s.A)(_e)){const Ee=_e.map(Ae=>`#${Ae}`);ee=(0,h.jd)(Ee,{noConj:!0}).join("")}ee&&(Y+=` ${f.t("(formerly {names})",{names:ee,note:'Shown when a user is typing the old name of a channel, e.g. "#dogs (formerly #cats)" or "#dogs (archived) (formerly #cats)"'})}`)}const Z=(0,n.A)("c-channel_entity__name",{"c-channel_entity__name--bold":C});return t.createElement(t.Fragment,null,t.createElement("span",v({className:Z},(0,_.A)(O)),t.createElement(a.A,{text:Y,showTooltips:!1}),V&&Q),!F&&t.createElement(t.Fragment,null,D&&t.createElement(m.A,{className:"c-channel_entity__team",iconSize:d.RG.inline,channel:P,"data-qa":"channel_entity__team",shouldRender:S,showTeamName:R})))}l(g,"ChannelName"),g.displayName="ChannelName";function y(O,M){let{channel:C,includeChannelPrefix:P}=M;const L=(0,A.H7)(O)||(0,A.lp)(O),x=(0,u.ZT)(L);var F;return{channelName:(F=(0,c.SB)(O,C,{publicChannelIncludeHashSign:!!P,imIncludeAtSign:!1}))!==null&&F!==void 0?F:void 0,isChannelFrozenAndInGracePeriod:(0,o.sP)(x,C)}}l(y,"mapStateToProps");const I=(0,p.N)(y)(g)},635670:(j,T,e)=>{"use strict";e.d(T,{A:()=>d});var t=e(296540),n=e(528919),s=e(710596),a=e(934861),c=e(63332),r=e(298559),o=e(885850),u=e(129318);let m=l(class extends t.Component{render(){const{shouldRender:h,team:p,className:A}=this.props;return!h||!p?null:t.createElement("div",{className:(0,n.A)("c-channel_team","c-channel_team--xws",A),"data-qa":"channel_team"},t.createElement("span",{className:"c-channel_team__name"},(0,a.F1)(p)))}},"ChannelTeam");m.displayName="ChannelTeam";const i=l((_,h)=>{let{channel:p,channelId:A,shouldRender:v}=h;const E=p||(0,o.OL)(_,A),f=!!(E!=null&&E.context_team_id&&(0,c.B)(_,E.context_team_id));let g;if((0,s.lo)(E))g=(0,u._J)(_,(0,s.bK)(_,E));else if(v||f){const y=(0,s.ne)(_,E);g=(y?(0,u._J)(_,y):void 0)||(0,u.H7)(_)}return{shouldRender:v||f||!!(0,s.lo)(E),team:g??void 0}},"mapStateToProps"),d=(0,r.N)(i)(m)},69994:(j,T,e)=>{"use strict";e.d(T,{A:()=>m});var t=e(296540),n=e(528919),s=e(396386),a=e(359796),c=e(616125),r=e(917780);function o(){return o=Object.assign||function(i){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var h in _)Object.prototype.hasOwnProperty.call(_,h)&&(i[h]=_[h])}return i},o.apply(this,arguments)}l(o,"_extends");const u=l(i=>{let{className:d,filled:_,bold:h,channel:p,disableArchived:A,overrideHiddenIcon:v}=i;const E=(0,r.d4)(g=>v||(0,a.Ay)(g,p,{filled:_||(0,s.Zp)(p),bold:h,disableArchived:A})),f=(0,n.A)(d,{"c-inline_channel_icon c-inline_channel_icon--space":!0});return t.createElement("span",{className:f,"data-inline-channel-type-icon":E.name},t.createElement(c.A,o({inline:!0},E)))},"InlineChannelIcon");u.displayName="InlineChannelIcon";const m=t.memo(u)},359796:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>C,PR:()=>O,pH:()=>y});var t=e(821807),n=e(710596),s=e(396386),a=e(850960),c=e(790310),r=e(536160),o=e(3477),u=e(180727),m=e(934861),i=e(885850),d=e(969924),_=e(129318);const h={name:"archive"},p={name:"archive",variation:"filled"},A={name:"edit"},v={name:"edit",variation:"filled"},E={name:"file"},f={name:"lists"},g={name:"lock"},y={name:"lock",variation:"filled"},I={name:"channel"},O={name:"channel",variation:"filled"},M={name:"canvas"};function C(P,L){let{filled:x,bold:F,disableArchived:V,showDraftIcon:B}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{filled:!1,bold:!1,disableArchived:!1,showDraftIcon:!1};const D=(0,_.H7)(P)||(0,_.lp)(P),S=(0,m.ZT)(D);if(!(0,r.sP)(S,L)&&((0,a.F)(L)&&!V||(0,r.Zz)(L)))return x?p:h;if(B&&(0,n.yc)(P,L.id))return x?v:A;if((0,c.jT)(L)){const w=(0,d.Lp)(P,(0,u.l)(L.id));if((0,o.wL)(w))return M;if((0,o.O8)(w)){const Y=(0,i.Pf)(P,w.id),Q=(0,i.OL)(P,Y);return(0,s.Zp)(Q)||(0,s.JM)(Q)?x?y:g:M}return(0,o.l7)(w)?f:E}const R=(0,t.sc)(L);return R||((0,s.Zp)(L)?x?y:g:F?O:I)}l(C,"getChannelIconType")},199291:(j,T,e)=>{"use strict";e.d(T,{A:()=>E});var t=e(296540),n=e(528919),s=e(498916),a=e(780076),c=e(23219),r=e(354187),o=e(974576),u=e(484204),m=e(586030),i=e(470670),d=e(298559),_=e(99194),h=e(437556),p=e(667770);function A(f){const{className:g,forceRealName:y=!1,id:I,member:O,truncate:M=!1,truncateWidth:C,withTruncationTooltip:P=!1,"data-qa":L="inline_member_entity",isBold:x=!0,showAppOrBotBadge:F,isUserHidden:V=!1}=f,B=(0,n.A)(g,"c-inline_member_entity"),D=(0,o.A)(O),S=(0,c.v3)(O),R=(0,c.oy)(O),w=(0,a.lv)(O),Y=(0,a.mX)(O),Q=(0,r.wg)(O),Z=(0,r.Fh)(O);let ee;y||!Z?ee=Q:ee=Z;const _e=R?i.pI.dim:void 0;return t.createElement(m.A,{className:B,"data-qa":L,"data-member-id":I||(O==null?void 0:O.id),style:_e,truncate:M,truncateWidth:C,withTruncationTooltip:P,primaryContent:t.createElement("span",{className:"c-inline_member_entity__content"},t.createElement(u.A,{isBold:x,name:ee,inline:!0,"data-qa":"inline_member_entity__name",isAppOrBot:D,isWorkflowBot:S,isDeleted:R,isNonExistent:w,isUnknown:Y,showAppOrBotBadge:F,isUserHidden:V}))})}l(A,"InlineMemberEntity"),A.displayName="InlineMemberEntity";function v(f,g){let{forceRealName:y,member:I,id:O}=g;const M=I||(0,h.nv)(f,O);return{member:M??void 0,forceRealName:(0,s.A)(y)?y:(0,p.E)(f),isUserHidden:M&&(0,_.a)(f,M.id)}}l(v,"mapStateToProps");const E=(0,d.N)(v)(A)},629669:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>F,lP:()=>P});var t=e(296540),n=e(528919),s=e(584564),a=e(780076),c=e(710596),r=e(23219),o=e(354187),u=e(246634),m=e(974576),i=e(177242),d=e(484204),_=e(510526),h=e(192930),p=e(416898),A=e(843112),v=e(470670),E=e(731018),f=e(616125),g=e(20328),y=e(298559),I=e(885850),O=e(99194),M=e(437556);function C(){return C=Object.assign||function(V){for(var B=1;B<arguments.length;B++){var D=arguments[B];for(var S in D)Object.prototype.hasOwnProperty.call(D,S)&&(V[S]=D[S])}return V},C.apply(this,arguments)}l(C,"_extends");const P={right:"right",bottom:"bottom"};function L(V){const{className:B,id:D,invert:S=!1,member:R,memberPrimaryName:w,memberSecondaryName:Y,secondaryContent:Q,secondaryContentPosition:Z=P.bottom,subtext:ee,showSubtext:_e=!0,showAvatar:Ee=!0,showDraftIcon:G=!1,showPresence:Ae=!0,showStatus:ce=!0,showTooltip:de=!0,showAppOrBotBadge:oe=!0,isDeactivated:$=!1,useShortMode:re,showHoverCard:ue=!1,forwardedRef:te,"data-sk":ae="medium_member_entity","data-qa":H="medium_member_entity",isUserHidden:U=!1,noStatusText:N=!1}=V,K=(0,m.A)(R),W=(0,r.v3)(R),J=(0,r.oy)(R),q=(0,r.fy)(R),ie=(0,r.hh)(R),Te=(0,a.lv)(R),Me=(0,a.mX)(R),ke=t.createElement(d.A,{"data-qa":"member-entity__primary-name",name:w,invert:S&&!$,isAppOrBot:K,isWorkflowBot:W,showAppOrBotBadge:oe,isDeleted:J,isSelf:q,isNonExistent:Te,isUnknown:Me,isUserHidden:U}),Pe=(0,g.yN)({memberId:D,children:ke}),Ie=!U&&t.createElement(A.A,{className:"c-member__secondary-name","data-qa":"member-entity__secondary-name"},Y),X=R&&t.createElement(p.A,{className:"c-member__title","data-qa":"member-entity__title"},(0,r.rN)(R)),ne=!J&&!ie&&t.createElement(E.Ay,{memberId:D,className:"c-member__presence",invert:S&&!$,"data-qa":"member-entity__presence",inline:!1}),fe=t.createElement(s.A,{memberId:D,tooltip:de,animated:re,className:"c-member__current-status c-member__current-status--medium","data-qa":"member-entity__status",noText:N}),be=Z===P.bottom&&Q?t.createElement(h.A,{"data-qa":"member-entity__metadata"},Q):null,Be=t.createElement("span",{className:"c-member__primary_content"},ue?Pe:ke,Ae&&ne,!re&&Ie,ce&&fe),We=J||$?v.pI.dim:void 0,Re=(0,n.A)(B,"c-member","c-member--medium",{"c-member--with-presence":Ae}),ve=(0,t.useCallback)(xe=>Ee&&(G?t.createElement("span",{className:"c-member__draft_icon"},t.createElement(f.A,{name:"edit"})):t.createElement(i.Ay,C({},xe,{size:v.RG.medium,userId:D,"data-qa":"member-entity__avatar",isInteractive:!1}))),[Ee,G,D]);return t.createElement(_.A,{avatar:ve,className:Re,size:"medium",style:We,text:Be,subtext:_e&&(ee||X),metadata:!J&&be,"data-qa":H,"data-sk":ae,forwardedRef:te})}l(L,"MediumMemberEntity"),L.displayName="MediumMemberEntity";function x(V,B){let{id:D,isDraftContext:S,member:R,showStatus:w}=B;const Y=R||(0,M.nv)(V,D);let Q=!1;if(S&&D){const ee=(0,I.Pu)(V,D);Q=!!(ee&&(0,c.yc)(V,ee.id))}const Z=D||(Y==null?void 0:Y.id);return{id:Z,member:Y??void 0,memberPrimaryName:(0,u.sE)(V,Y,!1,!1),memberSecondaryName:(0,o.Mu)(V,Y),showDraftIcon:Q,showStatus:w&&(0,r.aH)(Y),isUserHidden:!!Z&&(0,O.a)(V,Z)}}l(x,"mapStateToProps");const F=(0,y.N)(x)(L)},671566:(j,T,e)=>{"use strict";e.d(T,{A:()=>h});var t=e(296540),n=e(528919),s=e(711474),a=e(629669),c=e(157056),r=e(470670),o=e(411859),u=e(298559),m=e(437556);function i(){return i=Object.assign||function(p){for(var A=1;A<arguments.length;A++){var v=arguments[A];for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&(p[E]=v[E])}return p},i.apply(this,arguments)}l(i,"_extends");let d=l(class extends t.Component{render(){const{className:A,isActive:v=!1,isDeactivated:E=!1,isDisabled:f=!1,secondaryContent:g,secondaryContentPosition:y=a.lP.right,showUnreadCount:I=!1,showStatus:O,showPresence:M,useShortMode:C=!1,showHoverCard:P,forwardedRef:L,unreadCount:x,ariaLabel:F}=this.props,V=I&&x&&t.createElement(o.Ay,{className:"c-member__unread_count",count:x,style:o.rY.red}),B=g&&t.createElement("span",{className:"c-member__details","data-qa":"member-entity__secondary-content"},g),D=(y===a.lP.right&&B||V)&&t.createElement("span",{className:"c-member__secondary_content"},y===a.lP.right&&B,V),S=(0,n.A)(A,"c-medium_member_list_entity");let R;return v?f||E?R=r.pI.highlightDim:R=r.pI.highlightLight:(f||E)&&(R=r.pI.dim),t.createElement(c.A,{"data-qa":"medium_member_list_entity",className:S,style:R,primaryContent:t.createElement(a.Ay,i({},this.props,{secondaryContent:y===a.lP.right?null:g,showStatus:O,showPresence:M,showHoverCard:P,useShortMode:C,forwardedRef:L})),secondaryContent:D,size:"medium",ariaLabel:F})}},"MediumMemberListEntity");d.displayName="MediumMemberListEntity";function _(p,A){let{id:v}=A;const E=(0,m.nv)(p,v);return{member:E??void 0,unreadCount:(0,s.A)(p,E)}}l(_,"mapStateToProps");const h=(0,u.N)(_,null,null,{forwardRef:!0})(d)},403109:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>Q,Cg:()=>S});var t=e(296540),n=e(528919),s=e(498916),a=e(91509),c=e(780076),r=e(710596),o=e(23219),u=e(711474),m=e(354187),i=e(974576),d=e(965112),_=e(988727),h=e(177242),p=e(484204),A=e(412213),v=e(843112),E=e(470670),f=e(411859),g=e(975725),y=e(731018),I=e(616125),O=e(135891),M=e(649098),C=e(298559),P=e(885850),L=e(135713),x=e(99194),F=e(437556),V=e(667770);function B(){return B=Object.assign||function(Z){for(var ee=1;ee<arguments.length;ee++){var _e=arguments[ee];for(var Ee in _e)Object.prototype.hasOwnProperty.call(_e,Ee)&&(Z[Ee]=_e[Ee])}return Z},B.apply(this,arguments)}l(B,"_extends");const D=20,S=16,R=new M.Ay("members");function w(Z){const{className:ee,id:_e,invert:Ee=!1,member:G,teamId:Ae,showAvatar:ce=!0,showDraftIcon:de=!1,showPresence:oe=!0,showBadge:$=!0,showStatus:re=!0,showTooltip:ue=!0,showUnreadCount:te=!1,showDeactivated:ae=!0,isDeactivated:H=!1,unreadCount:U,useShortMode:N=!1,forceRealName:K=!1,tokenSize:W,truncateStatus:J=!1,withTruncationTooltip:q,"data-sk":ie="small_member_entity","data-qa":Te="small_member_entity",isBold:Me,experimentSidebarPrefsApplyToMenusGroupOn:ke=!1,isUserHidden:Pe=!1}=Z,Ie=(0,i.A)(G),X=(0,o.v3)(G),ne=(0,o.oy)(G),fe=(0,d.g)(G),be=(0,o.fy)(G),Be=(0,o.hh)(G),We=(0,c.lv)(G),Re=(0,c.mX)(G),ve=We||Re,xe=Ee&&!H,He=ae&&ne,je=(0,m.wg)(G),Ke=(0,m.Fh)(G);let ht,dt;Pe?(ht=R.t("Name hidden"),dt=R.t("Name hidden")):K||!Ke?(ht=je,dt=Ke):(ht=Ke,dt=je);const Ve=t.createElement(p.A,{"data-qa":"member-entity__primary-name",className:"c-member__member-name",name:ht,invert:xe,isAppOrBot:Ie,isWorkflowBot:X,isDeleted:He,isSelf:be,isNonExistent:We,isUnknown:Re,withTruncationTooltip:q,isBold:Me}),Je=!Pe&&!Be&&t.createElement(v.A,{className:"c-member__secondary-name","data-qa":"member-entity__secondary-name"},dt),Ge=(0,t.useMemo)(()=>!Pe&&!ne&&!Be&&t.createElement(y.Ay,{memberId:_e||(G==null?void 0:G.id),className:"c-member__presence",invert:xe,inline:!1}),[Pe,ne,Be,_e,xe,G]),Le=(0,t.useCallback)(fn=>ce?Pe?t.createElement("span",{className:"c-search_autocomplete__hidden_member_icon "},t.createElement(I.A,{size:"20",name:"user-hide"})):ve?t.createElement(g.A,B({},fn,{"data-qa":"member-entity__missing",isNonExistent:We,size:D})):de?t.createElement("span",{className:"c-member__draft_icon"},t.createElement(I.A,{name:"edit"})):t.createElement(h.Ay,B({},fn,{"data-qa":"member-entity__avatar",size:E.RG.small,userId:_e,user:G,showBadge:$,tabIndex:-1,isInteractive:!1,tokenSize:W})):oe&&ke?Ge:null,[ce,_e,We,ve,G,W,de,Pe,Ge,oe,$,ke]),Mt=fe&&t.createElement(O.A,B({},Z,{"data-qa":"member-entity__team-icon",id:Ae,size:S,className:"c-member__team_icon"})),Dt=t.createElement(a.A,{memberId:_e||"",tooltip:ue,animated:N,className:(0,n.A)("c-member__current-status","c-member__current-status--small",{overflow_ellipsis:J}),"data-qa":"member-entity__status"}),pt=te&&!!U&&t.createElement(f.Ay,{className:"c-member__unread_count",count:U,style:xe?"white":"red","data-qa":"member-entity__mention-badge"}),Qt=t.createElement("span",{className:"c-member__primary_content"},Ve,oe&&!ve&&ce&&Ge,!N&&Je,re&&Dt),Nt=(Mt||pt)&&t.createElement("span",{className:"c-member__secondary_content"},Mt,pt),bt=ne&&!Ee?E.pI.dim:void 0,Yt=(0,n.A)(ee,"c-member","c-member--small",{"c-member--with-presence":oe,"c-member--deleted":ne,"c-base_entity--dim":Pe});return t.createElement(A.Ay,{avatar:Le,className:Yt,text:Qt,size:"small",style:bt,subtext:Nt,"data-qa":Te,"data-sk":ie})}l(w,"SmallMemberEntity"),w.displayName="SmallMemberEntity";function Y(Z,ee){let{forceRealName:_e,member:Ee,id:G,isDraftContext:Ae,showStatus:ce,onlyBoldIfUnread:de,useShortMode:oe,neverBold:$}=ee;const re=Ee||(0,F.nv)(Z,G);let ue;const te=G||(re==null?void 0:re.id);te&&(Ae||de)&&(ue=(0,P.Pu)(Z,te));const ae=(0,x.a)(Z,te);let H=!0;ae?H=!!oe:de?H=!!(ue&&(0,r.KJ)(ue)):$&&(H=!1);let U;return Ae&&(U=!!(ue&&(0,r.yc)(Z,ue.id))),{id:G||(re==null?void 0:re.id),member:re??void 0,teamId:(0,_.Ux)(Z,re),forceRealName:(0,s.A)(_e)?_e:(0,V.E)(Z),unreadCount:(0,u.A)(Z,re),showDraftIcon:U,showStatus:ce&&(0,o.aH)(re),isBold:H,experimentSidebarPrefsApplyToMenusGroupOn:(0,L._Z)(Z,"sidebar_prefs_apply_to_menus")==="on",isUserHidden:ae}}l(Y,"mapStateToProps");const Q=(0,C.N)(Y)(w)},439886:(j,T,e)=>{"use strict";e.d(T,{A:()=>u});var t=e(296540),n=e(528919),s=e(403109),a=e(157056),c=e(470670);function r(){return r=Object.assign||function(m){for(var i=1;i<arguments.length;i++){var d=arguments[i];for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(m[_]=d[_])}return m},r.apply(this,arguments)}l(r,"_extends");let o=l(class extends t.Component{render(){const{className:i,id:d,isActive:_=!1,isDeactivated:h=!1,isDisabled:p=!1,isDraftContext:A,showAvatar:v,showBadge:E,showPresence:f,showStatus:g,showTooltip:y,withTruncationTooltip:I,showUnreadCount:O,useShortMode:M,secondaryContent:C,onlyBoldIfUnread:P=!1,forceRealName:L}=this.props;let x;return _?p||h?x=c.pI.highlightDim:x=c.pI.highlightDark:(p||h)&&(x=c.pI.dim),t.createElement(a.A,{className:(0,n.A)(i,"c-small_member_list_entity"),primaryContent:t.createElement(s.Ay,r({id:d,invert:x===c.pI.highlightDark,isDeactivated:h,truncateStatus:!!C,showAvatar:v,showPresence:f,showBadge:E,useShortMode:M,showStatus:g,showTooltip:y,withTruncationTooltip:I,showUnreadCount:O,isDraftContext:A,onlyBoldIfUnread:P,forceRealName:L},this.props)),secondaryContent:C,size:"small",style:x})}},"SmallMemberListEntity");o.displayName="SmallMemberListEntity";const u=o},484204:(j,T,e)=>{"use strict";e.d(T,{A:()=>h});var t=e(296540),n=e(528919),s=e(824770),a=e(412213),c=e(553287),r=e(979307),o=e(355745),u=e(917780),m=e(135713);function i(){return i=Object.assign||function(p){for(var A=1;A<arguments.length;A++){var v=arguments[A];for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&(p[E]=v[E])}return p},i.apply(this,arguments)}l(i,"_extends");const d=new o.Ay("inline_member");function _(p){const{className:A,multiline:v=!1,inline:E=!1,invert:f=!1,name:g,isSelf:y=!1,isAppOrBot:I=!1,isWorkflowBot:O=!1,showAppOrBotBadge:M=!0,isDeleted:C=!1,isUnknown:P=!1,isNonExistent:L=!1,withTruncationTooltip:x=!1,isBold:F=!0,isUserHidden:V=!1,isChannelFiles:B=!1,isCreator:D=!1,showMemberNameIfHidden:S=!1}=p,R=(0,u.d4)(Z=>(0,m._Z)(Z,"member_name_channel_files_view_two")==="on");let w;if(P||L)w=t.createElement(c.A,{type:L?"non-existent":"unknown","data-qa":"member_name__missing"});else if(V&&!S)w=d.t("Name hidden");else if(B){const Z=R?d.rt("Created by {name}",{name:g}):`Created by ${g}`;w=D?Z:d.rt("Shared by {name}",{name:g})}else w=g;const Y=(0,n.A)(A,"c-member_name",{"c-member_name--deactivated":C,"c-member_name--inverted":f}),Q=F?"strong":"span";return t.createElement(a.CG,i({className:Y,multiline:v,inline:E,withTruncationTooltip:x},(0,r.A)(p)),t.createElement(Q,{"data-qa":"member_name"},w,y&&t.createElement("span",{className:"c-member_name__indicator","data-qa":"member_name__you"},d.t("(you)")),C&&t.createElement("span",{className:"c-member_name__indicator","data-qa":"member_name__deactivated"},d.t("(deactivated)")),(I||O)&&M&&t.createElement(s.A,{className:"c-member_name__indicator","data-qa":"member_name__app",inverse:f,isWorkflow:O})))}l(_,"MemberName"),_.displayName="MemberName";const h=_},650380:(j,T,e)=>{"use strict";e.d(T,{A:()=>oe});var t=e(296540),n=e(528919),s=e(605556),a=e.n(s),c=e(917780),r=e(113574),o=e(490364),u=e(649098);const m=new u.Ay("channel_token"),i=10,d=l($=>{let{memberIds:re}=$;var ue;const te=(ue=(0,c.d4)(r.WR))!==null&&ue!==void 0?ue:void 0;let ae=re.map((H,U)=>t.createElement(o.A,{key:H,userId:H,isFirst:U===0,isSelf:te===H}));return re.length>i+1&&(ae=ae.slice(0,i).concat(m.rt("{count} others",{count:re.length-i}))),t.createElement(t.Fragment,null,(0,u.jd)(ae))},"TooltipMemberNames");d.displayName="TooltipMemberNames";const _=d;var h=e(780076),p=e(710596),A=e(177242),v=e(53332),E=e(23219),f=e(246634),g=e(974576),y=e(484204),I=e(470670),O=e(975725),M=e(298559),C=e(437556);const P=20,L={id:a().string.isRequired,invert:a().bool,isDeactivated:a().bool,isHidden:a().bool,member:a().object,memberPrimaryName:a().string},x={member:void 0,memberPrimaryName:void 0,invert:!1,isDeactivated:!1,isHidden:!1},F=t.forwardRef(($,re)=>{const{id:ue,invert:te,member:ae,memberPrimaryName:H,isDeactivated:U,isHidden:N}=$,K=(0,g.A)(ae),W=(0,E.v3)(ae),J=(0,E.oy)(ae),q=(0,h.lv)(ae),ie=(0,h.mX)(ae),Te=q||ie,Me=te&&!U,ke=t.createElement(y.A,{"data-qa":"mpim-entity__name",name:H,invert:Me,isAppOrBot:K,isWorkflowBot:W,isDeleted:J,isNonExistent:q,isUnknown:ie});let Pe;Te?Pe=t.createElement(O.A,{isNonExistent:q,size:P}):Pe=t.createElement(A.Ay,{className:"c-small_mpim_entity__member_avatar","data-qa":"mpim-entity__avatar",size:I.RG.small,userId:ue,tabIndex:-1,isInteractive:!1});const Ie=(0,n.A)("c-small_mpim_entity__member",{"c-small_mpim_entity__member--deleted":J,"c-small_mpim_entity__member--hidden":N});return t.createElement("div",{className:Ie,"data-id":ue,ref:re},Pe,ke)});F.propTypes=L,F.defaultProps=x;function V($,re){let{id:ue}=re;const te=(0,C.nv)($,ue);return{member:te,memberPrimaryName:(0,f.sE)($,te,!1,!1)}}l(V,"mapStateToProps");const B=(0,M.N)(V,null,null,{forwardRef:!0})(F);var D=e(412213),S=e(411859),R=e(744199),w=e(604053),Y=e(314878),Q=e(885850),Z=e(658336),ee=e(135713);function _e(){return _e=Object.assign||function($){for(var re=1;re<arguments.length;re++){var ue=arguments[re];for(var te in ue)Object.prototype.hasOwnProperty.call(ue,te)&&($[te]=ue[te])}return $},_e.apply(this,arguments)}l(_e,"_extends");const Ee=I.RG.small,G={className:a().string,"data-qa":a().string,"data-sk":a().string,mpim:a().object,id:a().string,invert:a().bool,isDeactivated:a().bool,memberIds:a().array,isActive:a().bool,clientTheme:a().oneOf(["light","dark"]),matchData:a().array,onlyBoldIfUnread:a().bool,showUnreadBadge:a().bool,unreadCount:a().number,shortenTooltipContents:a().bool,showAvatar:a().bool,experimentSidebarPrefsApplyToMenusGroupOn:a().bool},Ae={className:void 0,"data-qa":void 0,"data-sk":"small_mpim_entity",mpim:void 0,id:void 0,invert:!1,isDeactivated:!1,memberIds:[],isActive:!1,clientTheme:"light",matchData:[],onlyBoldIfUnread:!1,showUnreadBadge:!1,unreadCount:0,shortenTooltipContents:!1,showAvatar:!0,experimentSidebarPrefsApplyToMenusGroupOn:!1};function ce($){let{className:re,"data-qa":ue,"data-sk":te,id:ae,invert:H,isDeactivated:U,mpim:N,memberIds:K,isActive:W,clientTheme:J,matchData:q,onlyBoldIfUnread:ie,showUnreadBadge:Te,unreadCount:Me,shortenTooltipContents:ke,showAvatar:Pe,experimentSidebarPrefsApplyToMenusGroupOn:Ie}=$;const X=(0,h.lv)(N),ne=(0,h.mX)(N),fe=(0,p.N4)(N),be=ae||(N==null?void 0:N.id),Be=H&&!U,We=Te&&!!Me&&t.createElement(S.Ay,{className:"c-member__unread_count",count:Me,style:Be?"white":"red","data-qa":"member-entity__mention-badge"}),Re=We&&t.createElement("span",{className:"c-member__secondary_content"},We),ve=(0,t.useCallback)(Ke=>{if(X||ne)return t.createElement(O.A,_e({},Ke,{isNonExistent:X,size:Ee,invert:Be}));const ht=K==null?void 0:K[0];return t.createElement("span",{className:(0,n.A)("c-small_mpim_entity__mpim_avatars","c-small_mpim_entity__count",re,{"c-small_mpim_entity__mpim_avatars--inverted":Be,[`c-small_mpim_entity__mpim_avatars--${J}`]:J!=="light"})},Pe&&t.createElement(A.Ay,{userId:ht,className:"c-small_mpim_entity__mpim_avatars_mpim1",size:14,isInteractive:!1,"data-qa":"small-mpim-entity-mpim-avatar"}),t.createElement("div",{className:(0,n.A)("c-small_mpim_entity__mpim_counter",{"c-small_mpim_entity__mpim_counter--count-only":!Pe&&Ie}),"data-qa":"small-mpim-entity-mpim-counter"},t.createElement("div",{"aria-hidden":!0,className:"c-small_mpim_entity__mpim_counter_inner"},fe)))},[re,J,X,ne,fe,Be,K,Pe,Ie]),xe=(0,t.useCallback)(()=>{let Ke;return ke?Ke=t.createElement(_,{memberIds:K}):Ke=K.map(ht=>t.createElement(B,{id:ht,key:ht})),t.createElement(t.Fragment,null,Ke)},[K,ke]);let He=U?I.pI.dim:null;Be&&(He=I.pI.highlightDark);const je=t.createElement(D.Ay,{"data-id":be,"data-qa":ue,"data-sk":te,avatar:ve,className:re,size:"small",style:He,subtext:Re,text:t.createElement(v.A,{"data-qa":"name",id:be,mpim:N,invert:Be,matchData:q,onlyBoldIfUnread:ie})});return t.createElement(R.Ay,{tip:xe(),tipClassName:ke?"":"c-small_mpim_entity__tooltip",position:"top-right",shouldForceVisible:W,shouldOnlyShowWhenTruncated:W,zIndex:"above_fs"},t.createElement("div",null,je))}l(ce,"SmallMpimEntity"),ce.displayName="SmallMpimEntity",ce.propTypes=G,ce.defaultProps=Ae;function de($,re){let{id:ue,mpim:te,matchData:ae}=re;const H=te||(0,Q.OL)($,ue),U=(0,Y.B)($,ue),N=(0,ee._Z)($,"sidebar_prefs_apply_to_menus")==="on",K=(0,w.A)({state:$,mpim:H,matchData:ae}),W=(0,Z.to)($),J=(0,p.kR)(H,U);return{mpim:H,experimentSidebarPrefsApplyToMenusGroupOn:N,memberIds:K,clientTheme:W,unreadCount:J}}l(de,"small_mpim_entity_mapStateToProps");const oe=(0,M.N)(de)(ce)},53332:(j,T,e)=>{"use strict";e.d(T,{A:()=>g});var t=e(296540),n=e(351582),s=e(219477),a=e(605556),c=e.n(a),r=e(780076),o=e(710596),u=e(412213),m=e(3287),i=e(604053),d=e(298559),_=e(885850),h=e(437556);const p=4,A={className:c().string,mpim:c().object,multiline:c().bool,name:c().string,isAnyMemberUnknown:c().bool,invert:c().bool,inline:c().bool,onlyBoldIfUnread:c().bool},v={className:void 0,mpim:void 0,multiline:!1,name:void 0,isAnyMemberUnknown:!1,invert:!1,inline:void 0,onlyBoldIfUnread:!1};function E(y){let{className:I,mpim:O,multiline:M,name:C,invert:P,isAnyMemberUnknown:L,inline:x,onlyBoldIfUnread:F}=y;const V=(0,r.lv)(O),B=(0,r.mX)(O),D=(0,o.N4)(O),S=!F||(0,o.KJ)(O);let R;return B||V||L?R=(0,n.A)(D||p).map(w=>t.createElement(m.A,{key:w,className:"c-mpim_entity__missing_text",isNonExistent:V,size:"random",invert:P})):R=S?t.createElement("strong",{"data-qa":"mpim_name"},C):t.createElement("span",{"data-qa":"mpim_name"},C),t.createElement(u.CG,{className:I,multiline:M,breakWords:!1,inline:x},R)}l(E,"MpimName"),E.displayName="MpimName",E.propTypes=A,E.defaultProps=v;const f=l((y,I)=>{let{id:O,mpim:M,matchData:C}=I;const P=M||(0,_.OL)(y,O),L=(0,i.A)({state:y,mpim:P,matchData:C}),x=L&&L.map(B=>(0,h.nv)(y,B)),F=(0,s.A)(x,r.GU),V=(0,o.Xx)(y,P,L);return{mpim:P,name:V,isAnyMemberUnknown:F}},"mapStateToProps"),g=(0,d.N)(f)(E)},192930:(j,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(296540),n=e(528919),s=e(979307);function a(){return a=Object.assign||function(o){for(var u=1;u<arguments.length;u++){var m=arguments[u];for(var i in m)Object.prototype.hasOwnProperty.call(m,i)&&(o[i]=m[i])}return o},a.apply(this,arguments)}l(a,"_extends");function c(o){const{children:u,className:m}=o;return u?t.createElement("span",a({className:(0,n.A)(m,"c-base_entity__metadata")},(0,s.A)(o)),u):null}l(c,"BaseEntityMetadata"),c.displayName="BaseEntityMetadata";const r=c},416898:(j,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(296540),n=e(528919),s=e(979307);function a(){return a=Object.assign||function(o){for(var u=1;u<arguments.length;u++){var m=arguments[u];for(var i in m)Object.prototype.hasOwnProperty.call(m,i)&&(o[i]=m[i])}return o},a.apply(this,arguments)}l(a,"_extends");function c(o){const{children:u,className:m}=o;return u?t.createElement("span",a({className:(0,n.A)(m,"c-base_entity__subtext")},(0,s.A)(o)),u):null}l(c,"BaseEntitySubtext"),c.displayName="BaseEntitySubtext";const r=c},843112:(j,T,e)=>{"use strict";e.d(T,{A:()=>o});var t=e(296540),n=e(528919),s=e(639332),a=e(979307);function c(){return c=Object.assign||function(u){for(var m=1;m<arguments.length;m++){var i=arguments[m];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(u[d]=i[d])}return u},c.apply(this,arguments)}l(c,"_extends");function r(u){const{children:m=null,className:i="",multiline:d=!1,inline:_=!1,breakWords:h=!0,withTruncationTooltip:p=!1}=u;if(!m)return null;const A=d?2:1;return _?t.createElement("span",c({className:(0,n.A)(i,"c-base_entity__text")},(0,a.A)(u)),m):t.createElement("span",c({className:(0,n.A)(i,"c-base_entity__text")},(0,a.A)(u)),t.createElement(s.A,{lines:A,breakWords:h,withTooltip:p},m))}l(r,"BaseEntityText"),r.displayName="BaseEntityText";const o=r},510526:(j,T,e)=>{"use strict";e.d(T,{A:()=>i});var t=e(296540),n=e(528919),s=e(42302),a=e(470670),c=e(979307);function r(){return r=Object.assign||function(d){for(var _=1;_<arguments.length;_++){var h=arguments[_];for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(d[p]=h[p])}return d},r.apply(this,arguments)}l(r,"_extends");const o=l((d,_,h,p)=>!(d!==a.ny.medium||!h||p||_),"shouldVerticallyCenter"),u={className:"c-base_entity__avatar"},m=l(d=>{const{size:_,style:h=a.pI.normal,text:p=null,className:A="",subtext:v=null,avatar:E=s.A,metadata:f=null,forwardedRef:g=null}=d,y=E(u),I=!!y;return t.createElement("div",r({className:(0,n.A)(A,"c-base_entity",`c-base_entity--${_}`,{"c-base_entity--has-avatar":I,"c-base_entity--dim":h===a.pI.dim,"c-base_entity--vertically-center":o(_,v,I,f)})},(0,c.A)(d),{ref:g}),y,t.createElement("div",{className:"c-base_entity__text-contents"},p,v,f))},"BaseEntity");m.displayName="BaseEntity";const i=m},412213:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>c,CG:()=>a.A,Q:()=>n.A,sT:()=>s.A});var t=e(510526),n=e(192930),s=e(416898),a=e(843112);const c=t.A},586030:(j,T,e)=>{"use strict";e.d(T,{A:()=>d});var t=e(296540),n=e(528919),s=e(42302),a=e(639332),c=e(470670),r=e(979307);function o(){return o=Object.assign||function(_){for(var h=1;h<arguments.length;h++){var p=arguments[h];for(var A in p)Object.prototype.hasOwnProperty.call(p,A)&&(_[A]=p[A])}return _},o.apply(this,arguments)}l(o,"_extends");const u=l(_=>{let{children:h,truncate:p=!1,truncateWidth:A,withTruncationTooltip:v=!1}=_;const E=(0,t.useMemo)(()=>({maxWidth:A||void 0}),[A]);if(!p)return t.createElement("span",null,h);let f;return A?f=t.createElement("span",{className:"c-base_inline_entity__inline_wrapper",style:E},h):f=t.createElement("span",null,t.createElement(a.A,{lines:1,withTooltip:v},h)),f},"MaybeTruncate");u.displayName="MaybeTruncate";const m={className:"c-base_inline_entity__avatar","data-qa":"base_inline_entity__avatar"};let i=l(class extends t.Component{render(){const{className:h,avatar:p=s.A,primaryContent:A,secondaryContent:v,style:E=c.pI.normal,truncate:f=!1,truncateWidth:g,withTruncationTooltip:y=!1}=this.props,I=p(m),O=!!I;return t.createElement("span",o({className:(0,n.A)(h,"c-base_inline_entity",{"c-base_inline_entity--has_avatar":O,"c-base_inline_entity--truncate_block":f&&!g,"c-base_inline_entity--truncate_inline":f&&g,"c-base_inline_entity--dim":E===c.pI.dim,"c-base_inline_entity--highlight-dark":E===c.pI.highlightDark,"c-base_inline_entity--highlight-dim":E===c.pI.highlightDim,"c-base_inline_entity--highlight-light":E===c.pI.highlightLight})},(0,r.A)(this.props)),t.createElement(u,{truncate:f,truncateWidth:g,withTruncationTooltip:y},I,t.createElement("span",{className:"c-base_inline_entity__primary_content"},A),v&&t.createElement("span",{className:"c-base_inline_entity__secondary_content"},v)))}},"BaseInlineEntity");i.displayName="BaseInlineEntity";const d=i},157056:(j,T,e)=>{"use strict";e.d(T,{A:()=>o});var t=e(296540),n=e(528919),s=e(470670),a=e(979307);function c(){return c=Object.assign||function(u){for(var m=1;m<arguments.length;m++){var i=arguments[m];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(u[d]=i[d])}return u},c.apply(this,arguments)}l(c,"_extends");let r=l(class extends t.Component{render(){const{className:m,ariaLabel:i,primaryContent:d,secondaryContent:_,size:h=s.ny.medium,style:p=s.pI.normal,padding:A=s.FK.normal}=this.props;return t.createElement("div",c({className:(0,n.A)(m,"c-base_list_entity",`c-base_list_entity--${h}`,{"c-base_list_entity--dim":p===s.pI.dim,"c-base_list_entity--highlight-dark":p===s.pI.highlightDark,"c-base_list_entity--highlight-dim":p===s.pI.highlightDim,"c-base_list_entity--highlight-light":p===s.pI.highlightLight,"c-base_list_entity--no-pad":A===s.FK.none})},(0,a.A)(this.props),{"aria-label":i}),t.createElement("div",{className:"c-base_list_entity__primary_content"},d),_&&t.createElement("div",{className:"c-base_list_entity__secondary_content"},_))}},"BaseListEntity");r.displayName="BaseListEntity";const o=r},190999:(j,T,e)=>{"use strict";e.d(T,{A:()=>g});var t=e(296540),n=e(528919),s=e(934861),a=e(88748),c=e(412213),r=e(470670),o=e(465312),u=e(616125),m=e(649098),i=e(298559),d=e(881805),_=e(135713),h=e(129318),p=e(149038);function A(){return A=Object.assign||function(y){for(var I=1;I<arguments.length;I++){var O=arguments[I];for(var M in O)Object.prototype.hasOwnProperty.call(O,M)&&(y[M]=O[M])}return y},A.apply(this,arguments)}l(A,"_extends");const v=new m.Ay("user_group_entity");function E(y){let{className:I,invert:O,showDescription:M=!0,userGroup:C,userGroupTeamName:P,experimentXwsUsergroupDecoratorsGroupTreatment:L,isDeactivated:x}=y;const F=x||!(0,a.V1)(C),V=(0,t.useCallback)(ee=>t.createElement("span",{className:"margin_right_50"},t.createElement(u.A,A({},ee,{name:"user-groups",size:"18"}))),[]);if((0,a.t8)(C)||(0,a.QR)(C)){const ee=(0,n.A)("c-small_user_group__missing_icon",{"c-small_user_group__missing_icon--inverted":O});return t.createElement("div",{className:"c-small_user_group__missing"},t.createElement("div",{className:ee},t.createElement(u.A,{name:"user-groups",size:"18"})),t.createElement(o.A,{type:(0,a.t8)(C)?"unknown":"non-existent",invert:O}))}const B=(0,a.ue)(C),D=t.createElement("span",{className:"c-user_group__name c-small_user_group__name"},B),S=(0,a.NF)(C),R=(0,a.Br)(C),w="\xB7",Y="\xA0\xA0";let Q;if(L){const ee=P&&t.createElement(t.Fragment,null,"\xA0\xA0",t.createElement("span",{className:"c-small_user_group__team"},P));Q=t.createElement(t.Fragment,null,t.createElement("span",{className:"c-small_user_group__count"},"(",v.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:R}),")"),ee)}else Q=t.createElement(t.Fragment,null,t.createElement("span",{className:"c-small_user_group__count"},[w,Y],v.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:R}),S&&[Y,w,Y]),t.createElement("span",{className:"c-small_user_group__description"},S));let Z;return F?Z=r.pI.dim:O&&(Z=r.pI.highlightDark),t.createElement(c.Ay,{avatar:V,className:I,size:"small",style:Z,text:t.createElement(c.CG,null,D,M&&Q),"data-usergroup-id":C.id})}l(E,"SmallUserGroupEntity"),E.displayName="SmallUserGroupEntity";const f=l((y,I)=>{let{id:O,userGroup:M}=I;const C=M||(0,p.lJ)(y,O),P=(0,d.ZT)(y),L=(0,a.$Q)(C),x=L!==P&&(0,s.F1)((0,h._J)(y,L));return{userGroup:C,userGroupTeamName:x,experimentXwsUsergroupDecoratorsGroupTreatment:(0,_._Z)(y,"xws_usergroup_decorators")==="treatment"}},"mapStateToProps"),g=(0,i.N)(f)(E)},470670:(j,T,e)=>{"use strict";e.d(T,{FK:()=>s,P:()=>c,RG:()=>t,ny:()=>a,pI:()=>n});const t={xxlarge:102,xlarge:72,large:56,medium:36,small:20,inline:14},n={normal:"normal",dim:"dim",highlightDark:"highlight-dark",highlightDim:"highlight-dim",highlightLight:"highlight-light"},s={normal:"12px",none:"0"},a={small:"small",medium:"medium"},c={true:!0,bestOnly:"best_only",false:!1}},549749:(j,T,e)=>{"use strict";e.d(T,{A:()=>v});var t=e(296540),n=e(528919),s=e(877500),a=e(42302),c=e(769497),r=e(369391),o=e(820709),u=e(861789),m=e(3296),i=e(476514),d=e(26689),_=e(131606),h=e(532395);function p(){return p=Object.assign||function(E){for(var f=1;f<arguments.length;f++){var g=arguments[f];for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(E[y]=g[y])}return E},p.apply(this,arguments)}l(p,"_extends");const A={onChange:{action:h.UiAction.ENTER_TEXT}};let v=l(class extends t.PureComponent{componentDidMount(){if(this.getTextStyle(),this.props.focusOnMount){var f;(f=this.input.current)===null||f===void 0||f.focus()}}componentDidUpdate(f,g){if((this.props.value!==f.value||this.state.isFocused!==g.isFocused)&&this.getTextStyle(),this.props.value!==f.value&&!this.state.everReceivedUserInput&&this.setEverReceivedUserInput(),this.props.focusOnMount&&f.focusOnMount!==this.props.focusOnMount&&!this.state.isFocused){var y;(y=this.input.current)===null||y===void 0||y.focus()}}onBlur(){const{onBlur:f}=this.props;this.setFocus(!1),f&&f()}onFocus(){const{onFocus:f}=this.props;this.setFocus(!0),f&&f()}getTextStyle(){var f;const{maxCharacterLimit:g}=this.props;if(!g){this.setTextStyle({});return}const I={paddingRight:(f=this.characterCount)===null||f===void 0?void 0:f.getCharacterCountWidth()};this.setTextStyle(I)}setCharacterCountRef(f){this.characterCount=f}setEverReceivedUserInput(){this.setState(()=>({everReceivedUserInput:!0}))}setFocus(f){this.setState(()=>({isFocused:f}))}setInputRef(f){this.input=f}setTextStyle(f){this.setState(()=>({textStyle:f}))}blur(){this.input.current&&this.input.current.blur()}focus(){this.input.current&&this.input.current.focus()}getIsInputLengthTooShort(){const{isRequired:f,minCharacterLimit:g,value:y}=this.props,{everReceivedUserInput:I}=this.state;return!I||g==null||!f&&y.length===0?!1:y.length<g}getIsInputLengthTooLong(){const{maxCharacterLimit:f,value:g}=this.props;return f==null?!1:g.length>f}renderDeprecatedErrorMaybe(){const{showError:f,errorLevel:g,errorText:y,errorType:I,isRequired:O,maxCharacterLimit:M,minCharacterLimit:C,value:P}=this.props;return f?y?t.createElement(r.Ay,{id:this.state.errorId,level:g,type:I,className:"margin_bottom_100"},y):!O&&P.length===0?null:this.getIsInputLengthTooLong()?t.createElement(r.Ay,{id:this.state.errorId,level:r.A_.error,type:I,className:"margin_bottom_100"},(0,o.zI)(M)):this.getIsInputLengthTooShort()&&!this.state.isFocused?t.createElement(r.Ay,{id:this.state.errorId,level:r.A_.error,type:I,className:"margin_bottom_100"},(0,o.r7)(C)):null:null}renderErrorMaybe(){const{showError:f,errorText:g,isRequired:y,maxCharacterLimit:I,minCharacterLimit:O,value:M}=this.props;return f?g?t.createElement(d.A,{"data-qa":"form-text-area-inline-alert",id:this.state.errorId},g):!y&&M.length===0?null:this.getIsInputLengthTooLong()?t.createElement(d.A,{id:this.state.errorId,"data-qa":"form-text-area-max-char-alert"},(0,o.zI)(I)):this.getIsInputLengthTooShort()&&!this.state.isFocused?t.createElement(d.A,{id:this.state.errorId,"data-qa":"form-text-area-min-char-alert"},(0,o.r7)(O)):null:null}renderHintMaybe(){const{hintText:f}=this.props;return f?t.createElement(u.A,{id:this.state.hintId},f):null}renderTextArea(){const{className:f,showError:g,errorId:y,errorLevel:I,errorText:O,errorType:M,hintId:C,hintText:P,useInlineAlert:L,id:x,isRequired:F,isInvalid:V,labelId:B,name:D,onChange:S,onFocus:R,onBlur:w,maxCharacterLimit:Y,minCharacterLimit:Q,focusOnMount:Z,autoClogProps:ee,ariaDescribedById:_e,inputRef:Ee,...G}=this.props,{textStyle:Ae}=this.state,ce=!!O||this.getIsInputLengthTooLong()||this.getIsInputLengthTooShort()||V,de=(0,n.A)({[`c-input_textarea--with_${I}`]:ce,"c-input_textarea--with_hint":P,"c-input_textarea--with_character_count":!!Y,"c-input_text--with_inline_alert":L},f),oe=(0,o.Yk)([B,ce?this.state.errorId:void 0]),$=(0,o.Yk)([_e,this.state.hintId,this.characterCounterId]),re=t.createElement(i.A,p({},G,{ref:this.setInputRef,style:Ae,ariaDescribedby:$,isInvalid:ce,ariaLabelledby:oe,ariaRequired:F,className:de,id:x,"data-qa":G["data-qa"]||x,name:D,onChange:S,onFocus:this.onFocus,onBlur:this.onBlur}));return ee?t.createElement(c.A,{autoClogProps:ee,actionProps:A,elementType:h.ElementType.TEXTAREA},re):re}renderWrappedTextareaMaybe(){const{value:f,maxCharacterLimit:g,size:y,isDisabled:I}=this.props;let O=this.renderTextArea();return g&&(O=t.createElement(m.A,{id:this.characterCounterId,ref:this.setCharacterCountRef,currentCount:f==null?void 0:f.length,isDisabled:I,maxCharacterLimit:g,type:"multiline",size:y},O)),O}render(){const f=this.props.useInlineAlert?this.renderErrorMaybe():this.renderDeprecatedErrorMaybe();return t.createElement("div",{"data-qa-formtextarea":!0,className:"c-input_textarea__wrapper"},this.renderWrappedTextareaMaybe(),f,this.renderHintMaybe())}constructor(f){super(f);const{id:g}=this.props;(0,_.v)(this,["onFocus","onBlur","setInputRef","setCharacterCountRef"]),this.state={errorId:(0,s.A)(this.props,"errorId",(0,o.Es)(g,"error")),hintId:(0,s.A)(this.props,"hintId",(0,o.Es)(g,"hint")),isFocused:!1,everReceivedUserInput:!1,textStyle:{}},this.props.maxCharacterLimit&&(this.characterCounterId=(0,o.Es)(g,"character-count")),this.input=t.createRef()}},"FormTextareaInput");v.displayName="FormTextareaInput",v.defaultProps={className:null,showError:!0,errorId:void 0,errorLevel:r.A_.error,errorText:null,errorType:r.QE.nestedBox,useInlineAlert:!1,hintText:null,hintId:void 0,isDisabled:!1,isRequired:!1,isInvalid:!1,labelId:null,onChange:a.A,onFocus:a.A,onBlur:a.A,placeholder:void 0,size:i.F.medium,value:"",maxCharacterLimit:null,minCharacterLimit:null,focusOnMount:!1,autoClogProps:void 0,type:void 0,ariaDescribedById:void 0,role:void 0,inputRef:void 0}},476514:(j,T,e)=>{"use strict";e.d(T,{A:()=>d,F:()=>o});var t=e(296540),n=e(528919),s=e(42302),a=e(769497),c=e(532395);function r(){return r=Object.assign||function(_){for(var h=1;h<arguments.length;h++){var p=arguments[h];for(var A in p)Object.prototype.hasOwnProperty.call(p,A)&&(_[A]=p[A])}return _},r.apply(this,arguments)}l(r,"_extends");const o={small:"small",medium:"medium",large:"large"},u={onBlur:{action:c.UiAction.SAVE}};var m;let i=l(class extends(m=t.Component){componentDidMount(){var h;this.props.focusOnMount&&(!((h=this.textAreaRef)===null||h===void 0)&&h.current)&&this.textAreaRef.current.focus()}onChange(h){this.props.onChange(h.target.value)}render(){const{ariaDescribedby:h,isInvalid:p,ariaLabelledby:A,ariaRequired:v,className:E,placeholder:f,id:g,isDisabled:y,name:I,resize:O,size:M,focusOnMount:C,autoClogProps:P,...L}=this.props,x=(0,n.A)("c-input_textarea",{"c-input_textarea--large":M===o.large,"c-input_textarea--small":M===o.small,"c-input_textarea--resize_none":O==="none","c-input_textarea--resize_both":O==="both","c-input_textarea--resize_h":O==="horizontal","c-input_textarea--with_error":p,"c-input_textarea--with_inline_alert":p},E),F=t.createElement("textarea",r({},L,{"aria-describedby":h,"aria-invalid":p,"aria-labelledby":A,"aria-required":v,className:x,disabled:y,id:g,name:I,onChange:this.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,placeholder:f,ref:this.textAreaRef,value:this.props.value,style:this.props.style,maxLength:this.props.maxLength}));return P?t.createElement(a.A,{autoClogProps:P,actionProps:u,elementType:c.ElementType.TEXTAREA},F):F}constructor(h){super(h),this.onChange=this.onChange.bind(this),this.textAreaRef=t.createRef()}},"TextareaInput");i.displayName="TextareaInput",i.defaultProps={ariaDescribedby:"",isInvalid:!1,ariaLabelledby:"",ariaRequired:!1,className:null,isDisabled:!1,onChange:s.A,onFocus:s.A,onBlur:s.A,placeholder:"",resize:null,size:o.medium,style:void 0,maxLength:void 0,value:"",focusOnMount:!1,autoClogProps:void 0};const d=i},535590:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(296540),n=e(528919),s=e(26689);function a(c){let{className:r,errors:o}=c;var u;return o&&o.length>0?t.createElement(t.Fragment,null,o.map(m=>(0,t.isValidElement)(m.message)?t.cloneElement(m.message,{key:m.id,id:m.id,className:(0,n.A)(r,"c-field_input__helpers")}):(u=!!m.message&&t.createElement(s.A,{className:(0,n.A)(r,"c-field_input__helpers"),key:m.id,id:m.id},m.message))!==null&&u!==void 0?u:null)):null}l(a,"FieldErrors")},931881:(j,T,e)=>{"use strict";e.d(T,{A:()=>d});var t=e(296540),n=e(528919),s=e(769497),a=e(218961),c=e(622311),r=e(532395),o=e(674263);function u(){return u=Object.assign||function(_){for(var h=1;h<arguments.length;h++){var p=arguments[h];for(var A in p)Object.prototype.hasOwnProperty.call(p,A)&&(_[A]=p[A])}return _},u.apply(this,arguments)}l(u,"_extends");const m={onClick:{action:r.UiAction.CLICK}},i=t.forwardRef(l(function(h,p){let{autoClogProps:A,className:v,href:E,invert:f=!1,children:g,hasKeyboardFocus:y=!1,...I}=h;const O=(0,n.A)("c-link",{"c-link--focus-visible":y,"c-link--invert":f},v),M=I.target==="_blank"||(E==null?void 0:E.startsWith("mailto:")),C=t.createElement("a",u({},(0,o.A)(I),{className:O,href:E,ref:p}),g,M&&t.createElement(c.A,null));return A?t.createElement(s.A,{autoClogProps:A,actionProps:m,elementType:r.ElementType.LINK},C):C},"BaseLink"));i.displayName="BaseLink";const d=(0,a.A)(i)},359733:(j,T,e)=>{"use strict";e.d(T,{A:()=>n,r:()=>t.rY});var t=e(411859);const n=t.Ay},411859:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>u,rY:()=>c});var t=e(296540),n=e(528919),s=e(744199);function a(){return a=Object.assign||function(m){for(var i=1;i<arguments.length;i++){var d=arguments[i];for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(m[_]=d[_])}return m},a.apply(this,arguments)}l(a,"_extends");const c={transparent:"transparent",black:"black",red:"red",white:"white",blue:"blue",minGray:"min_gray",minGrayDarken:"min_gray_darken",themed:"themed"},r=l((m,i)=>m>i?`${i}+`:String(m),"getCountText"),o=l(m=>{let{className:i,count:d,maxCount:_=9,style:h="black",toolTipText:p=""}=m;if(!d||d<0)return null;const A=p?s.Ay:t.Fragment,v=p?{tip:p}:{};return t.createElement(A,a({},v),t.createElement("span",{"aria-hidden":"true",className:(0,n.A)(i,"c-mention_badge",`c-mention_badge--${h}`,{"c-mention_badge--max":d>_},p&&"c-mention_badge--default"),"data-qa":"mention_badge"},r(d,_)))},"MentionBadge");o.displayName="MentionBadge";const u=t.memo(o)},293752:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>u,Dr:()=>s.A,YJ:()=>t.YJ,a:()=>n.A,bX:()=>c.Ay,c$:()=>a.Ay,cQ:()=>r.A});var t=e(814684),n=e(435233),s=e(888455),a=e(338305),c=e(435405),r=e(869716),o=e(232120);const u=t.Ay},435233:(j,T,e)=>{"use strict";e.d(T,{A:()=>g});var t=e(296540),n=e(792866),s=e(389610),a=e(605556),c=e.n(a),r=e(961024),o=e(89286),u=e(730563),m=e(814684),i=e(888455),d=e(338305),_=e(435405),h=e(402137),p=e(187448);function A(){return A=Object.assign||function(y){for(var I=1;I<arguments.length;I++){var O=arguments[I];for(var M in O)Object.prototype.hasOwnProperty.call(O,M)&&(y[M]=O[M])}return y},A.apply(this,arguments)}l(A,"_extends");const v={type:c().oneOf((0,n.A)(h.A)),label:c().node,description:c().oneOfType([c().string,c().element]),children:c().element,key:c().string,click:c().func,danger:c().bool,dataQa:c().string,checked:c().bool,indeterminate:c().bool,ariaHidden:c().bool,target:c().string,href:c().string,download:c().string,action:c().func,payload:c().object,autoClogProps:c().object},E={template:c().arrayOf(c().shape({...v,renderSubmenu:c().func,template:c().arrayOf(c().shape(v)),submenu:c().arrayOf(c().shape(v)),checked:c().bool})).isRequired};let f=l(class Hr extends t.PureComponent{render(){const{template:I,...O}=this.props,M=I.map((C,P)=>{if(!C)return null;if(C.type===h.A.separator)return t.createElement(_.Ay,A({},C,{key:C.key||`separator-${P}`}));if(C.type===h.A.sub_separator)return t.createElement(_.Ay,A({},C,{className:"c-menu_separator__li--sub",key:C.key||`separator-${P}`}));if(C.type===h.A.header)return t.createElement(d.Ay,{key:C.key||`header-${P}`,label:C.label,className:C.className});if(C.type===h.A.loading)return t.createElement(u.A,{key:C.key||"loading",size:"large"});const L={children:C.children,className:C.className,classNameListItem:C.classNameListItem,label:C.label,description:C.description,icon:C.icon,badgeCount:C.badgeCount,badgeLabel:C.badgeLabel,badgeClassName:C.badgeClassName,shortcut:C.shortcut,showEnter:C.showEnter,onSelected:C.click,target:C.target,href:C.href,download:C.download,danger:C.danger,type:C.type,"data-qa":C.dataQa,disabled:C.disabled,showOfflineIcon:C.showOfflineIcon,showLinkIndicatorIcon:C.showLinkIndicatorIcon,checked:C.checked,indeterminate:C.indeterminate,width:C.submenuWidth,autoClogProps:C.autoClogProps,megaphoneSpaceName:C.megaphoneSpaceName,megaphoneNotificationName:C.megaphoneNotificationName,onMount:C.onMount,onUnmount:C.onUnmount,ariaDescribedBy:C.ariaDescribedBy,ariaRole:C.ariaRole},x=C.key||C.label;if(C.type===h.A.submenu){const V=(0,s.A)(C.renderSubmenu)?C.renderSubmenu:B=>t.createElement(Hr,A({template:C.template||C.submenu},B,{width:C.submenuWidth}));return t.createElement(p.A,A({},L,{label:C.label,renderSubmenu:V,key:x}))}if(C.type===h.A.custom)return C.ariaHidden===!1&&!(0,r.A)()?C.children:t.createElement("div",{"aria-hidden":C.ariaHidden===!1?"false":"true",key:C.key,"data-qa":C.dataQa},C.children);if(C.type===h.A.subheaderChild)return t.createElement(i.A,A({key:x,type:h.A.subheaderChild},L));const F=t.createElement(i.A,A({key:x},L));return C.megaphoneSpaceName&&C.megaphoneNotificationName?t.createElement(o.Ay,{key:x,spaceName:C.megaphoneSpaceName,notifications:{[C.megaphoneNotificationName]:{component:()=>F}}}):F});return t.createElement(m.Ay,A({},O),M)}},"MenuFromTemplate");f.displayName="MenuFromTemplate",f.propTypes=E;const g=f},338305:(j,T,e)=>{"use strict";e.d(T,{$b:()=>m,Ay:()=>o,a6:()=>u});var t=e(296540),n=e(528919),s=e(42302);function a(){return a=Object.assign||function(i){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var h in _)Object.prototype.hasOwnProperty.call(_,h)&&(i[h]=_[h])}return i},a.apply(this,arguments)}l(a,"_extends");const c="_isSlackMenuItemHeader";function r(i){let{for:d,label:_,className:h,onMouseEnter:p=s.A}=i;return t.createElement("div",a({},d&&{id:m(d)},{"aria-hidden":"true",className:(0,n.A)("c-menu_item__header",h),onMouseEnter:p,"data-qa":"menu-item-header"}),_)}l(r,"MenuItemHeader"),r.displayName="MenuItemHeader",r[c]=!0;const o=r;function u(i){return!!(i!=null&&i[c])}l(u,"isMenuItemHeader");function m(i){return`${i}-label`}l(m,"getMenuItemHeaderIdForGroup")},888455:(j,T,e)=>{"use strict";e.d(T,{A:()=>I});var t=e(296540),n=e(528919),s=e(709703),a=e(42302),c=e(650189),r=e(927675),o=e(704189),u=e(61629),m=e(411859),i=e(402137),d=e(232120),_=e(616125),h=e(532395),p=e(119110),A=e(649098),v=e(298559);const E=new A.Ay("menu");let f=l(class extends t.Component{componentDidMount(){this.props.onMount&&this.props.onMount()}componentWillUnmount(){this.props.onUnmount&&this.props.onUnmount()}onSelected(M){var C,P;(P=(C=this.props).menuCallbackBefore)===null||P===void 0||P.call(C,M),this.props.onSelected(M),this.props.menuCallback(this.props.menuCallbackId,M)}determineMenuRole(){const{type:M,ariaRole:C}=this.props;if(C)return C;switch(M){case i.A.radio:return"menuitemradio";case i.A.checkbox:return"menuitemcheckbox";default:return"menuitem"}}renderBadgeMaybe(){const{badgeLabel:M,badgeCount:C,badgeClassName:P,highlighted:L}=this.props;return C?t.createElement(m.Ay,{count:C,style:L?m.rY.white:m.rY.red}):M?t.createElement(o.A,{className:P},M):null}renderAdditionalIconMaybe(){const{additionalIcon:M}=this.props;return M?t.createElement("div",{className:"c-menu_item__additional-icon","data-qa":"menu_item_additional_icon",role:"presentation"},M):null}renderCaret(){return!this.props.withSubmenu||this.props.disabled?null:t.createElement("div",{className:"c-menu_item__submenu-indicator","data-qa":"menu_item_submenu_indicator",role:"presentation"},t.createElement(_.A,{name:this.props.showFullCarat?"caret-right-full":"caret-right"}))}renderEnterMaybe(){const{showEnter:M,highlighted:C}=this.props;return!M||!C?null:t.createElement(u.A,{legacy:!0,type:"enter",className:"c-menu_item__enter","data-qa":"menu_item_enter",role:"presentation"})}renderCheckmarkMaybe(){const{type:M,checked:C,indeterminate:P}=this.props,L=M===i.A.radio||M===i.A.checkbox;return L&&P?t.createElement(u.A,{className:"c-menu_item__checkbox_dash","data-qa":"menu_item_checkbox_dash",type:"form-checkbox-dash",size:"inherit",inline:!0}):L&&C?t.createElement("div",{className:"c-menu_item__checkmark"},t.createElement(_.A,{name:"check",size:"16",inline:!0,"data-qa":"menu_item_checkmark"})):null}renderIconMaybe(){const{icon:M}=this.props;return M?t.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},M):null}renderLinkIconMaybe(){const{href:M,showLinkIndicatorIcon:C}=this.props;return C===!1||C!==!0&&!M?null:t.createElement("div",{className:"c-menu_item__link_icon","data-qa":"menu_item_link_icon",role:"presentation"},t.createElement(_.A,{name:"new-window","data-qa":"menu_item_link_indicator"}))}renderShortcutMaybe(){const{shortcut:M,containerSize:C,experimentSkResponsiveMenusGroupOn:P,isResponsive:L}=this.props;if(!M||P&&L&&C&&C.width<300)return null;if(!(0,s.A)(M)&&"label"in M){const{label:x}=M;if(x&&(0,s.A)(x))return t.createElement("div",{className:"c-menu_item__shortcut"},x)}return t.createElement("div",{className:"c-menu_item__shortcut"},M)}render(){const{autoClogProps:M,children:C,className:P,classNameListItem:L,danger:x,description:F,disabled:V,showOfflineIcon:B,highlighted:D,label:S,onMouseEnter:R,onMouseLeave:w,href:Y,target:Q,download:Z,type:ee,withSubmenu:_e,standaloneHoverEffect:Ee,checked:G,indeterminate:Ae,measureRef:ce,containerSize:de,experimentSkResponsiveMenusGroupOn:oe,isResponsive:$,ariaDescribedBy:re,ariaLabelledBy:ue,ariaLabel:te,disableHoverStyling:ae}=this.props,H=(0,n.A)(P,"c-menu_item__button",{"c-menu_item__button--highlighted":D&&!V&&!ae,"c-menu_item__button--danger":x,"c-menu_item__button--disabled":V,"c-menu_item__button--with_submenu":_e,"c-menu_item--button--subheader_child":ee===i.A.subheaderChild,"c-menu_item__button--checked":(ee===i.A.radio||ee===i.A.checkbox)&&(G||Ae),"c-menu_item--compact":ee===i.A.compactItem,"c-menu_item--standalone":Ee}),U=(0,n.A)(L,"c-menu_item__li",{"c-menu_item__li--highlighted":D&&!ae}),N=(0,n.A)(L,"c-menu_item__label",{"c-menu_item__label--with_description":F}),K=_e?"true":void 0,W=F?t.createElement("div",{className:"c-menu_item__description"},F):"",J=this.props.activeMenuId,q=this.props.featureSubmenuRoleDescription?E.t("submenu"):void 0,ie=(0,p.cX)()&&_e?q:void 0;return t.createElement("div",{ref:ce,className:U,onMouseEnter:R,onMouseLeave:w,"data-qa":`${this.props["data-qa"]}-wrapper`},t.createElement(r.Nm,{autoClogProps:{...M,elementType:h.ElementType.MENU_ITEM},ref:this.buttonRef,id:J,className:H,disabled:V,onClick:this.onSelected,href:Y,target:Q,download:Z,"data-qa":this.props["data-qa"],role:this.determineMenuRole(),checked:G,"aria-checked":Ae?"mixed":G,"aria-haspopup":K,tabIndex:-1,"aria-roledescription":ie,"aria-describedby":re,"aria-labelledby":ue,"aria-label":te},this.renderCheckmarkMaybe(),this.renderIconMaybe(),t.createElement("div",{className:N},S,C,!(oe&&$&&de&&de.width<300)&&W),this.renderShortcutMaybe(),this.renderBadgeMaybe(),this.renderAdditionalIconMaybe(),this.renderCaret(),this.renderEnterMaybe(),this.renderLinkIconMaybe(),B&&t.createElement("div",{className:"c-menu_item__icon c-menu_item__icon--offline","data-qa":"menu_item_icon",role:"presentation"},t.createElement(u.A,{type:"cloud-offline-small"}))))}constructor(M){super(M),this.onSelected=this.onSelected.bind(this),this.buttonRef=t.createRef()}},"MenuItem");f.displayName="MenuItem",f.defaultProps={children:void 0,highlighted:!1,onMouseEnter:a.A,onMouseLeave:a.A,onSelected:a.A,menuCallback:a.A,menuCallbackBefore:a.A,menuCallbackId:null,className:"",classNameListItem:"",label:"",description:"",danger:!1,disabled:!1,showOfflineIcon:!1,href:null,showLinkIndicatorIcon:void 0,icon:null,shortcut:void 0,badgeCount:void 0,badgeLabel:void 0,badgeClassName:void 0,showEnter:!1,target:void 0,download:void 0,type:i.A.default,withSubmenu:!1,"data-qa":"menu_item_button",activeMenuId:void 0,standaloneHoverEffect:void 0,autoClogProps:void 0,checked:void 0,indeterminate:void 0,featureSubmenuRoleDescription:!1,group:void 0,experimentSkResponsiveMenusGroupOn:!1,isResponsive:!0,ariaDescribedBy:void 0,ariaLabel:void 0,onMount:a.A,onUnmount:a.A,showFullCarat:!1,disableHoverStyling:!1};const g={MenuItem:f},y=l(O=>({experimentSkResponsiveMenusGroupOn:(0,c.IN)(O)}),"mapStateToProps"),I=(0,d.Ay)((0,v.N)(y)((0,c.BM)(f)))},435405:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>c,HP:()=>r});var t=e(296540),n=e(528919);const s="_isSlackMenuSeparator";function a(o){let{className:u,noPadding:m,noPaddingAbove:i,noPaddingBelow:d,noFirstChild:_,noLastChild:h,dataQa:p="menu_separator__separator"}=o;const A=(0,n.A)("c-menu_separator__li",{padding_0:m,padding_top_0:i,padding_bottom_0:d,"c-menu_separator__li--no_first_child":_,"c-menu_separator__li--no_last_child":h},u);return t.createElement("div",{className:A},t.createElement("hr",{className:"c-menu_separator__separator","data-qa":p}))}l(a,"MenuSeparator"),a.displayName="MenuSeparator",a[s]=!0;const c=a;function r(o){return!!(o!=null&&o[s])}l(r,"isMenuSeparator")},869716:(j,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(296540),n=e(372848),s=e(45798);function a(){return a=Object.assign||function(o){for(var u=1;u<arguments.length;u++){var m=arguments[u];for(var i in m)Object.prototype.hasOwnProperty.call(m,i)&&(o[i]=m[i])}return o},a.apply(this,arguments)}l(a,"_extends");const c=l(o=>{const{renderMenu:u,onPopoverOpen:m,onPopoverClose:i,isDisabled:d=!1,closeOnSelect:_=!0,onTriggerClose:h,onMenuItemSelected:p,onMenuKeyDown:A,...v}=o,E=l(()=>{m&&m()},"onOpenProp"),f=l(y=>{const{onClose:I,...O}=y,M=l((x,F)=>{I&&I(x),i&&i(x)},"onCloseProp"),L=u({...y,onTriggerClose:l(x=>{I&&I(x),h&&h(x)},"onTriggerClose"),onMenuItemSelected:l((x,F)=>{_&&(I&&I(F),i&&i(F)),p&&p(x,F)},"onMenuItemSelected"),onMenuKeyDown:A});return L?t.createElement(n.AM,a({shouldFade:!1,onClose:M,onOpen:E},O),L):!1},"renderPopover");if(f.displayName="renderPopover",d)return typeof o.children=="function"?o.children(s.t0):o.children;const g=o.isContextMenu?s.t0:{"aria-haspopup":"menu"};return t.createElement(n.Wv,a({},v,{triggerProps:g,renderPopover:f}),o.children)},"MenuTrigger");c.displayName="MenuTrigger";const r=c},402137:(j,T,e)=>{"use strict";e.d(T,{A:()=>n,y:()=>t});const t={default:"default",compactItem:"compact_item",separator:"separator",sub_separator:"sub_separator",submenu:"submenu",header:"header",loading:"loading",custom:"custom",subheaderChild:"subheader_child",radio:"radio",checkbox:"checkbox"},n=t},814684:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>w,YJ:()=>B});var t=e(296540),n=e(528919),s=e(709703),a=e(292049),c=e(267996),r=e(42302),o=e(238798),u=e(619563),m=e(650189);const i=l(Y=>{let{"aria-labelledby":Q,"aria-owns":Z}=Y;return Z?t.createElement("div",{className:"offscreen",role:"group","aria-owns":Z,"aria-labelledby":Q}):null},"MenuItemGroup");i.displayName="MenuItemGroup";const d=i;var _=e(338305),h=e(435405),p=e(232120),A=e(187448),v=e(532395);function E(Y){return t.isValidElement(Y)&&"children"in Y.props}l(E,"hasChildren");function f(Y){return Y!=null&&typeof Y=="object"&&"type"in Y&&Y.type===t.Fragment}l(f,"isFragment");function g(Y){return Y instanceof Array?Y.map(g):f(Y)&&E(Y)?g(Y.props.children):Y}l(g,"defragment");function y(Y){return t.Children.toArray(g(Y))}l(y,"flattenChildren");var I=e(682520),O=e(999882),M=e(298559);function C(){return C=Object.assign||function(Y){for(var Q=1;Q<arguments.length;Q++){var Z=arguments[Q];for(var ee in Z)Object.prototype.hasOwnProperty.call(Z,ee)&&(Y[ee]=Z[ee])}return Y},C.apply(this,arguments)}l(C,"_extends");function P(Y){const Q=Y&&Y.type;return!!Q&&(0,p.l0)(Q)}l(P,"isMenuItem");function L(Y){const Q=Y&&Y.type;return!!Q&&(0,A.e)(Q)}l(L,"isSubmenu");function x(Y){const Q=Y&&Y.type;return Q&&(0,h.HP)(Q)}l(x,"isSeparator");function F(Y){const Q=Y&&Y.type;return Q&&(0,_.a6)(Q)}l(F,"isMenuItemHeader");let V=0;function B(){return V>0}l(B,"isMenuVisible");const D={ArrowUp:"selectprevious",Up:"selectprevious",ArrowDown:"selectnext",Down:"selectnext",ArrowLeft:"closesubmenu",Left:"closesubmenu",ArrowRight:"opensubmenu",Right:"opensubmenu",Escape:"closemenu",Enter:"select"," ":"select",Home:"selectfirst",End:"selectlast"};let S=l(class extends t.Component{componentDidMount(){this.focus(),V+=1}componentDidUpdate(Q){this.props.kbNavActive&&!Q.kbNavActive&&this.activateKBNav()}componentWillUnmount(){V-=1,this.props.onUnmount&&this.props.onUnmount()}onMenuNavigation(Q){const Z=this.getIndexOfNextMenuItemInDirection(Q);this.setState(()=>({highlightedMenuItemIndex:Z,highlightedMenuItemKbNavActive:!1,isKeyboardHighlight:!0}))}onMouseEnterMenuItem(Q){const Z=this.state.highlightCanChangeOnMouseMovement?Q:this.state.highlightedMenuItemIndex;if(this.setState(()=>({highlightedMenuItemIndex:Z,contingentHighlightedMenuItemIndex:Q,highlightedMenuItemKbNavActive:!1,isKeyboardHighlight:!1})),!!this.state.highlightCanChangeOnMouseMovement&&document.activeElement!==this.ariaMenuNode){var ee;(ee=this.ariaMenuNode)===null||ee===void 0||ee.focus()}}getAllMenuItemIndices(){const Q=[];return y(this.props.children).filter(t.isValidElement).forEach((Z,ee)=>{(P(Z)||L(Z))&&Q.push(ee)}),Q}getIndexOfNextMenuItemInDirection(Q){const Z=this.getAllMenuItemIndices(),ee=Z.indexOf(this.state.highlightedMenuItemIndex),_e=Z.length-1;if(Q==="selectnext"){const G=ee<_e?ee+1:0;return Z[G]}const Ee=ee-1>=0?ee-1:_e;return Z[Ee]}getSelectedMenuItem(){const{highlightedMenuItemIndex:Q}=this.state;if(!(Q<0)&&this.menuChildren)return this.menuChildren[Q]}focus(){const{kbNavActive:Q,isSubmenu:Z}=this.props;if(!Q)return;if(!Z){this.ariaMenuNode&&this.ariaMenuNode.focus();return}const ee=this.getAllMenuItemIndices();if(!ee.length){var _e;(_e=this.ariaMenuNode)===null||_e===void 0||_e.focus();return}this.setState(()=>({highlightedMenuItemIndex:ee[0]}),()=>{var Ee;(Ee=this.ariaMenuNode)===null||Ee===void 0||Ee.focus()})}registerKeyboardShortcutForMenuItem(Q,Z){if(!Q||!Z)return;const{label:ee,key:_e}=Q;(0,s.A)(ee)&&((0,s.A)(_e)||(0,a.A)(_e))&&(0,c.A)(_e).forEach(Ee=>{this.keyboardShortcutsMap[Ee]=Z})}renderMenuItem(Q,Z){const ee=this.onMouseEnterMenuItem.bind(this,Z),{highlightedMenuItemIndex:_e,highlightedMenuItemKbNavActive:Ee,isKeyboardHighlight:G}=this.state,{onMenuItemSelectedBefore:Ae,stripTerminalSeparators:ce,isResponsive:de}=this.props;F(Q)&&Q.props.for&&(this.menuGroups||(this.menuGroups={}),this.menuGroups[Q.props.for]={key:Q.props.for,"aria-labelledby":(0,_.$b)(Q.props.for),"aria-owns":[],index:Z});const oe={...Q.props,onMouseEnter:ee,key:Z},$=`${this.activeMenuId}-${Z}`,{shortcut:re}=Q.props;if(re&&this.registerKeyboardShortcutForMenuItem(re,$),P(Q)||L(Q)){const H=_e===Z;if(oe.activeMenuId=$,H&&G){var ue,te,ae;(te=(ue=this.ariaMenuNode)===null||ue===void 0?void 0:ue.querySelector(`#${oe.activeMenuId}`))===null||te===void 0||(ae=te.scrollIntoView)===null||ae===void 0||ae.call(te)}oe.menuCallbackBefore=Ae,oe.menuCallback=this.onMenuItemSelected,oe.menuCallbackId||(oe.menuCallbackId=Z),oe.highlighted=_e===Z,oe.isKeyboardHighlight=oe.highlighted&&G,oe.group&&(this.menuGroups||(this.menuGroups={}),this.menuGroups[oe.group]||(this.menuGroups[oe.group]={key:oe.group,"aria-owns":[],index:Z}),this.menuGroups[oe.group]["aria-owns"].push(oe.activeMenuId))}if(L(Q)&&(oe.isOpen=oe.highlighted&&!G||oe.highlighted&&Ee,oe.kbNavActive=oe.highlighted&&Ee,oe.returnKBNav=this.activateKBNav,oe.preventHighlightChange=this.preventHighlightChange,oe.allowHighlightChange=this.allowHighlightChange),x(Q)&&ce)if(!this.menuChildren)(0,I.Wo)().warn("Menu.renderMenuItem called without this.menuChildren");else{const H=this.menuChildren[Z-1];if(x(H))return null;oe.noFirstChild=!0,oe.noLastChild=!0}return P(Q)&&(oe.isResponsive=de),t.cloneElement(Q,oe)}renderMenuGroups(){return this.menuGroups?Object.values(this.menuGroups).filter(Q=>Q["aria-owns"].length>0).map(Q=>({group:t.createElement(d,{key:Q.key,"aria-labelledby":Q["aria-labelledby"],"aria-owns":Q["aria-owns"].join(" ")}),index:Q.index})).sort((Q,Z)=>Z.index-Q.index):[]}renderMenuItems(){this.menuChildren=y(this.props.children).filter(t.isValidElement);const Q=this.menuChildren.map(this.renderMenuItem,this);return this.renderMenuGroups().forEach(ee=>{let{group:_e,index:Ee}=ee;Q.splice(Ee,0,_e)}),Q}renderMenu(){const{noMargin:Q,menuClassNames:Z,"data-qa":ee,isUnstyled:_e,isResponsive:Ee,experimentSkResponsiveMenusGroupOn:G}=this.props,Ae=(0,n.A)("c-menu__items",{"c-menu__items--no_margin":Q}),ce=this.state.highlightedMenuItemIndex!==-1?`${this.activeMenuId}-${this.state.highlightedMenuItemIndex}`:null,de=(0,n.A)({"c-menu":!_e,"c-menu--responsive":Ee&&G},Z);return t.createElement("div",{className:de,"data-qa":ee,style:{width:this.props.width}},t.createElement("div",{className:"c-menu__items_scroller"},t.createElement("div",{"aria-activedescendant":ce??void 0,ref:this.setAriaMenuRef,className:Ae,onKeyDown:this.onMenuKeyDown,onMouseLeave:this.onMouseLeaveMenu,"data-qa":"menu_items",role:"menu","aria-label":this.props["aria-label"],"aria-describedby":this.props["aria-describedby"],tabIndex:-1,"no-bootstrap":1},this.renderMenuItems())))}render(){const Q=this.renderMenu(),{autoClogProps:Z}=this.props;return Z?t.createElement(o.A,C({elementType:v.ElementType.MENU},Z),Q):Q}constructor(Q){super(Q),this.activeMenuId=`menu-${(0,O.A)()}`,this.menuChildren=[],this.keyboardShortcutsMap={},this.menuGroups={},this.onMenuItemSelected=(Z,ee)=>{this.props.onMenuItemSelected&&this.props.onMenuItemSelected(Z,ee)},this.onMenuKeyDown=Z=>{var ee;const{kbNavActive:_e,onMenuKeyDown:Ee,onCloseSubmenu:G,onTriggerClose:Ae,windowRef:ce}=this.props;if(!_e)return;const{key:de}=Z,oe=D[de],$=(ee=this.keyboardShortcutsMap)===null||ee===void 0?void 0:ee[de],re=this.getSelectedMenuItem(),ue=re&&L(re),te=this.getAllMenuItemIndices();(oe||$)&&(Z.stopPropagation(),Z.preventDefault()),(oe==="selectnext"||oe==="selectprevious")&&this.onMenuNavigation(oe),oe==="closesubmenu"&&(G==null||G(Z)),(oe==="select"||oe==="opensubmenu")&&ue&&this.setState(()=>({highlightedMenuItemKbNavActive:!0})),oe==="closemenu"&&(Ae==null||Ae(Z)),oe==="selectfirst"&&this.setState(()=>({highlightedMenuItemIndex:te[0],highlightedMenuItemKbNavActive:!1,isKeyboardHighlight:!0})),oe==="selectlast"&&this.setState(()=>({highlightedMenuItemIndex:te[te.length-1],highlightedMenuItemKbNavActive:!1,isKeyboardHighlight:!0}));const ae=`${this.activeMenuId}-${this.state.highlightedMenuItemIndex}`;if(oe==="select"&&ae&&!ue){var H,U;(U=(H=ce.deref())===null||H===void 0?void 0:H.document.getElementById(ae))===null||U===void 0||U.click(),Ae==null||Ae(Z)}if($){var N,K;(K=(N=ce.deref())===null||N===void 0?void 0:N.document.getElementById($))===null||K===void 0||K.click(),Ae==null||Ae(Z)}Ee==null||Ee(Z,{isCurrentItemSubmenu:ue,closeMenu:Ae,selectedMenuItem:re})},this.onMouseLeaveMenu=()=>{const Z=this.state.highlightCanChangeOnMouseMovement?-1:this.state.highlightedMenuItemIndex;this.setState(()=>({highlightedMenuItemIndex:Z,contingentHighlightedMenuItemIndex:-1}))},this.setAriaMenuRef=Z=>{this.ariaMenuNode=Z},this.activateKBNav=()=>{var Z;(Z=this.ariaMenuNode)===null||Z===void 0||Z.focus(),this.setState(ee=>({highlightedMenuItemKbNavActive:!1,highlightedMenuItemIndex:ee.highlightedMenuItemIndex===-1?this.getIndexOfNextMenuItemInDirection("selectnext"):ee.highlightedMenuItemIndex}))},this.allowHighlightChange=()=>{this.setState(Z=>({highlightedMenuItemIndex:Z.contingentHighlightedMenuItemIndex,highlightCanChangeOnMouseMovement:!0})),this.props.allowHighlightChange&&this.props.allowHighlightChange()},this.preventHighlightChange=()=>{this.setState(()=>({highlightCanChangeOnMouseMovement:!!this.props.resetHighlightOnChange})),this.props.preventHighlightChange&&this.props.preventHighlightChange()},this.state={highlightedMenuItemIndex:-1,contingentHighlightedMenuItemIndex:-1,highlightedMenuItemKbNavActive:!1,highlightCanChangeOnMouseMovement:!0,isKeyboardHighlight:!1}}},"Menu");S.displayName="Menu",S.defaultProps={menuClassNames:void 0,onMenuItemSelected:r.A,onMenuItemSelectedBefore:r.A,onTriggerClose:r.A,onCloseSubmenu:r.A,width:void 0,noMargin:!1,kbNavActive:!0,stripTerminalSeparators:!1,preventHighlightChange:r.A,allowHighlightChange:r.A,resetHighlightOnChange:!1,"data-qa":"menu","aria-label":void 0,onMenuKeyDown:r.A,onUnmount:r.A,isSubmenu:!1,isUnstyled:!1,autoClogProps:void 0,experimentSkResponsiveMenusGroupOn:!1,isResponsive:!0};const R=l(Y=>({experimentSkResponsiveMenusGroupOn:(0,m.IN)(Y)}),"mapStateToProps"),w=(0,u.A)((0,M.N)(R,null,null,{forwardRef:!0})(S))},232120:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>m,KJ:()=>r,LN:()=>o,l0:()=>u});var t=e(808058),n=e(605556),s=e.n(n),a=e(756120),c=e(682520);const r="_isSlackMenuItem",o={menuCallback:s().func,menuCallbackId:s().number,highlighted:s().bool};function u(i){return!!i[r]}l(u,"isMenuItem");function m(i){if((0,a.Cu)()){const d=i.propTypes||{};let _;Object.defineProperty(i,"propTypes",{get:()=>_,set:h=>{const p=i.displayName||i.name||"Component";(0,t.A)(o,(A,v)=>{const E=h[v];E&&E!==A&&E!==A.isRequired&&(0,c.Wo)().warn(`${p}'s ${v} prop type doesn't match menu item`)}),_={...o,...h}}}),i.propTypes=d}return i[r]=!0,i}l(m,"wrapMenuItem")},813795:(j,T,e)=>{"use strict";e.d(T,{A:()=>n});var t=e(279047);const n=t.A},279047:(j,T,e)=>{"use strict";e.d(T,{A:()=>i});var t=e(296540),n=e(528919),s=e(3287),a=e(616125),c=e(744199),r=e(777367),o=e(649098);const u=new o.Ay("channel_token"),m=l(d=>{let{type:_=r.A.Unknown,subtler:h=!1,size:p=r.o.Small,width:A="random",invert:v=!1,showHash:E=!0,omitNonExistentTooltip:f=!1}=d;const g=(0,n.A)("c-missing_channel",{"c-missing_channel--unknown":_===r.A.Unknown,"c-missing_channel--nonexistent":_===r.A.Nonexistent,"c-missing_channel--subtler":h,"c-missing_channel--medium":p===r.o.Medium,"c-missing_channel--unknown_inverted":_===r.A.Unknown&&v,"c-missing_channel--non_existent_inverted":_===r.A.Nonexistent&&v}),y=(0,n.A)("c-missing_channel--medium_hash",{"c-missing_channel--subtler":h});let I;if(_===r.A.Unknown)I=u.t("Loading...");else if(_===r.A.Nonexistent)I=u.t("You don\u2019t have access to this channel (ex. it\u2019s private or in a workspace you\u2019re not a part of), so its name isn\u2019t shown",{fallbackHash:"b63975b75ce4c6d6e1e8b8057209fc25f351bbcf"});else return null;if(_===r.A.Nonexistent){const O=t.createElement("span",{className:"c-missing_channel--private"},t.createElement(a.A,{name:"lock"}),t.createElement("span",null,u.t("private channel")));return f?O:t.createElement(c.Ay,{tip:I},O)}return p===r.o.Medium?t.createElement("div",null,t.createElement("div",{className:"c-missing_channel--medium-top"},E&&t.createElement("span",{className:y},t.createElement(a.A,{name:"channel"})),t.createElement(s.A,{tooltip:I,isNonExistent:!1,size:A,className:g})),t.createElement(s.A,{tooltip:I,isNonExistent:!1,size:A,className:g})):t.createElement(s.A,{tooltip:I,isNonExistent:!1,size:A,className:g})},"MissingChannel");m.displayName="MissingChannel";const i=t.memo(m)},975725:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(296540),n=e(528919),s=e(777367);const a=l(r=>{let{className:o,isNonExistent:u=!1,size:m,subtler:i=!1,invert:d=!1,dataQa:_}=r;const{Unknown:h,Nonexistent:p}=s.A,A=u?p:h,v=(0,t.useMemo)(()=>({height:m,width:m}),[m]);return t.createElement("span",{className:(0,n.A)(o,"c-missing_icon",`c-missing_icon--${A}`,{"c-missing_icon--unknown_inverted":A===h&&d,"c-missing_icon--non_existent_inverted":A===p&&d,"c-missing_icon--subtler":i}),style:v,"data-qa":_})},"MissingIcon");a.displayName="MissingIcon";const c=a},259822:(j,T,e)=>{"use strict";e.d(T,{A:()=>n});var t=e(553287);const n=t.A},553287:(j,T,e)=>{"use strict";e.d(T,{A:()=>m});var t=e(296540),n=e(3287),s=e(777367),a=e(649098);const c=new a.Ay("member_token"),{Unknown:r,Nonexistent:o}=s.A,u=l(i=>{let{type:d=r,subtler:_=!1,className:h,"data-qa":p}=i;const A=d===r?c.t("Loading\u2026"):c.t("Private user info");return t.createElement(n.A,{className:h??"",isNonExistent:d===o,subtler:_,tooltip:A,"data-qa":p})},"MissingMember");u.displayName="MissingMember";const m=t.memo(u)},465312:(j,T,e)=>{"use strict";e.d(T,{A:()=>_});var t=e(296540),n=e(3287),s=e(777367),a=e(649098);const c=new a.Ay("user_group_token"),{Unknown:r,Nonexistent:o}=s.A,{Small:u,Medium:m}=s.o,i=l(h=>{let{invert:p=!1,size:A=u,type:v=r,subtler:E=!1}=h;const f=v===r?c.t("Loading..."):c.t("Private user group info");if(A===m){const g="\xA0\xA0\xB7\xA0\xA0";return t.createElement("div",{className:"p-browse_page_user_group_entity--missing"},t.createElement("div",null,t.createElement(n.A,{tooltip:f,isNonExistent:v===o,size:"small",invert:p})," ",t.createElement(n.A,{tooltip:f,isNonExistent:v===o,size:"small",invert:p})),t.createElement("div",null,t.createElement(n.A,{tooltip:f,isNonExistent:v===o,size:"small",invert:p}),g,t.createElement(n.A,{tooltip:f,isNonExistent:v===o,size:"large",invert:p})))}return t.createElement(n.A,{tooltip:f,isNonExistent:v===o,size:"random",subtler:E,invert:p})},"MissingUserGroup");i.displayName="MissingUserGroup";const _=i},608614:(j,T,e)=>{"use strict";e.d(T,{j:()=>r,A:()=>u});var t=e(296540),n=e(358057),s=e(649098);const a=new s.Ay("generic_dialog");function c(m){let{onClick:i}=m;return t.createElement(n.A,{className:"c-multi_pane_modal__back",icon:"chevron-large-left",onClick:i,"aria-label":a.t("Back",{fallbackHash:"b52b36b7269fbfc58ec24bb724691951a3decbe8",fallbackHashNs:"member_actions"})})}l(c,"ModalBackButton"),c.displayName="ModalBackButton";const r=t.memo(c);var o=e(578465);const u=o.A},578465:(j,T,e)=>{"use strict";e.d(T,{A:()=>o});var t=e(296540),n=e(528919),s=e(94689),a=e(449677);function c(){return c=Object.assign||function(u){for(var m=1;m<arguments.length;m++){var i=arguments[m];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(u[d]=i[d])}return u},c.apply(this,arguments)}l(c,"_extends");function r(u){let{defaultPane:m,panes:i,forceFullRerenderOnPageChange:d=!0,..._}=u;const h=(0,s.A)(),[p,A]=(0,t.useState)({pane:m}),v=(0,t.useCallback)((g,y)=>A({pane:g,props:y}),[]),{render:E,modalProps:f}=i[p.pane];return E||h.error("MULTI_PANE_MODAL",`Unknown pane "${p.pane}"`),t.createElement(a.A,c({},_,f,{className:(0,n.A)(_.className,f==null?void 0:f.className,"c-multi_pane_modal")}),d?t.createElement(t.Fragment,{key:p.pane},E({switchPane:v,...p.props})):E({switchPane:v,...p.props}))}l(r,"MultiPaneModal"),r.displayName="MultiPaneModal";const o=r},364095:(j,T,e)=>{"use strict";e.d(T,{A:()=>E});var t=e(296540),n=e(42302),s=e(867937),a=e(786447);function c(){return c=Object.assign||function(f){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var I in y)Object.prototype.hasOwnProperty.call(y,I)&&(f[I]=y[I])}return f},c.apply(this,arguments)}l(c,"_extends");const r=(0,t.memo)(f=>{let{addMemberToPresenceSubscription:g=n.A,memberId:y,removeMemberFromPresenceSubscription:I=n.A,renderDoublePresence:O=!1,firstElementExtraClassName:M="",...C}=f;return(0,s.A)(()=>(g(y),()=>I(y)),[y]),O?t.createElement(t.Fragment,null,t.createElement(a.Ay,c({},C,{className:`${C.className||""} ${M}`})),t.createElement(a.Ay,c({},C))):t.createElement(a.Ay,c({},C))});r.displayName="PresenceWithSubscriptions";const o=r;var u=e(793434),m=e(326023),i=e(251772),d=e(298559),_=e(940284),h=e(113574),p=e(601026);const A=l((f,g)=>{const y=(0,p.gd)(f,g.memberId),I=(0,m.d)(f,g.memberId),O=(0,i.h)(f,g.memberId),M=(0,h.WR)(f)===g.memberId;return{...g,userType:I,isDnd:O,isSelf:M,isSlackbot:g.memberId===u.Q$,isActive:y==="active"}},"mapStateToProps"),v=l(f=>({addMemberToPresenceSubscription:g=>f((0,_.xz)({memberId:g})),removeMemberFromPresenceSubscription:g=>f((0,_.Fd)({memberId:g}))}),"mapDispatchToProps"),E=(0,d.N)(A,v)(o)},731018:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>s});var t=e(364095),n=e(786447);const s=t.A},786447:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>d});var t=e(296540),n=e(528919),s=e(3972),a=e(616125),c=e(488455),r=e(649098);function o(){return o=Object.assign||function(_){for(var h=1;h<arguments.length;h++){var p=arguments[h];for(var A in p)Object.prototype.hasOwnProperty.call(p,A)&&(_[A]=p[A])}return _},o.apply(this,arguments)}l(o,"_extends");const u=new r.Ay("presence");function m(_,h){return _?h?u.t("Active, notifications snoozed"):u.t("Active"):h?u.t("Away, notifications snoozed"):u.t("Away")}l(m,"getPresenceText");const i=l(_=>{let{inheritIconSize:h=!1,inline:p=!0,isActive:A=!1,isDnd:v=!1,isSelf:E=!1,isSlackbot:f=!1,invert:g=!1,userType:y="member",focusable:I=!1,showText:O=!1,resetIA:M=!1,className:C}=_,P=A?{name:"status-member",variation:"filled"}:{name:"status-member"};const L=(0,n.A)(C,"c-presence",{"c-presence--active":A&&!g,"c-presence--resetIA":M,"c-presence--away":!A&&!g,"c-presence--inverted":g,"is-inline":p,block:!p}),x=m(A,v);y==="member"?v?P=A?{name:"status-member-dnd",variation:"filled"}:{name:"status-member-dnd"}:f&&(P={name:"status-slackbot",variation:"filled"}):y==="ra"||y==="external"?v?P=A?{name:"status-guest-dnd",variation:"filled"}:{name:"status-guest-dnd"}:P=A?{name:"status-guest",variation:"filled"}:{name:"status-guest"}:y==="ura"&&(v?P=A?{name:"status-single-channel-guest-dnd",variation:"filled"}:{name:"status-single-channel-guest-dnd"}:P=A?{name:"status-single-channel-guest",variation:"filled"}:{name:"status-single-channel-guest"});const F=t.createElement("span",{className:L},t.createElement(a.A,o({},P,{title:x,"aria-label":x,"aria-hidden":"false",size:h?"inherit":"20",inline:p,"data-qa":"presence_indicator","data-qa-type":P.name,"data-qa-presence-self":E,"data-qa-presence-active":A,"data-qa-presence-dnd":v})));return I?t.createElement(t.Fragment,null,t.createElement(c.Ay,{tip:x},t.createElement(s.A,null,F)),O&&t.createElement("span",{className:"padding_left_50","aria-hidden":"true"},x)):t.createElement(t.Fragment,null,F,O&&t.createElement("span",{className:"padding_left_50","aria-hidden":"true"},x))},"Presence");i.displayName="Presence";const d=t.memo(i)},34761:(j,T,e)=>{"use strict";e.d(T,{A:()=>V});var t=e(296540),n=e(528919),s=e(42302),a=e(446632),c=e(769497),r=e(820709),o=e(861789),u=e(535590),m=e(276868),i=e(619563),d=e(861621),_=e(616125),h=e(131606),p=e(649098);function A(){return A=Object.assign||function(B){for(var D=1;D<arguments.length;D++){var S=arguments[D];for(var R in S)Object.prototype.hasOwnProperty.call(S,R)&&(B[R]=S[R])}return B},A.apply(this,arguments)}l(A,"_extends");const v=new p.Ay("select");let E=l(class extends t.Component{componentDidMount(){const{focusOnMount:D=!1}=this.props;D&&this.onClick()}onEscPressed(D){const{selectState:S,setSelectState:R}=this.props;S.isExpanded&&(D.stopPropagation(),R(()=>({isExpanded:!1})))}onKeyDown(D){if(!(D.shiftKey||D.ctrlKey||D.metaKey||D.altKey))switch(D.keyCode){case m._f:this.onEscPressed(D);break;case m.Fm:case m.I6:this.onClick();break;case m.i7:case m.n6:this.onUpOrDownPressed(D);break;case m.wn:this.onTabPressed();break;default:break}}onTabPressed(){const{setSelectState:D}=this.props;D(()=>({isExpanded:!1}))}onClick(){const{onClick:D=s.A,setSelectState:S,selectState:R}=this.props;this.updateOptionsListPosition(),D&&D(),S(()=>({isExpanded:!R.isExpanded}))}onUpOrDownPressed(D){const{selectState:S,setSelectState:R}=this.props,{isExpanded:w}=S;w||(D.stopPropagation(),this.updateOptionsListPosition(),R(()=>({isExpanded:!0})))}getSelectedOptionIndex(){const{selectState:D}=this.props,{selectedOption:S,options:R}=D;return S?R.findIndex(w=>w.label===S.label&&w.value===S.value):0}updateOptionsListPosition(){const{selectState:D}=this.props,{isExpanded:S}=D;if(!S&&this.measurePopoverEvent){var R;(R=this.props.windowRef.deref())===null||R===void 0||R.dispatchEvent(this.measurePopoverEvent)}}renderContent(D){const{renderSelectedOption:S,selectState:R,textSelect:w=!1,textSelectLabel:Y=void 0,selectDataQa:Q=void 0,placeholderText:Z=void 0}=this.props,{selectedOption:ee,options:_e}=R,Ee=ee?S(ee):t.createElement("span",{className:"c-select_button__placeholder"},Z||v.t("Please select an option")),G=w&&Y?t.createElement("span",{className:"c-select_button--text-select-label"},Y):void 0,Ae=_e&&_e.length,ce=Ae||void 0,de=Ae?this.getSelectedOptionIndex():void 0;return t.createElement("div",{id:D,role:"option","aria-selected":"true","aria-setsize":ce,"aria-posinset":de,"data-qa":Q?`${Q}-button-content`:null,className:"c-select_button__content"},G,Ee)}render(){const{ariaLabelledBy:D=void 0,ariaDescribedBy:S=void 0,ariaLabel:R=void 0,selectState:w,size:Y,width:Q,textSelect:Z=!1,selectDataQa:ee=void 0,classPrefix:_e=void 0,onBlur:Ee=s.A,onMouseEnter:G=void 0,onMouseLeave:Ae=void 0,refToForward:ce}=this.props,{isDisabled:de,isExpanded:oe,isInvalid:$,selectId:re}=w,ue=(0,n.A)("c-select_button",`c-select_button--${Y}`,{"c-select_button--disabled":de,"c-select_button--expanded":oe,"c-select_button--text-select":Z,"c-select_button--invalid":$,[`${_e}__select_button`]:_e}),te=Z?{}:{width:Q},ae=Y===d.hu.SMALL?"caret-down":"caret-down-full",H=(0,r.Es)(re,"button"),U=`${H}-option`;return t.createElement("div",{role:"listbox",tabIndex:0,className:ue,onClick:this.onClick,onKeyDown:this.onKeyDown,style:te,"aria-disabled":de?!0:void 0,"data-qa":ee?`${ee}-button`:null,id:H,onBlur:Ee,onMouseEnter:G,onMouseLeave:Ae,"aria-labelledby":D,"aria-describedby":S,"aria-label":R,"aria-invalid":$,"aria-activedescendant":$?void 0:U,ref:ce,"aria-expanded":oe,"aria-multiselectable":!1},this.renderContent(U),t.createElement("div",{className:`c-select_button__icon c-select_button__icon--${Y}`},t.createElement(_.A,{name:ae})))}constructor(D){super(D),(0,h.v)(this,["onUpOrDownPressed","onKeyDown","updateOptionsListPosition","onClick","onEscPressed","onTabPressed"]);const{measurePopoverEventName:S=null}=this.props;S&&(this.measurePopoverEvent=new Event(S))}},"SelectButton");E.displayName="SelectButton";const f=(0,i.A)(E),g=t.forwardRef((B,D)=>t.createElement(f,A({},B,{refToForward:D})));var y=e(562583),I=e(674016),O=e(808762),M=e(532395);function C(){return C=Object.assign||function(B){for(var D=1;D<arguments.length;D++){var S=arguments[D];for(var R in S)Object.prototype.hasOwnProperty.call(S,R)&&(B[R]=S[R])}return B},C.apply(this,arguments)}l(C,"basic_select_extends");const P={onClick:{action:M.UiAction.CLICK}},L=l(B=>B.map(D=>{let{id:S}=D;return S}),"getIdsFromHintOrErrors");let x=l(class extends t.Component{renderOptionsList(){const{ariaLabel:D,onOptionSelected:S,onOptionsListClose:R,renderOption:w,resultsInPopover:Y,overlayClassName:Q,listClassName:Z,selectState:ee,setSelectState:_e,width:Ee,classPrefix:G,minOptionsListWidth:Ae,optionsRowHeight:ce,maxListHeight:de,onScrollablePage:oe,dynamicHeight:$,forceMaxHeight:re,includePadding:ue,includeDividers:te,preventScroll:ae}=this.props,{isDisabled:H}=ee;return H?null:Y?t.createElement(I.A,{className:Z,selectState:ee,setSelectState:_e,renderOption:w,ariaLabel:D,onOptionSelected:S,onOptionsListClose:R,width:Ee,inputRef:this.inputContainerRef,measurePopoverEventName:this.measurePopoverEventName,classPrefix:G,selectDataQa:this.fallbackDataQa,minOptionsListWidth:Ae,optionsRowHeight:ce,focusOnMount:!0,popoverProps:Q?{overlayClassName:Q}:void 0,shouldAlwaysHaveActiveRow:!0,maxListHeight:de,onScrollablePage:oe,dynamicHeight:$,forceMaxHeight:re,includePadding:ue,includeDividers:te,preventScroll:ae}):t.createElement(y.A,{className:Z,selectState:ee,setSelectState:_e,renderOption:w,ariaLabel:D,onOptionSelected:S,onOptionsListClose:R,width:Ee,inputRef:this.inputContainerRef,classPrefix:G,selectDataQa:this.fallbackDataQa,optionsRowHeight:ce,maxListHeight:de,focusOnMount:!0,shouldAlwaysHaveActiveRow:!0,dynamicHeight:$,forceMaxHeight:re,includePadding:ue,includeDividers:te,preventScroll:ae})}render(){const{resultsInPopover:D,selectState:S,setSelectState:R,className:w,textSelect:Y,textSelectLabel:Q,focusOnMount:Z,onBlur:ee,ariaLabel:_e,ariaLabelledBy:Ee,ariaDescribedBy:G,autoClogProps:Ae,buttonRef:ce,errors:de,hints:oe,size:$,renderSelectedOption:re}=this.props,{isInvalid:ue}=S,te=(0,O.A)(de),ae=(0,O.A)(oe);let H;de&&(H=te?L(de):void 0);let U;oe&&(U=ae?L(oe):void 0);const N=(0,r.Yk)([G,H,U]),K=t.createElement("div",{className:(0,n.A)(w,"c-basic-select"),"data-qa":this.fallbackDataQa,ref:this.inputContainerRef},t.createElement(g,C({},this.props,{size:$,renderSelectedOption:re,selectDataQa:this.fallbackDataQa,selectState:S,setSelectState:R,measurePopoverEventName:D?this.measurePopoverEventName:void 0,textSelect:Y,textSelectLabel:Q,focusOnMount:Z,onBlur:ee,ariaLabel:_e,ariaLabelledBy:Ee,ariaDescribedBy:N,"aria-invalid":ue,ref:ce})),te&&de&&t.createElement(u.A,{errors:de}),ae&&oe&&oe.map(W=>{let{id:J,message:q}=W;return t.createElement(o.A,{key:J,id:J},q)}),this.renderOptionsList());return Ae?t.createElement(c.A,{autoClogProps:Ae,actionProps:P,elementType:M.ElementType.DROPDOWN},K):K}constructor(D){super(D),(0,h.v)(this,["renderOptionsList"]),this.inputContainerRef=t.createRef();const{selectId:S}=D.selectState;this.measurePopoverEventName=`measureSelectPopover--${S}`,this.fallbackDataQa=D.selectDataQa||S}},"ControlledBasicSelect");x.displayName="ControlledBasicSelect",x.defaultProps={renderOption:B=>B.label,renderSelectedOption:B=>B.label,size:d.hu.MEDIUM,width:225,optionsRowHeight:d.bJ,errors:[],hints:[],ariaLabelledBy:void 0,ariaDescribedBy:void 0,placeholderText:void 0,selectDataQa:void 0,resultsInPopover:!0,overlayClassName:void 0,listClassName:void 0,onClick:s.A,onOptionSelected:s.A,onOptionsListClose:s.A,className:void 0,classPrefix:void 0,textSelect:!1,textSelectLabel:void 0,minOptionsListWidth:void 0,focusOnMount:!1,onBlur:s.A,maxListHeight:void 0,autoClogProps:void 0,onScrollablePage:!1,buttonRef:void 0,dynamicHeight:!1,forceMaxHeight:!1,includePadding:!0,includeDividers:!0};let F=l(class extends t.Component{static getDerivedStateFromProps(D,S){const{selectedOption:R}=D,{selectedOption:w}=S;return!w||R!==void 0&&R!==w?{selectedOption:R}:null}setSelectState(D,S){return this.setState(D,S)}render(){const{isDisabled:D,isInvalid:S,isRequired:R,errors:w}=this.props,Y=S||(0,O.A)(w),Q=(0,a.A)(()=>({...this.state,isDisabled:D,isInvalid:Y,isRequired:R}));return t.createElement(x,C({},this.props,{selectState:Q(),setSelectState:this.setSelectState}))}constructor(D){super(D),this.state={activeRowIndex:null,isDisabled:D.isDisabled,isExpanded:D.isExpanded,isInvalid:D.isInvalid,isRequired:D.isRequired,options:D.options,selectId:D.selectId,selectedOption:D.selectedOption,selectType:d.US.BASIC},(0,h.v)(this,["setSelectState"])}},"BasicSelect");F.displayName="BasicSelect",F.defaultProps={isDisabled:!1,isExpanded:!1,isRequired:!0,isInvalid:!1,errors:[],hints:[],onOptionSelected:s.A,onOptionsListClose:s.A,selectedOption:void 0,selectId:`basic-select-${(0,r.r9)()}`,maxListHeight:void 0,autoClogProps:void 0};const V=F},156623:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>c,HH:()=>s.A,P2:()=>a.A,Z1:()=>n.A});var t=e(34761),n=e(757917),s=e(636931),a=e(399169);const c=t.A},13513:(j,T,e)=>{"use strict";e.d(T,{$c:()=>x,Ay:()=>P,Gn:()=>F,h7:()=>L,xn:()=>V,yW:()=>M});var t=e(296540),n=e(528919),s=e(42302),a=e(446632),c=e(769497),r=e(820709),o=e(861789),u=e(535590),m=e(239803),i=e(562583),d=e(674016),_=e(211473),h=e(139801),p=e(133856),A=e(861621),v=e(808762),E=e(852422),f=e(131606),g=e(532395);function y(){return y=Object.assign||function(B){for(var D=1;D<arguments.length;D++){var S=arguments[D];for(var R in S)Object.prototype.hasOwnProperty.call(S,R)&&(B[R]=S[R])}return B},y.apply(this,arguments)}l(y,"_extends");const I={onOptionSelected:{action:g.UiAction.SELECT}},O=l(B=>B.map(D=>{let{id:S}=D;return S}),"getIdsFromHintOrErrors");let M=l(class extends t.Component{renderOptionsList(D){var S,R;const{selectState:w,setSelectState:Y,renderOption:Q,emptyStateMessage:Z,enableLoadingState:ee,width:_e,maxOptionsListHeight:Ee,inputRef:G,resultsInPopover:Ae,isLoading:ce,classPrefix:de,optionsRowHeight:oe,onOptionsListOpen:$,onOptionsListClose:re,overlayClassName:ue,onScrollablePage:te,onOptionSelected:ae,shouldOptionBeSelected:H,shouldTokenizeOnComma:U,shouldTokenizeOnSpace:N,autoClogProps:K,dynamicHeight:W,shouldAllowUnselectInMultiSelectMode:J,stayExpandedAfterSelection:q,optionsListFooterBannerContent:ie,offsetY:Te,offsetX:Me}=this.props,{isDisabled:ke,loadInBackground:Pe}=w;if(ke)return null;const Ie={key:`${w.selectId}-popover`};ue&&(Ie.overlayClassName=ue),Te&&(Ie.offsetY=Te);var X,ne;Ie.offsetY=D?(ne=Ie.offsetY)!==null&&ne!==void 0?ne:0-((X=(S=this.additionalInfoContainerRef)===null||S===void 0||(R=S.current)===null||R===void 0?void 0:R.offsetHeight)!==null&&X!==void 0?X:0):Ie.offsetY,Me&&(Ie.offsetX=Me);const fe=Ae?t.createElement(d.A,{selectState:w,setSelectState:Y,renderOption:Q,emptyStateMessage:Z,enableLoadingState:ee,width:_e,maxListHeight:Ee,multiSelectMode:!0,inputRef:G,inputContainerRef:this.inputContainerRef,measurePopoverEventName:this.measurePopoverEventName,isLoading:ce&&!Pe,classPrefix:de,selectDataQa:this.fallbackDataQa,optionsRowHeight:oe,onOpen:$,onOptionsListClose:re,popoverProps:Ie,onScrollablePage:te,onOptionSelected:ae,shouldOptionBeSelected:H,shouldTokenizeOnComma:U,shouldTokenizeOnSpace:N,autoClogProps:K,dynamicHeight:W,shouldAllowUnselectInMultiSelectMode:J,stayExpandedAfterSelection:q,footerBannerContent:ie}):t.createElement(i.A,{selectState:w,setSelectState:Y,renderOption:Q,emptyStateMessage:Z,enableLoadingState:ee,width:_e,maxListHeight:Ee,multiSelectMode:!0,classPrefix:de,selectDataQa:this.fallbackDataQa,optionsRowHeight:oe,onOptionsListClose:re,onOptionSelected:ae,shouldOptionBeSelected:H,shouldTokenizeOnComma:U,shouldTokenizeOnSpace:N,dynamicHeight:W,footerBannerContent:ie});return K?t.createElement(c.A,{elementType:g.ElementType.DROPDOWN,actionProps:I,autoClogProps:K},fe):fe}render(){const{selectState:D,setSelectState:S,inputRef:R,maxHeight:w,placeholderText:Y,size:Q,width:Z,isLoading:ee,focusOnMount:_e,resultsInPopover:Ee,onSelectedItemsChange:G,onKeyDown:Ae,onKeyUp:ce,className:de,classPrefix:oe,onFilterQueryChange:$,onFilterQueryPaste:re,processOptions:ue,onBlur:te,onOptionsListClosedBlur:ae,onOptionsListClose:H,expandOnFocus:U,ariaLabel:N,ariaLabelledBy:K,ariaDescribedBy:W,onTokenSelect:J,onInputFocused:q,forceRealName:ie,autoClogProps:Te,errors:Me,hints:ke,disableIdParsing:Pe,customizeTokenProps:Ie,iconType:X,isTokenEditable:ne,ignoreSelectAllTokensAfterMount:fe,disableCloseOnTab:be,throttleForceRenderSelectContainer:Be,forceRenderSelectContainerThrottleRate:We}=this.props;let Re;Me&&(Re=(0,v.A)(Me));let ve;ke&&(ve=(0,v.A)(ke));let xe;Me&&(xe=Re?O(Me):void 0);let He;ke&&(He=ve?O(ke):void 0);const je=(0,r.Yk)([W,xe,He]),Ke=!!(Re&&Me||ve&&ke);return t.createElement("div",{className:(0,n.A)(de,"c-multi-select"),"data-qa":this.fallbackDataQa,ref:this.inputContainerRef},t.createElement(m.A,{selectState:D,setSelectState:S,size:Q,width:Z,maxHeight:w,placeholderText:Y,isLoading:ee,inputRef:R,focusOnMount:_e,measurePopoverEventName:Ee&&this.measurePopoverEventName,onSelectedItemsChange:G,selectDataQa:this.fallbackDataQa,onKeyDown:Ae,onKeyUp:ce,classPrefix:oe,onFilterQueryChange:$,onFilterQueryPaste:re,processOptions:ue,onBlur:te,onOptionsListClosedBlur:ae,onOptionsListClose:H,expandOnFocus:U,ariaLabel:N,ariaLabelledBy:K,ariaDescribedBy:je,onTokenSelect:J,onInputFocused:q,forceRealName:ie,autoClogProps:Te,customizeTokenProps:Ie,iconType:X,disableIdParsing:Pe,isTokenEditable:ne,ignoreSelectAllTokensAfterMount:fe,disableCloseOnTab:be,throttleForceRenderSelectContainer:Be,forceRenderSelectContainerThrottleRate:We}),t.createElement("div",{ref:this.additionalInfoContainerRef},Re&&Me&&t.createElement(u.A,{errors:Me}),ve&&ke&&ke.map(ht=>{let{id:dt,message:Ve}=ht;return t.createElement(o.A,{key:dt,id:dt},Ve)})),this.renderOptionsList(Ke))}constructor(D){super(D),(0,f.v)(this,["renderOptionsList"]),this.inputContainerRef=t.createRef(),this.additionalInfoContainerRef=t.createRef();const{selectId:S}=D.selectState;this.measurePopoverEventName=`measureSelectPopover--${S}`,this.fallbackDataQa=D.selectDataQa||S}},"ControlledMultiSelect");M.displayName="ControlledMultiSelect",M.defaultProps={renderOption:B=>B.label,size:A.hu.MEDIUM,width:300,optionsRowHeight:A.bJ,maxHeight:void 0,maxOptionsListHeight:void 0,errors:[],hints:[],placeholderText:"",prefix:void 0,emptyStateMessage:void 0,isLoading:!1,resultsInPopover:!0,overlayClassName:void 0,offsetY:void 0,offsetX:void 0,enableLoadingState:!0,selectDataQa:void 0,focusOnMount:!1,onSelectedItemsChange:s.A,onKeyDown:s.A,onKeyUp:s.A,className:void 0,classPrefix:void 0,onFilterQueryChange:s.A,onFilterQueryPaste:s.A,processOptions:s.A,onBlur:s.A,onOptionsListClosedBlur:s.A,ariaLabel:void 0,ariaLabelledBy:void 0,ariaDescribedBy:void 0,expandOnFocus:!1,onTokenSelect:s.A,onInputFocused:s.A,forceRealName:void 0,onOptionsListOpen:s.A,onOptionsListClose:s.A,onScrollablePage:!1,onOptionSelected:s.A,shouldOptionBeSelected:s.A,shouldTokenizeOnComma:!1,shouldTokenizeOnSpace:!1,autoClogProps:void 0,dynamicHeight:!1,customizeTokenProps:{},iconType:void 0,disableIdParsing:!1,isTokenEditable:!1,ignoreSelectAllTokensAfterMount:!1,optionsListFooterBannerContent:void 0,throttleForceRenderSelectContainer:!1,forceRenderSelectContainerThrottleRate:void 0};let C=l(class extends t.Component{setSelectState(D,S){this.setState(R=>{let w=D();const{filter:Y,options:Q}=this.props;return w.filterQuery!==void 0&&w.filterQuery!==R.filterQuery&&Y&&(w=Y(Q,w)),w},S)}render(){const{isDisabled:D,isInvalid:S,isRequired:R,customControlledMultiSelectComponent:w,errors:Y}=this.props,Q=S||(0,v.A)(Y),Z=w??M,ee=(0,a.A)(()=>({...this.state,isDisabled:D,isInvalid:Q,isRequired:R}));return t.createElement(Z,y({},this.props,{selectState:ee(),setSelectState:this.setSelectState,inputRef:this.inputRef}))}constructor(D){super(D),this.state={filterQuery:"",options:D.options,isDisabled:D.isDisabled,isExpanded:D.isExpanded,isInvalid:D.isInvalid,isRequired:D.isRequired,selectId:D.selectId,selectedOptions:D.selectedOptions||[],shouldRefocusInputAfterSelection:!!D.showConfirmDialog,selectedTokenIndexes:D.selectedTokenIndexes||[]},this.inputRef=t.createRef(),(0,f.v)(this,["setSelectState"])}},"MultiSelect");C.displayName="MultiSelect",C.defaultProps={selectedOptions:null,isDisabled:!1,isExpanded:!1,isInvalid:!1,isRequired:!0,className:void 0,errors:[],hints:[],filter:E.k,selectId:`multi-select-${(0,r.r9)()}`,customControlledMultiSelectComponent:null,showConfirmDialog:void 0,autoClogProps:void 0,selectedTokenIndexes:[]};const P=C,L=(0,p.A)(M),x=(0,p.A)((0,_.A)(M)),F=(0,_.A)(M),V=(0,h.A)(M)},449156:(j,T,e)=>{"use strict";e.d(T,{AM:()=>F,Ay:()=>L,Fw:()=>C,JJ:()=>M,mH:()=>V,uR:()=>x});var t=e(296540),n=e(528919),s=e(42302),a=e(446632),c=e(769497),r=e(820709),o=e(861789),u=e(535590),m=e(777995),i=e(562583),d=e(674016),_=e(211473),h=e(139801),p=e(133856),A=e(861621),v=e(808762),E=e(852422),f=e(131606),g=e(532395);function y(){return y=Object.assign||function(B){for(var D=1;D<arguments.length;D++){var S=arguments[D];for(var R in S)Object.prototype.hasOwnProperty.call(S,R)&&(B[R]=S[R])}return B},y.apply(this,arguments)}l(y,"_extends");const I={onOptionSelected:{action:g.UiAction.SELECT}},O=l(B=>B.map(D=>{let{id:S}=D;return S}),"getIdsFromHintOrErrors");let M=l(class extends t.Component{maybeRenderOptionsList(){const{selectState:D,setSelectState:S,renderOption:R,width:w,inputRef:Y,ariaLabel:Q,resultsInPopover:Z,overlayClassName:ee,offsetY:_e,offsetX:Ee,onOptionSelected:G,className:Ae,classPrefix:ce,optionsRowHeight:de,onOpen:oe,emptyStateMessage:$,minOptionsListWidth:re,maxOptionsListHeight:ue,isLoading:te,onOptionsListClose:ae,onScrollablePage:H,enableLoadingState:U,autoClogProps:N,shouldAllowUnselectInSingleSelectMode:K,shouldOptionBeSelected:W,optionsListFooterBannerContent:J}=this.props;if(Z&&(!this.props.inputRef||!this.props.inputRef.current))return null;const q={key:`${D.selectId}-popover`};ee&&(q.overlayClassName=ee),_e&&(q.offsetY=_e),Ee&&(q.offsetX=Ee);const ie=Z?t.createElement(d.A,{selectState:D,setSelectState:S,renderOption:R,width:w,inputRef:Y,ariaLabel:Q,onOptionSelected:G,popoverProps:q,measurePopoverEventName:this.measurePopoverEventName,className:Ae,classPrefix:ce,selectDataQa:this.fallbackDataQa,optionsRowHeight:de,onOpen:oe,emptyStateMessage:$,minOptionsListWidth:re,maxListHeight:ue,isLoading:te,onOptionsListClose:ae,onScrollablePage:H,enableLoadingState:U,autoClogProps:N,dropdownContainer:this.dropdownContainer,shouldAllowUnselectInSingleSelectMode:K,shouldOptionBeSelected:W,footerBannerContent:J}):t.createElement(i.A,{selectState:D,setSelectState:S,renderOption:R,width:w,inputRef:Y,ariaLabel:Q,onOptionSelected:G,classPrefix:ce,selectDataQa:this.fallbackDataQa,emptyStateMessage:$,maxListHeight:ue,optionsRowHeight:de,onOptionsListClose:ae,enableLoadingState:U,shouldAllowUnselectInSingleSelectMode:K,shouldOptionBeSelected:W,footerBannerContent:J});return t.createElement(c.A,{elementType:g.ElementType.DROPDOWN,actionProps:I,autoClogProps:N},ie)}render(){const{renderSelectedOption:D,className:S,classPrefix:R,placeholderText:w,size:Y,width:Q,selectState:Z,setSelectState:ee,inputRef:_e,focusOnMount:Ee,showDropdownIcon:G,isLoading:Ae,resultsInPopover:ce,isDisabled:de,isRequired:oe,onFocus:$,onEsc:re,ariaLabelledBy:ue,ariaDescribedBy:te,inputIcon:ae,maxCharacterLimit:H,onOptionsListClose:U,ariaLabel:N,expandOnClick:K,searchOnClick:W,autoClogProps:J,errors:q,hints:ie,expandOnFocus:Te,hideSelectedOptionOnDropdownOpen:Me,retainPreviousSelectionOnDelete:ke}=this.props,{isInvalid:Pe}=Z,Ie=(0,v.A)(q),X=(0,v.A)(ie);let ne;q&&(ne=Ie?O(q):void 0);let fe;ie&&(fe=X?O(ie):void 0);const be=(0,r.Yk)([te,ne,fe]),Be=Pe||Ie;return t.createElement("div",{className:(0,n.A)(S,"c-search-select"),"data-qa":this.fallbackDataQa},t.createElement(m.Ay,{selectState:{...Z,isInvalid:Be,isRequired:oe,isDisabled:de},setSelectState:ee,renderSelectedOption:D,placeholderText:w,size:Y,width:Q,selectDataQa:this.fallbackDataQa,inputRef:_e,focusOnMount:Ee,showDropdownIcon:G,isLoading:Ae,resultsInPopover:ce,measurePopoverEventName:ce?this.measurePopoverEventName:void 0,classPrefix:R,onBlur:this.onBlur,onFocus:$,onEsc:re,"aria-label":N,ariaLabelledBy:ue,ariaDescribedBy:be,icon:ae,maxCharacterLimit:H,onOptionsListClose:U,expandOnClick:K,autoClogProps:J,searchOnClick:W,expandOnFocus:Te,hideSelectedOptionOnDropdownOpen:Me,retainPreviousSelectionOnDelete:ke}),Ie&&q&&t.createElement(u.A,{errors:q}),X&&ie&&ie.map(We=>{let{id:Re,message:ve,className:xe}=We;return ve&&t.createElement(o.A,{key:Re,id:Re,className:xe},ve)}),this.maybeRenderOptionsList())}constructor(D){super(D),this.onBlur=R=>{if(this.dropdownContainer){const w=this.dropdownContainer.current;if(w&&w.contains(R.relatedTarget)&&!this.props.isInvalidStateControlled){this.props.setSelectState(()=>({isInvalid:!1}));return}}this.props.onBlur&&this.props.onBlur(R)};const{selectId:S}=D.selectState;this.measurePopoverEventName=`measureSelectPopover--${S}`,this.fallbackDataQa=D.selectDataQa||S,this.dropdownContainer=t.createRef()}},"ControlledSearchSelect");M.displayName="ControlledSearchSelect",M.defaultProps={autoClogProps:void 0,className:void 0,classPrefix:void 0,renderOption:B=>B.label,renderSelectedOption:B=>B.label,resultsInPopover:!0,overlayClassName:void 0,offsetY:void 0,offsetX:void 0,size:A.hu.MEDIUM,width:360,optionsRowHeight:A.bJ,errors:[],hints:[],ariaLabel:null,ariaLabelledBy:void 0,ariaDescribedBy:void 0,placeholderText:void 0,onOptionSelected:s.A,selectDataQa:void 0,showDropdownIcon:!0,focusOnMount:!1,isLoading:!1,isDisabled:!1,isInvalid:!1,isRequired:!0,onBlur:s.A,onFocus:s.A,onEsc:s.A,onOpen:s.A,onOptionsListClose:s.A,emptyStateMessage:void 0,minOptionsListWidth:void 0,maxOptionsListHeight:void 0,inputIcon:void 0,maxCharacterLimit:void 0,onScrollablePage:!1,expandOnClick:!0,enableLoadingState:!0,searchOnClick:!1,shouldAllowUnselectInSingleSelectMode:!0,shouldOptionBeSelected:s.A,isInvalidStateControlled:!1};const C=(0,_.A)(M);let P=l(class extends t.Component{setSelectState(D,S){this.setState(R=>{let w=D();const{filter:Y,options:Q}=this.props;return w.filterQuery!==void 0&&w.filterQuery!==R.filterQuery&&Y&&(w=Y(Q,w)),w},S)}render(){const{isRequired:D,isInvalid:S,isDisabled:R,showConfirmDialog:w}=this.props,Y=w?C:M,Q=(0,a.A)(()=>({...this.state,isInvalid:S,isRequired:D,isDisabled:R}));return t.createElement(Y,y({},this.props,{selectState:Q(),setSelectState:this.setSelectState,inputRef:this.inputRef}))}constructor(D){super(D),this.state={filterQuery:"",displayQuery:"",options:D.options,selectId:D.selectId,isExpanded:D.isExpanded,isInvalid:D.isInvalid,isDisabled:D.isDisabled,selectedOption:D.selectedOption},this.inputRef=this.props.inputRef?this.props.inputRef:t.createRef(),(0,f.v)(this,["setSelectState"])}},"SearchSelect");P.displayName="SearchSelect",P.defaultProps={autoClogProps:void 0,isDisabled:!1,isExpanded:!1,isInvalid:!1,isRequired:!0,errors:[],hints:[],filter:E.k,onOptionSelected:s.A,selectId:`search-select-${(0,r.r9)()}`,selectedOption:void 0,showConfirmDialog:void 0,inputIcon:void 0,maxCharacterLimit:void 0,inputRef:void 0};const L=P,x=(0,p.A)(M),F=(0,p.A)((0,_.A)(M)),V=(0,h.A)(M)},757917:(j,T,e)=>{"use strict";e.d(T,{A:()=>o});var t=e(296540),n=e(720292),s=e(616125),a=e(649098);const c=new a.Ay("form_inputs"),r=l(u=>{let{onCtaClick:m,errorCopy:i,ctaCopy:d}=u;return t.createElement("div",{className:"c-multi_select_helper_text"},t.createElement("span",{className:"c-multi_select_helper_text__icon_container c-multi_select_helper_text__icon_container--error"},t.createElement(s.A,{name:"warning",inline:!0})),t.createElement("span",null,i||c.t("Selected entries contain errors."),t.createElement(n.A,{onClick:m,className:"margin_left_25"},d||c.t("Delete all errors"))))},"MultiSelectErrorText");r.displayName="MultiSelectErrorText";const o=r},239803:(j,T,e)=>{"use strict";e.d(T,{A:()=>V});var t=e(296540),n=e(528919),s=e(997859),a=e(21879),c=e(446632),r=e(574022),o=e(42302),u=e(180491),m=e(769497),i=e(590050),d=e(619563),_=e(730563),h=e(820709),p=e(61629),A=e(861621),v=e(104355),E=e(131606),f=e(532395),g=e(119110),y=e(823650);function I(){return I=Object.assign||function(B){for(var D=1;D<arguments.length;D++){var S=arguments[D];for(var R in S)Object.prototype.hasOwnProperty.call(S,R)&&(B[R]=S[R])}return B},I.apply(this,arguments)}l(I,"_extends");const O={onChange:{action:f.UiAction.ENTER_TEXT}},M={onClick:{action:f.UiAction.CLICK}},C=new Array(95).fill("").map((B,D)=>String.fromCharCode(D+32)),P=l(B=>t.createElement("span",I({className:"c-multi_select_input__space"},B),"\xA0"),"makeSpace"),L=1e3,x={leading:!0,trailing:!1};let F=l(class extends t.PureComponent{componentDidMount(){this.inputHeight=this.getInputHeight(),this.props.focusOnMount&&this.focus(),this.attachMutationObserver()}componentDidUpdate(D){var S;const R=D.selectState,{selectState:w,onTokenSelect:Y,onSelectedItemsChange:Q,setSelectState:Z,hasKeyboardFocus:ee,isTokenEditable:_e}=this.props,{selectedOptions:Ee,isExpanded:G,isDisabled:Ae}=w,ce=this.getSelectedTokenIndexes();if(this.doesMutationObserverExist()||(this.attachMutationObserver(),this.focus()),this.props.focusOnMount&&D.focusOnMount!==this.props.focusOnMount&&this.focus(),((S=w.filterQuery)===null||S===void 0?void 0:S.length)&&w.filterQuery!==R.filterQuery&&this.caretPosInFilterQuery!==-1&&this.updateCaretPosInFilterQuery(),this.possiblyRepositionOptionsList(R),this.haveSelectedTokens()&&!(0,y.Ay)(R.selectedTokenIndexes,ce)&&Ee&&(ce==null||ce.forEach(ue=>{Y&&Y(Ee[ue])}),G&&Z(()=>({isExpanded:!1})),this.scrollSelectedTokenIntoView()),R.isDisabled&&!Ae&&this.moveCursorAndScrollToFilterQuery(),!(0,y.Ay)(R.selectedOptions,Ee,3)){if(Q&&typeof Ee<"u"){if(_e){var $;const{isCurrentlyEditingToken:ue}=this.state;if(((($=R.selectedOptions)===null||$===void 0?void 0:$.length)||0)<Ee.length){if(ue){const te=Ee.pop();te&&Ee.splice(this.state.editTokenIndex,0,te),this.setTokenState(!1,0)}}else ue&&Ee.length===0&&this.setTokenState(!1,0)}Q(Ee)}this.scrollFilterQueryIntoView()}this.inputHeight=this.getInputHeight(),ee&&!D.hasKeyboardFocus&&(0,s.A)(w.activeRowIndex)&&!this.allTokensAreSelected()&&this.selectAllTokens()}componentWillUnmount(){this.doesMutationObserverExist()&&this.removeMutationObserver(),this.updateQueryTimer&&clearTimeout(this.updateQueryTimer),this.forceRenderSelectContainerThrottled.cancel&&this.forceRenderSelectContainerThrottled.cancel()}onBlur(D){const{selectState:S,setSelectState:R,hideFilterQueryOnBlur:w,onBlur:Y,onOptionsListClosedBlur:Q}=this.props,{selectedOptions:Z,filterQuery:ee,isExpanded:_e}=S,Ee=w&&ee&&!_e;this.setState(()=>({focused:!1})),this.deselectAllTokens(),Ee&&R(()=>({filterQuery:""})),this.caretPosInFilterQuery=-1,this.mouseDownOnToken=!1,Y&&Y(D,Z),!_e&&Q&&Q()}onChange(){this.state.composing||this.onFilterQueryChanged()}setTokenState(D,S){this.props.isTokenEditable&&this.setState(()=>({isCurrentlyEditingToken:D,editTokenIndex:S}))}onFilterQueryChanged(){const{setSelectState:D,selectState:S,onFilterQueryChange:R}=this.props,w=this.filterQueryRef.current,Y=w==null?void 0:w.textContent,Q=S.filterQuery!==Y;if(this.backspaceWasPressed&&!Q){this.backspaceWasPressed=!1;return}const Z=Y?Y.length>0:!1;this.saveCaretPosInFilterQuery(),D(()=>({filterQuery:Y,isExpanded:Z})),R&&R(Y)}onFocus(D){this.setState(()=>({focused:!0}));const{expandOnFocus:S,onInputFocused:R,setSelectState:w,onFocus:Y}=this.props;S&&w(()=>({isExpanded:!0})),this.mouseDownOnToken||this.moveCursorAndScrollToFilterQuery(),R&&R(D),this.mouseDownOnToken=!1,Y&&Y(D)}onCaretSelectionChange(){this.isCaretOutSideFilterQuery()?this.updateCaretPosInFilterQuery():this.saveCaretPosInFilterQuery()}onRangeSelectionChange(){var D;const S=(D=this.props.windowRef.deref())===null||D===void 0?void 0:D.getSelection(),R=S==null?void 0:S.getRangeAt(0),w=this.getTokensAsArray(),{selectState:Y}=this.props,{filterQuery:Q}=Y,Z=w.reduce((de,oe,$)=>S!=null&&S.containsNode(oe)?[...de,$]:de,[]),ee=Z.length>0;if(!Q&&!ee&&!(S!=null&&S.isCollapsed)){this.ignoreSelectionChange=!0,S==null||S.collapseToEnd();return}if(this.isEntireFilterQuerySelected()&&!ee){var _e;this.ignoreSelectionChange=!0,R==null||R.setStartBefore((_e=this.filterQueryRef.current)===null||_e===void 0?void 0:_e.firstChild);return}const Ee=Z[0],G=Z[Z.length-1],Ae=w[Ee],ce=w[G];if(!Q&&ee){this.ignoreSelectionChange=!0,R==null||R.setStartBefore(Ae),this.ignoreSelectionChange=!0,R==null||R.setEndAfter(ce),this.setSelectedTokenIndexes(Z);return}this.isEntireFilterQuerySelected()&&ee&&(this.ignoreSelectionChange=!0,R==null||R.setStartBefore(Ae),this.setSelectedTokenIndexes(Z))}onSelectionChange(){var D;if(this.ignoreSelectionChange){this.ignoreSelectionChange=!1;return}const S=(D=this.props.windowRef.deref())===null||D===void 0?void 0:D.getSelection();let R=null;if(S){const{type:w}=S;R=w}R==="Caret"&&this.onCaretSelectionChange(),R==="Range"&&this.onRangeSelectionChange()}onKeyDown(D){if(this.state.composing)return;const{key:S,ctrlKey:R,metaKey:w,altKey:Y,shiftKey:Q}=D,{selectState:Z,onKeyDown:ee}=this.props,_e=(0,g.cX)()?w:R,Ee=S==="Delete"&&((0,g.cX)()&&Y||(0,g.uF)()&&_e);(S==="Backspace"||Ee)&&this.onBackspace(D),!Ee&&S==="Delete"&&this.onDelete(D),S==="Escape"&&this.onEscape(D),(S==="Home"||w&&!Q&&S==="ArrowLeft"||w&&!Q&&S==="ArrowUp")&&this.onHome(D),(S==="End"||w&&!Q&&S==="ArrowRight"||w&&!Q&&S==="ArrowDown")&&this.onEnd(D),!w&&S==="ArrowLeft"&&!this.leftArrowKeyWasPressed&&(this.leftArrowKeyWasPressed=!0,this.onLeftArrow(D)),!w&&S==="ArrowRight"&&this.onRightArrow(D),S==="Tab"&&this.onTab(D),(S==="ArrowUp"||S==="ArrowDown")&&D.preventDefault(),S==="Enter"&&D.preventDefault(),!_e&&C.includes(S)&&this.onCharacterKey(),ee&&ee(D,{hasActiveRowIndex:(0,a.A)(Z.activeRowIndex)})}onHome(D){D.preventDefault();const{selectState:S}=this.props,{selectedOptions:R}=S;R!=null&&R.length?this.setSelectedTokenIndexes([0],{initiator:D.type}):this.moveCursorToFilterQuery({cursorAtStart:!0})}onEnd(D){D.preventDefault();const{selectState:S}=this.props,{selectedTokenIndexes:R}=S;R!=null&&R.length&&this.deselectAllTokens(),this.moveCursorAndScrollToFilterQuery()}onKeyUp(D){const{selectState:S,onKeyUp:R}=this.props,w=this.getSelectedTokenIndexes(),Y=this.getTokensAsArray();this.shouldMoveCursorToFilterQuery&&(this.moveCursorToFilterQuery({cursorAtStart:!0}),this.shouldMoveCursorToFilterQuery=!1),this.updateSelectionOnKeyUp&&(w!=null&&w.length)&&(this.selectTextInNode(Y[w[0]]),this.updateSelectionOnKeyUp=!1),this.leftArrowKeyWasPressed&&(this.leftArrowKeyWasPressed=!1),R&&R(D,{hasActiveRowIndex:(0,a.A)(S.activeRowIndex)})}onInputContainerMouseDown(D){D.preventDefault(),this.haveSelectedTokens()&&this.deselectAllTokens(),this.state.focused?this.moveCursorAndScrollToFilterQuery():this.focus()}onPaste(D){if(!D||!D.clipboardData)return;const{onFilterQueryPaste:S}=this.props;S&&S(D)}onCharacterKey(){if(!this.haveSelectedTokens())return;const{setSelectState:D}=this.props,{selectState:S}=this.props,{filterQuery:R,selectedOptions:w}=S,Y=this.getSelectedTokenIndexes(),Q=w==null?void 0:w.filter((_e,Ee)=>(Y==null?void 0:Y.indexOf(Ee))===-1),Z=this.getSelectedFilterQueryText(),ee=R==null?void 0:R.replace(Z,"");D(()=>({selectedOptions:Q,selectedTokenIndexes:[],filterQuery:ee})),this.moveCursorToFilterQuery()}onBackspace(D){const{setSelectState:S}=this.props,{selectState:R,isTokenEditable:w}=this.props,{filterQuery:Y}=R;if(this.ignoreSelectionChange=!0,this.allTokensAreSelected()&&(this.isEntireFilterQuerySelected()||!Y)){D.preventDefault(),S(()=>({selectedOptions:[],selectedTokenIndexes:[],filterQuery:"",isExpanded:!1}));return}if(w&&(Y==null?void 0:Y.length)===1){D.preventDefault(),S(()=>({filterQuery:"",isExpanded:!1})),this.setTokenState(!1,0),this.moveCursorToFilterQuery();return}if(this.isEntireFilterQuerySelected()){D.preventDefault(),S(()=>({filterQuery:"",isExpanded:!1}));return}const Z=this.getTokensAsArray().length,ee=this.getSelectedTokenIndexes(),_e=this.isCaretAtStartOfFilterQuery();if(this.backspaceWasPressed=!0,_e&&Z===0){D.preventDefault();return}if(!_e&&!this.haveSelectedTokens()&&Y)return;if(D.preventDefault(),!this.haveSelectedTokens()){this.setSelectedTokenIndexes([Z-1],{initiator:D.type});return}ee==null||ee.forEach(ce=>{this.removeToken(ce,"backspaceKey")});const Ee=ee&&ee[0],G=Ee===0;let Ae=null;Ee&&(Ae=G?[0]:[Ee-1]),Ae!=null&&Ae.length&&this.setSelectedTokenIndexes(Ae,{initiator:D.type})}onDelete(D){const{setSelectState:S}=this.props;if(this.ignoreSelectionChange=!0,this.isEntireFilterQuerySelected()){D.preventDefault(),S(()=>({filterQuery:"",isExpanded:!1}));return}const w=this.getTokensAsArray().length,Y=this.getSelectedTokenIndexes();if(w===0||!this.haveSelectedTokens()||(D.preventDefault(),Y==null||Y.forEach(_e=>{this.removeToken(_e,"deleteKey")}),!(Y!=null&&Y.length)))return;const Z=Y[Y.length-1]===w-1,ee=(Y==null?void 0:Y.length)===w;(Z||ee)&&(this.moveCursorToFilterQuery({cursorAtStart:!0}),this.deselectAllTokens())}onEscape(D){const{selectState:S,setSelectState:R,onOptionsListClose:w}=this.props;S.isExpanded&&(D.stopPropagation(),w&&w(),R(()=>({isExpanded:!1})))}onLeftArrow(D){var S;const w=this.getTokensAsArray().length,Y=this.getSelectedTokenIndexes(),Q=(Y==null?void 0:Y.length)&&Y[0],Z=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection();let ee=null,_e=null;if(Z){const{type:oe,anchorOffset:$}=Z;ee=oe,_e=$}const Ee=ee==="Caret",G=ee==="Range";if(D.shiftKey&&G&&this.isRangeSelectionOfFilterQueryComplete(_e)){D.preventDefault();return}const Ae=Ee&&this.isCaretAtStartOfFilterQuery();if(w===0&&Ae){D.preventDefault();return}if(w===0)return;if(this.props.isTokenEditable&&this.state.isCurrentlyEditingToken&&Ae){D.preventDefault();return}if(this.allTokensAreSelected()){this.setSelectedTokenIndexes([0],{initiator:D.type});return}if(!this.haveSelectedTokens()&&Ae){this.setSelectedTokenIndexes([w-1],{initiator:D.type});return}if(G&&this.haveSelectedTokens()&&Q===0){D.preventDefault();return}this.haveSelectedTokens()&&typeof Q=="number"&&this.setSelectedTokenIndexes([Q-1],{initiator:D.type})}onRightArrow(D){var S;const R=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection(),w=(R==null?void 0:R.type)==="Range",Q=this.getTokensAsArray().length,Z=this.getSelectedTokenIndexes(),ee=(Z==null?void 0:Z.length)&&Z[0];if(typeof ee!="number")return;if(!(w&&this.haveSelectedTokens()&&ee<Q-1)&&this.haveSelectedTokens()||this.allTokensAreSelected()){D.preventDefault(),this.shouldMoveCursorToFilterQuery=!0,this.deselectAllTokens();return}this.haveSelectedTokens()&&typeof ee=="number"&&this.setSelectedTokenIndexes([ee+1],{initiator:D.type})}onTab(D){const{shiftKey:S}=D,{expandOnFocus:R,selectState:w,onOptionsListClose:Y,setSelectState:Q,disableCloseOnTab:Z}=this.props;Z||(Y&&Y(),(S||R&&w.activeRowIndex===null)&&Q(()=>({isExpanded:!1})))}onTokenMouseDown(D,S){const{focused:R,isCurrentlyEditingToken:w}=this.state,{selectState:Y,isTokenEditable:Q}=this.props;if(Y.isDisabled)return;if(D.preventDefault(),this.mouseDownOnToken=!0,D.stopPropagation(),Q&&!w){this.onTokenEdit(S);return}R||this.focus();const Z=this.getTokensAsArray();this.selectTextInNode(Z[S]);const ee=this.getSelectedTokenIndexes();S!==(ee==null?void 0:ee[0])&&this.setSelectedTokenIndexes([S])}onTokenEdit(D){const{selectState:S,setSelectState:R,processOptions:w}=this.props,{selectedOptions:Y}=S;this.setTokenState(!0,D);let Q="";Y&&Y[D]&&(typeof Y[D].label=="string"&&Y[D].label!==Y[D].value?Q=Y[D].label:Q=Y[D].value),this.removeToken(D,"editToken"),this.updateFilterQueryValue(Q),w&&w([],Q).then(Z=>{R(()=>({isExpanded:!0,options:Z,filterQuery:Q}))})}onTokenRemoveMouseDown(D,S){const{focused:R,isCurrentlyEditingToken:w,editTokenIndex:Y}=this.state;D.preventDefault(),this.mouseDownOnToken=!0,D.stopPropagation(),R||this.focus(),this.moveCursorToFilterQuery(),this.props.isTokenEditable&&w&&S<Y&&this.setTokenState(!0,Y-1),this.removeToken(S,"iconClick")}onFilterQueryMouseDown(D){var S;this.state.focused&&(!((S=this.filterQueryRef.current)===null||S===void 0)&&S.textContent)&&D.stopPropagation(),this.haveSelectedTokens()&&this.deselectAllTokens()}updateFilterQueryValue(D){const{onFilterQueryChange:S}=this.props;this.updateQueryTimer=setTimeout(()=>{S&&S(D),this.moveCursorToFilterQuery(),clearTimeout(this.updateQueryTimer)})}onPlaceholderMouseDown(){this.focus()}onSelectAll(D){var S;const{setSelectState:R}=this.props;D.preventDefault(),R(()=>({selectedTokenIndexes:[],isExpanded:!1}));const w=(S=this.filterQueryRef)===null||S===void 0?void 0:S.current;w!=null&&w.textContent&&this.selectTextInNode(w)}onCompositionStart(){this.setState(()=>({composing:!0}))}onCompositionEnd(){this.setState(()=>({composing:!1})),this.onFilterQueryChanged()}onCut(){const{selectState:D}=this.props,{filterQuery:S,selectedOptions:R}=D,w=this.getSelectedTokenIndexes(),Y=R==null?void 0:R.filter((ee,_e)=>(w==null?void 0:w.indexOf(_e))===-1),Q=this.getSelectedFilterQueryText(),Z=S==null?void 0:S.replace(Q,"");this.selectStateAfterMutation={selectedTokenIndexes:[],selectedOptions:Y,filterQuery:Z,isExpanded:!1}}onNodeAdded(D){const{nodeName:S}=D;(S==="B"||S==="I")&&(this.removeMutationObserver(),this.runForceRenderSelectContainer())}onNodeRemoved(D){const{setSelectState:S}=this.props;if(this.selectStateAfterMutation){this.caretPosInFilterQuery=0,this.removeMutationObserver(),this.runForceRenderSelectContainer(!0),S(()=>this.selectStateAfterMutation),this.selectStateAfterMutation=null;return}D===this.filterQueryRef.current&&(this.removeMutationObserver(),this.runForceRenderSelectContainer(!0))}onMutation(D){D.forEach(S=>{S.addedNodes.forEach(this.onNodeAdded),S.removedNodes.forEach(this.onNodeRemoved)})}getAriaPlaceholderText(){const{selectState:D,placeholderText:S}=this.props,{filterQuery:R,selectedOptions:w}=D;if(!R&&!(w&&w.length>0))return S}getAriaActiveDescendant(){const{selectState:D}=this.props,{selectId:S,activeRowIndex:R}=D;return(0,a.A)(R)?(0,h.Es)(S,`option_${R}`):void 0}getInputHeight(){const{inputRef:D}=this.props,S=D==null?void 0:D.current;return S?S.offsetHeight:null}getTokensAsArray(){var D,S;const R=(D=this.props.inputRef)===null||D===void 0||(S=D.current)===null||S===void 0?void 0:S.querySelectorAll(".c-token");return Array.prototype.slice.call(R)}getSelectedFilterQueryText(){var D;const{selectState:S}=this.props,{filterQuery:R}=S;if((R==null?void 0:R.length)===0)return"";const w=(D=this.props.windowRef.deref())===null||D===void 0?void 0:D.getSelection(),Y=w==null?void 0:w.toString();if(!(w==null?void 0:w.containsNode(this.filterQueryRef.current,!0)))return"";const Z=Y==null?void 0:Y.split(`
`);return Z!=null&&Z.length?Z[Z.length-1].trim():""}setSelectedTokenIndexes(D){let{initiator:S}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};S==="keydown"&&(this.updateSelectionOnKeyUp=!0,this.ignoreSelectionChange=!0);const{setSelectState:R}=this.props;R(()=>({selectedTokenIndexes:D}))}getSelectedTokenIndexes(){const{selectState:D}=this.props,{selectedTokenIndexes:S}=D;return S||[]}allTokensAreSelected(){const D=this.getSelectedTokenIndexes(),S=this.getTokensAsArray();return D!=null&&D.length?D.length>0&&D.length===S.length:!1}attachMutationObserver(){var D;if(this.mutationObserver=new MutationObserver(this.onMutation),!((D=this.props.inputRef)===null||D===void 0)&&D.current){var S;this.mutationObserver.observe((S=this.props.inputRef)===null||S===void 0?void 0:S.current,{subtree:!0,childList:!0})}}deselectAllTokens(){this.setSelectedTokenIndexes([])}determineCaretPosInFilterQuery(){const{selectState:D}=this.props,{filterQuery:S}=D;if(this.caretPosInFilterQuery===-1||!S)return 0;const R=S==null?void 0:S.length;return typeof this.caretPosInFilterQuery=="number"&&this.caretPosInFilterQuery>R?R:this.caretPosInFilterQuery}doesMutationObserverExist(){return!!this.mutationObserver}removeMutationObserver(){var D;(D=this.mutationObserver)===null||D===void 0||D.disconnect(),this.mutationObserver=null}focus(){var D;const S=(D=this.props.inputRef)===null||D===void 0?void 0:D.current;S==null||S.focus()}forceRenderSelectContainer(){this.setState(()=>({selectContainerKey:Date.now()}))}runForceRenderSelectContainer(D){const{isLoading:S,throttleForceRenderSelectContainer:R}=this.props;R?(D&&this.forceRenderSelectContainerThrottled.cancel&&this.forceRenderSelectContainerThrottled.cancel(),S||this.forceRenderSelectContainerThrottled()):this.forceRenderSelectContainer()}haveSelectedTokens(){var D;return!!(!((D=this.getSelectedTokenIndexes())===null||D===void 0)&&D.length)}isCaretAtStartOfFilterQuery(){var D;if(this.isCaretOutSideFilterQuery())return!1;const{selectState:S}=this.props,{filterQuery:R}=S;if(!R)return!0;const w=(D=this.props.windowRef.deref())===null||D===void 0?void 0:D.getSelection();let Y=null;if(w){const{anchorOffset:Q}=w;Y=Q}return Y===0}isCaretOutSideFilterQuery(){var D,S;const R=(D=this.props.windowRef.deref())===null||D===void 0?void 0:D.getSelection();let w=null;if(R){const{anchorNode:Y}=R;w=Y}return!(!((S=this.filterQueryRef.current)===null||S===void 0)&&S.contains(w))}isRangeSelectionOfFilterQueryComplete(D){const S=this.getSelectedFilterQueryText();if(!S)return!1;const{selectState:R}=this.props,w=R.filterQuery;return!w||!D?!1:S.substr(0,D)===(w==null?void 0:w.substr(0,D))}isEntireFilterQuerySelected(){const{selectState:D}=this.props,S=this.getSelectedFilterQueryText();return!!S&&S===D.filterQuery}moveCursorAndScrollToFilterQuery(){this.scrollFilterQueryIntoView(),this.moveCursorToFilterQuery()}moveCursorToFilterQuery(){let{cursorAtStart:D}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cursorAtStart:!1};var S,R,w,Y;const Q=document.createRange(),Z=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection();Z==null||Z.removeAllRanges();const ee=(R=this.filterQueryRef)===null||R===void 0?void 0:R.current,_e=(ee==null?void 0:ee.firstChild)||ee,Ee=D?0:(Y=ee==null||(w=ee.textContent)===null||w===void 0?void 0:w.trim())===null||Y===void 0?void 0:Y.length;_e!==null&&typeof Ee=="number"&&Q.setStart(_e,Ee),Q.collapse(!0),Z==null||Z.addRange(Q)}possiblyRepositionOptionsList(D){if(!this.measurePopoverEvent)return;const{selectState:S}=this.props,R=S.isExpanded&&!D.isExpanded,w=this.getInputHeight(),Y=this.inputHeight!==w;if(R||Y){var Q;(Q=this.props.windowRef.deref())===null||Q===void 0||Q.dispatchEvent(this.measurePopoverEvent)}}removeToken(D,S){const{selectState:R,setSelectState:w,isTokenEditable:Y}=this.props,{selectedOptions:Q,pendingQueries:Z,filterQuery:ee}=R,_e=Z?Z.length:0,Ee=Q&&Q[D]&&Q[D].queryId,Ae=Ee&&_e?Z==null?void 0:Z.filter(ce=>{let{queryId:de}=ce;return de!==Ee}):Z;w(()=>({selectedOptions:Q==null?void 0:Q.filter((ce,de)=>de!==D),selectedTokenIndexes:[],removalInitiator:S,removedItemIndex:D,pendingQueries:Ae})),Y&&this.state.isCurrentlyEditingToken&&this.updateFilterQueryValue(ee)}saveCaretPosInFilterQuery(){var D;const S=(D=this.props.windowRef.deref())===null||D===void 0?void 0:D.getSelection();this.caretPosInFilterQuery=S==null?void 0:S.anchorOffset}scrollFilterQueryIntoView(){const D=this.filterQueryRef.current;D&&D!=null&&D.scrollIntoView&&(D==null||D.scrollIntoView({block:"nearest"}))}scrollSelectedTokenIntoView(){const D=this.getSelectedTokenIndexes();if(!this.haveSelectedTokens())return;const S=this.getTokensAsArray();if(!(D!=null&&D.length))return;const R=D[D.length-1],w=S[R];w&&w.scrollIntoView&&w.scrollIntoView({block:"nearest"})}selectAllTokens(){var D;if(this.state.ignoreSelectAllTokensAfterMount){this.setState(()=>({ignoreSelectAllTokensAfterMount:!1}));return}const S=this.getTokensAsArray();if(S.length===0)return;const R=S[0],w=S[S.length-1],Y=(D=this.props.windowRef.deref())===null||D===void 0?void 0:D.getSelection(),Q=document.createRange();Y==null||Y.removeAllRanges(),Q.setStartBefore(R),Q.setEndAfter(w),Y==null||Y.addRange(Q)}selectTextInNode(D){var S;if(!D)return;const R=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection(),w=document.createRange();this.ignoreSelectionChange=!0,R==null||R.removeAllRanges();const Y=(0,g.cX)()?D:D.querySelector(".c-token__content");w.selectNode(Y),this.ignoreSelectionChange=!0,R==null||R.addRange(w)}updateCaretPosInFilterQuery(){var D,S;const R=(D=this.filterQueryRef)===null||D===void 0?void 0:D.current;if(!R)return;const w=document.createRange(),Y=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection();Y==null||Y.removeAllRanges();const Q=this.determineCaretPosInFilterQuery();typeof Q=="number"&&w.setStart((R==null?void 0:R.firstChild)||R,Q),w.collapse(!0),Y==null||Y.addRange(w)}renderFilterQuery(){const{selectState:D,isTokenEditable:S,size:R}=this.props,{filterQuery:w,isDisabled:Y}=D,{isCurrentlyEditingToken:Q,editTokenIndex:Z}=this.state,ee=Y?void 0:this.onFilterQueryMouseDown,_e=(0,n.A)({"c-multi_select_input__filter_query":!0,[`c-multi_select_input__${R}_filter_query--edit`]:S&&Q});return t.createElement("span",{className:_e,ref:this.filterQueryRef,onMouseDown:ee,key:Z},w)}renderInput(){const{selectState:D,selectDataQa:S,inputRef:R,ariaLabelledBy:w,ariaLabel:Y,autoClogProps:Q,iconType:Z,isTokenEditable:ee}=this.props,{selectId:_e,isDisabled:Ee,isExpanded:G,isInvalid:Ae}=D,ce=Ee?void 0:0,de=Ee?void 0:this.getAriaActiveDescendant(),oe=!Ee,$=oe,re=Ee?void 0:this.onFocus,ue=Ee?void 0:this.onBlur,te=Ee?void 0:this.onChange,ae=Ee?void 0:this.onPaste,H=Ee?void 0:this.onKeyDown,U=Ee?void 0:this.onKeyUp,N=Ee?void 0:this.onSelectionChange,K=Ee?void 0:this.onCut,W=Ee?void 0:this.onCompositionStart,J=Ee?void 0:this.onCompositionEnd,q=(0,n.A)({"c-multi_select_input__input":!0,"c-multi_select_input__input--with-icon":!!Z}),ie=t.createElement("div",{role:"combobox","aria-disabled":Ee,"aria-autocomplete":"list","aria-expanded":G,"aria-controls":(0,h.Es)(_e,"listbox"),"aria-activedescendant":de,"aria-labelledby":w,"aria-label":Y,"aria-placeholder":this.getAriaPlaceholderText(),"aria-invalid":Ae,id:_e,className:q,tabIndex:ce,contentEditable:oe,suppressContentEditableWarning:$,"data-qa":S?`${S}-input`:void 0,ref:R,onFocus:re,onBlur:ue,onInput:te,onCompositionStart:W,onCompositionEnd:J,onPaste:ae,onKeyDown:H,onKeyUp:U,onSelect:N,onCut:K,"aria-multiline":!1},P(),ee&&this.state.isCurrentlyEditingToken?this.renderEditableTokens():t.createElement(t.Fragment,null,this.renderTokens(),this.renderFilterQuery()),P({contentEditable:!1}));return Q?t.createElement(m.A,{autoClogProps:Q,actionProps:O,elementType:f.ElementType.INPUT},ie):ie}renderLoadingIndicator(){const{isLoading:D,size:S}=this.props;return D?t.createElement(_.A,{className:"c-multi_select_input__spinner",color:"blue",size:S===A.hu.LARGE?A.hu.LARGE:A.hu.MEDIUM}):null}renderPlaceholder(){const{selectState:D,placeholderText:S,iconType:R}=this.props,{filterQuery:w,selectedOptions:Y,isDisabled:Q}=D;if(this.state.composing||w||Y&&Y.length>0)return null;const Z=Q?void 0:this.onPlaceholderMouseDown,ee=(0,n.A)({"c-multi_select_input__placeholder":!0,"c-multi_select_input__placeholder--with-icon":!!R});return t.createElement("div",{"aria-hidden":"true",className:ee,onMouseDown:Z},S)}renderToken(D,S){let{icon:R,svgIcon:w,value:Y,label:Q,hoverText:Z,isLoading:ee,isError:_e,isMemberError:Ee,isTeamError:G,isUnknown:Ae,emailTeam:ce}=D;const{forceRealName:de,size:oe,selectState:$,customizeTokenProps:re,disableIdParsing:ue}=this.props,te=this.getSelectedTokenIndexes(),ae=(te==null?void 0:te.indexOf(S))!==-1,{isDisabled:H,restrictedSelectedTokenIndexes:U,disabledSelectedTokenIndexes:N}=$,K=!!U&&(U==null?void 0:U.indexOf(S))!==-1,W=!!N&&(N==null?void 0:N.indexOf(S))!==-1,J=H||W,q=J?void 0:Me=>this.onTokenMouseDown(Me,S),ie=J?void 0:()=>this.renderTokenRemoveIcon(S),Te=oe;return t.createElement(t.Fragment,null,t.createElement(v.A,I({"data-qa":"multi_select_token_wrapper",className:"c-multi_select_input__token"},q?{onMouseDown:q}:{},{isDisabled:J,entityId:Y,label:Q,hoverText:Z,isLoading:ee,isError:_e,isMemberError:Ee,isTeamError:G,isUnknown:Ae},oe?{size:Te}:{},{isSelected:ae},ie?{renderIcon:ie}:{},{forceRealName:de,icon:R,svgIcon:w,tabIndex:-1,contentEditable:!1},re,{disableIdParsing:ue},ce?{emailTeam:ce}:{},{isRestricted:K})),"\xA0")}renderTokenRemoveIcon(D){return t.createElement(m.A,{actionProps:M,elementType:f.ElementType.BUTTON},t.createElement(p.A,{type:"times-medium",className:"c-multi_select_input__remove_token",id:"multi_select_input__remove_token","data-qa":"token_remove_icon","aria-hidden":"true",onMouseDown:(0,c.A)(S=>{this.onTokenRemoveMouseDown(S,D)})}))}renderTokens(){const{selectedOptions:D}=this.props.selectState;return D==null?void 0:D.map((S,R)=>t.createElement(t.Fragment,{key:S.key||S.value},this.renderToken(S,R)))}renderEditableTokens(){const{isCurrentlyEditingToken:D,editTokenIndex:S}=this.state,R=this.renderTokens()||[],w=this.renderFilterQuery();return D?R.splice(S,0,w):R==null||R.push(w),R}renderIcon(){const{iconType:D}=this.props;return D?t.createElement(p.A,{type:D,inline:!0}):null}render(){const{maxHeight:D,width:S,selectState:R,classPrefix:w,size:Y}=this.props,{isDisabled:Q,isInvalid:Z,selectedOptions:ee}=R,_e=ee==null?void 0:ee.length,Ee=(0,n.A)("c-multi_select_input",{"c-multi_select_input--disabled":Q,"c-multi_select_input--focused":this.state.focused&&!Q,"c-multi_select_input--large":Y===A.hu.LARGE,"c-multi_select_input--invalid":Z,"c-multi_select_input--initial":!_e,[`${w}__multi_select_input`]:w}),G=Q?void 0:this.onInputContainerMouseDown;return t.createElement("div",{className:Ee,style:{width:S,maxHeight:D},onMouseDown:G,key:this.state.selectContainerKey},this.renderIcon(),this.renderInput(),this.renderLoadingIndicator(),this.renderPlaceholder())}constructor(D){super(D),(0,E.v)(this,["onFocus","onBlur","onChange","onPaste","onKeyDown","onKeyUp","onInputContainerMouseDown","onFilterQueryMouseDown","onPlaceholderMouseDown","onSelectionChange","onCut","onMutation","onNodeRemoved","onNodeAdded","onCompositionStart","onCompositionEnd"]);var S;this.state={composing:!1,focused:!1,selectContainerKey:Date.now(),isCurrentlyEditingToken:!1,editTokenIndex:0,ignoreSelectAllTokensAfterMount:(S=D.ignoreSelectAllTokensAfterMount)!==null&&S!==void 0?S:!1},this.caretPosInFilterQuery=-1,this.ignoreSelectionChange=!1,this.updateSelectionOnKeyUp=!1,D.measurePopoverEventName&&(this.measurePopoverEvent=new Event(D.measurePopoverEventName));var R;this.forceRenderSelectContainerThrottled=(0,r.A)(this.forceRenderSelectContainer,(R=D.forceRenderSelectContainerThrottleRate)!==null&&R!==void 0?R:L,x),this.filterQueryRef=t.createRef()}},"MultiSelectInput");F.displayName="MultiSelectInput",F.defaultProps={inputRef:t.createRef(),maxHeight:96,placeholderText:void 0,onKeyDown:o.A,onKeyUp:o.A,size:A.hu.MEDIUM,width:300,isLoading:!1,classPrefix:void 0,selectDataQa:void 0,focusOnMount:!1,measurePopoverEventName:null,onSelectedItemsChange:o.A,onFilterQueryChange:o.A,onFilterQueryPaste:o.A,ariaLabelledBy:void 0,ariaLabel:void 0,expandOnFocus:!1,onTokenSelect:o.A,onInputFocused:o.A,forceRealName:void 0,onOptionsListClose:o.A,processOptions:B=>u.S.resolve(B),isTokenEditable:!1,hideFilterQueryOnBlur:!0,autoClogProps:void 0,customizeTokenProps:{},iconType:void 0,disableIdParsing:!1,hasKeyboardFocus:!1,onFocus:o.A,onBlur:o.A,onOptionsListClosedBlur:o.A,ignoreSelectAllTokensAfterMount:!1,throttleForceRenderSelectContainer:!1,forceRenderSelectContainerThrottleRate:L};const V=(0,d.A)((0,i.A)(F))},636931:(j,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(296540),n=e(730563),s=e(649098);const a=new s.Ay("form_inputs"),r=l(o=>{let{count:u,clientTheme:m,spinnerSize:i="large"}=o;return t.createElement("div",{className:"c-multi_select_helper_text c-multi_select_helper_text--loading"},t.createElement("span",{className:"c-multi_select_helper_text__icon_container"},t.createElement(n.A,{color:m==="dark"?"white":"blue",size:i,inline:!0})),a.t("Loading {count, plural, =1 {# entry} other {# entries}}",{count:u}))},"MultiSelectLoadingText")},399169:(j,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(296540),n=e(616125),s=e(649098);const a=new s.Ay("form_inputs"),r=l(o=>{let{count:u}=o;return t.createElement("div",{className:"c-multi_select_helper_text"},t.createElement("span",{className:"c-multi_select_helper_text__icon_container c-multi_select_helper_text__icon_container--unknown"},t.createElement(n.A,{name:"emoji-missing",variation:"filled",inline:!0})),a.t("{count, plural, =1 {# entry has} other {# entries have}} multiple matches. Select entry to resolve.",{count:u}))},"MultiSelectUnknownText")},777995:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>M});var t=e(296540),n=e(528919),s=e(21879),a=e(42302),c=e(110010),r=e(730563),o=e(820709),u=e(229513),m=e(372069),i=e(861621),d=e(616125),_=e(131606),h=e(649098),p=e(398958);function A(){return A=Object.assign||function(C){for(var P=1;P<arguments.length;P++){var L=arguments[P];for(var x in L)Object.prototype.hasOwnProperty.call(L,x)&&(C[x]=L[x])}return C},A.apply(this,arguments)}l(A,"_extends");const v=new h.Ay("select"),E=1e4,f={ArrowLeft:!0,ArrowRight:!0},g={ArrowUp:!0,ArrowDown:!0},y={Backspace:!0,Delete:!0};let I=l(class extends t.Component{componentDidMount(){const{inputRef:P,focusOnMount:L,expandOnFocus:x}=this.props,F=P&&P.current;L&&(!this.state.hasFocus&&F&&F.focus(),x&&this.showOptionsList())}componentDidUpdate(P,L){const{inputRef:x,selectState:F,focusOnMount:V}=this.props,{selectedOption:B}=F,{selectState:D}=P,{selectedOption:S}=D,R=x&&x.current,{hasFocus:w,focusedViaMouse:Y}=this.state;B&&w&&!Y&&(B!==S||!L.hasFocus)&&setTimeout(()=>{R==null||R.select()},50),V&&P.focusOnMount!==V&&(this.state.hasFocus||R==null||R.focus())}componentWillUnmount(){this.blurTimeout&&clearTimeout(this.blurTimeout)}onClick(P){const{inputRef:L,selectState:x,onClick:F,expandOnClick:V,searchOnClick:B}=this.props,{isDisabled:D,isExpanded:S,selectedOption:R}=x;if(D)return;const w=L&&L.current;this.state.hasFocus||(this.setState(()=>({focusedViaMouse:!0})),w==null||w.focus()),(V||R)&&!S&&this.showOptionsList({searchOnClick:B}),F&&F(P)}onBlur(P){const{onBlur:L}=this.props;this.setState(()=>({hasFocus:!1,focusedViaMouse:!1,cursorVisible:!1}),()=>{L&&L(P)})}onFocus(P){const{onFocus:L}=this.props;this.setState(()=>({hasFocus:!0}),()=>{L&&L(P)})}onInputChanged(P){const{selectState:L,setSelectState:x,expandOnClick:F,retainPreviousSelectionOnDelete:V}=this.props,{isExpanded:B,selectedOption:D}=L;if(this.backspaceOrDeletePressed&&P.length===0&&D){x(()=>({filterQuery:P,displayQuery:P,...V?{}:{selectedOption:null}}));return}B?!F&&!P&&x(()=>({isExpanded:!1})):this.showOptionsList(),x(()=>({filterQuery:P,displayQuery:P}))}onKeyPressedEnter(P){this.props.selectState.isExpanded?P.preventDefault():(this.showOptionsList(),P.stopPropagation())}onKeyPressedEscape(P){const{selectState:L,setSelectState:x,resultsInPopover:F,onEsc:V,onOptionsListClose:B}=this.props;L.isExpanded&&F&&(P.stopPropagation(),V&&V(),B&&B(),x(()=>({isExpanded:!1})))}onKeyPressedTab(){const{setSelectState:P,onOptionsListClose:L,selectState:x}=this.props;L&&L();const{activeRowIndex:F,initialActiveOption:V}=x;typeof F!="number"&&!V&&P(()=>({isExpanded:!1}))}onUpOrDownPressed(P){P.preventDefault(),this.props.selectState.isExpanded||(this.showOptionsList(),P.stopPropagation())}onWrapperKeyDown(P){const{key:L}=P;if(g[L]){this.onUpOrDownPressed(P);return}if(L==="Enter"){this.onKeyPressedEnter(P);return}if(L==="Escape"){this.onKeyPressedEscape(P);return}L==="Tab"&&this.onKeyPressedTab()}onInputKeyDown(P){const{key:L}=P,x=y[L],F=f[L],V=x||F||(0,p.A)(P);this.setState(()=>({cursorVisible:V})),this.backspaceOrDeletePressed=x}maybeRenderIconOrLoading(){const{showDropdownIcon:P,isLoading:L,size:x,expandOnClick:F}=this.props;return L?t.createElement(r.A,{className:"c-select_input__spinner",color:"blue",size:x===i.hu.LARGE?"large":"medium"}):!P||!F?null:t.createElement("span",{className:"c-select_input__icon"},t.createElement(d.A,{name:"caret-down",size:"20"}))}showOptionsList(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{searchOnClick:L}=P;this.updateOptionsListPosition(),this.props.setSelectState(()=>({isExpanded:!0,searchOnClick:L}))}updateOptionsListPosition(){const{selectState:P}=this.props,{isExpanded:L}=P;if(!L&&this.measurePopoverEvent){var x;(x=this.context.windowRef.deref())===null||x===void 0||x.dispatchEvent(this.measurePopoverEvent)}}renderInputContent(){const{selectState:P,renderSelectedOption:L,classPrefix:x,selectDataQa:F,hideSelectedOptionOnDropdownOpen:V}=this.props,{isExpanded:B,selectedOption:D}=P;if(this.state.cursorVisible||!D||B&&(V||P.filterQuery))return null;const S=(0,n.A)("c-select_input__content",{[`${x}__select_input_content`]:x});return t.createElement("div",{className:S,"data-qa":F?`${F}-input-content`:null},t.createElement("span",{className:"c-select_input__content_text"},L&&L(D)))}renderTextInput(){const{selectDataQa:P,inputRef:L,classPrefix:x,ariaLabelledBy:F,ariaDescribedBy:V,icon:B,maxCharacterLimit:D,size:S,selectState:R,autoClogProps:w,hideSelectedOptionOnDropdownOpen:Y}=this.props,{activeRowIndex:Q,filterQuery:Z,isDisabled:ee,isExpanded:_e,isInvalid:Ee,isRequired:G,selectedOption:Ae,selectId:ce=""}=R;let de;Z||!_e&&Ae||Ae&&_e&&!Y?de=null:de=this.props.placeholderText||v.t("Please select an option");const oe=_e&&(0,s.A)(Q)?(0,o.Es)(ce,`option_${Q}`):null,$=!this.state.cursorVisible&&Ae&&!_e,re=(0,n.A)("c-select_input",{"c-select_input--offscreen":$,"c-select_input--invalid":Ee,[`${x}__select_input`]:x}),ue=(0,o.Yk)([V,(0,o.Es)(ce,"initial-focus")]),ae=!this.state.focusedViaMouse&&this.state.hasFocus&&!this.state.cursorVisible&&Y?Z||Ae&&Ae.label:Z,H={spellCheck:!1,className:re,id:ce,name:ce,"aria-activedescendant":oe,"aria-autocomplete":"list","aria-expanded":_e,"aria-owns":(0,o.Es)(ce,"listbox"),"aria-required":G,"aria-label":this.props["aria-label"],"aria-labelledby":F,"aria-describedby":ue,isInvalid:Ee,autoComplete:"off",isDisabled:ee,onChange:this.onInputChanged,placeholder:de,value:ae||"","data-qa":P?`${P}-input`:null,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onInputKeyDown,role:"combobox",autoClogProps:w};return B||D?t.createElement(u.A,A({},H,{icon:B,size:S,maxCharacterLimit:D,showError:!1,type:"text",inputRef:L,isInvalid:Ee})):t.createElement(m.A,A({},H,{ref:L}))}render(){const{icon:P,size:L,selectDataQa:x,width:F,classPrefix:V,showDropdownIcon:B,selectState:D}=this.props,{isInvalid:S}=D,R=(0,n.A)("c-select_input__wrapper",{[`c-select_input--${L}`]:L,"c-select_input--with_icon_right":B,"c-select_input--with_icon_left":!!P,"c-select_input--invalid":S,[`${V}__select_input_wrapper`]:V}),w=(0,n.A)("c-select_input__input_container",{[`${V}__select_input_container`]:V});return t.createElement("div",{role:"presentation",className:R,style:{width:F},onClick:this.onClick,onKeyDown:this.onWrapperKeyDown,"data-qa":x?`${x}-wrapper`:null},t.createElement("div",{className:w},this.renderTextInput(),this.renderInputContent()),t.createElement("div",{className:"c-select_input__icon_container"},this.maybeRenderIconOrLoading()))}constructor(P){super(P),(0,_.v)(this,["onClick","onFocus","onBlur","onUpOrDownPressed","onKeyPressedEnter","onKeyPressedEscape","onKeyPressedTab","onWrapperKeyDown","onInputKeyDown","onInputChanged","showOptionsList","updateOptionsListPosition"]),this.selectInputRef=t.createRef(),this.backspaceOrDeletePressed=!1,this.measurePopoverEvent=void 0,this.blurTimeout=void 0,this.state={hasFocus:!1,focusedViaMouse:!1,cursorVisible:!1},P.measurePopoverEventName&&(this.measurePopoverEvent=new Event(P.measurePopoverEventName))}},"SelectInput");I.displayName="SelectInput",I.defaultProps={autoClogProps:void 0,inputRef:null,onClick:a.A,placeholderText:void 0,width:360,selectDataQa:void 0,showDropdownIcon:!0,icon:void 0,maxCharacterLimit:void 0,focusOnMount:!1,isLoading:!1,classPrefix:void 0,onFocus:a.A,onBlur:a.A,onEsc:a.A,resultsInPopover:!0,ariaLabelledBy:void 0,ariaDescribedBy:void 0,onOptionsListClose:a.A,expandOnClick:!0,searchOnClick:!1,expandOnFocus:!0,hideSelectedOptionOnDropdownOpen:!0},I.contextType=c.M;const O={SelectInput:I},M=I},562583:(j,T,e)=>{"use strict";e.d(T,{A:()=>N});var t=e(296540),n=e(528919),s=e(36545),a=e.n(s),c=e(661625),r=e(120694),o=e(42302),u=e(21879),m=e(877500),i=e(739529),d=e(46996),_=e(446632),h=e(64741),p=e(729023),A=e(183113),v=e(76084),E=e(110010),f=e(730563),g=e(820709),y=e(861621),I=e(418139),O=e(726666),M=e(999882);function C(K){let W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(0,I.A)(K,(q,ie)=>{if(q.type==="divider")return{type:"divider"};if(q.options){const{options:Te,label:Me,...ke}=q,Pe=`${q.label.toLowerCase()}${y.Sx}${(0,M.A)()}`,Ie=[{type:"heading",label:q.label,group:Pe,optionsCount:q.options&&q.options.length||0,extras:ke}].concat(q.options.map((X,ne)=>{const fe={type:"option",option:X,optgroup:Pe};return ne===0&&(fe.isFirstChild=!0),ne===q.options.length-1&&(fe.isLastChild=!0),fe}));if(W){if(K[ie-1]&&K[ie-1].value&&!K[ie-1].options&&Ie.unshift({type:"divider"}),(0,O.A)(K)===q)return Ie;Ie.push({type:"divider"})}return Ie}return{type:"option",option:q}})}l(C,"formatOptions");var P=e(131606),L;(function(K){K[K.ELEMENT=1]="ELEMENT",K[K.ATTRIBUTE=2]="ATTRIBUTE",K[K.TEXT=3]="TEXT",K[K.CDATA_SECTION=4]="CDATA_SECTION",K[K.ENTITY_REFERENCE=5]="ENTITY_REFERENCE",K[K.ENTITY=6]="ENTITY",K[K.PROCESSING_INSTRUCTION=7]="PROCESSING_INSTRUCTION",K[K.COMMENT=8]="COMMENT",K[K.DOCUMENT=9]="DOCUMENT",K[K.DOCUMENT_TYPE=10]="DOCUMENT_TYPE",K[K.DOCUMENT_FRAGMENT=11]="DOCUMENT_FRAGMENT",K[K.NOTATION=12]="NOTATION"})(L||(L={}));const x=new Set(["INPUT","TEXTAREA","SELECT"]),F=new Set([...x,"BUTTON"]),V="http://www.w3.org/1999/xhtml",B="http://www.w3.org/2000/svg";function D(K){return(K==null?void 0:K.nodeType)===L.TEXT}l(D,"isTextNode");function S(K){return(K==null?void 0:K.nodeType)===L.ELEMENT}l(S,"isElement");function R(K){return S(K)&&K.namespaceURI===V}l(R,"isHtmlElement");function w(K){return S(K)&&K.namespaceURI===B}l(w,"isSvgElement");function Y(K){return R(K)||w(K)}l(Y,"isHtmlOrSvgElement");function Q(K){return R(K)||w(K)}l(Q,"isElementCssInlineStyle");function Z(K){return _e(K,"a")}l(Z,"isAnchorElement");function ee(K){return R(K)&&F.has(K.tagName)}l(ee,"isInteractiveElement");function _e(K,W){return R(K)&&K.localName===W}l(_e,"isHtmlElementWithTagName");function Ee(K){return D(K)?K:null}l(Ee,"asTextNode");function G(K){return S(K)?K:null}l(G,"asElement");function Ae(K){return R(K)?K:null}l(Ae,"asHtmlElement");function ce(K,W){const J=K;return J.hasAttribute&&J.hasAttribute(W)}l(ce,"hasAttribute");function de(K,W){return ce(K,`data-${W}`)}l(de,"hasData");var oe=e(649098),$=e(342584),re=e(516063),ue=e(823650);function te(){return te=Object.assign||function(K){for(var W=1;W<arguments.length;W++){var J=arguments[W];for(var q in J)Object.prototype.hasOwnProperty.call(J,q)&&(K[q]=J[q])}return K},te.apply(this,arguments)}l(te,"_extends");const ae=new oe.Ay("select"),H=a()("esc");let U=l(class extends re.B{getCurrentActiveElement(){var W,J;return(J=(W=this.context.windowRef.deref())===null||W===void 0?void 0:W.document.activeElement)!==null&&J!==void 0?J:null}componentDidUpdate(W){var J;const{selectState:q,setSelectState:ie,shouldIncludeActiveOption:Te=!1,dynamicHeight:Me=!1,optionsShallowEqualComparisonDepth:ke=4,shouldRerenderOnOptionChange:Pe=!1}=this.props,{filterQuery:Ie,options:X,initialActiveOption:ne}=q,fe=!(0,ue.Ay)(W.selectState.options,X,ke),be=Ie!==W.selectState.filterQuery;if(fe||be){const Re=typeof ne<"u"?this.getInitialActiveRowIndex():this.getFirstSelectableRowIndex();ie(()=>({activeRowIndex:Re,...Te?{activeOption:this.getOptionFromList(Re)}:null}));const ve=Re||Re===0;this.list.current&&ve&&(this.list.current.forceUpdateGrid(),this.list.current.scrollToRow(Re))}if(fe&&!be&&Pe){var Be;(Be=this.list.current)===null||Be===void 0||Be.recomputeRowHeights()}if(Me&&(q==null?void 0:q.options)!==((J=W.selectState)===null||J===void 0?void 0:J.options)){var We;(We=this.cellMeasurerCache)===null||We===void 0||We.clearAll(),this.list.current&&this.list.current.recomputeRowHeights()}this.removeAriaAttrsFromGridNode()}clearDynamicRowHeight(W){var J;(J=this.cellMeasurerCache)===null||J===void 0||J.clear(W,0),this.list.current&&this.list.current.recomputeRowHeights(W)}getInitialActiveRowIndex(){const{selectState:W}=this.props,{initialActiveOption:J}=W;if(!J)return null;const q=(0,c.A)(this.getOptionsList(),["option.value",J.value]);return q>=0?q:null}getFirstSelectableRowIndex(){const{selectState:W,multiSelectMode:J=!1,customOptionCompare:q,shouldAlwaysHaveActiveRow:ie=!1}=this.props,{filterQuery:Te}=W,Me=this.getOptionsList();let ke=null;if((Te||ie)&&Me.length){const Pe=(0,c.A)(Me,Ie=>Ie.type!=="heading"&&Ie.type!=="divider"&&!this.isOptionSelected(W,Ie.option,J,q),0);Pe!==-1&&(ke=Pe)}return ke}componentDidMount(){this.keyCommands=this.initKeyCommands();const{focusOnMount:W=!1,selectState:J,setSelectState:q,shouldIncludeActiveOption:ie=!1,multiSelectMode:Te=!1}=this.props,{selectedOption:Me,selectType:ke}=J;ke===y.US.BASIC&&W&&this.open();let Pe=null;if(!Te&&Me){const Ie=(0,c.A)(this.getOptionsList(),["option.value",Me.value]);Ie!==-1&&(Pe=Ie)}else Pe=this.getFirstSelectableRowIndex();q(()=>({activeRowIndex:Pe,...ie?{activeOption:this.getOptionFromList(Pe)}:null})),this.list.current&&typeof Pe=="number"&&this.list.current.scrollToRow(Pe),this.removeAriaAttrsFromGridNode()}componentWillUnmount(){const{focusOnMount:W=!1,preventScroll:J=!1}=this.props,{selectType:q}=this.props.selectState;this.keyCommands&&this.keyCommands.reset(),W&&q===y.US.BASIC&&this.previousFocus&&this.getCurrentActiveElement()!==this.previousFocus&&this.previousFocus.focus({preventScroll:J})}open(){const{focusOnMount:W=!1,selectState:J}=this.props,{selectType:q}=J;!W&&q!==y.US.BASIC||(this.previousFocus=this.getCurrentActiveElement(),this.listBody&&this.listBody.current&&this.listBody.current.focus())}close(W){H===W.keyCode&&this.onKeyPressedEsc(W);const{focusOnMount:J=!1,preventScroll:q=!1}=this.props,{selectType:ie}=this.props.selectState;!J&&ie!==y.US.BASIC||this.previousFocus&&this.getCurrentActiveElement()!==this.previousFocus&&this.previousFocus.focus({preventScroll:q})}onKeyPressedDown(W){if(this.isMouseMoveEnabled=!1,!this.shouldInterceptKeyEvent(W))return;const{selectState:J,setSelectState:q,shouldIncludeActiveOption:ie=!1}=this.props,{isExpanded:Te,activeRowIndex:Me}=J,ke=this.getNextActiveRowIndex(Me);Te&&W.preventDefault(),q(()=>{var Pe;return{activeRowIndex:ke,...ie?{activeOption:this.getOptionFromList(ke)}:null,displayQuery:(Pe=this.getOptionFromList(ke))===null||Pe===void 0?void 0:Pe.value}}),this.debouncedEnableMouseMove(),this.list.current&&(this.list.current.forceUpdateGrid(),ke===1&&this.isFirstItemUnselectable()?this.list.current.scrollToRow(0):this.list.current.scrollToRow(ke))}onKeyPressedUp(W){if(this.isMouseMoveEnabled=!1,!this.shouldInterceptKeyEvent(W))return;const{selectState:J,setSelectState:q,shouldIncludeActiveOption:ie=!1}=this.props,{isExpanded:Te,activeRowIndex:Me}=J,ke=this.getPreviousActiveRowIndex(Me);if(Te&&W.preventDefault(),q(()=>{var X;return{activeRowIndex:ke,...ie?{activeOption:this.getOptionFromList(ke)}:null,displayQuery:(X=this.getOptionFromList(ke))===null||X===void 0?void 0:X.value}}),this.debouncedEnableMouseMove(),this.list.current){this.list.current.forceUpdateGrid();const X=this.getOptionsList();if(ke){var Pe,Ie;if(((Pe=X[ke])===null||Pe===void 0||(Ie=Pe.option)===null||Ie===void 0?void 0:Ie.height)!==0)this.list.current.scrollToRow(ke);else{const ne=(0,r.A)(X.slice(0,ke)).findIndex(fe=>{var be;return(fe==null||(be=fe.option)===null||be===void 0?void 0:be.height)!==0});this.list.current.scrollToRow(ke-ne-1)}}}}onKeyPressedEsc(W){const{shouldIncludeActiveOption:J=!1}=this.props;if(!this.props.selectState.isExpanded||!this.shouldInterceptKeyEvent(W))return;W.preventDefault();const{onOptionsListClose:q=o.A}=this.props;q&&q(),this.props.setSelectState(()=>({isExpanded:!1,activeRowIndex:null,...J?{activeOption:null}:null,filterQuery:"",displayQuery:""}))}onMouseEnteredOption(W){const{shouldIncludeActiveOption:J=!1}=this.props;this.isMouseMoveEnabled&&(this.props.setSelectState(()=>({activeRowIndex:W,...J?{activeOption:this.getOptionFromList(W)}:null})),this.list.current&&this.list.current.forceUpdateGrid())}onMouseLeftOption(){const{shouldAlwaysHaveActiveRow:W=!1}=this.props;!this.isMouseMoveEnabled||W||this.clearActive()}onKeyPressedEnter(W){if(this.props.shouldDisableKeyPressedEnter||!this.shouldInterceptKeyEvent(W))return;W.preventDefault();const{activeRowIndex:J,initialActiveOption:q}=this.props.selectState,ie=this.getOptionsList();let Te;typeof J=="number"&&(Te=ie[J]&&ie[J].option||ie[J]),Te=Te||q,!(Te&&(Te.isDisabled||Te.nonInteractive))&&(this.onOptionSelected(Te),this.close(W))}onKeyPressedShiftTab(W){if(!this.shouldInterceptKeyEvent(W))return;const{onKeyPressedShiftTab:J=o.A}=this.props;J&&J!==o.A&&J(W)}onKeyPressedTab(W){const{selectState:J,disableSelectOnTab:q=!1}=this.props;if(q||!this.shouldInterceptKeyEvent(W)||!J.isExpanded)return;const{onKeyPressedTab:ie=o.A}=this.props;if(ie&&ie!==o.A){ie(W);return}const{activeRowIndex:Te,initialActiveOption:Me}=J,ke=this.getOptionsList();let Pe;typeof Te=="number"&&(Pe=ke[Te]&&ke[Te].option||ke[Te]),Pe=Pe||Me,Pe&&W.preventDefault(),!(Pe&&(Pe.isDisabled||Pe.nonInteractive))&&this.onOptionSelected(Pe)}onOptionClicked(W){this.onOptionSelected(W,!0)}onScroll(W){const{onScroll:J=o.A}=this.props;J&&J(W)}getClassName(W,J){const{unstyled:q=!1}=this.props;return q&&J?(0,n.A)(J):(0,n.A)(J,W)}getRowHeight(W){var J;const{optionsRowHeight:q=y.bJ,headingRowHeight:ie=null,dividerRowHeight:Te=y.r3}=this.props;return W.option&&(0,u.A)(W.option.height)?Number(W.option.height):W.type&&W.type==="divider"?Te:W.type==="heading"&&(0,u.A)((J=W.extras)===null||J===void 0?void 0:J.height)?Number(W.extras.height):W.type&&W.type==="heading"&&ie!==null?ie:q}clearActive(){const{shouldIncludeActiveOption:W=!1}=this.props;this.props.setSelectState(()=>({activeRowIndex:null,...W?{activeOption:null}:null})),this.list.current&&this.list.current.forceUpdateGrid()}focusNode(W){W&&this.getCurrentActiveElement()!==W&&W.focus()}getOptionFromList(W){const J=this.getOptionsList();return(0,m.A)(J,`[${W}].option`,null)}getOptionsList(){const{multiSelectMode:W=!1,selectState:J,includeDividers:q=!0}=this.props,{options:ie,isRequired:Te,selectedOption:Me,filterQuery:ke,minQueryLength:Pe}=J;let Ie=[];return Pe&&Pe>0&&Me&&!ke&&(Ie=[Me]),ie&&(!W&&Me&&!Te?Ie=[y.az,...ie]:Ie=ie),Ie=[...this.formatOptions(Ie,q)],Ie}enableMouseMove(){this.isMouseMoveEnabled=!0}getDataQaTag(W,J){const{selectDataQa:q=void 0,selectState:ie}=this.props,{isRequired:Te}=ie,Me=W.value?W.value:W.label;let ke="";typeof Me=="string"&&(ke=Me.replace(/[^\w\s]/g,"").replace(/\s/g,"_").toLowerCase());const Pe=Te?J:J-1;return W.value?`${q}_option_${Pe}`:`${q}_option_header_${ke}`}isFirstItemUnselectable(){var W,J,q;const ie=this.getOptionsList();return((W=ie[0])===null||W===void 0?void 0:W.type)==="heading"||((J=ie[0])===null||J===void 0||(q=J.option)===null||q===void 0?void 0:q.nonInteractive)}getNextActiveRowIndex(W){const J=this.getOptionsList(),q=this.isFirstItemUnselectable();if(W===null&&!q)return 0;if(W===null&&q)return 1;let ie=null;return typeof W=="number"&&(ie=(0,c.A)(J,Te=>{var Me;return Te.type!=="heading"&&Te.type!=="divider"&&!(!(Te==null||(Me=Te.option)===null||Me===void 0)&&Me.nonInteractive)},W+1)),typeof ie=="number"&&J[ie]?ie:q?1:0}getPreviousActiveRowIndex(W){const J=this.getOptionsList();let q,ie;return typeof W=="number"&&(q=(0,r.A)(J.slice(0,W)).findIndex(Te=>{var Me;return Te.type!=="heading"&&Te.type!=="divider"&&!(!(Te==null||(Me=Te.option)===null||Me===void 0)&&Me.nonInteractive)}),ie=W-q-1),J&&!J.length?null:ie===W?J.length-1:typeof ie=="number"&&typeof W=="number"&&J[ie]&&W>0?ie:J.length-1}initKeyCommands(){var W;const{shouldTokenizeOnComma:J,shouldTokenizeOnSpace:q}=this.props,ie=new A.A((W=this.context.windowRef.deref())===null||W===void 0?void 0:W.document),Te=["enter"];return J&&Te.push("comma"),q&&Te.push("space"),ie.bindAll([{keys:["down"],handler:this.onKeyPressedDown},{keys:Te,handler:this.onKeyPressedEnter,filter:Me=>Me.code.toLowerCase()==="comma"&&Me.key!==","},{keys:["up"],handler:this.onKeyPressedUp},{keys:["tab"],handler:this.onKeyPressedTab},{keys:["shift+tab"],handler:this.onKeyPressedShiftTab}]),ie}handleClear(){const{selectState:W,setSelectState:J,onOptionSelected:q=o.A,multiSelectMode:ie=!1,onMultiSelectClear:Te=void 0}=this.props,{selectedOption:Me,selectedOptions:ke}=W;let Pe=!1;Me?(J(()=>({selectedOption:null,isExpanded:!1,filterQuery:"",displayQuery:""}),()=>{q&&q({value:null})}),Pe=!0):ie&&ke&&ke.length&&(J(()=>({selectedOptions:[],isExpanded:!1,filterQuery:"",displayQuery:""}),()=>{Te&&Te()}),Pe=!0),this.list.current&&Pe&&this.list.current.forceUpdateGrid()}onOptionSelected(W){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{onOptionSelected:q=o.A,onOptionUnselected:ie=o.A,selectState:Te,setSelectState:Me,multiSelectMode:ke=!1,inputRef:Pe,customOptionCompare:Ie,shouldIncludeActiveOption:X=!1,shouldOptionBeSelected:ne,shouldAllowUnselectInMultiSelectMode:fe=!1,shouldAllowUnselectInSingleSelectMode:be=!0,stayExpandedAfterSelection:Be=!1}=this.props;if(W&&!W.isDisabled&&!W.nonInteractive){if(ne&&ne(W)===!1){Me(()=>({activeRowIndex:null,filterQuery:"",isExpanded:!1}),()=>{q(W)});return}if(W.value===y.yk)this.handleClear();else if(ke){const{selectedOptions:We,shouldRefocusInputAfterSelection:Re}=Te;if(!this.isOptionSelected(Te,W,ke,Ie)&&We)Me(()=>({selectedOptions:[...We,W],activeRowIndex:null,...X?{activeOption:null}:null,filterQuery:"",isExpanded:Be}),()=>{q&&q(W)});else if(fe){const xe=(0,i.A)(We,[W],(He,je)=>He.value===je.value);Me(()=>({selectedOptions:xe,activeRowIndex:null,...X?{activeOption:null}:null,filterQuery:"",isExpanded:Be}),()=>{ie&&ie(W)})}!Re&&!W.fromUnknown&&Pe&&Pe.current&&Pe.current.focus()}else{const We={isExpanded:!1,filterQuery:"",displayQuery:"",selectedOption:be?null:Te.selectedOption};!(0,d.A)(Te.selectedOption,W)&&(We.selectedOption=W),Me(()=>We,()=>{q&&q(W,J)}),Te.shouldRefocusInputAfterSelection&&Pe&&Pe.current&&Pe.current.focus()}}}getArialabelForItem(W){var J,q,ie,Te;const{isFirstChild:Me,isLastChild:ke,optgroup:Pe}=W;if(!Pe)return null;const Ie=ae.t("First item in group {group}, {value}",{group:Pe&&Pe.split(y.Sx).slice(0,-1).join("-"),value:typeof((J=W.option)===null||J===void 0?void 0:J.label)=="string"?(q=W.option)===null||q===void 0?void 0:q.label:""}),X=ae.t("Last item in group {group}, {value}",{group:Pe&&Pe.split(y.Sx).slice(0,-1).join("-"),value:typeof((ie=W.option)===null||ie===void 0?void 0:ie.label)=="string"?(Te=W.option)===null||Te===void 0?void 0:Te.label:""});return Me?Ie:ke?X:null}getEmptyStateMessage(){const{emptyStateMessage:W,selectState:J}=this.props,{filterQuery:q,minQueryLength:ie}=J;if(W)return W(q);if(ie){if(!q)return ae.t("Type to search\u2026");if(q.length<ie)return ae.t("Keep typing\u2026")}return ae.t("No items")}shouldInterceptKeyEvent(W){return!W.target||!S(W.target)?!1:!!(ce(W.target,"aria-autocomplete")||ce(W.target,"aria-haspopup")||this.listBody.current&&this.listBody.current.contains(W.target))}removeAriaAttrsFromGridNode(){const W=this.listBody.current,J=W&&W.querySelector(".ReactVirtualized__Grid");J&&(J.removeAttribute("aria-label"),J.removeAttribute("aria-readonly"))}renderEmptyState(){const{unstyled:W=!1,width:J,isLoading:q=!1,selectDataQa:ie=void 0,includeWrapper:Te=!0}=this.props;if(q)return t.createElement(t.Fragment,null);const Me=this.getEmptyStateMessage();if(Me===null)return t.createElement(t.Fragment,null);const ke=W||!Te?+J:+J-y.$_;return t.createElement("div",{"data-qa":ie?`${ie}-empty-state`:null,className:this.getClassName("c-select_options_list__empty_state"),style:{width:ke}},t.createElement("div",{role:"alert",className:this.getClassName("c-select_options_list__option c-select_options_list__option--empty-state")},Me))}getContainerStyle(){return{position:"relative",overflow:"visible"}}getListStyle(W){return{padding:W?y.Hy:void 0,boxSizing:"content-box"}}renderList(){const{maxListHeight:W,width:J,includePadding:q,unstyled:ie=!1,useSlackScrollbar:Te,dynamicHeight:Me=!1,forceMaxHeight:ke,includeWrapper:Pe=!0,classPrefix:Ie=void 0}=this.props,X=this.getOptionsList(),ne=W||y.CK,fe=X.map(ve=>this.getRowHeight(ve)||0).reduce((ve,xe)=>ve+xe,0),be=ke||fe>=ne?ne:fe,Be=ie||!Pe?+J:+J-y.$_,We=(0,n.A)("c-select_options_list__virtual_list",{"c-select_options_list__virtual_list--slack_scrollbar":Te,[`${Ie}__virtual_list`]:!!Ie}),Re=Me&&this.cellMeasurerCache?this.cellMeasurerCache.rowHeight:ve=>{let{index:xe}=ve;return this.getRowHeight(X[xe])};return this.cellMeasurerCache?t.createElement(v.O,{className:We,containerRole:"presentation",containerStyle:this.getContainerStyle(),style:this.getListStyle(q),height:be,deferredMeasurementCache:this.cellMeasurerCache,noRowsRenderer:this.renderEmptyState,onScroll:this.debouncedOnScroll,ref:this.list,rowCount:X?X.length:0,rowHeight:Re,rowRenderer:this.renderRow,tabIndex:null,role:"presentation","no-bootstrap":1,width:Be}):t.createElement(v.O,{className:We,containerRole:"presentation",containerStyle:this.getContainerStyle(),style:this.getListStyle(q),height:be,noRowsRenderer:this.renderEmptyState,onScroll:this.debouncedOnScroll,ref:this.list,rowCount:X?X.length:0,rowHeight:Re,rowRenderer:this.renderRow,tabIndex:null,role:"presentation","no-bootstrap":1,width:Be})}renderListBody(){const{enableLoadingState:W=!0,isLoading:J=!1}=this.props;if(J&&W)return this.renderLoadingState();const q=this.getOptionsList();return!q||q&&!q.length?this.renderEmptyState():this.renderList()}renderLoadingState(){const{width:W}=this.props,J=ae.t("Loading results\u2026");return t.createElement("div",{className:this.getClassName("c-select_options_list__loading_state"),style:{width:W}},t.createElement(f.A,{size:"medium",inline:!0}),t.createElement("div",null,J))}renderRow(W){let{index:J,key:q,style:ie,parent:Te}=W;var Me;const{classPrefix:ke=void 0,selectState:Pe,multiSelectMode:Ie=!1,customOptionCompare:X,unstyled:ne=!1,dynamicHeight:fe=!1,hideOptionsListCheckbox:be=!1}=this.props,{selectId:Be}=Pe,We=this.getOptionsList();let Re;We[J].option?Re=We[J].option:Re=We[J];const{isPlaceholder:ve}=Re,{activeRowIndex:xe}=Pe,{selectedOption:He,selectedOptions:je}=Pe;let Ke;typeof xe=="number"&&(Ke=this.isOptionActive({activeRowIndex:xe},We,Re));const ht=this.isOptionSelected({selectedOptions:je,selectedOption:He},Re,Ie,X),dt=Re.value===y.yk,Ve=We[J].type==="heading",Je=!!We[J].optgroup,Ge=We[J].type==="divider",Le=!!Re.isDisabled,Mt=!!Re.nonInteractive,Dt=ht&&!Ve&&!Ge,pt=Ve||Mt||Ge,Qt=We.filter(Zt=>Zt.type!=="heading"&&Zt.type!=="divider"&&!Zt.nonInteractive),Nt=(0,c.A)(Qt,Zt=>Zt.option===Re,0),bt=ke?`${ke}__option`:"",Yt=(0,n.A)("c-select_options_list__option",bt,(0,m.A)(Re,"overrides.className",!1),{"c-select_options_list__option--active":Ke&&(0,m.A)(Re,"overrides.useHoverStyles",!0),"c-select_options_list__option--placeholder":ve,"c-select_options_list__option--selected":Dt,"c-select_options_list__option--disabled":Le,"c-select_options_list__group_header":Ve,"c-select_options_list__group_option":Je,"c-select_options_list__divider":Ge,"c-select_options_list__clear_option":dt});let fn=dt?Re.label:t.createElement("hr",{className:this.getClassName("c-select_options__divider")});!Ge&&!dt&&(fn=this.props.renderOption(Re,{index:J,isActive:Ke,isGroupHeader:Ve,isClearOption:dt,isSelected:ht&&!Ve&&!Ge,clearDynamicRowHeight:this.clearDynamicRowHeight}));let Tt;if(ne||!((Me=Re.overrides)===null||Me===void 0)&&Me.unstyled)Tt=fn;else{var sn;Tt=t.createElement("span",{"data-qa":Re.value,className:this.getClassName("c-select_options_list__option_label",{normal_wrap:(sn=Re.extras)===null||sn===void 0?void 0:sn.forceHeaderWrap})},fn)}const mn=Qt.length,wt=Nt===-1?void 0:Nt+1,On=t.createElement("div",te({"aria-hidden":pt?"true":null,"aria-selected":Ie?ht:Ke,"aria-label":Ve?null:this.getArialabelForItem(We[J]),className:this.getClassName(Yt,bt),"data-qa":Ge?void 0:this.getDataQaTag(Re,J),id:(0,g.Es)(Be,`option_${J}`),key:q},ie?{style:ie}:{},{onClick:Le||Mt?(0,_.A)(()=>this.onOptionSelected(Re)):(0,_.A)(()=>{this.onOptionClicked(Re)}),onMouseEnter:Le||Mt?o.A:(0,_.A)(()=>{this.onMouseEnteredOption(J)}),onMouseLeave:Le||Mt?o.A:this.onMouseLeftOption,role:"option",tabIndex:-1,"data-is-active":Ke?"true":void 0,ref:Ke?this.currentRow:null,optgroup:Je?We[J].optgroup:void 0,"aria-disabled":Le||null,"aria-setsize":mn,"aria-posinset":wt}),Dt&&!be&&t.createElement("span",{className:"c-select_options_list__selected","aria-hidden":"true"}),Tt);return!fe||!this.cellMeasurerCache?On:t.createElement(p.dl,{cache:this.cellMeasurerCache,columnIndex:0,rowIndex:J,key:q,parent:Te},On)}isOptionSelected(W,J,q,ie){let{selectedOptions:Te,selectedOption:Me}=W;return q&&(!Te||Te&&!Te.length)||!q&&!Me?!1:q?!ie&&J?Te&&Te.some(ke=>ke.value===J.value):Te&&Te.some(ke=>ie({selectedOption:ke,listOption:J})):Me&&J&&Me.value===J.value}isOptionActive(W,J,q){let{activeRowIndex:ie}=W;if(!ie&&ie!==0)return!1;const Me=J[ie];return(Me&&Me.option?Me.option:Me)===q}render(){const{className:W,ariaLabel:J,classPrefix:q=void 0,multiSelectMode:ie=!1,selectDataQa:Te=void 0,selectState:Me,dropdownContainer:ke=void 0,footerBannerContent:Pe}=this.props,{isExpanded:Ie,activeRowIndex:X,selectId:ne,selectType:fe}=Me,be=(0,n.A)("c-select_options_list",{[`${q}_options_list`]:q}),Be=fe===y.US.BASIC&&Ie&&(0,u.A)(X)?(0,g.Es)(ne,`option_${X}`):void 0,We=t.createElement("div",{className:be,ref:this.listBody,"data-qa":Te?`${Te}-options-list`:null,id:(0,g.Es)(ne,"listbox"),"aria-activedescendant":Be,"aria-label":J,"aria-multiselectable":!!ie,role:"listbox",tabIndex:-1,onMouseMove:this.enableMouseMove},this.renderListBody()),{includeWrapper:Re=!0}=this.props;if(!Re)return We;const ve=(0,n.A)("c-select_options_list__wrapper",{[`${W}`]:W,[`${q}_options_list_wrapper`]:q});return t.createElement("div",te({className:this.getClassName(ve),"data-qa":Te?`${Te}-options-list-wrapper`:"sk-select-options-list-wrapper"},ke?{ref:ke}:{}),We,Pe&&t.createElement("div",{className:"c-select_options_list__footer_banner"},Pe))}constructor(W){super(W),this.isMouseMoveEnabled=!1,(0,P.v)(this,["getOptionsList","getOptionFromList","handleClear","onKeyPressedDown","onKeyPressedEnter","onKeyPressedTab","onKeyPressedShiftTab","onKeyPressedUp","onMouseLeftOption","onScroll","renderRow","clearDynamicRowHeight","initKeyCommands"]),this.listBody=t.createRef(),this.list=t.createRef(),this.currentRow=t.createRef(),this.keyCommands=void 0,this.previousFocus=null,this.cellMeasurerCache=void 0,this.formatOptions=(0,$.A)(C),this.enableMouseMove=this.enableMouseMove.bind(this),this.debouncedEnableMouseMove=(0,h.A)(this.enableMouseMove,200),this.debouncedOnScroll=(0,h.A)(this.onScroll.bind(this),200),y.az.label=ae.t("Clear selection");const{optionsRowHeight:J=y.bJ,dynamicHeight:q=!1}=W;q&&(this.cellMeasurerCache=new p.jS({defaultHeight:J,fixedWidth:!0}))}},"SelectOptionsList");U.displayName="SelectOptionsList",U.contextType=E.M;const N=U},674016:(j,T,e)=>{"use strict";e.d(T,{A:()=>g});var t=e(296540),n=e(42302),s=e(64741),a=e(769497),c=e(110010),r=e(372848),o=e(562583),u=e(861621),m=e(131606),i=e(532395);function d(){return d=Object.assign||function(y){for(var I=1;I<arguments.length;I++){var O=arguments[I];for(var M in O)Object.prototype.hasOwnProperty.call(O,M)&&(y[M]=O[M])}return y},d.apply(this,arguments)}l(d,"_extends");const _={onClose:{action:i.UiAction.CLOSE},onOpen:{action:i.UiAction.OPEN}},h=50,p=50,A=12,v=4,E=32;let f=l(class extends t.Component{componentDidMount(){this.maybeInstallListener(),this.measureOptionsListAndSetState()}componentDidUpdate(){this.maybeInstallListener()}componentWillUnmount(){this.maybeUninstallListener()}isMouseEvent(I){return(I==null?void 0:I.type)==="click"}didClickInput(I){const{inputRef:O}=this.props;if(!(O!=null&&O.current)||!this.isMouseEvent(I))return;const M=I.clientX,C=I.clientY,P=O.current.getBoundingClientRect();return M>P.left&&M<P.right&&C>P.top&&C<P.bottom}onClose(I){var O;const{selectState:M,inputRef:C,onOptionsListClose:P,setSelectState:L}=this.props;if(M.isExpanded){if(I instanceof KeyboardEvent){var x;(x=this.optionsListRef.current)===null||x===void 0||x.close(I)}C==null||(O=C.current)===null||O===void 0||O.focus(),P==null||P(this.didClickInput(I)),L(()=>({isExpanded:!1,activeRowIndex:null,filterQuery:"",displayQuery:""}))}}getOptionsListBounds(){const{inputRef:I,inputContainerRef:O=null}=this.props,M=O||I;return M&&M.current?M.current.getBoundingClientRect():null}getPopoverPosition(I){let{top:O,bottom:M}=I;var C;const P=O,L=(((C=this.context.windowRef.deref())===null||C===void 0?void 0:C.innerHeight)||0)-M,{selectState:x,maxListHeight:F=u.CK}=this.props,{options:V}=x;let B=0;const D=l(R=>R.map(w=>this.getRowHeight(w)).reduce((w,Y)=>w+Y,0),"calculateRowHeight");if(V){const R=[];V.forEach(w=>{if(w.options){R.push(w.label),w.options.forEach(Y=>R.push(Y));return}R.push(w)}),B=D(R)}const S=Math.min(B,F);return L<S&&L<P?"top-left":"bottom-left"}getRowHeight(I){const{optionsRowHeight:O=u.bJ}=this.props;return I.type&&I.type==="divider"?u.r3:O}maybeInstallListener(){var I,O;if(this.listenerInstalled)return;(I=this.context.windowRef.deref())===null||I===void 0||I.addEventListener("resize",this.onResize),(O=this.context.windowRef.deref())===null||O===void 0||O.addEventListener("scroll",this.onScroll);const{measurePopoverEventName:M=null}=this.props;if(M){var C;(C=this.context.windowRef.deref())===null||C===void 0||C.addEventListener(M,this.measureOptionsListAndSetState)}this.listenerInstalled=!0}maybeUninstallListener(){const{measurePopoverEventName:I=null}=this.props;if(this.listenerInstalled){var O,M;if(this.onResize.cancel(),this.onScroll.cancel(),(O=this.context.windowRef.deref())===null||O===void 0||O.removeEventListener("resize",this.onResize),(M=this.context.windowRef.deref())===null||M===void 0||M.removeEventListener("scroll",this.onScroll),I){var C;(C=this.context.windowRef.deref())===null||C===void 0||C.removeEventListener(I,this.measureOptionsListAndSetState)}this.listenerInstalled=!1}}measureOptionsListAndSetState(){this.listenerInstalled&&this.setState(()=>({optionsListBounds:this.getOptionsListBounds()}))}render(){var I,O;const{popoverProps:M={},selectState:C,minOptionsListWidth:P=null,onOpen:L=n.A,onScrollablePage:x=!1,autoClogProps:F=void 0,maxListHeight:V=u.CK,shouldAllowUnselectInSingleSelectMode:B,shouldAllowUnselectInMultiSelectMode:D,stayExpandedAfterSelection:S}=this.props,{selectId:R}=C,w=this.state.optionsListBounds||{width:0,bottom:0,left:0},Y=this.getPopoverPosition({top:w.top,bottom:w.bottom}),Q=Y==="top-left",Z=((I=this.context.windowRef.deref())===null||I===void 0?void 0:I.innerWidth)||0;let ee=w.width;P&&w.width<P&&(ee=P);const _e=w.left-A+ee;let Ee=0;P&&_e>Z&&(Ee=P-w.width);const Ae=(Q?w.top:(((O=this.context.windowRef.deref())===null||O===void 0?void 0:O.innerHeight)||0)-w.bottom)-E,ce=Math.min(Ae,V),de={...this.props,autoClogProps:F,width:ee+A*2,maxListHeight:ce,shouldAllowUnselectInSingleSelectMode:B,shouldAllowUnselectInMultiSelectMode:D,stayExpandedAfterSelection:S},{pageYOffset:oe}=this.context.windowRef.deref()||{},$={top:w.top+oe+v,bottom:w.bottom+oe-v,left:w.left-(A+Ee),width:ee};let re;if(x){var ue;re={height:(ue=this.context.windowRef.deref())===null||ue===void 0?void 0:ue.document.body.scrollHeight}}return t.createElement(a.A,d({elementType:i.ElementType.DROPDOWN,actionProps:_},F?{autoClogProps:F}:{}),t.createElement(r.AM,d({position:Y,allowanceX:-A,ref:this.popover},M,{onClose:this.onClose,isOpen:!!C.isExpanded,key:`${R}-popover`,shouldFocusAfterRender:!1,targetBounds:$,ariaHideApp:!1,onOpen:L},typeof re<"u"?{overlayStyle:re}:{},{shouldPropagateOnClose:!0}),t.createElement(o.A,d({},de,{ref:this.optionsListRef}))))}constructor(I){super(I),this.popover=t.createRef(),this.optionsListRef=t.createRef(),this.state={optionsListBounds:null},(0,m.v)(this,["measureOptionsListAndSetState","onClose"]),this.onResize=(0,s.A)(this.measureOptionsListAndSetState,h,{maxWait:h}),this.onScroll=(0,s.A)(this.measureOptionsListAndSetState,p,{maxWait:p}),this.listenerInstalled=null}},"SelectPopoverOptionsList");f.displayName="SelectPopoverOptionsList",f.contextType=c.M,f.defaultProps={includePadding:!0,window};const g=f},211473:(j,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(296540),n=e(46996),s=e(605556),a=e.n(s);function c(){return c=Object.assign||function(o){for(var u=1;u<arguments.length;u++){var m=arguments[u];for(var i in m)Object.prototype.hasOwnProperty.call(m,i)&&(o[i]=m[i])}return o},c.apply(this,arguments)}l(c,"_extends");function r(o){const u={showConfirmDialog:a().func,setSelectState:a().func.isRequired,selectedOptions:a().array,selectedOption:a().object},m={selectedOptions:[],selectedOption:null,showConfirmDialog:void 0};let i=l(class extends t.Component{setSelectState(_,h){const p=_();p.selectedOptions&&!(0,n.A)(p.selectedOptions,this.selectedOptions)||p.selectedOption&&!(0,n.A)(p.selectedOption,this.selectedOption)?(this.props.setSelectState(()=>({isExpanded:!1})),this.props.showConfirmDialog({onGo:()=>{this.props.setSelectState(_,h),this.selectedOptions=p.selectedOptions||this.selectedOptions,this.selectedOption=p.selectedOption||this.selectedOption}})):(this.props.setSelectState(_,h),this.selectedOptions=p.selectedOptions||this.selectedOptions,this.selectedOption=p.selectedOption||this.selectedOption)}render(){const{showConfirmDialog:_}=this.props,h=_?this.setSelectState:this.props.setSelectState;return t.createElement(o,c({},this.props,{setSelectState:h}))}constructor(_){super(_),this.setSelectState=this.setSelectState.bind(this),this.selectedOptions=_.selectedOptions,this.selectedOption=_.selectedOption}},"ConfirmSelectWrapper");return i.displayName="ConfirmSelectWrapper",i.propTypes=u,i.defaultProps=m,i}l(r,"withConfirm")},139801:(j,T,e)=>{"use strict";e.d(T,{A:()=>i});var t=e(296540),n=e(46996),s=e(566401),a=e(42302),c=e(64741),r=e(180491),o=e(682520);function u(){return u=Object.assign||function(d){for(var _=1;_<arguments.length;_++){var h=arguments[_];for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(d[p]=h[p])}return d},u.apply(this,arguments)}l(u,"_extends");const m=(0,o.Wo)();function i(d){let _=l(class extends t.Component{componentDidMount(){const{searchOnClick:p,disableSearchOnMount:A,expandOnFocus:v,minQueryLength:E}=this.props,{filterQuery:f}=this.state;if(!p&&!A||v){const g=!E||f&&f.length>=E;f!==void 0&&g&&this.search(f)}}componentDidUpdate(p){const{isInvalid:A,selectedOption:v,selectedOptions:E,isDisabled:f,minQueryLength:g}=this.props,y={};p.isInvalid!==A&&(y.isInvalid=A),p.isDisabled!==f&&(y.isDisabled=f),(0,n.A)(p.selectedOption,v)||(y.selectedOption=v),(0,n.A)(p.selectedOptions,E)||(y.selectedOptions=E),(0,n.A)(p.minQueryLength,g)||(y.minQueryLength=g),(0,s.A)(y)||this.setSelectState(()=>y)}componentWillUnmount(){this.searchPromise&&this.searchPromise.cancel&&this.searchPromise.cancel()}setSelectState(p,A){const v=p();(v.filterQuery!==void 0&&v.filterQuery!==this.state.filterQuery||v.searchOnClick)&&(this.searchPromise&&this.searchPromise.cancel&&this.searchPromise.cancel(),!this.state.minQueryLength||v.filterQuery&&v.filterQuery.length>=this.state.minQueryLength?(this.setState(()=>({isLoading:!0,searchOnClick:!1})),this.search(v.filterQuery)):this.setState(()=>({isLoading:!1,options:[]}))),this.setState(()=>v,A)}search(p){const{search:A,onSearch:v=a.A,onSearchError:E=a.A,selectId:f,processOptions:g=l(y=>r.S.resolve(y),"processOptions")}=this.props;v(p),this.searchPromise=A(p).then(y=>{g(y,p).then(I=>{this.setSelectState(()=>({options:I})),this.setState(()=>({isLoading:!1}))})}).catch(y=>{this.setState(()=>({isLoading:!1})),m.error(`Error when searching for select id: ${f}, error: ${y}`),E(y)})}render(){const p=this.props.inputRef||this.inputRef;return t.createElement(d,u({},this.props,{selectState:this.state,setSelectState:this.setSelectState,inputRef:p,isLoading:this.state.isLoading}))}constructor(p){super(p),this.inputRef=t.createRef(),this.searchPromise=null,this.setSelectState=this.setSelectState.bind(this),this.state={filterQuery:"",displayQuery:"",options:[],isExpanded:p.isExpanded,expandOnFocus:p.expandOnFocus,selectId:p.selectId,selectedOptions:p.selectedOptions||[],selectedOption:p.selectedOption||null,isRequired:p.isRequired,isLoading:!1,isDisabled:p.isDisabled,isInvalid:p.isInvalid,searchOnClick:p.searchOnClick,minQueryLength:p.minQueryLength},this.search=(0,c.A)(this.search,p.debounceWaitPeriod)}},"CustomSearchWrapper");return _.displayName="CustomSearchWrapper",_.defaultProps={isRequired:!0,selectedOptions:null,selectedOption:null,isExpanded:!1,expandOnFocus:!1,isDisabled:!1,isInvalid:!1,debounceWaitPeriod:50,minQueryLength:0,onSearch:a.A,onSearchError:a.A,searchOnClick:!1,disableSearchOnMount:!1,processOptions:h=>r.S.resolve(h),shouldAllowUnselectInMultiSelectMode:!1},_}l(i,"withCustomSearch")},133856:(j,T,e)=>{"use strict";e.d(T,{A:()=>Ae});var t=e(612104),n=e(296540),s=e(42302),a=e(46996),c=e(566401),r=e(205664),o=e(41343),u=e(339241),m=e(808058),i=e(790973),d=e(229120),_=e(250053),h=e(292049),p=e(194092),A=e(474722),v=e(64741),E=e(574022),f=e(605556),g=e.n(f),y=e(180491),I=e(138085),O=e(261112),M=e(863467),C=e(623203),P=e(533098);function L(ce){return[...ce.filter(de=>!de.isError&&!de.isUnknown),...ce.filter(de=>!de.isError&&de.isUnknown),...ce.filter(de=>de.isError)]}l(L,"sortTokens");var x=e(899421),F=e(381666),V=e(682520),B=e(649098),D=e(325846),S=e(590671),R=e(981927),w=e(882978),Y=e(684897),Q=e(823650),Z=e(298559),ee=e(881805);function _e(){return _e=Object.assign||function(ce){for(var de=1;de<arguments.length;de++){var oe=arguments[de];for(var $ in oe)Object.prototype.hasOwnProperty.call(oe,$)&&(ce[$]=oe[$])}return ce},_e.apply(this,arguments)}l(_e,"_extends");const Ee=(0,V.Wo)(),G=new B.Ay("form_inputs");function Ae(ce){const de={searcherOptions:g().object.isRequired,selectId:g().string.isRequired,inputRef:g().object,isRequired:g().bool,selectedOptions:g().array,selectedOption:g().object,isExpanded:g().bool,isDisabled:g().bool,isInvalid:g().bool,focusOnMount:g().bool,searchOnPaste:g().bool,expandOnFocus:g().bool,expandOnClick:g().bool,searchBatchSize:g().number,debounceWaitPeriod:g().number,onFilterQueryPaste:g().func,onInputFocused:g().func,onSearch:g().func,onSearchError:g().func,onSearchResolved:g().func,onOptionsListClose:g().func,splitPastedQuery:g().func,processOptions:g().func,processSelectedOptions:g().func,clogger:g().object.isRequired,search:g().func.isRequired,teamId:g().string.isRequired,useSearcherSessions:g().bool,showConfirmDialog:g().func,restrictedSelectedTokenIndexes:g().array,disabledSelectedTokenIndexes:g().array,useBulkSearch:g().bool},oe={isRequired:!0,selectedOptions:null,selectedOption:null,inputRef:null,isExpanded:!1,isDisabled:!1,isInvalid:!1,focusOnMount:!1,searchOnPaste:!1,expandOnFocus:void 0,expandOnClick:void 0,searchBatchSize:1,debounceWaitPeriod:50,onFilterQueryPaste:s.A,onInputFocused:s.A,onSearch:s.A,onSearchError:s.A,onSearchResolved:s.A,onOptionsListClose:s.A,splitPastedQuery:P.I,processOptions:te=>y.K.resolve(te),processSelectedOptions:void 0,useSearcherSessions:!1,showConfirmDialog:void 0,restrictedSelectedTokenIndexes:[],disabledSelectedTokenIndexes:[],useBulkSearch:!1};let $=l(class extends n.Component{componentDidMount(){this.props.focusOnMount&&this.setState(()=>({isLoading:!0})),this.searchQuery(this.state.filterQuery)}componentDidUpdate(ae,H){const{isDisabled:U,isInvalid:N,selectedOptions:K,selectedOption:W,searchOnPaste:J,expandOnFocus:q,expandOnClick:ie,restrictedSelectedTokenIndexes:Te,disabledSelectedTokenIndexes:Me}=this.props,ke={};if(ae.isInvalid!==N&&(ke.isInvalid=N),ae.isDisabled!==U&&(ke.isDisabled=U),(0,a.A)(ae.selectedOptions,K)||(ke.selectedOptions=K),(0,a.A)(ae.selectedOption,W)||(ke.selectedOption=W),(ae.expandOnFocus&&!q||ae.expandOnClick&&!ie)&&(ke.isExpanded=!1),this.wasUnknownTokenResolved(this.state.selectedOptions,H.selectedOptions)){var Ie,X;const Re=this.getNextUnknownTokenIndex();ke.selectedTokenIndexes=[Re],(Ie=this.inputRef)===null||Ie===void 0||(X=Ie.current)===null||X===void 0||X.focus()}ae.restrictedSelectedTokenIndexes!==Te&&(ke.restrictedSelectedTokenIndexes=Te),ae.disabledSelectedTokenIndexes!==Me&&(ke.disabledSelectedTokenIndexes=Me);const{isLoading:ne,pendingQueries:fe,selectedOptions:be,pendingEscapeQueries:Be,filterQuery:We}=this.state;if(J&&!ne){if(!(0,c.A)(fe))ke.isLoading=!0,ke.loadInBackground=!0,this.searchQueryObjects(fe);else if(H.isLoading){if(this.updateDisabled(!1),Be.length>0&&We===""){const Re=(0,B.jd)(Be.map(Ke=>Ke.query),{noConj:!0}).join(""),ve=Be[0],{options:xe}=ve,He=l(Ke=>Ke.map(ht=>{const{query:dt,options:Ve,...Je}=ht,Ge=Ve?{options:He(Ve)}:{};return{...Je,...Ge,query:Re}}),"getUpdatedOptions"),je={...ve,options:He(xe),query:Re};ke.pendingEscapeQueries=[],ke.options=je.options,ke.filterQuery=Re,ke.isExpanded=!0,ke.isLoading=!1}if(be.length){const Re=be.filter(xe=>xe.isError||xe.isUnknown).length,ve=Re?G.t("Loading complete. There {count, plural, =1 {is # unknown entry} other {are # unknown entries}}.",{count:Re}):G.t("Loading complete.");this.updateAriaTextThrottled.cancel&&this.updateAriaTextThrottled.cancel(),this.updateAriaTextThrottled(ve)}}}(0,c.A)(ke)||this.setSelectState(()=>ke)}componentWillUnmount(){this.updateAriaText.cancel&&this.updateAriaText.cancel(),this.searchPromise&&this.searchPromise.cancel&&this.searchPromise.cancel(),this._isMounted=!1}onFilterQueryPaste(ae){var H=this;return(0,t.coroutine)(function*(){const{searchOnPaste:U,searcherOptions:N,splitPastedQuery:K,processOptions:W}=H.props;if(!U||!ae&&!ae.clipboardData)return;ae.preventDefault();const J=ae.clipboardData.getData("text/plain")?"text/plain":"Text",q=(0,x.i_)(ae),ie=q.text,Te=K(ie,{...N,fromMetadata:q.text!==ae.clipboardData.getData(J)});H.props.onFilterQueryPaste(Te);const Me=[],ke=[];yield y.K.all(Te.map(Pe=>{const Ie=H.getQueryId();return(0,D.A)(Pe)||(0,R.A)(Pe)||(0,S.Ay)(Pe)?W([{key:Ie,pasted:!0,fromMetadata:!0,value:Pe,label:q.members?q.members[Pe]:Pe}]).then(X=>(X[0]&&ke.push(X[0]),y.K.resolve())):(Me.push({query:Pe,queryId:Ie,pasted:!0}),ke.push({label:Pe,queryId:Ie,isLoading:!0,key:Ie,pasted:!0}),y.K.resolve())})),H.setSelectState(Pe=>({pendingQueries:Pe.pendingQueries.concat(Me),selectedOptions:Pe.selectedOptions.concat(ke)})),H.updateDisabled(!(0,c.A)(Me)),H.updateAriaTextThrottled.cancel&&H.updateAriaTextThrottled.cancel()})()}onInputFocused(){this.props.onInputFocused(),!(this.props.expandOnClick||this.shouldExpandOnFocus())&&this.setState(()=>({isExpanded:!1,options:[]}))}onOptionsListClose(ae){const{isLoading:H,isExpanded:U,filterQuery:N}=this.state;!H&&U&&N.length>0&&this.clogSearcherResults(),this.props.onOptionsListClose(ae)}onTokenSelect(ae){var H=this;return(0,t.coroutine)(function*(){if(!(H.props.expandOnClick||H.shouldExpandOnFocus())){if(ae&&!ae.isUnknown)H.setState(()=>({isExpanded:!1,options:[]}));else if(ae){const U=yield H.props.processOptions(ae.resultOptions.map(N=>({...N,fromUnknown:!0})),ae.label);H.lastShownSearchDetails=ae.searcher,H.setState(()=>({isExpanded:!0,options:U}))}}})()}getQueryId(){return(0,r.A)("query__")}setSelectState(ae,H){var U=this;return(0,t.coroutine)(function*(){var N;const{processSelectedOptions:K}=U.props;let W=ae(U.state);const{selectedOption:J,selectedOptions:q}=U.state;W.filterQuery!==void 0&&W.filterQuery!==U.state.filterQuery&&(W.isLoading=!0,W.loadInBackground=!1,U.searchQuery(W.filterQuery));const{searchOnPaste:ie}=U.props;if(ie&&W.selectedOptions){const Me=W.selectedOptions.map(Pe=>{let{key:Ie}=Pe;return Ie}),ke=(0,o.A)((0,u.A)(Me.filter(Pe=>Me.indexOf(Pe)!==Me.lastIndexOf(Pe))));(0,m.A)(ke,Pe=>{const Ie=(0,i.A)(W.selectedOptions,ne=>{let{key:fe,isUnknown:be}=ne;return fe===Pe&&!be}),X=(0,u.A)(W.selectedOptions.map(ne=>ne.key===Pe?ne.isUnknown?Ie:null:ne));W.selectedOptions=X})}if(W.selectedOptions!==void 0&&!(0,a.A)(W.selectedOptions,q)){const Me=W.selectedOptions.filter(Pe=>{let{isLoading:Ie,isUnknown:X}=Pe;return!Ie&&!X}),[ke]=(0,d.A)(Me,q,"value");ke&&U.clogSearcherResults(ke)}W.selectedOption!==void 0&&W.selectedOption!==null&&((N=W.selectedOption)===null||N===void 0?void 0:N.value)!==(J==null?void 0:J.value)&&U.clogSearcherResults(W.selectedOption);const Te=!!W.removalInitiator;if(W.selectedOptions&&!Te&&K){if(W=(0,_.A)(W),W.isLoading!==void 0){const Me=W.isLoading;U.setState(()=>({isLoading:Me})),delete W.isLoading}W.selectedOptions=yield K(W.selectedOptions)}U.setState(()=>W,H)})()}getNextUnknownTokenIndex(){return this.state.selectedOptions.findIndex(ae=>ae.isUnknown&&ae.queryId)}wasUnknownTokenResolved(ae,H){const U=ae.filter(K=>K.isUnknown).length,N=H.filter(K=>K.isUnknown).length;return U<N}shouldExpandOnFocus(){const{expandOnFocus:ae}=this.props,{selectedOptions:H}=this.state,U=(0,C.A)(H);return ae&&!U}clogSearcherResults(ae){if(this.lastShownSearchDetails===null)return;const{clogger:H,selectId:U,useSearcherSessions:N,teamId:K}=this.props,{query:W,results:J}=this.lastShownSearchDetails,q={source:U,query:W,results:J};ae?(q.selectedItemId=ae.value,N?(0,w.A)({teamId:K,key:U}).clogSearcherAccept({clogger:H,data:q}):(0,I.DC)({clogger:H,data:q})):N?(0,w.A)({teamId:K,key:U}).clogSearcherReject({clogger:H,data:q}):(0,I.Yb)({clogger:H,data:q})}processSearchResults(ae){const{searchOnPaste:H,onSearchResolved:U,searcherOptions:N}=this.props,{escapeHatchEnabled:K,escapeHatchKeys:W}=N,J=this.state.selectedOptions.slice(0);H&&ae.forEach(q=>{let{queryId:ie,options:Te,searcher:Me}=q;const ke=J.findIndex(X=>X.queryId===ie),Pe=J[ke];let Ie=null;if(Pe){this.lastShownSearchDetails=Me;let X;Te.length===1?(X=Te[0],K&&Me&&Me.results&&Me.results.length===0&&Me.pasted&&W&&W[X.key]&&this.setState(fe=>({pendingEscapeQueries:[...fe.pendingEscapeQueries,{query:Me.query,options:[X]}]})),this.clogSearcherResults(X)):Te.length?X={isUnknown:!0}:(X={isError:!0},this.clogSearcherResults()),Ie={...Pe,...X,resultOptions:Te,searcher:Me,isLoading:!1},J[ke]=Ie}U({result:Te,selectedOption:Ie})}),this.setState(q=>{if((0,Q.Ay)(q.selectedOptions,J,2)){const{options:ie,searcher:Te}=ae[0];return this.lastShownSearchDetails=Te,q.loadInBackground?null:{options:ie}}return{selectedOptions:L(J)}})}runBatchedSearch(ae){const H=ae.slice(0,this.props.searchBatchSize);if(ae.length>1&&this.props.useBulkSearch){const N=H.some(W=>!!W.pasted),K=H.some(W=>!!W.initial);return this.runSingleSearch({query:H,pasted:N,initial:K})}const U=H.map(N=>{let{query:K,queryId:W,pasted:J,initial:q}=N;return this.runSingleSearch({query:K,queryId:W,pasted:J,initial:q})});return y.K.all(U)}runSingleSearch(ae){let{query:H,queryId:U,pasted:N,initial:K}=ae;const{onSearch:W,onSearchError:J,processOptions:q,searcherOptions:ie,selectId:Te,useSearcherSessions:Me,teamId:ke,useBulkSearch:Pe}=this.props;let Ie,X,ne=!1;const fe=U||this.getQueryId(),be=new Map;if((0,h.A)(H)&&Pe?(Ie=H.map(Re=>(be.set(Re.queryId,Re.query),{query:(0,P.t)(Re.query,ie),queryId:Re.queryId})),ne=!0):X=(0,P.t)(H,ie),X&&W(H)===!1)return q([],X).then(Re=>({queryId:fe,options:Re,searcher:this.lastShownSearchDetails}));let Be;Me&&(!N||ne)?Be=(0,w.A)({teamId:ke,key:K?fe:Te}).search({query:ne?Ie:X,options:{...ie,sort:{source:Te,...ie.sort},returnMetadata:!0}}):Be=this.props.search({query:ne?Ie:X,options:{...ie,sort:{source:Te,...ie.sort},returnMetadata:!0}});var We=this;return Be.then(function(){var Re=(0,t.coroutine)(function*(ve){We.lastShownSearchDetails={query:ne?Ie:X,results:ve};const xe=(ve||[]).map((Ke,ht)=>{var dt;return{key:ne?Ke.queryId:`${fe}_${ht}`,value:Ke.item.id,label:Ke.name||((dt=Ke.item)===null||dt===void 0?void 0:dt.name)||(ne?be.get(Ke.queryId):H),entity:Ke.item,matchData:Ke.subqueryScoresByMember}}),{selectedOption:He}=We.state;X===""&&He&&((0,i.A)(xe,["value",He.value])||xe.unshift(He));const je=yield q(xe,H,{pasted:N});return{queryId:fe,options:je,searcher:{...We.lastShownSearchDetails,pasted:N}}});return function(ve){return Re.apply(this,arguments)}}()).catch(Re=>{Ee.error(`Error when searching for select id: ${Te}, error: ${Re}`),J(Re);const ve=[];return{queryId:fe,options:ve,searcher:{query:ne?Ie:X,results:ve,pasted:N,isError:!0}}})}searchQuery(ae){this._isMounted&&this.searchQueryObjects([{query:ae}])}searchQueryObjects(ae){if((0,c.A)(ae))return;if(this.searchPromise&&this.searchPromise.cancel&&this.searchPromise.cancel(),!this.props.searchOnPaste){const{query:U,queryId:N}=ae[0];this.searchPromise=this.runSingleSearch({query:U,queryId:N}).then(K=>{let{options:W}=K;this.setSelectState(()=>({options:W})),this.setState(()=>({isLoading:!1}))});return}this.searchPromise=this.runBatchedSearch(ae).then(U=>{let N=U;this.props.useBulkSearch&&(N=this.generateBulkSearchResultsArray(N)),this.processSearchResults(N);const K=N.map(W=>{let{queryId:J}=W;return J});this.setState(W=>({pendingQueries:W.pendingQueries.filter(q=>{let{queryId:ie}=q;return!K.includes(ie)}),isLoading:!1}))});const H=G.t("Loading {count, plural, =1 {# more entry} other {# more entries}}",{count:ae.length});this.updateAriaTextThrottled(H)}updateAriaText(ae){this.setState(H=>H.ariaText===ae?null:{ariaText:ae})}updateDisabled(ae){this.setState(H=>H.isDisabled===ae?null:{isDisabled:ae})}generateBulkSearchResultsArray(ae){var H;if(!(!(ae==null||(H=ae.options)===null||H===void 0)&&H.length))return ae.splice(0);const{options:U,searcher:N}=ae,{pasted:K,query:W,results:J}=N;return W.map(ie=>({options:U.filter(Te=>Te.key===ie.queryId),queryId:ie.queryId,searcher:{pasted:K,query:ie.query,results:J.filter(Te=>Te.queryId===ie.queryId)}}))}render(){return n.createElement(n.Fragment,null,n.createElement(ce,_e({},this.props,{expandOnFocus:this.shouldExpandOnFocus(),inputRef:this.inputRef,selectState:this.state,setSelectState:this.setSelectState,onOptionsListClose:this.onOptionsListClose,onFilterQueryPaste:this.onFilterQueryPaste,onTokenSelect:this.onTokenSelect,onInputFocused:this.onInputFocused,isLoading:this.state.isLoading})),n.createElement(M.A,{message:this.state.ariaText}))}constructor(ae){super(ae),this.searchPromise=null,this.setSelectState=this.setSelectState.bind(this),this.onOptionsListClose=this.onOptionsListClose.bind(this),this.onFilterQueryPaste=this.onFilterQueryPaste.bind(this),this.onTokenSelect=this.onTokenSelect.bind(this),this.onInputFocused=this.onInputFocused.bind(this);const{selectedOptions:H,searchOnPaste:U}=ae,N=(0,p.A)(H,W=>(0,O.iC)(W));let K=[];U&&(K=(0,u.A)((0,A.A)(N,W=>!W.label||!W.queryId?null:{query:W.label,queryId:W.queryId,initial:!0}))),this.state={filterQuery:"",options:[],isExpanded:ae.isExpanded,selectId:ae.selectId,selectedOptions:ae.selectedOptions||[],selectedOption:ae.selectedOption||null,isRequired:ae.isRequired,isLoading:!1,isDisabled:ae.isDisabled,isInvalid:ae.isInvalid,pendingQueries:K||[],loadInBackground:!1,ariaText:"",shouldRefocusInputAfterSelection:!!ae.showConfirmDialog,pendingEscapeQueries:[],selectedTokenIndexes:[],restrictedSelectedTokenIndexes:ae.restrictedSelectedTokenIndexes||[],disabledSelectedTokenIndexes:ae.disabledSelectedTokenIndexes||[]},this.searchQuery=(0,v.A)(this.searchQuery,ae.debounceWaitPeriod),this.updateAriaTextThrottled=(0,E.A)(this.updateAriaText,3e4),this.lastShownSearchDetails=null,this.inputRef=ae.inputRef||n.createRef(),this._isMounted=!0}},"SearcherSelectWrapper");$.displayName="SearcherSelectWrapper",$.propTypes=de,$.defaultProps=oe;const re=l(te=>({clogger:(0,F.e)({state:te}),teamId:(0,ee.JY)(te),useSearcherSessions:(0,Y.nK)(te)}),"mapStateToProps"),ue={search:function(){for(var te=arguments.length,ae=new Array(te),H=0;H<te;H++)ae[H]=arguments[H];return(0,I.$P)(...ae)}};return(0,Z.N)(re,ue)($)}l(Ae,"withSearcher")},738020:(j,T,e)=>{"use strict";e.d(T,{A:()=>s});var t=e(974651);const n=l(function(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0;if(!o)return r;const{label:u,options:m}=o,i=new t.A(a,{fuzzyLimit:3,...c});if(!m)isFinite(i.normalizeAndScore(u))&&r.push(o);else{const d=[];m.forEach(_=>{const{label:h}=_;isFinite(i.normalizeAndScore(h))&&d.push(_)}),d.length&&r.push({label:o.label,options:d})}return r},"findMatches");function s(a,c){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return c?a.reduce((o,u)=>n(c,r,o,u),[]):a}l(s,"defaultFilter")},623203:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(566401),n=e(219477),s=e(261112);function a(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return(0,t.A)(c)?!1:(0,n.A)(c,r=>(0,s.hH)(r))}l(a,"__WEBPACK_DEFAULT_EXPORT__")},808762:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(566401),n=e(194092),s=e(756120),a=e(682520);function c(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if((0,t.A)(r))return!1;const o=(0,n.A)(r,u=>(u&&!u.message&&(0,s.Cu)()&&(0,a.Wo)({label:"Invalid Error or Hint Object"}).error(`The following error or hint object is invalid: { id: ${u.id}, message: ${u.message}}`),u&&!!u.message));return!(0,t.A)(o)}l(c,"__WEBPACK_DEFAULT_EXPORT__")},533098:(j,T,e)=>{"use strict";e.d(T,{I:()=>o,t:()=>u});var t=e(636606);const n=[",","\uFF0C","\u3001",";","\uFF1B","|","\uFF5C","\\t","\\n","\\r"],s=new RegExp(`[${n}]`),a=new RegExp(`<(${t.gy})>`,"i"),c=new RegExp(`\\((${t.gy})\\)`,"i"),r=/(?=\s+[@\uFF20])/g;function o(m){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=[];return i.entities&&i.entities.members&&i.entities.members.matchEmailField&&(a.test(m)||c.test(m))?d=m.match(new RegExp(t.tN.CONTAINS_EMAIL,"gi")):s.test(m)?d=m.split(s):i.fromMetadata?d=m.split(/\s+/):i.entities&&i.entities.members&&r.test(m)&&(d=m.split(r)),(!d||!d.length)&&(d=m.split(/\s+/)),d.map(_=>_.trim()).filter(_=>Boolean(_))}l(o,"defaultSplitQuery");function u(m){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=m;return i.entities&&i.entities.members&&i.entities.members.matchEmailField&&t.tN.CONTAINS_EMAIL.test(m)&&(d=m.match(t.tN.CONTAINS_EMAIL)[0]),d}l(u,"parseQueryForSearch")},852422:(j,T,e)=>{"use strict";e.d(T,{k:()=>n});var t=e(738020);const n=l(function(a,c){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return c.filterQuery===void 0?c:{...c,options:(0,t.A)(a,c.filterQuery,r)}},"defaultFilter"),s=l((a,c)=>a.reduce((r,o)=>o(r),c),"applyTransforms")},187448:(j,T,e)=>{"use strict";e.d(T,{A:()=>s,e:()=>n.ex});var t=e(166171),n=e(500792);const s=t.A},166171:(j,T,e)=>{"use strict";e.d(T,{A:()=>f});var t=e(296540),n=e(528919),s=e(574022),a=e(42302),c=e(110010),r=e(888455),o=e(500792),u=e(365407);function m(){return m=Object.assign||function(g){for(var y=1;y<arguments.length;y++){var I=arguments[y];for(var O in I)Object.prototype.hasOwnProperty.call(I,O)&&(g[O]=I[O])}return g},m.apply(this,arguments)}l(m,"_extends");const i=1,d=10,_=10,h=2,p=12,A=50;let v=l(class extends t.PureComponent{componentDidMount(){if(this.state.isOpen){var y;(y=this.context.windowRef.deref())===null||y===void 0||y.document.addEventListener("mousemove",this.onMouseMove)}}static getDerivedStateFromProps(y,I){return y.isOpen!==I.passedIsOpen?{isOpen:y.isOpen,passedIsOpen:y.isOpen}:null}componentDidUpdate(y){if(y.isOpen!==this.props.isOpen)if(this.state.isOpen){var I;this.forceUpdate(),(I=this.context.windowRef.deref())===null||I===void 0||I.document.addEventListener("mousemove",this.onMouseMove)}else{var O;(O=this.context.windowRef.deref())===null||O===void 0||O.document.removeEventListener("mousemove",this.onMouseMove)}this.state.isOpen||(this.initialTriggerBounds=void 0)}componentWillUnmount(){var y;(y=this.context.windowRef.deref())===null||y===void 0||y.document.removeEventListener("mousemove",this.onMouseMove)}onMouseMove(y){const I={x:y.clientX,y:y.clientY},O=this.mouseProgressingTowardsSubmenu(I);O!==this.state.mouseProgressingTowardsSubmenu&&(O?this.props.preventHighlightChange():this.state.highlightChangePrevented||this.props.allowHighlightChange()),this.setState(()=>({mouseCoordinates:I,mouseProgressingTowardsSubmenu:O}))}onSubmenuItemSelected(y,I){this.props.menuCallback(this.props.menuCallbackId,I)}getContentBounds(){return this.submenuContainer?this.submenuContainer.getBoundingClientRect():void 0}getSubmenuContainerStyle(){const y=this.getContentBounds(),I=this.getTriggerBounds(),O={...this.props.submenuStyle},M=this.context.windowRef.deref();if((y==null?void 0:y.width)===void 0||(I==null?void 0:I.left)===void 0||!M)return O;const C=I.right+y.width>M.innerWidth,P=I.left>y.width,L=this.props.forceLeft||C&&P;C&&!P?O.left=M.innerWidth-y.width-d:L?O.left=I.left-y.width+h:O.left=I.right-h;const F=I.top-p,V=F+y.height>M.innerHeight-_;return O.top=V?M.innerHeight-_-y.height:F,O}getTriggerBounds(){return this.initialTriggerBounds||(this.initialTriggerBounds=this.trigger?this.trigger.getBoundingClientRect():void 0),this.initialTriggerBounds||void 0}setSubmenuRef(y){this.submenuContainer=y}setTriggerRef(y){this.trigger=y}allowHighlightChange(){this.setState(y=>({...y,highlightChangePrevented:!1}))}closeSubmenu(){this.props.returnKBNav(),this.setState(()=>({isOpen:!1}),()=>{var y;(y=this.context.windowRef.deref())===null||y===void 0||y.document.removeEventListener("mousemove",this.onMouseMove)})}mouseProgressingTowardsSubmenu(y){const{mouseCoordinates:I}=this.state,O=this.getContentBounds();if(O){const{left:M,right:C,top:P,bottom:L}=O;if(y.x>=M&&y.x<=C&&y.y>=P&&y.y<=L)return!0;if(I){const F=Math.abs(C-I.x)>Math.abs(M-I.x),V={x:F?M:C,y:P-i},B={x:F?M:C,y:L+i},D={x:F?I.x-i:I.x+i,y:I.y};return(0,u._i)(y,D,V,B)}}return!1}preventHighlightChange(){this.setState(y=>({...y,highlightChangePrevented:!0}))}renderSubmenu(){if(!this.state.isOpen||this.props.disabled)return null;const y=this.props.renderSubmenu({onTriggerClose:this.closeSubmenu,onCloseSubmenu:this.closeSubmenu,onMenuItemSelected:this.onSubmenuItemSelected,kbNavActive:this.props.kbNavActive,preventHighlightChange:this.preventHighlightChange,allowHighlightChange:this.allowHighlightChange,isSubmenu:!0}),I=this.getSubmenuContainerStyle(),O=(0,n.A)("c-submenu__container",{"c-submenu__container--legacy":!this.props.renderLegacySubmenu});return t.createElement("div",{role:"presentation",className:O,ref:this.setSubmenuRef,style:I,"data-qa":"submenu_container"},y)}render(){const{menuCallback:y,menuCallbackId:I,...O}=this.props;return t.createElement("div",{role:"presentation",className:"c-submenu","data-qa":"submenu_trigger_wrapper",ref:this.setTriggerRef},t.createElement(r.A,m({},O,{withSubmenu:!0})),this.renderSubmenu())}constructor(y){super(y),this.state={isOpen:!1,passedIsOpen:!1,mouseCoordinates:void 0,mouseProgressingTowardsSubmenu:!1,highlightChangePrevented:!1},this.closeSubmenu=this.closeSubmenu.bind(this),this.setSubmenuRef=this.setSubmenuRef.bind(this),this.setTriggerRef=this.setTriggerRef.bind(this),this.onMouseMove=(0,s.A)(this.onMouseMove.bind(this),A),this.onSubmenuItemSelected=this.onSubmenuItemSelected.bind(this),this.preventHighlightChange=this.preventHighlightChange.bind(this),this.allowHighlightChange=this.allowHighlightChange.bind(this)}},"Submenu");v.displayName="Submenu",v.defaultProps={isOpen:!1,menuCallback:a.A,menuCallbackId:null,kbNavActive:!1,returnKBNav:a.A,preventHighlightChange:a.A,allowHighlightChange:a.A,renderLegacySubmenu:!0,forceLeft:!1,submenuStyle:void 0,disabled:!1,showFullCarat:!1,icon:null},v.contextType=c.M;const E={Submenu:v,SUBMENU_OVERLAP:h,MENU_VERTICAL_MARGIN:p,ALLOWANCE_X:d,ALLOWANCE_Y:_},f=(0,o.Ay)(v)},500792:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>i,ex:()=>m});var t=e(808058),n=e(605556),s=e.n(n),a=e(232120),c=e(756120),r=e(682520);const o="_isSlackSubmenuItem",u={...a.LN,kbNavActive:s().bool,stealKBNav:s().func,returnKBNav:s().func,preventHighlightChange:s().func,allowHighlightChange:s().func};function m(d){return!!d[o]}l(m,"isSubmenu");function i(d){if((0,c.Cu)()){const _=d.propTypes||{};let h;Object.defineProperty(d,"propTypes",{get:()=>h,set:p=>{const A=d.displayName||d.name||"Component";(0,t.A)(u,(v,E)=>{const f=p[E];f&&f!==v&&f!==v.isRequired&&(0,r.Wo)().warn(`${A}'s ${E} prop type doesn't match submenu`)}),h={...u,...p}}}),d.propTypes=_}return d[o]=!0,d[a.KJ]=!0,d}l(i,"wrapSubmenu")},22893:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(296540),n=e(528919);function s(){return s=Object.assign||function(r){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(r[m]=u[m])}return r},s.apply(this,arguments)}l(s,"_extends");const c=(0,t.forwardRef)((r,o)=>{let{tabContent:u,fullHeight:m,className:i,...d}=r;const _=(0,n.A)(i,"c-tabs__tab_panel","c-tabs__tab_panel--active",{"c-tabs__tab_panel--full_height":m});return t.createElement("div",s({role:"tabpanel",className:_,"data-qa":"tabs_content_container",ref:o},d),u)})},80370:(j,T,e)=>{"use strict";e.d(T,{T:()=>s});var t=e(296540);const n={isSelected:!1,hasMouseHover:!1,hasKeyboardFocus:!1,isUserAttentionOnTab:!1},s=(0,t.createContext)(n)},686916:(j,T,e)=>{"use strict";e.d(T,{A:()=>O});var t=e(296540),n=e(528919),s=e(997859),a=e(64741),c=e(296993),r=e(615995),o=e(441537),u=e(393028),m=e(927675),i=e(61629),d=e(616125),_=e(80370),h=e(201456),p=e(827021);function A(M){return/\.(jpe?g|png|gif|bmp)$/i.test(M)}l(A,"hasImageExtention");const v=A;function E(){return E=Object.assign||function(M){for(var C=1;C<arguments.length;C++){var P=arguments[C];for(var L in P)Object.prototype.hasOwnProperty.call(P,L)&&(M[L]=P[L])}return M},E.apply(this,arguments)}l(E,"_extends");const f=l(M=>{let{icon:C,svgIcon:P,customIcon:L,className:x}=M;return t.createElement("div",{className:x,"data-qa":"tabs_item_render_icon"},!L&&C&&!P&&t.createElement(i.A,{type:C,size:"inherit",inline:!0}),!L&&P&&!C&&t.createElement(d.A,E({},P)),L&&L)},"TabsItemIcon");f.displayName="TabsItemIcon";const g=l(M=>M>=1e4?(0,h.$k)(M,{precision:4,decimal_places:0,lowercase:!0}):(0,p.Ay)(M),"formatNumber"),y=l(M=>{let{shouldFormatCount:C,titleCount:P,maxTitleCount:L}=M;return C&&P?g(P):L&&P&&P>L?`${L}+`:P},"formatCount"),O=(0,t.forwardRef)((M,C)=>{let{label:P,onClick:L,title:x,isSelected:F,isFocused:V,focusOnMount:B,fullWidth:D,titleCount:S,maxTitleCount:R,icon:w,svgIcon:Y,customIcon:Q,formatCount:Z,isLoading:ee,isCountLoading:_e,isDisabled:Ee,iconPosition:G="right",className:Ae="",contextMenuAriaLabel:ce,contextMenuTemplate:de,...oe}=M;const $=(0,r.A)(C),[re,ue]=(0,t.useState)(!1),te=(0,n.A)(Ae,"c-tabs__tab","js-tab",{"c-tabs__tab--active":F,"c-tabs__tab--full_width":D}),ae=P||x,H=typeof ae=="string"&&v(ae)?t.createElement(u.A,{classes:"c-tabs__tab_image",image:ae,ariaHidden:!0}):ae,U=oe.id,N=(0,t.useCallback)(X=>{L&&L(U,X)},[U,L]),K=y({shouldFormatCount:Z,titleCount:S,maxTitleCount:R}),W=(0,s.A)(V)?F:V,J=(0,o.A)(W);(0,t.useEffect)(()=>{if(!W)return;const X=(0,s.A)(J);if(X&&B||!X&&!J){var ne;(ne=$.current)===null||ne===void 0||ne.focus()}},[W,J,B,$]);const q=(0,t.useCallback)(()=>de,[de]),ie=(0,a.A)(()=>ue(!0),25),Te=(0,a.A)(()=>ue(!1),25),Me=(0,t.useCallback)(()=>{Te.cancel(),ie()},[ie,Te]),ke=(0,t.useCallback)(()=>{ie.cancel(),Te()},[ie,Te]),Pe=(0,t.useMemo)(()=>({isSelected:F??!1,hasMouseHover:re,hasKeyboardFocus:V??!1,isUserAttentionOnTab:F||re||(V??!1)}),[V,re,F]);let Ie=t.createElement(m.Nm,E({},oe,{onClick:N,onMouseOver:Me,onMouseOut:ke,role:"tab",className:te,"aria-selected":F,tabIndex:W?0:-1,disabled:Ee,ref:$}),ee?t.createElement("span",{className:"c-tabs__tab_placeholder","data-qa":"tabs_item_placeholder"}):t.createElement(t.Fragment,null,(!!w||!!Y||!!Q)&&G==="left"&&t.createElement(f,{icon:w,svgIcon:Y,customIcon:Q,className:"c-tabs__tab_icon--left"}),t.createElement("span",{className:"c-tabs__tab_content"},H),Number.isFinite(S)&&t.createElement("span",{className:"c-tabs__tab_count","data-qa":"tabs_item_render_count"},K),_e&&t.createElement("span",{className:"c-tabs__tab_count_placeholder","data-qa":"tabs_item_render_count_placeholder"}),(!!w||!!Y||!!Q)&&G==="right"&&t.createElement(f,{icon:w,svgIcon:Y,customIcon:Q,className:"c-tabs__tab_icon--right"})));return de&&(Ie=t.createElement(c.A,{getTemplate:q,desktopAppOnly:!1,showSlackKitContextMenuOnDesktop:!0,width:"auto",menuAriaLabel:ce},Ie)),t.createElement(_.T.Provider,{value:Pe},Ie)})},96432:(j,T,e)=>{"use strict";e.d(T,{A:()=>G});var t=e(296540),n=e(528919),s=e(42302),a=e(293752),c=e(402137),r=e(616125),o=e(686916),u=e(744199);const m={name:"ellipsis-horizontal",variation:"filled"},d=(0,t.forwardRef)((Ae,ce)=>{let{renderMenu:de,position:oe,label:$,id:re,isSelected:ue,isFocused:te}=Ae;return t.createElement(a.cQ,{renderMenu:de,position:oe||"bottom-left"},t.createElement(u.Ay,{tip:$,position:"top",offsetY:6},t.createElement(o.A,{id:re,"aria-label":$,isSelected:ue,isFocused:te,className:"c-tabs__tab_overflow",svgIcon:m,ref:ce})))});var _=e(250791);const h=53,p=27;function A(Ae){const ce=Ae.ownerDocument.defaultView;if(!ce)return Ae.offsetWidth;const de=ce.getComputedStyle(Ae),oe=parseFloat(de.getPropertyValue("margin-left"))+parseFloat(de.getPropertyValue("margin-right"));return Ae.offsetWidth+oe}l(A,"getWidth");function v(Ae){const ce=Ae.ownerDocument.defaultView;if(!ce)return Ae.offsetHeight;const de=ce.getComputedStyle(Ae),oe=parseFloat(de.getPropertyValue("margin-top"))+parseFloat(de.getPropertyValue("margin-bottom"));return Ae.offsetHeight+oe}l(v,"getHeight");const E=l((Ae,ce)=>{let{outerElement:de,innerElement:oe,threshold:$,totalTabsLength:re,childElements:ue,containerSize:te,isHorizontal:ae}=Ae;if(!de||!oe||!ue||re===0)return;const H=te-$,U=ae?A:v,N=Array.from(ue).map(ie=>U(ie));if((0,_.A)(N)<H&&N.length===re){ce(re);return}let W=ae?h:p,J=H,q=1;N.forEach(ie=>{W+=ie,W<H&&ie<=J&&(q+=1),J-=ie}),ce(q)},"recalculateVisibleTabs");var f=e(22893),g=e(364009),y=e(709703);const O=l(Ae=>(0,y.A)(Ae),"isReactNodeAString");var M=e(131606),C=e(532395),P=e(304789),L=e(756120),x=e(308553),F=e(682520),V=e(894635),B=e(649098),D=e(999882);function S(){return S=Object.assign||function(Ae){for(var ce=1;ce<arguments.length;ce++){var de=arguments[ce];for(var oe in de)Object.prototype.hasOwnProperty.call(de,oe)&&(Ae[oe]=de[oe])}return Ae},S.apply(this,arguments)}l(S,"_extends");const R=new B.Ay("slack-kit"),w=85,Y=52,Q=["ArrowLeft"],Z=["ArrowRight"],ee=Q.concat("ArrowUp"),_e=Z.concat("ArrowDown");let Ee=l(class extends t.PureComponent{setVisibleTabs(ce){this.setState(()=>({numOfVisibleTabsShown:ce}))}onResize(){var ce,de,oe,$,re,ue,te,ae,H,U;const N=this.props.orientation===g.t4.Horizontal,K=N?(ce=this.tabsContainerRef)===null||ce===void 0||(de=ce.current)===null||de===void 0?void 0:de.clientWidth:(oe=this.tabsContainerRef)===null||oe===void 0||($=oe.current)===null||$===void 0?void 0:$.clientHeight;if(!K)return;const W=N?w:Y,J={outerElement:(re=this.tabsContainerRef)===null||re===void 0||(ue=re.current)===null||ue===void 0?void 0:ue.getBoundingClientRect(),innerElement:(te=this.lastVisibleTabRef)===null||te===void 0||(ae=te.current)===null||ae===void 0?void 0:ae.getBoundingClientRect(),totalTabsLength:this.props.tabs.length,numOfVisibleTabsShown:this.state.numOfVisibleTabsShown,childElements:(H=this.tabsContainerRef)===null||H===void 0||(U=H.current)===null||U===void 0?void 0:U.children};E({...J,threshold:W,containerSize:K,isHorizontal:N},this.setVisibleTabs),this.setState(()=>({isResizeCalculationCompleted:!0}),()=>{var q,ie;return(ie=(q=this.props).onTabsResized)===null||ie===void 0?void 0:ie.call(q)})}componentDidMount(){this._isMounted=!0;const{maxSize:ce}=this.props;if(ce&&!this.resizeListener){var de;this.resizeListener=(0,V.A)(this.onResize),this.resizeListener.observe((de=this.tabsContainerRef)===null||de===void 0?void 0:de.current)}}componentDidUpdate(ce,de){var oe;const{defaultTabId:$,tabs:re,manualTabActivation:ue}=this.props;var te;((te=(oe=ce.tabs)===null||oe===void 0?void 0:oe.length)!==null&&te!==void 0?te:0)!==re.length&&this.updateSelectedTab(),$!==ce.defaultTabId&&$&&this.selectTab($,void 0);const ae=de.numOfVisibleTabsShown!==this.state.numOfVisibleTabsShown,H=de.selectedTabId!==this.state.selectedTabId&&!ue;(ae||H)&&this.updateFocusedTabIndex(),this.focusWhenVisible&&(this.focusWhenVisible=!1,this.focus())}componentWillUnmount(){if(this._isMounted=!1,this.resizeListener){var ce;(ce=this.resizeListener)===null||ce===void 0||ce.disconnect(),this.resizeListener=null}}onFocus(ce){const{focusedTabIndex:de}=this.state,oe=this.getTabIndexById(ce.target.id);oe!==de&&this.focusTab(oe)}onKeyDown(ce){const de=ce.key;if(ce.shiftKey||ce.metaKey||ce.ctrlKey||ce.altKey)return;const $=this.props.orientation==="vertical",re=$?_e:Z,ue=$?ee:Q;if(!["Home","End"].concat(re,ue).includes(de))return;const ae=re.includes(de),H=ue.includes(de);ce.preventDefault(),ae&&this.onNextArrow(ce),H&&this.onPreviousArrow(ce),de==="Home"&&this.onHome(ce),de==="End"&&this.onEnd(ce)}isSelectedTabVisible(){return this.getVisibleTabIds().includes(this.state.selectedTabId)}getHiddenTabs(){const{tabs:ce}=this.props,{numOfVisibleTabsShown:de}=this.state;return ce.slice(de,ce.length)}getVisibleTabs(){var ce,de;const{tabs:oe,maxSize:$}=this.props;if(!!!$)return oe;const ue=((ce=this)===null||ce===void 0||(de=ce.state)===null||de===void 0?void 0:de.numOfVisibleTabsShown)||oe.length;return oe.length===ue?oe:oe.slice(0,ue).concat({id:this.overflowTabId})}getVisibleTabIds(){return this.getVisibleTabs().map(ce=>{let{id:de}=ce;return de})}getTabById(ce){var de;return(de=this.props.tabs)===null||de===void 0?void 0:de.find(oe=>oe.id===ce)}getTabIndexById(ce){return this.getVisibleTabIds().indexOf(ce)}onHome(ce){if(this.state.focusedTabIndex===0)return;const{onTabWillChange:de,manualTabActivation:oe,onTabChange:$}=this.props,re=this.getVisibleTabIds(),ue=0;if(this.focusTab(ue),oe)return;const te=re[ue];te!==this.overflowTabId&&(de==null?void 0:de(te))!==!1&&this.setState(()=>({selectedTabId:te}),()=>{$==null||$(te,ce)})}onEnd(ce){const de=this.getVisibleTabIds(),oe=de.length-1;if(this.state.focusedTabIndex===oe)return;const{onTabWillChange:$,manualTabActivation:re,onTabChange:ue}=this.props;if(this.focusTab(oe),re)return;const te=de[oe];te!==this.overflowTabId&&($==null?void 0:$(te))!==!1&&this.setState(()=>({selectedTabId:te}),()=>ue==null?void 0:ue(te,ce))}onNextArrow(ce){const{onTabWillChange:de,manualTabActivation:oe,onTabChange:$}=this.props,re=this.getVisibleTabIds(),ue=this.getTabIndexById(ce.target.id),te=ue>=re.length-1?0:ue+1;if(this.focusTab(te),oe)return;const ae=re[te];ae!==this.overflowTabId&&(de==null?void 0:de(ae))!==!1&&this.setState(()=>({selectedTabId:ae}),()=>$==null?void 0:$(ae,ce))}onPreviousArrow(ce){const{onTabWillChange:de,manualTabActivation:oe,onTabChange:$}=this.props,re=this.getVisibleTabIds(),ue=this.getTabIndexById(ce.target.id),te=ue===0?re.length-1:ue-1;if(this.focusTab(te),oe)return;const ae=re[te];ae!==this.overflowTabId&&(de==null?void 0:de(ae))!==!1&&this.setState(()=>({selectedTabId:ae}),()=>$==null?void 0:$(ae,ce))}getNextTabId(){const{defaultTabId:ce,tabs:de,currentTabId:oe}=this.props,$=ce?this.getTabIndexById(ce):void 0,re=oe?this.getTabIndexById(oe):void 0;return oe&&re?oe:ce&&$?ce:de[0].id}updateSelectedTab(){if(!this._isMounted||!this.props.tabs.length)return;const ce=this.getNextTabId();ce!==this.state.selectedTabId&&this.setState(()=>({selectedTabId:ce}))}focus(){if(this.isHidden)return this.focusWhenVisible=!0,!1;this.focusWhenVisible=!1;const{current:ce}=this.focusedTabRef;if(ce)return ce.focus(),!0;const de=this.props.currentTabId||this.state.selectedTabId,oe=this.getTabIndexById(de)||0;return this.focusTab(oe),!0}focusTab(ce){this.setState(()=>({focusedTabIndex:ce}))}selectTab(ce,de){const{onTabWillChange:oe,onTabChange:$}=this.props,re=this.getTabById(ce);if(!re)return null;if((oe==null?void 0:oe(ce))!==!1){if(re.isExternalLink){var ue;return(ue=re.onClick)===null||ue===void 0?void 0:ue.call(re,ce,de)}return this.setState(()=>({selectedTabId:ce}),()=>{if($==null||$(ce,de),this.props.focusOnFirstFocusableChildOnChange){const te=this.panelRef&&this.panelRef.current,ae=(0,x.Fp)(te);ae==null||ae.focus()}}),null}}updateFocusedTabIndex(){const ce=this.isSelectedTabVisible()?this.state.selectedTabId:this.overflowTabId;this.setState(()=>({focusedTabIndex:this.getVisibleTabIds().indexOf(ce)}))}onTabClick(ce,de){var oe;const $=this.getTabById(ce);$&&($.isExternalLink||this.selectTab($.id,de),$==null||(oe=$.onClick)===null||oe===void 0||oe.call($,$.id,de))}get isHidden(){return!!this.props.maxSize&&!this.state.isResizeCalculationCompleted}renderOverflowTabLabel(ce){const de=R.t("More\u2026",{fallbackHash:"4ac8baf107e91d808d6840701812f4abed7fa3b5",fallbackHashNs:"mentions"});if(this.isSelectedTabVisible())return de;const oe=this.getTabById(ce);if(!oe)return de;const $=oe["aria-label"]||oe.label||oe.title;return!$||!O($)?de:R.t("More: {selectedTabLabel}",{selectedTabLabel:$,fallbackHash:"4ac8baf107e91d808d6840701812f4abed7fa3b5",fallbackHashNs:"mentions"})}renderTabsItem(ce,de){const{tabs:oe,fullWidthMenu:$,orientation:re,iconPosition:ue,focusOnMount:te}=this.props,ae=this.state.focusedTabIndex===de,H=ae?this.focusedTabRef:void 0,U=ce.autoClogProps?{...this.autoClogProps,...ce.autoClogProps,elementType:C.ElementType.TAB}:this.autoClogProps,N=de===oe.length-1?this.lastVisibleTabRef:void 0,K=N?(0,P.A)(H,N):H,W=this.props.currentTabId||this.state.selectedTabId,J=W===ce.id;return ce.id===this.overflowTabId?t.createElement(d,{renderMenu:this.renderOverflowMenu,position:"bottom-left",label:this.renderOverflowTabLabel(W),isSelected:!this.isSelectedTabVisible(),isFocused:ae,ref:K,id:ce.id,key:ce.id}):t.createElement(o.A,{key:ce.id,id:ce.id,icon:ce.icon,svgIcon:ce.svgIcon,customIcon:ce.customIcon,label:ce.label||ce.title,onClick:this.onTabClick,autoClogProps:U,isSelected:J,isFocused:ae,focusOnMount:te,isDisabled:ce.isDisabled,fullWidth:$||re==="vertical",titleCount:ce.titleCount,maxTitleCount:ce.maxTitleCount,"aria-label":ce["aria-label"],"aria-describedby":ce["aria-describedby"],"data-qa":ce["data-qa"]||"tabs_item","aria-haspopup":ce["aria-haspopup"],ref:K,formatCount:this.props.formatCount,isLoading:ce.isLoading,isCountLoading:ce.isCountLoading,iconPosition:ue,className:ce.className,contextMenuAriaLabel:ce.contextMenuAriaLabel,contextMenuTemplate:ce.contextMenuTemplate})}renderTabsItems(){return this.getVisibleTabs().map((de,oe)=>{typeof de.label!="string"&&!t.isValidElement(de.label)&&typeof de.title!="string"&&!t.isValidElement(de.title)&&!de["aria-label"]&&((0,L.Cu)()||(0,L.b3)())&&(0,F.Wo)().error("Tabs requires either a label of type string, or an aria-label.");const $=this.renderTabsItem(de,oe);return de.renderWrapper?t.createElement(t.Fragment,{key:de.id},de.renderWrapper($)):$})}renderOverflowMenu(ce){var de;const{selectedTabId:oe}=this.state,$=(de=this.getHiddenTabs())===null||de===void 0?void 0:de.map(re=>({label:re.label||re.title,id:re.id,click:ue=>this.onTabClick(re.id,ue),key:re.id,type:c.A.radio,checked:re.id===oe,icon:re.svgIcon?t.createElement(r.A,S({size:"18"},re.svgIcon)):null,className:"c-tabs__tab_overflow_menu_item"}));return t.createElement(a.a,S({width:"200px"},ce,{template:$}))}renderTabPanelLabel(ce){const de=this.getTabById(ce);if(!de)return;const oe=de["aria-label"]||de.label||de.title;if(O(oe))return oe}render(){var ce;const{fullHeight:de,fullWidthMenu:oe,className:$,orientation:re,tabMenuClassnames:ue,tabPanelClassnames:te,ariaLabel:ae,currentTabId:H,maxSize:U}=this.props,N=H||this.state.selectedTabId;var K;const W=(K=(ce=this.getTabById(N))===null||ce===void 0?void 0:ce.content)!==null&&K!==void 0?K:"",J=(0,n.A)($,{"c-tabs__tab_container--full_height":de,"c-tabs__tab_container--vertical":re==="vertical","c-tabs__tab_menu--overflow_ellipsis":!!U}),q=(0,n.A)(ue,"c-tabs__tab_menu",{"c-tabs__tab_menu--full_width":oe,"c-tabs__tab_menu--vertical":re==="vertical","c-tabs__tab_menu--hidden":this.isHidden}),ie=(0,n.A)(te,{"c-tabs__tab_panel--vertical":re==="vertical"});return t.createElement("div",{className:J,"data-qa":"tabs_full_height_class"},t.createElement("div",{role:"tablist",className:q,"data-qa":"tabs_full_width_class",onKeyDown:this.onKeyDown,onFocus:this.onFocus,"aria-orientation":re,"aria-label":ae,ref:this.tabsContainerRef},this.renderTabsItems()),W&&t.createElement(f.A,{tabContent:W,fullHeight:de,ref:this.panelRef,className:ie,"aria-label":this.renderTabPanelLabel(N)}))}constructor(ce){var de;super(ce),(0,M.v)(this,["onKeyDown","onFocus","onTabClick","onResize","renderOverflowMenu","setVisibleTabs"]),this.focusedTabRef=t.createRef(),this.panelRef=t.createRef(),this.tabsContainerRef=t.createRef(),this.lastVisibleTabRef=t.createRef(),this.resizeListener=null,this._isMounted=!1,this.focusWhenVisible=!1,ce.autoClogProps&&(this.autoClogProps={...ce.autoClogProps,elementType:C.ElementType.TAB});const oe=ce.currentTabId||ce.defaultTabId||((de=ce.tabs[0])===null||de===void 0?void 0:de.id),$=this.getTabIndexById(oe);this.state={selectedTabId:oe,focusedTabIndex:$!==-1?$:0,numOfVisibleTabsShown:this.getVisibleTabs().length,isResizeCalculationCompleted:!1},this.overflowTabId=`sk-overflow-tab-${(0,D.A)()}`}},"Tabs");Ee.displayName="Tabs",Ee.defaultProps={onTabChange:s.A,orientation:"horizontal",iconPosition:"right",manualTabActivation:!1,focusOnFirstFocusableChildOnChange:!0};const G=Ee},934423:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(296540),n=e(863467),s=e(120229);const a=l(c=>{let{children:r,duration:o,svgIconProps:u,toastClasses:m,position:i,offsetX:d,offsetY:_,showCloseButton:h,onCloseComplete:p,shouldAutoFade:A,shouldSkipToastDismissal:v,closeButtonClasses:E,svgIconClassName:f,announceContentAsAssertive:g}=c;return t.createElement(s.Ay,{fadeDelay:o,svgIconClassName:f,svgIconProps:u,toastClasses:m,offsetX:d,offsetY:_,position:i,showCloseButton:h,onCloseComplete:p,shouldAutoFade:A,shouldSkipToastDismissal:v,closeButtonClasses:E},t.createElement(n.z,{assertive:g},r))},"Toast");a.displayName="Toast",a.defaultProps={duration:6e3}},79669:(j,T,e)=>{"use strict";e.d(T,{F:()=>t,n:()=>n});const t={small:"small",medium:"medium",large:"large"},n={small:22,medium:26,large:32}},104355:(j,T,e)=>{"use strict";e.d(T,{A:()=>Y,L:()=>R});var t=e(296540),n=e(528919),s=e(42302),a=e(796857),c=e(168776),r=e(133426),o=e(396386),u=e(895707),m=e(658160),i=e(934861),d=e(730563),_=e(280099),h=e(403109),p=e(650380),A=e(190999),v=e(61629),E=e(861621),f=e(960454),g=e(616125),y=e(135891),I=e(744199),O=e(20328),M=e(43335),C=e(494853),P=e(325846),L=e(590671),x=e(981927),F=e(298559),V=e(843997),B=e(885850),D=e(129318);function S(){return S=Object.assign||function(Q){for(var Z=1;Z<arguments.length;Z++){var ee=arguments[Z];for(var _e in ee)Object.prototype.hasOwnProperty.call(ee,_e)&&(Q[_e]=ee[_e])}return Q},S.apply(this,arguments)}l(S,"_extends");let R=l(class extends t.Component{renderChannelToken(Z){const{channel:ee,showMemberCounts:_e,isSelected:Ee,channelHasNonUniqueName:G}=this.props;let Ae;return(0,o.LI)(ee)?Ae=t.createElement(h.Ay,{id:(0,m.e)(ee),className:"c-token_channel"}):(0,o.yz)(ee)?Ae=t.createElement(p.A,{mpim:ee,className:"c-token_channel",isActive:Ee}):Ae=t.createElement(_.A,{channel:ee,className:"c-token_channel",displayFormerNames:!1,showFilledIcon:!0,showMemberCounts:_e,showTeamForLocalChannel:G}),t.createElement("span",{className:Z,"data-qa":"token_channel"},Ae)}renderContent(){const{isLoading:Z,isUnknown:ee,isError:_e,isMemberError:Ee,isTeamError:G,isInvalid:Ae,channel:ce,memberId:de,teamName:oe,userGroupId:$,channelSection:re,contentInnerClassName:ue,emailTeam:te}=this.props;let ae=(0,n.A)("c-token_content__inner",ue);return Z&&!Ae?(ae+=" c-token_content__inner--loading",this.renderLoadingToken(ae)):ee?(ae+=" c-token_content__inner--unknown",this.renderUnknownToken(ae)):_e?(ae+=" c-token_content__inner--error",this.renderErrorToken(ae)):te?(ae+=" c-token_content__inner--email_with_team_icon",this.renderEmailTokenWithTeamIcon(ae)):de&&Ee?(ae+=" c-token_content__inner--error",this.renderMemberErrorToken(ae)):de?(ae+=" c-token_content__inner--member",this.renderMemberToken()):ce?this.renderChannelToken(ae):oe&&G?(ae+=" c-token_content__inner--error",this.renderTeamErrorToken(ae)):oe?(ae+=" c-token_content__inner--team",this.renderTeamToken(ae)):re?(ae+=" c-token_content__inner--channel_section",this.renderChannelSectionToken(ae)):$?(ae+=" c-token_content__inner--usergroup",this.renderUserGroupToken(ae)):this.renderPlainToken(ae)}renderErrorToken(Z){const{label:ee}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement("span",{className:"c-token__error_icon_container"},t.createElement(g.A,{size:"18",name:"warning","data-qa":"token_error_icon"})),t.createElement("span",{className:(0,n.A)(Z,"c-token_content__label"),"data-qa":"token_error"},ee))}renderLoadingToken(Z){const{size:ee,label:_e}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement("span",{className:"c-token__loading_icon_container"},t.createElement(d.A,S({},ee?{size:ee}:{},{"data-qa":"token_loading_icon"}))),t.createElement("span",{className:(0,n.A)(Z,"c-token_content__label"),"data-qa":"token_loading"},_e))}renderMemberToken(){const{forceRealName:Z,isDisabled:ee,memberId:_e,size:Ee}=this.props;return t.createElement(h.Ay,{id:_e,isDeactivated:ee,showPresence:!1,showTooltip:!1,useShortMode:!0,forceRealName:Z,showStatus:!1,className:"c-token--member c-token__avatar margin_right_25","data-qa":"token_member",tokenSize:Ee})}renderMemberErrorToken(Z){const{forceRealName:ee,isDisabled:_e,memberId:Ee,size:G}=this.props;return t.createElement(h.Ay,{id:Ee,isDeactivated:_e,showPresence:!1,showTooltip:!1,useShortMode:!0,forceRealName:ee,showStatus:!1,className:(0,n.A)(Z,"c-token--member c-token__avatar"),"data-qa":"token_member",tokenSize:G})}renderIcon(){const{icon:Z,svgIcon:ee}=this.props;return ee?t.createElement("span",{className:"c-token_content__icon"},t.createElement(g.A,S({"data-qa":"token_plain_icon",inline:!0,size:"inherit"},ee))):Z?t.createElement(v.A,{"data-qa":"token_plain_icon",size:"inherit",className:"c-token_content__icon",type:Z,inline:!0}):null}renderPlainToken(Z){const{label:ee}=this.props;return t.createElement("span",{className:Z},this.renderIcon(),t.createElement("span",{className:"c-token_content__label","data-qa":"token_plain_label"},t.createElement(r.A,{text:ee,inputIsEscaped:!0,emojiSize:c.lw.MEDIUM})))}renderEmailTokenWithTeamIcon(Z){const{icon:ee,label:_e,emailTeam:Ee}=this.props;return t.createElement("span",{className:Z},ee&&t.createElement(v.A,{"data-qa":"token_email_with_team_icon_icon",size:"inherit",className:"c-token_content__icon margin_right_50",type:ee,inline:!0}),t.createElement("span",{className:"c-token_content__label margin_right_25","data-qa":"token_email_with_team_icon_content_label"},t.createElement(r.A,{text:_e,inputIsEscaped:!0,emojiSize:c.lw.MEDIUM})),Ee&&t.createElement("span",{className:"c-member__secondary_content"},t.createElement(y.A,{team:Ee,"data-qa":"token_email_with_team_icon",size:h.Cg,className:"c-member__team_icon"})))}renderTeamToken(Z){const{teamId:ee,teamName:_e}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement(y.A,{id:ee,size:26,className:"c-token__team_icon","data-qa":"token_team_icon"}),t.createElement("span",{className:(0,n.A)(Z,"c-token_content__label"),"data-qa":"token_team_name"},_e))}renderTeamErrorToken(Z){const{teamId:ee,teamName:_e}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement(y.A,{id:ee,size:26,className:"c-token__team_icon","data-qa":"token_team_icon_error"}),t.createElement("span",{className:(0,n.A)(Z,"c-token_content__label"),"data-qa":"token_team_name_error"},_e))}renderChannelSectionToken(Z){const{channelSection:ee}=this.props;return ee?t.createElement("span",{className:(0,n.A)(Z,"c-token_content__label")},t.createElement(a.A,{channelSection:ee})):null}renderUnknownToken(Z){const{label:ee}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement("span",{className:"c-token__unknown_icon_container"},t.createElement(g.A,{size:"18",name:"emoji-missing",variation:"filled","data-qa":"token_unknown_icon"})),t.createElement("span",{className:(0,n.A)(Z,"c-token_content__label"),"data-qa":"token_unknown"},ee))}renderUserGroupToken(Z){const{userGroupId:ee}=this.props;return t.createElement(A.A,{id:ee,showDescription:!1,className:(0,n.A)(Z,"c-token_content__label")})}render(){const{isDisabled:Z,isInvalid:ee,isError:_e,memberId:Ee,isMemberError:G,isTeamError:Ae,isUnknown:ce,isLoading:de,isSelected:oe,size:$,hoverText:re,tabIndex:ue,contentEditable:te,className:ae,onMouseDown:H,enableProfileHoverCard:U,customizeProfileHoverCardProps:N,isRestricted:K}=this.props,W=(0,n.A)("c-token",ae,`c-token--${$}`,{"c-token--selected":oe,"c-token--disabled":Z,"c-token--invalid":ee,"c-token--restricted":K,"c-token--error":_e||G||Ae,"c-token--unknown":ce,"c-token--loading":de}),J=this.renderContent();let q=J;re&&J?q=t.createElement(I.Ay,{tip:re},J):Ee&&U&&(q=(0,O.yN)({...N||{},memberId:Ee,children:J}));const ie=this.props.renderIcon(this.props);return t.createElement("span",{className:W,"data-id":this.props["data-id"],"data-qa":this.props["data-qa"],tabIndex:ue,contentEditable:te,onMouseDown:H},t.createElement("span",{className:"c-token__content","data-qa":"token_content"},q),ie)}},"Token");R.displayName="Token",R.defaultProps={"data-qa":"select_token",isDisabled:!1,isInvalid:!1,isError:!1,isUnknown:!1,isLoading:!1,isSelected:!1,size:E.hu.MEDIUM,renderIcon:s.A,forceRealName:!1,contentEditable:!1,channelHasNonUniqueName:!1};const w=l((Q,Z)=>{const{entityId:ee,disableIdParsing:_e}=Z;let Ee;(0,P.A)(ee)&&!_e&&(Ee=ee);let G,Ae;if(((0,L.Ay)(ee)||(0,L.JV)(ee))&&!_e){const ue=(0,D._J)(Q,ee);ue&&(G=ee,Ae=(0,i.F1)(ue))}let ce;(0,C.A)(ee)&&!_e&&(ce=(0,V.xe)(Q,ee));let de;(0,x.A)(ee)&&!_e&&(de=ee);const oe=(0,B.OL)(Q,ee),$=(0,B.MS)(Q);let re;return(0,M.A)(ee)&&oe&&(re=(0,u.i)($,oe)),{channel:oe,memberId:Ee,teamName:Ae,teamId:G,userGroupId:de,channelSection:ce,channelHasNonUniqueName:re}},"mapStateToProps"),Y=(0,f.nM)((0,F.N)(w,null)(R))},744199:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>x,PK:()=>E,Ws:()=>M,YU:()=>d.Y,n1:()=>f});var t=e(296540),n=e(389610),s=e(487335),a=e(276868),c=e(868578),r=e(110010),o=e(438920),u=e(867937),m=e(790665),i=e(372848),d=e(40279),_=e(364009),h=e(45798),p=e(426170),A=e(999882);function v(){return v=Object.assign||function(V){for(var B=1;B<arguments.length;B++){var D=arguments[B];for(var S in D)Object.prototype.hasOwnProperty.call(D,S)&&(V[S]=D[S])}return V},v.apply(this,arguments)}l(v,"_extends");const E=300,f=60,g=3,y=3;let I=l(class{track(B){this.instance&&B!==this.instance&&this.instance.hide(),this.instance=B}stopTracking(B){B===this.instance&&(this.instance=void 0)}hideActive(){this.instance&&(this.instance.hide(),this.instance=void 0)}},"TooltipManager");const O=new I;function M(){O.hideActive()}l(M,"hideVisibleTooltip");function C(V){const B=l(D=>((D==null?void 0:D.offsetWidth)||0)<((D==null?void 0:D.scrollWidth)||0)||((D==null?void 0:D.offsetHeight)||0)<((D==null?void 0:D.scrollHeight)||0),"retIsTruncated");if(V!=null&&V.querySelector){const D=V.querySelector(".c-truncate");if(D)return B(D)}return B(V)}l(C,"isElementTruncated");function P(V,B){return V.width.toFixed(2)===(B==null?void 0:B.width.toFixed(2))&&V.height.toFixed(2)===(B==null?void 0:B.height.toFixed(2))&&V.left.toFixed(2)===(B==null?void 0:B.left.toFixed(2))&&V.right.toFixed(2)===(B==null?void 0:B.right.toFixed(2))&&V.top.toFixed(2)===(B==null?void 0:B.top.toFixed(2))&&V.bottom.toFixed(2)===(B==null?void 0:B.bottom.toFixed(2))}l(P,"areBoundsEqual");const L=t.forwardRef((V,B)=>{let{children:D,position:S=_.yX.Top,delay:R=150,shouldFade:w=!0,tip:Y,tipClassName:Q,tipArrowOffset:Z,"data-qa":ee,status:_e=d.Y.Info,offsetX:Ee=0,offsetY:G=0,zIndex:Ae="menu",shouldForceVisible:ce=!1,shouldOnlyShowWhenTruncated:de=!1,onShow:oe,onHide:$,onClick:re,maxWidth:ue,hideFromScreenReader:te=!1,automaticallyPositionTip:ae=!0,tipAnchorRef:H,...U}=V;const N=t.Children.only(D),{windowRef:K}=(0,t.useContext)(r.M),W=(0,t.useRef)(),J=(0,t.useRef)(null),q=(0,t.useRef)(),ie=(0,t.useRef)(!1),[Te,Me]=(0,t.useState)(!1),[ke,Pe]=(0,t.useState)(!1),[Ie,X]=(0,t.useState)(!1),[ne,fe]=(0,t.useState)(),be=(0,t.useContext)(m.A),Be=C(q.current),We=Be||!de,Re=ce||Te||ke,ve=!!ne&&We,xe=(0,t.useMemo)(()=>(0,p.P)(J,B),[B]),He=(0,t.useCallback)((wt,On)=>ae?{top:wt,left:On}:void 0,[ae]),je=(0,t.useMemo)(()=>`sk-tooltip-${(0,A.A)()}`,[]),Ke=(0,t.useCallback)(()=>{X(!0)},[]),[ht,dt]=(0,o.i)(Ke),Ve=(0,t.useMemo)(()=>({id:je,hide:()=>{dt(),ie.current&&X(!1),$==null||$()}}),[je,dt,$]),Je=(0,t.useCallback)(()=>{dt(),O.stopTracking(Ve)},[Ve,dt]),Ge=(0,t.useCallback)(()=>{ce||be?X(!0):ht(R),oe==null||oe({isTruncated:Be}),O.track(Ve)},[ce,be,oe,Be,Ve,ht,R]),Le=(0,t.useCallback)(()=>{Je(),Ie&&(X(!1),$==null||$())},[Je,Ie,$]),Mt=(0,t.useCallback)(wt=>{N.props.onKeyDown&&N.props.onKeyDown(wt),wt.which===a._f&&Ie&&be&&(wt.nativeEvent.stopImmediatePropagation(),wt.stopPropagation(),X(!1))},[X,Ie,be,N.props]),Dt=(0,t.useCallback)(wt=>{N.props.onMouseEnter&&N.props.onMouseEnter(wt),Me(!0),Ie||(W.current=wt)},[N.props,Ie]),pt=(0,t.useCallback)(wt=>{N.props.onFocus&&N.props.onFocus(wt),be&&Pe(!0)},[N.props,be]),Qt=(0,t.useCallback)(wt=>{N.props.onMouseLeave&&N.props.onMouseLeave(wt),Me(!1),W.current=void 0},[N.props]),Nt=(0,t.useCallback)(wt=>{N.props.onBlur&&N.props.onBlur(wt),Pe(!1)},[N.props]);(0,t.useEffect)(l(function(){q.current||(q.current=(0,s.findDOMNode)(J.current))},"syncChildDOMNodeRef")),(0,t.useEffect)(()=>(ie.current=!0,()=>{ie.current=!1}),[]),(0,u.A)(l(function(){let On=q.current;if(H!=null&&H.current&&(On=(0,s.findDOMNode)(H.current)),Re&&On){const Zt=ne,Mn=On.getClientRects();let Wn=Mn[0];if(W.current){const xt=W.current,Vt=Array.from(Mn).find(Se=>xt.clientY>=Se.top&&xt.clientY<=Se.bottom&&xt.clientX>=Se.left&&xt.clientX<=Se.right);Vt&&(Wn=Vt)}if(!Wn)return;const xn=K.deref(),gn=xn?xn.scrollX||xn.pageXOffset:0,An=xn?xn.scrollY||xn.pageYOffset:0,vt={height:Wn.height,width:Wn.width,left:Wn.left+gn,right:Wn.right+gn,top:Wn.top+An,bottom:Wn.bottom+An};P(vt,Zt)||fe(vt)}},"maybeCalculateContentBounds"),[Re,H]),(0,u.A)(l(function(){ve&&Re?Ge():Le()},"showOrHideTooltip"),[ve,Re]);const bt=N.props["aria-label"],Yt=(0,t.useMemo)(()=>bt===Y||te?h.t0:{"aria-describedby":Ie?je:void 0},[bt,te,Ie,Y,je]),fn=(0,t.useMemo)(()=>t.cloneElement(N,{...U,...N.props,...Yt,onClick:re||N.props.onClick,onFocus:pt,onBlur:Nt,onKeyDown:Mt,onMouseEnter:Dt,onMouseLeave:Qt,"data-sk":"tooltip_parent"}),[Yt,N,Nt,re,pt,Mt,Dt,Qt,U]),Tt=(0,t.useMemo)(()=>{if(Z)return Z;if(ne)return ne.width/2},[ne,Z]),sn=(0,t.useMemo)(()=>({position:S,arrowOffset:Tt,status:_e,className:Q,"data-qa":ee,maxWidth:ue}),[ee,ue,S,_e,Q,Tt]),mn=(0,t.useMemo)(()=>Ie?t.createElement(i.AM,{isOpen:Ie,position:S,targetBounds:ne,overlayClassName:"c-popover c-popover--no-pointer",offsetX:Ee,offsetY:G,allowanceX:g,allowanceY:y,key:"tooltip-popover",zIndex:Ae,shouldFocusAfterRender:!1,shouldFade:w,ariaHideApp:!1,tryOppositePosition:!0,id:je,ariaRole:"tooltip",dataAttributes:{qa:"tooltip-popover"},disableOverlaysContextProvider:!0},wt=>{let{position:On,top:Zt,left:Mn,targetBounds:Wn}=wt;const xn=(0,n.A)(Y)?Y({hasKeyboardFocus:be}):Y;return t.createElement(d.A,v({},sn,{position:On,tipBounds:He(Zt,Mn),targetBounds:Wn}),xn)}):null,[Ie,ne,S,Ee,G,Ae,w,Y,be,sn,He,je]);return t.createElement(t.Fragment,null,t.createElement(c.V,{ref:xe},fn),mn)});L.displayName="Tooltip";const x=L;Object.defineProperty({isElementTruncated:C,areBoundsEqual:P},"isElementTruncated",{get:()=>C,set:V=>{C=V}})},640180:(j,T,e)=>{"use strict";e.d(T,{BD:()=>t,Cz:()=>a,LH:()=>c,LX:()=>r,T0:()=>n,UC:()=>s});const t={SharedChannel:"shared_channel",SingleChannelGuest:"ultra_restricted",MultiChannelGuest:"restricted",Member:"regular",ExternalSharedWorkspaceMember:"external_shared_workspace_member"},n={User:"user_invite",UserGroup:"user_group_invite",Email:"email_invite",Member:"member"},s={OpenConfirmationScreen:"add_to_channel_open_confirmation_screen"},a={OpenInviteTypeExternal:"comprehensible_invites_open_invite_type_external",InviteTypeExternalDefaultActionDisallowed:"comprehensible_invites_invite_type_external_default_action_disallowed",OpenSharedChannelNoteExternal:"comprehensible_invites_open_shared_channel_note_external",OpenSharedChannelExternalLimitedExternal:"comprehensible_invites_open_shared_channel_external_limited_external",OpenInviteTypeInternal:"comprehensible_invites_open_invite_type_internal",InviteTypeInternalDefaultActionDisallowed:"comprehensible_invites_invite_type_internal_default_action_disallowed",OpenSharedChannelNoteInternal:"comprehensible_invites_open_shared_channel_note_internal",OpenSharedChannelExternalLimitedInternal:"comprehensible_invites_open_shared_channel_external_limited_internal"};class c{constructor(u){this.ok=u.ok,this.invitee=u.email,this.inviteeType=n.Email,this.accessType=u.inviteType||t.Member,this.error=u.error}}l(c,"InviteResult");function r(o){return o===t.Member||o===t.MultiChannelGuest||o===t.SingleChannelGuest}l(r,"isBaseInviteType")},876470:(j,T,e)=>{"use strict";e.d(T,{Ao:()=>r.k,FQ:()=>c.q,IU:()=>u,Jg:()=>s.G,RW:()=>n.jB,YB:()=>i,fe:()=>t.T,iV:()=>m,mF:()=>a.I,on:()=>o,qU:()=>n.Sv});var t=e(534357),n=e(1162),s=e(33568),a=e(70460),c=e(163570),r=e(686189);const o={Generic:"generic",InternalInviteNotMember:"internal_not_member",InternalInviteNotMemberCanRequest:"internal_not_member_can_request",InternalInviteNoAccess:"internal_no_access",InternalInviteWasPreviouslyConnected:"internal_was_previously_connected",InternalInviteWasPreviouslyConnectedButNotMember:"internal_was_previously_connected_but_not_member",InvalidRecipientTeam:"invalid_recipient_team"};function u(d){return!!d&&!!d.channel}l(u,"isSharedChannelInvite");function m(d){return!!d&&!u(d)&&!i(d)}l(m,"isDirectMessageInvite");function i(d){return!!d&&!!d.shared_workspace}l(i,"isSharedWorkspaceInvite")},459681:(j,T,e)=>{"use strict";e.d(T,{M:()=>t});const t={shareChannelCreate:"share_channel_create",channelInviteModal:"channel_invite_modal",scdmFreeStartTrialBanner:"scdm_free_start_trial_banner",messageLimitTrialOfferModal:"message_limit_trial_offer_modal",huddlesTrialEntryPointModal:"huddles_trial_entry_point_modal",slackConnectTrialEntryPointModal:"slack_connect_trial_entry_point_modal",canvasTrialOfferModal:"canvas_trial_offer_modal",workflowBuilderFreemiumTrialOfferModal:"unlimited_workflows_trial_offer_modal"}},950251:(j,T,e)=>{"use strict";e.d(T,{r:()=>t});const t=l(n=>{var s;return!!(!((s=n)===null||s===void 0)&&s.isUnknown)},"isUnknownAppProfile")},59949:(j,T,e)=>{"use strict";e.d(T,{F:()=>a});var t=e(474722),n=e(23219),s=e(354187);const a=l((c,r,o)=>{const{app_card_color:u,app_user_id:m,auth:i,bot_user:d,config:_,commands:h,config_url:p,enterprise_id:A,desc:v,icons:E,id:f,is_directory_published:g,is_directory_approved:y,is_slack_integration:I,is_distributed:O,is_xoxa_app:M,is_workflow_app:C,long_desc:P,long_desc_formatted:L,org_status:x,name:F,support_url:V,team_id:B,screenshots:D,url:S,youtube_url:R,is_installed:w,sales_home_workflow_app_type:Y}=r;let Q="xoxp";M?Q="xoxa":_&&_.is_custom_integration?Q="custom_integration":I&&(Q="slack");let Z=!0,ee=!1;_?(parseInt(_.date_deleted,10)!==0&&(ee=!0,Z=!1),parseInt(_.date_deleted,10)!==0&&(Z=!1),_.is_active<1&&(Z=!1)):i?i.revoked&&(Z=!1):Z=!1;let _e=null;_&&_.created_by&&(_e=_.created_by),i&&i.created_by&&(_e=i.created_by);const Ee=h?(0,t.A)(h,ue=>({name:ue.name,usage:ue.usage,description:ue.desc})):null;let G=null;M?G={id:m,username:F}:d?G={id:d.id,username:d.username}:(0,n.QR)(o)||(G={id:o.id,username:(0,s.Gt)(o)});let Ae=F;_&&(_.real_name?Ae=_.real_name:_.username&&(Ae=_.username));let ce=v;_&&_.descriptive_label&&(ce=_.descriptive_label);let de=E;_&&_.icons&&(de=_.icons);const oe=d&&d.memberships_count||null,$=_&&_.custom_integration_type||null,re=_&&_.date_created||null;return{app_id:f,home_workspace_id:B,home_enterprise_id:A,service_id:c,config_url:p,app_type:Q,is_workflow_app:C,sales_home_workflow_app_type:Y,org_status:x,profile:{name:Ae,color:u||void 0,description:P,formattedDescription:L,tagline:ce,icons:de,custom_integration_type:$},directory_profile:{screenshots:D,youtube_url:R,home_url:S,support_url:V,is_distributed:O,is_published:g,is_approved:y},installation:{installer_user_id:_e,is_active:Z,is_deleted:ee,memberships_count:oe,date_created:re,is_installed:w},app_user:G,commands:Ee,legacy_app:r}},"buildAppProfileFromLegacyEndpoint")},151586:(j,T,e)=>{"use strict";e.d(T,{A:()=>ae});var t=e(21879),n=e(720903),s=e(149038),a=e(437556),c=e(885850),r=e(881805),o=e(780076),u=e(710596),m=e(354187),i=e(396386),d=e(230319),_=e(746940),h=e(608157),p=e(272831),A=e(815379),v=e(746024),E=e(506039),f=e(238577),g=e(165346),y=e(795669);function I(H){if(H<=0)return"";let U="",N=H;for(;N>0;)N-=1,U=String.fromCharCode("a".charCodeAt(0)+N%26)+U,N=Math.floor(N/26);return U}l(I,"convertNumberToLetterIncrement");const O=["","c","cc","ccc","cd","d","dc","dcc","dccc","cm","","x","xx","xxx","xl","l","lx","lxx","lxxx","xc","","i","ii","iii","iv","v","vi","vii","viii","ix"];function M(H){if(H<=0)return"";const U=H.toString().split("");let N="";for(let J=2;J>=0;J--){const q=parseInt(U.pop()||"0",10);N=(O[q+J*10]||"")+N}const K=U.join("")||"0",W=parseInt(K,10)+1;return Array(W).join("m")+N}l(M,"convertNumberToRomanNumeral");var C=e(649098),P=e(200379),L=e(242499),x=e(306276),F=e(975979),V=e(3477),B=e(969924),D=e(123684);const S=new C.Ay("channel_token"),R=new C.Ay("emoji"),w=l((H,U)=>U.text||"","textToText"),Y=l((H,U)=>`@${U.range}`,"broadcastToText"),Q=l((H,U)=>U.value||"","colorToText"),Z=l((H,U,N)=>{let{linkFormat:K}=N;const{text:W="",url:J=""}=U;if(!W&&!J)return"";if(!W)return J;switch(K){case"default":return W;case"prefer_url":return J;case"bracket":return`[ ${W}: ${J} ]`;default:(0,A.Kh)(K)}},"linkToText"),ee=l((H,U)=>{const N=(0,a.nv)(H,U.user_id);return`@${(0,m.Gt)(N)||U.user_id}`},"userToText"),_e=l((H,U)=>{const N=(0,s.lJ)(H,U.usergroup_id);if(N===!1)return(0,f.A)({userGroupHandle:"",isUnknown:!0,isNonExistent:!0});const K=(0,o.lv)(N);var W;return(0,f.A)({userGroupHandle:K?"":(W=N.handle)!==null&&W!==void 0?W:"",isUnknown:(0,o.mX)(N),isNonExistent:(0,o.lv)(N)})},"userGroupToText"),Ee=l((H,U)=>{const N=(0,c.OL)(H,U.channel_id);var K;const W=(K=(0,u.SB)(H,N,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}))!==null&&K!==void 0?K:"",J=(0,o.mX)(N),q=(0,o.lv)(N),ie=(0,i.Zp)(N),Te=(0,u.bl)(N);return q||ie&&!Te?`#${S.t("private-channel")}`:(0,g.A)({channelName:W,isUnknown:J,isNonExistent:q})},"channelToText"),G=l((H,U,N)=>{let{convertEmoji:K}=N;const W=(0,h.A)(U,{state:H,localize:!1}),J=(0,y.bR)({state:H,locale:(0,C.Yp)(),name:W});return K==="phrase"?(0,v.A)(J||"",{state:H})||"":K==="unicode"&&(U!=null&&U.unicode)&&(0,x.d)(U.unicode)?(0,F.z)({codePointLikeString:U.unicode})||"":K==="unicode"&&!(U!=null&&U.unicode)?(0,E.A)(H,{messageText:W,teamId:(0,r.ZT)(H)}):J??""},"emojiToText"),Ae=l((H,U)=>{const N=(0,B.Lp)(H,U.file_id);return(0,V.SB)(N)||U.file_id},"fileToText"),ce=l((H,U,N)=>{let{convertEmoji:K}=N;const W=(0,h.A)({...U,type:p.Lv.EMOJI},{state:H,localize:!1}),J=(0,y.bR)({state:H,locale:(0,C.Yp)(),name:W});if(K==="phrase"){var q;return(q=(0,v.U)(J||"",U.size||0,{state:H}))!==null&&q!==void 0?q:""}var ie;const Te=(ie=K==="unicode"?(0,E.A)(H,{messageText:W,teamId:(0,r.ZT)(H)}):J)!==null&&ie!==void 0?ie:"";return(0,_.x)(H)?R.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}}",{emojiName:Te,size:U.size}):`${U.size} ${Te} emojis`},"emojiGroupToText"),de=l((H,U)=>!U.timestamp&&U.fallback?U.fallback:(0,P.Yq)(U.timestamp,U.format,{...U.fallback&&{fallbackString:U.fallback}}),"dateToText"),oe=l((H,U)=>{const N=H.workflowBuilder.workflowEditor.variables.list,K=(0,D.x)(N,U.id);return K?`@${K.label}`:U.id},"workflowTokenToText"),$={[p.Lv.TEXT]:w,[p.Lv.USER]:ee,[p.Lv.USERGROUP]:_e,[p.Lv.CHANNEL]:Ee,[p.Lv.BROADCAST]:Y,[p.Lv.DATE]:de,[p.Lv.COLOR]:Q,[p.Lv.LINK]:Z,[p.Lv.EMOJI]:G,[p.Lv.FILE]:Ae,[p.Lv.CANVAS]:Ae,[p.Lv._EMOJI_GROUP]:ce,[p.Lv.WORKFLOWTOKEN]:oe};function re(H){let{indent:U}=H;return!(0,t.A)(U)||U%3===0?"\u2022":U%3===1?"\u25E6":U%3===2?"\u25A0":"\u2022"}l(re,"getUnorderedListCharacter");function ue(H){let{indent:U,incr:N}=H;return!(0,t.A)(U)||U%3===0?N:U%3===1?I(N):U%3===2?M(N):N}l(ue,"getOrderedListCharacter");function te(H,U){return(0,_.x)(H)?(0,d.A)((0,n.A)(U)):U}l(te,"maybeGroupEmojies");function ae(H,U){let{convertEmoji:N="text",linkFormat:K="default"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!U||!U.length)return"";const W=l(ie=>{if(!ie||!ie.elements)return"";const Te=[];return ie.elements.forEach(Me=>{if(!Me||!Me.type)return;const ke=$[Me.type];var Pe;const Ie=(Pe=ke==null?void 0:ke(H,Me,{convertEmoji:N,linkFormat:K}))!==null&&Pe!==void 0?Pe:"";Te.push(Ie)}),Te.join("")},"convertSection"),J=[];return te(H,U[0].elements).forEach(ie=>{if(!(!ie||!ie.type))if((0,L.C)(ie)){const Te=ie.offset||0,Me=ie.indent||0;let ke=1+Te;ie.elements.forEach(Pe=>{const Ie=W(Pe);if(ie.style==="ordered"){const X=ue({indent:Me,incr:ke});J.push(`${X}. ${Ie}.`),ke+=1}else{const X=re({indent:Me});J.push(`${X} ${Ie}.`)}})}else J.push(W(ie))}),J.join(`
`)}l(ae,"convertRichTextToPlainText")},608157:(j,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(272831),n=e(795669),s=e(649098),a=e(873645),c=e(306276);function r(o,u){let{state:m,localize:i}=u;if(!o||o.type!==t.Lv.EMOJI)return"";const d=o.skinTone||o.skin_tone,_=o.unicode;let h;return!_&&d?h=`:${o.name}::skin-tone-${d}:`:!d&&!_?h=`:${o.name}:`:_&&(0,c.d)(_)&&(h=`:${(0,a.qJ)(m,_)}:`),i?(0,n.bR)({state:m,locale:(0,s.Yp)(),name:h})||"":h}l(r,"getEmojiElementAsText")},374615:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(339241),n=e(871323),s=e(693124);function a(){return(0,t.A)(Object.entries(n.N).filter(c=>{let[r,o]=c;return o.is_enabled_by_default}).map(c=>{let[r,o]=c;return(0,s.A)(r)}))}l(a,"getAllBroadcastKeywords")},555759:(j,T,e)=>{"use strict";e.d(T,{A:()=>A});var t=e(339241),n=e(885850),s=e(250100),a=e(396386),c=e(439642),r=e(710596),o=e(630686),u=e(161792),m=e(693124),i=e(963662),d=e(799372),_=e(842842),h=e(380346),p=e(793434);function A(v,E){const f=(0,n.OL)(v,E),g=(0,h.l)(v);if(!f)return[];const y=[];if((0,o.W)(v,E)&&y.push((0,m.A)("BKeveryone")),((0,c.V)(f)||(0,a.yz)(f))&&(!(0,s.N)(f)||(0,o.W)(v,E))&&(0,u.S)(v,E)&&(y.push((0,m.A)("BKchannel")),y.push((0,m.A)("BKhere"))),(0,d.hm)(v)&&(0,a.U_)(f))switch((0,i.dM)(f)){case _.hM.Account:y.push((0,m.A)("BKsf:accountteam",(0,r.SB)(v,f),!0));break;case _.hM.Opportunity:y.push((0,m.A)("BKsf:dealteam",(0,r.SB)(v,f),!0));break;default:break}if(g){const I=(0,n.Pu)(v,p.Q$);(f==null?void 0:f.id)===(I==null?void 0:I.id)&&y.push((0,m.A)("BKassistant:einstein",null,!1,!0))}return(0,t.A)(y)}l(A,"getBroadcastKeywordsForUser")},54774:(j,T,e)=>{"use strict";e.d(T,{kX:()=>s,w2:()=>a});var t=e(127225);function n(c){var r;return(r=c.ownerDocument)===null||r===void 0?void 0:r.defaultView}l(n,"getWindowForElement");function s(){return!1}l(s,"shouldOpenInNewTab");function a(c){return!t.TQ.includes(c)}l(a,"shouldViewNavigateInContext")},458160:(j,T,e)=>{"use strict";e.d(T,{$A:()=>r,ce:()=>c,hO:()=>s});var t=e(296540),n=e(532395);const s=l(o=>({action:n.UiAction.IMPRESSION,uiPage:window.location.href,...o}),"getAuthImpressionTrackParams"),a=l(o=>({action:n.UiAction.CLICK,uiPage:window.location.href,...o}),"getAuthClickTrackParams"),c=l(o=>({uiPage:window.location.href,...o}),"getAuthTrackParams");function r(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const u=(0,t.useRef)(null),m=(0,t.useCallback)(_=>h=>{if(u.current={track:h},o){var p;u==null||(p=u.current)===null||p===void 0||p.track(s(_))}},[u,o]),i=(0,t.useCallback)(_=>()=>{var h;u==null||(h=u.current)===null||h===void 0||h.track(a(_))},[u]),d=(0,t.useCallback)(_=>()=>{var h;u==null||(h=u.current)===null||h===void 0||h.track(c(_))},[u]);return{trackClog:u,trackClogAuthRef:m,clogAuthLoginClick:i,clogAuthLoginAction:d}}l(r,"useAuthClogger")},636606:(j,T,e)=>{"use strict";e.d(T,{gy:()=>n,tN:()=>s,zQ:()=>t});const t={EMPTY:"empty",INVALID:"invalid",INVALID_DOMAIN:"invalid_domain",TOO_MANY:"too_many"},n="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",s={EMAIL:new RegExp(`^${n}$`,"i"),CONTAINS_EMAIL:new RegExp(`${n}`,"i"),DOMAIN:/^@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i}},746024:(j,T,e)=>{"use strict";e.d(T,{A:()=>m,U:()=>u});var t=e(649098),n=e(128263),s=e(795669),a=e(756512),c=e(746940);const r=new t.Ay("emoji");function o(i,d){const _=(0,t.Yp)();return(0,s.WX)({state:i,locale:_,text:d})}l(o,"getLocalizedEmojiName");function u(i,d,_){let{state:h}=_;const p=o(h,i),A=(0,c.x)(h),v=p&&(0,n.Y)(p,d,A);return p?(0,a.DU)()?v:` ${v} `:A?r.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}}",{emojiName:i,size:d}):`${d} ${i} emojis`}l(u,"convertEmojiGroupNameToPhrase");function m(i,d){let{state:_}=d;const h=o(_,i),p=h&&(0,n.A)(h);return h?(0,a.DU)()?p:` ${p} `:i}l(m,"convertEmojiNameToPhrase")},157903:(j,T,e)=>{"use strict";e.d(T,{H:()=>s});var t=e(566401),n=e(917392);function s(a,c){if(!c||(0,t.A)(c))return{name:a};const r=(0,n.A)(a);if(!r)return{name:a};const{name:o,skinTone:u}=r,m=c[o];if(!m||(0,t.A)(m))return{name:a};const i=m.display_alias,d=i??o,_=u?`:${d}::skin-tone-${u}:`:`:${d}:`,h=m.display_url;return{name:_,url:h}}l(s,"getEmojiDisplayInfoFromMap")},153489:(j,T,e)=>{"use strict";e.d(T,{A:()=>s});var t=e(793434);let n;const s=l(()=>{if(n)return n;const a=Object.keys(t.dq).map(c=>c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"));return n=new RegExp(`(^|\\s)(${a.join("|")})(?=$|[\\s|\\?\\.,!])`,"g"),n},"__WEBPACK_DEFAULT_EXPORT__")},930533:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(709703),n=e(649098);const s=new n.Ay("emoji");function a(c){const r=(0,t.A)(c)?c:c.toString(),o={1:()=>s.t("No skin tone"),2:()=>s.t("light skin tone"),3:()=>s.t("medium-light skin tone"),4:()=>s.t("medium skin tone"),5:()=>s.t("medium-dark skin tone"),6:()=>s.t("dark skin tone")},u={"2-3":()=>s.t("left light skin tone and right medium-light skin tone"),"2-4":()=>s.t("left light skin tone and right medium skin tone"),"2-5":()=>s.t("left light skin tone and right medium-dark skin tone"),"2-6":()=>s.t("left light skin tone and right dark skin tone"),"3-2":()=>s.t("left medium-light skin tone and right light skin tone"),"3-4":()=>s.t("left medium-light skin tone and right medium skin tone"),"3-5":()=>s.t("left medium-light skin tone and right medium-dark skin tone"),"3-6":()=>s.t("left medium-light skin tone and right dark skin tone"),"4-2":()=>s.t("left medium skin tone and right light skin tone"),"4-3":()=>s.t("left medium skin tone and right medium-light skin tone"),"4-5":()=>s.t("left medium skin tone and right medium-dark skin tone"),"4-6":()=>s.t("left medium skin tone and right dark skin tone"),"5-2":()=>s.t("left medium-dark skin tone and right light skin tone"),"5-3":()=>s.t("left medium-dark skin tone and right medium-light skin tone"),"5-4":()=>s.t("left medium-dark skin tone and right medium skin tone"),"5-6":()=>s.t("left medium-dark skin tone and right dark skin tone"),"6-2":()=>s.t("left dark skin tone and right light skin tone"),"6-3":()=>s.t("left dark skin tone and right medium-light skin tone"),"6-4":()=>s.t("left dark skin tone and right medium skin tone"),"6-5":()=>s.t("left dark skin tone and right medium-dark skin tone")},m=u[r]?u[r]():null;return m||o[r]&&o[r]()}l(a,"__WEBPACK_DEFAULT_EXPORT__")},128263:(j,T,e)=>{"use strict";e.d(T,{A:()=>o,Y:()=>r});var t=e(649098),n=e(917392),s=e(930533);const a=/_|-/g,c=new t.Ay("emoji"),r=l(function(u,m){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!u||!m)return null;const{name:d,skinTone:_}=(0,n.A)(u)||{};if(!d)return i?c.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}}",{emojiName:u,size:m}):`${m} ${u} emojis`;const h=d.replace(a," "),p=i?c.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}}",{emojiName:h,size:m}):`${m} ${h} emojis`;if(!_)return p;const A=(0,s.A)(_);return A===""?p:i?c.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}} with {skinToneDescription}",{emojiName:h,size:m,skinToneDescription:A}):`${m} ${h} emojis with ${A}`},"makePhraseForEmojiGroup");function o(u){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!u)return u;const{name:i,skinTone:d}=(0,n.A)(u)||{};if(!i)return u;const _=i.replace(a," "),h=c.t("{emojiPhrase} emoji",{emojiPhrase:_});if(!d)return h===""?_:h;const p=(0,s.A)(d);return p===""?h===""?_:h:m?c.t("React with {emojiPhrase} emoji {skinToneDescription}",{emojiPhrase:_,skinToneDescription:p}):c.t("{emojiPhrase} emoji with {skinToneDescription}",{emojiPhrase:_,skinToneDescription:p})}l(o,"__WEBPACK_DEFAULT_EXPORT__")},228062:(j,T,e)=>{"use strict";e.d(T,{U:()=>a});var t=e(135713),n=e(529734);const s="files_explorer_prototype";function a(c){return(0,n.cc)(c)&&(0,t._Z)(c,s)==="on"}l(a,"isFilesExplorerPrototypeEnabled")},273563:(j,T,e)=>{"use strict";e.d(T,{A:()=>n,h:()=>s});const t=/^p?(\d{10})\.?(\d{6})$/;function n(a){return!a||!t.test(a)?null:a.replace(t,"$1.$2")}l(n,"formatMessageTimestamp");function s(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Date.now();if(!a)return null;const c=String((+a/1e3).toFixed(6));return n(c)}l(s,"getFormattedMessageTimestamp")},683669:(j,T,e)=>{"use strict";e.d(T,{UK:()=>u,Z$:()=>a,hZ:()=>r});const t=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],n=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],s=l(function(i,d,_){let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:2,p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;if(i===0)return 0;if(d===_)return parseFloat(i.toFixed(h));const A=p?1024:1e3,v=p?t:n,E=v.findIndex(g=>g.toLowerCase()===d.toLowerCase()),f=v.findIndex(g=>g.toLowerCase()===_.toLowerCase());if(E===-1)throw new Error(`Unknown currentType '${d}' passed to convertToSize`);if(f===-1)throw new Error(`Unknown desiredType '${_}' passed to convertToSize`);return E<f?parseFloat((i/A**(f-E)).toFixed(h)):parseFloat((i*A**(E-f)).toFixed(h))},"convertToSize"),a=l(function(i){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"B",_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(i===0)return{size:0,type:"B"};const p=h?1024:1e3,A=h?t:n;let v=Math.log(i)/Math.log(p);v<1&&(v=-Math.floor(Math.log(Math.abs(v))/Math.log(10)+1));const E=A.findIndex(g=>g.toLowerCase()===d.toLowerCase()),f=Math.max(Math.min(E+Math.floor(v),A.length-1),0);if(E===-1)throw new Error(`Unknown currentType '${d}' passed to convertToSize`);return{size:s(i,d,A[f],_,h),type:A[f]}},"convertToOptimumSize"),c=l(function(i){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(i,"B","KB",d,!1)},"convertBytesToKilobytes"),r=l(function(i){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(i,"B","MB",d,!1)},"convertBytesToMegabytes"),o=l(function(i){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(i,"B","GB",d,!1)},"convertBytesToGigabytes"),u=l(function(i){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(i,"KB","MB",d,!1)},"convertKilobytesToMegabytes"),m=l(function(i){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(i,"KB","GB",d,!1)},"convertKilobytesToGigabytes")},409295:(j,T,e)=>{"use strict";e.d(T,{A:()=>S});var t=e(679946),n=e(692973),s=e(25022),a=e(881805),c=e(449552),r=e(921055),o=e(245843),u=e(535553),m=e(873645),i=e(649098),d=e(598157),_=e(794854),h=e(981927),p=e(43335),A=e(961131),v=e(802631),E=e(437886);function f(R,w,Y){const Q=[];return{text:R.replace(d.Y,(ee,_e,Ee)=>{let G;if((0,A.A)(_e)?G=`<!${(0,E.A)(_e)}>`:(0,v.A)(_e)?G=w?(0,_.A)(Ee):Ee:(0,h.A)(_e)?G=`<!subteam^${_e}|${Ee}>`:(0,p.A)(_e)?G=Y?`<#${_e}|${Ee.substr(1)}>`:void 0:G=`<@${_e}>`,!G)return ee;const ce=`mention-${Q.length+1}-${Date.now()}`;return Q.push({mention:G,placeholder:ce}),ce}),mentions:Q}}l(f,"replaceFormatMentions");const g=/(^|\n)>(?![\W_](?:<|>|[|/\\[\]{}()Dpb](?=\s|$)))(([^\n]*)(\n>[^\n]*)*)/g;function y(R){const w=[];let Y=0;return{text:R.replace(g,Z=>{Y+=1;const ee=`quoted-text-placeholder-${Date.now()}-${Y}`;return w.push({match:Z,placeholder:ee}),ee}),quotedSections:w}}l(y,"replaceQuotedText");var I=e(153489),O=e(793434);const M=/[-[\]{}()*+?.,\\^$|#\s]/g,C=/\n?(6\)|7\))/,P=l(R=>{let w=0;const Y=[];let Q=R.replace((0,I.A)(),(Z,ee,_e,Ee)=>{const G=w;w=Ee+Z.length;const Ae=_e.indexOf("(")!==-1,ce=_e.indexOf(")")!==-1;if((Ae||ce)&&Y.indexOf(_e)===-1&&Y.push(_e),ce&&!Ae){const de=R.substring(G,Ee);if(de.indexOf("(")!==-1&&de.indexOf(")")===-1)return Z}if(Z===`
8)`){const de=R.substring(0,Ee);if(C.test(de))return Z}return O.dq[_e]?`${ee}:${O.dq[_e]}:`:Z});if(Y.length){const Z=Y.map(_e=>_e.replace(M,"\\$&")),ee=new RegExp(`(\\(.+)(${Z.join("|")})(.+\\))`,"g");Q=Q.replace(ee,(_e,Ee,G,Ae)=>O.dq[G]?`${Ee}:${O.dq[G]}:${Ae}`:_e)}return Q},"replace_emoticons_with_colons");var L=e(795669),x=e(247041),F=e(986979),V=e(190145);const B=/(^|\s|\{|\[|\(|&gt;|&lt;|\*|_|\/|"|\u201C|\u2018|')#([^~`!@#$%^&*()+=[\]{}\\|;:'"\u201D\u2019,.<>/?\s]+)/g,D=/(^|\S)( +)(\n|$)/gm;function S(R,w){let{isInternalMessage:Y}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!R||!w)return"";const Q=!Y,Z=(0,u.A)(R),ee=(0,r.ty)(R,"convert_emoticons"),_e=(0,o.A)(R),Ee=(0,V.P)(R),G=!0;let Ae=w,ce=[];Ae=(0,n.A)(Ae),Ae=(0,s.kW)(ce,Ae,{replace_pre:!0,replace_code:!0});const de=f(Ae,Q,G);if(Ae=de.text,Ae=Ae.replace(D,"$1$3"),ee&&!Ee){const $=y(Ae);Ae=$.text,Ae=P(Ae),$.quotedSections.forEach(re=>{Ae=Ae.replace(re.placeholder,()=>re.match)})}if(Q&&(Ae=(0,s.wx)(Ae,"CLEAN",{jumbomoji:Z,allow_intra_word_formatting:!0})),de.mentions.forEach($=>{Ae=Ae.replace($.placeholder,()=>$.mention)}),!i.EZ){const $=(0,a.ZT)(R);Ae=(0,c.dispatchForTeamId)($,(0,L.Z_)({text:Ae,locale:(0,x.JK)()}))}const oe=(0,m.CK)(R);return ce=ce.map($=>{const re={...$},ue=(0,d.A)(re.str,{highlightWords:_e,shouldRenderEmojiAsText:Ee,emojiNames:oe,locale:(0,i.Yp)(),useChannelTagging:G});return re.str=(0,F.A)(ue),Q&&(re.str=(0,s.wx)(re.str,"CLEAN",{jumbomoji:Z,allow_intra_word_formatting:!0})),re}),Ae=(0,s.Ki)(ce,Ae),(0,t.A)(Ae)}l(S,"clean_message_text_with_state")},506039:(j,T,e)=>{"use strict";e.d(T,{A:()=>r});var t=e(605556),n=e.n(t),s=e(994730),a=e(873645);const c=l(function(o){let{messageText:u,teamId:m}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!u||!m)return"";const i=(0,s.A)();return u.replace(i,d=>{const _=(0,a.Zc)(o,{text:d,teamId:m});return _||d})},"replaceTextEmojiWithNative"),r=c;c.propTypes={messageText:n().string,teamId:n().string}},692973:(j,T,e)=>{"use strict";e.d(T,{A:()=>t});const t=l(n=>n?n.replace(/\u00A0/g," ").replace(/\u000D/g,`
`).replace(/\u000A/g,`
`):"","__WEBPACK_DEFAULT_EXPORT__")},342604:(j,T,e)=>{"use strict";e.d(T,{TU:()=>s});const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=10;function s(i,d){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;if(i!==null&&m(i,_,h),d!==null&&m(d,_,h),i!==null&&d!==null&&i>=d)throw new Error(`${i} >= ${d}`);if(i===null){if(d===null){const I=5*10**(h-1);return o(I,h)}const y=r(d,h);return y.toString()<d&&d.slice(h+1)!==""?o(y,h):o(y-1,h)}if(d===null){const y=r(i,h);return o(y+1,h)}const p=r(i,h),A=r(d,h),v=i.slice(h+1),E=d.slice(h+1);if(p===A){const y=c(v,E,_);return`${o(p,h)}.${y}`}const f=p+1;if(f<A)return o(f,h);const g=c(v,null,_);return`${o(p,h)}.${g}`}l(s,"generateKeyBetween");function a(i,d,_){let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:n;if(_===0)return[];if(_===1)return[s(i,d,h,p)];if(d===null){let E=s(i,d,h,p);const f=[E];for(let g=0;g<_-1;g++)E=s(E,d,h,p),f.push(E);return f}if(i===null){let E=s(i,d,h,p);const f=[E];for(let g=0;g<_-1;g++)E=s(i,E,h,p),f.push(E);return f.reverse(),f}const A=Math.floor(_/2),v=s(i,d,h,p);return[...a(i,v,A,h,p),v,...a(v,d,_-A-1,h,p)]}l(a,"generateNKeysBetween");function c(i,d,_){const h=_[0];if(d!==null&&i>=d)throw new Error(`${i} >= ${d}`);if(i.slice(-1)===h||d&&d.slice(-1)===h)throw new Error("trailing zero");if(d){let v=0;for(;(i[v]||h)===d[v];)v+=1;if(v>0)return d.slice(0,v)+c(i.slice(v),d.slice(v),_)}const p=i?_.indexOf(i[0]):0,A=d!==null?_.indexOf(d[0]):_.length;if(A-p>1){const v=Math.round(.5*(p+A));return _[v]}return d&&d.length>1?d.slice(0,1):_[p]+c(i.slice(1),null,_)}l(c,"midpoint");function r(i,d){const _=i.slice(0,d);return Number(_)}l(r,"getIntegerPart");function o(i,d){if(i>=10**d)throw new Error(`Integer overflow at ${i} for fixed length ${d}`);if(i<0)throw new Error(`Integer underflow at ${i} for fixed length ${d}`);return i.toString().padStart(d,"0")}l(o,"formatInteger");function u(i,d){const _=i.length;if(_<d)throw new Error("Invalid integer portion, length too short");if(_===d){const h=i.indexOf(".");if(h>=0)throw new Error(`Unexpected . at position ${h} in string of exact length ${d}`);const p=Number(i);if(isNaN(p))throw new Error(`Invalid integer portion - not a valid integer ${i}`)}else if(i[d]!==".")throw new Error(`Expected . after int_fixed length ${d} and got ${i[d]}`)}l(u,"validateIntegerLength");function m(i,d,_){if(u(i,_),_!==i.length&&i.slice(_).endsWith(d[0]))throw new Error(`Fractional portion must not end with ${d[0]}`)}l(m,"validateOrderKey")},365407:(j,T,e)=>{"use strict";e.d(T,{_i:()=>a});function t(r,o,u,m){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-15;const d=[m.x-o.x,m.y-o.y],_=[u.x-o.x,u.y-o.y],h=[r.x-o.x,r.y-o.y],p=d[0]*d[0]+d[1]*d[1],A=d[0]*_[0]+d[1]*_[1],v=d[0]*h[0]+d[1]*h[1],E=_[0]*_[0]+_[1]*_[1],f=_[0]*h[0]+_[1]*h[1],g=1/(p*E-A*A),y=(E*v-A*f)*g,I=(p*f-A*v)*g;return y>=-i&&I>=-i&&y+I<1+i}l(t,"isPointInTriangle");function n(r,o,u){const m=(u.x-o.x)**2+(u.y-o.y)**2,i=((r.x-o.x)*(u.x-o.x)+(r.y-o.y)*(u.y-o.y))/m;return i<0?(r.x-o.x)**2+(r.y-o.y)**2:i<=1?(o.x-r.x)**2+(o.y-r.y)**2-i**2*m:(r.x-u.x)**2+(r.y-u.y)**2}l(n,"distanceSquarePointToSegment");function s(r,o,u,m){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-15;const d=Math.min(o.x,Math.min(u.x,m.x))-i,_=Math.max(o.x,Math.max(u.x,m.x))+i,h=Math.min(o.y,Math.min(u.y,m.y))-i,p=Math.max(o.y,Math.max(u.y,m.y))+i;return r.x>d&&r.x<_&&r.y>h&&r.y<p}l(s,"pointInTriangleBoundingBox");function a(r,o,u,m){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-15;if(!s(r,o,u,m,i))return!1;const d=i**2;return t(r,o,u,m,0)||n(r,o,u)<=d||n(r,u,m)<=d||n(r,m,o)<=d}l(a,"accurateIsPointInTriangle");var c={accurateIsPointInTriangle:a,isPointInTriangle:t}},149159:(j,T,e)=>{"use strict";e.d(T,{A:()=>i,i:()=>u});var t=e(186653),n=e.n(t),s=e(784045),a=e(339241),c=e(474722),r=e(877500),o=e(801827);const u=n();function m(d){return!d||!d.icons?[]:(0,s.A)((0,a.A)((0,c.A)(d.icons,(_,h)=>{let p=h.replace("image_","");return p=p.replace("image",""),parseInt(p,10)})),[],"desc")}l(m,"getAvailableIconSizes");function i(d,_){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u,p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"icons.image_";const A=(0,o.A)(_,m(d)),v="icons.image",E=(0,r.A)(d,`${p}${A}`),f=(0,r.A)(d,`${v}${A}`,h);return E??f}l(i,"getAppIcon")},979307:(j,T,e)=>{"use strict";e.d(T,{A:()=>s});var t=e(141470),n=e(994315);function s(a){return(0,t.A)(a,(c,r)=>(0,n.A)(r,"data-"))}l(s,"getDataProps")},923814:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>Tn});var t=e(982270),n=e.n(t),s=e(78667),a=e.n(s),c=e(287438),r=e.n(c),o=e(629311),u=e.n(o),m=e(79692),i=e.n(m),d=e(887863),_=e.n(d),h=e(177780),p=e.n(h),A=e(988016),v=e.n(A),E=e(506793),f=e.n(E),g=e(288589),y=e.n(g),I=e(780865),O=e.n(I),M=e(626094),C=e.n(M),P=e(892347),L=e.n(P),x=e(458114),F=e.n(x),V=e(840099),B=e.n(V),D=e(136500),S=e.n(D),R=e(924435),w=e.n(R),Y=e(734615),Q=e.n(Y),Z=e(600094),ee=e.n(Z),_e=e(10938),Ee=e.n(_e),G=e(959579),Ae=e.n(G),ce=e(586764),de=e.n(ce),oe=e(766909),$=e.n(oe),re=e(979800),ue=e.n(re),te=e(983905),ae=e.n(te),H=e(378346),U=e.n(H),N=e(985817),K=e.n(N),W=e(164605),J=e.n(W),q=e(18464),ie=e.n(q),Te=e(632932),Me=e.n(Te),ke=e(970003),Pe=e.n(ke),Ie=e(771412),X=e.n(Ie),ne=e(651301),fe=e.n(ne),be=e(178672),Be=e.n(be),We=e(910521),Re=e.n(We),ve=e(800818),xe=e.n(ve),He=e(312849),je=e.n(He),Ke=e(562485),ht=e.n(Ke),dt=e(202040),Ve=e.n(dt),Je=e(192924),Ge=e.n(Je),Le=e(426409),Mt=e.n(Le),Dt=e(259427),pt=e.n(Dt),Qt=e(841814),Nt=e.n(Qt),bt=e(471600),Yt=e.n(bt),fn=e(39937),Tt=e.n(fn),sn=e(398027),mn=e.n(sn),wt=e(815194),On=e.n(wt),Zt=e(504396),Mn=e.n(Zt),Wn=e(59767),xn=e.n(Wn),gn=e(168221),An=e.n(gn),vt=e(784045),xt=e(474722),Vt=e(327422),Se=e(59116),St=e(808058),Ce=e(793434),Ne=e(505080),ze=e(801827);function Oe(Qn){return(0,vt.A)((0,xt.A)((0,Vt.A)(Qn),zn=>parseInt(zn,10)),null,"desc")}l(Oe,"makeOrderedIconSizes");function Fe(Qn){return(0,Se.A)(Qn,zn=>Oe(zn))}l(Fe,"makeOrderedNamedIconSizes");const _t={24:An(),32:Mn(),36:mn(),72:Yt(),192:pt()},ft={24:xn(),32:On(),36:Tt(),72:Nt(),192:Mt()},Ct={fancy:{20:Ge(),24:Ve(),32:ht(),36:je(),48:xe(),72:Re(),192:Be(),360:fe(),512:X(),1024:Pe()},frowny:{20:Me(),24:ie(),32:J(),36:K(),48:U(),72:ae(),192:ue(),360:$(),512:de(),1024:Ae()},neutral:{20:Ee(),24:ee(),32:Q(),36:w(),48:S(),72:B(),192:F(),360:L(),512:C(),1024:O()},sad_surprise:{20:y(),24:f(),32:v(),36:p(),48:_(),72:i(),192:u(),360:r(),512:a(),1024:n()}},$t=24,rn=Oe(ft),un=Fe(Ct),hn="image_";function pn(Qn){const zn=[];return(0,St.A)(Qn,(Hn,Kn)=>{if(Kn.indexOf(hn)!==0)return;const os=Kn.slice(hn.length);zn.unshift(parseInt(os,10))}),zn}l(pn,"getSizeOptionsFromProfile");function Tn(Qn){let{size:zn,teamOrEnterpriseId:Hn,memberId:Kn,avatarHash:os,emoji:et,isBot:Et=!1,botImages:we=!1,slackbotFeels:tt=null,isUserHidden:Rt=!1}=Qn,It,Jt,an=!1;if(!zn||!Et&&!Rt&&(!Hn||!Kn||!os)&&!et)return{};if(et)return{emoji:et,isDefault:!1};if(Rt){const Ft=(0,ze.A)(zn,rn),Vn=(0,ze.A)(zn*2,rn);It=_t[Ft||$t],Jt=_t[Vn||$t],an=!0}else if(Kn===Ce.Q$&&tt&&Ct[tt]){const Ft=(0,ze.A)(zn,un[tt]),Vn=(0,ze.A)(zn*2,un[tt]);It=Ct[tt][Ft||$t],Jt=Ct[tt][Vn||$t]}else if(!Et||Hn&&Kn&&os){const Ft=(0,ze.A)(zn),Vn=(0,ze.A)(zn*2),Pt=(0,Ne.Z)(Hn);It=`${Pt}${Hn}-${Kn}-${os}-${Ft}`,Jt=`${Pt}${Hn}-${Kn}-${os}-${Vn}`}else if(we){const Ft=pn(we),Vn=(0,ze.A)(zn,Ft),Pt=(0,ze.A)(zn*2,Ft);It=we[hn+Vn],Jt=we[hn+Pt]}if(Et&&!It&&!Jt&&!et){const Ft=(0,ze.A)(zn,rn),Vn=(0,ze.A)(zn*2,rn);It=ft[Ft||$t],Jt=ft[Vn||$t],an=!0}return{imageUrl:It,imageUrl2x:Jt,emoji:et,isDefault:an}}l(Tn,"getMemberProfileImage")},326023:(j,T,e)=>{"use strict";e.d(T,{d:()=>a});var t=e(437556),n=e(81527),s=e(965112);function a(c,r){if(!r)return"member";const o=(0,t.nv)(c,r);let u="member";return(0,s.g)(o)?u="external":(0,n.Ez)(o)&&!(0,n.Yd)(o)?u="ra":(0,n.Yd)(o)&&(u="ura"),u}l(a,"getMemberType")},894635:(j,T,e)=>{"use strict";e.d(T,{A:()=>s});var t=e(143591),n=e(574022);function s(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250;const r=l(o=>{!Array.isArray(o)||!o.length||requestAnimationFrame(()=>a(o))},"observer");return new t.A((0,n.A)(r,c))}l(s,"getResizeObserver")},975979:(j,T,e)=>{"use strict";e.d(T,{z:()=>n});var t=e(306276);const n=l(s=>{let{codePointLikeString:a}=s;if(!(0,t.d)(a))return;const c=16;return a.split("-").map(r=>String.fromCodePoint(parseInt(r,c))).join("")},"getUnicodeFromCodePointLikeString")},73363:(j,T,e)=>{"use strict";e.d(T,{A:()=>t});function t(){var n,s;return(s=(n=window.navigator)===null||n===void 0?void 0:n.userAgent)!==null&&s!==void 0?s:"no-ua"}l(t,"getUserAgent")},798160:(j,T,e)=>{"use strict";e.d(T,{C9:()=>o,Gl:()=>c,VQ:()=>r,XU:()=>n,dL:()=>s,rU:()=>a,x_:()=>u});var t=e(135713);const n=l(m=>{var i;return(i=(0,t._Z)(m,"help_shareables_tm")==="on")!==null&&i!==void 0?i:!1},"isHelpShareablesTmExperimentOn"),s=l(m=>{var i;return(i=(0,t._Z)(m,"help_articles_in_search")==="treatment")!==null&&i!==void 0?i:!1},"isHelpArticlesInSearchExperimentTreatment"),a=l(m=>{var i;return(i=(0,t._Z)(m,"help_smarticles")==="on")!==null&&i!==void 0?i:!1},"isHelpSmarticlesExperimentOn"),c=l(m=>{var i;return(i=(0,t._Z)(m,"help_navigation")==="on")!==null&&i!==void 0?i:!1},"isHelpNavigationExperimentOn"),r=l(m=>{var i;return(i=(0,t._Z)(m,"help_tour")==="treatment")!==null&&i!==void 0?i:!1},"isHelpTourExperimentTreatment"),o=l(m=>{var i;return(i=(0,t._Z)(m,"help_tips")==="on")!==null&&i!==void 0?i:!1},"isHelpTipsExperimentOn"),u=l(m=>{var i;return(i=(0,t._Z)(m,"help_slider_a11y_translations")==="on")!==null&&i!==void 0?i:!1},"isHelpSliderA11yTranslationsExperimentOn")},156635:(j,T,e)=>{"use strict";e.d(T,{v:()=>n});var t=e(756512);function n(s){const a=(0,t.Yp)().toLowerCase();return a==="en-us"?s:`/intl/${a}${s}`}l(n,"getLocalizedPath")},581659:(j,T,e)=>{"use strict";e.d(T,{A:()=>a});var t=e(127225),n=e(649098);const s=new n.Ay("view");function a(c){let{tab:r,experimentSlackAiInboxGroupOn:o}=c,u;switch(r){case t.k6.Home:u=o?s.t("Channels",{ns:"search"}):s.t("Home");break;case t.k6.DMs:u=s.t("DMs");break;case t.k6.Activity:u=o?s.t("Inbox"):s.t("Activity");break;case t.k6.Later:u=s.t("Later");break;case t.k6.SalesHome:u=s.t("Sales");break;case t.k6.Search:u=s.t("Search");break;case t.k6.Canvases:u=s.t("Canvases",{fallbackHash:"e2d397a06197e996f48faa9c0abfd3a2a80d15de",fallbackHashNs:"search"});break;case t.k6.Files:u=s.t("Files",{ns:"search"});break;case t.k6.FilesPrototype:u=s.t("Content",{ns:"search"});break;case t.k6.Channels:u=s.t("Channels",{ns:"search"});break;case t.k6.People:u=s.t("People",{ns:"search"});break;case t.k6.Platform:u=s.t("Automations",{fallbackHash:"4186e4384191cd367f88423e6488c26e96a3807d",fallbackHashNs:"search"});break;case t.k6.ExternalConnections:case t.k6.ExternalConnectionsTemp:u=s.t("External");break;case t.k6.Huddles:u=s.t("Huddles",{fallbackHash:"cfed893a3dc774c76cbd9efb20d641aad32eff33x`",fallbackHashNs:"search"});break;case t.k6.Assistant:u=s.t("Assistant");break;case t.k6.Browse:u=s.t("More");break;case t.k6.Lists:u=s.t("Lists");break;case t.k6.Solutions:u=s.t("Solutions");break;case t.k6.SlackKitPlayground:u="Slack Kit Playground";break;case t.k6.BBM:u="";break;default:u="";break}return u}l(a,"getTabLabel")},996537:(j,T,e)=>{"use strict";e.d(T,{A:()=>I,o:()=>g});var t=e(614175),n=e(774165),s=e(127225),a=e(3280),c=e(182013),r=e(189382),o=e(362887),u=e(47801),m=e(380346),i=e(228062),d=e(811326),_=e(632468),h=e(584877),p=e(781660),A=e(282233),v=e(104);const E=!1,f={[s.k6.Home]:O=>!(0,o.R)(O),[s.k6.Activity]:O=>(0,h.Ty)(O)&&!(0,v.x3)(O),[s.k6.DMs]:O=>(0,h.Ty)(O),[s.k6.FilesPrototype]:O=>(0,i.U)(O)&&(0,h.Ty)(O),[s.k6.SlackKitPlayground]:O=>(0,_.b)()&&(0,h.Ty)(O),[s.k6.Solutions]:O=>(0,d.CC)(O)&&(0,h.Ty)(O),[s.k6.Later]:O=>(0,r.Bp)(O),[s.k6.Assistant]:O=>(0,m.l)(O)&&(0,h.Ty)(O),[s.k6.Canvases]:O=>(0,a.F)(O)&&!(0,o.R)(O),[s.k6.Files]:O=>!(0,o.R)(O)&&(0,h.Ty)(O),[s.k6.Channels]:O=>!(0,o.R)(O)&&(0,h.Ty)(O),[s.k6.Platform]:()=>!0,[s.k6.People]:O=>!(0,o.R)(O)&&(0,h.Ty)(O),[s.k6.Huddles]:O=>(0,u.Wd)(O)&&!(0,A.LS)(O)&&!(0,o.R)(O),[s.k6.SalesHome]:O=>(0,t.hx)(O),[s.k6.Lists]:O=>(0,c.teamHasFullListsAccess)(O)&&!(0,o.R)(O),[s.k6.ExternalConnections]:O=>(0,p.y)(O,E),[s.k6.ExternalConnectionsTemp]:O=>!(0,p.y)(O,E)},g=l(O=>(0,n.Mz)(M=>f[O](M)),"makeSelectVisibleTab"),I=l((O,M)=>g(M)(O),"getTabVisibility")},927892:(j,T,e)=>{"use strict";e.d(T,{A:()=>S});var t=e(256075),n=e(692232),s=e(116633),a=e(182013),c=e(458939),r=e(934861),o=e(129318),u=e(614175),m=e(3280),i=e(852330),d=e(135713),_=e(248710),h=e(799372),p=e(16e3),A=e(667208),v=e(228062),E=e(380346),f=e(632468),g=e(811326),y=e(781660),I=e(649616),O=e(282233),M=e(771552),C=e(85979),P=e(457754),L=e(180427),x=e(85866),F=e(529734);const V=!1,B={[n.D.KeyboardShortcuts]:()=>!0,[n.D.WhatsNew]:()=>!0,[n.D.RecentCanvases]:()=>!1,[n.D.CanvasesSharedWithYou]:R=>(0,d._Z)(R,"canvas_collection_prototype")==="on"&&(0,m.F)(R),[n.D.CanvasesCreatedByYou]:R=>(0,d._Z)(R,"canvas_collection_prototype")==="on"&&(0,m.F)(R),[n.D.BrowseCanvases]:R=>(0,m.F)(R),[n.D.RecentFiles]:()=>!0,[n.D.FilesCreatedByYou]:()=>!0,[n.D.FilesSharedWithYou]:()=>!0,[n.D.BrowseExternalWorkspace]:A.U,[n.D.BrowseChannels]:()=>!0,[n.D.BrowsePeople]:()=>!0,[n.D.ExternalOrganizations]:R=>(0,y.y)(R,V),[n.D.ExternalOrganization]:R=>(0,y.y)(R,V),[n.D.ExternalPeople]:()=>!1,[n.D.SlackConnectChannels]:()=>!1,[n.D.SlackConnectInvitations]:R=>(0,y.y)(R,V),[n.D.BrowseUserGroups]:R=>!(0,c.sV)(R)&&(0,r.qR)((0,o.H7)(R)),[n.D.RecentPlatform]:R=>(0,p.Bf)(R),[n.D.SlackConnect]:R=>(0,t.A)(R),[n.D.BrowseApps]:R=>(0,p.pr)(R),[n.D.Channel]:()=>!0,[n.D.AppSpace]:()=>!0,[n.D.Quip]:()=>!0,[n.D.BrowseShortcuts]:R=>(0,p.Bf)(R),[n.D.BrowseWorkflowsManagedByYou]:R=>(0,p.EH)(R),[n.D.BrowseYourWorkflowTemplates]:R=>(0,p.M7)(R),[n.D.BrowseWorkflowTemplates]:R=>(0,p.fh)(R),[n.D.OrgDirectory]:()=>!0,[n.D.Page]:()=>!0,[n.D.Threads]:()=>!0,[n.D.Thread]:()=>!0,[n.D.Profile]:()=>!0,[n.D.FileDetails]:()=>!0,[n.D.Help]:()=>!0,[n.D.UserGroup]:()=>!0,[n.D.Feedback]:()=>!0,[n.D.List]:R=>(0,a.isListsEnabled)(R),[n.D.ListRecord]:R=>(0,a.isListsEnabled)(R),[n.D.ListRecordDetails]:R=>(0,a.isListsEnabled)(R),[n.D.ListRecordThread]:R=>(0,a.isListsEnabled)(R),[n.D.ListRecordHistory]:R=>(0,a.isListsEnabled)(R),[n.D.MyItems]:R=>(0,a.isListsMyItemsEnabled)(R),[n.D.ComposeList]:()=>!0,[n.D.Compose]:()=>!0,[n.D.QuipCommentThread]:()=>!0,[n.D.QuipCommentStream]:()=>!0,[n.D.QuipActivityHistory]:()=>!0,[n.D.QuipAutomationsOverview]:()=>!0,[n.D.Canvas]:()=>!0,[n.D.ChannelCanvas]:()=>!0,[n.D.CanvasBrowser]:R=>(0,m.F)(R),[n.D.PaidBenefits]:()=>!0,[n.D.Setup]:()=>!0,[n.D.SearchEmpty]:()=>!0,[n.D.AboutWorkspace]:()=>!1,[n.D.Unknown]:()=>!0,[n.D.MorePeopleSidebar]:()=>!0,[n.D.MoreCanvasesSidebar]:()=>!0,[n.D.AppPopout]:()=>!0,[n.D.ChannelList]:()=>!0,[n.D.BrowseFiles]:()=>!0,[n.D.BrowseFilesPrototype]:R=>(0,v.U)(R),[n.D.SlackKitPlayground]:()=>(0,f.b)(),[n.D.Solutions]:R=>(0,g.CC)(R),[n.D.BrowseLists]:R=>(0,a.teamHasFullListsAccess)(R),[n.D.DmsList]:()=>!0,[n.D.BrowseList]:()=>!0,[n.D.ActivityList]:()=>!0,[n.D.LaterList]:R=>(0,s.c3)(R),[n.D.Search]:()=>!0,[n.D.MoreFilesSidebar]:()=>!0,[n.D.MoreListsSidebar]:()=>!0,[n.D.FilesPrototypeSidebar]:R=>(0,v.U)(R),[n.D.MoreChannelsSidebar]:()=>!1,[n.D.MorePlatformSidebar]:()=>!0,[n.D.MoreHuddlesSidebar]:()=>!0,[n.D.MoreExternalConnectionsSidebar]:R=>(0,y.y)(R,V),[n.D.HelpBrowser]:()=>!0,[n.D.Huddle]:()=>!0,[n.D.BrowseHuddles]:R=>(0,O.LS)(R),[n.D.KeyboardShortcutsBrowser]:()=>!0,[n.D.WhatsNewBrowser]:()=>!0,[n.D.FeedbackBrowser]:()=>!0,[n.D.ExternalWorkspaceAllowedOrgPane]:()=>!1,[n.D.ExternalWorkspaceSidebar]:()=>!1,[n.D.ExternalWorkspacePeopleBrowser]:()=>!1,[n.D.ExternalWorkspaceChannelBrowser]:()=>!1,[n.D.PostEvent]:()=>!1,[n.D.AiSummaryDetails]:R=>(0,i._z)(R),[n.D.DailyDigest]:R=>(0,i.sS)(R),[n.D.MoreAiSummarySidebar]:R=>(0,i.M1)(R),[n.D.SearchSummary]:R=>(0,i.lQ)(R),[n.D.AssistantList]:R=>(0,E.l)(R),[n.D.Today]:R=>(0,_._)(R),[n.D.Record]:R=>(0,h.hm)(R),[n.D.RecordChannelCreate]:R=>(0,h.hm)(R),[n.D.SalesAdministration]:()=>!0,[n.D.SalesBulkGrid]:()=>!0,[n.D.SalesHome]:R=>(0,u.hx)(R),[n.D.SalesLogActivity]:()=>!0,[n.D.SalesListViewBrowser]:()=>!0,[n.D.SalesSidebar]:()=>!0,[n.D.SalesNotifications]:()=>!0,[n.D.AssistantThread]:()=>!0,[n.D.ChannelFiles]:R=>(0,d._Z)(R,"channel_canvas_in_bbar")==="on",[n.D.AiApp]:R=>(0,M.wP)(R),[n.D.WorkflowDetails]:R=>(0,d._Z)(R,"workflow_progress_fe")==="on",[n.D.CatchUpCards]:R=>(0,I.GF)(R),[n.D.BookmarksFolder]:R=>(0,C.U6)(R),[n.D.InboxList]:R=>(0,P.y)(R),[n.D.ActionItems]:R=>(0,P.y)(R),[n.D.Inbox]:R=>(0,P.y)(R),[n.D.CatchUpList]:R=>(0,I.BK)(R),[n.D.BBMMain]:R=>(0,L.mL)(R)&&(0,x.V)(R),[n.D.BBMWorkspaceSwitcher]:R=>(0,L.mL)(R)&&(0,x.V)(R),[n.D.SearchInChannel]:R=>(0,F.k8)(R),[n.D.SolutionsAddToChannel]:R=>(0,g.P)(R)},S=l((R,w)=>B[w](R),"getViewTypeVisibility")},788309:(j,T,e)=>{"use strict";e.d(T,{BB:()=>u,GP:()=>m,Uf:()=>i});var t=e(612104),n=e.n(t),s=e(446632),a=e(42302),c=e(180491);const r={didTimeout:!0,timeRemaining:()=>0},o=(0,s.A)(()=>!!(window.requestIdleCallback&&window.cancelIdleCallback));function u(_,h){return o()?window.requestIdleCallback(_,h):window.setTimeout(()=>_(r))}l(u,"requestIdleCallback");function m(_){return o()?window.cancelIdleCallback(_):window.clearTimeout(_)}l(m,"cancelIdleCallback");function i(_){return new c.S(function(h,p){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.A;const v=u(function(){var E=(0,t.coroutine)(function*(f){try{const g=yield c.S.resolve(_(f));h(g)}catch(g){p(g)}});return function(f){return E.apply(this,arguments)}}());A(()=>{m(v)})})}l(i,"awaitIdleCallback");const d={IDLE_DEADLINE_FALLBACK:r}},321486:(j,T,e)=>{"use strict";e.d(T,{A:()=>s});var t=e(707476);let n=null;function s(){if(n===null){var a,c;n=(document==null||(a=document.documentElement)===null||a===void 0||(c=a.dataset)===null||c===void 0?void 0:c.app)===t.u.APP_POPOUTS}return n}l(s,"isAppPopouts")},64249:(j,T,e)=>{"use strict";e.d(T,{A:()=>t});function t(n,s){return!n||!s?!1:s(n)?!0:t(n.parentElement||void 0,s)}l(t,"isContainedBy")},251772:(j,T,e)=>{"use strict";e.d(T,{h:()=>a});var t=e(437556),n=e(23219),s=e(631299);function a(c,r){if(!r)return!1;const o=(0,t.nv)(c,r);return!(0,n.zU)(o)&&!!r&&!!(0,s.t6)(c,r)}l(a,"isDnd")},398958:(j,T,e)=>{"use strict";e.d(T,{A:()=>t});function t(n){var s;return!n||n.metaKey||n.ctrlKey?!1:((s=n.key)===null||s===void 0?void 0:s.length)===1}l(t,"isPrintableKeyEvent")},590550:(j,T,e)=>{"use strict";e.d(T,{Dl:()=>a,Mk:()=>n,qF:()=>s});var t=e(381965);const n=["about","canvas"],s=["app","about","settings"];function a(c){return n.indexOf(c)!==-1||s.indexOf(c)!==-1||Object.keys(t.e).indexOf(c)!==-1}l(a,"isValidTabRoute")},862838:(j,T,e)=>{"use strict";e.d(T,{L:()=>t,c:()=>n});const t=["invitations","contacts"];function n(s){return t.includes(s)}l(n,"isValidViewName")},925827:(j,T,e)=>{"use strict";e.d(T,{A:()=>s});var t=e(707476);let n=null;function s(){if(n===null){var a,c;n=(document==null||(a=document.documentElement)===null||a===void 0||(c=a.dataset)===null||c===void 0?void 0:c.app)===t.u.WORKFLOW_BUILDER}return n}l(s,"isWorkflowBuilder")},327408:(j,T,e)=>{"use strict";e.d(T,{A:()=>n});const t=/^\d+$/;function n(s){return t.test(s)}l(n,"looksLikeHelpArticleId")},946073:(j,T,e)=>{"use strict";e.d(T,{A:()=>n});const t=/^Ft[A-Z0-9]{7,}$/;function n(s){return t.test(s)}l(n,"looksLikeHermesTriggerId")},663074:(j,T,e)=>{"use strict";e.d(T,{A:()=>n});const t=/^(quip|Qp):F[A-Z0-9]{8,}-(Qpv:[a-z0-9:]{8,}&Qpvs:[0-9]{1,})?$/;function n(s){return s?t.test(s):!1}l(n,"looksLikeQuipHistoryId")},381965:(j,T,e)=>{"use strict";e.d(T,{e:()=>n,k:()=>s});var t=e(692232);const n={recent:t.D.RecentPlatform,"workflows-managed-by-you":t.D.BrowseWorkflowsManagedByYou,workflows:t.D.BrowseShortcuts,templates:t.D.BrowseWorkflowTemplates,apps:t.D.BrowseApps};function s(a){return n[a]}l(s,"maybeGetAutomationsTab")},137252:(j,T,e)=>{"use strict";e.d(T,{Ey:()=>r,Hn:()=>o,gs:()=>u,mw:()=>i,nS:()=>m});var t=e(315526),n=e(683669),s;let a=!!(!(window==null||(s=window.performance)===null||s===void 0)&&s.memory);function c(){return a?window.performance.memory.jsHeapSizeLimit:null}l(c,"getMemoryLimit");function r(){return a?window.performance.memory.totalJSHeapSize:null}l(r,"getMemoryTotal");function o(){return a?window.performance.memory.usedJSHeapSize:null}l(o,"getMemoryUsed");function u(){return a}l(u,"supportsMemoryMeasurement");function m(_){const h=_/1e3/1e3;return`${h<100?h.toPrecision(3):Math.round(h)} MB`}l(m,"humanizeBytes");function i(_,h){const p=(0,t.A)(_,A=>{let{memory:v}=A;return v[h]||0});return Math.ceil((0,n.UK)(p))}l(i,"sumMemoryMetricsByKey"),Object.defineProperties({},{SUPPORTS_MEMORY_MEASUREMENT:{get:()=>a,set:_=>{a=_}}})},477659:(j,T,e)=>{"use strict";e.d(T,{Pw:()=>i,bC:()=>o,wn:()=>m,zC:()=>u});var t=e(219477),n=e(174888),s=e(682520),a=e(931233),c=e(64249);const r={};function o(d){let{channelId:_,functions:h,getInputInstance:p,threadTs:A,viewContext:v}=d;if(!p)throw new Error('Missing required "getInputInstance" param');const E=`${v}-${_}-${A}`;return r[E]&&(0,s.Ay)().warn(`Registering duplicate input (key: "${E}")`),r[E]={clear:()=>{var f,g;(f=p())===null||f===void 0||(g=f.clear)===null||g===void 0||g.call(f)},clearHistory:()=>{var f,g;(f=p())===null||f===void 0||(g=f.clearHistory)===null||g===void 0||g.call(f)},focus:()=>{var f,g;(f=p())===null||f===void 0||(g=f.focus)===null||g===void 0||g.call(f)},getContents:()=>{var f,g;return(f=p())===null||f===void 0||(g=f.getContents)===null||g===void 0?void 0:g.call(f)},getDisplayValue:()=>{var f,g;return(f=p())===null||f===void 0||(g=f.displayValue)===null||g===void 0?void 0:g.call(f)},getLength:()=>{var f,g;return(f=p())===null||f===void 0||(g=f.getLength)===null||g===void 0?void 0:g.call(f)},getSelection:()=>{var f,g;return(f=p())===null||f===void 0||(g=f.getSelection)===null||g===void 0?void 0:g.call(f)},getText:()=>{var f,g;return(f=p())===null||f===void 0||(g=f.value)===null||g===void 0?void 0:g.call(f)},hasFocus:()=>{var f,g;return(f=p())===null||f===void 0||(g=f.hasFocus)===null||g===void 0?void 0:g.call(f)},insertContentsAtCursor:function(){for(var f=arguments.length,g=new Array(f),y=0;y<f;y++)g[y]=arguments[y];var I,O;(I=p())===null||I===void 0||(O=I.insertContentsAtCursor)===null||O===void 0||O.call(I,...g)},isEmpty:()=>{var f,g;return!!(!((f=p())===null||f===void 0||(g=f.isEmpty)===null||g===void 0)&&g.call(f))},isEnabled:()=>{var f,g;return!!(!((f=p())===null||f===void 0||(g=f.isEnabled)===null||g===void 0)&&g.call(f))},prependContents:f=>{var g,y;(g=p())===null||g===void 0||(y=g.prependContents)===null||y===void 0||y.call(g,f)},setContents:function(){for(var f=arguments.length,g=new Array(f),y=0;y<f;y++)g[y]=arguments[y];var I,O;(I=p())===null||I===void 0||(O=I.setContents)===null||O===void 0||O.call(I,...g)},setCursor:function(){for(var f=arguments.length,g=new Array(f),y=0;y<f;y++)g[y]=arguments[y];var I,O;(I=p())===null||I===void 0||(O=I.setCursor)===null||O===void 0||O.call(I,...g)},setCursorAtEnd:()=>{var f,g;(f=p())===null||f===void 0||(g=f.setCursorAtEnd)===null||g===void 0||g.call(f)},setText:function(){for(var f=arguments.length,g=new Array(f),y=0;y<f;y++)g[y]=arguments[y];var I,O;(I=p())===null||I===void 0||(O=I.value)===null||O===void 0||O.call(I,...g)},...h},()=>{delete r[E]}}l(o,"registerInputAuto");function u(d){let{viewContext:_,channelId:h,threadTs:p}=d;return r[`${_}-${h}-${p||void 0}`]}l(u,"getInputProxy");function m(d){if(!d||!(0,a.A)(d))return null;let _,h,p;return(0,c.A)(d,v=>v.getAttribute("data-message-input")?(_=v.getAttribute("data-channel-id"),h=v.getAttribute("data-thread-ts"),p=v.getAttribute("data-view-context"),!0):!1)?u({viewContext:p,channelId:_,threadTs:h}):null}l(m,"getProxyForElement");function i(){let{channelId:d,threadTs:_}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const h=`${d}-${_}`,p=Object.keys(r);return(0,t.A)(p,A=>(0,n.A)(A,h))}l(i,"isInputRegistered")},578089:(j,T,e)=>{"use strict";e.d(T,{Q:()=>t});const t=l(()=>null,"noopNull")},931179:(j,T,e)=>{"use strict";e.d(T,{R2:()=>A,bP:()=>v,ec:()=>I,fU:()=>y,p6:()=>C,qe:()=>O,x2:()=>L,yj:()=>P});var t=e(346688),n=e(991235),s=e(682520),a=e(119110),c=e(113574),r=e(881805),o=e(646592),u=e(826);const m="notification:sent",i="notification:received",d="notification:opened",_="notification:quick_reply",h="notification:read_in_app",p=100;function A(x){try{return JSON.stringify(x)}catch(F){return(0,s.Wo)().warn("encodeNotificationTracePassthrough json stringify error",F),""}}l(A,"encodeNotificationTracePassthrough");function v(x){try{const{traceId:F,parentSpanId:V}=JSON.parse(x);return{traceId:F,parentSpanId:V}}catch(F){return(0,s.Wo)().warn("decodeNotificationTracePassthrough json parse error",F),{traceId:"",parentSpanId:""}}}l(v,"decodeNotificationTracePassthrough");function E(x){let{tracer:F,name:V,parentSpanId:B,traceId:D}=x;return F.createSpan({name:V,samplingOptions:{sampleType:o.nl.ALWAYS},options:{parentSpanId:B,traceId:D}})}l(E,"createSpan");function f(x){let{tracer:F,name:V,parentSpanId:B,traceId:D}=x;const S=E({tracer:F,name:V,parentSpanId:B,traceId:D});return S.close(),S}l(f,"createAndCloseSpan");function g(x,F){let{tracer:V,message:B}=F;const D=f({tracer:V,name:m}),S=(0,a.y3)()?"desktop":"browser",R=(0,c.WR)(x),w=(0,r.ZT)(x),Y=(0,t.A)(B==null?void 0:B.ts,".",""),Q=B==null?void 0:B.channel,Z=`${R}-${Q}-${Y}`;return D.addTags({platform:S,encoded_user_id:R,encoded_team_id:w,encoded_channel_id:Q,message_ts:Y,notification_id:Z}),D}l(g,"createAndCloseNotificationSentSpan");function y(x,F){let{message:V}=F;if(!V||!(V!=null&&V.ts)||!(V!=null&&V.channel))return;const B=(0,u.E)({state:x});let D,S;const R=[];if((V==null?void 0:V.type)==="desktop_notification"&&(V!=null&&V.trace_ctx))D=V.trace_ctx["x-b3-traceid"],S=V.trace_ctx["x-b3-spanid"];else{const Y=g(x,{tracer:B,message:V});R.push(Y),S=Y.getId(),D=Y.getTraceId()}const w=f({name:i,tracer:B,traceId:D,parentSpanId:S});return R.push(w),B.reportSpans(R),{traceId:D,parentSpanId:S}}l(y,"traceNotificationSentAndReceived");function I(x,F){let{notificationTracePassthroughData:V}=F;if(!V)return;const{traceId:B,parentSpanId:D}=V,S=(0,u.E)({state:x}),R=f({tracer:S,traceId:B,parentSpanId:D,name:d});S.reportSpans([R])}l(I,"traceNotificationOpened");function O(x,F){let{notificationTracePassthroughData:V,clientMsgId:B}=F;if(!V||!B)return;const{traceId:D,parentSpanId:S}=V,R=(0,u.E)({state:x}),w=f({tracer:R,traceId:D,parentSpanId:S,name:_});w.addTags({reply_message_client_message_id:B}),R.reportSpans([w])}l(O,"traceNotificationQuickReply");let M={};function C(x){return!!M[x]}l(C,"messageHasPendingNotificationTrace");function P(x,F){let{timestamp:V,notificationTracePassthroughData:B}=F;if(!B)return;(0,n.A)(M)>p&&((0,s.Ay)({state:x}).error("notification-tracing-utils: notificationTracePassThroughData exceeded maximum size"),M={});const{traceId:D,parentSpanId:S}=B,R=(0,u.E)({state:x}),w=E({tracer:R,traceId:D,parentSpanId:S,name:h});M[V]=w}l(P,"openNotificationReadSpan");function L(x,F){let{timestamp:V}=F;if(!V)return;const B=M[V];if(!B)return;const D=(0,u.E)({state:x});B.close(),D.reportSpans([B]),delete M[V]}l(L,"closeAndReportNotificationReadSpan")},515722:(j,T,e)=>{"use strict";e.d(T,{Kk:()=>m,Oh:()=>d,iu:()=>_,px:()=>o,rk:()=>u});var t=e(726666),n=e(710596),s=e(919781),a=e(687648),c=e(579026);function r(p){const{hostname:A,pathname:v,search:E}=p;if(!A||!v)return;const f=A.split("."),g=v.split("/").slice(1);if(!(0,a.A)(A)||g.length<2)return;const y=g[0];switch(y){case"messages":case"archives":case"conversation":case"files":case"search":case"lists":break;default:return}const I=f[0],O=(0,t.A)(E.split("?")),M=O&&(0,s.nT)(O);let C;return M&&M.thread_ts&&(C=M.thread_ts),{team:I,type:y,path:g,threadTs:C}}l(r,"parsePermalinkFromUrlObject");function o(p){return u((0,c.Ay)(p))}l(o,"getPermalinkIdentifier");function u(p){const A=r(p);if(!A)return;const{path:v}=A;return v?v&&v[1]:!1}l(u,"getPermalinkIdentifierFromUrlObject");function m(p){let{team:A,channelId:v,ts:E,threadTs:f}=p,g=v&&(0,n.Bn)({team:A,channelId:v,archive:!0});return v&&E&&(g+=`/p${E.replace(".","")}`),v&&E&&f&&f!==E&&(g+=`?thread_ts=${f}&cid=${v}`),g}l(m,"getXWSPermalink");function i(p){let{encodedSearchString:A}=p;return`/search/${A}`}l(i,"getSearchPermalink");function d(p,A){return`/archives/${p}/tabs/${A}`}l(d,"getChannelTabPermalink");function _(p){let{channelId:A,ts:v,threadTs:E}=p,f="/archives";return A&&(f+=`/${A}`),A&&v&&(f+=`/p${v.replace(".","")}`),A&&v&&E&&E!==v&&(f+=`?thread_ts=${E}&cid=${A}`),f}l(_,"getPermalink");var h=null},666243:(j,T,e)=>{"use strict";e.d(T,{z:()=>t});function t(n,s){return`S:${n}:${s}`}l(t,"constructSalesforceRecordId")},708201:(j,T,e)=>{"use strict";e.d(T,{B:()=>t});function t(n){if(!n)return null;const s=n.split(":");return s.length!==3||s[0]!=="S"?null:{orgId:s[1],entityId:s[2]}}l(t,"parseSalesforceRecordId")},824963:(j,T,e)=>{"use strict";e.d(T,{X:()=>c});var t=e(326428),n=e(881805);let s=l(class{isStale(){return Date.now()-this.updatedDate>this.timeoutMs}isPrefixStale(){return Date.now()-this.prefixUpdatedDate>this.prefixTimeoutMs}clearIfStale(){this.isStale()&&(this.queryCache.clear(),this.updatedDate=Date.now())}clearPrefixIfStale(){this.isPrefixStale()&&(this.prefixQueryCache.clear(),this.prefixUpdatedDate=Date.now())}contains(o){const u=this.queryCache.has(o);return this.clearIfStale(),u}containsPrefixOf(o){return this.clearPrefixIfStale(),this.prefixQueryCache.containsPrefix(o)}add(o){return this.clearIfStale(),this.queryCache.add(o)}addAsPrefix(o){return this.clearPrefixIfStale(),this.prefixQueryCache.add(o)}setRequestInFlight(){this.inFlightRequestStartTime=Date.now()}clearRequestInFlight(){delete this.inFlightRequestStartTime}isRequestInFlight(){return this.inFlightRequestStartTime?Date.now()-this.inFlightRequestStartTime<this.inFlightRequestTimeoutMs:!1}reset(){this.queryCache.clear(),this.updatedDate=Date.now(),this.prefixQueryCache.clear(),this.prefixUpdatedDate=Date.now(),this.clearRequestInFlight()}constructor(){this.queryCache=new t.A,this.prefixQueryCache=new t.A,this.updatedDate=Date.now(),this.prefixUpdatedDate=Date.now(),this.timeoutMs=1e3*60*60*8,this.prefixTimeoutMs=1e3*60*15,this.inFlightRequestTimeoutMs=400}},"WorkflowTriggersAutocompleteQueryCache");const a={};function c(r){const o=(0,n.ZT)(r),m=(0,n.jV)(r)||o||"";return a[m]||(a[m]=new s),a[m]}l(c,"getWorkflowTriggersAutocompleteQueryCache")},538768:(j,T,e)=>{"use strict";e.d(T,{O:()=>E,w:()=>A});var t=e(612104),n=e.n(t),s=e(180491),a=e(138085),c=e(710596),r=e(396386),o=e(658160),u=e(43335),m=e(853426),i=e(276721),d=e(474253),_=e(885850),h=e(140189),p=e(779756);function A(y,I){const O=(0,p.YR)(y),M=new RegExp(`\\b(${(0,d.av)().in}|in):(#([^\\s]+))`,"g"),C=i.dn.fromString(y,O),P={};return C.suggestionTokenList.forEach(x=>{if(x instanceof m.tT){const{id:F,name:V}=x.getRawIdAndNameForXwsChannelWorkaround();F&&(0,u.A)(F)&&V&&(P[V]||(P[V]=[]),P[V].push({id:F,name:V}))}}),I.replace(M,(x,F,V,B)=>{if(P[B]&&P[B].length>0){const{id:D,name:S}=P[B].shift()||{};return`${F}:<#${D}|${S}>`}return x})}l(A,"convertUserQueryXwsChannelStringsForXwsChannelWorkaround");function v(y,I){if((0,r.LI)(I))return`<@${(0,o.e)(I)}>`;const O=(0,c.SB)(y,I,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1});return O?`<#${I.id}|${O}>`:`<#${I.id}>`}l(v,"formatInChannelValue");function E(y,I,O){const M=I(),C={},P=[],L={};((0,p.Zi)(M)||[]).forEach(V=>{const B=(0,_.OL)(M,V);B&&P.push(B)});const F=new RegExp(`\\b(${(0,d.av)().in}|in):(#([^\\s]+))`,"g");return f(O,F,(V,B,D,S)=>{const R=P.find(Y=>(0,c.mG)(Y)===S&&!C[Y.id]&&!L[Y.id]);if(R)return C[R.id]=!0,L[R.id]=!0,s.S.resolve(`${B}:${v(M,R)}`);const w=(0,_.Os)(M,S);return w&&!C[w.id]?(C[w.id]=!0,s.S.resolve(`${B}:${v(M,w)}`)):y((0,a.$P)({query:S,options:{fuzzyLimit:0,limit:150,entities:{channels:{includeArchived:!0,includeFromAnotherTeam:!0}},sort:{frecency:!1}}})).then(Y=>{const Q=I(),Z=S&&S.replace("#",""),ee=Y.find(Ee=>Ee.name===Z&&!C[Ee.id]);if(!ee)return`${B}:${D}`;C[ee.id]=!0;const _e=(0,p.C6)(Q).queryFilter;return _e.in=Array.from(new Set([..._e.in||[],ee.id])),y((0,h.c3)({queryFilter:_e})),`${B}:${v(M,ee)}`})})}l(E,"convertContentsStringForEncodedXwsChannels");function f(y,I,O){return g.apply(this,arguments)}l(f,"replaceAsync");function g(){return g=(0,t.coroutine)(function*(y,I,O){const M=[];y.replace(I,function(P){for(var L=arguments.length,x=new Array(L>1?L-1:0),F=1;F<L;F++)x[F-1]=arguments[F];const V=O(P,...x);return M.push(V),y});const C=yield s.S.all(M);return y.replace(I,()=>C.shift()||"")}),g.apply(this,arguments)}l(g,"_replaceAsync")},974651:(j,T,e)=>{"use strict";e.d(T,{A:()=>a,u:()=>s});var t=e(946699),n=e(453651);const s=/[- _'.\u{2019}\u{200b}()/\uFF0F]/gu;let a=l(class ys{normalizeAndScore(r){const o=(0,n.B)(r);return o===this.normalizedQuery?0:this.score(o)}score(r){if(!r||this.queryNoSeparators.length>r.replace(s,"").length||!ys.containsAllLetters(r,this.queryNode)||!this.queryNode)return 1/0;const u=ys.lettersToGraph(r,this.options);if(!u)return 1/0;const m=ys.searchWordBoundariesOnly(u,this.queryNode,this.options);if(!m)return 1/0;const i=ys.countResult(m);return i>this.fuzzyLimit?1/0:i}static scoreOnce(r,o,u){const m=(0,n.B)(o),i=(0,n.B)(r);return new ys(m,u).score(i)}static lettersToGraph(r,o){const u=r.split(""),m=u.shift();return ys.lettersToGraphWorker(m,null,u,[],0,o)}static lettersToGraphWorker(r,o,u,m,i){let d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(!r)return null;const _=(0,t.A)(r),h=ys.makeLetterNode(r,o,m,i,_);if(ys.shouldAddJump(o,h,d)){const A=d.fuzzyJumpLimit||5;m.length<A&&m.push(h)}const p=ys.lettersToGraphWorker(u.shift(),h,u,m,i+1,d);return p&&(h.next=p),h}static shouldAddJump(r,o){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return o.ignored?!1:!!(!r||r.ignored&&!o.ignored||u.fuzzyCJK&&(r.isCJK!==o.isCJK||o.isCJK))}static makeLetterNode(r,o,u,m,i){return{letter:r,ignored:r.match(s),next:null,prev:o,jumps:u,visited:!1,index:m,isCJK:i}}static queryToLinkedList(r){if(!r)return null;let o=r.split("");return o.length>1024&&(o=o.slice(0,1024)),ys.queryToLinkedListWorker(o,0)}static queryToLinkedListWorker(r,o){if(o>=r.length)return null;const u=r[o],m=!!(u.match(s)&&(o!==0||r.length>1));return{letter:u,isSeparator:m,isSpace:u===" ",next:ys.queryToLinkedListWorker(r,o+1),index:o}}static searchWordBoundariesOnly(r,o){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=ys.searchWordBoundariesOnlyWorker(r,o,0,u);return m||(m=r.jumps.reduce((i,d)=>i||d===r?i:ys.searchWordBoundariesOnlyWorker(d,o,1,u),null)),m}static searchWordBoundariesOnlyWorker(r,o,u){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!r||!o)return null;let i;if(!r.visited&&(r.letter===o.letter||r.ignored&&o.isSeparator)&&(i={node:r,count:u}),!i)return null;if(!o.next)return i;r.visited=!0;let d=ys.searchWordBoundariesOnlyWorker(r.next,o.next,0,m),_=o.next;for(;_.isSeparator&&_.next;)_=_.next;return d||(d=r.jumps.reduce((h,p)=>h||p.visited||p===r||(m.searchForwardOnly||m.substringsOnly)&&p.index<r.index||m.substringsOnly&&p.index>r.index+2?h:ys.searchWordBoundariesOnlyWorker(p,_,1,m),null)),r.visited=!1,d?(i.next=d,i):null}static countResult(r){return r?r.count+ys.countResult(r.next):0}static containsAllLetters(r,o){let u=o;for(;u;){if(!(u.isSeparator||r.includes(u.letter)))return!1;u=u.next}return!0}constructor(r,o={}){this.normalizedQuery=(0,n.B)(r),this.queryNode=ys.queryToLinkedList(this.normalizedQuery),this.options=o;var u;this.fuzzyLimit=(u=this.options.fuzzyLimit)!==null&&u!==void 0?u:1/0,this.queryNoSeparators=this.normalizedQuery.replace(s,"")}},"FuzzyMatcher")},604053:(j,T,e)=>{"use strict";e.d(T,{A:()=>c});var t=e(710596),n=e(166747),s=e(123175),a=e(113574);function c(r){let{state:o,mpim:u,matchData:m}=r;const i=(0,a.WR)(o);let d=[];if((0,t.Ug)(u)&&(d=(0,t.Ug)(u).filter(v=>i!==v)),!m)return d;const _=!1,h=!1,p=[];m.forEach(v=>{v.map(f=>({name:(0,n.I)(o,f.id,_,h),...f})).sort((f,g)=>f.score<g.score?1:f.score>g.score?-1:(0,s.Ay)(f.name,g.name)).filter(f=>isFinite(f.score)).forEach(f=>{d.includes(f.id)&&(p.push(f.id),d.splice(d.indexOf(f.id),1))})});const A=d.map(v=>({id:v,name:(0,n.I)(o,v,_,h)})).sort((v,E)=>(0,s.Ay)(v.name,E.name)).map(v=>v.id);return[...p,...A]}l(c,"getMemberDisplayOrderForSearcherMPIM")},14717:(j,T,e)=>{"use strict";e.d(T,{B:()=>a});var t=e(710596),n=e(23219),s=e(36911);function a(c,r,o){if((0,n.fy)(r))return(0,t.bl)(o);const u=(0,s.Ql)(c,o.id,r.id);return!!(u.isKnown&&u.isMember)}l(a,"isUserKnownToBeMemberOfChannel")},671721:(j,T,e)=>{"use strict";e.d(T,{A:()=>ce});var t=e(42302),n=e(286452),s=e(219477),a=e(588389),c=e(250791),r=e(790973),o=e(877500),u=e(780076),m=e(566133),i=e(985324),d=e(710596),_=e(396386),h=e(658160),p=e(790310),A=e(825280);const v=l(de=>de&&(de.displayName||de.display_name||(0,A.Y)(de)),"getEmojiDisplayName"),E=l(de=>de?(de.aliases?[de,...de.aliases]:[de]).map($=>({name:(0,A.Y)($),displayName:v($)})):null,"getAllEmojiNameObjects");var f=e(3477),g=e(526104),y=e(151488),I=e(304529),O=e(23219),M=e(354187),C=e(755717),P=e(20967),L=e(934861),x=e(88748),F=e(245796),V=e(682520);const B={china:["pinching_hand","pinching-hand"],dead:["older_adult"],dump:["hindu_temple"],fail:["family"],gross:["flag-progress-pride"],hi:["shit"],hit:["shit"],hitler:["white_flower"],it:["shit"],macht:["mannlichkeitssymbol"],sh:["shit"],shi:["shit"],shoot:["school_satchel"],s:["shit"],sit:["shit"],sith:["person_with_headscarf"],war:["man-wearing-turban"],whine:["menorah_with_nine_branches"],worst:["woman-wrestling"],wrong:["woman-rowing-boat"]};var D=e(31564),S=e(974651),R=e(453651),w=e(494009),Y=e(438277),Q=e(420274),Z=e(881805),ee=e(281261),_e=e(885850),Ee=e(135713),G=e(437556),Ae=e(129318);let ce=l(class{filterMembers(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return $.reduce((ue,te)=>{if((0,O.Zx)(te)||this.shouldFilterItem(te,re))return ue;if(!this.query&&this.allowEmptyQuery){const N={item:te,score:0,id:te.id};return this.selfFirst&&(0,O.fy)(te)&&(N.isSelf=!0),ue.push(N),ue}const{score:ae,scoreDetails:H}=this.scoreMember(te),U={item:te,score:ae,scoreDetails:H,id:te.id};return!this.avoidExactMatchForMembers&&this.preferExactMatch&&(U.isExactMatch=this.isMemberExactMatch(te),U.exactMatchDetails=this.getMemberExactMatchDetails(te)),this.selfFirst&&(0,O.fy)(te)&&(U.isSelf=!0),ae<=this.fuzzyLimit&&ue.push(U),ue},[])}scoreMember(oe){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher;const re=1/0,ue={};if(this.queryIsMaybeSelf&&(0,O.fy)(oe))ue.self_score=0;else{const U=(0,M.j_)(oe),N=(0,M.sJ)(oe);ue.real_name=U?$.score(U):re,ue.display_name=N?$.score(N):re}if(this.shouldMatchEmail){const U=(0,M.ZL)(oe);ue.email=U?this.forwardOnlyMatcher.score(U):1/0}var te;const ae=(te=(0,n.A)(Object.values(ue)))!==null&&te!==void 0?te:re,H=Object.entries(ue).reduce((U,N)=>{let[K,W]=N;return isFinite(W)&&(U[K]=W),U},{});return{score:ae,scoreDetails:H}}filterChannels(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return $.reduce((ue,te)=>{if((0,_.PC)(te)||(0,_.Zx)(te)||(0,p.jT)(te)||this.shouldFilterItem(te,re))return ue;if(!this.query&&this.allowEmptyQuery)return ue.push({item:te,score:0,id:te.id}),ue;const ae=(0,R.B)((0,d.SB)(oe,te,{publicChannelIncludeHashSign:!1})),H=this.matcher.score(ae),U={item:te,score:H,id:te.id};this.preferExactMatch&&(U.isExactMatch=this.isChannelExactMatchPreNormalized(ae));const N=this.options.entities&&this.options.entities.channels&&this.options.entities.channels.searchPreviousNames,K=te.previous_names&&te.previous_names.length;let W=!1;if(N&&K){var J;const q=te==null||(J=te.previous_names)===null||J===void 0?void 0:J.map(Me=>({score:this.matcher.normalizeAndScore(Me),name:Me}));U.previousNameScores=q,W=(0,s.A)(q,Me=>Me.score<=this.fuzzyLimit);const ie=W&&H>this.fuzzyLimit;let Te;if(ie){const Me=(0,a.A)(q,"score");Te=Me&&Me.name}U.bestPreviousNameMatch=Te}return H<=this.fuzzyLimit||W?ue.push(U):this.rawQuery===te.id&&ue.push({item:te,score:0,id:te.id}),ue},[])}filterTeams(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return $.reduce((ue,te)=>{if((0,L.Zx)(te)||this.shouldFilterItem(te,re))return ue;if(!this.query&&this.allowEmptyQuery)return ue.push({item:te,score:0,id:te.id}),ue;const ae=this.matcher.normalizeAndScore((0,L.F1)(te)),H={item:te,score:ae,id:te.id};return this.preferExactMatch&&(H.isExactMatch=this.isTeamExactMatch(te)),ae<=this.fuzzyLimit&&ue.push(H),ue},[])}filterUserGroups(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return $.reduce((ue,te)=>{if((0,x.Zx)(te)||this.shouldFilterItem(te,re))return ue;if(!this.query&&this.allowEmptyQuery)return ue.push({item:te,score:0,id:te.id}),ue;const ae=this.scoreUserGroupName(te),H={item:te,score:ae,id:te.id};return this.preferExactMatch&&(H.isExactMatch=this.isUsergroupExactMatch(te)),ae<=this.fuzzyLimit&&ue.push(H),ue},[])}scoreUserGroupName(oe){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher,re=1/0,ue=1/0;const te=(0,x.TZ)(oe)||(0,x.ue)(oe).toLocaleLowerCase(),ae=(0,x.x_)(oe,{includeAtSign:!1});return re=$.normalizeAndScore(te),ae&&(ue=$.normalizeAndScore(ae)),Math.min(re,ue)}getSubQueryMatchers(){return this.query.split(/[,| ]/).filter($=>!!$).map($=>{const re=$.charAt(0)==="@"?$.substring(1):$;return new S.A(re,{fuzzyLimit:this.fuzzyLimit})})}filterMpims(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return $.reduce((ue,te)=>{if(this.shouldFilterItem(te,re))return ue;if(!this.query&&this.allowEmptyQuery)return ue.push({item:te,score:0,id:te.id}),ue;const ae=(0,d.Ug)(te);if(!ae)return ue;const H=ae.map(Te=>(0,G.nv)(oe,Te)).filter(Te=>!(0,O.fy)(Te)&&!(0,O.Zx)(Te)),U={},N={},K=[];let W=0;const J=this.getSubQueryMatchers();for(const Te of J){const Me=[];let ke=1/0;for(const Pe of H){const{score:Ie,scoreDetails:X}=this.scoreMember(Pe,Te),ne=U==null?void 0:U[Pe.id];Ie<(ne!==void 0?ne:1/0)&&(U[Pe.id]=Ie,N[Pe.id]={score_details:X}),Me.push({id:Pe.id,score:Ie}),Ie<ke&&(ke=Ie)}K.push(Me),W+=ke}let q;isFinite(W)?q=(0,c.A)(Object.values(U).filter(isFinite)):q=W;const ie={id:te.id,item:te,score:q,scoreDetailsByMember:N,subqueryScoresByMember:K};return q<=this.fuzzyLimit?ue.push(ie):this.rawQuery===te.id&&ue.push({item:te,score:0,id:te.id}),ue},[])}filterIms(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return $.reduce((ue,te)=>{if(this.shouldFilterItem(te,re))return ue;const ae=(0,h.e)(te);if(!ae)return ue;const H=(0,G.nv)(oe,ae);if((0,O.Zx)(H))return ue;if(!this.query&&this.allowEmptyQuery)return ue.push({item:te,score:0,id:te.id}),ue;const{score:U,scoreDetails:N}=this.scoreMember(H),K={item:te,score:U,scoreDetails:N,id:te.id};return!this.avoidExactMatchForMembers&&this.preferExactMatch&&(K.isExactMatch=this.isMemberExactMatch(H),K.exactMatchDetails=this.getMemberExactMatchDetails(H)),U<=this.fuzzyLimit?ue.push(K):this.rawQuery===te.id&&ue.push({item:te,score:0,id:te.id}),ue},[])}filterViews(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return $.reduce((ue,te)=>{if(this.shouldFilterItem(te,re))return ue;if(!this.query&&this.allowEmptyQuery)return ue.push({item:te,score:0,id:te.id}),ue;const ae=this.matcher.normalizeAndScore(te.name),H={item:te,score:ae,id:te.id};return this.preferExactMatch&&(H.isExactMatch=this.isViewOrModalExact(te)),ae<=this.fuzzyLimit&&ue.push(H),ue},[])}filterModals(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return $.reduce((ue,te)=>{if(this.shouldFilterItem(te,re))return ue;if(!this.query&&this.allowEmptyQuery)return ue.push({item:te,score:0,id:te.id}),ue;const ae=this.matcher.normalizeAndScore(te.name),H={item:te,score:ae,id:te.id};return this.preferExactMatch&&(H.isExactMatch=this.isViewOrModalExact(te)),ae<=this.fuzzyLimit&&ue.push(H),ue},[])}filterAppActions(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return $.reduce((ue,te)=>{if((0,u.GU)(te)||this.shouldFilterItem(te,re))return ue;if(!this.query&&this.allowEmptyQuery)return ue.push({item:te,score:0,id:te.id}),ue;const ae=(0,m.u)(te),H=(0,ee.sO)(oe,te.app_id),U=!(0,u.GU)(H)&&(0,i.fj)(H),N=U?[`${ae} ${U}`,`${U} ${ae}`]:[ae],K=N.map(q=>this.matcher.normalizeAndScore(q)),W=Math.min(...K),J={item:te,score:W,id:te.id};return this.preferExactMatch&&(J.isExactMatch=!!(this.query&&N.map(R.B).includes(this.query))),W<=this.fuzzyLimit&&ue.push(J),ue},[])}filterApps(oe,$,re,ue){let te=arguments.length>4&&arguments[4]!==void 0?arguments[4]:t.A;const ae={};return $!=null&&$.length&&$.forEach(H=>{const U=H.app_id;U&&!ae[U]&&(ae[U]={id:U,name:H.appName})}),re!=null&&re.length&&re.forEach(H=>{const U=H==null?void 0:H.appId;U&&!ae[U]&&(ae[U]={id:U,name:H==null?void 0:H.appName})}),ue!=null&&ue.length&&ue.forEach(H=>{const U=H.appId;U&&!ae[U]&&(ae[U]={id:U,name:H.appName})}),this.filterShortcuts(oe,Object.values(ae),!1,te)}filterShortcuts(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ue=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t.A;return $.reduce((te,ae)=>{if((0,u.GU)(ae)||this.shouldFilterItem(ae,ue))return te;if(!this.query&&this.allowEmptyQuery)return te.push({item:ae,score:0,id:ae.id}),te;const{score:H,scoreDetails:U,bestNameMatch:N,bestNameIsExactMatch:K}=this.scoreShortcut(ae,re),W={item:ae,id:ae.id,score:H};if(re){W.firstWordOfRawQuery=(0,Q.Zx)(this.query);const J=(0,Y.A)(ae,(0,Q.KS)(W.firstWordOfRawQuery),{allowPartialMatches:!1});W.commandMatch=J&&this.isOpenedWithSlash,W.isExactMatch=W.commandMatch}return W.scoreDetails=U,W.bestNameMatch=N,W.bestNameIsExactMatch=K,W.isExactMatch=W.isExactMatch||K,(H<=this.fuzzyLimit||W.commandMatch)&&te.push(W),te},[])}scoreShortcut(oe){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.matcher;const ue=this.isQueryExactlySlash?[]:oe.aliases||[];let te=(0,R.B)((0,P.fK)(oe));const ae={name:re.score(te),label:re.normalizeAndScore(oe.label),desc:re.normalizeAndScore((0,P.Hv)(oe)),app_name:re.normalizeAndScore((0,P.qA)(oe))};$&&ae.name!==void 0&&ae.name>0&&(ae.name-=1);let H,U,N;ue.forEach(q=>{let ie=(0,R.B)(q);!this.query.startsWith("/")&&!this.query.startsWith("\uFF0F")&&(ie=(0,D.O)(ie));const Te=re.score(ie);ie=(0,D.O)(ie),!N&&(H===void 0||Te<H)&&(H=Te,U=ie),this.normalizedQuery===ie&&(N=!0,U=ie)}),H!==void 0&&isFinite(H)&&(ae.aliases=H);var K;const W=(K=(0,n.A)(Object.values(ae)))!==null&&K!==void 0?K:1/0;te=(0,D.O)(te),!N&&isFinite(ae.name)&&(H===void 0||ae.name<H)&&(U=te),this.normalizedQuery===te&&(N=!0,U=te);const J=Object.entries(ae).reduce((q,ie)=>{let[Te,Me]=ie;return isFinite(Me)&&(q[Te]=Me),q},{});return{score:W,scoreDetails:J,bestNameMatch:U,bestNameIsExactMatch:N}}filterWorkflowTriggers(oe,$){return $.reduce((re,ue)=>{if(!this.query&&this.allowEmptyQuery)return re.push({item:ue,score:0,id:ue.id}),re;const te=this.scoreWorkflowTrigger(ue),ae={item:ue,score:te,id:ue.id};return this.preferExactMatch&&(ae.isExactMatch=this.isTriggerExactMatch(ue)),te<=this.fuzzyLimit&&re.push(ae),re},[])}scoreWorkflowTrigger(oe){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher;var re;const ue={name:$.normalizeAndScore(oe.name),description:$.normalizeAndScore(oe.description),appName:$.normalizeAndScore((re=oe.workflow.app)===null||re===void 0?void 0:re.name)};var te;return(te=(0,n.A)(Object.values(ue)))!==null&&te!==void 0?te:1/0}filterBroadcastKeywords(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return $.reduce((ue,te)=>{if(this.shouldFilterItem(te,re))return ue;if(!this.query&&this.allowEmptyQuery)return ue.push({item:te,score:0,id:te.id}),ue;const ae=this.scoreBroadcastKeyword(te),H={item:te,score:ae,id:te.id};return this.preferExactMatch&&(H.isExactMatch=this.isBroadcastKeywordExactMatch(te)),ae<=this.fuzzyLimit&&ue.push(H),ue},[])}scoreBroadcastKeyword(oe){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher,re=1/0,ue=1/0;const te=$.normalizeAndScore(oe.name);return oe.id==="BKchannel"&&(re=$.normalizeAndScore("group")),oe.ms_name!==oe.name&&(ue=$.normalizeAndScore(oe.ms_name)),Math.min(te,ue,re)}filterEmoji(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;const ue=[];return $.forEach(te=>{if(this.shouldFilterItem(te,re))return;if(!this.query&&this.allowEmptyQuery){var ae;ue.push({item:te,emojiScore:0,emojiMatchIndices:[],score:0,id:(ae=te.id)!==null&&ae!==void 0?ae:te.name});return}var H;const U=(H=E(te))!==null&&H!==void 0?H:[];let N=1/0,K,W,J,q,ie,Te;U.forEach(ne=>{let{name:fe,displayName:be}=ne;if(fe){const Be=(0,R.B)(fe),We=this.scoreEmojiName(Be);(We.score<N||N===1/0)&&(N=We.score,K=We.matchIndices,W=fe,J=fe,ie=We.queryLengthRatio,Te=We.totalComboBreaks,q=this.query===Be||fe==="ok_hand"&&this.query==="ok")}if(be&&be!==fe){const Be=(0,R.B)(be),We=this.scoreEmojiName(Be);(We.score<N||N===1/0)&&(N=We.score,K=We.matchIndices,W=be,J=fe,ie=We.queryLengthRatio,Te=We.totalComboBreaks,q=this.query===Be)}});const Me=this.options&&this.options.entities&&this.options.entities.emoji&&this.options.entities.emoji.matchKeywords,ke=te.keywords,Pe=!!(ke&&ke.length&&Array.isArray(ke));ke&&ke.length&&!Array.isArray(ke)&&(0,V.Ay)({state:oe}).error("https://slack.zendesk.com/agent/tickets/2393782",`Emoji keywords for ${te.name} is not an array - ${te.keywords}`);let Ie=!1;if(N===1/0&&Me&&Pe&&(Ie=te.keywords.some(ne=>this.matcher.normalizeAndScore(ne)<1/0),Ie&&(W=te&&(te.displayName||te.name))),N!==1/0||Ie){const ne=(0,r.A)(U,Be=>{let{name:We}=Be;return We===J}),fe=ne&&ne.displayName;var X;const be={item:te,score:N,emojiScore:N,emojiBestNameMatch:W,emojiBestNameMatchCanonical:J,emojiBestNameMatchLocalized:fe,emojiMatchIndices:K,emojiQueryLengthRatio:ie,emojiTotalComboBreaks:Te,id:(X=te.id)!==null&&X!==void 0?X:te.name};this.preferExactMatch&&(be.isExactMatch=q,be.isEmojiExactMatch=q),ue.push(be)}}),ue}scoreEmojiName(oe){const $={score:1/0,matchIndices:[],queryLengthRatio:0,totalComboBreaks:null};if(!oe)return $;if(oe==="ok_hand"&&this.query==="ok")return{score:0,matchIndices:[0,1],queryLengthRatio:1,totalComboBreaks:0};if(B[this.query]&&B[this.query].indexOf(oe)!==-1)return $;const re=this.query.length,ue=[];let te=2,ae=5;re<3?(te=0,ae=0):re===3?(te=1,ae=1):re===4&&(te=1);let H=1/0,U=0,N=null,K=oe.indexOf(this.query);if(K===-1&&(K=oe.indexOf(this.query[0])),K!==-1){const W=/\s+/g,J=/[-]+/g,q=this.query.replace(W,"").replace(J,"_"),ie=oe.replace(J,"_"),Te=q.split("");N=0;let Me=0,ke=0,Pe=!0;for(let Ie=K;Ie<ie.length;Ie++){if(ie[Ie]===Te[0]){if(Pe=!0,ue.push(Ie),Te.shift(),ke>Me&&(Me=ke),ke=0,Te.length===0)break}else Pe&&(N+=1),Pe=!1,ke+=1;if(N>te)return{score:H,matchIndices:ue,queryLengthRatio:U,totalComboBreaks:N};if(ke>ae)return{score:H,matchIndices:ue,queryLengthRatio:U,totalComboBreaks:N}}if(Te.length>0)return $;U=q.length/ie.length,H=1-U,N>0&&(H+=N)}return{score:H,matchIndices:ue,queryLengthRatio:U,totalComboBreaks:N}}filterFiles(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;const ue=(0,C.hq)(oe),te=(0,Z.Kc)(oe),ae=(0,Ae._J)(oe,te),H=(0,y.k)(oe),U=ae&&(0,L.qR)(ae),N=!H&&!U,K=(0,Ee._Z)(oe,"native_dlp_canvas")==="on";return $.reduce((W,J)=>{var q,ie;if((0,u.GU)(J)||(0,f.sR)(J))return W;const Te=(q=this.options)===null||q===void 0||(ie=q.entities)===null||ie===void 0?void 0:ie.files,Me=!!(Te!=null&&Te.includeChannelCanvases)||!!(Te!=null&&Te.onlyChannelCanvases);if(J&&(0,f.O8)(J)&&!Me)return W;const ke=J&&(0,f.CA)(J),Pe=J==null?void 0:J.user_team,Ie=Pe?(0,Ae._J)(oe,Pe):null;var X;const fe=((X=(0,L.Ss)(Ie??void 0))!==null&&X!==void 0?X:Pe)!==te;if(ke&&(fe||N)||K&&(0,f.Sp)(J)||J&&ue&&(Te!=null&&Te.onlyChannelCanvases||N)&&(0,f.wL)(J)||this.shouldFilterItem(J,re))return W;if(!this.query&&this.allowEmptyQuery)return W.push({item:J,score:0,id:J.id}),W;const be=this.scoreFile(oe,J),Be={item:J,score:be,id:J.id};return this.preferExactMatch&&(Be.isExactMatch=this.isFileExactMatch(J)),be<=this.fuzzyLimit&&W.push(Be),W},[])}scoreFile(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.matcher;const ue=$.name?re.normalizeAndScore($.name):1/0,te=$.title&&$.name!==$.title?re.normalizeAndScore($.title):1/0,ae=$.external_url?re.normalizeAndScore($.external_url):1/0;let H=1/0;if((0,f.O8)($)){const U=(0,g.Iz)($),N=(0,_e.OL)(oe,U);if(N){const K=(0,R.B)((0,d.SB)(oe,N,{publicChannelIncludeHashSign:!1}));H=this.matcher.score(K)}}return Math.min(ue,te,ae,H)}filterLinks(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return $.reduce((ue,te)=>{if(!te.id||(0,u.GU)(te)||this.shouldFilterItem(te,re))return ue;if(!this.query&&this.allowEmptyQuery)return ue.push({item:te,score:0,id:te.id}),ue;const ae=this.scoreLink(te),H={item:te,score:ae,id:te.id};return this.preferExactMatch&&(H.isExactMatch=this.isLinkExactMatch(te)),ae<=this.fuzzyLimit&&ue.push(H),ue},[])}scoreLink(oe){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher;const re=(0,I.Qh)(oe),ue=(0,I.G8)(oe)?(0,I.ry)(oe):void 0,te=(0,I.G8)(oe)?(0,I.vP)(oe):void 0,ae=re?$.normalizeAndScore(re):1/0,H=ue?$.normalizeAndScore(ue):1/0,U=te?$.normalizeAndScore(te):1/0;return Math.min(ae,H,U)}filterLists(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return $.reduce((ue,te)=>{if(this.shouldFilterItem(te,re))return ue;if(!this.query&&this.allowEmptyQuery)return ue.push({item:te,score:0,id:te.id}),ue;const ae=this.scoreList(te),H={item:te,score:ae,id:te.id};return this.preferExactMatch&&(H.isExactMatch=this.isListExactMatch(te)),ae<=this.fuzzyLimit&&ue.push(H),ue},[])}scoreList(oe){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher).normalizeAndScore(oe.title)}filterListRecords(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return $.reduce((ue,te)=>{if(this.shouldFilterItem(te,re)||!te.name||!te.listTitle)return ue;if(!this.query&&this.allowEmptyQuery)return ue.push({item:te,score:0,id:te.id}),ue;const ae=this.scoreListRecord(te),H={item:te,score:ae,id:te.id};return this.preferExactMatch&&(H.isExactMatch=this.isListRecordExactMatch(te)),ae<=this.fuzzyLimit&&ue.push(H),ue},[])}scoreListRecord(oe){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher).normalizeAndScore(oe.name)}filterChannelSections(oe,$){let re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return $.reduce((ue,te)=>{if(this.shouldFilterItem(te,re))return ue;const ae=(0,F.v2)(oe,te),H=this.matcher.normalizeAndScore(ae),U={item:te,score:H,id:te.id};return!this.query&&this.allowEmptyQuery?(ue.push(U),ue):(H<=this.fuzzyLimit&&ue.push(U),ue)},[])}shouldFilterItem(oe,$){return $(oe)===!1||this.filter(oe)===!1}getMemberExactMatchDetails(oe){const $={},re=(0,M.j_)(oe),ue=(0,M.sJ)(oe);return $.real_name=re===this.query,$.display_name=ue===this.query,this.shouldMatchEmail&&($.email=(0,M.ZL)(oe)===this.query),$}isMemberExactMatch(oe){return!this.query||!this.query.length?!1:(0,s.A)(this.getMemberExactMatchDetails(oe),Boolean)}isChannelExactMatchPreNormalized(oe){return!this.query||!this.query.length?!1:oe===this.query}isFileExactMatch(oe){if(!this.query||!this.query.length)return!1;var $;return(0,R.B)(oe.name)===this.query||(0,R.B)(oe.title)===this.query||(0,R.B)(($=oe.external_url)!==null&&$!==void 0?$:void 0)===this.query}isLinkExactMatch(oe){if(!this.query||!this.query.length)return!1;const $=(0,I.Qh)(oe),re=(0,I.G8)(oe)?(0,I.ry)(oe):void 0;return(0,R.B)($)===this.query||(0,R.B)(re)===this.query}isListExactMatch(oe){return!this.query||!this.query.length?!1:(0,R.B)(oe.title)===this.query}isListRecordExactMatch(oe){return!this.query||!this.query.length?!1:(0,R.B)(oe.name)===this.query}isTeamExactMatch(oe){return!this.query||!this.query.length?!1:(0,R.B)((0,L.F1)(oe))===this.query}isUsergroupExactMatch(oe){return!this.query||!this.query.length?!1:(0,R.B)((0,x.x_)(oe))===this.query||(0,R.B)((0,x.ue)(oe))===this.query}isTriggerExactMatch(oe){return!this.query||!this.query.length?!1:(0,R.B)(oe.name)===this.query}isBroadcastKeywordExactMatch(oe){return!this.query||!this.query.length?!1:(0,R.B)(oe.name)===this.query||(0,R.B)(oe.ms_name)===this.query}isViewOrModalExact(oe){return!this.query||!this.query.length?!1:(0,R.B)(oe.name)===this.query}filterHelpArticles(oe,$){const ue=$.reduce((te,ae)=>{const H=(0,R.B)(ae.title),U=this.substringMatcher.normalizeAndScore(ae.title);return U>this.fuzzyLimit?te:te.concat({item:{...ae,id:String(ae.id)},score:U,isExactMatch:H===this.query,id:String(ae.id)})},[]).sort((te,ae)=>te.score-ae.score);return ue.slice(0,Math.min(5,ue.length))}filterSalesforceRecordSuggestions(oe,$){const ue=$.reduce((te,ae)=>{const H=ae.name;if(!H)return te;const U=(0,R.B)(H),N=this.substringMatcher.normalizeAndScore(U);return N>this.fuzzyLimit?te:te.concat({item:{id:ae.id,name:H,recordType:ae.type},score:N,isExactMatch:U===this.query,id:ae.id})},[]).sort((te,ae)=>te.score-ae.score);return ue.slice(0,Math.min(5,ue.length))}filterSalesListViews(oe,$){return $.reduce((ue,te)=>{const ae=te.label;if(!ae)return ue;const H=(0,R.B)(ae),U=this.substringMatcher.normalizeAndScore(H);if(U>this.fuzzyLimit)return ue;const N=te.id;return ue.concat({item:{...te,id:N,name:ae},score:U,isExactMatch:H===this.query,id:N})},[])}constructor({query:oe="",options:$={entities:{}}}){var re,ue,te,ae,H,U,N,K,W,J,q,ie,Te;this.options=$,this.rawQuery=oe,this.query=(0,R.B)(oe);var Me;this.fuzzyLimit=(Me=this.options.fuzzyLimit)!==null&&Me!==void 0?Me:3,this.allowEmptyQuery=!!this.options.allowEmptyQuery,this.preferExactMatch=!!(this.options.sort&&this.options.sort.preferExactMatch),this.avoidExactMatchForMembers=!!(!((re=this.options)===null||re===void 0||(ue=re.sort)===null||ue===void 0)&&ue.avoidExactMatchForMembers),this.selfFirst=!!(!((te=this.options)===null||te===void 0||(ae=te.sort)===null||ae===void 0)&&ae.selfFirst),this.filter=this.options.filter||t.A,this.shouldMatchEmail=(0,o.A)(this.options,"entities.members.matchEmailField")||(0,o.A)(this.options,"entities.channels.matchEmailField"),this.queryIsMaybeSelf=(0,w.t)(oe),this.normalizedQuery=this.query,!((H=this.options)===null||H===void 0||(U=H.entities)===null||U===void 0||(N=U.shortcuts)===null||N===void 0)&&N.queryStartsWithSlash&&(this.query=(0,Q.KS)(this.query)),this.matcher=new S.A(this.query,{fuzzyLimit:this.fuzzyLimit,fuzzyJumpLimit:this.options.fuzzyJumpLimit,fuzzyCJK:this.options.fuzzyCJK}),this.forwardOnlyMatcher=new S.A(this.query,{fuzzyLimit:this.fuzzyLimit,fuzzyJumpLimit:this.options.fuzzyJumpLimit,fuzzyCJK:this.options.fuzzyCJK,searchForwardOnly:this.options.fuzzyEmailSearchForwardOnly}),this.substringMatcher=new S.A(this.query,{fuzzyLimit:this.fuzzyLimit,fuzzyJumpLimit:this.options.fuzzyJumpLimit,fuzzyCJK:this.options.fuzzyCJK,substringsOnly:!0}),this.isOpenedWithSlash=!!(!((K=this.options)===null||K===void 0||(W=K.entities)===null||W===void 0||(J=W.shortcuts)===null||J===void 0)&&J.isOpenedWithSlash),this.isQueryExactlySlash=!!(!((q=this.options)===null||q===void 0||(ie=q.entities)===null||ie===void 0||(Te=ie.shortcuts)===null||Te===void 0)&&Te.isQueryExactlySlash)}},"SearcherMatcher")},890849:(j,T,e)=>{"use strict";e.d(T,{A:()=>g});var t=e(543406),n=e(219477),s=e(295385),a=e(821066),c=e(710596),r=e(396386),o=e(850960),u=e(23219),m=e(246634),i=e(934861),d=e(656453),_=e(123175),h=e(183469),p=e(14717),A=e(113574),v=e(885850),E=e(437556);const f={starredChannel:10,memberOfThisChannel:25,archivedChannel:-50,deactivatedMember:-50,mpimWithDeactivatedMember:-50,channelFromAnotherTeam:-15,notInChannel:-25,userGroupOrKeyword:-25,fuzzyMatch:50,emojiMatch:150,exactMatch:100,matchesPreviousName:-50,workflowAssociatedWithChannel:250,popularEmoji:1,isSelf:250};let g=l(class{sort(I,O){var M;const C=(0,d.Cy)({state:I});C.mark("modern-searcher-sorting-mark");const{members:P,channels:L,mpims:x,ims:F,teams:V,userGroups:B,emoji:D,broadcastKeywords:S,views:R,modals:w,appActions:Y,channelSections:Q,emails:Z,files:ee,links:_e,lists:Ee,listRecords:G,slashCommands:Ae,slackGlobalActions:ce,quipShortcutCommands:de,channelActions:oe,fakeGlobalActions:$,callActions:re,apps:ue,helpArticles:te,salesforceRecords:ae,workflowTriggers:H,salesListViews:U}=O,N={memberChannels:[],nonmemberChannels:[],archivedChannels:[]};L&&L.reduce((Te,Me)=>(0,o.F)(Me.item)?(Te.archivedChannels.push(Me),Te):((0,c.bl)(Me.item)?Te.memberChannels.push(Me):Te.nonmemberChannels.push(Me),Te),N);let K=[...P||[],...N.memberChannels,...x||[],...F||[],...D||[],...B||[],...S||[],...R||[],...w||[],...Y||[],...Q||[],...Z||[],...ee||[],..._e||[],...Ee||[],...G||[],...re||[],...oe||[],...$||[],...ue||[],...te||[],...H||[],...ae||[],...U||[]],W=[...N.nonmemberChannels,...V||[],...Ae||[],...ce||[],...de||[]],J=N.archivedChannels;const q=this.getSortFuzzyFunction(I,{localeAware:!0});this.options.flat||(K=this.precomputeMatchNames(I,K).sort(q),W=this.precomputeMatchNames(I,W).sort(q),J=this.precomputeMatchNames(I,J).sort(q));let ie=[...K,...W,...J];return this.options.flat&&ie.sort(q),this.options.preferExactMatch&&(ie=[...(0,t.A)(ie,Me=>Me.isExactMatch),...ie]),this.options.frecency&&(this.options.normalize=!0,C.mark("modern-searcher-frecency-sort-mark"),this.options.modelOnly?ie=(0,h.jW)(I,{query:this.query,list:ie,bonusPoints:this.getFrecencyBonusPointsFunction(I)}):ie=(0,h.Zh)(I,{query:this.query,list:ie,bonusPoints:this.getFrecencyBonusPointsFunction(I)}),C.measureAndClear("modern-searcher-frecency-sort-mark","modern-searcher-frecency-sort")),this.options.selfFirst&&!(!((M=ie[0])===null||M===void 0)&&M.isSelf)&&(ie=[...(0,t.A)(ie,Me=>Me.isSelf),...ie]),C.measureAndClear("modern-searcher-sorting-mark","modern-searcher-sorting"),ie}precomputeMatchNames(I,O){return O.map(M=>({...M,name:this.getNameForComparison(I,M)}))}getSortFuzzyFunction(I,O){let{localeAware:M}=O;return(C,P)=>{if((0,r.yz)(C.item)&&!(0,r.yz)(P.item))return 1;if((0,r.yz)(P.item)&&!(0,r.yz)(C.item)||(0,r.LI)(C.item)&&!(0,r.LI)(P.item))return-1;if((0,r.LI)(P.item)&&!(0,r.LI)(C.item))return 1;if(!(0,r.yz)(C.item)&&!(0,r.yz)(P.item)){const S=C.score-P.score;if(S!==0)return S}if((0,r.yz)(C.item)&&(0,r.yz)(P.item)){const S=C.score-P.score;if(S!==0)return S;var L,x;const R=((L=(0,c.N4)(C.item))!==null&&L!==void 0?L:0)-((x=(0,c.N4)(P.item))!==null&&x!==void 0?x:0);if(R!==0)return R}var F;const V=(F=C.name)!==null&&F!==void 0?F:"";var B;const D=(B=P.name)!==null&&B!==void 0?B:"";return M?(0,_.Ay)(V,D):V>D?1:D>V?-1:0}}getFrecencyBonusPointsFunction(I){return O=>{var M,C;const{item:P}=O,L={};if((0,r.yz)(P)){if(L.isMpim=0,this.options.preferMpimsWithActiveMembers){const x=(0,c.Ug)(P);if(!x)return L;const F=x.map(V=>(0,E.nv)(I,V));(0,n.A)(F,V=>(0,u.oy)(V)||(0,u.eJ)(V))&&(L.isMpimWithDeactivatedMember=f.mpimWithDeactivatedMember)}return L}if(O.isExactMatch?(L.isExactMatch=f.exactMatch,O.isEmojiExactMatch&&(L.isEmojiExactMatch=f.exactMatch)):O.emojiScore?L.emojiScoreBonus=this.calculateNormalizedFuzzyBonusPoints(O,"emojiScore",f.emojiMatch):(0,o.F)(P)||(0,u.oy)(P)||(0,u.eJ)(P)||(L.fuzzyScoreBonus=this.calculateNormalizedFuzzyBonusPoints(O,"score",f.fuzzyMatch)),O.bestPreviousNameMatch&&(L.onlyMatchesPreviousName=f.matchesPreviousName),this.options.preferChannelMembers&&P.presence&&this.options.currentChannel&&(0,p.B)(I,P,this.options.currentChannel)&&(L.isMemberOfThisChannel=f.memberOfThisChannel),(0,r.jq)(P)&&(0,c.m2)(I,P)&&(L.isStarred=f.starredChannel),(0,u.NB)(P)){const x=(0,v.Pu)(I,P.id);x&&(0,c.m2)(I,x)&&(L.isStarred=f.starredChannel)}return P.is_emoji&&(P.name==="thumbsup"||P.name==="point_up")&&(L.isPopularEmojiVariant=f.popularEmoji),this.options.selfFirst&&(0,u.fy)(P)&&(L.isSelf=f.isSelf),this.options.preferChannelWorkflows&&P.type==="channel_action"&&P.channelId===((M=this.options)===null||M===void 0||(C=M.currentChannel)===null||C===void 0?void 0:C.id)&&(L.isWorkflowAssociatedWithChannel=f.workflowAssociatedWithChannel),((0,r.rW)(P)||(0,r.Zp)(P))&&((0,o.F)(P)&&(L.isArchived=f.archivedChannel),(0,r.rW)(P)&&this.options.preferChannelsUserBelongsTo&&!(0,o.F)(P)&&!(0,c.bl)(P)&&(L.isNotChannelMember=f.notInChannel),(0,A.u8)(I)&&(0,c.lo)(P)&&(L.isChannelFromAnotherTeam=f.channelFromAnotherTeam)),(0,u.NB)(P)&&((0,u.oy)(P)||(0,u.eJ)(P))&&(L.isDeactivatedMember=f.deactivatedMember),(P.is_usergroup||P.is_broadcast_keyword)&&(L.isUserGroupOrKeyword=f.userGroupOrKeyword),L}}calculateNormalizedFuzzyBonusPoints(I,O,M){const C=I[O];if(!(0,s.A)(C))return 0;const P=.5**C;return Math.round(M*P)}getNameForComparison(I,O){let M;const C=O.item;return(0,r.yz)(C)?M=C.name_normalized:(0,r.mz)(C)?M=(0,a.A)((0,c.SB)(I,C,{publicChannelIncludeHashSign:!1})):(0,u.NB)(C)?M=(0,m.sE)(I,C):C.is_usergroup?M=C.handle||C.name:C.team_name?M=(0,a.A)((0,i.F1)(C)):C.isEmail?M=(0,a.A)(C.value):C.title?M=C.title:M=C.name,M}constructor({query:I,options:O={}}){this.options=O,this.query=I}},"SearcherSorter")},882978:(j,T,e)=>{"use strict";e.d(T,{A:()=>Me});var t=e(269592),n=e(292049),s=e(566401),a=e(834098),c=e(42302),r=e(219477),o=e(792866),u=e(339993),m=e(180491),i=e(819187),d=e(451793),_=e(138085),h=e(442157),p=e(211700),A=e(417250),v=e(56239),E=e(151488),f=e(20967),g=e(713587),y=e(374615),I=e(555759),O=e(532395),M=e(45798),C=e(20328),P=e(656453),L=e(798160),x=e(946699),F=e(271338),V=e(535518),B=e(31564),D=e(671721),S=e(890849),R=e(103310),w=e(881805),Y=e(111171),Q=e(449552),Z=e(412480),ee=e(606306),_e=e(846860),Ee=e(977408),G=e(843997),Ae=e(885850),ce=e(126796),de=e(176861),oe=e(873645),$=e(135713),re=e(969924),ue=e(934569),te=e(96120),ae=e(194478),H=e(612104),U=e(674217),N=e(251321);const K=(0,U.Ay)("Fetch list records for lists mentions",function(){var ke=(0,H.coroutine)(function*(Pe,Ie,X){let{query:ne}=X;const fe=(0,V.V3)(ne);if(!fe)return;const{listTitle:be}=fe,Be=(0,ae.Mr)(Ie()),We=(0,V.xL)(Be,be);if(!We)return;const Re=We.id;yield Pe((0,N.D)({listId:Re}))});return function(Pe,Ie,X){return ke.apply(this,arguments)}}());K.meta={name:"createThunk",key:"createThunkfetchForMentions",description:"Fetch list records for lists mentions"};var W=e(473586),J=e(437556),q=e(149038);class ie{search(Pe){let{query:Ie,options:X}=Pe;var ne;if(this.maybeStartSession(Ie),((0,t.A)(Ie)||!Ie.length)&&!X.allowEmptyQuery)return m.S.resolve(M.Ml);if((0,n.A)(Ie))return this.bulkSearch({queryRecords:Ie,options:X});const fe=(0,Q.getStateByTeamId)(this.teamId),be=(0,P.Cy)({state:fe}),Be=(0,i.A)();be.mark(`modern-searcher-search-mark-${Be}`);const We=(0,B.O)(Ie??"");A.LI.start({label:A.gC.Searcher,id:Be,options:{teamId:(0,w.ZT)(fe),tags:this.getTraceTags({query:We,options:X})}});const Re=(ne=A.LI.get({label:A.gC.Searcher,id:Be}))===null||ne===void 0?void 0:ne.createChildSpan({name:"searcher:search"}),ve=(0,_.aw)(X,_.lp,Ie);if((0,s.A)(ve))return m.S.resolve(M.Ml);if((0,v.x)(fe)!==ce.M9.ONLINE||!(X!=null&&X.allowEmptyQueryRemoteSearch)&&!We.length&&(0,F.A)()&&(0,$._Z)(fe,"searcher_local_empty_string")==="treatment"&&!X.entities.lists)return m.S.resolve(this.searchLocal({query:We,options:ve,autoTraceId:Be,parentSpanId:Re==null?void 0:Re.getId()}));const xe=this.fetchRemote({query:We,options:ve,autoTraceId:Be,parentSpanId:Re==null?void 0:Re.getId()}).then(He=>this.processFetchedEntities({query:We,data:He,options:ve,autoTraceId:Be,parentSpanId:Re==null?void 0:Re.getId()}));if(ve.tiered){const He=this.searchLocal({query:We,options:ve,autoTraceId:Be,parentSpanId:Re==null?void 0:Re.getId()});return He.promise=xe.finally(()=>{Re==null||Re.close(),A.LI.stop({label:A.gC.Searcher,id:Be})}),m.S.resolve(He).finally(()=>{be.measureAndClear(`modern-searcher-search-mark-${Be}`,"modern-searcher-search-tiered")})}return xe.finally(()=>{be.measureAndClear(`modern-searcher-search-mark-${Be}`,"modern-searcher-search"),Re==null||Re.close(),A.LI.stop({label:A.gC.Searcher,id:Be})})}flattenResultsWithQueryId(Pe){let{returnedResults:Ie,queryIds:X}=Pe;const ne=Ie;for(let fe=0;fe<Ie.length;fe++)for(let be=0;be<Ie[fe].length;be++)ne[fe][be].queryId=X[fe];return(0,a.A)(ne)}bulkSearch(Pe){let{queryRecords:Ie,options:X}=Pe;const ne=(0,Q.getStateByTeamId)(this.teamId),fe=(0,P.Cy)({state:ne}),be=(0,i.A)();fe.mark(`modern-searcher-search-mark-${be}`);const Be=(0,_.aw)(X,_.lp,"");if((0,s.A)(Be))return m.S.resolve(M.Ml);const We=Ie.map(Ke=>Ke.query),Re=Ie.map(Ke=>Ke.queryId),ve=We.map(Ke=>(0,B.O)(Ke));let xe,He;if((0,v.x)(ne)!==ce.M9.ONLINE)return He=ve.map(Ke=>this.searchLocal({query:Ke,options:Be})),xe=this.flattenResultsWithQueryId({returnedResults:He,queryIds:Re}),m.S.resolve(xe);const je=this.fetchRemote({query:ve,options:Be}).then(Ke=>(He=Ke.map((ht,dt)=>this.processFetchedEntities({query:ve[dt],data:ht,options:Be})),this.flattenResultsWithQueryId({returnedResults:He,queryIds:Re})));return Be.tiered?(He=ve.map(Ke=>this.searchLocal({query:Ke,options:Be})),xe=this.flattenResultsWithQueryId({returnedResults:He,queryIds:Re}),xe.promise=je,m.S.resolve(xe).finally(()=>{fe.measureAndClear(`modern-searcher-search-mark-${be}`,"modern-searcher-search-tiered")})):je.finally(()=>{fe.measureAndClear(`modern-searcher-search-mark-${be}`,"modern-searcher-search")})}searchLocal(Pe){let{query:Ie,options:X,autoTraceId:ne,parentSpanId:fe}=Pe;var be;const Be=(0,Q.getStateByTeamId)(this.teamId);let We=ne;We||(We=(0,i.A)(),A.LI.start({label:A.gC.Searcher,id:We,options:{teamId:(0,w.ZT)(Be),tags:this.getTraceTags({query:Ie,options:X})}}));const Re=(be=A.LI.get({label:A.gC.Searcher,id:We}))===null||be===void 0?void 0:be.createChildSpan({name:"searcher:search_local",additionalSpanOptions:{parentSpanId:fe}});if(!Ie.length&&!X.allowEmptyQuery)return[];const ve=(0,_.aw)(X,_.lp,Ie);if((0,s.A)(ve))return[];const xe=(0,B.O)(Ie),He=this.fetchLocal({query:Ie,options:ve}),je=this.processFetchedEntities({query:xe,data:He,options:ve,autoTraceId:We,parentSpanId:Re==null?void 0:Re.getId()});return Re==null||Re.close(),je}fetchRemote(Pe){let{query:Ie,options:X,autoTraceId:ne,parentSpanId:fe}=Pe;var be;const Be=(0,Q.getStateByTeamId)(this.teamId),We=(be=A.LI.get({label:A.gC.Searcher,id:ne}))===null||be===void 0?void 0:be.createChildSpan({name:"searcher:fetch_remote",additionalSpanOptions:{parentSpanId:fe}});this.pendingRequests.forEach(Le=>Le.cancel()),this.pendingRequests=[];const Re=[],ve=[],{channels:xe,emoji:He,files:je,lists:Ke,members:ht,teams:dt,userGroups:Ve,appActions:Je,workflowTriggers:Ge}=X.entities;if(ht){let Le;(0,n.A)(Ie)?Le=(0,Q.dispatchForTeamId)(this.teamId,(0,_.U7)({queries:Ie,options:X})):Le=(0,Q.dispatchForTeamId)(this.teamId,(0,_.QH)({query:Ie,options:X})),this.pendingRequests.push(Le),ht.runaway?ve.push(Le):Re.push(Le)}if(xe&&!(0,n.A)(Ie)){const Le=(0,Q.dispatchForTeamId)(this.teamId,(0,_.J6)({query:Ie,options:X}));this.pendingRequests.push(Le),xe.runaway?ve.push(Le):Re.push(Le)}if(He&&!(0,n.A)(Ie)){const Le=(0,Q.dispatchForTeamId)(this.teamId,(0,_.LR)({query:Ie,options:X}));this.pendingRequests.push(Le),He.runaway?ve.push(Le):Re.push(Le)}if(je&&!(0,n.A)(Ie)&&((0,x.A)(Ie)||Ie.length>3)){const Le=(0,Q.dispatchForTeamId)(this.teamId,(0,_.cD)({query:Ie,options:X}));this.pendingRequests.push(Le),je.runaway?ve.push(Le):Re.push(Le)}if(Ke&&!(0,n.A)(Ie)){const Le=(0,Q.dispatchForTeamId)(this.teamId,Ie.indexOf(">")<0?(0,W.E)({query:Ie}):K({query:Ie}));this.pendingRequests.push(Le),Ke.runaway?ve.push(Le):Re.push(Le)}if(Ve){let Le;(0,n.A)(Ie)?Le=(0,Q.dispatchForTeamId)(this.teamId,(0,_.eR)({queries:Ie,options:X})):Le=(0,Q.dispatchForTeamId)(this.teamId,(0,_.UC)({query:Ie,options:X})),this.pendingRequests.push(Le),Ve.runaway?ve.push(Le):Re.push(Le)}if(dt&&((0,E.k)(Be)||dt.onlyExternal||dt.includeExternal)&&!(0,n.A)(Ie)){const Le=(0,Q.dispatchForTeamId)(this.teamId,(0,_.DF)({query:Ie,options:X}));this.pendingRequests.push(Le),dt.runaway?ve.push(Le):Re.push(Le)}if((0,g.e)(Be)&&Je){const Le=(0,Q.dispatchForTeamId)(this.teamId,(0,ee.G)()).timeout(2e3).catch(c.A);this.pendingRequests.push(Le),Je.runaway?ve.push(Le):Re.push(Le)}if(Ge&&!(0,n.A)(Ie)){const Le=(0,Q.dispatchForTeamId)(this.teamId,(0,_.fx)({query:Ie}));Ge.runaway?ve.push(Le):Re.push(Le)}return m.S.all(Re).then(Le=>{let Mt;if((0,n.A)(Ie))Mt=Ie.map(Nt=>this.fetchLocal({query:Nt,options:X})).map(Nt=>{const bt={...Nt};return bt.remoteIds=(0,_.jl)(Le),bt});else{if(Mt=this.fetchLocal({query:Ie,options:X}),Mt.remoteIds=(0,_.jl)(Le),ht&&ht.onlyFromExternalWorkspaceId){var Dt,pt;Mt.members=(pt=(Dt=Le.find(Nt=>!!Nt.members))===null||Dt===void 0?void 0:Dt.members)!==null&&pt!==void 0?pt:M.Ml}const Qt=(0,r.A)((0,o.A)(Mt),"length");if(ve.length&&!Qt)return m.S.all(ve).then(()=>this.fetchLocal({query:Ie,options:X}))}return We==null||We.close(),Mt}).finally(()=>{this.pendingRequests=[]})}fetchLocal(Pe){let{query:Ie,options:X}=Pe;const ne=(0,Q.getStateByTeamId)(this.teamId);(0,_.ZD)(X);const fe={},{members:be,channels:Be,teams:We,userGroups:Re,appActions:ve,views:xe,broadcastKeywords:He,emoji:je,files:Ke,links:ht,lists:dt,channelSections:Ve,emails:Je,modals:Ge,shortcuts:Le,workflowTriggers:Mt,helpArticles:Dt}=X.entities;if(Be&&(Be.includePublic||Be.includePrivate)&&(fe.channels=(0,_.AC)(ne,X)),Be&&Be.includeMpims&&(fe.mpims=(0,Ae.FS)(ne)),Be&&Be.includeIms&&(fe.ims=(0,Ae._B)(ne)),be&&(fe.members=be.onlyFromExternalWorkspaceId?M.Ml:(0,J.I_)(ne).filter(Nt=>(0,_e.zP)(ne,Nt.id)&&!(0,de.y)(ne,Nt.id))),We&&(fe.teams=(0,_.mi)(ne,X)),Re&&(fe.userGroups=(0,q.jJ)(ne)),ve&&(fe.appActions=(0,d.B)(ne)?(0,Z.PL)(ne):(0,_.g2)(ne,ve.channel)),Ke&&(fe.files=(0,re.Gn)(ne)),ht&&(fe.links=(0,te.EH)(ne)),dt&&(Ie.indexOf(">")<0?fe.lists=(0,ae.C0)(ne):fe.listRecords=(0,ae.vD)(ne,Ie)),xe&&(fe.views=(0,_.mK)(ne)),Ge&&(fe.modals=(0,_.A$)(ne)),He){var pt;const Nt=He.currentChannel?He.currentChannel.id:null;fe.broadcastKeywords=!((pt=X.entities.broadcastKeywords)===null||pt===void 0)&&pt.includeAll||!Nt?(0,y.A)():(0,I.A)(ne,Nt)}if(je&&(fe.emoji=(0,oe.Gt)(ne)),Ve&&(fe.channelSections=(0,o.A)((0,G.jV)(ne))),(Le!=null&&Le.slashCommands||Le!=null&&Le.fakeGlobalActions)&&!(Le!=null&&Le.isAnnounceOnly)&&(fe.slashCommands=(0,d.B)(ne)?(0,C.A_)(ne,Le.channel,!!Le.threadTs,!0).map(Nt=>({...Nt,id:(0,f.Bs)(Nt),isSlashCommand:!0})):(0,_.lS)(ne,Le.channel,Le.threadTs)),Le!=null&&Le.slackGlobalActions&&(fe.slackGlobalActions=(0,C.Yk)(ne,Le.channel,Le.threadTs)),Le!=null&&Le.quipShortcutCommands&&(fe.quipShortcutCommands=(0,Y.Aw)(ne,!!Ie)),Le!=null&&Le.channelActions&&(fe.channelActions=(0,Ee.fo)(ne,Le.channel)),Le!=null&&Le.fakeGlobalActions&&(fe.fakeGlobalActions=(0,C.JL)(ne,Le.channel,Le.threadTs)),Le!=null&&Le.callActions&&(fe.callActions=(0,C.Uw)(ne,Le.channel,Le.threadTs,Le.isAnnounceOnly)),Mt){const Nt=(0,C.NJ)(ne);Mt.includeAutomated?fe.workflowTriggers=Nt:fe.workflowTriggers=Nt.filter(bt=>bt.type===h.M.Shortcut)}Je&&(fe.emails=(0,_.FF)(Ie));const Qt=(0,L.dL)(ne);return Dt&&Qt&&(fe.helpArticles=(0,ue.Fb)(ne,"searcher/fetch_all_articles")),(0,_.S)(),fe}processFetchedEntities(Pe){let{query:Ie,data:X,options:ne,autoTraceId:fe,parentSpanId:be}=Pe;var Be,We,Re;const ve=(0,Q.getStateByTeamId)(this.teamId),xe=(Be=A.LI.get({label:A.gC.Searcher,id:fe}))===null||Be===void 0?void 0:Be.createChildSpan({name:"searcher:process",additionalSpanOptions:{parentSpanId:be}});(0,_.ZD)(ne);const He={},je=new D.A({query:Ie,options:ne}),Ke=(0,P.Cy)({state:ve});Ke.mark("modern-searcher-matching-mark");const ht=(We=A.LI.get({label:A.gC.Searcher,id:fe}))===null||We===void 0?void 0:We.createChildSpan({name:"searcher:searcher_match",additionalSpanOptions:{parentSpanId:xe==null?void 0:xe.getId()}});if(X.channels&&(He.channels=je.filterChannels(ve,X.channels,(0,_.sr)(ve,ne.entities.channels))),X.members&&(He.members=je.filterMembers(ve,X.members,(0,_.bE)(ve,ne.entities.members))),X.emails&&X.members&&!(!(He==null||(Re=He.members)===null||Re===void 0)&&Re.length)&&(He.emails=X.emails),X.mpims&&(He.mpims=je.filterMpims(ve,X.mpims,(0,_.AQ)(ve,ne.entities.channels))),X.ims&&(He.ims=je.filterIms(ve,X.ims,(0,_.EM)(ve,ne.entities.channels))),X.userGroups&&(He.userGroups=je.filterUserGroups(ve,X.userGroups,(0,_.H9)(ve,ne.entities.userGroups))),X.teams&&(He.teams=je.filterTeams(ve,X.teams,(0,_.A1)(ve,ne.entities.teams))),X.views&&(He.views=je.filterViews(ve,X.views)),X.modals&&(He.modals=je.filterModals(ve,X.modals)),X.appActions&&(He.appActions=je.filterAppActions(ve,X.appActions)),X.slashCommands&&(He.slashCommands=je.filterShortcuts(ve,X.slashCommands,!0)),X.slackGlobalActions&&(He.slackGlobalActions=je.filterShortcuts(ve,X.slackGlobalActions)),X.quipShortcutCommands&&(He.quipShortcutCommands=je.filterShortcuts(ve,X.quipShortcutCommands)),X.channelActions&&(He.channelActions=je.filterShortcuts(ve,X.channelActions)),X.fakeGlobalActions&&(He.fakeGlobalActions=je.filterShortcuts(ve,X.fakeGlobalActions)),X.callActions&&(He.callActions=je.filterShortcuts(ve,X.callActions)),X.workflowTriggers&&(He.workflowTriggers=je.filterWorkflowTriggers(ve,X.workflowTriggers)),X.broadcastKeywords&&(He.broadcastKeywords=je.filterBroadcastKeywords(ve,X.broadcastKeywords)),X.emoji&&(He.emoji=je.filterEmoji(ve,X.emoji)),X.channelSections&&(He.channelSections=je.filterChannelSections(ve,X.channelSections,Nt=>{var bt,Yt;return!!(!((bt=ne.entities.channelSections)===null||bt===void 0||(Yt=bt.includeTypes)===null||Yt===void 0)&&Yt[Nt.type])})),X.files&&(He.files=je.filterFiles(ve,X.files,(0,_.Do)(ve,ne.entities.files))),X.links&&(He.links=je.filterLinks(ve,X.links)),X.lists&&(He.lists=je.filterLists(ve,X.lists)),X.listRecords){var dt;const{recordQuery:Nt}=(dt=(0,V.V3)(Ie))!==null&&dt!==void 0?dt:{},bt=new D.A({query:Nt,options:ne});He.listRecords=bt.filterListRecords(ve,X.listRecords)}X.helpArticles&&(He.helpArticles=je.filterHelpArticles(ve,X.helpArticles)),Ke.measureAndClear("modern-searcher-matching-mark","modern-searcher-matching"),ht==null||ht.close();const Ve=(0,_.SI)(He,X.remoteIds||{});let Je=(0,a.A)(Object.values(Ve));const Ge=500,Le=3;var Mt;const Dt=Math.min(((Mt=ne==null?void 0:ne.limit)!==null&&Mt!==void 0?Mt:1)*Le,Ge);if(ne.sort&&!ne.sort.bypassSorting){var pt;let Nt=!1;Je.length<Dt&&(Nt=!0);const bt=new S.A({query:Ie,options:{modelOnly:Nt,...ne.sort}}),Yt=(pt=A.LI.get({label:A.gC.Searcher,id:fe}))===null||pt===void 0?void 0:pt.createChildSpan({name:"searcher:searcher_sort",additionalSpanOptions:{parentSpanId:xe==null?void 0:xe.getId()}});Je=bt.sort(ve,Ve),Yt==null||Yt.close()}if(ne.sort&&ne.sort.frecency&&!ne.sort.bypassSorting){var Qt;const Nt=(Qt=A.LI.get({label:A.gC.Searcher,id:fe}))===null||Qt===void 0?void 0:Qt.createChildSpan({name:"searcher:sorter_sort",additionalSpanOptions:{parentSpanId:xe==null?void 0:xe.getId()}});Je=new R.A({query:Ie,options:ne.sort,teamId:(0,w.ZT)(ve),enterpriseId:(0,E.k)(ve)&&(0,w.jV)(ve)?(0,w.jV)(ve):void 0}).sort(ve,Je.slice(0,Dt)),Nt==null||Nt.close()}return ne.limit&&(Je=(0,u.A)(Je,ne.limit)),ne.returnMetadata||(Je=Je.map(Nt=>Nt.item)),(0,_.S)(),Je||[]}clogSearcherAccept(Pe){let{clogger:Ie,data:X}=Pe;const{source:ne,query:fe,results:be,selectedItemId:Be,displayedItemIds:We}=X,Re=15;if(!Be)return;const ve=We?We.length:be.length,xe=We?We.indexOf(Be):be.findIndex(Dt=>Dt.item.id===Be);if(xe<0)return;const He=be.find(Dt=>Dt.item.id===Be);if(!He)return;const je=He.type||"other",Ke=(0,n.A)(fe)?fe.map(Dt=>(0,B.O)(Dt)):(0,B.O)(fe),ht=He.source||"local";let dt;He.type==="mpim"?dt=He.scoreDetailsByMember:He.type==="member"?dt={[Be]:{is_exact_match:He.isExactMatch,exact_match_details:He.exactMatchDetails,score_details:He.scoreDetails}}:He.type==="emoji"&&(dt={[Be]:{is_exact_match:He.isExactMatch}});let Ve=[];be.some(Dt=>Dt.featureVectorRaw)&&(We?Ve=We.map(Dt=>{const pt=be.find(Qt=>Qt.item.id===Dt);return pt&&pt.featureVectorRaw.serialize()||""}):Ve=be.map(Dt=>{var pt,Qt;return Dt==null||(pt=Dt.featureVectorRaw)===null||pt===void 0||(Qt=pt.serialize)===null||Qt===void 0?void 0:Qt.call(pt)}));let Ge;(0,n.A)(Ke)?Ge=Ke.reduce((Dt,pt)=>Dt+(0,_.Cs)((0,B.O)(pt)),0):Ge=(0,_.Cs)(Ke);var Le;const Mt={source:ne,query_length:Ke.length?Ke.length:0,query_terms_length:Ge,results_length:ve,selected_position:xe,selected_type:je,selected_source:ht,selected_match_details:dt,feature_vector_list:Ve.slice(0,Re),session_length:Date.now()-((Le=this.sessionTs)!==null&&Le!==void 0?Le:0)};Ie.track(O.EventId.SEARCHER_ACCEPT,Mt),this.endSession()}clogSearcherReject(Pe){let{clogger:Ie,data:X}=Pe;const{source:ne,query:fe,results:be,displayedItemIds:Be}=X,We=Be!==void 0?Be.length:be.length,Re=(0,n.A)(fe)?fe.map(je=>(0,B.O)(je)):(0,B.O)(fe);let ve;(0,n.A)(Re)?ve=Re.reduce((je,Ke)=>je+(0,_.Cs)((0,B.O)(Ke)),0):ve=(0,_.Cs)(Re);var xe;const He={source:ne,query_length:Re.length?Re.length:0,query_terms_length:ve,results_length:We,session_length:Date.now()-((xe=this.sessionTs)!==null&&xe!==void 0?xe:0)};Ie.track(O.EventId.SEARCHER_REJECT,He),this.endSession()}maybeStartSession(Pe){!this.sessionId&&Pe!==void 0&&Pe.length&&(this.sessionTs=Date.now(),this.sessionId=(0,i.A)())}endSession(){this.sessionTs=null,this.sessionId=null}getTraceTags(Pe){let{query:Ie,options:X}=Pe;var ne;const fe=X.entities;return{source:(X==null?void 0:X.searchViewContext)||((ne=X.sort)===null||ne===void 0?void 0:ne.source),tiered:X.tiered,is_searcher_sessions:!0,entities:Object.keys(fe).filter(be=>!!fe[be]).sort().toString(),query_length:Ie.length}}constructor(Pe){this.teamId=Pe,this.pendingRequests=[],this.sessionId=null,this.sessionTs=null}}l(ie,"Searcher");const Te={};function Me(ke){let{teamId:Pe,key:Ie}=ke;if(!Pe)throw new Error("Searcher must be instantiated with a team id");return Te[Pe]&&!Te[Pe][Ie]&&(Te[Pe][Ie]=new ie(Pe)),Te[Pe]||(Te[Pe]={},Te[Pe][Ie]=new ie(Pe)),Te[Pe][Ie]}l(Me,"getSearcher"),(0,p.ul)("searcherObj",{search:(ke,Pe)=>new ie(ke).search(Pe),searchLocal:(ke,Pe)=>{new ie(ke).searchLocal(Pe)}})},684897:(j,T,e)=>{"use strict";e.d(T,{In:()=>s,KV:()=>n,nK:()=>a});var t=e(135713);const n="autocompleteFallback";function s(){return n}l(s,"getModelForSorter");function a(c){return(0,t._Z)(c,"searcher_sessions_phase_1")==="treatment"}l(a,"shouldUseSearcherSessions")},103310:(j,T,e)=>{"use strict";e.d(T,{A:()=>$e});var t=e(543406),n=e(219477),s=e(698448),a=e(454452),c=e(780076),r=e(710596),o=e(396386),u=e(850960);function m(k){var se;const ge=(se=k.actions)===null||se===void 0?void 0:se[0];if(!ge)return 0;const ot=parseFloat(ge.ts);return isNaN(ot)?0:ot}l(m,"getLatestActionTs");var i=e(23219),d=e(354187),_=e(965112),h=e(988727),p=e(656453),A=e(251999),v=e(649098),E=e(271338),f=e(43335),g=e(193074),y=e(180491),I=e(62211),O=e(590671),M=e(57271);class C extends M.l{fetchData(){return y.S.resolve()}onCacheData(se){super.onCacheData(se);const ge=1e3*60*60*4;this.refreshTimer&&clearTimeout(this.refreshTimer),this.refreshTimer=null,this.refreshTimer=setTimeout(()=>{this._callCacheGet()},this.timeoutMs+Math.random()*ge)}getStaleWhileRevalidate(se){return this.isStaleOrUndefined()&&(this._callCacheGet(),this.cachedData===void 0)?se:this.cachedData}constructor(){super(()=>this.fetchData(),1008e5,!1),this.refreshTimer=null}}l(C,"AutocompleteCache");var P=e(449552);const L=.014,x=.094,F=.148,V=.132,B=.179;class D extends C{fetchData(){return(0,O.Am)(this.teamId)?(0,P.dispatchForTeamId)(this.teamId,(0,I.yp)()).catch(se=>({exception:se})).then(se=>new S({topEmojis:se.top_emojis,topMpims:se.top_mpims,topChannels:se.top_channels,topUsers:se.top_users,emojiFeatures:se.emoji_features,mpimFeatures:se.mpim_features,channelFeatures:se.channel_features,userFeatures:se.user_features,mpimCtr:se.mpim_ctr,channelCtr:se.channel_ctr,userCtr:se.user_ctr,emojiCtr:se.emoji_ctr,otherCtr:se.other_ctr,defaultFeatureNames:se.default_features,topAppActions:se.top_app_actions,topGlobalActions:se.top_global_actions,topSlashCommands:se.top_slash_commands,topWorkflowTriggers:se.top_workflow_triggers,topChannelActions:se.top_channel_actions,appActionCtr:se.app_action_ctr,globalActionCtr:se.global_action_ctr,slashCommandCtr:se.slash_command_ctr,workflowTriggerCtr:se.workflow_trigger_ctr,channelActionCtr:se.channel_action_ctr,usersHasDmed:se.users_has_dmed})):y.S.resolve(new S)}getStaleWhileRevalidate(){return super.getStaleWhileRevalidate(new S)}constructor(se){super(),this.teamId=se}}l(D,"AutocompleteFeaturesCache");class S{getFeatures(se,ge){const ot=this.topEntities[ge],nn=this.featureNames[ge]||this.featureNames.default,qt=this.defaultEntityFeatures[ge],vn=ot&&ot[se];if(vn&&nn){const Ut={};for(let Sn=0;Sn<nn.length;Sn++)Ut[nn[Sn]]=vn[Sn];const Xt={team_ctr_90dd:qt.team_ctr_90dd,user_ctr_30dd:qt.user_ctr_30dd};for(const Sn of Object.keys(qt))Xt[Sn]=Ut[Sn]||qt[Sn];return Xt}return qt}getEntityCtr(se){return this.entityCtr[se]||this.otherEntityCtr}getUserDmChannelMetadata(se){return this.usersHasDmed?this.usersHasDmed[se]:null}constructor({topEmojis:se,topMpims:ge,topChannels:ot,topUsers:nn,emojiFeatures:qt,mpimFeatures:vn,channelFeatures:Ut,userFeatures:Xt,mpimCtr:Sn,channelCtr:Yn,userCtr:Qe,emojiCtr:yt,otherCtr:Ht,defaultFeatureNames:it,topAppActions:st,topGlobalActions:gt,topSlashCommands:Ue,topWorkflowTriggers:Bt,topChannelActions:zt,appActionCtr:En,globalActionCtr:tn,slashCommandCtr:jt,workflowTriggerCtr:on,channelActionCtr:In,usersHasDmed:Pn}={}){this.topEntities={emoji:se,mpim:ge,channel:ot,member:nn,appAction:st,globalAction:gt,slashCommand:Ue,workflowTrigger:Bt,channelAction:zt},this.featureNames={emoji:qt,mpim:vn,channel:Ut,member:Xt,default:it},this.otherEntityCtr=Ht??B,this.entityCtr={mpim:Sn??L,channel:Yn??F,member:Qe??V,emoji:yt??x,appAction:En??this.otherEntityCtr,globalAction:tn??this.otherEntityCtr,slashCommand:jt??this.otherEntityCtr,workflowTrigger:on??this.otherEntityCtr,channelAction:In??this.otherEntityCtr},this.defaultEntityFeatures={};for(const cn of Object.keys(this.entityCtr))this.defaultEntityFeatures[cn]={team_ctr_90dd:this.getEntityCtr(cn),user_ctr_30dd:this.getEntityCtr(cn)};this.usersHasDmed=Pn}}l(S,"AutocompleteFeatures");const R={};function w(k){let{teamId:se,enterpriseId:ge}=k;const ot=ge||se||"_default";return R[ot]||(R[ot]=new D(se)),R[ot]}l(w,"getAutocompleteFeaturesCache");var Y=e(63753),Q=e(250791),Z=e(269592),ee=e(994315),_e=e(710586),Ee=e(174888),G=e(477262),Ae=e(536160),ce=e(974576),de=e(682520),oe=e(621690),$=e(42302);class re{writeNumericalFeature(se,ge){!se||!isFinite(se)||(this.writeIdAndType(ge,G.c.NUMERICAL),this.ensureCapacity(4),this.view.setFloat32(this.offset,se),this.offset+=4)}writeBinaryFeature(se,ge){se&&this.writeIdAndType(ge,G.c.BINARY)}writeTextFeature(se,ge){if(!se)return;this.writeIdAndType(ge,G.c.TEXT);const ot=unescape(encodeURIComponent(se));this.ensureCapacity(2+ot.length),this.view.setUint16(this.offset,ot.length),this.offset+=2,(0,oe.A)(ot.length).forEach(nn=>{this.view.setUint8(this.offset,ot.charCodeAt(nn)),this.offset+=1})}writeNullFeature(){(0,$.A)()}writeIdAndType(se,ge){this.ensureCapacity(2),this.view.setUint16(this.offset,se<<3|ge),this.offset+=2}ensureCapacity(se){this.offset+se>this.buffer.byteLength&&this.resize(this.offset+se)}resize(se){if(this.buffer.byteLength>=se)return;const ge=new ArrayBuffer(2*this.buffer.byteLength);new Uint8Array(ge).set(new Uint8Array(this.buffer)),this.buffer=ge,this.view=new DataView(this.buffer)}serialize(){return btoa(String.fromCharCode(...new Uint8Array(this.buffer.slice(0,this.offset))))}constructor(){this.buffer=new ArrayBuffer(256),this.view=new DataView(this.buffer),this.offset=0}}l(re,"BinaryFeatureVectorSerializer");var ue=e(46787);const te=(0,ue.A)(G.Q);function ae(k){return te[k]}l(ae,"getFeatureNameFromId");var H=e(474253);const U={globalFeatures:["ID","FRECENCY","RAW_FRECENCY","FRECENCY_BONUS","FRECENCY_LOG_HIT_COUNT","FRECENCY_LOG_HIT_COUNT_SCALED","FRECENCY_HIT_COUNT","FRECENCY_WEIGHT_HIT_VISITS","FRECENCY_WEIGHT_ITEM_VISITS","FRECENCY_ITEM_COUNT","FRECENCY_LOG_ITEM_COUNT","FRECENCY_LOG_ITEM_COUNT_SCALED","FRECENCY_HIT_VISITS_4H","FRECENCY_HIT_VISITS_1D","FRECENCY_HIT_VISITS_3D","FRECENCY_HIT_VISITS_1W","FRECENCY_HIT_VISITS_1M","FRECENCY_HIT_VISITS_90D","FRECENCY_ITEM_VISITS_4H","FRECENCY_ITEM_VISITS_1D","FRECENCY_ITEM_VISITS_3D","FRECENCY_ITEM_VISITS_1W","FRECENCY_ITEM_VISITS_1M","FRECENCY_ITEM_VISITS_90D","FUZZY_SCORE","FUZZY_SCORE_50","FUZZY_SCORE_25","FUZZY_SCORE_ALL","FUZZY_SCORE_SCALED_EXP","FUZZY_SCORE_SCALED_FLIPPED","FUZZY_SCORE_SCALED_SUBTRACT","NAV_EXACT_MATCH","NAV_EXACT_PREFIX_MATCH","NAV_NORMAL_MATCH","NAV_NORMAL_PREFIX_MATCH","NAV_NORMAL_MATCH_NO_USER","NAV_NORMAL_PREFIX_MATCH_NO_USER","NAV_QUERY_LENGTH","NAV_TEXT_LENGTH","NAV_QUERY_RATIO_LENGTH_STRING","EXACT_MATCH_LOG_RESULTS","USER_ENTITY_TYPE_CTR_30DD","NUM_RESULTS"],userFeatures:["TYPE_NAVIGATION_USER","USER_PRIORITY","USER_IS_ACTIVE","USER_IS_EXTERNAL","USER_IS_CURRENT_USER","MEMBER_OF_CURRENT_CHANNEL","CURRENT_USER_TEXTY","USER_SAME_TEAM","USER_IS_BOT","USER_DM_IS_UNREAD","USER_DM_IS_STARRED","USER_DM_READ_AGE_DECAY_7D","USER_DM_READ_AGE_DECAY_2H","USER_DM_READ_AGE_DECAY_7D_V2","USER_DM_READ_AGE_DECAY_2H_V2","USER_DM_LATEST_MSG_AGE_DECAY_7D","USER_DM_LATEST_MSG_AGE_DECAY_2H","USER_DM_LATEST_MSG_AGE_DECAY_7D_V2","USER_DM_LATEST_MSG_AGE_DECAY_2H_V2","USER_DM_IS_FROZEN","USER_DM_HAS_DRAFT","USER_DM_NULL","USER_DM_EMPTY","USER_DM_NOT_OPEN","USER_DM_OPEN","USER_DM_LATEST_OLDER_30D","USER_DM_LATEST_OLDER_90D","USER_DM_EMPTY_V2","USER_DM_LATEST_OLDER_30D_V2","USER_DM_LATEST_OLDER_90D_V2","USER_HAS_DMED","USER_DM_READ_AGE_DECAY_2H_V3","USER_DM_READ_AGE_DECAY_7D_V3","USER_DM_READ_OLDER_7D","USER_DM_READ_OLDER_30D","USER_DM_READ_OLDER_90D","USER_QUERY_RATIO_LENGTH_STRING","NAV_NORMAL_PREFIX_MATCH_USER","NAV_NORMAL_MATCH_USER","USER_FIRST_NAME_NORMAL_MATCH","USER_FIRST_NAME_NORMAL_PREFIX_MATCH","USER_FIRST_NAME_EXACT_MATCH","USER_FIRST_NAME_EXACT_PREFIX_MATCH","USER_LAST_NAME_NORMAL_MATCH","USER_LAST_NAME_NORMAL_PREFIX_MATCH","USER_LAST_NAME_EXACT_MATCH","USER_LAST_NAME_EXACT_PREFIX_MATCH","USER_EMAIL_MATCH","USER_EMAIL_ONLY_MATCH","QUERY_IS_SELF","HISTORY_AGE_DECAY_2H","HISTORY_AGE_DECAY_7D","HISTORY_POSITION","USER_MPIM_READ_AGE_DECAY_7D","USER_MPIM_READ_AGE_DECAY_2H","USER_MPIM_LATEST_MSG_AGE_DECAY_7D","USER_MPIM_LATEST_MSG_AGE_DECAY_2H","USER_MPIM_FRECENCY_LOG_ITEM_COUNT","USER_MPIM_FRECENCY_LOG_HIT_COUNT"],channelFeatures:["TYPE_NAVIGATION_CHANNEL","CHANNEL_IS_MEMBER","CHANNEL_PRIORITY","CHANNEL_IS_STARRED","CHANNEL_IS_ARCHIVED","CHANNEL_IS_OTHER_TEAM","CHANNEL_IS_FROZEN","CHANNEL_HAS_DRAFT","CHANNEL_QUERY_RATIO_LENGTH_STRING","QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL","NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS","CHANNEL_IS_UNREAD","CHANNEL_READ_AGE_DECAY_2H","CHANNEL_READ_AGE_DECAY_7D","CHANNEL_LATEST_MSG_AGE_DECAY_7D","CHANNEL_LATEST_MSG_AGE_DECAY_2H","CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH","CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH","ONLY_MATCHES_PREVIOUS_NAME","CHANNEL_TEAM_CTR_90DD","CHANNEL_USER_CTR_30DD","HISTORY_AGE_DECAY_2H","HISTORY_AGE_DECAY_7D","HISTORY_POSITION"],mpimFeatures:["TYPE_NAVIGATION_MPIM","MPIM_IS_STARRED","MPIM_READ_AGE_DECAY_2H","MPIM_READ_AGE_DECAY_7D","MPIM_LATEST_MSG_AGE_DECAY_2H","MPIM_LATEST_MSG_AGE_DECAY_7D","MPIM_IS_UNREAD","MPIM_WITH_DEACTIVATED_USER","MPIM_PRIORITY","MPIM_QUERY_RATIO_LENGTH_STRING","MPIM_MEMBERS","MPIM_MEMBER_NAME_MATCHES","MPIM_MEMBER_ALL_MATCHES","MPIM_MATCHER_SCORE","MPIM_MATCHER_SCORE_0","MPIM_MATCHER_SCORE_1","MPIM_MATCHER_SCORE_2","MPIM_MATCHER_SCORE_3","MPIM_TEAM_CTR_90DD","MPIM_USER_CTR_30DD","HISTORY_AGE_DECAY_2H","HISTORY_AGE_DECAY_7D","HISTORY_POSITION","MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H","MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D","MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H","MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D","MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H","MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D","MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H","MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D","MPIM_USERS_PCT_NON_EMPTY_DMS","MPIM_USERS_PCT_NON_NULL_DMS","MPIM_USERS_ALL_INTERNAL"],viewFeatures:["TYPE_NAVIGATION_VIEW"],fileFeatures:["TYPE_NAVIGATION_FILE","FILE_SUGGESTION_SCORE","FILE_AGE_DECAY_7D","FILE_AGE_DECAY_28D","FILE_AGE_DECAY_90D","FILE_FROM_CURRENT_USER","FILE_LOG_PUBLIC_SHARES","FILE_LOG_PRIVATE_SHARES","FILE_LOG_ACTIONS","FILE_LATEST_ACTION_AGE_DECAY_2H","FILE_LATEST_ACTION_AGE_DECAY_7D","FILE_LATEST_ACTION_AGE_DECAY_90D","FILE_LATEST_SHARE_AGE_DECAY_2H","FILE_LATEST_SHARE_AGE_DECAY_7D","FILE_LATEST_SHARE_AGE_DECAY_90D","FILE_CHANNEL_CTR","FILE_SUGGESTIONS_SEARCHER","FILE_USER_CTR","FILE_NAME_CONTAINS_QUERY_NORMALIZED","FILE_IS_CANVAS","FILE_HAS_DMS_WITH_CREATOR","FILE_HAS_DMS_WITH_CREATOR_V2","FILE_LATEST_VIEW_BY_USER_OLDER_90D"],linkFeatures:["TYPE_NAVIGATION_LINK"],modalFeatures:["TYPE_NAVIGATION_MODAL"],teamFeatures:["TYPE_NAVIGATION_TEAM"],emojiFeatures:["EMOJI_EXACT_MATCH","EMOJI_QUERY_LENGTH_RATIO","EMOJI_TOTAL_COMBO_BREAKS","EMOJI_COMBO_BREAK_0","EMOJI_COMBO_BREAK_1","EMOJI_COMBO_BREAK_2","EMOJI_COMBO_BREAK_3","TYPE_EMOJI","FRECENCY_HIT_VISIT_DECAY_2H","FRECENCY_HIT_VISIT_DECAY_7D","FRECENCY_ITEM_VISIT_DECAY_2H","FRECENCY_ITEM_VISIT_DECAY_7D","EMOJI_TEAM_CTR_90DD","EMOJI_USER_CTR_30DD"],broadcastKeywordFeatures:["IS_BROADCAST_KEYWORD","HERE_KEYWORD","HERE_KEYWORD_EXACT_MATCH","BROADCAST_KEYWORD_NORMAL_MATCH"],queryFeatures:["TYPE_QUERY","TYPE_USER_QUERY","TYPE_QUERY_HISTORY","ACTIVE_TOKEN_STRING","ACTIVE_TOKEN_MEMBER","ACTIVE_TOKEN_PHRASE","ACTIVE_TOKEN_QUERY_SUGGESTION","ACTIVE_TOKEN_FILTER_DURING","ACTIVE_TOKEN_FILTER_FROM","ACTIVE_TOKEN_FILTER_IN","ACTIVE_TOKEN_FILTER_TO","ACTIVE_TOKEN_FILTER_BEFORE","ACTIVE_TOKEN_FILTER_HAS","ACTIVE_TOKEN_FILTER_IS","ACTIVE_TOKEN_FILTER_ON","ACTIVE_TOKEN_FILTER_AFTER","ACTIVE_TOKEN_FILTER_WITH","QUERY_SUGGESTION_SCORE_V2","QUERY_FRECENCY_RAW","QUERY_FRECENCY_WEIGHT_HIT_VISITS","QUERY_FRECENCY_HIT_COUNT","QUERY_FRECENCY_WEIGHT_ITEM_VISITS","QUERY_FRECENCY_ITEM_COUNT","QUERY_FUZZY_SCORE","QUERY_FRECENCY_BONUS","QUERY_HISTORY_AGE_DECAY_30D","QUERY_HISTORY_LOG_INDEX","FILTER_USER_IS_ACTIVE","FILTER_USER_IS_CURRENT_USER","FILTER_USER_DM_IS_STARRED","FILTER_USER_DM_IS_UNREAD","FILTER_USER_DM_READ_AGE_DECAY_7D","FILTER_USER_DM_READ_AGE_DECAY_2H","FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D","FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H","FILTER_USER_FIRST_NAME_NORMAL_MATCH","FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH","FILTER_USER_LAST_NAME_NORMAL_MATCH","FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH","FILTER_USER_PRIORITY","FILTER_CHANNEL_IS_ARCHIVED","FILTER_CHANNEL_IS_MEMBER","FILTER_CHANNEL_IS_STARRED","FILTER_CHANNEL_IS_UNREAD","FILTER_CHANNEL_READ_AGE_DECAY_7D","FILTER_CHANNEL_READ_AGE_DECAY_2H","FILTER_CHANNEL_PRIORITY","STRING_EXACT_MATCH","STRING_EXACT_PREFIX_MATCH","STRING_NORMAL_MATCH","STRING_NORMAL_PREFIX_MATCH","STRING_SAME_NUMBER_WORDS","EXCESS_STRING_LENGTH","SUGGESTION_TEXT_LENGTH","QUERY_LENGTH","QUERY_RATIO_LENGTH_STRING","QUERY_TOKEN_NORMAL_MATCH","QUERY_TOKEN_NORMAL_PREFIX_MATCH","QUERY_LOG_HIT_COUNT"],appActionFeatures:["TYPE_APP_ACTION","APP_ACTION_TEAM_CTR","APP_ACTION_USER_CTR","OS_APP_ACTION"],shortcutFeatures:["APP_NAME_PREFIX_MATCH","SHORTCUT_ENTITY_TYPE_CTR","BEST_NAME_MATCH_LOG_RESULTS"],slashCommandFeatures:["TYPE_SLASH_COMMAND","SLASH_COMMAND_TEAM_CTR","SLASH_COMMAND_USER_CTR"],globalActionFeatures:["TYPE_GLOBAL_ACTION","IS_INVITE_WORKSPACE","GLOBAL_ACTION_TEAM_CTR","GLOBAL_ACTION_USER_CTR"],channelActionFeatures:["TYPE_CHANNEL_ACTION","CHANNEL_ACTION_TEAM_CTR","CHANNEL_ACTION_USER_CTR"],appFeatures:["TYPE_APP"],messageFeatures:["TYPE_NAVIGATION_MESSAGE"],workflowTriggerFeatures:["TYPE_WORKFLOW_TRIGGER","WORKFLOW_TRIGGER_TEAM_CTR","WORKFLOW_TRIGGER_USER_CTR"],channelAssociatedWorkflowFeatures:["HAS_CHANNEL_ASSOCIATION"]};var N=e(453651);function K(k,se){return xn.fromSuggestion(k,se)}l(K,"featureVectorForSuggestion");function W(){return(0,de.Wo)({label:"SORTER-RANKING"})}l(W,"getLogger");function J(k){return Number.isInteger(k)}l(J,"isIntegerWithType");const q=60*60,ie=24*q;var Te,Me,ke,Pe,Ie,X,ne,fe,be,Be,We,Re,ve,xe,He,je,Ke,ht,dt,Ve,Je,Ge,Le,Mt,Dt,pt,Qt,Nt,bt,Yt,fn,Tt,sn,mn,wt,On,Zt,Mn;const Wn={FRECENCY:k=>Se({id:G.Q.FRECENCY,value:Ce(k)}),TYPE_NAVIGATION_CHANNEL:(k,se)=>{let{itemIsChannel:ge}=se;return Se({id:G.Q.TYPE_NAVIGATION_CHANNEL,value:ge})},TYPE_NAVIGATION_FILE:k=>Se({id:G.Q.TYPE_NAVIGATION_FILE,value:k.suggestionType===H.fd.FILE_NAVIGATION}),TYPE_NAVIGATION_LINK:k=>Se({id:G.Q.TYPE_NAVIGATION_LINK,value:k.suggestionType===H.fd.LINK_NAVIGATION}),TYPE_NAVIGATION_MODAL:k=>Se({id:G.Q.TYPE_NAVIGATION_MODAL,value:k.suggestionType===H.fd.MODAL_NAVIGATION}),TYPE_NAVIGATION_MPIM:k=>Se({id:G.Q.TYPE_NAVIGATION_MPIM,value:!!(0,o.yz)(k.item)}),TYPE_NAVIGATION_USER:(k,se)=>{let{itemIsMember:ge}=se;return Se({id:G.Q.TYPE_NAVIGATION_USER,value:ge})},TYPE_QUERY:k=>Se({id:G.Q.TYPE_QUERY,value:k.suggestionType===H.fd.QUERY}),TYPE_QUERY_HISTORY:k=>Se({id:G.Q.TYPE_QUERY_HISTORY,value:k.suggestionType===H.fd.QUERY_HISTORY}),ACTIVE_TOKEN_FILTER_IN:k=>Se({id:G.Q.ACTIVE_TOKEN_FILTER_IN,value:k.lastSuggestionToken&&k.lastSuggestionToken.type===H.S6.FILTER_IN}),ACTIVE_TOKEN_FILTER_FROM:k=>Se({id:G.Q.ACTIVE_TOKEN_FILTER_FROM,value:k.lastSuggestionToken&&k.lastSuggestionToken.type===H.S6.FILTER_FROM}),ACTIVE_TOKEN_FILTER_TO:k=>Se({id:G.Q.ACTIVE_TOKEN_FILTER_TO,value:k.lastSuggestionToken&&k.lastSuggestionToken.type===H.S6.FILTER_TO}),ACTIVE_TOKEN_FILTER_BEFORE:k=>Se({id:G.Q.ACTIVE_TOKEN_FILTER_BEFORE,value:k.lastSuggestionToken&&k.lastSuggestionToken.type===H.S6.FILTER_BEFORE}),ACTIVE_TOKEN_FILTER_DURING:k=>Se({id:G.Q.ACTIVE_TOKEN_FILTER_DURING,value:k.lastSuggestionToken&&k.lastSuggestionToken.type===H.S6.FILTER_DURING}),ACTIVE_TOKEN_FILTER_ON:k=>Se({id:G.Q.ACTIVE_TOKEN_FILTER_ON,value:k.lastSuggestionToken&&k.lastSuggestionToken.type===H.S6.FILTER_ON}),ACTIVE_TOKEN_FILTER_AFTER:k=>Se({id:G.Q.ACTIVE_TOKEN_FILTER_AFTER,value:k.lastSuggestionToken&&k.lastSuggestionToken.type===H.S6.FILTER_AFTER}),ACTIVE_TOKEN_FILTER_HAS:k=>Se({id:G.Q.ACTIVE_TOKEN_FILTER_HAS,value:k.lastSuggestionToken&&k.lastSuggestionToken.type===H.S6.FILTER_HAS}),ACTIVE_TOKEN_FILTER_IS:k=>Se({id:G.Q.ACTIVE_TOKEN_FILTER_IS,value:k.lastSuggestionToken&&k.lastSuggestionToken.type===H.S6.FILTER_IS}),ACTIVE_TOKEN_FILTER_WITH:k=>Se({id:G.Q.ACTIVE_TOKEN_FILTER_WITH,value:k.lastSuggestionToken&&k.lastSuggestionToken.type===H.S6.FILTER_WITH}),ACTIVE_TOKEN_MEMBER:k=>Se({id:G.Q.ACTIVE_TOKEN_MEMBER,value:k.lastSuggestionToken&&k.lastSuggestionToken.type===H.S6.MEMBER}),ACTIVE_TOKEN_STRING:k=>Se({id:G.Q.ACTIVE_TOKEN_STRING,value:k.lastSuggestionToken&&k.lastSuggestionToken.type===H.S6.STRING}),ACTIVE_TOKEN_PHRASE:k=>Se({id:G.Q.ACTIVE_TOKEN_PHRASE,value:k.lastSuggestionToken&&k.lastSuggestionToken.type===H.S6.PHRASE}),STRING_EXACT_MATCH:k=>St({id:G.Q.STRING_EXACT_MATCH,suggestion:k,extractionFunction:Qn}),STRING_EXACT_PREFIX_MATCH:k=>St({id:G.Q.STRING_EXACT_PREFIX_MATCH,suggestion:k,extractionFunction:zn}),STRING_NORMAL_MATCH:k=>St({id:G.Q.STRING_NORMAL_MATCH,suggestion:k,extractionFunction:Hn}),STRING_NORMAL_PREFIX_MATCH:k=>St({id:G.Q.STRING_NORMAL_PREFIX_MATCH,suggestion:k,extractionFunction:Kn}),STRING_SAME_NUMBER_WORDS:k=>St({id:G.Q.STRING_SAME_NUMBER_WORDS,suggestion:k,extractionFunction:os}),EXCESS_STRING_LENGTH:k=>St({id:G.Q.EXCESS_STRING_LENGTH,suggestion:k,extractionFunction:et}),ID:k=>Se({id:G.Q.ID,value:k.logId||k.id}),FILE_SUGGESTION_SCORE:k=>Se({id:G.Q.FILE_SUGGESTION_SCORE,value:ze(k)}),ACTIVE_TOKEN_QUERY_SUGGESTION:k=>Se({id:G.Q.ACTIVE_TOKEN_QUERY_SUGGESTION,value:k.lastSuggestionToken&&k.lastSuggestionToken.type===H.S6.API}),QUERY_SUGGESTION_SCORE_V2:k=>Se({id:G.Q.QUERY_SUGGESTION_SCORE_V2,value:Ne(k)}),TYPE_NAVIGATION_TEAM:k=>Se({id:G.Q.TYPE_NAVIGATION_TEAM,value:k&&k.suggestionType===H.fd.TEAM_NAVIGATION}),TYPE_NAVIGATION_VIEW:k=>Se({id:G.Q.TYPE_NAVIGATION_VIEW,value:k&&k.suggestionType===H.fd.VIEW_NAVIGATION}),TYPE_USER_QUERY:k=>Se({id:G.Q.TYPE_USER_QUERY,value:k&&k.suggestionType===H.fd.QUERY_USER}),NAV_EXACT_MATCH:k=>St({id:G.Q.NAV_EXACT_MATCH,suggestion:k,extractionFunction:Qn,text:_t(k)}),NAV_EXACT_PREFIX_MATCH:k=>St({id:G.Q.NAV_EXACT_PREFIX_MATCH,suggestion:k,extractionFunction:zn,text:_t(k)}),NAV_NORMAL_MATCH:k=>St({id:G.Q.NAV_NORMAL_MATCH,suggestion:k,extractionFunction:Hn,text:_t(k)}),CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH:(k,se)=>{let{itemIsChannel:ge}=se;var ot,nn;return St({id:G.Q.CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH,suggestion:k,extractionFunction:qt=>{let{text:vn,query:Ut}=qt;return vn?(0,n.A)(vn.split(",").map(Xt=>Qn({text:Xt,query:Ut}))):!1},text:ge?(ot=k.item)===null||ot===void 0||(nn=ot.previous_names)===null||nn===void 0?void 0:nn.join(","):null})},CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH:(k,se)=>{let{itemIsChannel:ge}=se;var ot,nn;return St({id:G.Q.CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH,suggestion:k,extractionFunction:qt=>{let{text:vn,query:Ut}=qt;return vn?(0,n.A)(vn.split(",").map(Xt=>zn({text:Xt,query:Ut}))):!1},text:ge?k==null||(ot=k.item)===null||ot===void 0||(nn=ot.previous_names)===null||nn===void 0?void 0:nn.join(","):null})},CHANNEL_IS_ARCHIVED:(k,se)=>{let{itemIsChannel:ge}=se;return Se({id:G.Q.CHANNEL_IS_ARCHIVED,value:ge&&(0,u.F)(k.item)})},CHANNEL_IS_MEMBER:(k,se)=>{let{itemIsChannel:ge}=se;return Se({id:G.Q.CHANNEL_IS_MEMBER,value:ge&&(0,r.bl)(k.item)})},CHANNEL_IS_STARRED:(k,se)=>{let{itemIsChannel:ge}=se;return Se({id:G.Q.CHANNEL_IS_STARRED,value:ge&&k.isStarred})},MPIM_IS_STARRED:k=>Se({id:G.Q.MPIM_IS_STARRED,value:(0,o.yz)(k.item)&&k.isStarred}),CHANNEL_IS_UNREAD:(k,se)=>{let{itemIsChannel:ge}=se;return Se({id:G.Q.CHANNEL_IS_UNREAD,value:ge&&(0,r.KJ)(k.item)})},MPIM_IS_UNREAD:k=>Se({id:G.Q.MPIM_IS_UNREAD,value:(0,o.yz)(k.item)&&(0,r.KJ)(k.item)}),CHANNEL_IS_OTHER_TEAM:(k,se)=>{let{itemIsChannel:ge}=se;return Se({id:G.Q.CHANNEL_IS_OTHER_TEAM,value:ge&&(0,r.lo)(k.item)})},USER_IS_ACTIVE:(k,se)=>{let{itemIsMember:ge}=se;return Se({id:G.Q.USER_IS_ACTIVE,value:ge&&(0,i.ls)(k.item)})},USER_IS_EXTERNAL:(k,se)=>{let{itemIsMember:ge}=se;return Se({id:G.Q.USER_IS_EXTERNAL,value:ge&&(0,_.g)(k.item)})},USER_IS_BOT:(k,se)=>{let{itemIsMember:ge}=se;return Se({id:G.Q.USER_IS_BOT,value:ge&&(0,ce.A)(k.item)})},USER_SAME_TEAM:(k,se)=>{let{itemIsMember:ge}=se;return Se({id:G.Q.USER_SAME_TEAM,value:ge&&!!k.sameTeam})},USER_IS_CURRENT_USER:(k,se)=>{let{isCurrentUser:ge}=se;return Se({id:G.Q.USER_IS_CURRENT_USER,value:ge})},USER_DM_IS_STARRED:(k,se)=>{let{itemIsMember:ge}=se;return Se({id:G.Q.USER_DM_IS_STARRED,value:ge&&k.im&&k.imIsStarred})},USER_DM_IS_UNREAD:(k,se)=>{let{itemIsMember:ge}=se;return Se({id:G.Q.USER_DM_IS_UNREAD,value:ge&&k.im&&(0,r.KJ)(k.im)})},CHANNEL_PRIORITY:(k,se)=>{let{itemIsChannel:ge}=se;return Se({id:G.Q.CHANNEL_PRIORITY,value:ge&&(k==null?void 0:k.priority)})},CHANNEL_READ_AGE_DECAY_7D:(k,se)=>{let{itemIsChannel:ge,now:ot}=se;return Se({id:G.Q.CHANNEL_READ_AGE_DECAY_7D,value:ge&&It(ot,parseFloat((Te=k.lastReadTs)!==null&&Te!==void 0?Te:""),7*ie)||0})},CHANNEL_READ_AGE_DECAY_2H:(k,se)=>{let{itemIsChannel:ge,now:ot}=se;return Se({id:G.Q.CHANNEL_READ_AGE_DECAY_2H,value:ge&&It(ot,parseFloat((Me=k.lastReadTs)!==null&&Me!==void 0?Me:""),2*q)||0})},MPIM_READ_AGE_DECAY_2H:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.MPIM_READ_AGE_DECAY_2H,value:(0,o.yz)(k.item)&&It(ge,parseFloat((ke=k.lastReadTs)!==null&&ke!==void 0?ke:""),2*q)||0})},MPIM_READ_AGE_DECAY_7D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.MPIM_READ_AGE_DECAY_7D,value:(0,o.yz)(k.item)&&It(ge,parseFloat((Pe=k.lastReadTs)!==null&&Pe!==void 0?Pe:""),7*ie)||0})},USER_DM_READ_AGE_DECAY_7D:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_READ_AGE_DECAY_7D,value:ge&&k.im&&It(ot,parseFloat((Ie=k.lastReadTs)!==null&&Ie!==void 0?Ie:""),7*ie)||0})},USER_DM_READ_AGE_DECAY_7D_V2:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_READ_AGE_DECAY_7D_V2,value:ge&&k.im&&It(ot,parseFloat((X=k.lastReadImTs)!==null&&X!==void 0?X:""),7*ie)||0})},USER_DM_READ_AGE_DECAY_7D_V3:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_READ_AGE_DECAY_7D_V3,value:ge&&It(ot,parseFloat((ne=Tn(k))!==null&&ne!==void 0?ne:""),7*ie)||0})},USER_DM_READ_AGE_DECAY_2H:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_READ_AGE_DECAY_2H,value:ge&&k.im&&It(ot,parseFloat((fe=k.lastReadTs)!==null&&fe!==void 0?fe:""),2*q)||0})},USER_DM_READ_AGE_DECAY_2H_V2:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_READ_AGE_DECAY_2H_V2,value:ge&&k.im&&It(ot,parseFloat((be=k.lastReadImTs)!==null&&be!==void 0?be:""),2*q)||0})},USER_DM_READ_AGE_DECAY_2H_V3:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_READ_AGE_DECAY_2H_V3,value:ge&&It(ot,parseFloat((Be=Tn(k))!==null&&Be!==void 0?Be:""),2*q)||0})},USER_DM_NULL:(k,se)=>{let{itemIsMember:ge}=se;return Se({id:G.Q.USER_DM_NULL,value:ge&&!k.im})},USER_DM_EMPTY:(k,se)=>{let{itemIsMember:ge}=se;return Se({id:G.Q.USER_DM_EMPTY,value:ge&&k.im&&!parseFloat((We=k.latestTs)!==null&&We!==void 0?We:"")})},USER_DM_EMPTY_V2:(k,se)=>{let{itemIsMember:ge}=se;return Se({id:G.Q.USER_DM_EMPTY_V2,value:ge&&k.im&&!parseFloat((Re=k.latestImTs)!==null&&Re!==void 0?Re:"")})},USER_HAS_DMED:(k,se)=>{let{itemIsMember:ge}=se;return Se({id:G.Q.USER_HAS_DMED,value:ge&&!!parseFloat((ve=Tn(k))!==null&&ve!==void 0?ve:"")})},USER_DM_NOT_OPEN:(k,se)=>{let{itemIsMember:ge}=se;return Se({id:G.Q.USER_DM_NOT_OPEN,value:ge&&k.im&&!(0,r.nT)(k.im)})},USER_DM_OPEN:(k,se)=>{let{itemIsMember:ge}=se;return Se({id:G.Q.USER_DM_OPEN,value:ge&&k.im&&(0,r.nT)(k.im)})},USER_DM_LATEST_OLDER_30D:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_LATEST_OLDER_30D,value:ge&&an(ot,parseFloat((xe=k.latestTs)!==null&&xe!==void 0?xe:""),30*ie)})},USER_DM_LATEST_OLDER_30D_V2:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_LATEST_OLDER_30D_V2,value:ge&&an(ot,parseFloat((He=k.latestImTs)!==null&&He!==void 0?He:""),30*ie)})},USER_DM_LATEST_OLDER_90D:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_LATEST_OLDER_90D,value:ge&&an(ot,parseFloat((je=k.latestTs)!==null&&je!==void 0?je:""),90*ie)})},USER_DM_LATEST_OLDER_90D_V2:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_LATEST_OLDER_90D_V2,value:ge&&an(ot,parseFloat((Ke=k.latestImTs)!==null&&Ke!==void 0?Ke:""),90*ie)})},USER_DM_READ_OLDER_7D:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_READ_OLDER_7D,value:ge&&an(ot,parseFloat((ht=Tn(k))!==null&&ht!==void 0?ht:""),7*ie)})},USER_DM_READ_OLDER_30D:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_READ_OLDER_30D,value:ge&&an(ot,parseFloat((dt=Tn(k))!==null&&dt!==void 0?dt:""),30*ie)})},USER_DM_READ_OLDER_90D:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_READ_OLDER_90D,value:ge&&an(ot,parseFloat((Ve=Tn(k))!==null&&Ve!==void 0?Ve:""),90*ie)})},USER_MPIM_READ_AGE_DECAY_7D:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_MPIM_READ_AGE_DECAY_7D,value:ge&&k.mpimFeatures&&It(ot,k.mpimFeatures.lastReadTs,7*ie)||0})},USER_MPIM_READ_AGE_DECAY_2H:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_MPIM_READ_AGE_DECAY_2H,value:ge&&k.mpimFeatures&&It(ot,k.mpimFeatures.lastReadTs,2*q)||0})},USER_MPIM_LATEST_MSG_AGE_DECAY_7D:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_MPIM_LATEST_MSG_AGE_DECAY_7D,value:ge&&k.mpimFeatures&&It(ot,k.mpimFeatures.latestMsgTs,7*ie)||0})},USER_MPIM_LATEST_MSG_AGE_DECAY_2H:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_MPIM_LATEST_MSG_AGE_DECAY_2H,value:ge&&k.mpimFeatures&&It(ot,k.mpimFeatures.latestMsgTs,2*q)||0})},USER_MPIM_FRECENCY_LOG_ITEM_COUNT:(k,se)=>{let{itemIsMember:ge}=se;var ot;return Se({id:G.Q.USER_MPIM_FRECENCY_LOG_ITEM_COUNT,value:ge&&((ot=k.mpimFeatures)===null||ot===void 0?void 0:ot.itemCount)&&Math.log1p(k.mpimFeatures.itemCount)||0})},USER_MPIM_FRECENCY_LOG_HIT_COUNT:(k,se)=>{let{itemIsMember:ge}=se;var ot;return Se({id:G.Q.USER_MPIM_FRECENCY_LOG_HIT_COUNT,value:ge&&((ot=k.mpimFeatures)===null||ot===void 0?void 0:ot.hitCount)&&Math.log1p(k.mpimFeatures.hitCount)||0})},QUERY_LENGTH:k=>St({id:G.Q.QUERY_LENGTH,suggestion:k,extractionFunction:tt}),NAV_QUERY_LENGTH:k=>St({id:G.Q.NAV_QUERY_LENGTH,suggestion:k,extractionFunction:tt,text:_t(k)}),SUGGESTION_TEXT_LENGTH:k=>St({id:G.Q.SUGGESTION_TEXT_LENGTH,suggestion:k,extractionFunction:Rt}),NAV_TEXT_LENGTH:k=>St({id:G.Q.NAV_TEXT_LENGTH,suggestion:k,extractionFunction:Rt,text:_t(k)}),RAW_FRECENCY:k=>Se({id:G.Q.RAW_FRECENCY,value:k.rawFrecencyScore}),MPIM_PRIORITY:k=>Se({id:G.Q.MPIM_PRIORITY,value:(0,o.yz)(k.item)&&(k==null?void 0:k.priority)}),QUERY_RATIO_LENGTH_STRING:k=>St({id:G.Q.QUERY_RATIO_LENGTH_STRING,suggestion:k,extractionFunction:Et}),NAV_QUERY_RATIO_LENGTH_STRING:k=>St({id:G.Q.NAV_QUERY_RATIO_LENGTH_STRING,suggestion:k,extractionFunction:Et,text:_t(k)}),USER_QUERY_RATIO_LENGTH_STRING:k=>St({id:G.Q.USER_QUERY_RATIO_LENGTH_STRING,suggestion:k,extractionFunction:Et,text:ft(k,H.fd.USER_NAVIGATION)}),CHANNEL_QUERY_RATIO_LENGTH_STRING:k=>St({id:G.Q.CHANNEL_QUERY_RATIO_LENGTH_STRING,suggestion:k,extractionFunction:Et,text:ft(k,H.fd.CHANNEL_NAVIGATION)}),MPIM_QUERY_RATIO_LENGTH_STRING:k=>St({id:G.Q.MPIM_QUERY_RATIO_LENGTH_STRING,suggestion:k,extractionFunction:Et,text:ft(k,H.fd.MPIM_NAVIGATION)}),MPIM_WITH_DEACTIVATED_USER:k=>Se({id:G.Q.MPIM_WITH_DEACTIVATED_USER,value:(0,o.yz)(k.item)&&k.isMpimWithDeactivatedMember}),NAV_NORMAL_PREFIX_MATCH:k=>St({id:G.Q.NAV_NORMAL_PREFIX_MATCH,suggestion:k,extractionFunction:Kn,text:_t(k)}),FRECENCY_BONUS:k=>Se({id:G.Q.FRECENCY_BONUS,value:(0,Q.A)(Object.values(k.bonusPointMap||{}))||0}),USER_FIRST_NAME_EXACT_MATCH:(k,se)=>{let{itemIsMember:ge}=se;return St({id:G.Q.USER_FIRST_NAME_EXACT_MATCH,suggestion:k,extractionFunction:Qn,text:ge&&(0,i.XS)(k.item)})},USER_FIRST_NAME_EXACT_PREFIX_MATCH:(k,se)=>{let{itemIsMember:ge}=se;return St({id:G.Q.USER_FIRST_NAME_EXACT_PREFIX_MATCH,suggestion:k,extractionFunction:zn,text:ge&&(0,i.XS)(k.item)})},USER_FIRST_NAME_NORMAL_MATCH:(k,se)=>{let{itemIsMember:ge}=se;return St({id:G.Q.USER_FIRST_NAME_NORMAL_MATCH,suggestion:k,extractionFunction:Hn,text:ge&&(0,i.XS)(k.item)})},USER_FIRST_NAME_NORMAL_PREFIX_MATCH:(k,se)=>{let{itemIsMember:ge}=se;return St({id:G.Q.USER_FIRST_NAME_NORMAL_PREFIX_MATCH,suggestion:k,extractionFunction:Kn,text:ge&&(0,i.XS)(k.item)})},USER_LAST_NAME_EXACT_MATCH:(k,se)=>{let{itemIsMember:ge}=se;return St({id:G.Q.USER_LAST_NAME_EXACT_MATCH,suggestion:k,extractionFunction:Qn,text:ge&&(0,i.lQ)(k.item)})},USER_LAST_NAME_EXACT_PREFIX_MATCH:(k,se)=>{let{itemIsMember:ge}=se;return St({id:G.Q.USER_LAST_NAME_EXACT_PREFIX_MATCH,suggestion:k,extractionFunction:zn,text:ge&&(0,i.lQ)(k.item)})},USER_LAST_NAME_NORMAL_MATCH:(k,se)=>{let{itemIsMember:ge}=se;return St({id:G.Q.USER_LAST_NAME_NORMAL_MATCH,suggestion:k,extractionFunction:Hn,text:ge&&(0,i.lQ)(k.item)})},USER_LAST_NAME_NORMAL_PREFIX_MATCH:(k,se)=>{let{itemIsMember:ge}=se;return St({id:G.Q.USER_LAST_NAME_NORMAL_PREFIX_MATCH,suggestion:k,extractionFunction:Kn,text:ge&&(0,i.lQ)(k.item)})},USER_EMAIL_MATCH:k=>{var se,ge;return Se({id:G.Q.USER_EMAIL_MATCH,value:((se=k.scoreDetails)===null||se===void 0?void 0:se.email)!==void 0?((ge=k.scoreDetails)===null||ge===void 0?void 0:ge.email)>=0:!1})},USER_EMAIL_ONLY_MATCH:k=>{var se,ge;return Se({id:G.Q.USER_EMAIL_ONLY_MATCH,value:((se=k.scoreDetails)===null||se===void 0?void 0:se.email)!==void 0&&((ge=k.scoreDetails)===null||ge===void 0?void 0:ge.email)>=0&&Object.keys((Je=k.scoreDetails)!==null&&Je!==void 0?Je:{}).length===1})},USER_PRIORITY:(k,se)=>{let{itemIsMember:ge}=se;return Se({id:G.Q.USER_PRIORITY,value:ge&&k.im&&(k==null?void 0:k.priority)||0})},ONLY_MATCHES_PREVIOUS_NAME:k=>Se({id:G.Q.ONLY_MATCHES_PREVIOUS_NAME,value:k.bestPreviousNameMatch?1:null}),FRECENCY_WEIGHT_HIT_VISITS:k=>Se({id:G.Q.FRECENCY_WEIGHT_HIT_VISITS,value:k.weightHitVisits}),FRECENCY_HIT_VISITS_4H:k=>Se({id:G.Q.FRECENCY_HIT_VISITS_4H,value:k.hitVisits4h}),FRECENCY_HIT_VISITS_1D:k=>Se({id:G.Q.FRECENCY_HIT_VISITS_1D,value:k.hitVisits1d}),FRECENCY_HIT_VISITS_3D:k=>Se({id:G.Q.FRECENCY_HIT_VISITS_3D,value:k.hitVisits3d}),FRECENCY_HIT_VISITS_1W:k=>Se({id:G.Q.FRECENCY_HIT_VISITS_1W,value:k.hitVisits1w}),FRECENCY_HIT_VISITS_1M:k=>Se({id:G.Q.FRECENCY_HIT_VISITS_1M,value:k.hitVisits1m}),FRECENCY_HIT_VISITS_90D:k=>Se({id:G.Q.FRECENCY_HIT_VISITS_90D,value:k.hitVisits90d}),FRECENCY_ITEM_VISITS_4H:k=>Se({id:G.Q.FRECENCY_ITEM_VISITS_4H,value:k.itemVisits4h}),FRECENCY_ITEM_VISITS_1D:k=>Se({id:G.Q.FRECENCY_ITEM_VISITS_1D,value:k.itemVisits1d}),FRECENCY_ITEM_VISITS_3D:k=>Se({id:G.Q.FRECENCY_ITEM_VISITS_3D,value:k.itemVisits3d}),FRECENCY_ITEM_VISITS_1W:k=>Se({id:G.Q.FRECENCY_ITEM_VISITS_1W,value:k.itemVisits1w}),FRECENCY_ITEM_VISITS_1M:k=>Se({id:G.Q.FRECENCY_ITEM_VISITS_1M,value:k.itemVisits1m}),FRECENCY_ITEM_VISITS_90D:k=>Se({id:G.Q.FRECENCY_ITEM_VISITS_90D,value:k.itemVisits90d}),FRECENCY_HIT_COUNT:k=>Se({id:G.Q.FRECENCY_HIT_COUNT,value:k.hitCount}),FRECENCY_WEIGHT_ITEM_VISITS:k=>Se({id:G.Q.FRECENCY_WEIGHT_ITEM_VISITS,value:k.weightItemVisits}),FRECENCY_ITEM_COUNT:k=>Se({id:G.Q.FRECENCY_ITEM_COUNT,value:k.itemCount}),NAV_NORMAL_MATCH_USER:k=>St({id:G.Q.NAV_NORMAL_MATCH_USER,suggestion:k,extractionFunction:se=>{let{text:ge,normalizedQuery:ot}=se;return Hn({text:ge,normalizedQuery:ot})&&!Kn({text:(0,i.XS)(k.item),normalizedQuery:ot})},text:ft(k,H.fd.USER_NAVIGATION)}),NAV_NORMAL_PREFIX_MATCH_USER:k=>St({id:G.Q.NAV_NORMAL_PREFIX_MATCH_USER,suggestion:k,extractionFunction:se=>{let{text:ge,normalizedQuery:ot}=se;return Kn({text:ge,normalizedQuery:ot})&&!Kn({text:(0,i.XS)(k.item),normalizedQuery:ot})},text:ft(k,H.fd.USER_NAVIGATION)}),NAV_NORMAL_MATCH_NO_USER:k=>St({id:G.Q.NAV_NORMAL_MATCH_NO_USER,suggestion:k,extractionFunction:Hn,text:Ct(k)}),NAV_NORMAL_PREFIX_MATCH_NO_USER:k=>St({id:G.Q.NAV_NORMAL_PREFIX_MATCH_NO_USER,suggestion:k,extractionFunction:Kn,text:Ct(k)}),CHANNEL_LATEST_MSG_AGE_DECAY_7D:(k,se)=>{let{itemIsChannel:ge,now:ot}=se;return Se({id:G.Q.CHANNEL_LATEST_MSG_AGE_DECAY_7D,value:ge&&It(ot,parseFloat((Ge=k.latestTs)!==null&&Ge!==void 0?Ge:""),7*ie)||0})},CHANNEL_LATEST_MSG_AGE_DECAY_2H:(k,se)=>{let{itemIsChannel:ge,now:ot}=se;return Se({id:G.Q.CHANNEL_LATEST_MSG_AGE_DECAY_2H,value:ge&&It(ot,parseFloat((Le=k.latestTs)!==null&&Le!==void 0?Le:""),2*q)||0})},MPIM_LATEST_MSG_AGE_DECAY_2H:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.MPIM_LATEST_MSG_AGE_DECAY_2H,value:(0,o.yz)(k.item)&&It(ge,parseFloat((Mt=k.latestTs)!==null&&Mt!==void 0?Mt:""),2*q)||0})},MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H,value:(0,o.yz)(k.item)&&It(ge,k.maxLatestMsgTsOfAllMembers,2*q)||0})},MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D,value:(0,o.yz)(k.item)&&It(ge,k.maxLatestMsgTsOfAllMembers,7*ie)||0})},MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H,value:(0,o.yz)(k.item)&&It(ge,k.avgLatestMsgTsOfAllMembers,2*q)||0})},MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D,value:(0,o.yz)(k.item)&&It(ge,k.avgLatestMsgTsOfAllMembers,7*ie)||0})},MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H,value:(0,o.yz)(k.item)&&It(ge,k.maxLastReadTsOfAllMembers,2*q)||0})},MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D,value:(0,o.yz)(k.item)&&It(ge,k.maxLastReadTsOfAllMembers,7*ie)||0})},MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H,value:(0,o.yz)(k.item)&&It(ge,k.avgLastReadTsOfAllMembers,2*q)||0})},MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D,value:(0,o.yz)(k.item)&&It(ge,k.avgLastReadTsOfAllMembers,7*ie)||0})},MPIM_USERS_PCT_NON_EMPTY_DMS:k=>Se({id:G.Q.MPIM_USERS_PCT_NON_EMPTY_DMS,value:(0,o.yz)(k.item)&&k.pctNonEmptyDmsForAllMembers||0}),MPIM_USERS_PCT_NON_NULL_DMS:k=>Se({id:G.Q.MPIM_USERS_PCT_NON_NULL_DMS,value:(0,o.yz)(k.item)&&k.pctNonNullDmsForAllMembers||0}),MPIM_USERS_ALL_INTERNAL:k=>Se({id:G.Q.MPIM_USERS_ALL_INTERNAL,value:(0,o.yz)(k.item)&&k.isMpimWithOnlyInternalMembers}),MPIM_LATEST_MSG_AGE_DECAY_7D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.MPIM_LATEST_MSG_AGE_DECAY_7D,value:(0,o.yz)(k.item)&&It(ge,parseFloat((Dt=k.latestTs)!==null&&Dt!==void 0?Dt:""),7*ie)||0})},USER_DM_LATEST_MSG_AGE_DECAY_7D:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_LATEST_MSG_AGE_DECAY_7D,value:ge&&k.im&&It(ot,parseFloat((pt=k.latestTs)!==null&&pt!==void 0?pt:""),7*ie)||0})},USER_DM_LATEST_MSG_AGE_DECAY_7D_V2:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_LATEST_MSG_AGE_DECAY_7D_V2,value:ge&&k.im&&It(ot,parseFloat((Qt=k.latestImTs)!==null&&Qt!==void 0?Qt:""),7*ie)||0})},USER_DM_LATEST_MSG_AGE_DECAY_2H:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_LATEST_MSG_AGE_DECAY_2H,value:ge&&k.im&&It(ot,parseFloat((Nt=k.latestTs)!==null&&Nt!==void 0?Nt:""),2*q)||0})},USER_DM_LATEST_MSG_AGE_DECAY_2H_V2:(k,se)=>{let{itemIsMember:ge,now:ot}=se;return Se({id:G.Q.USER_DM_LATEST_MSG_AGE_DECAY_2H_V2,value:ge&&k.im&&It(ot,parseFloat((bt=k.latestImTs)!==null&&bt!==void 0?bt:""),2*q)||0})},FRECENCY_LOG_HIT_COUNT:k=>Se({id:G.Q.FRECENCY_LOG_HIT_COUNT,value:Math.log1p((Yt=k.hitCount)!==null&&Yt!==void 0?Yt:0)||0}),FRECENCY_LOG_HIT_COUNT_SCALED:k=>Se({id:G.Q.FRECENCY_LOG_HIT_COUNT_SCALED,value:k.logHitCountScaled}),FRECENCY_LOG_ITEM_COUNT:k=>Se({id:G.Q.FRECENCY_LOG_ITEM_COUNT,value:Math.log1p((fn=k.itemCount)!==null&&fn!==void 0?fn:0)||0}),FRECENCY_LOG_ITEM_COUNT_SCALED:k=>Se({id:G.Q.FRECENCY_LOG_ITEM_COUNT_SCALED,value:k.logItemCountScaled}),QUERY_FRECENCY_RAW:k=>Se({id:G.Q.QUERY_FRECENCY_RAW,value:(k.suggestionType===H.fd.QUERY||k.suggestionType===H.fd.QUERY_USER)&&k.scoringContext.frecencyScoreRaw}),QUERY_FRECENCY_WEIGHT_HIT_VISITS:k=>Se({id:G.Q.QUERY_FRECENCY_WEIGHT_HIT_VISITS,value:(k.suggestionType===H.fd.QUERY||k.suggestionType===H.fd.QUERY_USER)&&k.scoringContext.frecencyWeightHitVisits}),QUERY_FRECENCY_HIT_COUNT:k=>Se({id:G.Q.QUERY_FRECENCY_HIT_COUNT,value:(k.suggestionType===H.fd.QUERY||k.suggestionType===H.fd.QUERY_USER)&&k.scoringContext.frecencyHitCount}),QUERY_LOG_HIT_COUNT:k=>Se({id:G.Q.QUERY_LOG_HIT_COUNT,value:(k.suggestionType===H.fd.QUERY||k.suggestionType===H.fd.QUERY_USER)&&Ft(k.scoringContext.frecencyHitCount)||k.suggestionType===H.fd.QUERY_HISTORY&&Ft((Tt=k.count)!==null&&Tt!==void 0?Tt:0)||0}),QUERY_FRECENCY_WEIGHT_ITEM_VISITS:k=>Se({id:G.Q.QUERY_FRECENCY_WEIGHT_ITEM_VISITS,value:(k.suggestionType===H.fd.QUERY||k.suggestionType===H.fd.QUERY_USER)&&k.scoringContext.frecencyWeightItemVisits}),QUERY_FRECENCY_ITEM_COUNT:k=>Se({id:G.Q.QUERY_FRECENCY_ITEM_COUNT,value:(k.suggestionType===H.fd.QUERY||k.suggestionType===H.fd.QUERY_USER)&&k.scoringContext.frecencyItemCount}),QUERY_FUZZY_SCORE:k=>Se({id:G.Q.QUERY_FUZZY_SCORE,value:(k.suggestionType===H.fd.QUERY||k.suggestionType===H.fd.QUERY_USER)&&k.scoringContext.fuzzyScore}),QUERY_FRECENCY_BONUS:k=>{var se;return Se({id:G.Q.QUERY_FRECENCY_BONUS,value:(k.suggestionType===H.fd.QUERY||k.suggestionType===H.fd.QUERY_USER)&&(0,Q.A)(Object.values(((se=k.scoringContext)===null||se===void 0?void 0:se.frecencyScoreBonus)||{}))||0})},QUERY_HISTORY_LOG_INDEX:k=>Se({id:G.Q.QUERY_HISTORY_LOG_INDEX,value:k.suggestionType===H.fd.QUERY_HISTORY&&Ft(k.index)||0}),QUERY_HISTORY_AGE_DECAY_30D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.QUERY_HISTORY_AGE_DECAY_30D,value:k.suggestionType===H.fd.QUERY_HISTORY&&It(ge,k.lastUpdateTs,30*ie)||0})},FUZZY_SCORE:k=>Se({id:G.Q.FUZZY_SCORE,value:k.score}),FUZZY_SCORE_SCALED_EXP:k=>Se({id:G.Q.FUZZY_SCORE_SCALED_EXP,value:J(k.score)&&.5**Math.min(k.score,10)}),FUZZY_SCORE_SCALED_FLIPPED:k=>Se({id:G.Q.FUZZY_SCORE_SCALED_FLIPPED,value:J(k.score)&&10-Math.min(k.score,10)}),FUZZY_SCORE_SCALED_SUBTRACT:k=>Se({id:G.Q.FUZZY_SCORE_SCALED_SUBTRACT,value:J(k.score)&&Math.min(k.score,10)-1}),FUZZY_SCORE_50:k=>Se({id:G.Q.FUZZY_SCORE_50,value:k.bonusPointMap&&k.bonusPointMap.fuzzyScoreBonus===50}),FUZZY_SCORE_25:k=>Se({id:G.Q.FUZZY_SCORE_25,value:k.bonusPointMap&&k.bonusPointMap.fuzzyScoreBonus===25}),FUZZY_SCORE_ALL:k=>Se({id:G.Q.FUZZY_SCORE_ALL,value:k.bonusPointMap&&k.bonusPointMap.fuzzyScoreBonus&&k.bonusPointMap.fuzzyScoreBonus<25}),FILTER_USER_IS_ACTIVE:k=>Se({id:G.Q.FILTER_USER_IS_ACTIVE,value:k.lastSuggestionToken&&k.lastTokenMemberOrNull&&(0,i.ls)(k.lastTokenMemberOrNull)}),FILTER_USER_IS_CURRENT_USER:k=>Se({id:G.Q.FILTER_USER_IS_CURRENT_USER,value:k.lastSuggestionToken&&k.lastTokenMemberOrNull&&(0,i.fy)(k.lastTokenMemberOrNull)}),FILTER_USER_DM_IS_STARRED:k=>Se({id:G.Q.FILTER_USER_DM_IS_STARRED,value:k.lastTokenIm&&k.lastTokenImIsStarred}),FILTER_USER_DM_IS_UNREAD:k=>Se({id:G.Q.FILTER_USER_DM_IS_UNREAD,value:k.lastTokenIm&&(0,r.KJ)(k.lastTokenIm)}),FILTER_USER_DM_READ_AGE_DECAY_7D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FILTER_USER_DM_READ_AGE_DECAY_7D,value:k.lastTokenIm&&It(ge,k.lastTokenImLastRead,7*ie)||0})},FILTER_USER_DM_READ_AGE_DECAY_2H:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FILTER_USER_DM_READ_AGE_DECAY_2H,value:k.lastTokenIm&&It(ge,k.lastTokenImLastRead,2*q)||0})},FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D,value:k.lastTokenIm&&It(ge,parseFloat((sn=k.lastTokenImLatest)!==null&&sn!==void 0?sn:""),7*ie)||0})},FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H,value:k.lastTokenIm&&It(ge,parseFloat((mn=k.lastTokenImLatest)!==null&&mn!==void 0?mn:""),2*q)||0})},FILTER_USER_FIRST_NAME_NORMAL_MATCH:k=>St({id:G.Q.FILTER_USER_FIRST_NAME_NORMAL_MATCH,suggestion:k,extractionFunction:Hn,text:un(k)}),FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH:k=>St({id:G.Q.FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH,suggestion:k,extractionFunction:Kn,text:un(k)}),FILTER_USER_LAST_NAME_NORMAL_MATCH:k=>St({id:G.Q.FILTER_USER_LAST_NAME_NORMAL_MATCH,suggestion:k,extractionFunction:Hn,text:hn(k)}),FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH:k=>St({id:G.Q.FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH,suggestion:k,extractionFunction:Kn,text:hn(k)}),FILTER_USER_PRIORITY:k=>Se({id:G.Q.FILTER_USER_PRIORITY,value:k.lastTokenIm&&(k==null?void 0:k.priority)}),HERE_KEYWORD:k=>Se({id:G.Q.HERE_KEYWORD,value:k.name==="here"}),HERE_KEYWORD_EXACT_MATCH:k=>Se({id:G.Q.HERE_KEYWORD_EXACT_MATCH,value:k.name==="here"&&k.query==="here"}),IS_BROADCAST_KEYWORD:k=>Se({id:G.Q.IS_BROADCAST_KEYWORD,value:!!(k.type&&k.type==="broadcastKeyword")}),BROADCAST_KEYWORD_NORMAL_MATCH:k=>Se({id:G.Q.BROADCAST_KEYWORD_NORMAL_MATCH,value:!!(k.type&&k.type==="broadcastKeyword"&&Hn({text:(wt=k.name)!==null&&wt!==void 0?wt:"",normalizedQuery:k.normalizedQuery}))}),EMOJI_EXACT_MATCH:k=>Se({id:G.Q.EMOJI_EXACT_MATCH,value:k.bonusPointMap&&k.bonusPointMap.isEmojiExactMatch&&1}),QUERY_TOKEN_NORMAL_MATCH:k=>St({id:G.Q.QUERY_TOKEN_NORMAL_MATCH,suggestion:k,extractionFunction:Hn,text:pn(k)}),QUERY_TOKEN_NORMAL_PREFIX_MATCH:k=>St({id:G.Q.QUERY_TOKEN_NORMAL_PREFIX_MATCH,suggestion:k,extractionFunction:Kn,text:pn(k)}),FILTER_CHANNEL_IS_ARCHIVED:k=>Se({id:G.Q.FILTER_CHANNEL_IS_ARCHIVED,value:(0,u.F)(k.lastTokenChannelOrNull)}),FILTER_CHANNEL_IS_MEMBER:k=>Se({id:G.Q.FILTER_CHANNEL_IS_MEMBER,value:(0,r.bl)(k.lastTokenChannelOrNull)}),FILTER_CHANNEL_IS_STARRED:k=>Se({id:G.Q.FILTER_CHANNEL_IS_STARRED,value:k.lastTokenChannelIsStarred}),FILTER_CHANNEL_IS_UNREAD:k=>Se({id:G.Q.FILTER_CHANNEL_IS_UNREAD,value:(0,r.KJ)(k.lastTokenChannelOrNull)}),FILTER_CHANNEL_READ_AGE_DECAY_7D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FILTER_CHANNEL_READ_AGE_DECAY_7D,value:It(ge,k.lastTokenChannelLastRead,7*ie)})},FILTER_CHANNEL_READ_AGE_DECAY_2H:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FILTER_CHANNEL_READ_AGE_DECAY_2H,value:It(ge,k.lastTokenChannelLastRead,2*q)})},FILTER_CHANNEL_PRIORITY:k=>Se({id:G.Q.FILTER_CHANNEL_PRIORITY,value:k==null?void 0:k.priority}),CHANNEL_IS_FROZEN:(k,se)=>{let{itemIsChannel:ge}=se;return Se({id:G.Q.CHANNEL_IS_FROZEN,value:ge&&(0,Ae.Zz)(k.item)})},USER_DM_IS_FROZEN:(k,se)=>{let{itemIsMember:ge}=se;return Se({id:G.Q.USER_DM_IS_FROZEN,value:ge&&k.im&&(0,Ae.Zz)(k.im)})},CHANNEL_HAS_DRAFT:k=>Se({id:G.Q.CHANNEL_HAS_DRAFT,value:k.hasDraft}),USER_DM_HAS_DRAFT:k=>Se({id:G.Q.USER_DM_HAS_DRAFT,value:k.imHasDraft}),EMOJI_QUERY_LENGTH_RATIO:k=>Se({id:G.Q.EMOJI_QUERY_LENGTH_RATIO,value:k.emojiQueryLengthRatio}),EMOJI_TOTAL_COMBO_BREAKS:k=>Se({id:G.Q.EMOJI_TOTAL_COMBO_BREAKS,value:k.emojiTotalComboBreaks}),EMOJI_COMBO_BREAK_0:k=>Se({id:G.Q.EMOJI_COMBO_BREAK_0,value:k.emojiTotalComboBreaks===0}),EMOJI_COMBO_BREAK_1:k=>Se({id:G.Q.EMOJI_COMBO_BREAK_1,value:k.emojiTotalComboBreaks===1}),EMOJI_COMBO_BREAK_2:k=>Se({id:G.Q.EMOJI_COMBO_BREAK_2,value:k.emojiTotalComboBreaks===2}),EMOJI_COMBO_BREAK_3:k=>Se({id:G.Q.EMOJI_COMBO_BREAK_3,value:k.emojiTotalComboBreaks===3}),TYPE_APP_ACTION:k=>Se({id:G.Q.TYPE_APP_ACTION,value:k.suggestionType===H.fd.APP_ACTION}),OS_APP_ACTION:(k,se)=>{let{source:ge}=se;return Se({id:G.Q.OS_APP_ACTION,value:(ge==null?void 0:ge.startsWith("omniswitcher"))&&k.suggestionType===H.fd.APP_ACTION})},TYPE_APP:k=>Se({id:G.Q.TYPE_APP,value:k.suggestionType===H.fd.APP}),TYPE_SLASH_COMMAND:k=>Se({id:G.Q.TYPE_SLASH_COMMAND,value:k.suggestionType===H.fd.SLASH_COMMAND}),TYPE_GLOBAL_ACTION:k=>Se({id:G.Q.TYPE_GLOBAL_ACTION,value:k.suggestionType===H.fd.GLOBAL_ACTION}),IS_INVITE_WORKSPACE:k=>Se({id:G.Q.IS_INVITE_WORKSPACE,value:k.id==="slack-invite-to-workspace"}),TYPE_CHANNEL_ACTION:k=>Se({id:G.Q.TYPE_CHANNEL_ACTION,value:k.suggestionType===H.fd.CHANNEL_ACTION}),TYPE_WORKFLOW_TRIGGER:k=>Se({id:G.Q.TYPE_WORKFLOW_TRIGGER,value:k.suggestionType===H.fd.WORKFLOW_TRIGGER}),TYPE_NAVIGATION_MESSAGE:k=>Se({id:G.Q.TYPE_NAVIGATION_MESSAGE,value:k.suggestionType===H.fd.MESSAGE_NAVIGATION}),TYPE_EMOJI:k=>Se({id:G.Q.TYPE_EMOJI,value:k.suggestionType===H.fd.EMOJI}),HAS_CHANNEL_ASSOCIATION:k=>Se({id:G.Q.HAS_CHANNEL_ASSOCIATION,value:k.associatedWithCurrentChannel}),MEMBER_OF_CURRENT_CHANNEL:k=>Se({id:G.Q.MEMBER_OF_CURRENT_CHANNEL,value:k.isMemberOfCurrentChannel}),QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL:k=>St({id:G.Q.QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL,suggestion:k,extractionFunction:we,text:ft(k,H.fd.CHANNEL_NAVIGATION)}),FRECENCY_HIT_VISIT_DECAY_2H:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FRECENCY_HIT_VISIT_DECAY_2H,value:It(ge,k.latestHitVisit,2*q)||0})},FRECENCY_HIT_VISIT_DECAY_7D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FRECENCY_HIT_VISIT_DECAY_7D,value:It(ge,k.latestHitVisit,7*ie)||0})},FRECENCY_ITEM_VISIT_DECAY_2H:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FRECENCY_ITEM_VISIT_DECAY_2H,value:It(ge,k.latestItemVisit,2*q)||0})},FRECENCY_ITEM_VISIT_DECAY_7D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FRECENCY_ITEM_VISIT_DECAY_7D,value:It(ge,k.latestItemVisit,7*ie)||0})},MPIM_MEMBERS:k=>Se({id:G.Q.MPIM_MEMBERS,value:k.item.members.length}),MPIM_MEMBER_NAME_MATCHES:k=>Se({id:G.Q.MPIM_MEMBER_NAME_MATCHES,value:k.scoreDetailsByMember&&Object.values(k.scoreDetailsByMember).filter(se=>((On=se.score_details.real_name)!==null&&On!==void 0?On:-1/0)>=0||((Zt=se.score_details.display_name)!==null&&Zt!==void 0?Zt:-1/0)>=0).length}),MPIM_MEMBER_ALL_MATCHES:k=>Se({id:G.Q.MPIM_MEMBER_ALL_MATCHES,value:k.scoreDetailsByMember&&Object.keys(k.scoreDetailsByMember).length}),MPIM_MATCHER_SCORE:k=>Se({id:G.Q.MPIM_MATCHER_SCORE,value:k.score}),MPIM_MATCHER_SCORE_0:k=>Se({id:G.Q.MPIM_MATCHER_SCORE_0,value:k.score===0}),MPIM_MATCHER_SCORE_1:k=>Se({id:G.Q.MPIM_MATCHER_SCORE_1,value:k.score===1}),MPIM_MATCHER_SCORE_2:k=>Se({id:G.Q.MPIM_MATCHER_SCORE_2,value:k.score===2}),MPIM_MATCHER_SCORE_3:k=>Se({id:G.Q.MPIM_MATCHER_SCORE_3,value:k.score===3}),EMOJI_TEAM_CTR_90DD:k=>{var se;return Se({id:G.Q.EMOJI_TEAM_CTR_90DD,value:(se=k.offlineFeatures)===null||se===void 0?void 0:se.team_ctr_90dd})},EMOJI_USER_CTR_30DD:k=>{var se;return Se({id:G.Q.EMOJI_USER_CTR_30DD,value:(se=k.offlineFeatures)===null||se===void 0?void 0:se.user_ctr_30dd})},MPIM_TEAM_CTR_90DD:k=>{var se;return Se({id:G.Q.MPIM_TEAM_CTR_90DD,value:(se=k.offlineFeatures)===null||se===void 0?void 0:se.team_ctr_90dd})},MPIM_USER_CTR_30DD:k=>{var se;return Se({id:G.Q.MPIM_USER_CTR_30DD,value:(se=k.offlineFeatures)===null||se===void 0?void 0:se.user_ctr_30dd})},CHANNEL_TEAM_CTR_90DD:k=>{var se;return Se({id:G.Q.CHANNEL_TEAM_CTR_90DD,value:(se=k.offlineFeatures)===null||se===void 0?void 0:se.team_ctr_90dd})},CHANNEL_USER_CTR_30DD:k=>{var se;return Se({id:G.Q.CHANNEL_USER_CTR_30DD,value:(se=k.offlineFeatures)===null||se===void 0?void 0:se.user_ctr_30dd})},USER_ENTITY_TYPE_CTR_30DD:k=>Se({id:G.Q.USER_ENTITY_TYPE_CTR_30DD,value:k.entityTypeCtr}),NUM_RESULTS:k=>Se({id:G.Q.NUM_RESULTS,value:k.numResults}),QUERY_IS_SELF:k=>{var se;return Se({id:G.Q.QUERY_IS_SELF,value:((se=k.scoreDetails)===null||se===void 0?void 0:se.self_score)===0})},CURRENT_USER_TEXTY:(k,se)=>{let{isCurrentUser:ge,source:ot}=se;return Se({id:G.Q.CURRENT_USER_TEXTY,value:ot==="texty-autocomplete"&&ge})},FILE_AGE_DECAY_7D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FILE_AGE_DECAY_7D,value:k.item&&It(ge,k.item.created,7*ie)})},FILE_AGE_DECAY_28D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FILE_AGE_DECAY_28D,value:k.item&&It(ge,k.item.created,28*ie)})},FILE_AGE_DECAY_90D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FILE_AGE_DECAY_90D,value:k.item&&It(ge,k.item.created,90*ie)})},FILE_FROM_CURRENT_USER:k=>Se({id:G.Q.FILE_FROM_CURRENT_USER,value:k.fromCurrentUser}),NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS:k=>St({id:G.Q.NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS,suggestion:k,extractionFunction:Hn,text:ft(k,H.fd.CHANNEL_NAVIGATION),multiplier:Ft(k.numResults)}),FILE_LOG_PUBLIC_SHARES:k=>{var se,ge;return Se({id:G.Q.FILE_LOG_PUBLIC_SHARES,value:((se=k.item)===null||se===void 0||(ge=se.shares)===null||ge===void 0?void 0:ge.public)&&Ft(Object.keys(k.item.shares.public).length)})},FILE_LOG_PRIVATE_SHARES:k=>{var se,ge;return Se({id:G.Q.FILE_LOG_PRIVATE_SHARES,value:((se=k.item)===null||se===void 0||(ge=se.shares)===null||ge===void 0?void 0:ge.private)&&Ft(Object.keys(k.item.shares.private).length)})},FILE_LOG_ACTIONS:k=>{var se;return Se({id:G.Q.FILE_LOG_ACTIONS,value:((se=k.item)===null||se===void 0?void 0:se.actions)&&Ft(k.item.actions.length)})},FILE_LATEST_ACTION_AGE_DECAY_2H:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FILE_LATEST_ACTION_AGE_DECAY_2H,value:It(ge,k.latestActionTs,2*q)})},FILE_LATEST_ACTION_AGE_DECAY_7D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FILE_LATEST_ACTION_AGE_DECAY_7D,value:It(ge,k.latestActionTs,7*ie)})},FILE_LATEST_ACTION_AGE_DECAY_90D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FILE_LATEST_ACTION_AGE_DECAY_90D,value:It(ge,k.latestActionTs,90*ie)})},FILE_LATEST_SHARE_AGE_DECAY_2H:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FILE_LATEST_SHARE_AGE_DECAY_2H,value:It(ge,k.latestShareTs,2*q)})},FILE_LATEST_SHARE_AGE_DECAY_7D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FILE_LATEST_SHARE_AGE_DECAY_7D,value:It(ge,k.latestShareTs,7*ie)})},FILE_LATEST_SHARE_AGE_DECAY_90D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FILE_LATEST_SHARE_AGE_DECAY_90D,value:It(ge,k.latestShareTs,90*ie)})},FILE_CHANNEL_CTR:k=>Se({id:G.Q.FILE_CHANNEL_CTR,value:k.fileChannelCtr}),FILE_SUGGESTIONS_SEARCHER:k=>Se({id:G.Q.FILE_SUGGESTIONS_SEARCHER,value:k.fileSuggestionsFromSearcher}),FILE_USER_CTR:k=>Se({id:G.Q.FILE_USER_CTR,value:k.fileUserCtr}),FILE_NAME_CONTAINS_QUERY_NORMALIZED:k=>St({id:G.Q.FILE_NAME_CONTAINS_QUERY_NORMALIZED,suggestion:k,extractionFunction:Vn,text:ft(k,H.fd.FILE_NAVIGATION)}),FILE_IS_CANVAS:k=>Se({id:G.Q.FILE_IS_CANVAS,value:$t(k,"quip")}),FILE_HAS_DMS_WITH_CREATOR:k=>Se({id:G.Q.FILE_HAS_DMS_WITH_CREATOR,value:k.hasNonNullDmsWithCreator}),FILE_HAS_DMS_WITH_CREATOR_V2:k=>Se({id:G.Q.FILE_HAS_DMS_WITH_CREATOR_V2,value:k.hasNonNullLocalOrRemoteDmsWithCreator}),FILE_LATEST_VIEW_BY_USER_OLDER_90D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.FILE_LATEST_VIEW_BY_USER_OLDER_90D,value:an(ge,parseFloat((Mn=k.lastReadTs)!==null&&Mn!==void 0?Mn:"")/1e3,90*ie)})},APP_NAME_PREFIX_MATCH:k=>{var se;return St({id:G.Q.APP_NAME_PREFIX_MATCH,suggestion:k,extractionFunction:Kn,text:(se=k.item)===null||se===void 0?void 0:se.appName})},BEST_NAME_MATCH_LOG_RESULTS:k=>Se({id:G.Q.BEST_NAME_MATCH_LOG_RESULTS,value:k.bestNameIsExactMatch&&Ft(k.numResults)}),SLASH_COMMAND_USER_CTR:k=>{var se;return Se({id:G.Q.SLASH_COMMAND_USER_CTR,value:(se=k.offlineFeatures)===null||se===void 0?void 0:se.user_ctr_30dd})},WORKFLOW_TRIGGER_USER_CTR:k=>{var se;return Se({id:G.Q.WORKFLOW_TRIGGER_USER_CTR,value:(se=k.offlineFeatures)===null||se===void 0?void 0:se.user_ctr_30dd})},GLOBAL_ACTION_USER_CTR:k=>{var se;return Se({id:G.Q.GLOBAL_ACTION_USER_CTR,value:(se=k.offlineFeatures)===null||se===void 0?void 0:se.user_ctr_30dd})},CHANNEL_ACTION_USER_CTR:k=>{var se;return Se({id:G.Q.CHANNEL_ACTION_USER_CTR,value:(se=k.offlineFeatures)===null||se===void 0?void 0:se.user_ctr_30dd})},APP_ACTION_USER_CTR:k=>{var se;return Se({id:G.Q.APP_ACTION_USER_CTR,value:(se=k.offlineFeatures)===null||se===void 0?void 0:se.user_ctr_30dd})},SLASH_COMMAND_TEAM_CTR:k=>{var se;return Se({id:G.Q.SLASH_COMMAND_TEAM_CTR,value:(se=k.offlineFeatures)===null||se===void 0?void 0:se.team_ctr_90dd})},WORKFLOW_TRIGGER_TEAM_CTR:k=>{var se;return Se({id:G.Q.WORKFLOW_TRIGGER_TEAM_CTR,value:(se=k.offlineFeatures)===null||se===void 0?void 0:se.team_ctr_90dd})},GLOBAL_ACTION_TEAM_CTR:k=>{var se;return Se({id:G.Q.GLOBAL_ACTION_TEAM_CTR,value:(se=k.offlineFeatures)===null||se===void 0?void 0:se.team_ctr_90dd})},CHANNEL_ACTION_TEAM_CTR:k=>{var se;return Se({id:G.Q.CHANNEL_ACTION_TEAM_CTR,value:(se=k.offlineFeatures)===null||se===void 0?void 0:se.team_ctr_90dd})},APP_ACTION_TEAM_CTR:k=>{var se;return Se({id:G.Q.APP_ACTION_TEAM_CTR,value:(se=k.offlineFeatures)===null||se===void 0?void 0:se.team_ctr_90dd})},SHORTCUT_ENTITY_TYPE_CTR:k=>Se({id:G.Q.SHORTCUT_ENTITY_TYPE_CTR,value:k.entityTypeCtr}),EXACT_MATCH_LOG_RESULTS:k=>Se({id:G.Q.EXACT_MATCH_LOG_RESULTS,value:(k.isExactMatch?1:0)*Ft(k.numResults)}),HISTORY_AGE_DECAY_2H:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.HISTORY_AGE_DECAY_2H,value:It(ge,k.historyTs,2*q)})},HISTORY_AGE_DECAY_7D:(k,se)=>{let{now:ge}=se;return Se({id:G.Q.HISTORY_AGE_DECAY_7D,value:It(ge,k.historyTs,7*ie)})},HISTORY_POSITION:k=>Se({id:G.Q.HISTORY_POSITION,value:k.historyPosition})};class xn{serialize(){const se=new re;this.featureList.forEach(ot=>Vt({feature:ot,serializer:se}));const ge=se.serialize();return`${this.featuresVersion}:${ge}`}valueForFeature(se){let ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(se==null)return W().error(`Invalid feature id: ${se}`),null;const ot=this.featureList.find(nn=>nn.id===se);if(!(0,Z.A)(ot))return ge?xt(ot)||"":vt(ot)||0}static fromSuggestion(se,ge){const ot=Date.now()/1e3,nn=!!(0,i.NB)(se.item),qt=!!((0,o.rW)(se.item)||(0,o.Zp)(se.item)),vn=nn&&(0,i.fy)(se.item),Ut={itemIsChannel:qt,itemIsMember:nn,now:ot,isCurrentUser:vn,source:ge};return new this(gn(se,ge).map(Xt=>Wn[Xt]&&Wn[Xt](se,Ut)||null))}constructor(se){this.featureList=se,this.featuresVersion="v8"}}l(xn,"SuggestionFeatureVector");function gn(k,se){return se==="slash-command-menu"?[...U.globalFeatures]:k.suggestionType===H.fd.USER_NAVIGATION?[...U.globalFeatures,...U.userFeatures]:k.suggestionType===H.fd.CHANNEL_NAVIGATION?[...U.globalFeatures,...U.channelFeatures]:k.suggestionType===H.fd.MPIM_NAVIGATION?[...U.globalFeatures,...U.mpimFeatures]:k.suggestionType===H.fd.VIEW_NAVIGATION?[...U.globalFeatures,...U.viewFeatures]:k.suggestionType===H.fd.FILE_NAVIGATION?[...U.globalFeatures,...U.fileFeatures,...U.queryFeatures]:k.suggestionType===H.fd.LINK_NAVIGATION?[...U.globalFeatures,...U.linkFeatures]:k.suggestionType===H.fd.MODAL_NAVIGATION?[...U.globalFeatures,...U.modalFeatures]:k.suggestionType===H.fd.TEAM_NAVIGATION?[...U.globalFeatures,...U.teamFeatures]:k.type==="emoji"?[...U.globalFeatures,...U.emojiFeatures]:k.type==="broadcastKeyword"?[...U.globalFeatures,...U.broadcastKeywordFeatures]:k.suggestionType===H.fd.QUERY||k.suggestionType===H.fd.QUERY_USER?[...U.globalFeatures,...U.queryFeatures]:k.suggestionType===H.fd.APP_ACTION?[...U.globalFeatures,...U.shortcutFeatures,...U.appActionFeatures]:k.suggestionType===H.fd.SLASH_COMMAND?[...U.globalFeatures,...U.shortcutFeatures,...U.slashCommandFeatures]:k.suggestionType===H.fd.GLOBAL_ACTION?[...U.globalFeatures,...U.shortcutFeatures,...U.globalActionFeatures]:k.suggestionType===H.fd.CHANNEL_ACTION?[...U.globalFeatures,...U.shortcutFeatures,...U.channelActionFeatures]:k.suggestionType===H.fd.WORKFLOW_TRIGGER?[...U.globalFeatures,...U.shortcutFeatures,...U.workflowTriggerFeatures]:k.suggestionType===H.fd.APP?[...U.globalFeatures,...U.appFeatures]:k.suggestionType===H.fd.MESSAGE_NAVIGATION?[...U.globalFeatures,...U.messageFeatures]:k.suggestionType===H.fd.QUERY_HISTORY?[...U.globalFeatures,...U.queryFeatures]:U.globalFeatures}l(gn,"getFeaturesForExtraction");class An{constructor({id:se,value:ge}){se==null&&W().error(`Invalid feature id: ${se}`);const ot=ae(se);ot||W().error(`Missing feature name for id: ${se}`),this.id=se,this.name=ot,this.valueOrNull=ge}}l(An,"Feature");function vt(k){return typeof k.valueOrNull=="number"&&isFinite(k.valueOrNull)?k.valueOrNull:typeof k.valueOrNull=="boolean"&&k.valueOrNull?1:0}l(vt,"getNumericValueForFeature");function xt(k){return k.valueOrNull===null||k.valueOrNull===void 0?"":k.valueOrNull.toString()}l(xt,"getStringValueForFeature");function Vt(k){let{feature:se,serializer:ge}=k;se.valueOrNull===null&&ge.writeNullFeature(),typeof se.valueOrNull=="number"&&ge.writeNumericalFeature(se.valueOrNull,se.id),typeof se.valueOrNull=="boolean"&&ge.writeBinaryFeature(se.valueOrNull,se.id),typeof se.valueOrNull=="string"&&ge.writeTextFeature(se.valueOrNull,se.id)}l(Vt,"serializeFeature");function Se(k){let{id:se,value:ge}=k;const ot=(0,Z.A)(ge)?null:ge;return new An({id:se,value:ot})}l(Se,"makeFeature");function St(k){let{id:se,suggestion:ge,extractionFunction:ot,text:nn=Fe(ge),multiplier:qt=1}=k;if(!nn)return Se({id:se,value:null});const vn=ot({text:nn,query:ge.query||"",normalizedQuery:ge.normalizedQuery||""}),Ut=vn===!0?1:vn===!1?0:vn;return Se({id:se,value:(Ut??0)*qt})}l(St,"makeTextFeature");function Ce(k){let se=null;return(k.suggestionType===H.fd.QUERY||k.suggestionType===H.fd.QUERY_USER||k.suggestionType===H.fd.CHANNEL_NAVIGATION||k.suggestionType===H.fd.MPIM_NAVIGATION||k.suggestionType===H.fd.USER_NAVIGATION||k.suggestionType===H.fd.TEAM_NAVIGATION||k.suggestionType===H.fd.VIEW_NAVIGATION||k.suggestionType===H.fd.FILE_NAVIGATION)&&(se=k.frecencyScore),se}l(Ce,"getFrecencyScoreForSuggestion");function Ne(k){let se=null;return k.suggestionType===H.fd.QUERY&&k.lastSuggestionToken&&k.lastSuggestionToken.type===H.S6.API&&(se=k.lastSuggestionToken.querySuggestionScore),se}l(Ne,"getQuerySuggestionScoreV2");function ze(k){let se=null;return k.suggestionType===H.fd.FILE_NAVIGATION&&(se=k.rawScore),se}l(ze,"getFileSuggestionScore");function Oe(k){return k&&k.lastSuggestionToken?k.lastSuggestionToken.toString():""}l(Oe,"getLastSuggestionTokenString");function Fe(k){return rn(k)?Oe(k):k.suggestionType===H.fd.FILE_NAVIGATION?k.name:null}l(Fe,"getTextOrNullFromQuerySuggestion");function _t(k){return k.isNavigational||k.isAction||k.isApp?k.name:null}l(_t,"getTextOrNullFromNavigationalSuggestion");function ft(k,se){return k.suggestionType===se?k.name:null}l(ft,"getTextOrNullFromSuggestionWithType");function Ct(k){return k.suggestionType===H.fd.USER_NAVIGATION||(0,Z.A)(k.name)?null:k.name}l(Ct,"getTextOrNullFromSuggestionNotUser");function $t(k,se){return k.suggestionType!==H.fd.FILE_NAVIGATION?!1:k.fileType===se}l($t,"isFileTypeMatch");function rn(k){return k.lastSuggestionToken?k.lastSuggestionToken.type===H.S6.STRING||k.lastSuggestionToken.type===H.S6.PHRASE||k.lastSuggestionToken.type===H.S6.API:!1}l(rn,"isActiveTokenStringLike");function un(k){return k.lastTokenMemberOrNull&&k.lastTokenMemberOrNull.profile&&k.lastTokenMemberOrNull.profile.first_name}l(un,"getLastTokenUserFirstName");function hn(k){return k.lastTokenMemberOrNull&&k.lastTokenMemberOrNull.profile&&k.lastTokenMemberOrNull.profile.last_name}l(hn,"getLastTokenUserLastName");function pn(k){return k.lastTokenMemberName||k.lastTokenChannelName||null}l(pn,"lastTokenName");function Tn(k){return k?k.im&&k.lastReadImTs?k.lastReadImTs:k.remoteImMetadata&&k.lastReadRemoteImMetadataTs?(k.lastReadRemoteImMetadataTs/1e6).toString():null:null}l(Tn,"lastReadFromLocalClientElseCachedRemote");function Qn(k){let{text:se,query:ge}=k;return se===ge}l(Qn,"isExactMatch");function zn(k){let{text:se,query:ge}=k;return!!(ge&&se&&(0,ee.A)(se,ge))}l(zn,"isPrefixMatch");function Hn(k){let{text:se,normalizedQuery:ge}=k;return(0,N.B)(se).replace(/^[@#]/g,"")===ge}l(Hn,"isNormalizedExactMatch");function Kn(k){let{text:se,normalizedQuery:ge}=k;const ot=(0,N.B)(se).replace(/^[@#]/g,"");return!!(ot&&ge&&(0,ee.A)(ot,ge))}l(Kn,"isNormalizedPrefixMatch");function os(k){let{text:se,query:ge}=k;return(0,_e.A)(se).length+((0,Ee.A)(se," ")?1:0)===(0,_e.A)(ge).length}l(os,"stringSameNumberWordsValueFromSuggestion");function et(k){let{text:se,query:ge}=k;return Math.max(0,se.length-ge.length)}l(et,"excessStringLengthValueFromSuggestion");function Et(k){let{text:se,query:ge}=k;return se.length>0?ge.length/se.length:0}l(Et,"queryRatioLengthValueFromSuggestion");function we(k){let{text:se,normalizedQuery:ge}=k;return Hn({text:se,normalizedQuery:ge})&&ge.length>1?2**-ge.length:null}l(we,"queryLengthDecayNormalMatch");function tt(k){let{normalizedQuery:se}=k;return se.length}l(tt,"queryLength");function Rt(k){let{text:se}=k;return se.length}l(Rt,"suggestionTextLength");function It(k,se,ge){if(se){var ot;return Math.min(1,Math.exp(Math.log(.5)/ge*((ot=Jt(k,se))!==null&&ot!==void 0?ot:0)))}return 0}l(It,"expAgeDecay");function Jt(k,se){return se?Math.max(0,k-se):null}l(Jt,"age");function an(k,se,ge){if(!se)return!0;const ot=Jt(k,se);return!ot||ot>ge}l(an,"ageLatestOlderOrMissing");function Ft(k){return k>0?Math.log1p(k):0}l(Ft,"log1pSafe");function Vn(k){let{text:se,normalizedQuery:ge}=k;const ot=(0,N.B)(se).replace(/^[@#]/g,"");return ot&&ge&&ot.includes(ge)}l(Vn,"stringContainsQueryNormalized");class Pt{score(se){let ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ot=0;const nn=se.featureList.length;for(let qt=0;qt<nn;qt++)ot+=this._weightForFeature(se.featureList[qt],ge.source||null)*(vt(se.featureList[qt])||0);return ot}explain(se){let ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const ot=ge.source||null,nn=se.featureList.map(Ut=>({id:Ut.id,name:Ut.name,value:Ut.valueOrNull,weight:this._weightForFeature(Ut,ot),globalWeight:this._globalWeightForFeature(Ut),score:this._weightForFeature(Ut,ot)*vt(Ut)})),qt=nn.filter(Ut=>Ut.score).sort((Ut,Xt)=>Xt.score-Ut.score),vn=nn.filter(Ut=>Ut.value&&!Ut.score&&Ut.name!=="ID");return{score:this.score(se,ge),features:[...qt,...vn],remoteModel:this.isRemote}}_globalWeightForFeature(se){return this.weights[se.name]||0}_weightForFeature(se){let ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ot=0;se.name==="USER_IS_EXTERNAL"&&(ot=-1);const nn=this.weights[se.name]||0,vn=ge&&(ge==="composer_page__destination"||ge.startsWith("share"))?"WRITE":"READ",Ut=this.weights[`${vn}_${se.name}`]||0;return nn+Ut+ot}constructor(se,ge=!1){this.isRemote=ge,this.weights=se}}l(Pt,"LinearModel");class Xe extends C{fetchData(){return(0,P.dispatchForTeamId)(this.teamId,(0,I.ej)({reason:"AutocompleteModelCache"})).catch(se=>({model:null,omniswitcherModel:null,exception:se})).then(se=>{const ge={model:null,omniswitcherModel:null};if(se.model){const ot=(0,Y.A)(Object.entries(se.model).map(nn=>{let[qt,vn]=nn;return[qt.toUpperCase(),vn]}));ge.model=new Pt(ot,!0)}else return null;if(se.omniswitcher_model){const ot=(0,Y.A)(Object.entries(se.omniswitcher_model).map(nn=>{let[qt,vn]=nn;return[qt.toUpperCase(),vn]}));ge.omniswitcherModel=new Pt(ot,!0)}else ge.omniswitcherModel=ge.model;return ge})}constructor(se){super(),this.teamId=se}}l(Xe,"AutocompleteModelCache");let Ze=null;function lt(k){return Ze||(Ze=new Xe(k)),Ze}l(lt,"getAutocompleteModelCache");var nt=e(31564),qe=e(14717);const Kt=new Pt({ACTIVE_TOKEN_FILTER_AFTER:-1.3342286966503,ACTIVE_TOKEN_FILTER_BEFORE:-1.5840743442206,ACTIVE_TOKEN_FILTER_DURING:-1.5067377681356,ACTIVE_TOKEN_FILTER_FROM:-.32097975590927,ACTIVE_TOKEN_FILTER_HAS:.12307720392367,ACTIVE_TOKEN_FILTER_IN:-.20437151727999,ACTIVE_TOKEN_FILTER_ON:-.2331890332635,ACTIVE_TOKEN_FILTER_TO:-.39179992363572,ACTIVE_TOKEN_FILTER_WITH:-2.6491467875516,ACTIVE_TOKEN_MEMBER:3.3152339724625,ACTIVE_TOKEN_PHRASE:1.6227243782418,ACTIVE_TOKEN_STRING:1.2377431959723,APP_NAME_PREFIX_MATCH:.41310546603391,CHANNEL_ACTION_TEAM_CTR:5.3683432201332,CHANNEL_ACTION_USER_CTR:-3.0316210543763,CHANNEL_IS_ARCHIVED:-.87858649301233,CHANNEL_IS_MEMBER:.77730174627333,CHANNEL_IS_OTHER_TEAM:-.61919041941926,CHANNEL_IS_STARRED:.42983549335324,CHANNEL_IS_UNREAD:.32493583671244,CHANNEL_READ_AGE_DECAY_7D:1.7862684517169,CURRENT_USER_TEXTY:-2.0962311707595,EMOJI_COMBO_BREAK_0:.034181103626295,EMOJI_COMBO_BREAK_1:-1.5404314842404,EMOJI_COMBO_BREAK_2:-2.2796470967609,EMOJI_EXACT_MATCH:.183283071987,EMOJI_QUERY_LENGTH_RATIO:1.0690358111219,EMOJI_USER_CTR_30DD:5.1931307714537,FILE_AGE_DECAY_7D:.094311459141267,FILE_AGE_DECAY_90D:-.068414601197763,FILE_FROM_CURRENT_USER:-.053638049001005,FILE_HAS_DMS_WITH_CREATOR:-.0061128361931085,FILE_IS_CANVAS:.3,FILE_LATEST_ACTION_AGE_DECAY_90D:.22470956185502,FILE_LATEST_VIEW_BY_USER_OLDER_90D:-1.5,FILE_LOG_ACTIONS:.31755825349717,FILE_LOG_PRIVATE_SHARES:.63647050316634,FILE_LOG_PUBLIC_SHARES:-.4105759438314,FILE_NAME_CONTAINS_QUERY_NORMALIZED:1,FILTER_USER_DM_READ_AGE_DECAY_2H:-.39943623618561,FILTER_USER_DM_READ_AGE_DECAY_7D:.8400841724556,FILTER_USER_IS_ACTIVE:.42798763518113,FILTER_USER_PRIORITY:.71416734958181,FRECENCY_BONUS:.0083562726103486,FRECENCY_LOG_HIT_COUNT_SCALED:1.0221320483578,FRECENCY_LOG_ITEM_COUNT_SCALED:.93494415431914,FRECENCY_WEIGHT_HIT_VISITS:.010783602348951,FRECENCY_WEIGHT_ITEM_VISITS:.019341183576389,FUZZY_SCORE_50:.95744512772969,FUZZY_SCORE_ALL:-2.1179514334905,GLOBAL_ACTION_USER_CTR:6.0311738732755,HERE_KEYWORD_EXACT_MATCH:2.8669041266612,HISTORY_AGE_DECAY_7D:.66414153833523,IS_BROADCAST_KEYWORD:3.4759283393419,MEMBER_OF_CURRENT_CHANNEL:3.3022467998568,MPIM_MATCHER_SCORE_0:-.02289922354073,MPIM_MATCHER_SCORE_1:-1.2162030026989,MPIM_MATCHER_SCORE_2:-2.3109629676003,MPIM_MATCHER_SCORE_3:-2.545746172366,MPIM_MEMBER_ALL_MATCHES:.040175375087294,MPIM_MEMBER_NAME_MATCHES:.071667207602181,MPIM_READ_AGE_DECAY_7D:2.0911081748312,MPIM_USER_CTR_30DD:10.134770283044,MPIM_WITH_DEACTIVATED_USER:-1.1657978882602,NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS:.49306597435127,NAV_NORMAL_MATCH_USER:.83230837935037,NAV_NORMAL_PREFIX_MATCH_NO_USER:.4852904832645,NAV_NORMAL_PREFIX_MATCH_USER:-.12081821144909,ONLY_MATCHES_PREVIOUS_NAME:-1.248003231081,OS_APP_ACTION:-1.381807580371,QUERY_FRECENCY_BONUS:.011725693517502,QUERY_FRECENCY_RAW:.0071433931825349,QUERY_FRECENCY_WEIGHT_HIT_VISITS:.0047962209104509,QUERY_TOKEN_NORMAL_PREFIX_MATCH:.38593901851901,SLASH_COMMAND_USER_CTR:3.2204170381454,STRING_EXACT_PREFIX_MATCH:-.53245135333594,STRING_NORMAL_PREFIX_MATCH:-.4692069451129,TYPE_APP:-2.0995766663586,TYPE_APP_ACTION:-.15299090921826,TYPE_CHANNEL_ACTION:-.97398280475431,TYPE_GLOBAL_ACTION:.24313716972704,TYPE_NAVIGATION_CHANNEL:-.99949500941624,TYPE_NAVIGATION_FILE:-.60870055140391,TYPE_NAVIGATION_MODAL:-1.2540608783032,TYPE_NAVIGATION_MPIM:-.13640397661212,TYPE_NAVIGATION_TEAM:-.74505579518249,TYPE_NAVIGATION_USER:.19845685040217,TYPE_NAVIGATION_VIEW:-.06828592658814,TYPE_QUERY:-.34666651828357,TYPE_QUERY_HISTORY:-.89886675989568,TYPE_SLASH_COMMAND:-.18074491193454,TYPE_USER_QUERY:1.2730815188112,TYPE_WORKFLOW_TRIGGER:-1.2028127578536,USER_DM_EMPTY_V2:1.4226370781581,USER_DM_LATEST_MSG_AGE_DECAY_7D_V2:.40074999941377,USER_DM_LATEST_OLDER_90D_V2:-1.2419114598606,USER_EMAIL_ONLY_MATCH:-1.2756812486684,USER_ENTITY_TYPE_CTR_30DD:3.7407446891213,USER_FIRST_NAME_NORMAL_MATCH:.36402719522123,USER_IS_ACTIVE:.58279556397075,USER_IS_BOT:-.76450720727465,USER_IS_EXTERNAL:.27225738168756,USER_LAST_NAME_NORMAL_MATCH:.19972040917946,USER_MPIM_READ_AGE_DECAY_7D:.56565249217787,USER_PRIORITY:.29699660378898,USER_SAME_TEAM:.17696933968657}),ln=new Pt({FRECENCY_LOG_ITEM_COUNT:1}),_n=new Pt({FRECENCY:1}),Cn=new Pt({APP_NAME_PREFIX_MATCH:.3,TYPE_SLASH_COMMAND:-1.6,TYPE_GLOBAL_ACTION:1,TYPE_CHANNEL_ACTION:2,TYPE_WORKFLOW_TRIGGER:1,TYPE_APP_ACTION:0,TYPE_APP:-1,IS_INVITE_WORKSPACE:-2,BEST_NAME_MATCH_LOG_RESULTS:.3,FRECENCY_BONUS:.0045945271239138,FRECENCY_LOG_HIT_COUNT:.032078623014737,FRECENCY_LOG_HIT_COUNT_SCALED:.45581873094776,FRECENCY_LOG_ITEM_COUNT:.052896301981039,FRECENCY_LOG_ITEM_COUNT_SCALED:.49730870089138,FRECENCY_WEIGHT_HIT_VISITS:.0071810620916759,FRECENCY_WEIGHT_ITEM_VISITS:.011716715132603,FUZZY_SCORE_25:-.2832109013491,FUZZY_SCORE_50:.25841493146403,FUZZY_SCORE_ALL:-1.5527553376163,NAV_NORMAL_PREFIX_MATCH_NO_USER:.38239541164536,RAW_FRECENCY:-.0027578100310599,READ_FRECENCY_BONUS:.0040115607674155,READ_FRECENCY_LOG_HIT_COUNT:.038436899804508,READ_FRECENCY_LOG_HIT_COUNT_SCALED:.45560596775616,READ_FRECENCY_LOG_ITEM_COUNT:.05525020998482,READ_FRECENCY_LOG_ITEM_COUNT_SCALED:.50026628273703,READ_FRECENCY_WEIGHT_HIT_VISITS:.0073619177800187,READ_FRECENCY_WEIGHT_ITEM_VISITS:.012099980951325,READ_FUZZY_SCORE_25:-.2503777797125,READ_FUZZY_SCORE_50:.24335243348473,READ_FUZZY_SCORE_ALL:-1.5175861934325,READ_NAV_NORMAL_PREFIX_MATCH_NO_USER:.40022884927117,READ_RAW_FRECENCY:-.0031687787672375}),wn=new Pt({APP_NAME_PREFIX_MATCH:.3,TYPE_SLASH_COMMAND:-1.6,TYPE_GLOBAL_ACTION:1,TYPE_CHANNEL_ACTION:2,TYPE_APP_ACTION:0,TYPE_APP:-1,IS_INVITE_WORKSPACE:-2,BEST_NAME_MATCH_LOG_RESULTS:.3,FRECENCY_LOG_HIT_COUNT_SCALED:4,FRECENCY_BONUS:.0045945271239138,FRECENCY_LOG_HIT_COUNT:.032078623014737,FRECENCY_LOG_ITEM_COUNT:.052896301981039,FRECENCY_LOG_ITEM_COUNT_SCALED:.49730870089138,FRECENCY_WEIGHT_HIT_VISITS:.0071810620916759,FRECENCY_WEIGHT_ITEM_VISITS:.011716715132603,FUZZY_SCORE_25:-.2832109013491,FUZZY_SCORE_50:.25841493146403,FUZZY_SCORE_ALL:-1.5527553376163,NAV_NORMAL_PREFIX_MATCH_NO_USER:.38239541164536,RAW_FRECENCY:-.0027578100310599,READ_FRECENCY_BONUS:.0040115607674155,READ_FRECENCY_LOG_HIT_COUNT:.038436899804508,READ_FRECENCY_LOG_HIT_COUNT_SCALED:.45560596775616,READ_FRECENCY_LOG_ITEM_COUNT:.05525020998482,READ_FRECENCY_LOG_ITEM_COUNT_SCALED:.50026628273703,READ_FRECENCY_WEIGHT_HIT_VISITS:.0073619177800187,READ_FRECENCY_WEIGHT_ITEM_VISITS:.012099980951325,READ_FUZZY_SCORE_25:-.2503777797125,READ_FUZZY_SCORE_50:.24335243348473,READ_FUZZY_SCORE_ALL:-1.5175861934325,READ_NAV_NORMAL_PREFIX_MATCH_NO_USER:.40022884927117,READ_RAW_FRECENCY:-.0031687787672375}),$n=new Pt({ACTIVE_TOKEN_QUERY_SUGGESTION:1,BM25_SCORE:1,CHANNEL_IS_MEMBER:0,EXCESS_STRING_LENGTH:1,FRECENCY:.01,MPIM_IS_STARRED:0,NAV_EXACT_MATCH:0,NAV_EXACT_PREFIX_MATCH:0,NAV_EXCESS_STRING_LENGTH:2.5,NAV_NORMAL_MATCH:0,QUERY_SUGGESTION_SCORE_V2:3,STRING_EXACT_PREFIX_MATCH:1,STRING_NORMAL_PREFIX_MATCH:1,TYPE_NAVIGATION_CHANNEL:4,TYPE_NAVIGATION_EXPERT_CHANNEL:2,TYPE_NAVIGATION_MPIM:7,TYPE_NAVIGATION_USER:4,TYPE_QUERY:1,HERE_KEYWORD_EXACT_MATCH:5}),es=new Pt({FRECENCY:.01,TYPE_NAVIGATION_USER:4,TYPE_NAVIGATION_CHANNEL:4,QUERY_SUGGESTION_SCORE_V2:3,TYPE_NAVIGATION_EXPERT_CHANNEL:2,TYPE_NAVIGATION_MPIM:7}),jn={testing:$n,testing_2:es,frecency:_n,autocompleteFallback:Kt,shortcuts1:Cn,shortcuts3:wn,emojiFrequentlyUsed:ln};var ts=e(113574),Xn=e(775203),At=e(885850),b=e(135713),z=e(927268),me=e(437556),pe=e(797448);const ct=new v.Ay("search"),ut="autocompleteFallback";let $e=l(class{sort(se,ge){var ot;const nn=(0,p.Cy)({state:se});nn.mark("sorter-sort-mark");const qt=this.prepSuggestions(se,ge);this.extractFeatures(se,qt);const vn=this.scoreItems(se,qt),Ut=((ot=this.options)===null||ot===void 0?void 0:ot.dryRun)===!0?vn:this.sortByScore(vn);nn.measureAndClear("sorter-sort-mark","sorter-sort");const Xt=2,Sn=this.boostExactMatches(Ut,Xt);return this.forceMatches(Sn)}boostExactMatches(se,ge){const ot=se.slice(0,ge),nn=[],qt=[];for(let vn=ge;vn<se.length;vn++){const Ut=se[vn];Ut.isExactMatch||Ut.bestNameIsExactMatch?nn.push(Ut):qt.push(Ut)}return[...ot,...nn,...qt]}forceMatches(se){var ge,ot;return!((ge=this.options)===null||ge===void 0)&&ge.selfFirst&&!(!((ot=se[0])===null||ot===void 0)&&ot.isSelf)?[...(0,t.A)(se,qt=>qt.isSelf),...se]:se}getModels(se,ge){let ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const nn={model:jn[se],omniswitcherModel:jn[se]};if(!ot&&ge){const vn=lt(ge).getStaleWhileRevalidate(nn);return vn===null||vn.model===null||vn.model===void 0?nn:vn}return nn}getHistoryChannels(se){if((0,b._Z)(se,"sq_sorter_history")!=="treatment")return{};if(!(0,E.A)())return{};var ge;const ot=[...(ge=(0,z.t)((0,P.getStateForClientStore)()))!==null&&ge!==void 0?ge:[]];if(!ot)return{};for(let qt=0;qt<ot.length;qt++)ot[qt].position=qt+1;const nn={};return ot.filter(qt=>!(0,g.VA)()&&qt.teamId!==this.teamId||!qt.primaryView?!1:(0,f.A)(qt.primaryView)).forEach(qt=>{if(qt.primaryView&&!(qt.primaryView in nn)){var vn;nn[qt.primaryView]={ts:qt.ts/1e3,position:(vn=qt==null?void 0:qt.position)!==null&&vn!==void 0?vn:-1}}}),nn}prepSuggestions(se,ge){var ot,nn,qt;const vn=(0,N.B)((0,nt.O)(this.query));if(!((ot=this.options)===null||ot===void 0)&&ot.currentChannel&&vn.length<=1&&!(0,o.yz)((nn=this.options)===null||nn===void 0?void 0:nn.currentChannel)&&!(0,o.LI)((qt=this.options)===null||qt===void 0?void 0:qt.currentChannel)){const st=ge.filter(gt=>gt.type==="member"||(0,i.NB)(gt.item)).map(gt=>(gt.item||gt).id);(0,P.dispatchForTeamId)(this.teamId,(0,pe.z)({channelId:this.options.currentChannel.id,userIds:st}))}let Ut=null;if((0,b._Z)(se,"snd_autocomplete_features_cache")==="treatment"&&this.teamId){var Xt;Ut=w({teamId:this.teamId,enterpriseId:(Xt=this.enterpriseId)!==null&&Xt!==void 0?Xt:void 0}).getStaleWhileRevalidate()}const Sn=ge.length,Yn=(0,ts.WR)(se),Qe=(0,me.cA)(se),yt=(0,h.dQ)(Qe),Ht=this.getHistoryChannels(se),it={};return ge.forEach(st=>{const gt=st.item;(st.type==="mpim"||(0,o.yz)(st.item))&&((0,r.Ug)(gt)||[]).forEach(Bt=>{if(Bt!==Yn){const zt=it[Bt]||{itemCount:0,hitCount:0},En=(0,r._V)(se,gt),tn=En?parseFloat(En):void 0,jt=(0,Xn.b)(se,gt.id),on=jt?parseFloat(jt):void 0;tn&&(zt.lastReadTs?zt.lastReadTs=Math.max(zt.lastReadTs,tn):zt.lastReadTs=tn),on&&(zt.latestMsgTs?zt.latestMsgTs=Math.max(zt.latestMsgTs,on):zt.latestMsgTs=on),zt.hitCount+=(st==null?void 0:st.hitCount)||0,zt.itemCount+=(st==null?void 0:st.itemCount)||0,it[Bt]=zt}})}),ge.map(st=>{const gt=st.item||st,Ue={...st,query:this.query,normalizedQuery:vn,id:gt.id,suggestionType:H.fd.UNKNOWN,numResults:Sn};if(st.type==="member"||(0,i.NB)(st.item)){var Bt,zt,En;const Dn=gt.id&&(0,At.Pu)(se,gt.id),us=gt.id&&Ut&&Ut.getUserDmChannelMetadata(gt.id);Ue.remoteImMetadata=us,Ue.im=Dn,Ue.latestImTs=Dn&&(0,Xn.b)(se,Dn.id),Ue.imHasDraft=Dn&&(0,r.yc)(se,Dn.id),Ue.imIsStarred=Dn&&(0,r.m2)(se,Dn),Ue.name=(0,d.Gt)(st.item),Ue.lastReadImTs=(0,r._V)(se,Dn),Ue.lastReadRemoteImMetadataTs=us==null?void 0:us.last_read_abs,(0,h.dQ)(st.item)===yt&&(Ue.sameTeam=!0);let Ln;if(!((Bt=this.options)===null||Bt===void 0)&&Bt.currentChannel&&(Ln=this.options.currentChannel),Ln)if((0,o.yz)(Ln)){var tn,jt;Ue.isMemberOfCurrentChannel=(jt=Ln==null||(tn=Ln.members)===null||tn===void 0?void 0:tn.includes(st.item.id))!==null&&jt!==void 0?jt:!1}else(0,o.LI)(Ln)||(Ue.isMemberOfCurrentChannel=(0,qe.B)(se,gt,Ln));Ue.priority=(0,r.dh)(se,Dn),Ue.suggestionType=H.fd.USER_NAVIGATION,Ue.isNavigational=!0,Ue.historyTs=Dn&&((zt=Ht[Dn.id])===null||zt===void 0?void 0:zt.ts),Ue.historyPosition=Dn&&((En=Ht[Dn.id])===null||En===void 0?void 0:En.position);const ss=it[gt.id];ss&&(Ue.mpimFeatures=ss)}else Ue.name=gt.name||gt.string;if(st.type==="channel"||(0,o.jq)(st.item)){var on,In;Ue.suggestionType=H.fd.CHANNEL_NAVIGATION,Ue.isNavigational=!0,Ue.isChannelMember=(0,o.rW)(gt)&&!(0,u.F)(gt)&&(0,r.bl)(gt),Ue.hasDraft=(0,r.yc)(se,gt.id),Ue.offlineFeatures=Ut&&Ut.getFeatures(st.item.id,"channel"),Ue.historyTs=(on=Ht[gt.id])===null||on===void 0?void 0:on.ts,Ue.historyPosition=(In=Ht[gt.id])===null||In===void 0?void 0:In.position,Ue.latestTs=(0,Xn.b)(se,gt.id),Ue.lastReadTs=(0,r._V)(se,gt),Ue.priority=(0,r.dh)(se,gt),Ue.isStarred=(0,r.m2)(se,gt)}if(st.type==="mpim"||(0,o.yz)(st.item)){var Pn,cn;Ue.suggestionType=H.fd.MPIM_NAVIGATION,Ue.isNavigational=!0;const us=((0,r.Ug)(gt)||[]).map(cs=>(0,me.nv)(se,cs));Ue.isMpimWithDeactivatedMember=(0,n.A)(us,cs=>(0,i.oy)(cs)||(0,i.eJ)(cs)),Ue.isMpimWithOnlyInternalMembers=(0,s.A)(us,cs=>!(0,_.g)(cs)),Ue.hasDraft=(0,r.yc)(se,gt.id),Ue.name=(0,r.Oi)(se,st.item),Ue.offlineFeatures=Ut&&Ut.getFeatures(st.item.id,"mpim"),Ue.historyTs=(Pn=Ht[gt.id])===null||Pn===void 0?void 0:Pn.ts,Ue.historyPosition=(cn=Ht[gt.id])===null||cn===void 0?void 0:cn.position,Ue.priority=(0,r.dh)(se,gt),Ue.maxLastReadTsOfAllMembers=null,Ue.maxLatestMsgTsOfAllMembers=null;let Ln=0,ss=0,as=0,_s=0,ms=0;us.forEach(cs=>{if(cs.id!==Yn){const Ot=cs.id?(0,At.Pu)(se,cs.id):void 0,Lt=Ot&&(0,r._V)(se,Ot),Gt=cs.id&&Ut&&Ut.getUserDmChannelMetadata(cs.id),yn=Gt&&Gt.last_read_abs/1e6,kn=Ot||Gt,Rn=Lt?parseFloat(Lt):yn;if(kn){if(ms+=1,Rn){as+=1;var As;Ue.maxLastReadTsOfAllMembers=Math.max((As=Ue.maxLastReadTsOfAllMembers)!==null&&As!==void 0?As:-1/0,Rn),Ln+=Rn}const Gn=(0,Xn.b)(se,Ot==null?void 0:Ot.id),Zn=Ot&&Gn?parseFloat(Gn):void 0;if(Zn){_s+=1;var mt;Ue.maxLatestMsgTsOfAllMembers=Math.max((mt=Ue.maxLatestMsgTsOfAllMembers)!==null&&mt!==void 0?mt:-1/0,Zn),ss+=Zn}}}}),Ue.avgLastReadTsOfAllMembers=Ln===0?null:Ln/as,Ue.avgLatestMsgTsOfAllMembers=ss===0?null:ss/_s,Ue.pctNonEmptyDmsForAllMembers=as/(us.length-1)*100,Ue.pctNonNullDmsForAllMembers=ms/(us.length-1)*100}if(st.type==="team"&&(Ue.suggestionType=H.fd.TEAM_NAVIGATION,Ue.isNavigational=!0),st.type==="view"&&(Ue.suggestionType=H.fd.VIEW_NAVIGATION,Ue.isNavigational=!0),st.type==="appAction"&&(Ue.suggestionType=H.fd.APP_ACTION,Ue.isAction=!0,Ue.offlineFeatures=Ut&&Ut.getFeatures(st.item.id,"appAction")),st.type==="app"&&(Ue.suggestionType=H.fd.APP,Ue.isApp=!0),st.type==="emoji"&&(Ue.name=Ue.emojiBestNameMatch,Ue.suggestionType=H.fd.EMOJI,Ue.isNavigational=!0,Ue.offlineFeatures=Ut&&Ut.getFeatures(st.item.id,"emoji")),st.type==="slashCommand"){var Fn;Ue.suggestionType=H.fd.SLASH_COMMAND,Ue.isApp=!0,Ue.name=(Fn=Ue.name)===null||Fn===void 0?void 0:Fn.substring(1),Ue.firstWordOfRawQuery&&(Ue.query=Ue.firstWordOfRawQuery,Ue.normalizedQuery=Ue.firstWordOfRawQuery),Ue.offlineFeatures=Ut&&Ut.getFeatures(st.item.id,"slashCommand")}if(st.type==="globalAction"&&(Ue.suggestionType=H.fd.GLOBAL_ACTION,Ue.isApp=!0,Ue.offlineFeatures=Ut&&Ut.getFeatures(st.item.id,"globalAction")),st.type==="quipShortcutCommand"&&(Ue.suggestionType=H.fd.QUIP_SHORTCUT),st.type==="channelAction"&&(Ue.suggestionType=H.fd.CHANNEL_ACTION,Ue.isApp=!0,Ue.offlineFeatures=Ut&&Ut.getFeatures(st.item.id,"channelAction")),st.type==="workflowTrigger"&&(Ue.suggestionType=H.fd.WORKFLOW_TRIGGER,Ue.isApp=!0,Ue.offlineFeatures=Ut&&Ut.getFeatures(st.item.id,"workflowTrigger")),st.type==="file"){Ue.suggestionType=H.fd.FILE_NAVIGATION,Ue.isNavigational=!0,Ue.fileSuggestionsFromSearcher=!0;const Dn=Ue.item;Ue.id=Dn.id,Ue.fileId=Dn.id,Ue.logId=Dn.id,Ue.fileType=Dn.highlight_type||Dn.filetype,Ue.name=Dn.title,Ue.fileTypeDescription=Dn.is_external?(0,a.A)(Dn,se):Dn.pretty_type,Ue.fileTypeDescription==="Arugula"&&(Ue.fileTypeDescription=ct.t("Post")),Ue.fromCurrentUser=Dn.user===Yn;const us=Dn.user&&(0,At.Pu)(se,Dn.user),Ln=Dn.user&&Ut&&Ut.getUserDmChannelMetadata(Dn.user);if(Ue.hasNonNullDmsWithCreator=us!==null,Ue.hasNonNullLocalOrRemoteDmsWithCreator=us!==null||Ln!==null,Ue.lastReadTs=Dn.last_read,Dn.shares){const as=Dn.shares.public&&Math.max(...Object.values(Dn.shares.public).flatMap(ms=>ms.map(cs=>cs.ts?parseFloat(cs.ts):-1/0))),_s=Dn.shares.private&&Math.max(...Object.values(Dn.shares.private).flatMap(ms=>ms.map(cs=>cs.ts?parseFloat(cs.ts):-1/0)));as&&_s?Ue.latestShareTs=as>_s?as:_s:Ue.latestShareTs=as||_s}const ss=m(Dn);if(ss&&(Ue.latestActionTs=ss),Ut){const as=Dn.channels&&Array.isArray(Dn.channels)&&Dn.channels.length&&Math.max(...Dn.channels.map(ms=>Ut.getFeatures(ms,"channel").user_ctr_30dd)),_s=Dn.groups&&Array.isArray(Dn.groups)&&Dn.groups.length&&Math.max(...Dn.groups.map(ms=>Ut.getFeatures(ms,"mpim").user_ctr_30dd));as>0&&_s>0?Ue.fileChannelCtr=Math.max(as,_s):as>0?Ue.fileChannelCtr=as:_s>0&&(Ue.fileChannelCtr=_s),Dn.user?Ue.fileUserCtr=Ut.getFeatures(Dn.user,"member").user_ctr_30dd:Ue.fileUserCtr=Ut.getEntityCtr("member")}}if(st.type==="link"&&(Ue.suggestionType=H.fd.LINK_NAVIGATION,Ue.isNavigational=!0,Ue.name=st.item.title||st.item.url),st.type==="modal"&&(Ue.suggestionType=H.fd.MODAL_NAVIGATION,Ue.name=st.item.name),st.type==="queryHistory"&&(Ue.suggestionType=H.fd.QUERY_HISTORY,Ue.is_type_query_history=!0,Ue.id=(0,A.B)(st.id||st.name||st.string),Ue.logId=Ue.id,Ue.exact_string=st.string),st.type==="query"||st.type==="queryUser"||st.type==="queryHistory"){var fs,Un,rs;Ue.is_type_query_completion=!0,Ue.lastSuggestionToken=!Ue.suggestionTokenList||Ue.suggestionTokenList.length<1?null:Ue.suggestionTokenList[Ue.suggestionTokenList.length-1],Ue.frecencyScore=Ue.lastSuggestionToken&&Ue.lastSuggestionToken._frecencyScore,Ue.scoringContext=((fs=Ue.lastSuggestionToken)===null||fs===void 0?void 0:fs._scoringContext)||{},Ue.lastTokenMemberOrNull=null,Ue.lastTokenChannelOrNull=null;const Dn=Ue.lastSuggestionToken&&(Ue.lastSuggestionToken.type===H.S6.FILTER_FROM||Ue.lastSuggestionToken.type===H.S6.FILTER_TO||Ue.lastSuggestionToken.type===H.S6.FILTER_WITH),us=Ue.lastSuggestionToken&&Ue.lastSuggestionToken.type===H.S6.FILTER_IN;if(!((Un=Ue.lastSuggestionToken)===null||Un===void 0)&&Un._id&&(Ue.lastTokenMemberOrNull=Dn&&(0,me.nv)(se,Ue.lastSuggestionToken._id),Ue.lastTokenChannelOrNull=us&&((0,At.OL)(se,Ue.lastSuggestionToken._id)||(0,At.Pu)(se,Ue.lastSuggestionToken._id)),Ue.priority=Ue.lastTokenChannelOrNull?(0,r.dh)(se,Ue.lastTokenChannelOrNull):void 0),Ue.lastSuggestionToken&&Ue.lastSuggestionToken._name&&(Ue.lastTokenMemberOrNull||(Ue.lastTokenMemberOrNull=Dn&&(0,me.H6)(se,Ue.lastSuggestionToken._name)),Ue.lastTokenChannelOrNull||(Ue.lastTokenChannelOrNull=us&&(0,At.Os)(se,Ue.lastSuggestionToken._name))),(0,c.GU)(Ue.lastTokenMemberOrNull)&&(Ue.lastTokenMemberOrNull=null),Ue.lastTokenMemberName=(0,d.Gt)(Ue.lastTokenMemberOrNull)||void 0,(0,c.GU)(Ue.lastTokenChannelOrNull))Ue.lastTokenChannelOrNull=null;else{const ss=(0,r._V)(se,Ue.lastTokenChannelOrNull);Ue.lastTokenChannelLastRead=ss?parseFloat(ss):void 0,Ue.lastTokenChannelIsStarred=(0,r.m2)(se,Ue.lastTokenChannelOrNull)}Ue.lastTokenChannelName=(0,r.SB)(se,Ue.lastTokenChannelOrNull)||null,Ue.lastTokenIm=Ue.lastTokenMemberOrNull&&Ue.lastTokenMemberOrNull.id?(0,At.Pu)(se,Ue.lastTokenMemberOrNull.id):void 0,Ue.lastTokenImLatest=(0,Xn.b)(se,(rs=Ue.lastTokenIm)===null||rs===void 0?void 0:rs.id);const Ln=(0,r._V)(se,Ue.lastTokenIm);Ln&&(Ue.lastTokenImLastRead=Ln?parseFloat(Ln):void 0),Ue.lastTokenIm&&(Ue.priority=(0,r.dh)(se,Ue.lastTokenIm)),Ue.lastTokenImIsStarred=(0,r.m2)(se,Ue.lastTokenIm)}if(st.type==="query"&&(Ue.suggestionType=H.fd.QUERY),st.type==="queryUser"&&(Ue.suggestionType=H.fd.QUERY_USER),st.type==="queryHistory"&&(Ue.suggestionType=H.fd.QUERY_HISTORY),st.type==="query"||st.type==="queryUser"||st.type==="queryHistory"){var Jn;Ue.normalizedQuery=(0,N.B)((0,nt.O)(Ue.query)),Ue.logId=((Jn=Ue.lastSuggestionToken)===null||Jn===void 0?void 0:Jn.logId)||"";var is;Ue.name=((is=Ue.suggestionTokenList)!==null&&is!==void 0?is:[]).map(Dn=>Dn.toString()).join(" ")}return st.type==="quickMessage"&&(Ue.isNavigational=!0,Ue.suggestionType=H.fd.MESSAGE_NAVIGATION),Ue.entityTypeCtr=Ut?Ut.getEntityCtr(st.type):void 0,Ue})}extractFeatures(se,ge){ge.forEach(ot=>{var nn;const qt=K(ot,(nn=this.options)===null||nn===void 0?void 0:nn.source);this.featureVectors[ot.id]=qt})}selectModelForScoring(){return this.model}scoreItems(se,ge){var ot;const nn={source:(ot=this.options)===null||ot===void 0?void 0:ot.source},qt=this.selectModelForScoring();return ge.map(vn=>{var Ut;const Xt=this.featureVectors[vn.id],Sn=qt.score(Xt,nn);let Yn;return!((Ut=this.options)===null||Ut===void 0)&&Ut.explain&&(Yn=qt.explain(Xt,nn)),{...vn,modelScore:Sn,featureVectorRaw:Xt,explain:Yn}})}sortByScore(se){var ge,ot;return se.sort((nn,qt)=>((ge=qt==null?void 0:qt.modelScore)!==null&&ge!==void 0?ge:0)-((ot=nn==null?void 0:nn.modelScore)!==null&&ot!==void 0?ot:0))}constructor({query:se,options:ge={},teamId:ot=null,enterpriseId:nn=null}){this.query=se,this.options=ge;let qt=ge.model;qt===void 0&&(qt=ut);var vn;const Ut=this.getModels(qt,ot||nn,(vn=this.options.modelLocal)!==null&&vn!==void 0?vn:!1);this.model=Ut.model,this.omniswitcherModel=Ut.omniswitcherModel,this.teamId=ot,this.enterpriseId=nn,this.featureVectors={}}},"Sorter")},570398:(j,T,e)=>{"use strict";e.d(T,{M:()=>a,W:()=>s});var t=e(60552),n=e(756120);function s(c,r){const o={resources:[],frames:[],stacks:[],samples:[]},u=new Map,m=new Map,i=new Map;function d(v){if(i.has(v))return i.get(v);const E=o.resources.length;return o.resources.push(c.resources[v]),i.set(v,E),E}l(d,"mapResource");function _(v){if(m.has(v))return m.get(v);const E=c.frames[v],f=o.frames.length;return E.resourceId!=null?o.frames.push({...E,resourceId:d(E.resourceId)}):o.frames.push(E),m.set(v,f),f}l(_,"mapFrame");function h(v){if(u.has(v))return u.get(v);const E=c.stacks[v],f=E.parentId?h(E.parentId):void 0,g=_(E.frameId),y=o.stacks.length;return o.stacks.push(f!=null?{parentId:f,frameId:g}:{frameId:g}),u.set(v,y),y}l(h,"mapStack");function p(v){v.stackId==null?o.samples.push(v):o.samples.push({timestamp:v.timestamp,stackId:h(v.stackId)})}l(p,"addSample");let A=0;for(const{start:v,end:E}of r){for(;A<c.samples.length&&c.samples[A].timestamp<v;)A+=1;for(;A<c.samples.length&&c.samples[A].timestamp<=E;)p(c.samples[A]),A+=1}return o}l(s,"filterTrace");function a(){return!(0,n.b3)()&&(0,t.A)("self_profiling","enabled")}l(a,"isProfilingEnabled")},438277:(j,T,e)=>{"use strict";e.d(T,{A:()=>m});var t=e(219477),n=e(742531),s=e(649098);const a=["`","\xB4","\u02C6","\xA8","\u02DC"],c=new RegExp(`[${a.join("")}]$`);function r(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").replace(c,"")}l(r,"trim_trailing_composition_char");const o={COMPOSITION_CHARS:a};var u=e(20967);function m(i,d){let{allowPartialMatches:_=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!d||!i)return!1;let h=d.toLowerCase().replace(/^\uFF0F/,"/");h=(0,s.dV)(h),h=r(h);const p=[(0,u.fK)(i),(0,u.Bs)(i),...(0,u.qc)(i)||[]];return(0,t.A)(p,A=>{const v=(0,s.dV)(A);return _?(0,n.A)(v,h):v===h})}l(m,"is_match_for_command")},420274:(j,T,e)=>{"use strict";e.d(T,{KS:()=>n,Zx:()=>t});const t=l(a=>(a||"").split(/\s+/)[0],"getFirstWord"),n=l(a=>["/","\uFF0F"].includes((a||"").charAt(0))?a:`/${a}`,"prependSlashToStr"),s=l(a=>((a||"").split(/[^\S\n\r]+/g)||[]).length>1,"strHasSpace")},622800:(j,T,e)=>{"use strict";e.d(T,{Dd:()=>d,Rj:()=>h,TQ:()=>_,ZH:()=>u,ds:()=>i,qG:()=>o});var t=e(180491),n=e(682520);const s={},a={},c={};function r(p){return`${p}-repeat`}l(r,"createRepeatKey");const o=l(p=>{p&&_(p)},"addSoundToInMemoryCache");function u(p){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!p)return null;const v=d(p)||_(p);v.loop=!!A.loop,v.currentTime=0;var E;return v.volume=(E=A.volume)!==null&&E!==void 0?E:1,(v.play()||t.K.resolve()).catch(g=>{(0,n.Wo)().warn(`Failed to play sound: ${p} with reason: ${g}`)})}l(u,"play");function m(p){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!p)return null;const v=r(p),E=l(()=>{a[v]-=1,a[v]>0&&(getGenericLogger().info(`lounge music looping: ${p}`),A.pause?c[v]=setTimeout(()=>{u(v)},A.pause):u(v))},"ended");a[v]=A.repeat;const f=d(v)||_(p,{ended:E,customCacheKey:v});return f.currentTime=0,(f.play()||Promise.resolve()).catch(y=>{getGenericLogger().warn(`Failed to play repeated sound: ${p} with reason: ${y}`)})}l(m,"playRepeat");function i(p){let{logFailure:A}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{logFailure:!0};const v=d(p),E=r(p),f=d(E);if(!v&&!f){A&&(0,n.Wo)().warn(`Tried to stop sound, but no sound was playing matching url: ${p}. Available cached element urls are ${Object.keys(s).join(", ")}`);return}if(f){f.pause(),clearTimeout(c[E]),a[E]=0;const g=f.src;f.src="",f.src=g}if(v){v.pause();const g=v.src;v.src="",v.src=g}}l(i,"stop");function d(p){return s[p]}l(d,"getAudioElement");function _(p){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const v=new Audio(p);A.ended&&v.addEventListener("ended",A.ended);const E=A.customCacheKey||p;return s[E]=v,v}l(_,"createAudioElement");function h(p,A,v){if(!p||!A||!v)return;const E=d(p);E&&E.removeEventListener(A,v)}l(h,"removeAudioElementListener")},437886:(j,T,e)=>{"use strict";e.d(T,{A:()=>n});var t=e(961131);function n(s){return(0,t.A)(s)?s.replace(/^BK/,""):""}l(n,"getBroadcastKeyword")},961131:(j,T,e)=>{"use strict";e.d(T,{A:()=>n});var t=e(598824);function n(s){return(0,t.c)().indexOf(s)!==-1}l(n,"mentionIdIsKeyword")},802631:(j,T,e)=>{"use strict";e.d(T,{A:()=>t});function t(n){return n==="UNVERIFIED"}l(t,"mentionIdIsUnverified")},867973:(j,T,e)=>{"use strict";e.d(T,{A:()=>n});var t=e(241697);function n(){return`https://${(0,t.Xk)()}`}l(n,"getSlackRootUrl")},717180:(j,T,e)=>{"use strict";e.d(T,{A:()=>t});function t(){return!0}l(t,"isIaLayoutEnabled")},343290:(j,T,e)=>{"use strict";e.d(T,{Lb:()=>R,Pc:()=>O,Xg:()=>S,YZ:()=>i,_e:()=>w,hh:()=>t,iR:()=>_,j0:()=>V,jG:()=>D,ke:()=>x,mi:()=>f,mu:()=>B,tR:()=>d,ts:()=>F,vd:()=>n,x:()=>M});const t=180,n=600,s=260,a=310,c=1e3,r=24,o=289,u=321,m=385,i=15;var d;(function(Q){Q.MANUAL="manual",Q.AUTO="auto"})(d||(d={}));const _=500,h=140,p=[{minWidth:1420,sidebar:260,inspector:400},{minWidth:1200,sidebar:260,inspector:380},{minWidth:1080,sidebar:260,inspector:340},{minWidth:960,sidebar:220,inspector:320},{minWidth:860,sidebar:220,inspector:310},{minWidth:0,sidebar:200,inspector:310}],A=[{min:t,max:220,className:"p-workspace__sidebar--tiny"},{min:n-50,max:n,className:"p-workspace__sidebar--large"}],v=[{min:s,max:300,className:"p-workspace__secondary_view--tiny"},{min:301,max:399,className:"p-workspace__secondary_view--medium"},{min:400,max:c,className:"p-workspace__secondary_view--large"}],E=[{min:s,max:300,className:"p-workspace__tiles--tiny"},{min:301,max:499,className:"p-workspace__tiles--medium"},{min:500,max:c,className:"p-workspace__tiles--large"}],f=[{min:1,max:400,className:"p-workspace__primary_view--tiny"},{min:401,max:600,className:"p-workspace__primary_view--small"}],g=260,y=400,I=400,O=8,M=16,C=60,P=44,L=40,x="sidebarWidthIntent",F="sidebarWidthMode",V="inspectorWidthIntent",B="inspectorWidthMode",D="isSidebarVisible",S="isTeamSidebarVisible",R="userPrefersResponsiveSidebar",w="calculatedSidebarWidth",Y="LAYOUT"},974852:(j,T,e)=>{"use strict";e.d(T,{z:()=>d});var t=e(296540),n=e(528919),s=e(515822),a=e(12532),c=e(89832),r=e(99768),o=e(404296),u=e(649098),m=e(786191);const i=new u.Ay("shared_channel_invites"),d=l(_=>{let{invite:h,bottomMargin:p}=_;if(!h)return null;const{inviting_team:A,inviting_user:v,shared_workspace:E}=h,f=!!(0,m.qN)(window.location.search).is_link,g=t.createElement(c.n,{team:A,user:v,size:40,shouldRenderTeamBadge:!0,allowDefaultProfileImage:!0,allowTeamInitials:!0,isInteractive:!1,className:"margin_right_75",hideUserIcon:f}),y=t.createElement(a.A,{invitingUser:v}),I=t.createElement(s.A,{invitingTeam:A}),O=t.createElement(o.A,{id:E.id,team:E,bold:!0});return t.createElement("div",{className:(0,n.A)("p-accept_slack_connect_workspace_invite_header__header_container",{margin_bottom_200:p})},t.createElement("div",{className:"p-accept_slack_connect_workspace_invite_header__header_subcontainer"},t.createElement(r.A,{width:160,height:40,className:"margin_bottom_125"}),t.createElement("div",{className:"p-accept_slack_connect_workspace_invite_header padding_0"},g,t.createElement("span",null,f?i.rt("You were invited by {invitingTeamNameStyled} to join {sharedWorkspaceName}.",{invitingTeamNameStyled:I,sharedWorkspaceName:O}):i.rt("You were invited by <strong>{invitingUserName}</strong> from {invitingTeamNameStyled} to join {sharedWorkspaceName}.",{invitingTeamNameStyled:I,invitingUserName:y,sharedWorkspaceName:O})))))},"AcceptSlackConnectWorkspaceHeader");d.displayName="AcceptSlackConnectWorkspaceHeader"},670628:(j,T,e)=>{"use strict";e.d(T,{Sp:()=>E,a5:()=>f});var t=e(119501),n=e(193074),s=e(665884),a=e(241841),c=e(343290),r=e(919758),o=e(360191),u=e(177055),m=e(855448);const i=".p-client_container_placeholder",d=".p-client_container_placeholder__nav",_=260,h=64,p=76;function A(y){let{name:I,hex:O,iaTheming:M,customTheme:C}=y;const P=(0,m.zK)({hex:O,name:I}),L=(M==null?void 0:M.mode)||"light",x=(M==null?void 0:M.brightness)||u.GK,F=(0,u.XW)({mode:(0,a.Gk)(M,M==null?void 0:M.mode),primary:M==null?void 0:M.primary,highlight1:M==null?void 0:M.highlight1,brightness:x,useCustomHex:C&&(M==null?void 0:M.useCustomHex)});let V;I.includes("Primary")?V=F.primary.shade:V=F.highlight1.shade;const B=u.sC.indexOf(V);return{shade:V,value:L==="light"?P.light[B].value:P.dark[B].value}}l(A,"generateCustomHEXChromeColors");function v(y){let{iaTheming:I,customTheme:O}=y;return!I.primary.custom||!m.$V.test(I.primary.custom)?null:A({name:"bootPrimary",hex:I.primary.custom.startsWith("#")?I.primary.custom:`#${I.primary.custom}`,iaTheming:I,customTheme:O})}l(v,"getBootPrimary");function E(y){let{teamId:I,showTeamSwitcher:O=!1}=y;const M=(0,t._z)(I,"is_unified_user_client_enabled"),C=(0,t._z)(I,"channelSidebarBackground"),P=parseInt((0,t.W6)("viewLayoutLastSidebarWidth"),10)||_,L=(0,t._z)(I,"teamSwitcherBackground"),x=(0,t._z)(I,"textColor"),F=(0,t._z)(I,"topNavBackground")||C,V=(0,t._z)(I,"topNavTextColor")||x,B=document.querySelector(i),D=(0,t._z)(I,"iaTheming"),S=(0,t._z)(I,"customTheme"),R=(0,t._z)(I,"windowGradient"),w=(0,t.W6)("viewLayoutIsWorkspaceSwitcherVisible"),Y=w?h:0;if(!B)return;const Q=B.querySelector(d);if(!C){f();return}if(M){if(Q&&x&&C){const Ee=document.createElement("div");Ee.classList.add("p-ia4_client_container_placeholder--sidebar"),Ee.style.width=`${P}px`;const G=document.createElement("div");G.classList.add("p-ia4_client_container_placeholder--tab_rail");const Ae=document.createElement("div");if(Ae.classList.add("p-ia4_client_container_placeholder--content"),Ae.style.left=`${Y+p+P}px`,B.appendChild(Ee),w&&(B.appendChild(G),Ee.classList.add("p-ia4_client_container_placeholder--sidebar_with_workspace_switcher"),D!=null&&D.sidebarInverted&&(Ee.style.boxShadow="-1px 0px 0px 0px rgba(255, 255, 255, 0.15)"),Ae.classList.add("p-ia4_client_container_placeholder--content_with_workspace_switcher")),B.appendChild(Ae),B.classList.add("p-ia4_client_container_placeholder--theme-background"),D){let ce="#ffffffB3";const de="#1012148c";if(D.mode==="light"&&D.sidebarInverted&&(ce="#ffffff1A"),D.mode==="dark"){var Z,ee;ce=de,(ee=(Z=window.document)===null||Z===void 0?void 0:Z.querySelector("body"))===null||ee===void 0||ee.classList.add(u.RD)}if(Ee.style.backgroundColor=ce,S&&D.useCustomHex){if(D.primary.custom){const oe="bootPrimary",$=v({iaTheming:D,customTheme:S});$&&B.style.setProperty(`--dt_color-plt-${oe}-${$.shade}`,$.value)}if(D.highlight1.custom){const oe="bootHighlight1",$=A({name:"bootHighlight1",hex:D.highlight1.custom.startsWith("#")?D.highlight1.custom:`#${D.highlight1.custom}`,iaTheming:D,customTheme:S});B.style.setProperty(`--dt_color-plt-${oe}-${$.shade}`,$.value)}}if(R){const oe=(0,u.Lp)({mode:(0,a.Gk)(D,D.mode),primary:D.primary,highlight1:D.highlight1,brightness:D.brightness,useCustomHex:S&&D.useCustomHex}).replace(/primary/g,"bootPrimary").replace(/highlight1/g,"bootHighlight1");B.style.background=oe}else{const oe="bootPrimary",$=v({iaTheming:D,customTheme:!!S}),re=(0,a.Gk)(D,D.mode),ue=(0,u.VS)({mode:re,role:re==="light-inverted-sidebar"?"highlight1":"primary",brightness:(D==null?void 0:D.brightness)||u.GK});B.style.backgroundColor=S&&D.useCustomHex&&$?`rgb(var(--dt_color-plt-${oe}-${$.shade}))`:`rgb(var(--dt_color-plt-${D.primary.palette}-${ue}))`}}else if(Ee.style.backgroundColor=C,F){const ce=F,de=(0,s.fl)(F,25);B.style.background=`radial-gradient(
						circle at 50% 50%,
						${ce} 20%,
						transparent 80%
					),
					conic-gradient(
            from 45deg at 50% 50%,
            ${de} 0%,
            ${ce} 25%,
            ${de} 50%,
            ${ce} 75%,
            ${de} 100%
          )`}Q.classList.add("p-ia4_client_container_placeholder--top-nav"),(0,o.ve)()&&F&&r.ea3.isAvailable()&&(0,r.ea3)((0,r.Xgz)(),{color:F,symbolColor:V})}B.style.opacity="1"}else{if((0,n.VA)()&&O&&(B.classList.add("p-client_container_placeholder--with-team-switcher"),L&&(B.style.borderLeftColor=L)),Q&&x&&C){const ce=(0,s.Lh)(x,C,.1),de=(0,s.Ko)(x,.1);B.style.borderRightColor=ce,(0,o.ve)()&&F&&r.ea3.isAvailable()&&(0,r.ea3)((0,r.Xgz)(),{color:F,symbolColor:V}),F&&(Q.style.backgroundColor=F),Q.style.color=de,(0,n.VA)()&&O&&(B.style.removeProperty("border-left-color"),B.style.boxShadow=`-60px 0px 0px 0px ${C}`,Q.classList.add("p-client_container_placeholder__nav--with-team-switcher"))}let Ee=C;var _e;const G=(_e=(0,t._z)(I,c._e))!==null&&_e!==void 0?_e:"",Ae=parseInt(G,10);isNaN(Ae)||(B.style.width=`${G+1}px`,(0,n.VA)()&&O&&Ae===0&&(B.style.width="60px",Ee="none",B.style.borderRight="none")),B.style.backgroundColor=Ee,B.style.opacity="1"}}l(E,"renderBootPlaceholder");function f(){const y=document.querySelector(i);y&&y.remove()}l(f,"removeBootPlaceholder"),Object.defineProperty({removeBootPlaceholder:f},"removeBootPlaceholder",{get:()=>f,set:y=>{f=y}})},638860:(j,T,e)=>{"use strict";var t=e(612104),n=e(348745),s=e(961024),a=e(532381),c=e(882705),r=e(205045),o=e(70433),u=e(405728),m=e(687695),i=e(749877),d=e(43335),_=e(57238),h=e(325846),p=e(590671),A=e(981927),v=e(598888);const E=/^[\d]{13}$/;function f(mt){return mt?E.test(mt):!1}l(f,"looksLikeLastReadTs");var g=e(756216),y=e(742531),I=e(35397);function O(mt){return(0,y.A)(I.M,mt)||mt===""}l(O,"looksLikeFlexpaneSectionId");var M=e(535518),C=e(327408),P=e(612204);const L=[/^people[ -~]{1,27}$/,/^contacts[ -~]{1,27}$/,/^otherContacts[ -~]{1,27}$/,/^slackUsers[ -~]{1,27}$/];function x(mt){return L.some(Ot=>Ot.test(mt))}l(x,"looksLikeContactExternalId");var F=e(567884),V=e(455967),B=e(590550),D=e(862838);const S=["received","sent"];function R(mt){return S.includes(mt)}l(R,"looksLikeInvitationsTabRouteParam");var w=e(269749),Y=e(790716),Q=e(683525),Z=e(472313),ee=e(593159),_e=e(85979),Ee=e(176919),G=e(727140);function Ae(mt){return!!G.as[mt]}l(Ae,"isEntityRedirectKey");const ce=l(mt=>Object.keys(G.as).includes(mt),"isRedirectRoute"),de={entityId:mt=>(0,m.A)(mt)||(0,i.A)(mt)||(0,d.A)(mt)||(0,_.A)(mt)||(0,h.A)(mt)||(0,p.Ay)(mt)||(0,A.A)(mt)||(0,F.n)(mt)||(0,V.bd)(mt)||ce(mt)||(0,P.Ay)(mt)||(0,Z.xL)(mt),appOrServiceId:mt=>(0,i.A)(mt)||(0,m.A)(mt),timestamp:v.A,threadId:g.A,threadPageId:g.A,replyTs:v.A,sectionId:O,tabId:mt=>(0,B.Dl)(mt),viewName:mt=>(0,D.c)(mt),listsViewName:M.FO,draftId:w.ai,invitationsTabId:R,channelId:d.A,channelFilesId:mt=>/^files-.+/.test(mt),searchQuery:mt=>/^search-.+/.test(mt),articleId:mt=>(0,C.A)(mt),tileEntityId:mt=>(0,d.A)(mt)||(0,F.n)(mt)||(0,V.bd)(mt),scTeamOrEnterpriseId:mt=>(0,p.Am)(mt),quipDocId:P.Ay,channelCanvasId:P.Ay,contactExternalId:x,itemId:Y.Ny,recordId:M.pq,focusRecordId:M.or,listViewId:M._o,lastReadTs:f,canvasOpenedFromId:mt=>(0,d.A)(mt)||(0,h.A)(mt)||mt===Q.eE.QUIP_FILES,externalWorkspacePage:ee.W_,channelTabId:_e.jK,salesforceRecordId:Ee.V},oe={[u.o]:{paths:["/"]},[G._G]:{paths:["/:entityId","/:entityId/:timestamp","/:entityId/:tabId","/:entityId/:viewName","/:entityId/:viewName/:invitationsTabId","/:entityId/:listsViewName","/:entityId/:listsViewName/:focusRecordId","/:entityId/:listsViewName/:listViewId","/:entityId/:draftId","/:entityId/:threadPageId","/:entityId/:searchQuery","/:entityId/:channelFilesId","/:entityId/:scTeamOrEnterpriseId","/:entityId/:itemId","/:entityId/:channelCanvasId","/:entityId/:canvasOpenedFromId","/:entityId/:externalWorkspacePage","/:entityId/tabs/:channelTabId","/:entityId/:salesforceRecordId"]},[G.lM]:{paths:["/:entityId/thread/:threadId","/:entityId/thread/:threadId/:replyTs","/:entityId/:timestamp/thread/:threadId","/:entityId/:viewName/thread/:threadId","/:entityId/:viewName/:invitationsTabId/thread/:threadId","/:entityId/:tabId/thread/:threadId","/:entityId/:draftId/thread/:threadId","/:entityId/:searchQuery/thread/:threadId","/:entityId/:channelFilesId/thread/:threadId","/:entityId/:scTeamOrEnterpriseId/thread/:threadId","/:entityId/:listsViewName/thread/:threadId","/:entityId/:canvasOpenedFromId/thread/:threadId"]},[G.w7]:{paths:["/:entityId/messages/:channelId","/:entityId/messages/:channelId/:timestamp"]},[G.Vy]:{paths:["/:entityId/channel_info","/:entityId/:timestamp/channel_info","/:entityId/:viewName/channel_info","/:entityId/:viewName/:invitationsTabId/channel_info","/:entityId/:tabId/channel_info","/:entityId/:draftId/channel_info","/:entityId/:threadPageId/channel_info","/:entityId/:searchQuery/channel_info","/:entityId/:channelFilesId/channel_info","/:entityId/:scTeamOrEnterpriseId/channel_info","/:entityId/:listsViewName/channel_info","/:entityId/:canvasOpenedFromId/channel_info"]},[G.o6]:{paths:["/:entityId/inspect/:channelId","/:entityId/inspect/:channelId/:sectionId"]},[G.p3]:{paths:["/:entityId/activity","/:entityId/:timestamp/activity","/:entityId/:viewName/activity","/:entityId/:viewName/:invitationsTabId/activity","/:entityId/:tabId/activity","/:entityId/:draftId/activity","/:entityId/:threadPageId/activity","/:entityId/:searchQuery/activity","/:entityId/:channelFilesId/activity","/:entityId/:scTeamOrEnterpriseId/activity","/:entityId/:canvasOpenedFromId/activity"]},[G.pt]:{paths:["/:entityId/notifications","/:entityId/:timestamp/notifications","/:entityId/:viewName/notifications","/:entityId/:viewName/:invitationsTabId/notifications","/:entityId/:tabId/notifications","/:entityId/:draftId/notifications","/:entityId/:threadPageId/notifications","/:entityId/:searchQuery/notifications","/:entityId/:channelFilesId/notifications","/:entityId/:scTeamOrEnterpriseId/notifications","/:entityId/:listsViewName/notifications","/:entityId/:canvasOpenedFromId/notifications"]},[G.fS]:{paths:["/:entityId/reactions","/:entityId/:timestamp/reactions","/:entityId/:viewName/reactions","/:entityId/:viewName/:invitationsTabId/reactions","/:entityId/:tabId/reactions","/:entityId/:draftId/reactions","/:entityId/:threadPageId/reactions","/:entityId/:searchQuery/reactions","/:entityId/:channelFilesId/reactions","/:entityId/:scTeamOrEnterpriseId/reactions","/:entityId/:listsViewName/reactions","/:entityId/:canvasOpenedFromId/reactions"]},[G.W2]:{paths:["/:entityId/starred_items","/:entityId/:timestamp/starred_items","/:entityId/:viewName/starred_items","/:entityId/:viewName/:invitationsTabId/starred_items","/:entityId/:tabId/starred_items","/:entityId/:draftId/starred_items","/:entityId/:threadPageId/starred_items","/:entityId/:searchQuery/starred_items","/:entityId/:channelFilesId/starred_items","/:entityId/:scTeamOrEnterpriseId/starred_items","/:entityId/:listsViewName/starred_items","/:entityId/:canvasOpenedFromId/starred_items"]},[G.ym]:{paths:["/:entityId/saved","/:entityId/:timestamp/saved","/:entityId/:viewName/saved","/:entityId/:viewName/:invitationsTabId/saved","/:entityId/:tabId/saved","/:entityId/:draftId/saved","/:entityId/:threadPageId/saved","/:entityId/:searchQuery/saved","/:entityId/:channelFilesId/saved","/:entityId/:scTeamOrEnterpriseId/saved","/:entityId/:listsViewName/saved","/:entityId/:canvasOpenedFromId/saved"]},[G.fr]:{paths:["/:entityId/appspane","/:entityId/:timestamp/appspane","/:entityId/:viewName/appspane","/:entityId/:viewName/:invitationsTabId/appspane","/:entityId/:tabId/appspane","/:entityId/:draftId/appspane","/:entityId/:threadPageId/appspane","/:entityId/:searchQuery/appspane","/:entityId/:channelFilesId/appspane","/:entityId/:scTeamOrEnterpriseId/appspane","/:entityId/:listsViewName/appspane","/:entityId/:canvasOpenedFromId/appspane"]},[G.M9]:{paths:["/:entityId/files","/:entityId/:timestamp/files","/:entityId/:viewName/files","/:entityId/:viewName/:invitationsTabId/files","/:entityId/:tabId/files","/:entityId/:draftId/files","/:entityId/:threadPageId/files","/:entityId/:searchQuery/files","/:entityId/:channelFilesId/files","/:entityId/:scTeamOrEnterpriseId/files","/:entityId/:listsViewName/files"]},[G.T$]:{paths:["/:entityId/filespane","/:entityId/:timestamp/filespane","/:entityId/:viewName/filespane","/:entityId/:viewName/:invitationsTabId/filespane","/:entityId/:tabId/filespane","/:entityId/:draftId/filespane","/:entityId/:threadPageId/filespane","/:entityId/:searchQuery/filespane","/:entityId/:channelFilesId/filespane","/:entityId/:scTeamOrEnterpriseId/filespane","/:entityId/:listsViewName/filespane"]},[G.De]:{paths:["/:entityId/files/:fileId","/:entityId/:timestamp/files/:fileId","/:entityId/:viewName/files/:fileId","/:entityId/:viewName/:invitationsTabId/files/:fileId","/:entityId/:tabId/files/:fileId","/:entityId/:draftId/files/:fileId","/:entityId/:threadPageId/files/:fileId","/:entityId/:searchQuery/files/:fileId","/:entityId/:channelFilesId/files/:fileId","/:entityId/:scTeamOrEnterpriseId/files/:fileId","/:entityId/:listsViewName/files/:fileId","/:entityId/:canvasOpenedFromId/files/:fileId"]},[G.wA]:{paths:["/:entityId/comments/:quipDocId","/:entityId/:canvasOpenedFromId/comments/:quipDocId"]},[G.li]:{paths:["/:entityId/history/:quipDocId","/:entityId/:canvasOpenedFromId/history/:quipDocId"]},[G.mj]:{paths:["/:entityId/docs/:quipDocId","/:entityId/docs/:quipDocId/:lastReadTs","/:entityId/:timestamp/docs/:quipDocId","/:entityId/:viewName/docs/:quipDocId","/:entityId/:viewName/:invitationsTabId/docs/:quipDocId","/:entityId/:tabId/docs/:quipDocId","/:entityId/:draftId/docs/:quipDocId","/:entityId/:threadPageId/docs/:quipDocId","/:entityId/:searchQuery/docs/:quipDocId","/:entityId/:channelFilesId/docs/:quipDocId","/:entityId/:listsViewName/docs/:quipDocId"]},[G.y0]:{paths:["/:entityId/files/type","/:entityId/:timestamp/files/type","/:entityId/:viewName/files/type","/:entityId/:viewName/:invitationsTabId/files/type","/:entityId/:tabId/files/type","/:entityId/:draftId/files/type","/:entityId/:threadPageId/files/type","/:entityId/:searchQuery/files/type","/:entityId/:channelFilesId/files/type","/:entityId/:scTeamOrEnterpriseId/files/type","/:entityId/:listsViewName/files/type"]},[G.Nh]:{paths:["/:entityId/files/:memberId","/:entityId/:timestamp/files/:memberId","/:entityId/:viewName/files/memberId","/:entityId/:viewName/:invitationsTabId/files/memberId","/:entityId/:tabId/files/:memberId","/:entityId/:draftId/files/:memberId","/:entityId/:threadPageId/files/:memberId","/:entityId/:searchQuery/files/:memberId","/:entityId/:channelFilesId/files/:memberId","/:entityId/:scTeamOrEnterpriseId/files/:memberId","/:entityId/:listsViewName/files/:memberId","/:entityId/:canvasOpenedFromId/files/:memberId"]},[G.$s]:{paths:["/:entityId/user_groups","/:entityId/:timestamp/user_groups","/:entityId/:viewName/user_groups","/:entityId/:viewName/:invitationsTabId/user_groups","/:entityId/:tabId/user_groups","/:entityId/:draftId/user_groups","/:entityId/:threadPageId/user_groups","/:entityId/:searchQuery/user_groups","/:entityId/:channelFilesId/user_groups","/:entityId/:scTeamOrEnterpriseId/user_groups","/:entityId/:listsViewName/user_groups","/:entityId/:canvasOpenedFromId/user_groups"]},[G.Mu]:{paths:["/:entityId/user_groups/:userGroupId","/:entityId/:timestamp/user_groups/:userGroupId","/:entityId/:viewName/user_groups/:userGroupId","/:entityId/:viewName/:invitationsTabId/user_groups/:userGroupId","/:entityId/:tabId/user_groups/:userGroupId","/:entityId/:draftId/user_groups/:userGroupId","/:entityId/:threadPageId/user_groups/:userGroupId","/:entityId/:searchQuery/user_groups/:userGroupId","/:entityId/:channelFilesId/user_groups/:userGroupId","/:entityId/:scTeamOrEnterpriseId/user_groups/:userGroupId","/:entityId/:listsViewName/user_groups/:userGroupId","/:entityId/:canvasOpenedFromId/user_groups/:userGroupId"]},[G.Ns]:{paths:["/:entityId/whats_new","/:entityId/:timestamp/whats_new","/:entityId/:viewName/whats_new","/:entityId/:viewName/:invitationsTabId/whats_new","/:entityId/:tabId/whats_new","/:entityId/:draftId/whats_new","/:entityId/:threadPageId/whats_new","/:entityId/:searchQuery/whats_new","/:entityId/:channelFilesId/whats_new","/:entityId/:scTeamOrEnterpriseId/whats_new","/:entityId/:listsViewName/whats_new","/:entityId/:canvasOpenedFromId/whats_new"]},[G.IN]:{paths:["/:entityId/shortcuts","/:entityId/:timestamp/shortcuts","/:entityId/:viewName/shortcuts","/:entityId/:viewName/:invitationsTabId/shortcuts","/:entityId/:tabId/shortcuts","/:entityId/:draftId/shortcuts","/:entityId/:threadPageId/shortcuts","/:entityId/:searchQuery/shortcuts","/:entityId/:channelFilesId/shortcuts","/:entityId/:scTeamOrEnterpriseId/shortcuts","/:entityId/:listsViewName/shortcuts","/:entityId/:canvasOpenedFromId/shortcuts"]},[G.Q$]:{paths:["/:entityId/user_profile/:memberId","/:entityId/:timestamp/user_profile/:memberId","/:entityId/:viewName/user_profile/:memberId","/:entityId/:viewName/:invitationsTabId/user_profile/:memberId","/:entityId/:tabId/user_profile/:memberId","/:entityId/:draftId/user_profile/:memberId","/:entityId/:threadPageId/user_profile/:memberId","/:entityId/:searchQuery/user_profile/:memberId","/:entityId/:channelFilesId/user_profile/:memberId","/:entityId/:scTeamOrEnterpriseId/user_profile/:memberId","/:entityId/:listsViewName/user_profile/:memberId","/:entityId/:canvasOpenedFromId/user_profile/:memberId"]},[G.E2]:{paths:["/:entityId/help","/:entityId/:timestamp/help","/:entityId/:viewName/help","/:entityId/:viewName/:invitationsTabId/help","/:entityId/:tabId/help","/:entityId/:draftId/help","/:entityId/:threadPageId/help","/:entityId/:searchQuery/help","/:entityId/:channelFilesId/help","/:entityId/:scTeamOrEnterpriseId/help","/:entityId/:listsViewName/help","/:entityId/:canvasOpenedFromId/help"]},[G.vA]:{paths:["/:entityId/help/:articleId","/:entityId/:timestamp/help/:articleId","/:entityId/:viewName/help/:articleId","/:entityId/:viewName/:invitationsTabId/help/:articleId","/:entityId/:tabId/help/:articleId","/:entityId/:draftId/help/:articleId","/:entityId/:threadPageId/help/:articleId","/:entityId/:searchQuery/help/:articleId","/:entityId/:channelFilesId/help/:articleId","/:entityId/:scTeamOrEnterpriseId/help/:articleId","/:entityId/:listsViewName/help/:articleId","/:entityId/:canvasOpenedFromId/help/:articleId"]},[G.Dn]:{paths:["/:entityId/rimeto_profile/:memberId","/:entityId/:timestamp/rimeto_profile/:memberId","/:entityId/:viewName/rimeto_profile/:memberId","/:entityId/:viewName/:invitationsTabId/rimeto_profile/:memberId","/:entityId/:tabId/rimeto_profile/:memberId","/:entityId/:searchQuery/rimeto_profile/:memberId","/:entityId/:draftId/rimeto_profile/:memberId","/:entityId/:threadPageId/rimeto_profile/:memberId","/:entityId/:channelFilesId/rimeto_profile/:memberId","/:entityId/:scTeamOrEnterpriseId/rimeto_profile/:memberId","/:entityId/:listsViewName/rimeto_profile/:memberId","/:entityId/:canvasOpenedFromId/rimeto_profile/:memberId"]},[G.Ie]:{paths:["/:entityId/feedback","/:entityId/:timestamp/feedback","/:entityId/:viewName/feedback","/:entityId/:viewName/:invitationsTabId/feedback","/:entityId/:tabId/feedback","/:entityId/:draftId/feedback","/:entityId/:threadPageId/feedback","/:entityId/:searchQuery/feedback","/:entityId/:channelFilesId/feedback","/:entityId/:scTeamOrEnterpriseId/feedback","/:entityId/:listsViewName/feedback","/:entityId/:canvasOpenedFromId/feedback"]},[G.Bh]:{paths:["/:channelId/huddle"]},[G.Mv]:{paths:["/:entityId/huddles_captions","/:entityId/:timestamp/huddles_captions","/:entityId/:viewName/huddles_captions","/:entityId/:viewName/:invitationsTabId/huddles_captions","/:entityId/:tabId/huddles_captions","/:entityId/:draftId/huddles_captions","/:entityId/:threadPageId/huddles_captions","/:entityId/:searchQuery/huddles_captions","/:entityId/:channelFilesId/huddles_captions","/:entityId/:scTeamOrEnterpriseId/huddles_captions","/:entityId/:listsViewName/huddles_captions","/:entityId/:canvasOpenedFromId/huddles_captions"]},[G.d2]:{paths:["/:entityId/contact_profile/:contactExternalId","/:entityId/:timestamp/contact_profile/:contactExternalId","/:entityId/:viewName/contact_profile/:contactExternalId","/:entityId/:viewName/:invitationsTabId/contact_profile/:contactExternalId","/:entityId/:tabId/contact_profile/:contactExternalId","/:entityId/:draftId/contact_profile/:contactExternalId","/:entityId/:threadPageId/contact_profile/:contactExternalId","/:entityId/:searchQuery/contact_profile/:contactExternalId","/:entityId/:channelFilesId/contact_profile/:contactExternalId","/:entityId/:scTeamOrEnterpriseId/contact_profile/:contactExternalId","/:entityId/:listsViewName/contact_profile/:contactExternalId","/:entityId/:canvasOpenedFromId/contact_profile/:contactExternalId"]},[G.p$]:{paths:["/:entityId/record/:recordId","/:entityId/:timestamp/record/:recordId","/:entityId/:viewName/record/:recordId","/:entityId/:viewName/:invitationsTabId/record/:recordId","/:entityId/:tabId/record/:recordId","/:entityId/:draftId/record/:recordId","/:entityId/:threadPageId/record/:recordId","/:entityId/:searchQuery/record/:recordId","/:entityId/:channelFilesId/record/:recordId","/:entityId/:scTeamOrEnterpriseId/record/:recordId","/:entityId/:listsViewName/record/:recordId","/:entityId/:canvasOpenedFromId/record/:recordId"]}};function $(){(0,o.S2)(de,oe)}l($,"setRoutes");var re=e(670628),ue=e(653843),te=e(247344),ae=e(449552),H=e(119110),U=e(180491),N=e(285955),K=e(599640),W=e(885850),J=e(76742),q=e(710596),ie=e(396386),Te=e(705091);function Me(mt,Ot){return ke.apply(this,arguments)}l(Me,"ensureChannel");function ke(){return ke=(0,t.coroutine)(function*(mt,Ot){const Lt=mt.getState(),Gt=(0,W.OL)(Lt,Ot,!1);return(0,ie.hc)(Gt)?Gt:mt.dispatch((0,Te.pX)({ids:[Ot],reason:"sonic/route-listeners/ensure-channel",callSource:Te.aI.EnsureChannel})).then(yn=>{if(!yn)return;const{channels:kn,resolved:Rn}=yn;if(!(!Rn||!Rn.includes(Ot)))return kn[0]})}),ke.apply(this,arguments)}l(ke,"_ensureChannel");const Pe=function(){var mt=(0,t.coroutine)(function*(Ot){let{prevTeamId:Lt,nextTeamId:Gt,routeName:yn,params:kn={}}=Ot;const Rn=(0,ae.getStoreInstanceByTeamId)(Gt);if(!(0,d.A)(kn.entityId))return U.S.resolve(void 0);const Gn=kn.entityId;return Me(Rn,Gn).then(Zn=>{if(Zn&&!(0,q.lo)(Zn))return U.S.resolve(void 0);if(Lt!==Gt){const ds=(0,J.EI)(Rn.getState(),{mainView:!0});return ds===Gn?U.S.reject(new Error("fallback channel ID === target channel ID, can\u2019t switch workspaces")):((0,o._U)(yn,{...kn,entityId:ds},{shouldReplaceState:!0}),U.S.resolve(!1))}return Zn?U.S.reject(new Error("tried to switch to a channel from another team")):U.S.resolve(!1)})});return function(Ot){return mt.apply(this,arguments)}}();var Ie=e(193074),X=e(344606);const ne=l(mt=>{let{prevTeamId:Ot,nextTeamId:Lt,routeName:Gt,params:yn}=mt;if((0,Ie.VA)()||Ot===Lt)return!0;const kn=(0,o.M5)(Gt,{...yn,teamId:Lt});if(!Lt)return!0;const Rn=(0,ae.getStateForClientStore)(),Gn=(0,N.getWorkspacesMeta)(Rn),Zn=Gn&&Gn[Lt]&&Gn[Lt].subdomain,ds=(0,Ie.eb)(Zn)||`_team_${Lt}`;return(0,X.A)(kn,ds),!1},"maybe_open_other_team_in_browser");var fe=e(543485),be=e(785028);const Be=l(mt=>{let{prevTeamId:Ot,nextTeamId:Lt}=mt;if(!(0,Ie.VA)()||Ot===Lt||!Lt)return!0;if((0,be.A)(Lt,Ot))return!1;const Gt=(0,ae.getStateForClientStore)();return(0,N.isWorkspaceExpired)(Gt,Lt)||(0,N.isWorkspacePendingAuth)(Gt,Lt)?((0,fe.A)(Lt),!1):!0},"maybe_finish_signin"),We=l(mt=>{let{routeName:Ot,params:Lt={}}=mt;const{entityId:Gt}=Lt;return Gt&&Ae(Gt)?((0,o._U)(Ot,{...Lt,entityId:G.as[Gt]},{shouldReplaceState:!0}),!1):!0},"maybe_redirect_entity");var Re=e(27530),ve=e(193611);const xe=l(mt=>{let{prevTeamId:Ot,nextTeamId:Lt}=mt;return Ot!==Lt?(0,ae.dispatchForClientStore)((0,ve.Mb)(!0)):(0,ae.dispatchForClientStore)((0,ve.Mb)(!1))},"set_should_log_team_switch_metrics");var He=e(119501);const je=l(mt=>{let{nextTeamId:Ot,routeName:Lt,params:Gt}=mt;const yn={routeName:Lt,params:Gt};return Ot&&(0,He.t2)(Ot,"lastRoute",yn),!0},"save_route_to_local_config");var Ke=e(675138),ht=e(590501),dt=e(501569);function Ve(mt){let{prevTeamId:Ot}=mt;const Lt=(0,ae.getStoreInstanceByTeamId)(Ot);return(0,ht.J)(Lt.getState())&&(Lt.dispatch((0,dt.T)(!0)),Ke.g.delete("setNavigatedDuringWarmBoot")),U.S.resolve()}l(Ve,"setNavigatedDuringWarmBoot");var Je=e(351202),Ge=e(220245),Le=e(541179),Mt=e(243274);function Dt(mt){let{params:Ot,prevRouteInfo:Lt,prevTeamId:Gt}=mt;const yn=Lt==null?void 0:Lt.params;if(!yn||yn.entityId!=="composer"||!yn.draftId||yn.draftId===(Ot==null?void 0:Ot.draftId))return!0;const{dispatch:kn,getState:Rn}=(0,ae.getStoreInstanceByTeamId)(Gt),Gn=Rn(),Zn=(0,w.di)(yn.draftId);if(!Zn)return!0;const ds=(0,Le.YI)(Gn,Zn);return(0,Je.v7)(ds,{trimWhitespace:!0})||(0,Ge.A)(Gn,ds)||kn((0,Mt.A)({ids:[Zn],reason:"draftsListenerBefore"})),!0}l(Dt,"draftsListenerBefore");var pt=e(601494),Qt=e(724516);function Nt(mt){let{params:Ot,routeName:Lt,reason:Gt}=mt;const yn=Ot.teamId||Ot.teamOrEnterpriseId,{dispatch:kn}=(0,ae.getStoreInstanceByTeamId)(yn);kn((0,Qt.M)({routeName:Lt,routeParams:Ot,autoOpen:Gt===pt.dr||Gt===pt.VZ}))}l(Nt,"channelCanvasListener");var bt=e(601226),Yt=e(674217),fn=e(663074),Tt=e(195804),sn=e(334238),mn=e(530397),wt=e(472998),On=e(127225);const Zt=["comment_thread","activity_history","files","rimeto_profile","thread",G.li,G.lM,G.De,G.Dn,G.Q$],Mn=(0,Yt.Ay)("Post activity history routing side effects",(mt,Ot,Lt)=>{let{params:Gt,prevRouteInfo:yn,routeName:kn}=Lt;var Rn;const Gn=Gt==null?void 0:Gt.entityId,Zn=yn==null||(Rn=yn.params)===null||Rn===void 0?void 0:Rn.entityId,ds=On.N2;if(kn===G._G&&Gn&&(0,fn.A)(Gn)){const{fileIdOrQuipThreadId:Ks}=(0,Tt.EX)(Gn);Zt.includes(yn==null?void 0:yn.routeName)&&mt((0,mn.A)({fileId:Ks,windowId:ds,source:wt.f.QUIP_ACTIVITY_HISTORY_LISTENER,isFromCloseActivityHistory:!0}))}let Ds=Gn,Js=Zn;(0,P.Ay)(Zn)&&(0,P.Ay)(Gn)&&(Ds=(0,Tt.EX)(Zn).fileIdOrQuipThreadId,Js=(0,Tt.EX)(Gn).fileIdOrQuipThreadId),Ds!==Js&&mt((0,sn.NA)({windowId:ds}))});Mn.meta={name:"createThunk",key:"createThunkpostQuipActivityHistoryRouting",description:"Post activity history routing side effects"};function Wn(mt){let{params:Ot,prevRouteInfo:Lt,routeName:Gt,reason:yn}=mt;const kn=Ot.teamId||Ot.teamOrEnterpriseId,{dispatch:Rn,getState:Gn}=(0,ae.getStoreInstanceByTeamId)(kn);(0,bt.O4)(Gn())&&Rn(Mn({routeName:Gt,params:Ot,prevRouteInfo:Lt,reason:yn}))}l(Wn,"quipActivityHistoryListener");var xn=e(846850),gn=e(64926),An=e(388288),vt=e(40817),xt=e(996990),Vt=e(723245);function Se(mt){let{nextTeamId:Ot,prevTeamId:Lt}=mt;const{dispatch:Gt,getState:yn}=(0,ae.getStoreInstanceByTeamId)(Lt),kn=yn();return(0,An.iS)(kn)?new U.S((Gn,Zn)=>{Gt((0,xt.P)({openModalProps:{isStackable:!0},onConfirmClose:()=>{Gt((0,vt.U)(!1)),Gt((0,xn.O)({closeAll:!0})),Gn()},onCancelClose:()=>{Zn()}}))}):(Lt&&!(0,gn.Vq)({teamId:Lt})&&Gt(Ot===Lt?(0,xn.O)({closeNamed:Vt.N}):(0,xn.O)({closeAll:!0})),!0)}l(Se,"modalListenerBefore");var St=e(272442);function Ce(mt){const Ot=(0,St.h)();return Ot!=null&&Ot.onClose&&(Ot==null||Ot.onClose()),!0}l(Ce,"pinsPopoverListenerAfter");var Ne=e(717180),ze=e(117776),Oe=e(745677);const Fe=l(mt=>{let{prevTeamId:Ot,nextTeamId:Lt}=mt;if(Ot!==Lt)return;const yn=(0,ae.getStoreInstanceByTeamId)(Lt).getState();(0,Ne.A)()&&(0,Oe.r8)(yn)&&(0,ae.dispatchForClientStore)((0,ze.vm)(!1))},"dismiss_floating_sidebar");var _t=e(41343);const ft=l(mt=>{let{prevTeamId:Ot,nextTeamId:Lt}=mt;if(Ot===Lt||!Lt)return;const Gt=(0,He.W6)("recentlyUsedTeamIds")||Ot&&[Ot]||[];Gt.unshift(Lt),(0,He.q9)("recentlyUsedTeamIds",(0,_t.A)(Gt)),(0,He.t2)(Lt,"mostRecentlyUsedDate",new Date)},"update_recently_used_teams");var Ct=e(752123),$t=e(980258),rn=e(648290),un=e(776016),hn=e(278302);const pn=l(mt=>{let{prevTeamId:Ot,nextTeamId:Lt,params:Gt={}}=mt;const{dispatch:yn,getState:kn}=(0,ae.getStoreInstanceByTeamId)(Lt),Rn=kn();if(Ot!==Lt)return;const Gn=(0,un.MC)(Rn),Zn=Gn.entityId,ds=Gt.entityId;Zn===Ct.d$&&ds===Ct.d$&&Gt.searchQuery&&Gn.searchQuery!==Gt.searchQuery&&(0,$t.$)(Rn)!==Gt.searchQuery&&yn((0,rn.z)({encodedSearchString:Gt.searchQuery})),Zn!==ds&&ds===Ct.d$&&(Gt.searchQuery&&yn((0,rn.z)({encodedSearchString:Gt.searchQuery})),yn((0,hn.s)())),Zn!==ds&&Zn===Ct.d$&&yn((0,hn.w)())},"search_page_listener");var Tn=e(155376);function Qn(mt){let{nextTeamId:Ot,prevTeamId:Lt}=mt;const{dispatch:Gt}=(0,ae.getStoreInstanceByTeamId)(Ot);Lt!==Ot&&Gt((0,Tn.yh)({teamId:Ot}))}l(Qn,"permissionsListener");var zn=e(777583),Hn=e(190905),Kn=e(271644),os=e(24880);function et(mt){let{nextTeamId:Ot,uuid:Lt,shouldReplaceState:Gt,reason:yn}=mt;var kn;if(!Ot||!Lt)return;if(yn!==o.GB)if(Gt)(0,ae.dispatchForClientStore)((0,Kn.HQ)({windowId:On.N2,entry:{id:Lt,ts:Date.now(),teamId:Ot,isIA4:!1}}));else{const ds=(0,os.XG)((0,ae.getStateForClientStore)());ds>0&&(0,ae.dispatchForClientStore)((0,Kn.$E)({windowId:On.N2,index:ds})),(0,ae.dispatchForClientStore)((0,Kn.y2)({windowId:On.N2,entry:{id:Lt,ts:Date.now(),teamId:Ot,isIA4:!1}}))}const Rn=(0,ae.getStoreInstanceByTeamId)(Ot),Gn=Rn.getState();if(!((kn=window.history.state)===null||kn===void 0)&&kn.isIA4)return;const Zn=(0,Hn.Gl)(Gn);Rn.dispatch((0,zn.A)({windowId:On.N2,entry:Zn}))}l(et,"updateIA4History");var Et=e(56387),we=e(491150),tt=e(685049);function Rt(mt){let{nextTeamId:Ot,prevRouteInfo:Lt,params:Gt}=mt;var yn;const kn=(0,ae.getStoreInstanceByTeamId)(Ot),Rn=kn.getState(),Gn=(0,we.c8)(Rn),Zn=(0,W.OL)(Rn,Gt.entityId),ds=(Lt==null||(yn=Lt.params)===null||yn===void 0?void 0:yn.entityId)||"";(ds===Q.eE.CHANNELS||ds===tt.b||ds===tt.Z1)&&(Gt!=null&&Gt.entityId)&&Zn&&!(0,q.bl)(Zn)&&kn.dispatch((0,Et.Tm)({channelId:Gt.entityId,prevRoute:ds})),Gn&&(Lt==null?void 0:Lt.routeName)==="ROUTE_ENTITY"&&(0,d.A)(ds)&&kn.dispatch((0,Et.Tm)({channelId:null,prevRoute:null}))}l(Rt,"setPreviewingFromChannelBrowserOrLaunchpad");var It=e(198892),Jt=e(61882);function an(mt){let{prevTeamId:Ot,nextTeamId:Lt}=mt;if(!Lt||Ot===Lt)return;const Gt=(0,ae.getStoreInstanceByTeamId)(Lt),yn=Gt.getState(),kn=(0,Hn.e6)(yn),Rn=(0,Hn.Le)(yn,{tab:kn});Gt.dispatch((0,Jt.C)({prevViewSet:void 0,prevTab:void 0,nextViewSet:Rn,nextTab:kn,windowId:On.N2,navigateParams:{},triggerType:It.w.TEAM_SWITCH}))}l(an,"maybeRunTeamSwitchNavigateListeners");var Ft=e(271593),Vn=e(247041),Pt=e(211700),Xe=e(756512),Ze;(function(mt){mt.JA_JP="ja-JP",mt.EN_US="en-US",mt.EN_GB="en-GB",mt.ES_ES="es-ES",mt.ES_LA="es-LA",mt.FR_FR="fr-FR",mt.DE_DE="de-DE",mt.PT_BR="pt-BR",mt.KO_KR="ko-KR",mt.IT_IT="it-IT",mt.ZH_CN="zh-CN",mt.ZH_TW="zh-TW"})(Ze||(Ze={}));const lt=Ze.EN_US;function nt(mt){let{nextTeamId:Ot,routeName:Lt,params:Gt}=mt;Ot&&((0,ae.dispatchForClientStore)((0,K.b)({teamId:Ot,routeName:Lt,params:Gt,fromNavigation:!0})),(0,ae.getStoreInstanceByTeamId)(Ot)&&(0,ae.dispatchForTeamId)(Ot,(0,dt.w)({routeName:Lt,params:Gt})))}l(nt,"syncRouteStoreWithUrl");function qe(mt){return Kt.apply(this,arguments)}l(qe,"navigateToLastSavedRoute");function Kt(){return Kt=(0,t.coroutine)(function*(mt){let{prevTeamId:Ot,nextTeamId:Lt,navigationTimestamp:Gt}=mt;const yn=(0,ae.getStateForClientStore)();if(!Lt||(0,N.hasWorkspaceFailedToBoot)(yn,Lt)||(0,N.doesWorkspaceNeed2FASetup)(yn,Lt)||(0,N.isWorkspaceExpired)(yn,Lt)||(0,N.isWorkspacePendingAuth)(yn,Lt))return!0;const kn=(0,ae.getStoreInstanceByTeamId)(Lt),Rn=kn&&kn.getState(),Gn=(0,un.MC)(Rn),Zn=(0,un.D8)(Rn)||G._G;if((0,H.y3)()&&Zn===u.o)return!0;const ds=!Ot;return yield(0,o._U)(Zn,{...Gn,teamId:Lt},{reason:"navigateToLastSavedRoute",shouldReplaceState:ds,navigationTimestamp:Gt}),!1}),Kt.apply(this,arguments)}l(Kt,"_navigateToLastSavedRoute");function ln(mt){let{prevTeamId:Ot,nextTeamId:Lt}=mt;if(!Ot||!Lt||Ot===Lt)return;const Gt=Cn(Lt);return U.S.resolve((0,Vn.xS)(Gt,Lt)).then(()=>{})}l(ln,"ensureCorrectLocaleForTeam");function _n(mt){let{prevTeamId:Ot,nextTeamId:Lt}=mt;if(!Ot||!Lt||Ot===Lt)return;const Gt=Cn(Lt);if(Gt)return(0,Vn.zI)(Gt)}l(_n,"ensureCorrectLocaleForExternalLibs");function Cn(mt){const Ot=window.location.search.match(/[&?]locale=([a-zA-Z-]*)/),Lt=Ot?Ot[1]:(0,He._z)(mt,"user_locale");return Lt&&(0,Xe.YI)(Lt)?Lt:lt}l(Cn,"getLocaleForTeam");const wn=(0,te.A)($n);function $n(){Ke.g.set("maybeOpenOtherTeamInBrowser",(0,o.Y8)(ne)),Ke.g.set("modalListenerBefore",(0,o.Y8)(Se)),Ke.g.set("maybeFinishSignin",(0,o.Y8)(Be)),Ke.g.set("maybeRedirectEntity",(0,o.Y8)(We)),Ke.g.set("startTeamSwitchTiming",(0,o.Y8)(Re.Ay)),Ke.g.set("navigateToLastSavedRoute",(0,o.Y8)(qe,[u.o])),Ke.g.set("ensureChannel",(0,o.Y8)(Pe,[])),Ke.g.set("draftsListenerBefore",(0,o.Y8)(Dt)),Ke.g.set("ensureCorrectLocaleForExternalLibs",(0,o.Dd)(_n)),Ke.g.set("searchPageListener",(0,o.Dd)(pn)),Ke.g.set("updateIA4History",(0,o.Dd)(et)),Ke.g.set("maybeRunTeamSwitchNavigateListeners",(0,o.Dd)(an)),Ke.g.set("setNavigatedDuringWarmBoot",(0,o.Dd)(Ve)),Ke.g.set("pinsPopoverListenerAfter",(0,o.Y8)(Ce)),Ke.g.set("syncRouteStoreWithUrl",(0,o.Dd)(nt)),Ke.g.set("ensureCorrectLocaleForTeam",(0,o.Dd)(ln)),Ke.g.set("setShouldLogTeamSwitchMetrics",(0,o.Dd)(xe)),Ke.g.set("setLocalConfigForTeamWithKey",(0,o.Dd)(je)),Ke.g.set("dismissFloatingSidebar",(0,o.Dd)(Fe)),Ke.g.set("updateRecentlyUsedTeams",(0,o.Dd)(ft)),Ke.g.set("maybeFetchClientPermissions",(0,o.Dd)(Qn)),Ke.g.set("maybeIncrementHistoryLength",(0,o.Dd)(Ft.Cu)),Ke.g.set("setPreviewingFromChannelBrowserOrLaunchpad",(0,o.Dd)(Rt)),Ke.g.set("channelCanvasListener",(0,o.Dd)(Nt)),Ke.g.set("quipActivityHistoryListener",(0,o.Dd)(Wn))}l($n,"registerRouteListenersInner"),(0,Pt.ul)("router.listeners",()=>[...Ke.g.entries()]);const es={syncRouteStoreWithUrl:nt,navigateToLastSavedRoute:qe,ensureCorrectLocaleForTeam:ln,ensureCorrectLocaleForExternalLibs:_n,getLocaleForTeam:Cn};Object.defineProperty(es,"syncRouteStoreWithUrl",{get:()=>nt,set:mt=>{nt=mt}}),Object.defineProperty(es,"navigateToLastSavedRoute",{get:()=>qe,set:mt=>{qe=mt}}),Object.defineProperty(es,"ensureCorrectLocaleForTeam",{get:()=>ln,set:mt=>{ln=mt}}),Object.defineProperty(es,"ensureCorrectLocaleForExternalLibs",{get:()=>_n,set:mt=>{_n=mt}}),Object.defineProperty(es,"getLocaleForTeam",{get:()=>Cn,set:mt=>{Cn=mt}});var ns=e(236254),jn=e(473039),ts=e(566401),Xn=e(646592),At=e(810225),b=e(682520),z=e(227913),me=e(597961);const pe="cse-api",ct="cse-boot-api";function ut(mt){return $e.apply(this,arguments)}l(ut,"fetchBootData");function $e(){return $e=(0,t.coroutine)(function*(mt){const{teamId:Ot,userId:Lt,isBootingWarm:Gt}=mt,yn=yield Gt,kn=yn?"deferred-data":"initial-data";let Rn=null;(0,z.EZ)()&&yn&&(Rn=yield(0,me.z6)({teamId:Ot,userId:Lt}));const Gn=jn.V$.bind(null,{...mt,reason:kn,minChannelUpdated:Rn});return k(Gn,{teamId:Ot,userId:Lt,reason:kn})}),$e.apply(this,arguments)}l($e,"_fetchBootData");function k(mt){let Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const Lt=(0,At.F)(),Gt=Lt.createTrace({traceName:pe,tags:Ot,samplingOptions:{sampleType:Xn.nl.ALWAYS}});if(!(Gt!=null&&Gt.traceFn))return(0,b.Wo)().warn("BOOT","Trace or traceFn is undefined; Unable to trace client.userBoot data fetch."),mt();const yn=l((Rn,Gn)=>{if((0,ts.A)(Gn)){const Zn={state:Xn.$m.SUCCESS,message:"client_userBoot_empty"};Rn==null||Rn.addTags(Zn),Rn==null||Rn.close(),Lt.reportTrace(Gt)}else Lt.clearTrace(Gt)},"onResolve"),kn=l((Rn,Gn)=>{var Zn;const ds={state:Xn.$m.ERROR};Gn!=null&&Gn.status&&(ds.status=Gn.status),Gn!=null&&Gn.message&&(ds.message=Gn.message),!(Gn==null||(Zn=Gn.data)===null||Zn===void 0)&&Zn.error&&(ds.reason=Gn.data.error),Rn==null||Rn.addTags(ds),Rn==null||Rn.close(),Lt.reportTrace(Gt)},"onError");return Gt.traceFn({name:ct,onError:kn,onResolve:yn},mt)}l(k,"maybeTraceClientUserBootDataFetch"),Object.defineProperty({CSE_API_TRACE_LABEL:pe,CLIENT_BOOT_SPAN_LABEL:ct},"fetchBootData",{get:()=>ut,set:mt=>{ut=mt}});var ge=e(746456),ot=e(539488);function nn(mt){return qt.apply(this,arguments)}l(nn,"maybeFetchMessagesData");function qt(){return qt=(0,t.coroutine)(function*(mt){const{bootQueue:Ot,token:Lt,teamId:Gt}=mt;if(!Lt)return(0,b.Ay)({teamOrEnterpriseId:Gt,label:"BOOT"}).error(new Error("Token missing; Unable to fetch messages data.")),null;if(!Gt)return(0,b.Ay)({teamOrEnterpriseId:Gt,label:"BOOT"}).error(new Error("teamId missing; Unable to fetch messages data.")),null;const yn=yield(0,ot.E)({contextualInfo:mt});return vn({bootQueue:Ot,token:Lt,teamId:Gt,routeInfo:yn})}),qt.apply(this,arguments)}l(qt,"_maybeFetchMessagesData");function vn(mt){return Ut.apply(this,arguments)}l(vn,"fetchMessagesDataForRoute");function Ut(){return Ut=(0,t.coroutine)(function*(mt){let{bootQueue:Ot,token:Lt,teamId:Gt,routeInfo:yn}=mt;var kn;const Rn=yn==null||(kn=yn.params)===null||kn===void 0?void 0:kn.entityId;return Rn&&!(0,F.n)(Rn)&&!(0,V.bd)(Rn)&&!(0,m.A)(Rn)&&!(0,P.Ay)(Rn)?((0,n.pq)("BOOT",`Booting into channel: ${Rn}`),Xt({bootQueue:Ot,token:Lt,teamId:Gt,id:Rn})):!(0,F.n)(Rn)&&!(0,V.bd)(Rn)&&!(0,m.A)(Rn)&&!(0,P.Ay)(Rn)?((0,n.pq)("BOOT","Couldn't determine boot channel. Falling back to default channel"),Xt({bootQueue:Ot,token:Lt,teamId:Gt})):null}),Ut.apply(this,arguments)}l(Ut,"_fetchMessagesDataForRoute");function Xt(mt){let{bootQueue:Ot,token:Lt,teamId:Gt,id:yn}=mt;const kn={token:Lt,canonical_avatars:!0,no_user_profile:!0,ignore_replies:!0,no_self:!0,include_full_users:!0,include_use_case:!0,include_stories:!0,no_members:!0,include_mutation_timestamps:!0,count:28};yn&&(kn.channel=yn),kn.include_free_team_extra_messages=!0;const Rn=new ge.Ay({method:"conversations.view",args:kn,teamId:Gt});return Ot.q(Rn).catch(Gn=>((0,b.Ay)({teamOrEnterpriseId:Gt,label:"BOOT"}).error(new Error(`unable to fetch messages data ${Gn}`)),null))}l(Xt,"fetchMessagesData");const Sn={fetchMessagesData:Xt};var Yn=e(446632),Qe=e(403460);const yt=(0,Yn.A)(st,mt=>mt.enterpriseId);function Ht(mt){return it.apply(this,arguments)}l(Ht,"maybeFetchEnterpriseData");function it(){return it=(0,t.coroutine)(function*(mt){return mt.enterpriseId?yt(mt):{}}),it.apply(this,arguments)}l(it,"_maybeFetchEnterpriseData");function st(mt){return gt.apply(this,arguments)}l(st,"fetchAllEnterpriseData");function gt(){return gt=(0,t.coroutine)(function*(mt){const{teamId:Ot,enterpriseId:Lt}=mt;var Gt;let yn=(Gt=(0,He._z)(Ot??"","enterprise_api_token"))!==null&&Gt!==void 0?Gt:"";if(Ot&&(0,Qe.ZN)(Ot)&&!yn){var kn;yn=(kn=(0,He._z)(Ot,"token"))!==null&&kn!==void 0?kn:""}const[Rn,Gn]=yield U.S.all([(0,jn.YH)(mt),(0,jn.O5)({...mt,token:yn})]),Zn={enterprise_id:Lt,page_needs_enterprise:!0,enterprise_api_token:yn};return{enterpriseData:Rn==null?void 0:Rn.enterprise,enterprisePrefsData:Gn,enterpriseBootData:Zn}}),gt.apply(this,arguments)}l(gt,"_fetchAllEnterpriseData");const Ue={resetMemoizedFetchEnterpriseDataCache:()=>{yt.cache.clear()}};var Bt=e(474523),zt=e(945878);function En(mt){return tn.apply(this,arguments)}l(En,"setupOtherTeamsToBoot");function tn(){return tn=(0,t.coroutine)(function*(mt){let{contextualInfo:Ot}=mt;return{contextualInfo:Ot,otherTeamsToBoot:(0,zt.gv)()}}),tn.apply(this,arguments)}l(tn,"_setupOtherTeamsToBoot");var jt=e(336597),on=e(523889),In=e(200154);function Pn(mt,Ot){var Lt,Gt,yn,kn,Rn;const Gn=(0,ae.getClientStoreInstance)();if(Gn.dispatch((0,In.setWorkspaceFailedToBoot)(mt)),!(Ot==null||(Lt=Ot.data)===null||Lt===void 0)&&Lt.active_migration){var Zn,ds;Gn.dispatch((0,In.setWorkspaceIsMigrating)({teamId:mt,migrationId:Ot==null||(Zn=Ot.data)===null||Zn===void 0?void 0:Zn.migration_id,canViewMigrationStatus:Ot==null||(ds=Ot.data)===null||ds===void 0?void 0:ds.can_view_migration_status})),(0,n.R8)("BOOT",`(${mt}) Workspace boot failed due to active migration`)}if((Ot==null||(Gt=Ot.data)===null||Gt===void 0?void 0:Gt.error)==="accesslimited"&&Gn.dispatch((0,In.setWorkspaceIsAccessLimited)(mt)),(Ot==null||(yn=Ot.data)===null||yn===void 0?void 0:yn.error)==="two_factor_setup_required"&&Gn.dispatch((0,In.setWorkspaceNeeds2FASetup)(mt)),(Ot==null||(kn=Ot.data)===null||kn===void 0?void 0:kn.error)==="user_in_no_workspaces"&&Gn.dispatch((0,In.setUserNotMemberOfAnyWorkspaceInOrg)(mt)),(Ot==null||(Rn=Ot.data)===null||Rn===void 0?void 0:Rn.error)==="user_needs_to_accept_custom_tos"){var Ds;Gn.dispatch((0,In.setWorkspaceNeedsToAcceptCustomTOS)({teamId:mt,url:Ot==null||(Ds=Ot.data)===null||Ds===void 0?void 0:Ds.url}))}}l(Pn,"markTeamBootFailed");function cn(mt){const Ot=(0,ae.getClientStoreInstance)();var Lt;const Gt=(Lt=(0,N.getNavigateToUnbootedWorkspace)(Ot.getState()))!==null&&Lt!==void 0?Lt:{},{bootingTeamId:yn,navigateToRouteProps:kn}=Gt;return yn===mt?((0,o._U)((kn==null?void 0:kn.routeName)||u.o,{teamId:mt,...(kn==null?void 0:kn.params)||{}},{reason:"delayed-unbooted-team-switch",...(kn==null?void 0:kn.options)||{}}),Ot.dispatch((0,In.setNavigateToUnbootedWorkspace)({})),!0):!1}l(cn,"maybeNavigateToUnbootedWorkspace");function Fn(mt,Ot){if(!mt)throw new Error("Missing team id, cannot thin boot team.");Pn(mt,Ot),cn(mt)}l(Fn,"thinBootTeam");const fs={[jt.F9.API]:Un,[jt.F9.BOOT_APP]:rs,[jt.F9.BOOT_TEAM]:Jn,[jt.F9.DEFAULT]:is};function Un(mt,Ot,Lt){var Gt;const yn=Lt==null?void 0:Lt.teamId;if(window.isReloading){(0,n.pq)("BOOT",`(${yn}) Ongoing reload detected during Gantry API error handler; Halting error handler.`);return}jt.XB[jt.F9.API](mt,Ot,{...Lt,shouldDisplayErrorView:!1,shouldBeaconError:(mt==null||(Gt=mt.data)===null||Gt===void 0?void 0:Gt.error)!=="user_needs_to_accept_custom_tos"}),Fn(yn,mt),Ot!=null&&Ot.isForegroundTeam&&Promise.all([e.e("gantry-v2-vendors-async"),e.e("gantry-v2-async-client-render-client")]).then(e.bind(e,19099)).then(kn=>{let{renderClient:Rn}=kn;(0,re.a5)(),Rn()})}l(Un,"handleApiError");function rs(mt,Ot,Lt){(0,re.a5)(),jt.XB[jt.F9.BOOT_APP](mt,Ot,Lt)}l(rs,"handleBootAppError");function Jn(mt,Ot,Lt){if(Lt){const{teamId:Gt}=Lt;(0,on.y)(Gt)}(0,re.a5)(),jt.XB[jt.F9.BOOT_TEAM](mt,Ot,Lt)}l(Jn,"handleBootTeamError");function is(mt,Ot,Lt){(0,re.a5)(),jt.XB[jt.F9.DEFAULT](mt,Ot,Lt)}l(is,"handleDefaultError");const Dn={handleApiError:Un,handleBootAppError:rs,handleBootTeamError:Jn,handleDefaultError:is};var us=e(226219),Ln=e(919758);const ss=function(){var mt=(0,t.coroutine)(function*(){Ln.goh.isAvailable()&&(0,Ln.goh)().includes("DisableServiceWorker")&&(yield(0,us._E)())});return l(function(){return mt.apply(this,arguments)},"disableServiceWorkerForClientConfig")}(),as=function(){var mt=(0,t.coroutine)(function*(){(0,H.X5)()===H.h5.SAFARI&&(yield(0,us._E)())});return l(function(){return mt.apply(this,arguments)},"disableServiceWorkerForSafari")}(),_s=function(){var mt=(0,t.coroutine)(function*(){yield as(),yield ss()});return l(function(){return mt.apply(this,arguments)},"maybeDisableServiceWorker")}();var ms=e(325771);_s(),window.boot_html__initial_boot_duration=Date.now()-window.sonic_boot__phase_1_5__start,window.boot_render_start=Date.now();function cs(mt){return mt.registerConfig({isPersistenceEnabled:!0,isMultiTeamEnabled:(0,Ie.VA)()}),mt.registerErrorHandlers(fs),mt.registerDynamicImportFns({data:()=>Promise.all([e.e("gantry-v2-vendors-async"),e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-vendors-async-client"),e.e("client-boot-styles"),e.e("gantry-v2-async-client-boot-data")]).then(e.bind(e,659995)),apis:()=>Promise.all([e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-async-client-boot-apis")]).then(e.bind(e,552054)),render:()=>Promise.all([e.e("gantry-v2-vendors-async"),e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-vendors-async-client"),e.e("client-boot-styles"),e.e("gantry-v2-async-client-boot-render")]).then(e.bind(e,125458)),deferred:()=>Promise.all([e.e("gantry-v2-vendors-async"),e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-vendors-async-client"),e.e("client-boot-styles"),e.e("gantry-v2-async-client-boot-deferred")]).then(e.bind(e,92709))}),mt.registerInitialApiCalls({experimentData:jn.dC,featureFlagData:jn.BG,clientBootData:ut,viewData:nn,allEnterpriseData:Ht,featureAccessData:jn.jH}),(0,Bt.b)(mt),mt.hooks.beforeDynamicImportsStart.tap("Render Placeholder",function(){var Ot=(0,t.coroutine)(function*(Lt){let{contextualInfo:Gt}=Lt;return(0,re.Sp)({teamId:Gt.teamOrEnterpriseBootId,showTeamSwitcher:(0,ns.A)().length>1}),{contextualInfo:Gt}});return function(Lt){return Ot.apply(this,arguments)}}()),mt.hooks.afterDynamicImportsStart.tap("Set routes",function(){var Ot=(0,t.coroutine)(function*(Lt){let{contextualInfo:Gt}=Lt;return $(),{contextualInfo:Gt}});return function(Lt){return Ot.apply(this,arguments)}}()),mt.hooks.afterDynamicImportsStart.tap("Set up client store",function(){var Ot=(0,t.coroutine)(function*(Lt){let{contextualInfo:Gt}=Lt;return(0,ue.x)(Gt.teamId),{contextualInfo:Gt}});return function(Lt){return Ot.apply(this,arguments)}}()),mt.hooks.afterDynamicImportsStart.tap("Register route listeners",function(){var Ot=(0,t.coroutine)(function*(Lt){let{contextualInfo:Gt}=Lt;return wn(),{contextualInfo:Gt}});return function(Lt){return Ot.apply(this,arguments)}}()),mt.hooks.afterDynamicImportsStart.tap("Update last active team ID in localConfig",function(){var Ot=(0,t.coroutine)(function*(Lt){let{contextualInfo:Gt}=Lt;const{teamId:yn}=Gt;return yn?(yn!==(0,He.W6)("lastActiveTeamId")&&(0,He.q9)("lastActiveTeamId",yn),{contextualInfo:Gt}):{contextualInfo:Gt}});return function(Lt){return Ot.apply(this,arguments)}}()),mt.hooks.beforeInitializeTeam.tap("Halt further boot if client is reloading",function(){var Ot=(0,t.coroutine)(function*(Lt){let{contextualInfo:Gt}=Lt;return window.isReloading?((0,n.pq)("BOOT",`(${Gt.teamId}) Ongoing reload detected; Cancelling boot.`),(0,ms.A)()):{contextualInfo:Gt}});return function(Lt){return Ot.apply(this,arguments)}}()),mt.hooks.beforeInitializeTeam.tap("Set tokens",function(){var Ot=(0,t.coroutine)(function*(Lt){let{contextualInfo:Gt}=Lt;return(0,c.L)({contextualInfo:Gt})});return function(Lt){return Ot.apply(this,arguments)}}()),mt.hooks.beforeInitializeTeam.tap(" Kick off objectStore fetch for minChannelUpdated ",function(){var Ot=(0,t.coroutine)(function*(Lt){let{contextualInfo:Gt}=Lt;return(0,z.EZ)()&&(0,me.z6)({teamId:Gt.teamId,userId:Gt.userId}),{contextualInfo:Gt}});return function(Lt){return Ot.apply(this,arguments)}}()),mt.hooks.setupMultiTeam.tap("Set up all other teams to boot if in multi team mode",En),mt.run()}if(l(cs,"boot"),!(0,s.A)()){const mt=(0,a.z4)(r.Y.CLIENT_V2);cs(mt)}const As={boot:cs}},955211:(j,T,e)=>{"use strict";e.d(T,{d:()=>a});var t=e(710596),n=e(250100),s=e(658160);function a(c){let{channels:r,selfId:o}=c;const u={};return r.some((m,i)=>{const d=m==null?void 0:m.id;return(0,n.N)(m)?(u.general=d,!0):((0,t.Ur)(m)&&(u.slackbot=d),o&&(0,s.e)(m)===o&&(u.self=d),i||(u.first=d),!1)}),u.general||u.slackbot||u.self||u.first}l(a,"getAnyChannelForRouting")},539488:(j,T,e)=>{"use strict";e.d(T,{E:()=>o});var t=e(612104),n=e.n(t),s=e(5952),a=e(449552),c=e(727140),r=e(955211);function o(d){return u.apply(this,arguments)}l(o,"getRouteInfo");function u(){return u=(0,t.coroutine)(function*(d){let{contextualInfo:_,channels:h}=d;const{teamId:p,isForegroundTeam:A}=_,v=(0,a.getStoreInstanceByTeamId)(p),E=(0,s.Gf)({store:v,shouldSetFocus:A});return E||m({contextualInfo:_,channels:h})}),u.apply(this,arguments)}l(u,"_getRouteInfo");function m(d){let{contextualInfo:_,channels:h}=d;const{teamId:p}=_;if(!p)return null;const A=(0,s.lQ)(p);if(A)return A;if(h){const v=_.userId;return i({channels:h,selfId:v})}return null}l(m,"calculateRouteInfo");function i(d){let{channels:_,selfId:h}=d;if(!_.length)return null;const p={routeName:c._G,params:{}},A=(0,r.d)({channels:_,selfId:h});return A&&(p.params.entityId=A),p}l(i,"getRouteFromBootData")},523889:(j,T,e)=>{"use strict";e.d(T,{y:()=>c});var t=e(348745),n=e(449552),s=e(675138),a=e(34424);function c(r){if(!r)return;const o=(0,n.getStoreInstanceByTeamId)(r);o&&((0,t.pq)("BOOT",`(${r}) Boot complete`),s.g.delete("setNavigatedDuringWarmBoot"),o.dispatch((0,a.b)(!1)),o.dispatch((0,a.k)(!1)))}l(c,"markTeamBootCompleted")},474523:(j,T,e)=>{"use strict";e.d(T,{b:()=>o,h:()=>c});var t=e(612104),n=e.n(t),s=e(646592),a=e(754778);function c(i){return r.apply(this,arguments)}l(c,"collectInitialPageLoadMetrics");function r(){return r=(0,t.coroutine)(function*(i){let{contextualInfo:d}=i;const{getTraceMeta:_,isBootingWarm:h,appName:p}=d,{getTracer:A,tags:v}=_(),E=(yield h)?a.H.WARM:a.H.COLD,f=A().createTrace({traceName:a.S.BOOT_INITIAL_LOAD,tags:{boot_type:E,app_name:p,...v},autoCreateRootSpan:!1,samplingOptions:{sampleType:s.nl.ALWAYS}});f.startSpan(a.S.BOOT_INITIAL_LOAD,{setAsRootSpan:!0,startTime:performance.timing.fetchStart,closeTime:window.boot_render_start}),f.startSpan(a.S.BOOT_INITIAL_LOAD_HTML,{startTime:performance.timing.fetchStart,closeTime:performance.timing.fetchStart+window.sonic_boot__phase_1__duration}),f.startSpan(a.S.BOOT_INITIAL_LOAD_JS,{startTime:window.sonic_boot__phase_1_5__start,closeTime:window.sonic_boot__phase_1_5__start+window.boot_html__initial_boot_duration}),A().reportTrace(f)}),r.apply(this,arguments)}l(r,"_collectInitialPageLoadMetrics");function o(i){i.hooks.beforeDynamicImportsStart.addCallIntercept(d=>u(d)),i.hooks.renderApp.addCallIntercept(d=>m(d))}l(o,"setupBootMetricsTracing");function u(i){return d=>{const{getTracer:_,setTrace:h,rootTrace:p}=d.contextualInfo.getTraceMeta(),v=_().createTrace({traceName:a.S.BOOT_TIME_TO_START_RENDER,autoCreateRootSpan:!1,parentSpanId:p.getRootSpanId(),traceId:p.getTraceId()});return v.startSpan(a.S.BOOT_TIME_TO_START_RENDER,{setAsRootSpan:!0,startTimeMs:window.boot_render_start}),h(v),i(d)}}l(u,"startTimeToRenderTrace");function m(i){return function(){var d=(0,t.coroutine)(function*(_){const{isBootingWarm:h,getTraceMeta:p,isForegroundTeam:A}=_.contextualInfo,{getTracer:v,getTrace:E,setTrace:f,rootTrace:g}=p(),y=v(),I=E(),O=(yield h)?a.H.WARM:a.H.COLD;return I.addTags({boot_type:O,is_foreground_team:A}),y.reportTrace(I),f(g),i(_)});return function(_){return d.apply(this,arguments)}}()}l(m,"endTimeToRenderTrace")},754778:(j,T,e)=>{"use strict";e.d(T,{H:()=>n,S:()=>t});var t;(function(s){s.BOOT_INITIAL_LOAD="boot:initial_load",s.BOOT_INITIAL_LOAD_HTML="boot:initial_load:html",s.BOOT_INITIAL_LOAD_JS="boot:initial_load:js",s.BOOT_TIME_TO_START_RENDER="boot:time_to_start_render",s.BOOT_TIME_TO_MOUNT_CLIENT="boot:time_to_mount_client"})(t||(t={}));var n;(function(s){s.COLD="cold",s.WARM="warm"})(n||(n={}))},675138:(j,T,e)=>{"use strict";e.d(T,{g:()=>t});const t=new Map},439378:(j,T,e)=>{"use strict";e.d(T,{A:()=>n});var t=e(342416);const n=l((s,a)=>a&&s===t.L.Replies?"chrono_threads_unreads":s===t.L.Replies?"chrono_threads_reads_and_unreads":a?"chrono_unreads":"chrono_reads_and_unreads","getFetchMode")},117909:(j,T,e)=>{"use strict";e.d(T,{c:()=>u});var t=e(446632),n=e(873406),s=e(449552),a=e(919198),c=e(752836),r=e(439378),o=e(342416);const u=(0,t.A)(function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o.L.All,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new n.Ay({storeKey:"activityIA4",fetch:d=>(0,s.dispatchForTeamId)(d,(0,a.Q)({limit:c.Q1,filter:m,fetchNew:!0,mode:(0,r.A)(m,i)})),isEnabled:()=>!0,metricsName:"activity",markStaleAfterSlowReconnect:()=>!0})})},722711:(j,T,e)=>{"use strict";e.d(T,{ES:()=>m,Eg:()=>h,KD:()=>p,rz:()=>i,sG:()=>d,ut:()=>_,yN:()=>A});var t=e(881805),n=e(117909),s=e(342416),a=e(915773),c=e(725393),r=e(529734);const o=l((v,E)=>{var f,g;const y=(0,r.kz)(E),I=(0,c.S)({filter:v,isUnreadMode:!!(!(E==null||(f=E.activityIA4)===null||f===void 0)&&f.filterUnreads),isFilteringRevampToggledOn:y});return(g=E.activityIA4)===null||g===void 0?void 0:g[I]},"getActivityListForFilter"),u=(0,a.Ay)(v=>{var E,f,g;const y=(0,t.ZT)(v),I=(E=v.activityIA4)===null||E===void 0?void 0:E.all;return((v==null||(f=v.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===s.L.All||!(!(v==null||(g=v.activityIA4)===null||g===void 0)&&g.selectedTabId))&&(I!=null&&I.length)&&(0,n.c)(s.L.All,!1).maybeRefetch(y,s.N),v&&v.activityIA4&&I});u.meta={name:"createSelector",key:"createSelectorgetReadAndUnreadActivityList",description:v=>{var E,f,g;const y=(0,t.ZT)(v),I=(E=v.activityIA4)===null||E===void 0?void 0:E.all;return((v==null||(f=v.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===s.L.All||!(!(v==null||(g=v.activityIA4)===null||g===void 0)&&g.selectedTabId))&&(I!=null&&I.length)&&(0,n.c)(s.L.All,!1).maybeRefetch(y,s.N),v&&v.activityIA4&&I}};const m=(0,a.Ay)(v=>{var E,f;const g=(0,t.ZT)(v),y=o(s.L.All,v);if(((v==null||(E=v.activityIA4)===null||E===void 0?void 0:E.selectedTabId)===s.L.All||!(!(v==null||(f=v.activityIA4)===null||f===void 0)&&f.selectedTabId))&&(y!=null&&y.length)){var I;(0,n.c)(s.L.All,(I=v.activityIA4)===null||I===void 0?void 0:I.filterUnreads).maybeRefetch(g,s.N)}return v&&v.activityIA4&&y});m.meta={name:"createSelector",key:"createSelectorgetActivityList",description:v=>{var E,f;const g=(0,t.ZT)(v),y=o(s.L.All,v);if(((v==null||(E=v.activityIA4)===null||E===void 0?void 0:E.selectedTabId)===s.L.All||!(!(v==null||(f=v.activityIA4)===null||f===void 0)&&f.selectedTabId))&&(y!=null&&y.length)){var I;(0,n.c)(s.L.All,(I=v.activityIA4)===null||I===void 0?void 0:I.filterUnreads).maybeRefetch(g,s.N)}return v&&v.activityIA4&&y}};const i=(0,a.Ay)(v=>{var E;const f=(0,t.ZT)(v),g=o(s.L.Mentions,v);if((v==null||(E=v.activityIA4)===null||E===void 0?void 0:E.selectedTabId)===s.L.Mentions&&g.length){var y;(0,n.c)(s.L.Mentions,(y=v.activityIA4)===null||y===void 0?void 0:y.filterUnreads).maybeRefetch(f,s.N)}return v&&v.activityIA4&&g});i.meta={name:"createSelector",key:"createSelectorgetActivityListMentions",description:v=>{var E;const f=(0,t.ZT)(v),g=o(s.L.Mentions,v);if((v==null||(E=v.activityIA4)===null||E===void 0?void 0:E.selectedTabId)===s.L.Mentions&&g.length){var y;(0,n.c)(s.L.Mentions,(y=v.activityIA4)===null||y===void 0?void 0:y.filterUnreads).maybeRefetch(f,s.N)}return v&&v.activityIA4&&g}};const d=(0,a.Ay)(v=>{var E;const f=(0,t.ZT)(v),g=o(s.L.Replies,v);if((v==null||(E=v.activityIA4)===null||E===void 0?void 0:E.selectedTabId)===s.L.Replies&&g.length){var y;(0,n.c)(s.L.Replies,(y=v.activityIA4)===null||y===void 0?void 0:y.filterUnreads).maybeRefetch(f,s.N)}return v&&v.activityIA4&&g});d.meta={name:"createSelector",key:"createSelectorgetActivityListReplies",description:v=>{var E;const f=(0,t.ZT)(v),g=o(s.L.Replies,v);if((v==null||(E=v.activityIA4)===null||E===void 0?void 0:E.selectedTabId)===s.L.Replies&&g.length){var y;(0,n.c)(s.L.Replies,(y=v.activityIA4)===null||y===void 0?void 0:y.filterUnreads).maybeRefetch(f,s.N)}return v&&v.activityIA4&&g}};const _=(0,a.Ay)(v=>{var E,f,g;const y=(0,t.ZT)(v),I=o(s.L.Reactions,v);if((v==null||(E=v.activityIA4)===null||E===void 0?void 0:E.selectedTabId)===s.L.Reactions&&(!(v==null||(f=v.activityIA4)===null||f===void 0||(g=f.reactions)===null||g===void 0)&&g.length)){var O;(0,n.c)(s.L.Reactions,(O=v.activityIA4)===null||O===void 0?void 0:O.filterUnreads).maybeRefetch(y,s.N)}return v&&v.activityIA4&&I});_.meta={name:"createSelector",key:"createSelectorgetActivityListReactions",description:v=>{var E,f,g;const y=(0,t.ZT)(v),I=o(s.L.Reactions,v);if((v==null||(E=v.activityIA4)===null||E===void 0?void 0:E.selectedTabId)===s.L.Reactions&&(!(v==null||(f=v.activityIA4)===null||f===void 0||(g=f.reactions)===null||g===void 0)&&g.length)){var O;(0,n.c)(s.L.Reactions,(O=v.activityIA4)===null||O===void 0?void 0:O.filterUnreads).maybeRefetch(y,s.N)}return v&&v.activityIA4&&I}};const h=(0,a.Ay)(v=>{var E;const f=(0,t.ZT)(v);if(!(v==null||(E=v.activityIA4)===null||E===void 0)&&E.filterUnreads){var g;(0,n.c)(s.L.Unreads,(g=v.activityIA4)===null||g===void 0?void 0:g.filterUnreads).maybeRefetch(f,s.N)}return v&&v.activityIA4&&v.activityIA4.unreads});h.meta={name:"createSelector",key:"createSelectorgetActivityListUnreads",description:v=>{var E;const f=(0,t.ZT)(v);if(!(v==null||(E=v.activityIA4)===null||E===void 0)&&E.filterUnreads){var g;(0,n.c)(s.L.Unreads,(g=v.activityIA4)===null||g===void 0?void 0:g.filterUnreads).maybeRefetch(f,s.N)}return v&&v.activityIA4&&v.activityIA4.unreads}};const p=(0,a.Ay)(v=>{var E;const f=(0,t.ZT)(v),g=o(s.L.Apps,v);if((v==null||(E=v.activityIA4)===null||E===void 0?void 0:E.selectedTabId)===s.L.Apps&&g.length){var y;(0,n.c)(s.L.Apps,(y=v.activityIA4)===null||y===void 0?void 0:y.filterUnreads).maybeRefetch(f,s.N)}return v&&v.activityIA4&&g});p.meta={name:"createSelector",key:"createSelectorgetActivityListApps",description:v=>{var E;const f=(0,t.ZT)(v),g=o(s.L.Apps,v);if((v==null||(E=v.activityIA4)===null||E===void 0?void 0:E.selectedTabId)===s.L.Apps&&g.length){var y;(0,n.c)(s.L.Apps,(y=v.activityIA4)===null||y===void 0?void 0:y.filterUnreads).maybeRefetch(f,s.N)}return v&&v.activityIA4&&g}};const A=(0,a.Ay)(v=>{var E;const f=(0,t.ZT)(v),g=o(s.L.Invitations,v);if((v==null||(E=v.activityIA4)===null||E===void 0?void 0:E.selectedTabId)===s.L.Invitations&&(g!=null&&g.length)){var y;(0,n.c)(s.L.Invitations,(y=v.activityIA4)===null||y===void 0?void 0:y.filterUnreads).maybeRefetch(f,s.N)}return v&&v.activityIA4&&g});A.meta={name:"createSelector",key:"createSelectorgetActivityListInvitations",description:v=>{var E;const f=(0,t.ZT)(v),g=o(s.L.Invitations,v);if((v==null||(E=v.activityIA4)===null||E===void 0?void 0:E.selectedTabId)===s.L.Invitations&&(g!=null&&g.length)){var y;(0,n.c)(s.L.Invitations,(y=v.activityIA4)===null||y===void 0?void 0:y.filterUnreads).maybeRefetch(f,s.N)}return v&&v.activityIA4&&g}}},725393:(j,T,e)=>{"use strict";e.d(T,{S:()=>n});var t=e(837976);const n=l(s=>{let{filter:a,isUnreadMode:c,isFilteringRevampToggledOn:r}=s;return c&&r?`unread${(0,t.A)(a)}`:!r&&c?"unreads":a},"getFilterForSelectedMode")},919198:(j,T,e)=>{"use strict";e.d(T,{Q:()=>F});var t=e(674217),n=e(881805),s=e(342416),a=e(117909),c=e(951519),r=e(525210),o=e(725393),u=e(180491),m=e(324116),i=e(500802),d=e(495717),_=e(791556),h=e(432836),p=e(994639),A=e(517632),v=e(53356),E=e(682520),f=e(215603),g=e(826),y=e(729268);const I=["external_channel_invite","shared_workspace_invite","external_dm_invite"],O=["at_user","at_user_group","at_channel","at_everyone","keyword","list_record_assigned","list_user_mentioned"],M=l((V,B)=>{let{experimentBundleAppsActivityWithBEGroupOn:D}=B;const S=D?"bot_dm_bundle":"bot_dm";let R=["thread_reply","message_reaction","internal_channel_invite","list_record_edited",S,...O,...I];const w=V.toLowerCase();return w.includes("mentions")&&(R=O),w.includes("apps")&&(R=[S]),w.includes("replies")&&(R=void 0),w.includes("reactions")&&(R=["message_reaction"]),w.includes("unreads")&&(R=[S,"thread_reply","internal_channel_invite",...O,...I]),w.includes("invitations")&&(R=["internal_channel_invite",...I]),R},"getActivityTypes"),C=l((V,B)=>{let{experimentBundleAppsActivityWithBEGroupOn:D}=B,S=[];return Object.keys(V).forEach(R=>{if(V[R]){const w=R.includes("threads")?["thread_reply"]:M(R,{experimentBundleAppsActivityWithBEGroupOn:D});w&&(S=[...S,...w])}}),S},"getActivityTypesForFilterList");var P=e(529734),L=e(27304);const x={dms:!0,channel_unreads:!0,priority:!0,actions:!0,"all-unreads":!0,"priority-unreads-on-top":!0,"all-unreads-on-top":!0},F=(0,t.Ay)("Fetch user activity",function(V,B){let{limit:D,filter:S,mode:R,fetchNew:w,isUnreadMode:Y}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{limit:20,mode:"chrono_reads_and_unreads",filter:s.L.All};V((0,c.G3)(!0));const Q=B(),Z=(0,n.ZT)(Q),ee=(0,r.F)(Q),_e=(0,r.S1)(Q),Ee=(0,r.d5)(Q),G=(0,r.hT)(Q),Ae=(0,d.zp)(Q),ce=(0,P.UU)(Q),de=(0,P.kz)(Q),oe=(0,o.S)({filter:S,isUnreadMode:Y!==void 0?Y:G,isFilteringRevampToggledOn:de}),$=ee==null?void 0:ee[oe],re=M(oe,{experimentBundleAppsActivityWithBEGroupOn:ce});return x!=null&&x[S]?Promise.resolve():!w&&!$?(V((0,c.G3)(!1)),u.S.resolve()):((0,a.c)(S,G).markObjectsAsFresh(Z,[s.N]),V((0,L.X)({limit:D,reason:"fetchActivityFeed",types:re,mode:R,cursor:w?void 0:$})).then(ue=>{var te;if(!ue.items)return;if(V((0,c.bl)({nextCursor:ue==null||(te=ue.response_metadata)===null||te===void 0?void 0:te.next_cursor,items:ue.items,filter:oe})),R==="chrono_unreads"){const H=(0,r.cJ)(B()),U=(0,f.xY)(B());ue.items.length!==H&&V((0,A.O)()).then(N=>{V((0,v.Q7)(N));const K=(0,g.E)({state:Q}),W=(0,E.Ay)({getState:B,label:"ACTIVITY_BADGING"});try{const J=K.createSpan({name:"ia4client_activity_badge:mismatch",samplingOptions:{sampleType:y.tS.ALWAYS},options:{tags:{num_unread_activity_items:ue.items.length,old_activity_badge_count:H,new_channel_badges:JSON.stringify(N.channelBadges),old_channel_badges:JSON.stringify(U)}}});J.close(),K.reportSpans([J]),W.info(`Activity badge mismatch. number of unread activity.feed items: ${ue.items.length} activityBadgeCount: ${H}: counts.channelBadges: ${JSON.stringify(N==null?void 0:N.channelBadges)} old channelBadges: ${JSON.stringify(U)}`)}catch{}})}const ae="slack-connect-fetch-invites-for-activity-feed";if(w&&!_e&&["all","invitations","unreadAll","unreadInvitations"].includes(S)&&ue.items.some(H=>{let{item:U}=H;return I.includes(U.type)})){const H=V((0,_.p)({direction:p.D.Incoming,reason:ae})),U=Ae?V((0,h.A)({reason:ae})):u.S.resolve({inboundConnectInvites:[],outboundConnectInvites:[]});u.S.all([H,U]).then(()=>V((0,c.xv)(!0)))}if(w&&!Ee&&["all","invitations","unreadAll","unreadInvitations"].includes(S)){const H=V((0,m.d)({reason:ae})),U=Ae?V((0,i.A)({reason:ae})):u.S.resolve({inboundConnectInvites:[],outboundConnectInvites:[]});u.S.all([H,U]).then(()=>V((0,c.ae)(!0)))}}).finally(()=>V((0,c.G3)(!1))))});F.meta={name:"createThunk",key:"createThunkfetchActivityFeed",description:"Fetch user activity"}},61177:(j,T,e)=>{"use strict";e.d(T,{A:()=>Hi});var t=e(895081),n=e(920825),s=e(449552),a=e(919758),c=e(285955),r=e(801425),o=e(333672);const u=(0,o.Ay)("Broadcast workspaces state to other stores",(he,le,ye)=>{const De=he.getState(),rt=le(ye),Ye=he.getState(),kt=(0,c.getBootedWorkspaces)(Ye),at=De&&(0,c.getBootedWorkspaces)(De),en=(0,c.getAllWorkspaces)(Ye),Nn=(0,c.getAllWorkspaces)(De),qn=!Nn||en.some((bn,Bn)=>bn!==Nn[Bn]),Is=(0,c.getRecentlyFocusedWorkspaces)(Ye),dn=De&&(0,c.getRecentlyFocusedWorkspaces)(De);return(at!==kt||qn||dn!==Is)&&m(kt,Is),rt});u.meta={name:"createMiddleware",key:"createMiddlewarebroadcastWorkspacesMiddleware",description:"Broadcast workspaces state to other stores"};function m(he,le){const ye=le[0];ye&&(he==null||he.forEach(De=>{(0,s.dispatchForTeamId)(De,(0,r.K$)(le)),(0,s.dispatchForTeamId)(De,(0,r.fw)(le))}),(0,a.ny2)(ye))}l(m,"broadcastFocusedWorkspaces");const i=u;var d=e(272765),_=e(126796),h=e(42302);function p(){let{state:he,prevState:le,workspaces:ye=[],broadcastSelector:De=h.A,broadcastAction:rt=h.A}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const Ye=De(he),kt=De(le);Ye!==kt&&ye.forEach(at=>{(0,s.dispatchForTeamId)(at,rt(Ye))})}l(p,"maybeBroadcastStateToWorkspaces");const A=p,v=(0,o.Ay)("Broadcast connectivity state to other stores",(he,le,ye)=>{const De=he.getState(),rt=le(ye),Ye=he.getState(),kt=(0,c.getBootedWorkspaces)(Ye);return A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,_.Pb)(at),broadcastAction:at=>(0,d.p9)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,_.XQ)(at),broadcastAction:at=>(0,d.pm)(at)}),rt});v.meta={name:"createMiddleware",key:"createMiddlewarebroadcastConnectivityMiddleware",description:"Broadcast connectivity state to other stores"};const E=v;var f=e(857456),g=e(217239),y=e(339993),I=e(373314),O=e(119501),M=e(682520),C=e(200154);const P={bootedWorkspaces:[],failedToBootWorkspaces:[],needs2FASetup:[],needsToAcceptCustomTOS:[],userNotMemberOfAnyWorkspaceInOrg:[],migratingWorkspaces:{},completedMigrationWorkspaces:[],accessLimitedWorkspaces:[],recentlyFocusedWorkspaces:[],navigateToUnbootedWorkspace:{},removedWorkspaces:[]},L="WORKSPACES",x=16,V=(0,I.Ay)({},P,{storeKey:"workspaces",persistenceEnabled:!0}).on(C.initialize,(he,le)=>B(he,le)).on(C.setDidBootAllWorkspaces,he=>({...he,didBootAllWorkspaces:!0})).on(C.setWorkspaceOrder,(he,le)=>D(he,le)).on(C.setWorkspaceBooted,(he,le)=>S(he,le)).on(C.setWorkspaceFailedToBoot,(he,le)=>R(he,le)).on(C.setWorkspaceNeeds2FASetup,(he,le)=>w(he,le)).on(C.setWorkspaceNeedsToAcceptCustomTOS,(he,le)=>Y(he,le)).on(C.setNavigateToUnbootedWorkspace,(he,le)=>({...he,navigateToUnbootedWorkspace:le})).on(C.setWorkspaceIsMigrating,(he,le)=>Q(he,le)).on(C.setWorkspaceMigrationIsComplete,(he,le)=>Z(he,le)).on(C.setWorkspaceIsAccessLimited,(he,le)=>ee(he,le)).on(C.setUserNotMemberOfAnyWorkspaceInOrg,(he,le)=>_e(he,le)).on(C.addWorkspace,function(he){let{id:le,meta:ye}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!le||!ye)throw new Error("'id' and 'meta' are both required when adding a workspace");if(he.allWorkspaces.includes(le))return(0,M.Wo)({label:L}).warn(`Cannot add workspace; it is already present: ${le}`),he;const{allWorkspaces:De,workspacesMeta:rt}=he;return{...he,allWorkspaces:[...De,le],workspacesMeta:{...rt,[le]:ye}}}).on(C.updateWorkspaceMeta,function(he){let{id:le,meta:ye}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{workspacesMeta:De}=he;if(!De[le])throw new Error(`Cannot update workspace meta for ${le}; no such team`);return{...he,workspacesMeta:{...De,[le]:ye}}}).on(C.internalSetFocusedWorkspaceType,(he,le)=>({...he,focusedWorkspace:le,recentlyFocusedWorkspaces:Ee(he.recentlyFocusedWorkspaces,le)})).on(C.internalRemoveWorkspaceType,(he,le)=>({...he,allWorkspaces:(0,f.A)(he.allWorkspaces,le)})).on(C.addRemovedWorkspace,(he,le)=>G(he,le));function B(he){let{focusedWorkspace:le,allWorkspaces:ye,workspacesMeta:De}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(he.allWorkspaces)throw new Error("workspaces-store:initialize cannot be called more than once");if(!le)throw new Error("workspaces-store:initialize must be given a focusedWorkspace");if(!ye)throw new Error("workspaces-store:initialize must be given an array of workspaces");if(ye.indexOf(le)<0)throw new Error(`workspaces-store:initialize ${le} is not one of the valid workspaces: ${ye}`);return{...he,focusedWorkspace:le,allWorkspaces:ye,workspacesMeta:De,recentlyFocusedWorkspaces:[le]}}l(B,"initializeWorkspacesState");function D(he,le){const ye=he.allWorkspaces;if((0,g.A)(ye,le).length!==ye.length)throw new Error("workspaces-store:setWorkspaceOrder can only re-order items in the array; additions or removals are not allowed");return(0,O.q9)("orderedTeamIds",le),{...he,allWorkspaces:le}}l(D,"updateWorkspaceOrder");function S(he,le){const ye=he.bootedWorkspaces.includes(le)?he.bootedWorkspaces:[...he.bootedWorkspaces,le];return{...he,bootedWorkspaces:ye}}l(S,"updateWorkspaceBooted");function R(he,le){if(!le)return he;const ye=he.failedToBootWorkspaces.includes(le)?he.failedToBootWorkspaces:[...he.failedToBootWorkspaces,le];return{...he,failedToBootWorkspaces:ye}}l(R,"updateWorkspaceFailedToBoot");function w(he,le){if(!le)return he;const ye=he.needs2FASetup.includes(le)?he.needs2FASetup:[...he.needs2FASetup,le];return{...he,needs2FASetup:ye}}l(w,"updateWorkspaceNeeds2FASetup");function Y(he,le){if(!le)return he;const ye=he.needsToAcceptCustomTOS.find(De=>{let{teamId:rt}=De;return le.teamId===rt})?he.needsToAcceptCustomTOS:[...he.needsToAcceptCustomTOS,le];return{...he,needsToAcceptCustomTOS:ye}}l(Y,"updateWorkspaceNeedsToAcceptCustomTOS");function Q(he,le){let{teamId:ye,migrationId:De,canViewMigrationStatus:rt}=le;if(!ye)return he;const{migratingWorkspaces:Ye}=he;return{...he,migratingWorkspaces:{...Ye,[ye]:{migrationId:De,canViewMigrationStatus:rt}}}}l(Q,"updateWorkspaceIsMigrating");function Z(he,le){if(!le)return he;const ye=he.completedMigrationWorkspaces.includes(le)?he.completedMigrationWorkspaces:[...he.completedMigrationWorkspaces,le];return{...he,completedMigrationWorkspaces:ye}}l(Z,"updateWorkspaceMigrationIsComplete");function ee(he,le){if(!le)return he;const ye=he.accessLimitedWorkspaces.includes(le)?he.accessLimitedWorkspaces:[...he.accessLimitedWorkspaces,le];return{...he,accessLimitedWorkspaces:ye}}l(ee,"updateWorkspaceIsAccessLimited");function _e(he,le){if(!le)return he;const ye=he.userNotMemberOfAnyWorkspaceInOrg.includes(le)?he.userNotMemberOfAnyWorkspaceInOrg:[...he.userNotMemberOfAnyWorkspaceInOrg,le];return{...he,userNotMemberOfAnyWorkspaceInOrg:ye}}l(_e,"updateUserNotMemberOfAnyWorkspaceInOrg");function Ee(he,le){const ye=[le,...he.filter(De=>De!==le)];return ye.length>x?(0,y.A)(ye,x):ye}l(Ee,"updateRecentlyFocusedWorkspaces");function G(he,le){if(!le)return he;const ye=he.removedWorkspaces.includes(le)?he.removedWorkspaces:[...he.removedWorkspaces,le];return{...he,removedWorkspaces:ye}}l(G,"updateRemovedWorkspaces");var Ae=e(28366),ce=e(324830),de=e(476897),oe=e(452059),$=e(193611);const re={shouldLogAppBootMetrics:!0,shouldLogTeamSwitchMetrics:!1,shouldLogTTVMetrics:!0,shouldLogTTUMetrics:!0},te=(0,I.Ay)({},re,{storeKey:"telemetry",persistenceEnabled:!0}).on($.C7,(he,le)=>({...he,shouldLogAppBootMetrics:le})).on($.Mb,(he,le)=>({...he,shouldLogTeamSwitchMetrics:le})).on($.Ln,(he,le)=>({...he,shouldLogTTVMetrics:le})).on($.UM,(he,le)=>({...he,shouldLogTTUMetrics:le}));var ae=e(661876),H=e(37240),U=e(726428),N=e(844434),K=e(553127),W=e(808783),J=e(934528),q=e(334589);const ie=(0,o.Ay)("Broadcast accessibility state to other stores",(he,le,ye)=>{const De=he.getState(),rt=le(ye),Ye=he.getState(),kt=(0,c.getBootedWorkspaces)(Ye);return A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,q.VH)(at),broadcastAction:at=>(0,J.Jq)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,q.nQ)(at),broadcastAction:at=>(0,J.N)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,q.dF)(at),broadcastAction:at=>(0,J.KQ)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,q.jX)(at),broadcastAction:at=>(0,J.Tv)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,q.gb)(at),broadcastAction:at=>(0,J.C_)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,q.zm)(at),broadcastAction:at=>(0,J.XE)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,q.K9)(at),broadcastAction:at=>(0,J.Mq)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,q.u$)(at),broadcastAction:at=>(0,J.Sr)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,q.kd)(at),broadcastAction:at=>(0,J.mw)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,q.gR)(at),broadcastAction:at=>(0,J.Ap)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,q.u)(at),broadcastAction:at=>(0,J.V_)(at)}),rt});ie.meta={name:"createMiddleware",key:"createMiddlewarebroadcastAccessibilityMiddleware",description:"Broadcast accessibility state to other stores"};const Te=ie;var Me=e(734264),ke=e(743077);const Pe=(0,o.Ay)("Broadcast accessibility persistent state to other stores",(he,le,ye)=>{const De=he.getState(),rt=le(ye),Ye=he.getState(),kt=(0,c.getBootedWorkspaces)(Ye);return A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,ke.i)(at),broadcastAction:at=>(0,Me.w)(at)}),rt});Pe.meta={name:"createMiddleware",key:"createMiddlewarebroadcastAccessibilityPersistentMiddleware",description:"Broadcast accessibility persistent state to other stores"};const Ie=Pe;var X=e(718602),ne=e(685049);const fe=100,be="client-ia-history",Be=[...Object.values(ne.mH)||[]];var We=e(816165);const Re=l(()=>{try{const he=localStorage.getItem(be);return he?JSON.parse(he):[]}catch(he){return(0,M.Wo)().error("Failed to read IA history from storage",he),[]}},"readStackFromStorage"),ve=l(he=>{try{localStorage.setItem(be,JSON.stringify(he))}catch(le){(0,M.Wo)().error("Failed to write IA history to storage",le)}},"writeStackToStorage"),He=(0,I.Ay)({},{stack:Re()},{storeKey:"iaHistory",persistenceEnabled:!1}).on(We.nb,(he,le)=>{if(!le||Be.includes(le==null?void 0:le.primaryView))return he;const ye=1e3,De=[le].concat(he.stack).slice(0,ye);return window.setTimeout(()=>ve(De),0),{stack:De}}).on(We.JG,(he,le)=>{const ye=he.stack.indexOf(le);if(ye===-1)return he;const De=he.stack.slice();return De.splice(ye,1),window.setTimeout(()=>ve(De),0),{stack:De}}).on(We.Si,he=>{if(!he.stack)return he;const le=he.stack.slice(0,1);return window.setTimeout(()=>ve(le),0),{stack:le}}).on(We.kM,()=>{const he=[];return ve(he),{stack:he}});var je=e(271644),Ke=e(774165),ht=e(127225),dt=e(359188),Ve=e(211700);const Je={[ht.N2]:{index:0,previousIndex:null,stack:[]}},Ge={persistenceEnabled:!1,storeKey:"mainWindowHistory"},Mt=(0,Ke.vy)({},Je,Ge).on(je.y2,(he,le)=>{let{windowId:ye,entry:De}=le;return{...he,[ye]:(0,dt.wg)({windowState:he[ye],entry:De})}}).on(je.jW,()=>Je).on(je.cM,(he,le)=>{let{windowId:ye,index:De,previousIndex:rt}=le;return{...he,[ye]:(0,dt.ds)({windowState:he[ye],index:De,previousIndex:rt})}}).on(je.$E,(he,le)=>{let{windowId:ye,index:De}=le;return{...he,[ye]:(0,dt.cB)({windowState:he[ye],index:De})}}).on(je.HQ,(he,le)=>{let{windowId:ye,entry:De}=le;return{...he,[ye]:(0,dt.w9)({windowState:he[ye],entry:De})}});(0,Ve.ul)("mainWindowHistory",{getState:()=>(0,s.getStateForClientStore)().mainWindowHistory[ht.N2]});var Dt=e(963863),pt=e(234065);const Qt=!0,Nt=(0,I.Ay)({},Qt,{storeKey:"isClient",persistenceEnabled:!1});Nt.meta={name:"createReducer",key:"createReducerisClientReducer"};const bt=Nt;var Yt=e(178783),fn=e(54930),Tt=e(561303),sn=e(944780),mn=e(656453),wt=e(167094);const On={isHuddlesEnabled:!1,channelToJoinCredentials:{},showDiscoveryBanner:!1,screenshareActivePanel:0,songPlaying:void 0,jukeboxLocalVolume:1,canRenderActiveInviteCardInSidebar:!0,isHuddleWindowFocused:!1,isHuddleWindowOpen:!1,isHuddleMiniPlayerHidden:!1,isAudioOnlyModeEnabled:!1,wasCameraEnabledWhenAudioOnlyModeWasActivated:!1,wasJoinedFromPrejoin:!1,unreadInvites:[]},Mn=(0,I.Ay)({},On,{storeKey:"clientHuddles",persistenceEnabled:!1}).on(Tt.VU,(he,le)=>he.isHuddlesEnabled?he:{...he,isHuddlesEnabled:le}).on(Tt.xf,(he,le)=>({...he,mostRecentHuddle:le})).on(Tt.Rh,(he,le)=>{const{mostRecentHuddle:ye}=he;if(!ye||le.teamId&&le.teamId!==ye.teamId||le.channelId&&le.channelId!==ye.channelId)return he;const De={...he,mostRecentHuddle:{...ye,...le}},rt=De.mostRecentHuddle;return rt&&(0,M.Wo)().info(sn.o7,`updateActiveHuddleReference huddleState ${rt.huddleState}, substate ${rt.huddleSubState}, optimisticState ${rt.optimisticHuddleState}`),De}).on(Tt.Jc,(he,le)=>{const{mostRecentHuddle:ye}=he;return!ye||le===ye.channelId?he:{...he,mostRecentHuddle:{...ye,channelId:le}}}).on(Tt.hB,(he,le)=>({...he,activeInvite:le,unreadInvites:[...he.unreadInvites,{invite:le,receivedTimestampMs:Date.now()}]})).on(Tt.fP,(he,le)=>{let{teamId:ye,markBeforeMs:De}=le;const rt=he.unreadInvites.filter(Ye=>Ye.invite.teamId!==ye||Ye.receivedTimestampMs>De);return he.unreadInvites.length===rt.length?he:{...he,unreadInvites:rt}}).on(Tt.u8,(he,le)=>{var ye;return{...he,unreadInvites:he.unreadInvites.filter(De=>De.invite.channelId!==le),activeInvite:((ye=he.activeInvite)===null||ye===void 0?void 0:ye.channelId)!==le?he.activeInvite:void 0}}).on(Tt.Ko,(he,le)=>he.forceMiniPanelVisible===le?he:{...he,forceMiniPanelVisible:le}).on(Tt.Yi,(he,le)=>{let{channelId:ye,joinCredentials:De,expiry:rt,fromInvite:Ye}=le;var kt;if(!ye||!De)return he;const at=he.channelToJoinCredentials;at[ye]={credentials:De,expiry:rt,fromInvite:Ye};const en=(kt=he.activeInvite)===null||kt===void 0?void 0:kt.teamId;return en&&(0,mn.Cy)({state:(0,s.getStateByTeamId)(en)}).count(wt.ir),{...he,channelToJoinCredentials:at}}).on(Tt.WB,(he,le)=>{let{channelId:ye}=le;if(!ye)return he;if(he.channelToJoinCredentials[ye]){var De;const rt=(De=he.activeInvite)===null||De===void 0?void 0:De.teamId;rt&&(0,mn.Cy)({state:(0,s.getStateByTeamId)(rt)}).count(wt.sQ)}return{...he,channelToJoinCredentials:(0,fn.A)(he.channelToJoinCredentials,[ye])}}).on(Tt.aO,(he,le)=>he.showDiscoveryBanner===le?he:{...he,showDiscoveryBanner:le}).on(Tt.Ag,(he,le)=>he.isLoungeMusicPlaying===le?he:{...he,isLoungeMusicPlaying:!!le}).on(Tt._U,(he,le)=>he.lastStartTs===le?he:{...he,lastStartTs:le}).on(Tt.bV,(he,le)=>he.lastEndTs===le?he:{...he,lastEndTs:le}).on(Tt.qr,(he,le)=>he.lastDurationTs===le?he:{...he,lastDurationTs:le}).on(Tt.Gx,(he,le)=>he.screenshareActivePanel===le?he:{...he,screenshareActivePanel:le}).on(Tt.cx,he=>({...he,screenshareActivePanel:0,songPlaying:void 0,isHuddleWindowFocused:!1,isHuddleWindowOpen:!1,isHuddleMiniPlayerHidden:!1,isAudioOnlyModeEnabled:!1,wasCameraEnabledWhenAudioOnlyModeWasActivated:!1,wasJoinedFromPrejoin:!1})).on(Tt._u,(he,le)=>{let{song:ye}=le;return he.songPlaying===(ye==null?void 0:ye.key)?he:{...he,songPlaying:ye==null?void 0:ye.key}}).on(Tt.nw,(he,le)=>he.canRenderActiveInviteCardInSidebar===le?he:{...he,canRenderActiveInviteCardInSidebar:le}).on(Tt.o9,(he,le)=>he.isHuddleWindowFocused===le?he:{...he,isHuddleWindowFocused:le}).on(Tt.TK,(he,le)=>he.isHuddleWindowOpen===le?he:{...he,isHuddleWindowOpen:le}).on(Tt.kg,(he,le)=>he.isAudioOnlyModeEnabled===le?he:{...he,isAudioOnlyModeEnabled:le}).on(Tt.Hg,(he,le)=>he.wasCameraEnabledWhenAudioOnlyModeWasActivated===le?he:{...he,wasCameraEnabledWhenAudioOnlyModeWasActivated:le}).on(Tt.t2,(he,le)=>he.isHuddleMiniPlayerHidden===le?he:{...he,isHuddleMiniPlayerHidden:!!le}).on(Tt.og,(he,le)=>he.wasJoinedFromPrejoin===le?he:{...he,wasJoinedFromPrejoin:!!le});var Wn=e(839253);const xn={navigateListenersRunOnClientMount:0},An=(0,I.Ay)({},xn,{storeKey:"navigate",persistenceEnabled:!1}).on(Wn.C,he=>({...he,navigateListenersRunOnClientMount:he.navigateListenersRunOnClientMount+1}));var vt=e(152532);const xt=(0,vt.Ay)("sets the client side effect map on the store");xt.meta={name:"createAction",key:"createActionsetClientSideEffectsMap",description:"sets the client side effect map on the store"};const Vt={clientSideEffectsMap:{}},St=(0,I.Ay)({},Vt,{storeKey:"clientSideEffects",persistenceEnabled:!1}).on(xt,(he,le)=>({...he,clientSideEffectsMap:le}));var Ce=e(814353),Ne=e(658336);const ze=(0,o.Ay)("Broadcast client theme state to other stores",(he,le,ye)=>{const De=he.getState(),rt=le(ye),Ye=he.getState(),kt=(0,c.getBootedWorkspaces)(Ye);return A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,Ne.to)(at),broadcastAction:at=>(0,Ce.yg)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,Ne.FW)(at),broadcastAction:at=>(0,Ce.kl)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,Ne.VD)(at),broadcastAction:at=>(0,Ce.LA)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,Ne.pg)(at),broadcastAction:at=>(0,Ce.Th)(at)}),rt});ze.meta={name:"createMiddleware",key:"createMiddlewarebroadcastClientThemeMiddleware",description:"Broadcast client theme state to other stores"};const Oe=ze;var Fe=e(117776),_t=e(745677),ft=e(343290),Ct=e(674217);const $t=(0,Ct.Ay)("Sets whether or not the sidebar is part of the grid layout at normal window sizes",(he,le,ye)=>{(0,O.q9)(ft.jG,ye),he((0,Fe.KY)(ye))});$t.meta={name:"createThunk",key:"createThunksetIsSidebarVisible",description:"Sets whether or not the sidebar is part of the grid layout at normal window sizes"};const rn=(0,Ct.Ay)("Set the user-specified sidebar width and mode",(he,le,ye)=>{let{sidebarWidthIntent:De,sidebarWidthMode:rt}=ye;(0,O.q9)(ft.ke,De),(0,O.q9)(ft.ts,rt),he((0,Fe.SP)({sidebarWidthIntent:De,sidebarWidthMode:rt}))});rn.meta={name:"createThunk",key:"createThunksetSidebarColumn",description:"Set the user-specified sidebar width and mode"};const un=(0,Ct.Ay)("Set the user-specified sidebar width and mode",(he,le,ye)=>{let{inspectorWidthIntent:De,inspectorWidthMode:rt}=ye;(0,O.q9)(ft.j0,De),(0,O.q9)(ft.mu,rt),he((0,Fe.lT)({inspectorWidthIntent:De,inspectorWidthMode:rt}))});un.meta={name:"createThunk",key:"createThunksetInspectorColumn",description:"Set the user-specified sidebar width and mode"};var hn=e(861173);const pn=(0,Ct.Ay)("Sets whether or not the user prefers a responsive sidebar",(he,le,ye)=>{(0,hn.A)(le())&&(0,O.q9)(ft.Lb,ye),he((0,Fe.iJ)(ye))});pn.meta={name:"createThunk",key:"createThunksetUserPrefersResponsiveSidebar",description:"Sets whether or not the user prefers a responsive sidebar"};const Tn=(0,o.Ay)("Broadcast client theme state to other stores",(he,le,ye)=>{const De=he.getState(),rt=le(ye),Ye=he.getState(),kt=(0,c.getBootedWorkspaces)(Ye);return A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>{var en,Nn;return`${at==null||(en=at.workspaceLayout)===null||en===void 0?void 0:en.sidebarWidthIntent}-${at==null||(Nn=at.workspaceLayout)===null||Nn===void 0?void 0:Nn.sidebarWidthMode}`},broadcastAction:at=>{const en=at.split("-");return rn({sidebarWidthIntent:Number(en[0]),sidebarWidthMode:en[1]})}}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,_t.Vo)(at),broadcastAction:at=>$t(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,_t.r8)(at),broadcastAction:at=>(0,Fe.vm)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,_t.xx)(at),broadcastAction:at=>pn(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>{var en,Nn;return`${at==null||(en=at.workspaceLayout)===null||en===void 0?void 0:en.inspectorWidthIntent}-${at==null||(Nn=at.workspaceLayout)===null||Nn===void 0?void 0:Nn.inspectorWidthMode}`},broadcastAction:at=>{const en=at.split("-");return un({inspectorWidthIntent:Number(en[0]),inspectorWidthMode:en[1]})}}),rt});Tn.meta={name:"createMiddleware",key:"createMiddlewarebroadcastWorkspaceLayoutMiddleware",description:"Broadcast client theme state to other stores"};const Qn=Tn;var zn=e(352863),Hn=e(689798),Kn=e(545878),os=e(422238),et=e(658381),Et=e(333279),we=e(923296),tt=e(269367);const Rt=(0,o.Ay)("Broadcast view layout state across all teams",(he,le,ye)=>{const De=he.getState(),rt=le(ye),Ye=he.getState(),kt=(0,c.getBootedWorkspaces)(Ye);return A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>{var en,Nn;return`${at==null||(en=at.viewLayout)===null||en===void 0?void 0:en.sidebarWidthIntent}-${at==null||(Nn=at.viewLayout)===null||Nn===void 0?void 0:Nn.sidebarWidthMode}`},broadcastAction:at=>{const en=at.split("-");return(0,et.R)({sidebarWidthIntent:Number(en[0]),sidebarWidthMode:en[1]})}}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>{var en,Nn;return`${at==null||(en=at.viewLayout)===null||en===void 0?void 0:en.sidebarWideWidthIntent}-${at==null||(Nn=at.viewLayout)===null||Nn===void 0?void 0:Nn.sidebarWideWidthMode}`},broadcastAction:at=>{const en=at.split("-");return(0,Et.q)({sidebarWideWidthIntent:Number(en[0]),sidebarWideWidthMode:en[1]})}}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>{var en,Nn;return`${at==null||(en=at.viewLayout)===null||en===void 0?void 0:en.sidebarExtraWideWidthIntent}-${at==null||(Nn=at.viewLayout)===null||Nn===void 0?void 0:Nn.sidebarExtraWideWidthMode}`},broadcastAction:at=>{const en=at.split("-");return(0,we.a)({sidebarExtraWideWidthIntent:Number(en[0]),sidebarExtraWideWidthMode:en[1]})}}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,zn.Vo)(at),broadcastAction:at=>(0,Kn.F)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,zn.v8)(at),broadcastAction:at=>(0,Hn.mV)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,zn.r8)(at),broadcastAction:at=>(0,os.v)(at)}),A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>{var en,Nn;return`${at==null||(en=at.viewLayout)===null||en===void 0?void 0:en.secondaryWidthIntent}-${at==null||(Nn=at.viewLayout)===null||Nn===void 0?void 0:Nn.secondaryWidthMode}`},broadcastAction:at=>{const en=at.split("-");return(0,tt.J)({secondaryWidthIntent:Number(en[0]),secondaryWidthMode:en[1]})}}),rt});Rt.meta={name:"createMiddleware",key:"createMiddlewarebroadcastViewLayoutMiddleware",description:"Broadcast view layout state across all teams"};const It=Rt;var Jt=e(180491),an=e(306166),Ft=e(264918),Vn=e(201288),Pt=e(966064),Xe=e(873002),Ze=e(654280),lt=e(612812),nt=e(904214),qe=e(282233),Kt=e(839716),ln=e(281061),_n=e(966528),Cn=e(607680),wn=e(515456),$n=e(852922),es=e(629452),ns=e(475711),jn=e(519543),ts=e(921055),Xn=e(113574),At=e(276265),b=e(18216),z=e(646464),me=e(437714),pe=e(204258),ct=e(798640),ut=e(388077),$e=e(715431),k=e(859790),se=e(883646),ge=e(913164),ot=e(565526);const nn=(0,Ct.Ay)("Resolve a pending huddle",(he,le,ye)=>(0,ot.A)().resolvePendingJoin(ye));nn.meta={name:"createThunk",key:"createThunkresolvePendingHuddle",description:"Resolve a pending huddle"};const qt=nn;var vn=e(566173),Ut=e(741323),Xt=e(628874),Sn=e(757263);const Yn=(0,Ct.Ay)("update client huddle membership timers join",(he,le)=>{const ye=le(),De=(0,M.Ay)({state:ye}),rt=(0,s.getStateForClientStore)(),Ye=(0,pe.Ak)(rt),kt=(0,Xt.Wg)(ye,{tip:ne.ml.Huddles});if(!Ye){De.warn(sn.o7,"no active huddle found, cannot update state to together or alone");return}const at=(0,Ut.Sx)(ye);if(at===0){(0,ot.A)().setAloneInHuddle();return}at>0&&(kt&&he((0,Sn._A)(!0)),(0,ot.A)().setOthersInHuddle(),he((0,vn.e)({clearOnEndedCallback:!0,logContext:"on-peer-joined"})))});Yn.meta={name:"createThunk",key:"createThunkupdateAloneOrTogetherInHuddle",description:"update client huddle membership timers join"};var Qe=e(612104),yt=e(296540),Ht=e(487335),it=e(389610),st=e(171403),gt=e(119110),Ue=e(166747),Bt=e(110010),zt=e(649098),En=e(881805),tn=e(197402),jt=e(533456),on=e(613769),In=e(708878),Pn=e(917780),cn=e(298559),Fn=e(528919),fs=e(437556),Un=e(246634),rs=e(426170);let Jn=l(class extends yt.PureComponent{static getDerivedStateFromProps(le,ye){return le.mediaStream!==ye.currentMediaStream?le.mediaStream&&ye.currentMediaStream&&le.mediaStream.id===ye.currentMediaStream.id?{currentMediaStream:le.mediaStream,isFlipped:le.isFlipped,isCurrentMediaStreamReady:!1,prevMediaStream:void 0}:{prevMediaStream:le.mediaStream?ye.currentMediaStream:void 0,currentMediaStream:le.mediaStream,isFlipped:le.isFlipped,wasFlipped:ye.isFlipped,isCurrentMediaStreamReady:!1}:null}componentDidMount(){this.setupMedia()}componentDidUpdate(){this.setupMedia()}componentWillUnmount(){const le=this.videoRef.current,ye=this.prevVideoRef.current;le&&(le.removeEventListener("canplay",this.onCanPlay),le.removeEventListener("pause",this.onPause),le.removeEventListener("resize",this.onResize)),ye&&(ye.removeEventListener("canplay",this.onCanPlay),ye.removeEventListener("pause",this.onPause),ye.removeEventListener("resize",this.onResize)),this.props.onVideoReady&&this.props.onVideoReady(!1)}onCanPlay(){const{currentMediaStream:le}=this.state,ye=le&&le.getVideoTracks()[0];this.isDataStopped&&ye&&ye.readyState==="live"&&(this.props.onVideoReady&&this.props.onVideoReady(!0),this.setState(()=>({isCurrentMediaStreamReady:!0})))}onPause(le){this.state.currentMediaStream&&le.target.srcObject instanceof MediaStream&&le.target.srcObject.id===this.state.currentMediaStream.id&&(this.props.onVideoReady&&this.props.onVideoReady(!1),this.isDataStopped=!0)}setupMedia(){const{currentMediaStream:le,prevMediaStream:ye}=this.state,De=this.videoRef.current,rt=this.prevVideoRef.current;De&&(De.muted=!0,De.srcObject!==le&&(De.addEventListener("canplay",this.onCanPlay),De.addEventListener("pause",this.onPause),De.addEventListener("resize",this.onResize),De.srcObject=le||null)),rt&&(rt.muted=!0,rt.srcObject!==ye&&(rt.removeEventListener("canplay",this.onCanPlay),rt.removeEventListener("pause",this.onPause),rt.removeEventListener("resize",this.onResize),rt.srcObject=ye||null))}onResize(){const le=this.videoRef.current;le&&(this.props.isSharingScreen?le.style.objectFit="contain":le.style.objectFit=le.videoWidth>le.videoHeight?"cover":"contain")}render(){const{className:le,isFlipped:ye,refToForward:De}=this.props,{currentMediaStream:rt,prevMediaStream:Ye,isCurrentMediaStreamReady:kt,wasFlipped:at}=this.state;return yt.createElement(yt.Fragment,null,!kt&&Ye&&yt.createElement("video",{key:Ye&&Ye.id,className:(0,Fn.A)("p-calls_video",le,{flipped:at}),ref:this.prevVideoRef,autoPlay:!0}),yt.createElement("video",{className:(0,Fn.A)("p-calls_video",le,{flipped:ye,hidden:!kt}),ref:(0,rs.P)(this.videoRef,De),autoPlay:!0,key:rt&&rt.id}))}constructor(le){super(le),this.prevVideoRef=yt.createRef(),this.videoRef=yt.createRef(),this.isDataStopped=!0,this.state={isCurrentMediaStreamReady:!1,isFlipped:!1,wasFlipped:!1},this.onCanPlay=this.onCanPlay.bind(this),this.onPause=this.onPause.bind(this),this.onResize=this.onResize.bind(this)}},"CallsOriginalVideoElement");Jn.displayName="CallsOriginalVideoElement";function is(){return is=Object.assign||function(he){for(var le=1;le<arguments.length;le++){var ye=arguments[le];for(var De in ye)Object.prototype.hasOwnProperty.call(ye,De)&&(he[De]=ye[De])}return he},is.apply(this,arguments)}l(is,"_extends");const Dn=l((he,le)=>{const ye=(0,Ft.JZ)(he,le.id);return{mediaStream:ye.mediaStream,isFlipped:(0,Ft.fy)(ye)&&!ye.isScreenshareEnabled,isSharingScreen:ye.isScreenshareEnabled}},"mapStateToProps"),us=(0,cn.N)(Dn)(Jn),Ln=yt.forwardRef((he,le)=>yt.createElement(us,is({},he,{refToForward:le})));var ss=e(177242),as=e(730563),_s=e(246673),ms=e(564863),cs=e(258008),As=e(170852),mt=e(532395),Ot=e(129822);function Lt(he,le){const ye=Math.min(le.width,le.height*he),De=Math.min(le.height,le.width/he);return{top:le.top+(le.height-De)/2,left:le.left+(le.width-ye)/2,width:ye,height:De}}l(Lt,"getLargestRectForAspectRatioCenteredWithinRect");let Gt=l(class extends yt.PureComponent{detectDifference(le,ye){return Math.abs(le-ye)>1}componentDidMount(){var le;(0,jt.tZ)("GUEST-DRAW-WINDOW").info("Guest draw window mounted"),(0,As.k)(mt.EventId.CALLS_GUEST_DRAW_ACTIVATED,{}),(le=this.context.windowRef.deref())===null||le===void 0||le.addEventListener("resize",this.onResize),(0,Ot.Z)(this.videoRef.current,"Expected videoRef to be bound after mounting")&&(this.props.addEventListeners&&this.props.addEventListeners(this.videoRef,this.onResize,!0),this.onResize(),this.resizeTimeout=window.setTimeout(()=>{this.onResize()},4e3),this.videoRef.current.dispatchEvent(new Event("resize")))}componentDidUpdate(le){let{isVideoReady:ye}=le;!ye&&this.props.isVideoReady&&this.onResize()}componentWillUnmount(){var le;this.props.removeEventListeners&&this.props.removeEventListeners(this.videoRef,this.onResize,!0),(le=this.context.windowRef.deref())===null||le===void 0||le.removeEventListener("resize",this.onResize),window.clearTimeout(this.resizeTimeout)}onResize(){if(!(0,Ot.Z)(this.videoRef.current,"Expected videoRef to be bound on resize"))return;const le=this.videoRef.current;!le||le.videoHeight===0||this.setState(()=>({videoRect:Lt(le.videoWidth/le.videoHeight,le.getBoundingClientRect())}))}render(){const le=yt.Children.only(this.props.children),ye=yt.cloneElement(le,{ref:(0,rs.N)(this.videoRef,le)});return yt.createElement(yt.Fragment,null,ye,this.state.videoRect&&yt.createElement(ms.u,{ref:this.drawRenderRef,isHidden:!this.props.isScreenShareEnabled,targetRect:this.state.videoRect}),this.props.isDrawEnabled&&this.state.videoRect&&yt.createElement(cs.o,{ref:this.drawTargetRef,targetRect:this.state.videoRect}))}constructor(le){super(le),this.videoRef=yt.createRef(),this.drawTargetRef=yt.createRef(),this.drawRenderRef=yt.createRef(),this.onResize=this.onResize.bind(this),this.state={}}},"GuestDraw");Gt.displayName="GuestDraw",Gt.contextType=Bt.M;const yn=l((he,le)=>{const ye=(0,Ft.gl)(he);if(!ye)throw Error("Guest draw should not be mounted without an active peer");const De=(0,Ft.JZ)(he,ye);return{isDrawEnabled:!!De.isScreenshareEnabled&&!!De.isDrawEnabled,isScreenShareEnabled:!!De.isScreenshareEnabled}},"guest_draw_mapStateToProps"),kn=(0,cn.N)(yn)(Gt),Rn={isVideoReady:!1};let Gn=l(class extends yt.PureComponent{onVideoReady(le){this.setState(ye=>({...ye,isVideoReady:le}))}renderVideo(){const{id:le,renderVideo:ye,tileId:De}=this.props;if(ye)return ye(this.isVideoEnabledAndReady());if(!le){(0,_s.M)("Cannot render video without a peer id");return}return yt.createElement(kn,{isVideoReady:this.state.isVideoReady},yt.createElement(Ln,{id:le,tileId:De,onVideoReady:this.onVideoReady,className:(0,Fn.A)({hidden:!this.state.isVideoReady})}))}renderImage(){const{isSpinning:le,prefCompliantUserName:ye,member:De}=this.props;return yt.createElement("div",{className:(0,Fn.A)({hidden:this.state.isVideoReady})},yt.createElement("div",{className:"p-active_speaker__member_image_wrapper"},yt.createElement(ss.Ay,{className:(0,Fn.A)({"p-active_speaker__member_image--spinning":le}),size:180,userId:De&&De.id,isInteractive:!1,tabIndex:-1}),le&&yt.createElement("div",{className:"p-active_speaker__member_image__spinner_wrapper"},yt.createElement(as.A,{color:"white"}))),yt.createElement("div",{className:"p-active_speaker__member_name"},ye))}isVideoEnabledAndReady(){const{isVideoEnabled:le,isVideoEnabledAndReady:ye}=this.props;return ye?ye(le):!!(le&&this.state.isVideoReady)}render(){const{isVideoEnabled:le}=this.props,ye=(0,Fn.A)("p-active_speaker",{"p-active_speaker--video_enabled":this.isVideoEnabledAndReady()});return yt.createElement("div",{"data-qa":"active-speaker",className:ye},le&&this.renderVideo(),!this.isVideoEnabledAndReady()&&this.renderImage())}constructor(le){super(le),this.state=Rn,this.onVideoReady=this.onVideoReady.bind(this)}},"ActiveSpeaker");Gn.displayName="ActiveSpeaker";function Zn(he,le){const ye=(0,fs.nv)(he,le),De=(0,Un.sE)(he,ye);return{member:ye,prefCompliantUserName:De}}l(Zn,"mapCommonMemberState");const ds=l((he,le)=>{const ye=(0,Ft.JZ)(he,le.id),De=ye.isCameraEnabled,rt=ye.isScreenshareEnabled,Ye=(0,Ft.fy)(ye)?(0,Xn.WR)(he):ye.userId;return{tileId:le.tileId,isVideoEnabled:De||rt,isSpinning:ye.isConnected===!1,...Zn(he,Ye)}},"active_speaker_mapStateToProps"),Ds=(0,cn.N)(ds)(Gn);var Js=e(924927);function Ks(){return Ks=Object.assign||function(he){for(var le=1;le<arguments.length;le++){var ye=arguments[le];for(var De in ye)Object.prototype.hasOwnProperty.call(ye,De)&&(he[De]=ye[De])}return he},Ks.apply(this,arguments)}l(Ks,"with_free_willy_guest_draw_extends");const Xs=l(he=>l(class extends yt.PureComponent{addEventListeners(ye,De,rt){ye.current&&(ye.current.addEventListener("canplay",De),rt&&ye.current.addEventListener("resize",De))}removeEventListeners(ye,De,rt){ye.current&&(ye.current.removeEventListener("canplay",De),rt&&ye.current.removeEventListener("resize",De))}render(){return yt.createElement(he,Ks({},this.props,{addEventListeners:this.addEventListeners,removeEventListeners:this.removeEventListeners}))}},"WithFreeWillyGuestDraw"),"withFreeWillyGuestDraw");Xs.displayName="withFreeWillyGuestDraw";const Vr=Xs;function no(){return no=Object.assign||function(he){for(var le=1;le<arguments.length;le++){var ye=arguments[le];for(var De in ye)Object.prototype.hasOwnProperty.call(ye,De)&&(he[De]=ye[De])}return he},no.apply(this,arguments)}l(no,"with_free_willy_active_speaker_extends");const jr=Vr(kn),go=l(he=>l(class extends yt.PureComponent{isVideoEnabledAndReady(ye){return ye}renderVideo(ye){const{id:De,tileId:rt}=this.props;if(!De){(0,_s.M)("Cannot render video without a peer id");return}return yt.createElement(jr,{isVideoReady:ye},yt.createElement(Js.A,{id:De,tileId:rt,shouldAttachStream:!0,"data-qa":"free-willy-peer-video-element"}))}render(){return yt.createElement(he,no({},this.props,{renderVideo:this.renderVideo,isVideoEnabledAndReady:this.isVideoEnabledAndReady}))}constructor(ye){super(ye),this.isVideoEnabledAndReady=this.isVideoEnabledAndReady.bind(this),this.renderVideo=this.renderVideo.bind(this)}},"WithFreeWillyActiveSpeaker"),"withFreeWillyActiveSpeaker");go.displayName="withFreeWillyActiveSpeaker";const Gr=go;var zr=e(463329),Qr=e(927675),Ao=e(420727),Yr=e(494643);const $r=new zt.Ay("huddles"),To=l(()=>{const he=(0,zr.wA)(),le=(0,Pn.d4)(De=>!!(0,Ft.WQ)(De,"isMicrophoneEnabled")),ye=(0,yt.useCallback)(()=>{he((0,Ao.A)(!le))},[le,he]);return yt.createElement("div",{className:"p-huddle_screen_viewer__mic_button_container"},yt.createElement(Qr.Ay,{className:(0,Fn.A)("p-huddle_screen_viewer__mic_button p-huddle_screen_viewer__mic_button--mute",{"p-huddle_screen_viewer__mic_button--active":le}),onClick:ye,type:"outline",role:"switch",size:"large","aria-label":$r.t("Microphone"),"aria-checked":le,disabled:!self},yt.createElement(Yr.A,{peerId:"self",isMicrophoneEnabled:le,allowMuteIconAnimation:!0})))},"HuddleScreenViewerMicButton");To.displayName="HuddleScreenViewerMicButton";const Jr=To,Xr=Gr(Ds),Zr=new zt.Ay("huddles");function Io(he){const{peerId:le,isError:ye}=he,De=(0,Pn.d4)(Ft.vz),rt=(0,Pn.d4)(Nn=>le?(0,Ft.JZ)(Nn,le):null);let Ye;if(De){var kt,at;Ye=rt!=null&&rt.isScreenshareEnabled?rt==null||(kt=rt.tileIds)===null||kt===void 0||(at=kt.screenshare)===null||at===void 0?void 0:at.tileId:null}const en=yt.createElement("span",{className:"p-huddle_screen_viewer__error"},Zr.t("The screen share has ended."));return yt.createElement("div",{className:"p-huddle_screen_viewer__container"},le&&!ye&&yt.createElement(Xr,{id:le,tileId:Ye}),ye?en:yt.createElement(Jr,null))}l(Io,"HuddleScreenViewer"),Io.displayName="HuddleScreenViewer";var qr=e(727201),ea=e(487044);const ps={childWindow:void 0,childWindowToken:void 0,container:void 0,containerTileId:void 0},ji=null,yo=new zt.Ay("huddles"),ta=l(he=>{var le;const ye=he==null||(le=he.document)===null||le===void 0?void 0:le.querySelectorAll(".p-huddle_screen_viewer__container"),De=ye?ye.length:0,rt=(0,jt.tZ)("SCREENSHARE-VIEWER-APP");De>1?rt.info("Multiple containers rendered in viewing window. Shared stream may be hidden from view."):rt.info(`${De} containers rendered in viewing window.`)},"logRenderedApplicationsCount"),Zs=l(()=>{const{container:he,childWindow:le}=ps;he&&(Ht.unmountComponentAtNode(he),ps.containerTileId=void 0,ps.container=void 0),le&&(le.removeEventListener("beforeunload",Zs),le.close(),ps.childWindow=void 0,ps.childWindowToken=void 0)},"closeScreenShareWindow"),na=(0,Ct.Ay)("Launch the window that renders screen share media",function(){var he=(0,Qe.coroutine)(function*(le,ye,De){var rt,Ye,kt;const at=ye(),en=(0,M.Ay)({state:at}),Nn=De!=null&&De.screenSharePeerId?De.screenSharePeerId:(0,Ft.vN)(at);let qn=!1;const{container:Is,containerTileId:dn}=ps;Nn||(en.warn(sn.o7,"lastRemoteScreensharePeerId is not found"),qn=!0);const bn=(0,Ft.JZ)(at,Nn||""),Bn=bn.userId?(0,Ue.I)(at,bn.userId):"";let ls=yo.t("Screen share");Bn&&(ls=yo.t("{memberName} screen share",{memberName:(0,zt.nr)(Bn)}));const Es={...on.P,backgroundColor:"black",title:ls,type:"huddle-call-screen-share"},vs=(0,s.getStateForClientStore)();(0,pe.Ak)(vs)||(en.warn(sn.o7,"no active huddle found"),qn=!0);const Cs=(bn==null||(rt=bn.tileIds)===null||rt===void 0||(Ye=rt.screenshare)===null||Ye===void 0?void 0:Ye.tileId)||0;(0,s.dispatchForClientStore)((0,Cn.cn)({tileId:Cs}))||(en.warn(sn.o7,"video tile does not have stream"),qn=!0);const bs=!ps.childWindow||ps.childWindow.closed;if(bs&&(0,gt.y3)()){const{window:xs,windowToken:Ys}=yield(0,st.wK)("",Es);ps.childWindow=xs,ps.childWindowToken=Ys}else bs&&(ps.childWindow=window.open("",ls,"toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=780,height=480")||void 0);if(!ps.childWindow){en.warn(sn.o7,"No child window available. Exiting screen share window launch");return}const Ps=(0,En.ZT)(at);ps.childWindow.document&&(ps.childWindow.document.body.style.background="black");const zs={windowRef:(0,ea.O)(ps.childWindow),windowToken:ps.childWindowToken};if(bs&&(ps.childWindow.addEventListener("beforeunload",Zs),window.addEventListener("beforeunload",Zs)),!(Is&&dn===Cs)||bs){ps.containerTileId=Cs;const xs=(0,s.getStoreInstanceByTeamId)(Ps);ps.container=yield(0,tn.s)(ps.childWindow,yt.createElement(qr.A,{store:xs},yt.createElement(Bt.M.Provider,{value:zs},yt.createElement(In.A,{shouldStopHuddle:!0},yt.createElement(Io,{peerId:Nn,isError:qn})))),{useContainer:!0})}const Qs=(kt=ps.childWindow)===null||kt===void 0?void 0:kt.browserWindowId;Qs?(0,a.hN0)(Qs):(0,it.A)(ps.childWindow.focus)&&ps.childWindow.focus(),ta(ps.childWindow)});return function(le,ye,De){return he.apply(this,arguments)}}());na.meta={name:"createThunk",key:"createThunklaunchScreenShareWindow",description:"Launch the window that renders screen share media"};var Mo=e(3704),sa=e(99194);const Co=(0,Ct.Ay)("alerts if a user joins the huddle and the current user has hidden that user",(he,le,ye)=>{let{userId:De}=ye;const rt=le();(0,sa.a)(rt,De)&&he((0,nt.Iw)(nt.vT.HiddenUserJoinedHuddle))});Co.meta={name:"createThunk",key:"createThunkmaybeAlertHiddenUserJoinedHuddle",description:"alerts if a user joins the huddle and the current user has hidden that user"};var Oo=e(178249),Do=e(890401),So=e(348455),qs=e(462787),oa=e(240449),ra=e(492630),ws=e(179768),so=e(349799),Po=e(926017);const Ro=(0,Ct.Ay)("Send call analytics to the server",(he,le,ye)=>{const De=le().activeCall;let rt;if(ye&&ye.callId?rt=ye.callId:De&&De.id&&(rt=De.id),!rt){(0,_s.M)("There should be an active call in progress in order to send analytics.");return}const Ye=aa(new Po.$.calls.analytics.Report(ye.stats),le()),kt=Po.$.calls.analytics.Report.encode(Ye).finish(),at=String.fromCharCode(...kt);return he((0,so.apiCall)({method:"screenhero.rooms.postAnalytics",args:{room:rt,analytics:btoa(at)},reason:"calls-analytics"}))});Ro.meta={name:"createThunk",key:"createThunksendAnalytics",description:"Send call analytics to the server"};function aa(he,le){const ye=he;return ye.recv=he.recv.map(De=>{if(De.peerId){const rt=(0,Ft.C1)(le,De.peerId);if(rt){const Ye=De;Ye.userId=rt.userId}}if(De.peerIdString){const rt=(0,Ft.C1)(le,De.peerIdString);if(rt){const Ye=De;Ye.userId=rt.userId}}return De}),ye.recv=ye.recv.filter(De=>!!De.userId),he}l(aa,"mapPeerIdsToUserIds");var ia=e(144473),Lo=e(838426),la=e(638819),Hs=e(69938);const ca=(0,M.Wo)({label:"SEND-MEETING-EVENTS-LOGGER"}),bo="screenhero.rooms.proxyMeetingEvents",Uo=(0,Ct.Ay)("Send meeting events to the server",function(){var he=(0,Qe.coroutine)(function*(le,ye,De){let rt;try{rt=JSON.stringify(De.events)}catch(en){ca.error(en.message);return}const{metrics:Ye,teamId:kt}=da();if(De.isUnloading){const en={app:De.app,meeting_id:De.meetingId,media_region:De.mediaRegion,attendee_id:De.attendeeId,call_id:De.callId,ua:window.navigator.userAgent,event_type:"calls-chime-events",encoding:"none",events:rt,preferred_media_region:yield lt.A.getInstance().getNearestChimeMediaRegion(kt),audio_connected_time:(Ye==null?void 0:Ye.audioConnectedTime)||0,first_presence_time:(Ye==null?void 0:Ye.firstPresenceTime)||0,rooms_join_time:(Ye==null?void 0:Ye.roomsJoinTime)||0,sdk_initialized_time:(Ye==null?void 0:Ye.sdkInitializedTime)||0,chime_attendee_presence_time:De.attendeePresenceDuration?De.attendeePresenceDuration:(Ye==null?void 0:Ye.attendeePresenceDuration)||0,chime_meeting_start_time:De.meetingStartDuration?De.meetingStartDuration:(Ye==null?void 0:Ye.meetingStartDuration)||0,chime_signaling_open_time:De.signalingOpenDuration?De.signalingOpenDuration:(Ye==null?void 0:Ye.signalingOpenDuration)||0,chime_ice_gathering_time:De.iceGatheringDuration?De.iceGatheringDuration:(Ye==null?void 0:Ye.iceGatheringDuration)||0,voice_focus_init_time:(Ye==null?void 0:Ye.voiceFocusInitializedTime)||0,creds_to_voice_focus_init_time:(Ye==null?void 0:Ye.credentialsToVoiceFocusInitializedTime)||0};return(0,ia.A)({apiUrl:"/api/",method:bo,token:(0,la.F)(ye()),versionTs:(0,Lo.HF)(),versionUid:(0,Lo.X3)(),args:en})?Jt.S.resolve():Jt.S.reject(new Error("sendMeetingEvents: beacon failed"))}const at=De.isEnding?{app:De.app,meeting_id:De.meetingId,media_region:De.mediaRegion,attendee_id:De.attendeeId,events:rt,call_id:De.callId,preferred_media_region:yield lt.A.getInstance().getNearestChimeMediaRegion(kt),audio_connected_time:(Ye==null?void 0:Ye.audioConnectedTime)||0,first_presence_time:(Ye==null?void 0:Ye.firstPresenceTime)||0,rooms_join_time:(Ye==null?void 0:Ye.roomsJoinTime)||0,sdk_initialized_time:(Ye==null?void 0:Ye.sdkInitializedTime)||0,chime_attendee_presence_time:De.attendeePresenceDuration?De.attendeePresenceDuration:(Ye==null?void 0:Ye.attendeePresenceDuration)||0,chime_meeting_start_time:De.meetingStartDuration?De.meetingStartDuration:(Ye==null?void 0:Ye.meetingStartDuration)||0,chime_signaling_open_time:De.signalingOpenDuration?De.signalingOpenDuration:(Ye==null?void 0:Ye.signalingOpenDuration)||0,chime_ice_gathering_time:De.iceGatheringDuration?De.iceGatheringDuration:(Ye==null?void 0:Ye.iceGatheringDuration)||0,voice_focus_init_time:(Ye==null?void 0:Ye.voiceFocusInitializedTime)||0,creds_to_voice_focus_init_time:(Ye==null?void 0:Ye.credentialsToVoiceFocusInitializedTime)||0}:{app:De.app,meeting_id:De.meetingId,media_region:De.mediaRegion,attendee_id:De.attendeeId,events:rt,call_id:De.callId};return le((0,so.apiCall)({method:bo,args:at,reason:"calls-chime-events"}))});return function(le,ye,De){return he.apply(this,arguments)}}());Uo.meta={name:"createThunk",key:"createThunksendMeetingEvents",description:"Send meeting events to the server"};function da(){const he=(0,s.getStateForClientStore)(),{teamId:le}=(0,pe.Qn)(he)||{};return{metrics:(0,Hs.s2)(),teamId:le}}l(da,"getCallMetricsAndTeamId");var ko=e(566401);const ua=(0,M.Wo)({label:"HANDLE-MEETING-EVENTS-LOGGER"}),No=(0,Ct.Ay)("Handle Chime meeting events",(he,le,ye)=>{let{events:De,callId:rt,meetingId:Ye,mediaRegion:kt,attendeeId:at,isUnloading:en,isEnding:Nn}=ye;const qn=_a(De);!(0,ko.A)(qn)&&!en&&!Nn&&(0,Hs.jm)(qn),he(Uo({events:De,app:"huddles",callId:rt,meetingId:Ye,mediaRegion:kt,attendeeId:at,isUnloading:en,isEnding:Nn,attendeePresenceDuration:qn.attendeePresenceDuration,signalingOpenDuration:qn.signalingOpenDuration,iceGatheringDuration:qn.iceGatheringDuration,meetingStartDuration:qn.meetingStartDuration}))});No.meta={name:"createThunk",key:"createThunkhandleMeetingEvents",description:"Handle Chime meeting events"};function _a(he){const le={};return he.forEach(ye=>{let{message:De}=ye;try{const en=JSON.parse(De);switch(en.name){case"attendeePresenceReceived":var rt;le.attendeePresenceDuration=(rt=en.attributes)===null||rt===void 0?void 0:rt.attendeePresenceDurationMs;break;case"meetingStartSucceeded":var Ye,kt,at;le.signalingOpenDuration=(Ye=en.attributes)===null||Ye===void 0?void 0:Ye.signalingOpenDurationMs,le.iceGatheringDuration=(kt=en.attributes)===null||kt===void 0?void 0:kt.iceGatheringDurationMs,le.meetingStartDuration=(at=en.attributes)===null||at===void 0?void 0:at.meetingStartDurationMs;break;default:break}}catch(en){ua.error("Invalid JSON in meeting event",en)}}),le}l(_a,"parseMeetingEventMetrics");const ma=No;var Ss=e(896486),ha=e(845375);const Bo=(0,Ct.Ay)("Process AWS transcript event",(he,le,ye)=>{var De;if((0,ut.VW)(ye))return;const rt=ye.results[0];if(!(rt!=null&&rt.resultId)||!(0,ha.TP)(le()))return;const Ye=(De=rt.alternatives[0])===null||De===void 0?void 0:De.items;if(!(Ye!=null&&Ye.length)){he((0,Ss.h2)({resultId:rt.resultId,transcriptions:[]}));return}const kt=[];Ye.forEach(at=>{var en;const Nn=kt[kt.length-1],qn=(0,So.l)((en=at.attendee)===null||en===void 0?void 0:en.externalUserId);qn&&(at.type===ut.E9.PUNCTUATION?Nn&&(Nn.content=`${Nn.content}${at.content}`,Nn.endTimeMs=at.endTimeMs):kt.push({memberId:qn,timestampMs:at.startTimeMs,endTimeMs:at.endTimeMs||Date.now(),content:at.content}))}),he((0,Ss.h2)({resultId:rt.resultId,transcriptions:kt}))});Bo.meta={name:"createThunk",key:"createThunkprocessAwsTranscription",description:"Process AWS transcript event"};const Ea=Bo;var ks=e(84484),va=e(244148);const Wo=(0,Ct.Ay)("Maybe disable the screen share",function(){var he=(0,Qe.coroutine)(function*(le,ye){const De=(0,jt.tZ)("CALLS-REDUX");ye().peers.self.isScreenshareEnabled&&(De.info("Attempted to turn off screen sharing"),le((0,Ft.kT)({id:"self",isScreenshareEnabled:!1,selectedScreenId:void 0}))),(0,va.a)()});return function(le,ye){return he.apply(this,arguments)}}());Wo.meta={name:"createThunk",key:"createThunkdisableScreenShareIfEnabled",description:"Maybe disable the screen share"};var xo=e(8684),fa=e(166433),pa=e(134309),Ns=e(550521);let ga=l(class{onPeerMuted(le,ye){this.dispatch((0,Ft.kT)({id:le,isMicrophoneEnabled:!ye}))}onPeerJoined(le,ye){if(this.maybeRecordFirstPresenceTime(),ye&&le){this.dispatch((0,Ft.Uu)({id:le,userId:ye,isMicrophoneEnabled:!0})),this.dispatch(Yn());const De=(0,Ft.Ng)(this.store.getState());(0,s.dispatchForClientStore)((0,Tt.Rr)({isDrawEnabled:De.isDrawEnabled||!1})),this.dispatch((0,Ss.U$)({type:ks.v.JOIN,memberId:ye,timestampMs:Date.now()})),this.maybeRemoveUserAsPending(ye),this.dispatch(Co({userId:ye}))}}onPeerLeft(le){var ye;const De=(ye=(0,Ft.jB)(this.store.getState(),le))===null||ye===void 0?void 0:ye.userId;De&&(this.callLogger.info(`Peer left the huddle. userId=${De} peerId=${le}`),this.dispatch((0,Ss.U$)({type:ks.v.LEAVE,memberId:De,timestampMs:Date.now()}))),this.dispatch((0,Ft.xx)(le)),this.dispatch(Yn())}onSelfJoined(){const le=this.recordTiming(wt.qK);this.maybeRecordFirstPresenceTime(),this.dispatch(qt(le))}onSelfLeft(){this.dispatch((0,nt.LL)(ge.vT.HiddenUserJoinedHuddle))}onNewActiveSpeaker(le){this.dispatch((0,Ft.FX)(le))}onPeerReacji(le,ye,De,rt){var Ye;this.dispatch((0,Ft._x)({peerId:le,emoji:ye,isEmoji:De,reactionType:rt}));const kt=(Ye=(0,Ft.jB)(this.store.getState(),le))===null||Ye===void 0?void 0:Ye.userId;kt&&this.dispatch((0,Ss.U$)({type:ks.v.SEND_REACTION,memberId:kt,timestampMs:Date.now(),emoji:ye}))}onPeerMuteRequest(le,ye){ye===this.selfAttendeeId&&(this.dispatch((0,Ao.A)(!1)),this.dispatch((0,ge.CE)({alert:ge.vT.PeerMuteRequest,peerId:le})),this.callLogger.info(`Peer muted self microphone : peerId:${le}`))}onError(le,ye){let De;ye===ut.b9[ut.b9.AudioJoinedFromAnotherDevice]?De=Mo.M6.AudioJoinedFromAnotherDevice:ye===ut.b9[ut.b9.MeetingEnded]&&(De=Mo.M6.ChimeMeetingEnded),this.dispatch((0,se.A)({terminalState:De||le})),this.callLogger.info(`tearDown executed: terminalState: ${le}, statusCodeName: ${ye} tearDownState: ${De}`)}onClogError(le){}onMeetingSessionInitialized(){this.recordTiming(wt.W_);const le=(0,mn.Cy)({state:this.store.getState()}),ye=le.measure(wt.Bq,wt.CY);le.count(wt.CY,ye),(0,Hs.jm)({sdkInitializedTime:ye})}onSelfPermissionUpdated(le,ye){this.callLogger.info(`Received permission update from type:${ye}, isDenied: ${le}`);let De;(0,gt.y3)()?De=ye===ns.lW.Microphone?ge.vT.NoSystemAudio:ge.vT.NoSystemVideo:De=ye===ns.lW.Microphone?ge.vT.NoBrowserAudioPermission:ge.vT.NoBrowserVideoPermission,le?this.dispatch((0,ge.CE)({alert:De})):this.dispatch((0,ge.Gu)(De))}onSelfVideoTileUpdate(le){if(!le.tileId)return;const ye=(0,Ft.Ng)(this.getState());if(!le.isContent&&!ye.isCameraEnabled)return;if(!(0,Ft.vz)(this.getState()))this.dispatch((0,Ss.U$)({type:ks.v.SCREENSHARE_START,memberId:(0,Xn.WR)(this.getState()),timestampMs:Date.now()})),this.dispatch((0,Ft.kT)({id:"self",tileId:le.tileId,isScreenshareEnabled:!!le.isContent}));else if(le.isContent){var rt,Ye;this.dispatch((0,Ss.U$)({type:ks.v.SCREENSHARE_START,memberId:(0,Xn.WR)(this.getState()),timestampMs:Date.now()}));const kt=(0,Ft.JC)(this.getState());((rt=ye.tileIds)===null||rt===void 0||(Ye=rt.screenshare)===null||Ye===void 0?void 0:Ye.tileId)!==le.tileId&&kt!==z.cM.Screenshare&&this.dispatch((0,xo.x)({peerId:"self",contentViewType:z.cM.None,contentViewConfig:{}})),this.dispatch((0,Ft.kT)({id:"self",tileId:le.tileId,isScreenshareEnabled:!!le.isContent}))}else this.dispatch((0,Ft.kT)({id:"self",tileId:le.tileId,isCameraEnabled:!0}))}onPeerVideoTileUpdate(le,ye){if(!ye.tileId)return;const De=ye.boundExternalUserId&&(0,So.l)(ye.boundExternalUserId);ye.isContent&&De&&(this.callLogger.info(`Peer screenshare started: userId=${De}`),this.dispatch((0,Ss.U$)({type:ks.v.SCREENSHARE_START,memberId:De,timestampMs:Date.now()}))),this.dispatch((0,Ft.BD)({id:le,tileId:ye.tileId,isContent:ye.isContent,isPaused:ye.paused}))}onVideoTileRemoved(le){var ye,De;const rt=this.store.getState(),Ye=(0,Ft.v2)(rt,le);Ye&&(this.callLogger.info(`Peer screenshare stopped: userId=${Ye}`),this.dispatch((0,Ss.U$)({type:ks.v.SCREENSHARE_STOP,memberId:Ye,timestampMs:Date.now()}))),this.dispatch((0,Ft.Qr)({tileId:le})),Zs();const kt=(0,Ft.Ng)(rt);((ye=kt.tileIds)===null||ye===void 0||(De=ye.screenshare)===null||De===void 0?void 0:De.tileId)===le&&kt.contentViewType===z.cM.Screenshare&&this.dispatch((0,xo.x)({peerId:"self",contentViewType:z.cM.None,contentViewConfig:{}}))}onVideoTileWillPause(le){this.dispatch((0,Ft.K3)({tileId:le}))}onVideoTileWillUnpause(le){this.dispatch((0,Ft.XS)({tileId:le}))}onDeviceAccessApproved(le){switch(le){case jn.mT.MICROPHONE:{(0,gt.y3)()?(this.dispatch((0,ge.Gu)(ge.vT.NoSystemAudio)),this.dispatch((0,Kt.er)())):(this.dispatch((0,ge.Gu)(ge.vT.NoBrowserAudioPermission)),this.dispatch((0,Kt.ZY)()));break}case jn.mT.CAMERA:{(0,gt.y3)()?(this.dispatch((0,ge.Gu)(ge.vT.NoSystemVideo)),this.dispatch((0,Kt.NH)())):(this.dispatch((0,ge.Gu)(ge.vT.NoBrowserVideoPermission)),this.dispatch((0,Kt.in)()));break}default:}}onCheckSystemMediaAccess(le){switch(le){case jn.mT.MICROPHONE:{this.dispatch((0,Kt.tG)()),this.dispatch((0,ge.CE)({alert:ge.vT.NoSystemAudio}));break}case jn.mT.CAMERA:{this.dispatch((0,Kt.Yr)()),this.dispatch((0,ge.CE)({alert:ge.vT.NoSystemVideo}));break}case jn.mT.SCREEN:{this.dispatch((0,Kt.J3)()),this.dispatch((0,ge.CE)({alert:ge.vT.NoSystemScreenShare}));break}default:}}onBrowserMediaDeviceAccessDenied(le){switch(this.callLogger.error(`Self ${le} device access denied`),le){case jn.mT.MICROPHONE:{this.dispatch((0,Kt.cH)()),this.dispatch((0,ge.CE)({alert:ge.vT.NoBrowserAudioPermission}));break}case jn.mT.CAMERA:{this.dispatch((0,Kt.px)()),this.dispatch((0,ge.CE)({alert:ge.vT.NoBrowserVideoPermission}));break}default:}}onStartSessionTimeout(){}onSetNoMediaInput(le){switch(le){case jn.mT.MICROPHONE:{this.dispatch((0,ge.CE)({alert:ge.vT.NoUserAudioStream}));break}case jn.mT.CAMERA:{const ye=(0,fa.ly)(this.getState());if((0,s.dispatchForClientStore)((0,Tt.WM)({setVideoEnabled:!1})),!(0,gt.y3)()&&ye)break;this.dispatch((0,ge.CE)({alert:ge.vT.NoUserVideoStream}));break}default:}}onClearNoMediaInput(le){switch(le){case jn.mT.MICROPHONE:{this.dispatch((0,ge.Gu)(ge.vT.NoUserAudioStream));break}case jn.mT.CAMERA:{this.dispatch((0,ge.Gu)(ge.vT.NoUserVideoStream));break}default:}}onSetNoAudioOutput(le){switch(le){case jn.NS.AUDIO_ELEMENT_ERROR:{this.dispatch((0,ge.CE)({alert:ge.vT.NoAudioOutputAudioElementError}));break}case jn.NS.AUDIO_LEVEL_ERROR:{this.dispatch((0,ge.CE)({alert:ge.vT.NoAudioOutputAudioLevelError}));break}default:}}onClearNoAudioOutput(le){switch(le){case jn.NS.AUDIO_ELEMENT_ERROR:{this.dispatch((0,ge.Gu)(ge.vT.NoAudioOutputAudioElementError));break}case jn.NS.AUDIO_LEVEL_ERROR:{this.dispatch((0,ge.Gu)(ge.vT.NoAudioOutputAudioLevelError));break}default:}}onSelfConnected(){this.callLogger.info("Self connected to chime media server"),this.dispatch((0,Ft.kT)({id:"self",isConnected:!0,noInternet:!1}))}onSelfDisconnected(){this.callLogger.info("Self disconnected from chime media server"),this.dispatch((0,Ft.kT)({id:"self",isConnected:!1})),Ns.A.publish({type:k.lx.NetworkDisconnect,update:{peerId:"self"}})}onSelfConnectionQualityChanged(le,ye){this.callLogger.info(`${le} audio packet loss changed to: ${ye}`)}onPeerConnected(le){this.dispatch((0,Ft.E3)({id:le,isConnected:!0}))}onPeerDisconnected(le){this.callLogger.info(`peer disconnected from chime media server ${le}`),this.dispatch((0,Ft.E3)({id:le,isConnected:!1}))}onPeerConnectionQualityChanged(le,ye,De){}onSelfMediaStreamChanged(le){}onNewPeerMediaStream(le,ye){}onScreenThumbnails(le){}onUpdatedSelfAudioLevel(le){qs.A.publish("self",le/ws.Ep),oa.A.publish(le/ws.Ep);const ye=this.store.getState();(0,qe.lV)(ye)&&qs.A.publishAll("self",le/ws.Ep)}onUpdatedPeerAudioLevels(le){const ye=this.store.getState();Object.entries(le).forEach(rt=>{let[Ye,kt]=rt;qs.A.publish(Ye,kt/ws.Ep)}),(0,qe.lV)(ye)&&Object.entries(le).forEach(rt=>{let[Ye,kt]=rt;qs.A.publishAll(Ye,kt/ws.Ep)})}onPeerCameraActive(le,ye){const De=le==="self";this.callLogger.info(`${De?"Self":`Peer (${le})`} camera turned ${ye?"on":"off"}`),this.dispatch((0,Ft.kT)({id:le,isCameraEnabled:ye}))}onPeerScreenShareActive(le,ye){const De=le==="self";this.callLogger.info(`${De?"Self":`Peer (${le})`} screenshare ${ye?"started":"stopped"}`)}onPeerDrawMessage(le,ye){_n.A.publish({id:le,...ye})}onPeerDrawEnabled(le,ye){this.dispatch((0,Ft.kT)({id:le,isDrawEnabled:ye}))}onMediaStats(le,ye){this.dispatch(Ro({stats:le,callId:ye}))}onAppMetrics(le){let{appMetrics:ye,clientMetricReport:De,screenshareRtcStats:rt}=le;const Ye=(0,$e.Ay)({state:this.getState(),appMetrics:ye});Ns.A.publish({type:k.lx.AppMetrics,update:{huddleStateSnapshot:Ye,clientMetricReport:De,screenshareRtcStats:rt}})}onDevicesUpdated(le){this.dispatch((0,Kt.Fb)(le))}onOutputDeviceChanged(le){this.callLogger.info(`Self audio output device changed: device: ${le.id}`),this.dispatch((0,Kt.AS)(le))}onDeviceTypeBlocked(le){}onTokenRefreshRequest(){}onScreenShareStopped(){this.dispatch(Wo()),this.dispatch((0,Oo.H)({focusKey:Do.Ay.HUDDLE_SIDEBAR_FOOTER}))}onScreenShareStarted(){this.callLogger.info("Self screenshare started"),this.dispatch((0,Oo.H)({focusKey:Do.Ay.HUDDLE_SIDEBAR_FOOTER}))}onSetNoOrLowInputAudioLevel(){Ns.A.publish({type:k.lx.NoAudio,update:{direction:"send",noAudio:!0}})}onClearNoOrLowInputAudioLevel(){Ns.A.publish({type:k.lx.NoAudio,update:{direction:"send",noAudio:!1}})}onSetNoOrLowOutputAudioLevel(){Ns.A.publish({type:k.lx.NoAudio,update:{direction:"recv",noAudio:!0}})}onClearNoOrLowOutputAudioLevel(){Ns.A.publish({type:k.lx.NoAudio,update:{direction:"recv",noAudio:!1}})}onAudioVideoDidStartConnecting(){this.recordTiming(wt.dk)}onStart(){this.recordTiming(wt.Nh)}onAudioVideoDidStart(){this.recordTiming(wt.ck),(0,s.dispatchForClientStore)((0,Tt._U)(Date.now()))}onAudioVideoDidStop(){const le=(0,s.getClientStoreInstance)(),ye=(0,pe.cN)(le==null?void 0:le.getState()),De=Date.now(),rt=De-ye;(0,s.dispatchForClientStore)((0,Tt.bV)(De)),(0,s.dispatchForClientStore)((0,Tt.qr)(rt))}onInit(){this.recordTiming(wt.cP)}onVoiceFocusLoaded(){const le=(0,mn.Cy)({state:this.store.getState()}),ye=le.measure(wt.aN,wt.pz);le.count(wt.pz,ye),this.recordTiming(wt.qb)}onVoiceFocusStartLoading(){(0,mn.Cy)({state:this.store.getState()}).mark(wt.aN)}recordTiming(le){const ye=(0,mn.Cy)({state:this.store.getState()}),De=ye.measure(wt.qr,le);return ye.count(le,De),De}onMeetingEvents(le,ye,De,rt,Ye,kt,at){this.dispatch(ma({events:Ye,callId:rt,meetingId:le,mediaRegion:ye,attendeeId:De,isUnloading:kt,isEnding:at}))}onMaybeVoiceFocusInitialized(le){const De=(0,mn.Cy)({state:this.store.getState()}).measure(wt.Bq,wt.bv);(0,Hs.jm)({voiceFocusInitializedTime:le,credentialsToVoiceFocusInitializedTime:De})}onScreenShareError(le){switch(this.callLogger.error(`an error occurred while initiating a screenshare: type: ${le}`),le){case jn.lD.NOT_FOUND_ERROR:{this.dispatch((0,ge.CE)({alert:ge.vT.SSNotFoundError}));break}case jn.lD.NOT_READABLE_ERROR:{this.dispatch((0,ge.CE)({alert:ge.vT.SSNotReadableError}));break}case jn.lD.ERROR:{this.dispatch((0,ge.CE)({alert:ge.vT.ScreenShareError}));break}default:break}}onNoiseSuppressionCPUThrottled(){this.dispatch((0,ge.CE)({alert:ge.vT.NoiseSuppressionCPUThrottled}))}onTranscriptionEvent(le){this.dispatch(Ea(le))}setSelfAttendeeId(le){this.selfAttendeeId=le}maybeRecordFirstPresenceTime(){this.firstPresenceTimeMs>0||(this.firstPresenceTimeMs=this.recordTiming(wt.dP),(0,Hs.jm)({firstPresenceTime:this.firstPresenceTimeMs}))}onAudioInputTrackMuted(){this.dispatch((0,ge.CE)({alert:ge.vT.AudioInputTrackMuted}))}onAudioInputTrackUnMuted(){this.dispatch((0,ge.Gu)(ge.vT.AudioInputTrackMuted))}onJukeboxRequest(le){if(!(0,qe.lV)(this.getState()))return;const De=this.isDj(),Ye=(0,pa.Rl)(this.getState())[le];!De||!Ye||((0,s.dispatchForClientStore)((0,Tt.bk)({song:Ye})),(0,s.dispatchForClientStore)((0,Tt._u)({song:Ye})),(0,s.dispatchForClientStore)((0,Tt.WY)(Ye)))}onJukeboxStopRequest(){!(0,qe.lV)(this.getState())||!this.isDj()||((0,s.dispatchForClientStore)((0,Tt.JM)()),(0,s.dispatchForClientStore)((0,Tt._u)({song:void 0})))}isDj(){var le;const ye=(0,Xn.WR)(this.getState()),De=(0,s.getClientStoreInstance)(),rt=(le=(0,pe.Qn)(De==null?void 0:De.getState()))===null||le===void 0?void 0:le.callId,Ye=(0,b.gV)(this.getState(),{callId:rt}),kt=(0,b.gV)(this.getState(),{callId:rt,userId:ye});return!Ye||!!kt}maybeRemoveUserAsPending(le){const ye=(0,s.getClientStoreInstance)(),De=(0,pe.E9)(ye==null?void 0:ye.getState());De&&this.dispatch((0,ra.r_)({callId:De,userId:le}))}onContentShareDetailsUpdate(le,ye,De){this.dispatch((0,Ft.kT)({id:le,isDrawEnabled:ye,contentShareSource:De}))}constructor(le){this.firstPresenceTimeMs=0,this.callLogger=(0,jt.Jt)("HUDDLE-DISPATCHER"),this.selfAttendeeId=void 0,this.dispatch=le.dispatch,this.getState=le.getState,this.store=le}},"HuddleActionDispatcher");var Fo=e(124748),Ko=e(748022),wo=e(420097),oo=e(399667),Ho=e(135713);function Aa(he){switch((0,Ho._Z)(he,"calls_transport_type")){case"udp":return["udp"];case"tls":return["tls"];case"tcp_tls":return["tcp","tls"];case"udp_tls":return["udp","tls"];case"disabled":default:return["udp","tcp","tls"]}}l(Aa,"getAllowedTurnTransportTypes");const Vo=(0,M.Wo)({label:"HUDDLE-INIT-OPTIONS"}),Ta=l((he,le)=>{let{server:ye,isPrejoin:De}=le;if(!he){Vo.error("teamState is not defined. Returning empty init options");return}const rt={};return rt.serverConfig={...ye,transportProtocols:Aa(he)},rt.isPrejoin=De,rt.useChimeSdkExp=(0,oo.OV)(he),rt.useDeviceManagerV2=(0,qe.Mv)(he),rt.useH264BaselineScreenshare=(0,oo.OV)(he)&&(0,qe.RM)(he),rt.useH264Baseline=(0,oo.OV)(he)&&(0,qe.er)(he),rt.useAv1Screenshare=(0,qe.Cu)(he),rt.huddlesJukeboxEnabled=(0,qe.lV)(he),rt.disableAudioRedundancy=(0,qe.JQ)(he),rt.useSimulcast=!1,rt.usePriorityDownlinkPolicy=(0,gt.gm)()?!1:(0,qe.bw)(he),rt.useGetMediaAccessCheckForWindows=(0,qe.jP)(he),rt.enableExperimentalConnectionHealthPolicyConfig=(0,qe.bb)(he),rt.voiceFocusMaxModelsEnabled=(0,qe.Hh)(he),rt.disableVp9=(0,qe.lH)(he),Vo.info("returning init options: ",rt),rt},"getSdkInitOptions");var Ia=e(199207);let Wt,ro,Rs;const ya="HUDDLE-SDK",Ma="HUDDLE-CLIENT-MIDDLEWARE",Ms=(0,M.Wo)({label:Ma}),jo=l(he=>{he.id==="self"&&(Wt==null||Wt.sendDrawMessage(he))},"onPeerDrawPublish");function ao(he,le,ye,De){const rt=(0,pe.E9)(he),Ye=(0,pe.l4)(he),kt=Ye?(0,s.getStoreInstanceByTeamId)(Ye):void 0,at=kt?kt.getState():void 0,en=at?(0,Xn.WR)(at):void 0;rt&&en&&(kt==null||kt.dispatch(le({user:en,channel:rt,fieldValue:ye,experimentHuddlesMultiDeviceGroupOn:De})))}l(ao,"maybeDispatchAwarenessUpdate");function Vs(he,le,ye){const De=(0,pe.E9)(he),rt=(0,pe.l4)(he),Ye=rt?(0,s.getStoreInstanceByTeamId)(rt):void 0,kt=Ye?Ye.getState():void 0,at=kt?(0,Xn.WR)(kt):void 0;De&&at&&(Ye==null||Ye.dispatch(le({user:at,channel:De,experimentHuddlesMultiDeviceGroupOn:ye})))}l(Vs,"maybeDispatchAwarenessRemove");const Go=(0,o.Ay)("dispatches actions to huddles SDK",(he,le,ye)=>{const De=he.getState(),rt=l(()=>{const dn=(0,pe.l4)(De),bn=(0,s.getStoreInstanceByTeamId)(dn);if(!bn)return{};const Bn=bn==null?void 0:bn.getState();if(!Bn)return{};const ls=(0,Ft.Ng)(Bn)||{};return{huddlesVideoActive:(0,Ft.vz)(Bn),self:ls}},"getIsHuddlesVideoActive");switch(ye.type){case Tt.kn.getType():{var Ye;const dn=ye.payload;ro=dn==null||(Ye=dn.audioOutputRef)===null||Ye===void 0?void 0:Ye.current,lt.A.getInstance().init();break}case Tt.Sd.getType():{const{huddlesVideoActive:dn,self:bn}=rt();Wt&&Wt.hasSession()&&(dn?Wt.selfVideoEnabled(!0,!!(bn!=null&&bn.isScreenshareEnabled)):Wt.selfVideoEnabled(!0,!1));break}case Tt._I.getType():{const{huddlesVideoActive:dn,self:bn}=rt();Wt&&Wt.hasSession()&&(dn?Wt.selfVideoEnabled(!1,!!(bn!=null&&bn.isScreenshareEnabled)):Wt.selfVideoEnabled(!1,!1));break}case Tt.qW.getType():{Ms.info("BOOT","user agent:",navigator.userAgent);const dn=ye.payload;let bn=dn.isStartMuted;if(!ro){Ms.error("Missing audio output element");return}const{server:Bn,roomId:ls}=dn.callResult,Es=Bn.attendee.AttendeeId,vs=dn.waitForHuddleStart,gs=dn.isPrejoin;(0,s.dispatchForClientStore)((0,Tt.og)(gs));const Cs=gs?(0,pe.Qn)(De):(0,pe.Ak)(De),{teamId:Eo}=Cs||{},bs=(0,c.getFocusedWorkspace)(De),Ps=(0,s.getStoreInstanceByTeamId)(Eo||bs),zs=Ps?Ps.getState():void 0;if(!zs){Ms.error("team state not available while initializing huddlesSdk. Returning early");return}Ms.info("client-huddles-middleware: Dispatching resetPeersStore"),Ps.dispatch((0,Ft.VL)({huddlesVideoActive:!0})),Ps.dispatch((0,Ia.X6)({})),bn=bn||(0,ts.ty)(zs,"huddles_mute_by_default"),bn&&(Ms.info("Start huddle as muted as specified in user prefs"),Ps.dispatch((0,Ft.kT)({id:"self",isMicrophoneEnabled:!1}))),Rs&&Rs.stop(!0),(0,Xe.Gc)(bs),Rs=new Ze.w,Rs.start(ls);const vo=(0,an.u)();vo.then(Us=>{Us&&(Ms.info("Log reporter stopped"),Rs==null||Rs.stop(!0,!1),Rs=void 0)});const Qs=new ga(Ps),{ttiTrace:xs}=(0,wn.A)().getAllTraceHandlers();Wt=new Vn.Y(Qs,ro,ya),(0,Pt.Y)({name:Pt.R1.HuddlesSdk,ref:Wt});const Ys=(0,es.Y)(Bn.attendee.ExternalUserId),Fr=Ta(zs,{server:Bn,isPrejoin:gs});if(!Fr){Ms.error("sdk options not available. Returning early");return}const fo=[],to=Eo||bs;if(Ys&&to){const Us=new me.SV({teamId:to,peerId:Es,topicId:Ys,isHuddlesAwarenessTimestampEnabled:(0,qe.gG)(Ps.getState())});fo.push(Us);const Kr=new me.MC({teamId:to});fo.push(Kr),me.PL.watch(to,Ys,Us),(0,Pt.Y)({name:Pt.R1.ChimeChannelListener,ref:Kr}),(0,Pt.Y)({name:Pt.R1.ChimeChannelBroadcaster,ref:Us})}Wt.initialize(Fr,[jn.mT.MICROPHONE],!!bn,vs,vo,fo).then(()=>{const Us=Wt==null?void 0:Wt.getMeetingMediaRegion();xs==null||xs.setMediaRegionTag(Us),Ns.A.publish({type:k.lx.SelectedMediaRegion,update:{mediaRegionSelected:Us}}),Wt&&!gs&&(Wt==null||Wt.maybeBindAudioOutputElement(),Wt==null||Wt.setIncludeSelfAndNoneActiveSpeaker(!0,!0))}),Qs.setSelfAttendeeId(Es),_n.A.subscribe(jo),Ms.info("User started huddle");break}case Tt.pl.getType():{const dn=ye.payload;if(Wt){const{waitForHuddleEnd:bn}=dn;Wt.shutdown(()=>{bn.resolve()});const Bn=(0,c.getFocusedWorkspace)(De),ls=(0,s.getStoreInstanceByTeamId)(Bn);ls==null||ls.dispatch((0,nt.LL)(nt.vT.SpeakingWhenMuted));const Es=(0,qe.pL)(ls==null?void 0:ls.getState()),vs=(0,pe.E9)(De);vs&&(Vs(De,At.RZ,Es),Vs(De,At.Lm,Es),me.PL.unwatch(vs)),_n.A.unsubscribe(jo),Ms.info("User left huddle")}Wt=void 0,me.PL.unwatchAll(),(0,Pt.N5)();break}case Tt.I9.getType():{const dn=ye.payload;if(Wt&&Wt.hasSession()&&(Wt.selfMicrophoneEnabled(dn),dn)){const bn=(0,c.getFocusedWorkspace)(De),Bn=(0,s.getStoreInstanceByTeamId)(bn);Bn==null||Bn.dispatch((0,nt.LL)(nt.vT.SpeakingWhenMuted))}break}case Tt.nU.getType():{const dn=ye.payload;Wt&&Wt.hasSession()&&Wt.sendReacji(dn.emoji,dn.reactionType);break}case Tt.M4.getType():{const dn=ye.payload;if(Wt&&Wt.hasSession()){const bn=(0,pe.l4)(De),Bn=(0,s.getStoreInstanceByTeamId)(bn);if(!Bn)return;const ls=(0,qe.pL)(Bn.getState()),Es=(0,pe.E9)(De),vs=(0,Xn.WR)(Bn.getState());if(Es){var kt;if(((kt=(0,b.Fb)(Bn.getState(),Es,vs,ls?"self":void 0))===null||kt===void 0?void 0:kt.field_value)===dn)Vs(De,At.RZ,ls),(0,pe.Rv)(De)&&dn!=="speaker"&&(Bn==null||Bn.dispatch((0,wo.a)({emoji:"speaker",reactionType:z.o.Sticker})));else{ao(De,At.z7,dn,ls);const{huddleEventsTrace:Cs}=(0,wn.A)().getAllTraceHandlers();Cs==null||Cs.update({name:$n.p.REACTION,type:$n.G.ONCE,tags:{reactionType:z.o.Sticker}})}}}break}case Tt.so.getType():{const dn=ye.payload;Wt&&Wt.hasSession()&&Wt.sendMuteRequest(dn);break}case Tt.ol.getType():{const dn=ye.payload;Wt&&Wt.hasSession()&&Wt.setAGC(dn);break}case Tt.HC.getType():{const dn=ye.payload;Wt&&Wt.hasSession()&&Wt.setNewPreferredDevice(dn==null?void 0:dn.id,dn==null?void 0:dn.type);break}case Tt.yR.getType():{const dn=ye.payload;Wt&&Wt.hasSession()&&Wt.setNoiseSuppression(dn);break}case Tt.Rb.getType():{const dn=ye.payload;Wt&&Wt.hasSession()&&Wt.setVideoBackgroundEffect(dn);break}case Tt.YA.getType():{const{huddlesVideoActive:dn,self:bn}=rt(),Bn=ye.payload,ls=!!(bn!=null&&bn.isCameraEnabled);if(Wt&&Wt.hasSession()){var at,en;const Es=(0,pe.l4)(De),vs=(0,s.getStoreInstanceByTeamId)(Es);dn?Wt.selfVideoEnabled(ls,!0,Bn==null?void 0:Bn.mediaSourceId,Bn):Wt.selfVideoEnabled(!1,!0,Bn==null?void 0:Bn.mediaSourceId,Bn);let gs=(Bn==null||(at=Bn.mediaSourceId)===null||at===void 0?void 0:at.startsWith("screen:"))||!1;!(Bn==null||(en=Bn.mediaSourceId)===null||en===void 0)&&en.startsWith("window:")&&(0,Fo.LD)()&&(gs=!0),Wt.selfDrawEnabled((0,ln.A)()&&gs);const Cs=(0,Fo.k0)((Bn==null?void 0:Bn.mediaSourceId)||"");Wt.sendContentShareDetails(Cs),vs==null||vs.dispatch((0,Ft.kT)({id:"self",isDrawEnabled:gs,isCameraEnabled:ls,contentShareSource:Cs}))}break}case Tt.QZ.getType():{const{huddlesVideoActive:dn,self:bn}=rt(),Bn=dn?bn.isCameraEnabled:!1;if(Wt&&Wt.hasSession()){const ls=(0,pe.l4)(De),Es=(0,s.getStoreInstanceByTeamId)(ls);Wt.selfVideoEnabled(!!Bn,!1),Es==null||Es.dispatch((0,Ft.kT)({id:"self",isDrawEnabled:!1,contentShareSource:void 0}))}break}case Kt.Oh.getType():return Wt&&Wt.hasSession()?Wt.getScreenThumbnails():Jt.S.resolve(null);case Tt.nI.getType():{const dn=ye.payload;if(Wt&&Wt.hasSession()){var Nn;const bn=(0,pe.l4)(De),Bn=(0,s.getStoreInstanceByTeamId)(bn);if(!Bn)return;const ls=(0,qe.pL)(Bn.getState()),Es=(0,pe.E9)(De),vs=(0,Xn.WR)(Bn.getState());if(!Es)return;const gs=(Nn=(0,b.Fb)(Bn.getState(),Es,vs,ls?"self":void 0))===null||Nn===void 0?void 0:Nn.field_value;return(dn||gs==="speaker")&&(0,s.dispatchForClientStore)((0,wo.a)({emoji:"speaker",reactionType:z.o.Sticker})),Wt.toggleAllIncomingVideo(dn)}return Jt.S.resolve(null)}case Tt.WY.getType():{const dn=ye.payload;if(Wt&&Wt.hasSession()){const bn=(0,pe.l4)(De);if(!(0,s.getStoreInstanceByTeamId)(bn))return;(0,pe.E9)(De)&&ao(De,At.yT,dn.key)}break}case Tt.Lx.getType():{const dn=ye.payload;Wt&&Wt.hasSession()&&Wt.sendJukeboxRequest(dn.key);break}case Tt.OA.getType():{Wt&&Wt.hasSession()&&Wt.sendJukeboxStopRequest();break}case Tt.Db.getType():{Wt&&Wt.hasSession()&&Wt.sendRecordingStartNotification();break}case Tt.bk.getType():{const dn=ye.payload;if(Wt&&Wt.hasSession()){const bn=(0,pe.l4)(De),Bn=(0,s.getStoreInstanceByTeamId)(bn);if(!(0,qe.lV)(Bn.getState()))return;Wt.startContentShareJukebox({song:dn.song})}break}case Tt.JM.getType():{if(Wt&&Wt.hasSession()){const dn=(0,pe.l4)(De),bn=(0,s.getStoreInstanceByTeamId)(dn);if(!bn||!(0,qe.lV)(bn.getState()))return;Wt.selfStopJukebox(),Vs(De,At.S)}break}case Kt.e$.getType():{if(Wt&&Wt.hasSession()){const dn=ye.payload.mediaResourceType;return Wt.maybeCheckSystemMediaAccess(dn)}return Jt.S.resolve(null)}case Cn.d2.getType():{if(Wt&&Wt.hasSession()){const{payload:{tileId:dn,videoRef:bn,shouldAttachStream:Bn}}=ye;Wt.bindVideo(dn,bn.current,Bn)}break}case Cn.gJ.getType():{if(Wt&&Wt.hasSession()){const{payload:{tileId:dn,videoRef:bn,shouldDetachStream:Bn}}=ye;Wt.unbindVideo(dn,bn.current,Bn)}break}case Cn.WY.getType():{if(Wt&&Wt.hasSession()){const{payload:{tileId:dn}}=ye;Wt.pauseVideo(dn)}break}case Cn.D8.getType():{if(Wt&&Wt.hasSession()){const{payload:{tileId:dn}}=ye;Wt.unpauseVideo(dn)}break}case Tt.WM.getType():{const dn=ye.payload;if(Wt&&Wt.hasSession()){const bn=(0,pe.l4)(De),Bn=(0,s.getStoreInstanceByTeamId)(bn),ls=Bn==null?void 0:Bn.getState();if(!Bn){Ms.info("client-huddles-middleware","no team store found when user toggles video");return}if(!ls){Ms.info("client-huddles-middleware","no team state found when user toggles video");return}const{huddlesVideoActive:Es}=rt(),vs=(0,Ft.Ng)(ls);let gs;(dn==null?void 0:dn.setVideoEnabled)!==void 0?gs=dn.setVideoEnabled:gs=!(vs!=null&&vs.isCameraEnabled),gs?(Ms.info("client-huddles-middleware","user toggling ON video"),Wt.setCameraQuality(...(0,ct.cg)()),Es?Wt.maybeEnableSelfCamera({isScreenshareEnabled:vs.isScreenshareEnabled}):Wt.maybeEnableSelfCamera()):(Ms.info("client-huddles-middleware","user toggling OFF video"),Es?Wt.selfVideoEnabled(!1,!!(vs!=null&&vs.isScreenshareEnabled)):Wt.selfVideoEnabled(!1,!1),Bn.dispatch((0,Ft.kT)({id:"self",isCameraEnabled:!1})))}break}case Cn.cn.getType():{if(Wt&&Wt.hasSession()){const{payload:{tileId:dn}}=ye;return(Wt==null?void 0:Wt.videoTileHasStream(dn))||!1}return Jt.S.resolve(!1)}case Ft.xz.getType():{const{huddlesVideoActive:dn,self:bn}=rt();Wt&&ye.payload.isContent&&(dn?Wt.selfVideoEnabled(!!(bn!=null&&bn.isCameraEnabled),!1):Wt.selfVideoEnabled(!1,!1));break}case Tt.Dj.getType():{Wt!=null&&Wt.hasSession()&&(Wt==null||Wt.initVideoPermission());break}case Tt._H.getType():{if(Wt!=null&&Wt.hasSession()){const{videoElement:dn,deviceId:bn}=ye.payload;Wt.stopVideoPreviewForVideoInput(dn),Wt.setCameraQuality(...(0,ct.cg)()),Wt.requestPreviewStreamForDeviceId(bn,ns.lW.Camera,dn)}break}case Tt.yi.getType():{if(Wt!=null&&Wt.hasSession()){const dn=ye.payload;Wt.stopVideoPreviewForVideoInput(dn)}break}case Tt.Rr.getType():{const{self:dn}=rt();if(Wt&&Wt.hasSession()){const bn=(dn==null?void 0:dn.contentShareSource)||Ko.R.Unknown;if(bn!==Ko.R.Unknown){const Bn=(dn==null?void 0:dn.isDrawEnabled)||!1;Wt.selfDrawEnabled((0,ln.A)()&&Bn),Wt.sendContentShareDetails(bn);const ls=(0,s.getStoreInstanceByTeamId)(ye.payload.teamId);ls==null||ls.dispatch((0,Ft.kT)({id:"self",isDrawEnabled:Bn}))}}break}case Tt.HF.getType():{const dn=ye.payload.isHostDrawEnabled,bn=(0,s.getStoreInstanceByTeamId)(ye.payload.teamId);bn==null||bn.dispatch((0,Ft.kT)({id:"self",isHostDrawEnabled:dn}));break}case Tt.B5.getType():{Wt==null||Wt.handleClientOffline();break}case Tt.f2.getType():{const dn=ye.payload,{isStartMuted:bn}=dn,{teamId:Bn}=(0,pe.Ak)(De)||{},ls=(0,c.getFocusedWorkspace)(De),Es=(0,s.getStoreInstanceByTeamId)(Bn||ls),{ttiTrace:vs}=(0,wn.A)().getAllTraceHandlers();if(vs==null||vs.setMediaRegionTag(Wt==null?void 0:Wt.getMeetingMediaRegion()),Es&&bn&&Wt)return Wt.completePrejoin(dn).then(()=>{Es.dispatch((0,Ft.kT)({id:"self",isMicrophoneEnabled:!1}))});if(Wt)return Wt.completePrejoin({});break}case Tt.xq.getType():{const dn=ye.payload.contentViewType,bn=ye.payload.contentViewConfig;if(Wt&&Wt.hasSession()&&(0,pe.E9)(De)){var qn;const ls=(0,pe.l4)(De),Es=(0,s.getStoreInstanceByTeamId)(ls);if(!Es)return;const vs=(0,qe.pL)(Es.getState());if(dn!==z.cM.Screenshare)Vs(De,At.Lm,vs);else if(!(bn==null||(qn=bn.item)===null||qn===void 0)&&qn.id){let gs;if(bn.item.id==="self")gs=(0,Xn.WR)(Es.getState());else{var Is;gs=(Is=(0,Ft.jB)(Es.getState(),bn.item.id))===null||Is===void 0?void 0:Is.userId}ao(De,At.fv,gs,vs)}}break}default:return le(ye)}return null});Go.meta={name:"createMiddleware",key:"createMiddlewareclientHuddlesMiddleware",description:"dispatches actions to huddles SDK"};const Ca=Go;Object.defineProperty({huddlesSdk:Wt},"huddlesSdk",{get:()=>Wt,set:he=>{Wt=he}});var Oa=e(218970),zo=e(417250),Qo=e(982737),Ts=e(701725);const Yo=(0,Ct.Ay)("setAutoTracerTagProvider side effect handler",(he,le,ye)=>{zo.LI.isEnabled()&&zo.LI.setTagProvider(De=>De?(0,Qo.go)(De):{})});Yo.meta={name:"createThunk",key:"createThunksetAutoTracerTagProvider",description:"setAutoTracerTagProvider side effect handler"};const Da=(0,Ts.kt)([C.setDidBootAllWorkspaces],Yo);var Sa=e(605556),Pa=e.n(Sa),Ra=e(789123),La=e(915773);const $o=(0,La.Ay)(he=>he&&he.persistedApiCalls);$o.meta={name:"createSelector",key:"createSelectorgetPersistedApiCalls",description:he=>he&&he.persistedApiCalls};var ba=e(684980),Ua=e(758808);const io="OFFLINE",lo=(0,Ra.A)("Replay persisted API calls",function(he,le){let ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$o(le());const De=le();if(!(0,Ua.A)(De)||(0,ko.A)(ye))return;const rt=(0,M.Ay)({state:De});rt.info(io,"replayPersistedApiCalls called after workspace booted");const Ye=Object.keys(ye).sort().map(kt=>ye[kt]);Jt.K.each(Ye,kt=>he((0,so.apiCall)(kt)).catch(at=>{rt.error(io,`Error replaying ${kt.method} (${kt.persistKey})`,at)}).finally(()=>{rt.info(io,`Clearing persisted payload for ${kt.method} (${kt.persistKey})`),he((0,ba.M)(kt.persistKey))}))});lo.meta={name:"createFetcher",key:"createFetcherreplayPersistedApiCalls",description:"Replay persisted API calls"},lo.propTypes=Pa().object;const Jo=(0,Ct.Ay)("triggerReplayPersistedApiCalls",(he,le,ye)=>{const De=ye.payload;(0,s.dispatchForTeamId)(De,lo())});Jo.meta={name:"createThunk",key:"createThunktriggerReplayPersistedApiCalls",description:"triggerReplayPersistedApiCalls"};const ka=(0,Ts.kt)([C.setWorkspaceBooted],Jo);var co=e(170012),Xo=e(271338),Na=e(220650);const Ba="DESKTOP-SIDE-EFFECT",Zo=(0,Ct.Ay)("logUpdateFromDesktop",(he,le,ye)=>{(0,M.Wo)().info(Ba,"Update from desktop for keys ",Object.keys(ye.payload))});Zo.meta={name:"createThunk",key:"createThunklogUpdateFromDesktop",description:"logUpdateFromDesktop"};const Wa=(0,Ts.kt)([co.Ez],Zo),qo=(0,Ct.Ay)("maybeHandleWindowFocusEvent",(he,le,ye)=>{(0,Xo.A)()&&ye.payload&&ye.payload.windows&&he((0,Na.pz)({isFocused:document.hasFocus()}))});qo.meta={name:"createThunk",key:"createThunkmaybeHandleWindowFocusEvent",description:"maybeHandleWindowFocusEvent"};const xa=(0,Ts.kt)([co.Ez],qo);var uo=e(756120),er=e(939076),tr=e(853660);const nr=(0,Ct.Ay)("maybeDisableDebugger side effect handler",()=>{if((0,uo.Yj)()||(0,uo.Cu)()||(0,uo.$i)())return;const he=(0,s.getStateForClientStore)();if((0,tr.c)()&&!(0,er.A)(he,"disable_tinyspeck_slackdebug_enforcement","treatment")){(0,Ve.Jb)();return}(0,Ve.CP)()||(0,Ve.YF)()});nr.meta={name:"createThunk",key:"createThunkmaybeDisableDebugger",description:"maybeDisableDebugger side effect handler"};const Fa=(0,Ts.kt)([C.setDidBootAllWorkspaces],nr);var _o=e(180427),Ka=e(812922),wa=e(446632);(0,wa.A)(()=>{if((0,_o.Nu)())try{window.matchMedia(Ka.og).onchange=he=>{const le=(0,s.getClientStoreInstance)();le&&le.dispatch((0,J.N)(he.matches))}}catch(he){(0,M.Wo)().warn("ACCESSIBILITY-STORE","window.matchMedia hook failed; system high contrast theme will not be updated.",he)}})();const sr=(0,Ct.Ay)("maybeUpdateShouldUseHighContrastColors",(he,le,ye)=>{if(!(0,_o.Nu)()&&(0,_o.hk)()){var De,rt;const Ye=ye==null||(De=ye.payload)===null||De===void 0||(rt=De.settings)===null||rt===void 0?void 0:rt.shouldUseHighContrastColors;Ye!==void 0&&he((0,J.N)(Ye))}});sr.meta={name:"createThunk",key:"createThunkmaybeUpdateShouldUseHighContrastColors",description:"maybeUpdateShouldUseHighContrastColors"};const Ha=(0,Ts.kt)([co.Ez],sr);var Va=e(484799),ja=e(60552),hs=e(951321),Ga=e(230171);function za(he,le){const ye=Object.values((0,s.getStoreInstanceMap)());for(const De of ye){const rt=De.getState(),Ye=(0,Ho.KK)(rt,he);Ye&&Ye.log_exposures&&le===Ye.group&&(0,Ga.K)(he,Ye,rt)}}l(za,"logExposuresForSession");function or(he,le){if((0,hs.SC)(he),le)try{le()}catch(ye){(0,M.Wo)().error(`caught error from cleanupCallback: ${ye}`)}}l(or,"rollbackToggle");function Qa(he){let{toggleName:le,toggleGroup:ye}=he;return(0,ja.A)(le,ye,!1)}l(Qa,"defaultToggleGroupMatcher");function Bs(he,le){var ye;const De=(ye=le==null?void 0:le.customToggleGroupMatcher)!==null&&ye!==void 0?ye:Qa,rt=(0,hs.M_)(he),Ye=rr(he,rt,De);if(rt===null&&Ye!==hs.dw.NoGroup){(0,hs.jc)(he,Ye);return}Ye===hs.dw.NoGroup?rt===hs.dw.Treatment||rt===hs.dw.On?(or(he,le==null?void 0:le.cleanupCallback),(0,Va.As)({reason:`Rolling back ${he} toggle`,reasonKey:`rollback_${he}_toggle`})):(rt===hs.dw.Control||rt===hs.dw.Off)&&or(he,le==null?void 0:le.cleanupCallback):Ye!==rt?(0,hs.jc)(he,Ye):Ye===rt&&za(he,rt)}l(Bs,"setToggleGroupForNextSession");function rr(he,le,ye){const De=ye({toggleName:he,toggleGroup:hs.dw.Treatment}),rt=ye({toggleName:he,toggleGroup:hs.dw.Control}),Ye=ye({toggleName:he,toggleGroup:hs.dw.On}),kt=ye({toggleName:he,toggleGroup:hs.dw.Off});return De&&rt?le===hs.dw.Treatment?hs.dw.Treatment:le===hs.dw.Control?hs.dw.Control:Math.random()<.5?hs.dw.Treatment:hs.dw.Control:Ye&&kt?le===hs.dw.On?hs.dw.On:le===hs.dw.Off?hs.dw.Off:Math.random()<.5?hs.dw.On:hs.dw.Off:De?hs.dw.Treatment:rt?hs.dw.Control:Ye?hs.dw.On:kt?hs.dw.Off:hs.dw.NoGroup}l(rr,"getCurrentToggleGroup");const Qi={getCurrentToggleGroup:rr};(0,Ve.ul)("setToggleGroupForNextSession",he=>Bs(he));var Ya=e(227913),$a=e(32372),ar=e(11338),Ja=e(578499),Xa=e(115267),Za=e(275497),Ws=e(43990),qa=e(381666),ir=e(171873);const lr=(0,Ct.Ay)("Clogs all team Ids, User Ids, experimentName and experiment group, if the client is part of workspace switcher awareness experiment",()=>{if((0,Ws.G3)()||(0,Ws.lj)()){var he;const le=(0,s.getClientStoreInstance)(),ye=(0,c.getBootedWorkspaces)(le.getState()),De=(0,c.getFocusedWorkspace)(le.getState()),rt=ye.map(Ye=>{var kt;const at=(kt=(0,s.getStoreInstanceByTeamId)(Ye))===null||kt===void 0?void 0:kt.getState();return(0,Xn.WR)(at)});(0,qa.e)({getState:(he=(0,s.getStoreInstanceByTeamId)(De))===null||he===void 0?void 0:he.getState}).track(mt.EventId.WORKSPACE_SWITCHER_AWARENESS_CLOG,{contexts:{clientMeta:{teamIds:ye.join(","),userIds:rt.join(",")},experimentName:Ws.TC,experimentGroup:(0,Ws.Kd)(),visitorCookie:(0,ir.v8)(ir.i$),clientId:(0,a.sST)()}})}});lr.meta={name:"createThunk",key:"createThunkmaybeClogWorkspaceSwitcherAwarnessData",description:"Clogs all team Ids, User Ids, experimentName and experiment group, if the client is part of workspace switcher awareness experiment"};const ei=l(()=>{try{ar.qV.deleteDatabase()}catch(he){ar.qV.getLogger().error(`caught error from deleteDatabase: ${he}`)}},"objectStoreCallback"),cr=(0,Ct.Ay)("setToggleGroupsForNextSession",(he,le,ye)=>{he(lr()),Bs(Ya.Wv,{cleanupCallback:ei}),Bs(Za.J),Bs($a.f),Bs(Ja.Pt),Bs(Xa.sL),Bs(Ws.TC,{cleanupCallback:Ws.V4,customToggleGroupMatcher:Ws.Yr})});cr.meta={name:"createThunk",key:"createThunksetToggleGroupsForNextSession",description:"setToggleGroupsForNextSession"};const ti=(0,Ts.kt)([C.setDidBootAllWorkspaces],cr);var dr=e(646592),ni=e(826);const ur=(0,Ct.Ay)("recordExperimentGroupsAsTrace side effect handler",(he,le,ye)=>{const De=(0,s.getStateForClientStore)(),rt=(0,c.getBootedWorkspaces)(De)||[];try{const Ye=dr.nl.ALWAYS;rt.forEach(kt=>{const at=(0,s.getStateByTeamId)(kt),en=(0,Qo.xy)(at),Nn=JSON.stringify(en),qn=(0,ni.E)({state:at}),Is=qn.createSpan({name:"experiment_groups",options:{tags:{experiment_groups:Nn}},samplingOptions:{sampleType:Ye}});Is.close(),qn.reportSpans([Is])})}catch(Ye){(0,M.Wo)().warn("BOOT-TEAM","could not report experiment groups in trace",Ye)}});ur.meta={name:"createThunk",key:"createThunkrecordExperimentGroupsAsTrace",description:"recordExperimentGroupsAsTrace side effect handler"};const si=(0,Ts.kt)([C.setDidBootAllWorkspaces],ur);var oi=e(272909);const _r=(0,Ct.Ay)("maybeToggleGlobalMuteShortcutHandler",(he,le,ye)=>(0,oi.N$)(ye.payload));_r.meta={name:"createThunk",key:"createThunkmaybeToggleGlobalMuteShortcutHandler",description:"maybeToggleGlobalMuteShortcutHandler"};const ri=(0,Ts.kt)([Tt.Bk],_r);var ai=e(932426),ii=e(198538);const mr=(0,Ct.Ay)("Transition the up_to_browse_kb_shortcut user pref to the new client pref",(he,le)=>{var ye;const De=le(),rt=(0,c.getFocusedWorkspace)(De),Ye=(0,s.getStoreInstanceByTeamId)(rt),kt=Ye==null||(ye=Ye.getState)===null||ye===void 0?void 0:ye.call(Ye);if(!kt||(0,q.jX)(De)!==void 0)return;const en=(0,ts.ty)(kt,"up_to_browse_kb_shortcut"),{LIST:Nn,EDIT:qn}=ii.v,Is=en?Nn:qn;he((0,ai.T)(Is))});mr.meta={name:"createThunk",key:"createThunkmaybeTransitionUpToBrowsePreference",description:"Transition the up_to_browse_kb_shortcut user pref to the new client pref"};const li=(0,Ts.kt)([C.setWorkspaceBooted],mr);var ci=e(962315),hr=e(381787),di=e(129318),js;(function(he){he.DOGFOOD="dogfood",he.BETA="beta",he.PROD="prod"})(js||(js={}));var Er;(function(he){he.BETA="beta",he.PROD="prod"})(Er||(Er={}));const Yi=l(he=>he!==js.PROD,"isPreRelease");var Ls;(function(he){he.NIGHTLY="nightly",he.ALPHA="alpha",he.ETA="eta",he.PILOT="pilot",he.BETA="beta",he.PROD="prod"})(Ls||(Ls={}));var vr;(function(he){he.BETA="beta",he.PROD="prod"})(vr||(vr={}));const $i=[Ls.ALPHA,Ls.ETA,Ls.BETA,Ls.PILOT,Ls.PROD],Ji=l(he=>he!==Ls.PROD,"release_channels_4_31_0_isPreRelease"),fr=(0,Ct.Ay)("maybeSetReleaseChannelOverrideHandler",(he,le,ye)=>{!(0,gt.y3)()||!(0,a.g9M)()||_i(le)});fr.meta={name:"createThunk",key:"createThunkmaybeSetReleaseChannelOverrideHandler",description:"maybeSetReleaseChannelOverrideHandler"};const ui=(0,Ts.kt)([C.setDidBootAllWorkspaces],fr),pr="nightly-promotion-state";function _i(he){const le=(0,a.oQe)("environment","releaseChannel"),ye=(0,a.oQe)("settings","releaseChannelOverride");let De=ye;if(!De&&(le==="beta"||le==="alpha")&&(De=le),De==="eta"&&(De=js.BETA),(0,Xo.A)()&&(0,gt.dY)("4.31.150")){const rt=he();if((0,er.A)(rt,"ssb_dogfood_automatic_promotion","on")&&(0,tr.c)()&&De!==hr.zS)try{window.localStorage.getItem(pr)!=="2"&&(De=hr.zS,window.localStorage.setItem(pr,"1"))}catch{}De==="alpha"&&(De=js.BETA)}De!==ye&&((0,a.cGU)({name:"releaseChannelOverride",value:De}),a.NjF.cache&&a.NjF.cache.clear())}l(_i,"maybeSetReleaseChannelOverride");const mi=["domain","enterprise_id","enterprise_name","id","icon","name","url","variant"],mo=(0,Ct.Ay)("Sync workspaces state with desktop",(he,le)=>{if(!(0,gt.y3)())return;const ye=le(),De=(0,c.getBootedWorkspaces)(ye),rt=(0,c.getAllWorkspaces)(ye);var Ye;const kt=(Ye=(0,c.getWorkspacesMeta)(ye))!==null&&Ye!==void 0?Ye:{},at=De==null?void 0:De.reduce((en,Nn)=>{const qn=(0,s.getStateByTeamId)(Nn),dn={...(0,di._J)(qn,Nn,!1),...kt==null?void 0:kt[Nn]};return en[Nn]={...(0,ci.A)(dn,mi),order:rt.indexOf(Nn)},en},{});(0,a.CIW)(at)});mo.meta={name:"createThunk",key:"createThunksyncWorkspacesToDesktop",description:"Sync workspaces state with desktop"};const gr=(0,Ct.Ay)("Sync workspaces state with desktop when a new team has booted",(he,le)=>{if(!(0,gt.y3)())return;const ye=le();(0,c.didBootAllWorkspaces)(ye)&&he(mo())});gr.meta={name:"createThunk",key:"createThunksyncWorkspacesToDesktopOnAdditionalTeamBoot",description:"Sync workspaces state with desktop when a new team has booted"};const hi=(0,Ts.kt)([C.setDidBootAllWorkspaces,C.setWorkspaceOrder],mo),Ei=(0,Ts.kt)([C.setWorkspaceBooted],gr);var vi=e(256720);const Ar=(0,Ct.Ay)("Side effect to remove window restoration data from localStorage once all teams have booted",()=>{const he=(0,M.Wo)({label:"WIN-RESTORE"});(0,O.q9)(vi.Gq,""),he.info("Cleared window-restoration key in localStorage because all teams have booted.")});Ar.meta={name:"createThunk",key:"createThunkmaybeClearWindowRestorationData",description:"Side effect to remove window restoration data from localStorage once all teams have booted"};const fi=(0,Ts.kt)([C.setDidBootAllWorkspaces],Ar);var Tr=e(287274);const Ir=(0,Ct.Ay)("Transition the a11y_play_sound_for_incoming_dm_choice and a11y_play_sound_for_sent_dm_choice user prefs to their new corresponding client prefs",(he,le)=>{var ye;const De=le(),rt=(0,c.getFocusedWorkspace)(De),Ye=(0,s.getStoreInstanceByTeamId)(rt),kt=Ye==null||(ye=Ye.getState)===null||ye===void 0?void 0:ye.call(Ye);if(!kt)return;if((0,q.u$)(De)===""){const Nn=(0,ts.ty)(kt,"a11y_play_sound_for_incoming_dm_choice"),qn=Nn??"";he((0,Tr.R)(qn))}if((0,q.kd)(De)===""){const Nn=(0,ts.ty)(kt,"a11y_play_sound_for_sent_dm_choice"),qn=Nn??"";he((0,Tr.r)(qn))}});Ir.meta={name:"createThunk",key:"createThunkmaybeMigrateDmSoundPrefs",description:"Transition the a11y_play_sound_for_incoming_dm_choice and a11y_play_sound_for_sent_dm_choice user prefs to their new corresponding client prefs"};const pi=(0,Ts.kt)([C.setDidBootAllWorkspaces],Ir);var yr=e(557681);const Mr=(0,Ct.Ay)("Transition the a11y_read_out_incoming_dm user pref to its new corresponding client pref",(he,le)=>{var ye;const De=le(),rt=(0,c.getFocusedWorkspace)(De),Ye=(0,s.getStoreInstanceByTeamId)(rt),kt=Ye==null||(ye=Ye.getState)===null||ye===void 0?void 0:ye.call(Ye);if(!kt||(0,q.gR)(De)!==void 0)return;const en=(0,ts.ty)(kt,"a11y_read_out_incoming_dm");if(en!==void 0){he((0,yr.p)(en));return}he((0,yr.p)(!0))});Mr.meta={name:"createThunk",key:"createThunkmaybeMigrateDmAnnouncementPref",description:"Transition the a11y_read_out_incoming_dm user pref to its new corresponding client pref"};const gi=(0,Ts.kt)([C.setDidBootAllWorkspaces],Mr);var Ai=e(810225);const Cr=(0,Ct.Ay)("recordWssRailVisibility side effect handler",(he,le)=>{const ye=(0,Ai.F)(),De=le(),rt=(0,zn.v8)(De)?1:0,Ye=ye.createMetricsTrace({samplingOptions:{sampleType:dr.nl.SESSION}});Ye.store({name:"wss_rail:visible",value:rt}),ye.reportTrace(Ye)});Cr.meta={name:"createThunk",key:"createThunkrecordWssRailVisibility",description:"recordWssRailVisibility side effect handler"};const Ti=(0,Ts.kt)([C.setDidBootAllWorkspaces],Cr),Or=(0,Ct.Ay)("updateLocalConfigOrderedTeamIds side effect handler",(he,le,ye)=>{const De=(0,M.Wo)({label:O.o7}),rt=(0,s.getStateForClientStore)(),Ye=(0,c.getAllWorkspaces)(rt);(!Ye||Ye.length===0)&&De.warn("Skipping update to orderedTeamIds, allWorkspaces is empty"),De.info(`Updating orderedTeamIds to ${Ye.join(",")}`),(0,O.q9)("orderedTeamIds",Ye)});Or.meta={name:"createThunk",key:"createThunkupdateLocalConfigOrderedTeamIds",description:"updateLocalConfigOrderedTeamIds side effect handler"};const Ii=(0,Ts.kt)([C.addWorkspace],Or),yi=[Fa,Wa,xa,ka,Da,Ha,ti,hi,Ei,si,ri,ui,li,fi,pi,gi,Ti,Ii];var Dr=e(788309);const Sr=50,Pr="recents";let eo;function ho(he){eo&&(0,Dr.GP)(eo),eo=(0,Dr.BB)(()=>{eo=void 0,(0,O.q9)(Pr,he)})}l(ho,"persistRecents");function Mi(){var he;return(he=(0,O.W6)(Pr))!==null&&he!==void 0?he:[]}l(Mi,"loadRecents");const Ci=Mi(),Oi=(0,Ke.vy)({},Ci,{persistenceEnabled:!1,storeKey:"recents"}).on(je.y2,(he,le)=>{let{entry:ye}=le;const De=[ye,...he].slice(0,Sr);return ho(De),De}).on(je.HQ,(he,le)=>{let{entry:ye}=le;const De=[ye,...he.slice(1)].slice(0,Sr);return ho(De),De}).on(je.TP,he=>{const le=he.slice(0,1);return ho(le),le});var Di=e(195168),Si=e(535355);const Rr=(0,Ke.Ny)("Broadcasts overlays state from client store to workspace stores",(he,le,ye)=>{const De=he.getState(),rt=le(ye),Ye=he.getState(),kt=(0,c.getBootedWorkspaces)(Ye);return A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>at.overlays,broadcastAction:Si.l}),rt});Rr.meta={name:"createMiddleware",key:"createMiddlewarebroadcastOverlaysMiddleware",description:"Broadcasts overlays state from client store to workspace stores"};var Pi=e(205664),Gs=e(742198),Lr=e(63009),Ri=e(286916),br=e(692232);const Li=50;function Ur(){return(0,Pi.A)("tabSoda_")}l(Ur,"generateTabSodaTabId");function bi(){return{activeTab:void 0,tabs:{},tabOrder:[]}}l(bi,"getInitialState");function Ui(he,le){if(he&&le){var ye,De,rt,Ye;const en=(ye=he[he[ht.jf]])===null||ye===void 0?void 0:ye.primary,Nn=(De=he[he[ht.jf]])===null||De===void 0?void 0:De.secondary,qn=(rt=le[le[ht.jf]])===null||rt===void 0?void 0:rt.primary,Is=(Ye=le[le[ht.jf]])===null||Ye===void 0?void 0:Ye.secondary;if(he.teamId===le.teamId&&he[ht.jf]===le[ht.jf]&&(en==null?void 0:en.id)===(qn==null?void 0:qn.id)&&(Nn==null?void 0:Nn.id)===(Is==null?void 0:Is.id)){var kt,at;return!((en==null?void 0:en.viewType)===br.D.Thread&&(qn==null?void 0:qn.viewType)===br.D.Thread&&(en==null||(kt=en.params)===null||kt===void 0?void 0:kt.threadId)!==(qn==null||(at=qn.params)===null||at===void 0?void 0:at.threadId))}}return!1}l(Ui,"areViewsSame");function kr(he){let{reducerState:le,entry:ye,eventType:De}=he,rt=le.activeTab,Ye=[...le.tabOrder];rt||(rt=Ur(),Ye.push(rt));const kt=le.tabs[rt]||[];let at={...le.tabs};if(at[rt]=[ye,...De==="replace"?kt.slice(1):kt].slice(0,Li),!kt.length){const en=le.tabOrder.find(Nn=>{var qn;return Ui(ye,(qn=le.tabs[Nn])===null||qn===void 0?void 0:qn[0])});en&&rt!==en&&(Ye=le.tabOrder.filter(Nn=>Nn!==rt),at=(0,fn.A)(le.tabs,rt),rt=en)}return{activeTab:rt,tabs:at,tabOrder:Ye}}l(kr,"getTabSodaStateFromWindowHistoryEvent");const ki=bi(),Ni=(0,Ke.vy)({},ki,{persistenceEnabled:!1,storeKey:"tabSoda"}).on(Gs.nz,(he,le)=>{let{setAsActive:ye}=le;const De=Ur(),rt={...he.tabs,[De]:[]},Ye=[...he.tabOrder],kt=he.activeTab?Ye.indexOf(he.activeTab):-1;return Ye.splice(kt+1,0,De),{activeTab:ye?De:he.activeTab,tabs:rt,tabOrder:Ye}}).on(Gs.yw,(he,le)=>({...he,activeTab:le})).on(Gs.oT,(he,le)=>{const{activeTab:ye,tabs:De,tabOrder:rt}=he;let Ye=ye;le===ye&&(Ye=(0,Ri.fe)(ye,rt));const kt=[...rt],at=rt.indexOf(le);kt.splice(at,1);const en={...De};return delete en[le],{tabs:en,tabOrder:kt,activeTab:Ye}}).on(Gs.ez,(he,le)=>{const ye=he.tabs[le]||[],De={...he.tabs,[le]:[...ye.slice(1)]};return{...he,tabs:De}}).on(Gs.Uz,(he,le)=>({...he,tabOrder:le})).on(je.y2,(he,le)=>{let{entry:ye}=le;return(0,Lr.H)(ye)?kr({eventType:"push",reducerState:he,entry:ye}):he}).on(je.HQ,(he,le)=>{let{entry:ye}=le;return(0,Lr.H)(ye)?kr({eventType:"replace",reducerState:he,entry:ye}):he});var Bi=e(809844),Wi=e(469122),xi=e(349495),Fi=e(822195);const Nr=(0,o.Ay)("Broadcast fullscreen state to other stores",(he,le,ye)=>{const De=he.getState(),rt=le(ye),Ye=he.getState(),kt=(0,c.getBootedWorkspaces)(Ye);return A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,Wi.V)(at),broadcastAction:at=>at?(0,Fi.J)():(0,xi.sM)()}),rt});Nr.meta={name:"createMiddleware",key:"createMiddlewarebroadcastFullscreenMiddleware",description:"Broadcast fullscreen state to other stores"};var Ki=e(459804),wi=e(85866),Br=e(41455);const Wr=(0,o.Ay)("Broadcast big button mode state to other stores",(he,le,ye)=>{const De=he.getState(),rt=le(ye),Ye=he.getState(),kt=(0,c.getBootedWorkspaces)(Ye);return A({state:Ye,prevState:De,workspaces:kt,broadcastSelector:at=>(0,wi.V)(at),broadcastAction:at=>at?(0,Br.z)():(0,Br.K)()}),rt});Wr.meta={name:"createMiddleware",key:"createMiddlewarebroadcastBBMMiddleware",description:"Broadcast big button mode state to other stores"};function xr(){let{extraMiddlewares:he=[],customEnhancers:le=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const ye=(0,ae.A)({teamOrEnterpriseId:"client",middlewares:[...he,H.A,n.P,U.A,i,E,Oe,Qn,It,Te,Ie,Rr,Nr,Wr,Ae.N,Ca],customEnhancers:le}),De=(0,N.A)({workspaces:V,window:de.A,telemetry:te,connectivity:ce.A,accessibility:K.A,accessibilityPersistent:W.A,desktop:oe.A,clientTheme:X.A,iaHistory:He,mainWindowHistory:Mt,isClient:bt,workspaceLayout:Dt.A,viewLayout:pt.A,noop:Yt.A,navigate:An,clientHuddles:Mn,clientSideEffects:St,recents:Oi,overlays:Di.y,tabSoda:Ni,fullscreen:Bi.G,bbm:Ki.Y});return(0,t.Yl)(De,ye)}l(xr,"createClientStore");function Hi(){const he=(0,s.getClientStoreInstance)();if(he)return(0,M.Wo)().warn("[CLIENT-STORE]","we\u2019ve called configureClientStore before and already have an instance. This is likely a programming error."),he;const le=xr();(0,s.setClientStoreInstance)(le);const{clientSideEffectsMap:ye,sideEffectsMap:De,orgSharedSideEffectsMap:rt}=(0,Oa.g)(yi);if(Object.keys(De).length||Object.keys(rt).length)throw new Error("Passed non-client side effects into client store. This is a programming error and the app will not work properly.");return le.dispatch(xt(ye)),le}l(Hi,"configureClientStore");const qi={createClientStore:xr}},653843:(j,T,e)=>{"use strict";e.d(T,{x:()=>m});var t=e(236254),n=e(6336),s=e(61177),a=e(200154),c=e(449552),r=e(193074),o=e(211700),u=e(285955);function m(d){if(!d||(0,c.getClientStoreInstance)())return;const _=(0,s.A)(),h=(0,r.VA)()?(0,t.A)():[d],p=(0,n.A)();_.dispatch((0,a.initialize)({focusedWorkspace:d,allWorkspaces:h,workspacesMeta:p})),i()}l(m,"initializeClientStore");function i(){const d=(0,c.getClientStoreInstance)();(0,o.ul)("clientStore",d),(0,o.zv)("teamIds",()=>{const h=d.getState();return u.getAllWorkspaces(h)}),(0,o.zv)("activeTeam",()=>{const h=d.getState(),p=u.getFocusedWorkspace(h);return window.slackDebug[p]}),(0,o.zv)("activeTeamId",()=>{const h=d.getState();return u.getFocusedWorkspace(h)}),(0,o.zv)("activeEnterprise",()=>{var h,p;const A=d.getState(),v=(h=u.getWorkspacesMeta(A))===null||h===void 0||(p=h[u.getFocusedWorkspace(A)])===null||p===void 0?void 0:p.enterprise_id;return window.slackDebug[v]});const _={};Object.keys(a).forEach(h=>{_[h]=function(){for(var p=arguments.length,A=new Array(p),v=0;v<p;v++)A[v]=arguments[v];return d.dispatch(a[h](...A))}}),Object.keys(u).forEach(h=>{_[h]=function(){for(var p=arguments.length,A=new Array(p),v=0;v<p;v++)A[v]=arguments[v];return u[h](d.getState(),...A)}}),(0,o.ul)("clientStore.workspaces",_)}l(i,"setupClientStoreDebugger")},742198:(j,T,e)=>{"use strict";e.d(T,{Uz:()=>r,ez:()=>s,nz:()=>n,oT:()=>c,yw:()=>a});var t=e(152532);const n=(0,t.Ay)("Adds a new emtpy tab-soda tab");n.meta={name:"createAction",key:"createActiontabSodaAddNewTab",description:"Adds a new emtpy tab-soda tab"};const s=(0,t.Ay)("Removes the recent history entry from a tab soda tab");s.meta={name:"createAction",key:"createActiontabSodaPopHistoryForTab",description:"Removes the recent history entry from a tab soda tab"};const a=(0,t.Ay)("Select a tab by id");a.meta={name:"createAction",key:"createActiontabSodaSelectTab",description:"Select a tab by id"};const c=(0,t.Ay)("Remove a tab soda tab");c.meta={name:"createAction",key:"createActiontabSodaRemoveTab",description:"Remove a tab soda tab"};const r=(0,t.Ay)("Re-order tab soda tabs");r.meta={name:"createAction",key:"createActiontabSodaReorderTabs",description:"Re-order tab soda tabs"}},286916:(j,T,e)=>{"use strict";e.d(T,{Fp:()=>r,Xy:()=>c,fe:()=>a});var t=e(43335),n=e(612204),s=e(535518);function a(o,u){const m=u.indexOf(o),i=m<u.length-1?m+1:m-1;return i>=0?u[i]:void 0}l(a,"tabSodaGetNextActiveTab");function c(o){return(0,t.A)(o)||o==="thread"}l(c,"canOpenInTabSodaTab");function r(o){return(0,n.Ay)(o)||(0,s.pI)(o)||(0,s.or)(o)||(0,t.A)(o)||o==="thread"||o==="comment_thread"}l(r,"tabSodaCanViewBeEjected")},113956:(j,T,e)=>{"use strict";e.d(T,{$:()=>u});var t=e(674217),n=e(449552),s=e(742198),a=e(43335),c=e(619674),r=e(883518),o=e(544555);const u=(0,t.Ay)("Opens a view in a new tab",function(m,i){let{viewId:d,params:_}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const h=(0,s.nz)({setAsActive:!0});if(!d)return(0,n.dispatchForClientStore)(h);if(d&&(0,a.A)(d))return(0,n.dispatchForClientStore)(h),m((0,c.o)((0,r.pr)(d)));if(d==="thread"&&(_!=null&&_.threadId)){const{channelId:p,threadTs:A}=(0,o.Sb)(_==null?void 0:_.threadId);if(p&&A){const{replyTs:v,highlightRoot:E,dangerouslyOverrideRouting:f}=_;return(0,n.dispatchForClientStore)(h),m((0,c.o)((0,r.UX)({channelId:p,threadTs:A,replyTs:v,highlightRoot:E,dangerouslyOverrideRouting:f})))}}});u.meta={name:"createThunk",key:"createThunkmaybeOpenInTabSodaTab",description:"Opens a view in a new tab"}},188175:(j,T,e)=>{"use strict";e.d(T,{B:()=>c,fK:()=>a,lw:()=>o,ud:()=>r});var t=e(774165),n=e(127225),s=e(286916);const a=(0,t.Mz)(u=>u.tabSoda);a.meta={name:"createSelector",key:"createSelectorgetTabSoda",description:u=>u.tabSoda};const c=(0,t.Mz)(u=>{const m=a(u);return m.activeTab?m.tabs[m.activeTab]:[]});c.meta={name:"createSelector",key:"createSelectortabSodaGetRecentsForActiveTab",description:u=>{const m=a(u);return m.activeTab?m.tabs[m.activeTab]:[]}};const r=(0,t.Mz)(u=>{const m=a(u);return m.activeTab?m.tabs[m.activeTab].length<2:!1});r.meta={name:"createSelector",key:"createSelectortabSodaIsBackDisabledForActiveTab",description:u=>{const m=a(u);return m.activeTab?m.tabs[m.activeTab].length<2:!1}};const o=(0,t.Mz)((u,m)=>{var i,d,_;const p=(i=a(u).tabs[m])===null||i===void 0?void 0:i[0],A=p==null?void 0:p.teamId;if(!p||!A)return!1;const v=p==null?void 0:p[n.jf],E=p==null||(d=p[v])===null||d===void 0||(_=d[n.mq.Primary])===null||_===void 0?void 0:_.id;return!!E&&(0,s.Fp)(E)});o.meta={name:"createSelector",key:"createSelectortabSodaCanEjectTab",description:(u,m)=>{var i,d,_;const p=(i=a(u).tabs[m])===null||i===void 0?void 0:i[0],A=p==null?void 0:p.teamId;if(!p||!A)return!1;const v=p==null?void 0:p[n.jf],E=p==null||(d=p[v])===null||d===void 0||(_=d[n.mq.Primary])===null||_===void 0?void 0:_.id;return!!E&&(0,s.Fp)(E)}}},360256:(j,T,e)=>{"use strict";e.d(T,{UN:()=>_,oX:()=>p,wm:()=>h});var t=e(674217),n=e(449552),s=e(742198),a=e(465291),c=e(61882),r=e(198892),o=e(127225),u=e(286916),m=e(285955),i=e(599640);const d=(0,t.Ay)("Update currently visible viewset as part of TabSoda tab switching",(A,v,E)=>{(0,n.dispatchForTeamId)(E.teamId,(0,a.cQ)(E)),m.getFocusedWorkspace&&i.b&&(0,m.getFocusedWorkspace)(v())!==E.teamId&&A((0,i.b)({teamId:E.teamId,fromNavigation:!0}));const{tabSoda:f}=v(),g=f.activeTab;if(g){const y=f.tabs[g][0],I=y[o.jf],O=y[I],M=E[o.jf],C=E[M];if(!C)return;(0,n.dispatchForTeamId)(E.teamId,(0,c.C)({prevViewSet:O,prevTab:I,nextViewSet:C,nextTab:M,windowId:o.N2,navigateParams:{},triggerType:r.w.HISTORY_NAVIGATION}))}});d.meta={name:"createThunk",key:"createThunkupdateVisibleView",description:"Update currently visible viewset as part of TabSoda tab switching"};const _=(0,t.Ay)("Switch current TabSoda tab",(A,v,E)=>{let{tabId:f}=E;const{tabSoda:g}=v();if(g.activeTab===f)return;const y=g.tabs[f][0];A(d(y)),A((0,s.yw)(f))});_.meta={name:"createThunk",key:"createThunktabSodaSwitchTab",description:"Switch current TabSoda tab"};const h=(0,t.Ay)("Close active TabSoda tab and switch to the nearest open tab",(A,v,E)=>{let{tabId:f}=E;const{tabSoda:g}=v(),y=g.activeTab,I=(0,u.fe)(y,g.tabOrder);if(f===y&&I){const O=g.tabs[I][0];A(d(O))}A((0,s.oT)(f))});h.meta={name:"createThunk",key:"createThunktabSodaCloseTab",description:"Close active TabSoda tab and switch to the nearest open tab"};const p=(0,t.Ay)("Go back in history in a currently active TabSoda tab",(A,v)=>{const{tabSoda:E}=v(),f=E.activeTab;if(E.tabs[f].length<2)return;const g=E.tabs[f][1];A(d(g)),A((0,s.ez)(f))});p.meta={name:"createThunk",key:"createThunktabSodaGoBackInActiveTab",description:"Go back in history in a currently active TabSoda tab"}},43990:(j,T,e)=>{"use strict";e.d(T,{G3:()=>h,Kd:()=>d,TC:()=>i,V4:()=>E,Yr:()=>f,kf:()=>A,lj:()=>_,ny:()=>v});var t=e(152073),n=e(446632),s=e(219477),a=e(449552),c=e(60552),r=e(961024),o=e(129318),u=e(934861),m=e(119501);const i="workspace_switcher_awareness",d=(0,n.A)(()=>(0,r.A)()?"treatment":(0,t.B9)(i)),_=(0,n.A)(()=>(0,t.fW)(i)),h=(0,n.A)(()=>d()===t.dw.Control),p=(0,n.A)(()=>{const g=Object.values((0,a.getStoreInstanceMap)());let y=0;return(0,s.A)(g,I=>{if(!I)return!1;const O=I.getState();return(0,u.qR)((0,o.H7)(O))&&(y+=1),y>1})}),A=l(()=>{(0,m.q9)("hasSeenWorkspaceSwitcherAwareness",!0)},"markWorkspaceSwitcherAwarenessAsSeen"),v=l(()=>(0,m.W6)("hasSeenWorkspaceSwitcherAwareness"),"hasSeenWorkspaceSwitcherAwareness"),E=l(()=>{v()&&(0,m.q9)("hasSeenWorkspaceSwitcherAwareness",!1)},"workspaceSwitcherAwarenessCleanupCallback"),f=l(g=>{let{toggleName:y,toggleGroup:I}=g;return(0,c.A)(y,I,!1)&&p()},"isEligibleForWorkspaceSwitcherAwareness")},27530:(j,T,e)=>{"use strict";e.d(T,{Ay:()=>a,c:()=>s});var t=e(180491);let n=null;function s(){return n}l(s,"getLastTeamSwitchTimestamp");const a=l(r=>{let{prevTeamId:o,nextTeamId:u,navigationTimestamp:m}=r;return o===u||!m||(n=m),t.S.resolve()},"__WEBPACK_DEFAULT_EXPORT__");Object.defineProperty({lastTeamSwitchTimestamp:null},"lastTeamSwitchTimestamp",{get:()=>n,set:r=>{n=r}})},982737:(j,T,e)=>{"use strict";e.d(T,{go:()=>Ee,xy:()=>Q});var t=e(167490),n=e(810225),s=e(483869),a=e(137252),c=e(682520),r=e(449552),o=e(119501),u=e(881805),m=e(437556),i=e(247041),d=e(135713),_=e(885850),h=e(541179),p=e(285955),A=e(249564),v=e(172889),E=e(738467),f=e(152073),g=e(11338),y=e(847681),I=e(709118),O=e(47801),M=e(529734),C=e(695823),P=e(227913),L=e(211700);function x(){var G,Ae;return{hardware_concurrency:(G=window.navigator)===null||G===void 0?void 0:G.hardwareConcurrency,device_memory:(Ae=window.navigator)===null||Ae===void 0?void 0:Ae.deviceMemory}}l(x,"getDeviceStats");function F(){const G=localStorage==null?void 0:localStorage.getItem("client_metrics_client_redux_size"),Ae=(0,a.Hn)(),ce=(0,a.Ey)(),de=Ae&&ce?(Ae/ce).toPrecision(4):null;return{total_client_redux_size:G,js_heap_used:Ae,js_heap_total:ce,js_heap_used_percentage:de}}l(F,"getPerfMemoryStats");function V(){const G=localStorage==null?void 0:localStorage.getItem("client_metrics_app_stats");if(!G)return{};try{return JSON.parse(G)}catch(Ae){return(0,c.Wo)().warn("Error parsing appStats in localStorage:",G,Ae),{}}}l(V,"getDesktopAppStats");function B(){return{...(0,I.JP)(),num_started_sockets:(0,E.eK)(),frontend_build_type:(0,t.JS)(),object_store_redux_group:(0,f.B9)(P.Wv)}}l(B,"getClientStateTags");function D(G,Ae){const ce=Ae.startSpan("add_tags:channels_info",{tags:{_auto_analytics:""}}),de=Object.values((0,_.DM)(G)).length,oe=Object.values((0,_.h3)(G)).length,$=Object.values((0,_._B)(G)).length,re=Object.values((0,_.FS)(G)).length;return ce.close(),{num_channels_in_redux:de,num_all_channels_user_is_in:oe,num_dms_user_is_in:$,num_group_dms_user_is_in:re}}l(D,"getChannelInfoTags");function S(G,Ae){const ce=Ae.startSpan("add_tags:drafts_info",{tags:{_auto_analytics:""}}),de=Object.keys((0,h.Hw)(G)||{}).length,oe=(0,s.sZ)((0,h.my)(G));return ce.close(),{num_drafts:de,drafts_store_size:oe}}l(S,"getDraftsInfoTags");function R(G){return{user_locale:(0,i.JK)({teamOrEnterpriseId:(0,u.JY)(G)})}}l(R,"getLocaleTags");function w(G){return{active_collab_instance_count:(0,v.Ui)(),open_quip_embed_instance_count:(0,A.oj)(G).length,canvas_child_window_count:(0,y.CJ)()}}l(w,"getCanvasTags");const Y=l(G=>{const Ae=["spaceship_beyond_iframes","selector_memo","cfm_by_store"],ce={};return Ae.forEach(oe=>{const $=(0,d._Z)(G,oe,!1);$&&(ce[oe]=$)}),["redux_slice_tracker"].forEach(oe=>{const $=(0,f.B9)(oe);$!==f.dw.NoGroup&&(ce[oe]=$)}),ce.ia4=(0,M.cc)(G)?"on":"off",ce},"getExperimentTagsForTraces"),Q=l((G,Ae)=>{const ce=Ae??["desktop_flannel_emoji"],de={},oe=(0,d.Vs)(G),$=Date.now()/1e3,re=60*60*24*7*4;for(const[ue,te]of Object.entries(oe)){const{trigger:ae,schedule_ts:H}=te;(ce.includes(ue)||ae&&H&&ae!=="finished"&&ae!=="force_debug"&&H>$-re)&&(de[ue]=te.group)}return de},"getExperimentTags");function Z(G){return{num_members_in_redux:(0,m.I_)(G).length}}l(Z,"getMembersTags");function ee(G){const Ae=(0,o.W6)("lastColdBootTs"),ce=(0,C.pp)(G);return{last_cold_boot_ts:Ae,boot_type:ce}}l(ee,"getConfigTags");function _e(){return{is_in_active_huddle:(0,O.NZ)()}}l(_e,"getHuddleTags");function Ee(G){const Ae=(0,r.getStateForClientStore)();if(!Ae)return{};const ce=G??(0,p.getFocusedWorkspace)(Ae),de=(0,r.getStateByTeamId)(ce),oe=(0,n.F)(),$=oe.createTrace({traceName:"add_tags:performance_tracing_tags"}),re=(0,I.Kh)(ce),ue=B(),te=D(de,$),ae=S(de,$),H=x(),U=F(),N=V(),K=R(de),W=Z(de),J=ee(de),q=g.qV.getTraceTags(),ie=Y(de),Te=w(de),Me=_e(),ke={...re,...ue,...te,...ae,...H,...U,...N,...K,...W,...J,...q,...ie,...Te,...Me};return oe.reportTrace($),ke}l(Ee,"getPerformanceTracingTags"),(0,L.zv)("performanceTracingTags",Ee)},785028:(j,T,e)=>{"use strict";e.d(T,{A:()=>An});var t=e(449552),n=e(296540),s=e(449677),a=e(534216),c=e(521665),r=e(539044),o=e(455970),u=e(503948),m=e(831314),i=e(494030),d=e(705930),_=e(947942),h=e(180491),p=e(369391),A=e(866405),v=e.n(A),E=e(528919),f=e(867973),g=e(649098),y=e(292443),I=e(514919),O=e(502372),M=e.n(O),C=e(155988),P=e.n(C),L=e(222071),x=e.n(L),F=e(364009);const V=new g.Ay("refreshed_header"),B={elementName:"header_slack_logo",onClick:{enableClogAction:!0}},D={elementName:"header_signin",onClick:{enableClogAction:!0}},S={elementName:"header_create_account",onClick:{enableClogAction:!0}},R={elementName:"header_create_workspace",onClick:{enableClogAction:!0}},w=M()&&P()?`${M()}, ${P()} 2x`:void 0,Q=l(vt=>{let{showSignInLink:xt=!1,showCreateAccountLink:Vt=!1,showCreateWorkspaceLink:Se=!1,showHorchataBackground:St=!1,confirmedEmailPill:Ce,hideLogo:Ne=!1,isSSBBrowserSignin:ze=!1,showSfLogo:Oe=!1,isWarningBannerDisplayed:Fe=!1,govSlackTheme:_t=!1,isLandingPage:ft=!1,clientTheme:Ct,joinerRedesignTreatment:$t=!1}=vt;return n.createElement("header",{className:(0,E.A)("p-refreshed_page__header",{"p-refreshed_page__header--should_wrap":!!Ce,"p-refreshed_page__header--is_horchata_landing_bg":St,"p-refreshed_page__header--no_logo":!!Ne,"p-refreshed_page__header--sf_slack_logo":Oe,"p-refreshed_page__header--display_warning_banner":Fe,"p-refreshed_page__header--gov_slack":_t,"p-refreshed_page__header--landing":ft,"p-refreshed_page__full_background":$t})},n.createElement("div",{className:"left-col"}),n.createElement("div",{className:"center-col"},Oe&&Ne&&n.createElement("img",{srcSet:w??void 0,src:M(),alt:""}),!Ne&&n.createElement(y.A,{href:(0,f.A)(),autoClogProps:B,target:"_self"},n.createElement("img",{alt:"Slack",src:_t||Ct===F.Sx.Dark?x():v(),height:"26",title:"Slack"})),Ce),n.createElement("div",{className:"right-col"},xt&&n.createElement("div",{className:"p-refreshed_page__header_sidelink"},V.t("Already have an account?"),n.createElement("br",null),n.createElement(y.A,{href:"/signin",className:"bold",autoClogProps:D,target:"_self"},V.t("Sign in instead"))),Vt&&n.createElement("div",{className:"p-refreshed_page__header_sidelink"},V.t("Don\u2019t have an account yet?"),n.createElement("br",null),n.createElement(y.A,{href:`/signup${window.location.search}`,className:"bold",autoClogProps:S,target:"_self"},V.t("Create an account"))),Se&&n.createElement("div",{className:"p-refreshed_page__header_sidelink"},V.t("New to Slack?",{fallbackHash:"2f63cb0ff8e7e3d18574aa36be246a7723cef6fc"}),n.createElement("br",null),n.createElement(y.A,{href:`${ze?"/ssb":""}/get-started${window.location.search}#${I.EU.CreateNew}`,className:"bold",autoClogProps:R,target:"_self"},V.t("Create an account")))))},"RefreshedHeader");var Z=e(425317),ee=e(876470),_e=e(974852);const Ee=l(vt=>{let{inviteDetails:xt,children:Vt}=vt;return!xt||!(0,ee.YB)(xt)?Vt:n.createElement("div",{className:"p-external_workspace_invite_branding_wrapper__container"},n.createElement(_e.z,{invite:xt,bottomMargin:!0}),n.createElement("div",{className:"p-external_workspace_invite_branding_wrapper__contents"},Vt))},"ExternalWorkspaceInviteBrandingWrapper");Ee.displayName="ExternalWorkspaceInviteBrandingWrapper";const G=Ee,Ae=l(vt=>{let{children:xt,showHorchataBackground:Vt,showSignInLink:Se,showCreateAccountLink:St,showCreateWorkspaceLink:Ce,hideRegionPicker:Ne,clientTheme:ze,hideFooter:Oe=!1,confirmedEmailPill:Fe,hideHeader:_t=!1,isSSBBrowserSignin:ft=!1,showSfLogo:Ct=!1,isWarningBannerDisplayed:$t=!1,govSlackTheme:rn=!1,isLandingPage:un=!1,joinerRedesignTreatment:hn=!1,inviteDetails:pn}=vt;return n.createElement(G,{inviteDetails:pn},n.createElement(n.Fragment,null,!_t&&n.createElement(Q,{showSignInLink:Se,showCreateAccountLink:St,showCreateWorkspaceLink:Ce,showHorchataBackground:Vt,confirmedEmailPill:Fe,isSSBBrowserSignin:ft,showSfLogo:Ct,hideLogo:Ct,isWarningBannerDisplayed:$t,govSlackTheme:rn,isLandingPage:un,clientTheme:ze,joinerRedesignTreatment:hn}),rn?n.createElement("div",{className:"p-refreshed_page_layout__children--gov_slack"},xt):xt,!Oe&&n.createElement(Z.A,{hideRegionPicker:Ne,govSlackTheme:rn,joinerRedesignTreatment:hn})))},"RefreshedPageLayout");Ae.displayName="RefreshedPageLayout";const ce=Ae;var de=e(542138),oe=e(927675);const $=new g.Ay("sign_in");function re(vt){const{isSSB:xt,isSSBSignIn:Vt,hasPromoOffer:Se,shouldRedirect:St,redirectURL:Ce,loggedInTeams:Ne,entryPoint:ze=""}=vt;return n.createElement("div",{className:"align_center","data-qa":"signedin_workspaces"},!Se&&!xt&&n.createElement("p",{className:"small_bottom_margin"},$.t("You're already signed in to {loggedInTeams, plural, =1 {this workspace} other {these workspaces}}:",{loggedInTeams:Ne})),n.createElement("p",{className:"col span_4_of_6 margin_auto float_none"},Ne.map((Oe,Fe)=>n.createElement(oe.z9,{key:Oe.id,"data-qa":`signedin_workspace_link_${Fe+1}`,className:"team-signin-link small_margin","data-team-id":Oe.id,autoClogProps:{elementName:"team_domain",elementValue:Oe.id.toString(),entryPoint:ze,onClick:{enableClogAction:!0}},href:Vt?`${Oe.url}ssb/signin_redirect`:`${Oe.url}${St?`?redir=${Ce}`:""}`,"aria-label":$.t("Go to {teamName} on Slack",{teamName:Oe.name}),type:"outline"},Oe.name))))}l(re,"SignedInWorkspaces");var ue=e(532395),te=e(238798),ae=e(61629),H=e(241697),U;(function(vt){vt.INVALID_CODE="invalid_pin",vt.RATE_LIMITED="ratelimited",vt.SMS_RATE_LIMITED="two_factor_sms_rate_limited",vt.TOO_MANY_ATTEMPTS="two_factor_too_many_attempts",vt.INTERNAL_ERROR="internal_error"})(U||(U={}));var N;(function(vt){vt.SMS="sms",vt.APP="app",vt.EMAIL="email",vt.EMERGENCY="emergency"})(N||(N={}));var K;(function(vt){vt.REQUEST_CODE="request_primary",vt.REQUEST_BACKUP="request_backup",vt.SUBMIT_PRIMARY="submit_primary",vt.SUBMIT_BACKUP="submit_backup",vt.SUBMIT_EMERGENCY="submit_emergency"})(K||(K={}));const W=new g.Ay("sign_in"),J={elementName:"help_button",onClick:{enableClogAction:!0}},q=l(vt=>{const xt=vt.action===K.REQUEST_BACKUP||vt.action===K.SUBMIT_BACKUP;return xt&&vt.twoFactorBackupType===N.APP||!xt&&vt.twoFactorType===N.APP},"currentMethodIsApp"),ie=l(vt=>q(vt)?W.t("Problems with your authentication app?"):W.t("Problems with your code?"),"renderProblemsString"),Te=l(vt=>q(vt)?n.createElement("div",{className:"subtle_silver small medium_top_margin"},n.createElement("p",{className:"no_bottom_margin"},W.t("Check your authentication app for your code.")),n.createElement("p",null,W.rt("<a>Having trouble finding your code?</a>",null,xt=>{let{tag:Vt,text:Se}=xt;return Vt==="a"?n.createElement(y.A,{href:`https://${(0,H.qF)()}/help/articles/204509068-Enabling-two-factor-authentication`,target:"_blank"},Se):null})),n.createElement("p",null,W.rt("If your app is unavailable, use a <a>backup code</a>.",null,xt=>{let{tag:Vt,text:Se}=xt;return Vt==="a"?n.createElement(y.A,{href:`https://${(0,H.qF)()}/help/articles/204509068#troubleshoot-2fa`,target:"_blank"},Se):null}))):n.createElement("p",{className:"align_left subtle_silver small"},W.rt("You can also try a backup code, if you have one. For other issues, read more about <a>two-factor authentication</a>, or contact your workspace administrator for help.",null,xt=>{let{tag:Vt,text:Se}=xt;return Vt==="a"?n.createElement(y.A,{href:`https://${(0,H.qF)()}/help/articles/204509068-Enabling-two-factor-authentication`,target:"_blank"},Se):null})),"renderProblems");Te.displayName="renderProblems";const Me=l(vt=>{const[xt,Vt]=(0,n.useState)(!1);return n.createElement("div",{className:"p-enter-code__help_button"},n.createElement(y.A,{tabIndex:0,className:"p-enter-code__get_help_link",onClick:()=>Vt(!xt),autoClogProps:J},n.createElement(ae.A,{type:"question-circle"})," ",ie(vt)),xt&&n.createElement("div",{className:"send_code_block"},vt.children,n.createElement("div",{className:"col span_4_of_6 float_none margin_auto"},n.createElement("hr",{className:"medium_bottom_margin"}),Te(vt))))},"GetHelpButton");Me.displayName="GetHelpButton";var ke=e(351582),Pe=e(276868),Ie=e(786116),X=e(682919);function ne(){return ne=Object.assign||function(vt){for(var xt=1;xt<arguments.length;xt++){var Vt=arguments[xt];for(var Se in Vt)Object.prototype.hasOwnProperty.call(Vt,Se)&&(vt[Se]=Vt[Se])}return vt},ne.apply(this,arguments)}l(ne,"_extends");let fe=l(class extends n.Component{render(){const{ariaDescribedBy:xt}=this.props;return n.createElement("div",{className:(0,E.A)("two_factor_input_item",{focused:this.props.hasFocus})},n.createElement("input",{autoComplete:this.props.autocomplete,ref:this.props.refToForward,type:"text",inputMode:"numeric",pattern:"\\d*",value:this.props.value,"aria-disabled":this.props.disabled,disabled:this.props.disabled,maxLength:1,onKeyDown:this.onKeyDown,onKeyPress:this.onKeyPress,onChange:this.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onPaste:this.onPaste,"aria-label":this.props.ariaLabel,"aria-describedby":xt}))}constructor(...xt){super(...xt),this.onKeyDown=Vt=>{switch(Vt.keyCode){case Pe.G_:{Vt.currentTarget.value||this.props.moveLeft();return}case Pe.UQ:return Vt.preventDefault(),this.props.moveLeft();case Pe.LE:return Vt.preventDefault(),this.props.moveRight();default:break}},this.onKeyPress=Vt=>{!(0,X.A)(Vt.which)&&Vt.charCode&&!(0,Ie.A)(Vt)&&Vt.preventDefault()},this.onChange=Vt=>{const Se=Vt.target.value;(/^[0-9]$/.test(Se)||Se==="")&&this.props.onChange(Se)},this.onPaste=Vt=>{Vt.preventDefault();const Se=window.clipboardData||Vt.clipboardData,St=Se.getData("text")||Se.getData("text/plain"),Ce=/\D/g,Ne=St.replace(Ce,"");this.props.onPaste(Ne)}}},"TwoFactorDigitInput");fe.displayName="TwoFactorDigitInput";const be=n.forwardRef((vt,xt)=>n.createElement(fe,ne({},vt,{refToForward:xt}))),Be=new g.Ay("team_creation");let We=l(class extends n.Component{focusInput(xt){const Vt=this.inputRefs[xt];Vt!=null&&Vt.current&&Vt.current.focus()}moveLeft(xt){xt<=0||this.focusInput(xt-1)}moveRight(xt){xt>=this.state.values.length-1||this.focusInput(xt+1)}isComplete(xt){return!xt.some(Vt=>!Vt)}clear(){this.setState(xt=>({values:xt.values.map(()=>""),focusedInputIndex:0})),this.focusInput(0)}onChange(xt,Vt){const Se=this.state.values.slice();Se[xt]=Vt,this.setState(()=>({values:Se}),()=>{Vt&&!this.isComplete(this.state.values)&&this.moveRight(xt)})}componentDidUpdate(xt,Vt){var Se;if(this.state.focusedInputIndex!==-1&&document.activeElement!==((Se=this.inputRefs[this.state.focusedInputIndex])===null||Se===void 0?void 0:Se.current)&&this.focusInput(this.state.focusedInputIndex),this.props.codeLength!==xt.codeLength&&this.onCodeLengthChange(Vt),!this.isComplete(Vt.values)&&this.isComplete(this.state.values)||this.isComplete(this.state.values)&&Vt.values.join("")!==this.state.values.join("")){const St=this.state.values.join("");this.props.onFillCode(St)}else Vt.values.join(",")!==this.state.values.join(",")&&this.props.onChange()}componentDidMount(){this.focusInput(0)}renderInputs(xt,Vt){return this.state.values.slice(xt,Vt).map((Se,St)=>{const Ce=St+xt;return n.createElement(be,{autocomplete:Ce===0?"one-time-password":"off",key:Ce,ref:this.inputRefs[Ce],moveLeft:()=>this.moveLeft(Ce),moveRight:()=>this.moveRight(Ce),onChange:Ne=>this.onChange(Ce,Ne),onPaste:this.onPaste,onFocus:()=>{this.setState(()=>({focusedInputIndex:Ce}))},onBlur:()=>this.setState(()=>({focusedInputIndex:-1})),hasFocus:this.state.focusedInputIndex===Ce,value:this.state.values[Ce],ariaLabel:Be.t("digit {inputIndex} of {numberOfInputs}",{inputIndex:Ce+1,numberOfInputs:this.state.values.length}),ariaDescribedBy:this.props.ariaDescribedBy,disabled:this.props.disabled})})}render(){return n.createElement("div",{className:"display_flex align_items_center margin_bottom_50","data-qa":"confirmation_code_input"},n.createElement("div",{className:"display_flex"},this.renderInputs(0,this.props.codeLength)))}constructor(xt){super(xt),this.onPaste=Vt=>{const Se=this.state.focusedInputIndex;if(Se===-1)return;const St=this.state.values.length-Se,Ce=Vt.substring(0,St).split(""),Ne=this.state.values.slice();Ce.forEach((ze,Oe)=>{const Fe=Oe+Se;Ne[Fe]=ze}),this.setState(()=>({values:Ne}),()=>{this.focusInput(Math.min(this.state.values.length-1,Se+Ce.length))})},this.onCodeLengthChange=Vt=>{const Se=(0,ke.A)(this.props.codeLength,()=>"");Vt.values.forEach((St,Ce)=>{Ce<Se.length&&(Se[Ce]=St)}),this.setState(()=>({values:Se})),this.inputRefs=Se.map(()=>n.createRef())},this.state={values:(0,ke.A)(xt.codeLength,()=>""),focusedInputIndex:-1},this.inputRefs=this.state.values.map(()=>n.createRef())}},"TwoFactorCodeInput");We.displayName="TwoFactorCodeInput",We.defaultProps={isNumbersOnly:!0};const Re=new g.Ay("sign_in");function ve(vt){let xt=null;return vt.error===U.SMS_RATE_LIMITED?xt=Re.rt("Apologies! There were too many SMS message requests in a short period, so you\u2019ll have to wait a moment to try again."):vt.error===U.INVALID_CODE?xt=Re.rt("Your two-factor authentication code was incorrect. Please try again."):vt.error===U.RATE_LIMITED?xt=Re.rt("You\u2019ve been trying to log in too often. Wait a few minutes and try again."):vt.error===U.TOO_MANY_ATTEMPTS?xt=Re.rt("We\u2019ve detected too many failed attempts to enter a code. For safety we\u2019ve reset your password. Please check your email for further information.",{fallbackHash:"7773426b227dec3b18a254adf97a7e212e998276"}):xt=Re.rt("An unknown error occurred."),n.createElement(p.Ay,{className:"p-enter-code-error__alert",type:p.QE.boxed,icon:"lock-o",level:p.A_.error,align:p.AO.left,"data-qa":"2fa_code_error_alert"},n.createElement("span",null,xt))}l(ve,"EnterCodeError");var xe=e(917780),He=e(658336),je=e(458160);function Ke(){return Ke=Object.assign||function(vt){for(var xt=1;xt<arguments.length;xt++){var Vt=arguments[xt];for(var Se in Vt)Object.prototype.hasOwnProperty.call(Vt,Se)&&(vt[Se]=Vt[Se])}return vt},Ke.apply(this,arguments)}l(Ke,"enter_code_root_extends");const ht=new g.Ay("sign_in"),dt=5*60*1e3,Ve={elementName:"resend_button",onClick:{enableClogAction:!0}},Je={elementName:"backup_button",onClick:{enableClogAction:!0}},Ge={elementName:"emergency_backup_button",onClick:{enableClogAction:!0}},Le="two_factor_form",Mt="enter-code",Dt=6;var pt;(function(vt){vt.Request="request_primary",vt.RequestBackup="request_backup",vt.SubmitPrimary="submit_primary",vt.SubmitBackup="submit_backup",vt.SubmitEmergency="submit_emergency",vt.None="none"})(pt||(pt={}));function Qt(vt){const[xt,Vt]=(0,n.useState)(vt.twoFactorType),[Se,St]=(0,n.useState)("");var Ce;const[Ne,ze]=(0,n.useState)((Ce=vt.action)!==null&&Ce!==void 0?Ce:pt.None),[Oe,Fe]=(0,n.useState)(!1),[_t,ft]=(0,n.useState)(Dt),[Ct,$t]=(0,n.useState)(!1),rn=n.useRef(null),un=n.createRef(),hn=vt.submitOverride,{trackClogAuthRef:pn,clogAuthLoginClick:Tn,trackClog:Qn}=(0,je.$A)(),zn=pn({eventId:ue.EventId.AUTH_WORKSPACE_ENTER_CODE,uiPage:Mt});(0,n.useEffect)(()=>{if(Oe){var Pt,Xe;if((Pt=Qn.current)===null||Pt===void 0||(Xe=Pt.track)===null||Xe===void 0||Xe.call(Pt,{elementName:Le,elementValue:Ne}),Tn({eventId:ue.EventId.AUTH_WORKSPACE_ENTER_CODE,elementName:Le,uiPage:Mt,elementValue:Ne})(),hn&&un.current)Fe(!1),$t(!0),hn(Se,Ne,vt.magicLogin).then(()=>{var lt;(lt=rn.current)===null||lt===void 0||lt.clear(),$t(!1)});else{var Ze;(Ze=un.current)===null||Ze===void 0||Ze.submit()}}},[Ne,Oe,un,Qn,Se,hn,vt.magicLogin,Tn]),(0,n.useEffect)(()=>{(vt.error===U.RATE_LIMITED||vt.error===U.TOO_MANY_ATTEMPTS)&&$t(!0),vt.error===U.RATE_LIMITED&&setTimeout(()=>{$t(!1)},dt)},[vt.error]);const Hn=xt===N.EMERGENCY,Kn=Ne===pt.RequestBackup||Ne===pt.SubmitBackup,os=!Hn&&(Kn&&vt.twoFactorBackupType===N.SMS||!Kn&&vt.twoFactorType===N.SMS||vt.twoFactorType===N.EMAIL),et=vt.twoFactorType===N.EMAIL,Et=vt.twoFactorType===N.SMS?ht.rt("Send Code to Primary Phone"):ht.rt("Use Authentication App"),we=vt.twoFactorBackupType===N.SMS?ht.rt("Send Code to Backup Phone"):ht.rt("Use Backup Authentication App"),tt=l(()=>n.createElement(oe.$n,{type:"outline",onClick:()=>{ze(Kn?pt.RequestBackup:pt.Request),Fe(!0)},autoClogProps:Ve},Kn?ht.rt("Resend Code to Backup Phone"):ht.rt("Resend Code")),"ResendButton"),Rt=l(()=>n.createElement(oe.$n,{type:"outline",onClick:()=>{ze(Kn?pt.Request:pt.RequestBackup),Fe(!0)},autoClogProps:Je},Kn?Et:we),"BackupButton");Rt.displayName="BackupButton";const It=l(()=>{let Pt;return Hn?Pt=Kn?we:Et:Pt=ht.rt("Use Emergency Backup Code",{fallbackHash:"722971c61482e6fdf1d0c37abc0d6505ac884e0c"}),n.createElement(oe.$n,{type:"outline",onClick:()=>{Hn?(Vt(vt.twoFactorType),ft(Dt)):(Vt(N.EMERGENCY),ft(vt.emergencyCodeLength))},autoClogProps:Ge},Pt)},"EmergencyButton");It.displayName="EmergencyButton";const Jt=l(()=>vt.twoFactorType===N.EMAIL?vt.isClientApp?ht.rt("We don\u2019t recognize this device",{fallbackHash:"c7a15a747957cbfe27c485a1f69bd93d726680b6"}):ht.rt("We don\u2019t recognize this browser",{fallbackHash:"c7a15a747957cbfe27c485a1f69bd93d726680b6"}):ht.rt("Enter your authentication code"),"GetHeader"),an=l(()=>{if(Hn)return ht.rt("Check the list of emergency backup codes provided when setting up 2FA.",{fallbackHash:"722971c61482e6fdf1d0c37abc0d6505ac884e0c"});if(Kn)return vt.twoFactorBackupType===N.APP?ht.rt("Check your authentication app for your code."):ht.rt("We\u2019ve sent an authentication code to your backup phone <br></br> for signing into <strong>{teamName}</strong>.",{teamName:vt.teamName});switch(vt.twoFactorType){case N.APP:return ht.rt("Check your authentication app for your code.");case N.EMAIL:return ht.rt("We hate to be a bother, but we need to do our due diligence to keep your account safe. Please enter the code we\u2019ve just sent to {emailAddress} below to complete your sign-in.",{teamName:vt.teamName,emailAddress:vt.emailAddress,fallbackHash:"482df38f5efc61b851c499bff4080846e0f2b65b"});default:return ht.rt("We\u2019ve sent an authentication code to your phone for signing into <strong>{teamName}</strong>.",{teamName:vt.teamName})}},"GetSubheader"),Ft=l(Pt=>{let Xe;Hn?Xe=pt.SubmitEmergency:Xe=Kn?pt.SubmitBackup:pt.SubmitPrimary,St(Pt),ze(Xe),Fe(!0)},"onFillCode"),Vn=(0,xe.d4)(He.to);return n.createElement(te.A,{eventId:ue.EventId.TWO_FACTOR_AUTH,uiPage:Mt,trackClogRef:zn},n.createElement(ce,{clientTheme:Vn},n.createElement(de.A,{heading:Jt(),subHeading:an(),subHeadingClassName:"p-enter_code_app__view_sub_header"},vt.codeResent&&n.createElement(p.Ay,{className:"p-enter-code-error__alert",type:p.QE.boxed,icon:"paper-plane",level:p.A_.info,align:p.AO.left,"data-qa":"2fa_code_resent_alert"},et?ht.rt("We\u2019ve sent a fresh code to {emailAddress} for signing into <strong>{teamName}</strong>.",{teamName:vt.teamName,emailAddress:vt.emailAddress,fallbackHash:"ed10973da08d5a9563d5aa07b51e6771457ef6b0",fallbackHashNs:"find_team"}):ht.rt("We\u2019ve sent a fresh code to your phone for signing into <strong>{teamName}</strong>.",{teamName:vt.teamName})),vt.error&&n.createElement(ve,{error:vt.error}),n.createElement("form",{ref:un,className:"p-enter_code",method:"POST"},n.createElement("div",{className:"p-enter_code__input_container"},n.createElement("fieldset",{className:"p-enter_code__input_fieldset"},n.createElement("legend",{className:"offscreen"},ht.rt("{codeLength}-digit confirmation code",{codeLength:_t,fallbackHash:"0279e13b54733feec1317a9d5a3f36bfe1b56e30"})),n.createElement(We,{ref:rn,onFillCode:Ft,onChange:()=>{},hideDash:!0,error:vt.error,disabled:Ct,codeLength:_t}),n.createElement("input",{type:"hidden",name:"2fa_magiclogin",value:vt.magicLogin}),vt.redir.length>0&&n.createElement("input",{type:"hidden",name:"redir",value:vt.redir}),n.createElement("input",{type:"hidden",name:"remember",value:vt.remember?"1":"0"}),n.createElement("input",{type:"hidden",name:"has_remember",value:vt.hasRemember}),n.createElement("input",{type:"hidden",name:"2fa_code",value:Se}),n.createElement("input",{type:"hidden",name:"2fa_action",value:Ne})))),n.createElement(Me,Ke({},vt),n.createElement("div",{className:"p-enter-code__button"},os&&n.createElement(tt,null),vt.twoFactorBackupType&&!Hn&&n.createElement(Rt,null),!et&&n.createElement(It,null))),vt.loggedInTeams.length>0&&n.createElement("div",{className:"p-enter-code__logged_in_teams"},n.createElement(re,Ke({},vt))))))}l(Qt,"EnterCodeRoot");var Nt=e(119501),bt=e(516863),Yt=e(405728),fn=e(867937);function Tt(){return Tt=Object.assign||function(vt){for(var xt=1;xt<arguments.length;xt++){var Vt=arguments[xt];for(var Se in Vt)Object.prototype.hasOwnProperty.call(Vt,Se)&&(vt[Se]=Vt[Se])}return vt},Tt.apply(this,arguments)}l(Tt,"enter_2fa_code_modal_extends");const sn=new g.Ay("2fa_modal"),mn={enter2faCodeModal:"enter_2fa_code_modal",cancelButton:"enter_2fa_code_modal_cancel_button"},wt={isSSB:!0,isSSBSignIn:!0,hasPromoOffer:!1,shouldRedirect:!1,redirectURL:"",loggedInTeams:[],remember:!1,hasRemember:"",children:void 0,isOpen:!0};function On(vt,xt){const Vt=(0,Nt.vS)();if(vt!==void 0){const St=Vt[vt].two_factor_magic_login;St!==void 0&&St.token&&(St.token=xt),(0,Nt.q9)("pendingAuthTeams",Vt)}}l(On,"updateLocalConfig2fa");function Zt(vt){const xt=(0,Nt.vS)();if(vt!==void 0){const Vt=xt[vt];Vt.two_factor_magic_login=void 0,(0,Nt.q9)("pendingAuthTeams",xt)}}l(Zt,"clearLocalConfig2faMagicLogin");function Mn(vt){let{magicLogin:xt,teamId:Vt,type:Se,backupType:St,emergencyLength:Ce,emailAddress:Ne,teamName:ze,currentTeamId:Oe,isOpen:Fe,closeModal:_t}=vt;const[ft,Ct]=(0,n.useState)(xt),[$t,rn]=(0,n.useState)(null),[un,hn]=(0,n.useState)(!1),pn=Oe?(0,t.getStoreInstanceByTeamId)(Oe):void 0,Tn=(0,n.useCallback)((zn,Hn,Kn)=>{const os={magic_token:Kn,ssb:!0,two_factor_native_supported_v2:!0,two_factor_pin:zn,two_factor_is_backup:Hn===K.REQUEST_BACKUP||Hn===K.SUBMIT_BACKUP};return Hn===K.REQUEST_CODE||Hn===K.REQUEST_BACKUP?(os.two_factor_pin="",hn(!0)):hn(!1),new h.S(et=>{(0,_.j)("auth.loginMagic",os,(Et,we)=>{if(Et&&we.refreshed_magic_login){var tt;Ct(we.refreshed_magic_login),On(Vt,we.refreshed_magic_login),!((tt=we.reason)===null||tt===void 0)&&tt.match(/^missing_/)||rn(we.reason),et(Et)}else Et&&we.team?(0,bt.A)({currentTeamStore:pn,newWorkspaceId:Vt,navigateToRouteProps:{routeName:Yt.o},shouldAutoSignIn:!0}).then(()=>{_t(),et(Et)}):(Zt(Vt),(0,bt.A)({currentTeamStore:pn,newWorkspaceId:Vt,navigateToRouteProps:{routeName:Yt.o}}).then(()=>{_t(),et(Et)}))})})},[Vt,pn,_t]);(0,fn.A)(()=>{Tn("",K.SUBMIT_PRIMARY,ft??"")},[]);const Qn=sn.t("Finish signing into {teamName}",{teamName:ze,fallbackHash:"e27938a88eacaa79d651d3aeb0bc39d128f0dd6c",fallbackHashNs:"team_picker"});return n.createElement(s.A,{isOpen:Fe,contentLabel:"two_factor",maxWidth:"800px",centered:!0,closeModal:_t,dataQa:mn.enter2faCodeModal},n.createElement(a.A,null,n.createElement(c.A,{title:Qn})),n.createElement(r.A,null,n.createElement(i.A,null,n.createElement("div",{id:"enter-code-app-root"},n.createElement(Qt,Tt({},wt,{teamName:ze,error:$t,action:null,magicLogin:ft||"",twoFactorType:Se,twoFactorBackupType:St,emailAddress:Ne,codeResent:un,redir:"",emergencyCodeLength:Ce,isClientApp:!0,submitOverride:Tn}))))),n.createElement(o.A,null,n.createElement(u.A,null,n.createElement(m.A,{type:"outline","data-qa":mn.cancelButton},sn.t("Cancel",{fallbackHash:"77dfd2135f4db726c47299bb55be26f7f4525a46",fallbackHashNs:"admin"})))))}l(Mn,"TwoFAModal"),Mn.displayName="TwoFAModal";const Wn=(0,d.e)(Mn);var xn=e(682520),gn=e(285955);function An(vt,xt){const Vt=(0,t.getStateForClientStore)();if(!(0,gn.isWorkspacePendingTwoFactor)(Vt,vt))return!1;const Se=(0,gn.getWorkspacesMeta)(Vt),St=Se==null?void 0:Se[vt],{two_factor_magic_login:Ce,name:Ne}=St,{token:ze,user_2fa_type:Oe,user_2fa_backup_type:Fe,user_emergency_code_length:_t,email:ft}=Ce;let Ct;return xt?Ct=(0,t.getStoreInstanceByTeamId)(xt):Ct=(0,t.getStoreInstanceByTeamId)((0,gn.getFocusedWorkspace)(Vt)),Ct?(Ct.dispatch(Wn({magicLogin:ze,teamId:vt,type:Oe,backupType:Fe,emergencyLength:_t,teamName:Ne,currentTeamId:xt,emailAddress:ft})),!0):((0,xn.Wo)().error("TWO_FACTOR_SSB",`${vt} is pending 2fa, but no store for ${xt}, falling back to openSignIn()`),!1)}l(An,"maybeRenderTwoFactorModal")},584877:(j,T,e)=>{"use strict";e.d(T,{S4:()=>h,Ty:()=>P,ez:()=>_,lf:()=>C});var t=e(45798),n=e(722711),s=e(915773),a=e(209712),c=e(921055),r=e(435932),o=e(581112),u=e(780593),m=e(548050),i=e(129318),d=e(934861),_;(function(L){L.HAS_MENTIONS="has_mentions",L.HAS_SLACK_CONNECT_INVITE="has_slack_connect_invite",L.HAS_THREADS="has_threads",L.IS_ENTERPRISE="is_enterprise",L.IS_EXISTING_JOINER="is_existing_joiner",L.IS_IN_TRIAL="is_in_trial",L.IS_ONBOARDING_COMPLETED="is_onboarding_completed",L.IS_OVER_TWO_WEEKS_OLD="is_over_two_weeks_old",L.IS_USER_PREF_ENABLED="is_user_pref_enabled"})(_||(_={}));const h="should_show_ia4_tabs",p={reason:_.IS_ENTERPRISE,shouldShowTabs:!0},A={reason:_.IS_EXISTING_JOINER,shouldShowTabs:!0},v={reason:_.IS_USER_PREF_ENABLED,shouldShowTabs:!0},E={reason:_.HAS_MENTIONS,shouldShowTabs:!0},f={reason:_.HAS_THREADS,shouldShowTabs:!0},g={reason:_.HAS_SLACK_CONNECT_INVITE,shouldShowTabs:!0},y={reason:_.IS_IN_TRIAL,shouldShowTabs:!0},I={reason:_.IS_ONBOARDING_COMPLETED,shouldShowTabs:!0},O={shouldShowTabs:!0,reason:_.IS_OVER_TWO_WEEKS_OLD},M={shouldShowTabs:!1},C=(0,s.Ay)(L=>{const x=(0,i.H7)(L);if((0,d.r7)(x))return p;const V=(0,u.w)(L);if(!(0,m._)(L)&&V)return A;if((0,c.ty)(L,h))return v;var S;if(((S=(0,n.rz)(L))!==null&&S!==void 0?S:t.Ml).length>0)return E;var w;return((w=(0,n.sG)(L))!==null&&w!==void 0?w:t.Ml).length>0?f:(0,a.RU)(L)?g:(0,r.iH)(L)?y:(0,c.ty)(L,"onboarding_complete")?I:(0,o.H)(L)>=14?O:M});C.meta={name:"createSelector",key:"createSelectorshouldShowTabsWithReason",description:L=>{const x=(0,i.H7)(L);if((0,d.r7)(x))return p;const V=(0,u.w)(L);if(!(0,m._)(L)&&V)return A;if((0,c.ty)(L,h))return v;var S;if(((S=(0,n.rz)(L))!==null&&S!==void 0?S:t.Ml).length>0)return E;var w;return((w=(0,n.sG)(L))!==null&&w!==void 0?w:t.Ml).length>0?f:(0,a.RU)(L)?g:(0,r.iH)(L)?y:(0,c.ty)(L,"onboarding_complete")?I:(0,o.H)(L)>=14?O:M}};const P=(0,s.Ay)(L=>C(L).shouldShowTabs);P.meta={name:"createSelector",key:"createSelectorshouldShowTabs",description:L=>C(L).shouldShowTabs}},172552:(j,T,e)=>{"use strict";e.d(T,{A4:()=>o,BI:()=>s,QW:()=>c,cS:()=>r,uS:()=>a,vh:()=>n});var t=e(442157);const n={...t.M,HermesWebhook:"hermes_webhook",HermesScheduled:"hermes_scheduled"},s=l(u=>u.type===n.Shortcut,"isShortcutTrigger"),a=l(u=>u.type===n.Scheduled||u.type===n.HermesScheduled,"isScheduledTrigger"),c=l(u=>u.type===n.Event,"isNativeEventTrigger"),r=l(u=>u.type===n.Webhook||u.type===n.HermesWebhook,"isWebhookTrigger"),o=l(u=>u.type===n.External,"isExternalEventTrigger")},16700:(j,T,e)=>{"use strict";e.d(T,{$D:()=>i,OR:()=>r,RC:()=>h,Ts:()=>u,WU:()=>_,gN:()=>o,jG:()=>d,jr:()=>p,jt:()=>c,ke:()=>t,qD:()=>m,r1:()=>a,ts:()=>n,u1:()=>s});const t="viewLayoutSidebarWidthIntent",n="viewLayoutSidebarWidthMode",s="viewLayoutSidebarWideWidthIntent",a="viewLayoutSidebarWideWidthMode",c="viewLayoutSidebarExtraWideWidthIntent",r="viewLayoutSidebarExtraWideWidthMode",o="viewLayoutSecondaryWidthIntent",u="viewLayoutSecondaryWidthMode",m="viewLayoutSplitWidthIntent",i="viewLayoutSplitWidthMode",d="viewLayoutIsSidebarVisible",_="viewLayoutIsWorkspaceSwitcherVisible",h="viewLayoutCompactModeEnabled",p="viewLayoutLastSidebarWidth"}},j=>{var T=l(t=>j(j.s=t),"__webpack_exec__");j.O(0,["gantry-v2-vendors","gantry-v2-vendors-client","gantry-v2-shared","client-boot-styles"],()=>T(638860));var e=j.O()}]);})();


//# debugId=8622ba1a-1c4f-5fb0-8149-e047912378f2